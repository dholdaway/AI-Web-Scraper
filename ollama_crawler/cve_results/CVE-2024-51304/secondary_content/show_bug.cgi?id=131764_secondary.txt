Title: 131764 – emerge --usepkg doesn't get all packages
URL: https://bugs.gentoo.org/show_bug.cgi?id=131764

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 131764
emerge --usepkg doesn't get all packages
Last modified: 2006-05-09 17:03:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 131764 
      - emerge --usepkg doesn't get all packages


Summary:
emerge --usepkg doesn't get all packages
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Dependencies

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-30 00:48 UTC by Thomas Schuetz





      Modified:
    
2006-05-09 17:03 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Schuetz





          2006-04-30 00:48:52 UTC
        

I'm owning 2 computers with the same installations so I compile once on one PC and "emerge --usepkg -auvDN world" on the other. For some weeks/months (?) I have problems with this procedure. The command doesn't get all needed packages and my system breaks. If I do a "emerge -auvDN world" without "--usepkg" it finds more packages which need to be updated. I just build up my 2 systems completely new and had problems again on the second machine, so I did a "emerge -e --usepkg world" and a "emerge --usepkg -auvDN world". After that, "emerge -auvDN world" still finds 20 packages which are missing!




Comment 1


Sunny Sachanandani





          2006-05-05 07:10:34 UTC
        

Yes I can confirm this too : although on older versions of portage this does not seem to happen.




Comment 2


Zac Medico






          2006-05-05 10:09:48 UTC
        

Please post the output of `emerge --info`.




Comment 3


Thomas Schuetz





          2006-05-05 12:45:09 UTC
        

Here is the output of emerge --info. And yes, I hadn't this problem before maybe 2006, the older portage seems to work fine like Sunny Sachanandani reported.

Gentoo Base System version 1.6.14
Portage 2203-svn (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.16-gentoo-r3 i686)
=================================================================
System uname: 2.6.16-gentoo-r3 i686 mobile AMD Athlon(tm) XP 1400+
dev-lang/python:     2.4.2
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/thommy/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X alsa apache2 apm arts artswrappersuid asf audiofile avi bash-completion berkdb bitmap-fonts bzip2 cdparanoia cdr cli crypt cups curl dri dvd dvdread eds emboss encode exif expat fam ffmpeg foomaticdb fortran gd gdbm gif glut gmp gpm gtk gtk2 idn imlib ipv6 isdnlog jabber java jpeg kde kdeenablefinal lcms libg++ libwww lua mad mikmod mmx mng motif mozilla mp3 mpeg msn ncurses nls nowin nptl nptlonly ogg openal opengl oscar oss pam pcre pdflib perl php pic png ppds pppd python qt quicktime readline recode reflection samba sdl session spell spl ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts udev usb video_cards_ati video_cards_nv video_cards_nvidia vorbis win32codecs xcomposite xine xml xml2 xmms xorg xv yahoo zlib video_cards_mach64 linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, INSTALL_MASK, LDFLAGS





Comment 4


Zac Medico






          2006-05-05 14:25:11 UTC
        

(In reply to comment #3)
> Here is the output of emerge --info.

Thanks.  Would you like to try the latest ~arch version of portage to see whether the problem exists there too?




Comment 5


Sunny Sachanandani





          2006-05-06 02:26:15 UTC
        

I found out what the problem is : The new portage doesn't pull in build time dependencies while using emerge --usepkg , it only pulls in runtime dependencies (Well one would not need build time dependencies while installing binary packages). Anyway I have made a feature request for another option in emerge so that it pulls build time dependencies also if available as binary packages, I need this because I use binary packages for backups and so I like to replicate my exact system if it breaks down. See bug 132355 for this feature request and please post comments on it (and get more people you know to comment on it and then we can have this behavior again in portage [as in previous versions]).




Comment 6


Thomas Schuetz





          2006-05-06 02:59:32 UTC
        

Ah, yes, that my be the problem! I installed the newest portage and will test this, too. I need to wait for some more updated ebuilds to test, but IIRC today is bug-day, maybe I can test this all tomorrow...




Comment 7


Thomas Schuetz





          2006-05-09 12:46:45 UTC
        

Sunny seems to be right, portage just gets the RDEPENDs, not the DEPENDs with "emerge --usepkg -uD world". So this bug can be closed, it's not a bug, it's a feature :-)
I would prefer if it would be possible to deactivate this.




Comment 8


Zac Medico






          2006-05-09 17:03:40 UTC
        

(In reply to comment #7)
> I would prefer if it would be possible to deactivate this.

And that's bug 132355...











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

