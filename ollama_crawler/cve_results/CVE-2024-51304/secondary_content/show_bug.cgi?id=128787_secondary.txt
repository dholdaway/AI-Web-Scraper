Title: 128787 – eternal-lands-1.2.0_p1-r1 seg faults
URL: https://bugs.gentoo.org/show_bug.cgi?id=128787

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 128787
eternal-lands-1.2.0_p1-r1 seg faults
Last modified: 2006-04-17 05:32:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 128787 
      - eternal-lands-1.2.0_p1-r1 seg faults


Summary:
eternal-lands-1.2.0_p1-r1 seg faults
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-04 09:31 UTC by Chris Torske





      Modified:
    
2006-04-17 05:32 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jhuebel









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace output

              (out,23.49 KB,
                text/plain)

            
2006-04-04 09:46 UTC,

            Chris Torske




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Chris Torske





          2006-04-04 09:31:52 UTC
        

eternal lands segfaults when you execute el; no other error messages are posted.  Going do a little bit of testing see if I can't narrow the problem some.  As it could be gcc4.1, the new X, or even the patch it's self.




Comment 1


Chris Torske





          2006-04-04 09:32:12 UTC
        

Portage 2.1_pre7-r4 (default-linux/amd64/2006.0, gcc-4.1.0, glibc-2.4-r1, 2.6.16-gentoo x86_64)
=================================================================
System uname: 2.6.16-gentoo x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O3 -pipe -floop-optimize2 -fno-omit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=k8 -O3 -pipe -floop-optimize2 -fno-omit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://gentoo.chem.wisc.edu/gentoo/"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
LINGUAS="en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="amd64 X X509 Xaw3d a52 aac alsa apache2 arts async automount avi bash-completion bcmath berkdb bitmap-fonts browserplugin bzip2 cairo cdr cli crypt ctype cups dba dbus dga djbfft djvu dlloader doc dri dts dvd dvdread dvi dxr3 eds emboss encode esd examples exif expat fastbuild ffmpeg firefox flac fltk foomaticdb force-cgi-redirect fortran ftp gd gdbm ggi gif glitz gnome gnutls gpgme gpm graphviz gs gstreamer gtk gtk2 hal imagemagick imlib isdnlog java javascript jpeg jpeg2k kde kerberos krb4 lcms lesstif libedit lirc logrotate lzo lzw lzw-tiff mad mailwrapper md5sum memlimit mng mono motif mozdevelop mozilla mp3 mpeg musepack musicbrainz mysql mysqli nautilus ncurses neXt nfs nls nntp nptl nsplugin ntpl nvidia ogg openal openexr opengl oss pam pcntl pcre pdflib perl php physfs png posix ppds pppd pwdb python qt qt4 quicktime readline rle rtc samba sdk sdl session simplexml smime sndfile soap sockets source speex spell spl sql sqlite ssl symlink syslog t1lib tcltk tcpd tetex theora threads tidy tiff timidity tokenizer toolbar tools truetype truetype-fonts type1-fonts unicode urandom usb v4l v4l2 vorbis winbind xcomposite xine xml xml2 xmldoclet xmlreader xmlrpc xmlwriter xmms xpm xprint xscreensaver xsl xv xvid xvmc zip zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_en_US userland_GNU video_cards_nvidia video_cards_glint video_cards_v4l"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTDIR_OVERLAY





Comment 2


Chris Torske





          2006-04-04 09:43:36 UTC
        

ok; here's something; that may be the cause; this is from recompiling el with debugging on.

gamer01@luke ~ $ gdb el
GNU gdb 6.4
Copyright 2005 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu"...(no debugging symbols found)
Using host libthread_db library "/lib/libthread_db.so.1".

(gdb) r
Starting program: /usr/games/bin/el
(no debugging symbols found)
(no debugging symbols found)
[Thread debugging using libthread_db enabled]
[New Thread 47052079704432 (LWP 4713)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 47052079704432 (LWP 4713)]
0x00002acb284a98c7 in glMatrixMode () from //usr/lib64/opengl/xorg-x11/lib/libGL.so.1
(gdb) q
The program is running.  Exit anyway? (y or n) y





Comment 3


Chris Torske





          2006-04-04 09:46:46 UTC
        

Created attachment 83897 [details]
strace output

Output from strace




Comment 4


Chris Torske





          2006-04-04 09:53:11 UTC
        

ok; I recompiled it with gcc 3.4.5 and also tested 1.2.0-p1; both also fail with the same problem, so it's not my version of gcc.




Comment 5


Mike Doty (RETIRED)






          2006-04-16 10:47:23 UTC
        

seems to be a missing asm file(wonder what provides it...)

Starting program: /usr/games/bin/el 
[Thread debugging using libthread_db enabled]
[New Thread 46912531876416 (LWP 28618)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 46912531876416 (LWP 28618)]
glMatrixMode () at glapi_x86-64.S:10533
10533   glapi_x86-64.S: No such file or directory.
        in glapi_x86-64.S
Current language:  auto; currently asm
(gdb) bt
#0  glMatrixMode () at glapi_x86-64.S:10533
#1  0x000000000043a224 in resize_root_window () at gl_init.c:787
#2  0x0000000000428872 in check_var (str=0x1701 <Address 0x1701 out of bounds>, type=INI_FILE_VAR) at elconfig.c:851
#3  0x000000000042a529 in read_el_ini () at elconfig.c:1270
#4  0x000000000043f8a5 in read_config () at init.c:191
#5  0x0000000000440303 in init_stuff () at init.c:527
#6  0x0000000000449126 in main (argc=5889, argv=0x7fffffef49d8) at main.c:245
#7  0x00002aaaabdb4674 in __libc_start_main () from /lib/tls/libc.so.6
#8  0x00000000004079fa in _start ()





Comment 6


Jason Huebel (RETIRED)






          2006-04-16 22:02:45 UTC
        

MESA?

http://www.google.com/search?hl=en&ie=ISO-8859-1&q=glapi_x86-64&btnG=Google+Search




Comment 7


Chris Torske





          2006-04-17 05:32:19 UTC
        

well, I tested the game again with the new version on nvidia's drivers, which it now works.  So I am guessing it may have been some issue between gcc, glibc, and nvidia's driver.  Could possibly be the xorg's gl drivers, as I noticed after I installed the new nvidia's drivers.  That my system gl drivers was set to xorg's, not nvidia's.  Not sure why that would have switched back on my system.  May have been when I installed the new X server.  Going ahead and close it, as it's working for me now.  Not really in the mood to go figure out which one of the nvidia's driver was the one that broke it on my system (there was a couple versions newer since then which I didn't update to).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

