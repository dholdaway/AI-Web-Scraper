Title: 384517 – x11-base/xorg-server-1.10.x: Incorrect keyboard autorepeat behavior
URL: https://bugs.gentoo.org/show_bug.cgi?id=384517

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 384517
x11-base/xorg-server-1.10.x: Incorrect keyboard autorepeat behavior
Last modified: 2012-01-24 23:00:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 384517 
      - x11-base/xorg-server-1.10.x: Incorrect keyboard autorepeat behavior


Summary:
x11-base/xorg-server-1.10.x: Incorrect keyboard autorepeat behavior
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-09-26 13:17 UTC by Alexey Prokopchuk





      Modified:
    
2012-01-24 23:00 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



alexpro
tdalman









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexey Prokopchuk





          2011-09-26 13:17:13 UTC
        

After upgrading xorg-server from 1.9.5 to 1.10.4 keyboard autorepeat does not work for keys 'left arrow' and 'down arrow'. For all other keys autorepeat works fine. Same thing happens with xorg-server-1.10.2

If downgrade xorg-server back to 1.9.5 autorepeat works correctly for all keys.

xorg.conf very simple, almost empty and there no one input device related option. Log file looks as usual and there are no error messages associated with the input devices.
x11-drivers/xf86-input-evdev-2.6.0 is used as keyboard driver. Of course, after upgrading from 1.9.5 to 1.10.4, I ran "emerge -1 `qlist -IC x11-drivers`"


Reproducible: Always

Steps to Reproduce:
1. Install (upgrade) xorg-server-1.10.x
2. Down key 'left arrow' or 'down arrow'
3. Autorepeat for above keys don't work in any X application.

Actual Results:  
Autorepeat for keys 'left arrow' and 'down arrow' does not work.

Expected Results:  
Correct behavior of autorepeat for keys 'left arrow' and 'down arrow'.

system:
Linux xlin64 2.6.38 #8 SMP PREEMPT Fri Jul 15 16:23:30 EEST 2011 x86_64 Intel(R) Core(TM)2 Duo CPU E6750 @ 2.66GHz GenuineIntel GNU/Linux

USE for xorg-server: "nptl udev xorg"




Comment 1


Rafał Mużyło





          2011-09-26 16:57:45 UTC
        

Sounds vaguely similar to a different problem - as if something (i.e you somewhere in xorg.conf) were setting XkbRules to 'base'/'xorg', while only value that works with evdev driver (and the driver hardcodes it) is 'evdev'.

This may happen too, if you still have the older keyboard driver installed.




Comment 2


Alexey Prokopchuk





          2011-09-26 18:45:00 UTC
        

(In reply to comment #1)
> Sounds vaguely similar to a different problem - as if something (i.e you
> somewhere in xorg.conf) were setting XkbRules to 'base'/'xorg', while only
> value that works with evdev driver (and the driver hardcodes it) is 'evdev'.
> 
> This may happen too, if you still have the older keyboard driver installed.

As I said above, I have very simple xorg.conf without any input-driver related options. Also, xf86-input-evdev-2.6.0 - is the latest version in portage tree. And no other version of this driver available - nor newer, nor older. And I wonder why would the driver to behave incorrectly just with the keys 'left arrow' and 'down arrow', but properly with all the others?




Comment 3


Chí-Thanh Christopher Nguyễn






          2011-10-04 12:35:32 UTC
        

Does your desktop environment set anything keyboard related? What about xorg-server-1.11.1?




Comment 4


Alexey Prokopchuk





          2011-10-04 17:37:13 UTC
        

(In reply to comment #3)
> Does your desktop environment set anything keyboard related? What about
> xorg-server-1.11.1?

x11-misc/xkeyboard-config-2.3 and kde-base/systemsettings-4.7.1. That'all, nothing more.
Tomorrow I'll try to install xorg-server-1.11.1 and report result.




Comment 5


Chí-Thanh Christopher Nguyễn






          2011-10-04 18:52:58 UTC
        

Sorry if I wasn't clear. I asked whether your desktop environment (in your case apparently KDE) is configured to modify X keyboard settings.




Comment 6


Alexey Prokopchuk





          2011-10-04 19:07:49 UTC
        

(In reply to comment #5)
> Sorry if I wasn't clear. I asked whether your desktop environment (in your case
> apparently KDE) is configured to modify X keyboard settings.

Sorry, my english is not very good.
No, I have no modification of any keyboard settings from KDE except language switch option.




Comment 7


Alexey Prokopchuk





          2011-10-05 09:29:05 UTC
        

(In reply to comment #3)
> What about xorg-server-1.11.1?

With xorg-server-1.11.1 same as with 1.10.x - autorepeat for 'left arrow' and 'down arrow' does not work. 
I had some problems with KDE after installing xorg-server-1.11.1, but these problems related with displaying desktop and video-drivers, and I didn't try to solve them - just check autorepeat behavior.
I can try to install GNOME and XFCE and check autorepeat there if it can be useful... It seems to me that this problem does not depend on DM...




Comment 8


Chí-Thanh Christopher Nguyễn






          2011-10-05 12:00:30 UTC
        

If keyboard layout switching is enabled in KDE, then that means your desktop environment modifies X keyboard settings.




Comment 9


Alexey Prokopchuk





          2011-10-05 17:30:11 UTC
        

(In reply to comment #8)
> If keyboard layout switching is enabled in KDE, then that means your desktop
> environment modifies X keyboard settings.

I doubt that keyboard layout switching can somehow affect to autorepeat behavior. But who knows, maybe this really is just so. I'll check it. And also check with other DMs.




Comment 10


Chí-Thanh Christopher Nguyễn






          2011-10-05 21:19:41 UTC
        

It can when the switching modifies xkbrules, as per comment #1




Comment 11


Alexey Prokopchuk





          2011-10-06 08:16:55 UTC
        

(In reply to comment #10)
> It can when the switching modifies xkbrules, as per comment #1

I understand what you mean, but the migration guide says nothing about change anything associated with the input devices. So, I come to this issue in terms of what I have done everything correctly. After all, the previous version (and all other previous versions) worked fine. 
I would like to find out what exactly has changed in new versions, applicable to the subject. After all, I got the above autorepeat behavior not due to changes in configuration, but as a result of upgrading xorg-server from 1.9 to 1.10. And if the reason really is that you say, so it is necessary make appropriate changes to Migration Guide.




Comment 12


Rafał Mużyło





          2011-10-12 10:09:23 UTC
        

(In reply to comment #9)
> (In reply to comment #8)
> > If keyboard layout switching is enabled in KDE, then that means your desktop
> > environment modifies X keyboard settings.
> 
> I doubt that keyboard layout switching can somehow affect to autorepeat
> behavior. But who knows, maybe this really is just so. I'll check it. And also
> check with other DMs.

Obviously, it can and it does on occasions (strange, though, that it didn't show up in 1.9 - there might be something more to it).

IIRC, in that KDE applet, keyboard needs to be set to "evdev managed".




Comment 13


Alexey Prokopchuk





          2012-01-24 20:30:51 UTC
        

Finally, I found the reason: x11-apps/xmodmap and config file (/etc/xmodmap.conf) created almost 3 years ago. I deleted above file and autorepeat works properly for all keys.
So, this not a bug, but the feature. I don't know which status should be assigned for this bug.




Comment 14


Chí-Thanh Christopher Nguyễn






          2012-01-24 23:00:35 UTC
        

Marking as WORKSFORME per comment 13.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

