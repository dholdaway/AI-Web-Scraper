Title: 430734 – bootstrap: sys-devel/binutils-2.22 fails to build on Linux
URL: https://bugs.gentoo.org/show_bug.cgi?id=430734

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 430734
bootstrap: sys-devel/binutils-2.22 fails to build on Linux
Last modified: 2012-09-03 13:35:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 430734 
      - bootstrap: sys-devel/binutils-2.22 fails to build on Linux


Summary:
bootstrap: sys-devel/binutils-2.22 fails to build on Linux
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       blocker
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-08-10 09:24 UTC by Raboo Treed





      Modified:
    
2012-09-03 13:35 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



britta_22









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge binutils output

              (emerge-binutils.txt,51.17 KB,
                text/plain)

            
2012-08-10 09:50 UTC,

            Raboo Treed




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Raboo Treed





          2012-08-10 09:24:08 UTC
        

Following the solaris instructions on Linux, binutils fails to build.

Reproducible: Always

Steps to Reproduce:
$ emerge --oneshot --nodeps sys-devel/binutils

Actual Results:  
Failed to build.

Expected Results:  
Succeed to build.

emerge --oneshot --nodeps sys-devel/binutils

--- snip ---

checking whether to enable maintainer-specific portions of Makefiles... no
-lm
configure: updating cache ./config.cache
configure: creating ./config.status
Setting warning flags = -W -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow
configure: updating cache ./config.cache
configure: creating ./config.status
config.status: creating Makefile
config.status: creating testsuite/Makefile
config.status: creating po/Makefile.in
config.status: WARNING:  '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/binutils-2.22/gold/po/Make-in' seems to ignore the --datarootdir setting
config.status: creating config.h
config.status: executing depfiles commands
config.status: creating Makefile
config.status: executing default-1 commands
config.status: creating po/Makefile.in
config.status: creating po/POTFILES
config.status: WARNING:  '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/binutils-2.22/gprof/po/Make-in' seems to ignore the --datarootdir setting
config.status: creating po/Makefile
config.status: creating gconfig.h
config.status: executing depfiles commands
config.status: executing libtool commands
config.status: executing default-1 commands
config.status: creating po/POTFILES
config.status: creating po/Makefile
make[1]: Leaving directory `/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/build'
make: *** [all] Error 2
emake failed
 * ERROR: sys-devel/binutils-2.22-r1 failed (compile phase):
 *   emake failed
 * 
 * Call stack:
 *     ebuild.sh, line   85:  Called src_compile
 *   environment, line 3011:  Called toolchain-binutils_src_compile
 *   environment, line 3772:  Called die
 * The specific snippet of code:
 *       emake all || die "emake failed";
 * 
 * If you need support, post the output of 'emerge --info =sys-devel/binutils-2.22-r1',
 * the complete build log and the output of 'emerge -pqv =sys-devel/binutils-2.22-r1'.
 * The complete build log is located at '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/temp/build.log'.
 * The ebuild environment file is located at '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/temp/environment'.
 * Working directory: '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/build'
 * S: '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/binutils-2.22'

>>> Failed to emerge sys-devel/binutils-2.22-r1, Log file:

>>>  '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/temp/build.log'

 * Messages for package sys-devel/binutils-2.22-r1:

 * Can't read /config.sub, skipping..
 * Can't read /config.guess, skipping..
 * ERROR: sys-devel/binutils-2.22-r1 failed (compile phase):
 *   emake failed
 * 
 * Call stack:
 *     ebuild.sh, line   85:  Called src_compile
 *   environment, line 3011:  Called toolchain-binutils_src_compile
 *   environment, line 3772:  Called die
 * The specific snippet of code:
 *       emake all || die "emake failed";
 * 
 * If you need support, post the output of 'emerge --info =sys-devel/binutils-2.22-r1',
 * the complete build log and the output of 'emerge -pqv =sys-devel/binutils-2.22-r1'.
 * The complete build log is located at '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/temp/build.log'.
 * The ebuild environment file is located at '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/temp/environment'.
 * Working directory: '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/build'
 * S: '/usr/local/gprefix/var/tmp/portage/sys-devel/binutils-2.22-r1/work/binutils-2.22'




Comment 1


Fabian Groffen






          2012-08-10 09:27:13 UTC
        

I think the real error is somewhere up, could you check and see if you have an Error *** somewhere up?




Comment 2


Raboo Treed





          2012-08-10 09:50:40 UTC
        

Created attachment 320858 [details]
emerge binutils output

Not sure what to look for... Perhaps you can help with that?




Comment 3


Fabian Groffen






          2012-08-10 10:57:14 UTC
        

configure: error: zlib (libz) library was explicitly requested but not found
yes
checking whether snprintf is declared... make[1]: *** [configure-gas] Error 1
make[1]: *** Waiting for unfinished jobs....

zlib issue




Comment 4


Raboo Treed





          2012-08-10 11:41:43 UTC
        

zlib is installed in $EPREFIX/tmp as part of the bootstrap process.

I now even tried to "emerge --oneshot sys-libs/zlib" and after that "emerge --oneshot --nodeps sys-devel/binutils".

Still same issue.




Comment 5


Jeremy Olexa (darkside) (RETIRED)








          2012-08-15 14:22:53 UTC
        

What host OS was this? I cannot reproduce on 3 different distros.




Comment 6


Raboo Treed





          2012-08-16 08:16:22 UTC
        

CentOS 6 on x86_64 and CentOS 5 on x86. Both of them running in a openvz container.




Comment 7


Raboo Treed





          2012-08-16 11:41:24 UTC
        

installing zlib-devel on the host OS fixes the problem...
But then it is another problem.. shouldn't gentoo-prefix applications rely on what's under the prefix and not the host OS libraries and binaries?




Comment 8


Fabian Groffen






          2012-08-16 12:32:03 UTC
        

yes, so I'm unhappy you did so, because it means for some reason the zlib that was installed during the bootstrap is not found




Comment 9


Fabian Groffen






          2012-09-03 13:35:54 UTC
        

if it works for you now, I'm happy









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

