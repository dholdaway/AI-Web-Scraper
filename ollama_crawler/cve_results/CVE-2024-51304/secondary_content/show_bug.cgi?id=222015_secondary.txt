Title: 222015 – media-libs/libtheora-1.0_beta3-r1 compile fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=222015

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 222015
media-libs/libtheora-1.0_beta3-r1 compile fails
Last modified: 2008-05-16 07:35:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 222015 
      - media-libs/libtheora-1.0_beta3-r1 compile fails


Summary:
media-libs/libtheora-1.0_beta3-r1 compile fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-05-14 01:18 UTC by subs





      Modified:
    
2008-05-16 07:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




buildlog

              (build.log,29.53 KB,
                text/plain)

            
2008-05-14 17:52 UTC,

            subs




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


subs





          2008-05-14 01:18:17 UTC
        

The new libtheora-1.0_beta3-r1 compile files and so does the beta2-r1. Relevant build log:

/bin/sh ../libtool --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc  -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -version-info 1:0:0 -Wl,--version-script=./Version_script-dec  -o libtheoradec.la -rpath /usr/lib64 cpu.lo mmxidct.lo mmxfrag.lo mmxstate.lo x86state.lo apiwrapper.lo bitwise.lo decapiwrapper.lo decinfo.lo decode.lo dequant.lo fragment.lo huffdec.lo idct.lo info.lo internal.lo quant.lo state.lo  
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -I../include -I../lib -I../lib/dec -I../lib/enc -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -c enc/scan.c -o scan.o >/dev/null 2>&1
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -I../include -I../lib -I../lib/dec -I../lib/enc -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -c enc/dsp.c  -fPIC -DPIC -o .libs/dsp.o
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I.. -I../include -I../lib -I../lib/dec -I../lib/enc -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -c enc/dsp.c -o dsp.o >/dev/null 2>&1
/bin/sh ../libtool --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc  -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -version-info 1:0:0 -Wl,--version-script=./Version_script-enc -logg    -o libtheoraenc.la -rpath /usr/lib64 cpu.lo dct_decode_mmx.lo dsp_mmx.lo dsp_mmxext.lo recon_mmx.lo idct_mmx.lo fdct_mmx.lo dct_encode.lo encode.lo encoder_huffman.lo encoder_idct.lo encoder_toplevel.lo encoder_quant.lo encapiwrapper.lo blockmap.lo dct.lo dct_decode.lo frarray.lo frinit.lo mcomp.lo misc_common.lo pb.lo pp.lo reconstruct.lo scan.lo dsp.lo  
/bin/sh ../libtool --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc  -Wall -Wno-parentheses -O2 -pipe -march=athlon64 -msse3 -version-info 3:3:3 -Wl,--version-script=./Version_script -logg    -o libtheora.la -rpath /usr/lib64 cpu.lo mmxidct.lo mmxfrag.lo mmxstate.lo x86state.lo apiwrapper.lo bitwise.lo decapiwrapper.lo decinfo.lo decode.lo dequant.lo fragment.lo huffdec.lo idct.lo info.lo internal.lo quant.lo state.lo dct_decode_mmx.lo dsp_mmx.lo dsp_mmxext.lo recon_mmx.lo idct_mmx.lo fdct_mmx.lo dct_encode.lo encode.lo encoder_huffman.lo encoder_idct.lo encoder_toplevel.lo encoder_quant.lo encapiwrapper.lo blockmap.lo dct.lo dct_decode.lo frarray.lo frinit.lo mcomp.lo misc_common.lo pb.lo pp.lo reconstruct.lo scan.lo dsp.lo  
x86_64-pc-linux-gnu-gcc -shared  .libs/cpu.o .libs/mmxidct.o .libs/mmxfrag.o .libs/mmxstate.o .libs/x86state.o .libs/apiwrapper.o .libs/bitwise.o .libs/decapiwrapper.o .libs/decinfo.o .libs/decode.o .libs/dequant.o .libs/fragment.o .libs/huffdec.o .libs/idct.o .libs/info.o .libs/internal.o .libs/quant.o .libs/state.o   -march=athlon64 -msse3 -Wl,--version-script=./Version_script-dec -Wl,-soname -Wl,libtheoradec.so.1 -o .libs/libtheoradec.so.1.0.0
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o: file format not recognized; treating as linker script
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o:1: syntax error
collect2: ld returned 1 exit status
make[2]: *** [libtheoradec.la] Error 1
make[2]: *** Waiting for unfinished jobs....
x86_64-pc-linux-gnu-gcc -shared  .libs/cpu.o .libs/dct_decode_mmx.o .libs/dsp_mmx.o .libs/dsp_mmxext.o .libs/recon_mmx.o .libs/idct_mmx.o .libs/fdct_mmx.o .libs/dct_encode.o .libs/encode.o .libs/encoder_huffman.o .libs/encoder_idct.o .libs/encoder_toplevel.o .libs/encoder_quant.o .libs/encapiwrapper.o .libs/blockmap.o .libs/dct.o .libs/dct_decode.o .libs/frarray.o .libs/frinit.o .libs/mcomp.o .libs/misc_common.o .libs/pb.o .libs/pp.o .libs/reconstruct.o .libs/scan.o .libs/dsp.o  /usr/lib64/libogg.so  -march=athlon64 -msse3 -Wl,--version-script=./Version_script-enc -Wl,-soname -Wl,libtheoraenc.so.1 -o .libs/libtheoraenc.so.1.0.0
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o: file format not recognized; treating as linker script
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o:1: syntax error
collect2: ld returned 1 exit status
make[2]: *** [libtheoraenc.la] Error 1
x86_64-pc-linux-gnu-gcc -shared  .libs/cpu.o .libs/mmxidct.o .libs/mmxfrag.o .libs/mmxstate.o .libs/x86state.o .libs/apiwrapper.o .libs/bitwise.o .libs/decapiwrapper.o .libs/decinfo.o .libs/decode.o .libs/dequant.o .libs/fragment.o .libs/huffdec.o .libs/idct.o .libs/info.o .libs/internal.o .libs/quant.o .libs/state.o .libs/dct_decode_mmx.o .libs/dsp_mmx.o .libs/dsp_mmxext.o .libs/recon_mmx.o .libs/idct_mmx.o .libs/fdct_mmx.o .libs/dct_encode.o .libs/encode.o .libs/encoder_huffman.o .libs/encoder_idct.o .libs/encoder_toplevel.o .libs/encoder_quant.o .libs/encapiwrapper.o .libs/blockmap.o .libs/dct.o .libs/dct_decode.o .libs/frarray.o .libs/frinit.o .libs/mcomp.o .libs/misc_common.o .libs/pb.o .libs/pp.o .libs/reconstruct.o .libs/scan.o .libs/dsp.o  /usr/lib64/libogg.so  -march=athlon64 -msse3 -Wl,--version-script=./Version_script -Wl,-soname -Wl,libtheora.so.0 -o .libs/libtheora.so.0.3.3
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o: file format not recognized; treating as linker script
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.3/../../../../x86_64-pc-linux-gnu/bin/ld:.libs/cpu.o:1: syntax error
collect2: ld returned 1 exit status
make[2]: *** [libtheora.la] Error 1
make[2]: Leaving directory `/var/tmp/portage/media-libs/libtheora-1.0_beta3-r1/work/libtheora-1.0beta3/lib'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-libs/libtheora-1.0_beta3-r1/work/libtheora-1.0beta3'
make: *** [all] Error 2
 * 
 * ERROR: media-libs/libtheora-1.0_beta3-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2860:  Called die
 * The specific snippet of code:
 *       emake || die "emake failed."
 *  The die message:
 *   emake failed.
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/media-libs/libtheora-1.0_beta3-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/media-libs/libtheora-1.0_beta3-r1/temp/environment'.
 *




Comment 1


Jeroen Roovers (RETIRED)






          2008-05-14 02:52:02 UTC
        

emerge --info too, please.




Comment 2


subs





          2008-05-14 03:02:07 UTC
        

emerge --info
Portage 2.1.5_rc10 (default/linux/amd64/2008.0/desktop, gcc-4.2.3, glibc-2.7-r2,
2.6.25-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.25-gentoo-r3 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor
5200+
Timestamp of tree: Tue, 13 May 2008 21:45:51 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r3
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.4
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.62
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.25-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=athlon64 -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf
/etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/splash /etc/terminfo
/etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=athlon64 -msse3"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps=y"
FEATURES="ccache distlocks parallel-fetch sandbox sfperms strict
unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.gtlib.gatech.edu/pub/gentoo
ftp://ftp.ussg.iu.edu/pub/linux/gentoo ftp://gentoo.cites.uiuc.edu/pub/gentoo/
"
LDFLAGS=""
LINGUAS="en en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress
--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles
--exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/desktop-effects /usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="X a52 aac acl alsa amd64 berkdb branding bzip2 cairo cdr cli cracklib cups
curl dbus dri dvd dvdr dvdread eds emboss encode esd evo exif fam ffmpeg
firefox flac fortran gdbm gedit gif gimp gnome gnome-keyring gnutls gphoto2 gpm
gstreamer gtk gtk2 gtkhtml guile hal hddtemp howl iconv idn imagemagick imlib
ipv6 isdnlog java joystick jpeg jpeg2k lcms libnotify lm_sensors logrotate mad
midi mikmod mmx mmxext mng mp3 mpeg mudflap multilib nautilus ncurses nls nptl
nptlonly nsplugin offensive ogg openal opengl openmp pam pcre pdf perl png ppds
pppd python quicktime readline reflection samba sdl seamonkey session smp speex
spell spl sse sse2 ssl startup-notification svg tcltk tcpd theora threads tiff
totem truetype unicode usb vorbis wavpack wma wmf x264 xine xml xorg
xscreensaver xv xvid xvmc zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem
bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel
intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file
hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route
share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias
authn_anon authn_dbm authn_default authn_file authz_dbm authz_default
authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs
dav_lock deflate dir disk_cache env expires ext_filter file_cache filter
headers include info log_config logio mem_cache mime mime_magic negotiation
rewrite setenvif speling status unique_id userdir usertrack vhost_alias"
CAMERAS="canon ptp2" ELIBC="glibc" INPUT_DEVICES="keyboard mouse"
KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001
mtxorb ncurses text" LINGUAS="en en_US" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS,
PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Samuli Suominen (RETIRED)






          2008-05-14 10:35:49 UTC
        

Please attach the entire build.log here, something is missing.. also i'd try without ccache.




Comment 4


subs





          2008-05-14 17:52:47 UTC
        

Created attachment 153135 [details]
buildlog

Here is the buildlog with ccache disabled, same error.




Comment 5


subs





          2008-05-14 23:07:44 UTC
        

I went ahead and deleted the contents of /var/tmp/ccache, now it compiles. I guess this can be closed as it was a ccache problem. 




Comment 6


Alexis Ballier






          2008-05-16 07:35:32 UTC
        

(In reply to comment #5)
> I went ahead and deleted the contents of /var/tmp/ccache, now it compiles. I
> guess this can be closed as it was a ccache problem. 
> 

worksforme then ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

