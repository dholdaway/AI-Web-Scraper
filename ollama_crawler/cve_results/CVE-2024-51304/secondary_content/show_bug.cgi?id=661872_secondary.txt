Title: 661872 – dev-util/electron-1.7.15:1.7::atom  build fails, looks like  UnicodeString not declared
URL: https://bugs.gentoo.org/show_bug.cgi?id=661872

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 661872
dev-util/electron-1.7.15:1.7::atom  build fails, looks like  UnicodeString not declared
Last modified: 2018-08-05 18:46:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 661872 
      - dev-util/electron-1.7.15:1.7::atom  build fails, looks like  UnicodeString not declared


Summary:
dev-util/electron-1.7.15:1.7::atom  build fails, looks like  UnicodeString no...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Elvis Pranskevichus








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-07-23 11:49 UTC by Marcus





      Modified:
    
2018-08-05 18:46 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jstein
liquidnight









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




complete build log

              (e1715.log.gz,739.69 KB,
                application/gzip)

            
2018-07-23 11:49 UTC,

            Marcus




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marcus





          2018-07-23 11:49:18 UTC
        

Created attachment 540578 [details]
complete build log

I try installing

[ebuild  NS   ~] dev-util/electron-1.7.15:1.7::atom [1.6.16:1.6::gentoo] USE="cups gtk3 proprietary-codecs pulseaudio system-ffmpeg tcmalloc -custom-cflags -gconf -gnome-keyring -kerberos -lto (-neon) -pic (-selinux) {-test}" L10N="de -am -ar -bg -bn -ca -cs -da -el -en-GB -es -es-419 -et -fa -fi -fil -fr -gu -he -hi -hr -hu -id -it -ja -kn -ko -lt -lv -ml -mr -ms -nb -nl -pl -pt-BR -pt-PT -ro -ru -sk -sl -sr -sv -sw -ta -te -th -tr -uk -vi -zh-CN -zh-TW" 0 KiB



# emerge --info

Portage 2.3.40 (python 3.5.5-final-0, default/linux/amd64/17.0/desktop, gcc-6.4.0, glibc-2.26-r7, 4.17.8-gentoo x86_64)
=================================================================
System uname: Linux-4.17.8-gentoo-x86_64-AMD_A10-7870K_Radeon_R7,_12_Compute_Cores_4C+8G-with-gentoo-2.4.1
KiB Mem:    15349100 total,   2863740 free
KiB Swap:   16777212 total,  16777212 free
Timestamp of repository gentoo: Mon, 23 Jul 2018 07:15:01 +0000
Head commit of repository gentoo: 98d8f12d88876420bd8044e18772d977f94877ae
Head commit of repository brother-overlay: c057d3b0fb8e6afe53b4c9f354d68a43c9f33032

sh bash 4.4_p12
ld GNU ld (Gentoo 2.28.1 p1.0) 2.28.1
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.24.3-r1::gentoo
dev-lang/python:          2.7.14-r1::gentoo, 3.4.8::gentoo, 3.5.5::gentoo, 3.6.5::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.11::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.14.1::gentoo, 1.15.1-r2::gentoo
sys-devel/binutils:       2.28.1::gentoo, 2.29.1-r1::gentoo, 2.30-r2::gentoo
sys-devel/gcc:            5.4.0-r3::gentoo, 6.4.0-r1::gentoo, 7.3.0-r3::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.26-r7::gentoo
Repositories:

gentoo
    location: /mnt/neh_max/usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.europe.gentoo.org/gentoo-portage/
    priority: -1000
    sync-rsync-verify-max-age: 24
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 4
    sync-rsync-extra-opts: 

brother-overlay
    location: /mnt/neh_sea/var/lib/layman/brother-overlay
    sync-type: git
    sync-uri: git://github.com/stefan-langenmaier/brother-overlay.git
    masters: gentoo
    priority: 50

kde
    location: /mnt/neh_sea/var/lib/layman/kde
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildpkg config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS=" http://mirror.eu.oneandone.net/linux/distributions/gentoo/gentoo/ http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/  ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://ftp.uni-erlangen.de/pub/mirrors/gentoo http://mirror.netcologne.de/gentoo/ http://ftp.halifax.rwth-aachen.de/gentoo/ "
LANG="de_DE"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS=" de  "
MAKEOPTS=" -j5 "
PKGDIR="/mnt/space/Packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/mnt/samss/portage"
USE="X a52 aac acl acpi aiglx alsa amd64 apm apng audiofile avi bash-completion bitmap-fonts bogofilter branding browserplugin bzip2 bzlib cairo cdda cdr clang cli consolekit crypt cups cxx dbus dlloader dri dts dvd dvdr dvdread dvi dvipdfm emboss emul-linux-x86 encode exif fam fbcon ffmpeg fftw firefox flac flash frei0r ftp gd gdbm gedit gif glamor glx gpm gstreamer gtk3 hddtemp iconv imap imlib ipv6 jpeg lcms libcaca libnotify libtirpc libwww lightning lm_sensors mad melt mime mmx mmx2 mmxext mng modules motif mozdevelop mozilla mozsvg mp3 mp4 mpeg mplayer multilib mythtv ncurses nfsv4 nls nntp no-seamonkey nptl nsplugin ogg openal opengl openmp opera pam pango pcre pdf png pnp policykit ppds prediction pulseaudio python qt3support qt4 quicktime rar readline restrict-javascript rss rt73usb samba sdl seccomp sensord shared sharedmem smp sockets socks5 spell sse ssl startup-notification stream svg syslog sysvipc tcpd terminal threads tiff transparency truetype truetype-fonts twolame type1-fonts udev udisks unicode upower usb userlocales utempter v4l2 vhook vhosts videos vorbis vpx win32codecs www wxwidgets x264 xattr xcb xml xml2 xpm xscreensaver xterm-color xv xvid zlib" ABI_X86="32 64" ALSA_CARDS="hda-intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon plan sheets stage words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" L10N="de" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5 postgres10" PYTHON_SINGLE_TARGET="python3_5" PYTHON_TARGETS="python2_7 python3_5" RUBY_TARGETS="ruby23" USERLAND="GNU" VIDEO_CARDS="radeon radeonsi" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




The last part that might be the problem looks like:

[842/849] x86_64-pc-linux-gnu-g++ -MMD -MF obj/vendor/node/src/node.inspector_agent.o.d '-DNODE_ARCH="x64"' '-DNODE_PLATFORM="linux"' -DNODE_WANT_INTERNALS=1 -DV8_DEPRECATION_WARNINGS=1 -DNODE_SHARED_MODE -DNODE_USE_V8_PLATFORM=1 '-DNODE_RELEASE_URLBASE="https://atom.io/download/electron"' -DHAVE_INSPECTOR=1 -DHAVE_OPENSSL=1 -D__POSIX__ -DHTTP_PARSER_STRICT=0 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_POSIX_C_SOURCE=200112 -DNDEBUG -DV8_USE_EXTERNAL_STARTUP_DATA -DSK_SUPPORT_LEGACY_GETTOPDEVICE -DSK_SUPPORT_LEGACY_BITMAP_CONFIG -DSK_SUPPORT_LEGACY_DEVICE_VIRTUAL_ISOPAQUE -DSK_SUPPORT_LEGACY_N32_NAME -DSK_SUPPORT_LEGACY_SETCONFIG -DSK_IGNORE_ETC1_SUPPORT -DSK_IGNORE_GPU_DITHER -DDISABLE_NACL -DTOOLKIT_VIEWS -DUSE_AURA -DUSE_X11 -DUSE_NSS_CERTS -DUSE_NSS -D_LARGEFILE64_SOURCE -I../../chromium/v8/include -I../../vendor/node/src -I../../vendor/node/tools/msvs/genfiles -I../../vendor/node/deps/uv/src/ares -Igen -I../../vendor/node/deps/openssl/openssl/include -I../../vendor/node/deps/zlib -I../../vendor/node/deps/http_parser -I../../vendor/node/deps/cares/include -I../../vendor/node/deps/uv/include -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/third_party/icu/source/common -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/third_party/icu/source/i18n -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/v8 -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/v8/include -Wno-inconsistent-missing-override -Wno-undefined-var-template -pthread -Wall -Wextra -Wno-unused-parameter -m64 -fPIC -Wno-parentheses-equality -Wno-unused-function -Wno-sometimes-uninitialized -Wno-pointer-sign -Wno-string-plus-int -Wno-unused-variable -Wno-unused-value -Wno-deprecated-declarations -Wno-return-type -Wno-shift-negative-value -Wno-format -Wno-varargs -fPIC -m64 -march=x86-64 -O2 -pipe -fno-delete-null-pointer-checks -fno-rtti -fno-exceptions -std=gnu++0x -D__STRICT_ANSI__ -fno-rtti  -c ../../vendor/node/src/inspector_agent.cc -o obj/vendor/node/src/node.inspector_agent.o
FAILED: obj/vendor/node/src/node.inspector_agent.o 
x86_64-pc-linux-gnu-g++ -MMD -MF obj/vendor/node/src/node.inspector_agent.o.d '-DNODE_ARCH="x64"' '-DNODE_PLATFORM="linux"' -DNODE_WANT_INTERNALS=1 -DV8_DEPRECATION_WARNINGS=1 -DNODE_SHARED_MODE -DNODE_USE_V8_PLATFORM=1 '-DNODE_RELEASE_URLBASE="https://atom.io/download/electron"' -DHAVE_INSPECTOR=1 -DHAVE_OPENSSL=1 -D__POSIX__ -DHTTP_PARSER_STRICT=0 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_POSIX_C_SOURCE=200112 -DNDEBUG -DV8_USE_EXTERNAL_STARTUP_DATA -DSK_SUPPORT_LEGACY_GETTOPDEVICE -DSK_SUPPORT_LEGACY_BITMAP_CONFIG -DSK_SUPPORT_LEGACY_DEVICE_VIRTUAL_ISOPAQUE -DSK_SUPPORT_LEGACY_N32_NAME -DSK_SUPPORT_LEGACY_SETCONFIG -DSK_IGNORE_ETC1_SUPPORT -DSK_IGNORE_GPU_DITHER -DDISABLE_NACL -DTOOLKIT_VIEWS -DUSE_AURA -DUSE_X11 -DUSE_NSS_CERTS -DUSE_NSS -D_LARGEFILE64_SOURCE -I../../chromium/v8/include -I../../vendor/node/src -I../../vendor/node/tools/msvs/genfiles -I../../vendor/node/deps/uv/src/ares -Igen -I../../vendor/node/deps/openssl/openssl/include -I../../vendor/node/deps/zlib -I../../vendor/node/deps/http_parser -I../../vendor/node/deps/cares/include -I../../vendor/node/deps/uv/include -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/third_party/icu/source/common -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/third_party/icu/source/i18n -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/v8 -I/mnt/samss/portage/portage/dev-util/electron-1.7.15/work/electron-1.7.15/chromium/v8/include -Wno-inconsistent-missing-override -Wno-undefined-var-template -pthread -Wall -Wextra -Wno-unused-parameter -m64 -fPIC -Wno-parentheses-equality -Wno-unused-function -Wno-sometimes-uninitialized -Wno-pointer-sign -Wno-string-plus-int -Wno-unused-variable -Wno-unused-value -Wno-deprecated-declarations -Wno-return-type -Wno-shift-negative-value -Wno-format -Wno-varargs -fPIC -m64 -march=x86-64 -O2 -pipe -fno-delete-null-pointer-checks -fno-rtti -fno-exceptions -std=gnu++0x -D__STRICT_ANSI__ -fno-rtti  -c ../../vendor/node/src/inspector_agent.cc -o obj/vendor/node/src/node.inspector_agent.o
cc1plus: warning: command line option '-Wno-pointer-sign' is valid for C/ObjC but not for C++
../../vendor/node/src/inspector_agent.cc: In function 'std::__cxx11::string node::inspector::{anonymous}::StringViewToUtf8(const v8_inspector::StringView&)':
../../vendor/node/src/inspector_agent.cc:77:3: error: 'UnicodeString' was not declared in this scope
   UnicodeString utf16(unicodeSource, view.length());
   ^~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:77:3: note: suggested alternative:
In file included from ../../vendor/node/src/inspector_agent.cc:20:0:
/usr/include/unicode/unistr.h:286:20: note:   'icu::UnicodeString'
 class U_COMMON_API UnicodeString : public Replaceable
                    ^~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:81:5: error: 'CheckedArrayByteSink' was not declared in this scope
     CheckedArrayByteSink sink(&result[0], result_length);
     ^~~~~~~~~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:81:5: note: suggested alternative:
In file included from /usr/include/unicode/unistr.h:37:0,
                 from ../../vendor/node/src/inspector_agent.cc:20:
/usr/include/unicode/bytestream.h:145:20: note:   'icu::CheckedArrayByteSink'
 class U_COMMON_API CheckedArrayByteSink : public ByteSink {
                    ^~~~~~~~~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:82:5: error: 'utf16' was not declared in this scope
     utf16.toUTF8(sink);
     ^~~~~
../../vendor/node/src/inspector_agent.cc:82:18: error: 'sink' was not declared in this scope
     utf16.toUTF8(sink);
                  ^~~~
../../vendor/node/src/inspector_agent.cc: In function 'std::unique_ptr<v8_inspector::StringBuffer> node::inspector::{anonymous}::Utf8ToStringView(const string&)':
../../vendor/node/src/inspector_agent.cc:91:3: error: 'UnicodeString' was not declared in this scope
   UnicodeString utf16 =
   ^~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:91:3: note: suggested alternative:
In file included from ../../vendor/node/src/inspector_agent.cc:20:0:
/usr/include/unicode/unistr.h:286:20: note:   'icu::UnicodeString'
 class U_COMMON_API UnicodeString : public Replaceable
                    ^~~~~~~~~~~~~
../../vendor/node/src/inspector_agent.cc:93:53: error: 'utf16' was not declared in this scope
   StringView view(reinterpret_cast<const uint16_t*>(utf16.getBuffer()),
                                                     ^~~~~
At global scope:
cc1plus: warning: unrecognized command line option '-Wno-string-plus-int'
cc1plus: warning: unrecognized command line option '-Wno-sometimes-uninitialized'
cc1plus: warning: unrecognized command line option '-Wno-parentheses-equality'
cc1plus: warning: unrecognized command line option '-Wno-undefined-var-template'
cc1plus: warning: unrecognized command line option '-Wno-inconsistent-missing-override'




Comment 1


Marcus





          2018-08-05 18:46:26 UTC
        

Hi,

shortly after, I emerged   dev-util/electron-1.6.16:gentoo  , which worked well.

You might close this bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

