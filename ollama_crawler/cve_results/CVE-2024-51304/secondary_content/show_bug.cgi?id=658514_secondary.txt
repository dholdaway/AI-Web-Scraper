Title: 658514 – sys-devel/gcc-7.3.0-r3: fails to build due to illegal instruction
URL: https://bugs.gentoo.org/show_bug.cgi?id=658514

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 658514
sys-devel/gcc-7.3.0-r3: fails to build due to illegal instruction
Last modified: 2018-09-09 11:44:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 658514 
      - sys-devel/gcc-7.3.0-r3: fails to build due to illegal instruction


Summary:
sys-devel/gcc-7.3.0-r3: fails to build due to illegal instruction
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-06-19 18:27 UTC by farmboy0





      Modified:
    
2018-09-09 11:44 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



hydrapolic
jstein
mmw
slyfox









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info,20.06 KB,
                text/plain)

            
2018-06-19 18:28 UTC,

            farmboy0




Details





build log

              (gcc-7.3.0-r3:20180619-174241.log.gz,151.46 KB,
                application/gzip)

            
2018-06-20 19:01 UTC,

            farmboy0




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


farmboy0





          2018-06-19 18:27:38 UTC
        

Build log and emerge --info ill be attached.
If you need more input please ask.




Comment 1


farmboy0





          2018-06-19 18:28:50 UTC
        

Created attachment 536450 [details]
emerge --info




Comment 2


Tomáš Mózes





          2018-06-20 04:10:43 UTC
        

The build log would help.




Comment 3


farmboy0





          2018-06-20 19:01:59 UTC
        

Created attachment 536616 [details]
build log




Comment 4


Sergei Trofimovich (RETIRED)






          2018-07-08 09:15:20 UTC
        

My guess would be that -march=native incorrectly detects some features on your CPU. We need to find which instructions were generated and which feature wa misdetected.

Please post the output of
    LANG=C gcc -Q --help=target -march=native
and we'll try to find which features was it.

Can you also extract instruction that was attempted to be executed? The crash was in:

    /bin/bash: line 1:  8572 Illegal instruction     build/genextract /tmp/portage/sys-devel/gcc-7.3.0-r3/work/gcc-7.3.0/gcc/common.md /tmp/portage/sys-devel/gcc-7.3.0-r3/work/gcc-7.3.0/gcc/config/i386/i386.md insn-conditions.md > tmp-extract.c

If you run something like:

  $ gdb --args build/genextract /tmp/portage/sys-devel/gcc-7.3.0-r3/work/gcc-7.3.0/gcc/common.md /tmp/portage/sys-devel/gcc-7.3.0-r3/work/gcc-7.3.0/gcc/config/i386/i386.md insn-conditions.md

  gdb> run
  gdb> bt
  gdb> disassemble

gdb should show what was attempted to be executed.




Comment 5


farmboy0





          2018-09-09 10:54:06 UTC
        

This can be closed.
After a few attempts the package built.
Im not aware what i might have changed if anything that led to the success.




Comment 6


Sergei Trofimovich (RETIRED)






          2018-09-09 11:44:24 UTC
        

Sounds good!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

