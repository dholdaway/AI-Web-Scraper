Title: 691922 – sys-boot/raspberrypi-firmware-1.20190709 breaks USB for Raspberry Pi 3B
URL: https://bugs.gentoo.org/show_bug.cgi?id=691922

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 691922
sys-boot/raspberrypi-firmware-1.20190709 breaks USB for Raspberry Pi 3B
Last modified: 2019-08-13 21:55:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 691922 
      - sys-boot/raspberrypi-firmware-1.20190709 breaks USB for Raspberry Pi 3B


Summary:
sys-boot/raspberrypi-firmware-1.20190709 breaks USB for Raspberry Pi 3B
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

ARM64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Andriy Utkin (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-08-11 02:16 UTC by Jan Breig





      Modified:
    
2019-08-13 21:55 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,5.96 KB,
                text/plain)

            
2019-08-11 02:16 UTC,

            Jan Breig




Details





dmesg log before update

              (dmesg_before_update.log,16.37 KB,
                text/plain)

            
2019-08-11 02:20 UTC,

            Jan Breig




Details





dmesg log after update

              (dmesg_after_update.log,17.96 KB,
                text/plain)

            
2019-08-11 02:20 UTC,

            Jan Breig




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jan Breig





          2019-08-11 02:16:21 UTC
        

Created attachment 586522 [details]
emerge --info

The update from 1.20190215 to 1.20190709 breaks the recognition of usb devices. The issue occurs on the Raspberry Pi 3B (I don't own other versions to test this). The ethernet adapter is also not recognized since it's connected via usb.

lsusb output before update (1.20190215):
Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. SMSC9512/9514 Fast Ethernet Adapter
Bus 001 Device 002: ID 0424:9514 Standard Microsystems Corp. SMC9514 Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

lsusb output after update (1.20190709):
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub




Comment 1


Jan Breig





          2019-08-11 02:20:23 UTC
        

Created attachment 586524 [details]
dmesg log before update




Comment 2


Jan Breig





          2019-08-11 02:20:42 UTC
        

Created attachment 586526 [details]
dmesg log after update




Comment 3


Andriy Utkin (RETIRED)






          2019-08-12 17:26:22 UTC
        

Thanks for reporting.

I think the best first action would be for me to make a verbump and hope that upstream has solved this by now.

I don't have RPi 3 - just 0 and 4, so it would be great if you could test is soon after I update.




Comment 4


Andriy Utkin (RETIRED)






          2019-08-12 17:54:57 UTC
        

Jan, I have a few questions for you first.

* I see that you updated raspberrypi-firmware, but not your kernel. While in principle you are free to mix and match, I find it possible that you may not hit a problem if you update your kernel. Could you please give a try to sys-kernel/raspberrypi-image-4.19.57_p20190709 ?

* If that doesn't help, would you be keen to try raspberrypi-firmware-9999 version which is already in tree? You just need to temporarily allow empty keyword.




Comment 5


Jan Breig





          2019-08-13 16:34:25 UTC
        

Thanks. You are right.

The issue does no longer appear when I upgrade the kernel to 4.19 (sys-kernel/raspberrypi-sources-4.19.9999).
However it's still there when upgrading the firmware to 9999 and keeping the current kernel.

So the problem is clearly caused by the not upgrading of the kernel.




Comment 6


Andriy Utkin (RETIRED)






          2019-08-13 21:55:47 UTC
        

Thanks for letting us know it's resolved for you now. Closing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

