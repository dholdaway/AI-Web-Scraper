Title: 234650 – koffice-1.6.3-r2 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=234650

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 234650
koffice-1.6.3-r2 fails to compile
Last modified: 2008-08-18 05:39:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 234650 
      - koffice-1.6.3-r2 fails to compile


Summary:
koffice-1.6.3-r2 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-13 17:38 UTC by rainer





      Modified:
    
2008-08-18 05:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


rainer





          2008-08-13 17:38:02 UTC
        

/usr/qt/3/bin/moc ./kspread_kexiimportdialog.h -o kspread_kexiimportdialog.moc.cc
/bin/sh ../../../libtool --silent --tag=CXX --mode=compile x86_64-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../../.. -I. -I../../../kspread -I../../../kexi -I../../../lib/kofficeui -I../../../lib/kofficeui -I../../../lib/kofficecore -I../../../lib/kofficecore -I../../../lib/store -I../../../lib/store -I../../../lib/kwmf -I../../../lib/kwmf -I../../../lib/kopalette -I../../../lib/kopalette -I../../../lib/kotext -I../../../lib/kotext  -I/usr/kde/3.5/include -I/usr/qt/3/include -I.  -I/usr/kde/3.5/include  -DQT_THREAD_SUPPORT  -D_REENTRANT  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -march=k8 -O2 -pipe -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION -DHAVE_KNEWSTUFF  -c -o kspread_kexiimportdialog.moc.lo kspread_kexiimportdialog.moc.cc
kspread_kexiimportdialog.h:52: error: expected class-name before '{' token
kspread_kexiimportdialog.h:53: error: ISO C++ forbids declaration of 'Q_OBJECT' with no type
kspread_kexiimportdialog.h:55: error: expected ';' before 'private'
kspread_kexiimportdialog.h:70: error: expected `)' before '*' token
kspread_kexiimportdialog.h:77: error: 'QString' has not been declared
kspread_kexiimportdialog.h:84: error: 'QString' does not name a type
kspread_kexiimportdialog.h:86: error: ISO C++ forbids declaration of 'QPtrList' with no type
kspread_kexiimportdialog.h:86: error: expected ';' before '<' token
kspread_kexiimportdialog.h:88: error: expected `:' before 'slots'
kspread_kexiimportdialog.h:100: error: expected primary-expression before 'virtual'
kspread_kexiimportdialog.h:100: error: ISO C++ forbids declaration of 'slots' with no type
kspread_kexiimportdialog.h:100: error: expected ';' before 'virtual'
kspread_kexiimportdialog.h:123: error: expected primary-expression before 'void'
kspread_kexiimportdialog.h:123: error: ISO C++ forbids declaration of 'signals' with no type
kspread_kexiimportdialog.h:123: error: expected ';' before 'void'
kspread_kexiimportdialog.moc.cc:22: error: no 'const char* KSpreadKexiImportDialog::className() const' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc:27: error: 'QMetaObject* KSpreadKexiImportDialog::metaObj' is not a static member of 'class KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc:28: error: 'staticMetaObject' is not a member of 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc:50: error: no 'QMetaObject* KSpreadKexiImportDialog::staticMetaObject()' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'QMetaObject* KSpreadKexiImportDialog::staticMetaObject()':
kspread_kexiimportdialog.moc.cc:52: error: 'metaObj' was not declared in this scope
kspread_kexiimportdialog.moc.cc:54: error: 'KSpreadKexiImportDialogBase' has not been declared
kspread_kexiimportdialog.moc.cc:65: error: 'metaObj' was not declared in this scope
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:78: error: no 'void* KSpreadKexiImportDialog::qt_cast(const char*)' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'void* KSpreadKexiImportDialog::qt_cast(const char*)':
kspread_kexiimportdialog.moc.cc:82: error: 'KSpreadKexiImportDialogBase' has not been declared
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:86: error: no 'void KSpreadKexiImportDialog::insertKexi()' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'void KSpreadKexiImportDialog::insertKexi()':
kspread_kexiimportdialog.moc.cc:88: error: 'activate_signal' was not declared in this scope
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:91: error: no 'bool KSpreadKexiImportDialog::qt_invoke(int, QUObject*)' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'bool KSpreadKexiImportDialog::qt_invoke(int, QUObject*)':
kspread_kexiimportdialog.moc.cc:94: error: 'accept' was not declared in this scope
kspread_kexiimportdialog.moc.cc:97: error: 'KSpreadKexiImportDialogBase' has not been declared
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:102: error: no 'bool KSpreadKexiImportDialog::qt_emit(int, QUObject*)' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'bool KSpreadKexiImportDialog::qt_emit(int, QUObject*)':
kspread_kexiimportdialog.moc.cc:107: error: 'KSpreadKexiImportDialogBase' has not been declared
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:113: error: no 'bool KSpreadKexiImportDialog::qt_property(int, int, QVariant*)' member function declared in class 'KSpreadKexiImportDialog'
kspread_kexiimportdialog.moc.cc: In member function 'bool KSpreadKexiImportDialog::qt_property(int, int, QVariant*)':
kspread_kexiimportdialog.moc.cc:115: error: 'KSpreadKexiImportDialogBase' has not been declared
kspread_kexiimportdialog.moc.cc: At global scope:
kspread_kexiimportdialog.moc.cc:118: error: no 'bool KSpreadKexiImportDialog::qt_static_property(QObject*, int, int, QVariant*)' member function declared in class 'KSpreadKexiImportDialog'
make[4]: *** [kspread_kexiimportdialog.moc.lo] Error 1
make[4]: *** Waiting for unfinished jobs....
Session management error: Could not open network socket
make[4]: Leaving directory `/var/tmp/portage/app-office/koffice-1.6.3-r2/work/koffice-1.6.3/filters/kspread/kexi'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/app-office/koffice-1.6.3-r2/work/koffice-1.6.3/filters/kspread'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-office/koffice-1.6.3-r2/work/koffice-1.6.3/filters'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-office/koffice-1.6.3-r2/work/koffice-1.6.3'
make: *** [all] Error 2



# emerge --info
Portage 2.1.4.4 (default/linux/amd64/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.25-gentoo-r6 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3800+
Timestamp of tree: Wed, 13 Aug 2008 00:19:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13, 2.5.2-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.tiscali.nl/ http://gentoo.inode.at/"
LANG="en_US"
LC_ALL="en_US"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi aim alsa amd64 apache2 apm arts audiofile bash-completion bcmath berkdb bidi blas bluetooth bzip2 cairo cdparanoia cdr cli cracklib crypt cups curl curlwrappers cxx dbus dga directfb doc dri dts dvb dvd dvdr dvdread eds emacs encode esd evo examples exif fam fastcgi fbcon ffmpeg fftw firefox flac fortran ftp gd gdbm ggi gif gimp ginac glut gnome gnutls gphoto2 gpm gstreamer gtk hal iconv icq idn ieee1394 imagemagick imap ipv6 isdnlog jabber java javascript jikes jpeg jpeg2k kde kdrive lapack lcms ldap leim libedit libnotify libwww lirc lm_sensors mad madwifi matroska midi mikmod mime mmx mng mnogosearch mono mp3 mpeg mpi msn mudflap mule multilib mysql mysqli nas ncurses nls nptl nptlonly nsplugin nvidia ogg ole openal opengl openmp osc oscar oss pam pcre pdf perl php plotutils png pppd python qt3 qt3support qt4 quicktime radius readline reflection samba scanner seamonkey server session sockets socks5 spell spl sqlite sse sse2 ssl startup-notification svg symlink sysfs szip tcpd tetex theora threads tidy tiff tokenizer truetype unicode usb v4l v4l2 vcd vhosts vorbis wifi wxwindows xc xcomposite xface xine xml xmlrpc xorg xosd xvid yahoo zlib zrtp" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIRC_DEVICES="imon" USERLAND="GNU" VIDEO_CARDS="nvidia vesa fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Reproducible: Always

Steps to Reproduce:
1.emerge koffice
2.
3.




The same bug was reported November 2006 on the KDE bug tracking system,
and it was suggested to build koffice with qt3,see this link:

http://bugs.kde.org/show_bug.cgi?id=137568

I have qt-3.3.8-r4 and qt-4.3.3 installed.




Comment 1


rainer





          2008-08-18 05:39:12 UTC
        

It seems the bug has something to do with the way koffice is installed.
I was installing from chroot environment, and this is failing, which can be reproduced. koffice is the only package that was failing with the entire Gentoo installation in this way.

When trying to install koffice after a regular login,
koffice installs without problems.  









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

