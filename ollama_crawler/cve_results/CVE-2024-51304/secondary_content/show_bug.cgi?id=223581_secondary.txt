Title: 223581 – dev-util/subversion-1.4.6 - pkg_setup dies with "dev-libs/apr-util-1.2.10 does not actually support the berkdb USE flag!
URL: https://bugs.gentoo.org/show_bug.cgi?id=223581

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 223581
dev-util/subversion-1.4.6 - pkg_setup dies with "dev-libs/apr-util-1.2.10 does not actually support the berkdb USE flag!
Last modified: 2008-08-29 12:10:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 223581 
      - dev-util/subversion-1.4.6 - pkg_setup dies with "dev-libs/apr-util-1.2.10 does not actually support the berkdb USE flag!


Summary:
dev-util/subversion-1.4.6 - pkg_setup dies with "dev-libs/apr-util-1.2.10 doe...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Benedikt Böhm (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-05-25 16:42 UTC by Joseph Bell





      Modified:
    
2008-08-29 12:10 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



apache-bugs
arfrever
josephabell









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joseph Bell





          2008-05-25 16:42:55 UTC
        

When trying to emerge subversion (from scratch, subversion was not previously installed) I receive an call stack that gets to etils.eclass line 1729, die "$PKG does not actually support the $1 USE flag!";;



Reproducible: Always

Steps to Reproduce:
1. emerge subversion

Actual Results:  
Calculating dependencies ... done!
>>> Verifying ebuild Manifests...

>>> Emerging (1 of 1) dev-util/subversion-1.4.6 to /
 * subversion-1.4.6.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...               [ ok ]
 * checking ebuild checksums ;-) ...                                      [ ok ]
 * checking auxfile checksums ;-) ...                                     [ ok ]
 * checking miscfile checksums ;-) ...                                    [ ok ]
 * checking subversion-1.4.6.tar.bz2 ;-) ...                              [ ok ]
 * 
 * ERROR: dev-util/subversion-1.4.6 failed.
 * Call stack:
 *                 ebuild.sh, line   49:  Called pkg_setup
 *   subversion-1.4.6.ebuild, line   50:  Called built_with_use 'pkg_setup' 'pkg
_setup'
 *             eutils.eclass, line 1729:  Called die
 * The specific snippet of code:
 *                                      die)   die "$PKG does not actually suppo
rt the $1 USE flag!";;
 *  The die message:
 *   dev-libs/apr-util-1.2.10 does not actually support the berkdb USE flag!
 * 
 * If you need support, post the topmost build error, and the call stack if rele
vant.
 * A complete build log is located at '/var/tmp/portage/dev-util/subversion-1.4.
6/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-util/subversi
on-1.4.6/temp/die.env'.
 * 
!!! When you file a bug report, please include the following information:
GENTOO_VM=  CLASSPATH="" JAVA_HOME=""
JAVACFLAGS="" COMPILER=""
and of course, the output of emerge --info

 * Messages for package dev-util/subversion-1.4.6:


 * 
 * ERROR: dev-util/subversion-1.4.6 failed.
 * Call stack:
 *                 ebuild.sh, line   49:  Called pkg_setup
 *   subversion-1.4.6.ebuild, line   50:  Called built_with_use 'pkg_setup' 'pkg
_setup'
 *             eutils.eclass, line 1729:  Called die
 * The specific snippet of code:
 *                                      die)   die "$PKG does not actually suppo
rt the $1 USE flag!";;
 *  The die message:
 *   dev-libs/apr-util-1.2.10 does not actually support the berkdb USE flag!
 * 
 * If you need support, post the topmost build error, and the call stack if rele
vant.
 * A complete build log is located at '/var/tmp/portage/dev-util/subversion-1.4.
6/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-util/subversi
on-1.4.6/temp/die.env'.
 * 


Expected Results:  
Subversion installed.


gentoo-vm ~ # echo $GENTOO_VM $CLASSPATH $JAVA_HOME $JAVACFLAGS $COMPILER


Portage 2.1.4.4 (default-linux/x86/2006.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(tm) 64 X2 Dual Core Processor 4600+
Timestamp of tree: Sun, 25 May 2008 15:15:01 +0000
app-shells/bash:     3.0-r12
dev-lang/python:     2.4.2
sys-apps/baselayout: 1.11.14-r3
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1, 1.10.1
sys-devel/binutils:  2.16.1
sys-devel/gcc-config: 1.3.12-r6
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ http://adelie.polymtl.ca/ http://distro.ibiblio.org/pub/linux/distributions/gentoo/ "
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="berkdb cli cracklib crypt cups dri fortran gdbm gpm iconv ipv6 isdnlog midi mudflap ncurses nls nptl nptlonly openmp pam pcre perl ppds pppd python readline reflection session spl ssl tcpd unicode x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 i810 imstt mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jeroen Roovers (RETIRED)






          2008-05-25 17:01:27 UTC
        

Maybe that die message could be improved to suggest the action the user should take.




Comment 2


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2008-05-25 18:21:27 UTC
        

Post the output of:
emerge -ptv apr-util




Comment 3


Joseph Bell





          2008-05-25 20:08:49 UTC
        

gentoo-vm ~ # emerge -ptv apr-util

These are the packages that would be merged, in reverse order:

Calculating dependencies... done!
[ebuild   R   ] dev-libs/apr-util-1.2.10  USE="berkdb gdbm -doc -ldap -mysql -postgres -sqlite -sqlite3" 0 kB 

Total: 1 package (1 reinstall), Size of downloads: 0 kB
gentoo-vm ~ # 





Comment 4


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2008-05-29 15:20:55 UTC
        

Try:
emerge -1 apr apr-util




Comment 5


Joseph Bell





          2008-05-30 02:09:22 UTC
        

After running:
emerge -1 apr apr-util

and then running

emerge subversion

the same issue occurs (originally reported pkg_setup dies message).

If there are any additional log files generated after the above commands that would be of assistance let me know.




Comment 6


Ingo Krabbe





          2008-06-02 08:37:56 UTC
        

(In reply to comment #5)
> After running:
> emerge -1 apr apr-util
> 
> and then running
> 
> emerge subversion

This solved my problem here.  Though I feel, that this should happen automatically, since subversion depends on apr,apr-util when "using" apache2.




Comment 7


Benedikt Böhm (RETIRED)






          2008-06-02 09:23:20 UTC
        

well, the berkdb use flag has been in apr-util for ages, so i fail to see why built_with_use dies ...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

