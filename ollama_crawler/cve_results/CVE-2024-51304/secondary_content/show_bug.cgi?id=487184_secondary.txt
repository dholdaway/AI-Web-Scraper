Title: 487184 – =sys-kernel/dracut-033-r2 does not seem to honor 80-net-name-slot.rules
URL: https://bugs.gentoo.org/show_bug.cgi?id=487184

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 487184
=sys-kernel/dracut-033-r2 does not seem to honor 80-net-name-slot.rules
Last modified: 2014-03-14 08:41:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 487184 
      - =sys-kernel/dracut-033-r2 does not seem to honor 80-net-name-slot.rules


Summary:
=sys-kernel/dracut-033-r2 does not seem to honor 80-net-name-slot.rules
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Amadeusz Żołnowski (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-10-07 07:42 UTC by Zoltán Halassy





      Modified:
    
2014-03-14 08:41 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



alexander
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zoltán Halassy





          2013-10-07 07:42:23 UTC
        

=sys-kernel/dracut-033-r2 is installed on the system with USE flag device-mapper, and lvm, mdraid DRACUT_MODULES.

# dracut --fstab -a "lvm mdraid" --lvmconf --mdadmconf --force /boot/initrd

was the command line creating the initramfs.

=sys-fs/udev-204 is also installed.

During kernel boot, before mounting the real root filesystem the following can be seen:

[    1.763760] dracut: dracut-033-r2
[    1.824429] systemd-udevd[1743]: starting version 204
[    1.906158] systemd-udevd[1828]: renamed network interface eth0 to enp2s0

Predictable names are cool when a computer has more than one network interface, but not that useful otherwise (eth0 is quite predictable to me when there is only one interface). It would be nice if dracut would honor the existence /etc/udev/rules.d/80-net-name-slot.rules .

Reproducible: Always




Comment 1


Alexander Tsoy





          2013-10-07 10:45:43 UTC
        

Dracut includes rules from /etc/udev/rules.d only in hostonly mode. So issue dracut command with --hostonly option, or add hostonly="yes" in dracut.conf/dracut.conf.d. But the best solution IMHO is to just add net.ifnames=0 to the kernel cmdline. This is supported since systemd/udev-199.




Comment 2


Zoltán Halassy





          2013-10-07 11:07:42 UTC
        

Did this change recently? I'm not sure which dracut version I was using before, but it did not try to change my network interfaces via udev.




Comment 3


Alexander Tsoy





          2013-10-07 11:28:52 UTC
        

(In reply to Zoltán Halassy from comment #2)
> Did this change recently? I'm not sure which dracut version I was using
> before, but it did not try to change my network interfaces via udev.

This change was introduced in 033:

http://git.kernel.org/cgit/boot/dracut/dracut.git/commit/?id=ace51ef520090e214bac2f6d98f772da0e36376a




Comment 4


Alexander Tsoy





          2014-03-03 18:34:25 UTC
        

I have a patch fixing this issue and I'm going to send it upstream soon.




Comment 5


Amadeusz Żołnowski (RETIRED)






          2014-03-12 20:57:07 UTC
        

I've updated my live ebuild, can you test it?

layman -a aidecoe
layman -S

Unmask dracut-9999 and emerge it. It looks that 037 is coming soon, so there's no point in backporting these patches to 036.




Comment 6


Alexander Tsoy





          2014-03-12 22:40:54 UTC
        

Harald refused my patch:
http://thread.gmane.org/gmane.linux.kernel.initramfs/3665/focus=3666

So we can close this bug again as wontfix. :)




Comment 7


Jeroen Roovers (RETIRED)






          2014-03-13 17:27:56 UTC
        

Please do not CC people yourself.




Comment 8


Amadeusz Żołnowski (RETIRED)






          2014-03-14 08:41:09 UTC
        

Actually the solution seems pretty simple:

> I would rather let them use the kernel cmdline switch:
> net.ifnames=0

RESO WFM applies better here. :-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

