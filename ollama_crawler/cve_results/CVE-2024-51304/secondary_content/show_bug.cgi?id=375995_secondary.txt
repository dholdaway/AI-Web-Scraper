Title: 375995 – dev-libs/apr-1.4.5 tries to install non-existing docs
URL: https://bugs.gentoo.org/show_bug.cgi?id=375995

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 375995
dev-libs/apr-1.4.5 tries to install non-existing docs
Last modified: 2012-01-21 13:51:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 375995 
      - dev-libs/apr-1.4.5 tries to install non-existing docs


Summary:
dev-libs/apr-1.4.5 tries to install non-existing docs
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Apache Team - Bugzilla Reports








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-07-22 12:27 UTC by John L. Poole





      Modified:
    
2012-01-21 13:51 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



hwoarang
pacho









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John L. Poole





          2011-07-22 12:27:34 UTC
        

A) "doc" is included, but there is not documentation in the package.
plug portage # eix dev-libs/apr
[I] dev-libs/apr
     Available versions:  (1) 1.4.4!t (~)1.4.5!t
        {doc elibc_FreeBSD older-kernels-compatibility +urandom +uuid}
     Installed versions:  1.4.5(1)!t(07:20:04 PM 07/21/2011)(urandom uuid -doc -elibc_FreeBSD -older-kernels-compatibility)
     Homepage:            http://apr.apache.org/
     Description:         Apache Portable Runtime Library

B) "elibc_FreeBSD" is not documented at http://www.gentoo.org/dyn/use-index.xml


Reproducible: Always

Steps to Reproduce:
1.emerge dev-libs/apr
Actual Results:  
plug portage # FEATURES="keepwork" USE="older-kernels-compatibility doc elibc_FreeBSD"  emerge dev-libs/apr -p
 * WARNING: The FEATURES variable contains one or more values that
 * should be disabled under normal circumstances: keepwork

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ~] dev-libs/apr-1.4.5  USE="doc* older-kernels-compatibility*"
plug portage #


Also:
plug portage # FEATURES="keepwork" USE="older-kernels-compatibility doc"  emerge dev-libs/apr
 * WARNING: The FEATURES variable contains one or more values that
 * should be disabled under normal circumstances: keepwork
Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) dev-libs/apr-1.4.5
 * apr-1.4.5.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                     [ ok ]
 * Package:    dev-libs/apr-1.4.5
 * Repository: gentoo
 * Maintainer: apache-bugs@gentoo.org
 * USE:        arm doc elibc_glibc kernel_linux older-kernels-compatibility urandom userland_GNU uuid
 * FEATURES:   keepwork sandbox
>>> It appears that 'apr-1.4.5' is already setup; skipping.
>>> Remove '/var/tmp/portage/dev-libs/apr-1.4.5/.setuped' to force setup.
>>> Checking apr-1.4.5.tar.bz2's mtime...
>>> WORKDIR is up-to-date, keeping...
>>> It appears that 'apr-1.4.5' is already prepared; skipping.
>>> Remove '/var/tmp/portage/dev-libs/apr-1.4.5/.prepared' to force prepare.
>>> It appears that 'apr-1.4.5' is already configured; skipping.
>>> Remove '/var/tmp/portage/dev-libs/apr-1.4.5/.configured' to force configuration.
>>> It appears that 'apr-1.4.5' is already compiled; skipping.
>>> Remove '/var/tmp/portage/dev-libs/apr-1.4.5/.compiled' to force compilation.
>>> Test phase [not enabled]: dev-libs/apr-1.4.5

>>> Install apr-1.4.5 into /var/tmp/portage/dev-libs/apr-1.4.5/image/ category dev-libs
make -j2 DESTDIR=/var/tmp/portage/dev-libs/apr-1.4.5/image/ install
make[1]: Entering directory `/var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5'
make[1]: Nothing to be done for `local-all'.
make[1]: Leaving directory `/var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5'
/var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5/build/mkdir.sh /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/bin /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/share/build-1 \
             /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/pkgconfig /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/include/apr-1
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/lib
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/bin
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/share
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/share/build-1
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/lib/pkgconfig
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/include
mkdir /var/tmp/portage/dev-libs/apr-1.4.5/image/usr/include/apr-1
/usr/bin/install -c -m 644 /var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5/include/apr.h /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/include/apr-1
for f in /var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5/include/apr_*.h; do \
    /usr/bin/install -c -m 644 ${f} /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/include/apr-1; \
done
/bin/bash /usr/bin/libtool --mode=install /usr/bin/install -c -m 755 libapr-1.la /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib
libtool: install: /usr/bin/install -c -m 755 .libs/libapr-1.so.0.4.5 /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/libapr-1.so.0.4.5
libtool: install: (cd /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib && { ln -s -f libapr-1.so.0.4.5 libapr-1.so.0 || { rm -f libapr-1.so.0 && ln -s libapr-1.so.0.4.5 libapr-1.so.0; }; })
libtool: install: (cd /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib && { ln -s -f libapr-1.so.0.4.5 libapr-1.so || { rm -f libapr-1.so && ln -s libapr-1.so.0.4.5 libapr-1.so; }; })
libtool: install: /usr/bin/install -c -m 755 .libs/libapr-1.lai /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/libapr-1.la
libtool: install: /usr/bin/install -c -m 755 .libs/libapr-1.a /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/libapr-1.a
libtool: install: chmod 644 /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/libapr-1.a
libtool: install: armv5tel-softfloat-linux-gnueabi-ranlib /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/libapr-1.a
libtool: install: warning: remember to run `libtool --finish /usr/lib'
/usr/bin/install -c -m 644 apr.exp /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/apr.exp
/usr/bin/install -c -m 644 apr.pc /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/lib/pkgconfig/apr-1.pc
for f in libtool shlibtool; do \
    if test -f ${f}; then /usr/bin/install -c -m 755 ${f} /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/share/build-1; fi; \
done
/usr/bin/install -c -m 755 /var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5/build/mkdir.sh /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/share/build-1
for f in make_exports.awk make_var_export.awk; do \
    /usr/bin/install -c -m 644 /var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5/build/${f} /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/share/build-1; \
done
/usr/bin/install -c -m 644 build/apr_rules.out /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/share/build-1/apr_rules.mk
/usr/bin/install -c -m 755 apr-config.out /var/tmp/portage/dev-libs/apr-1.4.5/image//usr/bin/apr-1-config
!!! dohtml: docs/dox/html/* does not exist
dohtml failed
 * ERROR: dev-libs/apr-1.4.5 failed (install phase):
 *   dohtml failed
 *
 * Call stack:
 *     ebuild.sh, line  56:  Called src_install
 *   environment, line 2706:  Called die
 * The specific snippet of code:
 *           dohtml -r docs/dox/html/* || die "dohtml failed";
 *
 * If you need support, post the output of 'emerge --info =dev-libs/apr-1.4.5',
 * the complete build log and the output of 'emerge -pqv =dev-libs/apr-1.4.5'.
 * The complete build log is located at '/var/tmp/portage/dev-libs/apr-1.4.5/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-libs/apr-1.4.5/temp/environment'.
 * S: '/var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5'
 * QA Notice: file does not exist:
 *
 *      dohtml: docs/dox/html/* does not exist

>>> Failed to emerge dev-libs/apr-1.4.5, Log file:

>>>  '/var/tmp/portage/dev-libs/apr-1.4.5/temp/build.log'

 * Messages for package dev-libs/apr-1.4.5:

 * ERROR: dev-libs/apr-1.4.5 failed (install phase):
 *   dohtml failed
 *
 * Call stack:
 *     ebuild.sh, line  56:  Called src_install
 *   environment, line 2706:  Called die
 * The specific snippet of code:
 *           dohtml -r docs/dox/html/* || die "dohtml failed";
 *
 * If you need support, post the output of 'emerge --info =dev-libs/apr-1.4.5',
 * the complete build log and the output of 'emerge -pqv =dev-libs/apr-1.4.5'.
 * The complete build log is located at '/var/tmp/portage/dev-libs/apr-1.4.5/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-libs/apr-1.4.5/temp/environment'.
 * S: '/var/tmp/portage/dev-libs/apr-1.4.5/work/apr-1.4.5'
plug portage # 




Expected Results:  
successful emerge

Should there be doc included if you are going to specify "doc" as a USE variable?




Comment 1


Arfrever Frehtes Taifersar Arahesis





          2012-01-18 14:50:55 UTC
        

Documentation is built during src_compile(). Try without FEATURES="keepwork".




Comment 2


John L. Poole





          2012-01-21 13:51:31 UTC
        

I followed the suggestion below  on 1/18 and it compiled:
[I] dev-libs/apr
     Available versions:  (1) 1.4.5!t
        {doc elibc_FreeBSD older-kernels-compatibility static-libs +urandom +uuid}
     Installed versions:  1.4.5(1)!t(07:14:27 AM 01/18/2012)(urandom uuid -doc -elibc_FreeBSD -older-kernels-compatibility -static-libs)
     Homepage:            http://apr.apache.org/
     Description:         Apache Portable Runtime Library









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

