Title: 202180 – Remove sys-apps/mtree from tree.
URL: https://bugs.gentoo.org/show_bug.cgi?id=202180

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 202180
Remove sys-apps/mtree from tree.
Last modified: 2008-01-26 21:57:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 202180 
      - Remove sys-apps/mtree from tree.


Summary:
Remove sys-apps/mtree from tree.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:
Vote  
  


Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-12-13 19:57 UTC by Doug Goldstein (RETIRED)





      Modified:
    
2008-01-26 21:57 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



tanderson
treecleaner









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




implicit declaration patch

              (mtree-implicit-declar.patch,1.22 KB,
                patch)

            
2007-12-15 17:20 UTC,

            Thomas Anderson (tanderson) (RETIRED)




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Doug Goldstein (RETIRED)






          2007-12-13 19:57:43 UTC
        

stabilize sys-apps/mtree-1.5, in the tree over 30 days. no bugs




Comment 1


Christian Faulhammer (RETIRED)






          2007-12-14 12:31:03 UTC
        

x86 stable




Comment 2


nixnut (RETIRED)






          2007-12-14 19:39:31 UTC
        

segfaults when running with: mtree -c
I'm probably supposed to give a filename as argument, but I don't think it should segfault without it.

Program received signal SIGSEGV, Segmentation fault.
cwalk () at create.c:346
346     create.c: No such file or directory.
        in create.c
(gdb) bt
#0  cwalk () at create.c:346
#1  0x10004de4 in main (argc=2, argv=0x7fee7954) at mtree.c:208
(gdb) quit

emerge info:
Portage 2.1.3.19 (default-linux/ppc/ppc32/2006.1/G4, gcc-4.1.2, glibc-2.6.1-r0, 2.6.22-gentoo-r5 ppc)
=================================================================
System uname: 2.6.22-gentoo-r5 ppc 7447A, altivec supported
Timestamp of tree: Fri, 14 Dec 2007 16:30:01 +0000
distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.3
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="ppc"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/NX/etc /usr/NX/home /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php4/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php4/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php4/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe"            
DISTDIR="/usr/portage/distfiles"
FEATURES="collision-protect cvs distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo                  http://pandemonium.tiscali.de/pub/gentoo/                  http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/"
LINGUAS="en_GB nl zh ru he"
MAKEOPTS="-j2"  
PKGDIR="/mnt/chroot/pkgdir"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://192.168.1.34/gentoo-portage"
USE="X aac alsa altivec apache2 arts avahi berkdb bitmap-fonts bonobo bzip2 cairo cdr cli cracklib crypt cups divx4linux dlloader dri dvd dvdread eds emboss encode esd firefox flac fortran gdbm gif glitz gnome gpm gstreamer gtk gtkhtml hal iconv imlib ipv6 isdnlog jpeg jpeg2k kde ldap libwww mad midi mikmod mozilla mp3 mpeg mudflap ncurses network nls nptl nptlonly ogg opengl openmp pam pcre pdf perl png ppc pppd python qt3 quicktime readline reflection ruby sdl session spell spl ssl svg tcpd theora tiff truetype truetype-fonts type1-fonts unicode userlocales vorbis xine xml xorg xv xvid zlib" ALSA_CARDS="aoa aoa-fabric-layout aoa-onyx aoa-soundbus aoa-soundbus-i2s aoa-tas aoa-toonie powermac usb-audio" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB nl zh ru he" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Thomas Anderson (tanderson) (RETIRED)






          2007-12-15 17:19:18 UTC
        

On amd64: 

Everything works as expected.(no segfaults). However, at buildtime I am getting QA warnings about implicit declarations. I'm attaching a patch to fix this.

Portage 2.1.3.19 (default-linux/amd64/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.23-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.23-gentoo-r3 x86_64 AMD Athlon(tm) 64 Processor 3400+
Timestamp of tree: Sat, 15 Dec 2007 01:47:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/distfiles"
FEATURES="ccache collision-protect distlocks metadata-transfer multilib-strict nostrip parallel-fetch sandbox sfperms strict test unmerge-orphans userfetch userpriv"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/overlay"
SYNC="rsync://kv80/gentoo-portage"
USE="X acl acpi aim alsa amd64 arts bash-completion berkdb bitmap-fonts branding cairo cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread eds emboss encode esd evo fam firefox fortran gdbm gif gpm gstreamer hal iconv imap ipv6 isdnlog jpeg kde kerberos mad midi mikmod mmx mp3 mpeg mudflap mysql mysqli ncurses nls nptl nptlonly nvidia ogg opengl openmp oss pam pcre pdf perl png pppd python qt qt3 qt3support qt4 quicktime readline reflection sdl session spell spl sqlite3 sse sse2 ssl svg tcpd test tiff truetype truetype-fonts type1-fonts unicode vim vim-syntax vorbis xine xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 4


Thomas Anderson (tanderson) (RETIRED)






          2007-12-15 17:20:27 UTC
        

Created attachment 138552 [details, diff]
implicit declaration patch




Comment 5


Samuli Suominen (RETIRED)






          2007-12-16 09:42:31 UTC
        

testing on stable amd64, segfaults like shown in Comment #2, and compiler warnings as shown in comment #3-4. amd64 had no stable keyword before, not adding it now.




Comment 6


Thomas Anderson (tanderson) (RETIRED)






          2007-12-16 13:59:54 UTC
        

After further testing by myself, I think I have found what triggers the segfault.On my system, mtree only segfaults when I have a directory with permissions drwxrwxrwx on the tree I am analyzing.

@nixnut, you don't need to pass "mtree -c" an argument. But do check if the problem is triggered by drwxrwxrwx directory permissions.




Comment 7


Doug Goldstein (RETIRED)






          2007-12-18 21:51:29 UTC
        

Well let's punt it then. I'm just trying to get stale stuff stable and punt whats not ever going to be stable.




Comment 8


Samuli Suominen (RETIRED)






          2008-01-07 14:38:18 UTC
        

treecleaners is mainly for maintainer-needed pkgs, but since we are here -- voting

+1




Comment 9


Ryan Hill (RETIRED)






          2008-01-17 01:42:29 UTC
        

upstream is alive and kicking.

http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/pkgtools/mtree/files/

so -1 from me.




Comment 10


Doug Goldstein (RETIRED)






          2008-01-17 15:09:29 UTC
        

Well speaking on behalf of base-system, that owns the package. We don't want it. It was added by Rob Holland back in 2003 and unmaintained since. Considering Rob isn't a Gentoo developer anymore. This package is stale and has issues.

We'll kick it over to maintainer-needed since it clearly segfaults in the state it's in. And then considering it's maintainer-needed and segfaults in the current state it's in, treecleaners can vote on whether to remove it.

Oh, btw. +1 vote from me from treecleaners and base-system.




Comment 11


Ryan Hill (RETIRED)






          2008-01-17 18:18:55 UTC
        

well, if you own it then you're free to remove it.  no need for it to go through maintainer-needed or treecleaners at all.




Comment 12


SpanKY






          2008-01-26 21:57:40 UTC
        

mtree based on netbsd 2007Q4 release is now in the tree









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

