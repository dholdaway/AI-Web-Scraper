Title: 96973 – lincity-ng fails to start
URL: https://bugs.gentoo.org/show_bug.cgi?id=96973

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 96973
lincity-ng fails to start
Last modified: 2005-06-28 06:41:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 96973 
      - lincity-ng fails to start


Summary:
lincity-ng fails to start
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-06-24 12:17 UTC by Daniel Holth





      Modified:
    
2005-06-28 06:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




lincity failing to start stack trace

              (lincity-ng.strace,27.48 KB,
                text/plain)

            
2005-06-25 12:35 UTC,

            Daniel Holth




Details





CONTENTS for lincity-ng

              (CONTENTS,86.57 KB,
                text/plain)

            
2005-06-25 12:37 UTC,

            Daniel Holth




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Holth





          2005-06-24 12:17:54 UTC
        

cp /usr/share/games/lincity-ng/lincityconfig.xml ~/.lincity/userconfig.xml

was required to make lincity-ng start

Reproducible: Always
Steps to Reproduce:
1. unstall boost-jam because lincity-ng won't allow it during compile
2. jam and then lincity-ng are installed
3. run lincity-ng

Actual Results:  
didn't start

Expected Results:  
I expected some awesome simulated city-building fun.

'strace' tells us the missing file is /usr/share/games/lincity-ng/userconfig.xml
that gets copied to ~/.lincity/userconfig.xml

--- SIGRTMIN (Unknown signal 32) @ 0 (0) ---
<... rt_sigsuspend resumed> )           = -1 EINTR (Interrupted system call)
sigreturn()                             = ? (mask now [RTMIN])
lstat64("/home/dholth/.lincity/userconfig.xml", 0xbf8005bc) = -1 ENOENT (No such
file or directory)
lstat64("/usr/share/games/lincity-ng/userconfig.xml", 0xbf8005bc) = -1 ENOENT
(No such file or directory)
rt_sigprocmask(SIG_UNBLOCK, [ABRT], NULL, 8) = 0
kill(3618, SIGABRT)                     = 0
--- SIGABRT (Aborted) @ 0 (0) ---
+++ killed by SIGABRT +++




Comment 1


Mr. Bones. (RETIRED)






          2005-06-24 12:29:50 UTC
        

works for me.  You didn't include the output from emerge --info.  reopen with that.




Comment 2


Daniel Holth





          2005-06-24 13:35:46 UTC
        

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.4.20041102-r1, 2.6.12-holth i686)
=================================================================
System uname: 2.6.12-holth i686 mobile AMD Athlon(tm) XP-M (LV) 2200+
Gentoo Base System version 1.6.12
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, May 20 2005, 06:15:55)]
distcc 2.16 i386-pc-linux-gnu (protocols 1 and 2) (default port 3632)
[disabled]dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.8
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -pipe -fomit-frame-pointer"
CHOST="i386-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/zugaina-portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X accessibility alsa apm avi berkdb bitmap-fonts bonobo c++ cdr cle266
crypt cscope cups curl dvd dvdr emboss encode esd fam ffmpeg flac foomaticdb
fortran gd gdbm gif glut gnome gphoto2 gpm gstreamer gtk gtk2 gtkhtml guile hal
imlib innodb insecure-drivers ipv6 jack java jikes joystick jp2 jpeg jpeg2k
junit kde lcms libg++ libwww live mad mikmod mmx motif mozilla mp3 mpeg mysql
mythtv ncurses nls nptl ogg oggvorbis opengl oss pam pdflib perl png postgres
python qt quicktime readline sdl slang spell sse ssl svga tcltk tcpd tiff
truetype truetype-fonts type1-fonts unichrome unicode vorbis xine xml xml2 xmms
xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LDFLAGS, LINGUAS





Comment 3


Daniel Holth





          2005-06-24 13:36:50 UTC
        

Please verify directories ~/.lincity AND /usr/share/games/lincity-ng do not
exist before testing this package.




Comment 4


Daniel Holth





          2005-06-24 13:47:57 UTC
        

dholth@moire ~/prog/crta $ lincity-ng
Starting Lincity-NG...
[/home/dholth/.lincity] is in the search path.
[/usr/share/games/lincity-ng] is in the search path.
LINCITY_HOME: /usr/share/games/lincity-ng
Aborted





Comment 5


Mr. Bones. (RETIRED)






          2005-06-25 00:01:19 UTC
        

/usr/share/games/lincity-ng is installed by the package so making sure it
doesn't exist before running doesn't make any sense.  ~/.lincity is created the
first time lincity-ng is run.

please attach the CONTENTS file for lincity-ng from /var/db/pkg/ and the entire
strace file as text/plain.




Comment 6


Daniel Holth





          2005-06-25 12:34:45 UTC
        

Mr. Bones I had supposed the packagers had run lincity before, already had
certain files related to lincity-ng in their fs, and then didn't notice that
there were any missing pieces when they run the installed packages.

Your requests are absurd but I will provide them anyway. Convincing someone else
to fix this bug is more difficult than fixing it myself would be.




Comment 7


Daniel Holth





          2005-06-25 12:35:31 UTC
        

Created attachment 61921 [details]
lincity failing to start stack trace




Comment 8


Daniel Holth





          2005-06-25 12:37:04 UTC
        

Created attachment 61922 [details]
CONTENTS for lincity-ng




Comment 9


Daniel Holth





          2005-06-25 12:48:40 UTC
        

PROBLEM: userconfig.xml does not exist in /usr/share/games/lincity-ng/

When lincity runs it wants to copy this default configuration to the user's home
directory, but it can't because it is not installed.

SOLUTION: install lincity-ng-1.0/doc/userconfig.xml to /usr/share/games/lincity-ng/

Game now runs.




Comment 10


Matze Braun





          2005-06-26 12:46:38 UTC
        

Daniel: The package is fine, this is NOT a problem of userconfig.xml not being
found (I'm a developer of the game, I can assure you the game creates the file
on exit if it wasn't available at start). It seems like your opengl driver makes
the game abort, since the example config that you copied into your install
directory actually disables SDL. (You could also run lincity-ng --sdl).

Some more infortmation about your opengl driver and configuration could help
solving this. (Though I'm not sure if I can do much about broken opengl drivers...)




Comment 11


Daniel Holth





          2005-06-26 13:38:59 UTC
        

I am using a via unichrome OpenGL with latest dri + xorg. lincity-ng --sdl
aborts as well by the way. Unfortunately the OpenGL doesn't work very well, it
runs out of texture space and so many of the game's textures are just white
boxes. So, I disable OpenGL. (Other games such as neverball have a similar problem.)

<?xml version="1.0"?>
<configuration>
    <video x="1024" y="768" useOpenGL="no" fullscreen="yes" />
    <audio soundEnabled="yes" soundVolume="100"
           musicEnabled="yes" musicVolume="70" />
    <game upgradeTransport="yes" instantBulldoze="yes" showDay="yes" />
</configuration>

This works in ~/.lincity-ng/userconfig.xml ... so does changing x and y to 800
by 600. So does turning OpenGL to "yes" (it runs but with problems see above).
So does copying this same file to /usr/share/lincity-ng/userconfig.xml .

So what am I to say about your comment that the package is fine? It is not fine
for me, and putting userconfig.xml in the directory fixes the problem for me.




Comment 12


Mr. Bones. (RETIRED)






          2005-06-27 20:53:03 UTC
        

Sounds like a local problem.  Since you seem to want to fix it yourself anyhow
(based on comment #6), feel free to do that.




Comment 13


Daniel Holth





          2005-06-27 20:56:08 UTC
        

I do NOT want to fix the bug myself. I want to use a working linux distribution
or get an Apple. I want bugfixes to happen. I am tired of this gentoo nonsense.




Comment 14


Chris Gianelloni (RETIRED)






          2005-06-28 06:41:40 UTC
        

I just merged it on a brand-new system, and it WORKSFORME, also.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

