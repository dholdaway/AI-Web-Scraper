Title: 583218 – app-emulation/xen-tools-4.6.1-r1: USE=ovmf fails to build due to image size exceeded
URL: https://bugs.gentoo.org/show_bug.cgi?id=583218

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 583218
app-emulation/xen-tools-4.6.1-r1: USE=ovmf fails to build due to image size exceeded
Last modified: 2018-07-18 08:39:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 583218 
      - app-emulation/xen-tools-4.6.1-r1: USE=ovmf fails to build due to image size exceeded


Summary:
app-emulation/xen-tools-4.6.1-r1: USE=ovmf fails to build due to image size e...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Xen Devs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-05-16 18:37 UTC by Radoslaw Szkodzinski





      Modified:
    
2018-07-18 08:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info xen-tools

              (xen-tools-emerge-info.log,9.76 KB,
                text/x-log)

            
2016-05-16 18:37 UTC,

            Radoslaw Szkodzinski




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Radoslaw Szkodzinski





          2016-05-16 18:37:43 UTC
        

Created attachment 434458 [details]
emerge --info xen-tools

Xen-Tools 4.6.1-r1 build fails while building OVMF due to image size exceeding 1 MB limit.
Happens with any of gcc 4.8.5, 4.9.4 and 5.3.0. Both hardened and vanilla exhibit it.
Caused by attempting to build OVMF in RELEASE mode, which attempts to generate 1 MB image by default. It seems that patched by Gentoo, OVMF does not fit.

Related log snippet:

Generating FVMAIN_COMPACT FV
#######Return Value = 2
GenFv: ERROR 3000: Invalid
  the required fv image size 0xcc7d0 exceeds the set fv image size 0xcc000




GenFds.py...
 : error 7000: Failed to generate FV

### ['GenFv', '-a', '/var/tmp/portage/app-emulation/xen-tools-4.6.1-r1/work/xen-4.6.1/tools/firmware/ovmf-dir-remote/Build/OvmfX64/RELEASE_GCC48/FV/Ffs/FVMAIN_COMPACT.inf', '-o', '/var/tmp/portage/app-emulation/xen-tools-4.6.1-r1/work/xen-4.6.1/tools/firmware/ovmf-dir-remote/Build/OvmfX64/RELEASE_GCC48/FV/FVMAIN_COMPACT.Fv', '-i', '/var/tmp/portage/app-emulation/xen-tools-4.6.1-r1/work/xen-4.6.1/tools/firmware/ovmf-dir-remote/Build/OvmfX64/RELEASE_GCC48/FV/FVMAIN_COMPACT.inf']




Comment 1


Mekong





          2016-09-14 12:38:37 UTC
        

I don't use xen but use ovmf with qemu with image size 2MB. I think it should not be a problem to increase the image size to 2 MB.




Comment 2


Tomáš Mózes





          2018-07-18 08:39:57 UTC
        

Cannot reproduce with xen 4.10.1, please report back if it's still an issue. We had an ovmf update before, so maybe the size was increased with that sync.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

