Title: 340071 – app-admin/conky - USE-flag to disable xdamage extension
URL: https://bugs.gentoo.org/show_bug.cgi?id=340071

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 340071
app-admin/conky - USE-flag to disable xdamage extension
Last modified: 2018-08-18 21:27:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 340071 
      - app-admin/conky - USE-flag to disable xdamage extension


Summary:
app-admin/conky - USE-flag to disable xdamage extension
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Daniel Pielmeier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-10-07 15:16 UTC by Nikolaj Šujskij





      Modified:
    
2018-08-18 21:27 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



brenden
dragonheart









See Also:


https://sourceforge.net/tracker/?func=detail&aid=3147327&group_id=143975&atid=757308





Package list:







Runtime testing required:

---























      Attachments
    




Patch against app-admin/conky-1.8.1adding IUSE="noxdamage"

              (conky-noxdamage.patch,1.43 KB,
                patch)

            
2010-10-07 15:20 UTC,

            Nikolaj Šujskij




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nikolaj Šujskij





          2010-10-07 15:16:19 UTC
        

If conky (up to v. 1.8.1) is built with xdamage support (--enable-xdamage, which is set with USE="+X" in Gentoo), then conky in own "normal" window* eats up to 100% of CPU core (together with X process) in non-reparenting WMs (Xmonad, dwm, awesome).

Building it without support for Xdamage X11 extension fixes the problem, but current USE set doesn't permit it. Please add IUSE="noxdamage" for users to be capable to use Conky in described way. Patch attached

[*] in conkyrc:
 own_window yes
 own_window_type normal

Reproducible: Always




Relevant links

Xmonad bug report: http://code.google.com/p/xmonad/issues/detail?id=193#c3

Conky bug report: http://sourceforge.net/tracker/index.php?func=detail&aid=1662692&group_id=143975&atid=757308




Comment 1


Nikolaj Šujskij





          2010-10-07 15:20:53 UTC
        

Created attachment 249853 [details, diff]
Patch against app-admin/conky-1.8.1adding IUSE="noxdamage"




Comment 2


Lupo Alberto





          2010-10-08 06:45:04 UTC
        

This bug is completely reproducible and well on my «x86» system (mostly stable branch of the portage tree, but  x11-wm/awesome-3.4.8 ).




Comment 3


Brenden Matthews





          2010-10-14 23:41:12 UTC
        

Can you please confirm that using "alignment none" doesn't work?

i.e., conky -a none




Comment 4


Nikolaj Šujskij





          2010-10-16 15:10:08 UTC
        

 Yes, `alignment none` doesn't help here.

> Can you please confirm that using "alignment none" doesn't work?
> 
> i.e., conky -a none
> 






Comment 5


Daniel Pielmeier






          2010-11-21 12:50:09 UTC
        

I don't think I will add an use flag for this, this would be just a workaround.

@Brenden: Is there a way to fix this in conky?




Comment 6


Nikolaj Šujskij





          2011-08-31 13:27:46 UTC
        

It is not fix as such, but workaround sufficient for me: with `own_window_type desktop` conky window is managed by awesome just as normal one, but doesn't eat CPU like mad.




Comment 7


Nikolaj Šujskij





          2018-08-18 18:37:54 UTC
        

Seems to be fixed in app-admin/conky-1.10.8-r2




Comment 8


Daniel Pielmeier






          2018-08-18 21:27:14 UTC
        

Thanks for the feedback!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

