Title: 92974 – checkfs deos not check if raid devices are already started
URL: https://bugs.gentoo.org/show_bug.cgi?id=92974

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 92974
checkfs deos not check if raid devices are already started
Last modified: 2005-05-17 15:20:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 92974 
      - checkfs deos not check if raid devices are already started


Summary:
checkfs deos not check if raid devices are already started
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-17 13:01 UTC by Bryan Whitehead





      Modified:
    
2005-05-17 15:20 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Bryan Whitehead





          2005-05-17 13:01:05 UTC
        

When booting up, checkfs will attempt to start up all of the raid devices in
checkfs.

If a kernel is configured to automatically start all the software raid devices
this will cause the checkfs to fail.

Specifically, when "/sbin/raidstart /dev/md/0" is run by checkfs raidstart will
return and error... example:
beavis ~ # /sbin/raidstart /dev/md/0
/dev/md/0: already running
beavis ~ # echo $?
1
beavis ~ #

So even though all the software raid devices are working properly an error will
be thrown as /sbin/raidstart throws an error even if the raiddev is running.

Reproducible: Always
Steps to Reproduce:
1. configure kernel to automatically start up raid (persistant raid software
devices)
2. create raid device with proper entries in /etc/raidtab
3. reboot

note: I have not tried using the mdadm tools.
Actual Results:  
Checkfs hangs machine and asks for root password to fix the problem - when no
problem exist.

Expected Results:  
booted as normal - all raid devices are working.

beavis ~ # emerge info
Portage 2.0.51.21 (default-linux/x86/2005.0, gcc-3.3.4, glibc-2.3.5-r0,
2.4.28-gentoo-r8 i686)
=================================================================
System uname: 2.4.28-gentoo-r8 i686 AMD Athlon(tm) XP 2800+
Gentoo Base System version 1.6.11
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.4
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.11
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/java-experimental"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 apache2 apm arts avi bcmath berkdb bitmap-fonts bzlib calendar
clearpasswd cpdflib crypt cups curl dba doc emboss encode extensions foomaticdb
fortran ftp gd gdbm gif gmp gpm gtk2 iconv imagemagick imap imlib ipv6 java jpeg
junit ldap libg++ libwww lzw-tiff mad maildir memlimit mikmod mime motif mp3
mpeg mysql ncurses nls ogg oggvorbis opengl oss pam pam-mysql pcre pdflib perl
png postgres python quicktime readline sasl sdl session sharedext sharedmem
slang soap sockets spell ssl svga tcpd tetex tidy tiff tokenizer truetype
truetype-fonts type1-fonts vhosts vorbis wddx xml2 xmlrpc xmms xv zlib
userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


SpanKY






          2005-05-17 15:20:19 UTC
        

try baselayout-1.11.12-r1









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

