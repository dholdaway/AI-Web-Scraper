Title: 179442 – sys-apps/coreutils-6.9-r1 - sigill when doing cp -r on ARM
URL: https://bugs.gentoo.org/show_bug.cgi?id=179442

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179442
sys-apps/coreutils-6.9-r1 - sigill when doing cp -r on ARM
Last modified: 2007-06-24 23:43:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179442 
      - sys-apps/coreutils-6.9-r1 - sigill when doing cp -r on ARM


Summary:
sys-apps/coreutils-6.9-r1 - sigill when doing cp -r on ARM
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo ARM Porters








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-22 16:36 UTC by Dmitry Bilunov





      Modified:
    
2007-06-24 23:43 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



alexxy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Stack trace, disassembly and some registers

              (gdb.log,1.26 KB,
                text/plain)

            
2007-05-22 16:39 UTC,

            Dmitry Bilunov




Details





strace of cp -r test /tmp

              (strace.log,119.66 KB,
                text/plain)

            
2007-05-22 18:15 UTC,

            Alexey Shvetsov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dmitry Bilunov





          2007-05-22 16:36:33 UTC
        

cp emits SIGILL signal (Illegal instruction), when invoked with "-r" option

Reproducible: Always

Steps to Reproduce:
1. Install coreutils-6.9 on a PXA270 device
2. Create a folder with some files
3. Try to copy it using cp -r

Actual Results:  
cp emits "Illegal instruction" after copying all files

Expected Results:  
cp ends its execution correctly after copying all files

hx4700 ~ # cp -r testpd temp
Illegal instruction

hx4700 ~ # mkdir test
hx4700 ~ # cd test
hx4700 test #
hx4700 test # for x in `seq 1 100`
> do
> echo $x > $x
> done
hx4700 test #              
hx4700 test # ls
1    12  16  2   23  27  30  34  38  41  45  49  52  56  6   63  67  70  74  78  81  85  89  92  96
10   13  17  20  24  28  31  35  39  42  46  5   53  57  60  64  68  71  75  79  82  86  9   93  97
100  14  18  21  25  29  32  36  4   43  47  50  54  58  61  65  69  72  76  8   83  87  90  94  98
11   15  19  22  26  3   33  37  40  44  48  51  55  59  62  66  7   73  77  80  84  88  91  95  99

hx4700 ~ # cp -r test /tmp/
Illegal instruction
hx4700 ~ #
hx4700 ~ # ls /tmp/test
1    12  16  2   23  27  30  34  38  41  45  49  52  56  6   63  67  70  74  78  81  85  89  92  96
10   13  17  20  24  28  31  35  39  42  46  5   53  57  60  64  68  71  75  79  82  86  9   93  97
100  14  18  21  25  29  32  36  4   43  47  50  54  58  61  65  69  72  76  8   83  87  90  94  98
11   15  19  22  26  3   33  37  40  44  48  51  55  59  62  66  7   73  77  80  84  88  91  95  99




Comment 1


Dmitry Bilunov





          2007-05-22 16:39:52 UTC
        

Created attachment 120008 [details]
Stack trace, disassembly and some registers




Comment 2


Jakub Moc (RETIRED)






          2007-05-22 16:48:19 UTC
        

What's PXA270? Please post your emerge --info and coreutils version.




Comment 3


Alexey Shvetsov







          2007-05-22 17:00:38 UTC
        

intel pxa270 is armv5te processor with iwmmxt coprocessor
hx4700 ~ # emerge -pv coreutils

These are the packages that would be merged, in order:

Calculating dependencies               ... done!
[ebuild   R   ] sys-apps/coreutils-6.9-r1  USE="acl nls xattr (-selinux) -static" 0 kB

Total: 1 package (1 reinstall), Size of downloads: 0 kB

hx4700 ~ # emerge --info
Portage 2.1.2.7 (default-linux/arm/2007.0, gcc-4.1.2, glibc-2.5-r2, 2.6.21-hh0 armv5tel)
=================================================================
System uname: 2.6.21-hh0 armv5tel XScale-PXA270 rev 7 (v5l)
Gentoo Base System release 2.0.0_alpha3
Timestamp of tree: Tue, 22 May 2007 09:00:01 +0000
distcc 2.18.3 armv5te-softfloat-linux-gnueabi (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.61
sys-devel/automake:  1.9.6-r2, 1.10
sys-devel/binutils:  2.17.50.0.16
sys-devel/gcc-config: 1.4.0
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="arm ~arm"
AUTOCLEAN="yes"
CBUILD="armv5te-softfloat-linux-gnueabi"
CFLAGS="-Os -pipe -march=iwmmxt -mtune=iwmmxt -fomit-frame-pointer"
CHOST="armv5te-softfloat-linux-gnueabi"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-Os -pipe -march=iwmmxt -mtune=iwmmxt -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="buildpkg candy distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.UTF-8"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--sort-common"
LINGUAS="ru en"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl alsa apm arm bash-completion berkdb bitmap-fonts bzip2 cli cracklib crypt cups glibc-omitfp iconv ipv6 isdnlog midi ncurses nls no-old-linux nptl nptlonly openmp pam pcre perl ppds pppd profile python readline reflection session slang spl ssl tcpd truetype truetype-fonts type1-fonts ucs2 unicode wifi xattr xcb xorg zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" USERLAND="GNU" VIDEO_CARDS="fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 4


Dmitry Bilunov





          2007-05-22 17:21:34 UTC
        

Added information about system




Comment 5


Alexey Shvetsov







          2007-05-22 18:15:28 UTC
        

Created attachment 120016 [details]
strace of cp -r test /tmp




Comment 6


SpanKY






          2007-06-11 05:15:02 UTC
        

so try coreutils with USE=-acl




Comment 7


Alexey Shvetsov







          2007-06-11 10:14:11 UTC
        

(In reply to comment #6)
> so try coreutils with USE=-acl
> 
looks like this bug in sys-apps/acl
cause after upgrading to sys-apps/acl-2.2.44 
coreutils works fine =)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

