Title: 198436 – media-sound/soundkonverter -  add amarok support
URL: https://bugs.gentoo.org/show_bug.cgi?id=198436

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 198436
media-sound/soundkonverter -  add amarok support
Last modified: 2007-11-10 08:58:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 198436 
      - media-sound/soundkonverter -  add amarok support


Summary:
media-sound/soundkonverter -  add amarok support
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Lowest
       enhancement
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-11-08 08:49 UTC by juantxorena@gmail.com





      Modified:
    
2007-11-10 08:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jakub









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




soundkonverter-0.3.6-r1.diff

              (soundkonverter-0.3.6-r1.diff,719 bytes,
                patch)

            
2007-11-08 08:50 UTC,

            juantxorena@gmail.com




Details
            | Diff





use.local.desc.diff

              (use.local.diff,559 bytes,
                patch)

            
2007-11-08 08:51 UTC,

            juantxorena@gmail.com




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


juantxorena@gmail.com





          2007-11-08 08:49:15 UTC
        

media-sound/soundkonverter comes with an amarok script to transcode files from there. Is installed by default (in the ebuild and in the source package itself), but it needs kde-base/qtruby installed to work (and media-sound/amarok, of course), which isn't installed by default.

I have made a patch for the ebuild that adds a new "amarok" USE flag which pulls media-sound/amarok and kde-base/qtruby when selected, in the same way that media-sound/transkode. Patch is coming.

Reproducible: Always




Comment 1


juantxorena@gmail.com





          2007-11-08 08:50:28 UTC
        

Created attachment 135475 [details, diff]
soundkonverter-0.3.6-r1.diff

The patch for the ebuild.




Comment 2


juantxorena@gmail.com





          2007-11-08 08:51:23 UTC
        

Created attachment 135476 [details, diff]
use.local.desc.diff

The description for the new local USE flag.




Comment 3


Jakub Moc (RETIRED)






          2007-11-08 09:23:46 UTC
        

Eh, all the audio use flags are already bogus and do nothing except for pulling in some dependencies; why do you want to add even more of them? They should be all removed and converted to some postinstall message.






Comment 4


juantxorena@gmail.com





          2007-11-08 10:25:05 UTC
        

(In reply to comment #3)
> Eh, all the audio use flags are already bogus and do nothing except for pulling
> in some dependencies; why do you want to add even more of them? They should be
> all removed and converted to some postinstall message.
> 

Because if a package needs another as a dependency for a particular function it must pull it automatically. I'm aware of how some packages handle this kind of stuff, like gstreamer plugins. But there are a lot of apps and libs that they have to be only present to be used by other apps: the aforementioned gstreamer, media-sound/exaile, mostly everything with latex support, a lot of python and other script languages apps, etc.

Removing those kind of dependencies and putting them as postinstall messages is like killing the dependency handling and install everything you need one by one. In fact, media-sound/exaile hadn't got any USE flags to control the type of files that can play before it went into portage tree, because they were gstreamer plugins and they only need to be installed to be used by exaile (there's no need of recompile the program), but later they were added because searching in the ebuild and installing plugins one by one was a pain in the ass, is better to recompile unnecessarily the program a couple of times in a year that doing that.

Not only that: in this case, if soundkonverter is the only program that needs qtruby because of amarok and the user is forced to install it explicitly, it will be added to the world file. If he uninstalls the program, unset the useflag or the program changes and don't need qtruby anymore, the user will probably forget that he installed that because of the app, it won't be never removed when doing "emerge --depclean" and it will stay in the system forever with its own dependencies, wasting resources.

Resuming: the use of useflags for this kind of dependencies is not perfect but it's still way better than the alternative of postinstall messages and emerge dependencies by hand.




Comment 5


Samuli Suominen (RETIRED)






          2007-11-10 08:50:31 UTC
        

(In reply to comment #4)
> like killing the dependency handling and install everything you need one by
> one. In fact, media-sound/exaile hadn't got any USE flags to control the type
> of files that can play before it went into portage tree, because they were
> gstreamer plugins and they only need to be installed to be used by exaile
> (there's no need of recompile the program), but later they were added because
> searching in the ebuild and installing plugins one by one was a pain in the
> ass, is better to recompile unnecessarily the program a couple of times in a
> year that doing that.

Lies, I've added it into tree and maintain it.. it had these use flags from day one. Only reason exaile has these USE flags is small compile time it has.

I have to agree with Jakub here, post install message would be a lot better.. I'm doing this with media-sound/bmpx




Comment 6


Samuli Suominen (RETIRED)






          2007-11-10 08:58:58 UTC
        

pkg_postinst() {
        elog "The audio USE flags are for your convience, but are not required."
        elog "For AmaroK users there is a script included with this package."
        elog "You can enable it with the Script Manager tool in Amarok, after"
        elog "installing kde-base/qtruby."
}










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

