Title: 770382 – During boot the udev is not renaming the eth* interfaces anymore unless I restart udev (5.4.97-gentoo-x86_64)
URL: https://bugs.gentoo.org/show_bug.cgi?id=770382

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 770382
During boot the udev is not renaming the eth* interfaces anymore unless I restart udev (5.4.97-gentoo-x86_64)
Last modified: 2021-02-17 12:26:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 770382 
      - During boot the udev is not renaming the eth* interfaces anymore unless I restart udev (5.4.97-gentoo-x86_64)


Summary:
During boot the udev is not renaming the eth* interfaces anymore unless I res...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-02-13 15:43 UTC by Octavian





      Modified:
    
2021-02-17 12:26 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ionen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Octavian





          2021-02-13 15:43:23 UTC
        

dmesg | grep eth


[    3.538938] r8169 0000:04:05.0 eth0: RTL8169sb/8110sb, d8:5d:4c:81:0a:66, XID 100, IRQ 22
[    3.538939] r8169 0000:04:05.0 eth0: jumbo features [frames: 7152 bytes, tx checksumming: ok]
[    3.540219] r8169 0000:04:09.0 eth1: RTL8169sb/8110sb, 00:80:5a:69:c6:27, XID 100, IRQ 18
[    3.540221] r8169 0000:04:09.0 eth1: jumbo features [frames: 7152 bytes, tx checksumming: ok]
[    3.541445] r8169 0000:04:0b.0 eth2: RTL8169sb/8110sb, 00:16:0a:1c:42:73, XID 100, IRQ 19
[    3.541446] r8169 0000:04:0b.0 eth2: jumbo features [frames: 7152 bytes, tx checksumming: ok]
[    3.736803] e1000e 0000:00:19.0 eth3: (PCI Express:2.5GT/s:Width x1) 00:19:99:0f:6b:40
[    3.736805] e1000e 0000:00:19.0 eth3: Intel(R) PRO/1000 Network Connection
[    3.736847] e1000e 0000:00:19.0 eth3: MAC: 8, PHY: 8, PBA No: FFFFFF-0FF
[  121.504092] e1000e 0000:00:19.0 enp0s25: renamed from eth3
[  121.567034] r8169 0000:04:05.0 enp4s5: renamed from eth0
[  121.596924] r8169 0000:04:09.0 enp4s9: renamed from eth1
[  121.634795] r8169 0000:04:0b.0 enp4s11: renamed from eth2

As seen the eth* interfaces stay active until I restart udev. 




emerge --info 
Portage 3.0.13 (python 3.8.7-final-0, default/linux/amd64/17.1, gcc-9.3.0, glibc-2.32-r5, 5.4.97-gentoo-x86_64 x86_64)
=================================================================
System uname: Linux-5.4.97-gentoo-x86_64-x86_64-Intel-R-_Core-TM-2_Duo_CPU_E8500_@_3.16GHz-with-glibc2.2.5
KiB Mem:     7827904 total,   5067468 free
KiB Swap:    4194300 total,   4194300 free
Timestamp of repository gentoo: Sat, 13 Feb 2021 13:52:43 +0000
Head commit of repository gentoo: f517188e4a9c4fd112d2fc17b461e33aa3eb562c

sh bash 5.0_p18
ld GNU ld (Gentoo 2.35.1 p2) 2.35.1
app-shells/bash:          5.0_p18::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.30.3::gentoo
dev-lang/python:          3.8.7-r1::gentoo, 3.9.1-r1::gentoo
dev-util/cmake:           3.17.4-r1::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/openrc:          0.42.1-r1::gentoo
sys-apps/sandbox:         2.20::gentoo
sys-devel/autoconf:       2.69-r5::gentoo
sys-devel/automake:       1.16.2-r1::gentoo
sys-devel/binutils:       2.35.1-r1::gentoo
sys-devel/gcc:            9.3.0-r2::gentoo
sys-devel/gcc-config:     2.3.2-r1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.4-r1::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r5::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://anongit.gentoo.org/git/repo/sync/gentoo.git
    priority: -1000

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/easy-rsa /usr/share/gnupg/qualified.txt /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.3/ext-active/ /etc/php/apache2-php7.4/ext-active/ /etc/php/cgi-php7.3/ext-active/ /etc/php/cgi-php7.4/ext-active/ /etc/php/cli-php7.3/ext-active/ /etc/php/cli-php7.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS=" --usepkg --buildpkg-exclude "virtual/* sys-kernel/* app-emulation/virtualbox-modules""
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs buildpkg config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.leaseweb.com/gentoo/"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="acl acpi amd64 apache2 apm berkdb bzip2 cli crypt dbus dhcp dri fam gdbm geoip gpm hpn iconv imap ipv6 libglvnd libtirpc libwww maildir mysql ncurses network nfsv41 nls nptl openmp pam pcre php readline sasl seccomp smp snmp split-usr ssl svg symlink syslog tcpd threads tracepath traceroute unicode vhosts vim-syntax xattr zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="actions alias auth_basic authn_core authn_anon authn_dbm authn_file authz_dbm authz_groupfile authz_core authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir cache_disk env expires ext_filter file_cache filter headers include info log_config logio mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias auth_digest cgi cgid unixd socache_shmcb" APACHE2_MPMS="peruser" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 sse4_1 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput" KERNEL="linux" L10N="en en_GB" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-4 php7-3" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_8" PYTHON_TARGETS="python3_8" RUBY_TARGETS="ruby26" USERLAND="GNU" VIDEO_CARDS="amdgpu fbdev intel nouveau radeon radeonsi vesa dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Ionen Wolkens






          2021-02-13 16:21:43 UTC
        

Is this sys-fs/udev or sys-fs/eudev?

If eudev, did this start happening after eudev-3.2.10 bump? Considering was stabilized just yesterday.




Comment 2


Octavian





          2021-02-16 15:27:55 UTC
        

Sorry for the late comment. 

I use eudev and both versions 3.2.9 and 3.2.10 have the same behaviour.




Comment 3


Ionen Wolkens






          2021-02-16 22:24:55 UTC
        

Okay, was worried it may be a new issue but in that case it's probably something obscure or system-specific.

Did it not trigger at all in the first place?
e.g. like bug #765793

But like the other bug suggested it may be better to visit support venues to figure out what's wrong and with what. I feel we would be getting more reports if a stable critical system component was malfunctioning in such an obvious way.




Comment 4


Octavian





          2021-02-17 08:31:57 UTC
        

I have another Gentoo system which was not affected by this bug.
I noticed that the unaffected system was still using UDEV instead of EUDEV.

So I have replaced the eudev with udev and now I do not see the problem.




Comment 5


Ionen Wolkens






          2021-02-17 12:26:39 UTC
        

I see, well glad it works :)

Personally do agree better off using sys-fs/udev and a eudev fork should've waited until "have" to but well, that's always a heated debate.

Tentatively closing as working, if anyone has insight on what might have happened and if something needs fixing feel free to drop a note.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

