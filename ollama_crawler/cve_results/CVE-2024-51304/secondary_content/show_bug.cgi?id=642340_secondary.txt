Title: 642340 – =dev-perl/Tk-804.33.0 missing net-libs/libnsl dependency (ld: error: cannot find -lnsl)
URL: https://bugs.gentoo.org/show_bug.cgi?id=642340

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 642340
=dev-perl/Tk-804.33.0 missing net-libs/libnsl dependency (ld: error: cannot find -lnsl)
Last modified: 2018-04-28 16:02:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 642340 
      - =dev-perl/Tk-804.33.0 missing net-libs/libnsl dependency (ld: error: cannot find -lnsl)


Summary:
=dev-perl/Tk-804.33.0 missing net-libs/libnsl dependency (ld: error: cannot f...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




glibc-libnsl



 

        Show dependency tree





 





      Reported:
    
2017-12-26 20:01 UTC by Petross404(Petros S)





      Modified:
    
2018-04-28 16:02 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kentnl









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (dev-perl:Tk-804.33.0:20171226-183949.log.zip,64.76 KB,
                application/zip)

            
2017-12-26 20:07 UTC,

            Petross404(Petros S)




Details





emerge --info

              (info,25.73 KB,
                text/plain)

            
2017-12-26 20:08 UTC,

            Petross404(Petros S)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Petross404(Petros S)





          2017-12-26 20:01:01 UTC
        

Compiling =dev-perl/Tk-804.33.0 failes with:

/usr/lib/gcc/x86_64-pc-linux-gnu/7.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: error: cannot find -lnsl

Emerging net-libs/libnsl allowed Tk to build successfully. So, is it an undeclared dependency?




Comment 1


Petross404(Petros S)





          2017-12-26 20:07:32 UTC
        

Created attachment 511686 [details]
build.log




Comment 2


Petross404(Petros S)





          2017-12-26 20:08:00 UTC
        

Created attachment 511688 [details]
emerge --info




Comment 3


Kent Fredric (IRC: kent\n) (RETIRED)






          2017-12-26 21:55:56 UTC
        

  my @try   = qw(-lsocket -lnsl -lm);
  push(@try,'-lc') if $^O =~ /svr4/i;


*sigh*




Comment 4


Kent Fredric (IRC: kent\n) (RETIRED)






          2018-02-28 02:56:13 UTC
        

I'm currently trying to reproduce this and I don't seem to able to replicate the problem, even without libnsl installed.

Despite the mentions of -lnsl in the source code, those are "soft-auto-detect" paths, and you shouldn't need libnsl installed to make dev-perl/Tk compile.

Its possible you've run afoul of Perl auto-including nsl in its configure (see bug #638518 for details ), so please make sure that:

    /usr/bin/perl -V | grep nsl

Emits no output before re-attempting.




Comment 5


Andreas K. Hüttel







          2018-04-28 16:02:04 UTC
        

Let's hope this is fixed with newer dev-lang/perl.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

