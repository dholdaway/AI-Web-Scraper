Title: 740334 – media-sound/clementine-1.4.0_rc1 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=740334

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 740334
media-sound/clementine-1.4.0_rc1 fails to compile
Last modified: 2021-12-19 02:15:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 740334 
      - media-sound/clementine-1.4.0_rc1 fails to compile


Summary:
media-sound/clementine-1.4.0_rc1 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Alexey








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




systemwide-clang



 

        Show dependency tree





 





      Reported:
    
2020-09-04 08:38 UTC by Agostino Sarubbo





      Modified:
    
2021-12-19 02:15 UTC
      (History)
    




          CC List:
        

9 
          users
          
            (show)
          



alexey+gentoo
creideiki+gentoo-bugzilla
dschridde+gentoobugs
gem
gentoo
kajanos
leif
proxy-maint
sound









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.xz

              (build.log.xz,36.78 KB,
                application/x-xz)

            
2020-09-04 08:38 UTC,

            Agostino Sarubbo




Details





1-CMakeError.log

              (1-CMakeError.log,2.48 KB,
                text/plain)

            
2020-09-04 08:38 UTC,

            Agostino Sarubbo




Details





1-CMakeOutput.log

              (1-CMakeOutput.log,36.05 KB,
                text/plain)

            
2020-09-04 08:38 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2020-09-04 08:38:19 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: media-sound/clementine-1.4.0_rc1 fails to compile.
Discovered on: amd64 (internal ref: tinderbox)

NOTE:
This machine uses a clang/LLVM toolchain.
If you think that this issue is strictly related to clang/LLVM please block bug 408963. If you think that this issue is strictly related to the LLD linker, please block bug 731004.
This machine uses also GLIBC-2.32. If you think that this issue is strictly related to GLIBC please block bug 736174.




Comment 1


Agostino Sarubbo






          2020-09-04 08:38:22 UTC
        

Created attachment 658328 [details]
build.log.xz

build log and emerge --info (compressed because it exceeds attachment limit, use 'xzless' to read it)




Comment 2


Agostino Sarubbo






          2020-09-04 08:38:23 UTC
        

Created attachment 658330 [details]
1-CMakeError.log

1-CMakeError.log




Comment 3


Agostino Sarubbo






          2020-09-04 08:38:25 UTC
        

Created attachment 658332 [details]
1-CMakeOutput.log

1-CMakeOutput.log




Comment 4


Leif Biberg Kristensen





          2021-09-27 08:26:28 UTC
        

>>> Emerging (3 of 3) media-sound/clementine-1.4.0_rc1::gentoo
 * clementine-1.4.0rc1.tar.xz BLAKE2B SHA512 size ;-) ...                                                                                                                                                                                                                                                  [ ok ]
>>> Unpacking source...
>>> Unpacking clementine-1.4.0rc1.tar.xz to /var/tmp/portage/media-sound/clementine-1.4.0_rc1/work
>>> Source unpacked in /var/tmp/portage/media-sound/clementine-1.4.0_rc1/work
>>> Preparing source in /var/tmp/portage/media-sound/clementine-1.4.0_rc1/work/clementine-1.4.0rc1 ...
 * Looking in src/translations for new locales ...                                                                                                                                                                                                                                                         [ ok ]
 * Source directory (CMAKE_USE_DIR): "/var/tmp/portage/media-sound/clementine-1.4.0_rc1/work/clementine-1.4.0rc1"
 * Build directory  (BUILD_DIR):     "/var/tmp/portage/media-sound/clementine-1.4.0_rc1/work/clementine-1.4.0_rc1_build"
 * Applying clementine-1.4.0_rc1-QPainterPath_include.patch ...                                                                                                                                                                                                                                            [ ok ]
 * Applying clementine-1.4.0_rc1-gcc11-fix-static-assertion-failure.patch ...                                                                                                                                                                                                                              [ ok ]
 * Applying clementine.patch ...
patching file ext/clementine-spotifyblob/CMakeLists.txt
Hunk #1 FAILED at 7.
1 out of 1 hunk FAILED -- saving rejects to file ext/clementine-spotifyblob/CMakeLists.txt.rej
patching file ext/clementine-tagreader/CMakeLists.txt
Hunk #1 FAILED at 7.
1 out of 1 hunk FAILED -- saving rejects to file ext/clementine-tagreader/CMakeLists.txt.rej
patching file src/CMakeLists.txt
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file src/CMakeLists.txt.rej
patching file tests/CMakeLists.txt
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file tests/CMakeLists.txt.rej                                                                                                                                                                                                                                  [ !! ]
 * ERROR: media-sound/clementine-1.4.0_rc1::gentoo failed (prepare phase):
 *   patch -p1  failed with /etc/portage/patches/media-sound/clementine-1.4.0_rc1/clementine.patch
 * 
 * Call stack:
 *               ebuild.sh, line  127:  Called src_prepare
 *             environment, line 2265:  Called cmake_src_prepare
 *             environment, line 1089:  Called default_src_prepare
 *      phase-functions.sh, line  923:  Called __eapi6_src_prepare
 *             environment, line  358:  Called eapply_user
 *             environment, line 1279:  Called eapply '/etc/portage/patches/media-sound/clementine-1.4.0_rc1/clementine.patch'
 *             environment, line 1249:  Called _eapply_patch '/etc/portage/patches/media-sound/clementine-1.4.0_rc1/clementine.patch'
 *             environment, line 1187:  Called __helpers_die 'patch -p1  failed with /etc/portage/patches/media-sound/clementine-1.4.0_rc1/clementine.patch'
 *   isolated-functions.sh, line  112:  Called die
 * The specific snippet of code:
 *              die "$@"




Comment 5


Leif Biberg Kristensen





          2021-09-27 09:50:27 UTC
        

Ahem. Seems like I forgot to remove my own patch :)




Comment 6


Gary E. Miller





          2021-09-28 19:51:32 UTC
        

(In reply to Leif Biberg Kristensen from comment #5)
> Ahem. Seems like I forgot to remove my own patch :)

Same here. Removing the patch resolved my issue as well:

rm -R  /etc/portage/patches/media-sound/clementine-1.4.0_rc1/

I always assumed, which I now know is wrong, that the version would change when the ebuild changes.  That would have prevented this confusion.




Comment 7


Alexey





          2021-12-19 02:15:31 UTC
        

Builds fine with clang+lld now. Both 1.4.0_rc1, and 9999









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

