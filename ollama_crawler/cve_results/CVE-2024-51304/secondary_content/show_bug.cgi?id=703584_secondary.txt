Title: 703584 – Request to update frequency of distfiles mirror synchronisations
URL: https://bugs.gentoo.org/show_bug.cgi?id=703584

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 703584
Request to update frequency of distfiles mirror synchronisations
Last modified: 2019-12-23 19:30:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 703584 
      - Request to update frequency of distfiles mirror synchronisations


Summary:
Request to update frequency of distfiles mirror synchronisations
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Mirrors




Classification:

Unclassified




Component:

Feature Request

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mirror Admins








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-12-23 00:31 UTC by Michael 'veremitz' Everitt





      Modified:
    
2019-12-23 19:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael 'veremitz' Everitt





          2019-12-23 00:31:15 UTC
        

After a brief request for an updated stage4-musl image from prometheanfire, it was concluded that mirrormaster only pushes updates to mirrors on a daily cycle at 0000 UTC?

Is there any reason (to reduce load, and increase diversity across mirrors) to stagger updates, and update more frequently, eg. every 6 hours (4 times per day), and would there be any merit in actually synchronising geographic mirrors more than once during approximate 'daytime' hours? (if not done on an even x-hour schedule)?

It's rather inconvenient to wait for a day (or certainly >12h) for an updated build to be available, and I'm sure distfiles for packages are updating more regularly than daily (or perhaps, indeed, this update script could be 'bumped' in a similar fashion).




Comment 1


Robin Johnson









          2019-12-23 19:13:09 UTC
        

No, you're entirely wrong here, something in your test wasn't correct, and my own testing shows the mirrors are much more up to date than you claim.

Public mirrors are required to update from the OSL mirror system every 4 hours:
https://wiki.gentoo.org/wiki/Project:Infrastructure/Mirrors/Source
This is tracked in mirrorstats.

The OSL mirror system fetched HOURLY from Gentoo's mastermirror, and I can confirm that's working fine.

The scrape from experimental to Gentoo's mastermirror is presently every 8 hours, and I just moved it up to every 2 hours now.

If you find a mirror you THINK is out of date, please capture ALL of these files at that exact moment, and file a new bug with them.
experimental/timestamp.x
experimental/timestamp.chk
experimental/timestamp.mirmon
experimental/.timestamp-experimental.x
releases/.timestamp-releases.x
snapshots-final/.timestamp-snapshots.x
distfiles/timestamp.mirmon
distfiles/timestamp.dev-local




Comment 2


Michael 'veremitz' Everitt





          2019-12-23 19:30:28 UTC
        

Thanks for the clarification, Robin. It would appear the the experimental 'scrape' as you put it was catching me out, and I was speculating based on extrapolation for the rest :].

Now that I know where to find the timestamp files, I can double-check if there are any issues in the future.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

