Title: 262731 – [gnome-overlay] =media-video/totem-2.26.0 sandbox issue
URL: https://bugs.gentoo.org/show_bug.cgi?id=262731

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 262731
[gnome-overlay] =media-video/totem-2.26.0 sandbox issue
Last modified: 2009-09-06 20:19:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 262731 
      - [gnome-overlay] =media-video/totem-2.26.0 sandbox issue


Summary:
[gnome-overlay] =media-video/totem-2.26.0 sandbox issue
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

265611

      (view as bug list)
    


Depends on:







Blocks:




gnome2.26



 

        Show dependency tree





 





      Reported:
    
2009-03-16 21:43 UTC by Kobboi





      Modified:
    
2009-09-06 20:19 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



chrissicool
magowiz
maxbritov
pacho









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log from Totem

              (build.log,18.03 KB,
                text/plain)

            
2009-03-25 18:45 UTC,

            白川間瀬流




Details





this works

              (totem-2.26.0.ebuild,3.49 KB,
                patch)

            
2009-03-25 18:53 UTC,

            白川間瀬流




Details
            | Diff





My /etc/gconf files and filesystem properties

              (gconf-files.txt,20.68 KB,
                text/plain)

            
2009-04-10 13:54 UTC,

            Kobboi




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kobboi





          2009-03-16 21:43:19 UTC
        

configure: ** Nautilus properties page enabled
configure: ** iso-codes support checked
configure: ** XTest (legacy screensaver) support enabled
configure: ** D-Bus (gnome-screensaver) support enabled
configure: ** XVidmode support enabled
configure: ** XFree86 multimedia keys support enabled
configure: ** SM client support enabled
configure: End options
>>> Source configured.
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE "/var/log/sandbox/sandbox-10293.log"

VERSION 1.0
FORMAT: F - Function called
FORMAT: S - Access Status
FORMAT: P - Path as passed to function
FORMAT: A - Absolute Path (not canonical)
FORMAT: R - Canonical Path
FORMAT: C - Command Line

F: open_wr
S: deny
P: /root/.gconf/.testing.writeability
A: /root/.gconf/.testing.writeability
R: /root/.gconf/.testing.writeability
C: /usr/libexec/gconfd-2 

F: unlink
S: deny
P: /root/.gconf/.testing.writeability
A: /root/.gconf/.testing.writeability
R: /root/.gconf/.testing.writeability
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 

F: open_wr
S: deny
P: /root/.gconfd/saved_state
A: /root/.gconfd/saved_state
R: /root/.gconfd/saved_state
C: /usr/libexec/gconfd-2 
--------------------------------------------------------------------------------

>>> Failed to emerge media-video/totem-2.26.0, Log file:

>>>  '/var/tmp/portage/media-video/totem-2.26.0/temp/build.log'

Reproducible: Always

Steps to Reproduce:




Comment 1


白川間瀬流





          2009-03-25 18:42:02 UTC
        

same at me :(

no one whos interested to fix it?




Comment 2


白川間瀬流





          2009-03-25 18:45:17 UTC
        

Created attachment 186241 [details]
Build log from Totem




Comment 3


白川間瀬流





          2009-03-25 18:48:28 UTC
        

i found this in the ebuild

src_compile() {
	# FIXME: why does it need write access here, probably need to set up a fake
	# home in /var/tmp like other pkgs do

	addpredict "$(unset HOME; echo ~)/.gconf"
	addpredict "$(unset HOME; echo ~)/.gconfd"
	addpredict "$(unset HOME; echo ~)/.gnome2"

	gnome2_src_compile
}

try to do an patch




Comment 4


白川間瀬流





          2009-03-25 18:53:34 UTC
        

Created attachment 186242 [details, diff]
this works

This ebuild works and the finish compiled totem works fine =) have fun with it




Comment 5


Maxim Britov





          2009-03-31 08:40:18 UTC
        

I got this today. But...
/me re-emerged gnome-session-2.26.0 and sandbox-1.6
And "completed emerge (1 of 1) media-video/totem-2.26.0-r1" without any patches.





Comment 6


Gilles Dartiguelongue (RETIRED)






          2009-04-05 20:29:36 UTC
        

should be fixed now. I moved the addpredict to src_configure.




Comment 7


Nirbheek Chauhan (RETIRED)






          2009-04-10 06:01:13 UTC
        

*** Bug 265611 has been marked as a duplicate of this bug. ***




Comment 8


Nirbheek Chauhan (RETIRED)






          2009-04-10 10:56:47 UTC
        

*** Bug 265611 has been marked as a duplicate of this bug. ***




Comment 9


Nirbheek Chauhan (RETIRED)






          2009-04-10 10:57:37 UTC
        

Bug not fixed, or pops up again with 2.26.1




Comment 10


Kobboi





          2009-04-10 11:04:35 UTC
        

I thought I did the right thing by creating another bug report, since we're talking about a different version of the software and possibly a totally different family (-r*) of ebuilds. I apologize for the trouble.




Comment 11


Gilles Dartiguelongue (RETIRED)






          2009-04-10 11:34:16 UTC
        

please provide a build.log




Comment 12


Kobboi





          2009-04-10 12:14:08 UTC
        

The log is at the bug that was marked as a duplicate of this one. Are attachments meant to be duplicated as well?





Comment 13


Gilles Dartiguelongue (RETIRED)






          2009-04-10 12:45:57 UTC
        

hum no it's ok. Do you have mandatory/default settings set in your gconf system-wide configuration ?




Comment 14


Kobboi





          2009-04-10 13:54:25 UTC
        

Created attachment 187887 [details]
My /etc/gconf files and filesystem properties




Comment 15


Kobboi





          2009-04-10 13:54:52 UTC
        

$ cat /etc/gconf/2/path 

# This file stores the addresses of config sources for GConf
# When a value is stored or requested, the sources are scanned from top to 
# bottom, and the first one to have a value for the key (or the first one 
# to be writeable) is used to load/store the data.

# See the GConf manual for details

# Look first in systemwide mandatory settings directory
xml:readonly:/etc/gconf/gconf.xml.mandatory

# To read in any mandatory settings that the Sys Admin may have created
# prior to a desktop system upgrade. The SysAdmin can stick read-only system
# wide sources in this file.
include /etc/gconf/2/local-mandatory.path

# Now see where users want us to look - basically the user can stick arbitrary 
# sources in a ~/.gconf.path file and they're inserted here
include "$(HOME)/.gconf.path"

# Give users a default storage location, ~/.gconf
xml:readwrite:$(HOME)/.gconf

# Location for system-wide settings that are set by the defaults mechanism
xml:readonly:/etc/gconf/gconf.xml.system

# To read in any defaults settings that the Sys Admin may have created
# prior to a desktop system upgrade. The SysAdmin can stick default values
# system-wide in this file.
include /etc/gconf/2/local-defaults.path

# Finally, look at the systemwide defaults
xml:readonly:/etc/gconf/gconf.xml.defaults





Comment 16


Gilles Dartiguelongue (RETIRED)






          2009-06-03 21:08:02 UTC
        

If someone can still reproduce this bug, please provide a config.log and reopen this bug. Thanks.




Comment 17


Christian Ludwig





          2009-06-11 22:20:22 UTC
        

I had that exact same issue since totem-2.24.something until now. Today I enabled "policykit" USE flag, ran "emerge -uvDN gnome" and totem installed without a problem. I hope this helps.




Comment 18


Gilles Dartiguelongue (RETIRED)






          2009-08-03 20:41:24 UTC
        

the duplicated bugs look like older gconf not creating some needed directories in early 2.26 move to the tree. Since I can't trigger sandbox issues even by running commands configure does by hand and cleaning up root's home, I'm closing this worksforme. Please reopen with a config.log and ls -l /root if you can reproduce with up to date ~arch box.




Comment 19


Kobboi





          2009-09-06 20:19:29 UTC
        

This is probably useless information (since I can't provide you with anything more), but just fyim I had the same problemn again, upgrading to 2.27.2. A second emerge attempt went without a problem. Maybe something in the first emerge's pkg_postinst or something allowed the second emerge to succeed?











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

