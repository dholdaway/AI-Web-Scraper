Title: 634266 – distfiles.gentoo.org: ftp.halifax.rwth-aachen.de ipv6 is unreachable
URL: https://bugs.gentoo.org/show_bug.cgi?id=634266

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 634266
distfiles.gentoo.org: ftp.halifax.rwth-aachen.de ipv6 is unreachable
Last modified: 2017-10-15 20:18:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 634266 
      - distfiles.gentoo.org: ftp.halifax.rwth-aachen.de ipv6 is unreachable


Summary:
distfiles.gentoo.org: ftp.halifax.rwth-aachen.de ipv6 is unreachable
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Mirrors




Classification:

Unclassified




Component:

Server Problem

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       major
      


Assignee:

Mirror Admins








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-10-14 19:20 UTC by Andrei Slavoiu





      Modified:
    
2017-10-15 20:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrei Slavoiu





          2017-10-14 19:20:47 UTC
        

My /var/log/emerge-fetch.log is full of errors like:
Resolving distfiles.gentoo.org (distfiles.gentoo.org)... 2a00:8a60:e012:a00::21, 2600:3402:200:227::2, 2600:3404:200:237::2, ...                                                                                                                                                                                                                                          
Connecting to distfiles.gentoo.org (distfiles.gentoo.org)|2a00:8a60:e012:a00::21|:80... failed: Connection timed out.                                                                                                                                                                                                                                                     
Connecting to distfiles.gentoo.org (distfiles.gentoo.org)|2600:3402:200:227::2|:80... connected.

I'm setting the severity to high as being a timeout it slows down emerge significantly when lots of small files are not found on local mirrors as that particular ip gets picked first every time.

Reproducible: Always




Comment 1


Robin Johnson









          2017-10-14 22:47:52 UTC
        

It works fine for me, but we have seen other reports of IPv6 routing trouble recently.

Not much we can do about internet backbone trouble.




Comment 2


Andrei Slavoiu





          2017-10-15 00:01:04 UTC
        

Ok, I ran a tracepath and the last hop it reaches is 2001:638:c:a100::2(kr-aah15.x-win.dfn.de). Acording to whois that is a router of the "German National Research and Education Network" so I suppose the "RWTH Aachen University" hosting the Gentoo mirror has some way to contact them and you have a way to contact that university's sysadmins?




Comment 3


Andrei Slavoiu





          2017-10-15 00:08:52 UTC
        

Btw, doesn't seem to be an IPv6 only issue, IPv4 address is unreachable as well, though it clearly reaches the university's network. So most likely the server is just dead:

 4:  10.220.133.105                                       34.674ms asymm  6 
 5:  cr-fra1-be1.x-win.dfn.de                             33.662ms 
 6:  kr-aah15-0.x-win.dfn.de                              37.469ms 
 7:  fw-xwin-1-vl106.noc.rwth-aachen.de                   38.030ms asymm  8 
 8:  n7k-ww10-1-vl158.noc.rwth-aachen.de                  37.391ms asymm  9 
 9:  no reply
10:  no reply
11:  no reply
12:  no reply
13:  no reply
14:  no reply
15:  no reply
16:  no reply
17:  no reply
18:  no reply
19:  no reply
20:  no reply
21:  no reply
22:  no reply
23:  no reply
24:  no reply
25:  no reply
26:  no reply
^C




Comment 4


Robin Johnson









          2017-10-15 20:18:50 UTC
        

All the way from Canada, it does work fine, v4 & v6.

$ ping -c 4 $(dig +short ftp.halifax.rwth-aachen.de IN A)
PING 137.226.34.46 (137.226.34.46) 56(84) bytes of data.
64 bytes from 137.226.34.46: icmp_seq=1 ttl=53 time=168 ms
64 bytes from 137.226.34.46: icmp_seq=2 ttl=53 time=169 ms
64 bytes from 137.226.34.46: icmp_seq=3 ttl=53 time=169 ms
64 bytes from 137.226.34.46: icmp_seq=4 ttl=53 time=169 ms

--- 137.226.34.46 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3002ms
rtt min/avg/max/mdev = 168.890/169.087/169.187/0.517 ms

$ ping6 -c 4 $(dig +short ftp.halifax.rwth-aachen.de IN AAAA)
PING 2a00:8a60:e012:a00::21(2a00:8a60:e012:a00::21) 56 data bytes
64 bytes from 2a00:8a60:e012:a00::21: icmp_seq=1 ttl=50 time=147 ms
64 bytes from 2a00:8a60:e012:a00::21: icmp_seq=2 ttl=50 time=147 ms
64 bytes from 2a00:8a60:e012:a00::21: icmp_seq=3 ttl=50 time=147 ms
64 bytes from 2a00:8a60:e012:a00::21: icmp_seq=4 ttl=50 time=147 ms

--- 2a00:8a60:e012:a00::21 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3002ms
rtt min/avg/max/mdev = 147.209/147.586/147.820/0.354 ms

$ curl --resolve distfiles.gentoo.org:80:$(dig +short ftp.halifax.rwth-aachen.de IN A) -v http://distfiles.gentoo.org/ 
* Added distfiles.gentoo.org:80:137.226.34.46 to DNS cache
* Hostname distfiles.gentoo.org was found in DNS cache
*   Trying 137.226.34.46...
* TCP_NODELAY set
* Connected to distfiles.gentoo.org (137.226.34.46) port 80 (#0)
> GET / HTTP/1.1
> Host: distfiles.gentoo.org
> User-Agent: curl/7.55.0
> Accept: */*
> 
< HTTP/1.1 200 OK
< Server: nginx/1.10.3
< Date: Sun, 15 Oct 2017 20:13:14 GMT
< Content-Type: text/html;charset=UTF-8
< Content-Length: 1755
< Connection: keep-alive
< Vary: Accept-Encoding
< 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
 <head>
  <title>Index of /gentoo</title>
 </head>
...
<address>Apache/2.4.25 (Debian) Server at ftp.halifax.rwth-aachen.de Port 80</address>
</body></html>
* Connection #0 to host distfiles.gentoo.org left intact


$ curl --resolve distfiles.gentoo.org:80:$(dig +short ftp.halifax.rwth-aachen.de IN AAAA) -v http://distfiles.gentoo.org/ 
* Added distfiles.gentoo.org:80:2a00:8a60:e012:a00::21 to DNS cache
* Hostname distfiles.gentoo.org was found in DNS cache
*   Trying 2a00:8a60:e012:a00::21...
* TCP_NODELAY set
* Connected to distfiles.gentoo.org (2a00:8a60:e012:a00::21) port 80 (#0)
> GET / HTTP/1.1
> Host: distfiles.gentoo.org
> User-Agent: curl/7.55.0
> Accept: */*
> 
< HTTP/1.1 200 OK
< Server: nginx/1.10.3
< Date: Sun, 15 Oct 2017 20:13:50 GMT
< Content-Type: text/html;charset=UTF-8
< Content-Length: 1755
< Connection: keep-alive
< Vary: Accept-Encoding
< 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
 <head>
  <title>Index of /gentoo</title>
 </head>
...
<address>Apache/2.4.25 (Debian) Server at ftp.halifax.rwth-aachen.de Port 80</address>
</body></html>
* Connection #0 to host distfiles.gentoo.org left intact

$ traceroute6   $(dig +short ftp.halifax.rwth-aachen.de IN AAAA)
traceroute to 2a00:8a60:e012:a00::21 (2a00:8a60:e012:a00::21), 30 hops max, 80 byte packets
 1  2001:470:e889:1:CENSORED (2001:470:e889:1:CENSORED)  0.300 ms  0.274 ms  0.255 ms
 2  CENSORED.sea1.ipv6.he.net (2001:470:a:CENSORED)  8.559 ms  11.133 ms  13.634 ms
 3  10ge1-18.core1.sea1.he.net (2001:470:0:9b::1)  15.056 ms  15.044 ms  15.027 ms
 4  100ge4-2.core1.msp1.he.net (2001:470:0:2a0::2)  48.022 ms  48.013 ms  47.998 ms
 5  100ge13-1.core2.chi1.he.net (2001:470:0:18e::1)  60.273 ms  60.264 ms  60.247 ms
 6  100ge16-1.core1.nyc4.he.net (2001:470:0:298::2)  70.903 ms  63.068 ms  63.051 ms
 7  100ge4-1.core1.par2.he.net (2001:470:0:33b::2)  132.293 ms  132.190 ms  132.160 ms
 8  100ge5-2.core1.fra1.he.net (2001:470:0:2d5::2)  141.708 ms  141.640 ms  141.632 ms
 9  * * *
10  kr-aah15.x-win.dfn.de (2001:638:c:a100::2)  147.377 ms  147.367 ms  147.683 ms
11  fw-xwin-1-vlan106.noc.rwth-aachen.de (2a00:8a60:0:f000::5)  147.657 ms  147.613 ms  147.481 ms
12  n7k-lssnord-1-vl158.noc.rwth-aachen.de (2a00:8a60:0:f001::4)  148.315 ms  148.288 ms  147.835 ms
13  n7k-sw23-2-et2-1.noc.rwth-aachen.de (2a00:8a60:0:f025::2)  150.841 ms  149.689 ms  150.118 ms
14  ftp.halifax.rwth-aachen.de (2a00:8a60:e012:a00::21)  147.817 ms  147.802 ms  147.785 ms

$ traceroute   $(dig +short ftp.halifax.rwth-aachen.de IN A)
traceroute to 137.226.34.46 (137.226.34.46), 30 hops max, 60 byte packets
 1  CENSORED  0.159 ms  0.168 ms  0.203 ms
 2  CENSORED  4.630 ms  7.804 ms  8.334 ms
 3  154.11.12.201 (154.11.12.201)  79.276 ms 154.11.12.203 (154.11.12.203)  46.233 ms  46.248 ms
 4  sea-b2-link.telia.net (213.248.74.220)  10.524 ms  10.472 ms  10.419 ms
 5  chi-b21-link.telia.net (62.115.117.49)  46.921 ms  47.896 ms  47.848 ms
 6  nyk-bb3-link.telia.net (62.115.140.68)  69.607 ms nyk-bb3-link.telia.net (62.115.124.244)  74.851 ms nyk-bb3-link.telia.net (62.115.124.232)  73.659 ms
 7  ffm-bb3-link.telia.net (62.115.139.16)  170.283 ms kbn-bb3-link.telia.net (213.155.134.51)  160.144 ms  159.382 ms
 8  ffm-b12-link.telia.net (62.115.140.31)  164.960 ms ffm-b12-link.telia.net (62.115.142.37)  155.736 ms ffm-b12-link.telia.net (62.115.142.29)  159.883 ms
 9  ffm-bb3-link.telia.net (62.115.123.76)  162.368 ms dfn-ic-326948-ffm-b12.c.telia.net (213.248.97.41)  157.619 ms  160.589 ms
10  kr-aah15-0.x-win.dfn.de (188.1.242.110)  158.466 ms  158.204 ms  155.494 ms
11  ffm-b12-link.telia.net (62.115.142.59)  163.285 ms fw-xwin-2-vl106.noc.rwth-aachen.de (134.130.3.230)  167.204 ms  167.209 ms
12  n7k-ww10-1-vl158.noc.rwth-aachen.de (134.130.3.243)  161.936 ms  161.963 ms dfn-ic-326948-ffm-b12.c.telia.net (213.248.97.41)  159.890 ms
13  n7k-ww10-2-et1-1.noc.rwth-aachen.de (137.226.139.42)  157.882 ms  161.824 ms kr-aah15-0.x-win.dfn.de (188.1.242.110)  159.051 ms
14  ftp.halifax.rwth-aachen.de (137.226.34.46)  169.313 ms  165.872 ms fw-xwin-2-vl106.noc.rwth-aachen.de (134.130.3.230)  168.339 ms









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

