Title: 266628 – [FEATURES=test failure] media-libs/libsndfile-1.0.19
URL: https://bugs.gentoo.org/show_bug.cgi?id=266628

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 266628
[FEATURES=test failure] media-libs/libsndfile-1.0.19
Last modified: 2009-04-30 09:06:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 266628 
      - [FEATURES=test failure] media-libs/libsndfile-1.0.19


Summary:
[FEATURES=test failure] media-libs/libsndfile-1.0.19
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-18 08:10 UTC by Hans de Graaff





      Modified:
    
2009-04-30 09:06 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



esqualante









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info output

              (emerge-info.txt,11.33 KB,
                text/plain)

            
2009-04-22 05:49 UTC,

            Hans de Graaff




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Hans de Graaff







          2009-04-18 08:10:03 UTC
        

media-libs/libsndfile-1.0.19 fails its tests. Running the tests as root (without sandbox) works fine, though.

==========================
./lossy_comp_test aiff_ima
==========================
    test_float_peak                : peak_float.aiff ......... ok
    read_write_peak_test           : rw_peak.aiff ............ ok
    update_header_test             : header.aiff ............. ok
    update_seek_short_test         : header_short.aiff ....... ok
    update_seek_int_test           : header_int.aiff ......... ok
    update_seek_float_test         : header_float.aiff ....... ok
    update_seek_double_test        : header_double.aiff ...... ok
    header_shrink_test             : header_shrink.wav ....... ok
    extra_header_test              : extra.aiff .............. ok
    zero_data_test                 : zerolen.aiff ............ ok
    filesystem_full_test           : /dev/full ............... 

Line 300 : Error bad error string : System error : Permission denied..
make[1]: *** [check] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-libs/libsndfile-1.0.19/work/libsndfile-1.0.19/tests'
make: *** [check-recursive] Error 1




Comment 1


anomen





          2009-04-20 06:19:27 UTC
        

got same problem.
adding  "addwrite /dev/full" into the ebuild solved it.

(the test expects to receive error "No space left on device" and it gets "Permission denied" from sandbox)





Comment 2


Jeroen Roovers (RETIRED)






          2009-04-20 16:03:27 UTC
        

I get this on a PA-RISC machine:
    filesystem_full_test           : /dev/full ............... ok

So at least post your `emerge --info' and possibly set the Hardware and OS fields to reflect your setup.




Comment 3


Hans de Graaff







          2009-04-22 05:49:05 UTC
        

Created attachment 189130 [details]
emerge --info output




Comment 4


anomen





          2009-04-22 18:08:37 UTC
        

after upgrading sandbox-1.6-r2 from 1.2.18.1-r2, it works fine

might be somehow related to bug 137240? there was no sandbox violation report in build.log though.






Comment 5


Hans de Graaff







          2009-04-23 05:29:54 UTC
        

(In reply to comment #4)
> after upgrading sandbox-1.6-r2 from 1.2.18.1-r2, it works fine

Confirmed, when I filed the bug I was still using sandbox 1.2. I now have sandbox 1.6-r2 installed and libsndfile just installed as expected with all tests passing.





Comment 6


Lars Wendler (Polynomial-C) (RETIRED)






          2009-04-25 13:37:47 UTC
        

Reassingning to sound herd. Maybe they want to add some dependency on sys-apps/sandbox when tests are enabled...




Comment 7


Samuli Suominen (RETIRED)






          2009-04-30 09:06:54 UTC
        

(In reply to comment #6)
> Reassingning to sound herd. Maybe they want to add some dependency on
> sys-apps/sandbox when tests are enabled...
> 

Nah.. The required sandbox is in stable, good enough for us









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

