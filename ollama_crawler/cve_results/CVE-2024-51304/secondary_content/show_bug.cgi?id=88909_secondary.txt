Title: 88909 – subversion compilation fails complaining about --with-apr parameter
URL: https://bugs.gentoo.org/show_bug.cgi?id=88909

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 88909
subversion compilation fails complaining about --with-apr parameter
Last modified: 2005-04-15 14:44:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 88909 
      - subversion compilation fails complaining about --with-apr parameter


Summary:
subversion compilation fails complaining about --with-apr parameter
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Paul de Vrieze (RETIRED)








URL:



http://highdays.de/svn-emerge




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-12 16:17 UTC by Florian Neukamm





      Modified:
    
2005-04-15 14:44 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Florian Neukamm





          2005-04-12 16:17:58 UTC
        

When trying to emerge subversion, the emerge process quits during the configure part complaining about the --with-apr parameter.


The src_compile() part of the ebuild contains

use apache2 && myconf="${myconf} --with-apxs=/usr/sbin/apxs2 --with-apr=/usr --with-apr-util=/usr"

So I guess this actually shouldn't be the problem.

Reproducible: Always
Steps to Reproduce:
1. emerge subversion

Actual Results:  
The configure fails with

"checking for APR... configure: error: the --with-apr parameter is incorrect. It
must specify an install prefix, a build directory, or an apr-config file."

Expected Results:  
emerge successfully

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.3, glibc-2.3.3.20040420-r0,
2.6.11-gentoo-r4 i686)
=================================================================
System uname: 2.6.11-gentoo-r4 i686 Intel(R) Pentium(R) 4 CPU 2.80GHz
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.2.3-r5,dev-lang/python-2.3.3 [2.3.3 (#1,
Feb 10 2004, 19:15:50)]
dev-lang/python:     2.2.3-r5, 2.3.3
sys-devel/autoconf:  2.59-r4
sys-devel/automake:  1.8.3
sys-devel/binutils:  2.14.90.0.7-r4
sys-devel/libtool:   1.4.3-r4
virtual/os-headers:  2.4.21-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=pentium4 -O3 -pipe -fomit-frame-pointer -fforce-addr"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/env.d"
CXXFLAGS="-march=pentium4 -O3 -pipe -fomit-frame-pointer -fforce-addr"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig buildpkg ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/"
LINGUAS="de"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/gentoo-de"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 3dnow X alsa apache2 avi bitmap-fonts cdr crypt cups curl divx4linux
dvd dvdr dvdread emboss encode fam flac foomaticdb fortran gd gdbm gif gtk gtk2
guile imagemagick imlib ipv6 jack java joystick jpeg junit kde libg++ lirc mad
matroska mmx motif mp3 mpeg mysql ncurses nvidia odbc ogg oggvorbis opengl pam
perl png python qt quicktime readline samba sdl snmp speex spell ssl tcltk tcpd
tiff truetype truetype-fonts type1-fonts usb v4l vorbis xine xinerama xml xml2
xmms xv xvid zlib linguas_de"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS




Comment 1


Paul de Vrieze (RETIRED)






          2005-04-13 05:20:31 UTC
        

You don't specify the version of subversion you tried to install. In any case that means that in some way apr is not installed. Try remerging apache.




Comment 2


Florian Neukamm





          2005-04-13 06:54:43 UTC
        

Yes, this error occurs on all versions of subversion available in portage. I tried >=1.0.9.
I have dev-lib/apr not installed indeed since it blocks subversion:


# USE="-java" emerge -p subversion

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[blocks B     ] dev-libs/apr (is blocking dev-util/subversion-1.1.3)
[ebuild  N    ] dev-util/subversion-1.1.3
#


A re-emerge of net-www/apache didn't change anything. Still the same error.




Comment 3


Paul de Vrieze (RETIRED)






          2005-04-14 01:26:24 UTC
        

Which apache 2 version do you have installed? Does a file /usr/bin/apu-config exist. For stable apache 2 this should be part of apache 2. Testing apache 2 no longer provides this and must be used with a test version of subversion (and the separate apr apr-util packages).

Apr is a strange library that was until recently not available as package. As a result of this both subversion and apache2 provided (and in stable still do) their own versions of this library. This causes all kinds of possible conflicts and thus we're happy to have splitted out apr apr-util.

If you have /usr/bin/apu-config (and /usr/bin/apr-config) and it still doesn't work, could you then attach "/var/tmp/portage/subversion-1.1.3/work/subversion-1.1.3/config.log" ?




Comment 4


Florian Neukamm





          2005-04-15 10:53:03 UTC
        

I have version Apache verion 2.0.53 (~x86) installed as well as dev-libs/apr and dev-libs/apr-util.Yes, both /usr/bin/apu-config and /usr/bin/apr-config exist on my system.
I am getting a bit confused by those dependencies. For I have reinstalled Apache, it depended on dev-libs/apr and dev-libs/apr-util.

This is what I have installed right now:
net-www/apache-2.0.53
dev-libs/apr-0.9.6-r2
dev-libs/apr-util-0.9.6




Comment 5


Paul de Vrieze (RETIRED)






          2005-04-15 12:11:06 UTC
        

In that case you must also use the testing subversion. I've added a block to the old subversion on the new apache. 




Comment 6


Florian Neukamm





          2005-04-15 14:44:37 UTC
        

You are right. An emerge of subversion-1.1.4-r1 did it.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

