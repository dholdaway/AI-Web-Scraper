Title: 145942 – <=dev-util/insight-6.4 fails to compile w/ gcc-4.x due to -fwritable-strings
URL: https://bugs.gentoo.org/show_bug.cgi?id=145942

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145942
<=dev-util/insight-6.4 fails to compile w/ gcc-4.x due to -fwritable-strings
Last modified: 2006-09-24 17:25:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145942 
      - <=dev-util/insight-6.4 fails to compile w/ gcc-4.x due to -fwritable-strings


Summary:
<=dev-util/insight-6.4 fails to compile w/ gcc-4.x due to -fwritable-strings
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Olivier Crete (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

147011

      (view as bug list)
    


Depends on:







Blocks:




117482



 

        Show dependency tree





 





      Reported:
    
2006-09-01 22:03 UTC by David Warkentin





      Modified:
    
2006-09-24 17:25 UTC
      (History)
    




          CC List:
        

6 
          users
          
            (show)
          



altstadt
denilsonsa
dev-tools
gentoo
kevquinn
smertens









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The older, unmasked 6.1 version fails

              (5167-insight-6.1.log,463.00 KB,
                text/plain)

            
2006-09-03 21:07 UTC,

            David Warkentin




Details





Version 6.4 build log

              (5167-insight-6.4.log,751.38 KB,
                text/plain)

            
2006-09-03 21:10 UTC,

            David Warkentin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Warkentin





          2006-09-01 22:03:40 UTC
        

There is a problem with the ebuild for dev-util/insight-6.4 when compiling using the newly stabilized gcc-4.1.1 which also applies to any version of gcc >= version 4.0.  The "-fwritable-strings" flag has been deprecated in versions of gcc < 4.0 and is now entirely unsupported by gcc >= 4.0. Any packages that use this when running gcc will not successfully build but will rather generate an error and fail when using gcc >= 4.0.  Any code that requires this flag should definitely be fixed anyhow because it is not a good idea to write to const char* strings.  I noticed this specifically with insight as it uses this option and therefore I am specifically reporting this for insight.




Comment 1


Kevin F. Quinn (RETIRED)






          2006-09-02 01:43:37 UTC
        

Hmm; I merged dev-util/insight-6.4 yesterday on my amd64 box using gcc-4.1.1 with no problem; there's no mention of -fwritable-strings in the build log.

Please paste the output of 'emerge --info'.





Comment 2


Roalt





          2006-09-02 11:06:21 UTC
        

I have the same problem (also just upgraded to gcc 4.1.1, my emerge --info:
Portage 2.1-r2 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r4custom i686)
=================================================================
System uname: 2.6.17-gentoo-r4custom i686 Intel(R) Pentium(R) M processor 1.70GHz
Gentoo Base System version 1.12.4
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mcpu=i686 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -mcpu=i686 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://ftp.uni-erlangen.de/pub/mirrors/gentoo "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.nl.gentoo.org/gentoo-portage"
USE="x86 X Xaw3d alsa apache2 apm arts avi berkdb bitmap-fonts cli crypt css cups dlloader dri dvd dvdr dvdread eds emboss encode esd evo evo2 foomaticdb fortran gdbm gif gimp gimpprint gnome gpm gstreamer gtk gtk2 imap imlib ipv6 isdnlog jpeg kde lame libg++ libwww live mad maildir mikmod mmx mmxext motif mp3 mpeg ncurses nls nptl nptlonly nsplugin ogg opengl oss pam pam-mysql pcre pda pdflib perl png ppds pppd python qt3 qt4 quicktime radiotap readline reflection sasl sdl session spell spl sse ssl tcl tcpd truetype truetype-fonts type1-fonts udev unicode vorbis win32codecs xinerama xml xmms xorg xsl xv zeroconf zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux userland_GNU video_cards_radeon video_cards_fglrx video_cards_vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 3


Kevin F. Quinn (RETIRED)






          2006-09-02 14:49:52 UTC
        

Can one of you guys attach a build log?  A quick search of the insight-6.4 source shows a few mentions of fwritable-strings, but they're all either in ChangeLog files or are comments, so I don't see how it's happening..

(set PORT_LOGDIR to a suitable directory in /etc/make.conf to get portage to record the log to a file)





Comment 4


David Warkentin





          2006-09-03 21:04:14 UTC
        

(In reply to comment #3)
> Can one of you guys attach a build log?  A quick search of the insight-6.4
> source shows a few mentions of fwritable-strings, but they're all either in
> ChangeLog files or are comments, so I don't see how it's happening..
> 
> (set PORT_LOGDIR to a suitable directory in /etc/make.conf to get portage to
> record the log to a file)
> 

This is really odd to me.  I just decided to try the slightly older version 6.1 which died with the same error, but then I tried 6.4 again and it worked perfectly.




Comment 5


David Warkentin





          2006-09-03 21:07:00 UTC
        

Created attachment 95906 [details]
The older, unmasked 6.1 version fails

I attempted to use the 6.1 version - here's the build log for it




Comment 6


David Warkentin





          2006-09-03 21:10:44 UTC
        

Created attachment 95907 [details]
Version 6.4 build log

Oddly now the 6.4 version worked for me as you can see by this build log




Comment 7


Olivier Crete (RETIRED)






          2006-09-05 06:21:17 UTC
        

well if it works for everyone.. lets close




Comment 8


Jakub Moc (RETIRED)






          2006-09-09 17:02:33 UTC
        

*** Bug 147011 has been marked as a duplicate of this bug. ***




Comment 9


Denilson Sá Maia





          2006-09-23 10:55:22 UTC
        

Well, I've just updated my system to gcc-4.1, and insight failed when I was doing "emerge -e world".

Since that emerge still did not finish, I haven't tried to emerge insight again. I will try soon.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

