Title: 445272 – sys-fs/aufs3-3_p20121129 - dynop.c:183:2: error: implicit declaration of function 'pax_open_kernel'
URL: https://bugs.gentoo.org/show_bug.cgi?id=445272

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 445272
sys-fs/aufs3-3_p20121129 - dynop.c:183:2: error: implicit declaration of function 'pax_open_kernel'
Last modified: 2012-12-05 13:37:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 445272 
      - sys-fs/aufs3-3_p20121129 - dynop.c:183:2: error: implicit declaration of function 'pax_open_kernel'


Summary:
sys-fs/aufs3-3_p20121129 - dynop.c:183:2: error: implicit declaration of func...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Justin Lecher (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:




445270



Blocks:







 

        Show dependency tree





 





      Reported:
    
2012-11-29 23:13 UTC by Manuel Rüger (RETIRED)





      Modified:
    
2012-12-05 13:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tomwij









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Manuel Rüger (RETIRED)






          2012-11-29 23:13:57 UTC
        

After applying the patch from bug #445270, aufs3 still fails to compile.

Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) sys-fs/aufs3-3_p20121129
 * aufs3-3_p20121129.tar.xz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                   [ ok ]
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found kernel object directory:
 *     /lib/modules/3.4.9-gentoo/build
 * Found sources for kernel version:
 *     3.4.9-gentoo
 * Checking for suitable kernel configuration options...                                                                                                           [ ok ]
>>> Unpacking source...
>>> Unpacking aufs3-3_p20121129.tar.xz to /var/tmp/portage/sys-fs/aufs3-3_p20121129/work
>>> Source unpacked in /var/tmp/portage/sys-fs/aufs3-3_p20121129/work
>>> Preparing source in /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone ...
 * Using for module creation branch origin/aufs3.4
Branch local-gentoo set up to track remote branch aufs3.4 from origin.
 * Applying pax-2.patch ...                                                                                                                                        [ ok ]
 * Using for utils building branch origin/aufs3.0
Branch local-gentoo set up to track remote branch aufs3.0 from origin.
Switched to a new branch 'local-gentoo'
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone ...
make -j2 CC=x86_64-pc-linux-gnu-gcc LD=x86_64-pc-linux-gnu-ld 'LDFLAGS=-O1 --as-needed' ARCH=x86 CONFIG_AUFS_FS=m KDIR=/lib/modules/3.4.9-gentoo/build 
-I/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/include -DCONFIG_AUFS_FS_MODULE -UCONFIG_AUFS -DCONFIG_AUFS_BRANCH_MAX_127 -DCONFIG_AUFS_SBILIST -DCONFIG_AUFS_RDU
make -C /lib/modules/3.4.9-gentoo/build M=/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs EXTRA_CFLAGS="-I/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/include -DCONFIG_AUFS_FS_MODULE -UCONFIG_AUFS -DCONFIG_AUFS_BRANCH_MAX_127 -DCONFIG_AUFS_SBILIST -DCONFIG_AUFS_RDU" modules
make[1]: Entering directory `/usr/src/linux-3.4.9-gentoo'
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/module.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/sbinfo.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/super.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/branch.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/xino.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/sysaufs.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/opts.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/wkq.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/vfsub.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dcsub.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/cpup.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/whout.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/wbr_policy.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dinfo.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dentry.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dynop.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/finfo.o
  CC [M]  /var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/file.o
/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dynop.c: In function 'dy_aop':
/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dynop.c:183:2: error: implicit declaration of function 'pax_open_kernel'
/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dynop.c:183:2: error: implicit declaration of function 'pax_close_kernel'
make[2]: *** [/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs/dynop.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [_module_/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone/fs/aufs] Error 2
make[1]: Leaving directory `/usr/src/linux-3.4.9-gentoo'
make: *** [fs/aufs/aufs.ko] Error 2
 * ERROR: sys-fs/aufs3-3_p20121129 failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=sys-fs/aufs3-3_p20121129'`,
 * the complete build log and the output of `emerge -pqv '=sys-fs/aufs3-3_p20121129'`.
 * The complete build log is located at '/var/tmp/portage/sys-fs/aufs3-3_p20121129/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-fs/aufs3-3_p20121129/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone'
 * S: '/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone'

>>> Failed to emerge sys-fs/aufs3-3_p20121129, Log file:

>>>  '/var/tmp/portage/sys-fs/aufs3-3_p20121129/temp/build.log'

 * Messages for package sys-fs/aufs3-3_p20121129:

 * ERROR: sys-fs/aufs3-3_p20121129 failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=sys-fs/aufs3-3_p20121129'`,
 * the complete build log and the output of `emerge -pqv '=sys-fs/aufs3-3_p20121129'`.
 * The complete build log is located at '/var/tmp/portage/sys-fs/aufs3-3_p20121129/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-fs/aufs3-3_p20121129/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone'
 * S: '/var/tmp/portage/sys-fs/aufs3-3_p20121129/work/aufs3-3_p20121129/aufs3-standalone'




Comment 1


Tom Wijsman (TomWij) (RETIRED)






          2012-11-30 12:06:54 UTC
        

@mrueg: Can you provide the output of `emerge --info =sys-fs/aufs3-3_p20121129`?




Comment 2


Manuel Rüger (RETIRED)






          2012-11-30 17:23:48 UTC
        

emerge --info =sys-fs/aufs3-3_p20121129
Portage 2.1.11.31 (hardened/linux/amd64, gcc-4.5.4, glibc-2.15-r3, 3.4.9-gentoo x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.4.9-gentoo-x86_64-Intel-R-_Xeon-R-_CPU_X5365_@_3.00GHz-with-gentoo-2.1
Timestamp of tree: Fri, 30 Nov 2012 16:45:01 +0000
ld GNU ld (GNU Binutils) 2.22
app-shells/bash:          4.2_p37
dev-lang/python:          2.7.3-r2, 3.2.3
dev-util/cmake:           2.8.9
dev-util/pkgconfig:       0.27.1
sys-apps/baselayout:      2.1-r1
sys-apps/openrc:          0.11.5
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.68
sys-devel/automake:       1.11.6
sys-devel/binutils:       2.22-r1
sys-devel/gcc:            4.5.4
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.6 (virtual/os-headers)
sys-libs/glibc:           2.15-r3
Repositories: gentoo x-OverlayEnno tove
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/openvpn/easy-rsa /var/lib/chiliproject/config /var/www"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /var/lib/chiliproject/config/locales"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/var/tmp/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/OverlayEnno /var/lib/layman/tove/repo"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 apache2 bash-completion berkdb bzip2 cgi cli cracklib crypt curl cxx dri fastcgi gd gdbm git gpm hardened iconv imagemagick ipv6 jpeg justify mmx modules mudflap multilib mysql mysqli ncurses nls nptl openmp pam pax_kernel pcre png pppd readline session sse sse2 ssl subversion suexec symlink tcpd threads tiff unicode urandom vhosts vim-pager vim-syntax zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias cgid" APACHE2_MPMS="worker" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en de" PHP_TARGETS="php5-4" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="fbdev glint intel mach64 mga nouveau nv r128 radeon savage sis tdfx trident vesa via vmware dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 3


Justin Lecher (RETIRED)






          2012-12-05 12:35:42 UTC
        

(In reply to comment #2)
> emerge --info =sys-fs/aufs3-3_p20121129

Please add the exact output of this command.




Comment 4


Justin Lecher (RETIRED)






          2012-12-05 12:38:28 UTC
        

I assume your are using USE=pax_kernel on an non-hardenend kernel. Could that be?




Comment 5


Manuel Rüger (RETIRED)






          2012-12-05 12:47:48 UTC
        

emerge --info sys-fs/aufs3 adds following:


sys-fs/aufs3-3_p20121015 was built with the following:
USE="kernel-patch (multilib) pax_kernel -debug -doc -fuse -hfs -inotify -nfs -ramfs"


So you're right I'm building with pax_kernel enabled and using gentoo-sources and not hardened-sources.




Comment 6


Justin Lecher (RETIRED)






          2012-12-05 12:52:56 UTC
        

(In reply to comment #5)
> emerge --info sys-fs/aufs3 adds following:
> 
> 
> sys-fs/aufs3-3_p20121015 was built with the following:
> USE="kernel-patch (multilib) pax_kernel -debug -doc -fuse -hfs -inotify -nfs
> -ramfs"
> 
> 
> So you're right I'm building with pax_kernel enabled and using
> gentoo-sources and not hardened-sources.

This doesn't work. so either switch to hardened sources or remove pax_kernel.




Comment 7


Justin Lecher (RETIRED)






          2012-12-05 13:37:44 UTC
        

+  05 Dec 2012; Justin Lecher <jlec@gentoo.org> aufs3-3_p20121129.ebuild:
+  Check for PAX when using USE=pax_kernel, #445272
+









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

