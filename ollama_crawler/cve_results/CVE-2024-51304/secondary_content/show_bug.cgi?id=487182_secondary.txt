Title: 487182 – >=media-libs/mesa-9.1 - Switch to VT1 on shutdown fails with two screens configured in xinerama.
URL: https://bugs.gentoo.org/show_bug.cgi?id=487182

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 487182
>=media-libs/mesa-9.1 - Switch to VT1 on shutdown fails with two screens configured in xinerama.
Last modified: 2015-02-21 19:21:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 487182 
      - >=media-libs/mesa-9.1 - Switch to VT1 on shutdown fails with two screens configured in xinerama.


Summary:
>=media-libs/mesa-9.1 - Switch to VT1 on shutdown fails with two screens conf...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-10-07 07:36 UTC by Andreas Prieß





      Modified:
    
2015-02-21 19:21 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (ei.txt,19.60 KB,
                text/plain)

            
2013-10-07 07:36 UTC,

            Andreas Prieß




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andreas Prieß





          2013-10-07 07:36:04 UTC
        

Created attachment 360288 [details]
emerge --info

Ever since media-libs/mesa >= 9.1 went stable I had the problem, that
the switch from Xfce on VT7 back to VT1 on shutdown fails. The screen
goes black and does not show anything, but the system halts as normal.
It is not possible to switch to VT1 by keyboard while the shutdown is
still in progress when this has happened.

I can't find anything in the Xorg or other log files corresponding to this
problem.

The problem always disappeared by downgrading to mesa < 9.1, but that
now requires other packages to be downgraded too, so I'd like to resolve
this.

It is an AMD64 system with an ATI Barts PRO [Radeon HD 6850] using KMS,
desktop session with Xfce started by x11-misc/lightdm.

Xorg is running a dual head layout using xinerama instead of randr.
Composite disabled since it does not work with this config.

The dual head setup with xinerama has two screens configured. The
monitors have different resolutions and windows, desktop panels and
things got placed in invisible areas otherwise (with Xfce at least).

I can NOT reproduce it with only one screen.

If I start X without my config files and let it configure one screen
automatically, the switch to VT1 on shutdown works as expected.

Here is what I have in /etc/X11/xorg.conf.d:

# 10-server-flags.conf

Section "ServerFlags"
        Option "Xinerama" "true"
        Option "DontZoom" "true"
        Option "BlankTime" "0"
EndSection

Section "Extensions"
        Option "Composite" "false"
EndSection

# 30-layout-dual.conf

Section "Device"
        Identifier "Device Radeon 0"
        Driver "radeon"
        BusID "pci:1:0:0"
        Screen 0
        Option "ZaphodHeads" "DVI-1"
        Option "Monitor-DVI-1" "Monitor Eizo"
EndSection
Section "Device"
        Identifier "Device Radeon 1"
        Driver "radeon"
        BusID "pci:1:0:0"
        Screen 1
        Option "ZaphodHeads" "DVI-0"
        Option "Monitor-DVI-0" "Monitor Samsung"
EndSection

Section "Monitor"
        Identifier "Monitor Eizo"
        VertRefresh 60.0
        Option "DPMS" "false"
EndSection
Section "Monitor"
        Identifier "Monitor Samsung"
        VertRefresh 60.0
        Option "DPMS" "false"
EndSection

Section "Screen"
        Identifier "Screen 0"
        Device "Device Radeon 0"
        Monitor "Monitor Eizo"
        DefaultDepth 24
        SubSection "Display"
                Depth 24
                Modes "1600x1200"
        EndSubSection
EndSection
Section "Screen"
        Identifier "Screen 1"
        Device "Device Radeon 1"
        Monitor "Monitor Samsung"
        DefaultDepth 24
        SubSection "Display"
                Depth 24
                Modes "1680x1050"
        EndSubSection
EndSection

Section "ServerLayout"
        Identifier "Dual Layout"
        Screen "Screen 0"
        Screen "Screen 1" LeftOf "Screen 0"
EndSection




Comment 1


Andreas Prieß





          2014-07-17 19:50:58 UTC
        

The problem does not persist with the current stable version

media-libs/mesa-10.0.4

Everything works for me again.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

