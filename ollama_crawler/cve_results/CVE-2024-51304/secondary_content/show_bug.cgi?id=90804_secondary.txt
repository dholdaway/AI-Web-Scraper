Title: 90804 – /etc/asound.state gets corrupted on shutdown on laptop with disk with 8MB cache
URL: https://bugs.gentoo.org/show_bug.cgi?id=90804

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90804
/etc/asound.state gets corrupted on shutdown on laptop with disk with 8MB cache
Last modified: 2005-12-18 06:25:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90804 
      - /etc/asound.state gets corrupted on shutdown on laptop with disk with 8MB cache


Summary:
/etc/asound.state gets corrupted on shutdown on laptop with disk with 8MB cache
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-28 17:51 UTC by Ladislav Tomes





      Modified:
    
2005-12-18 06:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ladislav Tomes





          2005-04-28 17:51:36 UTC
        

Randomly but frequently on regular shutdown of laptop using HD with 8MB cache, /etc/asound.state gets corrupted (truncated incomplete file). SAVE_ON_STOP="on" is set in /etc/init.d/alsasound, root is JFS fs, mounted  with "sync" option. I have reproduced error several times, allways after shutdown, never during normal operation. I did not noticed any other file corruption.

Slackware shutdown script used to wait (1 second or so) to allow laptop harddisks to flush cache and finish syncing before powering down machine.   

I wonder if Gentoo power down/reboot is too fast for some disks.

Reproducible: Sometimes
Steps to Reproduce:
1.
2.
3.




Comment 1


SpanKY






          2005-04-28 18:46:23 UTC
        

i doubt it ... gentoo init scripts run 'sync' many times before shutting down ... just read the tail end of halt.sh




Comment 2


Diego Elio Pettenò (RETIRED)






          2005-12-18 06:25:08 UTC
        

Can't reproduce, as Mike said, the shutdown process calls sync to make sure that nothing gets lost.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

