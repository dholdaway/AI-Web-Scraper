Title: 798756 – sys-devel/gcc-11.1.0-r1: internal compiler error: Aborted signal terminated program lto1
URL: https://bugs.gentoo.org/show_bug.cgi?id=798756

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 798756
sys-devel/gcc-11.1.0-r1: internal compiler error: Aborted signal terminated program lto1
Last modified: 2022-01-08 02:23:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 798756 
      - sys-devel/gcc-11.1.0-r1: internal compiler error: Aborted signal terminated program lto1


Summary:
sys-devel/gcc-11.1.0-r1: internal compiler error: Aborted signal terminated p...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-06-26 05:08 UTC by HougeLangley





      Modified:
    
2022-01-08 02:23 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



mscardovi
vityokster









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build_log

              (build-log.txt.bz2,311.49 KB,
                application/x-bzip)

            
2021-06-26 05:11 UTC,

            HougeLangley




Details





emerge --info

              (build-info.txt,8.21 KB,
                text/plain)

            
2021-06-26 05:11 UTC,

            HougeLangley




Details





build_envirnoment

              (build-environment.txt,129.56 KB,
                text/plain)

            
2021-06-26 05:12 UTC,

            HougeLangley




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


HougeLangley





          2021-06-26 05:08:24 UTC
        

Reinstall gcc build faild.

xg++: internal compiler error: Aborted signal terminated program lto1

Reproducible: Always




Comment 1


HougeLangley





          2021-06-26 05:11:36 UTC
        

Created attachment 719346 [details]
build_log




Comment 2


HougeLangley





          2021-06-26 05:11:59 UTC
        

Created attachment 719349 [details]
emerge --info




Comment 3


HougeLangley





          2021-06-26 05:12:16 UTC
        

Created attachment 719352 [details]
build_envirnoment




Comment 4


Sergei Trofimovich (RETIRED)






          2021-06-26 21:36:31 UTC
        

Looks like a gcc bug in code generation:

"""
corrupted size vs. prev_size
during RTL pass: gcse2
/var/tmp/portage/sys-devel/gcc-11.1.0-r1/work/gcc-11.1.0/gcc/expmed.c: In function ‘extract_bit_field’:
corrupted size vs. prev_size
{standard input}: Assembler messages:
{standard input}:32931: Warning: end of file not at end of a line; newline inserted
{standard input}:33524: Error: no such instruction: `te'
{standard input}: Error: open CFI at the end of file; missing .cfi_endproc directive
xg++: internal compiler error: Aborted signal terminated program lto1
Please submit a full bug report,
with preprocessed source if appropriate.
See <https://bugs.gentoo.org/> for instructions.
make[4]: *** [/var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/ccRnWttJ.mk:182: /var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/cciVdW6y.ltrans60.ltrans.o] Error 4
make[4]: *** Waiting for unfinished jobs....
"""

Does it reliably reproduce for you? If it does and you are blocked try changing your opt flags from

    CFLAGS="-march=znver2 -O3 -pipe"

to something less aggressive, say:

    CFLAGS="-march=znver2 -O2 -pipe"

I'll try to reproduce locally.




Comment 5


HougeLangley





          2021-06-27 00:07:56 UTC
        

(In reply to Sergei Trofimovich from comment #4)
> Looks like a gcc bug in code generation:
> 
> """
> corrupted size vs. prev_size
> during RTL pass: gcse2
> /var/tmp/portage/sys-devel/gcc-11.1.0-r1/work/gcc-11.1.0/gcc/expmed.c: In
> function ‘extract_bit_field’:
> corrupted size vs. prev_size
> {standard input}: Assembler messages:
> {standard input}:32931: Warning: end of file not at end of a line; newline
> inserted
> {standard input}:33524: Error: no such instruction: `te'
> {standard input}: Error: open CFI at the end of file; missing .cfi_endproc
> directive
> xg++: internal compiler error: Aborted signal terminated program lto1
> Please submit a full bug report,
> with preprocessed source if appropriate.
> See <https://bugs.gentoo.org/> for instructions.
> make[4]: *** [/var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/ccRnWttJ.mk:182:
> /var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/cciVdW6y.ltrans60.ltrans.o]
> Error 4
> make[4]: *** Waiting for unfinished jobs....
> """
> 
> Does it reliably reproduce for you? If it does and you are blocked try
> changing your opt flags from
> 
>     CFLAGS="-march=znver2 -O3 -pipe"
> 
> to something less aggressive, say:
> 
>     CFLAGS="-march=znver2 -O2 -pipe"
> 
> I'll try to reproduce locally.

Thanks, I will try it




Comment 6


Sergei Trofimovich (RETIRED)






          2021-06-28 07:37:27 UTC
        

(In reply to Sergei Trofimovich from comment #4)
> Looks like a gcc bug in code generation:
> 
> """
> corrupted size vs. prev_size
> during RTL pass: gcse2
> /var/tmp/portage/sys-devel/gcc-11.1.0-r1/work/gcc-11.1.0/gcc/expmed.c: In
> function ‘extract_bit_field’:
> corrupted size vs. prev_size
> {standard input}: Assembler messages:
> {standard input}:32931: Warning: end of file not at end of a line; newline
> inserted
> {standard input}:33524: Error: no such instruction: `te'
> {standard input}: Error: open CFI at the end of file; missing .cfi_endproc
> directive
> xg++: internal compiler error: Aborted signal terminated program lto1
> Please submit a full bug report,
> with preprocessed source if appropriate.
> See <https://bugs.gentoo.org/> for instructions.
> make[4]: *** [/var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/ccRnWttJ.mk:182:
> /var/tmp/portage/sys-devel/gcc-11.1.0-r1/temp/cciVdW6y.ltrans60.ltrans.o]
> Error 4
> make[4]: *** Waiting for unfinished jobs....
> """
> 
> Does it reliably reproduce for you? If it does and you are blocked try
> changing your opt flags from
> 
>     CFLAGS="-march=znver2 -O3 -pipe"
> 
> I'll try to reproduce locally.

I was not able to reproduce it on znver3 system in a chroot built with COMMON_FLAGS="-march=znver2 -O3 -pipe". Might be due to -j12 parallelism or some other environment issue. To narrow it down I suggest a few other attempts:

1. try with MAKEOPTS=-j1
2. try with a vanilla kernel instead of 5.12.13-xanmod1




Comment 7


Sam James









          2022-01-08 02:23:54 UTC
        

This is one of those bugs which pops up somewhat often that looks a lot like "pre-OOM" failure or even OOM.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

