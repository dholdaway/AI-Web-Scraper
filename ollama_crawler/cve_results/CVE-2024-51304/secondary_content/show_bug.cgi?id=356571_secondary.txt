Title: 356571 – runscript of sys-apps/openrc-0.7.0 prevents sys-power/acpid-2.0.6 from loading my configuration
URL: https://bugs.gentoo.org/show_bug.cgi?id=356571

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 356571
runscript of sys-apps/openrc-0.7.0 prevents sys-power/acpid-2.0.6 from loading my configuration
Last modified: 2011-08-05 09:00:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 356571 
      - runscript of sys-apps/openrc-0.7.0 prevents sys-power/acpid-2.0.6 from loading my configuration


Summary:
runscript of sys-apps/openrc-0.7.0 prevents sys-power/acpid-2.0.6 from loadin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mobile Herd (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-26 15:24 UTC by Manuel Ullmann





      Modified:
    
2011-08-05 09:00 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




lid-button configuration file in /etc/acpid/events/

              (lid_closed,66 bytes,
                text/plain)

            
2011-02-26 15:27 UTC,

            Manuel Ullmann




Details





script assigned to button/lid event in /etc/acpi/actions/

              (lid_closed.sh,125 bytes,
                text/plain)

            
2011-02-26 15:29 UTC,

            Manuel Ullmann




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Manuel Ullmann





          2011-02-26 15:24:58 UTC
        

The runscript, that comes with openrc-0.7.0 seems to prevent acpid-2.0.6 from loading my configuration. If I invoke it simply with bash, it works fine. Even if I invoke the execute line of /etc/init.d/acpid (start-stop-daemon --start --quiet --exec /usr/sbin/acpid -- ${ACPID_OPTIONS}), it works. Note, that ACPID_OPTIONS is unset.

But if I use /etc/init.d/acpid or /etc/init.d/local, the configuration seems to be invisible for acpid, which is started. I´ll attach my configuration files.

Reproducible: Always

Steps to Reproduce:
1. Use my configuration files.
2. Restart acpid: # /etc/init.d/acpid restart


Actual Results:  
Acpid starts, but does not do anything on the configured event. (button/lid -> xscreensaver not locked)

Expected Results:  
Acpid starts, and does the configured command. (button/lid -> xscreensaver lock)

If the configuration in general is not read, you should be able to use different events. Use a different command, for example xmessage, which does not need the xscreensaver-dependency.




Comment 1


Manuel Ullmann





          2011-02-26 15:27:31 UTC
        

Created attachment 263911 [details]
lid-button configuration file in /etc/acpid/events/




Comment 2


Manuel Ullmann





          2011-02-26 15:29:26 UTC
        

Created attachment 263913 [details]
script assigned to button/lid event in /etc/acpi/actions/

I did mean /etc/acpi/events/ above of course.




Comment 3


Samuli Suominen (RETIRED)






          2011-08-05 08:57:00 UTC
        

So your shell had $DISPLAY exported from running X, but openrc wouldn't have $DISPLAY set, and xscreensaver would have no idea where to run

Looks to be like a bug in the user-supplied attached scripts, rather than openrc




Comment 4


Samuli Suominen (RETIRED)






          2011-08-05 09:00:00 UTC
        

Closing as WORKSFORME, export proper $DISPLAY for executing stuff in the X, if that doesn't solve it, reopen









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

