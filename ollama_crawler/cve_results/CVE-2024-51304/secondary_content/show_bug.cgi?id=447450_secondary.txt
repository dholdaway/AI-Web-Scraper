Title: 447450 – dev-lang/python ParseTuple __format__ configure check requires -Wformat
URL: https://bugs.gentoo.org/show_bug.cgi?id=447450

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 447450
dev-lang/python ParseTuple __format__ configure check requires -Wformat
Last modified: 2013-04-02 06:08:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 447450 
      - dev-lang/python ParseTuple __format__ configure check requires -Wformat


Summary:
dev-lang/python ParseTuple __format__ configure check requires -Wformat
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:

PATCH







Depends on:







Blocks:









 





      Reported:
    
2012-12-16 12:54 UTC by Hristo Venev





      Modified:
    
2013-04-02 06:08 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



rhill









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Fix for python 3.2.3-r2

              (patch.patch,337 bytes,
                patch)

            
2012-12-16 12:55 UTC,

            Hristo Venev




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Hristo Venev





          2012-12-16 12:54:39 UTC
        

In gcc 4.8 default warnings have changed and -Wformat is no longer on by default. This means -Werror doesn't imply -Werror=format. Therefore the test in python for __attribute((format(PyArg_ParseTuple, 1, 2))) passes. However pygobject has -Wformat=error and it fails to build because of an error in a python header. This is present both in python 2.7 and python 3.2.


Reproducible: Always




Comment 1


Hristo Venev





          2012-12-16 12:55:06 UTC
        

Created attachment 332468 [details, diff]
Fix for python 3.2.3-r2

I promised to supply patches with bugs, so here is a patch for python 3.2.3-r2.




Comment 2


Hristo Venev





          2012-12-16 12:58:15 UTC
        

Add epatch_user to the ebuilds for python.




Comment 3


Jeroen Roovers (RETIRED)






          2012-12-17 13:01:00 UTC
        

The Summary says gcc 4.7 but your Description says gcc 4.8. Which?




Comment 4


Hristo Venev





          2012-12-17 15:30:22 UTC
        

4.8. Sorry for the typo.




Comment 5


Jeroen Roovers (RETIRED)






          2012-12-17 20:26:24 UTC
        

GCC 4.8 isn't in the official tree. Please reopen this bug report when it is, and if this is then still a problem.




Comment 6


Hristo Venev





          2013-03-23 21:38:02 UTC
        

gcc 4.8 is out




Comment 7


Ryan Hill (RETIRED)






          2013-03-26 01:00:49 UTC
        

-Wformat by default is a patch we add ourselves.  When we add 4.8 to the tree it will have the same behaviour.




Comment 8


Ryan Hill (RETIRED)






          2013-04-02 06:08:30 UTC
        

I've verified that with our patchset the python configure check (checking whether gcc supports ParseTuple __format__...) fails like it should.  It does seem to me that your patch is correct anyways and the check is broken without it, but I don't know the context so I'll let the python guys decide what to do with it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

