Title: 179756 – sys-fs/xfsprogs-2.8.18 fails to install cp: missing destination file operand
URL: https://bugs.gentoo.org/show_bug.cgi?id=179756

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179756
sys-fs/xfsprogs-2.8.18 fails to install cp: missing destination file operand
Last modified: 2007-05-25 16:45:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179756 
      - sys-fs/xfsprogs-2.8.18 fails to install cp: missing destination file operand


Summary:
sys-fs/xfsprogs-2.8.18 fails to install cp: missing destination file operand
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-25 15:11 UTC by devsk





      Modified:
    
2007-05-25 16:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sgtphou









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


devsk





          2007-05-25 15:11:04 UTC
        

Its fails to install with following in the log. Same happens if MAKEOPTS=-j1 is used (just to rule out the similar looking install bug which is fixed already).

---------------------------------------------------------

=== libxfs ===
gmake[1]: warning: jobserver unavailable: using -j1.  Add `+' to parent make rule.
cd ../libxfs/.libs; ../../install-sh -o root -g root -m 755 -d /usr/lib64; ../../install-sh -o root -g root -m 644 -T old_lib libxfs.lai /usr/lib64
../install-sh -o root -g root -m 755 xfs_ncheck.sh /usr/bin/xfs_ncheck
=== fsck ===
gmake[1]: warning: jobserver unavailable: using -j1.  Add `+' to parent make rule.
../install-sh -o root -g root -m 755 -d /sbin
cp: missing destination file operand after `/home/tmp/portage/sys-fs/xfsprogs-2.8.18/image///usr/lib64/'
Try `cp --help' for more information.
gmake[1]: *** [install-dev] Error 1
make: *** [install-dev] Error 2
make: *** Waiting for unfinished jobs....
----------------------------------------------------------------

Reproducible: Always

Steps to Reproduce:
1. On amd64, emerge xfsprogs
2.
3.

Actual Results:  
Install error and emerge failure.

Expected Results:  
Should emerge fine.




Comment 1


devsk





          2007-05-25 15:18:06 UTC
        

# cd /home/tmp/portage/sys-fs/xfsprogs-2.8.18/work/xfsprogs-2.8.18/libxfs/.libs
# sh -x ../../install-sh -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
++ basename ../../install-sh
+ prog=install-sh
++ pwd
+ HERE=/home/tmp/portage/sys-fs/xfsprogs-2.8.18/work/xfsprogs-2.8.18/libxfs/.libs
+ dflag=false
+ Dflag=false
+ Sflag=false
+ Tflag=false
+ DIRMODE=755
+ FILEMODE=644
++ id -u
+ OWNER=0
++ id -g
+ GROUP=0
+ REAL_UID=0
+ INSTALL=true
+ MANIFEST=:
+ '[' -n '' -a -z '' ']'
+ '[' -n '' ']'
+ '[' 10 -eq 0 ']'
+ true
+ CP=cp
+ LN=ln
+ MKDIR=mkdir
+ CHMOD=chmod
+ CHOWN=_chown
+ '[' -n '' -a 0 -ne 0 ']'
+ getopts Dcm:d:S:o:g:T: c -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
+ case $c in
+ OWNER=root
+ getopts Dcm:d:S:o:g:T: c -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
+ case $c in
+ GROUP=root
+ getopts Dcm:d:S:o:g:T: c -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
+ case $c in
++ expr 644
+ DIRMODE=644
+ FILEMODE=644
+ getopts Dcm:d:S:o:g:T: c -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
+ case $c in
+ lt_install=old_lib
+ Tflag=true
+ getopts Dcm:d:S:o:g:T: c -o root -g root -m 644 -T old_lib libxfs.lai /home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
++ expr 9 - 1
+ shift 8
+ status=0
+ false
+ false
+ true
+ '[' 2 -ne 2 ']'
+ libtool_lai=libxfs.lai
+ '[' '!' -f libxfs.lai ']'
+ . ./libxfs.lai
++ dlname=libxfs.so.0
++ library_names='libxfs.so.0.0.0 libxfs.so.0 libxfs.so'
++ old_library=
++ dependency_libs=
++ current=0
++ age=0
++ revision=0
++ installed=yes
++ shouldnotlink=no
++ dlopen=
++ dlpreopen=
++ libdir=/usr/lib64
+ target=//home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64/
+ case $lt_install in
+ install_name=//home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64//
+ cp //home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64//
cp: missing destination file operand after `//home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64//'
Try `cp --help' for more information.
+ status=1
+ : f 644 root root /home/tmp/portage/sys-fs/xfsprogs-2.8.18/work/xfsprogs-2.8.18/libxfs/.libs/ //home/tmp/portage/sys-fs/xfsprogs-2.8.18/image//usr/lib64//
+ case $lt_install in
+ '[' 1 -eq 0 ']'
+ exit 1





Comment 2


FieldySnuts





          2007-05-25 15:21:45 UTC
        

Installed fine here.

Portage 2.1.2.7 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.5-r2, 2.6.21-mm2 i686)
=================================================================
System uname: 2.6.21-mm2 i686 AMD Athlon(TM) XP 1800+
Gentoo Base System release 1.12.10
Timestamp of tree: Fri, 25 May 2007 14:50:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.32
dev-lang/python:     2.3.6-r2, 2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/svn/env /usr/kde/svn/share/config /usr/kde/svn/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distcc distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://open-systems.ufl.edu/mirrors/gentoo http://cesium.di.uminho.pt/pub/gentoo/ http://adelie.polymtl.ca/ http://ftp.gentoo.or.kr/ http://fido.online.kz/gentoo"
LINGUAS="en"
MAKEOPTS="-j7"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/nx /usr/portage/local/layman/voip /usr/portage/local/layman/enlightenment /usr/portage/local/layman/kde /usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="3dnow X acl alsa am berkdb bitmap-fonts bzip2 cdr chroot cli cracklib crypt dri dv dvd dvdr encode fortran gdbm gif gnome gpm gtk gtk2 hal iconv isdnlog jpeg kde libg++ midi mmx mp3 mudflap ncurses nls nptl nptlonly oggvorbis openmp pam pcre pdflib perl png pppd pwdb python readline reflection session spell spl sse ssl tiff truetype truetype-fonts type1-fonts unicode x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="nv"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 3


Jakub Moc (RETIRED)






          2007-05-25 15:47:56 UTC
        

Not reproducible at all; you should post emerge --info output, coreutils version and attach the build log here.





Comment 4


devsk





          2007-05-25 16:23:42 UTC
        

# equery list coreutils
[ Searching for package 'coreutils' in all categories among: ]
 * installed packages
[I--] [ ~] sys-apps/coreutils-6.9-r1 (0)

# emerge --info
Portage 2.1.2.7 (default-linux/amd64/2006.1/desktop, gcc-4.2.0, glibc-2.5-r2, 2.6.21-gentoo-r1 x86_64)
=================================================================
System uname: 2.6.21-gentoo-r1 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3800+
Gentoo Base System release 1.12.10
Timestamp of tree: Fri, 25 May 2007 14:30:08 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.32
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -msse2 -msse3 -fforce-addr -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/hibernate /etc/udev/rules.d /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/hddtemp"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=k8 -msse2 -msse3 -fforce-addr -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--nospinner"
FEATURES="ccache distlocks metadata-transfer nodoc parallel parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="/amd-pc-share/distfiles2/ http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://gentoo.cites.uiuc.edu/pub/gentoo/ http://gentoo.chem.wisc.edu/gentoo/ http://gentoo.mirrors.tds.net/gentoo http://gentoo.mirrors.easynews.com/linux/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--enable-new-dtags"
LINGUAS="en"
MAKEOPTS="-j4"
PKGDIR="/amd-pc-share/bin-packages/x64"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/home/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/nx /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acpi aim aio alsa amd64 audiofile bash-completion berkdb binary-drivers bitmap-fonts bzip2 cairo cdparanoia cdr cli composite cracklib crypt cscope css cups curl dar64 dbus dga directfb divx djbfft dri dts dv dvb dvd dvdnav dvdr dvdread emboss emerald encode erandom evo exif expat faac faad fam fame fbcon fbsplash ffmpeg firefox flac foomaticdb freetype fuse gb gd gif gimp gimpprint glitz glut gmail gnome gnutls gphoto2 gpm gstreamer gtk gtk+ gtk2 hal hddtemp hpn iconv ieee1394 imagemagick imap imlib isdnlog java javascript jikes jpeg jpeg2k kde kdeenablefinal kqemu lcms ldap libcaca libg++ libnotify lirc live lm_sensors logitech-mouse logrotate lzo lzw lzw-tiff mad matroska md5sum midi mikmod mjpeg mmap mmx mmx2 mmxext mng moznopango mozsvg mp2 mp3 mp4 mpeg mplayer msn mudflap multislot musicbrainz nautilus ncurses nocd nodrm nomalloccheck nopie nossp nptl nptlonly nsplugin nut nvidia ogg openexr opengl openmp oss pam pcre pda pdf perl pic png pop ppds pppd pwdb python qt qt3 quicktime radio rar rdesktop readline reflection rplay rtc samba sasl sdl sensord server session slp smp sndfile spell spl sse sse2 sse3 ssl stencil-buffer stroke svg swat sysfs syslog tcl tcpd theora tiff tk truetype truetype-fonts type1-fonts urandom usb userlocales v41 v4l v4l2 vim vnc vorbis wma wmf wmp x264 xanim xcomposite xft xine xml xml2 xorg xpm xprint xv xvid xvmc yv12 zeroconf zlib" ALSA_CARDS="hda-intel intel8x0 intel8x0m ens1371 emu10k1x" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" CAMERAS="canon panasonic kodak minolta konica" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse vmmouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" LIRC_DEVICES="hauppauge" USERLAND="GNU" VIDEO_CARDS="nvidia nv fbdev vesa vga vmware"
Unset:  CTARGET, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 5


devsk





          2007-05-25 16:45:43 UTC
        

old_library was '' in .lai file, and hence the empty source in 'cp'.

Re-emerged libtool and then reemerged xfsprogs. It worked fine!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

