Title: 584830 – mail-client/roundcube-1.2.0 doesn't work after config file creation
URL: https://bugs.gentoo.org/show_bug.cgi?id=584830

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 584830
mail-client/roundcube-1.2.0 doesn't work after config file creation
Last modified: 2016-06-05 10:04:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 584830 
      - mail-client/roundcube-1.2.0 doesn't work after config file creation


Summary:
mail-client/roundcube-1.2.0 doesn't work after config file creation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Aaron W. Swenson








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-06-02 08:22 UTC by Semen Panevin





      Modified:
    
2016-06-05 10:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Semen Panevin





          2016-06-02 08:22:54 UTC
        

After I go to installer step 3 (check configuration) I get "The connection was reset" in browser.

roundcube error log says

[02-Jun-2016 08:09:00 UTC] PHP Warning:  finfo_file(): Failed identify data 0:invalid type 0 in mconvert()application/
octet-stream; charset=binary in /var/www/localhost/htdocs/roundcube/program/lib/Roundcube/rcube_mime.php on line 721

Tried both php-5.5 and php-5.6, same result

[ebuild   R    ] mail-client/roundcube-1.2.0:1.2.0::gentoo  USE="mysql sqlite ssl vhosts -enigma -ldap -managesieve -postgres -spell" 0 KiB

[ebuild   R    ] dev-lang/php-5.5.35:5.5::gentoo  USE="apache2 berkdb bzip2 cli crypt ctype exif fileinfo filter fpm ftp gd gdbm hash iconv imap ipv6 json mysql mysqli nls opcache pdo posix readline session simplexml snmp sockets sqlite ssl tokenizer truetype unicode xml zip zlib -bcmath -calendar -cdb -cgi -cjk -curl -debug -embed -enchant (-firebird) -flatfile -frontbase -gmp -inifile -intl -iodbc -kerberos -ldap -ldap-sasl -libedit -libmysqlclient -mhash -mssql -oci8-instant-client -odbc -pcntl -phar -postgres -qdbm -recode (-selinux) -sharedmem -soap -spell -sybase-ct -systemd -sysvipc -threads -tidy -vpx -wddx -xmlreader -xmlrpc -xmlwriter -xpm -xslt" 0 KiB

[ebuild   R    ] dev-lang/php-5.6.21:5.6::gentoo  USE="apache2 berkdb bzip2 cli crypt ctype exif fileinfo filter fpm ftp gd gdbm hash iconv imap ipv6 json mysql mysqli nls opcache pdo posix readline session simplexml snmp sockets sqlite ssl tokenizer truetype unicode xml zip zlib -bcmath -calendar -cdb -cgi -cjk -curl -debug -embed -enchant (-firebird) -flatfile -frontbase -gmp -inifile -intl -iodbc -kerberos -ldap -ldap-sasl -libedit -libmysqlclient (-libressl) -mhash -mssql -oci8-instant-client -odbc -pcntl -phar -postgres -qdbm -recode (-selinux) -sharedmem -soap -spell -sybase-ct -systemd -sysvipc -threads -tidy -vpx -wddx -xmlreader -xmlrpc -xmlwriter -xpm -xslt" 0 KiB

[ebuild   R    ] www-servers/apache-2.2.31:2::gentoo  USE="ssl -debug -doc -ldap (-libressl) (-selinux) -static -suexec -threads" APACHE2_MODULES="actions alias asis auth_basic auth_digest authn_alias authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cern_meta cgi cgid charset_lite dav dav_fs dav_lock dbd deflate dir disk_cache dumpio env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation proxy rewrite setenvif speling status substitute unique_id userdir usertrack version vhost_alias -ident -imagemap -log_forensic -proxy_ajp -proxy_balancer -proxy_connect -proxy_ftp -proxy_http -proxy_scgi -reqtimeout" APACHE2_MPMS="itk -event -peruser -prefork -worker" 0 KiB

Do I have something misconfigured? Error message is useless in this case...




Comment 1


Aaron W. Swenson






          2016-06-04 23:13:37 UTC
        

Huh, that shouldn't happen. That section is wrapped within a feature check: if ...function_exists('finfo_open')...[else skip this bit].

I don't know PHP well enough to really help toubleshoot, but the only hint I've been able to find relates to an extension not being uncommented in php.ini.

Try enabling the following line in your php.ini:
extension=php_fileinfo.dll

Nota bene, that line is commented in my php.ini, and I am not having this problem.




Comment 2


Semen Panevin





          2016-06-05 05:25:11 UTC
        

I've tried to comment out an if block where fileinfo extension is used, it didn't help. So it was just a PHP warning but it doesn't work by some other reason...

Apache error log says

[Sun Jun 05 08:20:00 2016] [error] child died with signal 11

and nothing else..




Comment 3


Semen Panevin





          2016-06-05 06:13:16 UTC
        

After some experiments with php-fpm+nginx instead of apache, and temp session data cleanup due to permission mismatch, it started to work normally. Magic...




Comment 4


Aaron W. Swenson






          2016-06-05 10:04:14 UTC
        

(In reply to Semen Panevin from comment #3)
> After some experiments with php-fpm+nginx instead of apache, and temp
> session data cleanup due to permission mismatch, it started to work
> normally. Magic...

This indicates the issue isn't with Roundcube itself, but with your configuration in Apache or PHP.

You may reopen this big when you're able to determine the underlying cause.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

