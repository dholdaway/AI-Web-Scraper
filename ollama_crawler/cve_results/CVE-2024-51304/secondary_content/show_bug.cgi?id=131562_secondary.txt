Title: 131562 – kde-base/qtjava doesn't install qtjava.so
URL: https://bugs.gentoo.org/show_bug.cgi?id=131562

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 131562
kde-base/qtjava doesn't install qtjava.so
Last modified: 2006-08-23 05:54:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 131562 
      - kde-base/qtjava doesn't install qtjava.so


Summary:
kde-base/qtjava doesn't install qtjava.so
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-28 05:13 UTC by oc666





      Modified:
    
2006-08-23 05:54 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



java
patrickallaert









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


oc666





          2006-04-28 05:13:13 UTC
        

The Version of the kdejava: 3.4.3-r1.
When I emerged kdejava it was failed.
The Next lines is the end of the unsuccessfull emerge:
....
/usr/lib/gcc/i586-pc-linux-gnu/3.4.5/../../../../i586-pc-linux-gnu/bin/ld: cannot find -lqtjava
collect2: ld returned 1 exit status
make[4]: *** [koala] 1 &#1492;&#1500;&#1511;&#1514;
make[4]: Leaving directory `/var/tmp/portage/kdejava-3.4.3-r1/work/kdejava-3.4.3/kdejava/koala'
make[3]: *** [all-recursive] 1 &#1492;&#1500;&#1511;&#1514;
make[3]: Leaving directory `/var/tmp/portage/kdejava-3.4.3-r1/work/kdejava-3.4.3/kdejava/koala'
make[2]: *** [all-recursive] 1 &#1492;&#1500;&#1511;&#1514;
make[2]: Leaving directory `/var/tmp/portage/kdejava-3.4.3-r1/work/kdejava-3.4.3/kdejava'
make[1]: *** [all-recursive] 1 &#1492;&#1500;&#1511;&#1514;
make[1]: Leaving directory `/var/tmp/portage/kdejava-3.4.3-r1/work/kdejava-3.4.3'
make: *** [all] 2 &#1492;&#1500;&#1511;&#1514;

!!! ERROR: kde-base/kdejava-3.4.3-r1 failed.
!!! Function kde_src_compile, Line 226, Exitcode 2
!!! died running emake, kde_src_compile:make
!!! If you need support, post the topmost build error, NOT this status message.


XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

emerge --info
Portage 2.0.54 (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.3.5-r3, 2.6.16-gentoo-r3 i686)
=================================================================
System uname: 2.6.16-gentoo-r3 i686 Intel(R) Pentium(R) 4 CPU 2.40GHz
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i586-pc-linux-gnu"
CFLAGS="-O2 -march=i586 -pipe"
CHOST="i586-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=i586 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/"
LANG="he_IL.UTF-8"
LC_ALL="he_IL.UTF-8"
LINGUAS="he"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dfx 3dnow X aac alsa apache2 apm arts audiofile avi berkdb bidi bitmap-fonts bzip2 cdr cli crypt cups curl divx4linux dri dts eds emboss encode esd exif expat fam ffmpeg flash foomaticdb fortran gdbm gif gpm gstreamer gtk2 hal icq idn imagemagick imlib ipv6 isdnlog java javascript jpeg jpeg2k kde lcms libg++ libwww live mad matroska mikmod mmx mmxext mng motif mp3 mpeg msn mysqli ncurses nls nptl nvidia ogg oggvorbis openal opengl oss pam pcre pdf pdflib perl png postgresql ppds pppd python qt quicktime readline real recode reflection ruby samba scanner sdl session spell spl sse sse2 ssl svga symlink tcpd theora tiff truetype truetype-fonts type1-fonts udev usb v4l v4l2 vorbis win32codecs xanim xine xinerama xml xml2 xmms xorg xv xvid xvmc zlib linguas_he userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, INSTALL_MASK, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Patrick ALLAERT





          2006-05-01 05:11:22 UTC
        

I confirm this bug with kde-3.5.2, I have exactly the same problem with:

kde-base/kdejava-3.5.2

The following version of qtjava is installed on my system:

kde-base/qtjava-3.5.2


/bin/sh ../../libtool --silent --mode=link --tag=CXX x86_64-pc-linux-gnu-g++  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -Os -march=k8 -pipe -fomit-frame-pointer -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common   -Wl,-O1 -o koala -L/usr/kde/3.5/lib64 -L/usr/qt/3/lib64 -L/usr/X11R6/lib64    -R /usr/kde/3.5/lib64 -R /usr/kde/3.5/lib64 -R /usr/qt/3/lib64 -R /usr/X11R6/lib64 main.o ./kdejava/libkdejava.la -lkspell -lqtjava -lkparts -lkio -lXext -lX11
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.5/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lqtjava
collect2: ld returned 1 exit status
make[4]: *** [koala] Error 1
make[4]: Leaving directory `/var/tmp/portage/kdejava-3.5.2/work/kdejava-3.5.2/kdejava/koala'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/kdejava-3.5.2/work/kdejava-3.5.2/kdejava/koala'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/kdejava-3.5.2/work/kdejava-3.5.2/kdejava'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kdejava-3.5.2/work/kdejava-3.5.2'
make: *** [all] Error 2

!!! ERROR: kde-base/kdejava-3.5.2 failed.
Call stack:
  ebuild.sh, line 1532:   Called dyn_compile
  ebuild.sh, line 929:   Called src_compile
  kdejava-3.5.2.ebuild, line 45:   Called kde-meta_src_compile
  kde-meta.eclass, line 408:   Called kde_src_compile
  kde.eclass, line 113:   Called kde_src_compile 'all'
  kde.eclass, line 230:   Called kde_src_compile 'myconf' 'configure' 'make'
  kde.eclass, line 226:   Called die

===============================================

emerge --info:

Portage 2.1_pre7-r5 (default-linux/amd64/2006.0, gcc-3.4.5, glibc-2.3.5-r3, 2.6.14-gentoo-r5 x86_64)
=================================================================
System uname: 2.6.14-gentoo-r5 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.6.14
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-Os -march=k8 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/env.d"
CXXFLAGS="-Os -march=k8 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://mirror.ovh.net/gentoo-distfiles/ ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo "
LDFLAGS="-Wl,-O1"
LINGUAS="fr"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa apache2 arts avi bash-completion berkdb bitmap-fonts browserplugin cairo cdr cli crypt cups curl directfb divx4linux dri eds emboss encode enscript esd foomaticdb gif glitz gpm gstreamer gtk gtk2 hal howl imlib isdnlog java javascript jpeg kde kdeenablefinal lzw lzw-tiff matroska motif mozilla mp3 mpeg msn mysql ncurses nls nptl nptlonly nsplugin nvidia offensive ogg opengl pam pcre pdflib php pic png pppd python qt quicktime readline reflection sdl session simplexml soap spell spl ssl tcpd tetex tidy tiff tokenizer truetype truetype-fonts type1-fonts unicode usb utf8 vhosts vim-with-x vorbis xml xml2 xmms xorg xpm xsl xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_fr userland_GNU video_cards_nv video_cards_nvidia video_cards_vesa"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTDIR_OVERLAY




Comment 2


Carsten Lohrke (RETIRED)






          2006-05-02 07:38:34 UTC
        

Hm, compiles fine for me. What is the output of `equery files qtjava | grep libqt` ?




Comment 3


Patrick ALLAERT





          2006-05-02 11:10:48 UTC
        

(In reply to comment #2)
> Hm, compiles fine for me. What is the output of `equery files qtjava | grep
> libqt` ?

/usr/kde/3.5/lib64/libqtjavasupport.la
/usr/kde/3.5/lib64/libqtjavasupport.so
/usr/kde/3.5/lib64/libqtjavasupport.so.1
/usr/kde/3.5/lib64/libqtjavasupport.so.1.0.0

And on my laptop (very similar config but x86 in place amd64) it's in /usr/kde/3.5/lib/ and kdejava compiles fine...

This is maybe the problem with me (default-linux/amd64/2006.0), but not with the original reporter, as he has "default-linux/x86/2006.0"




Comment 4


Carsten Lohrke (RETIRED)






          2006-05-03 05:20:25 UTC
        

So libqtjava.so doesn't get installed for some reason. Which jdk are you both using?




Comment 5


Patrick ALLAERT





          2006-05-03 14:14:32 UTC
        

(In reply to comment #4)
> So libqtjava.so doesn't get installed for some reason. Which jdk are you both
> using?

dev-java/blackdown-jdk-1.4.2.03  USE="X alsa browserplugin mozilla nsplugin -doc"




Comment 6


Carsten Lohrke (RETIRED)






          2006-05-05 07:57:04 UTC
        

Hm, can't reproduce it and I have no clue why it doesn't fail properly at least. Please do 

FEATURES="keeptemp keepwork" emerge qtjava 

create a tarball of /var/tmp/portage/qtjava-xxx and send it my way.



Java herd: Indepent of this bug - I'm not familiar with Gentoo/Java packaging (jar handling etc.) It would be nice if you'd have a look at kde-base/{qt,kde}java.




Comment 7


Patrick ALLAERT





          2006-05-07 10:32:26 UTC
        

(In reply to comment #6)
> Hm, can't reproduce it and I have no clue why it doesn't fail properly at
> least. Please do 
> 
> FEATURES="keeptemp keepwork" emerge qtjava 
> 
> create a tarball of /var/tmp/portage/qtjava-xxx and send it my way.

I re-emerged the same version of qtjava and the missing libraries are now installed... I really don't know what happens at the time of the first emerge...

You renamed the title of this bug, but I am not sure my problem was the same as the original reporter! Anyway, thanks a lot for your help!




Comment 8


Carsten Lohrke (RETIRED)






          2006-05-07 11:18:48 UTC
        

oc666?




Comment 9


oc666





          2006-05-07 13:01:21 UTC
        

(In reply to comment #8)
> oc666?
> 

I update my system to i686 (until then i've the wrong architecture-i586 for my system). And now the emerge works fine.




Comment 10


Caleb Tennis (RETIRED)






          2006-08-23 05:54:44 UTC
        

seems to have fixed itself for everyone!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

