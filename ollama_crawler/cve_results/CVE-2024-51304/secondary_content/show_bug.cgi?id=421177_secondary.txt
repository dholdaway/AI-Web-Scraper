Title: 421177 – =sys-fs/udev-171-r6[introspection]: extras/gudev/GUdev-1.0.gir: can't resolve libraries to shared libraries: gudev-1.0
URL: https://bugs.gentoo.org/show_bug.cgi?id=421177

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 421177
=sys-fs/udev-171-r6[introspection]: extras/gudev/GUdev-1.0.gir: can't resolve libraries to shared libraries: gudev-1.0
Last modified: 2012-07-20 08:32:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 421177 
      - =sys-fs/udev-171-r6[introspection]: extras/gudev/GUdev-1.0.gir: can't resolve libraries to shared libraries: gudev-1.0


Summary:
=sys-fs/udev-171-r6[introspection]: extras/gudev/GUdev-1.0.gir: can't resolve...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

udev maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-06-14 23:14 UTC by erik falor





      Modified:
    
2012-07-20 08:32 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




output of 'emerge --info =sys-fs/udev-171-r6'

              (emerge.info,6.02 KB,
                text/plain)

            
2012-06-14 23:18 UTC,

            erik falor




Details





output of 'emerge -pqv =sys-fs/udev-171-r6'

              (emerge.pqv,270 bytes,
                text/plain)

            
2012-06-14 23:19 UTC,

            erik falor




Details





build log

              (sys-fs_udev-171-r6_20120614-230552.log,32.24 KB,
                text/plain)

            
2012-06-14 23:19 UTC,

            erik falor




Details





ebuild environment

              (environment,137.06 KB,
                text/plain)

            
2012-06-14 23:19 UTC,

            erik falor




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


erik falor





          2012-06-14 23:14:09 UTC
        

Build of sys-fs/udev-171-r6 fails on the extras/gudev/GUdev-1.0.gir Make target.

I'm using the following USE flags:
-extras gudev hwdb keymap introspection openrc rule_generator

And I get this error:
ERROR: can't resolve libraries to shared libraries: gudev-1.0

BUT - if I go into /var/tmp/portage/sys-fs/udev-171-r6/work/udev-171 and manually "make" it, the build succeeds.  I only have trouble with this build when using the ebuild interface.

In an attempt to make my ebuild env identical to my shell's, I went into /etc/make.conf and unset all flags pertaining to the compiler and linker:
CFLAGS, CXXFLAGS, CHOST, MAKEOPTS and LDFLAGS.  I still met with failure.

I can build this through ebuild by disabling the gudev and hwdb USE flags, but another package I must install requires it, so I can't work around it this way.

Reproducible: Always

Steps to Reproduce:
1. enable the gudev, hwdb, and extras USE flag for sys-fs/udev
2. emerge sys-fs/udev
Actual Results:  
ERROR: can't resolve libraries to shared libraries: gudev-1.0
make[2]: *** [extras/gudev/GUdev-1.0.gir] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2
 * ERROR: sys-fs/udev-171-r6 failed (compile phase):
 *   emake failed


Expected Results:  
Emereged with no errors




Comment 1


erik falor





          2012-06-14 23:18:42 UTC
        

Created attachment 315365 [details]
output of 'emerge --info =sys-fs/udev-171-r6'




Comment 2


erik falor





          2012-06-14 23:19:03 UTC
        

Created attachment 315367 [details]
output of 'emerge -pqv =sys-fs/udev-171-r6'




Comment 3


erik falor





          2012-06-14 23:19:29 UTC
        

Created attachment 315369 [details]
build log




Comment 4


erik falor





          2012-06-14 23:19:56 UTC
        

Created attachment 315371 [details]
ebuild environment




Comment 5


Samuli Suominen (RETIRED)






          2012-06-14 23:20:41 UTC
        

(In reply to comment #0)
> make[2]: *** [extras/gudev/GUdev-1.0.gir] Error 1

.gir is related to USE="introspection" and dev-libs/gobject-introspection

this might be a duplicate of bug 417659

as in, first make *sure* to use both glib and gobject-introspection either from ~arch or stable, don't mix them, and then try to re-emerge gobject-introspection




Comment 6


erik falor





          2012-06-15 16:15:23 UTC
        

(In reply to comment #5)
> (In reply to comment #0)
> > make[2]: *** [extras/gudev/GUdev-1.0.gir] Error 1
> 
> .gir is related to USE="introspection" and dev-libs/gobject-introspection
> 
> this might be a duplicate of bug 417659
> 
> as in, first make *sure* to use both glib and gobject-introspection either
> from ~arch or stable, don't mix them, and then try to re-emerge
> gobject-introspection

I reinstalled dev-libs/glib-2.30.3 from stable
I reinstalled dev-libs/gobject-introspection-1.30.0-r2 from stable

I still get the same error message when emerging sys-fs/udev, specifically:

ERROR: can't resolve libraries to shared libraries: gudev-1.0

I have found that when I emerge sys-fs/udev with USE="-extras -introspection" the merge succeeds.  The presence of either of the USE flags make udev's build fail.




Comment 7


Samuli Suominen (RETIRED)






          2012-06-19 13:10:12 UTC
        

(In reply to comment #6)
> (In reply to comment #5)
> > (In reply to comment #0)
> > > make[2]: *** [extras/gudev/GUdev-1.0.gir] Error 1
> > 
> > .gir is related to USE="introspection" and dev-libs/gobject-introspection
> > 
> > this might be a duplicate of bug 417659
> > 
> > as in, first make *sure* to use both glib and gobject-introspection either
> > from ~arch or stable, don't mix them, and then try to re-emerge
> > gobject-introspection
> 
> I reinstalled dev-libs/glib-2.30.3 from stable
> I reinstalled dev-libs/gobject-introspection-1.30.0-r2 from stable

So you had something else installed before, versions from ~arch? Downgrading is the last thing you should do.

In any case, this is a problem with your glib and gobject-introspection installations. 
You can run the excessive command `emerge -e1 udev` to resolve the problem (as in, rebuild all the reverse dependencies, leading up to GUdev-1.0.gir)




Comment 8


erik falor





          2012-07-18 15:47:57 UTC
        

(In reply to comment #7)
> In any case, this is a problem with your glib and gobject-introspection
> installations. 
> You can run the excessive command `emerge -e1 udev` to resolve the problem
> (as in, rebuild all the reverse dependencies, leading up to GUdev-1.0.gir)

I finally got around to this great rebuild, and it did in fact make the problem go away.  Thank you, Samuli!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

