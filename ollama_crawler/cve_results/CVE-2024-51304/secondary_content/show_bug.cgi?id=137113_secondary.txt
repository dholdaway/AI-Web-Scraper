Title: 137113 – mv segmentation fault coreutils-5.96
URL: https://bugs.gentoo.org/show_bug.cgi?id=137113

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137113
mv segmentation fault coreutils-5.96
Last modified: 2006-06-24 20:52:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137113 
      - mv segmentation fault coreutils-5.96


Summary:
mv segmentation fault coreutils-5.96
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-17 13:52 UTC by Stefan de Konink





      Modified:
    
2006-06-24 20:52 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Ltrace

              (oddmvltrace,320.13 KB,
                text/plain)

            
2006-06-18 09:39 UTC,

            Stefan de Konink




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan de Konink





          2006-06-17 13:52:42 UTC
        

I thought I have seen it all, but this slaps me in the face. I'm using PPC with GCC-4.1.1. 

I downloaded the IBM-ppc files to my homedir. And as root I tried to move it from /home to /usr/portage/distfiles both on different partitions. I hear harddisk activity, but that ends with a segmentation fault. The filesystem is ext3. dmesg has no information.

The most odd thing is this:

(gdb) run /usr/portage/distfiles/ibm-java2-jre-50-linux-ppc.tgz /home/skinkie/.
Starting program: /bin/mv /usr/portage/distfiles/ibm-java2-jre-50-linux-ppc.tgz /home/skinkie/.

Program exited normally.
(gdb) run /home/skinkie/ibm-java2-jre-50-linux-ppc.tgz /usr/portage/distfiles/.
Starting program: /bin/mv /home/skinkie/ibm-java2-jre-50-linux-ppc.tgz /usr/portage/distfiles/.

Program exited normally.

But in terminal:
localhost skinkie # mv /usr/portage/distfiles/ibm-java2-jre-50-linux-ppc.tgz /home/skinkie/.
localhost skinkie # mv /home/skinkie/ibm-java2-jre-50-linux-ppc.tgz /usr/portage/distfiles/.
Segmentation fault

(gdb) run /home/skinkie/ibm-java2-jre-50-linux-ppc.tgz /usr/portage/distfiles/.
Starting program: /bin/mv /home/skinkie/ibm-java2-jre-50-linux-ppc.tgz /usr/portage/distfiles/.

Program exited normally.


(i'm going to try to get back to 'stock' gentoo kernel and try again)

emerge --info
Portage 2.1_rc4-r2 (default-linux/ppc/ppc32, gcc-4.1.1, glibc-2.4-r3, 2.6.17-rc6-gf678dab9 ppc)
=================================================================
System uname: 2.6.17-rc6-gf678dab9 ppc 7447A, altivec supported
Gentoo Base System version 1.12.0
ccache version 2.4 [enabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r1
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r4
ACCEPT_KEYWORDS="ppc ~ppc"
AUTOCLEAN="yes"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-g -O2 -mcpu=7450 -pipe -fno-strict-aliasing -maltivec -mabi=altivec"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-g -O2 -mcpu=7450 -pipe -fno-strict-aliasing -maltivec -mabi=altivec"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache confcache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://10.0.0.205/gentoo ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/ebuildexchange /usr/local/portage"
SYNC="rsync://10.0.0.205/gentoo-portage"
USE="ppc X alsa altivec bitmap-fonts bzip2 cli crypt curl dbus dri dv encode fbcon ffmpeg flac fortran glitz gsm gtk2 ieee1394 ipv6 isdnlog jpeg lcms mad mmap mp3 ncurses network nls nptl nptlonly nsplugin ogg pcre perl pic png pppd python readline reflection session speex spell spl ssl tcltk tcpd theora tiff truetype-fonts type1-fonts udev unicode userlocales vorbis xfs xorg xprint xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU video_cards_fbdev video_cards_radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Stefan de Konink





          2006-06-17 17:10:46 UTC
        

Now running vanilla-2.6.17-rc6. Still the move via gdb works, the native move still results in a fault.




Comment 2


Jakub Moc (RETIRED)






          2006-06-18 00:46:28 UTC
        

coreutils version?




Comment 3


Stefan de Konink





          2006-06-18 00:48:51 UTC
        

coreutils-5.96




Comment 4


SpanKY






          2006-06-18 09:22:12 UTC
        

run it through `strace` and `ltrace` and see if it still segfaults




Comment 5


Stefan de Konink





          2006-06-18 09:39:40 UTC
        

Created attachment 89482 [details]
Ltrace

Strace does the job like gdb. ltrace makes do the segmentation fault too. As attached.




Comment 6


SpanKY






          2006-06-24 20:52:26 UTC
        

give 5.97 a spin









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

