Title: 794232 – dev-util/cbindgen-0.19.0 - error: could not compile hashbrown
URL: https://bugs.gentoo.org/show_bug.cgi?id=794232

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 794232
dev-util/cbindgen-0.19.0 - error: could not compile hashbrown
Last modified: 2024-08-11 08:04:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 794232 
      - dev-util/cbindgen-0.19.0 - error: could not compile hashbrown


Summary:
dev-util/cbindgen-0.19.0 - error: could not compile hashbrown
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-06-05 07:41 UTC by Toralf Förster





      Modified:
    
2024-08-11 08:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:


796164

799878





Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.53 KB,
                text/plain)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





dev-util:cbindgen-0.19.0:20210605-064604.log

              (dev-util:cbindgen-0.19.0:20210605-064604.log,18.47 KB,
                text/plain)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,247.32 KB,
                text/plain)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





environment

              (environment,65.60 KB,
                text/plain)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





etc.portage.tar.bz2

              (etc.portage.tar.bz2,20.76 KB,
                application/x-bzip)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





temp.tar.bz2

              (temp.tar.bz2,18.42 KB,
                application/x-bzip)

            
2021-06-05 07:41 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2021-06-05 07:41:05 UTC
        

The futex facility returned an unexpected error code.
error: could not compile `hashbrown`

Caused by:
  process didn't exit successfully: `rustc --crate-name hashbrown --edition=2018 /var/tmp/portage/dev-util/cbindgen-0.19.0/work/cargo_home/gentoo/hashbrown-0.9.1/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no --cfg 'feature="raw"' -C metadata=a5686d19b5998b6d -C extra-filename=-a5686d19b5998b6d --out-dir /var/tmp/portage/dev-util/cbindgen-0.19.0/work/cbindgen-0.19.0/target/release/deps -L dependency=/var/tmp/portage/dev-util/cbindgen-0.19.0/work/cbindgen-0.19.0/target/release/deps --cap-lints allow -C codegen-units=3` (exit code: 134)
warning: build failed, waiting for other jobs to finish...

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1_desktop_gnome_systemd-j3-20210601-173322

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-11.1.0 *
clang version 12.0.0
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/12/bin
/usr/lib/llvm/12
12.0.0
Python 3.9.5
Available Ruby profiles:
  [1]   ruby26 (with Rubygems)
  [2]   ruby30 (with Rubygems) *
Available Rust versions:
  [1]   rust-bin-1.52.1 *
The following VMs are available for generation-2:
1)	JamVM JDK 2.0.0 [jamvm]
*)	AdoptOpenJDK 8.292_p10 [openjdk-bin-8]
Available Java Virtual Machines:
  [1]   jamvm 
  [2]   openjdk-bin-8  system-vm

The Glorious Glasgow Haskell Compilation System, version 8.10.4
  HEAD of ::gentoo
commit 161d5138c68aa96ab2b4459e7d78e5afd92fa2a7
Author: Repository mirror & CI <repomirrorci@gentoo.org>
Date:   Sat Jun 5 05:20:26 2021 +0000

    2021-06-05 05:20:25 UTC

emerge -qpvO dev-util/cbindgen
[ebuild  N    ] dev-util/cbindgen-0.19.0  USE="-debug"




Comment 1


Toralf Förster






          2021-06-05 07:41:06 UTC
        

Created attachment 713736 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2021-06-05 07:41:07 UTC
        

Created attachment 713739 [details]
dev-util:cbindgen-0.19.0:20210605-064604.log




Comment 3


Toralf Förster






          2021-06-05 07:41:09 UTC
        

Created attachment 713742 [details]
emerge-history.txt




Comment 4


Toralf Förster






          2021-06-05 07:41:10 UTC
        

Created attachment 713745 [details]
environment




Comment 5


Toralf Förster






          2021-06-05 07:41:12 UTC
        

Created attachment 713748 [details]
etc.portage.tar.bz2




Comment 6


Toralf Förster






          2021-06-05 07:41:13 UTC
        

Created attachment 713751 [details]
temp.tar.bz2




Comment 7


Thomas Deutschmann (RETIRED)






          2021-06-05 14:08:48 UTC
        

I don't think this is a problem in cbindgen.

> The futex facility returned an unexpected error code.

Sounds like something is wrong with your system. Are you able to reproduce?




Comment 8


Toralf Förster






          2021-06-05 14:55:27 UTC
        

(In reply to Thomas Deutschmann from comment #7)
> Sounds like something is wrong with your system. Are you able to reproduce?

Hhm, it emerges now fine at all images - even at this image.
By any chance  a make -j3 issue ?




Comment 9


Thomas Deutschmann (RETIRED)






          2021-06-05 15:16:10 UTC
        

I don't know. I cannot reproduce even with RUSTFLAGS="-Ccodegen-units=3".




Comment 10


Georgy Yakovlev







          2021-07-03 02:32:47 UTC
        

I agree, something specific to the system it seems.
I've found codepath returning futex error, it's in glibc

see https://bugs.gentoo.org/799878#c8









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

