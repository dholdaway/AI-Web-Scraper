Title: 195916 – app-office/openoffice-2.3.0 Fails at Compress/Zlib.pm Check
URL: https://bugs.gentoo.org/show_bug.cgi?id=195916

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 195916
app-office/openoffice-2.3.0 Fails at Compress/Zlib.pm Check
Last modified: 2007-11-15 11:21:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 195916 
      - app-office/openoffice-2.3.0 Fails at Compress/Zlib.pm Check


Summary:
app-office/openoffice-2.3.0 Fails at Compress/Zlib.pm Check
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

196311 196670

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-10-15 06:08 UTC by Steven Elling





      Modified:
    
2007-11-15 11:21 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jackdachef
vgivanovic









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (app-office:openoffice-2.3.0:20071015-054425.log,738.10 KB,
                text/plain)

            
2007-10-15 06:09 UTC,

            Steven Elling




Details





emerge info

              (emerge-info.txt,4.08 KB,
                text/plain)

            
2007-10-15 06:10 UTC,

            Steven Elling




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Steven Elling





          2007-10-15 06:08:31 UTC
        

I'm trying to upgrade to OpenOffice 2.3.0 but the config phase of the ebuild fails with the following:

checking for perl... /usr/bin/perl
checking the Perl version... checked (perl 5)
checking for required Perl modules...  is only avaliable with the XS version at /usr/lib/perl5/vendor_perl/5.8.8/Compress/Zlib.pm line 9
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.8.8/Compress/Zlib.pm line 9.
Compilation failed in require at /usr/lib/perl5/vendor_perl/5.8.8/Archive/Zip.pm line 24.
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.8.8/Archive/Zip.pm line 24.
Compilation failed in require at -e line 1.
BEGIN failed--compilation aborted at -e line 1.
configure: error: Failed to find some modules
make: *** [stamp/build] Error 1
 *
 * ERROR: app-office/openoffice-2.3.0 failed.
 * Call stack:
 *   ebuild.sh, line 1654:   Called dyn_compile
 *   ebuild.sh, line 990:   Called qa_call 'src_compile'
 *   ebuild.sh, line 44:   Called src_compile
 *   openoffice-2.3.0.ebuild, line 338:   Called die
 *
 * Build failed
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/app-office:openoffice-2.3.0:20071015-054425.log'.
 *
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="." JAVA_HOME="/opt/sun-jdk-1.5.0.12"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info
--

I've striped all CFLAGS but two from make.conf, run perl-cleaner, and re-installed Compress-Zlib and Archive-Zip to no avail.

Reproducible: Always

Steps to Reproduce:




Comment 1


Steven Elling





          2007-10-15 06:09:49 UTC
        

Created attachment 133498 [details]
build log




Comment 2


Steven Elling





          2007-10-15 06:10:33 UTC
        

Created attachment 133500 [details]
emerge info




Comment 3


Jakub Moc (RETIRED)






          2007-10-15 07:00:28 UTC
        



*** This bug has been marked as a duplicate of bug 193858 ***




Comment 4


Steven Elling





          2007-10-17 01:57:48 UTC
        

I don't think this is a duplicate of bug #193858 for the following reasons:

1. dev-perl/IO-Compress-Base-2.005 was already installed.
2. dev-perl/IO-Compress-Zlib-2.005 was already installed.
3. dev-perl/Archive-Zip-1.20 was already installed.
4. The above perl modules were rebuilt to no avail.
5. Running 'perl-cleaner all' did not address the issue.
6. Bug #193858 was to address the missing IO-Compress-Base dependency, which the ebuild on my system already has.
7. The error is reproduceable by running "perl -e 'use Compress::Zlib'"

For reference here is the error from running perl in point 7:

 is only avaliable with the XS version at /usr/lib/perl5/vendor_perl/5.8.8/Compress/Zlib.pm line 9
BEGIN failed--compilation aborted at /usr/lib/perl5/vendor_perl/5.8.8/Compress/Zlib.pm line 9.
Compilation failed in require at -e line 1.
BEGIN failed--compilation aborted at -e line 1.


If anything, this is more of a problem with a specific perl module not OpenOffice.




Comment 5


Steven Elling





          2007-10-17 02:05:30 UTC
        

Downgrading to dev-perl/Compress-Zlib-1.41 fixes the perl error.




Comment 6


Steven Elling





          2007-10-17 02:15:07 UTC
        

Line 9 of Zlib.pm is:

use Scalar::Util qw(dualvar);


And running "perl -e 'use Scalar::Util qw(dualvar)'" produces the error we are concerned with:

 is only avaliable with the XS version at -e line 1
BEGIN failed--compilation aborted at -e line 1.




Comment 7


Steven Elling





          2007-10-17 02:34:16 UTC
        

Rebuilding perl-core/Scalar-List-Utils-1.19 fixes the error with dev-perl/Compress-Zlib-2.005.

Now lets see of OpenOffice will build.




Comment 8


Jakub Moc (RETIRED)






          2007-10-17 04:42:25 UTC
        

Closing then, thanks for reporting back.




Comment 9


Jakub Moc (RETIRED)






          2007-10-18 18:56:55 UTC
        

*** Bug 196311 has been marked as a duplicate of this bug. ***




Comment 10


Vladimir G. Ivanovic





          2007-10-18 22:16:26 UTC
        

I don't think this bug should be marked resolved. A workaround has been found, but the underlying issue remains: building OOo-2.3.0 fails under some (peculiar) circumstances.

The build of OOo-2.3.0 I did about one month ago did not fail, and I have not (re-)built Scalar-List-Utils since January 2007.




Comment 11


Jakub Moc (RETIRED)






          2007-10-21 22:06:08 UTC
        

*** Bug 196670 has been marked as a duplicate of this bug. ***




Comment 12


Steven Elling





          2007-11-15 07:25:04 UTC
        

I did get OpenOffice 2.3.0 to build.

OpenOffice 2.3.x does not seem to like the following CFLAGS on x86:

-fomit-frame-pointer -finline-functions


I built OpenOffice 2.3.0 with the following CFLAGS:

-O2 -march=athlon-xp -m3dnow -mmmx -msse -mfpmath=sse -w -pipe




Comment 13


Matt





          2007-11-15 11:21:49 UTC
        

ah, I forgot this bug XD ,

it's building / has built for me after rebuilding perl-core/Scalar-List-Utils-1.19

thanks, Steven









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

