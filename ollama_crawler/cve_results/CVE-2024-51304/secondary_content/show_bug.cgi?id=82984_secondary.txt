Title: 82984 – /etc/init.d/atftp causes net.eth0 to fail when added to default runlevel
URL: https://bugs.gentoo.org/show_bug.cgi?id=82984

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 82984
/etc/init.d/atftp causes net.eth0 to fail when added to default runlevel
Last modified: 2005-07-29 23:30:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 82984 
      - /etc/init.d/atftp causes net.eth0 to fail when added to default runlevel


Summary:
/etc/init.d/atftp causes net.eth0 to fail when added to default runlevel
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-22 12:14 UTC by Eduardo Costa Lisboa





      Modified:
    
2005-07-29 23:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Eduardo Costa Lisboa





          2005-02-22 12:14:17 UTC
        

Ok, that's what happens:
When I do
#> rc-updade add atftp default
the script /etc/init.d/net.eth0 fails to start on the next boot, but works if I rerun it manually, after logging in. Consequently, every network service, like dhcp, fails too.

But if I just rename the atftp script to another name, like in.tftp (the default script name of netkit-tftp), and do
#> rc-update add in.tftp default
it works perfectly!

Reproducible: Always
Steps to Reproduce:
1. type:
#> emerge atftp
#> rc-update add atftp default
#> reboot
And wait for net.eth0 to fail on the next boot

Now, to solve, do the following steps:
#> rc-update del atftp default
#> mv /etc/init.d/atftp /etc/init.d/in.tftp
#> rc-update add in.tftp default
#> reboot
And check that the system will start perfectly
Actual Results:  
The script net.eth0 fails to bring up the interface

Expected Results:  
The script net.eth0 should not fail in any case

1. I set values for both variables TFTPD_ROOT and TFTPD_OPTS inside the script,
between the first mandatory runscript line and the first mentioned function,
depend()

2. I was using DHCP configuration and an alias in /etc/conf.d/net for eth0. I
did not try with static IP configuration or with no interface aliases

3. I had an installed and configured, working net-misc/dhcp server package




Comment 1


SpanKY






          2005-02-25 06:07:55 UTC
        

you neglected to provide `emerge info` like the bug report page said to




Comment 2


Eduardo Costa Lisboa





          2005-02-25 07:24:53 UTC
        

Oh, sorry. Here is the output of my emerge info atftp:

Portage 2.0.51-r15 (default-linux/x86/2004.3, gcc-3.3.4, glibc-2.3.4.20040808-r1, 2.6.8-1-386 i686)
=================================================================
System uname: 2.6.8-1-386 i686
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4 [2.3.4 (#1, Oct 24 2004, 04:58:11)]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.4
sys-devel/autoconf:  2.59-r5
sys-devel/automake:  1.8.5-r1
sys-devel/binutils:  2.14.90.0.8-r1
sys-devel/libtool:   1.5.2-r5
virtual/os-headers:  2.4.21-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=i686 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=i686 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="ftp://ftp.las.ic.unicamp.br/pub/gentoo/"
LANG="pt_BR"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X apm arts avi berkdb bitmap-fonts crypt cscope cups encode f77 font-server foomaticdb fortran gdbm gif gnome gpmgtk gtk2 imlib ipv6 jpeg kde libg++ libwww mad mikmod motif mpeg ncurses nls oggvorbis opengl oss pam pdflib perl png python qt quicktime readline ruby sdl spell ssl svga tcpd truetype truetype-fonts type1-fonts xml2 xmms xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 3


SpanKY






          2005-07-29 23:30:41 UTC
        

upgrade your baselayout









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

