Title: 148262 – emerge does not warn about faulty internet connection
URL: https://bugs.gentoo.org/show_bug.cgi?id=148262

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 148262
emerge does not warn about faulty internet connection
Last modified: 2006-09-19 16:48:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 148262 
      - emerge does not warn about faulty internet connection


Summary:
emerge does not warn about faulty internet connection
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-19 16:38 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2006-09-19 16:48 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-09-19 16:38:55 UTC
        

procedure:
- wait one week without any emerge
- do esync
- unplug internet connexion
- emerge -DaNuv world

emerge took about 20 minutes to give me a list of 20 ebuilds to update. After 3h thought, I understood the trick:

My first emerges suceeded because they wer minor updates, which used local pre-doanloaded archives, using paches already in /usr/portage ... thats why begin of emerge was ok.

After esync, I remembered that first emerge always does online things; never really cared why, but I remember it does.

I suspect that what made emerge lag very much is that it tried to connect online (at a time I did not care at all if network was ok or not), and seemed to wait 5mn tomeout for many attempts ... when I came back from coffee, I was not prompted any error message: I pressed enter, and saw first ebuild unpack fine.

Followinf emerge, it did not try any more to download any thing before showinf me the list of packages to emerge.

What I complain about is:
- after 120s, emerge should complain it tried to connect to some server (what ever the purpose is)
- tell what it tried to connect to
- what it tried to download
- why

when I relaunched emerge (still with broken network), I got the list of ebuild to merge within usualshort time (10 to 15s). So, now, I am sure emerge tried to do something, did not do it, and will never try to do it again.

What emerge did not do is undone until next esync requires it to do it. I consider this as a virtually potential broken system. But I dont know what is potentially virtually broken.

I also want
- to know how to force doing manually what failed
- an option to allow over-passing what did not suceed.

Now, I have my network back, and I know emerge did not do what it made me wait 20mn for. I remember I could see the cursor turn/spin alternative directions as usual, but for the first time, I have seen it turn at low or high speed even when there were no HDD accesses.

sys-apps/portage-2.1.1

By the mean time, I had to switch from 2005.1 to 2006.1, so, some infos below may not be revealant. I also had to change some use flags in my conf.

Good luck, hope maints will understand what hapened; I am especially concious that this bug takes time to reproduce, and depend upon hazardous conditions that may be difficult to reproduce.

*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***

Gentoo Base System version 1.12.5
Portage 2.1.1 (default-linux/x86/2006.1/desktop, gcc-3.4.6/vanilla, glibc-2.4-r3, 2.6.17-gentoo-r8-Gentoo-moon_08 i686)
=================================================================
System uname: 2.6.17-gentoo-r8-Gentoo-moon_08 i686 mobile AMD Athlon(tm) 4 Processor
Last Sync: Sat, 16 Sep 2006 01:50:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-java/java-config: 1.3.6-r1, 2.0.28-r1
dev-lang/python:     2.3.5, 2.4.3-r3
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_GB.ISO-8859-15"
LC_ALL="en_GB.ISO-8859-15"
LINGUAS="en fr"
MAKEOPTS="-j2"
PKGDIR="/tmp"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/mnt/big"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dfx X a52 aac aalib acpi aim alsa amr amuled ao apache2 apic arts audiofile bash-completion berkdb bidi binfilter bitmap-fonts bl bonjour bootsplash cdda cdparanoia cdr cjk cli cmov cpudetection crypt cups curl cx8 dbus de dga directfb djvu dlloader dmi dmx doc dri dts dv dvb dvd dvdr dvdread dvi dynamic eds elibc_glibc emboss encode esd ethereal examples fam fbcon ffmpeg firefox flac flash fortran fping fpu freetype fxsr gdbm ggi gif gnome gnutls gpm gs gstreamer gtk hal httpd i8x0 icq idea idn ieee1394 imagemagick imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 irc isdnlog jabber jack java javascript jpeg kde kernel_linux lcms libcaca libg++ linguas_en linguas_fr lirc lirc_devices_usbirboy listentcp live lj logrotate lzo mad matrox mca mce mikmod mmx mmxext mono motif mozcalendar mp3 mpeg mplayer msn msr mtrr mtyhtv ncurses network nls no-htdocs nptl nptlonly nsplugin offensive ogg opengl oss pae pam pat pcre perl pge png ppds pppd pse pse36 python qt3 qt4 quicktime rar readline real reflection rss rtc rtsp samba screen sdl sensord sep server session silc skey skins sndfile speex spell spl sse ssl startup-notification stream subtitles svg svga swat symlink tcpd tga theora threads tiff transmitter truetype truetype-fonts tsc type1-fonts udev unicode urandom usb userland_GNU v4l v4l2 vcd video_cards_apm video_cards_chips video_cards_cirrus video_cards_fbdev video_cards_i128 video_cards_i810 video_cards_mga video_cards_nv video_cards_s3 video_cards_s3virge video_cards_sis video_cards_tdfx video_cards_tga video_cards_trident video_cards_v4l video_cards_vesa video_cards_vga video_cards_via vim vlm vme vorbis win32codecs wmf wxwindows x264 xanim xinerama xmms xorg xosd xscreensaver xv xvid xvmc yahoo zeroconf zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-09-19 16:48:07 UTC
        

OK, go to your ISP and ask him to fix your connection. This is none of portage business, and wget already tells you that it failed anyway. If you dislike the delay, set up timeout accordingly.

If you dislike the above suggestion, feel free to submit patches.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

