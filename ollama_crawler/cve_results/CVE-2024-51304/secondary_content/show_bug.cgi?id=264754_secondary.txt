Title: 264754 – sys-kernel/gentoo-sources-2.6.28-r4: mktemp: failed to create file via template «/root/tmp/cpiolist.bWIws3»: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=264754

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 264754
sys-kernel/gentoo-sources-2.6.28-r4: mktemp: failed to create file via template «/root/tmp/cpiolist.bWIws3»: No such file or directory
Last modified: 2010-11-29 02:03:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 264754 
      - sys-kernel/gentoo-sources-2.6.28-r4: mktemp: failed to create file via template «/root/tmp/cpiolist.bWIws3»: No such file or directory


Summary:
sys-kernel/gentoo-sources-2.6.28-r4: mktemp: failed to create file via templa...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-03 12:05 UTC by Pacho Ramos





      Modified:
    
2010-11-29 02:03 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



brant
dabbott









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Pacho Ramos






          2009-04-03 12:05:28 UTC
        

I am makeing a new gentoo instalation and, when running "make all" I get the following:
  CC      init/initramfs.o
  CC      init/calibrate.o
  LD      init/built-in.o
  HOSTCC  usr/gen_init_cpio
  GEN     usr/initramfs_data.cpio.gz
mktemp: failed to create file via template «/root/tmp/cpiolist.bWIws3»: No existe el fichero o el directorio
make[1]: *** [usr/initramfs_data.cpio.gz] Error 1
make: *** [usr] Error 2

It's because I don't have /root/tmp/, then, after running "mkdir /root/tmp" it success. The problem is that I have checked mktemp help and seems that it doesn't have any option like mkdir "-p" for creating needed dirs

Seems that this mktemp invocation comes from:
scripts/gen_initramfs_list.sh:		cpio_list="$(mktemp ${TMPDIR:-/tmp}/cpiolist.XXXXXX)"

Portage 2.1.6.11 (default/linux/amd64/2008.0/desktop, gcc-4.1.2, glibc-2.8_p20080602-r1, 2.6.27.19-desktop-1mnb x86_64)
=================================================================
System uname: Linux-2.6.27.19-desktop-1mnb-x86_64-AMD_Athlon-tm-_64_Processor_3200+-with-glibc2.2.5
Timestamp of tree: Fri, 03 Apr 2009 11:00:17 +0000
app-shells/bash:     3.2_p39
dev-lang/python:     2.5.2-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.63
sys-devel/automake:  1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=k8 -O2 -pipe -msse3"
DISTDIR="/usr/distfiles"
FEATURES="autoaddcvs ccache collision-protect cvs distlocks fixpackages multilib-strict parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.free.fr/mirrors/ftp.gentoo.org"
LANG="es_ES.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="es es_ES en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acl acpi alsa amd64 amr asf audiofile avahi bash-completion beagle berkdb bzip2 bzlib cairo caps cdb cdda cddb cdinstall cdparanoia cdr cli consolekit cpdflib cpudetection cracklib cross crypt css cups curl daap dbus dga dirac divx4linux djvu dlloader dri dts dv dvb dvd dvdr dvdread dvi eds emboss encode epiphany erandom escreen evo evolution exif fam fame fbcon ffmpeg flac foomaticdb fortran ftp fuse galago gb gcj gd ggi gif gimp gimpprint git glib glitz glut glx gnome gnome-keyring gnome-print gphoto2 gpm gsm gstreamer gtk gtk2 hal hddtemp iconv idn imagemagick imlib inotify isdnlog ithreads jabber java java6 jpeg jpeg2k kdeenablefinal kdehiddenvisibility kpathsea ladspa lame latex lcms libnotify lm_sensors logrotate lzma mad madwifi midi mikmod mime mjpeg mmx mmxext mng mono moonlight motif mp3 mpeg mpi mplayer mudflap multilib musepack musicbrainz nas nautilus ncurses nethack network networkmanager nls nocardbus nptl nptlonly ntp nvidia ogg oggvorbis openal opengl openmp pam pango pch pcre pdf perl plotutils png posix postscript ppds pppd python qt3 qt3support qt4 quicktime readline reflection remote rtc scanner schroedinger scrobbler sdl session slang slp sockets speex spell spl sse sse2 sse3 ssl ssse3 startup-notification subversion svg sysfs sysvipc t1lib tcpd theora threads thunderbird tiff timidity totem trayicon truetype unicode usb v4l2 vcd videos vim vorbis wma wmf x264 xattr xcb xcomposite xft xine xml xml2 xorg xpm xulrunner xv xvid xvmc zlib" ALSA_CARDS="via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="es es_ES en_US" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Reproducible: Always




Comment 1


Mike Pagano






          2009-04-04 21:09:35 UTC
        

What's this translated: No existe el fichero o el directorio






Comment 2


Mike Pagano






          2009-04-07 01:32:39 UTC
        

Why is TMPDIR defined as /root/tmp?

If TMPDIR is not defined, does it succeed?





Comment 3


Pacho Ramos






          2009-04-07 10:33:39 UTC
        

(In reply to comment #1)
> What's this translated: No existe el fichero o el directorio
> 

It means "no such file or directory" (I translated it in summary by forgot to change it in description, sorry)

(In reply to comment #2)
> Why is TMPDIR defined as /root/tmp?
> 

I don't know :-(

> If TMPDIR is not defined, does it succeed?
> 

Seems that I am now unable to reproduce. It's strange but closing for now :-/

Thanks for your attention




Comment 4


Brant Gurganus





          2010-11-29 02:03:35 UTC
        

I ran into this issue as well. Were you running in a chroot that might have carried in environment variables? In my case, I use pam_mktemp. That per-user temp directory apparently carried over into my chroot and the Gentoo stage does not supply /tmp/.private/root resulting in that not found issue we encountered.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

