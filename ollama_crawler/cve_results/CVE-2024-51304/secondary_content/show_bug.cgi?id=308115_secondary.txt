Title: 308115 – PyQt4-4.7 fails to compile with 'failed to fix rpath issues'
URL: https://bugs.gentoo.org/show_bug.cgi?id=308115

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 308115
PyQt4-4.7 fails to compile with 'failed to fix rpath issues'
Last modified: 2010-03-07 22:46:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 308115 
      - PyQt4-4.7 fails to compile with 'failed to fix rpath issues'


Summary:
PyQt4-4.7 fails to compile with 'failed to fix rpath issues'
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-03-06 21:23 UTC by Philip Webb





      Modified:
    
2010-03-07 22:46 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



python









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




result of 'emerge --info =dev-python/PyQt4-4.7'

              (pyqt4.d1,3.80 KB,
                text/plain)

            
2010-03-06 21:27 UTC,

            Philip Webb




Details





result of 'emerge -pqv =dev-python/PyQt4-4.7'

              (pyqt4.d2,152 bytes,
                text/plain)

            
2010-03-06 21:27 UTC,

            Philip Webb




Details





build log

              (pyqt4.d3,5.40 KB,
                text/plain)

            
2010-03-06 21:28 UTC,

            Philip Webb




Details





ebuild environment

              (environment,164.18 KB,
                text/plain)

            
2010-03-06 21:29 UTC,

            Philip Webb




Details





final lines of output of 'make'

              (pyqt4.d1,3.30 KB,
                text/plain)

            
2010-03-07 15:10 UTC,

            Philip Webb




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Philip Webb





          2010-03-06 21:23:05 UTC
        

PyQt4-4.7 fails to compile while creating pyqtconfig.py .
It reports : "cannot access w_qpy*.pro: No such file or directory"
& "can't read QtDesigner/Makefile: No such file or directory".
I will attach the requested files separately.


Reproducible: Always

Steps to Reproduce:
1. 'emerge PyQt'
2. wait briefly
3. read error msgs

Actual Results:  
emerge failed

Expected Results:  
emerge should succeed




Comment 1


Philip Webb





          2010-03-06 21:27:03 UTC
        

Created attachment 222351 [details]
result of 'emerge --info =dev-python/PyQt4-4.7'




Comment 2


Philip Webb





          2010-03-06 21:27:47 UTC
        

Created attachment 222353 [details]
result of 'emerge -pqv =dev-python/PyQt4-4.7'




Comment 3


Philip Webb





          2010-03-06 21:28:18 UTC
        

Created attachment 222355 [details]
build log




Comment 4


Philip Webb





          2010-03-06 21:29:16 UTC
        

Created attachment 222359 [details]
ebuild environment




Comment 5


Rafał Mużyło





          2010-03-06 22:45:33 UTC
        

The problem seems to be that while '--enable=QtGui --enable=QtDesigner'
is among configure options,
configure tests decide that those modules should not be built.

Could you check why ?




Comment 6


Philip Webb





          2010-03-06 23:29:28 UTC
        

I hope you don't mean me (smile): I have no idea how to check into configure options or tests.  Hopefully, there is a dev who can help.




Comment 7


Rafał Mużyło





          2010-03-07 00:18:03 UTC
        

(In reply to comment #6)
> I hope you don't mean me (smile): I have no idea how to check into configure
> options or tests.  Hopefully, there is a dev who can help.
> 

No, I meant the other guy with your problem...
Of course I mean you - it fails for you, so you're the only
one who can tell, what's your problem is, otherwise this will head
straight into WORKSFORME.

It seems you need to pass '--verbose' to configure.py options,
at least that much I can tell looking at PyQt4 docs.




Comment 8


Philip Webb





          2010-03-07 00:54:54 UTC
        

So just tell me how to do that & I'll test it for you.
Where are "configure.py options" & how do I pass '--verbose' to them ?
What I see is :

  root:567 ~> emerge -pv PyQt4
  ...
  [ebuild     U ] dev-python/PyQt4-4.7 [4.6.2] USE="X -assistant dbus -debug -doc -examples kde -multimedia% opengl -phonon sql svg webkit -xmlpatterns"

I don't see anything resembling "--verbose".




Comment 9


Philip Webb





          2010-03-07 15:09:21 UTC
        

I looked into the .../work/... dirs & ran 'python2.6 configure.py --verbose'
(there are 2 subdirs & I did the same in each with the same result).
Then I ran 'make' & eventually reached an error (same in each subdir):
I will attach the final lines of the make output.

In Comment 5 , you refer to the configure tests for QtGui QtDesigner .
the .cpp test pgms are very short :

cfgtest_QtDesigner.cpp :

#include <QExtensionFactory>

int main(int, char **)
{
    new QExtensionFactory();
}

cfgtest_QtGui.cpp :

#include <qwidget.h>

int main(int, char **)
{
    new QWidget();
}

Please remember that I'm a user, not a developer: I can investigate & test
as much as you need, but you have to give me fairly precise instructions.




Comment 10


Philip Webb





          2010-03-07 15:10:14 UTC
        

Created attachment 222495 [details]
final lines of output of 'make'




Comment 11


Rafał Mużyło





          2010-03-07 17:26:45 UTC
        

I don't consider myself a programmer either.
What's the output of 'emerge -1pv qt-core qt-gui' ?




Comment 12


Philip Webb





          2010-03-07 17:41:53 UTC
        

root:590 ~> emerge -1pv qt-core qt-gui

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] x11-libs/qt-core-4.6.2-r1  USE="(-aqua) -debug -doc -exceptions* -glib -iconv -optimized-qmake -pch qt3support ssl" 0 kB
[ebuild   R   ] x11-libs/qt-gui-4.6.2  USE="accessibility (-aqua) cups dbus -debug -exceptions -glib* gtk -mng -nas -nis -pch qt3support -raster tiff -xinerama" 0 kB






Comment 13


Rafał Mużyło





          2010-03-07 20:04:02 UTC
        

(In reply to comment #12)
> [ebuild   R   ] x11-libs/qt-core-4.6.2-r1  USE="(-aqua) -debug -doc
> -exceptions* -glib -iconv -optimized-qmake -pch qt3support ssl" 0 kB
> [ebuild   R   ] x11-libs/qt-gui-4.6.2  USE="accessibility (-aqua) cups dbus
> -debug -exceptions -glib* gtk -mng -nas -nis -pch qt3support -raster tiff
> -xinerama" 0 kB
> 
Me not likey that output - seems you've managed somehow to circumvent
the requirement that 'glib' useflag setting in qt-gui should match 
one for qt-core. Same for exceptions.
Also, did you have any *good* reason to disable 'exceptions'
in the first place.
I'd rebuild all of qt splits to make sure nothing else is messed up.




Comment 14


Davide Pesavento (RETIRED)






          2010-03-07 21:58:28 UTC
        

Philip, it appears that you have a non-working QtGui library... somehow you managed to screw up your Qt installation :P

Please re-emerge all x11-libs/qt-* packages you have currently installed.




Comment 15


Philip Webb





          2010-03-07 22:16:18 UTC
        

Thanks to both commentators!

I remerged all 11 Qt pkgs with USE="exceptions glib"
& PyQt4 & kdelibs have compiled successfully.

This bug can be closed & I will comment separately on the other bug 308113 ,
which you can check, if you're still interested.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

