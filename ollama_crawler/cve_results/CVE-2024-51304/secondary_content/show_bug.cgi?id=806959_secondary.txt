Title: 806959 – dev-util/pkgconfig is masked but is needed for kernel compilation
URL: https://bugs.gentoo.org/show_bug.cgi?id=806959

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 806959
dev-util/pkgconfig is masked but is needed for kernel compilation
Last modified: 2021-08-07 10:31:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 806959 
      - dev-util/pkgconfig is masked but is needed for kernel compilation


Summary:
dev-util/pkgconfig is masked but is needed for kernel compilation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-08-07 09:15 UTC by Vasilis Lourdas





      Modified:
    
2021-08-07 10:31 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



bugs
ionen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vasilis Lourdas





          2021-08-07 09:15:47 UTC
        

dev-util/pkgconfig has been masked, but in case it's missing, make {menuconfig|xconfig} for the kernel compilation fails:

xxx /usr/src/linux # make menuconfig
  HOSTCC  scripts/basic/fixdep
  UPD     scripts/kconfig/mconf-cfg
  HOSTCC  scripts/kconfig/mconf.o
  HOSTCC  scripts/kconfig/lxdialog/checklist.o
  HOSTCC  scripts/kconfig/lxdialog/inputbox.o
  HOSTCC  scripts/kconfig/lxdialog/menubox.o
  HOSTCC  scripts/kconfig/lxdialog/textbox.o
  HOSTCC  scripts/kconfig/lxdialog/util.o
  HOSTCC  scripts/kconfig/lxdialog/yesno.o
  HOSTCC  scripts/kconfig/confdata.o
  HOSTCC  scripts/kconfig/expr.o
  HOSTCC  scripts/kconfig/lexer.lex.o
  HOSTCC  scripts/kconfig/menu.o
  HOSTCC  scripts/kconfig/parser.tab.o
  HOSTCC  scripts/kconfig/preprocess.o
  HOSTCC  scripts/kconfig/symbol.o
  HOSTCC  scripts/kconfig/util.o
  HOSTLD  scripts/kconfig/mconf
/usr/lib/gcc/x86_64-pc-linux-gnu/10.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: scripts/kconfig/lxdialog/checklist.o: undefined reference to symbol 'keypad'
/usr/lib/gcc/x86_64-pc-linux-gnu/10.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: /lib64/libtinfow.so.6: error adding symbols: DSO missing from command line
collect2: error: ld returned 1 exit status
make[1]: *** [scripts/Makefile.host:104: scripts/kconfig/mconf] Error 1
make: *** [Makefile:619: menuconfig] Error 2


xxx /usr/src/linux # make xconfig
  HOSTCC  scripts/kconfig/images.o
*
* 'make xconfig' requires 'pkg-config'. Please install it.
*
make[1]: *** [scripts/kconfig/Makefile:211: scripts/kconfig/qconf-cfg] Error 1
make: *** [Makefile:619: xconfig] Error 2


emerge --info
Portage 3.0.20 (python 3.9.6-final-0, default/linux/amd64/17.1/desktop/plasma/systemd, gcc-10.3.0, glibc-2.33-r1, 5.13.8-gentoo x86_64)
=================================================================
System uname: Linux-5.13.8-gentoo-x86_64-Intel-R-_Core-TM-_i5-8600_CPU_@_3.10GHz-with-glibc2.33
KiB Mem:    16257912 total,   6939676 free
KiB Swap:    8388600 total,   8388600 free
Timestamp of repository gentoo: Fri, 06 Aug 2021 20:30:01 +0000
Head commit of repository gentoo: c4ab2809b89d1c2f59b72a8b2c304b57199b47f9
sh bash 5.1_p8
ld GNU ld (Gentoo 2.35.2 p1) 2.35.2
app-shells/bash:          5.1_p8::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.34.0::gentoo
dev-lang/python:          2.7.18_p11::gentoo, 3.6.14::gentoo, 3.7.10_p6::gentoo, 3.8.11::gentoo, 3.9.6_p1::gentoo
dev-lang/rust-bin:        1.53.0::gentoo
dev-util/cmake:           3.20.5::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/sandbox:         2.24::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.11.6-r3::gentoo, 1.15.1-r2::gentoo, 1.16.3-r1::gentoo
sys-devel/binutils:       2.35.2::gentoo
sys-devel/gcc:            10.3.0-r2::gentoo
sys-devel/gcc-config:     2.4::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.10::gentoo (virtual/os-headers)
sys-libs/glibc:           2.33-r1::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-jobs: 1
    sync-rsync-extra-opts:
    sync-rsync-verify-max-age: 24
    sync-rsync-verify-metamanifest: no

local_repo
    location: /usr/local/portage
    masters: gentoo
    priority: 0

stefantalpalaru
    location: /var/lib/layman/stefantalpalaru
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE @FREE bh-luxi Skype-TOS intel-ucode free-noncomm MSttfEULA vmware unRAR MagentaMgOpen CCPL-ShareAlike-1.0 Oracle-BCLA-JavaSE TeamViewer PUEL google-chrome RAR Vivaldi as-is all-rights-reserved MPEG-4 IUPAC-InChi VIGRA CC-Sampling-Plus-1.0 BUILDLIC HRP DUKE3D viber NPSL"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=skylake -mtune=skylake -mmmx -msse -msse2 -msse3 -mssse3 -mcx16 -msahf -mmovbe -maes -mpclmul -mpopcnt -mabm -mfma -mbmi -msgx -mbmi2 -mavx -mavx2 -msse4.2 -msse4.1 -mlzcnt -mrtm -mhle -mrdrnd -mf16c -mfsgsbase -mrdseed -mprfchw -madx -mfxsr -mxsave -mxsaveopt -mclflushopt -mxsavec -mxsaves --param=l1-cache-size=32 --param=l1-cache-line-size=64 --param=l2-cache-size=9216"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.3/ext-active/ /etc/php/apache2-php7.4/ext-active/ /etc/php/cgi-php7.3/ext-active/ /etc/php/cgi-php7.4/ext-active/ /etc/php/cli-php7.3/ext-active/ /etc/php/cli-php7.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/vmware-installer"
CXXFLAGS="-O2 -pipe -march=skylake -mtune=skylake -mmmx -msse -msse2 -msse3 -mssse3 -mcx16 -msahf -mmovbe -maes -mpclmul -mpopcnt -mabm -mfma -mbmi -msgx -mbmi2 -mavx -mavx2 -msse4.2 -msse4.1 -mlzcnt -mrtm -mhle -mrdrnd -mf16c -mfsgsbase -mrdseed -mprfchw -madx -mfxsr -mxsave -mxsaveopt -mclflushopt -mxsavec -mxsaves --param=l1-cache-size=32 --param=l1-cache-line-size=64 --param=l2-cache-size=9216"
DISTDIR="/usr/portage/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs candy cgroup config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://mirror.init7.net/gentoo/ http://mirror.dkm.cz/gentoo/ http://gentoo.mirror.web4u.cz/ http://mirror.leaseweb.com/gentoo/ http://mirror.netcologne.de/gentoo/ http://ftp.fi.muni.cz/pub/linux/gentoo/"
LANG="C"
LDFLAGS="-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed"
LINGUAS="en en_GB en_US el"
MAKEOPTS="-j6"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="256-color X a52 aac acl acpi activities additions admin aio alsa amd64 apache2 apng archive argon2 asf bash-completion bcmath branding bzip2 bzlib cairo calendar caps cdinstall cdr cgmanager cgroups charconv chm chromium cleartype_hinting cli contrast corefonts crypt cryptsetup css ctype cups cupsddk curl dba dbus dcc_video declarative device-mapper dia dmi dri dri3 dts dvd dvdr dvdread ebook effects efi emboss encode epub exif expat extended extensions extras faac faad fam fastcgi fat fbcon ffmpeg fftw filecaps filter firefox3 flac fontconfig foomaticdb fpm freerdp ftp g3dvl gallium gd gdbm gif gimp gimpprint git glib glx gmp gnome-keyring gnomedb gocr gold gphoto2 gpm graphviz gs gstreamer gtk gui hddtemp hotpixels howl http2 hwaccel iconv icu id3tag imagemagick imap imlib infiniband innodb inotify intl io-uring ipv6 iso14755 jabber java java6 javascript jemalloc jpeg jpeg2k json jumbo-build kde kipi kwallet lame lcdfilter lcms leaps-timezone lensfun libass libglvnd libkms libnotify libtirpc libwww lm-sensors lzma mad madwifi maildir mailwrapper maps mariadb matroska mdadm melt mime minizip mmap mmx mmxext motif mozbranding mozdevelop mozilla mozsvg mp3 mp4 mpeg mplayer mpm-worker multilib multiuser mysql mysqli mysqlnd ncurses networkmanager newspr nlpsolver nls no-old-linux nodrm nomalloccheck nptl ntfs ntfsprogs nvidia objc offensive ofx ogg oldpim opcache opengl openmp openssl optimization opus oqgraph osmesa pam pango pcmcia pcntl pcre pdf pdfimport pdo pear pgo phonon php pie plasma plotutils pmu png policykit posix postgres postproc ppds pulseaudio python qemu qml qt4 qt5 quicktime quota rar raw rdesktop rdoc readline redeyes reports romio rpc samba sasl scanner script sddm sdl seccomp server sha512 sharedext sharedmem simplexml smp sna sndfile soap sockets sodium sound speex spell sphinx split-usr spreadsheet sqlite sqlite3 srt sse sse2 sse3 sse4_1 ssl ssse3 startup-notification subtitles subversion svg symlink sysfs syslog systemd sysv-utils sysvipc tcltk tcpd templates terminal tetex theora thin-splines threads tiff tokenizer tordns truetype tty-helpers udev udisks unicode upnp upower urandom usb usbredir userlocales uuid v4l vaapi vda vdpau vhost-net vhost-user-fs video virt-network vmware-tools vmware-tools-linux vmware-tools-windows vncviewer vorbis vpx wddx webm webp widgets windeco wv wxgtk1 wxwidgets x264 x265 xcb xcomposite xetex xft xml xmlreader xmlrpc xmlwriter xmp xorg xpdf-headers xpm xprint xscreensaver xsl xslt xv xvfb xvid xvnc zip zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel" APACHE2_MODULES="alias auth_basic authn_core authn_dbm authn_file authz_core authz_dbm authz_groupfile authz_host authz_owner authz_user autoindex cgid deflate dir env expires filter headers http2 log_config logio mime mime_magic negotiation proxy proxy_fcgi rewrite setenvif socache_shmcb unixd userdir" APACHE2_MPMS="event" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="evdev" KERNEL="linux" L10N="en el" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-minimizer nlpsolver" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres12 postgres13" PYTHON_SINGLE_TARGET="python3_9" PYTHON_TARGETS="python2_7 python3_9 python3_8" QEMU_SOFTMMU_TARGETS="x86_64 i386" QEMU_USER_TARGETS="x86_64" RUBY_TARGETS="ruby26" SANE_BACKENDS="snapscan" USERLAND="GNU" VIDEO_CARDS="intel i965" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RUSTFLAGS




Comment 1


Ionen Wolkens






          2021-08-07 10:10:01 UTC
        

It was masked so it can be replaced by dev-util/pkgconf (another provider of virtual/pkgconfig) and not straight up removed.

Should've replaced it automatically in a world update assuming you don't have custom settings overriding this.




Comment 2


Vasilis Lourdas





          2021-08-07 10:24:10 UTC
        

(In reply to Ionen Wolkens from comment #1)
> It was masked so it can be replaced by dev-util/pkgconf (another provider of
> virtual/pkgconfig) and not straight up removed.
> 
> Should've replaced it automatically in a world update assuming you don't
> have custom settings overriding this.

You're right, I've just emerged pkgconf, which unmerged pkgconfig automatically, and all seems good.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

