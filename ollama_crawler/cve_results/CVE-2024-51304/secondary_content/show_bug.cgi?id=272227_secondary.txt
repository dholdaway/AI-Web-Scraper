Title: 272227 – emerging cmake fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=272227

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 272227
emerging cmake fails
Last modified: 2009-07-14 07:57:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 272227 
      - emerging cmake fails


Summary:
emerging cmake fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-06-02 07:31 UTC by qeldroma





      Modified:
    
2009-07-14 07:57 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



reavertm









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,73.28 KB,
                text/plain)

            
2009-06-02 08:27 UTC,

            qeldroma




Details





cmake_bootstrap.log

              (cmake_bootstrap.log,179.81 KB,
                text/plain)

            
2009-06-02 08:27 UTC,

            qeldroma




Details





eclass-debug.log

              (eclass-debug.log,939 bytes,
                text/plain)

            
2009-06-02 08:27 UTC,

            qeldroma




Details





environment

              (environment,111.01 KB,
                text/plain)

            
2009-06-02 08:28 UTC,

            qeldroma




Details





v2.6.4

              (build.log,138.46 KB,
                text/plain)

            
2009-06-12 13:01 UTC,

            qeldroma




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


qeldroma





          2009-06-02 07:31:06 UTC
        

While in the chroot-environment for a new system, i can't get cmake compiled.
I disabled sandbox and distcc, both did not help.

As i can't install any further without cmake, i would be very glad to see this getting solved soon, it's a business-server...

Here's the shell-printout:
------------------------------------------
/usr/lib/gcc/i686-pc-linux-gnu/4.3.2/include/g++-v4/backward/backward_warning.h:33:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated.                                    
i686-pc-linux-gnu-gcc -O2 -march=i686 -fomit-frame-pointer -pipe -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source   -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk -c /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/cmListFileLexer.c -o cmListFileLexer.o                
i686-pc-linux-gnu-g++ -O2 -march=i686 -fomit-frame-pointer -pipe -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source   -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk -DKWSYS_NAMESPACE=cmsys -c /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/Directory.cxx -o Directory.o                                                                                                                                                           
i686-pc-linux-gnu-g++ -O2 -march=i686 -fomit-frame-pointer -pipe -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source   -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk -DKWSYS_NAMESPACE=cmsys -c /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/Glob.cxx -o Glob.o      
i686-pc-linux-gnu-g++ -O2 -march=i686 -fomit-frame-pointer -pipe -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source   -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk -DKWSYS_NAMESPACE=cmsys -c /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/RegularExpression.cxx -o RegularExpression.o                                                                                                                                           
i686-pc-linux-gnu-g++ -O2 -march=i686 -fomit-frame-pointer -pipe -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source   -I/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk -DKWSYS_NAMESPACE=cmsys -c /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/SystemTools.cxx -o SystemTools.o                                                                                                                                                       
In file included from /usr/lib/gcc/i686-pc-linux-gnu/4.3.2/include/g++-v4/backward/strstream:51,                                                               
                 from /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk/cmsys/ios/sstream:40,
                 from /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/SystemTools.cxx:21:
/usr/lib/gcc/i686-pc-linux-gnu/4.3.2/include/g++-v4/backward/backward_warning.h:33:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated.
In file included from /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Source/kwsys/SystemTools.cxx:21:
/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk/cmsys/ios/sstream: In member function 'void cmsys_ios::istringstream::clear(int)':
/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk/cmsys/ios/sstream:178: error: invalid conversion from 'int' to 'std::_Ios_Iostate'
/tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk/cmsys/ios/sstream:178: error:   initializing argument 1 of 'void std::basic_ios<_CharT, _Traits>::clear(std::_Ios_Iostate) [with _CharT = char, _Traits = std::char_traits<char>]'
gmake: *** [SystemTools.o] Error 1
---------------------------------------------
Error when bootstrapping CMake:
Problem while running gmake
---------------------------------------------
Log of errors: /tmp/portage/dev-util/cmake-2.6.2-r1/work/cmake-2.6.2/Bootstrap.cmk/cmake_bootstrap.log
---------------------------------------------
 *
 * ERROR: dev-util/cmake-2.6.2-r1 failed.
 * Call stack:
 *               ebuild.sh, line   48:  Called src_compile
 *             environment, line 2880:  Called die
 * The specific snippet of code:
 *       ./bootstrap --system-libs --prefix=/usr --docdir=/share/doc/${PF} --datadir=/share/${PN} --mandir=/share/man "$qt_arg" "$par_arg" || die "./bootstrapfailed";
 *  The die message:
 *   ./bootstrap failed

Reproducible: Always

Steps to Reproduce:
1. emerge cmake

Actual Results:  
stops with failure

Expected Results:  
runs through




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2009-06-02 07:40:54 UTC
        

Please post your "emerge --info" and attach the cmake_bootstrap.log file to this bug.




Comment 2


qeldroma





          2009-06-02 08:27:05 UTC
        

Created attachment 193253 [details]
build.log




Comment 3


qeldroma





          2009-06-02 08:27:31 UTC
        

Created attachment 193255 [details]
cmake_bootstrap.log




Comment 4


qeldroma





          2009-06-02 08:27:53 UTC
        

Created attachment 193257 [details]
eclass-debug.log




Comment 5


qeldroma





          2009-06-02 08:28:10 UTC
        

Created attachment 193259 [details]
environment




Comment 6


qeldroma





          2009-06-02 08:36:54 UTC
        

Portage 2.1.4.4 (default/linux/x86/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.17-gentoo-r8_terminalserver i686)
=================================================================
System uname: 2.6.17-gentoo-r8_terminalserver i686 Intel(R) Xeon(TM) CPU 2.66GHz
Timestamp of tree: Tue, 27 Jan 2009 09:35:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13, 2.5.2-r5
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl acpi audiofile bash-completion berkdb bzip2 cli cracklib crypt cups dga dri dvd font-server foomatic foomaticdb gdbm gimpprint gpm iconv imagemagick isdnlog jpeg2k kde ldap lm_sensors mbox midi mmx mng mudflap mysql ncurses nls nptl nptlonly offensive openmp pam pcre perl postgres pppd python rdesktop readline reflection samba session slang snmp spl sse sse2 ssl svg sysfs tcpd tiff ucs2 unicode vnc win32codecs wmf x86 xine xinetd xorg xprint xscreensaver zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="i810 s3virge savage sis r128 radeon fbdev nv s3 vesa fglrx nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 7


Lars Wendler (Polynomial-C) (RETIRED)






          2009-06-02 08:57:26 UTC
        

Although this is a duplicate of bug #250703 I don't mark it as dupe now as the other bug contains no solution.
What I see is that cmake uses gcc-4.3.2 for compilation but your emerge --info shows gcc-4.1.2 as your system compiler.
Furthermore there's already cmake-2.6.4 in the stable branch so can you try that version as well?




Comment 8


qeldroma





          2009-06-02 09:42:11 UTC
        

i fixed the gcc-version and took cmake-2.6.4, but result's the same :(

Some more words to the case:
Different to the gentoo-handbook, if i install gentoo, i don't reboot until i merged all i want in the chroot, so a chroot-setup in my case is inclusive kde, ooffice, etc..

If i reboot, the system is ready for usage.

I have done this in this way i guess more than twenty times, so i am pretty sure, this could not be the reason for the bug. As this is a remote server, i have in either way no other possibilty than doing it like this, the server must work completely after reboot, because it is a terminal-server with ltsp in production.

I hope, this is not the first time, that i'ld have to reboot while merging the whole system?




Comment 9


Tomáš Chvátal (RETIRED)






          2009-06-04 11:44:44 UTC
        

Bug seems legitime. Tho i have no idea how to workaround/fix it.
Reassigning to us.
@user:
you dont have to cc yourself on bug when you are creator, you get mails anyway :]




Comment 10


qeldroma





          2009-06-12 12:40:39 UTC
        

As i can't install a customer server, i changed severity to "blocker".

Any new ideas? Can i help somehow?

Cheers, Florian




Comment 11


Tomáš Chvátal (RETIRED)






          2009-06-12 12:49:30 UTC
        

When i am reading your build log it shows that it:
emerge cmake-2.6.2-r1
and uses gcc-4.3.2.
So please try to use 2.6.4 and paste its build log.




Comment 12


qeldroma





          2009-06-12 13:01:13 UTC
        

As mentioned in Comment#8 i DID try 2.6.4, the result kept the same, so i didn't update the files.





Comment 13


qeldroma





          2009-06-12 13:01:44 UTC
        

Created attachment 194406 [details]
v2.6.4




Comment 14


Tomáš Chvátal (RETIRED)






          2009-06-12 13:15:56 UTC
        

Okey, try to update to gilbc-2.8 please.




Comment 15


qeldroma





          2009-06-12 13:50:45 UTC
        

glibc is glibc-2.8_p20080602-r1




Comment 16


Jorge Manuel B. S. Vicetto (RETIRED)






          2009-06-14 14:03:28 UTC
        

Please post the emerge --info of the host too.
I'm wondering what glibc, gcc and kernel you have in the host and what profile you're using.




Comment 17


qeldroma





          2009-06-14 20:49:45 UTC
        

(chroot)terminal-server / # emerge --info
Portage 2.1.6.11 (default/linux/x86/2008.0, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.17-gentoo-r8_terminalserver i686)
=================================================================
System uname: Linux-2.6.17-gentoo-r8_terminalserver-i686-Intel-R-_Xeon-TM-_CPU_2.66GHz-with-glibc2.0
Timestamp of tree: Tue, 02 Jun 2009 09:00:01 +0000
app-shells/bash:     3.2_p39
dev-lang/python:     2.4.4-r13, 2.5.4-r2
dev-python/pycrypto: 2.0.1-r8
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.63
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="   "
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl acpi audiofile bash-completion berkdb bzip2 cli cracklib crypt cups dga dri dvd font-server foomatic foomaticdb gdbm gimp gimpprint gpm iconv imagemagick isdnlog jpeg jpeg2k kde mbox midi minimal mmx mng mudflap ncurses nls nptl nptlonly offensive opengl openmp pam pcre perl png pppd python qt3support qt4 rdesktop readline reflection samba session slang snmp spamassassin spl sse sse2 ssl svg sysfs tcpd tiff truetype ucs2 unicode vnc win32codecs wmf x86 xcomposite xine xinetd xorg xprint xscreensaver zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="i810 s3virge savage sis r128 radeon fbdev nv s3 vesa ati"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 18


qeldroma





          2009-06-18 07:23:18 UTC
        

Anything new here? Can i help?




Comment 19


qeldroma





          2009-07-14 07:57:13 UTC
        

I finally rebuild the whole system with actual portagetree and the error is gone.

So it's kind of "solved"...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

