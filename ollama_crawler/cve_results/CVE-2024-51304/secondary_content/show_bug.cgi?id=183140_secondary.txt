Title: 183140 – app-emulation/wine-0.9.29 emerge fails with old glibc
URL: https://bugs.gentoo.org/show_bug.cgi?id=183140

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 183140
app-emulation/wine-0.9.29 emerge fails with old glibc
Last modified: 2007-06-26 16:13:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 183140 
      - app-emulation/wine-0.9.29 emerge fails with old glibc


Summary:
app-emulation/wine-0.9.29 emerge fails with old glibc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Wine Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-25 12:13 UTC by dtoch





      Modified:
    
2007-06-26 16:13 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


dtoch





          2007-06-25 12:13:52 UTC
        

when emerging wine-0.9.29 compilation failed

Reproducible: Always

Steps to Reproduce:
1.emerge wine
2.
3.

Actual Results:  
i686-pc-linux-gnu-gcc -c -I. -I. -I../../include -I../../include  -D__WINESRC__  -D_REENTRANT -fPIC -Wall -pipe -fno-strict-aliasing -Wdeclaration-after-statement -Wwrite-strings -Wpointer-arith  -march=pentium4 -O2 -pipe  -o ipstats.o ipstats.c
ipstats.c: In function 'getRouteTable':
ipstats.c:620: error: 'RTF_UP' undeclared (first use in this function)
ipstats.c:620: error: (Each undeclared identifier is reported only once
ipstats.c:620: error: for each function it appears in.)
ipstats.c:623: error: 'RTF_GATEWAY' undeclared (first use in this function)
make[2]: *** [ipstats.o] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-emulation/wine-0.9.29/work/wine-0.9.29/dlls/iphlpapi'
make[1]: *** [iphlpapi] Error 2
make[1]: *** Waiting for unfinished jobs....

...

../../tools/winegcc/winegcc -B../../tools/winebuild -shared ./gdi32.spec dispdib.spec.o gdi.exe.spec.o wing.spec.o bidi16.o dispdib.o env.o gdi16.o metafile16.o wing.o  bidi.o bitblt.o bitmap.o brush.o clipping.o dc.o dib.o driver.o enhmetafile.o enhmfdrv/bitblt.o enhmfdrv/dc.o enhmfdrv/graphics.o enhmfdrv/init.o enhmfdrv/mapping.o enhmfdrv/objects.o font.o freetype.o gdi_main.o gdiobj.o icm.o mapping.o metafile.o mfdrv/bitblt.o mfdrv/dc.o mfdrv/graphics.o mfdrv/init.o mfdrv/mapping.o mfdrv/objects.o mfdrv/text.o opengl.o painting.o palette.o path.o pen.o printdrv.o region.o     version.res   -o gdi32.dll.so  -ladvapi32 -lkernel32 -lntdll   ../../libs/port/libwine_port.a
make[2]: Leaving directory `/var/tmp/portage/app-emulation/wine-0.9.29/work/wine-0.9.29/dlls/gdi32'
make[1]: Leaving directory `/var/tmp/portage/app-emulation/wine-0.9.29/work/wine-0.9.29/dlls'
make: *** [dlls] Error 2

!!! ERROR: app-emulation/wine-0.9.29 failed.


Expected Results:  
normal emerge

sat toch # emerge --info
Portage 2.1.2.7 (default-linux/x86/2007.0, gcc-4.1.1, glibc-2.3.6-r4, 2.6.20-gentoo i686)
=================================================================
System uname: 2.6.20-gentoo i686 Intel(R) Pentium(R) 4 CPU 2.00GHz
Gentoo Base System release 1.12.9
Timestamp of tree: Sat, 23 Jun 2007 20:00:01 +0000
ccache version 2.3 [disabled]
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=pentium4 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.on-lime.ru/gentoo/"
LANG="ru_RU.KOI8-R"
MAKEOPTS="-j3 "
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://192.168.8.60/gentoo-portage"
USE="X acl alsa berkdb bitmap-fonts cli cracklib crypt dri expat fortran gdbm gpm iconv icq imap isdnlog libg++ midi mmx mudflap ncurses nls nptl nptlonly openmp pam pcre pdf perl pppd python readline reflection session spl sse sse2 ssl tcpd truetype-fonts type1-fonts unicode x86 xml xml2 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 i810 imstt mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


SpanKY






          2007-06-25 15:40:57 UTC
        

try the latest version of wine, 0.9.39




Comment 2


dtoch





          2007-06-26 06:33:53 UTC
        

(In reply to comment #1)
> try the latest version of wine, 0.9.39
> 

The same.

After some diggin found

http://bugs.winehq.org/show_bug.cgi?id=4743

http://bugs.winehq.org/show_bug.cgi?id=6084

Have no idea how to use this in gentoo.




Comment 3


dtoch





          2007-06-26 14:44:35 UTC
        

is there some glibc prerequirements?

I built it on another computer where glibc 2.5 at first host it is 2.3.6.




Comment 4


SpanKY






          2007-06-26 16:13:41 UTC
        

so update to latest stable toolchain









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

