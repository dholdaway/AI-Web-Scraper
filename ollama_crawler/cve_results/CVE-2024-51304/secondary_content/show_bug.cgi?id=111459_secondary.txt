Title: 111459 – media-libs/nas-1.7-r1 fails to compile when using the modularized xorg 7
URL: https://bugs.gentoo.org/show_bug.cgi?id=111459

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 111459
media-libs/nas-1.7-r1 fails to compile when using the modularized xorg 7
Last modified: 2006-01-24 22:35:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 111459 
      - media-libs/nas-1.7-r1 fails to compile when using the modularized xorg 7


Summary:
media-libs/nas-1.7-r1 fails to compile when using the modularized xorg 7
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

113523 115501

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-11-04 03:25 UTC by Mike Lothian





      Modified:
    
2006-01-24 22:35 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



amax
loial
portage
vivo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mike Lothian





          2005-11-04 03:25:23 UTC
        

The ebuild fails to find Imake.tmpl dispite it being installed

Reproducible: Always
Steps to Reproduce:
1. emerge nas
2.
3.

Actual Results:  
Ebuild fails

Expected Results:  
Nas compiles correctly

quark fireburn # emerge nas
Calculating dependencies ...done!
>>> emerge (1 of 1) media-libs/nas-1.7-r1 to /
>>> md5 files   ;-) nas-1.7.ebuild
>>> md5 files   ;-) nas-1.5-r1.ebuild
>>> md5 files   ;-) nas-1.6c-r2.ebuild
>>> md5 files   ;-) nas-1.6.ebuild
>>> md5 files   ;-) nas-1.7-r1.ebuild
>>> md5 files   ;-) files/nas-1.5-libaudioMakefile.patch
>>> md5 files   ;-) files/nas-1.7-header.patch
>>> md5 files   ;-) files/nas.conf.d
>>> md5 files   ;-) files/nas.init.d
>>> md5 files   ;-) files/digest-nas-1.5-r1
>>> md5 files   ;-) files/digest-nas-1.7-r1
>>> md5 files   ;-) files/nas-1.7-gcc4.patch
>>> md5 files   ;-) files/nas-1.6c-header.patch
>>> md5 files   ;-) files/digest-nas-1.6c-r2
>>> md5 files   ;-) files/digest-nas-1.6
>>> md5 files   ;-) files/digest-nas-1.7
>>> md5 src_uri ;-) nas-1.7.src.tar.gz
>>> Unpacking source...
>>> Unpacking nas-1.7.src.tar.gz to /var/tmp/portage/nas-1.7-r1/work
 * Applying nas-1.7-header.patch ...                                           
                                                                               
                                                          [ ok ]
 * Applying nas-1.7-gcc4.patch ...                                             
                                                                               
                                                          [ ok ]
>>> Source unpacked.
mv -f Makefile Makefile.bak
imake -DUseInstalled -I/usr/lib/X11/config

Building Network Audio System sample implementation

Fri Nov  4 11:24:18 GMT 2005

make - --jobserver-fds=3,4 -j Makefiles
make[1]: Entering directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
making Makefiles in include...
        mv -f Makefile Makefile.bak
make[2]: Entering directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
Imakefile.c:34: error: Imake.tmpl: No such file or directory
imake: Exit code 1.
  Stop.
make[2]: *** [include/Makefile] Error 1
make[2]: Leaving directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
make[1]: [Makefiles] Error 2 (ignored)
make[1]: Leaving directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
make - --jobserver-fds=3,4 -j cleandir
make[1]: Entering directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
rm -f *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log
MakeOut   "#"*
make[1]: Leaving directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
make - --jobserver-fds=3,4 -j includes
make[1]: Entering directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
including in ./include...
make[2]: Entering directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7/include'
make[2]: *** No rule to make target `includes'.  Stop.
make[2]: Leaving directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7/include'
make[1]: *** [includes] Error 2
make[1]: Leaving directory `/var/tmp/portage/nas-1.7-r1/work/nas-1.7'
make: *** [World] Error 2

!!! ERROR: media-libs/nas-1.7-r1 failed.
!!! Function src_compile, Line 33, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.

quark fireburn # emerge info
Portage 2.0.53_rc7 (default-linux/x86/2005.0, gcc-4.0.2,
glibc-2.3.5.20050722-r0, 2.6.14-gentoo i686)
=================================================================
System uname: 2.6.14-gentoo i686 AMD Athlon(TM) XP 2500+
Gentoo Base System version 1.12.0_pre9
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.13
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.91.0.3
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -mtune=athlon-xp -Os -mfpmath=sse,387
-fvisibility-inlines-hidden -w -fPIC"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/env.d /usr/kde/2/share/config /usr/kde/3.5/env
/usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -Os -mfpmath=sse,387
-fvisibility-inlines-hidden -w -fPIC -fpermissive"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.blueyonder.co.uk/
http://www.mirror.ac.uk/mirror/distro.ibiblio.org/pub/linux/distributions/gentoo/"
LANG="en_GB.ISO8859-1"
LC_ALL="en_GB.ISO8859-1"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -z combreloc -Wl,--enable-new-dtags -Wl,--relax"
LINGUAS="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/fireburn/Portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 3ds X a52 aac aalib acpi alsa apm arts artswrappersuid
artworkextra async audiofile automount avi bash-completion berkdb bidi
bitmap-fonts bl bluetooth browserplugin bzlib cairo cdda cddb cdinstall cdio
cdparanoia cdr css cups curl custom-cflags dbus dga directfb dmx dpms dts dvb
dvd dvdr dvdread emboss encode esd faad fam fame fbcon fbsplash ffmpeg flac
flash foomaticdb fortran freetype freetype2 gdbm gif glibc-omitfp glitz glut
gphoto2 gpm gstreamer gtk gtk2 hal imagemagick imlib irmc ithreads java
javascript joystick jpeg jpeg2k kde kdeenablefinal kdgraphics lcms libg++ libwww
linuxthreads-tls lm_sensors mad mikmod mmx mmxext mng motif mozcalendar
mozdevelop mozilla mozpango mozsvg mp3 mpeg mpeg2 msn musepack musicbrainz
ncurses network no_wxgtk1 nomalloccheck nptl nptlonly nsplugin nv nvidia
offensive ogg oggvorbis openal opengl pam pam_chroot pam_console pdflib perl pic
png portaudio python qt quicktime rdesktop readline real remote rtc samba
sametime sdl sensord slang sndfile speex spell sse ssl stream svga sysfs syslog
tcltk tcpd tga theora threads tidy tiff transcode truetype truetype-fonts
type1-fonts udev userlocales v4l vcd vcdimager vidix vorbis wifi win32codecs wmf
x86 xine xml xml2 xmms xprint xscreensaver xv xvid xvmc yv12 zeroconf zlib
video_cards_nv linguas_en_GB userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET

This bug prevents openoffice 2 from being build. I have imake and the cf files
installed.




Comment 1


Jakub Moc (RETIRED)






          2005-11-04 03:32:27 UTC
        

Please, don't mark bugs about package.masked ebuilds as a blocker. 

Also, just noting - *remove* -fvisibility-inlines-hidden and -fPIC from your
C[XX]FLAGS, the former is known to be broken and the later is just a plain bad
idea(tm). We also don't support LDFLAGS such as yours.




Comment 2


Anthony Parsons





          2005-11-04 06:17:49 UTC
        

I've got the same error here.

Also, OpenOffice 2.0 includes its own copy of nas so it gets the same error.




Comment 3


Kenton Groombridge





          2005-11-04 09:27:07 UTC
        

I got nas to build by emerging:

x11-misc/makedepend
x11-misc/xmkmf
app-text/rman

and in /usr/bin

ln -s makedepend gccmakedep




Comment 4


Mike Lothian





          2005-11-07 13:50:39 UTC
        

That fix didn't appear to fix it for me unfortunatly




Comment 5


Diego Elio Pettenò (RETIRED)






          2005-11-24 17:16:24 UTC
        

*** Bug 113523 has been marked as a duplicate of this bug. ***




Comment 6


Mike Lothian





          2005-12-02 18:24:44 UTC
        

Making a directory /usr/X11R6 and then symlinking

cd /usr
mkdir X11R6
cd X11R6
ln -s ../bin bin
ln -s../include include
ln -s ../lib lib
ln -s ../man man

This fixes the problem fo me

OpenOffice here I come!!




Comment 7


Tres 'RiverRat' Melton





          2005-12-12 17:48:10 UTC
        

emerging rman, x11-misc/xmkmf, x11-misc/gccmakedep-0.99.0 seems to fix
everything for me. 




Comment 8


Jakub Moc (RETIRED)






          2005-12-13 23:50:37 UTC
        

*** Bug 115501 has been marked as a duplicate of this bug. ***




Comment 9


Jon





          2005-12-31 14:38:52 UTC
        

@Kenton Groombridge and RiverRat:
You both mention the program x11-misc/xmkmf, but I can't find it anywhere in portage. Is this the right name.

Thanks




Comment 10


Michael Cramer





          2005-12-31 14:51:21 UTC
        

it's imake; xmkmf is now included there




Comment 11


Jon





          2006-01-01 08:24:13 UTC
        

Sweet. Thanks. :) It works now. So, will those packages become a dependency for nas if modular xorg is detected, or will they be installed by default later on since a lot of things seem to depend on them?




Comment 12


Nguyen Thai Ngoc Duy (RETIRED)






          2006-01-03 12:05:47 UTC
        

In addition to imake, it also requires gccmakdedep and rman to build.  I don't think it needs those to run though.




Comment 13


Marcelo Goes (RETIRED)






          2006-01-24 17:25:08 UTC
        

It seems media-libs/nas-1.7-r1 has the missing depends.
Just compiled it in my modular X chroot and they were pulled in as they should.
Please reopen if this is still a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

