Title: 676176 – sys-devel/llvm-6.0.1 - .../work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp:63:1: internal compiler error: Aborted
URL: https://bugs.gentoo.org/show_bug.cgi?id=676176

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 676176
sys-devel/llvm-6.0.1 - .../work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp:63:1: internal compiler error: Aborted
Last modified: 2019-01-27 19:19:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 676176 
      - sys-devel/llvm-6.0.1 - .../work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp:63:1: internal compiler error: Aborted


Summary:
sys-devel/llvm-6.0.1 - .../work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp:63...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-01-24 19:11 UTC by Maurice Volaski





      Modified:
    
2019-01-27 19:19 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



llvm
mgorny
slyfox









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,357.68 KB,
                text/plain)

            
2019-01-24 19:11 UTC,

            Maurice Volaski




Details





emerge info

              (info,5.35 KB,
                text/plain)

            
2019-01-24 19:12 UTC,

            Maurice Volaski




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Maurice Volaski





          2019-01-24 19:11:19 UTC
        

Created attachment 562698 [details]
build.log

Freshly installed Gentoo 32-bit and trying to emerge X11 resulted in

FAILED: lib/CodeGen/CMakeFiles/LLVMCodeGen.dir/ScheduleDAG.cpp.o 
/usr/bin/i686-pc-linux-gnu-g++ -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -Ilib/CodeGen -I/var/tmp/portage/sys-devel/llvm-6.0.1/work/llvm-6.0.1.src/lib/CodeGen -I/usr/include/libxml2 -Iinclude -I/var/tmp/portage/sys-devel/llvm-6.0.1/work/llvm-6.0.1.src/include  -DNDEBUG -O2 -march=i686 -pipe -mno-bmi -fPIC -fvisibility-inlines-hidden -Werror=date-time -std=c++11 -Wall -W -Wno-unused-parameter -Wwrite-strings -Wcast-qual -Wno-missing-field-initializers -pedantic -Wno-long-long -Wno-maybe-uninitialized -Wdelete-non-virtual-dtor -Wno-comment -ffunction-sections -fdata-sections -fPIC -MD -MT lib/CodeGen/CMakeFiles/LLVMCodeGen.dir/ScheduleDAG.cpp.o -MF lib/CodeGen/CMakeFiles/LLVMCodeGen.dir/ScheduleDAG.cpp.o.d -o lib/CodeGen/CMakeFiles/LLVMCodeGen.dir/ScheduleDAG.cpp.o -c /var/tmp/portage/sys-devel/llvm-6.0.1/work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp
double free or corruption (out)
/var/tmp/portage/sys-devel/llvm-6.0.1/work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp: In member function ‘void llvm::ScheduleDAG::clearDAG()’:
/var/tmp/portage/sys-devel/llvm-6.0.1/work/llvm-6.0.1.src/lib/CodeGen/ScheduleDAG.cpp:63:1: internal compiler error: Aborted
 }
 ^




Comment 1


Maurice Volaski





          2019-01-24 19:12:54 UTC
        

Created attachment 562700 [details]
emerge info




Comment 2


Michał Górny









          2019-01-25 09:47:02 UTC
        

Normally I'd guess you ran out of memory but that 'double free' looks like legitimate bug.




Comment 3


Sergei Trofimovich (RETIRED)






          2019-01-25 22:53:26 UTC
        

Is failure reproducible for you or was it a one-off?

> double free or corruption (out)
This is heap corruption detected by glibc at:
    https://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=feaf7ee0bf362ed86375c290d7f55a75c3d2edcf;hb=HEAD#l4319 suggests it's

I'll try to reproduce locally.




Comment 4


Sergei Trofimovich (RETIRED)






          2019-01-26 16:38:55 UTC
        

(In reply to Sergei Trofimovich from comment #3)
> I'll try to reproduce locally.

I did not succeed.

We'll need more data or you'll need to investigate yourself. A few avenues to explore:
0. Post your 'gcc -v'. I'll try bring the setup closer to yours.
1. Make sure your RAM is intact by running sys-apps/memtest86+ or similar.
2. Check if you can reproduce the same crash by rerunning emerge
3. Check if you can reproduce the crash by rerunning failed g++ command (might require multiple runs).

If you are lucky with [3.] you can extract selfcontained example: https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide




Comment 5


Maurice Volaski





          2019-01-27 18:26:59 UTC
        

I rebooted and this time it compiled fine. I have no explanation. I'm running inside VitualBox on a Mac Pro with ECC RAM.




Comment 6


Sergei Trofimovich (RETIRED)






          2019-01-27 19:19:07 UTC
        

Aha. Must be some software corruption then. Either in Gentoo or in hypervisor.

Let's close this bug as WORKSFORME as there are no leads to follow. And start afresh in a new bug if it happens again.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

