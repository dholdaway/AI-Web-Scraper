Title: 587634 – dev-go/blackfriday-1.2_p20150720 - scanelf: Invalid ar entry
URL: https://bugs.gentoo.org/show_bug.cgi?id=587634

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 587634
dev-go/blackfriday-1.2_p20150720 - scanelf: Invalid ar entry
Last modified: 2017-07-20 19:37:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 587634 
      - dev-go/blackfriday-1.2_p20150720 - scanelf: Invalid ar entry


Summary:
dev-go/blackfriday-1.2_p20150720 - scanelf: Invalid ar entry
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

William Hubbs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-06-30 22:56 UTC by Martin Mokrejš





      Modified:
    
2017-07-20 19:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



slyfox









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,3.38 KB,
                text/plain)

            
2016-07-13 12:54 UTC,

            Martin Mokrejš




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Mokrejš





          2016-06-30 22:56:33 UTC
        

Maybe this is not a problem, but who knows ...

>>> Emerging (2 of 8) dev-go/blackfriday-1.2_p20150720::gentoo
 * blackfriday-1.2_p20150720.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                                                                                                                                                                [ ok ]
>>> Unpacking source...
>>> Source unpacked in /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work
>>> Preparing source in /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720 ...
>>> Source prepared.
>>> Configuring source in /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720 ...
>>> Source configured.
>>> Compiling source in /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720 ...
env GOPATH=/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720:/usr/lib/go-gentoo go build -v -work -x github.com/russross/blackfriday
WORK=/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/temp/go-build735573925
github.com/russross/blackfriday
mkdir -p $WORK/github.com/russross/blackfriday/_obj/
mkdir -p $WORK/github.com/russross/
cd /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/src/github.com/russross/blackfriday
/usr/lib/go/pkg/tool/linux_amd64/6g -o $WORK/github.com/russross/blackfriday.a -trimpath $WORK -p github.com/russross/blackfriday -complete -D _/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/src/github.com/russross/blackfriday -I $WORK -I /usr/lib/go-gentoo/pkg/linux_amd64 -pack ./block.go ./html.go ./inline.go ./latex.go ./markdown.go ./smartypants.go
>>> Source compiled.
>>> Test phase [not enabled]: dev-go/blackfriday-1.2_p20150720

>>> Install blackfriday-1.2_p20150720 into /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/image/ category dev-go
env GOPATH=/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720:/usr/lib/go-gentoo go install -v -work -x github.com/russross/blackfriday
WORK=/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/temp/go-build513749867
github.com/russross/blackfriday
mkdir -p $WORK/github.com/russross/blackfriday/_obj/
mkdir -p $WORK/github.com/russross/
cd /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/src/github.com/russross/blackfriday
/usr/lib/go/pkg/tool/linux_amd64/6g -o $WORK/github.com/russross/blackfriday.a -trimpath $WORK -p github.com/russross/blackfriday -complete -D _/scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/src/github.com/russross/blackfriday -I $WORK -I /usr/lib/go-gentoo/pkg/linux_amd64 -pack ./block.go ./html.go ./inline.go ./latex.go ./markdown.go ./smartypants.go
mkdir -p /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/pkg/linux_amd64/github.com/russross/
mv $WORK/github.com/russross/blackfriday.a /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/work/blackfriday-1.2_p20150720/pkg/linux_amd64/github.com/russross/blackfriday.a
>>> Completed installing blackfriday-1.2_p20150720 into /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720/image/

 * Final size of build directory: 1064 KiB
 * Final size of installed tree: 1072 KiB

scanelf: Invalid ar entry

>>> Installing (2 of 8) dev-go/blackfriday-1.2_p20150720::gentoo




Comment 1


Mike Gilbert






          2016-07-13 00:38:13 UTC
        

Please attach a build log and provide emerge --info.




Comment 2


Martin Mokrejš





          2016-07-13 12:54:16 UTC
        

Created attachment 440572 [details]
build.log




Comment 3


Martin Mokrejš





          2016-07-13 12:56:04 UTC
        

 # emerge --info
Portage 2.2.28 (python 2.7.11-final-0, default/linux/amd64/13.0, gcc-5.3.0, glibc-2.21-r1, 4.6.3-default-pciehp x86_64)
=================================================================
System uname: Linux-4.6.3-default-pciehp-x86_64-Intel-R-_Core-TM-_i7-2640M_CPU_@_2.80GHz-with-gentoo-2.2
KiB Mem:    16354296 total,    188152 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Mon, 11 Jul 2016 08:30:01 +0000
sh bash 4.3_p42-r2
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
app-shells/bash:          4.3_p42-r2::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.20.2-r1::gentoo
dev-lang/python:          2.7.11-r1::gentoo, 3.4.3-r7::gentoo, 3.5.1-r2::gentoo
dev-util/cmake:           3.3.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.21::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r1::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.12.6::gentoo, 1.13.4::gentoo, 1.14::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.3.6-r1::gentoo, 4.4.7::gentoo, 4.6.4::gentoo, 4.7.4::gentoo, 4.8.5::gentoo, 4.9.3::gentoo, 5.3.0::gentoo
sys-devel/gcc-config:     1.8::gentoo
sys-devel/libtool:        2.4.6-r1::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.6::gentoo (virtual/os-headers)
sys-libs/glibc:           2.21-r1::gentoo
Repositories:

gentoo
    location: /scratch/usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

science
    location: /home/mmokrejs/proj/sci
    masters: gentoo
    priority: 0

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 1

layman
    location: /var/lib/layman
    masters: gentoo
    priority: 2

haskell
    location: /var/lib/layman/haskell
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 sun-bcla-java-vm Oracle-BCLA-JavaSE IBM-J1.6 skype-eula Nero-EULA-US AdobeFlash-10.3 skype-4.0.0.7-copyright AdobeFlash-11.x"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -maes -mpclmul -mpopcnt -mavx -march=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/stunnel/stunnel.conf /usr/lib64/libreoffice/program/sofficerc /usr/share/easy-rsa /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.2/conf /var/bind /var/lib/hsqldb /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/apache2-php5.5/ext-active/ /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -maes -mpclmul -mpopcnt -mavx -march=native"
DISTDIR="/scratch/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news noclean nostrip parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.wheel.sk/ http://ftp.fi.muni.cz/pub/linux/gentoo/ http://gentoo.mirror.web4u.cz/ rsync://gentoo.mirror.dkm.cz/gentoo/ ftp://gentoo.mirror.web4u.cz/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/scratch/var/tmp"
USE="X acpi alsa amd64 amr apache apache2 apulse avx berkdb bindist bluetooth boost bzip2 cairo cgi cli coin consolekit cracklib crypt cryptlib cups cxx dbus device-mapper dhcp directfb dri drm dvd emboss encode fax fbcon ffmpeg flac fontconfig fortran gbm gd gdbm geoip gimp glpk gnutls gpm gtk hal hpijs hwdb iconv id3tag imaging innodb java javascript jce jpeg jpg js jscript keymap ladspa lapack laptop lcms libnotify lm_sensors mad matroska mmx mmxext modules mpi mpich2 multilib mysql ncurses nfs nls nptl nptlonly nscd nsplugin ntfsprogs ocr ogg opengl openmp pam parport pcre pdf perl php png policykit polkit ppds pppd python qt3support readline rendering resolvconf scanner seccomp server session slideshow sndfile sqlite sse sse2 sse3 sse4_1 sse4_2 ssl ssse3 suexec svg syslog tcl tcpd threads tiff tk truetype udev unicode usb v4l v4l2 vim-syntax vnc wavpack wifi x11 xattr xcb xml xorg xrandr xv xvid xvmc zlib" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="alias authz_host auth_basic auth_digest cgi cgid deflate dir env filter include info mem_cache mime mime_magic negotiation remoteip setenvif status userdir vhost_alias rewrite usertrack cache file_cache disk_cache charset_lite log_config log_forensic" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" DRACUT_MODULES="crypt crypt-gpg" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en en_US en_GB cs cz" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4 python3_5" RUBY_TARGETS="ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="vesa vmware fbdev intel i915 i965" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 4


Martin Mokrejš





          2016-07-13 12:58:13 UTC
        

# scanelf --version
pax-utils-v1.0.3: 
scanelf written for Gentoo by <solar and vapier @ gentoo.org>
#

# find /scratch/var/tmp/portage/dev-go/blackfriday-1.2_p20150720 -type f | while read f; do grep scanelf "$f"; done
scanelf: Invalid ar entry
#

Probably inherited from some class, do not know where to look for the caller myself.




Comment 5


Sergei Trofimovich (RETIRED)






          2017-07-09 09:35:20 UTC
        

Does it still happen with modern golang?




Comment 6


Martin Mokrejš





          2017-07-20 19:37:10 UTC
        

I just re-emerged dev-go/blackfriday-1.4::gentoo under current dev-lang/go-1.8.1::gentoo I did not get the same error. Then I upgraded to dev-lang/go-1.8.3::gentoo and again re-emerged dev-go/blackfriday-1.4::gentoo and I did not trigger the error message either.

I wonder if this was maybe fixed by https://gitweb.gentoo.org/dev/heroxbd.git/commit/?id=ccaf4051612bbff71447bdcdb9a9b888bffbbbbc . I think was I involved in some thread triggered via Gentoo:Prefix or Gentoo::RAP for which heroxbd@g.o made a patch related to automatic scanelf execution "as needed". But I am not sure this is the actual change.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

