Title: 128375 – app-emulation/qemu-user-0.8.0 fails with FEATURES="test"
URL: https://bugs.gentoo.org/show_bug.cgi?id=128375

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 128375
app-emulation/qemu-user-0.8.0 fails with FEATURES="test"
Last modified: 2007-06-01 13:33:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 128375 
      - app-emulation/qemu-user-0.8.0 fails with FEATURES="test"


Summary:
app-emulation/qemu-user-0.8.0 fails with FEATURES="test"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Luca Barbato








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-01 05:47 UTC by Philipp Riegger





      Modified:
    
2007-06-01 13:33 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Philipp Riegger





          2006-04-01 05:47:40 UTC
        

emerge -v qemu:
<quote>
These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ] app-emulation/qemu-user-0.8.0  0 kB 
[ebuild  N    ] app-emulation/qemu-softmmu-0.8.0  USE="sdl -kqemu" 0 kB 
[ebuild  N    ] app-emulation/qemu-0.8.0  0 kB 

Total size of downloads: 0 kB
</quote>

Error-message:
<quote>
>>> Test phase [test]: app-emulation/qemu-user-0.8.0
for d in arm-user armeb-user i386-user ppc-user sparc-user; do \
make -C $d all || exit 1 ; \
        done
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/arm-user'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/arm-user'
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/armeb-user'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/armeb-user'
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/i386-user'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/i386-user'
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/ppc-user'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/ppc-user'
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/sparc-user'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/sparc-user'
make -C tests test
make[1]: Entering directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/tests'
gcc -O2 -Wall -O2 -g   -static -o test-i386 \
              test-i386.c test-i386-code16.S test-i386-vm86.S -lm
test-i386.c:706: warning: integer constant is too large for "long" type
test-i386.c:707: warning: integer constant is too large for "long" type
test-i386.c: In function `test_fcvt':
test-i386.c:809: warning: dereferencing type-punned pointer will break strict-aliasing rules
test-i386.c:810: warning: dereferencing type-punned pointer will break strict-aliasing rules
test-i386.c: In function `test_floats':
test-i386.c:968: warning: integer constant is too large for "long" type
test-i386.c:969: warning: integer constant is too large for "long" type
test-i386.c: In function `test_xchg':
test-i386.c:1143: warning: integer constant is too large for "long" type
test-i386.c:1145: warning: integer constant is too large for "long" type
test-i386.c:1148: warning: integer constant is too large for "long" type
test-i386.c: In function `test_fcvt':
test-i386.c:816: warning: use of memory input without lvalue in asm operand 0 is deprecated
test-i386.c: In function `test_xchg':
test-i386.c:1085: warning: matching constraint does not allow a register
test-i386.c:1085: warning: matching constraint does not allow a register
test-i386.c:1086: warning: matching constraint does not allow a register
test-i386.c:1086: warning: matching constraint does not allow a register
test-i386.c:1087: warning: matching constraint does not allow a register
test-i386.c:1087: warning: matching constraint does not allow a register
test-i386.c:1106: warning: matching constraint does not allow a register
test-i386.c:1106: warning: matching constraint does not allow a register
test-i386.c:1107: warning: matching constraint does not allow a register
test-i386.c:1107: warning: matching constraint does not allow a register
test-i386.c:1108: warning: matching constraint does not allow a register
test-i386.c:1108: warning: matching constraint does not allow a register
test-i386.c:1127: warning: matching constraint does not allow a register
test-i386.c:1127: warning: matching constraint does not allow a register
test-i386.c:1128: warning: matching constraint does not allow a register
test-i386.c:1128: warning: matching constraint does not allow a register
test-i386.c:1129: warning: matching constraint does not allow a register
test-i386.c:1129: warning: matching constraint does not allow a register
test-i386.c:1134: warning: matching constraint does not allow a register
test-i386.c:1134: warning: matching constraint does not allow a register
test-i386.c:1135: warning: matching constraint does not allow a register
test-i386.c:1135: warning: matching constraint does not allow a register
test-i386.c:1136: warning: matching constraint does not allow a register
test-i386.c:1136: warning: matching constraint does not allow a register
test-i386.c: In function `test_segs':
test-i386.c:1274: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1275: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1276: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1277: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1279: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1280: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1281: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386.c:1282: warning: use of memory input without lvalue in asm operand 2 is deprecated
test-i386-code16.S: Assembler messages:
test-i386-code16.S:47: Warning: indirect lcall without `*'
test-i386-code16.S:49: Warning: indirect ljmp without `*'
test-i386-vm86.S:104:9: warning: no newline at end of file
./test-i386 > test-i386.ref
../i386-user/qemu-i386 test-i386 > test-i386.out
set_thread_area failed when setting up thread-local storage
qemu: uncaught target signal 11 (Segmentation fault) - exiting
make[1]: *** [test] Error 245
make[1]: Leaving directory `/var/tmp/portage/qemu-user-0.8.0/work/qemu-0.8.0/tests'
make: *** [test] Error 2

!!! ERROR: app-emulation/qemu-user-0.8.0 failed.
Call stack:
  ebuild.sh, line 1526:   Called dyn_test
  ebuild.sh, line 973:   Called src_test
  ebuild.sh, line 610:   Called die

!!! Make test failed. See above for details.
!!! If you need support, post the topmost build error, and the call stack if relevant.   
</quote>

emerge --info:
<quote>
Portage 2.1_pre7-r3 (default-linux/x86/2005.1, gcc-3.4.5, glibc-2.3.5-r2, 2.6.14-hardened-r6 i686)
=================================================================
System uname: 2.6.14-hardened-r6 i686 AMD Athlon(tm) XP 2200+
Gentoo Base System version 1.12.0_pre16
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -m3dnow -msse -mfpmath=sse -mmmx -fforce-addr -maccumulate-outgoing-args -fprefetch-loop-arrays -mno-tls-direct-seg-refs"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -m3dnow -msse -mfpmath=sse -mmmx -fforce-addr -maccumulate-outgoing-args -fprefetch-loop-arrays -mno-tls-direct-seg-refs"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache confcache distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict test userpriv usersandbox"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://gentoo.inode.at/"
LC_ALL="en_US.UTF-8"
LINGUAS="de en"
MAKEOPTS="-j2 -s"
PKGDIR="/usr/portage/packages/athlon-xp"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://192.168.0.4/gentoo-portage"
USE="x86 3dnow X aac aalib alsa apm arts async audiofile berkdb bitmap-fonts bzip2 cairo cdr crypt cups curl dbus doc dvd dvdread encode esd expat fame ffmpeg firefox flac gcj gdbm gif gnome gpm graphviz gs gstreamer gtk gtkhtml idn imagemagick imlib ipv6 java jce jpeg kde kdeenablefinal kdexdeltas lcms lzo mad matroska mikmod mmx motif mp3 mpeg musepack ncurses nls nptl ogg openal opengl oss pam pcre perl png python qt quicktime readline samba sdl sse ssl syslog tcltk tcpd test tetex theora threads tiff truetype truetype-fonts type1-fonts unicode vorbis win32codecs wmf xml xml2 xmms xprint xv xvid zlib elibc_glibc kernel_linux linguas_de linguas_en userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LDFLAGS
</quote>




Comment 1


Philipp Riegger





          2007-06-01 13:33:08 UTC
        

I can't reproduce it anymore and i'm using 0.9.0 now which works.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

