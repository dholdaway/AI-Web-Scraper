Title: 527596 – configure: as: error while loading shared libraries: /usr/lib64/binutils/x86_64-pc-linux-gnu/2.24/libbfd-2.24.so: invalid ELF header
URL: https://bugs.gentoo.org/show_bug.cgi?id=527596

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 527596
configure: as: error while loading shared libraries: /usr/lib64/binutils/x86_64-pc-linux-gnu/2.24/libbfd-2.24.so: invalid ELF header
Last modified: 2014-11-01 01:25:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 527596 
      - configure: as: error while loading shared libraries: /usr/lib64/binutils/x86_64-pc-linux-gnu/2.24/libbfd-2.24.so: invalid ELF header


Summary:
configure: as: error while loading shared libraries: /usr/lib64/binutils/x86_...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-10-31 10:26 UTC by Tim





      Modified:
    
2014-11-01 01:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (file_527596.txt,4.49 KB,
                text/plain)

            
2014-10-31 10:26 UTC,

            Tim




Details





emerge --info '=net-misc/wget-1.16::gentoo'

              (file_527596.txt,4.95 KB,
                text/plain)

            
2014-10-31 10:27 UTC,

            Tim




Details





emerge -pqv '=net-misc/wget-1.16::gentoo'

              (file_527596.txt,102 bytes,
                text/plain)

            
2014-10-31 10:28 UTC,

            Tim




Details





/var/tmp/portage/net-misc/wget-1.16/work/wget-1.16/config.log

              (file_527596.txt,29.17 KB,
                text/plain)

            
2014-10-31 10:47 UTC,

            Tim




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tim





          2014-10-31 10:26:19 UTC
        

Created attachment 387862 [details]
emerge --info

Hi,

I tried to emerge several packages, all fail with the same error message. attached is an example of "emerge --oneshot wget":

host01 ~ # emerge --oneshot wget

 * IMPORTANT: 5 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.

Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) net-misc/wget-1.16
 * wget-1.16.tar.xz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                                                                                                [ ok ]
>>> Unpacking source...
>>> Unpacking wget-1.16.tar.xz to /var/tmp/portage/net-misc/wget-1.16/work
>>> Source unpacked in /var/tmp/portage/net-misc/wget-1.16/work
>>> Preparing source in /var/tmp/portage/net-misc/wget-1.16/work/wget-1.16 ...
 * Applying wget-1.16-pkg-config.patch ...                                                                                                                                                                                              [ ok ]
 * Applying wget-1.16-openssl-header.patch ...                                                                                                                                                                                          [ ok ]
 * Applying wget-1.16-tests-skip.patch ...                                                                                                                                                                                              [ ok ]
 * Applying wget-1.16-openssl-no-ssl3.patch ...                                                                                                                                                                                         [ ok ]
 * Applying wget-1.16-fix-proxy-test-race.patch ...                                                                                                                                                                                     [ ok ]
 * Running eautoreconf in '/var/tmp/portage/net-misc/wget-1.16/work/wget-1.16' ...
 * Running autopoint --force ...                                                                                       [ ok ]
 * Running aclocal -I m4 ...                                                                                           [ ok ]
 * Running autoconf ...                                                                                                [ ok ]
 * Running autoheader ...                                                                                              [ ok ]
 * Running automake --add-missing --copy --force-missing ...                                                           [ ok ]
 * Running elibtoolize in: wget-1.16/
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/net-misc/wget-1.16/work/wget-1.16 ...
 * econf: updating wget-1.16/build-aux/config.sub with /usr/share/gnuconfig/config.sub
 * econf: updating wget-1.16/build-aux/config.guess with /usr/share/gnuconfig/config.guess
./configure --prefix=/usr --build=x86_64-pc-linux-gnu --host=x86_64-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib64 --disable-dependency-tracking --disable-rpath --with-ssl=openssl --enable-opie --enable-digest --enable-iri --enable-ipv6 --enable-nls --disable-ntlm --enable-pcre --disable-debug --without-libuuid --with-zlib
configure: configuring for GNU Wget 1.16
checking for a BSD-compatible install... /usr/lib64/portage/bin/ebuild-helpers/xattr/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking for style of include used by make... GNU
checking for x86_64-pc-linux-gnu-gcc... x86_64-pc-linux-gnu-gcc
checking whether the C compiler works... no
configure: error: in `/var/tmp/portage/net-misc/wget-1.16/work/wget-1.16':
configure: error: C compiler cannot create executables
See `config.log' for more details

!!! Please attach the following file when seeking support:
!!! /var/tmp/portage/net-misc/wget-1.16/work/wget-1.16/config.log
 * ERROR: net-misc/wget-1.16::gentoo failed (configure phase):
 *   econf failed
 * 
 * Call stack:
 *          ebuild.sh, line   93:  Called src_configure
 *        environment, line 3079:  Called econf '--disable-rpath' '--with-ssl=openssl' '--enable-opie' '--enable-digest' '--enable-iri' '--enable-ipv6' '--enable-nls' '--disable-ntlm' '--enable-pcre' '--disable-debug' '--without-libuuid' '--with-zlib'
 *   phase-helpers.sh, line  584:  Called die
 * The specific snippet of code:
 *   			die "econf failed"
 *




Comment 1


Tim





          2014-10-31 10:27:46 UTC
        

Created attachment 387864 [details]
emerge --info '=net-misc/wget-1.16::gentoo'




Comment 2


Tim





          2014-10-31 10:28:27 UTC
        

Created attachment 387866 [details]
emerge -pqv '=net-misc/wget-1.16::gentoo'




Comment 3


Tim





          2014-10-31 10:47:06 UTC
        

Created attachment 387872 [details]
/var/tmp/portage/net-misc/wget-1.16/work/wget-1.16/config.log




Comment 4


Tim





          2014-10-31 13:37:26 UTC
        

I'm not completely sure about the root of the issue, but here is how I fixed it:

adding these two lines in make.conf for getting a binary packages:
PORTAGE_BINHOST="http://140.211.166.181/default/linux/amd64"
PKGDIR="/usr/local/portage/packages/"

Then downgrade binutils via: emerge --getbinpkgonly binutils

This worked fine so I fixed wget and upgraded binutils:

emerge --oneshot --update wget binutils

which also worked \o/

I'm currently updating gcc from 4.7 to 4.8 which will hopefully work to.

I'm not sure why my system broke? maybe an older update didn't succeed? Which would mean that this isn't a real bug an the report can be closed.




Comment 5


SpanKY






          2014-11-01 01:25:29 UTC
        

if the shared libs are corrupted, then there's not a lot any package can do about it.  if you've already blown away the files, then can't really debug it either since it's no longer broken ;).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

