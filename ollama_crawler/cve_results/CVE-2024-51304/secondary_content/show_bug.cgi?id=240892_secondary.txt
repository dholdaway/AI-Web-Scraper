Title: 240892 – net-fs/openafs: C(XX)FLAGS are ignored (at src_configure/compile)
URL: https://bugs.gentoo.org/show_bug.cgi?id=240892

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 240892
net-fs/openafs: C(XX)FLAGS are ignored (at src_configure/compile)
Last modified: 2009-08-23 10:02:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 240892 
      - net-fs/openafs: C(XX)FLAGS are ignored (at src_configure/compile)


Summary:
net-fs/openafs: C(XX)FLAGS are ignored (at src_configure/compile)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Stefaan De Roeck (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-09 22:05 UTC by Diego Elio Pettenò (RETIRED)





      Modified:
    
2009-08-23 10:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Diego Elio Pettenò (RETIRED)






          2008-10-09 22:05:04 UTC
        

I don't know the build system for this program (and this is a generic bug template so I cannot tell you which program exactly is), but my tests shows that it's not respecting CFLAGS (or CXXFLAGS) properly.

Please look into it, since it's important to respect user CFLAGS and CXXFLAGS.

Warning: this bug might look like a false positive because you actually have your CFLAGS being used; this happens if the CFLAGS are "set in stone" in the build system during src_unpack/src_prepare. While QA has not as of this moment expressed to me a preference, I'd sincerely suggest to avoid the set-in-stone approach, so that ebuild commands could work to reproduce the actual results.

To avoid the set in stone approach:

- consider just changing CFLAGS= to CFLAGS+= if the build system enables warnings;
- if the buildsystem does not use CFLAGS variable at all, in the sed use '$(CFLAGS)', single quoted, so that the CFLAGS variable is picked up;
- use '$(OPTCFLAGS)' in the sed and then use make OPTCFLAGS=$CFLAGS.

Thanks,
Diego




Comment 1


Stefaan De Roeck (RETIRED)






          2008-11-28 13:31:53 UTC
        

I was a bit surprised to read this, as I had paid special efforts to use the CFLAGS provided by the environment.  I have now double-checked, and it seems to me that it is compiling with these flags.  Can it be that your tests trigger on something that I'm not seeing?  If so, could you point me to a symptom that I can trace?
Thanks




Comment 2


Stefaan De Roeck (RETIRED)






          2009-08-23 10:02:52 UTC
        

Nothing heard from reporter for 10 months.  Closing.  









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

