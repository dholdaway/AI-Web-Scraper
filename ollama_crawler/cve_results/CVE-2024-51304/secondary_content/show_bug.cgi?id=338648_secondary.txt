Title: 338648 – app-shells/ksh-93.20090505: ld: cannot find -ldld
URL: https://bugs.gentoo.org/show_bug.cgi?id=338648

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 338648
app-shells/ksh-93.20090505: ld: cannot find -ldld
Last modified: 2012-02-15 16:44:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 338648 
      - app-shells/ksh-93.20090505: ld: cannot find -ldld


Summary:
app-shells/ksh-93.20090505: ld: cannot find -ldld
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mike Gilbert








URL:







Whiteboard:




Keywords:








Depends on:




386339



Blocks:







 

        Show dependency tree





 





      Reported:
    
2010-09-25 08:41 UTC by Martin Mokrejš





      Modified:
    
2012-02-15 16:44 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



xmw









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,735.41 KB,
                text/plain)

            
2010-09-25 08:41 UTC,

            Martin Mokrejš




Details





build.log on amd64

              (ksh-93.20090505:20100930-204114.log.gz,124.54 KB,
                application/gzip)

            
2010-09-30 21:15 UTC,

            Michael Weber (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Mokrejš





          2010-09-25 08:41:31 UTC
        

+ cc -O2 -march=pentium4 -pipe -fno-strict-aliasing -ggdb -Wl,-O1 -Wl,--as-needed -L. -L/var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib -o ksh pmain.o libshell.a /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libdll.a -ldl -ldld /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libcmd.a -lfsg -lmd /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a -lm -ljobs -li -lsecdb /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a
/usr/lib/gcc/i686-pc-linux-gnu/4.4.4/../../../../i686-pc-linux-gnu/bin/ld: cannot find -ldld
collect2: ld returned 1 exit status
distcc[12490] ERROR: compile (null) on localhost failed
mamake [cmd/ksh93]: *** exit code 1 making ksh


# emerge --info =app-shells/ksh-93.20090505
Portage 2.1.9.9 (default/linux/x86/10.0/desktop, gcc-4.4.4, glibc-2.12.1-r1, 2.6.31.14 i686)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.31.14-i686-Mobile_Intel-R-_Pentium-R-_4_-_M_CPU_1.80GHz-with-gentoo-2.0.1
Timestamp of tree: Mon, 20 Sep 2010 18:15:01 +0000
distcc 3.1 i686-pc-linux-gnu [enabled]
app-shells/bash:     4.1_p7
dev-java/java-config: 1.3.7-r1, 2.1.11
dev-lang/python:     2.5.4-r4, 2.6.5-r3, 3.1.2-r4
dev-util/cmake:      2.8.1-r1
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.3
sys-apps/sandbox:    2.3-r1
sys-devel/autoconf:  2.13::<unknown repository>, 2.67
sys-devel/automake:  1.4_p6-r1, 1.5-r1, 1.6.3-r1, 1.7.9-r2, 1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       3.3.6-r1, 4.2.4-r1, 4.3.5, 4.4.4-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.35 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="x86 ~x86"
ACCEPT_LICENSE="* -@EULA dlj-1.1 sun-bcla-java-vm Nero-EULA-US skype-eula AdobeFlash AdobeFlash-10 AdobeFlash-10.1"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /var/bind /var/lib/hsqldb /var/qmail/alias /var/qmail/control /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distcc distlocks fixlafiles fixpackages metadata-transfer news nostrip parallel-fetch protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.mirror.web4u.cz"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en cs cz"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise /usr/local/portage/layman/science /usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="32bit 7zip R X Xaw3d a52 aac aalib ace acl acpi alsa amr amrnb amrwb apache audacious audiofile bash-completion bcmath berkdb blas bluetooth boost branding bzip2 cairo caps cblas cddb cdparanoia cdr cgi clamav cli colordiff compress consolekit cpio cracklib crypt cscope css ctype cups curl curlwrappers cxx dbi dbus dga dia directfb djbfft dri dts dv dvb dvd dvdr dvdread emboss emf enblend encode enscript exif expat faad fam fame fat fbcon ffmpeg fftw firefox flac flash fontconfig fortran fpx ftp gcj gd gdbm ggi gif gimp gimpprint glibc-compat20 glibc-omitfp glut gmp gnuplot gnutls gpgme gphoto2 gpm graphviz gs gsl gsm gtk gtkhtml hal hdf hdf5 hp2xx i8x0 icc iconv icu id3 ieee1394 imagemagick imlib inifile innodb ithreads jack java javascript jbig jce jikes jpeg jpeg2k kdtree kerberos lame lapack laptop lcms leim libcaca libnotify libwww live lzo lzw mad maildir matroska mhash mikmod mime ming mjpeg mmap mmx mng mod_python modperl modplug modules motif mozilla moznoirc mp2 mp3 mp4 mpeg mpi mpi_njtree mpich2 mplayer mudflap mule musepack mxdatetime mysql mysqli nat ncurses netcdf netpbm network nls nntp nptl nptlonly nsplugin ntfs numeric objc ogg opengl openmp openssl pam pango pcmcia pcntl pcre pdf perl plotutils plugin png pnm postproc postscript ppds pppd procmail pymol python qt3support qt4 quicktime rar raw readline recode reflection reiserfs romio rpm samba sasl scanner scp seamonkey server session sftp sift slp smime sndfile soap sockets spell sqlite srt sse sse2 ssl startup-notification subtitles subversion svg svgz sysfs sysvipc t1lib tcl tcpd theora threads tidy tiff tk transcode truetype unicode urandom usb userlocales utils uuencode v4l v4l2 vcd vhook vim-syntax vim-with-x vorbis wifi win32codecs wmf wxwindows x264 x86 xanim xcb xcf xfs xft xinerama xinetd xml xorg xpm xsl xslt xulrunner xv xvid xvmc yv12 zip zlib" ALSA_CARDS="intel-8x0m" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config mem_cache mime mime_magic rewrite setenvif speling status unique_id userdir usertrack vhost_alias negotiation" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en cs cz" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="radeon vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

app-shells/ksh-93.20090505 was built with the following:
USE="nls"
CFLAGS="-O2 -march=pentium3 -pipe -fno-strict-aliasing -ggdb"
CXXFLAGS="-O2 -march=pentium3 -pipe -fno-strict-aliasing -ggdb"
LDFLAGS="-Wl,-O1"

# emerge -pqv =app-shells/ksh-93.20090505
[ebuild   R   ] app-shells/ksh-93.20090505  USE="nls" 

#




Comment 1


Martin Mokrejš





          2010-09-25 08:41:59 UTC
        

Created attachment 248587 [details]
build.log




Comment 2


Michael Weber (RETIRED)






          2010-09-30 21:15:43 UTC
        

Created attachment 249119 [details]
build.log on amd64

Hello,

i could not reproduce this bug on amd64 (the ebuild comiles very unclean, lots gcc warnings).

But I don't have any libdld on my system. Can you examine where the -ldld on your log comes from?

Please run `lafilefixer --justfixit` and check the pkg-config files in '/usr/lib*/pkgconfig for any -ldld (`grep -r ldld /usr/lib64/pkgconfig/`)?!

Michael




Comment 3


Martin Mokrejš





          2010-10-24 19:46:46 UTC
        

(In reply to comment #2)

> Please run `lafilefixer --justfixit` and check the pkg-config files in
> '/usr/lib*/pkgconfig for any -ldld (`grep -r ldld /usr/lib64/pkgconfig/`)?!

Before running the lafilefixer:

# grep -r ldld /usr/lib/pkgconfig/
grep: /usr/lib/pkgconfig/libgcj-4.3.pc: No such file or directory
#

Running the lafilefixer did not help. I still see the same output in build.log showing -ldld was not found:

+ iffe -v -c 'cc   -O2 -march=pentium4 -pipe -fno-strict-aliasing -ggdb   -Wl,-O1 -Wl,--as-needed ' ref -L. -L/var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib -I/var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/include/ast -I/var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/include /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libdll.a -ldl -ldld /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libcmd.a -lfsg -lmd /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libast.a -lm : run /var/tmp/portage/app-shells/ksh-93.20090505/work/src/cmd/ksh93/features/externs
iffe: test: is sys/types.h a header ... yes
iffe: test: is /var/tmp/portage/app-shells/ksh-93.20090505/work/arch/linux.i386/lib/libdll.a a library ... yes
iffe: test: is -ldl a library ... yes
iffe: test: is -ldld a library ... no

However, much later the build process still tries to link against it.

BTW, I have a 32-bit host. ;-)




Comment 4


Mike Gilbert






          2012-02-13 03:47:12 UTC
        

Do you still have this problem with ksh-20110208?




Comment 5


Martin Mokrejš





          2012-02-15 16:44:01 UTC
        

Hi,
  I tired all available version on that ~x86 machine with gcc-4.5.3 and later also app-shells/ksh-93.20090505 with gcc-4.5.6. I couldn't reproduce that. I unmerged ksh and re-tried. I think I had the problem when ksh was to be _newly_installed on the computer ... Anyway, cannot reproduce.

  Finally, I tried also on new ~amd64 host with same results. Can't reproduce anymore.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

