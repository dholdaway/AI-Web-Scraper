Title: 188451 – net-im/silc-toolkit-1.1.2-r2 doesn't compile on hardened
URL: https://bugs.gentoo.org/show_bug.cgi?id=188451

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 188451
net-im/silc-toolkit-1.1.2-r2 doesn't compile on hardened
Last modified: 2009-10-27 00:54:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 188451 
      - net-im/silc-toolkit-1.1.2-r2 doesn't compile on hardened


Summary:
net-im/silc-toolkit-1.1.2-r2 doesn't compile on hardened
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Packages in net-irc








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-11 10:56 UTC by RonnyPeine





      Modified:
    
2009-10-27 00:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



hardened









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Compilation logfile

              (build-error.log,6.10 KB,
                text/plain)

            
2007-08-17 09:05 UTC,

            RonnyPeine




Details





build.log

              (build.log,74.90 KB,
                text/plain)

            
2007-08-17 10:18 UTC,

            RonnyPeine




Details





-j1 build.log

              (build.log,74.90 KB,
                text/plain)

            
2007-08-17 10:25 UTC,

            RonnyPeine




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


RonnyPeine





          2007-08-11 10:56:21 UTC
        

net-im/silc-toolkit-1.1.2-r2 doesn't compile on hardened-gentoo x86 because of PIE. It compiles with -nopie. Please fix this.

Reproducible: Always




Comment 1


Jakub Moc (RETIRED)






          2007-08-11 11:04:25 UTC
        

Reopen with some compile errors and emerge --info output; hard to guess.




Comment 2


RonnyPeine





          2007-08-17 09:05:40 UTC
        

Created attachment 128371 [details]
Compilation logfile




Comment 3


RonnyPeine





          2007-08-17 09:06:56 UTC
        

emerge --info:
Portage 2.1.2.11 (hardened/x86/2.6, gcc-3.4.6, glibc-2.5-r4, 2.6.20-hardened-r6 i686)
=================================================================
System uname: 2.6.20-hardened-r6 i686 AMD Athlon(tm) 2600+
Gentoo Base System release 1.12.9
Timestamp of tree: Thu, 16 Aug 2007 09:00:01 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=athlon-xp -mfpmath=sse -fomit-frame-pointer -funroll-loops -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O3 -march=athlon-xp -mfpmath=sse -fomit-frame-pointer -funroll-loops -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="buildpkg ccache collision-protect distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict test userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ ftp://ftp.tu-clausthal.de/pub/linux/gentoo/"
LANG="de_DE.utf8"
LC_ALL="de_DE.utf8"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac additions alsa aotuv audiofile berkdb bl blas bzip2 cairo cddb cdparanoia clisp cracklib crypt cscope css cups curl dmx doc dvb dvd dvdr dvdread encode extrafilters fam ffmpeg fftw flac foomaticdb fortran gd gdbm ggi gif gimpprint glitz gmedia gmp gnutls gpm gstreamer gtk guile hardened highlight history hpn idn imagemagick imlib irc ithreads joystick jpeg jpeg2k kde kdeenablefinal kqemu ladspa latex lcms libsamplerate live lm_sensors logitech-mouse mad midi mikmod mmap mmx mmxext mng mp2 mp3 mpeg musicbrainz ncurses network nls nptl nptlonly nsplugin odbc offensive ogg openal opengl pam pdf physfs pic plotutils png ppds python qt3 quicktime readline real realmedia rtc sdl sdl-sound sndfile sound speex spell srt sse ssl statistics subversion svg tcl tcpd test tetex theora threads threadsafe tiff tk truetype unicode urandom usb utempter v4l v4l2 vcd vditool visualization vorbis win32codecs wmp x264 x86 xcomposite xml xorg xv xvid xvmc yv12 zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="nv nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

The error is nearly saying nothing, only that it happens with silcnotfiy.




Comment 4


Jakub Moc (RETIRED)






          2007-08-17 09:09:59 UTC
        

(In reply to comment #2)
> Created an attachment (id=128371) [edit]
> Compilation logfile

Nope, no errors there, you snipped the important lines above. Attach the complete log (and sanitize your C[XX]FLAGS before even trying again, like C[XX]FLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe")





Comment 5


RonnyPeine





          2007-08-17 10:17:33 UTC
        

(In reply to comment #4)
> Nope, no errors there, you snipped the important lines above. Attach the
> complete log (and sanitize your C[XX]FLAGS before even trying again, like
> C[XX]FLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe")
> 
Well, maybe you find the error :) I have sanitized my cflags before without any change, but here i give you the complete buildlog with:
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe"
CXXFLAGS="${CFLAGS}"




Comment 6


RonnyPeine





          2007-08-17 10:18:09 UTC
        

Created attachment 128381 [details]
build.log




Comment 7


Jakub Moc (RETIRED)






          2007-08-17 10:20:01 UTC
        

(In reply to comment #5)
> Well, maybe you find the error :)

No I didn't. :) Any better output in the log w/ MAKEOPTS="-j1"?





Comment 8


RonnyPeine





          2007-08-17 10:25:23 UTC
        

(In reply to comment #7)
Maybe we should use irc, quite fast communication here :)
I have attached the build.log for MAKEOPTS="-j1".





Comment 9


RonnyPeine





          2007-08-17 10:25:56 UTC
        

Created attachment 128383 [details]
-j1 build.log




Comment 10


RonnyPeine





          2007-08-17 10:37:51 UTC
        

It's nice that the silc devs strip the error output thanks to >/dev/null 2>&1.
I have removed it and build the last file myself in lib/silccore:
i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../.. -O2 -march=athlon-xp -fomit-frame-pointer -pipe -D_GNU_SOURCE -g -Wall -finline-functions -D_REENTRANT -DHAVE_SILCDEFS_H -I. -I../.. -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2 -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/contrib -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silccore -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silccrypt -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcmath -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcutil -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcapputil -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcske -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcsftp -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcsim -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcclient -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcasn1 -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcskr -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silchttp -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/lib/silcvcard -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/includes -I/var/tmp/portage/net-im/silc-toolkit-1.1.2-r2/work/silc-toolkit-1.1.2/doc -O2 -march=athlon-xp -fomit-frame-pointer -pipe -D_GNU_SOURCE -g -Wall -finline-functions -D_REENTRANT -c silcpacket.c -o silcpacket.o
{standard input}: Assembler messages:
{standard input}:2820: Error: bad register name `%sil'





Comment 11


karl





          2008-03-05 18:21:35 UTC
        

Bug is still in 1.1.6 .  Exact same error when 2>&1 is removed.




Comment 12


Gordon Malm (RETIRED)






          2009-10-27 00:54:54 UTC
        

Cannot reproduce this on hardened/x86 with sane CFLAGS and current stable gcc-4.3.4+silc-toolkit-1.1.7.  Last update was Mar. '03, so closing as WORKSFORME I guess.  Re-open or file new if its still a problem, thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

