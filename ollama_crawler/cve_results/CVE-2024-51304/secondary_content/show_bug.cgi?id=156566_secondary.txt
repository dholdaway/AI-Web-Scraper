Title: 156566 – emerge cmake-2.4.3 fails: undefined reference to `_dl_open@GLIBC_PRIVATE'
URL: https://bugs.gentoo.org/show_bug.cgi?id=156566

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 156566
emerge cmake-2.4.3 fails: undefined reference to `_dl_open@GLIBC_PRIVATE'
Last modified: 2007-03-16 01:49:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 156566 
      - emerge cmake-2.4.3 fails: undefined reference to `_dl_open@GLIBC_PRIVATE'


Summary:
emerge cmake-2.4.3 fails: undefined reference to `_dl_open@GLIBC_PRIVATE'
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-28 16:05 UTC by Erik





      Modified:
    
2007-03-16 01:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Erik





          2006-11-28 16:05:59 UTC
        

emerge dev-util/cmake-2.4.3 fails:
Linking CXX executable ../bin/ccmake
/lib/libdl.so: undefined reference to `_dl_open@GLIBC_PRIVATE'
/lib/libdl.so: undefined reference to `_dl_close@GLIBC_PRIVATE'

$ emerge --info
Portage 2.1.1-r2 (default-linux/x86, gcc-4.1.1, glibc-2.4-r4, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 Intel(R) Pentium(R) M processor 1.60GHz
Gentoo Base System version 1.12.6
Last Sync: Mon, 27 Nov 2006 07:00:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=pentium4 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/grass60/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O3 -march=pentium4 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://trumpetti.atm.tut.fi/gentoo/"
LANG="swedish"
LINGUAS="sv de"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/portage_tmpdir"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X Xaw3d a52 aac acl ada alsa apache2 arts athena audiofile authdaemond bash-completion berkdb bitmap-fonts bzip2 canna cdda cddb cdio cdparanoia cli cracklib crypt css cups curl dga dhcp directfb dlloader doc dri dts dvb dvd dvdread elibc_glibc emacs encode expat fam fbcon ffmpeg firebird firefox flac fortran freewnn gcj ggi gif gmp gnutls gpm guile hal howl httpd i8x0 iconv imlib input_devices_keyboard input_devices_mouse ipv6 isdnlog javascript jpeg jpeg2k kde kdeenablefinal kdehiddenvisibility kerberos kernel_linux krb4 lcms ldap leim lesstif libg++ libsamplerate linguas_de linguas_sv mad matroska mikmod mjpeg mmx mng mp3 mpeg mule musepack musicbrainz mysql ncurses nls nptl nptlonly nsplugin odbc ogg openexr opengl pam pcmcia pcre perl php physfs png portaudio postgres povray pppd python qt3 qt4 quicktime quotas readline reflection samba sasl sdl session slp sndfile speex spell spl sql sse sse2 ssl stream subversion svg tcpd theora tidy tiff truetype truetype-fonts type1-fonts udev unicode usb userland_GNU v4l vcd vda video_cards_radeon vorbis wifi win32codecs wmf xanim xface xine xinerama xml xorg xv zeroconf zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Caleb Tennis (RETIRED)






          2006-12-04 10:50:45 UTC
        

> /lib/libdl.so: undefined reference to `_dl_open@GLIBC_PRIVATE'

This isn't a cmake issue.  Something else is messed up on your system.  Might want to consider re-emerging glibc.




Comment 2


Erik





          2006-12-04 11:42:05 UTC
        

Is there some package other than cmake that also uses that feature of glibc? If so, would like to try to link that package to confirm wether it is really a problem with glibc.

Is it documented somewhere that glibc provides the symbols _dl_open@GLIBC_PRIVATE and _dl_close@GLIBC_PRIVATE? If not, it would clearly be a bug in cmake if it tries to use them.




Comment 3


Erik





          2006-12-30 17:14:26 UTC
        

The problem with linking cmake was solved by cleaning up after an old glibc version. The system had been upgraded to glibc-2.4 but emerge failed to remove an old file. This caused the problem for cmake. The file left behind was /lib/libdl-2.3.4.so, which did not belong to any package currently installed according to equery. I have checked on another uptodate Gentoo system and it also had the file left behind. Some diagnostic commands reveal this:
# ls -l /lib/libdl* 
-rwxr-xr-x 1 root root 10964 30 aug  2005 /lib/libdl-2.3.4.so 
-rwxr-xr-x 1 root root 10192 19 dec 04.03 /lib/libdl-2.4.so 
lrwxrwxrwx 1 root root    14 30 aug  2005 /lib/libdl.so -> libdl-2.3.4.so 
lrwxrwxrwx 1 root root    12 19 dec 04.03 /lib/libdl.so.2 -> libdl-2.4.so 
# equery b /lib/libdl* 
[ Searching for file(s) /lib/libdl-2.3.4.so,/lib/libdl-2.4.so,/lib/libdl.so,/lib/libdl.so.2 in *... ] 
sys-libs/glibc-2.4-r4 (/lib/libdl.so.2 -> libdl-2.4.so) 
sys-libs/glibc-2.4-r4 (/lib/libdl-2.4.so)

Now I only have /lib/libdl-2.4.so and /lib/libdl.so.2. Cmake is emerged. The bug report can be moved away from cmake (to glibc?).




Comment 4


Jakub Moc (RETIRED)






          2007-03-16 01:49:52 UTC
        

Closing; no idea why did you have stale glibc junk on your system.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

