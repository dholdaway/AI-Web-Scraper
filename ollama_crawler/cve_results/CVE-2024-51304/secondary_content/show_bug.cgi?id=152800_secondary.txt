Title: 152800 – "unrecognized spec option" while compiling libstdc++-v3
URL: https://bugs.gentoo.org/show_bug.cgi?id=152800

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 152800
"unrecognized spec option" while compiling libstdc++-v3
Last modified: 2007-11-27 02:53:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 152800 
      - "unrecognized spec option" while compiling libstdc++-v3


Summary:
"unrecognized spec option" while compiling libstdc++-v3
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-25 10:19 UTC by Charly





      Modified:
    
2007-11-27 02:53 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-output while compiling libstdc++-v3

              (emerge.oneshot.libstdc++-v3.txt,362.81 KB,
                text/plain)

            
2006-10-25 10:21 UTC,

            Charly




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Charly





          2006-10-25 10:19:25 UTC
        

Hello,

About one month ago, my "emerge -uD --newuse world" stopped with following error message (see full log in the attachment):

gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'p'
gcc: spec failure: unrecognized spec option 'P'
gcc: braced spec '|!pipe:%g.s} |
 as %(asm_options) %{!pipe:%g.s} %A' is invalid at '|'
make[1]: *** [g++spec.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/libstdc++-v3-3.3.4/work/build/gcc'
make: *** [all-gcc] Error 2

!!! ERROR: sys-libs/libstdc++-v3-3.3.4 failed.

The hints on the "Gentoo GCC Upgrade Guide" won't affect the result. I tried to compile the libstdc++ with the "old" gcc (v3.4.6) and also with the v4.1.1 - both with the same result again. Google shows many results - but no matching my problem.

My config:
 - AMD64
 - I turned off the ccache
 - MAKEOPTS='-j3' is off
 - I tried with gcc 3.4.6 and 4.1.1 (also recompiled without $GCC_SPECS)


Thanks in advance,
Charly

______________________________________________________________


Gentoo Base System version 1.12.5
Portage 2.1.1-r1 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r8 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4400+
Last Sync: Tue, 24 Oct 2006 12:50:01 +0000
ccache version 2.3 [disabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=k8 -pipe -funroll-all-loops -fpeel-loops -ftracer -funswitch-loops -fweb -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O3 -march=k8 -pipe -funroll-all-loops -fpeel-loops -ftracer -funswitch-loops -fweb -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://pandemonium.tiscali.de/pub/gentoo"
LINGUAS="en en_GB de"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X X11 acpi alsa apache2 apm berkdb bitmap-fonts bzip2 cdparanoia cdr cdrm cli cracklib crypt cups divx4linux dlloader doc dri dvd dvdr eds elibc_glibc emboss encode esd firefox foomaticdb fortran gcj gif gnome gnustep gpm gstreamer gtk gtk2 imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog java jikes jpeg kernel_linux linguas_de linguas_en linguas_en_GB linuxthreads-tls lzw lzw-tiff mp3 mpeg ncurses nls nptl nptlonly nsplugin nvidia oav objc object-gc opengl pam pcre perl png pppd pthread python qt3 qt4 quicktime readline reflection samba sdl session spell spl ssl svg tcpd tiff tls truetype truetype-fonts type1-fonts unicode usb userland_GNU userlocales video_cards_nvidia xine xorg xpm xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Charly





          2006-10-25 10:21:51 UTC
        

Created attachment 100473 [details]
emerge-output while compiling libstdc++-v3

emerge --oneshot sys-libs/libstdc++-v3




Comment 2


Charly





          2006-10-25 10:49:42 UTC
        

According to http://bugs.gentoo.org/show_bug.cgi?id=109266 I will try to get gcc-3.3.4 (like the libstdc++ version) and compile the libstdc++-gcc with this "old" gcc :-)

I already used my primary specs (gcc-config 1) and had the same errors.




Comment 3


Charly





          2006-10-26 11:37:34 UTC
        

Also gcc version 3.4.4 (v3.3.4 is not available in the tree) brings no enhancement:

gcc   -O2 -march=x86-64 -pipe -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wtraditional -pedantic -Wno-long-long   -DHAVE_CONFIG_H    -I. -I. -I/var/tmp/portage/libstdc++-v3-3.3.4/work/gcc-3.3.4/gcc -I/var/tmp/portage/libstdc++-v3-3.3.4/work/gcc-3.3.4/gcc/. -I/var/tmp/portage/libstdc++-v3-3.3.4/work/gcc-3.3.4/gcc/config -I/var/tmp/portage/libstdc++-v3-3.3.4/work/gcc-3.3.4/gcc/../include -c insn-attrtab.c \
          -o insn-attrtab.o
gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'v'
gcc: spec failure: unrecognized spec option 'p'
gcc: spec failure: unrecognized spec option 'P'

Charly




Comment 4


Charly





          2006-10-27 07:03:16 UTC
        

Using the __hardened__ gcc configuration, the libstdc++ compiles without any problem:

charly@bluespirit ~ $ gcc-config -l
 [1] x86_64-pc-linux-gnu-3.4.6
 [2] x86_64-pc-linux-gnu-3.4.6-hardened *
 [3] x86_64-pc-linux-gnu-3.4.6-hardenednopie
 [4] x86_64-pc-linux-gnu-3.4.6-hardenednopiessp
 [5] x86_64-pc-linux-gnu-3.4.6-hardenednossp
 [6] x86_64-pc-linux-gnu-4.1.1
charly@bluespirit ~ $

Question to you: Do I have any disadvantages, using the hardened config only for this lib? And there is still the question - why is it not possible to compile with the default options?

Thanks in advance,

Charly




Comment 5


Mark Loeser (RETIRED)






          2007-11-27 02:53:15 UTC
        

Is this still a problem?  I can't reproduce it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

