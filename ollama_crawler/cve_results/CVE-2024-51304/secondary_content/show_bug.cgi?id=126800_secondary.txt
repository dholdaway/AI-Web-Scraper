Title: 126800 – make depend fails while building FreeBSD kernel
URL: https://bugs.gentoo.org/show_bug.cgi?id=126800

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 126800
make depend fails while building FreeBSD kernel
Last modified: 2006-05-09 12:18:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 126800 
      - make depend fails while building FreeBSD kernel


Summary:
make depend fails while building FreeBSD kernel
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Other

  (show other bugs)



Hardware:

x86
        FreeBSD
      







Importance:
      
High
       normal
      


Assignee:

Gentoo/BSD Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-19 06:07 UTC by Andrew Pogrebennyk





      Modified:
    
2006-05-09 12:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




`make depend` log

              (make_depend.log,79.19 KB,
                text/plain)

            
2006-03-19 06:08 UTC,

            Andrew Pogrebennyk




Details





Kernel config (NEUTRINO)

              (neutrino,6.22 KB,
                text/plain)

            
2006-03-19 06:10 UTC,

            Andrew Pogrebennyk




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew Pogrebennyk





          2006-03-19 06:07:32 UTC
        

Gentoo/FreeBSD: FreeBSD version 6.0-RELEASE; Gentoo base version 0.7
Portage 2.1_pre4-r1 (!/usr/local/portage/portage-alt-overlay/profiles/default-bsd/fbsd/6.0/x86, gcc-, freebsd-lib-6.0-r0, 6.0-RELEASE i386)
=================================================================
System uname: 6.0-RELEASE i386 i386
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  6.0
ACCEPT_KEYWORDS="x86 x86-fbsd ~x86 ~x86-fbsd"
AUTOCLEAN="yes"
CBUILD="i686-gentoo-freebsd6.0"
CFLAGS="-mtune=i386 -O2 -pipe"
CHOST="i686-gentoo-freebsd6.0"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/env.d"
CXXFLAGS="-mtune=i386 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sfperms strict"
GENTOO_MIRRORS="ftp://ftp.linux.kiev.ua/pub/Linux/Gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/portage-alt-overlay"
SYNC="rsync://rsync.gentoo.org.ua/gentoo-portage"
USE="x86-fbsd oss pam readline tcpd usb elibc_FreeBSD kernel_FreeBSD userland_BSD"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS




Comment 1


Andrew Pogrebennyk





          2006-03-19 06:08:45 UTC
        

Created attachment 82546 [details]
`make depend` log

There are some assembler errors :(




Comment 2


Andrew Pogrebennyk





          2006-03-19 06:10:13 UTC
        

Created attachment 82547 [details]
Kernel config (NEUTRINO)

This configuration file worked well with FreeBSD 6.0 and i brought it with minor changes to Gentoo-FreeBSD...




Comment 3


Karol Pasternak (RETIRED)






          2006-03-19 07:46:09 UTC
        

which gcc version you using?
Maybe you should try it with freebsd's default.




Comment 4


Andrew Pogrebennyk





          2006-03-19 08:03:50 UTC
        

(In reply to comment #3)
> which gcc version you using?
> Maybe you should try it with freebsd's default.
> 

I'm using gcc-3.4.5, which was included into gentoo-freebsd-6.0-stage-20060221.tar.bz2. I used FreeBSD 6.0 to unpack that tarball and bootstrap the system as described there: http://dev.gentoo.org/~citizen428/doc/gentoo-freebsd.html. After reboot i noticed that there's no kernel (that short guide has nothing about kernel build process :)), booted FreeBSD 6.0 and chrooted into gentoo-freebsd again, then i emerged freebsd-sources and tried to build that kernel. 

Thanks for advice, i will look what other gcc versions are there in portage tree and try to build kernel with some of them.




Comment 5


Andrew Pogrebennyk





          2006-03-19 09:32:34 UTC
        

I see FreeBSD 6.0 release employs GCC 3.4.4 as a default compiler, but given gentoo-freebsd snapshot has 3.4.5 i thought that 3.4.5 would work quite nice .. Will chroot into gentoo-freebsd tonight once more to build and try 3.4.4 :)




Comment 6


Andrew Pogrebennyk





          2006-03-21 08:24:46 UTC
        

Still no success, `make depend` produces exactly the same errors while using gcc-3.4.4




Comment 7


Lior Balkohen





          2006-03-31 02:45:11 UTC
        

Same here.  The GNU assembler does not like some *.S files.  Anyway, I just copied  /boot/kernel /boot/modules and /boot/device.hints from the livecd to my root and see, it boots!




Comment 8


Diego Elio Pettenò (RETIRED)






          2006-05-09 12:18:05 UTC
        

Make sure you have /dev mounted.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

