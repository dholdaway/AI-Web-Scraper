Title: 701994 – =dev-libs/glib-2.60.6 with sys-libs/uclibc-ng and dev-libs/libiconv - configure: iconv implementation "libc" not found
URL: https://bugs.gentoo.org/show_bug.cgi?id=701994

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 701994
=dev-libs/glib-2.60.6 with sys-libs/uclibc-ng and dev-libs/libiconv - configure: iconv implementation "libc" not found
Last modified: 2020-12-05 17:18:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 701994 
      - =dev-libs/glib-2.60.6 with sys-libs/uclibc-ng and dev-libs/libiconv - configure: iconv implementation "libc" not found


Summary:
=dev-libs/glib-2.60.6 with sys-libs/uclibc-ng and dev-libs/libiconv - configu...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

713516

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2019-12-04 21:24 UTC by Logan Perkins





      Modified:
    
2020-12-05 17:18 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



axl
mail









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ebuild log

              (build.log,15.14 KB,
                text/x-log)

            
2019-12-09 01:23 UTC,

            Logan Perkins




Details





emerge info

              (emerge.info,5.25 KB,
                application/x-info)

            
2019-12-09 01:24 UTC,

            Logan Perkins




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Logan Perkins





          2019-12-04 21:24:53 UTC
        

Meson tries to find `iconv_open` for use with glib, but fails to autodetect it.  Manually specifying -Diconv=gnu in the ebuild for meson options lets it build properly.  Setting USE=iconv for uclibc-ng doesn't let meson find iconv_open in libc, so specifying iconv=gnu is needed even in that case.

Reproducible: Always

Steps to Reproduce:
Set up a new chroot by unpacking the uclibc stage 3.
After emerge-webrsync and other inital setup, `emerge -av dev-libs/glib`
Note the meson failure.
Actual Results:  
Emerging dev-libs/glib fails when meson cannot find iconv_open

Expected Results:  
Emerging dev-libs/glib succeeds.




Comment 1


Jeroen Roovers (RETIRED)






          2019-12-05 10:30:54 UTC
        

Please attach the entire build log to this bug report.
Please post your `emerge --info' output in a comment.




Comment 2


Logan Perkins





          2019-12-09 01:23:45 UTC
        

Created attachment 598924 [details]
ebuild log




Comment 3


Logan Perkins





          2019-12-09 01:24:14 UTC
        

Created attachment 598926 [details]
emerge info




Comment 4


Logan Perkins





          2019-12-09 01:25:51 UTC
        

This is on a brand new chroot, after setting resolv.conf and running emerge-webrsync, only command run was 

emerge -av dev-libs/glib




Comment 5


Alexandru N. Barloiu





          2020-02-20 13:47:40 UTC
        

I don't know why meson can't figure out for itself that the iconv implementation it should test for is gnu. Anyway, if you pass a -Diconv=gnu to meson the whole thing will work.




Comment 6


Ed Wildgoose





          2020-03-11 17:00:07 UTC
        

It seems to build correctly on 2.62.5

For now bump the ebuild if you are using uclibc_ng




Comment 7


Steffen Christgau





          2020-03-19 19:43:31 UTC
        

*** Bug 713516 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

