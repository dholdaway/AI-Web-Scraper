Title: 156975 – glibc-2.4-r4 / gzip-1.3.5-r10 /  tetex-3.0_p1-r3 sandbox violation while building info pages due to texinfo being clobbered
URL: https://bugs.gentoo.org/show_bug.cgi?id=156975

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 156975
glibc-2.4-r4 / gzip-1.3.5-r10 /  tetex-3.0_p1-r3 sandbox violation while building info pages due to texinfo being clobbered
Last modified: 2006-12-28 09:15:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 156975 
      - glibc-2.4-r4 / gzip-1.3.5-r10 /  tetex-3.0_p1-r3 sandbox violation while building info pages due to texinfo being clobbered


Summary:
glibc-2.4-r4 / gzip-1.3.5-r10 /  tetex-3.0_p1-r3 sandbox violation while buil...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-12-03 04:06 UTC by c-yoborg





      Modified:
    
2006-12-28 09:15 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge glibc >& log | bzip2

              (log.bz2,169.45 KB,
                text/plain)

            
2006-12-05 02:39 UTC,

            c-yoborg




Details





emerge -v --info

              (emerge_verbose_info.txt,5.90 KB,
                text/plain)

            
2006-12-05 02:55 UTC,

            c-yoborg




Details





emerge -a1 gzip >& emerge_gzip_output.txt

              (emerge_gzip_output.txt,18.52 KB,
                text/plain)

            
2006-12-28 05:58 UTC,

            c-yoborg




Details





emerge -a1 tetex-3.0_p1-r3 > emerge_tetex-3.0_p1-r3.log |gzip

              (emerge_tetex-3.0_p1-r3.log.gz,150.75 KB,
                application/gzip)

            
2006-12-28 07:26 UTC,

            c-yoborg




Details





emerge -a1 enscript-1.6.4-r2 | tail -n 41 > emerge_enscript-1.6.4-r2.txt

              (emerge_enscript-1.6.4-r2.txt,3.22 KB,
                text/plain)

            
2006-12-28 08:16 UTC,

            c-yoborg




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


c-yoborg





          2006-12-03 04:06:28 UTC
        

User-Agent:       Mozilla/5.0 (X11; U; Linux i686; de; rv:1.8.0.8) Gecko/20061112 Firefox/1.5.0.8
Build Identifier: 

I found lots of simmilar bugs from 2003 concerning other packages, but this
didnt help me. (ex. #13013)
[Most other packages compile well. (exept openssh-4.4_p1-r6 from 4.3_p2-r5,
konsole, orinoco - they produce other errors). A few weeks ago I had a file
system crash that cost 8MB of data, but I thought everything was fine again.]

Reproducible: Always

Steps to Reproduce:
emerge glibc


Actual Results:  
>>> Completed installing glibc-2.4-r4 into /var/tmp/portage/glibc-2.4-r4/image/

--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-sys-libs_-_glibc-2.4-r4-28526.log"

open_wr:   /var/backups/infodir.bak
--------------------------------------------------------------------------------



Portage 2.1.1-r2 (default-linux/x86/2006.1, gcc-4.1.1, glibc-2.4-r3,
2.6.17-gentoo-r7-t23 i686)
=================================================================
System uname: 2.6.17-gentoo-r7-t23 i686 Intel(R) Pentium(R) III Mobile CPU     
1133MHz
Gentoo Base System version 1.12.6
Last Sync: Sun, 03 Dec 2006 01:59:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=pentium3 -pipe -mmmx -msse -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config
/usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf
/etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo
/etc/texmf/web2c"
CXXFLAGS="-Os -march=pentium3 -pipe -mmmx -msse -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks metadata-transfer parallel-fetch
prelink sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.inode.at/"
LINGUAS="de es fr en"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress
--force --whole-file --delete --delete-after --stats --timeout=180
--exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X a52 aac acpi alsa amarok arts async bash-completion berkdb
bitmap-fonts bzip2 cairo ccache cli cracklib crypt cups dbus divx dlloader dri
dvd dvdread eds effects elibc_glibc encode fbcon ffmpeg firefox flac foomaticdb
gdbm gif gimpprint gmedia gpm gstreamer hal httpd iconv input_devices_evdev
input_devices_keyboard input_devices_mouse ipv6 isdnlog jabber java jpeg kde
kdeenablefinal kernel_linux ldap libg++ linguas_de linguas_en linguas_es
linguas_fr lm_sensors mad matroska mmx mozsvg mp3 mp4 mpeg mpeg2 mplayer ncurses
nls nptl nptlonly ogg oggvorbis opengl pam pcmcia pcre pdf perl pic pmu png ppds
pppd python qt3 qt4 quicktime readline realmedia reflection rtsp ruby samba sdl
session shout spell spl sse ssl stream subject-rewrite subtitles svg tcpd theora
tiff truetype truetype-fonts type1-fonts udev unicode userland_GNU userlocales
vcd video_cards_savage vorbis win32codecs wmp wxwindows x264 xml xorg xpm xv
xvid xvmc zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS,
PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2006-12-03 04:19:16 UTC
        

Post the output of `equery b $(find / -name install-info)` ; emerge gentoolkit if you don't have equery on your system.




Comment 2


c-yoborg





          2006-12-03 12:08:04 UTC
        

# equery b $(find / -name install-info)
find: /proc/30899/task/30899/fd/5: No such file or directory
find: /proc/30899/fd/5: No such file or directory
[ Searching for file(s) /usr/bin/install-info,/usr/sbin/install-info in *... ]
sys-apps/texinfo-4.8-r5 (/usr/bin/install-info)

why did you ask for this output?




Comment 3


c-yoborg





          2006-12-04 13:26:52 UTC
        

forgot to reopen bug




Comment 4


Jakub Moc (RETIRED)






          2006-12-04 13:43:44 UTC
        

(In reply to comment #2)
> why did you ask for this output?

Because this only happens w/ some stale weird install-info binary (see Bug 25875). No idea why would glibc want to write to /var/backups...




Comment 5


SpanKY






          2006-12-04 17:59:48 UTC
        

post verbose logs:
emerge -v --info
emerge glibc >& log




Comment 6


c-yoborg





          2006-12-05 02:39:28 UTC
        

Created attachment 103383 [details]
emerge glibc >& log | bzip2

sorry: with color




Comment 7


c-yoborg





          2006-12-05 02:55:07 UTC
        

Created attachment 103385 [details]
emerge -v --info




Comment 8


c-yoborg





          2006-12-05 02:57:55 UTC
        

Was there a checkbox to reopen the bug adding an attachment? Do I always have to reopen it?




Comment 9


SpanKY






          2006-12-06 16:48:53 UTC
        

looks like something clobbered your binaries from the texinfo package

please run:
qfile /usr/bin/install-info 
qcheck texinfo

(install the portage-utils package if you dont have those programs)




Comment 10


c-yoborg





          2006-12-07 18:35:16 UTC
        

 # qfile /usr/bin/install-info
sys-apps/texinfo (/usr/bin/install-info)

 # qcheck texinfo
Checking sys-apps/texinfo-4.8-r5 ...
 MD5-DIGEST: /usr/bin/info
 MD5-DIGEST: /usr/bin/makeinfo
 MD5-DIGEST: /usr/bin/install-info
 MD5-DIGEST: /usr/bin/texindex
 MD5-DIGEST: /usr/bin/infokey
  * 46 out of 51 files are good

 # emerge -av1 texinfo

 # qcheck texinfo
Checking sys-apps/texinfo-4.8-r5 ...
  * 51 out of 51 files are good

 # emerge -av glibc

[to be continued] 




Comment 11


SpanKY






          2006-12-07 18:55:32 UTC
        

yeah i'm pretty sure the "R" package is what clobbered those binaries ... do you have dev-lang/R installed ?




Comment 12


c-yoborg





          2006-12-08 01:37:58 UTC
        

still the same error
and I don't have dev-lang/R
but

 # qcheck glibc
Checking sys-libs/glibc-2.4-r3 ...
 MTIME: /usr/lib/libBrokenLocale.so
 MTIME: /usr/lib/libm.so
 MTIME: /usr/lib/libdl.so
 MD5-DIGEST: /usr/lib/misc/glibc/getconf/POSIX_V6_ILP32_OFFBIG
 MD5-DIGEST: /usr/lib/misc/glibc/getconf/POSIX_V6_ILP32_OFF32
 MD5-DIGEST: /usr/lib/misc/glibc/pt_chown
 MTIME: /usr/lib/libcrypt.so
 MTIME: /usr/lib/libnss_dns.so
 MTIME: /usr/lib/libresolv.so
 MTIME: /usr/lib/libanl.so
 MTIME: /usr/lib/libnss_files.so
 MTIME: /usr/lib/librt.so
 MTIME: /usr/lib/libthread_db.so
 MTIME: /usr/lib/libcidn.so
 MTIME: /usr/lib/libnss_hesiod.so
 MTIME: /usr/lib/libnss_nis.so
 MTIME: /usr/lib/libnsl.so
 MTIME: /usr/lib/libbsd.a
 MTIME: /usr/lib/libnss_nisplus.so
 MTIME: /usr/lib/libnss_compat.so
 MTIME: /usr/lib/libutil.so
 MD5-DIGEST: /usr/bin/localedef
 MD5-DIGEST: /usr/bin/iconv
 MD5-DIGEST: /usr/bin/locale
 MD5-DIGEST: /usr/bin/gencat
 MD5-DIGEST: /usr/bin/getconf
 MD5-DIGEST: /usr/bin/getent
 MD5-DIGEST: /usr/bin/pcprofiledump
 MD5-DIGEST: /usr/bin/rpcgen
 MD5-DIGEST: /usr/bin/sprof
 MD5-DIGEST: /usr/bin/lddlibc4
 MD5-DIGEST: /usr/sbin/iconvconfig
 MD5-DIGEST: /usr/sbin/rpcinfo
 MD5-DIGEST: /lib/libmemusage.so
 MD5-DIGEST: /lib/ld-2.4.so
 MD5-DIGEST: /lib/libc-2.4.so
 MD5-DIGEST: /lib/libm-2.4.so
 MD5-DIGEST: /lib/libdl-2.4.so
 MD5-DIGEST: /lib/libpthread-2.4.so
 MD5-DIGEST: /lib/libcrypt-2.4.so
 MD5-DIGEST: /lib/libresolv-2.4.so
 MD5-DIGEST: /lib/librt-2.4.so
 MD5-DIGEST: /lib/libnsl-2.4.so
 MTIME: /lib/ld-linux.so.2
 MD5-DIGEST: /lib/libutil-2.4.so
 MTIME: /lib/libc.so.6
 MTIME: /lib/libBrokenLocale.so.1
 MTIME: /lib/libm.so.6
 MTIME: /lib/libdl.so.2
 MTIME: /lib/libcrypt.so.1
 MTIME: /lib/libpthread.so.0
 MTIME: /lib/libresolv.so.2
 MTIME: /lib/libnss_dns.so.2
 MTIME: /lib/libanl.so.1
 MTIME: /lib/libnss_files.so.2
 MTIME: /lib/librt.so.1
 MTIME: /lib/libcidn.so.1
 MTIME: /lib/libthread_db.so.1
 MTIME: /lib/libnss_hesiod.so.2
 MTIME: /lib/libnsl.so.1
 MTIME: /lib/libnss_nis.so.2
 MTIME: /lib/libnss_nisplus.so.2
 MTIME: /lib/libnss_compat.so.2
 MTIME: /lib/libutil.so.1
  * 1227 out of 1291 files are good




Comment 13


SpanKY






          2006-12-08 07:30:03 UTC
        

just re-emerge the texinfo package and then glibc should emerge fine




Comment 14


c-yoborg





          2006-12-08 18:15:18 UTC
        

(In reply to comment #13)
> just re-emerge the texinfo package and then glibc should emerge fine
> 
This is what I did already and reported it in comment #10 and #12




Comment 15


SpanKY






          2006-12-08 20:32:42 UTC
        

if you're still getting the same error, then make sure you dont have binaries in like /usr/local/bin/

the point is, your system has some non-standard package that is getting in the way of the normal texinfo and that's breaking your glibc build ... this isnt a glibc bug by any means




Comment 16


c-yoborg





          2006-12-09 03:26:20 UTC
        

> the point is, your system has some non-standard package that is getting in the
> way of the normal texinfo and that's breaking your glibc build ... this isnt a
> glibc bug by any means
> 
Why do you think, that I have some non-standard packages? I don't think so.

 # ls /usr/local/*bin/
/usr/local/bin/:

/usr/local/sbin/:





Comment 17


SpanKY






          2006-12-09 17:22:20 UTC
        

because the error string you posted is not found *anywhere* in the standard texinfo package ... it can however be found in non-standard install-info binaries




Comment 18


c-yoborg





          2006-12-28 05:58:19 UTC
        

Created attachment 104843 [details]
emerge -a1 gzip >& emerge_gzip_output.txt

same error compiling gzip




Comment 19


c-yoborg





          2006-12-28 06:07:37 UTC
        

How do I find those "non-standard install-info
binaries"? And what to do with it?




Comment 20


SpanKY






          2006-12-28 06:43:02 UTC
        

you delete them and re-install texinfo




Comment 21


c-yoborg





          2006-12-28 07:26:12 UTC
        

Created attachment 104848 [details]
emerge -a1 tetex-3.0_p1-r3 > emerge_tetex-3.0_p1-r3.log |gzip

same problem compiling tetex




Comment 22


c-yoborg





          2006-12-28 07:57:46 UTC
        

I DID THIS ALREADY (see above)
But for you I did it again:
# emerge -C sys-apps/texinfo
# emerge -1 sys-apps/texinfo

# qcheck sys-apps/texinfo
Checking sys-apps/texinfo-4.8-r5 ...
  * 51 out of 51 files are good





Comment 23


c-yoborg





          2006-12-28 08:16:29 UTC
        

Created attachment 104858 [details]
emerge -a1 enscript-1.6.4-r2 | tail -n 41 > emerge_enscript-1.6.4-r2.txt

same error compiling enscript-1.6.4-r2
many other packages compile without any errors




Comment 24


SpanKY






          2006-12-28 08:56:16 UTC
        

let someone else help you find the broken package / binaries




Comment 25


Jakub Moc (RETIRED)






          2006-12-28 09:15:03 UTC
        

WORKSFORME.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

