Title: 143818 – net-nntp/suck-4.3.2 compile failed
URL: https://bugs.gentoo.org/show_bug.cgi?id=143818

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 143818
net-nntp/suck-4.3.2 compile failed
Last modified: 2007-04-18 21:58:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 143818 
      - net-nntp/suck-4.3.2 compile failed


Summary:
net-nntp/suck-4.3.2 compile failed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Net-news project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-13 14:33 UTC by Christophe PEREZ





      Modified:
    
2007-04-18 21:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




suck-4.3.2-r1.ebuild

              (suck-4.3.2-r1.ebuild,1.38 KB,
                text/plain)

            
2006-08-13 20:09 UTC,

            Christophe PEREZ




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christophe PEREZ





          2006-08-13 14:33:49 UTC
        

I have cleaned my system (as usual) with emerge --depclean, and here are the packages removed :
     Sun Aug 13 16:24:18 2006 <<< sys-libs/db-4.1.25_p1-r4
     Sun Aug 13 16:24:19 2006 <<< sys-libs/db-1.85-r2
     Sun Aug 13 16:24:21 2006 <<< sys-libs/db-3.2.9-r10
     Sun Aug 13 16:24:23 2006 <<< dev-db/libpq-8.0.1

db still installed :
[I--] [  ] sys-libs/db-4.2.52_p2-r1

but now, revdep-rebuild wants to compile suck, but fails with :
i686-pc-linux-gnu-gcc -c -O2 -march=pentium4 -pipe -fomit-frame-pointer  -I. -I.  -DHAVE_CONFIG_H -DSUCK_VERSION=\"4.3.2\"    -D_REENTRANT -D_GNU_SOURCE -I/usr/lib/perl5/5.8.8/i686-linux/CORE rpost.c
i686-pc-linux-gnu-gcc -c -O2 -march=pentium4 -pipe -fomit-frame-pointer -DHAVE_LIBSSL  -I. -I.  -DHAVE_CONFIG_H -DSUCK_VERSION=\"4.3.2\"    testhost.c
i686-pc-linux-gnu-gcc -c -O2 -march=pentium4 -pipe -fomit-frame-pointer -DHAVE_LIBSSL  -I. -I.  -DHAVE_CONFIG_H -DSUCK_VERSION=\"4.3.2\"    lmove.c
chkhistory_db.c:85:24: configdata.h: No such file or directory
chkhistory_db.c:87:20: libinn.h: No such file or directory
chkhistory_db.c:88:17: dbz.h: No such file or directory
chkhistory_db.c: In function `open_history':
chkhistory_db.c:174: error: `dbzoptions' undeclared (first use in this function)
chkhistory_db.c:174: error: (Each undeclared identifier is reported only once
chkhistory_db.c:174: error: for each function it appears in.)
chkhistory_db.c:174: error: syntax error before "opt"
chkhistory_db.c:183: error: `opt' undeclared (first use in this function)
chkhistory_db.c:183: error: `INCORE_MEM' undeclared (first use in this function)
chkhistory_db.c: In function `check_history':
chkhistory_db.c:228: error: `HASH' undeclared (first use in this function)
chkhistory_db.c:228: error: syntax error before "msgid_hash"
chkhistory_db.c:230: error: `msgid_hash' undeclared (first use in this function)
distcc[15015] ERROR: compile chkhistory_db.c on localhost failed
make: *** [chkhistory_db.o] Error 1
make: *** Waiting for unfinished jobs....
distcc[15045] (dcc_writex) ERROR: failed to write: No route to host
distcc[15045] (dcc_writex) ERROR: failed to write: Broken pipe
distcc[15045] Warning: failed to distribute /opt/portage/ccache/lmove.tmp.serveur1.15031.i to 192.168.0.30/1, running locally instead

!!! ERROR: net-nntp/suck-4.3.2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  suck-4.3.2.ebuild, line 35:   Called die

!!! emake failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

I don't know if it is really a suck ebuild bug or something else...

The others packages revdep-rebuild wanted where well compiled :
     Sun Aug 13 16:35:52 2006 >>> net-analyzer/net-snmp-5.2.1.2-r1
     Sun Aug 13 17:01:08 2006 >>> dev-lang/php-5.1.4-r4
     Sun Aug 13 17:06:24 2006 >>> dev-lang/ocaml-3.08.3
     Sun Aug 13 17:21:14 2006 >>> net-analyzer/wireshark-0.99.2
     Sun Aug 13 17:29:42 2006 >>> net-proxy/squidguard-1.2.0-r1
     Sun Aug 13 17:30:24 2006 >>> sys-power/nut-2.0.4




Comment 1


Christophe PEREZ





          2006-08-13 20:09:04 UTC
        

Created attachment 94191 [details]
suck-4.3.2-r1.ebuild

I could understand that "suck" couldn't find INN libs and includes.
So, I modified the ebuild just a little to add --with-inn-lib=/usr/lib/news/lib/ and --with-inn-include=/usr/lib/news/include/ where gentoo installs INN by default, and now, it seems to compile and work fine.
If it can help someone...




Comment 2


Wulf Krueger (RETIRED)






          2007-04-18 21:43:28 UTC
        

I can't reproduce this at all. I suspected an automagic dependency on net-nntp/inn but that's not the case.

suck always compiles for me - as much as I try to make it not to. ;-)




Comment 3


Christophe PEREZ





          2007-04-18 21:58:44 UTC
        

You're right. It works for me too, *now* ! :-)
But it didn't when I posted this bug ;-)
Something surely changed...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

