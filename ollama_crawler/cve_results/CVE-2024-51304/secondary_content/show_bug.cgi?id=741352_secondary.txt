Title: 741352 – dev-lang/spidermonkey-78.2.0 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=741352

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 741352
dev-lang/spidermonkey-78.2.0 fails to compile
Last modified: 2020-09-10 10:58:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 741352 
      - dev-lang/spidermonkey-78.2.0 fails to compile


Summary:
dev-lang/spidermonkey-78.2.0 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-09-09 07:30 UTC by Agostino Sarubbo





      Modified:
    
2020-09-10 10:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,22.61 KB,
                text/plain)

            
2020-09-09 07:30 UTC,

            Agostino Sarubbo




Details





1-config.log

              (1-config.log,80.23 KB,
                text/plain)

            
2020-09-09 07:30 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2020-09-09 07:30:13 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: dev-lang/spidermonkey-78.2.0 fails to compile.
Discovered on: amd64 (internal ref: ci)

NOTE:
This machine uses GLIBC-2.32. If you think that this issue is strictly related to GLIBC please block bug 736174.




Comment 1


Agostino Sarubbo






          2020-09-09 07:30:16 UTC
        

Created attachment 659200 [details]
build.log

build log and emerge --info




Comment 2


Agostino Sarubbo






          2020-09-09 07:30:18 UTC
        

Created attachment 659202 [details]
1-config.log

1-config.log




Comment 3


cyrillic





          2020-09-10 02:20:59 UTC
        

build.log wrote:
ERROR: Building ICU requires either yasm or a GNU assembler. If you do not have either of those available for this platform you must use --without-intl-api

# equery depends yasm
...
www-client/firefox-80.0.1-r1 (amd64 ? >=dev-lang/yasm-1.1)
                             (x86 ? >=dev-lang/yasm-1.1)

It looks like spidermonkey should also have this dependency.




Comment 4


Thomas Deutschmann (RETIRED)






          2020-09-10 10:58:06 UTC
        

Please tell me how to reproduce this in an empty stage3.

> # which nasm
> which: no nasm in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin)
> # which yasm
> which: no yasm in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin)
> # which as
> which: no as in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin)

So I don't have nasm/yasm on that system. I killed the as symlink. Spidermonkey deps are coming via binary package. Spidermonkey builds without any problems for me:

> [...]
> checking whether cross compiling... no
> checking for yasm... not found
> checking for the target C compiler... /usr/bin/x86_64-pc-linux-gnu-gcc
> checking whether the target C compiler can be used... yes
> checking the target C compiler version... 9.3.0
> checking the target C compiler works... yes
> WARNING: The value of LD is not used by this build system.
> checking for the target C++ compiler... /usr/bin/x86_64-pc-linux-gnu-g++
> checking whether the target C++ compiler can be used... yes
> checking the target C++ compiler version... 9.3.0
> checking the target C++ compiler works... yes
> checking for the host C compiler... /usr/bin/x86_64-pc-linux-gnu-gcc
> checking whether the host C compiler can be used... yes
> checking the host C compiler version... 9.3.0
> checking the host C compiler works... yes
> checking for the host C++ compiler... /usr/bin/x86_64-pc-linux-gnu-g++
> checking whether the host C++ compiler can be used... yes
> checking the host C++ compiler version... 9.3.0
> checking the host C++ compiler works... yes
> checking for 64-bit OS... yes
> checking for new enough STL headers from libstdc++... yes
> checking for nasm... not found
> checking for linker... bfd
> checking for the assembler... /usr/bin/x86_64-pc-linux-gnu-gcc
> checking for ar... /usr/bin/x86_64-pc-linux-gnu-ar
> checking for pkg_config... /usr/bin/x86_64-pc-linux-gnu-pkg-config
> checking for pkg-config version... 1.6.3
> [...]
> checking for readline... yes
> checking for icu-i18n >= 67.1... yes
> checking MOZ_ICU_CFLAGS...
> checking MOZ_ICU_LIBS... -licui18n -licuuc -licudata
> checking for awk... /usr/bin/gawk
> checking for perl... /usr/bin/perl
> [...]
> 

For me it sounds like your system ICU is somehow busted.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

