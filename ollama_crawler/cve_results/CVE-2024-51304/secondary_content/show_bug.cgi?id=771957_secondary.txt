Title: 771957 – xfce-base/xfwm4-4.16.1 coredump
URL: https://bugs.gentoo.org/show_bug.cgi?id=771957

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 771957
xfce-base/xfwm4-4.16.1 coredump
Last modified: 2021-03-19 20:12:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 771957 
      - xfce-base/xfwm4-4.16.1 coredump


Summary:
xfce-base/xfwm4-4.16.1 coredump
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

XFCE Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-02-21 17:09 UTC by jorge





      Modified:
    
2021-03-19 20:12 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jstein
mgorny









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xfce-base/xfwm4-4.16.1 coredump

              (file_771957.txt,6.45 KB,
                text/plain)

            
2021-02-21 17:09 UTC,

            jorge




Details





New coredump with -Og enabled

              (file_771957.txt,6.63 KB,
                text/plain)

            
2021-02-21 17:43 UTC,

            jorge




Details





New coredump with -Og enabled (2)

              (file_771957.txt,9.07 KB,
                text/plain)

            
2021-02-21 18:19 UTC,

            jorge




Details





/var/log/lightdm/lightdm.log

              (file_771957.txt,4.40 KB,
                text/plain)

            
2021-02-21 21:35 UTC,

            jorge




Details





/var/log/lightdm/lightdm.log.old

              (file_771957.txt,4.85 KB,
                text/plain)

            
2021-02-21 21:37 UTC,

            jorge




Details





/var/log/lightdm/seat0-greeter.log

              (file_771957.txt,4.29 KB,
                text/plain)

            
2021-02-21 21:38 UTC,

            jorge




Details





/var/log/lightdm/seat0-greeter.log.old

              (file_771957.txt,3.96 KB,
                text/plain)

            
2021-02-21 21:39 UTC,

            jorge




Details





/var/log/lightdm/x-0.log

              (file_771957.txt,1.08 KB,
                text/plain)

            
2021-02-21 21:40 UTC,

            jorge




Details





/var/log/lightdm/x-0.log.old

              (file_771957.txt,3.98 KB,
                text/plain)

            
2021-02-21 21:41 UTC,

            jorge




Details





/var/log/Xorg.0.log

              (file_771957.txt,37.46 KB,
                text/plain)

            
2021-02-21 21:49 UTC,

            jorge




Details





.xsession-errors

              (file_771957.txt,14.14 KB,
                text/plain)

            
2021-02-21 22:23 UTC,

            jorge




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


jorge





          2021-02-21 17:09:37 UTC
        

Created attachment 687933 [details]
xfce-base/xfwm4-4.16.1 coredump

Yesterday, after a system-wide update (the system was synced one week ago before this update), my XFCE saved session wouldn't start correctly. After login (which took considerable more time than usual) "blank desktops" where displayed instead of my saved session. The programs were started, but were not accessible to me (not showing in any of the screens of my two monitor setup). If I start a new session, the problem of long login time remains but I am now able to interact with my programs after a restart. But the programs saved state (window placement) are scrambled after a restart, so there's something not quite right. I attach a coredump of xfce-base/xfwm4-4.16.1

Info on xfwm4 (some info left out for space):

emerge --info xfwm4
Portage 3.0.13 (python 3.7.9-final-0, default/linux/amd64/17.1/systemd, gcc-9.3.0, glibc-2.32-r6, 5.10.17-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-5.10.17-gentoo-x86_64-Intel-R-_Xeon-R-_CPU_E3-1285_v4_@_3.50GHz-with-gentoo-2.7
KiB Mem:    32730444 total,  28661996 free
KiB Swap:    8389628 total,   8389628 free
Timestamp of repository gentoo: Sun, 21 Feb 2021 15:30:02 +0000
Head commit of repository gentoo: b5fd6830195d614ec11bbf6465f170d0086ae4ea
sh bash 5.0_p18
ld GNU ld (Gentoo 2.35.1 p2) 2.35.1
ccache version 4.1 [enabled]
app-shells/bash:          5.0_p18::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.30.3::gentoo
dev-lang/python:          3.7.9-r2::gentoo, 3.8.7-r1::gentoo, 3.9.1-r1::gentoo
dev-util/ccache:          4.1::gentoo
dev-util/cmake:           3.18.5::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/sandbox:         2.20::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.16.2-r1::gentoo
sys-devel/binutils:       2.35.1-r1::gentoo
sys-devel/gcc:            9.3.0-r2::gentoo
sys-devel/gcc-config:     2.3.2-r1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.4-r1::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r6::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 
    sync-rsync-verify-max-age: 24
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1


=================================================================
                        Package Settings
=================================================================

xfce-base/xfwm4-4.16.1::gentoo was built with the following:
USE="opengl startup-notification xcomposite xpresent" ABI_X86="(64)"




Comment 1


Michał Górny









          2021-02-21 17:29:21 UTC
        

At the very least, you should try rebuilding xfwm4 with debug info, and see if that helps you get more context.  The backtrace right now only indicates some glib functions but it's most likely that they're being called by xfce with some invalid parameters.

See e.g. https://wiki.gentoo.org/wiki/Project:Quality_Assurance/Backtraces

(generally '-O0 -g' or '-Og -g', FEATURES=splitdebug)




Comment 2


jorge





          2021-02-21 17:43:17 UTC
        

Created attachment 687936 [details]
New coredump with -Og enabled




Comment 3


jorge





          2021-02-21 18:19:55 UTC
        

Created attachment 687939 [details]
New coredump with -Og enabled (2)

Sorry for the delay, xfwm4 is giving me a hard time. The previous backtrace shows an error in X. I don't know how are these two related but it showed in the coredump logs. This backtrace, however, is the intended xfwm4 coredump with -Og enabled




Comment 4


jorge





          2021-02-21 18:27:18 UTC
        

An update to the description of the problem: The newly created xfwm4 session has somehow been corrupted after a couple of reboots which renders the desktop unusable (as was with the my original session). I don't normally reboot so often but this shouldn't happen either.




Comment 5


Michał Górny









          2021-02-21 20:54:04 UTC
        

Could you look at console output?  If you are using a Display Manager, it should log it somewhere, probably.  The backtrace roughly looks like GTK+ is triggering a fatal abort because of some X11 error.




Comment 6


jorge





          2021-02-21 21:35:42 UTC
        

Created attachment 687954 [details]
/var/log/lightdm/lightdm.log

Certainly. I am using lightDM. Here are the logs recorded when entering a corrupted session (6 in total).




Comment 7


jorge





          2021-02-21 21:37:23 UTC
        

Created attachment 687957 [details]
/var/log/lightdm/lightdm.log.old

".old" file




Comment 8


jorge





          2021-02-21 21:38:33 UTC
        

Created attachment 687960 [details]
/var/log/lightdm/seat0-greeter.log




Comment 9


jorge





          2021-02-21 21:39:24 UTC
        

Created attachment 687963 [details]
/var/log/lightdm/seat0-greeter.log.old

greeter ".old" file




Comment 10


jorge





          2021-02-21 21:40:24 UTC
        

Created attachment 687966 [details]
/var/log/lightdm/x-0.log




Comment 11


jorge





          2021-02-21 21:41:24 UTC
        

Created attachment 687969 [details]
/var/log/lightdm/x-0.log.old

x-0 ".old"




Comment 12


jorge





          2021-02-21 21:49:40 UTC
        

Created attachment 687972 [details]
/var/log/Xorg.0.log

Full X log.




Comment 13


Michał Górny









          2021-02-21 22:09:36 UTC
        

I'm afraid none of them have what I'm looking for -- the output from xfwm4 to the console.  Sometimes the log file for that can be found in your home directory, possibly as a dotfile.




Comment 14


Michał Górny









          2021-02-21 22:10:12 UTC
        

Hmm, actually I think you can open a terminal inside your X11 session and run 'xfwm4 --replace' there.




Comment 15


jorge





          2021-02-21 22:23:53 UTC
        

Created attachment 687981 [details]
.xsession-errors

I found this file in my home directory. I will see what I can do with the command you suggested.




Comment 16


jorge





          2021-02-21 22:39:28 UTC
        

Ok, so I opened a terminal in my original corrupted saved session and issued a "xfwm4 --replace" command as a user. The previously hidden windows suddenly appeared on screen (although scrambled and unorganized) and I could interact with them. Also, the XFCE panels (I have two of them, one for each monitor) now appeared where they did not show up previously. I was expecting a log to show up in the folder where I issued the --replace command but nothing showed up. After a reboot, the original session is now accessible. But there persists the problem of  a long pause before the system logs me in and that the windows do not appear organized as they were previous to the update.




Comment 17


Michał Górny









          2021-02-21 23:46:35 UTC
        

(In reply to jorge from comment #15)
> Created attachment 687981 [details]
> .xsession-errors
> 
> I found this file in my home directory. I will see what I can do with the
> command you suggested.

Yes, this is the log I was talking about.  Unfortunately, I don't see anything coming from xfwm4.  But there's a lot of CRITICAL stuff.  However, it's a paradigm of GLib software to be actually written very badly and fail critically all the time, so hard to tell if any of them is the cause.

I'm sorry but I don't think I can help you more at this point.  The best recourse would be to try seeking help at upstream's GitLab.  Would you do that?




Comment 18


jorge





          2021-02-22 15:04:51 UTC
        

I'll research a bit more, your suggestions gave me some ideas as to what to look for. I'll get back as soon as I got something to report =)




Comment 19


jorge





          2021-03-19 20:12:43 UTC
        

On Feb 28th an update that included these packages:

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
emerge -aDNuv @world

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] acct-group/users-0::gentoo  0 KiB
[ebuild  N     ] acct-group/systemd-oom-0::gentoo  0 KiB
[ebuild  N     ] acct-group/nobody-0::gentoo  0 KiB
[ebuild  N     ] acct-group/root-0::gentoo  0 KiB
[ebuild     U  ] sys-devel/llvm-common-11.0.1::gentoo [11.0.0::gentoo] 119,913 KiB
[ebuild     U  ] dev-util/cppunit-1.15.1-r2:0/1.15::gentoo [1.14.0:0/0::gentoo] USE="-doc -examples -static-libs" ABI_X86="(64) -32 (-x32)" 796 KiB
[ebuild  N     ] acct-user/root-0-r1::gentoo  0 KiB
[ebuild  N     ] acct-user/systemd-oom-0::gentoo  0 KiB
[ebuild     U  ] sys-libs/timezone-data-2021a::gentoo [2020f::gentoo] USE="nls -leaps-timezone -zic-slim" 659 KiB
[ebuild     U  ] sys-devel/gcc-config-2.3.3::gentoo [2.3.2-r1::gentoo] USE="(cc-wrappers) (native-symlinks)" 18 KiB
[ebuild  N     ] acct-user/nobody-0::gentoo  0 KiB
[ebuild     U  ] sys-devel/clang-common-11.0.1::gentoo [11.0.0::gentoo] 0 KiB
[ebuild     U  ] app-text/mythes-1.2.4-r1::gentoo [1.2.4::gentoo] USE="(-static-libs%)" 0 KiB
[ebuild     U  ] sys-kernel/linux-headers-5.10::gentoo [5.4-r1::gentoo] USE="-headers-only" 5 KiB
[ebuild     U  ] sys-apps/systemd-247.2-r4:0/2::gentoo [246.6:0/2::gentoo] USE="acl gcrypt gnuefi hwdb kmod lz4 lzma pam pcre policykit resolvconf seccomp (split-usr) sysv-utils xkb zstd -apparmor -audit -build -cgroup-hybrid -cryptsetup -curl -dns-over-tls -elfutils -homed -http -idn -importd -nat -pkcs11 -pwquality -qrcode -repart (-selinux) -static-libs -test -vanilla" ABI_X86="32 (64) (-x32)" 9,660 KiB
[ebuild     U  ] dev-libs/serd-0.30.10::gentoo [0.30.6::gentoo] USE="-doc -static-libs -test" ABI_X86="(64) -32 (-x32)" 573 KiB
[ebuild     U  ] net-libs/nodejs-14.16.0:0/14::gentoo [14.15.4:0/14::gentoo] USE="icu npm snapshot ssl -debug -doc -inspector -pax_kernel -system-icu -system-ssl -systemtap -test" CPU_FLAGS_X86="sse2" 32,521 KiB
[ebuild  NS   ~] sys-kernel/gentoo-sources-5.10.19:5.10.19::gentoo [5.4.80-r1:5.4.80-r1::gentoo, 5.10.16:5.10.16::gentoo, 5.10.17:5.10.17::gentoo] USE="-build -experimental -symlink" 544 KiB
[ebuild     U  ] dev-util/cbindgen-0.17.0::gentoo [0.16.0::gentoo] USE="-debug" 177 KiB
[ebuild     U ~] app-office/texstudio-3.1.1::gentoo [3.1.0::gentoo] USE="-video" 81,289 KiB
[ebuild     U  ] sys-devel/llvm-11.0.1:11::gentoo [11.0.0:11::gentoo] USE="libffi ncurses xml -debug -doc -exegesis -gold -libedit -test -xar -z3" ABI_X86="32 (64) (-x32)" LLVM_TARGETS="AMDGPU BPF NVPTX (X86) -AArch64 (-ARC) -ARM -AVR -Hexagon -Lanai -MSP430 -Mips -PowerPC -RISCV -Sparc -SystemZ (-VE) -WebAssembly -XCore" 177 KiB
[ebuild     U  ] sys-libs/libomp-11.0.1::gentoo [11.0.0::gentoo] USE="(-cuda) -hwloc -offload -ompt -test" ABI_X86="(64) -32 (-x32)" 0 KiB
[ebuild     U  ] dev-libs/libebml-1.4.2:0/5::gentoo [1.4.1:0/5::gentoo] 69 KiB
[ebuild     U  ] sys-devel/lld-11.0.1::gentoo [11.0.0::gentoo] USE="-test" 0 KiB
[ebuild     U  ] sys-devel/clang-11.0.1:11::gentoo [11.0.0:11::gentoo] USE="static-analyzer xml -debug -default-compiler-rt -default-libcxx -default-lld -doc -test" ABI_X86="32 (64) (-x32)" LLVM_TARGETS="AMDGPU BPF NVPTX (X86) -AArch64 (-ARC) -ARM -AVR -Hexagon -Lanai -MSP430 -Mips -PowerPC -RISCV -Sparc -SystemZ (-VE) -WebAssembly -XCore" PYTHON_SINGLE_TARGET="python3_7 -python3_8 -python3_9" 0 KiB
[ebuild  NS    ] sys-libs/compiler-rt-sanitizers-11.0.1:11.0.1::gentoo [11.0.0:11.0.0::gentoo] USE="asan%* cfi%* clang dfsan%* gwp-asan%* hwasan%* libfuzzer msan%* profile safestack%* scudo%* tsan%* ubsan%* xray (-lsan) (-shadowcallstack) -test (-sanitize%*)" 0 KiB
[ebuild  NS    ] sys-libs/compiler-rt-11.0.1:11.0.1::gentoo [11.0.0:11.0.0::gentoo] USE="clang -test" 0 KiB
[ebuild  NS    ] sys-devel/clang-runtime-11.0.1:11.0.1::gentoo [11.0.0:11.0.0::gentoo] USE="compiler-rt openmp sanitize -libcxx" ABI_X86="(64) -32 (-x32)" 0 KiB
[ebuild     U  ] app-text/mupdf-1.18.0-r3:0/1.18.0::gentoo [1.18.0-r2:0/1.18.0::gentoo] USE="X javascript opengl ssl (-libressl)" 0 KiB
[ebuild     U ~] xfce-base/xfce4-panel-4.16.2::gentoo [4.16.1::gentoo] USE="dbusmenu introspection -vala" 1,350 KiB
[ebuild     U ~] xfce-extra/xfce4-cpugraph-plugin-1.2.3::gentoo [1.2.2::gentoo] 418 KiB
[ebuild     U  ] media-video/ffmpeg-4.3.2:0/56.58.58::gentoo [4.3.1:0/56.58.58::gentoo] USE="X alsa amr bluray bzip2 dav1d encode fontconfig gme gmp gnutls gpl iconv jack jpeg2k libcaca libdrm libv4l lzma mp3 network opencl opengl openh264 openssl postproc pulseaudio sdl svg threads truetype v4l vaapi vdpau vorbis x264 xvid zlib -amrenc (-appkit) -bs2b -cdio -chromaprint -chromium -codec2 -cpudetection (-cuda) -debug -doc -fdk -flite -frei0r -fribidi -gcrypt -gsm -hardcoded-tables -iec61883 -ieee1394 -kvazaar -ladspa -libaom -libaribb24 -libass -libilbc (-libressl) -librtmp -libsoxr -libtesseract -libxml2 -lv2 (-mipsdspr1) (-mipsdspr2) (-mipsfpu) (-mmal) -modplug -openal -opus -oss -pic -rav1e -rubberband -samba -snappy -sndio% -speex -srt -ssh -static-libs -test -theora -twolame -vidstab -vpx -vulkan -webp -x265 -zeromq -zimg -zvbi (-wavpack%*)" ABI_X86="32 (64) (-x32)" CPU_FLAGS_X86="aes avx avx2 fma3 mmx mmxext sse sse2 sse3 sse4_1 sse4_2 ssse3 -3dnow -3dnowext -fma4 -xop" FFTOOLS="aviocat cws2fws ffescape ffeval ffhash fourcc2pixfmt graph2dot ismindex pktdumper qt-faststart sidxindex trasher" VIDEO_CARDS="nvidia" 11,043 KiB
[ebuild  NS   ~] app-emulation/wine-vanilla-6.3:6.3::gentoo [6.2:6.2::gentoo] USE="X alsa cups faudio fontconfig gecko gphoto2 jpeg lcms mono mp3 nls opencl opengl perl png pulseaudio realtime run-exes sdl ssl threads truetype udev udisks unwind usb v4l xcomposite xml -capi -custom-cflags -dos -gsm -gssapi -gstreamer -kerberos -ldap -mingw -netapi -odbc -openal -osmesa -oss -pcap -prelink -samba -scanner (-selinux) -test -vkd3d -vulkan -xinerama" ABI_X86="32 64 (-x32)" 23,732 KiB
[ebuild  NS   ~] app-emulation/wine-staging-6.3:6.3::gentoo [6.2:6.2::gentoo] USE="X alsa cups faudio fontconfig gcrypt gecko gphoto2 jpeg lcms mono mp3 nls opencl opengl perl png pulseaudio realtime run-exes sdl ssl (staging) threads truetype udev udisks unwind usb v4l vaapi xcomposite xml -capi -custom-cflags -dos -gsm -gssapi -gstreamer -kerberos -ldap -mingw -netapi -odbc -openal -osmesa -oss -pcap -pipelight -prelink -samba -scanner (-selinux) -test -themes -vkd3d -vulkan -xinerama" ABI_X86="32 64 (-x32)" 9,568 KiB
[ebuild     U  ] media-gfx/nomacs-3.16.224-r2::gentoo [3.16.224-r1::gentoo] USE="jpeg opencv raw tiff zip -plugins" 0 KiB
[ebuild     U  ] mail-client/thunderbird-78.8.0:0/78::gentoo [78.7.1-r1:0/78::gentoo] USE="clang dbus jack lto openh264 pulseaudio system-av1 system-harfbuzz system-icu system-jpeg system-libevent system-libvpx system-webp -debug -eme-free -hardened -hwaccel (-pgo) (-selinux) -wayland -wifi" L10N="-af -ar -ast -be -bg -br -ca -cak -cs -cy -da -de -dsb -el -en-CA -en-GB -es-AR -es-ES -et -eu -fa -fi -fr -fy -ga -gd -gl -he -hr -hsb -hu -hy -id -is -it -ja -ka -kab -kk -ko -lt -ms -nb -nl -nn -pa -pl -pt-BR -pt-PT -rm -ro -ru -si -sk -sl -sq -sr -sv -th -tr -uz -vi -zh-CN -zh-TW" 345,019 KiB
[ebuild     U ~] www-client/firefox-86.0:0/86::gentoo [85.0.2-r1:0/85::gentoo] USE="clang dbus gmp-autoupdate hwaccel jack lto openh264 pgo pulseaudio system-av1 system-harfbuzz system-icu system-jpeg system-libevent system-libvpx system-webp -debug -eme-free -geckodriver -hardened -screencast (-selinux) -wayland -wifi" L10N="-ach -af -an -ar -ast -az -be -bg -bn -br -bs -ca -ca-valencia -cak -cs -cy -da -de -dsb -el -en-CA -en-GB -eo -es-AR -es-CL -es-ES -es-MX -et -eu -fa -ff -fi -fr -fy -ga -gd -gl -gn -gu -he -hi -hr -hsb -hu -hy -ia -id -is -it -ja -ka -kab -kk -km -kn -ko -lij -lt -lv -mk -mr -ms -my -nb -ne -nl -nn -oc -pa -pl -pt-BR -pt-PT -rm -ro -ru -si -sk -sl -son -sq -sr -sv -ta -te -th -tl -tr -trs -uk -ur -uz -vi -xh -zh-CN -zh-TW" 363,235 KiB
[ebuild     U ~] media-sound/ardour-6.6:6::gentoo [6.5-r2:6::gentoo] USE="jack nls pulseaudio (-altivec) -doc -phonehome" CPU_FLAGS_X86="mmx sse -3dnow" 11,764 KiB

Total: 38 packages (25 upgrades, 7 new, 6 in new slots), Size of downloads: 1,012,519 KiB

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

solved the issue. I think it's been 2 weeks since then and I haven't seen the problem again. So I guess it fixed itself.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

