Title: 132794 – Double messages in metalog when using console logging
URL: https://bugs.gentoo.org/show_bug.cgi?id=132794

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 132794
Double messages in metalog when using console logging
Last modified: 2006-12-29 20:53:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 132794 
      - Double messages in metalog when using console logging


Summary:
Double messages in metalog when using console logging
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

SpanKY








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-09 08:04 UTC by Miroslaw Mieszczak





      Modified:
    
2006-12-29 20:53 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ka0ttic









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Miroslaw Mieszczak





          2006-05-09 08:04:02 UTC
        

There is an annoying adwantage in metalog since version 0.8_rc1.
When metalog is used with console log function, then all messages in logfiles are duplicated. Once there are sent to files as before in old versions. Second time they are sent as information that metalog has called a command to display message in system. It lloks like that:

May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [ALKA] (IRQs 16 17 18 19 20 21 22 23) *11, disabled.
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [ALKA] (IRQs 16 17 18 19 20 21 22 23) *11, disabled." [15556].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [ALKB] (IRQs 16 17 18 19 20 21 22 23) *11, disabled.
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [ALKB] (IRQs 16 17 18 19 20 21 22 23) *11, disabled." [15557].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [ALKC] (IRQs 22) *11, disabled.
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [ALKC] (IRQs 22) *11, disabled." [15558].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [ALKD] (IRQs 21) *11, disabled.
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [ALKD] (IRQs 21) *11, disabled." [15559].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [LNKA] (IRQs *11)
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [LNKA] (IRQs *11)" [15561].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [LNKB] (IRQs *11)
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [LNKB] (IRQs *11)" [15562].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [LNKC] (IRQs *11)
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [LNKC] (IRQs *11)" [15564].
May  4 16:33:36 [kernel] ACPI: PCI Interrupt Link [LNKD] (IRQs *11)
May  4 16:33:36 [metalog] Forked command "/usr/sbin/consolelog.sh "May  4 16:33:36" "kernel" "ACPI: PCI Interrupt Link [LNKD] (IRQs *11)" [15565].


All the new messages cannot be disabled or switched off.
So in my opinion, there should be one of following solutions available:
- possibility of disabling of the messages during compilation;
- possibility of filtering of these messages via run parameters or config file;
- possibility of selection of destination file (or device) for filtered group of messages (instead of directory), and then there will be no echo messages for console log.




Comment 1


SpanKY






          2006-12-29 20:53:05 UTC
        

if you add this to your metalog.conf, it should help greatly:
Metalog :

  program  = "metalog"
  logdir   = "/var/log/metalog"
  break    = 1

the trouble with controlling the command messages on a per-section basis is that the log line for the child exit has no binding to a section ... metalog just knows that a child exited, so our only real option would be a runtime command line option to metalog ... i'll try e-mailing upstream









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

