Title: 741484 – media-libs/libglvnd-1.3.2: /usr/lib/libX11.so: error adding symbols: file in wrong format
URL: https://bugs.gentoo.org/show_bug.cgi?id=741484

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 741484
media-libs/libglvnd-1.3.2: /usr/lib/libX11.so: error adding symbols: file in wrong format
Last modified: 2020-09-10 14:41:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 741484 
      - media-libs/libglvnd-1.3.2: /usr/lib/libX11.so: error adding symbols: file in wrong format


Summary:
media-libs/libglvnd-1.3.2: /usr/lib/libX11.so: error adding symbols: file in ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-09-10 06:25 UTC by bfg





      Modified:
    
2020-09-10 14:41 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,42.88 KB,
                text/plain)

            
2020-09-10 06:25 UTC,

            bfg




Details





emerge --info

              (emergeinfo.log,6.64 KB,
                text/plain)

            
2020-09-10 06:26 UTC,

            bfg




Details





environment

              (environment,115.07 KB,
                text/plain)

            
2020-09-10 10:47 UTC,

            bfg




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


bfg





          2020-09-10 06:25:08 UTC
        

Breaks every time on linking tests/dummy/libGLX_dummy

Reproducible: Always




I didn't update it since spring, so it's probably not some recent change that breaks it




Comment 1


bfg





          2020-09-10 06:25:57 UTC
        

Created attachment 659358 [details]
build.log




Comment 2


bfg





          2020-09-10 06:26:53 UTC
        

Created attachment 659360 [details]
emerge --info




Comment 3


Ionen Wolkens






          2020-09-10 06:45:39 UTC
        

That's strange, while configuring for abi_x86_32 your log is using "gcc" instead of well.. "x86_64-pc-linux-gnu-gcc -m32" and reporting x86_64 for both.

Unable to reproduce on my end, don't know what is causing this but I "doubt" it has much to do with this package directly and there's something interfering.




Comment 4


bfg





          2020-09-10 08:27:12 UTC
        

Thanks for the pointer, looks like overriding CC drops -m32  for some reason. But can it not?




Comment 5


Ionen Wolkens






          2020-09-10 08:41:58 UTC
        

(In reply to bfg from comment #4)
> Thanks for the pointer, looks like overriding CC drops -m32  for some
> reason. But can it not?
Was just an observation to help point in the right direction, setting CC is not the solution.

Someone more involved with how meson/multilib/eclass do things may know what's happening already but meanwhile perhaps providing this file could help:
/var/tmp/portage/media-libs/libglvnd-1.3.2/temp/environment




Comment 6


bfg





          2020-09-10 10:47:48 UTC
        

Created attachment 659372 [details]
environment




Comment 7


Ionen Wolkens






          2020-09-10 11:04:33 UTC
        

Your emerge --info was showing that CC/CXX weren't set, but in your environment they are set. I also see other things that really shouldn't be set such as BUILD_CC=gcc, if I do `BUILD_CC=gcc emerge -1 libglvnd` I can reproduce your issue.

Are you using some kind of special configuration system from those overlays, or setting these things through package.env?




Comment 8


bfg





          2020-09-10 11:25:07 UTC
        

(In reply to Ionen Wolkens from comment #7)
> Your emerge --info was showing that CC/CXX weren't set, but in your
> environment they are set. I also see other things that really shouldn't be
> set such as BUILD_CC=gcc, if I do `BUILD_CC=gcc emerge -1 libglvnd` I can
> reproduce your issue.
> 
> Are you using some kind of special configuration system from those overlays,
> or setting these things through package.env?

Yes, CC and BUILD_CC are set in bashrc




Comment 9


Jonas Stein






          2020-09-10 14:41:45 UTC
        

It is sad to read that you have problems with the software. The situation seems to be a bit more complicate and requires some analysis.
We can not help you efficiently via bug tracker. The bug tracker aims rather on specific problems in .ebuilds and less on individual systems. 

I have had very good experience on the gentoo IRC [1] with questions like this. Of course there are also forums and mailing lists [2,3].
I hope you understand, that I will close the bug here therefore and wish you good luck on one of the mentioned channels [4].
Please reopen the ticket in order to provide an indication for an specific error in an ebuild or any gentoo related product.

[1] https://www.gentoo.org/get-involved/irc-channels/
[2] https://forums.gentoo.org/
[3] https://www.gentoo.org/get-involved/mailing-lists/all-lists.html
[4] https://www.gentoo.org/support/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

