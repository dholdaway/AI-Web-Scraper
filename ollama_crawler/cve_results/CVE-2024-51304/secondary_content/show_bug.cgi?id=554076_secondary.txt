Title: 554076 – www-client/chromium-43.0.2357.130 fails to compile with error: no matching function for call to 'base::FundamentalValue::FundamentalValue(const base::DictionaryValue&)'
URL: https://bugs.gentoo.org/show_bug.cgi?id=554076

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 554076
www-client/chromium-43.0.2357.130 fails to compile with error: no matching function for call to 'base::FundamentalValue::FundamentalValue(const base::DictionaryValue&)'
Last modified: 2015-10-22 03:45:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 554076 
      - www-client/chromium-43.0.2357.130 fails to compile with error: no matching function for call to 'base::FundamentalValue::FundamentalValue(const base::DictionaryValue&)'


Summary:
www-client/chromium-43.0.2357.130 fails to compile with error: no matching fu...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:
ht-wanted  
  


Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-07-06 11:35 UTC by Vincent de Phily





      Modified:
    
2015-10-22 03:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



moltonel









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log.gz,650.71 KB,
                application/x-gzip)

            
2015-07-06 11:38 UTC,

            Vincent de Phily




Details





emerge --info on machine with failure

              (info-error.txt,5.71 KB,
                text/plain)

            
2015-07-10 12:51 UTC,

            Arvind Jayaprakash




Details





emerge --info on machine with success

              (info-success.txt,5.95 KB,
                text/plain)

            
2015-07-10 12:53 UTC,

            Arvind Jayaprakash




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vincent de Phily





          2015-07-06 11:35:42 UTC
        

Getting repeated failures trying to build latest stable chromium. Amd64 hardened, gcc 4.8.4. Depending on timing, I get one or more of these errors:

In file included from ../../content/browser/devtools/protocol/devtools_protocol_handler.h:8:0,
                 from gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.cc:11:
gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h: In instantiation of 'base::Value* content::devtools::CreateValue(const T&) [with T = base::DictionaryValue]':
gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h:45:36:   required from 'base::Value* content::devtools::CreateValue(std::vector<_RealType>) [with T = base::DictionaryValue]'
gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h:1616:42:   required from here
gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h:28:42: error: no matching function for call to 'base::FundamentalValue::FundamentalValue(const base::DictionaryValue&)'
   return new base::FundamentalValue(param);
                                          ^
gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h:28:42: note: candidates are:
In file included from ../../content/browser/devtools/protocol/devtools_protocol_client.h:9:0,
                 from gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.h:14,
                 from ../../content/browser/devtools/protocol/devtools_protocol_handler.h:8,
                 from gen/content/browser/devtools/protocol/devtools_protocol_dispatcher.cc:11:
../../base/values.h:125:12: note: base::FundamentalValue::FundamentalValue(double)
   explicit FundamentalValue(double in_value);
            ^
../../base/values.h:125:12: note:   no known conversion for argument 1 from 'const base::DictionaryValue' to 'double'
../../base/values.h:124:12: note: base::FundamentalValue::FundamentalValue(int)
   explicit FundamentalValue(int in_value);
            ^
../../base/values.h:124:12: note:   no known conversion for argument 1 from 'const base::DictionaryValue' to 'int'
../../base/values.h:123:12: note: base::FundamentalValue::FundamentalValue(bool)
   explicit FundamentalValue(bool in_value);
            ^
../../base/values.h:123:12: note:   no known conversion for argument 1 from 'const base::DictionaryValue' to 'bool'
../../base/values.h:121:19: note: base::FundamentalValue::FundamentalValue(const base::FundamentalValue&)
 class BASE_EXPORT FundamentalValue : public Value {
                   ^
../../base/values.h:121:19: note:   no known conversion for argument 1 from 'const base::DictionaryValue' to 'const base::FundamentalValue&'

Reproducible: Always




Comment 1


Vincent de Phily





          2015-07-06 11:38:35 UTC
        

Created attachment 406242 [details]
build log




Comment 2


Vincent de Phily





          2015-07-06 11:39:17 UTC
        

# emerge --info '=www-client/chromium-43.0.2357.130::gentoo'
Portage 2.2.18 (python 3.4.1-final-0, hardened/linux/amd64, gcc-4.8.4, glibc-2.20-r2, 3.18.9-hardened x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-3.18.9-hardened-x86_64-Intel-R-_Core-TM-_i7-4800MQ_CPU_@_2.70GHz-with-gentoo-2.2
KiB Mem:     8061704 total,   2485040 free
KiB Swap:    7912008 total,   7347652 free
Timestamp of repository gentoo: Mon, 06 Jul 2015 08:30:01 +0000
sh dash 0.5.7.4
ld GNU ld (Gentoo 2.24 p1.4) 2.24
app-shells/bash:          4.3_p33-r2::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.9-r1::gentoo, 3.3.5-r1::gentoo, 3.4.1::gentoo
dev-util/cmake:           3.2.2::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.17::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.13.4::gentoo, 1.14.1::gentoo
sys-devel/binutils:       2.24-r3::gentoo
sys-devel/gcc:            4.8.4::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

sunrise
    location: /var/lib/layman/sunrise
    masters: gentoo
    priority: 0

ultrabug
    location: /var/lib/layman/ultrabug
    masters: gentoo
    priority: 1

moltonel
    location: /home/work/c/ebuilds
    masters: gentoo
    priority: 2

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA AdobeFlash-11.x skype-4.0.0.7-copyright google-chrome"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/stunnel/stunnel.conf /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/easy-rsa /usr/share/gnupg/qualified.txt /var/spool/munin-async/.ssh"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -march=native -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--quiet-build"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs clean-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="                            ftp://ftp.free.fr/mirrors/ftp.gentoo.org/ http://mirror.ovh.net/gentoo-distfiles/ http://ftp.heanet.ie/pub/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-s -j8 -l7"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="X aac acl akonadi alsa amd64 apache2 apng avahi bash-completion berkdb bluetooth bzip2 cdda cli cracklib crypt cups cxx dbus declarative dri dvd ebook emacs encode epub erlang exif ffmpeg flac fontconfig gcj gdbm gstreamer gudev hardened iconv icu ipv6 jit jpeg jpeg2k json justify kde kdepim lzma marble mmx mmxext mng modules mp3 mpeg mplayer mtp multilib mysql ncurses nls nptl ogg opengl openmp openssl opus pam pax_kernel pcre pdf pie plasma png policykit postgres printsupport prison pulseaudio python qrcode qt4 readline scanner script semantic-desktop session shapefile silk spatialite speex sql sqlite sse sse2 ssl ssp svg tcpd telepathy theora threads tiff truetype unicode upnp urandom v4l video vorbis webkit wifi x264 xattr xcb xmp xtpax xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 fma3 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python3_4" PYTHON_TARGETS="python2_7 python3_4 pypy pypy3" RUBY_TARGETS="ruby20" USERLAND="GNU" VIDEO_CARDS="vesa intel radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7 3.4"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Vincent de Phily





          2015-07-06 11:40:03 UTC
        

# emerge -pqv '=www-client/chromium-43.0.2357.130::gentoo'
[ebuild     U ] www-client/chromium-43.0.2357.130 [43.0.2357.65] USE="cups (pic) proprietary-codecs pulseaudio tcmalloc -custom-cflags -gnome -gnome-keyring -hidpi -hotwording% -kerberos (-neon) (-selinux) {-test} -widevine" LINGUAS="-am* -ar* -bg* -bn* -ca* -cs* -da* -de* -el* -en_GB* -es* -es_LA* -et* -fa* -fi* -fil* -fr* -gu* -he* -hi* -hr* -hu* -id* -it* -ja* -kn* -ko* -lt* -lv* -ml* -mr* -ms* -nb* -nl* -pl* -pt_BR* -pt_PT* -ro* -ru* -sk* -sl* -sr* -sv* -sw* -ta* -te* -th* -tr* -uk* -vi* -zh_CN* -zh_TW*"




Comment 4


Paweł Hajdan, Jr. (RETIRED)






          2015-07-09 14:38:35 UTC
        

Can anyone else reproduce? I've tried but it compiled fine.




Comment 5


Arvind Jayaprakash





          2015-07-10 12:50:33 UTC
        

I have been able to reproduce this as well. In fact, I have two machines that run gentoo and the exact same build works on one but doesn't work on another




Comment 6


Arvind Jayaprakash





          2015-07-10 12:51:59 UTC
        

Created attachment 406462 [details]
emerge --info on machine with failure




Comment 7


Arvind Jayaprakash





          2015-07-10 12:53:09 UTC
        

Created attachment 406464 [details]
emerge --info on machine with success




Comment 8


Vincent de Phily





          2015-07-10 15:23:17 UTC
        

I've tried a few things :
* Reemerge all of chromium's direct dependencies (as seen from equery g)
* use vanilla gcc instead of gcc hardened
* disable cups and proprietary-codecs use flags
* unmask version 44.0.2403.61

But I keep getting the same error. It takes over an hour to reach the failure spot, so testing is slow.




Comment 9


Vincent de Phily





          2015-08-31 16:13:40 UTC
        

After nearly a month of not being able to compile chromium (and being stuck with version 43 that wasn't in the three anymore), version 45.0.2454.46 compiled fine today. Chances are that the gcc 4.8.4 -> 4.8.5 update that came just before it did the trick.

Arvind, is it the same story on your side ?




Comment 10


Arvind Jayaprakash





          2015-09-27 02:04:04 UTC
        

I continue to face the same issues. The machine on which 43.0.2357.130 did not compile encounters an error with 45.0.2454.85 as well. Likewise the machine on which 43.0.2357.130 compiled had not issues with 45.0.2454.85.

The gcc version is 4.8.4 on both machines.




Comment 11


Vincent de Phily





          2015-09-27 09:25:34 UTC
        

Arvind, does upgrading to 4.8.5 fiz the issue ? If so, maybe the chromium ebuild should require that gcc version.




Comment 12


Arvind Jayaprakash





          2015-10-10 05:15:57 UTC
        

Vincent, I do have two machines running gentoo both of which are on gcc 4.8.4. chromium builds successfuly one of those but doesn't on the other. I am comparing the emerge --info output between the two machines and also what you provided to see what the issue is.

It appears that the build process is generating some sources and it is this code that has a compilation error. I now need to guess which package is altering the nature of the source generated that is causing this error.




Comment 13


Arvind Jayaprakash





          2015-10-22 03:45:58 UTC
        

Upgrading gcc to 4.8.5 did solve the problem for me as well.

However, I still do not believe that to be the root cause based on the fact that I did manage to get the same versions build on another machine with 4.8.4









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

