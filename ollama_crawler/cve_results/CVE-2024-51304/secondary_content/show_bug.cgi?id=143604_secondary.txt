Title: 143604 – games-strategy/freeciv fails to build on ppc (-lm missing)
URL: https://bugs.gentoo.org/show_bug.cgi?id=143604

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 143604
games-strategy/freeciv fails to build on ppc (-lm missing)
Last modified: 2006-08-16 05:22:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 143604 
      - games-strategy/freeciv fails to build on ppc (-lm missing)


Summary:
games-strategy/freeciv fails to build on ppc (-lm missing)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-11 13:17 UTC by Matti Bickel (RETIRED)





      Modified:
    
2006-08-16 05:22 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ppc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matti Bickel (RETIRED)






          2006-08-11 13:17:27 UTC
        

Compiling latest freeciv-2.0.8-r1 fails here with the following error:
powerpc-unknown-linux-gnu-gcc  -O2 -mtune=G4 -maltivec -mabi=altivec -pipe -Wall -Wpointer-arith -Wcast-align -Wmissing-prototypes -Wmissing-declarations   -o civserver  civserver.o ../utility/libcivutility.a ../common/libcivcommon.a ../ai/libcivai.a ../utility/libcivutility.a ./libcivserver.a ../utility/libcivutility.a ../common/libcivcommon.a ../ai/libcivai.a ../utility/libcivutility.a ./libcivserver.a ../utility/libcivutility.a ../common/aicore/libaicore.a ./generator/libgenerator.a  -lreadline   -lz  
./libcivserver.a(gamehand.o): In function `place_starting_unit':
gamehand.c:(.text+0x7e0): undefined reference to `sqrt'
../common/libcivcommon.a(combat.o): In function `win_chance':
combat.c:(.text+0xc38): undefined reference to `pow'
../common/libcivcommon.a(tech.o): In function `precalc_tech_data':
tech.c:(.text+0x6b8): undefined reference to `sqrt'
tech.c:(.text+0x720): undefined reference to `sqrt'
../ai/libcivai.a(aiexplorer.o): In function `ai_manage_explorer':
aiexplorer.c:(.text+0x344): undefined reference to `log'
aiexplorer.c:(.text+0x36c): undefined reference to `log'
aiexplorer.c:(.text+0x7f4): undefined reference to `log'
./generator/libgenerator.a(mapgen.o): In function `place_terrain':
mapgen.c:(.text+0x25b0): undefined reference to `sqrt'
mapgen.c:(.text+0x25ec): undefined reference to `sqrt'
./generator/libgenerator.a(mapgen.o): In function `map_fractal_generate':
mapgen.c:(.text+0x4df4): undefined reference to `sqrt'
mapgen.c:(.text+0x4e34): undefined reference to `sqrt'
mapgen.c:(.text+0x4eac): undefined reference to `sqrt'
./generator/libgenerator.a(mapgen.o):mapgen.c:(.text+0x4ee8): more undefined references to `sqrt' follow
collect2: ld returned 1 exit status
make[3]: *** [civserver] Error 1
make[3]: Leaving directory `/var/tmp/portage/freeciv-2.0.8-r1/work/freeciv-2.0.8/server'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/freeciv-2.0.8-r1/work/freeciv-2.0.8/server'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/freeciv-2.0.8-r1/work/freeciv-2.0.8'
make: *** [all] Error 2

!!! ERROR: games-strategy/freeciv-2.0.8-r1 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  freeciv-2.0.8-r1.ebuild, line 159:   Called die

obviously the build is missing -lm here. I'm not sure what's going on right now, wanted to report that anyway.

Freeciv-2.0.8-r1 built with:
[ebuild     U ] games-strategy/freeciv-2.0.8-r1 [2.0.8] USE="alsa gtk nls readline sdl -Xaw3d -dedicated -esd"

Gentoo Base System version 1.6.15
Portage 2.1-r2 (default-linux/ppc/ppc32/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-20060623 ppc)
=================================================================
System uname: 2.6.17-20060623 ppc 7455, altivec supported
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r4
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mtune=G4 -maltivec -mabi=altivec -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -mtune=G4 -maltivec -mabi=altivec -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache collision-protect confcache distlocks metadata-transfer sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://mirror.switch.ch/ftp/mirror/gentoo/ http://pandemonium.tiscali.de/pub/gentoo/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="en_US.ISO-8859-1"
LINGUAS="de en en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/local /usr/portage/local/layman/science /usr/portage/local/layman/postgresql-experimental"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="ppc X alsa altivec apache2 apm bitmap-fonts bonobo bzip2 cdr cli crypt curl dlloader dri dvd eds emboss encode foomaticdb gif gpm gstreamer gtkhtml imlib ipv6 isdnlog jpeg kde libg++ libwww mad motif mozilla mp3 mpeg ncurses nls nptl ogg opengl pam pcre pdflib perl pic png pppd python qt3 qt4 quicktime readline reflection samba sdl session slang spell spl ssl svg tcpd truetype truetype-fonts type1-fonts udev unicode vorbis xinerama xml xorg xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_de linguas_en linguas_en_GB userland_GNU video_cards_radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Matti Bickel (RETIRED)






          2006-08-16 05:22:55 UTC
        

I dunno what caused this, still. But after a sync and a emerge -uD world, it worked out fine. Sorry for the noise.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

