Title: 129442 – sys-libs/libstdc++-v3-3.3.6 fails to compile using gcc-4.1.0 with MAKEOPTS="-j2"
URL: https://bugs.gentoo.org/show_bug.cgi?id=129442

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 129442
sys-libs/libstdc++-v3-3.3.6 fails to compile using gcc-4.1.0 with MAKEOPTS="-j2"
Last modified: 2006-04-13 09:05:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 129442 
      - sys-libs/libstdc++-v3-3.3.6 fails to compile using gcc-4.1.0 with MAKEOPTS="-j2"


Summary:
sys-libs/libstdc++-v3-3.3.6 fails to compile using gcc-4.1.0 with MAKEOPTS="-j2"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GCC Porting

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Please assign to toolchain








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-10 00:58 UTC by Marcin Deranek





      Modified:
    
2006-04-13 09:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marcin Deranek





          2006-04-10 00:58:31 UTC
        

When trying to compile sys-libs/libstdc++-v3-3.3.6 using gcc-4.1.0 it fails. After some experimenting I found out that setting MAKEOPTS="" (previously MAKEOPTS="-j2") fixes the problem. I haven't tried previous gcc versions, but so far I haven't got such problem.
Here is the error message I get:

<snip>
./genextract /var/tmp/portage/libstdc++-v3-3.3.6/work/gcc-3.3.6/gcc/config/i386/
i386.md > tmp-extract.c
/bin/sh /var/tmp/portage/libstdc++-v3-3.3.6/work/gcc-3.3.6/gcc/move-if-change tm
p-extract.c insn-extract.c
insn-extract.c is unchanged
echo timestamp > s-extract
done
Forming and outputing automata tables...done
Output functions to work with automata...done

Automaton `pentium'
       48 NDFA states,             90 NDFA arcs
       48 DFA states,              90 DFA arcs
       20 minimal DFA states,      62 minimal DFA arcs
       29 all insns         16 insn equivalence classes
   62 transition comb vector els,   320 trans table els: use comb vect
   62 state alts comb vector els,   320 state alts table els: use comb vect
  768 min delay table els, compression factor 2

Automaton `pentium_fpu'
       80 NDFA states,            172 NDFA arcs
       80 DFA states,             172 DFA arcs
       75 minimal DFA states,     162 minimal DFA arcs
       29 all insns          8 insn equivalence classes
  164 transition comb vector els,   600 trans table els: use comb vect
  164 state alts comb vector els,   600 state alts table els: use comb vect
  640 min delay table els, compression factor 1

  237 all allocated states,       236 all allocated arcs
  342 all allocated alternative states
  226 all transition comb vector els,   920 all trans table els
  226 all state alts comb vector els,   920 all state alts table els
 1408 all min delay table els
   12 locked states num

  transformation: 0.002000, building DFA: 0.004000
  DFA minimization: 0.000999, making insn equivalence: 0.000000
 all automaton generation: 0.005999, output: 0.002999
/bin/sh /var/tmp/portage/libstdc++-v3-3.3.6/work/gcc-3.3.6/gcc/move-if-change tm
p-attrtab.c insn-attrtab.c
mv: cannot stat `tmp-attrtab.c': No such file or directory
make[3]: *** [s-attrtab] Error 1
make[3]: Leaving directory `/var/tmp/portage/libstdc++-v3-3.3.6/work/build/gcc'
make[2]: *** [32/crtend.o] Error 2
make[2]: Leaving directory `/var/tmp/portage/libstdc++-v3-3.3.6/work/build/gcc'
make[1]: *** [stmp-multilib] Error 2
make[1]: Leaving directory `/var/tmp/portage/libstdc++-v3-3.3.6/work/build/gcc'
make: *** [all-gcc] Error 2

!!! ERROR: sys-libs/libstdc++-v3-3.3.6 failed.
Call stack:
  ebuild.sh, line 1532:   Called dyn_compile
  ebuild.sh, line 929:   Called src_compile
  libstdc++-v3-3.3.6.ebuild, line 233:   Called die



emerge --info:
Portage 2.1_pre7-r5 (default-linux/amd64/2005.1, gcc-4.1.0, glibc-2.4-r1, 2.6.16-beyond1 x86_64)
=================================================================
System uname: 2.6.16-beyond1 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.0_pre17
ccache version 2.4 [enabled]
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=athlon64 -mtune=athlon64 -ftracer -ftree-vectorize -fprefetch-loop-arrays -floop-optimize2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon64 -mtune=athlon64 -ftracer -ftree-vectorize -fprefetch-loop-arrays -floop-optimize2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.nutsmaas.nl/gentoo/"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--sort-common"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac aalib accessibility acpi adns alsa apm audiofile avi bash-completion bcmath berkdb bidi bindist bitmap-fonts bluetooth bzip2 cairo cdparanoia cdr clamav crypt cscope ctype cups curl curlwrappers dga dio directfb dri dts dv dvb dvd dvdr dvdread emul-linux-x86 encode evo exif expat fbcon ffmpeg fftw flac flatfile foomaticdb ftp gb gcj gd gdbm ggi gif ginac glitz glut gmp gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gtkhtml guile hal iconv idn imagemagick imlib ipv6 isdnlog java javascript jikes jpeg jpeg2k lcms lesstif libcaca libedit libgda libwww lm_sensors lzw lzw-tiff m17n-lib mad maildir matroska mbox mcal memlimit mhash mikmod mime mmap mng mono motif mozilla mp3 mpeg mpi msession ncurses nls nptl nsplugin offensive ogg oggvorbis openal opengl osc oss pam pcntl pcre pda pdf pdflib perl pic plotutils png portaudio posix ppds pppd python quicktime readline recode scanner sdl session sharedmem shorten simplexml skey slang slp sndfile snmp sockets socks5 sox speex spell ssl svg sysvipc szip tcltk tcpd test theora threads tidy tiff truetype truetype-fonts type1-fonts unicode usb v4l vcd videos vorbis wifi wmf wxwindows x264 xine xinerama xml xml2 xmlrpc xosd xpm xsl xv xvid yaz zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux userland_GNU video_cards_fglrx"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS




Comment 1


Mike Cvet





          2006-04-13 08:58:55 UTC
        

Works for me here with "-j2".

Portage 2.0.54 (default-linux/amd64/2006.0, gcc-4.1.0, glibc-2.4-r1, 2.6.15-ck3-r1 x86_64)
=================================================================
System uname: 2.6.15-ck3-r1 x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -pipe -ftracer -funit-at-a-time"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib64/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=k8 -pipe -ftracer -funit-at-a-time"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks multilib-strict nostrip sandbox sfperms strict"
GENTOO_MIRRORS="http://mirrors.acm.cs.rpi.edu/gentoo/ http://gentoo.mirrors.pair.com/ http://mirror.datapipe.net/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa apache2 audiofile avi berkdb bitmap-fonts bzip2 cdr clamav cli crypt ctype cups dba dri dvdr eds emboss encode esd exif expat fam fastbuild foomaticdb force-cgi-redirect fortran ftp gcj gd gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml hal hald idn imlib ipv6 isdnlog java jpeg lcms lzw lzw-tiff memlimit mng mozilla mp3 mpeg msn ncurses nls nptl nptlonly oggvorbis opengl pam pcre pdflib perl png posix pppd python qt quicktime readline sdl session simplexml soap sockets sox spell spl ssl tcpd tiff tokenizer truetype truetype-fonts type1-fonts udev usb xine xml xml2 xpm xsl xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 2


Mark Loeser (RETIRED)






          2006-04-13 09:05:41 UTC
        

No one else can reproduce this, so it is probably an issue with your system.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

