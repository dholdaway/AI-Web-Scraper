Title: 132634 – app-i18n/canna-3.7_p2 - sandbox violation when re-emering
URL: https://bugs.gentoo.org/show_bug.cgi?id=132634

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 132634
app-i18n/canna-3.7_p2 - sandbox violation when re-emering
Last modified: 2006-11-01 00:43:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 132634 
      - app-i18n/canna-3.7_p2 - sandbox violation when re-emering


Summary:
app-i18n/canna-3.7_p2 - sandbox violation when re-emering
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

CJK Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-07 17:45 UTC by Mark Purtill





      Modified:
    
2006-11-01 00:43 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



gilhad
hiyuh.root









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mark Purtill





          2006-05-07 17:45:32 UTC
        

If I try to emerge canna after doing "emerge -C canna" first, I have not problems.  But if I try to re-emerge again (if, say, I change use flags and then do emerge --newuse), I get the following error:
...
make[1]: Leaving directory `/var/tmp/portage/canna-3.7_p2/work/Canna37p2/doc'
ACCESS DENIED  symlink:   /var/tmp/portage/canna-3.7_p2/image/usr/sbin/cannakill
ln: creating symbolic link `/var/tmp/portage/canna-3.7_p2/image//usr/sbin/cannakill' to `../bin/catdic': Permission denied
>>> Completed installing canna-3.7_p2 into /var/tmp/portage/canna-3.7_p2/image/

--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-app-i18n_-_canna-3.7_p2-24382.log"

symlink:   /var/tmp/portage/canna-3.7_p2/image/usr/sbin/cannakill (symlink to /usr/bin/catdic)
--------------------------------------------------------------------------------

% emerge --info

Portage 2.1_pre10-r3 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.6-r4, 2.6.16-gentoo-r6 i686)
=================================================================
System uname: 2.6.16-gentoo-r6 i686 AMD Athlon(tm) XP 1900+
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-g -O2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-g -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages metadata-transfer nostrip sandbox sfperms strict userpriv"
GENTOO_MIRRORS="http://mymirror.asiaosc.org/gentoo/ ftp://213.186.33.38/gentoo-distfiles/ ftp://ftp.sh.cvut.cz/MIRRORS/gentoo/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://mirror.pacific.net.au/linux/Gentoo ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://gentoo.osuosl.org/ "
LINGUAS="en ja"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=300"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 3dnow X Xaw3d aac aalib alsa apm arts avi berkdb bindist bitmap-fonts bzip2 canna cdr cjk cli crypt cups debug doc dri dvd eds emboss encode esd foomaticdb fortran freetype freewnn gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog java joystick jpeg kde kdexdeltas libg++ libwww lm_sensors mad maildir mbox mikmod mng mozsvg mp3 mpeg mule ncurses nls noantlr nobcel nobeanutils nobsh nocommonslogging nocommonsnet nodrm nojdepend nojsch nojython nolog4j nooro noregexp norhino noxalan noxerces ogg oggvorbis opengl oss pam pcre pdflib perl pic png pppd python qt quicktime readline reflection ruby scanner sdl session spell spl sse ssl tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts unicode usb vorbis wmf xine xinerama xml2 xmms xorg xv zlib elibc_glibc kernel_linux linguas_en linguas_ja userland_GNU video_cards_matrox"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS




Comment 1


hiyuh





          2006-06-25 22:51:59 UTC
        

well, this report is a dupe of #132635?




Comment 2


Mamoru KOMACHI (RETIRED)






          2006-06-26 05:11:22 UTC
        

No, it isn't.

It looks like the problem in dosym function, which should be resolved in upgrading portage to the latest version. Could you upgrade portage to the latest stable and try emerging canna again?




Comment 3


Diego Elio Pettenò (RETIRED)






          2006-10-20 17:45:27 UTC
        

This should be fixed with the current stable portage.





Comment 4


gilhad





          2006-11-01 00:43:18 UTC
        

I did 
emerge --sync 
emerge -b --newuse world
yesterday and run into it too (/var, /var/tmp, /var/tmp/portage are NOT symlinks). Also 
emerge -b canna 
do the same (unmerging and reemerging canna works good)

# emerge -pv app-i18n/canna
[ebuild   R   ] app-i18n/canna-3.7_p2  USE="-doc (-canna%*)" 0 kB

# emerge -b app-i18n/canna
......
installing man pages in ./doc...
install.man in doc done
ACCESS DENIED  symlink:   /var/tmp/portage/canna-3.7_p2/image/usr/sbin/cannakill
ln: creating symbolic link `/var/tmp/portage/canna-3.7_p2/image//usr/sbin/cannakill' to `../bin/catdic': Permission denied
>>> Completed installing canna-3.7_p2 into /var/tmp/portage/canna-3.7_p2/image/
           
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-app-i18n_-_canna-3.7_p2-1325.log"

symlink:   /var/tmp/portage/canna-3.7_p2/image/usr/sbin/cannakill (symlink to /usr/bin/catdic)
--------------------------------------------------------------------------------


# cat /var/log/sandbox/sandbox-app-i18n_-_canna-3.7_p2-1325.log
symlink:   /var/tmp/portage/canna-3.7_p2/image/usr/sbin/cannakill (symlink to /usr/bin/catdic)

# emerge --info
Portage 2.1.1-r1 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.4-r3, 2.6.16-gentoo-r9 i686)
=================================================================
System uname: 2.6.16-gentoo-r9 i686 AMD Athlon(tm) processor
Gentoo Base System version 1.12.5
Last Sync: Tue, 31 Oct 2006 09:30:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j1 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aac aalib alsa apache2 apm arts artswrappersuid asf avi berkdb bitmap-fonts bzlib canna cdr cli cpudetection cracklib crypt cups dga divx4linux dlloader doc dri dv dvb dvd dvdr dvdread eds elibc_glibc emboss encode escreen flac fmod foomaticdb fortran freetype ftp gdbm gif gimp gimpprint gnome gphoto2 gpm gstreamer gtk gtk2 iconv icq imagemagick imlib input_devices_keyboard input_devices_mouse input_devices_wacom isdnlog java joystick jpeg kde kernel_linux libcaca libg++ libwww live log4j lzw-tiff mad matroska matrox mbox mikmod mmx mmx2 mmxext motif mozdevelop mozilla mp3 mpeg mpeg4 mysql native ncurses nls nptl nptlonly objc offensive ogg opengl oqqvorbis oss pam pcre pdflib perl png posix ppds pppd pthreads python qt qt3 qt4 quicktime readline real recode reflection regexp scanner sdk sdl session slang snmp speex spell spl ssl svga tcpd tetex threads tiff transcode truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_mga vidix vorbis win32codecs win4lin x264 xinerama xml xml2 xorg xpm xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY












Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

