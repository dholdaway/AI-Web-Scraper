Title: 233707 – dev-util/cmake-2.4.8 fails to link
URL: https://bugs.gentoo.org/show_bug.cgi?id=233707

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 233707
dev-util/cmake-2.4.8 fails to link
Last modified: 2008-08-27 21:29:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 233707 
      - dev-util/cmake-2.4.8 fails to link


Summary:
dev-util/cmake-2.4.8 fails to link
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-02 14:04 UTC by Patrizio Bassi





      Modified:
    
2008-08-27 21:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrizio Bassi





          2008-08-02 14:04:47 UTC
        

[ 96%] Built target cpack
[ 97%] Building CXX object Source/CMakeFiles/ccmake.dir/CursesDialog/cmCursesPathWidget.o
Linking CXX executable ../bin/ctest
[ 97%] Building CXX object Source/CMakeFiles/ccmake.dir/CursesDialog/cmCursesStringWidget.o
[ 98%] Building CXX object Source/CMakeFiles/ccmake.dir/CursesDialog/cmCursesWidget.o
/usr/lib/gcc/x86_64-pc-linux-gnu/4.3.1/../../../../lib64/libxmlrpc.so: undefined reference to `xmlrpc_limit_get'
collect2: ld returned 1 exit status
make[2]: *** [bin/ctest] Error 1
make[1]: *** [Source/CMakeFiles/ctest.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
[ 98%] Building CXX object Source/CMakeFiles/ccmake.dir/CursesDialog/ccmake.o
Linking CXX executable ../bin/ccmake
[ 98%] Built target ccmake
make: *** [all] Error 2

i rebuilt the libxmlrpc, but no luck...




Comment 1


Patrizio Bassi





          2008-08-02 14:05:04 UTC
        

 emerge info
shell-init: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory
shell-init: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory
*** Deprecated use of action 'info', use '--info' instead
Portage 2.2_rc6 (default/linux/amd64/2008.0/desktop, gcc-4.3.1, glibc-2.8_p20080602-r0, 2.6.26 x86_64)
=================================================================
System uname: Linux-2.6.26-x86_64-Intel-R-_Core-TM-2_CPU_6300_@_1.86GHz-with-glibc2.2.5
Timestamp of tree: Sat, 02 Aug 2008 10:15:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.5.2-r5
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.62-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -pipe -mtune=core2 -march=core2 -fomit-frame-pointer -mmmx -msse -msse2 -msse3 -mfpmath=sse"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/mail/dspam /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/config /var/lib/hsqldb /var/run/dspam"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O3 -pipe -mtune=core2 -march=core2 -fomit-frame-pointer -mmmx -msse -msse2 -msse3 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch preserve-libs sandbox sfperms strict unmerge-orphans"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="39"
LC_ALL="it_IT.utf8"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,--enable-new-dtags -Wl,--as-needed -Wl,--hash-style=gnu"
LINGUAS="it"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/mnt/Dati/Gentoo/tmp/"
PORTDIR="/mnt/Dati/Gentoo/portage/"
PORTDIR_OVERLAY="/usr/local/portage/myportage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="64bit 7zip X X509 Xaw3d a52 aac aalib accessibility ace acl acpi activefilter addbookmarks adns aiglx aio alias alsa amd amd64 amr amrr amuled ao aoss apache2 arj asf aspnet2 async atk audacious audiofile authfile automount autoreplace bash-completion berkdb bidi binary-drivers bittorrent blas bootsplash branding browserplugin bzip2 cairo calendar caps cdda cddb cdio cdparanoia cdr cgi charconv chardet chroot ciao clamav clearcase cli client codecs connectionstatus contactnotes corba cracklib crypt cscope css ctype cups curl cvs daemon dar64 dba dbus depth32 dga dhcp dio directfb diskio divx djbfft dmi dri dvd dvdr dvdread edl eds emboss encode ethereal evo exif expat extraengine faac faad fam fastbuild ffmpeg fftw firefox flac flash foreign-package fortran ftp gcj gd gdbm geometry ggi gif gimp gimpprint glibc-omitfp glitz glut glx gnokii gnome gnutls gphoto2 gpm graphviz gs gstreamer gtk gtk2 gtkhtml h264 hal hddtemp highlight history iconv idea idn imagemagick imap innodb ipod ipv6 irc irda irmc isdnlog jack java java5 javamail javascript jikes jit joystick jpeg jpeg2k junit justify kde kdeenablefinal kdehiddenvisibility kerberos kqemu lame lapack lcd lcms ldap libcaca libclamav libgda libnotify libusb lirc live lm_sensors lua lzo mad mailwrapper matroska md5sum mdb mhash midi mikmod mime mmx mmx2 mmxext mng mono mozcalendar mozdevelop mozilla mozsvg mozxmlterm mp3 mp4 mp4live mpeg mpeg2 mpeg4 mplayer mpm-prefork msn msnextras mudflap multilib musepack mysql mysqli mythtv nagios-dns nagios-ntp nagios-ping nagios-ssh ncurses neXt network networking ngui nls nntp no_wxgtk1 nobsh nopie nossp noxalan nptl nptlonly nsplugin nv nvidia oav odbc ogg openal opengl openmp openssl operanom2 pam pcre pda pdf pdo pear perl php pmu png pnp postgres ppds pppd pthreads pulseaudio python qemu-fast qhull qt3 qt3support qt4 quicktime quotas readline reflection rrdtool rtc ruby samba sametime scanner sdl server session sftplogging sguil slang slp smp snortsam soap sockets socks5 softmmu softquota spamassassin speex spell spl sqlite3 sse sse2 sse3 ssl ssse3 startup-notification subject-rewrite svg sysfs tao tcltk tcpd tetex texteffect tga theora tiff tk tokenizer translator truetype trusted unicode usb userlocales v4l v4l2 vorbis webpresence winpopup wma wmf wmv wsconvert wxwindows x264 xanim xchatdccserver xchattext xcomposite xine xinerama xml xml2 xmlrpc xorg xosd xpm xprint xsl xulrunner xv xvid xvm xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="it" USERLAND="GNU" VIDEO_CARDS="fbdev vesa vga nv nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Carsten Lohrke (RETIRED)






          2008-08-02 14:14:30 UTC
        

Which dev-libs/xmlrpc-c ebuild do you have installed?




Comment 3


Ingmar Vanhassel (RETIRED)






          2008-08-02 14:32:00 UTC
        

  11 Feb 2008; Diego Pettenò <flameeyes@gentoo.org> cmake-2.4.7-r2.ebuild,
  cmake-2.4.8_rc12.ebuild, cmake-2.4.8.ebuild:
  Remove --no-as-needed, xmlrpc-c caused the bug and is now fixed. If you want
  to build cmake with --as-needed rebuild your xmlrpc-c.


I'm 99% you're hitting this.




Comment 4


Theo Chatzimichos (RETIRED)








          2008-08-02 14:37:05 UTC
        

(In reply to comment #0)
> i rebuilt the libxmlrpc, but no luck...

there is no libxmlrpc, please define the package. /usr/lib/libxmlrpc.so library is provided by xmlrpc-c, try recompile this (if you haven't already)




Comment 5


Patrizio Bassi





          2008-08-02 15:21:57 UTC
        

i already rebuilt dev-libs/xmlrpc-c-1.14.07-r1 but no changes on cmake compilation....

i'll try to delete -as-needed to check if error is still there..




Comment 6


Patrizio Bassi





          2008-08-02 15:28:51 UTC
        

rebuilt both without --as-needed flag, no change

for your info i was rebuildind to skip 

!!! existing preserved libs:
>>> package: dev-libs/xmlrpc-c-1.14.07-r1
 *  - /usr/lib64/libxmlrpc.so.3
 *  - /usr/lib64/libxmlrpc_client.so.3
 *  - /usr/lib64/libxmlrpc.so.3.6.15
 *  - /usr/lib64/libxmlrpc_client.so.3.6.15





Comment 7


DrChandra the Gentoo Person





          2008-08-02 16:42:48 UTC
        

>  *  - /usr/lib64/libxmlrpc.so.3.6.15

This combination of cmake and xmlrpc-c compile and link fine on x86. Perhaps
it is something to do with the /usr/lib64 directory in packaging?






Comment 8


Patrizio Bassi





          2008-08-02 17:41:25 UTC
        

i got it working:

unmerged both, remerged cmake (the lib got as dep)

but it's not normal we have to upgrade like this.

how do we manage this bug? close?




Comment 9


Timo Gurr (RETIRED)






          2008-08-27 21:29:22 UTC
        

I'm closing this for now, if someone still runs into this please reopen.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

