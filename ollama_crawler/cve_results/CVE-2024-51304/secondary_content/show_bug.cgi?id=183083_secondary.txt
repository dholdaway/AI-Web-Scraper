Title: 183083 – sys-apps/hal-0.5.9.1 does not mount my NTFS partition using ntfs-3g but ntfs
URL: https://bugs.gentoo.org/show_bug.cgi?id=183083

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 183083
sys-apps/hal-0.5.9.1 does not mount my NTFS partition using ntfs-3g but ntfs
Last modified: 2007-07-31 15:40:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 183083 
      - sys-apps/hal-0.5.9.1 does not mount my NTFS partition using ntfs-3g but ntfs


Summary:
sys-apps/hal-0.5.9.1 does not mount my NTFS partition using ntfs-3g but ntfs
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

187033

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-06-24 22:07 UTC by Martin Dratva





      Modified:
    
2007-07-31 15:40 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dopey









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Dratva





          2007-06-24 22:07:49 UTC
        

After I emerged Hal 0.5.9.1 I was unable to write to ntfs partition. 

This is my partition mounted the right way as it shoud be and it works.

cat /media/.hal-mtab
/dev/sdb9       1000    0       ntfs-3g nosuid,nodev,uid=1000,utf8      /media/WIN_DISK

Before reverting back to Hal 0.5.9-r1 there was ntfs instead of ntfs-3g


Reproducible: Always




Portage 2.1.3_rc5 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.5-r3, 2.6.21-sabayon i686)
=================================================================
System uname: 2.6.21-sabayon i686 AMD Athlon(tm) XP 1600+
Gentoo Base System release 1.12.10
Timestamp of tree: Sun, 24 Jun 2007 08:30:01 +0000
dev-java/java-config: 1.3.7, 2.0.32
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -mno-tls-direct-seg-refs -mmmx -m32 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/share/config/kdm/ /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -mno-tls-direct-seg-refs -mmmx -m32 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s"
LINGUAS="en sk cs"
MAKEOPTS="-j2 -s "
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sabayon /usr/portage/local/layman/einit /usr/portage/local/layman/sunrise"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dfx 7Zip X a52 aac aalib acl acpi ada aiglx alsa amarok arts artswrappersuid asf audiofile avahi beagle berkdb bidi bitmap-fonts bluetooth bzip2 cairo cdda cdr chm cjk clearcase cli commercial config_wizard cpudetection cracklib crypt css cups dbox2 dbus dga djvu dlloader dri dts dv dvb dvd dvdr dvdread dvi dxr3 eds effects emboss encode esd evo exscalibar ext-man ext-rtf ext-tex extraicons extramodules fam fame fat ffmpeg fftw firefox flac flash foomatic-db fortran freetype gcj gdbm gif gimpprint glitz gnokii gnutls gphoto2 gpm gs gsm gstreamer hal hfs iconv icq imap inkjar ipv6 irc isdnlog ivtv jack java jfs jingle jpeg kde kdeenablefinal kdehiddenvisibility kerberos kipi kqemu krb4 lame lcd libao libcaca libclamav libg++ libnotify live lj lm_sensors logitech-mouse lzo mad mail matroska midi mikmod mjpeg mmx mng mono moznocompose moznoirc moznomail moznopango mp3 mp3rtp mpeg msn mudflap musepack musicbrainz mysql mythtv ncurses network new-login nls nptl nptlonly nsplugin ntfs nvidia ogg ole openal opengl openmp pam pam_console pascal pcmcia pcre pda pdf perl php pidgin plugin png postgres povray ppds pppd pulseaudio pwdb python qt qt3 qt3support qt4 quicktime quotas rar rdesktop readline real reflection reiser4 reiserfs rss ruby sdl session skins slp sms sndfile speech speex spell spl spreadsheet sql ssl startup-notification stream streams subversion svg switch_all_desktops symlink sysfs tcpd theora tiff truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 vcd visualization voice vorbis webservices win32codecs winbind wmf wxwindows x264 x86 xfs xine xinerama xml xorg xosd xpm xprint xscreensaver xsl xv xvid xvmc zeroconf zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse digitaledge vmmouse void" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en sk cs" USERLAND="GNU" VIDEO_CARDS="nv nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Martin Dratva





          2007-06-24 22:17:07 UTC
        

EDIT: I emerged back to version 0.5.9-r6 not the one stated above.




Comment 2


Doug Goldstein (RETIRED)






          2007-06-29 16:08:02 UTC
        

the only versions of HAL in the tree are:

0.5.7.1-r3
0.5.7.1-r5
0.5.9 (masked)
0.5.9-r1
0.5.9.1

I don't know where you're getting -r6 from.

Also, my NTFS partition mounts every single time I login to GNOME via ntfs-3g, are you sure you have it installed?




Comment 3


Doug Goldstein (RETIRED)






          2007-07-24 19:36:58 UTC
        

marking this as works for me since no feedback was received and I use this feature on a daily basis. The only trick was making sure I emerged ntfs-3g and it just worked. Reading the HAL rules, it will attempt to use ntfs-3g and fall back to ntfs if it can't find ntfs-3g, which sounds like the user's issue and the previously suggested steps I told the user to take.




Comment 4


Jakub Moc (RETIRED)






          2007-07-29 18:55:21 UTC
        

*** Bug 187033 has been marked as a duplicate of this bug. ***




Comment 5


Andy Wang





          2007-07-29 23:20:02 UTC
        

Can you re-open this bug?  I'm having the same problem.  hal-0.9.5-r1 and ntfs3g-1.0.





Comment 6


Doug Goldstein (RETIRED)






          2007-07-30 13:47:10 UTC
        

without ANY debug info or steps to reproduce, no I can't.




Comment 7


Andy Wang





          2007-07-30 18:53:26 UTC
        

what kind of steps do you want?
emerge hal ntfs3g
plug in usb external harddrive formated as NTFS
check mount and /media/.hal-mtab and both use ntfs not ntfs-3g.

check dmesg, kernel NTFS driver is used not ntfs-3g.




Comment 8


Andy Wang





          2007-07-30 18:56:23 UTC
        

sorry for the double comment.  I don't know how to debug hal.  If you have suggestions on the kind of debug info that would help, let me know.  Otherwise, I grep'ed through all the directories that have hal installed files and the only reference to ntfs is in /usr/share/hal/fdi/policy/10osvendor/20-storage-methods.fdi.

and it only references ntfs, not ntfs-3g.  I'm not sure HAL would be capable of using ntfs-3g out of the box which I believe you are saying it does for you.




Comment 9


Doug Goldstein (RETIRED)






          2007-07-30 19:09:37 UTC
        

The ntfs reference in /usr/share/hal/fdi/policy/10osvendor/20-storage-methods.fdi simply lists the allowable mount options for a filesystem of type ntfs. The same filesystem type exists whether using the ntfs3g or ntfs driver.

HAL is simply calling the mount app to mount your device, the issue is one of configuration.

In a simplified description what's happening, mount reads /proc/filesystems and will attempt each filesystem in order.

On your machine, you have ntfs loaded before fuse. And so ntfs is attempted first and is successful.

If you use GNOME, you can right click on the volume and give it a mount option of -t fuse, and it will use fuse by default. If you use KDE or some other way to mount (pmount), you will have to do a little bit of digging on your own to discover the magic.







Comment 10


Andy Wang





          2007-07-31 15:40:42 UTC
        

Thanks, I forgot KDE uses pmount still to handle this.  I tested it out in Gnome and it did mount ntfs3g if the fuse module was loaded ahead of time. I'll tinker with KDE to get it working.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

