Title: 791094 – net-libs/libiscsi-1.19.0 - /.../iser.c:195: undefined reference to pthread_cancel
URL: https://bugs.gentoo.org/show_bug.cgi?id=791094

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 791094
net-libs/libiscsi-1.19.0 - /.../iser.c:195: undefined reference to pthread_cancel
Last modified: 2022-06-22 16:10:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 791094 
      - net-libs/libiscsi-1.19.0 - /.../iser.c:195: undefined reference to pthread_cancel


Summary:
net-libs/libiscsi-1.19.0 - /.../iser.c:195: undefined reference to pthread_ca...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




slibtool 786987



 

        Show dependency tree





 





      Reported:
    
2021-05-19 14:33 UTC by Toralf Förster





      Modified:
    
2022-06-22 16:10 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



ionen
orbea
sam









See Also:


778905





Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.66 KB,
                text/plain)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,217.51 KB,
                text/plain)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





environment

              (environment,68.96 KB,
                text/plain)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





etc.portage.tar.bz2

              (etc.portage.tar.bz2,20.57 KB,
                application/x-bzip)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





logs.tar.bz2

              (logs.tar.bz2,7.86 KB,
                application/x-bzip)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





net-libs:libiscsi-1.19.0:20210519-010903.log

              (net-libs:libiscsi-1.19.0:20210519-010903.log,41.71 KB,
                text/plain)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





temp.tar.bz2

              (temp.tar.bz2,23.28 KB,
                application/x-bzip)

            
2021-05-19 14:33 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2021-05-19 14:33:34 UTC
        

/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: .libs/libiscsi_la-iser.o: in function `iser_free_iser_conn_res':
/var/tmp/portage/net-libs/libiscsi-1.19.0/work/libiscsi-1.19.0/lib/iser.c:195: undefined reference to `pthread_cancel'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: .libs/libiscsi_la-iser.o: in function `iscsi_iser_connect':
/var/tmp/portage/net-libs/libiscsi-1.19.0/work/libiscsi-1.19.0/lib/iser.c:1355: undefined reference to `sem_init'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/net-libs/libiscsi-1.19.0/work/libiscsi-1.19.0/lib/iser.c:1369: undefined reference to `pthread_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/net-libs/libiscsi-1.19.0/work/libiscsi-1.19.0/lib/iser.c:1380: undefined reference to `sem_wait'

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1_systemd-j2-20210515-193921

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-7.3.1
 [2] x86_64-pc-linux-gnu-11.1.0 *
clang version 12.0.0
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/12/bin
/usr/lib/llvm/12
12.0.0
Python 3.8.10
Available Ruby profiles:
  [1]   ruby26 (with Rubygems)
  [2]   ruby30 (with Rubygems) *
Available Rust versions:
  [1]   rust-bin-1.52.1 *
The following VMs are available for generation-2:
*)	AdoptOpenJDK 8.292_p10 [openjdk-bin-8]
Available Java Virtual Machines:
  [1]   openjdk-bin-8  system-vm

The Glorious Glasgow Haskell Compilation System, version 8.10.4
  [1]   php7.3
  [2]   php7.4
  [3]   php8.0 *

  timestamp(s) of HEAD at this tinderbox image:
/var/db/repos/gentoo	Wed May 19 00:34:59 UTC 2021

emerge -qpvO net-libs/libiscsi
[ebuild  N    ] net-libs/libiscsi-1.19.0




Comment 1


Toralf Förster






          2021-05-19 14:33:35 UTC
        

Created attachment 709806 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2021-05-19 14:33:37 UTC
        

Created attachment 709809 [details]
emerge-history.txt




Comment 3


Toralf Förster






          2021-05-19 14:33:38 UTC
        

Created attachment 709812 [details]
environment




Comment 4


Toralf Förster






          2021-05-19 14:33:40 UTC
        

Created attachment 709815 [details]
etc.portage.tar.bz2




Comment 5


Toralf Förster






          2021-05-19 14:33:41 UTC
        

Created attachment 709818 [details]
logs.tar.bz2




Comment 6


Toralf Förster






          2021-05-19 14:33:42 UTC
        

Created attachment 709821 [details]
net-libs:libiscsi-1.19.0:20210519-010903.log




Comment 7


Toralf Förster






          2021-05-19 14:33:43 UTC
        

Created attachment 709824 [details]
temp.tar.bz2




Comment 8


Ionen Wolkens






          2021-05-22 01:54:49 UTC
        

Seems there's confusion regarding this issue.

There's two issues:
A. bug #778905: pthread / sem_init undefined references
B. bug #790329: error: missing filename after -o

But B was marked a duplicate of A despite different error, then A received a fix while it actually fixed B.

A remains.

To reproduce, need sys-fabric/librdmacm (automagic) and get:
    checking for iSER support... yes




Comment 9


orbea





          2021-05-23 02:21:56 UTC
        

This is already fixed in the upstream git, but upon looking at their build I found some other hidden issues which I fixed in this PR.

https://github.com/sahlberg/libiscsi/pull/352




Comment 10


orbea





          2022-06-22 16:10:23 UTC
        

Seems to build fine now with 1.19.0-r1 and the 9999 ebuilds.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

