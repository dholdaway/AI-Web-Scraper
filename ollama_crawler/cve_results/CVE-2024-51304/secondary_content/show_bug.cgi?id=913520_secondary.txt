Title: 913520 – sys-fs/bcachefs-tools fails to emerge; thread 'main' panicked at 'libclang error
URL: https://bugs.gentoo.org/show_bug.cgi?id=913520

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 913520
sys-fs/bcachefs-tools fails to emerge; thread 'main' panicked at 'libclang error
Last modified: 2024-03-06 11:59:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 913520 
      - sys-fs/bcachefs-tools fails to emerge; thread 'main' panicked at 'libclang error


Summary:
sys-fs/bcachefs-tools fails to emerge; thread 'main' panicked at 'libclang error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Matt Jolly








URL:







Whiteboard:




Keywords:

PullRequest







Depends on:







Blocks:









 





      Reported:
    
2023-09-02 17:24 UTC by Penguin





      Modified:
    
2024-03-06 11:59 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kangie









See Also:


https://github.com/gentoo/gentoo/pull/32565





Package list:







Runtime testing required:

---























      Attachments
    




emerge bcachefs-tools build failure

              (emerge_a_bcachefs_tools_build_failure.txt,247.50 KB,
                text/plain)

            
2023-09-02 17:24 UTC,

            Penguin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Penguin





          2023-09-02 17:24:19 UTC
        

Created attachment 869238 [details]
emerge bcachefs-tools build failure

I'm on the livegui trying to install bcachefs-tools, and it seems to fail around rust-bindgen-bcachefs.




Comment 1


Matt Jolly






          2023-09-02 18:40:31 UTC
        

I can't repro this issue on an up-to-date system.

Penguin is encountering this on livegui-amd64-20230827T170145Z.iso

It does appear to be failing to compile bindgen_bch, but I can't see any reason for it to happen.




Comment 2


Larry the Git Cow






          2023-09-03 07:14:47 UTC
        

The bug has been referenced in the following commit(s):

https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=7b7ccd412ab04783edaa21da93bf2955e90fae08

commit 7b7ccd412ab04783edaa21da93bf2955e90fae08
Author:     Matt Jolly <Matt.Jolly@footclan.ninja>
AuthorDate: 2023-09-02 18:21:35 +0000
Commit:     Sam James <sam@gentoo.org>
CommitDate: 2023-09-03 07:14:35 +0000

    sys-fs/bcachefs-tools: add llvm.eclass
    
    also update src_unpack to reduce console spam during the phase
    
    Bug: https://bugs.gentoo.org/913520
    Signed-off-by: Matt Jolly <Matt.Jolly@footclan.ninja>
    Closes: https://github.com/gentoo/gentoo/pull/32565
    Signed-off-by: Sam James <sam@gentoo.org>

 .../bcachefs-tools-1.2_p20230813.ebuild               | 18 +++++++++++++++---
 sys-fs/bcachefs-tools/bcachefs-tools-9999.ebuild      | 19 +++++++++++++++----
 2 files changed, 30 insertions(+), 7 deletions(-)




Comment 3


Matt Jolly






          2024-03-06 11:59:41 UTC
        

Haven't been able to repro this one, no further reports, and and it's out of tree.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

