Title: 183797 – app-office:openoffice-2.2.1 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=183797

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 183797
app-office:openoffice-2.2.1 fails to build
Last modified: 2007-07-02 23:36:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 183797 
      - app-office:openoffice-2.2.1 fails to build


Summary:
app-office:openoffice-2.2.1 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Office Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-07-01 03:56 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2007-07-02 23:36 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/tmp/emerge--info

              (emerge--info,4.76 KB,
                text/plain)

            
2007-07-01 03:57 UTC,

            DEMAINE Benoît-Pierre, aka DoubleHP




Details





/tmp/emerge--info

              (emerge--info,4.78 KB,
                text/plain)

            
2007-07-02 03:18 UTC,

            DEMAINE Benoît-Pierre, aka DoubleHP




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-01 03:56:29 UTC
        

log:

Making: ../../unxlngi6.pro/slo/PersAttrListTContext.obj
g++ -fmessage-length=0 -c -Os -fno-strict-aliasing   -D_FILE_OFFSET_BITS=64 -I.  -I../../unxlngi6.pro/inc/xof -I../inc -I../../inc/pch -I../../inc -I../../unx/inc -I../../unxlngi6.pro/inc -I. -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/stl -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/external -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solenv/unxlngi6/inc -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solenv/inc -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/res -I/usr/stlport -I/usr/include/stlport -I/usr/include/stlport -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solenv/inc/Xp31 -INO_JAVA_HOME/include -INO_JAVA_HOME/include/linux -INO_JAVA_HOME/include/native_threads/include -I/usr/include     -I/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh -I. -I../../res -I. -pipe -O2 -march=athlon-mp -pipe -mmmx -msse -m3dnow -fvisibility-inlines-hidden -Wall -Wextra -Wendif-labels -Wshadow -Wno-ctor-dtor-privacy     -Wno-non-virtual-dtor   -fpic -DLINUX -DUNX -DVCL -DGCC -DC341 -DINTEL -DCVER=C341 -DNPTL -DGLIBC=2 -DX86 -D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=500 -DHAVE_GCC_VISIBILITY_FEATURE -D__DMAKE -DUNIX -DCPPU_ENV=gcc3 -DGXX_INCLUDE_PATH=/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/include/g++-v4 -DSUPD=680 -DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0 -DOPTIMIZE -DGSTREAMER -DCUI -DOOF680=OOF680   -DSHAREDLIB -D_DLL_  -DMULTITHREAD -fexceptions -fno-enforce-eh-specs -DEXCEPTIONS_ON  -o ../../unxlngi6.pro/slo/PersAttrListTContext.o /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/xmloff/source/transform/PersAttrListTContext.cxx
In file included from /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/xmloff/source/transform/PersAttrListTContext.cxx:40:
/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh/com/sun/star/util/XCloneable.hpp:5:24: error: sal/config.h: No such file or directory
In file included from /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh/com/sun/star/util/XCloneable.hdl:10,
                 from /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh/com/sun/star/util/XCloneable.hpp:9,
                 from /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/xmloff/source/transform/PersAttrListTContext.cxx:40:
/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh/com/sun/star/uno/RuntimeException.hdl:5:24: error: sal/config.h: No such file or directory
[...] (pages of errors)
/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/com/sun/star/uno/Reference.h:52: error: forward declaration of 'struct com::sun::star::uno::RuntimeException'
/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/offuh/com/sun/star/uno/RuntimeException.hpp:35: confused by earlier errors, bailing out
dmake:  Error code 1, while making '../../unxlngi6.pro/slo/PersAttrListTContext.obj'
'---* tg_merge.mk *---'

ERROR: Error 65280 occurred while making /var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/xmloff/source/transform
make: *** [stamp/build] Error 1

!!! ERROR: app-office/openoffice-2.2.1 failed.
Call stack:
  ebuild.sh, line 1637:   Called dyn_compile
  ebuild.sh, line 983:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  openoffice-2.2.1.ebuild, line 328:   Called die

!!! Build failed
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/log/portage/app-office:openoffice-2.2.1:20070630-230951.log'.

!!! When you file a bug report, please include the following information:
GENTOO_VM=  CLASSPATH="." JAVA_HOME="/etc/java-config-2/current-system-vm"
JAVACFLAGS="" COMPILER=""
and of course, the output of emerge --info




Comment 1


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-01 03:57:57 UTC
        

Created attachment 123496 [details]
/tmp/emerge--info




Comment 2


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-01 04:16:05 UTC
        

compleet log is 15MB, do you really need it ? no time to upload it now; hopefully within 24h.




Comment 3


Hanno Zysik (geki)





          2007-07-01 07:57:25 UTC
        

Wrt this issue:
solver/680/unxlngi6.pro/inc/offuh/com/sun/star/util/XCloneable.hpp:5:24:
error: sal/config.h: No such file or directory

xmloff depends indirectly on sal where "sal/config.h" belongs to. So it should be there.

Is it there? Check:

/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngx6.pro/inc/sal/config.h

Btw, do you have multithreading enabled? If so how many CPUs do you use? Would be strange multithreading issue.




Comment 4


Hanno Zysik (geki)





          2007-07-01 07:59:54 UTC
        

Err, damn thing, you should check this:

/var/tmp/portage/app-office/openoffice-2.2.1/work/ooo/build/OOF680_m18/solver/680/unxlngi6.pro/inc/sal/config.h

Mixing my amd64 paths with x86 paths is bad. :/




Comment 5


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-01 14:11:16 UTC
        

Single core. thus make -j2. Still I will try -j1 (may take hours)

root@moon_gen_2:~# ls /var/tmp/portage/app-office
ls: cannot access /var/tmp/portage/app-office: No such file or directory
root@moon_gen_2:~#

I will hunt against the auto-clean thing ...

Log if first try: http://doublehp.free.fr/app-office:openoffice-2.2.1:20070630-230951.log

*** *** ***

Next log will be from using this conf (in a few hours):

MAKEOPTS="-j1"
FEATURES="parallel-fetch fixpackages ccache -confcache nostrip splitdebug noclean keeptemp keepwork"

[ebuild   R   ] app-office/openoffice-2.2.1  USE="binfilter branding dbus eds firefox gstreamer gtk pam -cairo -cups -debug -gnome -java -kde -ldap -mono -odk -seamonkey -sound -webdav" LINGUAS="en en_GB en_US fr -af -ar -as_IN -be_BY -bg -bn -br -bs -ca -cs -cy -da -de -dz -el -en_ZA -eo -es -et -fa -fi -ga -gl -gu_IN -he -hi_IN -hr -hu -it -ja -km -ko -ku -lt -lv -mk -ml_IN -mr_IN -nb -ne -nl -nn -nr -ns -or_IN -pa_IN -pl -pt -pt_BR -ru -rw -sh_YU -sk -sl -sr_CS -ss -st -sv -sw_TZ -ta_IN -te_IN -tg -th -ti_ER -tn -tr -ts -uk -ur_IN -ve -vi -xh -zh_CN -zh_TW -zu" 0 kB




Comment 6


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-02 03:18:20 UTC
        

Created attachment 123580 [details]
/tmp/emerge--info

Build failed after 475 (user minutes).

Build log is here:
http://doublehp.free.fr/app-office:openoffice-2.2.1:20070701-140443.log
(45MB)

I attach my actual --infon because I would like maints to check something I do not understand: dispite use of "noclean keeptemp keepwork", /var/tmp/portage/ have been emptied, so that I still can not test what you asked me:

root@moon_gen_2:~# ls -lh /var/tmp/portage/
total 0
root@moon_gen_2:~#

Maybe the problem about compiling is linked with the work not being kept ? Maybe all this is in fact dup of bug #182531 ? He got a different error, but I got 2 different ones as well ...




Comment 7


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-07-02 23:36:58 UTC
        

Hell: emerge successfull !!! 3 days my box does nothing but compile OOo. And the day I finally got the logs (had to add "noauto" to "noclean keeptemp keepwork"), it goes fine.

=> WORKSFORME, so that if I forget this bug, it will seem closed. But I will keep doing tests until I can reproduce.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

