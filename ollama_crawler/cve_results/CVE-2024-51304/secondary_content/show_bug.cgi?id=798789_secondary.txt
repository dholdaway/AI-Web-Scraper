Title: 798789 – media-libs/embree-3.13.0 dies with multiple undefined references
URL: https://bugs.gentoo.org/show_bug.cgi?id=798789

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 798789
media-libs/embree-3.13.0 dies with multiple undefined references
Last modified: 2021-12-10 04:04:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 798789 
      - media-libs/embree-3.13.0 dies with multiple undefined references


Summary:
media-libs/embree-3.13.0 dies with multiple undefined references
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sebastian Parborg








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-06-26 14:11 UTC by John (EBo) David





      Modified:
    
2021-12-10 04:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



proxy-maint
sam









See Also:


828659





Package list:







Runtime testing required:

---























      Attachments
    




emerge --info as required

              (embree_info,10.54 KB,
                text/plain)

            
2021-06-26 14:11 UTC,

            John (EBo) David




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John (EBo) David





          2021-06-26 14:11:26 UTC
        

Created attachment 719421 [details]
emerge --info as required

While upgrading blender I was not able successfully build the embree dependency.  I was however able to successfully build =media-libs/embree-3.12.2::waebbl.  I will attach both build logs and environment for anyone that might be interested in investigating why embree-3.13.0 in the main gentoo tree is broken.




Comment 1


John (EBo) David





          2021-06-26 14:25:34 UTC
        

I have not been able to upload the build logs.  I keep getting errors.  Will try again later.  Anyway interested on working on this can also contact me directly for the logs and environments.




Comment 2


Tee KOBAYASHI





          2021-06-26 15:05:00 UTC
        

One difference that might be relevant is that media-libs/embree-3.13.0::gentoo sets -DEMBREE_IGNORE_CMAKE_CXX_FLAGS=OFF whereas media-libs/embree-3.12.2::waebbl does not.

As noted in the ebuild, -march=* flags in CXXFLAGS are problematic for media-libs/embree. Maybe so are other -mfoo (-mmmx, -msse, ...) flags. Try getting rid your CXXFLAGS of them.




Comment 3


John (EBo) David





          2021-06-26 16:19:45 UTC
        

These settings were generated using one of Gentoo's optimization tools.  I gave it a try, and it compiled when I removed all of the -m* compiler flags.  It also worked when I I commented out the line "-DEMBREE_IGNORE_CMAKE_CXX_FLAGS=OFF".  I also set "CONFIG_TRANSPARENT_HUGEPAGE" in my kernel (which embree warned me about needing).

For the moment I made the comment and built everything.  Since I am not a blender specialist I will not know any odd effects might be.  That said if I will report back if I find that things break or seems to work.

Marking as resolved.




Comment 4


John (EBo) David





          2021-06-26 16:22:08 UTC
        

Thanks for the pointers BTW









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

