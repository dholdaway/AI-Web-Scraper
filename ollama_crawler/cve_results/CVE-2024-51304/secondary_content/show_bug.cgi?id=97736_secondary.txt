Title: 97736 – GCC-3.4 doesn't compile on uclibc-hardened system
URL: https://bugs.gentoo.org/show_bug.cgi?id=97736

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 97736
GCC-3.4 doesn't compile on uclibc-hardened system
Last modified: 2005-07-13 10:29:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 97736 
      - GCC-3.4 doesn't compile on uclibc-hardened system


Summary:
GCC-3.4 doesn't compile on uclibc-hardened system
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Embedded Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-02 09:58 UTC by Milan Holzäpfel





      Modified:
    
2005-07-13 10:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Milan Holzäpfel





          2005-07-02 09:58:50 UTC
        

Hello,

I used stage1-x86-uclibc-hardened-2005.0.tar.bz2 to start with a system, putting 
sys-devel/gcc into /etc/portage/package.keywords to get GCC 3.4. Doing emerge -e 
system, GCC failed:

/var/tmp/portage/gcc-3.4.4/work/build/gcc/xgcc -shared-libgcc -B/var/tmp/
portage/gcc-3.4.4/work/build/gcc/ -nostdinc++ -L/var/tmp/portage/gcc-3.4.4/work/
build/i686-gentoo-linux-uclibc/libstdc++-v3/src -L/var/tmp/portage/gcc-3.4.4/
work/build/i686-gentoo-linux-uclibc/libstdc++-v3/src/.libs -B/usr/i686-gentoo-
linux-uclibc/bin/ -B/usr/i686-gentoo-linux-uclibc/lib/ -isystem "" -isystem /
usr/i686-gentoo-linux-uclibc/sys-include -I/var/tmp/portage/gcc-3.4.4/work/gcc-
3.4.4/libstdc++-v3/../gcc -I/var/tmp/portage/gcc-3.4.4/work/build/i686-gentoo-
linux-uclibc/libstdc++-v3/include/i686-gentoo-linux-uclibc -I/var/tmp/portage/
gcc-3.4.4/work/build/i686-gentoo-linux-uclibc/libstdc++-v3/include -I/var/tmp/
portage/gcc-3.4.4/work/gcc-3.4.4/libstdc++-v3/libsupc++ -g -Os -g -Os -fno-
implicit-templates -Wall -W -Wwrite-strings -Wcast-qual -fdiagnostics-show-
location=once -ffunction-sections -fdata-sections -c /var/tmp/portage/gcc-3.4.4/
work/gcc-3.4.4/libstdc++-v3/libsupc++/pure.cc  -fPIC -DPIC -o pure.o
cc1plus: /usr/i686-gentoo-linux-uclibc/sys-include: No such file or directory
make[4]: *** [pure.lo] Error 1
make[4]: Leaving directory `/var/tmp/portage/gcc-3.4.4/work/build/i686-gentoo-
linux-uclibc/libstdc++-v3/libsupc++'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/gcc-3.4.4/work/build/i686-gentoo-
linux-uclibc/libstdc++-v3'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/var/tmp/portage/gcc-3.4.4/work/build/i686-gentoo-
linux-uclibc/libstdc++-v3'
make[1]: *** [all-target-libstdc++-v3] Error 2
make[1]: Leaving directory `/var/tmp/portage/gcc-3.4.4/work/build'
make: *** [profiledbootstrap] Error 2

!!! ERROR: sys-devel/gcc-3.4.4 failed.
!!! Function gcc_do_make, Line 1212, Exitcode 2
!!! emake failed with profiledbootstrap
!!! If you need support, post the topmost build error, NOT this status message.

/usr/i686-gentoo-linux-uclibc/sys-include does not exist. mkdir /usr/i686-
gentoo-linux-uclibc/sys-include made GCC compile nicely. 

Reproducible: Didn't try
Steps to Reproduce:
1. use stage1-x86-uclibc-hardened-2005.0.tar.bz2 and ~ gcc
2. do bootstrap.sh and emerge -e system

Actual Results:  
GCC fails during emerge -e system

Expected Results:  
GCC compiles fine

Portage 2.0.51.19 (uclibc/x86/hardened, gcc-3.4.4, uclibc-0.9.27-r0, 2.6.11.12-
grsec-20 i686)
=================================================================
System uname: 2.6.11.12-grsec-20 i686 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.6.12
Python:              dev-lang/python-2.3.4-r1,dev-lang/python-2.4.1-r1 [2.4.1 
(#1, Jul  2 2005, 13:13:47)]
dev-lang/python:     2.3.4-r1, 2.4.1-r1
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.7.9-r1, 1.8.5-r3, 1.6.3, 1.5, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r4
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-Os -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-gentoo-linux-uclibc"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/
config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/src/pkg"
FEATURES="autoaddcvs autoconfig buildpkg distlocks nodoc noinfo noman sandbox 
sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo ftp://ftp.
uni-erlangen.de/pub/mirrors/gentoo http://ftp.uni-erlangen.de/pub/mirrors/gentoo 
ftp://gentoo.inode.at/source http://gentoo.inode.at/"
MAKEOPTS="-j1"
PKGDIR="/usr/portage-pkg"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex apache2 bzip2 crypt gnutls hardened imagemagick imap 
jabber jpeg mbox mmap mmx mng mysql ncurses perl php pic png python readline sse 
ssl subversion svg tidy uclibc unicode utf8 vpopmail xml xml2 zlib userland_GNU 
kernel_linux elibc_uclibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, 
PORTDIR_OVERLAY




Comment 1


SpanKY






          2005-07-02 10:59:12 UTC
        

sys-include should only be needed when cross-compiling ...




Comment 2


SpanKY






          2005-07-02 10:59:50 UTC
        

so on that note can you please do `rmdir
/usr/i686-gentoo-linux-uclibc/sys-include` and then `emerge gcc >& log` and then
attach the log here




Comment 3


Milan Holzäpfel





          2005-07-13 07:38:18 UTC
        

I did that an it worked (using the GCC compiled with the sys-include dir being 
present)
Do you want the log anyway?




Comment 4


SpanKY






          2005-07-13 10:29:04 UTC
        

nah, not unless you can post a log of the failure

thanks though









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

