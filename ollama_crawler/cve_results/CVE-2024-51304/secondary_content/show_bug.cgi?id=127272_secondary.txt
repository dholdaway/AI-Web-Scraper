Title: 127272 – svgalib-1.9.21-r1 fails to build with userpriv enabled in features
URL: https://bugs.gentoo.org/show_bug.cgi?id=127272

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 127272
svgalib-1.9.21-r1 fails to build with userpriv enabled in features
Last modified: 2006-09-02 07:27:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 127272 
      - svgalib-1.9.21-r1 fails to build with userpriv enabled in features


Summary:
svgalib-1.9.21-r1 fails to build with userpriv enabled in features
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Low
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-23 00:33 UTC by Tom Fredrik Blenning Klaussen





      Modified:
    
2006-09-02 07:27 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



johnm









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build error

              (error_log,26.01 KB,
                text/plain)

            
2006-03-23 00:34 UTC,

            Tom Fredrik Blenning Klaussen




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tom Fredrik Blenning Klaussen





          2006-03-23 00:33:33 UTC
        

When userpriv is enabled svgalib fails to build.
Workaround is obviously to disable userpriv.




Comment 1


Tom Fredrik Blenning Klaussen





          2006-03-23 00:34:42 UTC
        

Created attachment 82924 [details]
Build error

Log of build error




Comment 2


John Mylchreest (RETIRED)






          2006-03-23 07:43:12 UTC
        

SUBDIRS is incorrect.
check out the linux-mod:use_m() function.
its simple as pie to use in an ebuild.

inherit linux-mod

and at the end of pkg_unpack:
convert_to_m Makefile;

assuming of course Makefile is the correct file which exports the SUBDIR declaration.

Tom, could you please try the above?

in pkg_unpack at the end just add:

convert_to_m Makefile;

see if it fixes your problem?




Comment 3


John Mylchreest (RETIRED)






          2006-03-23 07:50:12 UTC
        

It might actually need O= defined as well thinking abiout it, since M= isnt neccessarily a sole fix.




Comment 4


John Mylchreest (RETIRED)






          2006-03-23 08:00:42 UTC
        

For the record, if you do need O= then I would suggest:

pkg_unpack:
convert_to_m Makefile

src_compile:
mkdir ${WORKDIR}/kmod/
make O=${WORKDIR}/kmod/ yadda

src_install:
insinto ${ROOT}/usr/src/${KV_FULL}/video/
doins ${WORKDIR}/kmod/modulename.${KV_OBJ}

of course, MODULE_NAMES="modulename(video:${S})" would handle a lot of it for you in linux_mod-src_compile





Comment 5


Daniel Drake (RETIRED)






          2006-09-02 07:27:12 UTC
        

1.9.25 works for me with userpriv enabled, please reopen if this is still a problem









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

