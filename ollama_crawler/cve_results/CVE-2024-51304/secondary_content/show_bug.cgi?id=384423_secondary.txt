Title: 384423 – media-tv/xbmc-10.1: crash with -fomit-frame-pointer
URL: https://bugs.gentoo.org/show_bug.cgi?id=384423

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 384423
media-tv/xbmc-10.1: crash with -fomit-frame-pointer
Last modified: 2012-02-26 23:45:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 384423 
      - media-tv/xbmc-10.1: crash with -fomit-frame-pointer


Summary:
media-tv/xbmc-10.1: crash with -fomit-frame-pointer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Xbox project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-09-25 11:51 UTC by Eduardo Suarez-Santana





      Modified:
    
2012-02-26 23:45 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



ferdinand.huebner
matrix47









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xbmc crash report

              (xbmc_crashlog-20110925_124818.log,7.66 KB,
                text/plain)

            
2011-09-25 11:53 UTC,

            Eduardo Suarez-Santana




Details





cave info xbmc (with paludis)

              (emerge.info,17.62 KB,
                text/plain)

            
2011-10-01 20:05 UTC,

            Eduardo Suarez-Santana




Details





emerge --info

              (emerge_info.txt,4.65 KB,
                text/plain)

            
2011-10-17 16:19 UTC,

            Ferdinand Hübner




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Eduardo Suarez-Santana





          2011-09-25 11:51:53 UTC
        

When I compile xbmc-10.1 with -fomit-frame-pointer in the CFLAGS variable, I get a crash at startup.


Reproducible: Always

Steps to Reproduce:
1. Compile xbmc with -fomit-frame-pointer in CFLAGS
2. run xbmc

Actual Results:  
$ xbmc
/usr/bin/xbmc: line 133:  3462 Segmentation fault      "$LIBDIR/xbmc/xbmc.bin" $SAVED_ARGS
Crash report available at /home/nereos/xbmc_crashlog-20110925_123930.log


Expected Results:  
No crash.

Recommended to send as a bug:
http://forums.gentoo.org/viewtopic.php?p=6824794#6824794

If I run it inside gdb, I can get to:
(gdb) r
Starting program: /usr/lib/xbmc/xbmc.bin 
[Thread debugging using libthread_db enabled]

Program received signal SIGSEGV, Segmentation fault.
0xb2f8069c in CxImagePNG::Decode(CxFile*) () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
(gdb) bt
#0  0xb2f8069c in CxImagePNG::Decode(CxFile*) () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
#1  0xb2f676c0 in CxImage::Decode(CxFile*, unsigned int, int&, int&) () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
#2  0xb2f683e2 in CxImage::Decode(_IO_FILE*, unsigned int, int&, int&) () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
#3  0xb2f685d8 in CxImage::Load(char const*, unsigned int, int&, int&) () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
#4  0xb2f42c4a in LoadImage () from /usr/lib/xbmc/system/ImageLib-i486-linux.so
#5  0x08724040 in CBaseTexture::LoadFromFile(CStdStr<char> const&, unsigned int, unsigned int, bool, unsigned int*, unsigned int*) ()
#6  0x087022b8 in CGUITextureManager::Load(CStdStr<char> const&, bool) ()
#7  0x086e75d7 in CGUITextureBase::AllocResources() ()
#8  0x086b262d in CGUIImage::AllocResources() ()
#9  0x082850ad in CSplash::Show() ()
#10 0x083000f6 in CApplication::Create() ()
#11 0x085570ee in main ()




Comment 1


Eduardo Suarez-Santana





          2011-09-25 11:53:56 UTC
        

Created attachment 287689 [details]
xbmc crash report

Output of:
$ xbmc --debug




Comment 2


SpanKY






          2011-09-29 04:00:25 UTC
        

post `emerge --info` with all your bug reports




Comment 3


Eduardo Suarez-Santana





          2011-10-01 20:05:45 UTC
        

Created attachment 288465 [details]
cave info xbmc (with paludis)




Comment 4


Ferdinand Hübner





          2011-10-17 16:18:08 UTC
        

I can confirm this with latest GIT.

Is it possible that this is somehow related to the patches introduced in #380127 and/or libpng-1.5? It's just a guess since the stacktrace in comment #1 includes CxImage on top of the stack.




Comment 5


Ferdinand Hübner





          2011-10-17 16:19:29 UTC
        

Created attachment 290093 [details]
emerge --info




Comment 6


Chris Brown





          2011-12-28 07:35:30 UTC
        

I get the same error on 2 out of 3 computers. The 3rd one hast been updated which is why it still works

/usr/bin/xbmc: line 133:  3462 Segmentation fault      "$LIBDIR/xbmc/xbmc.bin"
$SAVED_ARGS




Comment 7


Chris Brown





          2011-12-28 23:07:01 UTC
        

I can confirm without -fomit-frame-pointer in CFLAGS xbmc does not seg fault




Comment 8


SpanKY






          2012-02-26 23:45:56 UTC
        

re-open if xbmc-11 has same problem









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

