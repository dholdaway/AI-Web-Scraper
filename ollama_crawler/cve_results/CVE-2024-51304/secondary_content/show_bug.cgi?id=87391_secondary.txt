Title: 87391 – media-libs/xine-lib-1.0 fails to compile on x86
URL: https://bugs.gentoo.org/show_bug.cgi?id=87391

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 87391
media-libs/xine-lib-1.0 fails to compile on x86
Last modified: 2005-05-06 16:56:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 87391 
      - media-libs/xine-lib-1.0 fails to compile on x86


Summary:
media-libs/xine-lib-1.0 fails to compile on x86
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:



http://www.roberta-ii.com.ar/xine-lib...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-31 03:32 UTC by Alejandro Diaz Caro





      Modified:
    
2005-05-06 16:56 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alejandro Diaz Caro





          2005-03-31 03:32:29 UTC
        

Emerge of media-libs/xine-lib-1.0 on x86 fails with:
[...]
checking size of long... 4
checking for ssize_t... yes
checking for pthread_create in -lpthread... no
configure: error: pthread needed

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/xine-lib-1.0/work/xine-lib-1.0/config.log

!!! ERROR: media-libs/xine-lib-1.0 failed.
!!! Function econf, Line 485, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.

/var/tmp/portage/xine-lib-1.0/work/xine-lib-1.0/config.log in http://www.roberta-ii.com.ar/xine-lib_config.log

Reproducible: Always
Steps to Reproduce:
1. emerge xine-lib
Actual Results:  
emerge fails with the above log.  

Expected Results:  
emerged package  

/etc/portage/package.keywords:media-libs/xine-lib ~x86 
 
Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5,  
glibc-2.3.4.20040808-r1,glibc-2.3.4.20041102-r1, 2.6.9-gentoo-r9 i686)  
=================================================================  
System uname: 2.6.9-gentoo-r9 i686 AMD Duron(tm)  
Gentoo Base System version 1.4.16  
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb 15 2005,  
19:57:21)]  
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632)  
[disabled]  
ccache version 2.3 [enabled]  
dev-lang/python:     2.3.4-r1  
sys-devel/autoconf:  2.59-r6, 2.13  
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4  
sys-devel/binutils:  2.15.92.0.2-r1  
sys-devel/libtool:   1.5.10-r4  
virtual/os-headers:  2.6.8.1-r1, 2.6.8.1-r2  
ACCEPT_KEYWORDS="x86"  
AUTOCLEAN="yes"  
CFLAGS="-O2 -march=athlon -pipe -fomit-frame-pointer -funroll-loops"  
CHOST="i686-pc-linux-gnu"  
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"  
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"  
CXXFLAGS="-O2 -march=athlon -pipe -fomit-frame-pointer -funroll-loops"  
DISTDIR="/usr/portage/distfiles"  
FEATURES="autoaddcvs autoconfig ccache distlocks fixpackages sandbox sfperms"  
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo  
http://mirror.datapipe.net/gentoo ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo  
http://open-systems.ufl.edu/mirrors/gentoo"  
LANG="es_ES"  
LC_ALL="es_ES"  
MAKEOPTS="-j2"  
PKGDIR="/usr/portage/packages"  
PORTAGE_TMPDIR="/var/tmp"  
PORTDIR="/usr/portage"  
PORTDIR_OVERLAY="/usr/local/portage"  
SYNC="rsync://rsync.gentoo.org/gentoo-portage"  
USE="3dnow 3dnowex X aalib acpi alsa arts audiofile avi bitmap-fonts caps  
cdparanoia cdr chm crypt cscope cups curl dga directfb divx4linux doc dvd  
dvdread emboss encode esd ethereal fam fbcon fdftk fftw flac flash foomaticdb  
fortran gd ggi gif ginac gphoto2 gpm gstreamer guile icq imagemagick imap imlib  
jabber jack java jpeg jpeg2k junit kde kdeenablefinal lcms ldap libmatroska  
live lm_sensors mad maildir mbox memlimit mikmod mmx motif mozilla mp3 mpeg msn  
ncurses network nls nocardbus nptl offensive oggvorbis openexr opengl oscar oss  
pam pdflib perl pic plotutils png povray qt quicktime readline real sdl slang  
snmp speex spell ssl svg svga szip tcltk tetex theora tiff truetype  
truetype-fonts type1-fonts unicode usb userlocales wmf x86 xine xmms xv xvid  
yahoo zlib video_cards_savage linguas_es"  
Unset:  ASFLAGS, CBUILD, CTARGET, LDFLAGS




Comment 1


Diego Elio Pettenò (RETIRED)






          2005-04-11 08:07:19 UTC
        

Please attach the config.log to the bug, as the url seems not to work.





Comment 2


Diego Elio Pettenò (RETIRED)






          2005-04-12 17:51:56 UTC
        

Ok now the url seems to work, this is the problem-prone part:


configure:24820: checking for pthread_create in -lpthread
configure:24850: i686-pc-linux-gnu-gcc -o conftest -O2 -march=athlon -pipe -frename-registers -UHAVE_MMX -mno-sse2 -mno-sse3 -ffunction-sections   conftest.c -lpthread   >&5
/lib/libpthread.so.0: undefined reference to `errno@GLIBC_PRIVATE'
/lib/libpthread.so.0: undefined reference to `__libc_dl_error_tsd@GLIBC_PRIVATE'
/lib/libpthread.so.0: undefined reference to `__resp@GLIBC_PRIVATE'
/lib/libpthread.so.0: undefined reference to `h_errno@GLIBC_PRIVATE'
collect2: ld returned 1 exit status
configure:24856: $? = 1
configure: failed program was:
| /* confdefs.h.  */
| 
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define XINE_MAJOR 1
| #define XINE_MINOR 0
| #define XINE_SUB 0
| #define PACKAGE "xine-lib"
| #define VERSION "1.0"
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #ifdef __cplusplus
| extern "C" void std::exit (int) throw (); using std::exit;
| #endif
| #define HAVE_ALLOCA_H 1
| #define HAVE_ALLOCA 1
| #define HAVE_STDLIB_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_GETPAGESIZE 1
| #define HAVE_MMAP 1
| #define HAVE_ARGZ_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_NL_TYPES_H 1
| #define HAVE_MALLOC_H 1
| #define HAVE_STDDEF_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_SYS_PARAM_H 1
| #define HAVE_FEOF_UNLOCKED 1
| #define HAVE_FGETS_UNLOCKED 1
| #define HAVE_GETCWD 1
| #define HAVE_GETEGID 1
| #define HAVE_GETEUID 1
| #define HAVE_GETGID 1
| #define HAVE_GETUID 1
| #define HAVE_MEMPCPY 1
| #define HAVE_MUNMAP 1
| #define HAVE_PUTENV 1
| #define HAVE_SETENV 1
| #define HAVE_SETLOCALE 1
| #define HAVE_STPCPY 1
| #define HAVE_STRCHR 1
| #define HAVE_STRCASECMP 1
| #define HAVE_STRDUP 1
| #define HAVE_STRTOUL 1
| #define HAVE_TSEARCH 1
| #define HAVE___ARGZ_COUNT 1
| #define HAVE___ARGZ_STRINGIFY 1
| #define HAVE___ARGZ_NEXT 1
| #define HAVE_ICONV 1
| #define ICONV_CONST 
| #define HAVE_LANGINFO_CODESET 1
| #define HAVE_LC_MESSAGES 1
| #define ENABLE_NLS 1
| #define HAVE_LIBINTL_H 1
| #define HAVE_GETTEXT 1
| #define HAVE_DCGETTEXT 1
| #define inline inline __attribute__ ((__always_inline__))
| #define SIZEOF_LONG 4
| /* end confdefs.h.  */
| 
| /* Override any gcc2 internal prototype to avoid an error.  */
| #ifdef __cplusplus
| extern "C"
| #endif
| /* We use char because int might match the return type of a gcc2
|    builtin and then its argument prototype would still apply.  */
| char pthread_create ();
| int
| main ()
| {
| pthread_create ();
|   ;
|   return 0;
| }
configure:24882: result: no
configure:24887: error: pthread needed

Now is time to find this out :)




Comment 3


Diego Elio Pettenò (RETIRED)






          2005-04-12 17:58:07 UTC
        

Sounds similar to bug #67166 (which seems not to involve only Qt apps). The problem seems to be fixed using "nptl nptlonly" or with updated glibc.




Comment 4


Alejandro Diaz Caro





          2005-04-12 20:40:35 UTC
        

Sorry, I don't have Gentoo for a time. I'm upgrading my computer. I'll have Gentoo again in one week so so.   
The problem arose when I upgrade my system from 2004.3 to the 2005.0. I do not know which was the problem in himself.
Sorry for my very bad english (translated from spanish by google :S)




Comment 5


Diego Elio Pettenò (RETIRED)






          2005-05-06 16:56:46 UTC
        

Please reopen if the problem persists. I really can't find the problem a part from that.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

