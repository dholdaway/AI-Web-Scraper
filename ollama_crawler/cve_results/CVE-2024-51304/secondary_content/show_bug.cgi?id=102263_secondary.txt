Title: 102263 – Thunderbird Segfaults on startup
URL: https://bugs.gentoo.org/show_bug.cgi?id=102263

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 102263
Thunderbird Segfaults on startup
Last modified: 2006-12-21 20:43:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 102263 
      - Thunderbird Segfaults on startup


Summary:
Thunderbird Segfaults on startup
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-08-12 10:05 UTC by Fredrik Eriksson





      Modified:
    
2006-12-21 20:43 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



lakerdonald
lorenzo
rich0









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace output 

              (straceout.txt,32.62 KB,
                text/plain)

            
2005-10-25 17:12 UTC,

            Richard Freeman




Details





strace output (command: see above)

              (thunderbird.strace,651.15 KB,
                application/octet-stream)

            
2006-01-03 07:52 UTC,

            k7avenger




Details





strace thunderbird as user

              (strace.thunderbird,29.03 KB,
                text/plain)

            
2006-02-10 04:38 UTC,

            marvin




Details





My strace output

              (crashingthunderbird,34.48 KB,
                text/plain)

            
2006-03-21 02:59 UTC,

            Maxxer




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fredrik Eriksson





          2005-08-12 10:05:05 UTC
        

when I try to run thunderbird I get this output:

"No running windows found
/usr/libexec/mozilla-launcher: line 116: 21401 Segmenteringsfel        "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)"

(Segmenteringsfel = segfault)



Reproducible: Always
Steps to Reproduce:
1. stage1 gentoo installation
2. install mail-client/mozilla-thunderbird
3. try to run thunderbird in x11-wm/windowmaker-0.92.0-r1

Actual Results:  
thunderbird-1.0.6-r2 and r4 segfaults with these lines:

"No running windows found
/usr/libexec/mozilla-launcher: line 116: 21401 Segmenteringsfel        "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)"

thunderbird-1.0.5 and thunderbird-bin-1.0.6-r1 will start a process, but will
never open a window.

Expected Results:  
started the program!

emerge info:

Portage 2.0.51.22-r2 (default-linux/amd64/2005.1, gcc-3.4.3, glibc-2.3.5-r0,
2.6.12-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -mcpu=k8 -march=k8 -mtune=k8 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -mcpu=k8 -march=k8 -mtune=k8 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.du.se/pub/os/gentoo http://mirror.pudas.net/gentoo"
LANG="sv_SE.UTF-8"
LINGUAS="sv"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X aac alsa avi bash-completion berkdb bitmap-fonts browserplugin
bzip2 cjk crypt cups dvd dvdr eds encode fbcon foomaticdb fortran gif gpm
gstreamer gtk gtk2 imlib ipv6 java javascript jpeg lzo lzw lzw-tiff matroska
mozilla mp3 mpeg ncurses nls nptl nvidia ogg oggvorbis opengl pam pdflib perl
png python quicktime readline real spell ssl tcpd theora tiff truetype
truetype-fonts type1-fonts unicode usb userlocales vorbis xml2 xpm xv xvid zlib
linguas_sv linguas_en linguas_ja userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Jory A. Pratt





          2005-08-12 10:52:39 UTC
        

Please compile with CFLAGS="-O2 -march=k8 -pipe" 




Comment 2


Fredrik Eriksson





          2005-08-12 12:40:12 UTC
        

(In reply to comment #1)
> Please compile with CFLAGS="-O2 -march=k8 -pipe" 

didn't make much difference:

No running windows found
/usr/libexec/mozilla-launcher: line 116: 24294 Segmenteringsfel        "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)





Comment 3


Jory A. Pratt





          2005-08-12 13:06:03 UTC
        

Is anyone else experiencing this problem? Also provide emerge -pv
mozilla-thunderbird please make it alot easier then sorting threw USE flags
right about now.




Comment 4


Fredrik Eriksson





          2005-08-12 15:05:03 UTC
        

I've tried without ipv6 too, but it made no difference.
[ebuild   R   ] mail-client/mozilla-thunderbird-1.0.6-r2  -debug -gnome +ipv6
-ldap -mozcalendar -moznoxft +truetype -xinerama -xprint 0 kB




Comment 5


Fredrik Eriksson





          2005-08-14 12:17:04 UTC
        

I recompiled thunderbird with the debug flag, here's the last few lines, I hope
it helps anything:

Note: verifyreflow is disabled
--DOMWINDOW == 2
WARNING: GetDefaultCharsetForLocale: need to add multi locale support, file
nsUNIXCharset.cpp, line 189
WARNING: GetDefaultCharsetForLocale: need to add multi locale support, file
nsUNIXCharset.cpp, line 189
++WEBSHELL == 3
++DOMWINDOW == 3
++WEBSHELL == 4
++DOMWINDOW == 4
WARNING: GetDefaultCharsetForLocale: need to add multi locale support, file
nsUNIXCharset.cpp, line 189
###!!! ASSERTION: index exceeds allowable range: 'i <= mLength', file
../../../dist/include/string/nsTString.h, line 127
Break: at file ../../../dist/include/string/nsTString.h, line 127
/usr/libexec/mozilla-launcher: line 116:  8178 Segmenteringsfel        "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)




Comment 6


Fredrik Eriksson





          2005-08-20 10:58:45 UTC
        

OK I've figured it out. Apparently it was some of my old mail that caused
problems, thier filenames was coded in something else then utf-8, apparently it
wasn't able to load those files. It's strange though. the old configuration
works fine on my pentium3 laptop, where the system is about the same, except for
being 32 bit. 

I'm not sure in what charset they where created, probably ISO-8859-1 or ISO-8859-15.

"ls .thunderbird/ti6fa539.default/Mail/Local\ Folders" showed the files as
"????S?" and "?,"

"rm -ri .thunderbird/ti6fa539.default/Mail/Local\ Folders/" showed the files as
"\346\024\245\346S\254" and "\345,"

and there was the same but with .msf and .sbd as well. Well removing those files
got thunderbird working again.




Comment 7


Jory A. Pratt





          2005-10-25 13:48:46 UTC
        

reopen if problem comes back ... closing until further reports suggest much
bigger problem other then corrupt mail. Thanks for staying on top of your bug
with the follow up commentary.




Comment 8


Richard Freeman






          2005-10-25 17:08:45 UTC
        

I am seeing this problem as well.  This happens in 1.0.7 and in -r1 as well.

I do not have any local mail messages - I'm using IMAP.  I also tried removing
the .thunderbird directory with no luck, so it definintely isn't profile-related.

My use flags:

mail-client/mozilla-thunderbird-1.0.7-r1  -debug -gnome -ipv6 -ldap -mozcalendar
-moznoxft +truetype -xinerama -xprint

Here is my emerge info:

Gentoo Base System version 1.6.13
Portage 2.0.51.22-r3 (default-linux/amd64/2005.0, gcc-3.4.4, glibc-2.3.5-r2,
2.6.12-gentoo-r9-rf36 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r9-rf36 x86_64 AMD Athlon(tm) 64 Processor 3000+
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -Os -pipe -fomit-frame-pointer -frename-registers -fweb
-fstack-protector"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /home /opt/zetagrid /usr/kde/2/share/config
/usr/kde/3.2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config
/usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config
/usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb
/usr/lib64/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/bind /var/freenet /var/qmail/control /var/www"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=k8 -Os -pipe -fomit-frame-pointer -frename-registers -fweb
-fstack-protector"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg ccache distlocks multilib-strict nostrip sandbox
sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="ftp://gentoo.mirrors.pair.com/ http://mirror.datapipe.net/gentoo
http://gentoo.mirrors.pair.com/ ftp://ftp.ussg.iu.edu/pub/linux/gentoo"
MAKEOPTS="-j2"
PKGDIR="/var/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="amd64 X aac aalib aim alsa apache2 arts avi bash-completion berkdb
bitmap-fonts bonobo canna cdparanoia cdr crypt css cups curl dba dts dv dvd eds
emboss encode esd ethereal fam fbcon firefox flac foomaticdb fortran freetype gd
gdbm gif gimpprint glut gmail gphoto2 gpm gstreamer gtk gtk2 gtkhtml guile iconv
imagemagick imap imlib innodb jabber jack java jpeg junit kde kerberos libwww
lm_sensors lzw lzw-tiff mad maildir memlimit mikmod motif mozilla mozsvg mp3
mpeg mpeg4 mplayer msn mysql ncurses nls nptl ntlm oav ogg oggvorbis opengl pam
pda pdflib perl php png python qt quicktime readline ruby samba sasl sdl session
slang smime speex spell ssl svg tcltk tcpd tetex theora tiff timidity truetype
truetype-fonts type1-fonts udev usb userlocales vorbis wmf xine xml xml2 xmms
xpm xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS






Comment 9


Richard Freeman






          2005-10-25 17:11:32 UTC
        

One other detail that might help - in -r1 here is the error I get:

No running windows found

(Gecko:26103): Gdk-WARNING **: gdk_property_get(): length value has wrapped in
calculation (did you pass G_MAXLONG?)
/usr/libexec/mozilla-launcher: line 116: 26103 Segmentation fault      "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)

I'm attaching my strace output.




Comment 10


Richard Freeman






          2005-10-25 17:12:24 UTC
        

Created attachment 71456 [details]
strace output




Comment 11


Richard Freeman






          2005-10-26 17:21:56 UTC
        

Hmm - goes away with just -O2 in the CFLAGS.  My guess is that -fstack-protector
breaks the build.  Most likely an upstream issue (either GCC or mozilla).




Comment 12


Andy Kissner





          2005-11-07 14:08:45 UTC
        

I get the same error, even with just CFLAGS of -02




Comment 13


Jory A. Pratt





          2005-11-28 17:04:09 UTC
        

Just saying "same for me" or "me too" does me no good. I need to find a common
ground with your CFLAGS if you want to solve this please post your CFLAGS, if
noone responds in next 72 hours I will close with needinfo.




Comment 14


k7avenger





          2006-01-03 07:35:50 UTC
        

I have this problem, too. Neither (re)moving the ~/.thunderbird/ directory, nor starting as root gives me something else than:
[~]># thunderbird
No running windows found
/usr/libexec/mozilla-launcher: line 119:  8030 Segmentation fault      "$mozbin" "$@"
thunderbird-bin exited with non-zero status (139)

Some additional information:
[ebuild   R   ] mail-client/mozilla-thunderbird-1.0.7-r3  USE="-debug -gnome +ipv6 +ldap -mozcalendar -moznoxft +truetype -xinerama +xprint" 0 kB

[ebuild   R   ] www-client/mozilla-launcher-1.45  0 kB 

[]># emerge info
Portage 2.1_pre1 (default-linux/x86/2005.0, gcc-3.4.5, glibc-2.3.5-r3,glibc-2.3.4.20040808-r1, 2.6.14 i
686)
=================================================================
System uname: 2.6.14 i686 AMD Athlon(tm) XP 2600+
Gentoo Base System version 1.12.0_pre12
dev-lang/python:     2.3.5, 2.4.2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe -mfpmath=sse -msse -mmmx -m3dnow -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config
 /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/afs/C /etc/afs/afsws /etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe -mfpmath=sse -msse -mmmx -m3dnow -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gen
too ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp
.join.uni-muenster.de/pub/linux/distributions/gentoo http://ftp-stud.fht-esslingen.de/pub/Mirrors/gento
o/ ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X a52 aac aalib acl acpi adns afs alsa apache2 audiofile avi bash-completion be
rkdb bitmap-fonts bmp bzip2 bzlib cdb cdio cdparanoia cpdflib cross crypt cscope ctype curl curlwrapper
s dba dbx dga dio divx4linux djbfft dv dvd dvdread encode extras fastcgi ffmpeg fftw flac font-server f
reetype gd gdbm ggi gif gimpprint gpm graphviz gstreamer gtk gtk2 gtkhtml hal httpd id3 imagemagick ima
p imlib inkjar ipv6 java javascript jbig jikes jpeg lame largeterminal lcms ldap libcaca libg++ libwww 
lzo mjpeg mmap mmx mmxext mng motif mp3 mp3live mp4live mpeg mpeg2 mplayer msn msql mssql multicall mys
ql mysqli mythtv nas ncurses netcdf network nfsv4 nis nptl nsplugin nvidia odbc ogg oggvorbis openal op
engl oss pam pcre pdflib perl php player plotutils png posix postgres pxeserial python qt quicktime rar
 readline real rtc samba sasl sdl skey sndfile snmp sockets socks5 speex sse ssl stream subtitles svg s
vga tcltk tcpd theora threads tiff tokenizer truetype truetype-fonts type1-fonts unicode vcd vim-with-x
 vorbis win32codecs wmf x264 xine xinetd xml xml2 xmlrpc xmms xprint xv xvid yv12 zlib elibc_glibc kern
el_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTDIR_OVERLAY




Comment 15


k7avenger





          2006-01-03 07:52:40 UTC
        

Created attachment 76085 [details]
strace output (command: see above)




Comment 16


k7avenger





          2006-01-05 04:39:33 UTC
        

Now compiled with the debug USE-flag:

[~]># thunderbird 
No running windows found
Removing /home/k7avenger/.thunderbird/i807jdmu.default/compreg.dat leftover from older thunderbird
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
No Persistent Registry Found.
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
Type Manifest File: /home/k7avenger/.thunderbird/i807jdmu.default/xpti.dat
nsNativeComponentLoader: autoregistering begins.
*** Registering xpcomObsoleteModule components (all right -- a generic module!)
*** Registering xpconnect components (all right -- a generic module!)
*** Registering nsUConvModule components (all right -- a generic module!)
*** Registering nsI18nModule components (all right -- a generic module!)
*** Registering nsJarModule components (all right -- a generic module!)
*** Registering necko_core_and_primary_protocols components (all right -- a generic module!)
*** Registering necko_secondary_protocols components (all right -- a generic module!)
*** Registering nsPrefModule components (all right -- a generic module!)
*** Registering nsSecurityManagerModule components (all right -- a generic module!)
*** Registering nsRDFModule components (all right -- a generic module!)
*** Registering nsParserModule components (all right -- a generic module!)
*** Registering nsGfxPSModule components (all right -- a generic module!)
*** Registering MyService components (all right -- a generic module!)
*** Registering nsGfxGTKModule components (all right -- a generic module!)
*** Registering nsImageLib2Module components (all right -- a generic module!)
*** Registering nsWidgetGtk2Module components (all right -- a generic module!)
*** Registering XRemoteClientModule components (all right -- a generic module!)
*** Registering nsLayoutModule components (all right -- a generic module!)
*** Registering nsMorkModule components (all right -- a generic module!)
*** Registering docshell_provider components (all right -- a generic module!)
*** Registering embedcomponents components (all right -- a generic module!)
*** Registering Browser_Embedding_Module components (all right -- a generic module!)
*** Registering nsEditorModule components (all right -- a generic module!)
*** Registering nsTransactionManagerModule components (all right -- a generic module!)
*** Registering nsComposerModule components (all right -- a generic module!)
*** Registering appshell components (all right -- a generic module!)
*** Registering nsChromeModule components (all right -- a generic module!)
*** Registering nsAccessibilityModule components (all right -- a generic module!)
*** Registering nsTestDynamicModule components (all right -- a generic module!)
*** Registering nsSampleModule components (all right -- a generic module!)
nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with error: libesd.so.0: cannot op
en shared object file: No such file or directory
*** Registering BOOT components (all right -- a generic module!)
*** Registering NSS components (all right -- a generic module!)
*** Registering PKI components (all right -- a generic module!)
*** Registering nsFindComponent components (all right -- a generic module!)
*** Registering nsFileViewModule components (all right -- a generic module!)
*** Registering XRemoteServiceModule components (all right -- a generic module!)
*** Registering application components (all right -- a generic module!)
*** Registering nsSoftwareUpdate components (all right -- a generic module!)
*** Registering JavaScript_Debugger components (all right -- a generic module!)
*** Registering nsWalletModule components (all right -- a generic module!)
*** Registering nsWalletViewerModule components (all right -- a generic module!)
*** Registering mozSpellCheckerModule components (all right -- a generic module!)
*** Registering mozMySpellModule components (all right -- a generic module!)
*** Registering nsXMLExtrasModule components (all right -- a generic module!)
*** Registering nsWebServicesModule components (all right -- a generic module!)
*** Registering nsImportServiceModule components (all right -- a generic module!)
*** Registering nsMsgSMIMEModule components (all right -- a generic module!)
*** Registering nsMailModule components (all right -- a generic module!)
*** Registering nsMailCompsModule components (all right -- a generic module!)
*** Registering xpconnect_test components (all right -- a generic module!)
*** Registering WSPProxyTestModule components (all right -- a generic module!)
nsNativeComponentLoader: autoregistering succeeded
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
*** Registering mdn account manager extension.
*** Registering smime account manager extension.
*** Deferring registration of sample JS components
nNCL: registering deferred (0)
*** Registering sample JS components
nNCL: registering deferred (0)
nNCL: registering deferred (0)
nNCL: registering deferred (0)
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
nsNativeComponentLoader: autoregistering begins.
nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with error: libesd.so.0: cannot op
en shared object file: No such file or directory
nsNativeComponentLoader: autoregistering succeeded
nNCL: registering deferred (0)
GFX: dpi=96 t2p=0.0666667 p2t=15 depth=24

Program /usr/lib/mozilla-thunderbird/thunderbird-bin (pid = 7583) received signal 11.
Stack:
nsProfileLock::FatalSignalHandler(int)+0x00000080 [/usr/lib/mozilla-thunderbird/thunderbird-bin +0x0001
E640]
__kernel_sigreturn+0x00000000 [ +0x00000420]
UNKNOWN [/lib/tls/libc.so.6 +0x000E7C7C]
UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
_dl_open+0x00000098 [/lib/tls/libc.so.6 +0x000E8418]
UNKNOWN [/lib/libdl.so.2 +0x00000D08]
UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
UNKNOWN [/lib/libdl.so.2 +0x000012DD]
dlopen+0x00000041 [/lib/libdl.so.2 +0x00000D61]
Sleeping for 5 minutes.
Type 'gdb /usr/lib/mozilla-thunderbird/thunderbird-bin 7583' to attach your debugger to this thread.




Comment 17


Jory A. Pratt





          2006-01-05 05:18:42 UTC
        

(In reply to comment #16)
> Now compiled with the debug USE-flag:
> 
> [~]># thunderbird 
> No running windows found
> Removing /home/k7avenger/.thunderbird/i807jdmu.default/compreg.dat leftover
> from older thunderbird
> WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
> No Persistent Registry Found.
> WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
> Type Manifest File: /home/k7avenger/.thunderbird/i807jdmu.default/xpti.dat
> nsNativeComponentLoader: autoregistering begins.
> *** Registering xpcomObsoleteModule components (all right -- a generic module!)
> *** Registering xpconnect components (all right -- a generic module!)
> *** Registering nsUConvModule components (all right -- a generic module!)
> *** Registering nsI18nModule components (all right -- a generic module!)
> *** Registering nsJarModule components (all right -- a generic module!)
> *** Registering necko_core_and_primary_protocols components (all right -- a
> generic module!)
> *** Registering necko_secondary_protocols components (all right -- a generic
> module!)
> *** Registering nsPrefModule components (all right -- a generic module!)
> *** Registering nsSecurityManagerModule components (all right -- a generic
> module!)
> *** Registering nsRDFModule components (all right -- a generic module!)
> *** Registering nsParserModule components (all right -- a generic module!)
> *** Registering nsGfxPSModule components (all right -- a generic module!)
> *** Registering MyService components (all right -- a generic module!)
> *** Registering nsGfxGTKModule components (all right -- a generic module!)
> *** Registering nsImageLib2Module components (all right -- a generic module!)
> *** Registering nsWidgetGtk2Module components (all right -- a generic module!)
> *** Registering XRemoteClientModule components (all right -- a generic module!)
> *** Registering nsLayoutModule components (all right -- a generic module!)
> *** Registering nsMorkModule components (all right -- a generic module!)
> *** Registering docshell_provider components (all right -- a generic module!)
> *** Registering embedcomponents components (all right -- a generic module!)
> *** Registering Browser_Embedding_Module components (all right -- a generic
> module!)
> *** Registering nsEditorModule components (all right -- a generic module!)
> *** Registering nsTransactionManagerModule components (all right -- a generic
> module!)
> *** Registering nsComposerModule components (all right -- a generic module!)
> *** Registering appshell components (all right -- a generic module!)
> *** Registering nsChromeModule components (all right -- a generic module!)
> *** Registering nsAccessibilityModule components (all right -- a generic
> module!)
> *** Registering nsTestDynamicModule components (all right -- a generic module!)
> *** Registering nsSampleModule components (all right -- a generic module!)
> nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with
> error: libesd.so.0: cannot op
> en shared object file: No such file or directory
> *** Registering BOOT components (all right -- a generic module!)
> *** Registering NSS components (all right -- a generic module!)
> *** Registering PKI components (all right -- a generic module!)
> *** Registering nsFindComponent components (all right -- a generic module!)
> *** Registering nsFileViewModule components (all right -- a generic module!)
> *** Registering XRemoteServiceModule components (all right -- a generic
> module!)
> *** Registering application components (all right -- a generic module!)
> *** Registering nsSoftwareUpdate components (all right -- a generic module!)
> *** Registering JavaScript_Debugger components (all right -- a generic module!)
> *** Registering nsWalletModule components (all right -- a generic module!)
> *** Registering nsWalletViewerModule components (all right -- a generic
> module!)
> *** Registering mozSpellCheckerModule components (all right -- a generic
> module!)
> *** Registering mozMySpellModule components (all right -- a generic module!)
> *** Registering nsXMLExtrasModule components (all right -- a generic module!)
> *** Registering nsWebServicesModule components (all right -- a generic module!)
> *** Registering nsImportServiceModule components (all right -- a generic
> module!)
> *** Registering nsMsgSMIMEModule components (all right -- a generic module!)
> *** Registering nsMailModule components (all right -- a generic module!)
> *** Registering nsMailCompsModule components (all right -- a generic module!)
> *** Registering xpconnect_test components (all right -- a generic module!)
> *** Registering WSPProxyTestModule components (all right -- a generic module!)
> nsNativeComponentLoader: autoregistering succeeded
> WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
> WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
> *** Registering mdn account manager extension.
> *** Registering smime account manager extension.
> *** Deferring registration of sample JS components
> nNCL: registering deferred (0)
> *** Registering sample JS components
> nNCL: registering deferred (0)
> nNCL: registering deferred (0)
> nNCL: registering deferred (0)
> WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
> nsNativeComponentLoader: autoregistering begins.
> nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with
> error: libesd.so.0: cannot op
> en shared object file: No such file or directory
> nsNativeComponentLoader: autoregistering succeeded
> nNCL: registering deferred (0)
> GFX: dpi=96 t2p=0.0666667 p2t=15 depth=24
> 
> Program /usr/lib/mozilla-thunderbird/thunderbird-bin (pid = 7583) received
> signal 11.
> Stack:
> nsProfileLock::FatalSignalHandler(int)+0x00000080
> [/usr/lib/mozilla-thunderbird/thunderbird-bin +0x0001
> E640]
> __kernel_sigreturn+0x00000000 [ +0x00000420]
> UNKNOWN [/lib/tls/libc.so.6 +0x000E7C7C]
> UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
> _dl_open+0x00000098 [/lib/tls/libc.so.6 +0x000E8418]
> UNKNOWN [/lib/libdl.so.2 +0x00000D08]
> UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
> UNKNOWN [/lib/libdl.so.2 +0x000012DD]
> dlopen+0x00000041 [/lib/libdl.so.2 +0x00000D61]
> Sleeping for 5 minutes.
> Type 'gdb /usr/lib/mozilla-thunderbird/thunderbird-bin 7583' to attach your
> debugger to this thread.
> 

Your segfault is from esd. what version do you have installed?





Comment 18


k7avenger





          2006-01-05 05:30:14 UTC
        

I don't have installed esd at all. Using alsa (compiled hard into the kernel). In fact I can't find a ebuild for esd ;)
BTW: mozilla-thunderbird-bin-1.0.7 works allright.




Comment 19


Jakub Moc (RETIRED)






          2006-01-08 14:48:35 UTC
        

(In reply to comment #18)
> I don't have installed esd at all. Using alsa (compiled hard into the kernel).
> In fact I can't find a ebuild for esd ;)

Post the output of 'emerge -pv esound'




Comment 20


k7avenger





          2006-01-08 16:09:46 UTC
        

(In reply to comment #19)
> (In reply to comment #18)
> > I don't have installed esd at all. Using alsa (compiled hard into the kernel).
> > In fact I can't find a ebuild for esd ;)
> 
> Post the output of 'emerge -pv esound'
Oh...esound. Well:

[~]># emerge -pv esound

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild  N    ] media-sound/esound-0.2.36-r1  USE="alsa ipv6 tcpd -debug -static" 361 kB 

Total size of downloads: 361 kB




Comment 21


Jory A. Pratt





          2006-01-08 16:20:47 UTC
        

(In reply to comment #20)
> (In reply to comment #19)
> > (In reply to comment #18)
> > > I don't have installed esd at all. Using alsa (compiled hard into the kernel).
> > > In fact I can't find a ebuild for esd ;)
> > 
> > Post the output of 'emerge -pv esound'
> Oh...esound. Well:
> 
> [~]># emerge -pv esound
> 
> These are the packages that I would merge, in order:
> 
> Calculating dependencies ...done!
> [ebuild  N    ] media-sound/esound-0.2.36-r1  USE="alsa ipv6 tcpd -debug
> -static" 361 kB 
> 
> Total size of downloads: 361 kB
> 

This is gonna sound crazy but could you enable moznoxft and test with truetype? If this is not possible you will have to wait for 1.5 which I have drop'd quite of a few of the use flags already.





Comment 22


k7avenger





          2006-01-10 16:19:22 UTC
        

> This is gonna sound crazy but could you enable moznoxft and test with truetype?

What do you mean with "test with truetype"?
I recompiled it, and enabled moznoxft, truetype was enabled too (as it would be default for me). It still crashes.

[~]># thunderbird
No running windows found
Removing /home/k7avenger/.thunderbird/cio76nom.default/compreg.dat leftover from older thunderbird
Removing /home/k7avenger/.thunderbird/cio76nom.default/XUL.mfasl leftover from older thunderbird
No Persistent Registry Found.
Type Manifest File: /home/k7avenger/.thunderbird/cio76nom.default/xpti.dat
nsNativeComponentLoader: autoregistering begins.
*** Registering nsTestDynamicModule components (all right -- a generic module!)
*** Registering MyService components (all right -- a generic module!)
*** Registering nsSampleModule components (all right -- a generic module!)
*** Registering xpcomObsoleteModule components (all right -- a generic module!)
*** Registering xpconnect components (all right -- a generic module!)
*** Registering xpconnect_test components (all right -- a generic module!)
*** Registering nsUConvModule components (all right -- a generic module!)
*** Registering nsI18nModule components (all right -- a generic module!)
*** Registering nsJarModule components (all right -- a generic module!)
*** Registering necko_core_and_primary_protocols components (all right -- a generic module!)
*** Registering necko_secondary_protocols components (all right -- a generic module!)
*** Registering nsPrefModule components (all right -- a generic module!)
*** Registering nsSecurityManagerModule components (all right -- a generic module!)
*** Registering nsRDFModule components (all right -- a generic module!)
*** Registering nsParserModule components (all right -- a generic module!)
*** Registering nsGfxPSModule components (all right -- a generic module!)
*** Registering nsGfxXprintModule components (all right -- a generic module!)
*** Registering nsGfxGTKModule components (all right -- a generic module!)
*** Registering nsImageLib2Module components (all right -- a generic module!)
*** Registering nsWidgetGtk2Module components (all right -- a generic module!)
*** Registering XRemoteClientModule components (all right -- a generic module!)
*** Registering nsLayoutModule components (all right -- a generic module!)
*** Registering nsMorkModule components (all right -- a generic module!)
*** Registering docshell_provider components (all right -- a generic module!)
*** Registering embedcomponents components (all right -- a generic module!)
*** Registering Browser_Embedding_Module components (all right -- a generic module!)
*** Registering nsEditorModule components (all right -- a generic module!)
*** Registering nsTransactionManagerModule components (all right -- a generic module!)
*** Registering nsComposerModule components (all right -- a generic module!)
*** Registering appshell components (all right -- a generic module!)
*** Registering nsChromeModule components (all right -- a generic module!)
*** Registering nsAccessibilityModule components (all right -- a generic module!)
*** Registering nsLDAPProtocolModule components (all right -- a generic module!)
nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with error: libesd.so.0: cannot op
en shared object file: No such file or directory
*** Registering BOOT components (all right -- a generic module!)
*** Registering NSS components (all right -- a generic module!)
*** Registering PKI components (all right -- a generic module!)
*** Registering nsFindComponent components (all right -- a generic module!)
*** Registering nsFileViewModule components (all right -- a generic module!)
*** Registering XRemoteServiceModule components (all right -- a generic module!)
*** Registering application components (all right -- a generic module!)
*** Registering nsSoftwareUpdate components (all right -- a generic module!)
*** Registering JavaScript_Debugger components (all right -- a generic module!)
*** Registering nsWalletModule components (all right -- a generic module!)
*** Registering nsWalletViewerModule components (all right -- a generic module!)
*** Registering mozSpellCheckerModule components (all right -- a generic module!)
*** Registering mozMySpellModule components (all right -- a generic module!)
*** Registering nsXMLExtrasModule components (all right -- a generic module!)
*** Registering WSPProxyTestModule components (all right -- a generic module!)
*** Registering nsWebServicesModule components (all right -- a generic module!)
*** Registering nsImportServiceModule components (all right -- a generic module!)
*** Registering nsMsgSMIMEModule components (all right -- a generic module!)
*** Registering nsMailModule components (all right -- a generic module!)
*** Registering nsMailCompsModule components (all right -- a generic module!)
nsNativeComponentLoader: autoregistering succeeded
WARNING: NS_ENSURE_TRUE(NS_SUCCEEDED(rv)) failed, file nsINIParser.cpp, line 51
*** Deferring registration of sample JS components
*** Registering LDAP datasource components (all right -- a JavaScript module!)
*** Registering mdn account manager extension.
*** Registering smime account manager extension.
nNCL: registering deferred (0)
*** Registering sample JS components
nNCL: registering deferred (0)
nNCL: registering deferred (0)
nNCL: registering deferred (0)
nsNativeComponentLoader: autoregistering begins.
nsNativeComponentLoader: SelfRegisterDll(libmozgnome.so) Load FAILED with error: libesd.so.0: cannot op
en shared object file: No such file or directory
nsNativeComponentLoader: autoregistering succeeded
nNCL: registering deferred (0)
GFX: dpi=75 t2p=0.0526316 p2t=19 depth=24

Program /usr/lib/mozilla-thunderbird/thunderbird-bin (pid = 13563) received signal 11.
Stack:
nsProfileLock::FatalSignalHandler(int)+0x00000080 [/usr/lib/mozilla-thunderbird/thunderbird-bin +0x0001
E640]
__kernel_sigreturn+0x00000000 [ +0x00000420]
UNKNOWN [/lib/tls/libc.so.6 +0x000E7C7C]
UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
_dl_open+0x00000098 [/lib/tls/libc.so.6 +0x000E8418]
UNKNOWN [/lib/libdl.so.2 +0x00000D08]
UNKNOWN [/lib/ld-linux.so.2 +0x0000B7A0]
UNKNOWN [/lib/libdl.so.2 +0x000012DD]
dlopen+0x00000041 [/lib/libdl.so.2 +0x00000D61]
Sleeping for 5 minutes.
Type 'gdb /usr/lib/mozilla-thunderbird/thunderbird-bin 13563' to attach your debugger to this thread.




Comment 23


marvin





          2006-02-10 04:37:37 UTC
        

k, i am on x86, but the same symptoms so i add some infos here maybe it helps!

esound was not installed, after installing still crashing, removel of .thunderbird - still crashing

starting thunderbird binary (mozilla-thunderbird-bin 1.5)
#thunderbird
No running windows found
/usr/libexec/mozilla-launcher: line 119: 26002 Segmentation fault      "$mozbin" "$@"
thunderbird-bin exited with non-zero status (139)

BUT: i can start as root without crash! as user -> crash
--------------------------------------------------------

#emerge info

Portage 2.0.54 (!/usr/portage/profiles/default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=pentium4 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -march=pentium4 -pipe"
DISTDIR="/mnt/nfs_portage/distfiles"
FEATURES="autoconfig buildpkg distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j6"
PKGDIR="/mnt/nfs_portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/mnt/nfs_portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts cairo cdr crypt cups curl dvd eds emboss encode esd fam foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imagemagick imlib ipv6 java jpeg kde ldap libg++ libwww mad mikmod motif mp3 mpeg ncurses nls nptl ogg oggvorbis opengl oss pam pdflib perl png postgres python qt quicktime readline sdl spell ssl tcpd tiff truetype truetype-fonts type1-fonts unicode vorbis xml2 xmms xv zlib video_cards_i915 userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 24


marvin





          2006-02-10 04:38:57 UTC
        

Created attachment 79420 [details]
strace thunderbird as user




Comment 25


Maxxer





          2006-03-21 02:55:05 UTC
        

I have a similar problem, Thunderbird segfaulting on some messages. Sadly this happens VERY OFTEN to me!

It is happening today just clicking on a message, it usually happens on some messages I receive weekly but this time when I scroll down to the bottom of the message. Even more often it happens when I delete the lowest part of a message when replying to a mail. It's very annoying, since many times I already wrote my text, and as I delete unneeded text or signature TB crashes with my unsaved message.

I'm using thunderbird-1.5-r1 (compiling -r2 right now) on amd64. This is happening since some months, sadly I can't remember from which version of tb. It must have been since december or something like that. 
I'm using enigmail extension (from portage) and CrossOver theme, but I've tried removing both without improvements.
The only "strange" thing I may have done was unmasking and compiling 1.5-rc2 when it was in portage. But again, I tried removing thunderbird and recompiling from scratch without success. I must admit I kept the profile directory as is.

I'll attach my strace.
The command, and the output, is the following:

maxxer@ginger ~ $ strace -o crashingthunderbird thunderbird
No running windows found
/usr/libexec/mozilla-launcher: line 117:  9989 Segmentation fault      MOZ_NO_REMOTE=1 "$mozbin" "$@"
thunderbird-bin exited with non-zero status (139)





Comment 26


Maxxer





          2006-03-21 02:59:55 UTC
        

Created attachment 82753 [details]
My strace output

This is my strace log of thunderbird-1.5-r1




Comment 27


marvin





          2006-04-28 01:10:48 UTC
        

finally i found the cause of my segfaults!
thunderbird reads /etc/ldap.conf if it exists and queries the ldap server. something went wrong and thunderbird crashed...




Comment 28


Simon Stelling (RETIRED)






          2006-07-20 09:36:11 UTC
        

not amd64-specific




Comment 29


Christian Marie (RETIRED)






          2006-12-21 20:43:26 UTC
        

Please reopen if anyone can duplicate this with the latest stable thunderbird.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

