Title: 97488 – Atheros W-Lan unusable with new baselayout net.* scripts
URL: https://bugs.gentoo.org/show_bug.cgi?id=97488

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 97488
Atheros W-Lan unusable with new baselayout net.* scripts
Last modified: 2005-07-07 03:51:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 97488 
      - Atheros W-Lan unusable with new baselayout net.* scripts


Summary:
Atheros W-Lan unusable with new baselayout net.* scripts
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Roy Marples (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-06-30 06:13 UTC by Fabian Zeindl





      Modified:
    
2005-07-07 03:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fabian Zeindl





          2005-06-30 06:13:14 UTC
        

My Atheros-based wlan-card needs a "ifconfig ath0 up" first before it can scan
for networks otherwise it reports "Interface doesn't support scanning".
I configured net.ath0 to scan for essid and it fails everytime. I guess this is
because of the missing "ifconfig ath0 up"...

Reproducible: Always
Steps to Reproduce:
1.
2.
3.

Actual Results:  
net.ath0 fails

Expected Results:  
it should connect to my network




Comment 1


Roy Marples (RETIRED)






          2005-06-30 08:20:18 UTC
        

(In reply to comment #0)
> I guess this is because of the missing "ifconfig ath0 up"...

I have zero idea where you get that idea from - the code does do that if you
bothered to read it. I have an atheros card myself and have no such issues.

Please provide the output of
iwlist ath0 scan




Comment 2


Fabian Zeindl





          2005-07-06 12:02:13 UTC
        

Hi

I read through the script searching for "ifconfig XYZ up" and didn't find anything.

When I do /etc/init.d/net.ath0 start I see the following:
 * Starting ath0
 *   Configuring wireless network for ath0
 *   Trying to force preferred in case they are hidden
 *   Failed to associate with any preferred access points on ath0
 *   Failed to configure wireless for ath0                                     
                  [ !! ]

My /etc/conf.d/wireless:
essid_ath0="any"
config_tunet=( "dhcp" )
dhcpcd_tunet="-t 60"
preferred_aps=( "myhome" "campus" )


I've another problem with this too: When I do the command above (or hotplug does
it for me) I cannot use
 $iwconfig ath0 essid campus
 $dhcpcd ath0
anymore.
I can scan with the card for accesspoints and find some, and I have to to
 $iwconfig ath0 essid campus
 $iwconfig ath0 ap <mac>
 $dhcpcd ath0iw
Otherwise the Mac in iwconfig remains FF:FF:FF:FF:FF:FF


greetings
fabian




Comment 3


Fabian Zeindl





          2005-07-06 12:03:35 UTC
        

Hi

I read through the script searching for "ifconfig XYZ up" and didn't find anything.

When I do /etc/init.d/net.ath0 start I see the following:
 * Starting ath0
 *   Configuring wireless network for ath0
 *   Trying to force preferred in case they are hidden
 *   Failed to associate with any preferred access points on ath0
 *   Failed to configure wireless for ath0                                     
                  [ !! ]

My /etc/conf.d/wireless:
essid_ath0="any"
config_tunet=( "dhcp" )
dhcpcd_tunet="-t 60"
preferred_aps=( "myhome" "campus" )

iwlist ath0 scanning:
ath0      Scan completed :
          Cell 01 - Address: 00:03:2F:2B:55:E3
                    ESSID:"myhome"
                    Mode:Master
                    Frequency:2.437 GHz (Channel 6)
                    Quality=55/94  Signal level=-40 dBm  Noise level=-95 dBm
                    Encryption key:off
                    Bit Rate:1 Mb/s
                    Bit Rate:2 Mb/s
                    Bit Rate:5 Mb/s
                    Bit Rate:6 Mb/s
                    Bit Rate:9 Mb/s
                    Bit Rate:11 Mb/s
                    Bit Rate:12 Mb/s
                    Bit Rate:18 Mb/s
                    Bit Rate:24 Mb/s
                    Bit Rate:36 Mb/s
                    Bit Rate:48 Mb/s
                    Bit Rate:54 Mb/s
                    Extra:bcn_int=100


I've another problem with this too: When I do the command above (or hotplug does
it for me) I cannot use this anymore:
 $iwconfig ath0 essid myhome
 $dhcpcd ath0

I can scan with the card for accesspoints and find some, and I have to do
 $iwconfig ath0 essid myhome
 $iwconfig ath0 ap <mac>
 $dhcpcd ath0iw
Otherwise the Mac in iwconfig remains FF:FF:FF:FF:FF:FF


greetings
fabian




Comment 4


Roy Marples (RETIRED)






          2005-07-07 03:51:15 UTC
        

Do a search for interface_up instead of ifconfig up - interface_up "${iface}"
does ifconfig "${iface}" up if you're using ifconfig or ip link set up dev
"${iface}" if you're using iproute2 instead.

The problem is that you're setting the ESSID to "any" - remove the essid_ath0=
line and it should work









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

