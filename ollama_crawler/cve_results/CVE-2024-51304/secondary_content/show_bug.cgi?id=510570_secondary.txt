Title: 510570 – sys-apps/logwatch-7.4.0_p170-r1 - /usr/share/logwatch/scripts/services/zz-lm_sensors expects sys-apps/lm_sensors (sensors), app-admin/hddtemp (daemon on port 7634), net-analyzer/netcat* (/usr/bin/nc)
URL: https://bugs.gentoo.org/show_bug.cgi?id=510570

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 510570
sys-apps/logwatch-7.4.0_p170-r1 - /usr/share/logwatch/scripts/services/zz-lm_sensors expects sys-apps/lm_sensors (sensors), app-admin/hddtemp (daemon on port 7634), net-analyzer/netcat* (/usr/bin/nc)
Last modified: 2014-05-17 20:08:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 510570 
      - sys-apps/logwatch-7.4.0_p170-r1 - /usr/share/logwatch/scripts/services/zz-lm_sensors expects sys-apps/lm_sensors (sensors), app-admin/hddtemp (daemon on port 7634), net-analyzer/netcat* (/usr/bin/nc)


Summary:
sys-apps/logwatch-7.4.0_p170-r1 - /usr/share/logwatch/scripts/services/zz-lm_...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-05-17 15:34 UTC by Thomas Beutin





      Modified:
    
2014-05-17 20:08 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Beutin





          2014-05-17 15:34:27 UTC
        

In the daily logwatch output is an error in the lm_sensors section:

 --------------------- lm_sensors output Begin ------------------------ 

 nc: unable to connect to address 127.0.0.1, service 7634
[...] 
 ---------------------- lm_sensors output End ------------------------- 

IMHO there is no need to install app-admin/hddtemp if sys-apps/smartmontools are installed.
Instead sys-apps/logwatch should be installed without this line in /usr/share/logwatch/scripts/services/zz-lm_sensors if there is no app-admin/hddtemp installed, or - even better - provide a way to query /usr/sbin/smartctl for each configured hard disk in the system if and only if sys-apps/smartmontools is installed.

Reproducible: Always

Steps to Reproduce:
1. install sys-apps/logwatch
2. make sure app-admin/hddtemp is not installed
3. check the lm_sensors section of the daily mail



# emerge --info =sys-apps/logwatch-7.4.0_p170-r1
Portage 2.2.8-r1 (default/linux/amd64/13.0/desktop/gnome, gcc-4.7.3, glibc-2.17, 3.12.13-gentoo x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.12.13-gentoo-x86_64-Intel-R-_Core-TM-_i5-2520M_CPU_@_2.50GHz-with-gentoo-2.2
KiB Mem:    16360656 total,   7230488 free
KiB Swap:    8388604 total,   8388604 free
Timestamp of tree: Sat, 17 May 2014 04:45:01 +0000
ld GNU ld (GNU Binutils) 2.23.2
app-shells/bash:          4.2_p45
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.5-r3, 3.2.5-r3, 3.3.3
dev-util/cmake:           2.8.12.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.2
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo desktop-effects sunrise seden java science barzog-overlay rion x-portage
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7-avx -fomit-frame-pointer -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/fax /usr/share/gnupg/qualified.txt /var/lib/hsqldb /var/spool/fax/etc /var/spool/munin-async/.ssh"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.4/ext-active/ /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=corei7-avx -fomit-frame-pointer -O2 -pipe"
DISTDIR="/media/GFZ640Gb/gentoo/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/desktop-effects /var/lib/layman/sunrise /var/lib/layman/seden /var/lib/layman/java /var/lib/layman/science /var/lib/layman/barzog-overlay /var/lib/layman/rion /usr/local/portage"
SYNC="rsync://192.168.5.1/gentoo-portage"
USE="R X X509 a52 aac aalib accounting acl acpi adns aim alsa amd64 amr ansi ao apache2 apng applet ass audiofile automount avahi avx bacula-console bash-completion bazaar bcmath berkdb bidi bind-mysql bittorrent blas bluetooth bluray bonobo boost bzip2 cairo calendar caps ccache cdb cdda cddb cdio cdparanoia cdr cgi chipcard chroot colord command-args consolekit corefonts cpudetection cpulimit cracklib cramfs crypt cscope css csv ctype cups curl curlwrappers customlog cvs cvsgraph cxx cyrus dba dbi dbm dbus dbx device-mapper devmap dga dhcp dirac directfb djvu dlopen dnsdb dri dts dv dvb dvd dvdr ecc egl encode excel exif expat faad fam fastcgi fat fdk ffmpeg fftw fits flac flash flatfile fltk fontconfig fpx ftp gallium gd gdal gdbm gdu geoip geos gif gimp ginac git gles glib glut gmp gnome gnome-keyring gnuplot gpg gphoto2 graphviz gs gsl gssapi gstreamer gtk gtk3 gudev gzip hal hardened hardenedphp hddtemp hdf5 hdri highlight hpn html http hunspell hwdb iconv icq icu idea idled idn imagemagick imap imlib imlib2 inifile innodb introspection ios ipalias ipc ipod ipv6 jabber jack java javascript jbig jingle jit jpeg jpeg2k json kdrive kerberos keymap kpathsea lame lapack latex lcms ldap less libass libnotify libsamplerate libv4l libv4l2 libwww lm_sensors lmtp logrotate logwatch lua lzma lzo mad magic matroska mbox mcal memlimit mercurial mgetty mhash midi milter mime mimencode ming mmap mms mmx mmxext mng mp3 mp4 mpeg mplayer mpm-prefork mppe-mppc msn mtp multilib musepack musicbrainz mysql mysqli nagios-dns nagios-game nagios-ntp nagios-ping nagios-ssh nautilus ncurses netboot netcdf netlink network networkmanager nfs nis nls nntp nptl nsplugin nss ntfs ntp oav ocatve octave odbc offensive ogg openal openexr opengl openmp openrc openssh openssl osc oscar pam pam_chroot pam_timestamp pango parse-clocks pcf pcntl pcre pda pdf pdfkit pdflib perl php pic plotutils png policykit posix postfix postgis postgres postscript ppds procmail ps pulseaudio pwdb python qdbm qt4 quotas radius raw rdesktop readline recode reiserfs rrdtool rss rtmp samba sample sasl scanner schroedinger screen sendfile sensord session sftp sftplogging shaper shared sharedext shorten sieve simplexml slang slp smartcard smime smp sms smtp sna sndfile snmp snortsam soap sockets socks5 sound sox spamassassin spatialite speex spell spl sql sqlite sqlite3 sse sse2 sse3 sse4 sse4_1 ssl ssse3 stream subversion svg sysfs syslog sysvipc szip taglib tcpd telepathy theora threads tidy tiff timidity tokenizer tools transparent-proxy truetype truetype-fonts type1-fonts udev unicode upnp upnp-av usb userlocales utf8 uuid v4l vaapi vala vcd vhosts vim-syntax virtual-users virus-scan vnc vorbis vpx wddx weather webdav webkit webm webp wifi win32codecs withsamplescripts wmf x264 xattr xcb xcomposite xetex xface xfs xft xinerama xinetd xml xml2 xmlrpc xmp xmpp xorg xosd xpdf-headers xpm xrandr xsl xslt xv xvfb xvid xvmc yahoo yaml yaz zlib zvbi" ABI_X86="64" APACHE2_MODULES="access auth auth_basic auth_digest authn_default authn_core authn_file authz_core authz_groupfile authz_host authz_user authn_dbm authn_dbd dbd ident imagemap authn_dbd authn_file authn_default authz_groupfile authn_alias authn_anon authz_dbm authz_owner authz_default authz_user auth_digest authz_host alias file_cache echo charset_lite cache disk_cache mem_cache ext_filter case_filter case-filter-in deflate filter mime_magic cern_meta proxy_ajp proxy_balancer expires headers usertrack proxy proxy_connect proxy_ftp proxy_http info include cgi cgid dav dav_lock dav_fs vhost_alias speling rewrite log_config logio env setenvif mime status substitute autoindex asis negotiation dir imap actions userdir so unique_id version dumpio log_forensic reqtimeout socache_shmcb unixd proxy_fcgi slotmem_shm" APACHE2_MPMS="worker" CURL_SSL="nss" ELIBC="glibc" FFTOOLS="cws2fws qt-faststart aviocat ismindex" GPSD_PROTOCOLS="aivdm sirf mtk3301 gpsclock superstar2 timing nmea" GRUB_PLATFORMS="pc multiboot efi coreboot efi-64" INPUT_DEVICES="keyboard mouse evdev wacom synaptics" KERNEL="linux" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer nlpsolver pdfimport wiki-publisher" LINGUAS="en_GB en en_US de_DE de" PHP_TARGETS="php5-3 php5-4 php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2 python3_3" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby20" SANE_BACKENDS="net hp" USERLAND="GNU" VIDEO_CARDS="vga intel fbdev vesa" XFCE_PLUGINS="brightness clock xmonad multiload-nandhp trash"
USE_PYTHON="2.7 3.2 3.3"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

sys-apps/logwatch-7.4.0_p170-r1 was built with the following:
USE=""




Comment 1


Jeroen Roovers (RETIRED)






          2014-05-17 16:11:26 UTC
        

That's a single file causing a lot of new RDEPEND entries, expecting a daemon to listen on a certain port (and return a properly formatted reply). logwatch installs many other files. Do you want to address them all, or do you tweak logwatch to fit your system?




Comment 2


Thomas Beutin





          2014-05-17 20:08:15 UTC
        

(In reply to Jeroen Roovers from comment #1)
> That's a single file causing a lot of new RDEPEND entries, expecting a
> daemon to listen on a certain port (and return a properly formatted reply).
> logwatch installs many other files. Do you want to address them all, or do
> you tweak logwatch to fit your system?

Actually IMHO this has to be fixed upstream. But i'd like to have my favored linux distribution taking care and work around upstreams design flaws...
It's a little bit annoying to see this issue ~10x a day in status mails.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

