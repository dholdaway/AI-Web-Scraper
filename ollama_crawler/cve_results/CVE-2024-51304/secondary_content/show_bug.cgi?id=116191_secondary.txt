Title: 116191 – rt3.4.4 emerge reports HTML::MASON version 1.31 MISSING even though it has been emerged
URL: https://bugs.gentoo.org/show_bug.cgi?id=116191

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 116191
rt3.4.4 emerge reports HTML::MASON version 1.31 MISSING even though it has been emerged
Last modified: 2006-01-10 12:32:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 116191 
      - rt3.4.4 emerge reports HTML::MASON version 1.31 MISSING even though it has been emerged


Summary:
rt3.4.4 emerge reports HTML::MASON version 1.31 MISSING even though it has be...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-20 10:57 UTC by Mark Castagna





      Modified:
    
2006-01-10 12:32 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



rl03









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mark Castagna





          2005-12-20 10:57:04 UTC
        

I'm emerging rt-3.4.4 and I'm allowing rt-3.4.4 to satisfy its dependencies. One of its dependencies is HTML-Mason 1.31 which it successfully emerges. However, when rt tests the dependencies, I get the following error. Also, the error message indicates assigning the bug to rl03@gentoo.org.

*** Error Message Excerpted ***
MODPERL2 dependencies:
        CGI 2.92...found
        Apache::DBI ...found
        HTML::Mason 1.31...MISSING
                HTML::Mason version 1.31 required--this is only version 1.26 at (eval 124) line 2, <DATA> line 16.

*** END ***

My /etc/portage/package.* files set to,

*** package.keywords ***
app-admin/webapp-config ~x86
app-portage/cfg-update ~x86
dev-perl/Cache-Simple-TimedExpiry ~x86
dev-perl/Carp-Assert-More ~x86
dev-perl/capitalization ~x86
dev-perl/DBIx-DBSchema ~x86
dev-perl/FCGI ~x86
dev-perl/Font-AFM ~x86
dev-perl/HTML-Format ~x86
dev-perl/HTML-Mason ~x86
dev-perl/HTML-Scrubber ~x86
dev-perl/HTTP-Server-Simple ~x86
dev-perl/HTTP-Server-Simple-Mason ~x86
dev-perl/Hook-LexWrap ~x86
dev-perl/MIME-tools ~x86
dev-perl/Module-Refresh ~x86
dev-perl/Module-Versions-Report ~x86
dev-perl/Test-LongString ~x86
dev-perl/Test-WWW-Mechanize ~x86
dev-perl/Text-Quoted ~x86
dev-perl/Text-WikiFormat ~x86
dev-perl/Tree-Simple ~x86
dev-perl/Want ~x86
dev-perl/XML-RSS ~x86
dev-perl/dbix-searchbuilder ~x86
perl-core/CGI ~x86
perl-core/Storable ~x86
www-apache/libapreq2 ~x86
www-apache/mod_perl ~x86
www-apps/rt ~x86
*** END ***

And

*** package.unmask ***
www-apache/mod_perl
*** END ***

And

*** package.use ***
www-apps/rt vhosts apache2 
www-apache/mod_perl -ipv6
dev-db/mysql berkdb debug innodb perl readline ssl tcpd
*** END ***

The package.* files were set some time ago when I tried emerging rt-3.4.3 with apache1-3. I never was able to get it to work and mod_perl-2 was still "unstable" with rt. I've tried to clean (emerge -C "ebuild") all vestiges of apache-1.x, mod_perl-1.x, etc. from the system

So far, I've un-emerged and re-emerged everything except apache2 and perl5. It is a consisted error and easily reproducible.

I apologize for the verbosity but, this would be my first bug report to Gentoo. 

Thanks,
Mark Castagna




Comment 1


Renat Lumpau (RETIRED)






          2005-12-21 07:15:07 UTC
        

Mark,

Thanks for the report. This is most likely a problem with your perl. Have you upgraded your perl recently? What version are you running? 

Try running perl-cleaner and re-emerging rt.




Comment 2


Mark Castagna





          2005-12-21 07:55:37 UTC
        

(In reply to comment #1)
> Mark,
> 
> Thanks for the report. This is most likely a problem with your perl. Have you
> upgraded your perl recently? What version are you running? 
> 
> Try running perl-cleaner and re-emerging rt.
> 

Renat,

I'm running "dev-lang/perl-5.8.6-r8. Which <OPTION> for perl-cleaner will provide the cleanest platform?

Thanks,
Mark




Comment 3


Renat Lumpau (RETIRED)






          2005-12-21 08:11:59 UTC
        

I believe you want reallyall




Comment 4


Mark Castagna





          2005-12-21 11:54:34 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> > Mark,
> > 
> > Thanks for the report. This is most likely a problem with your perl. Have you
> > upgraded your perl recently? What version are you running? 
> > 
> > Try running perl-cleaner and re-emerging rt.
> > 
> 
> Renat,
> 
> I'm running "dev-lang/perl-5.8.6-r8. Which <OPTION> for perl-cleaner will
> provide the cleanest platform?
> 
> Thanks,
> Mark
> 

Renat,
I ran perl_cleaner reallyall and re-emerged rt-3.4.4 and the same error occurred. Below is the "full" output from where rt-3.4.4 begins. Maybe something is there that I'm missing?
  
>>> emerge (16 of 16) www-apps/rt-3.4.4 to /
>>> md5 files   ;-) rt-3.2.1.ebuild
>>> md5 files   ;-) rt-3.4.4.ebuild
>>> md5 files   ;-) rt-3.4.3.ebuild
>>> md5 files   ;-) files/digest-rt-3.2.1
>>> md5 files   ;-) files/digest-rt-3.4.3
>>> md5 files   ;-) files/digest-rt-3.4.4
>>> md5 files   ;-) files/3.4.4/reconfig
>>> md5 files   ;-) files/3.2.1/postinstall-en.txt
>>> md5 files   ;-) files/3.2.1/reconfig
>>> md5 files   ;-) files/3.4.2/config.layout-gentoo
>>> md5 files   ;-) files/3.4.2/postinstall-en.txt
>>> md5 files   ;-) files/3.4.2/reconfig
>>> md5 files   ;-) files/3.4.2/rt.conf.d
>>> md5 files   ;-) files/3.4.2/rt.init.d
>>> md5 files   ;-) files/3.4.2/rt_apache.conf
>>> md5 files   ;-) files/3.4.2/rt_apache1_fcgi.conf
>>> md5 files   ;-) files/3.4.2/rt_apache2_fcgi.conf
>>> md5 files   ;-) files/3.4.2/Callback.patch
>>> md5 files   ;-) files/3.4.2/rt_apache2.conf
>>> md5 src_uri ;-) rt-3.4.4.tar.gz
 * RT needs MySQL with innodb support
 * 
 * If you are upgrading from an existing _RT2_ installation,
 * stop this ebuild (Ctrl-C now), download the upgrade tool,
 * http://bestpractical.com/pub/rt/devel/rt2-to-rt3.tar.gz
 * and follow the included instructions.
 * 
>>> Unpacking source...
>>> Unpacking rt-3.4.4.tar.gz to /var/tmp/portage/rt-3.4.4/work
>>> Source unpacked.
checking for a BSD-compatible install... /bin/install -c
checking for perl... /usr/bin/perl
checking for chosen layout... Gentoo
configure: creating ./config.status
config.status: creating sbin/rt-dump-database
config.status: creating sbin/rt-setup-database
config.status: creating sbin/rt-test-dependencies
config.status: creating bin/mason_handler.fcgi
config.status: creating bin/mason_handler.scgi
config.status: creating bin/standalone_httpd
config.status: creating bin/rt-crontool
config.status: creating bin/rt-mailgate
config.status: creating bin/rt
config.status: creating Makefile
config.status: creating etc/RT_Config.pm
config.status: creating lib/RT.pm
config.status: creating bin/mason_handler.svc
config.status: creating bin/webmux.pl
Unknown option: without-pg
Unknown option: without-fastcgi
Unknown option: without-fastcgi
 * Missing Perl dependency!
 * 
perl:
        5.8.3...found
users:
        rt group (rt)...found
        bin owner (rt)...found
        libs owner (rt)...found
        libs group (rt)...found
        web owner (apache)...found
        web group (apache)...found
MASON dependencies:
        Params::Validate 0.02...found
        Cache::Cache ...found
        Exception::Class 1.14...found
        HTML::Mason 1.23...found
        MLDBM ...found
        Errno ...found
        FreezeThaw ...found
        Digest::MD5 2.27...found
        CGI::Cookie 1.20...found
        Storable 2.08...found
        Apache::Session 1.53...found
        XML::RSS 1.05...found
        HTTP::Server::Simple 0.07...found
        HTTP::Server::Simple::Mason 0.09...found
        Text::WikiFormat ...found
MAILGATE dependencies:
        HTML::TreeBuilder ...found
        HTML::FormatText ...found
        Getopt::Long ...found
        LWP::UserAgent ...found
CLI dependencies:
        Getopt::Long 2.24...found
CORE dependencies:
        Digest::base ...found
        Digest::MD5 2.27...found
        DBI 1.37...found
        Test::Inline ...found
        Class::ReturnValue 0.40...found
        DBIx::SearchBuilder 1.26...found
        Text::Template ...found
        File::Spec 0.8...found
        HTML::Entities ...found
        HTML::Scrubber 0.08...found
        Net::Domain ...found
        Log::Dispatch 2.0...found
        Locale::Maketext 1.06...found
        Locale::Maketext::Lexicon 0.32...found
        Locale::Maketext::Fuzzy ...found
        MIME::Entity 5.108...found
        Mail::Mailer 1.57...found
        Net::SMTP ...found
        Text::Wrapper ...found
        Time::ParseDate ...found
        Time::HiRes ...found
        File::Temp ...found
        Term::ReadKey ...found
        Text::Autoformat ...found
        Text::Quoted 1.3...found
        Tree::Simple 1.04...found
        Scalar::Util ...found
        Module::Versions::Report ...found
        Cache::Simple::TimedExpiry ...found
        XML::Simple ...found
MODPERL2 dependencies:
        CGI 2.92...found
        Apache::DBI ...found
        HTML::Mason 1.31...MISSING
                HTML::Mason version 1.31 required--this is only version 1.26 at (eval 124) line 2, <DATA> line 16.
MYSQL dependencies:
        DBD::mysql 2.1018...found

SOMETHING WAS MISSING!

Thanks,
Mark




Comment 5


Renat Lumpau (RETIRED)






          2005-12-21 12:01:34 UTC
        

Ok. This could be a bug in dep checking. Please post:

1) the output of emerge -pv HTML-Mason
2) emerge -pv rt  ( here I need to see the USE flags )




Comment 6


Mark Castagna





          2005-12-21 12:11:51 UTC
        

(In reply to comment #5)
> Ok. This could be a bug in dep checking. Please post:
> 
> 1) the output of emerge -pv HTML-Mason
> 2) emerge -pv rt  ( here I need to see the USE flags )
> 

[ebuild R ] dev-perl/HTML-Mason-1.3101  -apache2 -doc -modperl 0 kB
[ebuild N ] www-apps/rt-3.4.4 +apache2 -fastcgi -lighttpd +mysql -postgres +vhosts 0 kB

Should I have enabled USE flags apache2 and modperl for HTML-Mason-1.3101?





Comment 7


Renat Lumpau (RETIRED)






          2005-12-21 14:02:29 UTC
        

I'm pretty sure something's still wrong with your perl.

Incidentally, I just finished sorting out my perl setup, which effectively was emerge -C perl libperl dev-perl/*, followed by an emerge -e world. I just tried emerging rt, which pulled in ~50 perl mods, including HTML-Mason. rt was able to find it and the emerge completed successfully.

Reassigning to our perl folks to see if they have anything insightful to say.




Comment 8


Chris White (RETIRED)






          2005-12-21 14:16:35 UTC
        

umm:

[ebuild R ] dev-perl/HTML-Mason-1.3101  ---> -apache2 -doc -modperl 0 kB

[ebuild N ] www-apps/rt-3.4.4 ---> +apache2 -fastcgi -lighttpd +mysql -postgres
+vhosts 0 kB




Comment 9


Mark Castagna





          2005-12-22 07:23:02 UTC
        

(In reply to comment #8)
> umm:
> 
> [ebuild R ] dev-perl/HTML-Mason-1.3101  ---> -apache2 -doc -modperl 0 kB
> 
> [ebuild N ] www-apps/rt-3.4.4 ---> +apache2 -fastcgi -lighttpd +mysql -postgres
> +vhosts 0 kB
> 
umm:
Prior to Renat forwarding this to you, I un-emerged HTML-Mason, set the USE flags as seen below.

[ebuild   R   ] dev-perl/HTML-Mason-1.3101 ---> +apache2 -doc +modperl 0 kB

Re-emerged rt-3.4.4 which brings HTML-Mason and the same dependency check error occurred.
 






Comment 10


Renat Lumpau (RETIRED)






          2006-01-10 08:44:19 UTC
        

any luck with this?




Comment 11


Mark Castagna





          2006-01-10 10:32:58 UTC
        

Ironically, when I emerged mod_fastcgi and then added the USE flag "fast-cgi" to rt, is emerged properly. However, after emerging properly, I run the rt-test-dependencies --with-modperl2 and it still complains with,

"MODPERL2 dependencies:
        HTML::Mason 1.31...MISSING
                HTML::Mason version 1.31 required--this is only version 1.26 at (eval 124) line 2, <DATA> line 16."

Not sure of the significance, if any.

I still cannot get the virtual host to "see" the rt docroot. My apache2 server keeps displaying the DEFAULT_HOST location. If I change the vhost config file to point to a dummy page it is successful. 
Is there a configuration file that allows rt to run from within the existing server, i.e., without vhosts?

Thanks,
Mark




Comment 12


Renat Lumpau (RETIRED)






          2006-01-10 12:32:11 UTC
        

(In reply to comment #11)
> Ironically, when I emerged mod_fastcgi and then added the USE flag "fast-cgi"
> to rt, is emerged properly. However, after emerging properly, I run the
> rt-test-dependencies --with-modperl2 and it still complains with,
> 
> "MODPERL2 dependencies:
>         HTML::Mason 1.31...MISSING
>                 HTML::Mason version 1.31 required--this is only version 1.26 at
> (eval 124) line 2, <DATA> line 16."
> 
> Not sure of the significance, if any.

This is expected. The ebuild checks dependencies based on USE flags, and doesn't try looking for HTML-Mason if you are using fastcgi.

> I still cannot get the virtual host to "see" the rt docroot. My apache2 server
> keeps displaying the DEFAULT_HOST location. If I change the vhost config file
> to point to a dummy page it is successful. 
> Is there a configuration file that allows rt to run from within the existing
> server, i.e., without vhosts?

Not sure what you mean. Your existing server is also defined using a VirtualHost directive in httpd.conf. Perhaps try manually copying the generated RT Apache config into your default vhost config?

Closing as worksforme...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

