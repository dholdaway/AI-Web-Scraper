Title: 355955 – x11-base/xorg-server-1.9 fails to load r128 driver undefined symbol miEmptyData
URL: https://bugs.gentoo.org/show_bug.cgi?id=355955

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 355955
x11-base/xorg-server-1.9 fails to load r128 driver undefined symbol miEmptyData
Last modified: 2011-02-22 22:52:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 355955 
      - x11-base/xorg-server-1.9 fails to load r128 driver undefined symbol miEmptyData


Summary:
x11-base/xorg-server-1.9 fails to load r128 driver undefined symbol miEmptyData
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-22 03:24 UTC by Stephen Lewis





      Modified:
    
2011-02-22 22:52 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




successful /var/log/X*.log with xorg-server-1.7

              (Xorg.13.log,24.83 KB,
                text/plain)

            
2011-02-22 03:27 UTC,

            Stephen Lewis




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stephen Lewis





          2011-02-22 03:24:18 UTC
        

On a PPC desktop with Rage 128 video which works under x11-base/xorg-server-1.7.7-r1 X server fails when upgraded to x11-base/xorg-server-1.9.4
The emerge went fine but the server cannot load the driver x11-drivers/xf86-video-r128 because of missing symbol "miEmptyData"

[956797.891] (II) LoadModule: "r128"
[956797.904] (II) Loading /usr/lib/xorg/modules/drivers/r128_drv.so
[956797.927] dlopen: /usr/lib/xorg/modules/drivers/r128_drv.so: undefined symbol: miEmptyData
[956797.933] (EE) Failed to load /usr/lib/xorg/modules/drivers/r128_drv.so
[956797.939] (II) UnloadModule: "r128"
[956797.939] (EE) Failed to load module "r128" (loader failed, 7)


Reproducible: Always

Steps to Reproduce:
1. upgrade from xorg-server 1.7 to 1.9
2. start X server
3. (server fails to start)

Actual Results:  
here is failed /var/log/X*.log

 $ cat /var/log/X*13.log.old
[956797.691] _XSERVTransSocketOpenCOTSServer: Unable to open socket for inet6
[956797.695] _XSERVTransOpen: transport open failed for inet6/maple:13
[956797.699] _XSERVTransMakeAllCOTSServerListeners: failed to open listener for inet6
[956797.724] 
X.Org X Server 1.9.4
Release Date: 2011-02-04
[956797.736] X Protocol Version 11, Revision 0
[956797.740] Build Operating System: Linux 2.6.36-gentoo-r5-sl ppc Gentoo
[956797.744] Current Operating System: Linux maple 2.6.36-gentoo-r5-sl #1 Mon Feb 7 00:10:39 PST 2011 ppc
[956797.748] Kernel command line: root=/dev/hda13 ro 
[956797.753] Build Date: 21 February 2011  12:55:54PM
[956797.758]  
[956797.763] Current version of pixman: 0.18.2
[956797.768] 	Before reporting problems, check http://wiki.x.org
	to make sure that you have the latest version.
[956797.778] Markers: (--) probed, (**) from config file, (==) default setting,
	(++) from command line, (!!) notice, (II) informational,
	(WW) warning, (EE) error, (NI) not implemented, (??) unknown.
[956797.794] (==) Log file: "/var/log/Xorg.13.log", Time: Mon Feb 21 14:51:08 2011
[956797.801] (==) Using config file: "/etc/X11/xorg.conf"
[956797.806] (==) Using system config directory "/usr/share/X11/xorg.conf.d"
[956797.832] (==) ServerLayout "X.org Configured"
[956797.832] (**) |-->Screen "Screen0" (0)
[956797.832] (**) |   |-->Monitor "Monitor0"
[956797.833] (**) |   |-->Device "Card0"
[956797.833] (**) |-->Input Device "Mouse0"
[956797.833] (**) |-->Input Device "Keyboard0"
[956797.833] (==) Automatically adding devices
[956797.833] (==) Automatically enabling devices
[956797.850] (WW) The directory "/usr/share/fonts/misc/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/TTF/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/OTF" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/Type1/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/100dpi/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/75dpi/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/misc/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/TTF/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/OTF/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/Type1/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.850] (WW) The directory "/usr/share/fonts/100dpi/" does not exist.
[956797.850] 	Entry deleted from font path.
[956797.851] (WW) The directory "/usr/share/fonts/75dpi/" does not exist.
[956797.851] 	Entry deleted from font path.
[956797.851] (**) FontPath set to:
	
[956797.851] (**) ModulePath set to "/usr/lib/xorg/modules"
[956797.851] (WW) AllowEmptyInput is on, devices using drivers 'kbd', 'mouse' or 'vmmouse' will be disabled.
[956797.851] (WW) Disabling Mouse0
[956797.851] (WW) Disabling Keyboard0
[956797.851] (II) Loader magic: 0x101d6bb8
[956797.851] (II) Module ABI versions:
[956797.851] 	X.Org ANSI C Emulation: 0.4
[956797.851] 	X.Org Video Driver: 8.0
[956797.851] 	X.Org XInput driver : 11.0
[956797.851] 	X.Org Server Extension : 4.0
[956797.866] (--) PCI:*(0:0:16:0) 1002:5046:0000:0000 rev 0, Mem @ 0x94000000/67108864, 0x90000000/16384, I/O @ 0x00000400/256, BIOS @ 0x????????/131072
[956797.866] (II) Open APM successful
[956797.866] (II) "extmod" will be loaded. This was enabled by default and also specified in the config file.
[956797.866] (II) "dbe" will be loaded. This was enabled by default and also specified in the config file.
[956797.866] (II) "glx" will be loaded. This was enabled by default and also specified in the config file.
[956797.866] (II) "record" will be loaded. This was enabled by default and also specified in the config file.
[956797.866] (II) "dri" will be loaded. This was enabled by default and also specified in the config file.
[956797.866] (II) "dri2" will be loaded. This was enabled by default and also specified in the config file.
[956797.867] (II) LoadModule: "extmod"
[956797.868] (II) Loading /usr/lib/xorg/modules/extensions/libextmod.so
[956797.869] (II) Module extmod: vendor="X.Org Foundation"
[956797.869] 	compiled for 1.9.4, module version = 1.0.0
[956797.869] 	Module class: X.Org Server Extension
[956797.869] 	ABI class: X.Org Server Extension, version 4.0
[956797.869] (II) Loading extension MIT-SCREEN-SAVER
[956797.869] (II) Loading extension XFree86-VidModeExtension
[956797.869] (II) Loading extension XFree86-DGA
[956797.869] (II) Loading extension DPMS
[956797.869] (II) Loading extension XVideo
[956797.869] (II) Loading extension XVideo-MotionCompensation
[956797.869] (II) Loading extension X-Resource
[956797.869] (II) LoadModule: "record"
[956797.869] (II) Loading /usr/lib/xorg/modules/extensions/librecord.so
[956797.870] (II) Module record: vendor="X.Org Foundation"
[956797.870] 	compiled for 1.9.4, module version = 1.13.0
[956797.870] 	Module class: X.Org Server Extension
[956797.870] 	ABI class: X.Org Server Extension, version 4.0
[956797.870] (II) Loading extension RECORD
[956797.870] (II) LoadModule: "dbe"
[956797.870] (II) Loading /usr/lib/xorg/modules/extensions/libdbe.so
[956797.870] (II) Module dbe: vendor="X.Org Foundation"
[956797.870] 	compiled for 1.9.4, module version = 1.0.0
[956797.871] 	Module class: X.Org Server Extension
[956797.871] 	ABI class: X.Org Server Extension, version 4.0
[956797.871] (II) Loading extension DOUBLE-BUFFER
[956797.871] (II) LoadModule: "dri"
[956797.871] (II) Loading /usr/lib/xorg/modules/extensions/libdri.so
[956797.888] (II) Module dri: vendor="X.Org Foundation"
[956797.888] 	compiled for 1.9.4, module version = 1.0.0
[956797.888] 	ABI class: X.Org Server Extension, version 4.0
[956797.888] (II) Loading extension XFree86-DRI
[956797.888] (II) LoadModule: "dri2"
[956797.889] (II) Loading /usr/lib/xorg/modules/extensions/libdri2.so
[956797.889] (II) Module dri2: vendor="X.Org Foundation"
[956797.889] 	compiled for 1.9.4, module version = 1.2.0
[956797.889] 	ABI class: X.Org Server Extension, version 4.0
[956797.889] (II) Loading extension DRI2
[956797.889] (II) LoadModule: "glx"
[956797.890] (II) Loading /usr/lib/xorg/modules/extensions/libglx.so
[956797.891] (II) Module glx: vendor="X.Org Foundation"
[956797.891] 	compiled for 1.9.4, module version = 1.0.0
[956797.891] 	ABI class: X.Org Server Extension, version 4.0
[956797.891] (==) AIGLX enabled
[956797.891] (II) Loading extension GLX
[956797.891] (II) LoadModule: "r128"
[956797.904] (II) Loading /usr/lib/xorg/modules/drivers/r128_drv.so
[956797.927] dlopen: /usr/lib/xorg/modules/drivers/r128_drv.so: undefined symbol: miEmptyData
[956797.933] (EE) Failed to load /usr/lib/xorg/modules/drivers/r128_drv.so
[956797.939] (II) UnloadModule: "r128"
[956797.939] (EE) Failed to load module "r128" (loader failed, 7)
[956797.946] (EE) No drivers available.
[956797.952] 
Fatal server error:
[956797.964] no screens found
[956797.971] 
Please consult the The X.Org Foundation support 
	 at http://wiki.x.org
 for help. 
[956797.996] Please also check the log file at "/var/log/Xorg.13.log" for additional information.
[956798.003] 


Expected Results:  
after unmask and downgrading to:
=x11-base/xorg-server-1.7.7-r1
<=x11-apps/xinit-1.2.1

server starts and works

full log attached




Comment 1


Stephen Lewis





          2011-02-22 03:27:05 UTC
        

Created attachment 263407 [details]
successful /var/log/X*.log with xorg-server-1.7




Comment 2


Rafał Mużyło





          2011-02-22 03:46:59 UTC
        

Did you reemerge your drivers after server upgrade, just as the ebuild tells you ?




Comment 3


Stephen Lewis





          2011-02-22 05:36:29 UTC
        

(In reply to comment #2)
> Did you reemerge your drivers after server upgrade, just as the ebuild tells
> you ?
> 

Sadly, I did :-(

As a check, I updated the server again from 1.7 to 1.9
then unmerged all drivers,
then re-emerged drivers
and the X server will not start per previous report:

 # X :13 -ac vt7
_XSERVTransSocketOpenCOTSServer: Unable to open socket for inet6
_XSERVTransOpen: transport open failed for inet6/maple:13
_XSERVTransMakeAllCOTSServerListeners: failed to open listener for inet6

X.Org X Server 1.9.4
Release Date: 2011-02-04
X Protocol Version 11, Revision 0
Build Operating System: Linux 2.6.36-gentoo-r5-sl ppc Gentoo
Current Operating System: Linux maple 2.6.36-gentoo-r5-sl #1 Mon Feb 7 00:10:39 PST 2011 ppc
Kernel command line: root=/dev/hda13 ro
Build Date: 21 February 2011  08:36:30PM

Current version of pixman: 0.18.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: "/var/log/Xorg.13.log", Time: Mon Feb 21 21:25:17 2011
(==) Using config file: "/etc/X11/xorg.conf"
(==) Using system config directory "/usr/share/X11/xorg.conf.d"
dlopen: /usr/lib/xorg/modules/drivers/r128_drv.so: undefined symbol: miEmptyData
(EE) Failed to load /usr/lib/xorg/modules/drivers/r128_drv.so
(EE) Failed to load module "r128" (loader failed, 7)
(EE) No drivers available.

Fatal server error:
no screens found

Please consult the The X.Org Foundation support
         at http://wiki.x.org
 for help.
Please also check the log file at "/var/log/Xorg.13.log" for additional information.

here are the --info files for server and driver

 $ emerge --info xorg-serverPortage 2.1.9.25 (default/linux/powerpc/ppc32/10.0/desktop/gnome, gcc-4.4.5, glibc-2.11.2-r3, 2.6.36-gentoo-r5-sl ppc)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.36-gentoo-r5-sl-ppc-7400,_altivec_supported-with-gentoo-1.12.14
Timestamp of tree: Mon, 21 Feb 2011 13:00:01 +0000
app-shells/bash:     4.1_p9
dev-lang/python:     2.6.6-r1, 3.1.2-r4
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="ppc"
ACCEPT_LICENSE="* -@EULA"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe -DNONZEROSTATUS"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe -DNONZEROSTATUS"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://mirror.mcs.anl.gov/pub/gentoo/ http://distfiles.gentoo.org/ http://www.ibiblio.org/pub/Linux/distributions/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://10.0.200.136/gentoo-portage"
USE="X a52 aac acl alsa altivec berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt cups cxx dbus device-mapper dri dts dvd dvdr eds emboss encode evo exif extras fam firefox flac gdbm gdu gif gnome gnome-keyring gpm gstreamer gtk hal iconv ipv6 jpeg lcms ldap libnotify mad mikmod mng modules mp3 mp4 mpeg mudflap nautilus ncurses nls nptl nptlonly ogg opengl openmp pam pango pcre pdf perl png policykit ppc ppds pppd pulseaudio python qt3support qt4 readline sdl session spell ssl startup-notification subversion svg sysfs tcpd tiff truetype udev unicode usb vorbis xcb xml xorg xulrunner xv xvid zlib" ALSA_CARDS="aoa aoa-fabric-layout aoa-onyx aoa-soundbus aoa-soundbus-i2s aoa-tas aoa-toonie powermac usb-audio via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="r128 fbdev" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

x11-base/xorg-server-1.9.4 was built with the following:
USE="ipv6 kdrive nptl udev xorg -dmx -doc -minimal -static-libs -tslib"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,-z,lazy"


 $ emerge --info xorg-drivers
Portage 2.1.9.25 (default/linux/powerpc/ppc32/10.0/desktop/gnome, gcc-4.4.5, glibc-2.11.2-r3, 2.6.36-gentoo-r5-sl ppc)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.36-gentoo-r5-sl-ppc-7400,_altivec_supported-with-gentoo-1.12.14
Timestamp of tree: Mon, 21 Feb 2011 13:00:01 +0000
app-shells/bash:     4.1_p9
dev-lang/python:     2.6.6-r1, 3.1.2-r4
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="ppc"
ACCEPT_LICENSE="* -@EULA"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe -DNONZEROSTATUS"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe -DNONZEROSTATUS"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://mirror.mcs.anl.gov/pub/gentoo/ http://distfiles.gentoo.org/ http://www.ibiblio.org/pub/Linux/distributions/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://10.0.200.136/gentoo-portage"
USE="X a52 aac acl alsa altivec berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt cups cxx dbus device-mapper dri dts dvd dvdr eds emboss encode evo exif extras fam firefox flac gdbm gdu gif gnome gnome-keyring gpm gstreamer gtk hal iconv ipv6 jpeg lcms ldap libnotify mad mikmod mng modules mp3 mp4 mpeg mudflap nautilus ncurses nls nptl nptlonly ogg opengl openmp pam pango pcre pdf perl png policykit ppc ppds pppd pulseaudio python qt3support qt4 readline sdl session spell ssl startup-notification subversion svg sysfs tcpd tiff truetype udev unicode usb vorbis xcb xml xorg xulrunner xv xvid zlib" ALSA_CARDS="aoa aoa-fabric-layout aoa-onyx aoa-soundbus aoa-soundbus-i2s aoa-tas aoa-toonie powermac usb-audio via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="r128 fbdev" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

x11-base/xorg-drivers-1.9 was built with the following:
USE="" INPUT_DEVICES="evdev keyboard mouse -acecad -aiptek -elographics -fpit -joystick -penmount -synaptics -tslib -virtualbox -vmmouse -void -wacom" VIDEO_CARDS="fbdev r128 -apm -ark -ast -chips -cirrus -dummy -epson -fglrx -geode -glint -i128 -i740 -impact -intel -mach64 -mga -neomagic -newport -nouveau -nv (-nvidia) -radeon -rendition -s3 -s3virge -savage -siliconmotion -sis -sisusb -sunbw2 -suncg14 -suncg3 -suncg6 -sunffb -sunleo -suntcx -tdfx -tga -trident -tseng -v4l -vesa -via -virtualbox -vmware -voodoo"








Comment 4


Rafał Mużyło





          2011-02-22 10:57:55 UTC
        

Did you upgrade correctly ?
This includes mesa, libdrm, protos, etc.
There doesn't seem to be any direct references to that symbol in the driver's sources.




Comment 5


Stephen Lewis





          2011-02-22 16:20:32 UTC
        

(In reply to comment #4)
> Did you upgrade correctly ?
> This includes mesa, libdrm, protos, etc.
> There doesn't seem to be any direct references to that symbol in the driver's
> sources.
> 

Apparently at some point I have misunderstood something about the upgrade and
merely repeated my mistake. I am now trying to check whether all the parts
were updated correctly and in the correct sequence. I HAVE been able to emerge
r128 without the undefined symbol (although at the moment X server is
not yet working) so the "bug" may well be me...
This machine is not fast and so it will take a while to do the upgrade again
thanks for your help and I will comment as soon as I have it working.




Comment 6


Stephen Lewis





          2011-02-22 19:34:17 UTC
        

I have now a working x11-base/xorg-server-1.9.4 with Rage 128 and Direct Rendering as before and so this bug is invalid.

I apologize for the confusion and thanks for the help. In case it helps others
here is what I did wrong and what I did to fix it.

Initially I used

 $ emerge -v xorg-server xorg-drivers

Since the emerge went smoothly I thought I was done but next time it tried
to start, the X server failed and I wrote this bug. I had to downgrade the server to get a working system and since it was hard masked that involved
package.unmask as well as package.mask.

I noticed from '/var/log/emerge.log' that for some reason emerge reordered the packages from the above command and actually emerged xorg-drivers first so I
tried this

 $ emerge -v xorg-server && emerge -v xorg-drivers

The result was the same (so I thought this confirmed the bug)

Clearly I do not understand the virtual package 'xorg-drivers' because although it updates the version of 'xorg-drivers' it does not update *any* actual driver packages and this was my confusion. Eventually I realized that each *individual* driver must be emerged after the server. On my system that means:

 $ emerge -v xf86-input-evdev xf86-input-keyboard xf86-input-mouse xf86-video-fbdev xf86-video-r128

That produced a working X server.





Comment 7


Chí-Thanh Christopher Nguyễn






          2011-02-22 22:52:06 UTC
        

Marking WORKSFORME per comment 6.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

