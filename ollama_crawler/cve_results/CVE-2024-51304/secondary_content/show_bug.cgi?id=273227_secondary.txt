Title: 273227 – x11-misc/shared-mime-info-0.60   Failed to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=273227

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 273227
x11-misc/shared-mime-info-0.60   Failed to emerge
Last modified: 2009-06-08 20:39:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 273227 
      - x11-misc/shared-mime-info-0.60   Failed to emerge


Summary:
x11-misc/shared-mime-info-0.60   Failed to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-06-08 17:39 UTC by Sergey





      Modified:
    
2009-06-08 20:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,3.81 KB,
                text/plain)

            
2009-06-08 17:40 UTC,

            Sergey




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sergey





          2009-06-08 17:39:27 UTC
        

# LC_ALL=C emerge -av x11-misc/shared-mime-info

These are the packages that would be merged, in order:

Calculating dependencies                                ... done!
[ebuild     U ] x11-misc/shared-mime-info-0.60 [0.51] 0 kB       

Total: 1 package (1 upgrade), Size of downloads: 0 kB

Would you like to merge these packages? [Yes/No] y

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) x11-misc/shared-mime-info-0.60
 * shared-mime-info-0.60.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                          [ ok ]
 * checking ebuild checksums ;-) ...                                                                      [ ok ]
 * checking auxfile checksums ;-) ...                                                                     [ ok ]
 * checking miscfile checksums ;-) ...                                                                    [ ok ]
>>> Unpacking source...                                                                                         
>>> Unpacking shared-mime-info-0.60.tar.bz2 to /var/tmp/portage/x11-misc/shared-mime-info-0.60/work             
>>> Source unpacked in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work                                     
>>> Preparing source in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60 ...          
 * Applying shared-mime-info-0.60-parallel-make.patch ...                                                  [ ok ]
am-wrapper: warning: invalid WANT_AUTOMAKE 'latest'; ignoring.                                                   
 * Automake used for the package (1.10.1) differs from                                                           
 * the installed version (1.10.2).                                                                               
 * Running eautoreconf in '/var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60' ...       
 * Running aclocal ...                                                                                     [ ok ]
 * Running autoconf ...                                                                                    [ ok ]
 * Running autoheader ...                                                                                  [ ok ]
 * Running automake --add-missing --copy --foreign ...                                                     [ ok ]
>>> Source prepared.                                                                                             
>>> Configuring source in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60 ...         
./configure --prefix=/usr --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --disable-dependency-tracking --disable-update-mimedb                                                                                               
checking for a BSD-compatible install... /usr/bin/install -c                                                     
checking whether build environment is sane... yes                                                                
checking for a thread-safe mkdir -p... /bin/mkdir -p                                                             
checking for gawk... gawk                                                                                        
checking whether make sets $(MAKE)... yes                                                                        
checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc                                                      
checking for C compiler default output file name... a.out                                                        
checking whether the C compiler works... yes                                                                     
checking whether we are cross compiling... no                                                                    
checking for suffix of executables...                                                                            
checking for suffix of object files... o                                                                         
checking whether we are using the GNU C compiler... yes                                                          
checking whether i686-pc-linux-gnu-gcc accepts -g... yes                                                         
checking for i686-pc-linux-gnu-gcc option to accept ISO C89... none needed                                       
checking for style of include used by make... GNU                                                                
checking dependency style of i686-pc-linux-gnu-gcc... none                                                       
checking for an ANSI C-conforming const... yes                                                                   
checking whether NLS is requested... yes                                                                         
checking for intltool >= 0.35.0... 0.40.5 found                                                                  
checking for intltool-update... /usr/bin/intltool-update                                                         
checking for intltool-merge... /usr/bin/intltool-merge                                                           
checking for intltool-extract... /usr/bin/intltool-extract                                                       
checking for xgettext... /usr/bin/xgettext                                                                       
checking for msgmerge... /usr/bin/msgmerge                                                                       
checking for msgfmt... /usr/bin/msgfmt
checking for gmsgfmt... /usr/bin/gmsgfmt
checking for perl... /usr/bin/perl
checking for XML::Parser... configure: error: XML::Parser perl module is required for intltool

!!! Please attach the following file when seeking support:
!!! /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60/config.log
 *
 * ERROR: x11-misc/shared-mime-info-0.60 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_configure
 *             environment, line 2688:  Called econf '--disable-dependency-tracking' '--disable-update-mimedb'
 *               ebuild.sh, line  534:  Called die
 * The specific snippet of code:
 *                      die "econf failed"
 *  The die message:
 *   econf failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/environment'.
 *

>>> Failed to emerge x11-misc/shared-mime-info-0.60, Log file:

>>>  '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/build.log'




# eix intltool                                           
[I] dev-util/intltool                                                
     Available versions:  0.37.1 0.40.5 [M]~0.40.6                   
     Installed versions:  0.40.5(22:34:56 29.03.2009)                
     Homepage:            http://www.gnome.org/                      
     Description:         Tools for extracting translatable strings from various sourcefiles
# eix dev-perl/libxml-perl
[I] dev-perl/libxml-perl
     Available versions:  0.08
     Installed versions:  0.08(20:37:17 08.06.2009)
     Homepage:            http://search.cpan.org/~kmacleod/
     Description:         Collection of Perl modules for working with XML

Reproducible: Always




# LC_ALL=C emerge --info
Portage 2.1.6.13 (default/linux/x86/2008.0, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.28-gentoo-r5 i686)
=================================================================                                    
System uname: Linux-2.6.28-gentoo-r5-i686-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_3800+-with-glibc2.0
Timestamp of tree: Mon, 08 Jun 2009 00:45:02 +0000                                                    
ccache version 2.4 [enabled]                                                                          
app-shells/bash:     3.2_p39                                                                          
dev-lang/python:     2.5.4-r2                                                                         
dev-util/ccache:     2.4-r7                                                                           
dev-util/cmake:      2.6.4                                                                            
sys-apps/baselayout: 2.0.1                                                                            
sys-apps/openrc:     0.4.3-r2                                                                         
sys-apps/sandbox:    1.6-r2                                                                           
sys-devel/autoconf:  2.63                                                                             
sys-devel/automake:  1.9.6-r2, 1.10.2                                                                 
sys-devel/binutils:  2.18-r3                                                                          
sys-devel/gcc-config: 1.4.1                                                                           
sys-devel/libtool:   1.5.26                                                                           
virtual/os-headers:  2.6.27-r2                                                                        
ACCEPT_KEYWORDS="x86"                                                                                 
CBUILD="i686-pc-linux-gnu"                                                                            
CFLAGS="-O2 -pipe -march=native -m3dnow -msse3"                                                       
CHOST="i686-pc-linux-gnu"                                                                             
CONFIG_PROTECT="/etc /usr/share/config"                                                               
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"                                                
CXXFLAGS="-O2 -pipe -march=native -m3dnow -msse3"                                                                
DISTDIR="/usr/portage/distfiles"                                                                                 
FEATURES="buildsyspkg candy ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"                                                                                           
GENTOO_MIRRORS="http://86.57.151.3/pub/gentoo"                                                                   
LANG="ru_RU.UTF-8"                                                                                               
LC_ALL="C"                                                                                                       
LDFLAGS="-Wl,-O1"                                                                                                
LINGUAS="ru"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://86.57.151.3/gentoo-portage"
USE="3dnow 3dnowext X aac acl acpi alsa apm berkdb bzip2 chm cleartype cli cracklib crypt dbus djvu dri encode flac fortran gdbm gpm hal handbook iconv imagemagick isdnlog jpeg jpeg2k lame libnotify lzma lzo mad midi mmx mmxext mp3 mplayer mtp mudflap ncurses nls nptl nptlonly nvidia ogg openal opengl openmp pam pcre pdf perl plasma png pppd python qt4 readline reflection semantic-desktop session spl sse sse2 ssl ssse3 svg symlink sysfs tcpd threads thumbnail tiff truetype type1 unicode usb vorbis webkit x264 x86 xcb xcomposite xine xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Sergey





          2009-06-08 17:40:37 UTC
        

Created attachment 193920 [details]
build.log




Comment 2


Samuli Suominen (RETIRED)






          2009-06-08 17:42:47 UTC
        

Sorry, but shared-mime-info deps on intltool which rdeps on xml-parser, so all
the deps are they. Your system is broken, possible due to an expat upgrade.

Please emerge gentoolkit, and run revdep-rebuild.





Comment 3


Samuli Suominen (RETIRED)






          2009-06-08 17:43:33 UTC
        

(In reply to comment #2)
> Sorry, but shared-mime-info deps on intltool which rdeps on xml-parser, so all
> the deps are they. Your system is broken, possible due to an expat upgrade.
> 
> Please emerge gentoolkit, and run revdep-rebuild.
> 

I mean..

"so all the deps are there", sorry for my typing error :)




Comment 4


Sergey





          2009-06-08 19:54:27 UTC
        

Unfortunately not everything is so simple:

# revdep-rebuild
* Configuring search environment for revdep-rebuild

* Checking reverse dependencies
* Packages containing binaries and libraries broken by a package update
* will be emerged.

* Collecting system binaries and libraries
* Generated new 1_files.rr
* Collecting complete LD_LIBRARY_PATH
* Generated new 2_ldpath.rr
* Checking dynamic linking consistency
[ 100% ]

* Dynamic linking on your system is consistent... All done.

# eix x11-misc/shared-mime-info
[U] x11-misc/shared-mime-info
     Available versions:  0.51 0.60
     Installed versions:  0.51(02:17:58 21.02.2009)
     Homepage:            http://freedesktop.org/wiki/Software/shared-mime-info
     Description:         The Shared MIME-info Database specification

# eix dev-perl/libxml-perl
[I] dev-perl/libxml-perl
     Available versions:  0.08
     Installed versions:  0.08(20:37:17 08.06.2009)
     Homepage:            http://search.cpan.org/~kmacleod/
     Description:         Collection of Perl modules for working with XML

# eix dev-util/intltool
[I] dev-util/intltool
     Available versions:  0.37.1 0.40.5 [M]~0.40.6
     Installed versions:  0.40.5(22:34:56 29.03.2009)
     Homepage:            http://www.gnome.org/
     Description:         Tools for extracting translatable strings from various sourcefiles

# LC_ALL=C emerge -av x11-misc/shared-mime-info

These are the packages that would be merged, in order:

Calculating dependencies                         ... done!  
[ebuild     U ] x11-misc/shared-mime-info-0.60 [0.51] 0 kB  

Total: 1 package (1 upgrade), Size of downloads: 0 kB

Would you like to merge these packages? [Yes/No] y

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) x11-misc/shared-mime-info-0.60
 * shared-mime-info-0.60.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                          [ ok ]
 * checking ebuild checksums ;-) ...                                                                      [ ok ]
 * checking auxfile checksums ;-) ...                                                                     [ ok ]
 * checking miscfile checksums ;-) ...                                                                    [ ok ]
>>> Unpacking source...                                                                                         
>>> Unpacking shared-mime-info-0.60.tar.bz2 to /var/tmp/portage/x11-misc/shared-mime-info-0.60/work             
>>> Source unpacked in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work                                     
>>> Preparing source in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60 ...          
 * Applying shared-mime-info-0.60-parallel-make.patch ...                                                  [ ok ]
am-wrapper: warning: invalid WANT_AUTOMAKE 'latest'; ignoring.                                                   
 * Automake used for the package (1.10.1) differs from                                                           
 * the installed version (1.10.2).                                                                               
 * Running eautoreconf in '/var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60' ...       
 * Running aclocal ...                                                                                     [ ok ]
 * Running autoconf ...                                                                                    [ ok ]
 * Running autoheader ...                                                                                  [ ok ]
 * Running automake --add-missing --copy --foreign ...                                                     [ ok ]
>>> Source prepared.                                                                                             
>>> Configuring source in /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60 ...         
./configure --prefix=/usr --build=i686-pc-linux-gnu --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --disable-dependency-tracking --disable-update-mimedb                                                                                               
checking for a BSD-compatible install... /usr/bin/install -c                                                     
checking whether build environment is sane... yes                                                                
checking for a thread-safe mkdir -p... /bin/mkdir -p                                                             
checking for gawk... gawk                                                                                        
checking whether make sets $(MAKE)... yes                                                                        
checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc                                                      
checking for C compiler default output file name... a.out                                                        
checking whether the C compiler works... yes                                                                     
checking whether we are cross compiling... no                                                                    
checking for suffix of executables...                                                                            
checking for suffix of object files... o                                                                         
checking whether we are using the GNU C compiler... yes                                                          
checking whether i686-pc-linux-gnu-gcc accepts -g... yes                                                         
checking for i686-pc-linux-gnu-gcc option to accept ISO C89... none needed                                       
checking for style of include used by make... GNU                                                                
checking dependency style of i686-pc-linux-gnu-gcc... none                                                       
checking for an ANSI C-conforming const... yes                                                                   
checking whether NLS is requested... yes                                                                         
checking for intltool >= 0.35.0... 0.40.5 found                                                                  
checking for intltool-update... /usr/bin/intltool-update                                                         
checking for intltool-merge... /usr/bin/intltool-merge                                                           
checking for intltool-extract... /usr/bin/intltool-extract                                                       
checking for xgettext... /usr/bin/xgettext                                                                       
checking for msgmerge... /usr/bin/msgmerge                                                                       
checking for msgfmt... /usr/bin/msgfmt
checking for gmsgfmt... /usr/bin/gmsgfmt
checking for perl... /usr/bin/perl
checking for XML::Parser... configure: error: XML::Parser perl module is required for intltool

!!! Please attach the following file when seeking support:
!!! /var/tmp/portage/x11-misc/shared-mime-info-0.60/work/shared-mime-info-0.60/config.log
 *
 * ERROR: x11-misc/shared-mime-info-0.60 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_configure
 *             environment, line 2688:  Called econf '--disable-dependency-tracking' '--disable-update-mimedb'
 *               ebuild.sh, line  534:  Called die
 * The specific snippet of code:
 *                      die "econf failed"
 *  The die message:
 *   econf failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/environment'.
 *

>>> Failed to emerge x11-misc/shared-mime-info-0.60, Log file:

>>>  '/var/tmp/portage/x11-misc/shared-mime-info-0.60/temp/build.log'


Any ideas?




Comment 5


Sergey





          2009-06-08 20:39:27 UTC
        

This is very strange, but after reinstalling "emerge dev-perl/XML-Parser" error disappeared.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

