Title: 168406 – app-backup/dar-2.3.2-r1 consumes all of memory
URL: https://bugs.gentoo.org/show_bug.cgi?id=168406

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 168406
app-backup/dar-2.3.2-r1 consumes all of memory
Last modified: 2008-06-14 01:08:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 168406 
      - app-backup/dar-2.3.2-r1 consumes all of memory


Summary:
app-backup/dar-2.3.2-r1 consumes all of memory
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

MATSUU Takuto (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-02-26 01:45 UTC by Vladimir G. Ivanovic





      Modified:
    
2008-06-14 01:08 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Output of `emerge --info'

              (emerge-info,12.63 KB,
                text/plain)

            
2007-02-26 01:48 UTC,

            Vladimir G. Ivanovic




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vladimir G. Ivanovic





          2007-02-26 01:45:44 UTC
        

Top shows, for instance:

Tasks: 170 total,   3 running, 166 sleeping,   0 stopped,   1 zombie
Cpu(s):  3.0%us,  5.0%sy,  2.0%ni,  0.0%id, 89.0%wa,  1.0%hi,  0.0%si,  0.0%st
Mem:   1995956k total,  1979264k used,    16692k free,    10620k buffers
Swap:  1000432k total,   974244k used,    26188k free,    59164k cached

  PID  PPID USER      PR  NI  VIRT  RES  SHR nFLT %MEM %CPU COMMAND                                 
25231 25229 root      34  19 2274m 1.6g  484  34k 82.6  1.9 dar --verbose=skipped -y -R / -M -D --ex
31923 22689 root      15   0  6488 1244  864    5  0.1  1.9 top                                     
25342 25332 vladimir  15   0 47336  12m 2560  51k  0.6  1.0 /opt/vmware/workstation/lib/bin/vmware  

pmap shows:
# pmap 25231
25231:   dar --verbose=skipped -y -R / -M -D --exclude-from-file /root/etc/dar-exclude-from-file -A /mnt/backups/scarlatti_diff_2007-02-13 -c /mnt/backups/scarlatti_diff_2007-02-25
0000000000400000    208K r-x--  /usr/bin/dar
0000000000534000      4K rw---  /usr/bin/dar
0000000000535000 2162988K rw---    [ anon ]
00002b365ad09000    116K r-x--  /lib64/ld-2.5.so
00002b365ad26000      4K rw---    [ anon ]
00002b365ad5a000      4K rw---    [ anon ]
00002b365ae25000      4K r----  /lib64/ld-2.5.so
00002b365ae26000      4K rw---  /lib64/ld-2.5.so
00002b365ae27000   1048K r-x--  /usr/lib64/libdar.so.4.0.2
00002b365af2d000   1024K -----  /usr/lib64/libdar.so.4.0.2
00002b365b02d000     24K rw---  /usr/lib64/libdar.so.4.0.2
00002b365b033000     84K r-x--  /lib64/libpthread-2.5.so
00002b365b048000   1020K -----  /lib64/libpthread-2.5.so
00002b365b147000      4K r----  /lib64/libpthread-2.5.so
00002b365b148000      4K rw---  /lib64/libpthread-2.5.so
00002b365b149000     16K rw---    [ anon ]
00002b365b14d000     16K r-x--  /lib64/libattr.so.1.1.0
00002b365b151000   1020K -----  /lib64/libattr.so.1.1.0
00002b365b250000      4K rw---  /lib64/libattr.so.1.1.0
00002b365b251000      4K rw---    [ anon ]
00002b365b252000   1256K r-x--  /usr/lib64/libcrypto.so.0.9.8
00002b365b38c000   1020K -----  /usr/lib64/libcrypto.so.0.9.8
00002b365b48b000    140K rw---  /usr/lib64/libcrypto.so.0.9.8
00002b365b4ae000     16K rw---    [ anon ]
00002b365b4b2000     44K r-x--  /lib64/libbz2.so.1.0.4
00002b365b4bd000   1020K -----  /lib64/libbz2.so.1.0.4
00002b365b5bc000      8K rw---  /lib64/libbz2.so.1.0.4
00002b365b5be000     80K r-x--  /lib64/libz.so.1.2.3
00002b365b5d2000   1020K -----  /lib64/libz.so.1.2.3
00002b365b6d1000      4K rw---  /lib64/libz.so.1.2.3
00002b365b6d2000      4K rw---    [ anon ]
00002b365b6d3000     12K r-x--  /lib64/libdl-2.5.so
00002b365b6d6000   1020K -----  /lib64/libdl-2.5.so
00002b365b7d5000      4K r----  /lib64/libdl-2.5.so
00002b365b7d6000      4K rw---  /lib64/libdl-2.5.so
00002b365b7d7000    920K r-x--  /usr/lib64/gcc/x86_64-pc-linux-gnu/4.1.1/libstdc++.so.6.0.8
00002b365b8bd000   1024K -----  /usr/lib64/gcc/x86_64-pc-linux-gnu/4.1.1/libstdc++.so.6.0.8
00002b365b9bd000     24K r----  /usr/lib64/gcc/x86_64-pc-linux-gnu/4.1.1/libstdc++.so.6.0.8
00002b365b9c3000     12K rw---  /usr/lib64/gcc/x86_64-pc-linux-gnu/4.1.1/libstdc++.so.6.0.8
00002b365b9c6000     72K rw---    [ anon ]
00002b365b9d8000    340K r-x--  /lib64/libm-2.5.so
00002b365ba2d000   1020K -----  /lib64/libm-2.5.so
00002b365bb2c000      4K r----  /lib64/libm-2.5.so
00002b365bb2d000      4K rw---  /lib64/libm-2.5.so
00002b365bb2e000      4K rw---    [ anon ]
00002b365bb2f000     48K r-x--  /lib64/libgcc_s.so.1
00002b365bb3b000   1024K -----  /lib64/libgcc_s.so.1
00002b365bc3b000      4K rw---  /lib64/libgcc_s.so.1
00002b365bc3c000   1308K r-x--  /lib64/libc-2.5.so
00002b365bd83000   1020K -----  /lib64/libc-2.5.so
00002b365be82000     12K r----  /lib64/libc-2.5.so
00002b365be85000      8K rw---  /lib64/libc-2.5.so
00002b365be87000  49900K rw---    [ anon ]
00002b365ef75000  82504K rw---    [ anon ]
00002b366406c000  26728K rw---    [ anon ]
00002b3666164000      4K rw---    [ anon ]
00007fff4fd81000    128K rw---    [ stack ]
ffffffffff600000      4K r-x--    [ anon ]
 total          2339368K

I am rebuilding dar with USE=dar64 to see if that helps.




Comment 1


Vladimir G. Ivanovic





          2007-02-26 01:48:45 UTC
        

Created attachment 111248 [details]
Output of `emerge --info'




Comment 2


Vladimir G. Ivanovic





          2007-02-26 16:20:35 UTC
        

After recompiling with USE=dar64, I was successful. (Actually, I don't really know if dar no longer still continues to use up all of memory. All I really know is that it finished because I ran it overnight.) 

I did make two changes in the dar invocation: I changed --verbose=skipped to just --verbose, and I added explicitly to the exclude file a mount point that was being excluded anyway.

[snip]
Writing archive contents...


 --------------------------------------------
 195629 inode(s) saved
 with 689 hard link(s) recorded
 1 inode(s) changed at the moment of the backup
 751006 inode(s) not saved (no inode/file change)
 0 inode(s) failed to save (filesystem error)
 8 inode(s) ignored (excluded by filters)
 7906 inode(s) recorded as deleted from reference backup
 --------------------------------------------
 Total number of inode considered: 954550
 --------------------------------------------
 EA saved for 98 inode(s)
 --------------------------------------------





Comment 3


MATSUU Takuto (RETIRED)






          2008-06-14 01:08:05 UTC
        

sorry for delay.
please reopen if you get same error in latest ebuild.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

