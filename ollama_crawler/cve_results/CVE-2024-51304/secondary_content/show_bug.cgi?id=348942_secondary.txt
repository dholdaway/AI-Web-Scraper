Title: 348942 – dev-libs/libusb-0.1.12-r5 build failed with doc flag set when app-text/docbook-sgml-dtd-4.4 absent
URL: https://bugs.gentoo.org/show_bug.cgi?id=348942

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348942
dev-libs/libusb-0.1.12-r5 build failed with doc flag set when app-text/docbook-sgml-dtd-4.4 absent
Last modified: 2012-06-19 03:54:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348942 
      - dev-libs/libusb-0.1.12-r5 build failed with doc flag set when app-text/docbook-sgml-dtd-4.4 absent


Summary:
dev-libs/libusb-0.1.12-r5 build failed with doc flag set when app-text/docboo...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo SGML project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-12-17 12:15 UTC by Bill Binder





      Modified:
    
2012-06-19 03:54 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



bircoph
c1pher
peter









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge info.txt,4.20 KB,
                text/plain)

            
2010-12-17 12:17 UTC,

            Bill Binder




Details





Build log

              (dev-libs:libusb-0.1.12-r5:20101217-025140.log,40.81 KB,
                text/plain)

            
2010-12-17 12:53 UTC,

            Bill Binder




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Bill Binder





          2010-12-17 12:15:26 UTC
        

Wanted the docs, so rebuilt libusb with the doc use flag set. The build failed when it reached the docs:
...
libtool: link: i686-pc-linux-gnu-g++ -O2 -march=i686 -pipe -o .libs/driver_name driver_name.o  -Wl,--as-needed ../.libs/libusbpp.so /var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/.libs/libusb.so
make[2]: Leaving directory `/var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/tests'
Making all in doc
make[2]: Entering directory `/var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/doc'
rm -rf html
mkdir html
jade -t sgml -d ./website.dsl\#html ./manual.sgml
jade:/etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
jade://etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
jade:/etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
...

Reproducible: Always

Steps to Reproduce:
1. app-text/docbook-sgml-dtd-4.4 not present
2. dev-libs/libusb-1.0.8 present (without doc useflag)
3. Set the doc useflag in /etc/portage/package.use for dev-libs/libusb
4. emerge libusb 

Actual Results:  
...
libtool: link: i686-pc-linux-gnu-g++ -O2 -march=i686 -pipe -o .libs/driver_name driver_name.o  -Wl,--as-needed ../.libs/libusbpp.so /var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/.libs/libusb.so
make[2]: Leaving directory `/var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/tests'
Making all in doc
make[2]: Entering directory `/var/tmp/portage/dev-libs/libusb-0.1.12-r5/work/libusb-0.1.12/doc'
rm -rf html
mkdir html
jade -t sgml -d ./website.dsl\#html ./manual.sgml
jade:/etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
jade://etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
jade:/etc/sgml/sgml-docbook-4.4.cat:1:8:E: cannot open "/usr/share/sgml/docbook/sgml-dtd-4.4/catalog" (No such file or directory)
...

Expected Results:  
This should have built libusb with the documents

After manually emerging app-text/docbook-sgml-dtd (which brought in the 4.4 version),  emerging libusb succeeded.




Comment 1


Bill Binder





          2010-12-17 12:17:30 UTC
        

Created attachment 257415 [details]
emerge --info




Comment 2


Dane Smith (RETIRED)






          2010-12-17 12:34:45 UTC
        

Hi,
Please attach /var/tmp/portage/dev-libs/libusb-1.0.8/temp/build.log

Thanks!




Comment 3


Bill Binder





          2010-12-17 12:53:34 UTC
        

Created attachment 257416 [details]
Build log




Comment 4


Bill Binder





          2010-12-17 12:55:43 UTC
        

(In reply to comment #3)
> Created an attachment (id=257416) [details]
> Build log
> 
Sorry, I got the wrong version number in the main part of the bug report. Didn't notice that I had two versions of libusb installed.





Comment 5


Dane Smith (RETIRED)






          2010-12-17 12:58:42 UTC
        

No worries. Fixed the summary to reflect the problem version. Assigning to maintainer.




Comment 6


SpanKY






          2011-11-13 23:12:34 UTC
        

problem with the jade/docbook install.  libusb itself doesn't need 4.4.




Comment 7


Ian Delaney (RETIRED)






          2012-03-24 10:00:47 UTC
        

this is in fact a jade bug

jade -t sgml -d ./website.dsl\#html ./manual.sgml
jade:./manual.sgml:1:55:W: cannot generate system identifier for public text "-//OASIS//DTD DocBook V4.2//EN"
jade:./manual.sgml:10:0:E: reference to entity "BOOK" for which no system identifier could be generated
jade:./manual.sgml:1:0: entity was defined here
jade:./manual.sgml:10:0:E: DTD did not contain element declaration for document type name
jade:./manual.sgml:12:9:E: there is no attribute "ID"
--------------------------------------------------

archtester ~ # jade -t sgml -d ./website.dsl\#html ./manual.sgml
jade:E: cannot find "./manual.sgml"; tried "./manual.sgml", "/usr/share/sgml/./manual.sgml"
jade:E: cannot find "./website.dsl"; tried "./website.dsl", "/usr/share/sgml/./website.dsl"
jade:E: specification document does not have the DSSSL architecture as a base architecture
jade:E: no style-specification or external-specification with ID "html"

jad is poking around looking for files like manual.sgml which are not to be found.




Comment 8


Peter Stuge





          2012-05-28 14:46:33 UTC
        

Has this been fixed in dev-libs/libusb-0.1.12-r7 which DEPENDs on doc? ( .. ~app-text/docbook-sgml-dtd-4.2 ) ?




Comment 9


Andrew Savchenko






          2012-05-28 15:40:00 UTC
        

That's strange: this problem is fixed on ~amd64, but is present on ~x86 undergoing a deep update now. After update will be finished I'll try to reemerge again.




Comment 10


Andrew Savchenko






          2012-05-29 13:58:28 UTC
        

Now libusb:0 build fine on both ~x86 and ~amd64.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

