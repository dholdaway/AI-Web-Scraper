Title: 496710 – gnome-base/gnome-shell?: cannot login into gnome
URL: https://bugs.gentoo.org/show_bug.cgi?id=496710

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 496710
gnome-base/gnome-shell?: cannot login into gnome
Last modified: 2014-01-25 14:31:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 496710 
      - gnome-base/gnome-shell?: cannot login into gnome


Summary:
gnome-base/gnome-shell?: cannot login into gnome
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-01-01 21:59 UTC by mrl4n





      Modified:
    
2014-01-25 14:31 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



chiffreos-gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




last log

              (journalctl.txt,14.45 KB,
                text/plain)

            
2014-01-01 21:59 UTC,

            mrl4n




Details





emerge --info

              (emerge-info.txt,5.09 KB,
                text/plain)

            
2014-01-01 22:24 UTC,

            mrl4n




Details





bin/passwd

              (bin-passwd.txt,18.95 KB,
                text/plain)

            
2014-01-01 23:31 UTC,

            mrl4n




Details





emerge --info

              (emerge_info.txt,4.83 KB,
                text/plain)

            
2014-01-23 22:09 UTC,

            System NerveD




Details





journalctl -b -o short

              (journalctl.txt,133.44 KB,
                text/plain)

            
2014-01-23 22:11 UTC,

            System NerveD




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


mrl4n





          2014-01-01 21:59:56 UTC
        

Created attachment 366724 [details]
last log

With the upgrade to systemd+gnome3 it's possible only automatic login, because the user password is not accepted.
Also the wallet it's impossible to open for the same reason.

In attachment the last journalctl




Comment 1


Andreas K. Hüttel







          2014-01-01 22:08:08 UTC
        

Definitely not a problem of our website




Comment 2


Pacho Ramos






          2014-01-01 22:15:58 UTC
        

I cannot reproduce this problem :(

Maybe it's related with this error I see in your logs:
gen 01 21:50:27 webandhardware goa[16778]: secret_password_lookup_sync() returned NULL [goautils.c:210, goa_utils_lookup_credentials_sync()]


Please provide emerge --info and be sure you have a fully updated system




Comment 3


mrl4n





          2014-01-01 22:24:39 UTC
        

Created attachment 366726 [details]
emerge --info

The last update to system this evening.




Comment 4


Pacho Ramos






          2014-01-01 23:01:38 UTC
        

Please try if you are also able to reproduce on a new created user account with a new home




Comment 5


Alexandre Rostovtsev (RETIRED)






          2014-01-01 23:11:33 UTC
        

(In reply to mrl4n from comment #0)
> With the upgrade to systemd+gnome3 it's possible only automatic login,
> because the user password is not accepted.

Honestly, the only two places I can imagine that might break password login but allow automatic login are gdm or pam.

See if changing your password from the terminal (/bin/passwd) fixes the problem. Maybe some pam or pambase update disabled an old password hash algorithm that you were using.

Try updating to sys-libs/pam-1.1.8 from ~amd64.

Please paste the output of "emerge -pv gdm systemd pambase pam" to see if the USE flags you are using are reasonable.




Comment 6


Alexandre Rostovtsev (RETIRED)






          2014-01-01 23:15:24 UTC
        

(In reply to Alexandre Rostovtsev from comment #5)
> See if changing your password from the terminal (/bin/passwd) fixes the
> problem. Maybe some pam or pambase update disabled an old password hash
> algorithm that you were using.

And if this doesn't work because /bin/passwd does not accept your user's password, switch to root and run "/bin/passwd john" (or whatever your username is).




Comment 7


mrl4n





          2014-01-01 23:21:18 UTC
        

(In reply to Pacho Ramos from comment #4)
> Please try if you are also able to reproduce on a new created user account
> with a new home


I have just tried...same problem




Comment 8


mrl4n





          2014-01-01 23:31:22 UTC
        

Created attachment 366728 [details]
bin/passwd




Comment 9


mrl4n





          2014-01-01 23:33:06 UTC
        

Which is the correct format of /bin/passwd file?
My file it's strange for me...




Comment 10


Alexandre Rostovtsev (RETIRED)






          2014-01-01 23:41:12 UTC
        

(In reply to mrl4n from comment #9)
> Which is the correct format of /bin/passwd file?
> My file it's strange for me...

Don't attach it. Don't edit it! It's a basic command-line tool that you can run from the terminal to change a user's login password. See "man passwd" for more information.




Comment 11


mrl4n





          2014-01-02 00:12:59 UTC
        

With '/bin/passwd' command the login accept the new password (the wallet don't accept again) but i can't enter in gnome (blank screen with cursor.




Comment 12


mrl4n





          2014-01-02 00:34:59 UTC
        

# emerge -pv gdm systemd pambase pam

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] sys-libs/pam-1.1.6-r2  USE="berkdb cracklib nls -audit -debug -nis (-selinux) {-test} -vim-syntax" 0 kB
[ebuild   R    ] sys-apps/systemd-208-r2:0/1  USE="acl filecaps firmware-loader gudev introspection kmod pam policykit python tcpd -audit -cryptsetup -doc -gcrypt -http -lzma -qrcode (-selinux) {-test} -vanilla -xattr" ABI_X86="(64) (-32) (-x32)" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" 0 kB
[ebuild   R    ] sys-auth/pambase-20120417-r3  USE="cracklib gnome-keyring sha512 systemd (-consolekit) -debug -minimal -mktemp -pam_krb5 -pam_ssh -passwdqc (-selinux)" 0 kB
[ebuild   R    ] gnome-base/gdm-3.8.4-r3  USE="branding gnome-shell introspection ipv6 systemd tcpd -accessibility -audit -debug -fallback -fprint -plymouth (-selinux) {-test} -xinerama" 0 kB

Total: 4 packages (4 reinstalls), Size of downloads: 0 kB




Comment 13


Pacho Ramos






          2014-01-02 10:23:06 UTC
        

(In reply to mrl4n from comment #11)
> With '/bin/passwd' command the login accept the new password (the wallet
> don't accept again) but i can't enter in gnome (blank screen with cursor.

Are you able to enter using another WM like, for example, icewm? Even if you have gdm installed, I guess you are using it for login in, right?




Comment 14


mrl4n





          2014-01-02 12:07:32 UTC
        

Correct, to login i use gdm.
I don't tried another WM




Comment 15


Pacho Ramos






          2014-01-02 12:21:25 UTC
        

Try it then to ensure it's a problem only when trying to enter Gnome. You can also try to use lightdm to try to login into gnome




Comment 16


Pacho Ramos






          2014-01-02 12:21:44 UTC
        

All the tests better done with the new created user account with new home dir ;)




Comment 17


mrl4n





          2014-01-23 21:13:33 UTC
        

(In reply to Pacho Ramos from comment #16)
> All the tests better done with the new created user account with new home
> dir ;)

I've checked all the flags, re-emerged all and i've create a new user, now all seems works fine.

Thanks




Comment 18


System NerveD





          2014-01-23 22:09:01 UTC
        

Created attachment 368594 [details]
emerge --info




Comment 19


System NerveD





          2014-01-23 22:11:34 UTC
        

Created attachment 368596 [details]
journalctl -b -o short

...lucky mrln4n. Congratulations!


i've updated to Gentoo Gnome 3.8. About two weeks trying to start the Gnome with gdm. with iceWM  or twm it works a little bit.

in grub.conf added:
init=/usr/lib/systemd/systemd
 
uname -r
3.10.25 gentoo


last commands today:

emerge --sync

emerge -vauDN --with-bdeps=y @ world 

emerge --depclean
 
emerge -va gdm systemd pambase

etc-update (accepted new config-files)

useradd -m -G users,wheel,audio,video,games,portage,usb,cdrom -s /bin/bash tester

passwd tester

systemctl start gdm

--> grey screen, mouse works, keyboard works, no pictograms, no fonts
only two mouse-sensitive outline borders, which can be selected (two users)

blind typing, blind mouse-actions

second pictogram entered, cursor works, password entered
--> screen switch to blue screen with two borders above and beyond in black where should be the panels. mouse works, keyboard works, but there are no pictograms or fonts




Comment 20


System NerveD





          2014-01-23 22:53:50 UTC
        

logging in as user 'tester' from a console tty is possible
something like a graphical ui opens
but it's only a black screen with one xterm in it
it works very slowly
tried to start 'epiphany'
seems to work at the first moment
but the oops error happens after few browse-activities




Comment 21


Pacho Ramos






          2014-01-24 07:10:28 UTC
        

(In reply to System NerveD from comment #19)
> Created attachment 368596 [details]
> journalctl -b -o short
> 
> ...lucky mrln4n. Congratulations!
> 

I think your problem would be different than the originally reported here. I would open a separate bug report with a summary of your concrete problem and what did you try (also, before that, ensure you have a working 3D setup)




Comment 22


System NerveD





          2014-01-25 14:31:43 UTC
        

(In reply to Pacho Ramos from comment #21)
> (In reply to System NerveD from comment #19)
> > Created attachment 368596 [details]
> > journalctl -b -o short
> > 
> > ...lucky mrln4n. Congratulations!
> > 
> 
> I think your problem would be different than the originally reported here. I
> would open a separate bug report with a summary of your concrete problem and
> what did you try (also, before that, ensure you have a working 3D setup)

yes, you were right
the video card, nvidia mx440 (nv18 - 64MB) did not work together with Gnome 3.8. (when together with Gnome 2.x it seemed there were no problem)

After further unsuccessful attempts i gave up and changed the video card against an ati radeon 9600pro video card. After compiling and installing a new kernel with ATI chipset support for AGP, drm-radeon and after setting "radeon" in the make.conf and an world update plus an 'emerge --depclean' gdm started Gnome 3.8 at the first try.

That was really something more like a workaround. And i don't like to waste and change hardware to run a new operating system, but it's comforting that the radeon 9600pro works without problems in a linux environment the first time ever.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

