Title: 179765 – media-gfx/sane-backends fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=179765

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179765
media-gfx/sane-backends fails to build
Last modified: 2007-10-31 10:51:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179765 
      - media-gfx/sane-backends fails to build


Summary:
media-gfx/sane-backends fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Printing

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Patrick Kursawe (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-25 16:07 UTC by Paul McDermott





      Modified:
    
2007-10-31 10:51 UTC
      (History)
    




          CC List:
        

6 
          users
          
            (show)
          



andreas
nbensa
nsnarh
nuitari
patrizio.bassi
rodrigotjader









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul McDermott





          2007-05-25 16:07:09 UTC
        

Building sane-backends-1.0.18-r2 fails

Reproducible: Always

Steps to Reproduce:
1.emerge -av media-gfx/sane-backends-1.0.18-r2
2.
3.

Actual Results:  
 i686-pc-linux-gnu-gcc -c -DHAVE_CONFIG_H -I. -I. -I../include -I../include -D_REENTRANT -I/usr/include/gphoto2 -DPATH_SANE_CONFIG_DIR=/etc/sane.d -DPATH_SANE_DATA_DIR=/usr/share -DPATH_SANE_LOCK_DIR=/var/lib/lock/sane -DV_MAJOR=1 -DV_MINOR=0 -march=pentium3 -O2 -pipe -fomit-frame-pointer -W -Wall sanei_access.c  -fPIC -DPIC -o .libs/sanei_access.o
ar r libsanei.a sanei_ab306.o sanei_constrain_value.o sanei_init_debug.o sanei_net.o sanei_wire.o sanei_codec_ascii.o sanei_codec_bin.o sanei_scsi.o sanei_config.o sanei_config2.o sanei_pio.o sanei_pa4s2.o sanei_auth.o sanei_usb.o sanei_thread.o sanei_pv8630.o sanei_pp.o sanei_lm983x.o sanei_access.o sanei_jpeg.o
ar: creating libsanei.a
i686-pc-linux-gnu-ranlib libsanei.a
 i686-pc-linux-gnu-gcc -c -DHAVE_CONFIG_H -I. -I. -I../include -I../include -D_REENTRANT -I/usr/include/gphoto2 -DPATH_SANE_CONFIG_DIR=/etc/sane.d -DPATH_SANE_DATA_DIR=/usr/share -DPATH_SANE_LOCK_DIR=/var/lib/lock/sane -DV_MAJOR=1 -DV_MINOR=0 -march=pentium3 -O2 -pipe -fomit-frame-pointer -W -Wall sanei_jpeg.c  -fPIC -DPIC -o .libs/sanei_jpeg.o
make[1]: Leaving directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/sanei'
making all in backend
make[1]: Entering directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/backend'
make[1]: *** No rule to make target `libsane-hpaio.la', needed by `all'.  Stop.
make[1]: Leaving directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/backend'
make: *** [all-recursive] Error 1

!!! ERROR: media-gfx/sane-backends-1.0.18-r2 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  sane-backends-1.0.18-r2.ebuild, line 105:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/log/portage/media-gfx:sane-backends-1.0.18-r2:20070525-155038.log'.


Expected Results:  
Package builds and installs correctly

mediacentre paul # emerge --info
Portage 2.1.2.7 (default-linux/x86/2007.0/desktop, gcc-4.1.1, glibc-2.5-r2, 2.6.20-gentoo-r8 i686)
=================================================================
System uname: 2.6.20-gentoo-r8 i686 Pentium III (Katmai)
Gentoo Base System release 1.12.9
Timestamp of tree: Thu, 24 May 2007 23:50:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31-r5
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://www.gigaload.org/gentoo.org/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
LANG="en_GB.utf8"
LINGUAS="en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dfx 3dnowex X acpi alsa berkdb bitmap-fonts bonobo bzip2 cairo cdr cli cracklib crypt cups dbus directfb divx4linux doc dri dvd dvdr dvdread eds emboss encode esd evo fam fame fbcon firefox font-server fortran gcj gdbm gif gnome gphoto2 gpm gstreamer gtk hal iconv isdnlog java jpeg kerberos ldap libg++ lzo mad matrox midi mikmod mmx mmx2 mng mozilla mp3 mpeg mplayer mudflap ncurses nls nptl nptlonly ntfs ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3 qt3support qt4 quicktime quotes readline real reflection reiserfs rtc scanner sdl session spell spl sql sse ssl svg tcpd threads tiff truetype truetype-fonts type1-fonts unicode usb userlocales vorbis win32codecs wmf x86 xanim xml xorg xv xvid xvmc zlib" ALSA_CARDS="ens1370" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="vesa fbdev mga"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Denis Dupeyron (RETIRED)






          2007-05-25 17:45:16 UTC
        

Could you please retry using MAKEOPTS="-j1" and report back ?

Thanks,
Denis.




Comment 2


Paul McDermott





          2007-05-25 21:19:35 UTC
        

Tried that. Same error I'm afraid.

 i686-pc-linux-gnu-gcc -c -DHAVE_CONFIG_H -I. -I. -I../include -I../include -D_REENTRANT -I/usr/include/gphoto2 -DPATH_SANE_CONFIG_DIR=/etc/sane.d -DPATH_SANE_DATA_DIR=/usr/share -DPATH_SANE_LOCK_DIR=/var/lib/lock/sane -DV_MAJOR=1 -DV_MINOR=0 -march=pentium3 -O2 -pipe -fomit-frame-pointer -W -Wall sanei_jpeg.c  -fPIC -DPIC -o .libs/sanei_jpeg.o
make[1]: Leaving directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/sanei'
making all in backend
make[1]: Entering directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/backend'
make[1]: *** No rule to make target `libsane-hpaio.la', needed by `all'.  Stop.
make[1]: Leaving directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/backend'
make: *** [all-recursive] Error 1





Comment 3


Patrizio Bassi





          2007-05-26 13:42:21 UTC
        

i have a different error:

Generating manpage sane-mustek_usb2.5...
Generating manpage sane-hp3500.5...
Generating manpage sane-stv680.5...
Generating manpage sane-pixma.5...
Generating manpage saned.8...
Generating manpage sane.7...
Generating sane.ps...
make[1]: *** [sane.ps] Error 1
make[1]: Leaving directory `/mnt/Dati/Gentoo/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/doc'
make: *** [all-recursive] Error 1

!!! ERROR: media-gfx/sane-backends-1.0.18-r2 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  sane-backends-1.0.18-r2.ebuild, line 105:   Called die





Comment 4


Andre Gluecksmann





          2007-06-02 10:23:26 UTC
        

(In reply to comment #0):

Same issue for me.
Updated/emerged some packages:

 Fri Jun  1 14:57:04 2007 >>> sys-devel/gnuconfig-20070118
     Fri Jun  1 14:57:33 2007 >>> sys-power/cpufrequtils-002-r3
     Fri Jun  1 14:58:34 2007 >>> media-libs/libart_lgpl-2.3.19-r1
     Fri Jun  1 15:00:01 2007 >>> sys-apps/findutils-4.3.4
     Fri Jun  1 15:00:46 2007 >>> media-libs/libexif-0.6.15
     Fri Jun  1 15:54:48 2007 >>> sys-libs/glibc-2.5-r3
     Fri Jun  1 15:58:18 2007 >>> dev-libs/glib-2.12.11
     Fri Jun  1 15:59:25 2007 >>> dev-libs/atk-1.12.4
     Fri Jun  1 16:02:31 2007 >>> gnome-base/orbit-2.14.7
     Fri Jun  1 16:02:51 2007 >>> dev-util/intltool-0.35.5
     Fri Jun  1 16:03:26 2007 >>> x11-misc/numlockx-1.1
     Fri Jun  1 16:06:19 2007 >>> dev-libs/libxml2-2.6.28
     Fri Jun  1 16:06:42 2007 >>> dev-java/java-config-2.0.32
     Fri Jun  1 16:08:16 2007 >>> dev-libs/libxslt-1.1.20
     Fri Jun  1 16:18:31 2007 >>> x11-libs/gtk+-2.10.11
     Fri Jun  1 16:19:09 2007 >>> dev-python/dbus-python-0.80.2
     Fri Jun  1 16:21:25 2007 >>> dev-python/pygtk-2.10.4
     Fri Jun  1 16:22:55 2007 >>> gnome-extra/libgsf-1.14.3
     Fri Jun  1 16:30:57 2007 >>> net-nds/openldap-2.3.35-r1
     Fri Jun  1 16:31:14 2007 >>> media-sound/sonata-1.1.1
     Fri Jun  1 16:32:17 2007 >>> gnome-base/librsvg-2.16.1-r1
     Fri Jun  1 16:35:57 2007 >>> gnome-base/gnome-vfs-2.16.3-r1
     Fri Jun  1 16:39:56 2007 >>> gnome-extra/gnome-games-2.16.3

revdep-rebuild => media-gfx/sane-backends-1.0.18-r2 failed, also tried 1.0.17.






Comment 5


Andre Gluecksmann





          2007-06-02 14:33:43 UTC
        

#SANE_BACKENDS="hpaio"
and "media-gfx/sane-backends" compiled.




Comment 6


Andre Gluecksmann





          2007-06-04 08:46:07 UTC
        

(In reply to comment #1 and #3):
I think  there is a difference between:
"make[1]: *** No rule to make target `libsane-hpaio.la', needed by `all'.  Stop."
and
"make[1]: *** [sane.ps] Error 1
make[1]: Leaving directory
`/mnt/Dati/Gentoo/tmp/portage/media-gfx/sane-backends-1.0.18-r2/work/sane-backends-1.0.18/doc'"

That's not the same bug, what do you think?




Comment 7


Patrizio Bassi





          2007-06-04 17:25:00 UTC
        

yes it's different.
but the topic is "fails to build", quite generic... so i didn't open a different one




Comment 8


Rodrigo Exterckötter Tjäder





          2007-08-03 16:29:21 UTC
        

mine says
make[1]: *** No rule to make target `libsane-samsung.la', needed by `all'.
of course, my SANE_BACKENDS is "samsung"




Comment 9


Norberto Bensa





          2007-08-21 01:48:44 UTC
        

If it bombs in doc/ and you have tetex installed, run emerge -C tetex




Comment 10


Patrizio Bassi





          2007-08-21 09:54:19 UTC
        

this is not a solution.
i need latex and i need to use scanner!




Comment 11


Norberto Bensa





          2007-08-21 10:30:55 UTC
        

emerge tetex after sane-backends!







Comment 12


Patrizio Bassi





          2007-08-21 10:41:49 UTC
        

of course you can...but...it will break next update.
this is a workaround not the fix...




Comment 13


Norberto Bensa





          2007-08-21 10:58:41 UTC
        

unless devs fix the problem before the next upgrade...

you don't even have to recompile tetex, do:

$ sudo quickpkg tetex
$ sudo emerge -C tetex
$ sudo emerge sane-backends
$ sudo emerge -K tetex






Comment 14


Niklas Närhinen





          2007-08-28 19:59:47 UTC
        

I'm getting the exact same error as the opener of the bug. Here's my emerge --info:

chade jarda # emerge --info
Portage 2.1.3.7 (default-linux/amd64/2007.0/desktop, gcc-4.2.0, glibc-2.6.1-r0, 2.6.22-cm-r4 x86_64)
=================================================================
System uname: 2.6.22-cm-r4 x86_64 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System release 1.12.10
Timestamp of tree: Tue, 28 Aug 2007 18:50:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4, 2.5.1-r2
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.10-r4
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17.50.0.18
sys-devel/gcc-config: 1.4.0-r1
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/home/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.public.fix.fi/gentoo/"
LANG="en_US.utf-8"
LC_ALL="en_US.UTF-8"
LDFLAGS="-Wl,-O1,--as-needed"
LINGUAS="fi en en_GB en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/home/tmp/"
PORTDIR="/home/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/php-experimental /usr/portage/local/layman/php-testing /usr/local/portage /usr/local/overlays/xfce4-svn"
SYNC="rsync://rsync.fi.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 apache2 bash-completion berkdb bitmap-fonts bootsplash cairo ccache cdr cdrom cgi cli cracklib crypt cups dbus dri drm dvb dvd dvdr dvdread eds emboss encode esd evo exif exim fam firefox fortran gdbm gif gpm gstreamer gtk hal hddtemp iconv ipod java jpeg kerberos ldap mad midi mikmod mmx mp3 mpeg msn mudflap mysql ncurses nls nptl nptlonly nsplugin ogg opengl openmp oss pam pcre pdf perl png pppd python qt3 qt3support qt4 quicktime readline reflection samba sdl session spell spl sse sse2 ssl startup-notification svg tcpd tiff truetype truetype-fonts type1-fonts unicode usb vorbis xinerama xml xorg xprint xscreensaver xv zlib" ALSA_CARDS="via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fi en en_GB en_US" LIRC_DEVICES="serial" USERLAND="GNU" VIDEO_CARDS="nouveau fbdev nv nvidia vesa v4l vga"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 15


Nuitari





          2007-10-03 10:32:08 UTC
        

I'm getting a similar error updating sane-backends, to  media-gfx/sane-backends-1.0.18-r4 (though I know this wasn't the only version).

It fails on

make[1]: Entering directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r4/work/sane-backends-1.0.18/backend'
make[1]: *** No rule to make target `libsane-brother2.la', needed by `all'.  Stop.
make[1]: Leaving directory `/var/tmp/portage/media-gfx/sane-backends-1.0.18-r4/work/sane-backends-1.0.18/backend'



What puzzles me is why is sane-backends trying to get something from a separate binary (sigh) driver.




Comment 16


Stefan Schweizer (RETIRED)






          2007-10-14 15:24:34 UTC
        

Sorry, can not reproduce here. And does not sound like a printing bug either? This seems to be sane-backends ..




Comment 17


Patrizio Bassi





          2007-10-14 15:46:22 UTC
        

you're right. i tried now and merges correctly.

so strange...




Comment 18


Patrick Kursawe (RETIRED)






          2007-10-29 07:44:22 UTC
        

Sorry, folks, but "brother2", "hpaio", "samsung" simply are no valid SANE backends. How did you get the idea to try these values?





Comment 19


Paul McDermott





          2007-10-30 13:08:43 UTC
        

'hpaio', 'brother2' and 'samsung' are in the category of "External Backends", which apparently means drivers that have not yet been included in the SANE distribution. See here: http://www.sane-project.org/lists/sane-backends-external.html

I think this at least establishes a pattern for this bug!

In my case ('hpaio'), I have a bunch of libsane-hpaio library files provided by the net-print/hplip package:

mediacentre paul # locate hpaio
/usr/lib/sane/libsane-hpaio.la
/usr/lib/sane/libsane-hpaio.so
/usr/lib/sane/libsane-hpaio.so.1
/usr/lib/sane/libsane-hpaio.so.1.0.0
/usr/lib/libsane-hpaio.la
/usr/lib/libsane-hpaio.so
/usr/lib/libsane-hpaio.so.1
/usr/lib/libsane-hpaio.so.1.0.0
/usr/share/doc/hplip-1.6.10/hpaio.desc
/usr/share/doc/hplip-1.7.4a/hpaio.desc
/usr/share/hplip/hpaio.desc

mediacentre paul # equery b /usr/lib/libsane-hpaio.so
[ Searching for file(s) /usr/lib/libsane-hpaio.so in *... ]
net-print/hplip-1.7.4a-r1 (/usr/lib/libsane-hpaio.so -> libsane-hpaio.so.1.0.0)

I also note that sane-backends ebuilds do not contain any reference to hplip or hpaio.

All I can say is setting SANE_BACKENDS="hpaio" used to work in the past, and I must have been prompted to use this seeting by some ebuild message or another!

Has support for "external backends" possibly been removed from meda-gfx/sane-backends?






Comment 20


Patrick Kursawe (RETIRED)






          2007-10-30 13:57:57 UTC
        

(In reply to comment #19)
> 'hpaio', 'brother2' and 'samsung' are in the category of "External Backends",
> which apparently means drivers that have not yet been included in the SANE
> distribution. See here:
> http://www.sane-project.org/lists/sane-backends-external.html
> 
> I think this at least establishes a pattern for this bug!
> 
> In my case ('hpaio'), I have a bunch of libsane-hpaio library files provided by
> the net-print/hplip package:

... and that's why there is not sense in trying to build them out of sane-backends sources :-)

[...]
> All I can say is setting SANE_BACKENDS="hpaio" used to work in the past,

I wonder how that could have happened.

> Has support for "external backends" possibly been removed from
> meda-gfx/sane-backends?

"external backends" is no package but a lot of different, independent drivers. We have/had support for a few drivers that are not included in vanilla sane-backends, but definitely not for all that stuff listed with "external backends".

Since this is not the first bug of this kind I should maybe do some whitelist-check of SANE_BACKENDS in the ebuild and make it fail with a clear error message if someone picks an unsupported driver. But currently my dev box is down, so don't hold your breath.




Comment 21


Paul McDermott





          2007-10-30 14:55:18 UTC
        

But I have 3 ebuilds that depends on sane-backends:

mediacentre paul # equery depends sane-backends
[ Searching for packages depending on sane-backends... ]
app-emulation/wine-0.9.37
media-gfx/xsane-0.994
net-print/hplip-1.7.4a-r1

Does this mean that these dependencies are incorrect?

I didn't choose to install sane-backends of my on volition: it was pulled in as a dependency by something else...




Comment 22


Nuitari





          2007-10-30 15:04:12 UTC
        

sane-backends is something that was forced unto me by dependencies

It somehow sees a brother2 as the driver, and I certainly did not specify it though SANE_BACKENDS

It's probably something that the brother script set up (it would be so cool to have an ebuild for that!)




Comment 23


Patrick Kursawe (RETIRED)






          2007-10-31 08:38:30 UTC
        

(In reply to comment #21)
> But I have 3 ebuilds that depends on sane-backends:
> 
> mediacentre paul # equery depends sane-backends
> [ Searching for packages depending on sane-backends... ]
> app-emulation/wine-0.9.37
> media-gfx/xsane-0.994
> net-print/hplip-1.7.4a-r1
> 
> Does this mean that these dependencies are incorrect?

No, they are correct. There are scanner drivers that are not included in sane-backends, but depend on this package. Like your hplip.




Comment 24


Patrick Kursawe (RETIRED)






          2007-10-31 08:40:13 UTC
        

(In reply to comment #22)
> It somehow sees a brother2 as the driver, and I certainly did not specify it
> though SANE_BACKENDS
> 
> It's probably something that the brother script set up (it would be so cool to
> have an ebuild for that!)

I have not the slightest idea about which script you are talking. Could you perhaps paste a link?






Comment 25


Nuitari





          2007-10-31 09:10:39 UTC
        

http://solutions.brother.com/linux/sol/printer/linux/sane_drivers.html

I used the brscan2 binary rpm download, this was before the source came available.




Comment 26


Patrick Kursawe (RETIRED)






          2007-10-31 09:38:49 UTC
        

(In reply to comment #25)
> http://solutions.brother.com/linux/sol/printer/linux/sane_drivers.html
> 
> I used the brscan2 binary rpm download, this was before the source came
> available.

Is this script you were talking about inside the rpm? 






Comment 27


Paul McDermott





          2007-10-31 10:51:36 UTC
        

(In reply to comment #23)
> (In reply to comment #21)
> > But I have 3 ebuilds that depends on sane-backends:
> 
> No, they are correct. There are scanner drivers that are not included in
> sane-backends, but depend on this package. Like your hplip.
> 
OK, given that I need sane-backends, but I do not need any of the individual drivers, what is the correct setting for SANE_BACKENDS? I tried SANE_BACKENDS="". This compiles successfully, but also compiles and installs all of the drivers, which I do not need. IS there an equivalent to SANE_BACKENDS="none"?

I don't know about the other users, but I suspect the reason I set SANE_BACKENDS="hpaio" was following "HOWTO Install a USB Scanner" (http://gentoo-wiki.com/HOWTO_Installing_USB_Scanner). I correctly identified my driver as 'hpaio', and followed the instruction to set SANE_BACKENDS as:
SANE_BACKENDS="the_name_of_your_backend_goes_here".

This 'bug' may be the source of the comment in the HOWTO "Beware also that for sane-backends>=1.0.17 to compile, the SANE_BACKENDS variable shouldn't be specified in make.conf as it may break your compilation process." I don't think this comment is correct, but may have been a work around for some users stumbling across the same issues. Anyone know how to contact the author of the HOWTO to correct? 














Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

