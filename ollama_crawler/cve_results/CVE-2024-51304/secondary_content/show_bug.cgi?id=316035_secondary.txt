Title: 316035 – x11-libs/libXfont-1.4.1 emerge fails with livecd called "systemrescuecd" because of bad exported "path" variable
URL: https://bugs.gentoo.org/show_bug.cgi?id=316035

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 316035
x11-libs/libXfont-1.4.1 emerge fails with livecd called "systemrescuecd" because of bad exported "path" variable
Last modified: 2010-12-19 18:48:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 316035 
      - x11-libs/libXfont-1.4.1 emerge fails with livecd called "systemrescuecd" because of bad exported "path" variable


Summary:
x11-libs/libXfont-1.4.1 emerge fails with livecd called "systemrescuecd" beca...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-04-18 22:59 UTC by clayton





      Modified:
    
2010-12-19 18:48 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



mick
robbat2
ssuominen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,16.06 KB,
                text/plain)

            
2010-04-18 23:01 UTC,

            clayton




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


clayton





          2010-04-18 22:59:01 UTC
        

libXfont-1.4.1 emerge fails with:

fontfile/.libs/libfontfile.a: member fontfile/.libs/libfontfile.a(bitsource.o) in archive is not an object
collect2: ld returned 1 exit status
make[3]: *** [libXfont.la] Error 1
make[3]: Leaving directory `/var/tmp/portage/x11-libs/libXfont-1.4.1/work/libXfont-1.4.1/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/x11-libs/libXfont-1.4.1/work/libXfont-1.4.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/x11-libs/libXfont-1.4.1/work/libXfont-1.4.1'
make: *** [all] Error 2

This is on a brand new Gentoo install, the package in question is not even installed yet (not being upgraded). Since this package won't merge, I cannot continue with building X,WM,etc

Reproducible: Always

Steps to Reproduce:
1. emerge =libXfont-1.4.1
2. 
3.

Actual Results:  
emerge fails

Expected Results:  
emerge succeeds




Comment 1


clayton





          2010-04-18 23:01:16 UTC
        

Created attachment 228343 [details]
build log




Comment 2


clayton





          2010-04-19 00:39:46 UTC
        

Ok, it merges fine if I disable ccache with:

FEATURES="-ccache" emerge libXfont

Why doesn't this package work with ccache enabled?




Comment 3


Rafał Mużyło





          2010-04-19 14:12:29 UTC
        

(In reply to comment #2)
> Ok, it merges fine if I disable ccache with:
> 
> FEATURES="-ccache" emerge libXfont
> 
> Why doesn't this package work with ccache enabled?
> 
Most likely, it doesn't work with parallel make set too high.
(as your 'emerge --info' is missing, I can't tell, if that's the case, though)





Comment 4


Andreas K. Hüttel







          2010-04-20 20:39:17 UTC
        

Please add the output of emerge --info




Comment 5


clayton





          2010-04-21 01:09:13 UTC
        

Portage 2.2_rc67 (default/linux/amd64/2008.0, gcc-4.4.3, glibc-2.9_p20081201-r2, 2.6.33-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.33-gentoo-r1-x86_64-Intel-R-_Core-TM-_i7_CPU_940_@_2.93GHz-with-gentoo-2.1.6
Timestamp of tree: Tue, 20 Apr 2010 06:00:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.5-r1
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.8.1-r1
sys-apps/baselayout: 2.1.6
sys-apps/openrc:     0.6.0
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1
sys-devel/gcc:       4.3.3-r2, 4.4.3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.29
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /et              c/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms               strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete -              -stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/rubenqba /usr/portage/local"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aac acl acpi alac alsa amd64 arts avahi bash-completion berkdb bluetooth bzip2 cairo ccache cdinstall cd              r cleartype cli cracklib crypt css ctype cups cupsddk cxx dbus dri dts dvd dvdr dvdread encode ffmpeg firefox f              lac fortran ftp gdbm gif gimp git glitz gnutls google-gadgets gpm gstreamer gtk gzip hal hddtemp hvm iconv id3t              ag imagemagick ioemu iostats ipod java jpeg kde lame libnotify lm_sensors mad mmx mng modules mp3 mpeg mplayer               mudflap multilib mysql ncurses nls nocd nptl nptlonly nvidia ogg openal opengl openmp pam pcre pdf perl plasma               png ppds pppd python qt3support qt4 quicktime rdesktop readline reflection samba scanner semantic-desktop sessi              on skins spl sql sse sse2 ssl ssse3 subversion svg symlink sysfs tcpd threads tiff truetype unicode usb vdpau v              orbis wavpack webkit wxwindows x264 xcomposite xine xml xorg xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp a              tiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maest              ro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop e              mpty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route sha              re shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_              file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_l              ock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_c              ache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC              ="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mt              xorb ncurses text" RUBY_TARGETS="ruby18" SANE_BACKENDS="hp" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS,               PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 6


Rémi Cardona (RETIRED)






          2010-06-25 13:36:07 UTC
        

ccache issue, not sure if this isn't fixed with newer versions of ccache. Maybe it's just yet-another-corrupted-cache failure...

Thanks




Comment 7


Mick Semb Wever





          2010-09-29 20:35:07 UTC
        

Same situation. fresh install.

/usr/bin: file not recognized: Is a directory
collect2: ld returned 1 exit status


FEATURES="-ccache" 
doesn't work for me.




Comment 8


Mick Semb Wever





          2010-09-29 20:41:10 UTC
        

(for me it is libXfont -1.4.2 
the workaround was emerging 1.4.1




Comment 9


Samuli Suominen (RETIRED)






          2010-10-21 07:49:11 UTC
        

(In reply to comment #7)
> /usr/bin: file not recognized: Is a directory

Are you using systemrescuecd, or similar custom denial of ser... livecd? :P

Try:

export path=
emerge libXfont




Comment 10


Mick Semb Wever





          2010-10-21 10:06:52 UTC
        


> Are you using systemrescuecd, or similar custom denial of ser... livecd? :P


Yes i was. Thanks for your help Samuli!

I was after a pure btrfs install, which i otherwise achieved, and the livecd doesn't give this yet. Other than this issue i've found the systemrescuecd overall more useful to install gentoo than gentoo's own licecd (this is meant as constructive feedback). 
If there are serious problems with doing this then i hope there's a big fat warning page from gentoo that google can spit at us before we start the endeavour.





Comment 11


Samuli Suominen (RETIRED)






          2010-10-21 11:14:37 UTC
        

Random livecd's export random variables, some cause harm some don't... 
Don't think there's anything we need to do here.




Comment 12


Vladimir Lushnikov





          2010-12-19 18:48:21 UTC
        

Resolution works for me as well on sysrescuecd 1.7.0 beta011









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

