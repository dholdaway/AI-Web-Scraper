Title: 107185 – emerge kde-base/kregexpeditor-3.4.1-r1 failed (ACCESS VIOLATION)
URL: https://bugs.gentoo.org/show_bug.cgi?id=107185

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 107185
emerge kde-base/kregexpeditor-3.4.1-r1 failed (ACCESS VIOLATION)
Last modified: 2005-12-15 13:42:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 107185 
      - emerge kde-base/kregexpeditor-3.4.1-r1 failed (ACCESS VIOLATION)


Summary:
emerge kde-base/kregexpeditor-3.4.1-r1 failed (ACCESS VIOLATION)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-25 08:32 UTC by Lars Schonert





      Modified:
    
2005-12-15 13:42 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



troll









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Lars Schonert





          2005-09-25 08:32:00 UTC
        

make[3]: Leaving directory
`/var/tmp/portage/kregexpeditor-3.4.1-r1/work/kregexpeditor-3.4.1/kregexpeditor'
make[2]: Leaving directory
`/var/tmp/portage/kregexpeditor-3.4.1-r1/work/kregexpeditor-3.4.1/kregexpeditor'
make[2]: Entering directory
`/var/tmp/portage/kregexpeditor-3.4.1-r1/work/kregexpeditor-3.4.1'
make[2]: Leaving directory
`/var/tmp/portage/kregexpeditor-3.4.1-r1/work/kregexpeditor-3.4.1'
make[1]: Leaving directory
`/var/tmp/portage/kregexpeditor-3.4.1-r1/work/kregexpeditor-3.4.1'
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-kde-base_-_kregexpeditor-3.4.1-r1-20172.log"

mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
--------------------------------------------------------------------------------


Reproducible: Always
Steps to Reproduce:
1.emerge --sync
2.emerge -avuD world
3.

Actual Results:  
failed




Comment 1


Przemyslaw Maciag (RETIRED)






          2005-09-26 16:17:38 UTC
        

could you post your emerge info? do you have nonstandard PORTAGE_TMPDIR?

Regards,
Przemek




Comment 2


Lars Schonert





          2005-09-27 03:17:54 UTC
        

Portage 2.0.51.22-r2 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r1,
2.6.11.7 i686)
=================================================================
System uname: 2.6.11.7 i686 AMD Athlon(tm) XP 2800+
Gentoo Base System version 1.6.13
ccache version 2.3 [disabled]
dev-lang/python:     2.3.5-r2, 2.4.1-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -pipe -O3 -mcpu=i686"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/bind/named.conf /etc/cyrus.conf /etc/imapd.conf
/etc/login.defs /etc/logrotate.d/syslog-ng /etc/modules.autoload.d/kernel-2.6
/etc/pam.d/imap /etc/portage/package.keywords /etc/pound.cfg
/etc/squid/squid.conf /etc/syslog-ng/syslog-ng.conf /usr/X11R6/bin/startx
/usr/kde/2/share/config /usr/kde/3.2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/bind /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/rc.d /etc/terminfo /etc/wget /etc/env.d"
CXXFLAGS="-march=athlon-xp -pipe -O3 -mcpu=i686"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks loadpolicy sandbox sfperms strict"
GENTOO_MIRRORS="http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/
ftp://gentoo.blueyonder.co.uk/mirrors/gentoo"
LANG="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X aac aalib acl acpi alsa apache2 apm arts audiofile avi
bash-completion berkdb bitmap-fonts bonobo bzlib caps cdr crypt cscope cups curl
dga dio directfb divx4linux doc dvd eds effects emacs emacs-w3 emboss encode esd
ethereal fam fastcgi fbcon flac foomaticdb fortran ftp gd gdbm gif gimpprint gmp
gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gtkhtml hardenedphp icq imagemagick
imap imlib ipv6 jack java javacomm javadoc javamail jikes jpeg junit kde
kerberos ldap libg++ libwww mad mbox mhash mikmod mime mmx motif mozilla mp3
mpeg mysql ncurses nls nptl nptlonly ogg oggvorbis openal opengl oss pam
pam-mysql pcre pdflib perl php pic png posix postgres ppds prelude python qt
quicktime readline recode ruby samba sasl sdl shared sharedmem slang soap
sockets socks5 sox spell spl sqlite ssl svg svga tcltk tcpd tetex threads tidy
tiff truetype truetype-fonts type1-fonts unicode usb userlocales vhosts video
vorbis wmf wxwindows xerces xine xml xml2 xmlrpc xmms xpm xv xvid zeo zlib
linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS

I mount (bind) a external storage under the /var/tmp folder.




Comment 3


Lars Schonert





          2005-10-09 10:38:32 UTC
        

Hi.

The problem is the same as last week.
PLEASE HELP !!!

GTerminal ~ # emerge -avuD world                                               
                                                                               
                    

These are the packages that I would merge, in order:

Calculating world dependencies ...done!
[ebuild  N    ] kde-base/libkscan-3.4.1  +arts -debug -kdeenablefinal
-kdexdeltas -xinerama 0 kB 
[ebuild  N    ] kde-base/kooka-3.4.1  +arts -debug -kdeenablefinal -kdexdeltas
-xinerama 0 kB 
[ebuild     U ] app-admin/webmin-1.230 [1.210-r1] +apache2 +postgres +ssl
-webmin-minimal 8,770 kB 
[ebuild  NS   ] www-apps/egroupware-1.0.0.009_p3  +gd +ldap +vhosts 10,828 kB 
[ebuild     U ] www-client/mozilla-firefox-1.0.7-r2 [1.0.6-r2] -debug +gnome
-ipv6* +java -mozcalendar -mozdevelop -moznoxft -mozsvg +truetype -xinerama
-xprint 0 kB 
[ebuild  N    ] app-text/texi2html-1.76  372 kB 
[ebuild     U ] net-libs/libpcap-0.9.3 [0.8.3-r1] -ipv6 414 kB 

Total size of downloads: 20,386 kB

Do you want me to merge these packages? [Yes/No] 

/bin/sh ../libtool --silent --mode=link --tag=CXX i686-pc-linux-gnu-g++ 
-Wnon-virtual-dtor -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W
-Wpointer-arith -Wwrite-strings -DNDEBUG -DNO_DEBUG -O2 -O4 -march=pentium4
-pipe -Wformat-security -Wmissing-format-attribute -fno-exceptions
-fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL
-DQT_NO_COMPAT -DQT_NO_TRANSLATION    -o libkscan.la -rpath /usr/kde/3.4/lib
-L/usr/kde/3.4/lib -L/usr/qt/3/lib -L/usr/lib    -L/usr/lib  -Wl,-rpath,/usr/lib
-no-undefined -Wl,--no-undefined -Wl,--allow-shlib-undefined -version-info 1:0
kscandevice.lo kscanslider.lo kgammatable.lo kscanoption.lo kscanoptset.lo
gammadialog.lo dispgamma.lo scansourcedialog.lo scanparams.lo massscandialog.lo
devselector.lo scandialog.lo img_canvas.lo previewer.lo imgscaledialog.lo
sizeindicator.lo imgscaninfo.lo -lsane -lusb -lnsl -lm  -ljpeg -lieee1284 
-lgphoto2 -lgphoto2_port -lm -ldl -lkio 
make[3]: Leaving directory
`/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1/libkscan'
make[2]: Leaving directory
`/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1/libkscan'
make[2]: Entering directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
make[2]: Leaving directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
make[1]: Leaving directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-kde-base_-_libkscan-3.4.1-427.log"

mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
--------------------------------------------------------------------------------

Actualy we use the standard tmp folder.




Comment 4


Przemyslaw Maciag (RETIRED)






          2005-10-10 02:55:38 UTC
        

problem you are having is this mount binding for tmp directory.

there are to possible solutions, that I see now...

1. try to edit your qmake.conf file (located somewhere like
/usr/qt/3/mkspecs/linux-g++/qmake.conf ) and to CONFIG line add option
no_fixpath (after a new whitespace) to the end ; I think this should help and
this would be a global solution for every package with this particular problem
2. create a patch for every package, that adds this option (no_fixpath) to every
.pro file with CONFIG var ... this means that you need to do this for every
package (....)

What I'm not sure of, if can we add this no_fixpath to global qmake.conf. But if
thats works and it want damage anything else - maybe this would be a good global
solution. Currently this isn't a only bug with acces violation on qt settings
dir. One more example is here : http://bugs.gentoo.org/show_bug.cgi?id=72545 and
isn't last one (everyone of them is caused by using a nonstandard portage
destdir. I need to read some more trolltech docs...

Lars - plz try a first solution. If that helps - give as a comment.

PS. Sorry for my english.

Cheers,
Przemek




Comment 5


Przemyslaw Maciag (RETIRED)






          2005-10-10 02:57:22 UTC
        

s/if can we/is, can we/

:/ it's good now? need to learn more ;)

Cheers,
Przemek




Comment 6


Lars Schonert





          2005-10-10 06:46:19 UTC
        

Hello,

sorry ... my english is also very terrible. :-)

Ok, i have tested the first solution.
With the same failure at the end ...

vi /usr/qt/3/mkspecs/linux-g++/qmake.conf

---cut---
#
# $Id: qt/qmake.conf   3.3.4   edited Oct 31 2003 $
#
# qmake configuration for linux-g++
#

MAKEFILE_GENERATOR      = UNIX
TEMPLATE                = app
CONFIG                  += qt warn_on release incremental link_prl no_fixpath
QMAKE_INCREMENTAL_STYLE = sublib
---cut---

img_canvas.cpp: In member function `void ImageCanvas::update_scaled_pixmap()':
img_canvas.cpp:703: warning: converting to `int' from `float'
img_canvas.cpp:718: warning: converting to `int' from `float'
img_canvas.cpp:723: warning: converting to `int' from `float'
/bin/sh ../libtool --silent --mode=compile --tag=CXX i686-pc-linux-gnu-g++
-DHAVE_CONFIG_H -I. -I. -I.. -I../libkscan -I/usr/kde/3.4/include
-I/usr/qt/3/include -I.    -DQT_THREAD_SUPPORT  -D_REENTRANT  -Wnon-virtual-dtor
-Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align
-Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -Wwrite-strings -DNDEBUG
-DNO_DEBUG -O2 -O4 -march=pentium4 -pipe -Wformat-security
-Wmissing-format-attribute -fno-exceptions -fno-check-new -fno-common
-DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT
-DQT_NO_TRANSLATION  -c -o sizeindicator.lo `test -f 'sizeindicator.cpp' || echo
'./'`sizeindicator.cpp
/bin/sh ../libtool --silent --mode=link --tag=CXX i686-pc-linux-gnu-g++ 
-Wnon-virtual-dtor -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500
-D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W
-Wpointer-arith -Wwrite-strings -DNDEBUG -DNO_DEBUG -O2 -O4 -march=pentium4
-pipe -Wformat-security -Wmissing-format-attribute -fno-exceptions
-fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL
-DQT_NO_COMPAT -DQT_NO_TRANSLATION    -o libkscan.la -rpath /usr/kde/3.4/lib
-L/usr/kde/3.4/lib -L/usr/qt/3/lib -L/usr/lib    -L/usr/lib  -Wl,-rpath,/usr/lib
-no-undefined -Wl,--no-undefined -Wl,--allow-shlib-undefined -version-info 1:0
kscandevice.lo kscanslider.lo kgammatable.lo kscanoption.lo kscanoptset.lo
gammadialog.lo dispgamma.lo scansourcedialog.lo scanparams.lo massscandialog.lo
devselector.lo scandialog.lo img_canvas.lo previewer.lo imgscaledialog.lo
sizeindicator.lo imgscaninfo.lo -lsane -lusb -lnsl -lm  -ljpeg -lieee1284 
-lgphoto2 -lgphoto2_port -lm -ldl -lkio 
make[3]: Leaving directory
`/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1/libkscan'
make[2]: Leaving directory
`/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1/libkscan'
make[2]: Entering directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
make[2]: Leaving directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
make[1]: Leaving directory `/var/tmp/portage/libkscan-3.4.1/work/libkscan-3.4.1'
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-kde-base_-_libkscan-3.4.1-20465.log"

mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
mkdir:     /home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings
--------------------------------------------------------------------------------

What can i do? This problem blocks my updates since 2 weeks. :-(

Thanks for your help, Przemek! :-)

Greetz Lars




Comment 7


Caleb Tennis (RETIRED)






          2005-12-15 13:42:16 UTC
        

Where is this coming from: 
"/home/floh/pl120/apps/qt-x11-free-3.3.4/etc/settings" 
 
You have your own version of Qt laying around, so perhaps you have reset QTDIR 
as well? 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

