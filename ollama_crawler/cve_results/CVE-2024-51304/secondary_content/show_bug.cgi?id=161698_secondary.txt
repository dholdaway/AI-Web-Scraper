Title: 161698 – dev-lang/php-5.1.6-r6 compile fails w/ USE=postgres
URL: https://bugs.gentoo.org/show_bug.cgi?id=161698

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 161698
dev-lang/php-5.1.6-r6 compile fails w/ USE=postgres
Last modified: 2007-03-05 18:08:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 161698 
      - dev-lang/php-5.1.6-r6 compile fails w/ USE=postgres


Summary:
dev-lang/php-5.1.6-r6 compile fails w/ USE=postgres
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-12 07:57 UTC by Cameron Moller





      Modified:
    
2007-03-05 18:08 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cameron.moller









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge -pvD php

              (emerge-php-pvd,1.08 KB,
                text/plain)

            
2007-01-12 08:01 UTC,

            Cameron Moller




Details





postgres version

              (psql-v,87 bytes,
                text/plain)

            
2007-01-12 08:05 UTC,

            Cameron Moller




Details





source code for pgsql.c

              (pgsql.c,161.99 KB,
                text/plain)

            
2007-01-12 08:12 UTC,

            Cameron Moller




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Cameron Moller





          2007-01-12 07:57:56 UTC
        

Emerging dev-lang/php-5.1.6-r6 always fails with error "pgsql.c ...undefined reference to `PQsendPrepare'"

Reproducible: Always

Steps to Reproduce:
1. emerge php
2.
3.

Actual Results:  
+++ SNIP +++
-lpspell -lpq -lpanel -lncurses -lmcrypt -lltdl -lcrypt -lpam -lt1 -lfreetype -lpng -lz -ljpeg -lz -lresolv -lm -ldl -lnsl -lxml2 -lz -lm -lssl -lcrypto -ldl -lxml2 -lz -lm -lssl -lcrypto -ldl -lcrypt -lxml2 -lz -lm -lcrypt  -o sapi/cli/php
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libc-client.a(osdep.o): In function `ssl_onceonlyinit':
: warning: the use of `tmpnam' is dangerous, better use `mkstemp'
ext/pgsql/pgsql.o: In function `zif_pg_send_prepare':
pgsql.c:(.text+0xb510): undefined reference to `PQsendPrepare'
pgsql.c:(.text+0xb55a): undefined reference to `PQsendPrepare'
ext/pgsql/pgsql.o: In function `zif_pg_prepare':
pgsql.c:(.text+0xdc81): undefined reference to `PQprepare'
pgsql.c:(.text+0xde64): undefined reference to `PQprepare'
collect2: ld returned 1 exit status
make: *** [sapi/cli/php] Error 1

!!! ERROR: dev-lang/php-5.1.6-r6 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  php-5.1.6-r6.ebuild, line 173:   Called src_compile_normal
  php-5.1.6-r6.ebuild, line 323:   Called php5_1-sapi_src_compile
  php5_1-sapi.eclass, line 577:   Called die

!!! make failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

Expected Results:  
Successful emerged php

Will create attachments




Comment 1


Cameron Moller





          2007-01-12 08:01:44 UTC
        

Created attachment 106638 [details]
emerge -pvD php




Comment 2


Cameron Moller





          2007-01-12 08:03:32 UTC
        

Comment on attachment 106638 [details]
emerge -pvD php

tux ~ # psql -V
psql (PostgreSQL) 8.0.9
contains support for command-line editing




Comment 3


Cameron Moller





          2007-01-12 08:05:36 UTC
        

Created attachment 106640 [details]
postgres version

tux ~ # psql -V
psql (PostgreSQL) 8.0.9
contains support for command-line editing




Comment 4


Cameron Moller





          2007-01-12 08:12:09 UTC
        

Created attachment 106642 [details]
source code for pgsql.c




Comment 5


Cameron Moller





          2007-01-12 08:29:53 UTC
        

I have unmerged postgres and all versions of PHP several times and it always fails.  I have looked throught pgsql.c and see no #define lines for those two functions.




Comment 6


Barry Gear





          2007-02-08 21:52:30 UTC
        

I do see and old reference to them as patches here (with code):
http://svr5.postgresql.org/pgsql-patches/2004-10/msg00279.php




Comment 7


Luca Longinotti (RETIRED)






          2007-03-05 18:08:30 UTC
        

Works here, tested with multiple PgSQL versions... Please try 5.2.1-r3, if it still doesn't work, report upstream.
Best regards, CHTEKK.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

