Title: 337052 – www-plugins/moonlight-2.3 does not parallel build
URL: https://bugs.gentoo.org/show_bug.cgi?id=337052

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 337052
www-plugins/moonlight-2.3 does not parallel build
Last modified: 2010-09-18 10:19:20 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 337052 
      - www-plugins/moonlight-2.3 does not parallel build


Summary:
www-plugins/moonlight-2.3 does not parallel build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

dotnet project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-09-13 10:07 UTC by Oisin O Malley





      Modified:
    
2010-09-18 10:19 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



evert.gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




moonlight-2.3-r1.ebuild

              (moonlight-2.3-r1.ebuild,3.68 KB,
                text/plain)

            
2010-09-13 10:10 UTC,

            Oisin O Malley




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Oisin O Malley





          2010-09-13 10:07:10 UTC
        

www-plugins/moonlight-2.3 fails to emerge with MAKEOPTS="-j2" and throws the following error;
libtool: link: `mach_dep.lo' is not a valid libtool object

This seems to be related a similar bug in mono;
http://bugs.gentoo.org/249985

Adding MAKEOPTS="${MAKEOPTS} -j1" to the ebuild allows it to build successfully, but is just a workaround. 

Reproducible: Always




emerge --info
Portage 2.2_rc81 (default/linux/amd64/10.0/desktop/gnome, gcc-4.4.3, glibc-2.11.2-r0, 2.6.31-zen9-B8 x86_64)
=================================================================
System uname: Linux-2.6.31-zen9-B8-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T7300_@_2.00GHz-with-gentoo-2.0.1
Timestamp of tree: Mon, 13 Sep 2010 07:15:02 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.11
dev-lang/python:     2.4.6, 2.6.5-r3, 3.1.2-r4
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.3
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.3.4, 4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 PUEL skype-eula ETQW googleearth AdobeFlash-10 AdobeFlash-10.1"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/distfiles"
FEATURES="assume-digests distlocks fixlafiles fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp.heanet.ie/pub/gentoo/ "
LANG="en_IE@euro"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_IE en_GB en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/wschlich-testing /usr/portage/local/layman/gnome /usr/portage/local/layman/desktop-effects /usr/portage /usr/portage/local/custom"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="4965 X a52 aac acl acpi alsa amd64 avahi bash-completion berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt css cups cxx dbus dri dts dvd dvdr emboss encode evo exif fam ffmpeg firefox flac fortran gconf gdbm gdu gif glitz gnome gnome-keyring gpm gstreamer gtk hal hfs iconv ieee1394 jpeg lcms ldap libnotify lirc lm_sensors mad matroska mikmod mmx mng modules mp3 mp4 mpeg mplayer mudflap multilib nautilus ncurses networkmanager nls nptl nptlonly ogg opengl openmp oss pam pango pcre pdf perl png policykit ppds pppd pulseaudio python qt3support quicktime readline reflection samba sdl session spell sse sse2 ssl ssse3 startup-notification svg symlink sysfs tcpd theora threads tiff truetype unicode usb v4l v4l2 vdpau vorbis wifi x264 xcb xine xml xorg xscreensaver xulrunner xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_IE en_GB en" LIRC_DEVICES="mceusb2" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Oisin O Malley





          2010-09-13 10:10:58 UTC
        

Created attachment 247107 [details]
moonlight-2.3-r1.ebuild

ebuild with workaround.




Comment 2


Pacho Ramos






          2010-09-13 12:13:45 UTC
        

Please provide build.log to ensure it's failing when building mono sources (I didn't get any build failure with -j3), in that case, I think we should run "emake -j1" when building mono, keeping parallel build for moonlight part




Comment 3


Evert





          2010-09-15 21:04:37 UTC
        

same problem here...




Comment 4


Pacho Ramos






          2010-09-16 10:52:01 UTC
        

Should be solved with:

+  16 Sep 2010; Pacho Ramos <pacho@gentoo.org> moonlight-2.3.ebuild:
+  mono does not like parallel build, bug #249985; thanks to Oisin O Malley
+  for reminding it in bug #337052
+





Comment 5


Evert





          2010-09-18 10:19:20 UTC
        

I can confirm that MAKEOPTS="-j1" in /etc/make.conf makes moonlight compile.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

