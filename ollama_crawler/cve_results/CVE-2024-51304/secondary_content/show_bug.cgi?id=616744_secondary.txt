Title: 616744 – dev-util/electron-1.3.13-r1 Fetch failed
URL: https://bugs.gentoo.org/show_bug.cgi?id=616744

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 616744
dev-util/electron-1.3.13-r1 Fetch failed
Last modified: 2017-04-29 14:43:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 616744 
      - dev-util/electron-1.3.13-r1 Fetch failed


Summary:
dev-util/electron-1.3.13-r1 Fetch failed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Elvis Pranskevichus








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-04-27 15:59 UTC by C. Wijtmans





      Modified:
    
2017-04-29 14:43 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



bkohler
jstein
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


C. Wijtmans





          2017-04-27 15:59:02 UTC
        

it has been sitting for more than an hour. Mostly with avg load under 1 and the highest i have seen was at 1.8. on 4 cores.

$ emerge --info electron
Portage 2.3.5 (python 3.4.6-final-0, default/linux/amd64/13.0/desktop/plasma/systemd, gcc-6.3.0, glibc-2.24-r1, 4.10.8-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.10.8-gentoo-x86_64-Intel-R-_Core-TM-_i5-4670K_CPU_@_3.40GHz-with-gentoo-2.3
KiB Mem:    31815552 total,   7501500 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Thu, 27 Apr 2017 14:15:01 +0000
sh bash 4.4_p12
ld GNU ld (Gentoo 2.27 p1.0) 2.27
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.24.1-r1::gentoo
dev-lang/python:          2.7.13::gentoo, 3.4.6::gentoo
dev-util/cmake:           3.8.0::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.3::gentoo
sys-apps/openrc:          0.25::gentoo
sys-apps/sandbox:         2.10-r4::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r2::gentoo
sys-devel/automake:       1.15-r2::gentoo
sys-devel/binutils:       2.27::gentoo
sys-devel/gcc:            6.3.0::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r4::gentoo
sys-devel/make:           4.2.1-r1::gentoo
sys-kernel/linux-headers: 4.10::gentoo (virtual/os-headers)
sys-libs/glibc:           2.24-r1::gentoo
Repositories:

gentoo
    location: /usr/portage/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.nl.gentoo.org/gentoo-portage
    priority: -1000

local
    location: /usr/portage/local
    masters: gentoo

java
    location: /usr/portage/java
    sync-type: git
    sync-uri: https://anongit.gentoo.org/git/proj/java.git
    masters: gentoo
    priority: 50

steam-overlay
    location: /usr/portage/steam-overlay
    sync-type: git
    sync-uri: https://github.com/anyc/steam-overlay.git
    masters: gentoo
    priority: 50

vulkan-overlay
    location: /usr/portage/vulkan-overlay
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/data/distfiles"
EMERGE_DEFAULT_OPTS="--jobs 8 --load-average 4 --verbose-conflicts --quiet-build --quiet-fail --quiet-unmerge-warn --autounmask=y --autounmask-write --keep-going"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news nodoc noinfo parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://gentoo.tiscali.nl/pub/mirror/gentoo/ ftp://mirror.leaseweb.com/gentoo/"
LANG="en_IN.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8 -l4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/tmp"
USE="X a52 aac acl acpi aio alsa alsa-plugin amd64 amr android apng appindicator asf asm avcodec avformat berkdb branding bullet bzip2 cacert cacerts cairo caps cdda cdr cli cracklib cron crypt cryptsetup cuda cups curl cxx dbus dds declarative dirac dri3 driver drm dts dvdr egl eigen emboss encode evdev exceptions exif faad fam fftw filecaps firefox flac flash fontconfig fonts gcj gcrypt gd gdbm gegl geoclue gif git glamor glib gmp gnuefi gnutls gpg gpl gpm graphite gsl gstreamer gtk gudev hotkeys http2 iconv icu inotify intl iptables ipv6 jemalloc jit jpeg jpeg2k kate kdbus kdcraw kde kipi kmod kms konsole kscreen kwallet lcms libass libev libevent libinput libkms libnotify libsamplerate libvpx lm_sensors lzma lzo mad minizip mng modules mp3 mp4 mpeg mtp multilib ncurses net nptl ogg okular openal opencl openexr opengl openmax openmp opennl openssl opus pam pango pci pcre pcre-jit pdf pgo phonon plasma pm-utils png policykit portage posix postproc ppds proprietary-codecs pulseaudio qalculate qml qt3support qt5 rar readline realtime savedconfig schroedinger sddm seccomp session sftp smp sndfile sockets sound spell sqlite ssh ssl startup-notification svg swscale sync-plugin-portage system-ffmpeg system-icu system-jpeg system-libevent system-mitkrb5 system-sqlite systemd taglib tar tevent theora threads thumbnail tiff truetype udev udisks unicode upower urandom usb uvm uxa vaapi vc vdpau video vnc vorbis vpx vulkan wayland webp widevine widgets x264 xa xattr xcb xml xscreensaver xv xvid xvmc zip zlib" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 aes avx avx2 fma3 sse3 sse4 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python3_4" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby21 ruby22" USERLAND="GNU" VIDEO_CARDS="intel i965 nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Ben Kohler






          2017-04-27 16:08:04 UTC
        

There is some special ninja handling of MAKEOPTS / -l / -j in this ebuild, can you try without any -l param in your MAKEOPTS and see if the load goes up to ~8 as expected?




Comment 2


C. Wijtmans





          2017-04-27 21:18:34 UTC
        

(In reply to Ben Kohler from comment #1)
> There is some special ninja handling of MAKEOPTS / -l / -j in this ebuild,
> can you try without any -l param in your MAKEOPTS and see if the load goes
> up to ~8 as expected?

I tried that but it does not even seem to go to configure or building it seems to be stuck at fetching the source.




Comment 3


Ben Kohler






          2017-04-27 21:24:21 UTC
        

It's a very large download.  Why don't you either disable quiet-build, or tail /var/log/emerge-fetch.log , to see what's going on?




Comment 4


C. Wijtmans





          2017-04-27 21:58:10 UTC
        

(In reply to Ben Kohler from comment #3)
> It's a very large download.  Why don't you either disable quiet-build, or
> tail /var/log/emerge-fetch.log , to see what's going on?

I doubt its so large that it takes nearly 5 hours... in fact it already downloaded the file...

 * electron-1.3.13.tar.gz size ;-) ...                                   [ ok ]

but the emerge hangs and i have to press ctrl+c and it will give "fetch failed for electron".

build log is completely empty (besides the fetch failed error).

No problem with other packages...




Comment 5


Ben Kohler






          2017-04-27 22:00:09 UTC
        

Please foreground it so we can see what it's actually working on




Comment 6


C. Wijtmans





          2017-04-27 22:48:29 UTC
        

(In reply to Ben Kohler from comment #5)
> Please foreground it so we can see what it's actually working on

Actually a process was fetching the chromium tar so in the fetch log it said the file was locked by another process... so it was waiting forever as the process was sleeping or whatever. Never happened to me before. Sorry for wasting your time :/




Comment 7


Jonas Stein






          2017-04-29 14:43:16 UTC
        

tested with

$ cd /usr/portage/dev-util/electron/
$ ebuild electron-1.3.13-r1.ebuild fetch 

Length: 458110272 (437M) [application/octet-stream]
Saving to: ‘/usr/portage/distfiles/chromium-52.0.2743.82.tar.xz’

Length: 4560040 (4.3M) [application/octet-stream]
Saving to: ‘/usr/portage/distfiles/electron-1.3.13.tar.gz’

works here.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

