Title: 822192 – dev-qt/qtwebengine-5.15.2_p20211019 unable to check glibc version during building
URL: https://bugs.gentoo.org/show_bug.cgi?id=822192

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 822192
dev-qt/qtwebengine-5.15.2_p20211019 unable to check glibc version during building
Last modified: 2021-11-08 06:31:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 822192 
      - dev-qt/qtwebengine-5.15.2_p20211019 unable to check glibc version during building


Summary:
dev-qt/qtwebengine-5.15.2_p20211019 unable to check glibc version during buil...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-11-06 23:46 UTC by Михаил





      Modified:
    
2021-11-08 06:31 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (qtwebenginebuild.log,12.45 KB,
                text/plain)

            
2021-11-06 23:47 UTC,

            Михаил




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Михаил





          2021-11-06 23:46:19 UTC
        

Configure unable to check glibc version because try to use gold linker (not installed).

cd /var/tmp/portage/dev-qt/qtwebengine-5.15.2_p20211019/work/qtwebengine-5.15.2_p20211019_build/config.tests/webengine-glibc && MAKEFLAGS= make
g++ -c -pipe -O2 -w -fPIC  -I. -I/usr/lib64/qt5/mkspecs/linux-g++ -o main.o main.cpp" "> g++ -Wl,-O1 -fuse-ld=gold -o webengine-glibc main.o
collect2: fatal error: cannot find ‘ld’
compilation terminated.
make: *** [Makefile:67: webengine-glibc] Error 1

Reproducible: Always

Steps to Reproduce:
emerge -1 =dev-qt/qtwebengine-5.15.2_p20211019



$ emerge --info 
Portage 3.0.28 (python 3.9.7-final-0, default/linux/amd64/17.1/systemd, gcc-11.2.0, glibc-2.33-r7, 5.15.0-gentoo x86_64)
=================================================================
System uname: Linux-5.15.0-gentoo-x86_64-Intel-R-_Core-TM-_i7-7500U_CPU_@_2.70GHz-with-glibc2.33
KiB Mem:    16119784 total,    344936 free
KiB Swap:   23068664 total,  23066872 free
Timestamp of repository gentoo: Sat, 06 Nov 2021 22:06:29 +0000
Head commit of repository gentoo: f518f3ada48411cee3934a430d388b5197cd9127

sh bash 5.1_p8
ld GNU ld (Gentoo 2.37_p1 p0) 2.37
app-shells/bash:          5.1_p8::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.34.0-r3::gentoo
dev-lang/python:          2.7.18_p13::gentoo, 3.9.7_p1::gentoo, 3.10.0_p1::gentoo
dev-lang/rust:            1.56.1::gentoo
dev-util/cmake:           3.20.5::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/sandbox:         2.25::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.71-r1::gentoo
sys-devel/automake:       1.16.4::gentoo
sys-devel/binutils:       2.37_p1::gentoo
sys-devel/gcc:            11.2.0::gentoo
sys-devel/gcc-config:     2.4::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.14::gentoo (virtual/os-headers)
sys-libs/glibc:           2.33-r7::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo
    priority: -1000
    sync-git-verify-commit-signature: yes

ml-local-overlay
    location: /usr/local/portage
    masters: gentoo

Installed sets: @steam
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fpic"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe -fpic"
DISTDIR="/var/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-march=native -O2 -pipe -fpic"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-march=native -O2 -pipe -fpic"
GENTOO_MIRRORS="https://mirror.yandex.ru/gentoo-distfiles/"
LANG="ru_RU.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="ru en"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="10bit 256-color X a52 aac accessibility acl acpi ads aio alsa alt-svc amd64 amr amrenc ap apng avif base bash-completion berkdb blink bluetooth bluray brotli bzip2 bzlib cairo caps cdb celt cgroups clang cleartype cli conntrack corefonts crt crypt cryptsetup css cue cups curl daemon dav1d dbus dcc_video declarative default-lld devil dga dirac distinct-l djvu dns-over-tls dri drm dtmf dv dvb dvd dvdr dvdread eap-tls egl elfutils enca encode epoll epub evdev exceptions exif faac faad farstream fbcon ffmpeg fftw firebird flac fontconfig frei0r ftp fts3 g3dvl gbm gles gles2 gmp gnome googledrive gost graphite gsm gui h224 h281 h323 haptic hardened harfbuzz hdri heif http http2 hwaccel icccm icecast iceweasel iconv icu idn ilbc importd inotify inspector introspection iproute2 ipv6 jabber java jpeg jpeg2k json jumbo-build kbd kde kdenlive kdexdeltas kdrive lame large-stack lcms leaps-timezone libcxx libdrm libglvnd libkms libtirpc lm-sensors localstorage lspclient lto lvm lyrics lz4 lzma lzo mad mdnsresponder-compat melt minizip mmap mmx mng mod modemmanager modern-top modplug mount mozdevelop mp3 mtp multilib multitarget musepack nat natspec ncurses netlink network networkmanager newnet nftables nightly nls nptl nptlonly nsplugin nss nvidia ogg openal opencl openexr opengl openmp openssl opus otf otr pam parallel-compiler pch pcre pcre16 pcre32 pic png policykit postgres postproc printsupport private-headers proprietary-codecs pulseaudio python qml qos qrcode qt5 quiche rav1e raw readline realtime redland rfc3779 rls rtmp ru-dv ru-i ru-k sbc schroedinger screencast scripttools sdl sdl2 seccomp secure-delete semantic-desktop sensors sieve sip sipim smp soap speex split-usr sqlite srtp sse sse2 sse3 ssl ssse3 staging static-pie svc svg svt-av1 system-bootstrap system-cairo system-cxx-headers system-harfbuzz system-icu system-jpeg system-libevent system-libvpx system-llvm system-sqlite systemd taglib tdls text tftp theora threads threadsafe thunderbolt tiff tray truetype twolame type1 udev uncommon-eap-types unicode unicode3 unlock-notify urandom usb user-session uvm v4l v4l2 vaapi video vorbis vpx vtv vulcan vulkan wasm wav wayland webchannel webkit webp webui widgets win32codecs wma x264 x265 xattr xcb xephyr xfs xft xinerama xkb xml xmlrpc xmp xscreensaver xtables xulrunner xv xvfb xvid xxhash z3 zeroconf zic-slim zink zlib zram zrtp zstd" ABI_X86="64" ADA_TARGET="gnat_2019" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse4_1 sse4_2 sse3 ssse3 aes avx avx2 f16c" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="libinput evdev" KERNEL="linux" L10N="ru en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="scripting-javascript wiki-publisher" LLVM_TARGETS="AMDGPU BPF NVPTX X86 AArch64 ARM Hexagon Lanai MSP430 Mips PowerPC Sparc SystemZ XCore RISCV WebAssembly ARC AVR" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres12 postgres13" PYTHON_SINGLE_TARGET="python3_9" PYTHON_TARGETS="python3_9" RUBY_TARGETS="ruby26 ruby27" USERLAND="GNU" VIDEO_CARDS="i965 intel iris nvidia v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, MAKEOPTS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RUSTFLAGS




Comment 1


Sam James









          2021-11-06 23:47:47 UTC
        

That is not the same error you gave in the other bug, so I wish you'd given more information then ;).

Please attach the full build.log too. That said, I may need you to just rebuild qtcore.




Comment 2


Михаил





          2021-11-06 23:47:53 UTC
        

Created attachment 749214 [details]
build.log




Comment 3


Михаил





          2021-11-07 00:11:17 UTC
        

/usr/lib64/libQt5*.prl files contains use_gold_linker.

Looks like only my issue. How to wipe use_gold_linker?




Comment 4


Sam James









          2021-11-07 00:11:55 UTC
        

(In reply to Михаил from comment #3)
> /usr/lib64/libQt5*.prl files contains use_gold_linker.
> 
> Looks like only my issue. How to wipe use_gold_linker?

Did you try rebuilding qtcore? Failing that, emerge -v1 /usr/lib64/libQt5*.prl




Comment 5


Михаил





          2021-11-07 10:36:28 UTC
        

(In reply to Sam James from comment #4)
> Did you try rebuilding qtcore? Failing that, emerge -v1
> /usr/lib64/libQt5*.prl


Thanks. Rebuilding qtcore is enough. I also rebuild all qt to remove all gold mentioning.




Comment 6


Sam James









          2021-11-08 06:31:45 UTC
        

(In reply to Михаил from comment #5)
> (In reply to Sam James from comment #4)
> > Did you try rebuilding qtcore? Failing that, emerge -v1
> > /usr/lib64/libQt5*.prl
> 
> 
> Thanks. Rebuilding qtcore is enough. I also rebuild all qt to remove all
> gold mentioning.

Thanks!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

