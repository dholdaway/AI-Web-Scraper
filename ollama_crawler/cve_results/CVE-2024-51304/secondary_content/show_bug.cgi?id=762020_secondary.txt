Title: 762020 – net-im/zoom-5.4.* crashes at startup
URL: https://bugs.gentoo.org/show_bug.cgi?id=762020

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 762020
net-im/zoom-5.4.* crashes at startup
Last modified: 2021-06-26 06:48:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 762020 
      - net-im/zoom-5.4.* crashes at startup


Summary:
net-im/zoom-5.4.* crashes at startup
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Ulrich Müller








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-12-27 23:18 UTC by Patrick ALLAERT





      Modified:
    
2021-06-26 06:48 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



dilfridge
jstein
mva









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp

              (3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp.gz,41.93 KB,
                application/octet-stream)

            
2020-12-28 08:59 UTC,

            Patrick ALLAERT




Details





Dump crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gzcrash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz

              (crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz,42.91 KB,
                application/octet-stream)

            
2020-12-28 09:00 UTC,

            Patrick ALLAERT




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrick ALLAERT





          2020-12-27 23:18:53 UTC
        

Tried:
- 5.4.53391.1108-r1
- 5.4.56259.1207-r2
- 5.4.57450.1220

Tried as well: zoom-bin-5.4.56259.1207 from https://gpo.zugaina.org/net-im/zoom-bin.

In all cases, zoom crashed on startup.

Tried as well to `rm -rf /opt/zoom`, as mentioned in #754399, in case it was the same issue, but it didn't work for me.

Tried as well: with and without USE flag `bundled-qt`: no difference.

Removed as well file `~/.config/zoomus.conf` just in case: no change either.

cat ~/.zoom/logs/zoom_stdout_stderr.log 
ZoomLauncher started.
Zoom path is: /opt/zoom
cmd line: 
CreateReportChannel bp_server_fd=4
$HOME = /home/patrick.allaert 
export SSB_HOME=/home/patrick.allaert/.zoom; export QSG_INFO=1; export LD_LIBRARY_PATH=/opt/zoom; export BREAKPAD_CLIENT_FD=3; /opt/zoom/zoom "" 
zoom started.
[CZPClientLogMgr::LogClientEnvironment] [MacAddr: 50:E0:85:44:51:1F][client: Linux][OS:  Gentoo/Linux x64][Hardware: CPU Core:16 Frenquency:2 G Memory size:128455MB CPU Brand:Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz GPU Brand:][Req ID: ]
Linux Client Version is 5.4.56259.1207
QSG_RENDER_LOOP is 
XDG_CURRENT_DESKTOP = KDE;   GDMSESSION = 
Graphics Card Info:: 00:02.0 VGA compatible controller: Intel Corporation UHD Graphics 630 (Mobile) (rev 02)
01:00.0 VGA compatible controller: NVIDIA Corporation TU104GLM [Quadro RTX 4000 Mobile / Max-Q] (rev a1)
Zoom package arch is 64bit, runing OS arch is x86_64
QGLXContext: Failed to create dummy context
qt.scenegraph.general: QSG: basic render loop
qt.scenegraph.general: Using sg animation driver
qt.svg: :/images/wechat.svg:10:6: Could not resolve property: #pattern0
Failed to create OpenGL context for format QSurfaceFormat(version 2.0, options QFlags<QSurfaceFormat::FormatOption>(), depthBufferSize 24, redBufferSize -1, greenBufferSize -1, blueBufferSize -1, alphaBufferSize 8, stencilBufferSize 8, samples -1, swapBehavior QSurfaceFormat::DoubleBuffer, swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile  QSurfaceFormat::NoProfile) 
ZoomLauncher: new dump generated from pid 2522360, path: /home/patrick.allaert/.zoom/logs/aecf4aa9-546e-4940-a1c78e87-a1c5f69b.dmp
$HOME = /home/patrick.allaert 
sh : ligne 1 : 2522360 Abandon                 (core dumped)/opt/zoom/zoom ""
success to create child process,status is 34304.
zoom exited normally.
Something went wrong while running zoom,exit code is 134.
ZoomLauncher exit.


Reproducible: Always

Steps to Reproduce:
1. $ zoom
2.
3.
Actual Results:  
crash

Expected Results:  
no crash

Portage 3.0.9 (python 3.8.6-final-0, default/linux/amd64/17.1/desktop/plasma/systemd, gcc-9.3.0, glibc-2.32-r3, 5.9.14-gentoo x86_64)
=================================================================
System uname: Linux-5.9.14-gentoo-x86_64-Intel-R-_Core-TM-_i9-9880H_CPU_@_2.30GHz-with-glibc2.2.5
KiB Mem:   131538732 total,  64400768 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Sun, 27 Dec 2020 13:00:02 +0000
Head commit of repository gentoo: 45c9b42c60a1d4e6b5869f4f967351f2b0ac0041
sh bash 5.0_p18
ld GNU ld (Gentoo 2.34 p6) 2.34.0
app-shells/bash:          5.0_p18::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.30.3::gentoo
dev-lang/python:          2.7.18-r4::gentoo, 3.8.6::gentoo, 3.9.0::gentoo
dev-util/cmake:           3.17.4-r1::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/sandbox:         2.20::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.13.4-r2::gentoo, 1.16.2-r1::gentoo
sys-devel/binutils:       2.34-r2::gentoo
sys-devel/gcc:            9.3.0-r2::gentoo
sys-devel/gcc-config:     2.3.2-r1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.4-r1::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r3::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts: 

localrepo
    location: /var/db/repos/localrepo
    masters: gentoo

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE all-rights-reserved linux-fw-redistributable ms-teams-pre no-source-code NVIDIA-r2 Spotify unRAR ZOOM"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe -fno-stack-protector"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/sddm/scripts/Xsetup"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.2/ext-active/ /etc/php/apache2-php7.3/ext-active/ /etc/php/apache2-php7.4/ext-active/ /etc/php/apache2-php8.0/ext-active/ /etc/php/cgi-php7.2/ext-active/ /etc/php/cgi-php7.3/ext-active/ /etc/php/cgi-php7.4/ext-active/ /etc/php/cgi-php8.0/ext-active/ /etc/php/cli-php7.2/ext-active/ /etc/php/cli-php7.3/ext-active/ /etc/php/cli-php7.4/ext-active/ /etc/php/cli-php8.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=native -pipe -fno-stack-protector"
DISTDIR="/var/cache/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -march=native -pipe -fno-stack-protector"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -march=native -pipe -fno-stack-protector"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="fr_BE.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="fr"
MAKEOPTS="-j15 -l15"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac acl acpi activities alsa amd64 berkdb branding bzip2 cairo cdda cdr chromium cli crypt cups dbus declarative dri dts dvd dvdr emboss encode exif flac fortran gdbm gif gles gpm gui iconv icu ipv6 jpeg kipi kwallet lcms libglvnd libnotify libtirpc mad mng mp3 mp4 mpeg multilib ncurses networkmanager nls nptl ogg opengl openmp pam pango pcre pdf phonon plasma png policykit ppds qml qt5 readline sdl seccomp spell split-usr ssl startup-notification svg systemd tcpd tiff truetype udev udisks unicode upower usb vorbis widgets wxwidgets x264 xattr xcb xml xv xvid zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="alias auth_basic authn_core auth_digest authn_file authz_core authz_host authz_user autoindex deflate dir headers env expires filter include log_config macro mime negotiation proxy proxy_http proxy_wstunnel rewrite setenvif socache_shmcb unique_id unixd" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput evdev synaptics" KERNEL="linux" L10N="fr" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php8-0 php7-4 php7-3 php7-2" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_8" PYTHON_TARGETS="python3_8" RUBY_TARGETS="ruby25 ruby26" USERLAND="GNU" VIDEO_CARDS="nvidia intel i965" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Patrick ALLAERT





          2020-12-27 23:26:05 UTC
        

Some more info about my system:

media-libs/mesa-20.2.4
dev-qt/qtcore-5.15.1-r1
sys-devel/gcc-9.3.0-r2
sys-libs/glibc-2.32-r3




Comment 2


Ulrich Müller






          2020-12-28 00:31:36 UTC
        

(In reply to Patrick ALLAERT from comment #0)
> cat ~/.zoom/logs/zoom_stdout_stderr.log 
> ZoomLauncher started.

This cannot be a log from the version in the gentoo repository. Our version doesn't use ZoomLauncher, but uses its own wrapper script.

> Steps to Reproduce:
> 1. $ zoom




Comment 3


Patrick ALLAERT





          2020-12-28 08:55:17 UTC
        

(In reply to Ulrich Müller from comment #2)
> (In reply to Patrick ALLAERT from comment #0)
> > cat ~/.zoom/logs/zoom_stdout_stderr.log 
> > ZoomLauncher started.
> 
> This cannot be a log from the version in the gentoo repository. Our version
> doesn't use ZoomLauncher, but uses its own wrapper script.
> 
> > Steps to Reproduce:
> > 1. $ zoom

Correct, that was from the latest attempt (with net-im/zoom-bin).

Now with: net-im/zoom-5.4.57450.1220  USE="bundled-qt (-bundled-libjpeg-turbo) -pulseaudio -wayland".


$ zoom
zoom started.
Client: Breakpad is using Single Client Mode! client fd = -1
[CZPClientLogMgr::LogClientEnvironment] [MacAddr: 50:E0:85:44:51:1F][client: Linux][OS:  Gentoo/Linux x64][Hardware: CPU Core:16 Frenquency:2 G Memory size:128455MB CPU Brand:Intel(R) Core(TM) i9-9880H CPU @ 2.30GHz GPU Brand:][Req ID: ]
Linux Client Version is 5.4.57450.1220
QSG_RENDER_LOOP is 
XDG_CURRENT_DESKTOP = KDE;   GDMSESSION = 
Graphics Card Info:: 00:02.0 VGA compatible controller: Intel Corporation UHD Graphics 630 (Mobile) (rev 02)
01:00.0 VGA compatible controller: NVIDIA Corporation TU104GLM [Quadro RTX 4000 Mobile / Max-Q] (rev a1)
Zoom package arch is 64bit, runing OS arch is x86_64
AppIconMgr::systemDesktopName log Desktop Name: /usr/share/xsessions/plasma 
QGLXContext: Failed to create dummy context
Failed to create OpenGL context for format QSurfaceFormat(version 2.0, options QFlags<QSurfaceFormat::FormatOption>(), depthBufferSize 24, redBufferSize -1, greenBufferSize -1, blueBufferSize -1, alphaBufferSize 8, stencilBufferSize 8, samples -1, swapBehavior QSurfaceFormat::DoubleBuffer, swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile  QSurfaceFormat::NoProfile) 
Abandon (core dumped)




Comment 4


Patrick ALLAERT





          2020-12-28 08:59:36 UTC
        

Created attachment 679972 [details]
3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp

Lauching zoom once produced two "dump" files, one of them being gzipped:
- 3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp.gz
- crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gzcrash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz

This is the one originally named "3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp".




Comment 5


Patrick ALLAERT





          2020-12-28 09:00:44 UTC
        

Created attachment 679975 [details]
Dump crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gzcrash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz

Lauching zoom once produced two "dump" files, one of them being gzipped:
- 3a8f1821-5c46-49e6-91f0f5ba-5a3c9710.dmp.gz
- crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gzcrash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz

This is the one originally named "crash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gzcrash_5.4.57450.1220_impresa__2020-1228-085422.dmp.gz".




Comment 6


Ulrich Müller






          2020-12-28 13:00:14 UTC
        

(In reply to Patrick ALLAERT from comment #3)
> Graphics Card Info:: 00:02.0 VGA compatible controller: Intel Corporation
> UHD Graphics 630 (Mobile) (rev 02)
> 01:00.0 VGA compatible controller: NVIDIA Corporation TU104GLM [Quadro RTX
> 4000 Mobile / Max-Q] (rev a1)
> Zoom package arch is 64bit, runing OS arch is x86_64
> AppIconMgr::systemDesktopName log Desktop Name: /usr/share/xsessions/plasma 
> QGLXContext: Failed to create dummy context
> Failed to create OpenGL context for format QSurfaceFormat(version 2.0,
> options QFlags<QSurfaceFormat::FormatOption>(), depthBufferSize 24,
> redBufferSize -1, greenBufferSize -1, blueBufferSize -1, alphaBufferSize 8,
> stencilBufferSize 8, samples -1, swapBehavior QSurfaceFormat::DoubleBuffer,
> swapInterval 1, colorSpace QSurfaceFormat::DefaultColorSpace, profile 
> QSurfaceFormat::NoProfile) 
> Abandon (core dumped)

This doesn't seem to be Gentoo specific. Searching for the error message returns several hits for other distros, for example Ubuntu:
https://askubuntu.com/questions/1179324/zoom-fails-to-launch-results-in-a-core-dump-and-memory-corruption-exit-code-13
https://forum.ubuntuusers.de/topic/zoom-client-startet-nicht/

There are some hints that the issue may be related to the proprietary NVIDIA driver. Can you try with the Intel card instead (which I see listed in your log), or with the x11-drivers/xf86-video-nouveau driver?


(In reply to Patrick ALLAERT from comment #4)
(In reply to Patrick ALLAERT from comment #5)

Core dumps are of little use here, because the package is closed source, and in addition to that, the binary contains no symbols. Zoom upstream may be able to help, though.




Comment 7


Patrick ALLAERT





          2020-12-29 22:52:55 UTC
        

It doesn't crash anymore.

Two changes happened since then:
- I rebooted.
- An update to nvidia-drivers happened, using now x11-drivers/nvidia-drivers-455.45.01-r1

I guess one of those changes is responsible for the fix, not 100% sure which one...




Comment 8


Ulrich Müller






          2020-12-29 23:08:31 UTC
        

Closing then.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

