Title: 243236 – media-gfx/hugin-0.7.0-r1 segfault on "Align images"
URL: https://bugs.gentoo.org/show_bug.cgi?id=243236

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 243236
media-gfx/hugin-0.7.0-r1 segfault on "Align images"
Last modified: 2009-01-23 20:24:23 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 243236 
      - media-gfx/hugin-0.7.0-r1 segfault on "Align images"


Summary:
media-gfx/hugin-0.7.0-r1 segfault on "Align images"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Graphics Project








URL:



http://sourceforge.net/tracker/index....
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-22 16:10 UTC by Jiří Vyskočil





      Modified:
    
2009-01-23 20:24 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



widget









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




hugin console output

              (hugin-console,8.76 KB,
                text/plain)

            
2008-10-22 16:12 UTC,

            Jiří Vyskočil




Details





Manually selecting optimise exposure

              (hugin-exposure-optimise,5.62 KB,
                text/plain)

            
2008-10-22 16:30 UTC,

            Jiří Vyskočil




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jiří Vyskočil





          2008-10-22 16:10:28 UTC
        

When I try to use the "Align images" function in hugin-0.7.0-r1, it finds some control points and then proceeds with "Aligning images" when the progress bar almost reaches the end, hugin exits. Console log shows a segmentation fault.

I tried not using the automatic aligning function, but performing some steps manually according to a tutorial on hugin website. A very similar error, resulting in hugin crash appears when I press "Optimise now" on the "Exposure" tab.

Reproducible: Always

Steps to Reproduce:
1. start hugin
2. load some images
3. press "Align images"

Actual Results:  
Hugin crashes, console output indicates a segfault.


I'm running a mostly stable amd64 arch, but with gcc-4.3.1. hugin is emerged with 'sift' USE flag enabled.

strazce@thor ~ $ emerge --info 
Portage 2.2_rc12 (default/linux/amd64/2008.0, gcc-4.3.1, glibc-2.7-r2, 2.6.25-gentoo-r7-sh x86_64)
=================================================================
System uname: Linux-2.6.25-gentoo-r7-sh-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9450_@_2.66GHz-with-glibc2.2.5
Timestamp of tree: Wed, 22 Oct 2008 14:30:10 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r7
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.3.0-r1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -msse4.1 -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -msse4.1 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks parallel-fetch protect-owned sandbox sfperms splitdebug strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.sh.cvut.cz/MIRRORS/gentoo http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_GB.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB en_US en"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/desktop-effects /usr/local/overlays/pro-audio /usr/local/overlays/lcd-filtering /usr/local/overlays/java-overlay /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac aalib acl acpi alsa amd64 bash-completion berkdb bluetooth branding bzip2 cairo cddb cdr cli cracklib crypt css cups curl dbus dga divx doc dri dts dv dvd dvdr eds encode exif expat fam ffmpeg flac fontconfig fortran fuse gd gdbm gif glib gmp gnome gnome-keyring gnutls gphoto2 gpm gstreamer gtk gtkhtml hal iconv ieee1394 imlib ipv6 isdnlog jack java jbig jpeg jpeg2k ladspa lame lcms libcaca libffi libnotify lzo mad midi mmap mmx mng mono mp3 mpeg mudflap multilib musepack nautilus ncurses newspr nls nptl nptlonly nsplugin offensive ogg openal openexr opengl openmp pam pcre pdf perl pic png pppd python quicktime raw readline reflection samba sasl sdl session smp speex spell spl sse sse2 sse3 ssl ssse3 startup-notification svg sysfs tcl tcpd theora threads tiff tk truetype tta unicode usb v4l v4l2 vorbis wmf x264 xcb xml xorg xpm xulrunner xv xvid xvmc yv12 zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="*" APACHE2_MODULES="*" APACHE2_MPMS="worker" CAMERAS="*" ELIBC="glibc" INPUT_DEVICES="evdev joystick keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB en_US en" USERLAND="GNU" VIDEO_CARDS="nvidia vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jiří Vyskočil





          2008-10-22 16:12:26 UTC
        

Created attachment 169438 [details]
hugin console output

console output. shows starting hugin, loading two images, pressing "Align images"




Comment 2


Jiří Vyskočil





          2008-10-22 16:30:28 UTC
        

Created attachment 169444 [details]
Manually selecting optimise exposure

When I follow the tutorial at http://hugin.sourceforge.net/tutorials/two-photos/en.shtml hugin outputs this to console after pressing "Optimise now" in the "Exposure" tab. This might be another bug, but the sequence of events seems somewhat similar to the previous case.




Comment 3


Wormo (RETIRED)






          2008-10-22 19:46:11 UTC
        

What is your version of media-libs/libpano12 ? It is probably a libpano bug or version mismatch, because libpano version mismatch has caused optimization crashes in the past
http://hugin.sourceforge.net/docs/manual/Hugin_FAQ.html




Comment 4


Jiří Vyskočil





          2008-10-22 20:52:00 UTC
        

hugin-0.7.0-r1 ebuild depends on libpano13. Only available version is libpano13-2.9.12, which is installed. Seeing libpano13 depends on java - I have Sun JDK 1.6.0.07 installed.




Comment 5


Jiří Vyskočil





          2008-10-31 10:19:34 UTC
        

Here is a basic gdb backtrace on the segfault after manually selecting exposure optimisation. Note I don't have -ggdb or any other debugging related CFLAGS on (I can recompile, if anyone would be interested)

Iteration: 59, error: 8.630457: 40%
Iteration: 60, error: 8.630455: 40%
Iter: 60, estimate: 0.492972393 2.34888333 -0.203144065 0.208610242 -0.173616998 0.398680317 -1.37048287 0.996770563 12.2686456 -- errors 1.76012113e-05 0.359680326
Iteration: 61, error: 8.630455: 40%

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7f8180663790 (LWP 6161)]
0x00007f81802cbba0 in dlevmar_covar () from /usr/lib/libhuginbase.so.0.0
(gdb) backtrace
#0  0x00007f81802cbba0 in dlevmar_covar () from /usr/lib/libhuginbase.so.0.0
#1  0x00007f81802c60b3 in dlevmar_dif () from /usr/lib/libhuginbase.so.0.0
#2  0x00007f817fdd2254 in HuginBase::PhotometricOptimizer::optimizePhotometric ()
   from /usr/lib/libhuginbase.so.0.0
#3  0x00007f817fdd2a7a in HuginBase::SmartPhotometricOptimizer::smartOptimizePhotometric ()
   from /usr/lib/libhuginbase.so.0.0
#4  0x0000000000525033 in OptimizePhotometricPanel::runOptimizer ()
#5  0x0000000000526023 in OptimizePhotometricPanel::OnOptimizeButton ()
#6  0x00007f817dcc2299 in wxEvtHandler::ProcessEventIfMatches () from /usr/lib/libwx_baseu-2.8.so.0
#7  0x00007f817dcc3473 in wxEventHashTable::HandleEvent () from /usr/lib/libwx_baseu-2.8.so.0
#8  0x00007f817dcc3567 in wxEvtHandler::ProcessEvent () from /usr/lib/libwx_baseu-2.8.so.0
#9  0x00007f817d89aa48 in wxWindowBase::TryParent () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#10 0x00007f817d89aa48 in wxWindowBase::TryParent () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#11 0x00007f817dcc34f0 in wxEvtHandler::ProcessEvent () from /usr/lib/libwx_baseu-2.8.so.0
#12 0x00007f817d8c88f5 in wxScrollHelperEvtHandler::ProcessEvent () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#13 0x00007f817d89aa48 in wxWindowBase::TryParent () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#14 0x00007f817d7dd5d9 in gtk_button_clicked_callback () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#15 0x00007f8179d8f18f in IA__g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#16 0x00007f8179da6620 in signal_emit_unlocked_R () from /usr/lib/libgobject-2.0.so.0
#17 0x00007f8179da77e8 in IA__g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#18 0x00007f8179da7d23 in IA__g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#19 0x00007f817b2e5e6d in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#20 0x00007f8179d8f18f in IA__g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#21 0x00007f8179da5a1d in signal_emit_unlocked_R () from /usr/lib/libgobject-2.0.so.0
#22 0x00007f8179da77e8 in IA__g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#23 0x00007f8179da7d23 in IA__g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#24 0x00007f817b2e50bd in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#25 0x00007f817b389da8 in ?? () from /usr/lib/libgtk-x11-2.0.so.0
---Type <return> to continue, or q <return> to quit---
#26 0x00007f8179d8f18f in IA__g_closure_invoke () from /usr/lib/libgobject-2.0.so.0
#27 0x00007f8179da5dd1 in signal_emit_unlocked_R () from /usr/lib/libgobject-2.0.so.0
#28 0x00007f8179da7697 in IA__g_signal_emit_valist () from /usr/lib/libgobject-2.0.so.0
#29 0x00007f8179da7d23 in IA__g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#30 0x00007f817b48c57e in ?? () from /usr/lib/libgtk-x11-2.0.so.0
#31 0x00007f817b382723 in gtk_propagate_event () from /usr/lib/libgtk-x11-2.0.so.0
#32 0x00007f817b383843 in gtk_main_do_event () from /usr/lib/libgtk-x11-2.0.so.0
#33 0x00007f817b00b2cc in ?? () from /usr/lib/libgdk-x11-2.0.so.0
#34 0x00007f81796ce78a in IA__g_main_context_dispatch () from /usr/lib/libglib-2.0.so.0
#35 0x00007f81796d1f3d in g_main_context_iterate () from /usr/lib/libglib-2.0.so.0
#36 0x00007f81796d246d in IA__g_main_loop_run () from /usr/lib/libglib-2.0.so.0
#37 0x00007f817b383c57 in gtk_main () from /usr/lib/libgtk-x11-2.0.so.0
#38 0x00007f817d793d58 in wxEventLoop::Run () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#39 0x00007f817d81c9eb in wxAppBase::MainLoop () from /usr/lib/libwx_gtk2u_core-2.8.so.0
#40 0x00007f817dc67c9d in wxEntry () from /usr/lib/libwx_baseu-2.8.so.0
#41 0x0000000000459172 in main ()
(gdb) 




Comment 6


Markus Meier






          2008-11-09 00:54:32 UTC
        

As I am unable to reproduce this, I filed a bug report at the hugin project page (see the URL field).




Comment 7


Jiří Vyskočil





          2008-11-09 23:06:52 UTC
        

Today I tried compiling hugin directly from the tarball - it worked. I went to test if any of my CFLAGS might be the problem. Suddenly, I can't reproduce the bug either - hugin magically started working after an emerge a now seems to work without problems.

I'm not aware of making any significant changes to the system. Only:
- Did an emerge -DNu world this morning to get updates since my last post, but nothing seemed to be anyhow related to hugin.
- Installed LAPACK and some other numerical libraries. Coincidentally, I have noticed, that hugin might be able to use them - near 28% of copmilation, it issues a warning about missing LAPACK, even if I have several implementations installed and working, this might be related to the problem (altough I doubt it)




Comment 8


Stephen Bridges





          2008-12-14 23:03:29 UTC
        

Just thought I'd say 'me too', also have this problem on on unstable amd64, with an identical backtrace. I'm going to recompile hugin, see if it makes a difference.

I am using libpano13-2.9.12 and the icedtea OpenJDK.




Comment 9


Markus Meier






          2009-01-23 20:24:23 UTC
        

closing, as this doesn't seem like a hugin bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

