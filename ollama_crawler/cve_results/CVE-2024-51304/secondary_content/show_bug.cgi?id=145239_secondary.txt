Title: 145239 – Sandbox and sshfs don't play nice
URL: https://bugs.gentoo.org/show_bug.cgi?id=145239

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145239
Sandbox and sshfs don't play nice
Last modified: 2006-12-04 08:53:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145239 
      - Sandbox and sshfs don't play nice


Summary:
Sandbox and sshfs don't play nice
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Sandbox

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Sandbox Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-27 03:04 UTC by Mathy Vanvoorden





      Modified:
    
2006-12-04 08:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mathy Vanvoorden





          2006-08-27 03:04:03 UTC
        

Hi,

I am not sure whether the problem really is a sandbox bug but I'll just post it here for future reference anyway, feel free to close it immediately ;)

When faced with the problem of insufficient RAM on my router to compile gcc-4.1.1 on one of my machines (and lack of a build-chroot anywhere), I decided to try and take a rather "different" approach:

I mounted router:/ to desktop:/root/chroot
I then (bind-)mounted /proc, /dev, /sys, /usr/portage and /var/tmp/portage to the right places in /root/chroot.
After that I chrooted in the chroot, did env-update && source /etc/profile

When trying to emerge gcc, it bailed out on me claiming: "Link tests are not allowed after GCC_NO_EXECUTABLES.". After googling a bit, I found that it could be related to an older autoconf, so I decided to update that (although it was only a minor revision). While doing that I found the real culprit. When sandbox is enabled, it seems that there are problems with linking against shared libraries:

make: error while loading shared libraries: libpthread.so.0: cannot open shared object file: Operation not permitted

If I disable sandbox, autoconf builds ands installs just fine.

Like I said, this may not be a real sandbox bug, because sshfs has its own quirks. I tried several options to sshfs to resolve the problem. If you have any ideas or pointers on where the problem may be located and if it should be posted upstream, I'd be happy to do that.




Comment 1


SpanKY






          2006-08-27 10:16:23 UTC
        

that doesnt really look like a sandbox bug




Comment 2


Mathy Vanvoorden





          2006-08-27 15:33:14 UTC
        

I have yet to compile gcc succesfully, even without sandbox. But I don't get the mentioned error any more, so there must be something related to the problem, but I suspect it can be blamed on sshfs. This is costing me more time then I'd like and I probably will just move the HD to another system or create a build-root for it. Consider this bug as a heads-up for people running into similar problems in the future ;)




Comment 3


Jakub Moc (RETIRED)






          2006-12-04 08:53:16 UTC
        

Not reproducible, closing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

