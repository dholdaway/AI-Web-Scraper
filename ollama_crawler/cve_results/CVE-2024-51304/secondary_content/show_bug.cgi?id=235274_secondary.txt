Title: 235274 – dev-util/kdevelop-3.5.4: Apostrophes in gcc output appear as unicode garbage in the messages window
URL: https://bugs.gentoo.org/show_bug.cgi?id=235274

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 235274
dev-util/kdevelop-3.5.4: Apostrophes in gcc output appear as unicode garbage in the messages window
Last modified: 2009-11-08 00:03:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 235274 
      - dev-util/kdevelop-3.5.4: Apostrophes in gcc output appear as unicode garbage in the messages window


Summary:
dev-util/kdevelop-3.5.4: Apostrophes in gcc output appear as unicode garbage ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-20 09:16 UTC by Jeremy Murphy





      Modified:
    
2009-11-08 00:03 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



esigra









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jeremy Murphy





          2008-08-20 09:16:52 UTC
        

When gcc refers to a variable name enclosed in 'apostrophes' (such as in a
warning message), each apostrophe comes out as the letter a with a hat (^)
above it followed by two boxes.  gcc output in a terminal is fine.

I still get a little confused with KDE vs glibc configuration of code pages,
etc, so here are a few diagnostics:

prison ~ # locale
LANG=en_AU.UTF-8
LC_CTYPE="en_AU.UTF-8"
LC_NUMERIC="en_AU.UTF-8"
LC_TIME="en_AU.UTF-8"
LC_COLLATE="en_AU.UTF-8"
LC_MONETARY="en_AU.UTF-8"
LC_MESSAGES="en_AU.UTF-8"
LC_PAPER="en_AU.UTF-8"
LC_NAME="en_AU.UTF-8"
LC_ADDRESS="en_AU.UTF-8"
LC_TELEPHONE="en_AU.UTF-8"
LC_MEASUREMENT="en_AU.UTF-8"
LC_IDENTIFICATION="en_AU.UTF-8"
LC_ALL=en_AU.UTF-8

prison ~ # cat /etc/locale.gen
en_AU ISO-8859-1
en_AU.UTF-8 UTF-8
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8

There is no Australian English for KDE, so I have British and US English as my
installed languages.  I'm not sure that it is important to mention all this,
but thought I would just in case.  I've tried changing the "force English/use
kde language" option to no avail.  I tested this using amd64 (gcc 4.1.2, etc) and ~amd64 (gcc 4.3.1, etc), C and C++ code.

This bug does not appear in KDevelop 3.5.0.


Reproducible: Always

Steps to Reproduce:
1. Compile some C/C++ code that generates a warning such as "unused parameter".
2. Look in the Messages window.

Actual Results:  
foo.c: In function âbarâ:

Expected Results:  
foo.c: In function 'bar':

Portage 2.2_rc8 (default/linux/amd64/2008.0/desktop, gcc-4.3.1, glibc-2.8_p20080602-r0, 2.6.26-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.26-gentoo-r1-x86_64-Intel-R-_Core-TM-2_CPU_6300_@_1.86GHz-with-glibc2.2.5
Timestamp of tree: Wed, 20 Aug 2008 07:15:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.62-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.26
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=core2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=core2"
DISTDIR="/home/portage/distfiles"
FEATURES="collision-protect distlocks fixpackages parallel-fetch prelink preserve-libs sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp.iinet.net.au/pub/Gentoo "
LANG="en_AU.UTF-8"
LC_ALL="en_AU.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en_AU.UTF-8 en_AU en_GB.UTF-8 en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/home"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.au.gentoo.org/gentoo-portage"
USE="X a52 aac aalib acpi alsa amd64 ao bash-completion berkdb bluetooth branding bzip2 cairo cddb cdr cli cracklib crypt curl dbus dia doc dvd dvdr dvdread emboss encode exif fam ffmpeg fftw firefox flac fontconfig fortran gd gdbm gif gnome gnutls gpm graphviz gstreamer gtk hal iconv icq imlib ipod ipv6 isdnlog java javascript jpeg jpeg2k kde libnotify lm_sensors lzo mad matroska midi mikmod mmap mmx mng mp3 mpeg mplayer msn mudflap multilib mysql mysqli ncurses nls nptl nptlonly nsplugin ntfs offensive ogg openal opengl openmp pam pch pcre pdf png ppds pppd python qt3 qt3support qt4 quicktime readline reflection samba sdl session sharedmem spell spl sqlite sqlite3 sse sse2 ssl startup-notification subversion svg sysfs syslog tcpd theora tiff timidity truetype unicode usb vcd vorbis wavpack wxwindows xcomposite xml xorg xpm xulrunner xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_AU.UTF-8 en_AU en_GB.UTF-8 en_GB" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jeremy Murphy





          2008-08-23 06:57:44 UTC
        

I can report that this bug also occurs on my x86 laptop.  I'll spare you the 'emerge --info' output unless you think it's necessary.




Comment 2


Jeremy Murphy





          2009-01-05 13:18:21 UTC
        

Am I the only one that experiences this bug?




Comment 3


Jeremy Murphy





          2009-01-07 06:51:37 UTC
        

Yup, still present in 3.5.4 too.




Comment 4


Jeremy Murphy





          2009-01-07 07:00:06 UTC
        

Now here's a weird thing about this bug, which should shed some light on it.  It occurs in all the little projects that I create, but when I unpacked and opened the KDevelop project in an attempt to fix it myself... well, it doesn't happen (in that project).  So it still happens in my projects, but KDevelop compiles, all the gcc output looks normal.  Wtf?




Comment 5


Alex Alexander (RETIRED)






          2009-05-24 18:28:53 UTC
        

Could you please try to:

add "en_US.UTF-8" in /etc/locale.gen
run locale-gen

then set:

LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"

and try replicating the bug again?

also please try replicating the bug with

LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"




Comment 6


Jeremy Murphy





          2009-06-01 07:27:04 UTC
        

(In reply to comment #5)

Hi, thanks for the advice.  After some experimenting, I found that the bug only occurs if LC_ALL is set to a UTF-8 locale.  So, "POSIX", "C", "en_AU" and "en_GB" work fine, but "en_AU.UTF-8" and "en_GB.UTF-8" will reveal the bug.

Strangely, I had some trouble setting the locale to "en_US", even though I added it to /etc/locale.gen and regenerated them.  Attempts to set LC_ALL to "en", "en_US" or "en_US.UTF-8" resulted in the same error like this:

bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)

I didn't experiment with LANG= once I found out the above.

So is this a bug in KDevelop or something weird with my locales?





Comment 7


Jeremy Murphy





          2009-10-01 22:35:01 UTC
        

omg, I finally fixed it!  It didn't matter what my locale variables were set to, the problem was that I wasn't generating the en_US locale at all.  Once I put the two appropriate entries into /etc/locale.gen, it worked fine!  Still seems weird that it doesn't work as normal with en_AU or en_GB.




Comment 8


Jeremy Murphy





          2009-11-08 00:03:39 UTC
        

*sigh* Actually, this is still broken, but since it is masked for removal I won't reopen it.  I'm not sure why I thought it was working once before.  Let's hope that it all works fine in 4.0.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

