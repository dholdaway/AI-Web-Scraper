Title: 137046 – qt-4. qmake compiles with no error but gives seg. fault in config.tests
URL: https://bugs.gentoo.org/show_bug.cgi?id=137046

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137046
qt-4. qmake compiles with no error but gives seg. fault in config.tests
Last modified: 2008-10-13 20:01:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137046 
      - qt-4. qmake compiles with no error but gives seg. fault in config.tests


Summary:
qt-4. qmake compiles with no error but gives seg. fault in config.tests
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-16 18:56 UTC by Murilo Pinoti Belluzzo





      Modified:
    
2008-10-13 20:01 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



patrick









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Murilo Pinoti Belluzzo





          2006-06-16 18:56:48 UTC
        

qt-4.1.* can't compile.

I successfull compile qt-3 and qt-4 once in this system with no errors when I was installing the gentoo.

Then I tried compile psi dev branch because I start to work on it. Qmake gives me a seg. fault during the configure of psi. I was able to compile this same code of psi before reinstall gentoo. So i tried reinstall qt-4 to be sure and for my surprise its also give me a seg. fault with a brand new qmake compilations.

I'm using glibc-2.3.6 because some issues with libjingle.

============
g++ -o /var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2/bin/qmake project.o property.o main.o makefile.o unixmake2.o unixmake.o mingw_make.o option.o winmakefile.o projectgenerator.o meta.o qtmd5.o makefiledeps.o metamakefile.o xmloutput.o pbuilder_pbx.o  qchar.o qstring.o qstringmatcher.o qtextstream.o qiodevice.o qglobal.o qbytearray.o qbytearraymatcher.o qdatastream.o qbuffer.o qlistdata.o qfile.o qfsfileengine_unix.o qfsfileengine.o qregexp.o qvector.o qbitarray.o qdir.o quuid.o qhash.o qfileinfo.o qdatetime.o qstringlist.o qabstractfileengine.o qtemporaryfile.o qmap.o qunicodetables.o qmetatype.o qsettings.o qvariant.o qvsnprintf.o qlocale.o qlinkedlist.o qurl.o  
libmng auto-detection... ()
g++ -c -pipe -g -Wall -W   -I../../../mkspecs/linux-g++ -I. -I. -o libmng.o libmng.cpp
g++  -o libmng libmng.o     -lmng
libmng enabled.
SQLite2 auto-detection... ()
g++ -c -pipe -g -Wall -W   -I../../../mkspecs/linux-g++ -I. -I. -o sqlite2.o sqlite2.cpp
sqlite2.cpp:1:20: error: sqlite.h: No such file or directory
make: *** [sqlite2.o] Error 1
SQLite2 disabled.
Cups auto-detection... ()
g++ -c -pipe -g -Wall -W   -I../../../mkspecs/linux-g++ -I. -I. -o cups.o cups.cpp
g++  -o cups cups.o     -lcups
Cups enabled.
Detecting broken X11 headers... (/var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2/mkspecs/linux-g++ yes /var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2 /var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2)
X11 headers look good.
Xcursor auto-detection... ()
/var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2/config.tests/unix/compile.test: line 41: 26627 Segmentation fault      $OUTDIR/bin/qmake -nocache -spec "$QMKSPEC" "LIBS*=$LIBPATH" "INCLUDEPATH*=$INCLUDEPATH" "QMAKE_CXXFLAGS*=$CXXFLAGS" $SRCDIR/$TEST/$EXE.pro -o $OUTDIR/$TEST/Makefile >/dev/null 2>&1
make: *** No targets specified and no makefile found.  Stop.
Xcursor disabled.
Xrandr auto-detection... ()
/var/tmp/portage/qt-4.1.2/work/qt-x11-opensource-src-4.1.2/config.tests/unix/compile.test: line 41: 26632 Segmentation fault      $OUTDIR/bin/qmake -nocache -spec "$QMKSPEC" "LIBS*=$LIBPATH" "INCLUDEPATH*=$INCLUDEPATH" "QMAKE_CXXFLAGS*=$CXXFLAGS" $SRCDIR/$TEST/$EXE.pro -o $OUTDIR/$TEST/Makefile >/dev/null 2>&1
make: *** No targets specified and no makefile found.  Stop.
Xrandr disabled.
Xrandr support cannot be enabled due to functionality tests!
 Turn on verbose messaging (-v) to ./configure to see the final report.
 If you believe this message is in error you may use the continue
 switch (-continue) to ./configure to continue.

!!! ERROR: x11-libs/qt-4.1.2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  qt-4.1.2.ebuild, line 150:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.

========= emerge --info
Portage 2.1 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.3.6-r4, 2.6.16                                                                                                      -gentoo-r9 i686)
=================================================================
System uname: 2.6.16-gentoo-r9 i686 AMD Athlon(tm) Processor
Gentoo Base System version 1.12.1
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shu                                                                                                      tdown /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/revdep-reb                                                                                                      uild /etc/terminfo"
CXXFLAGS="-Os -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/                                                                                                      distributions/gentoo"
LINGUAS="br en pt_BR"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress                                                                                                       --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/d                                                                                                      istfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi bash-completion berkdb bitmap-fonts bzip2 c                                                                                                      dr cli crypt cups dbus dri dvd eds emboss encode foomaticdb fortran gdbm gif gno                                                                                                      me gpm gstreamer gtk gtk2 hal imlib ipv6 isdnlog jpeg kde libg++ libwww mad mikm                                                                                                      od motif mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd                                                                                                       python qt quicktime readline reflection sdl session spell spl ssl tcpd truetype                                                                                                       truetype-fonts type1-fonts udev usb vorbis xml xmms xorg xv zlib elibc_glibc inp                                                                                                      ut_devices_keyboard input_devices_mouse kernel_linux linguas_br linguas_en lingu                                                                                                      as_pt_BR userland_GNU video_cards_nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTA                                                                                                      GE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

I tried to found any similiar bugs but none seg. fault have the same motive.




Comment 1


Caleb Tennis (RETIRED)






          2007-08-12 19:36:08 UTC
        

can't recreate.




Comment 2


Andrew John Hughes





          2008-10-13 20:01:55 UTC
        

Also occurs when building Qt 4.3.3:

g++ -o "/var/tmp/portage/x11-libs/qt-4.3.3/work/qt-x11-opensource-src-4.3.3/bin/qmake" project.o property.o main.o makefile.o unixmake2.o unixmake.o mingw_make.o option.o winmakefile.o projectgenerator.o meta.o makefiledeps.o metamakefile.o xmloutput.o pbuilder_pbx.o borland_bmake.o msvc_dsp.o msvc_vcproj.o msvc_nmake.o msvc_objectmodel.o qstring.o qtextstream.o qiodevice.o qglobal.o qbytearray.o qbytearraymatcher.o qdatastream.o qbuffer.o qlistdata.o qfile.o qfsfileengine_unix.o qfsfileengine_iterator_unix.o qfsfileengine.o qfsfileengine_iterator.o qregexp.o qvector.o qbitarray.o qdir.o qdiriterator.o quuid.o qhash.o qfileinfo.o qdatetime.o qstringlist.o qabstractfileengine.o qtemporaryfile.o qmap.o qmetatype.o qsettings.o qlibraryinfo.o qvariant.o qvsnprintf.o qlocale.o qlinkedlist.o qurl.o qnumeric.o qcryptographichash.o qscriptasm.o qscriptast.o qscriptastvisitor.o qscriptcompiler.o qscriptecmaarray.o qscriptecmaboolean.o qscriptecmacore.o qscriptecmadate.o qscriptecmafunction.o qscriptecmaglobal.o qscriptecmamath.o qscriptecmanumber.o qscriptecmaobject.o qscriptecmaregexp.o qscriptecmastring.o qscriptecmaerror.o qscriptcontext_p.o qscriptengine.o qscriptengine_p.o qscriptextenumeration.o qscriptextvariant.o qscriptcontext.o qscriptfunction.o qscriptgrammar.o qscriptlexer.o qscriptclassdata.o qscriptparser.o qscriptprettypretty.o qscriptsyntaxchecker.o qscriptvalue.o qscriptvalueimpl.o qscriptvalueiterator.o  
floatmath auto-detection... ()
/var/tmp/portage/x11-libs/qt-4.3.3/work/qt-x11-opensource-src-4.3.3/config.tests/unix/compile.test: line 54: 31091 Segmentation fault      "$OUTDIR/bin/qmake" -nocache -spec "$QMKSPEC" "CONFIG+=$QMAKE_CONFIG" "LIBS*=$LFLAGS" "INCLUDEPATH*=$INCLUDEPATH" "QMAKE_CXXFLAGS*=$CXXFLAGS" "$SRCDIR/$TEST/$EXE.pro" -o "$OUTDIR/$TEST/Makefile"
make: *** No targets specified and no makefile found.  Stop.
floatmath disabled.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

