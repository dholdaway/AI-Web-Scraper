Title: 854903 – app-text/fblog-1.4.1 fails to compile: undefined reference to lua_tolstring
URL: https://bugs.gentoo.org/show_bug.cgi?id=854903

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 854903
app-text/fblog-1.4.1 fails to compile: undefined reference to lua_tolstring
Last modified: 2024-03-01 08:05:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 854903 
      - app-text/fblog-1.4.1 fails to compile: undefined reference to lua_tolstring


Summary:
app-text/fblog-1.4.1 fails to compile: undefined reference to lua_tolstring
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-06-28 18:21 UTC by Agostino Sarubbo





      Modified:
    
2024-03-01 08:05 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



eschwartz









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,83.40 KB,
                text/plain)

            
2022-06-28 18:21 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2022-06-28 18:21:27 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: app-text/fblog-1.4.1 fails to compile (lto).
Discovered on: amd64 (internal ref: lto_tinderbox)

NOTE:
This machine uses lto with CFLAGS=-flto -Werror=odr -Werror=lto-type-mismatch -Werror=strict-aliasing




Comment 1


Agostino Sarubbo






          2022-06-28 18:21:30 UTC
        

Created attachment 788534 [details]
build.log

build log and emerge --info




Comment 2


Agostino Sarubbo






          2022-06-28 18:21:31 UTC
        

Error(s) that match a know pattern in addition to what has been reported in the summary:


          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x113): undefined reference to `lua_tolstring'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x18a): undefined reference to `lua_type'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x1a1): undefined reference to `lua_toboolean'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x1b1): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x1dc): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x238): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x27b): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x2e9): undefined reference to `lua_tolstring'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x3c9): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0xad): undefined reference to `lua_pushvalue'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0xc5): undefined reference to `lua_pcallk'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x183): undefined reference to `lua_atpanic'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x199): undefined reference to `luaL_openlibs'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x1fa): undefined reference to `lua_pushlstring'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x290): undefined reference to `lua_rawgeti'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x301): undefined reference to `lua_settable'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x30f): undefined reference to `lua_settop'
          /usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x65a): undefined reference to `lua_close'
          fblog.e87556db-cgu.5:(.text._ZN4core3ptr100drop_in_place$LT$hlua..PushGuard$LT$$RF$mut$u20$hlua..PushGuard$LT$$RF$mut$u20$hlua..Lua$GT$$GT$$GT$17hb047a8a5238dcb75E+0xf): undefined reference to `lua_settop'
          fblog.e87556db-cgu.5:(.text._ZN4core3ptr30drop_in_place$LT$hlua..Lua$GT$17h2227f255b08cd6f9E+0xb): undefined reference to `lua_close'
          fblog.e87556db-cgu.5:(.text._ZN4hlua3Lua7execute17hf9c4acc922346ce8E+0x53): undefined reference to `lua_load'
          fblog.e87556db-cgu.5:(.text._ZN5fblog7process18process_input_line17h7808e1daa56895e0E+0x167): undefined reference to `lua_newstate'
          hlua.a721dabe-cgu.1:(.text._ZN4hlua3Lua3new5panic17haaa64aaf9ea472eaE+0x15): undefined reference to `lua_tolstring'
error: linking with `x86_64-pc-linux-gnu-gcc` failed: exit status: 1




Comment 3


Eli Schwartz






          2024-02-29 21:14:29 UTC
        

As far as I can tell this is totally unrelated to LTO. Also, it compiles fine right now.




Comment 4


Agostino Sarubbo






          2024-03-01 08:05:03 UTC
        

For unknown reasons, at that time I was asked to block bug 618550 for each issue from lto_tinderbox. The same applies to all bugs that block bug 618550 that looks to be unrelated to lto









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

