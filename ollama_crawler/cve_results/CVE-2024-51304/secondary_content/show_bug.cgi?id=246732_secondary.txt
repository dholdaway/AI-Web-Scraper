Title: 246732 – net-misc/tightvnc-1.3.9-r1: SIGSEGV in Xvnc
URL: https://bugs.gentoo.org/show_bug.cgi?id=246732

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 246732
net-misc/tightvnc-1.3.9-r1: SIGSEGV in Xvnc
Last modified: 2010-01-24 17:39:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 246732 
      - net-misc/tightvnc-1.3.9-r1: SIGSEGV in Xvnc


Summary:
net-misc/tightvnc-1.3.9-r1: SIGSEGV in Xvnc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Raúl Porcel (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:




266660



Blocks:







 

        Show dependency tree





 





      Reported:
    
2008-11-14 14:52 UTC by Dustin Polke





      Modified:
    
2010-01-24 17:39 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jerickson









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dustin Polke





          2008-11-14 14:52:38 UTC
        

I am using tightvnc since quite a while without having any problems. Now last week, I switched from Windowmaker to Xfce4 and have the following problem:

After a not well defined time, the session I have opened with tightvnc viewer is killed. I inverstigated and found that this is due to a SIGSEGV in Xvnc.

Here is the output I gathered with gdb:

Program received signal SIGSEGV, Segmentation fault.
0x000000000044927d in WaitForSomething (pClientsReady=0x7fffcdfc7600) at WaitFor
.c:463
463     WaitFor.c: No such file or directory.
        in WaitFor.c
#0  0x000000000044927d in WaitForSomething (pClientsReady=0x7fffcdfc7600) at Wai
tFor.c:463
        client_priority = 0
        client_index = 0
        highest_priority = 0
        i = 0
        waittime = {tv_sec = 0, tv_usec = 7000}
        wt = (struct timeval *) 0x7fffcdfc75a0
        timeout = <value optimized out>
        clientsReadable = {fds_bits = {4294967296, 0 <repeats 15 times>}}
        clientsWritable = {fds_bits = {16367264, 8014112, 21308832, 0, 140736649
262592, 5425772, 32, 32, 0, 13081216, 0, 0, 0, 0, 0, 0}}
        curclient = -1
        selecterr = <value optimized out>
        nready = 1664
        now = <value optimized out>
#1  0x000000000043912a in Dispatch () at dispatch.c:248
        clientReady = (int *) 0x7fffcdfc7600
        result = 0
        client = (ClientPtr) 0xc51a80
        nready = -1
#2  0x0000000000000000 in ?? ()
No symbol table info available.

I am able to reproduce this either by starting a virtual machine within VirtualBox-2.0.2 or by opening a pdf using the acrobat plugin in firefox.

I don't know how Xfce4 is connected with this issue; if needed I will re-install windowmaker and see whether this is reproduceable with it as well

If you need additionial information, please don't hesitate to ask me.

BR,
Dustin

Reproducible: Always

Steps to Reproduce:
1. emerge Xfce4, tightvnc
2. Put the following in your ~/.vnc/xstartup: "startxfce4 &"
3. Start the vncserver session: vncserver :1
4. Connect to this session and do some work. Try e.g. to start a virtual machine in Virtualbox
5. Watch session window disappear; /var/log/message states: "Nov 14 14:50:55 legolas Xvnc[9369]: segfault at 7fffcdfc9000 ip 44927d sp 7fffcdfc7440 error 6 in Xvnc[400000+165000]"

Actual Results:  
Segfault. If this happens while your working on some unsaved stuff, this causes aggravation as well :-/

Expected Results:  
Don't segfault

Portage 2.1.4.5 (default/linux/amd64/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo_dazuko-patch-r7-stable x86_64)
=================================================================
System uname: 2.6.25-gentoo_dazuko-patch-r7-stable x86_64 Intel(R) Core(TM)2 Duo CPU T8100 @ 2.10GHz
Timestamp of tree: Fri, 14 Nov 2008 08:21:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r7
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/bin/mygenkernel /usr/sbin/run-crons /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=nocona -O2 -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distlocks fixpackages metadata-transfer multilib-strict parallel-fetch sandbox sfperms splitdebug strict test unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://pandemonium.tiscali.de/pub/gentoo/                ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/                ftp://gd.tuwien.ac.at/opsys/linux/gentoo/            ftp://gentoo.inode.at/source/           ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/"
LANG="C"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en de"
MAKEOPTS="-j5"
PKGDIR="/home/ftp/binpkg/"
PORTAGE_COMPRESS=""
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=500"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/alon-barlev /usr/portage/local/layman/sunrise /usr/portage/local/layman/science /usr/portage/local/modified /usr/portage/local/own"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 aac aalib accessibility acl acpi alsa amd64 amr amrnb amrr amrwb apm async audacious audiofile bash-completion battery berkdb bindist bl bluetooth branding bzip2 cairo cardbus cdinstall cjk cli cpufreq cracklib crypt css ctype cups dbus dga directfb divx dri dts dvd dvdr dvdread eds encode evo exif extensions fam fbcon fbcondecor fbsplash ffmpeg flac foomaticdb force-cgi-redirect fortran ftp gd gdbm gif gimp glade glibc-omitfp glitz gmedia gmp gnutls gphoto2 gs gsm gstreamer gtk gtkhtml guile hal hddtemp hdf5 iconv icq icu idn ieee1394 imagemagick imap imlib iproute2 isdnlog jack java javascript jikes jpeg jpeg2k kerberos keyscrub kpathsea laptop latex lcms ldap libcaca libnotify libv4l2 libwww live lm_sensors logrotate loop-aes lzo mad memlimit midi mikmod mime mmx mmxext mng motif mp2 mp3 mp4 mpeg mudflap multilib musepack ncurses nls nntp nowin nptl nptlonly nsplugin nvidia ogg opengl openmp opensslcrypto pam pch pcmcia pcre pda pdf perl plotutils png posix ppds pppd print python quicktime readline realmedia reflection rtsp ruby rubytests samba sasl sdl server session simplexml slang sndfile soap sockets sou speex spell spl sse sse2 ssl ssse3 startup-notification stream suhosin svg swat sysfs syslog tcpd tetex tga theora threads tiff truetype unicode usb userlocales v4l v4l2 vcd vim-syntax vim-with-x vorbis wifi winbind wma wmf wmp wxwindows x264 xanim xcomposite xine xinetd xml xorg xpm xsl xulrunner xv xvid xvmc zlib" ALSA_CARDS="hda-intel mpu401" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="fuji ptp2" ELIBC="glibc" INPUT_DEVICES="keyboard mouse ps2mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS_FLAGS




Comment 1


Jeremy Erickson





          2008-12-03 00:22:54 UTC
        

I am having the same problem, only with KDE 3.5.9 instead of Xfce4.

Message in /var/log/messages:
Dec  2 18:34:06 Jeremy-Erickson Xvnc[20632]: segfault at 7fffaf7de000 ip 44b1a6 sp 7fffaf7dc1b0 error 6 in Xvnc[400000+16a000]

emerge --info:
Portage 2.1.4.5 (default/linux/amd64/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r7 x86_64)
=================================================================
System uname: 2.6.25-gentoo-r7 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 5000+
Timestamp of tree: Tue, 02 Dec 2008 23:30:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirrors.tds.net/gentoo ftp://mirrors.tds.net/gentoo http://gentoo.chem.wisc.edu/gentoo/ http://mirrors.acm.cs.rpi.edu/gentoo/"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X aac acpi aim alsa amd64 aotuv artswrappersuid audiofile berkdb bluetooth branding bzip2 cairo cdparanoia cdr cli cracklib crypt cups curl dbus dlloader dri dvd dvdr dvdread emboss encode evo exif expat fam ffmpeg firefox flac foomaticdb fortran ftp gdbm gif glut gnutls gpm gstreamer gtk2 hal iconv idn imagemagick imlib isdnlog java jpeg kde lcms libnotify logrotate mad mbrola midi mikmod mmx mng mozilla mp3 mpeg msn mudflap multilib ncurses nls nptl nptlonly nsplugin ogg oggvorbis opengl openmp oscar pam pcre pda pdf pdflib perl pic png povray ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection samba sasl scanner sdl session sndfile spell spl sse sse2 ssl startup-notification svg sysfs tcltk tcpd tetex theora tiff truetype udev unicode usb utempter vcd vim vim-syntax visualization vorbis wmf xine xml xml2 xorg xscreensaver xv yahoo zeroconf zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Dustin Polke





          2009-03-09 10:47:08 UTC
        

(In reply to comment #1)
> I am having the same problem, only with KDE 3.5.9 instead of Xfce4.

Jeremy,

problem seems to have gone with tightvnc-1.3.10, no segfault so far with Xfce. Could you try that version and give feedback here whether 1.3.10 works for you as well?

BR,
Dustin




Comment 3


Dustin Polke





          2009-03-16 09:57:42 UTC
        

I am using now tightvnc-1.3.10 now for one week with Xfce and did not observe any problems so far.

Dustin




Comment 4


Dustin Polke





          2009-06-02 08:05:50 UTC
        

(In reply to comment #3)
> I am using now tightvnc-1.3.10 now for one week with Xfce and did not observe
> any problems so far.
> 
> Dustin

Up to now, no segfaults anymore with tightvnc-1.3.10-r1. Feel free to consider this bug as FIXED.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

