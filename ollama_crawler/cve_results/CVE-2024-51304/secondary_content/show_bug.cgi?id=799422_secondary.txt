Title: 799422 – media-libs/harfbuzz-2.8.1 fails to build:  No module named 'pygments'
URL: https://bugs.gentoo.org/show_bug.cgi?id=799422

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 799422
media-libs/harfbuzz-2.8.1 fails to build:  No module named 'pygments'
Last modified: 2021-07-01 09:48:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 799422 
      - media-libs/harfbuzz-2.8.1 fails to build:  No module named 'pygments'


Summary:
media-libs/harfbuzz-2.8.1 fails to build:  No module named 'pygments'
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Lars Wendler (Polynomial-C) (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-07-01 05:01 UTC by m.manico





      Modified:
    
2021-07-01 09:48 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



gnome
office
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,104.90 KB,
                text/plain)

            
2021-07-01 06:03 UTC,

            m.manico




Details





emerge info

              (emerge_info,6.86 KB,
                text/plain)

            
2021-07-01 06:03 UTC,

            m.manico




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


m.manico





          2021-07-01 05:01:41 UTC
        

When emerging harfbuzz, emerge fails with:

Building documentation for harfbuzz                              
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-gobject-structs.cc:33: warning: Section hb-gobject is not defined in the harfbuzz-sections.txt file.
./harfbuzz-sections.txt:2: warning: Section has no title and no file.                                                            
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-buffer.cc:641: warning: unknown annotation "Xconstructor" in documentation for hb_buffer_create.
./harfbuzz-sections.txt:185: warning: No declaration found for hb_font_funcs_set_glyph_func.                                         
./harfbuzz-sections.txt:188: warning: No declaration found for hb_ot_layout_table_choose_script.                                     
./harfbuzz-sections.txt:190: warning: No declaration found for hb_ot_tag_from_language.
./harfbuzz-sections.txt:191: warning: No declaration found for hb_ot_tags_from_script.
./harfbuzz-sections.txt:194: warning: No declaration found for hb_ot_var_find_axis.                                                                                                                                                                                       
./harfbuzz-sections.txt:195: warning: No declaration found for hb_ot_var_get_axes.          
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-face.cc:192: warning: unknown annotation "Xconstructor" in documentation for hb_face_create.
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-font.cc:1519: warning: unknown annotation "Xconstructor" in documentation for hb_font_create.
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-font.cc:551: warning: unknown annotation "Xconstructor" in documentation for hb_font_funcs_create.
./harfbuzz-sections.txt:401: warning: No declaration found for hb_graphite2_font_get_gr_font.   
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-map.cc:43: warning: unknown annotation "Xconstructor" in documentation for hb_map_create.
./harfbuzz-sections.txt:463: warning: No declaration found for HB_OT_NAME_ID_INVALID.                                                
./harfbuzz-sections.txt:516: warning: No declaration found for hb_ot_layout_script_find_language.                                                                                                                                                                         
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-set.cc:43: warning: unknown annotation "Xconstructor" in documentation for hb_set_create.
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-shape-plan.cc:173: warning: unknown annotation "Xconstructor" in documentation for hb_shape_plan_create.
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-shape-plan.cc:201: warning: unknown annotation "Xconstructor" in documentation for hb_shape_plan_create2.
/var/tmp/portage/media-libs/harfbuzz-2.8.1/work/harfbuzz-2.8.1/docs/../src/hb-unicode.cc:172: warning: unknown annotation "Xconstructor" in documentation for hb_unicode_funcs_create.                                                                                    
See harfbuzz-undeclared.txt for the list of undeclared symbols.
./harfbuzz-unused.txt:1: warning: 35 unused declarations. They should be added to harfbuzz-sections.txt in the appropriate place.

ERROR: Error in gtkdoc helper script:

ERROR: ['/usr/bin/gtkdoc-fixxref', '--module=harfbuzz', '--module-dir=html'] failed with status 1
Traceback (most recent call last):
  File "/usr/bin/gtkdoc-fixxref", line 32, in <module>
    from gtkdoc import common, config, fixxref
  File "/usr/share/gtk-doc/python/gtkdoc/fixxref.py", line 28, in <module>
    from . import common, highlight
  File "/usr/share/gtk-doc/python/gtkdoc/highlight.py", line 27, in <module>
    from pygments import highlight
ModuleNotFoundError: No module named 'pygments'


pygments is installed though, and I use it in python just fine:

Python 3.9.5 (default, Jun 30 2021, 09:56:59) 
[GCC 10.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from pygments import highlight
>>> 

Any help with figuring out why harfbuzz can not find pygments during build although pygments is installed is welcome.




Comment 1


Sam James









          2021-07-01 05:14:53 UTC
        

Can you attach the full build.log and emerge --info please?




Comment 2


m.manico





          2021-07-01 06:03:07 UTC
        

Created attachment 720429 [details]
build.log

Build log as requested.




Comment 3


m.manico





          2021-07-01 06:03:48 UTC
        

Created attachment 720432 [details]
emerge info

Output of emerge --info as requested.
Sorry for not attaching them right away.




Comment 4


m.manico





          2021-07-01 09:48:29 UTC
        

I rebooted my computer, emerge --sync and emerge update world again.
According to portage logs, harfbuzz now emerged successfully.

I guess I had bad luck and was caught up in some python 3.8 -> 3.9 transition issue the first time.

I am closing this issue as "worksforme". Hope that's fine with everyone.

Thank you for your attention and sorry for the noise.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

