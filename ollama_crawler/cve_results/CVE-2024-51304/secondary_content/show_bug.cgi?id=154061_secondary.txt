Title: 154061 – mirror returning results for non-existant distfiles
URL: https://bugs.gentoo.org/show_bug.cgi?id=154061

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 154061
mirror returning results for non-existant distfiles
Last modified: 2006-12-29 12:45:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 154061 
      - mirror returning results for non-existant distfiles


Summary:
mirror returning results for non-existant distfiles
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Mirrors




Classification:

Unclassified




Component:

Server Problem

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mirror Admins








URL:



http://gentoo.localhost.net.ar/




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-04 11:48 UTC by Duncan Coutts (RETIRED)





      Modified:
    
2006-12-29 12:45 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Duncan Coutts (RETIRED)






          2006-11-04 11:48:33 UTC
        

The gentoo.localhost.net.ar mirror is returning HTTP 300 results for distfiles that do not exist. This breaks downloading for packages that are not yet in portage (eg in overlays).

Here is an example:

In the Haskell overlay we have dev-lang/ghc-6.6. Currently there are earlier versions in portage. We had a user report that when testing the ebuild in our overlay they couldn't download the file. It turned out that this was because they had the above mirror in their mirror list and instead of failing like most mirrors do when files are not present, it returned a 'helpful' page suggesting similar alternatives (ie earlier versions that are in distfiles):

http://gentoo.localhost.net.ar/distfiles/ghc-6.6-src.tar.bz2

The mirror returns HTTP code 300:

>>> Downloading 'http://gentoo.localhost.net.ar/distfiles/ghc-6.6-src.tar.bz2'
--19:06:35--  http://gentoo.localhost.net.ar/distfiles/ghc-6.6-src.tar.bz2
           => `/usr/portage/distfiles/ghc-6.6-src.tar.bz2'
Resolving gentoo.localhost.net.ar... 200.43.193.199
Connecting to gentoo.localhost.net.ar|200.43.193.199|:80... connected.
HTTP request sent, awaiting response... 300 Multiple Choices
Length: unspecified [text/html]

    [ <=>                         ] 787           --.--K/s

19:06:35 (57.73 MB/s) - `/usr/portage/distfiles/ghc-6.6-src.tar.bz2' saved [787]

This of course is extremely unhelpful since our ebuild fetch interprets this as a success and downloads the .html file. Then of course the checksums don't match etc. Of course with nice mirrors, the downloads from the mirrors fail and then ebuild fetch falls back to the upstream SRC_URI which then works.

So either this mirror is misconfigured or we should make ebuild fetch use wget in a way that means that this error is treated as download failure, not success.




Comment 1


Jeffrey Forman (RETIRED)






          2006-12-29 12:45:35 UTC
        

I just checked this mirror, and it seems to be functioning properly and on sync.

Please reopen if this problem persists.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

