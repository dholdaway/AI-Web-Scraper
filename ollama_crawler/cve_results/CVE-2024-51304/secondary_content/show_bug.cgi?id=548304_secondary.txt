Title: 548304 – net-analyzer/icinga2-2.3.4::gentoo (emerge caused: Warning: end of file not at end of a line; newline inserted)
URL: https://bugs.gentoo.org/show_bug.cgi?id=548304

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 548304
net-analyzer/icinga2-2.3.4::gentoo (emerge caused: Warning: end of file not at end of a line; newline inserted)
Last modified: 2015-05-04 03:40:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 548304 
      - net-analyzer/icinga2-2.3.4::gentoo (emerge caused: Warning: end of file not at end of a line; newline inserted)


Summary:
net-analyzer/icinga2-2.3.4::gentoo (emerge caused: Warning: end of file not a...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Matthew Thode ( prometheanfire )








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-05-01 09:13 UTC by Sebastian Wieseler





      Modified:
    
2015-05-04 03:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sebastian Wieseler





          2015-05-01 09:13:28 UTC
        

emerge fails with:
{standard input}: Assembler messages:
{standard input}:21581: Warning: end of file not at end of a line; newline inserted
{standard input}:22043: Error: unknown pseudo-op: `.cf'
{standard input}: Error: open CFI at the end of file; missing .cfi_endproc directive
x86_64-pc-linux-gnu-g++: internal compiler error: Killed (program cc1plus)


Reproducible: Always

Steps to Reproduce:
1.emerge icinga2
2.[ebuild     U ~] net-analyzer/icinga2-2.3.4::gentoo [2.2.3-r1::gentoo] USE="apache2 classicui mysql plugins postgres vim-syntax -minimal% -nano-syntax" 0 KiB

Actual Results:  
[ 12%] Building CXX object lib/base/CMakeFiles/base.dir/initialize.cpp.o
cd /var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4_build/lib/base && /usr/bin/x86_64-pc-linux-gnu-g++  -DI2_BASE_BUILD  -DNDEBUG -O2 -pipe  -g -fPIC -I/var/tmp/portage/net-analyzer/icinga2-
2.3.4/work/icinga2-2.3.4_build/third-party/yajl/include -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4 -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4/lib -I/var/tmp/por
tage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4_build -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4_build/lib -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4/third-p
arty/execvpe -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4/third-party/mmatch -I/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4/third-party/socketpair    -o CMakeFiles/ba
se.dir/initialize.cpp.o -c /var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4/lib/base/initialize.cpp
{standard input}: Assembler messages:
{standard input}:21581: Warning: end of file not at end of a line; newline inserted
{standard input}:22043: Error: unknown pseudo-op: `.cf'
{standard input}: Error: open CFI at the end of file; missing .cfi_endproc directive
x86_64-pc-linux-gnu-g++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <https://bugs.gentoo.org/> for instructions.
lib/base/CMakeFiles/base.dir/build.make:401: recipe for target 'lib/base/CMakeFiles/base.dir/dynamictype.cpp.o' failed
make[2]: *** [lib/base/CMakeFiles/base.dir/dynamictype.cpp.o] Error 4
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory '/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4_build'
CMakeFiles/Makefile2:1382: recipe for target 'lib/base/CMakeFiles/base.dir/all' failed
make[1]: *** [lib/base/CMakeFiles/base.dir/all] Error 2
make[1]: Leaving directory '/var/tmp/portage/net-analyzer/icinga2-2.3.4/work/icinga2-2.3.4_build'
Makefile:149: recipe for target 'all' failed
make: *** [all] Error 2
 * ERROR: net-analyzer/icinga2-2.3.4::gentoo failed (compile phase):
 *   emake failed


emerge --info '=net-analyzer/icinga2-2.3.4::gentoo'
Portage 2.2.18 (python 2.7.9-final-0, default/linux/amd64/13.0, gcc-4.8.4, glibc-2.20-r2, 3.17.8-gentoo-r1 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-3.17.8-gentoo-r1-x86_64-Intel-R-_Xeon-R-_CPU_E5-2643_v3_@_3.40GHz-with-gentoo-2.2
KiB Mem:     2052580 total,   1424412 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Wed, 29 Apr 2015 01:30:01 +0000
sh bash 4.2_p53
ld GNU ld (Gentoo 2.24 p1.4) 2.24
app-shells/bash:          4.2_p53::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.9-r2::gentoo, 3.3.5-r1::gentoo, 3.4.1::gentoo
dev-util/cmake:           2.8.12.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.13.11::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.69::gentoo
sys-devel/automake:       1.13.4::gentoo
sys-devel/binutils:       2.24-r3::gentoo
sys-devel/gcc:            4.8.4::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="acl amd64 apache2 berkdb bindist bzip2 classicui cli cracklib crypt curl cxx dri fortran gd gdbm gnutls iconv ipv6 mmx mmxext modules multilib mysql nagios-dns nagios-game nagios-ntp nagios-ping nagios-ssh ncurses nls nptl openmp pam pcre pdo postgres python3_4 radius readline samba session smart snmp sqlite sse sse2 ssh ssl sudo suid tcpd unicode zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="fbdev glint intel mach64 mga nouveau nv r128 radeon savage sis tdfx trident vesa via vmware dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON


emerge -pqv '=net-analyzer/icinga2-2.3.4::gentoo'
[ebuild     U ] net-analyzer/icinga2-2.3.4 [2.2.3-r1] USE="apache2 classicui mysql plugins postgres vim-syntax -minimal% -nano-syntax" 



Thanks for somebody looking into this issue!




Comment 1


Rafał Mużyło





          2015-05-01 10:39:10 UTC
        

This kind of error under such conservative CFLAGS usually means you've ran out of disk space / memory.




Comment 2


Matthew Thode ( prometheanfire )









          2015-05-03 05:07:05 UTC
        

can you check your dmesg to see if you ran out of ram or disk space?




Comment 3


Sebastian Wieseler





          2015-05-04 02:32:50 UTC
        

You are right. Seems to be a mem problem. But I don't understand why:

[  199.686702] Out of memory: Kill process 4293 (cc1plus) score 247 or sacrifice child
[  199.686704] Killed process 4293 (cc1plus) total-vm:559040kB, anon-rss:506360kB, file-rss:936kB


# free
             total       used       free     shared    buffers     cached
Mem:       2052580     251140    1801440      10808      11764      77092
-/+ buffers/cache:     162284    1890296
Swap:            0          0          0




[  199.686325] Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 04/14/2014
[  199.686327]  0000000000000000 ffff88007c7ef908 ffffffff816975dd ffff88007c933db0
[  199.686331]  ffff88007c7ef968 ffffffff81694a6f ffff880000000015 ffffffff81c381e0
[  199.686334]  0000000000000001 ffff880070240cc0 0000000000000206 ffff88005d898000
[  199.686338] Call Trace:
[  199.686349]  [<ffffffff816975dd>] dump_stack+0x45/0x56
[  199.686354]  [<ffffffff81694a6f>] dump_header.isra.10+0x70/0x193
[  199.686362]  [<ffffffff810f8e09>] oom_kill_process+0x1f9/0x350
[  199.686368]  [<ffffffff81273a30>] ? security_capable_noaudit+0x10/0x20
[  199.686375]  [<ffffffff8104cc59>] ? has_capability_noaudit+0x19/0x20
[  199.686380]  [<ffffffff810f958a>] out_of_memory+0x48a/0x4c0
[  199.686384]  [<ffffffff810fe827>] __alloc_pages_nodemask+0x7f7/0x9c0
[  199.686391]  [<ffffffff811384f3>] alloc_pages_current+0xa3/0x170
[  199.686395]  [<ffffffff810f5af7>] __page_cache_alloc+0x97/0xb0
[  199.686399]  [<ffffffff810f5f9b>] pagecache_get_page+0x6b/0x1e0
[  199.686403]  [<ffffffff810f613a>] grab_cache_page_write_begin+0x2a/0x40
[  199.686408]  [<ffffffff811bc89c>] ext4_da_write_begin+0x9c/0x300
[  199.686412]  [<ffffffff810f5709>] generic_perform_write+0xb9/0x1b0
[  199.686417]  [<ffffffff810f75e7>] __generic_file_write_iter+0x157/0x340
[  199.686420]  [<ffffffff811b27a0>] ext4_file_write_iter+0xf0/0x3a0
[  199.686426]  [<ffffffff811459fc>] new_sync_write+0x7c/0xb0
[  199.686430]  [<ffffffff81146182>] vfs_write+0xb2/0x1f0
[  199.686435]  [<ffffffff81146e4a>] SyS_pwrite64+0x6a/0xa0
[  199.686441]  [<ffffffff8169f5d2>] system_call_fastpath+0x16/0x1b
[  199.686443] Mem-Info:
[  199.686445] Node 0 DMA per-cpu:
[  199.686448] CPU    0: hi:    0, btch:   1 usd:   0
[  199.686449] CPU    1: hi:    0, btch:   1 usd:   0
[  199.686451] CPU    2: hi:    0, btch:   1 usd:   0
[  199.686452] CPU    3: hi:    0, btch:   1 usd:   0
[  199.686454] Node 0 DMA32 per-cpu:
[  199.686456] CPU    0: hi:  186, btch:  31 usd:  11
[  199.686458] CPU    1: hi:  186, btch:  31 usd:   0
[  199.686459] CPU    2: hi:  186, btch:  31 usd:   0
[  199.686461] CPU    3: hi:  186, btch:  31 usd: 175
[  199.686467] active_anon:490782 inactive_anon:2688 isolated_anon:0
 active_file:52 inactive_file:106 isolated_file:0
 unevictable:3674 dirty:13 writeback:0 unstable:0
 free:3879 slab_reclaimable:2337 slab_unreclaimable:3038
 mapped:4007 shmem:2702 pagetables:2935 bounce:0
 free_cma:0
[  199.686471] Node 0 DMA free:7988kB min:44kB low:52kB high:64kB active_anon:7000kB inactive_anon:156kB active_file:0kB inactive_file:0kB unevictable:264kB isolated(anon):0kB isolated(file):0kB present:15992kB managed:15908kB mlocked:264kB dirty:0kB writeback:0kB mapped:224kB shmem:156kB slab_reclaimable:104kB slab_unreclaimable:108kB kernel_stack:48kB pagetables:152kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes
[  199.686478] lowmem_reserve[]: 0 1984 1984 1984
[  199.686483] Node 0 DMA32 free:7528kB min:5676kB low:7092kB high:8512kB active_anon:1956128kB inactive_anon:10596kB active_file:208kB inactive_file:424kB unevictable:14432kB isolated(anon):0kB isolated(file):0kB present:2080704kB managed:2036672kB mlocked:14436kB dirty:52kB writeback:0kB mapped:15804kB shmem:10652kB slab_reclaimable:9244kB slab_unreclaimable:12044kB kernel_stack:3632kB pagetables:11588kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:3952 all_unreclaimable? yes
[  199.686489] lowmem_reserve[]: 0 0 0 0
[  199.686493] Node 0 DMA: 8*4kB (UEM) 5*8kB (UEM) 5*16kB (UEM) 3*32kB (UE) 1*64kB (M) 2*128kB (UM) 1*256kB (E) 2*512kB (EM) 2*1024kB (UE) 2*2048kB (ER) 0*4096kB = 7992kB
[  199.686509] Node 0 DMA32: 867*4kB (UEM) 50*8kB (EM) 2*16kB (MR) 1*32kB (R) 0*64kB 0*128kB 1*256kB (R) 1*512kB (R) 1*1024kB (R) 1*2048kB (R) 0*4096kB = 7772kB
[  199.686523] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB
[  199.686525] 4225 total pagecache pages
[  199.686527] 0 pages in swap cache
[  199.686529] Swap cache stats: add 0, delete 0, find 0/0
[  199.686531] Free swap  = 0kB
[  199.686532] Total swap = 0kB
[  199.686533] 524174 pages RAM
[  199.686535] 0 pages HighMem/MovableOnly
[  199.686536] 11008 pages reserved


2 Gig RAM is not enough for compilation? :/




Comment 4


Matthew Thode ( prometheanfire )









          2015-05-04 03:00:17 UTC
        

icinga2 simply requires a bunch of ram.  2G might be just enough but the system I compile on has 3 or 4G of ram.  Do you get the same error with 2.3.3 as with 2.3.4?  I did change an option (UNITY_BUILD) to be off to reduce ram usage in 2.3.4 iirc.




Comment 5


Sebastian Wieseler





          2015-05-04 03:40:58 UTC
        


I had no problem with 2.3.4 IIRC.
Nevertheless… I added now 4 GB of SWAP and now the compilation worked fine… so, yea, oh well… thanks for your help! :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

