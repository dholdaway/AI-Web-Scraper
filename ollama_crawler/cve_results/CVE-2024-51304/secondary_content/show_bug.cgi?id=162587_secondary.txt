Title: 162587 – net-nds/openldap-2.3.32 fails during test phase
URL: https://bugs.gentoo.org/show_bug.cgi?id=162587

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 162587
net-nds/openldap-2.3.32 fails during test phase
Last modified: 2007-04-05 19:11:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 162587 
      - net-nds/openldap-2.3.32 fails during test phase


Summary:
net-nds/openldap-2.3.32 fails during test phase
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo LDAP project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-17 21:28 UTC by Sandro Bonazzola (RETIRED)





      Modified:
    
2007-04-05 19:11 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sandro Bonazzola (RETIRED)






          2007-01-17 21:28:54 UTC
        

>>> Source compiled.
 * Doing tests
make[1]: Entering directory `/var/tmp/portage/net-nds/openldap-2.3.32/work/openldap-2.3.32/tests'
Initiating LDAP tests for BDB...
Running ./scripts/all...
>>>>> Executing all LDAP tests for bdb
>>>>> Starting test000-rootdse ...
running defines.sh
Starting slapd on TCP/IP port 9011...
Using ldapsearch to retrieve the root DSE...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
ldap_result: Can't contact LDAP server (-1)
>>>>> Test failed
>>>>> ./scripts/test000-rootdse failed (exit 1)
make[1]: *** [bdb-yes] Error 1
make[1]: Leaving directory `/var/tmp/portage/net-nds/openldap-2.3.32/work/openldap-2.3.32/tests'
make: *** [tests] Error 2




Comment 1


Sandro Bonazzola (RETIRED)






          2007-01-17 21:29:24 UTC
        

# emerge --info
Portage 2.1.2 (default-linux/amd64/2006.1, gcc-4.1.1, glibc-2.5-r0, 2.6.19-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.19-gentoo-r3 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.9
Timestamp of tree: Wed, 17 Jan 2007 16:50:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31-r3
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.19.2-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS=" -march=athlon64 -O2 -pipe "
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/jetty/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS=" -march=athlon64 -O2 -pipe "
DISTDIR="/home/ftp/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y"
FEATURES="autoconfig ccache collision-protect cvs distlocks elog java-strict metadata-transfer multilib-strict sandbox sfperms sign strict stricter test userfetch userpriv"
GENTOO_MIRRORS="http://mirror.switch.ch/ftp/mirror/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/ "
LANG="it_IT.utf8"
LINGUAS="it"
PKGDIR="/home/ftp/packages"
PORTAGE_RSYNC_EXTRA_OPTS=" --timeout=400 --progress "
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="7zip X a52 aac acl acpi alsa amd64 amr aoss apache2 arts asf audiofile avahi bash-completion berkdb bitmap-fonts bl bzip2 cairo caps ccache cdb cddb cdparanoia cdr chroot cli cpudetection cracklib crypt css cups curl dba dbus devhelp dga directfb djvu dlloader dmi dovecot-sasl dri dts dv dvd dvdr dvdread dynagraph encode epydoc erandom esd exif expat extrafilters fame ffmpeg firefox flac fltk foomaticdb gd gdbm ggi gif gimp gimpprint glibc-omitfp glut gmp gnokii gnome gnutls gphoto2 gpm graphviz gtk gtkhtml guile hal howl-compat iconv idn ieee1394 imagemagick imlib ipv6 isdnlog ithreads java javacomm jbig jikes jpeg jpeg2k justify kde kdeenablefinal kdehiddenvisibility lcms ldap libcaca libg++ libnotify linuxthreads-tls lm_sensors logitech-mouse logrotate lzo mad mailwrapper matroska mbox mdb mhash mikmod mjpeg mmap mng motif mozdevelop mozsvg mp3 mpeg mpm-worker msn musepack musicbrainz mysql ncurses nfs nls nptl nptlonly nsplugin numeric nvidia odbc offensive ogg on-the-fly-crypt openexr opengl oss pam pcre pdf perl php png povray ppds pppd pulseaudio python qa qt3 qt3support qt4 quicktime rdesktop readline reflection restrict-javascript rtc samba scanner sdl session slang smime smp sndfile snmp speex spell spl ssl startup-notification subversion svg sysfs syslog tcltk tcpd test tetex tga theora threads tidy tiff timidity tk truetype truetype-fonts type1-fonts udev unicode usb userlocales utempter v4l v4l2 vcd vda vorbis vorbis-psy wma wmf wmp xcomposite xforms xine xinerama xml xorg xpm xscreensaver xv xvid xvmc yv12 zeroconf zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="mouse evdev keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="it" USERLAND="GNU" VIDEO_CARDS="nvidia nv"
Unset:  CTARGET, INSTALL_MASK, LC_ALL, LDFLAGS, MAKEOPTS





Comment 2


Markus Ullmann (RETIRED)






          2007-01-19 20:07:21 UTC
        

please re-test with 2.3.33




Comment 3


Sandro Bonazzola (RETIRED)






          2007-01-20 13:55:43 UTC
        

Still present the same problem.

>>> Source compiled.
 * Doing tests
make[1]: Entering directory `/var/tmp/portage/net-nds/openldap-2.3.33/work/openl
dap-2.3.33/tests'
Initiating LDAP tests for BDB...
Running ./scripts/all...
>>>>> Executing all LDAP tests for bdb
>>>>> Starting test000-rootdse ...
running defines.sh
Starting slapd on TCP/IP port 9011...
Using ldapsearch to retrieve the root DSE...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
Waiting 5 seconds for slapd to start...
ldap_result: Can't contact LDAP server (-1)
>>>>> Test failed
>>>>> ./scripts/test000-rootdse failed (exit 1)
make[1]: *** [bdb-yes] Error 1
make[1]: Leaving directory `/var/tmp/portage/net-nds/openldap-2.3.33/work/openld                                                                                                  ap-2.3.33/tests'
make: *** [tests] Error 2




Comment 4


Markus Ullmann (RETIRED)






          2007-01-20 16:13:07 UTC
        

can you install without testing and then run it manually to see what fails as it doesn't seem to even start the first time





Comment 5


Sandro Bonazzola (RETIRED)






          2007-01-22 13:16:18 UTC
        

(In reply to comment #4)
> can you install without testing and then run it manually to see what fails as
> it doesn't seem to even start the first time
> 

# /etc/init.d/slapd start
 * Caching service dependencies ...                                                                                                                                         [ ok ]
 * Starting ldap-server ...
/etc/openldap/slapd.conf: line 56: "checkpoint" must occur after "suffix".

slapd.conf is a copy of slapd.conf.default provided by the package itself.

Tryed unmerging openldap and removing /etc/openldap, same test error.





Comment 6


Markus Ullmann (RETIRED)






          2007-04-05 19:11:17 UTC
        

As discussed on irc, local hickup









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

