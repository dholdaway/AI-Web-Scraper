Title: 269276 – dev-games/flatzebra-0.1.2: Library Linkflags are missing.
URL: https://bugs.gentoo.org/show_bug.cgi?id=269276

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 269276
dev-games/flatzebra-0.1.2: Library Linkflags are missing.
Last modified: 2009-05-16 15:28:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 269276 
      - dev-games/flatzebra-0.1.2: Library Linkflags are missing.


Summary:
dev-games/flatzebra-0.1.2: Library Linkflags are missing.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-10 16:00 UTC by Martin Väth





      Modified:
    
2009-05-16 15:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sarrazip









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Väth





          2009-05-10 16:00:05 UTC
        

Since gcc-4.3 and gcc-4.4 default to -Wl,--as-needed,
programs using flatzebra fail to link, because flatzebra dependencies
are not specified in the .la file. For example, burgerspace-1.8.3 fails to link
with errors like

usr/lib/gcc/x86_64-pc-linux-gnu/4.4.0/../../../../lib64/libflatzebra-0.1.so:
undefined reference to `Mix_CloseAudio'

The problem can be solved by adding -lSDL -lSDL_image -lSDL_mixer
to the CFLAGS/CXXFLAGS for the compilation of flatzebra.
(A more appropriate solution would of course be to patch the build system to
add the above three flags to the LIBS variable of some Makefile.am, but I
did not inspect the build system).




Comment 1


Mr. Bones. (RETIRED)






          2009-05-11 21:44:02 UTC
        

open a bug that shows the failure to link.  I'm using gcc43 and flatzebra builds and installs fine and so does burgerspace and afternoonstalker which uses it.




Comment 2


Martin Väth





          2009-05-12 08:38:31 UTC
        

I observed now that the link bug only occurs if -Wl,--as-needed is specified
explicitly in the LDFLAGS - no idea why the implicit definition does not apply.
(Perhaps this is also a speciality of gcc-4.4 which I am using, although I
observed no other problems of this type with it after recompiling my whole
system with it - I even don't have gcc-4.3 installed anymore).

bug 269513 contains the link error for burgerspace.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

