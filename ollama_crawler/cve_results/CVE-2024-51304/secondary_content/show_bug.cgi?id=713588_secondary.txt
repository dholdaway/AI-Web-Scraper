Title: 713588 – =net-misc/netifrc-0.7.1 link is down after restart
URL: https://bugs.gentoo.org/show_bug.cgi?id=713588

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 713588
=net-misc/netifrc-0.7.1 link is down after restart
Last modified: 2020-10-21 12:58:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 713588 
      - =net-misc/netifrc-0.7.1 link is down after restart


Summary:
=net-misc/netifrc-0.7.1 link is down after restart
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Hosted Projects




Classification:

Unclassified




Component:

netifrc

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

netifrc Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-03-20 12:38 UTC by Vladimir Varlamov





      Modified:
    
2020-10-21 12:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



romans.heimanis









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vladimir Varlamov





          2020-03-20 12:38:32 UTC
        

Link down after restart service. It seems like you need some timeout waiting interface to up. 
Some errors on 0.7.1 and 0.5.1




Reproducible: Always




# cat /etc/conf.d/net
config_net0="192.168.99.128/24"
routes_net0="default via 192.168.99.98"

# /etc/init.d/net.net0 restart
 * Bringing down interface net0
 * Bringing up interface net0
 *   192.168.99.128/24 ...                                                                                                                        [ ok ]
 *   Adding routes
 *     default via 192.168.99.98 ...
Error: Nexthop has invalid gateway.  

# ip l
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: net0: <BROADCAST,MULTICAST,PROMISC> mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000
    link/ether 90:1b:0e:02:8e:7d brd ff:ff:ff:ff:ff:ff

# /etc/init.d/net.net0 start
 * WARNING: net.net0 has already been started
support /etc/init.d # /etc/init.d/net.net0 zap
 * Manually resetting net.net0 to stopped state
support /etc/init.d # /etc/init.d/net.net0 start
 * Bringing up interface net0
 *   192.168.99.128/24 ...
RTNETLINK answers: File exists
 *     Address 192.168.99.128/24 already existed!
 *     2: net0: <NO-CARRIER,BROADCAST,MULTICAST,PROMISC,UP> mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000 inet 192.168.99.128/24 brd 192.168.99.255 scope global net0 valid_lft forever preferred_lft forever                                                                              [ ok ]
 *   Adding routes
 *     default via 192.168.99.98 ...   
            
# ip l
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: net0: <BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether 90:1b:0e:02:8e:7d brd ff:ff:ff:ff:ff:ff




Comment 1


BigBug





          2020-10-21 11:31:10 UTC
        

Maybe it's related to #547942 ( https://bugs.gentoo.org/547942 )?




Comment 2


Vladimir Varlamov





          2020-10-21 12:58:11 UTC
        

the problem disappeared after updating from 4.19 to 5.8









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

