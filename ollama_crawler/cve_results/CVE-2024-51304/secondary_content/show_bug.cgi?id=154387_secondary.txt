Title: 154387 – parallel startup does not work since baselayout-1.12.2
URL: https://bugs.gentoo.org/show_bug.cgi?id=154387

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 154387
parallel startup does not work since baselayout-1.12.2
Last modified: 2006-11-09 07:02:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 154387 
      - parallel startup does not work since baselayout-1.12.2


Summary:
parallel startup does not work since baselayout-1.12.2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-07 10:44 UTC by gringo





      Modified:
    
2006-11-09 07:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


gringo





          2006-11-07 10:44:07 UTC
        

Hi all, 

since baselayout-1.12.2 if RC_PARALLEL_STARTUP is set, boot stalls on a random service. Ussual offenders are smartd, hald, alsa and privoxy, but as said, it hangs on another one if those are removed. Latest 1.13 has this problem too.

emerge --info

Portage 2.1.2_rc1-r4 (default-linux/amd64/2006.1/desktop, gcc-4.1.1/amd64-vanilla, glibc-2.5.90.20061022-r0, 2.6.18-rc4-fent1 x86_64)
=================================================================
System uname: 2.6.18-rc4-fent1 x86_64 AMD Opteron(tm) Processor 242
Gentoo Base System version 1.13.0_alpha5
Last Sync: Tue, 07 Nov 2006 18:00:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17.50.0.6
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -fno-ident"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe -fno-ident"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks metadata-transfer parallel-fetch prelink sandbox sfperms strict"
GENTOO_MIRRORS="http://cesium.di.uminho.pt/pub/gentoo/ http://darkstar.ist.utl.pt/gentoo/ http://gentoo.inode.at/ http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="es_ES@euro"
LC_ALL="es_ES@euro"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=both"
LINGUAS="es es_ES"
MAKEOPTS="-j12 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlay /usr/portage/local/layman/sunrise /usr/portage/local/layman/xeffects /usr/portage/local/layman/toolchain_overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac aalib acl acpi alsa bash-completion berkdb bitmap-fonts cairo cdr cdrw cli cracklib crypt cups dbus dga dlloader dri dvd dvdr dvdread elibc_glibc emboss encode fam fbcon ffmpeg firefox fortran gdbm gif glitz gnome gpm gstreamer gtk gtk2 hal hotplug iconv initng_plugins_also initng_plugins_bash_launcher initng_plugins_chdir initng_plugins_chroot initng_plugins_conflict initng_plugins_cpout initng_plugins_critical initng_plugins_cron initng_plugins_daemon initng_plugins_dev initng_plugins_dllaunch initng_plugins_envparser initng_plugins_find initng_plugins_fstat initng_plugins_history initng_plugins_idleprobe initng_plugins_initctl initng_plugins_interactive initng_plugins_iparser initng_plugins_last initng_plugins_limit initng_plugins_logfile initng_plugins_netprobe initng_plugins_ngc4 initng_plugins_pause initng_plugins_pidfile initng_plugins_provide initng_plugins_reload initng_plugins_renice initng_plugins_rlparser initng_plugins_simple_launcher initng_plugins_stcmd initng_plugins_stdout initng_plugins_suid initng_plugins_syncron initng_plugins_syslog initng_plugins_unneeded input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog ithreads java jpeg kde kdeenablefinal kdehiddenvisibility kernel_linux ldap libg++ linguas_es linguas_es_ES mad maildir mikmod mp3 mpeg ncurses nls nptl nptlonly nsplugin nvidia offensive ogg oggvorbis opengl pam pascal pcre perl pic png ppds pppd python qt3 qt4 quicktime readline reflection sasl sdl session spell spl ssl svg tcpd threads tiff truetype truetype-fonts type1-fonts udev unicode userland_GNU vcd video_cards_nv video_cards_nvidia vorbis x264 xml xorg xosd xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_RSYNC_EXTRA_OPTS

thanks !




Comment 1


Roy Marples (RETIRED)






          2006-11-07 12:33:50 UTC
        

Let's deal with 1.13 :)
If you set RC_COLDPLUG="no" in /etc/conf.d/rc and remove all net.* scripts from your runlevels except for net.lo, does it still hang on reboot?




Comment 2


gringo





          2006-11-08 12:53:17 UTC
        

(In reply to comment #1)

yep, removing the net.* scripts did the trick.

I guessed RC_HOTPLUG doesnt matter here because we have network support compiled in for both ethernets. I tried anyways with RC_HOTPLUG and RC_PARALLEL_STARTUP set and it booted fine three or four times now.

thanks !




Comment 3


Roy Marples (RETIRED)






          2006-11-09 07:02:33 UTC
        

wfm









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

