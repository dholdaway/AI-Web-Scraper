Title: 287969 – dev-java/tomcat-servlet-api-5.5.27-r1 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=287969

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 287969
dev-java/tomcat-servlet-api-5.5.27-r1 fails to build
Last modified: 2009-11-03 00:01:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 287969 
      - dev-java/tomcat-servlet-api-5.5.27-r1 fails to build


Summary:
dev-java/tomcat-servlet-api-5.5.27-r1 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Java

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

290476

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2009-10-06 22:11 UTC by a_tevelev





      Modified:
    
2009-11-03 00:01 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



python









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,3.79 KB,
                text/plain)

            
2009-10-06 22:11 UTC,

            a_tevelev




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


a_tevelev





          2009-10-06 22:11:05 UTC
        

# emerge -uv dev-java/tomcat-servlet-api

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] dev-java/tomcat-servlet-api-5.5.27-r1 [5.5.27] USE="doc source (-java5%*)" 0 kB

Total: 1 package (1 upgrade), Size of downloads: 0 kB


>>> Verifying ebuild manifests

>>> Emerging (1 of 1) dev-java/tomcat-servlet-api-5.5.27-r1
 * apache-tomcat-5.5.27-src.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                   [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                 [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                               [ ok ]
 * Using: sun-jdk-1.6
>>> Unpacking source...
>>> Unpacking apache-tomcat-5.5.27-src.tar.gz to /tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/work
>>> Source unpacked in /tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/work
>>> Compiling source in /tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/work/apache-tomcat-5.5.27-src/servletapi ...
Rewriting attributes
Traceback (most recent call last):
  File "/usr/lib64/javatoolkit/bin/xml-rewrite-3.py", line 30, in <module>
    from javatoolkit.xml.DomRewriter import DomRewriter
ImportError: No module named javatoolkit.xml.DomRewriter
 * If the output above contains:
 * ImportError:
 * /usr/lib/python2.4/site-packages/_xmlplus/parsers/pyexpat.so:
 * undefined symbol: PyUnicodeUCS2_DecodeUTF8
 * Try re-emerging dev-python/pyxml
 *
 * ERROR: dev-java/tomcat-servlet-api-5.5.27-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4417:  Called eant 'jar' 'javadoc' 'examples' '-f' 'jsr154/build.xml'
 *             environment, line  902:  Called java-ant-2_src_configure
 *             environment, line 2234:  Called java-ant_bsfix
 *             environment, line 2256:  Called java-ant_bsfix_files './jsr152/build.xml' './jsr154/build.xml'
 *             environment, line 2351:  Called _bsfix_die 'xml-rewrite2 failed: ./jsr154/build.xml'
 *             environment, line  309:  Called die
 * The specific snippet of code:
 *           die ${1} " Look at the eerror message above";
 *  The die message:
 *   xml-rewrite2 failed: ./jsr154/build.xml  Look at the eerror message above
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/temp/build.log'.
 * The ebuild environment file is located at '/tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/temp/environment'.
 *
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.16"
JAVACFLAGS="-source 1.5 -target 1.5" COMPILER=""
and of course, the output of emerge --info

>>> Failed to emerge dev-java/tomcat-servlet-api-5.5.27-r1, Log file:

>>>  '/tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/temp/build.log'

 * Messages for package dev-java/tomcat-servlet-api-5.5.27-r1:

 * Using: sun-jdk-1.6
 * If the output above contains:
 * ImportError:
 * /usr/lib/python2.4/site-packages/_xmlplus/parsers/pyexpat.so:
 * undefined symbol: PyUnicodeUCS2_DecodeUTF8
 * Try re-emerging dev-python/pyxml
 *
 * ERROR: dev-java/tomcat-servlet-api-5.5.27-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4417:  Called eant 'jar' 'javadoc' 'examples' '-f' 'jsr154/build.xml'
 *             environment, line  902:  Called java-ant-2_src_configure
 *             environment, line 2234:  Called java-ant_bsfix
 *             environment, line 2256:  Called java-ant_bsfix_files './jsr152/build.xml' './jsr154/build.xml'
 *             environment, line 2351:  Called _bsfix_die 'xml-rewrite2 failed: ./jsr154/build.xml'
 *             environment, line  309:  Called die
 * The specific snippet of code:
 *           die ${1} " Look at the eerror message above";
 *  The die message:
 *   xml-rewrite2 failed: ./jsr154/build.xml  Look at the eerror message above
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/temp/build.log'.
 * The ebuild environment file is located at '/tmp/portage/dev-java/tomcat-servlet-api-5.5.27-r1/temp/environment'.




Comment 1


a_tevelev





          2009-10-06 22:11:44 UTC
        

Created attachment 206267 [details]
emerge --info




Comment 2


Vlastimil Babka (Caster) (RETIRED)






          2009-10-08 08:15:07 UTC
        

Run python-updater?




Comment 3


a_tevelev





          2009-10-10 18:02:13 UTC
        

Re-emerged dev-python/pyxml. Ran python-updater.

Still the error:

 * Using: sun-jdk-1.6
 * If the output above contains:
 * ImportError:
 * /usr/lib/python2.4/site-packages/_xmlplus/parsers/pyexpat.so:
 * undefined symbol: PyUnicodeUCS2_DecodeUTF8
 * Try re-emerging dev-python/pyxml
 *
 * ERROR: dev-java/tomcat-servlet-api-5.5.27-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4436:  Called eant 'jar' 'javadoc' 'examples' '-f' 'jsr154/build.xml'
 *             environment, line  904:  Called java-ant-2_src_configure
 *             environment, line 2253:  Called java-ant_bsfix
 *             environment, line 2275:  Called java-ant_bsfix_files './jsr152/build.xml' './jsr154/build.xml'
 *             environment, line 2370:  Called _bsfix_die 'xml-rewrite2 failed: ./jsr154/build.xml'
 *             environment, line  309:  Called die




Comment 4


Vlastimil Babka (Caster) (RETIRED)






          2009-11-01 21:06:03 UTC
        

Please post emerge --info




Comment 5


a_tevelev





          2009-11-02 11:49:43 UTC
        

emerge --info has posted from the beginning - 2009-10-06 22:11:44.

Thank you!




Comment 6


Vlastimil Babka (Caster) (RETIRED)






          2009-11-02 20:46:11 UTC
        

Your emerge info says you have python 2.6 but your error contains path in python 2.4. Looks like python updater failed to do its job? CCing python for advice.




Comment 7


Vlastimil Babka (Caster) (RETIRED)






          2009-11-02 20:48:09 UTC
        

Sorry, looked at bad part of the output. Nevertheless, looks like javatoolkit was not remerged by the python updater, can you try remerge dev-java/javatoolkit manually?




Comment 8


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2009-11-02 20:55:54 UTC
        

(In reply to comment #3)
> Ran python-updater.

Try 'python-updater -o 2.4'. If it doesn't help, then your VDB might be broken (python-updater greps CONTENTS files in VDB).




Comment 9


a_tevelev





          2009-11-02 23:49:11 UTC
        

Re-emerging dev-java/javatoolkit fixed it. Running python-updater was not necessary.

Thank you




Comment 10


a_tevelev





          2009-11-02 23:51:16 UTC
        

*** Bug 290476 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

