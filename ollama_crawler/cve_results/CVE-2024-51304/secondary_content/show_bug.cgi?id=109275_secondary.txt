Title: 109275 – mozilla-firefox-1.0.7-r3 breaks with some LDFLAGS
URL: https://bugs.gentoo.org/show_bug.cgi?id=109275

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 109275
mozilla-firefox-1.0.7-r3 breaks with some LDFLAGS
Last modified: 2006-03-30 20:12:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 109275 
      - mozilla-firefox-1.0.7-r3 breaks with some LDFLAGS


Summary:
mozilla-firefox-1.0.7-r3 breaks with some LDFLAGS
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-14 07:21 UTC by Grzegorz Kulewski





      Modified:
    
2006-03-30 20:12 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Grzegorz Kulewski





          2005-10-14 07:21:28 UTC
        

I upgraded mozilla-firefox (from -r2 to -r3 IIRC) during GNOME upgrade (to
2.12). But of course many other things upgraded then so I am not 100% sure what
broke firefox... But firefox was working perfectly before the upgrade.

Now it does not start and gives strange different errors:

1. When started normally:
No running windows found
plugin_get_value 1
plugin_get_value 2
[and hang leaving firefox-bin process running]

or
/usr/lib/mozilla-firefox/mozilla-xremote-client: Error: Failed to find a running
server.
No running windows found
plugin_get_value 1
plugin_get_value 2
[and hang leaving firefox-bin process running]

2. When started after removing $HOME/.mozilla
No running windows found
*** Registering -webcal handler.
*** Registering text/calendar handler.
*** Registering webcal protocol handler.
plugin_get_value 1
plugin_get_value 2
plugin_get_value 1
plugin_get_value 2
/usr/libexec/mozilla-launcher: line 119:  5659 Naruszenie ochrony pami&#281;ci  
"$mozbin" "$@"
firefox-bin exited with non-zero status (139)
[Naruszenie ochrony pamieci == SIGSEGV in Polish]

3. When started next time after 2.
/usr/lib/mozilla-firefox/mozilla-xremote-client: Error: Failed to find a running
server.
No running windows found
*** Registering -webcal handler.
*** Registering text/calendar handler.
*** Registering webcal protocol handler.
plugin_get_value 1
plugin_get_value 2
*** nsExtensionManager::_disableObsoleteExtensions - failure, catching exception
so finalize window can close
[and hang leaving firefox-bin running]

Could somebody help me fast because epiphany is... well not compatible with me... :(

Reproducible: Always
Steps to Reproduce:
1. start firefox




!!! INVALID ACCEPT_KEYWORDS: ~overlay
Portage 2.0.53_rc5 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r2,
2.6.14-rc3-git7-gk1 i686)
=================================================================
System uname: 2.6.14-rc3-git7-gk1 i686 Unknown CPU Type
Gentoo Base System version 1.12.0_pre9
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.13
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~overlay ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -mtune=athlon-xp -Os -frename-registers -fweb
-fforce-addr -momit-leaf-frame-pointer -funit-at-a-time -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c
/etc/env.d"
CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -Os -frename-registers -fweb
-fforce-addr -momit-leaf-frame-pointer -funit-at-a-time -pipe
-fvisibility-inlines-hidden"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks nostrip sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="pl_PL.UTF-8"
LC_ALL="pl_PL.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,-z,now"
LINGUAS="en pl"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/php-overlay/for-portage
/usr/local/php-overlay/experimental"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 doc nls nptl pic linguas_en linguas_pl userland_GNU kernel_linux
elibc_glibc"
Unset:  ASFLAGS, CTARGET




Comment 1


Jory A. Pratt





          2005-10-14 12:09:23 UTC
        

please re-emerge mozilla-firefox this is caused by one of the libs that was
linked against being updated after mozilla-firefox a revdep-rebuild should have
caught this.




Comment 2


Grzegorz Kulewski





          2005-10-14 16:11:58 UTC
        

Ok, now I know what broke my firefox. It looks like my LDFLAGS are responsible
(I double checked).

This is really strange and probably means some bug in binutils or in some patch
applied to firefox because I have whole system compiled with these LDFLAGS and
_nothing_ breaks. Also firefox -r2 (or something like that) and all older
versions worked perfectly fine for about one year and a half.

Also (as I heard) such LDFLAGS are used in Ubuntu and there is some bug in
Gentoo to use these as the default (there was even request for testing them or
something...).

I propose to filter LDFLAGS out for now in firefox ebuild and report bug
upstream (to mozilla or to binutils or both) if anybody from Gentoo developers
can reproduce this bug.

Thanks for your help.




Comment 3


Jory A. Pratt





          2006-03-30 20:12:15 UTC
        

Your LDFLAGS are sane but not your problem. Please reopen and update summary if you are still having problems.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

