Title: 361445 – =dev-lang/php-5.3.6 fails to build the imap extension
URL: https://bugs.gentoo.org/show_bug.cgi?id=361445

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 361445
=dev-lang/php-5.3.6 fails to build the imap extension
Last modified: 2012-02-14 13:15:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 361445 
      - =dev-lang/php-5.3.6 fails to build the imap extension


Summary:
=dev-lang/php-5.3.6 fails to build the imap extension
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

380541

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2011-03-31 10:03 UTC by Agostino Sarubbo





      Modified:
    
2012-02-14 13:15 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gregorcy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (php-5.3.6:20110330-213344.log,27.68 KB,
                text/plain)

            
2011-03-31 10:03 UTC,

            Agostino Sarubbo




Details





Build log

              (php-5.3.6:20110331-122338.log.bz2,29.57 KB,
                text/bzip2)

            
2011-03-31 14:07 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2011-03-31 10:03:52 UTC
        

Created attachment 267963 [details]
Build log

$summary

[ebuild     U ] dev-lang/php-5.3.6 [5.3.5] USE="apache2 bcmath* berkdb bzip2 calendar* cdb* cgi* cjk* cli crypt ctype curl curlwrappers* db2* debug* doc* embed* enchant* exif* fileinfo filter flatfile* fpm* ftp* gd gdbm gmp* hash iconv imap inifile* interbase* intl* iodbc* ipv6 json kolab* ldap ldap-sasl* mhash* mssql* mysql mysqli* mysqlnd* nls odbc* pcntl* pdo phar pic* posix postgres readline sapdb* session sharedext* simplexml snmp* soap* sockets* sqlite sqlite3* ssl sysvipc* threads tidy* tokenizer truetype unicode wddx* xml xmlreader* xmlrpc* xmlwriter* xpm* xsl* zip* zlib (-adabas) (-birdstep) (-dbmaker) (-empress) (-empress-bcs) (-esoob) (-firebird) (-frontbase) -gd-external -kerberos -libedit -oci8 -oci8-instant-client -qdbm -recode -sharedmem (-solid) -spell (-sybase-ct) (-suhosin%)" 0 kB


Portage 2.1.9.42 (default/linux/amd64/10.0, gcc-4.4.5, glibc-2.11.3-r0, 2.6.32-gentoo-r24 x86_64)
=================================================================
                        System Settings                                                                                                                                             
=================================================================                                                                                                                   
System uname: Linux-2.6.32-gentoo-r24-x86_64-Intel-R-_Core-TM-_i3_CPU_540_@_3.07GHz-with-gentoo-1.12.14                                                                             
Timestamp of tree: Thu, 31 Mar 2011 09:30:01 +0000                                                                                                                                  
app-shells/bash:     4.1_p9                                                                                                                                                         
dev-java/java-config: 2.1.11-r3                                                                                                                                                     
dev-lang/python:     2.7.1-r1, 3.1.3-r1                                                                                                                                             
dev-util/cmake:      2.8.4                                                                                                                                                          
sys-apps/baselayout: 1.12.14-r1                                                                                                                                                     
sys-apps/sandbox:    2.4                                                                                                                                                            
sys-devel/autoconf:  2.65-r1                                                                                                                                                        
sys-devel/automake:  1.11.1                                                                                                                                                         
sys-devel/binutils:  2.20.1-r1                                                                                                                                                      
sys-devel/gcc:       4.4.5                                                                                                                                                          
sys-devel/gcc-config: 1.4.1                                                                                                                                                         
sys-devel/libtool:   2.2.10                                                                                                                                                         
sys-devel/make:      3.81-r2                                                                                                                                                        
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)                                                                                                                            
ACCEPT_KEYWORDS="amd64"                                                                                                                                                             
ACCEPT_LICENSE="*"                                                                                                                                                                  
CBUILD="x86_64-pc-linux-gnu"                                                                                                                                                        
CFLAGS="-march=native -O2 -g0"                                                                                                                                                      
CHOST="x86_64-pc-linux-gnu"                                                                                                                                                         
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"                                                                                                              
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -g0"
DISTDIR="/media/sources"
FEATURES="assume-digests binpkg-logs collision-protect distlocks fixlafiles fixpackages multilib-strict news parallel-fetch protect-owned sandbox sfperms split-log strict test unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="it_IT.UTF-8"
LC_ALL="C"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=gnu"
LINGUAS="zh af ca cs da de el es et fr gl hr hu it nb nl pl pt ro ru sk sl sv uk bg cy en eo fo ga he id ku lt lv mk ms nn sw tn zu ja zh_TW en_GB pt_BR ko zh_CN ar en_CA fi kk oc sr tr fa wa nds as be bn bn_BD bn_IN en_US es_AR es_CL es_ES es_MX eu fy fy_NL ga_IE gu gu_IN hi hi_IN is ka kn ml mr nb_NO nn_NO or pa pa_IN pt_PT rm si sq sv_SE ta ta_LK te th vi ast dz km my om sh ug uz ca@valencia sr@ijekavian sr@ijekavianlatin sr@latin csb hne mai se es_LA fr_CA zh_HK br la no es_CR et_EE sr_CS bo hsb hy mn sr@Latn lb ne bs tg uz@cyrillic xh be_BY brx ca_XV dgo en_ZA gd kok ks ky lo mni nr ns pap ps rw sa_IN sat sd ss st sw_TZ ti ts ve"
MAKEOPTS="-j4"
PKGDIR="/media/sources/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 apache2 assistant bash-completion berkdb bzip2 cairo cd cdr cli cracklib crypt cups curl cxx dbus dri dvd dvdr extensions extras ffmpeg fontconfig fortran gdbm gnutls gpm gstreamer gtk iconv icu imagemagick imap ipv6 ithreads jadetex jpeg kde lame mmx modules mp3 mudflap multilib mysql ncurses nls nptl nptlonly nsplugin ogg opengl openmp pam pcre pdo perl png postgres pppd python qt3support qt4 readline sasl sdl session sqlite sse sse2 ssl svg symlink sysfs tcpd threads tk truetype unicode v4l v4l2 vhosts vorbis webcam xcb xorg zlib zsh-completion" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="mouse evdev keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="zh af ca cs da de el es et fr gl hr hu it nb nl pl pt ro ru sk sl sv uk bg cy en eo fo ga he id ku lt lv mk ms nn sw tn zu ja zh_TW en_GB pt_BR ko zh_CN ar en_CA fi kk oc sr tr fa wa nds as be bn bn_BD bn_IN en_US es_AR es_CL es_ES es_MX eu fy fy_NL ga_IE gu gu_IN hi hi_IN is ka kn ml mr nb_NO nn_NO or pa pa_IN pt_PT rm si sq sv_SE ta ta_LK te th vi ast dz km my om sh ug uz ca@valencia sr@ijekavian sr@ijekavianlatin sr@latin csb hne mai se es_LA fr_CA zh_HK br la no es_CR et_EE sr_CS bo hsb hy mn sr@Latn lb ne bs tg uz@cyrillic xh be_BY brx ca_XV dgo en_ZA gd kok ks ky lo mni nr ns pap ps rw sa_IN sat sd ss st sw_TZ ti ts ve" NGINX_MODULES_HTTP="access auth_basic autoindex browser charset empty_gif fastcgi geo gzip limit_req limit_zone map memcached proxy referer rewrite scgi split_clients ssi upstream_ip_hash userid uwsgi addition cache_purge dav degradation flv geoip gzip_static headers_more image_filter passenger perl push random_index realip secure_link stub_status sub xslt" NGINX_MODULES_MAIL="imap pop3 smtp" PHP_TARGETS="php5-3" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

dev-lang/php-5.3.5 was built with the following:
USE="apache2 berkdb bzip2 cli crypt ctype curl fileinfo filter gd gdbm hash iconv imap ipv6 json ldap (multilib) mysql nls pdo phar posix postgres readline session simplexml sqlite ssl threads tokenizer truetype unicode xml zlib (-adabas) -bcmath (-birdstep) -calendar -cdb -cgi -cjk -curlwrappers -db2 (-dbmaker) -debug -doc -embed (-empress) (-empress-bcs) -enchant (-esoob) -exif (-firebird) -flatfile -fpm (-frontbase) -ftp -gd-external -gmp -inifile -interbase -intl -iodbc -kerberos -kolab -ldap-sasl -libedit -mhash -mssql -mysqli -mysqlnd -oci8 -oci8-instant-client -odbc -pcntl -pic -qdbm -recode -sapdb -sharedext -sharedmem -snmp -soap -sockets (-solid) -spell -sqlite3 -suhosin (-sybase-ct) -sysvipc -tidy -wddx -xmlreader -xmlrpc -xmlwriter -xpm -xsl -zip"                                                                                                                                   
CFLAGS="-march=native -O2"
CXXFLAGS="-march=native -O2"

P.S. this emerge --info php is related to old version that i've installed..so i've attacched emerge -pv=php-5.3.6




Comment 1


Ole Markus With (RETIRED)






          2011-03-31 10:24:49 UTC
        

Thanks Ago. That should do nicely. I will try to reproduce shortly.




Comment 2


Ole Markus With (RETIRED)






          2011-03-31 10:57:21 UTC
        

Can you try with disabling db2, interbase and sapdb? These flags are not really supported, but just there for those who want those features without support.




Comment 3


Agostino Sarubbo






          2011-03-31 14:07:47 UTC
        

Created attachment 267975 [details]
Build log

other error

bzip2 because is bigger than 1000kb




Comment 4


Ole Markus With (RETIRED)






          2011-03-31 14:40:55 UTC
        

Thanks. Unfortunately I cannot reproduce this with net-libs/c-client-2007e




Comment 5


Samuel Bauer





          2011-04-04 14:44:41 UTC
        

[ebuild     U ] dev-lang/php-5.3.6 [5.3.5] USE="apache2 bcmath berkdb bzip2 calendar cgi cli crypt ctype curl curlwrappers doc exif fileinfo filter ftp gd gdbm gmp hash iconv ipv6 json kerberos ldap mysql nls phar posix postgres readline session simplexml sockets spell ssl sysvipc threads tokenizer truetype unicode xml xmlreader xmlrpc xmlwriter xpm xsl zlib (-adabas) (-birdstep) -cdb -cjk -db2 (-dbmaker) -debug -embed (-empress) (-empress-bcs) -enchant (-esoob) (-firebird) -flatfile -fpm (-frontbase) -gd-external -imap -inifile -interbase -intl -iodbc -kolab -ldap-sasl -libedit -mhash -mssql -mysqli -mysqlnd -oci8 -oci8-instant-client -odbc -pcntl -pdo -pic -qdbm -recode -sapdb -sharedext -sharedmem -snmp -soap (-solid) -sqlite -sqlite3 (-sybase-ct) -tidy -wddx -zip (-suhosin%)"

Portage 2.1.9.42 (default/linux/amd64/10.0, gcc-4.4.5, glibc-2.11.3-r0, 2.6.37-gentoo-r4-nouveau x86_64)
=================================================================
System uname: Linux-2.6.37-gentoo-r4-nouveau-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T5250_@_1.50GHz-with-gentoo-2.0.2
Timestamp of tree: Mon, 04 Apr 2011 08:45:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.6.6-r2, 2.7.1-r1, 3.1.3-r1
dev-util/ccache:     2.4-r9
dev-util/cmake:      2.8.4
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.0
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=core2 -O2 -pipe -mssse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /usr/share/openvpn/easy-rsa /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-mtune=core2 -O2 -pipe -mssse3"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv"
FFLAGS=""
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="fr_FR.UTF-8"
LC_ALL="fr_FR.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="fr fr_FR"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--exclude-from=/etc/portage/excludes"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/usr/gentoo/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/gentoo/overlay/nikai /usr/gentoo/overlay/mozilla /usr/gentoo/overlay/sam /usr/gentoo/overlay/various /usr/gentoo/overlay/desktop-effects /usr/gentoo/overlay/roslin /usr/gentoo/overlay/sunrise"
SYNC="rsync://rsync.asia.gentoo.org/gentoo-portage"
USE="X aac acl acpi alsa amd64 apache2 audiofile bash-completion berkdb bidi bzip2 cairo cdr cli cracklib crypt cups curl cxx dbus dri dvd dvdr dvdread encode exif fam fbcon ffmpeg fftw flac fortran fuse gallium gdbm gif gmp gnutls gphoto2 gpm gtk gtk2 hardened iconv id3 id3tag ipv6 jack java joystick jpeg jpeg2k ladspa lcms ldap lzo mad mikmod mmx mng modules mozilla mp3 mudflap multilib ncurses nls nptl nptlonly ogg oggvorbis openal openexr opengl openmp oss pam pcre perl php png pnm pppd python qt3support readline ruby samba sasl sdl session slang smp sockets spell sse sse2 sse3 ssl ssse3 svg sysfs tcl tcpd theora threads tiff tk truetype unicode usb v4l v4l2 vaapi vdpau vim-syntax vorbis x264 xorg xpm xrandr xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev joystick keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr fr_FR" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nouveau nvidia fbdev vesa none v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS

Econf failed: configure: error: readline library not found

But readline is installed:
[ebuild   R   ] sys-libs/readline-6.1_p2




Comment 6


Ole Markus With (RETIRED)






          2011-04-04 14:48:13 UTC
        

@Samuel: Please file a new bug about this.




Comment 7


gregorcy





          2011-04-05 19:42:41 UTC
        

# USE="-imap" emerge -v php

works as a temp workaround




Comment 8


Piotr Mrożek





          2011-04-09 17:35:59 UTC
        

@Samuel: are you experiencing something like this: http://bugs.gentoo.org/show_bug.cgi?id=362743 ??




Comment 9


Ole Markus With (RETIRED)






          2011-04-19 17:54:08 UTC
        

Hi,

Sorry, but I need more information. If not I have to close this as NEEDINFO.

Cheers




Comment 10


Agostino Sarubbo






          2011-04-22 10:48:22 UTC
        

(In reply to comment #9)
> Hi,
> 
> Sorry, but I need more information. If not I have to close this as NEEDINFO.
> 
> Cheers

PLease fix first the first problem or drop the  "incriminated" useflag, now i can't reproduce it because i get always fails of econf.




Comment 11


Łukasz Stelmach





          2011-07-20 22:50:16 UTC
        

For me it was the "kolab" flag that broke things.




Comment 12


Ole Markus With (RETIRED)






          2011-07-21 07:27:04 UTC
        

(In reply to comment #11)
> For me it was the "kolab" flag that broke things.

Could not reproduce that with 5.3.6, 5.3.7-rc2 or 5.4.0 alpha1. Could you please post emerge --info php and your build.log?




Comment 13


Ole Markus With (RETIRED)






          2011-09-07 11:21:22 UTC
        

*** Bug 380541 has been marked as a duplicate of this bug. ***




Comment 14


James O'Malley





          2011-10-03 20:41:32 UTC
        

re-emerge net-libs/c-client and that will fix you right up.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

