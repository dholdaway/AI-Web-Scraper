Title: 97293 – amule-2.0.1 compilation failed
URL: https://bugs.gentoo.org/show_bug.cgi?id=97293

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 97293
amule-2.0.1 compilation failed
Last modified: 2005-06-30 11:45:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 97293 
      - amule-2.0.1 compilation failed


Summary:
amule-2.0.1 compilation failed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-06-28 04:53 UTC by Tommaso Mazzoni





      Modified:
    
2005-06-30 11:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



stian









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tommaso Mazzoni





          2005-06-28 04:53:47 UTC
        

When I try emerge -va amule, after a lot of compiling I obtain the following:

[...]
if i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I..     -DUSE_WX_TRAY
-I/usr/lib/wx/include/gtk2-unicode-release-2.6 -I/usr/include/wx-2.6
-DGTK_NO_CHECK_CASTS -D__WXGTK__ -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES
-D_LARGEFILE_SOURCE=1 -DNO_GCC_PRAGMA   -DXTHREADS -D_REENTRANT
-DXUSE_MTSAFE_API -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include
-I/usr/include/atk-1.0 -I/usr/include/pango-1.0 -I/usr/include/freetype2
-I/usr/include/freetype2/config -I/usr/include/glib-2.0
-I/usr/lib/glib-2.0/include   -D__GTK2__  -DHAVE_BFD -march=athlon-xp -O3 -pipe
-fweb -falign-labels -fpeel-loops -funswitch-loops -mno-push-args
-finline-functions -falign-loops -mno-align-stringops -fno-if-conversion2
-maccumulate-outgoing-args -fsched-spec -fno-cprop-registers -fsched-interblock
-freorder-functions -fprefetch-loop-arrays -mieee-fp -falign-functions
-fno-merge-constants -mmmx -msse -m3dnow -mfpmath=sse -fforce-addr 
-funroll-loops -momit-leaf-frame-pointer -minline-all-stringops
-DUSE_EMBEDDED_CRYPTO -W -Wall -g -ggdb -fno-inline -D__DEBUG__
-fmessage-length=0   -MT amule-SearchDlg.o -MD -MP -MF ".deps/amule-SearchDlg.Tpo" \
  -c -o amule-SearchDlg.o `test -f 'SearchDlg.cpp' || echo './'`SearchDlg.cpp; \
then mv -f ".deps/amule-SearchDlg.Tpo" ".deps/amule-SearchDlg.Po"; \
else rm -f ".deps/amule-SearchDlg.Tpo"; exit 1; \
fi
SearchDlg.cpp:463:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:467:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:471:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:475:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:479:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:483:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:487:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:491:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:495:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:499:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:503:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:507:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:511:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:515:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:519:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:523:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
SearchDlg.cpp:527:1: converting to execution character set: Invalid or
incomplete multibyte or wide character
make[3]: *** [amule-SearchDlg.o] Error 1
make[3]: Leaving directory `/var/tmp/portage/amule-2.0.1/work/aMule-2.0.1/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/amule-2.0.1/work/aMule-2.0.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/amule-2.0.1/work/aMule-2.0.1'
make: *** [all] Error 2

!!! ERROR: net-p2p/amule-2.0.1 failed.
!!! Function src_compile, Line 71, Exitcode 2
!!! (no error message)

My emerge info is:

Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r0,
2.6.12-gentoo-r1 i686)
=================================================================
System uname: 2.6.12-gentoo-r1 i686 AMD Athlon(tm) XP 2800+
Gentoo Base System version 1.6.12
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.9
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -fweb -falign-labels -fpeel-loops
-funswitch-loops -mno-push-args -finline-functions -falign-loops
-mno-align-stringops -fno-if-conversion2 -maccumulate-outgoing-args -fsched-spec
-fno-cprop-registers -fsched-interblock -freorder-functions
-fprefetch-loop-arrays -mieee-fp -falign-functions -fno-merge-constants -mmmx
-msse -m3dnow -mfpmath=sse -fforce-addr -fomit-frame-pointer -funroll-loops
-momit-leaf-frame-pointer -minline-all-stringops"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fweb -falign-labels -fpeel-loops
-funswitch-loops -mno-push-args -finline-functions -falign-loops
-mno-align-stringops -fno-if-conversion2 -maccumulate-outgoing-args -fsched-spec
-fno-cprop-registers -fsched-interblock -freorder-functions
-fprefetch-loop-arrays -mieee-fp -falign-functions -fno-merge-constants -mmmx
-msse -m3dnow -mfpmath=sse -fforce-addr -fomit-frame-pointer -funroll-loops
-momit-leaf-frame-pointer -minline-all-stringops"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://www.die.unipd.it/pub/Linux/distributions/gentoo-sources
http://pandemonium.tiscali.de/pub/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/"
LINGUAS="en it"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X a52 aac aalib alsa apm arts avi berkdb bitmap-fonts
bzip2 cdr cjk crypt cups curl directfb divx4linux dts dvb dvd dvdr dvdread
emboss encode esd fam fame fbcon ffmpeg flac foomaticdb fortran freetype ftp gcj
gd gdbm ggi gif gpm gstreamer gtk gtk2 ieee1394 imagemagick imlib java jpeg
junit kde kdeenablefinal kdexdeltas ldap libg++ libwww lirc live mad matroska
mikmod mime mjpeg mmx mmx2 mmxext mozilla mp3 mpeg mysql nas ncurses nls ogg
oggvorbis opengl oss pam pdflib perl png python qt quicktime readline real sdk
sdl slang spell sse ssl svg svga symlink tcltk tcpd tetex tiff truetype
truetype-fonts type1-fonts unicode userlocales v4l v4l2 vorbis win32codecs wmf
xine xml2 xmms xosd xv xvid zeroconf zlib video_cards_radeon linguas_en
linguas_it userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS


Reproducible: Always
Steps to Reproduce:
1. emerge -va amule
2.
3.




Comment 1


Jakub Moc (RETIRED)






          2005-06-28 05:00:59 UTC
        

Given the ridiculous C[XX]FLAGS you are using, I don't think that it would be
reasonable for Gentoo devs to spend time investigating the cause of your
problems. I'd honestly suggest that you recompile your entire system with sane
C[XX]FLAGS.




Comment 2


Tommaso Mazzoni





          2005-06-28 08:54:58 UTC
        

Well, thanks for the help, I'll change the CFLAGS soon. But prior I'll let you
know that after quite a bit of searching I found out this page:

http://www.amule.org/wiki/index.php/HowTo_Compile_In_Gentoo

So I recompiled wxGTK-2.6.0-r1 with -unicode -opengl flags and after that amule
emerged without problems.
Maybe this can be of help for someone else.





Comment 3


Stian Skjelstad





          2005-06-30 10:35:18 UTC
        

All comments like this
 // comment
fails. That eiter comes from strange compiler-options (strictness) or a
preparser that doesn't understand c++ style comments. Would be nice to know what
CXXFLAG that triggers this. Reassign bug to gcc-porters (or close it)? (or
gtk2-unicode header files have some really wierd macros). Can reported upload
preparsed version of the file?

$ cd /var/tmp/portage/amule-2.0.1/work/aMule-2.0.1/src
$ i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I..     -DUSE_WX_TRAY
-I/usr/lib/wx/include/gtk2-unicode-release-2.6 -I/usr/include/wx-2.6
-DGTK_NO_CHECK_CASTS -D__WXGTK__ -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES
-D_LARGEFILE_SOURCE=1 -DNO_GCC_PRAGMA   -DXTHREADS -D_REENTRANT
-DXUSE_MTSAFE_API -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include
-I/usr/include/atk-1.0 -I/usr/include/pango-1.0 -I/usr/include/freetype2
-I/usr/include/freetype2/config -I/usr/include/glib-2.0
-I/usr/lib/glib-2.0/include   -D__GTK2__  -DHAVE_BFD -march=athlon-xp -O3 -pipe
-fweb -falign-labels -fpeel-loops -funswitch-loops -mno-push-args
-finline-functions -falign-loops -mno-align-stringops -fno-if-conversion2
-maccumulate-outgoing-args -fsched-spec -fno-cprop-registers -fsched-interblock
-freorder-functions -fprefetch-loop-arrays -mieee-fp -falign-functions
-fno-merge-constants -mmmx -msse -m3dnow -mfpmath=sse -fforce-addr 
-funroll-loops -momit-leaf-frame-pointer -minline-all-stringops
-DUSE_EMBEDDED_CRYPTO -W -Wall -g -ggdb -fno-inline -D__DEBUG__
-fmessage-length=0   -MT amule-SearchDlg.o -MD -MP -MF
".deps/amule-SearchDlg.Tpo" -c -o output.txt -E






Comment 4


Jakub Moc (RETIRED)






          2005-06-30 11:28:53 UTC
        

(In reply to comment #3)
> Would be nice to know what CXXFLAG that triggers this.

Ehm, seriously, reproduce this with _sane_ C[XX]FLAGS... 




Comment 5


Tommaso Mazzoni





          2005-06-30 11:45:50 UTC
        

Well, I will recompile the whole system with _sane_ C[XX]FLAGS but that's not
the point, I think. Especially after solving the problem as shown in the amule
wiki page link I posted.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

