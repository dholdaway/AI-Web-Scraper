Title: 297050 – latex (pdflatex) unable to use font cache directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=297050

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 297050
latex (pdflatex) unable to use font cache directory
Last modified: 2010-01-08 09:19:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 297050 
      - latex (pdflatex) unable to use font cache directory


Summary:
latex (pdflatex) unable to use font cache directory
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

TeX project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-12-15 16:25 UTC by Peter Volkov (RETIRED)





      Modified:
    
2010-01-08 09:19 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




test.tex

              (test.tex,365 bytes,
                text/plain)

            
2009-12-15 16:25 UTC,

            Peter Volkov (RETIRED)




Details





test.out

              (test.out,2.82 KB,
                text/plain)

            
2009-12-15 16:26 UTC,

            Peter Volkov (RETIRED)




Details





emerge --info

              (emerge--info,4.15 KB,
                text/plain)

            
2009-12-15 16:26 UTC,

            Peter Volkov (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Volkov (RETIRED)






          2009-12-15 16:25:03 UTC
        

With default settings latex run fail with an error:

kpathsea: Running mktextfm larm1200
mkdir: cannot create directory `././var/cache/fonts/tfm': Permission denied
mktextfm: mktexdir /var/cache/fonts/tfm/lh/lh-t2a failed.
kpathsea: Appending font creation commands to missfont.log.

! Font T2A/cmr/m/n/12=larm1200 at 12.0pt not loadable: Metric (TFM) file not fo
und.
<to be read again> 
                   relax 
l.3 \select@language{russian}
                             
? R

In case I set VARTEXFONTS e.g. to /tmp/ it will work. But shouldn't be default somehow set or is my system somehow broken?




Comment 1


Peter Volkov (RETIRED)






          2009-12-15 16:25:35 UTC
        

Created attachment 213096 [details]
test.tex




Comment 2


Peter Volkov (RETIRED)






          2009-12-15 16:26:26 UTC
        

Created attachment 213097 [details]
test.out

this is full output I see.




Comment 3


Peter Volkov (RETIRED)






          2009-12-15 16:26:57 UTC
        

Created attachment 213098 [details]
emerge --info




Comment 4


Alexis Ballier






          2009-12-15 20:36:50 UTC
        

(In reply to comment #0)
> In case I set VARTEXFONTS e.g. to /tmp/ it will work. But shouldn't be default
> somehow set or is my system somehow broken?

its just not forced anymore, see bug #204433 , texmf-update tells ya:

Use 'texconfig font ro'(rw) to disable (enable) font generation for users




Comment 5


Peter Volkov (RETIRED)






          2009-12-18 11:32:58 UTC
        

Ah, I see that I'm a bit late here. Sorry. But still I think this bug is valid.

Currently default texlive installation does not work out of box. Not taking into account normal Gentoo policy that package should work out of box, this change really complicates tex usage. Without your hint I failed to google correct solution although I've spent more then 30 minutes. Actually I've never had to use texconfig or texmf-update so I could never see the message texmf-update provides.

I think may be per-user cache directory or $(mktemp -d) (effectively also per-user) could be better solution as default. I think per-user cache directory will cover most usage cases since computers became individual recently...

And yes I saw thread on -dev (mentioned in bug 204433) but I never thought that this change will affect normal usage tex or I'd opened my mouth earlier.

Is it possible to set sane defaults for users? 




Comment 6


Alexis Ballier






          2009-12-22 16:15:11 UTC
        

(In reply to comment #5)
> Actually I've never
> had to use texconfig or texmf-update so I could never see the message
> texmf-update provides.

actually you use them and see these messages everytime you install a TeX package :)

> I think may be per-user cache directory or $(mktemp -d) (effectively also
> per-user) could be better solution as default. I think per-user cache directory
> will cover most usage cases since computers became individual recently...

patch welcome

> And yes I saw thread on -dev (mentioned in bug 204433) but I never thought that
> this change will affect normal usage tex or I'd opened my mouth earlier.
> 
> Is it possible to set sane defaults for users? 


I suppose the easiest solution is to create that dir with 1777 perms in tl-core ebuild with an ewarn; people will still be able to change it. I'll certainly not go the old route that reset that to 1777 everytime texmf-update is called; more or less forcing people to have it that way.




Comment 7


Alexis Ballier






          2010-01-07 19:56:44 UTC
        

I had totally forgot about that but there was bug #266680 and the fperms is there -> worksforme




Comment 8


Peter Volkov (RETIRED)






          2010-01-08 09:19:12 UTC
        

Heh really. This works here for different userand on different station. Thanks for help,  Alexis.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

