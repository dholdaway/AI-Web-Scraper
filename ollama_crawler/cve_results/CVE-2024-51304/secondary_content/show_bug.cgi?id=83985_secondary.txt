Title: 83985 – revdep-rebuild missed libsdl when DirectFB was upgraded.
URL: https://bugs.gentoo.org/show_bug.cgi?id=83985

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 83985
revdep-rebuild missed libsdl when DirectFB was upgraded.
Last modified: 2005-11-25 19:27:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 83985 
      - revdep-rebuild missed libsdl when DirectFB was upgraded.


Summary:
revdep-rebuild missed libsdl when DirectFB was upgraded.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage Tools Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

113602

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-03-03 11:00 UTC by MAL





      Modified:
    
2005-11-25 19:27 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



bss03
fadamo
mark.clegg2









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Removed COMPLETE_LD_LIBRARY_PATH - Added DIR_MASK - some fix for nagios and cgi

              (revdep-rebuild,10.37 KB,
                text/plain)

            
2005-05-17 06:50 UTC,

            yuk




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


MAL





          2005-03-03 11:00:35 UTC
        

I just updated DirectFB from 0.9.20 to 0.9.21, then ran revdep-rebuild.

It updated transcode, but that was all.

mplayer and mpeg2dec from libmpeg2 wouldn't run, stating that they couldn't find libdirectfb-0.9.so.20.  It turned out that libsdl was still linked to the old DirectFB, and in turn mplayer and mpeg2dec were linked to libsdl.

revdep-rebuild completely missed them, instead stating that my system was fine.
I first rebuilt mplayer and libmpeg2 manually, but they still reported couldn't find libdirectfb-0.9.so.20.  After rebuilding libsdl manually, mplayer and mpeg2dec worked again. Without any further rebuilds.

Reproducible: Always
Steps to Reproduce:




Comment 1


Mark Clegg





          2005-03-06 03:14:27 UTC
        

Don't know if it's related, but I've just had an issue where revdep-rebuild was reporting... 

broken /usr/lib/libSDL-1.2.so.0.0.6 (requires libdirectfb-0.9.so.20)

...but wouldn't fix it.

It appeared that libSDL-1.2.so.0.0.6 wasn't owned by any package, so I'm assuming it's a left over from an old version that hadn't been cleaned properly during a previous libSDL upgrade. 




Comment 2


SpanKY






          2005-04-20 18:39:47 UTC
        

*** Bug 89781 has been marked as a duplicate of this bug. ***




Comment 3


b.eggleston





          2005-04-23 22:52:21 UTC
        

I had a very similar experience with an upgrade of DirectFB from 0.9.21 to 0.9.22, ran revdep-rebuild and it did not detect that libSDL was still linked to the 0.9.21 lib




Comment 4


Paul Varner (RETIRED)






          2005-04-24 15:15:46 UTC
        

I have been trying to reproduce this and I have had no success as revdep-rebuild has been consisently finding the broken dynamic links. What version of gentoolkit do you have installed?




Comment 5


MAL





          2005-04-25 04:39:15 UTC
        

Latest stable:

[ebuild   R   ] app-portage/gentoolkit-0.2.0  0 kB




Comment 6


yuk





          2005-05-17 06:50:22 UTC
        

Created attachment 59118 [details]
Removed COMPLETE_LD_LIBRARY_PATH - Added DIR_MASK - some fix for nagios and cgi

revdep-rebuild runs ldd with an LD_LIBRARY_PATH expanded with all dir that
contains at least an executable or a .so (COMPLETE_LD_LIBRARY_PATH). This helps

ldd to find dependencies but it's not the real environment used when a program
runs. It's better using the real LD_LIBRARY_PATH to search dependencies and
exclude some particular packages like OpenOffice, Acrobat 7 and others. I
dropped the expansion of the LD_LIBRARY_PATH and I added a variable for
directory exclusion. Also devdep-rebuild didn't search for .cgi (only
executables and *.so*) and in /usr/nagios/*.

This works great for me!




Comment 7


Paul Varner (RETIRED)






          2005-06-04 18:15:35 UTC
        

I have been unable to reproduce this on three different systems. Reopen if you
have a system with the issue and are willing to help debug the problem.




Comment 8


SpanKY






          2005-11-25 19:27:46 UTC
        

*** Bug 113602 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

