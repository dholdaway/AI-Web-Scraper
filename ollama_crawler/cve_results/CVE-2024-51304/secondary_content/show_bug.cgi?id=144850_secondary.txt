Title: 144850 – kdeaddons fails to compile because cannot find SDL
URL: https://bugs.gentoo.org/show_bug.cgi?id=144850

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 144850
kdeaddons fails to compile because cannot find SDL
Last modified: 2007-07-05 15:18:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 144850 
      - kdeaddons fails to compile because cannot find SDL


Summary:
kdeaddons fails to compile because cannot find SDL
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-23 06:00 UTC by twenex





      Modified:
    
2007-07-05 15:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


twenex





          2006-08-23 06:00:17 UTC
        

*** Could not run SDL test program, checking why...
*** The test program failed to compile or link. See the file config.log for the
*** exact error that occured. This usually means SDL was incorrectly installed
*** or that you have moved SDL since it was installed. In the latter case, you
*** may want to edit the sdl-config script: /usr/bin/sdl-config
configure: error: --with-sdl was given, but test for SDL failed

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/kdeaddons-3.5.2-r1/work/kdeaddons-3.5.2/config.log

!!! ERROR: kde-base/kdeaddons-3.5.2-r1 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  kdeaddons-3.5.2-r1.ebuild, line 39:   Called kde_src_compile
  kde.eclass, line 164:   Called kde_src_compile 'all'
  kde.eclass, line 323:   Called kde_src_compile 'myconf' 'configure' 'make'
  kde.eclass, line 305:   Called econf '--with-sdl' '--without-xmms' '--with-berkeley-db
s=/usr/include/db4.2' '--with-x' '--enable-mitshm' '--without-xinerama' '--with-qt-dir=/
qt/3/lib' '--disable-dependency-tracking' '--disable-debug' '--without-debug' '--enable-
ndir=/usr/kde/3.5/share/man' '--infodir=/usr/kde/3.5/share/info' '--datadir=/usr/kde/3.5
  ebuild.sh, line 541:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 1


Carsten Lohrke (RETIRED)






          2006-08-23 09:31:01 UTC
        

Please provide `emerge --info` and the libsdl version you're using.




Comment 2


Christian Bricart





          2006-10-23 00:20:46 UTC
        

I'll second that:

This is what I think to be the relevant part in configure.log:

[..]
configure:34101: checking for sdl-config
configure:34119: found /usr/bin/sdl-config
configure:34132: result: /usr/bin/sdl-config
configure:34140: checking for SDL - version >= 1.2.0
configure:34230: i686-pc-linux-gnu-gcc -o conftest -std=iso9899:1990 -W -Wall -Wchar-subscripts -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -DNDEBUG -O2  -march=athlon-tbird -O2 -pipe -fomit-frame-pointer -Wformat-security -Wmissing-format-attribute -I/usr/include/SDL -D_GNU_SOURCE=1 -D_REENTRANT  -DQT_THREAD_SUPPORT  -D_REENTRANT  conftest.c  -lSDL -lpthread >&5
conftest.c:61: warning: no previous prototype for 'my_strdup'
conftest.c: In function 'main':
conftest.c:86: warning: passing argument 1 of 'my_strdup' discards qualifiers from pointer target type
conftest.c:75: warning: unused parameter 'argc'
conftest.c:75: warning: unused parameter 'argv'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libdirectfb-0.9.so.24, needed by /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libfusion-0.9.so.24, needed by /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libdirect-0.9.so.24, needed by /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so: undefined reference to `DirectFBCreate'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so: undefined reference to `DirectFBErrorString'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so: undefined reference to `DirectFBError'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libSDL.so: undefined reference to `DirectFBInit'
collect2: ld returned 1 exit status
configure:34233: $? = 1
configure: program exited with status 1
[..]

media-libs/libsdl-1.2.11  USE="X aalib alsa arts dga directfb esd fbcon nas opengl oss svga xinerama xv -ggi -libcaca -noaudio -noflagstrip -nojoystick -novideo"

# emerge --info
Portage 2.1.1 (default-linux/x86/2006.1, gcc-4.1.1, glibc-2.4-r3, 2.6.15-vs2.0.1-gentoo-r5 i686)
=================================================================
System uname: 2.6.15-vs2.0.1-gentoo-r5 i686 AMD Duron(tm) processor
Gentoo Base System version 1.12.5
Last Sync: Mon, 23 Oct 2006 00:20:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-tbird -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon-tbird -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS="en de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext 7zip X X509 a52 aac aalib acpi alsa apache2 arts artworkextra asf audiofile bash-completion berkdb bitmap-fonts blender-game bluetooth browserplugin bzip2 bzlib c++ cairo calendar cardbus ccache cdda cddb cdio cdparanoia cdr cdrom cgi chroot cli codecs courier cracklib crypt css cups curl cvsgraph dbi dbus dbx devmap dga directfb divx4linux dlloader dmx dri dts dv dvd dvdr dvdread eds elf elibc_glibc encode epson escreen esd evo exif expat extensions extrafilters faad fam fame fax fb fbcon fbdev fbsplash ffmpeg fftw figlet firefox flac flash font-server foomaticdb fortran fping freetype ftp gd gdbm geoip gif gimp gimpprint gmp gnome gpm gs gstreamer gtk gtk2 gtkhtml gzip hal http httpd icecast icq id3 idn image imagemagick imap imlib2 innodb input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog j2ee java javascript jce jpeg jpeg2k kde kernel_linux lame latex lcd lcms ldap libg++ linguas_de linguas_en lm_sensors logitech-mouse ltsp lzo mad maildir memlimit mhash mime ming mjpeg mmx mmxext mng monkey mozcalendar mozdevelop mozilla mozsvg mp3 mp4live mpeg mpeg2 mpeg4 mplayer mpm-prefork nas ncurses netboot network nfs nls nptl nptlonly nsplugin ntfs ogg openal opengl openssh openssl oss pam pcre pdf pear-db perl pg-vacuumdelay php png posix postfix postgres povray ppds pppd procmail python qt3 qt4 quicktime rar rdesktop readline real recode reflection reiserfs rrdtool samba sasl scanner screen sdl sensord session shaper slang slp soap spell spl ssl stream subversion svg svga svgz sysfs syslog t1lib tcpd tetex tga theora tiff toolbar tools transcode truetype truetype-fonts type1 type1-fonts udev unicode urandom usb userland_GNU utf8 v4l v4l2 vcd vcdimager vhosts video_cards_ati video_cards_fbdev video_cards_mach64 video_cards_nv video_cards_r128 video_cards_radeon video_cards_v4l video_cards_vesa video_cards_vmware vidix vim vim-pager vim-with-x vmdb vorbis wifi win32codecs winbind x11vnc xanim xchattext xine xinerama xml xml2 xmlrpc xorg xosd xpm xprint xscreensaver xsl xslt xv xvid xvmc yp yv12 zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 3


Christian Bricart





          2006-10-23 00:46:07 UTC
        

re-emerge "media-libs/libsdl-1.2.11" fixed the problem here.






Comment 4


Thomas Richter





          2006-10-29 05:59:09 UTC
        

(In reply to comment #3)
> re-emerge "media-libs/libsdl-1.2.11" fixed the problem here.
> 
worked for me too.





Comment 5


Ioannis Aslanidis (RETIRED)






          2007-01-21 16:57:22 UTC
        

I reproduced the bug. This usually happens if it was long after your last system update.

I'll add a note to the ebuild for now.




Comment 6


Ioannis Aslanidis (RETIRED)






          2007-01-21 17:26:26 UTC
        

I've added an informational message about this issue. Reopen if you want to propose an alternative method.




Comment 7


Ioannis Aslanidis (RETIRED)






          2007-01-21 18:55:49 UTC
        

I've been commenting the issue and I'll change it (next week) so that the ebuild detects if the compilation failed. If it did, it will parse config.log to see if it was the libsdl issue and show a detailed message about how to solve it.

The fix affects version 3.5.6 and above.




Comment 8


Carsten Lohrke (RETIRED)






          2007-04-30 20:48:26 UTC
        

What did you find as the problem, Ioannis? Broken sdl install is not a KDE issue, I'd say.




Comment 9


Wulf Krueger (RETIRED)






          2007-06-17 21:28:12 UTC
        

Ioannis, ping? :-)




Comment 10


Jakub Moc (RETIRED)






          2007-07-05 15:18:50 UTC
        

Eh; +1 on Comment #8.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

