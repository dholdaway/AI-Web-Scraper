Title: 158738 – [fPIC] dev-embedded/libftdi
URL: https://bugs.gentoo.org/show_bug.cgi?id=158738

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 158738
[fPIC] dev-embedded/libftdi
Last modified: 2007-02-04 19:01:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 158738 
      - [fPIC] dev-embedded/libftdi


Summary:
[fPIC] dev-embedded/libftdi
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-12-21 07:39 UTC by Brian Hall





      Modified:
    
2007-02-04 19:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Brian Hall





          2006-12-21 07:39:09 UTC
        

x86_64-pc-linux-gnu-gcc -fPIC -Wall -O3 -march=k8 -msse3 -fomit-frame-pointer -funit-at-a-time -frename-registers -mtune=athlon64 -fno-ident -pipe -ftree-vectorize -fweb -ftracer -Wno-unused-function -shared -Wl,-z,noexecstack -o xosd.so xosdlib_drv.o -L/usr/lib64 -lxosd -lpthread -lXext -lX11 -ldl 
/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../lib64/libftdi.a(ftdi.o): relocation R_X86_64_32S against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../lib64/libftdi.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[3]: *** [ula200.so] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/portage/app-misc/lcdproc-0.5.1-r1/work/lcdproc-0.5.1/server/drivers'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-misc/lcdproc-0.5.1-r1/work/lcdproc-0.5.1/server'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-misc/lcdproc-0.5.1-r1/work/lcdproc-0.5.1'
make: *** [all] Error 2

Portage 2.1.2_rc3-r9 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.5-r0, 2.6.19 x86_64)
=================================================================
System uname: 2.6.19 x86_64 Dual Core AMD Opteron(tm) Processor 165
Gentoo Base System version 1.12.8
Last Sync: Thu, 21 Dec 2006 10:00:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=k8 -msse3 -fomit-frame-pointer -funit-at-a-time -frename-registers -mtune=athlon64 -fno-ident -pipe -ftree-vectorize -fweb -ftracer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O3 -march=k8 -msse3 -fomit-frame-pointer -funit-at-a-time -frename-registers -mtune=athlon64 -fno-ident -pipe -ftree-vectorize -fweb -ftracer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--nospinner"
FEATURES="autoconfig digest distlocks metadata-transfer noinfo parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://gentoo.osuosl.org/ http://gentoo.llarian.net/ http://distfiles.larrythecow.com/"
LANG="en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://daisy/gentoo-portage"
USE="amd64 7zip X a52 aac abook acpi allegro alsa alsa_cards_emu10k1 alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol apm artworkextra asf bash-completion berkdb bitmap-fonts bittorrent bzip2 ccache cdda cddb cdinstall cdio cdparanoia chroot cli cracklib crypt cups custom-cflags dedicated dga dillo dio dlloader dnd dri dvd dvdr dvdread effects elibc_glibc emboss emul-linux-x86 encode ext-png ext-zlib extensions fam fame fat ffmpeg firefox flac flatfile foomaticdb fortran gb gcj gd gdbm gif ginac glut glx gmail gmailtimestamps gpgme gpm gs gstreamer gtk gtk2 gzip hpn iconv imlib imlib2 inkjar input_devices_keyboard input_devices_mouse ipod isdnlog ithreads java jikes joystick jpeg jpeg2k kde kdehiddenvisibility kernel_linux keyscrub lame lcd lcms lesstif libdsk lm_sensors lynxkeymap lzo lzw lzw-tiff mad maildir matroska matrox mbox mcal md5sum mikmod mimencode mixer mmap mng mod moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mpeg mpeg2 mplayer musepack music ncurses net network nfs nptl nptlonly offensive ofx ogg oggvorbis on-the-fly-crypt opengl pam pam_chroot pam_console pam_timestamp parse-clocks pcre pdf perl physfs pic png ppds pppd python qt3 qt4 quicktime rar rdesktop readline reflection reiserfs rogue rtc sblive screen sdl seamless-hbars server session shorten skins sounds sox spell spl sse-filters ssl stream svg sysfs szip tcltk tcpd tga theora threads tiff transcode truetype truetype-fonts type1 type1-fonts ula200 unicode usb userland_GNU uudeview v4l v4l2 vcd vfat video_cards_ati video_cards_mga video_cards_nv video_cards_radeon videos vlm vnc vorbis x11vnc xatrix xface xml xorg xosd xpm xscreensaver xv xvid xvmc yv12 zip zlib"
Unset:  CTARGET, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-12-21 07:47:41 UTC
        

Roopen if you can reproduce w/ *sane* C[XX]FLAGS, such as "-O2 -march=k8 -msse3 -fomit-frame-pointer -pipe"





Comment 2


Brian Hall





          2006-12-21 08:16:35 UTC
        

Problem still exists with CFLAGS="-O2 -march=k8 -pipe" CXXFLAGS="-O2 -march=k8 -pipe". Believe "-fPIC" needs to be added to the ebuild.

Please note, EVERY time I have had a build fail due to -fPIC on amd64, it has NEVER been a problem with overly aggressive CFLAGS. I can understand why there is the attitude of "use normal CFLAGS", but for amd64 and -fPIC errors, there needs to be an understanding on the part of the Gentoo devs that this NOT due to  over-optimization!

Portage 2.1.2_rc3-r9 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.5-r0, 2.6.19 x86_64)
=================================================================
System uname: 2.6.19 x86_64 Dual Core AMD Opteron(tm) Processor 165
Gentoo Base System version 1.12.8
Last Sync: Thu, 21 Dec 2006 10:00:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=k8 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--nospinner"
FEATURES="autoconfig digest distlocks metadata-transfer noinfo parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://gentoo.osuosl.org/ http://gentoo.llarian.net/ http://distfiles.larrythecow.com/"
LANG="en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://daisy/gentoo-portage"
USE="amd64 7zip X a52 aac abook acpi allegro alsa alsa_cards_emu10k1 alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol apm artworkextra asf bash-completion berkdb bitmap-fonts bittorrent bzip2 ccache cdda cddb cdinstall cdio cdparanoia chroot cli cracklib crypt cups custom-cflags dedicated dga dillo dio dlloader dnd dri dvd dvdr dvdread effects elibc_glibc emboss emul-linux-x86 encode ext-png ext-zlib extensions fam fame fat ffmpeg firefox flac flatfile foomaticdb fortran gb gcj gd gdbm gif ginac glut glx gmail gmailtimestamps gpgme gpm gs gstreamer gtk gtk2 gzip hpn iconv imlib imlib2 inkjar input_devices_keyboard input_devices_mouse ipod isdnlog ithreads java jikes joystick jpeg jpeg2k kde kdehiddenvisibility kernel_linux keyscrub lame lcd lcms lesstif libdsk lm_sensors lynxkeymap lzo lzw lzw-tiff mad maildir matroska matrox mbox mcal md5sum mikmod mimencode mixer mmap mng mod moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mpeg mpeg2 mplayer musepack music ncurses net network nfs nptl nptlonly offensive ofx ogg oggvorbis on-the-fly-crypt opengl pam pam_chroot pam_console pam_timestamp parse-clocks pcre pdf perl physfs pic png ppds pppd python qt3 qt4 quicktime rar rdesktop readline reflection reiserfs rogue rtc sblive screen sdl seamless-hbars server session shorten skins sounds sox spell spl sse-filters ssl stream svg sysfs szip tcltk tcpd tga theora threads tiff transcode truetype truetype-fonts type1 type1-fonts ula200 unicode usb userland_GNU uudeview v4l v4l2 vcd vfat video_cards_ati video_cards_mga video_cards_nv video_cards_radeon videos vlm vnc vorbis x11vnc xatrix xface xml xorg xosd xpm xscreensaver xv xvid xvmc yv12 zip zlib"
Unset:  CTARGET, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPT




Comment 3


Simon Stelling (RETIRED)






          2006-12-22 15:27:19 UTC
        

Some overly aggressive CFLAGS can actually cause this, but none of which you are using.




Comment 4


Simon Stelling (RETIRED)






          2007-02-04 19:01:01 UTC
        

dev-embedded/libftdi-0.7 is already built with -fPIC over here. Try recompiling it, it might be that some agressive CFLAGS you used in the past disabled -fPIC when you built it and now that lcdproc tries to link against it, it fails. If recompiling it does not help, reopen the bug with a build log of libftdi AND lcdproc, please.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

