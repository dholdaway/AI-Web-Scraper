Title: 493502 – [Gnome 3.8] Unrecoverable failure in required component gnome-shell.desktop
URL: https://bugs.gentoo.org/show_bug.cgi?id=493502

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 493502
[Gnome 3.8] Unrecoverable failure in required component gnome-shell.desktop
Last modified: 2013-12-10 00:45:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 493502 
      - [Gnome 3.8] Unrecoverable failure in required component gnome-shell.desktop


Summary:
[Gnome 3.8] Unrecoverable failure in required component gnome-shell.desktop
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:



http://forums.gentoo.org/viewtopic-t-...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-12-07 08:13 UTC by carlino





      Modified:
    
2013-12-10 00:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tomwij









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




log from journalctl -r right after the issue occurs

              (journalctl-r.txt,18.47 KB,
                text/plain)

            
2013-12-07 08:13 UTC,

            carlino




Details





log from journalctl -r, when issue with user root (can't log in anymore)

              (journalctl-r_root.txt,8.39 KB,
                text/plain)

            
2013-12-07 14:42 UTC,

            carlino




Details





emerge -pv mesa and eselect mesa list

              (emerge-pv_mesa.txt,1.17 KB,
                text/plain)

            
2013-12-07 14:47 UTC,

            carlino




Details





Xorg.0.log

              (Xorg.0.log,53.27 KB,
                text/x-log)

            
2013-12-07 14:49 UTC,

            carlino




Details





Xorg.0.log.old

              (Xorg.0.log.old,59.39 KB,
                application/x-trash)

            
2013-12-07 14:49 UTC,

            carlino




Details





Xorg.0.log new

              (Xorg.0.log,55.96 KB,
                text/x-log)

            
2013-12-07 15:04 UTC,

            carlino




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


carlino





          2013-12-07 08:13:37 UTC
        

Created attachment 364770 [details]
log from journalctl -r right after the issue occurs

hello

I managed to upgrade to Gnome 3.8, and finally log in once or twice with my regular user. I've looked around a little bit and then turned of the box. Now, when I boot and reach GDM, log in, I get this message : 
[quote]Oh no ! Something has gone wrong.[/quote]

In the attachment, there's what comes out from journalctl -r, right after...


I bump into this very same issue when I try to log in from gdm with any of the 2 regular users there is on my box BUT I perfectly get to log in and reach the desktop environment with the root user ! When I check journalctl, I don't get these messages...

I've started a tread on the gentoo forum (http://forums.gentoo.org/posting.php?mode=editpost&p=7456066)

Regards,

Carlino




Comment 1


Pacho Ramos






          2013-12-07 08:39:11 UTC
        

Did you try to create a new user with a new /home and log in with it?




Comment 2


Pacho Ramos






          2013-12-07 08:41:19 UTC
        

This looks like a major problem:
déc. 06 22:15:30 bigpopa kernel: gnome-shell[19060]: segfault at 0 ip 00007f7186f9646b sp 00007fffa9a7e1c0 error 4 in r600g_dri.so[7f7186af8000+1092000]


Please provide "emerge --info", your /var/log/Xorg.0.log, /var/log/Xorg.0.log.old and /etc/X11/xorg.conf

Also "emerge -pv mesa" and "eselect mesa list" outputs




Comment 3


carlino





          2013-12-07 14:42:21 UTC
        

Created attachment 364796 [details]
log from journalctl -r, when issue with user root (can't log in anymore)

I could log in so far with user root, whereas I could not with other users, even new one just created for test. Changing settings to French, through the IHM (button top right corner), now prevents me from loging in with user root.




Comment 4


carlino





          2013-12-07 14:45:38 UTC
        

> Did you try to create a new user with a new /home and log in with it?

Hello,
Thanks for your concern.
@ Pacho Ramos : I've created a new user, with his /home : when I try to log in with, I just get the same issue : "Oh no! Something....", and the same messages in journalctl, (Unrecoverable failure in required component gnome-shell.desktop).

The new thing is that, so far, I could log in with user root... Last time I did, I've changed the "settings" (button top right) to get the environment in French... And now, I can't log in anymore with user root !! Well, the good thing is that I don't get the white screen with the st**** message; only a void dark grey screen, with the lonely mousse pointer... In journalct, these lines are suspect :
déc. 07 15:01:26 bigpopa gnome-session[17373]: JS ERROR: !!!     stack = '"()@/usr/share/gnome-shell/js/ui/dateMenu.js:218
déc. 07 15:01:26 bigpopa gnome-session[17373]: JS ERROR: !!!     lineNumber = '218'
déc. 07 15:01:26 bigpopa gnome-session[17373]: JS ERROR: !!!     fileName = '"/usr/share/gnome-shell/js/ui/dateMenu.js"'
déc. 07 15:01:26 bigpopa gnome-session[17373]: JS ERROR: !!!     message = '"Argument 'text' (type utf8) may not be null"'
déc. 07 15:01:26 bigpopa gnome-session[17373]: JS ERROR: !!!   Exception in callback for signal: sessions-loaded.
Should I open a new bug ?




Comment 5


carlino





          2013-12-07 14:47:54 UTC
        

Created attachment 364800 [details]
emerge -pv mesa and eselect mesa list




Comment 6


Pacho Ramos






          2013-12-07 14:48:42 UTC
        

Please provide the files I requested before to try to know how your 3D setup is, this kind of major problems are most times related with problems with 3D




Comment 7


carlino





          2013-12-07 14:49:25 UTC
        

Created attachment 364802 [details]
Xorg.0.log




Comment 8


carlino





          2013-12-07 14:49:58 UTC
        

Created attachment 364804 [details]
Xorg.0.log.old




Comment 9


carlino





          2013-12-07 14:50:29 UTC
        

Portage 2.2.7 (default/linux/amd64/13.0/desktop/gnome/systemd, gcc-4.7.3, glibc-2.16.0, 3.10.17-gentoo x86_64)
=================================================================
System uname: Linux-3.10.17-gentoo-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9400_@_2.66GHz-with-gentoo-2.2
KiB Mem:     4053428 total,   3358372 free
KiB Swap:    1004056 total,   1004056 free
Timestamp of tree: Thu, 05 Dec 2013 20:30:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
distcc 3.1 x86_64-pc-linux-gnu [enabled]
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.6.8-r3, 2.7.5-r3, 3.2.5-r3, 3.3.2-r2
dev-util/cmake:           2.8.11.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.16.0
Repositories: gentoo
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA Q3AEULA dlj-1.1 sun-bcla-java-vm skype-eula AdobeFlash-10.3 Oracle-BCLA-JavaSE"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=nocona -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.0/conf"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=nocona -pipe"
DISTDIR="/usr/portages/packages"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distcc distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.free.fr/mirrors/ftp.gentoo.org/ http://213.186.33.37/gentoo-distfiles/ ftp://213.186.33.38/gentoo-distfiles/ ftp://213.186.33.37/gentoo-distfiles/ http://mirror.qubenet.net/mirror/gentoo/"
LANG="fr_FR@euro"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
USE="3dnow 3dnowext 64bit X a52 aac abiword accessibility acpi ads alisp alsa amazon amd64 antlr apache2 apng applet arts asf ass asyncns avcodec avformat bcel berkdb bitmap-fonts blksha1 bluetooth bookmarks branding bsf bzip2 cairo caps cdda cddb cdio cdr classic cli client clucene colord commonslogging commonsnet community compat corefonts cpufreq cracklib cramfs crashreporter crypt css ctype cups cxx dbus deprecated development devfs-compat device-mapper dhcpcd dirac dlloader dri dso dts dv dvbpsi dvd dvdnav dvdr dvdread eds egl emboss enca encode esd espeak evo exceptions exif extensions external-fuse extras faac faad fam fbcondecor ffmpeg filecaps fileinfo filter firefox firmware-loader flac fltk fontconfig fortran fts3 gallium games gcrypt gd gdbm gdu gecko gif gles glib gnome gnome-keyring gnome-online-accounts gnutls gpm gstreamer gtk gudev handbook hardcoded-tables hash hpcups hpn http httpd hwdb i18n iconv introspection ipc ipv6 isdnlog jack java javamail jce jdepend jit joystick jpeg jsch json kde kdrive kerberos keymap kmod lcms ldap libburn libclamav libg++ libkms libnotify libsamplerate libsecret lirc live llvm log4j lua lvm1 lzma mad mdev midi mikmod miner-fs minizip mmx mmxext mng mod modplug modules mp3 mp4 mpeg mudflap multilib musepack mysql mysqli nautilus ncurses netapi network nls nptl nptlonly nsplugin ntfsprogs oav ogg opengl openmp openrc orc oro osdmenu oss pam pango pch pcre pdf pdo perl pg-intdatetime phar pkinit png policykit poppler-data posix postgres postproc ppds ppp pppd pulseaudio python qt3 qt3support qt4 quicktime raptor rar readline real redland reflection regexp resolver rtc rtsp rule_generator samba sasl scanner schroedinger sdl semantic-desktop session setup sha512 shared-glapi shm shotwell shout simplexml smbclient sndfile socialweb source speex spell spl sqlite sse sse2 sse2check ssl ssse3 startup-notification stl stream suid svg swat systemd tcpd telepathy theora threads threadsafe tiff toolame tracker tremor truetype truetype-fonts twolame udev udisks unicode upower urandom usb utils v4l vala vapigen video virtuoso vorbis wallpapers wav wavpack weather webdav webdav-neon webm webmin-minimal webrtc-aec wext wide-unicode wifi win32codecs wxwidgets x264 xcb xiph xml xmlsec xorg xpdf-headers xscreensaver xulrunner xv xvid youtube zeroconf zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CURL_SSL="openssl" ELIBC="glibc" FFTOOLS="aviocat cws2fws ffeval graph2dot ismindex pktdumper qt-faststart trasher" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="fr fr_FR" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-3" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="jython2_5 pypy1_8 pypy1_9 python2_7 python3_2 python3_3" RUBY_TARGETS="ruby18 ruby19 ruby20" SANE_BACKENDS="agfafocus apple canon canon630u canon_dr canon_pp cardscan coolscan coolscan2 coolscan3 dc210 dc240 dc25 dell1600n_net epson epson2 fujitsu hp hp3500 hp3900 hp4200 hp5400 hp5590 hpljm1005 hpsj5s hs2p ibm kodak kvs1025 kvs20xx%* lexmark ma1509 magicolor%* mustek mustek_pp mustek_usb nec net niash p5 pie pixma plustek plustek_pp qcam ricoh rts8891 s9036 sharp sm3600 sm3840 snapscan sp15c st400 stv680 tamarack test u12 umax umax1220u umax_pp xerox_mfp" USERLAND="GNU" VIDEO_CARDS="radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, SYNC, USE_PYTHON




Comment 10


carlino





          2013-12-07 14:51:26 UTC
        

(In reply to Pacho Ramos from comment #2)
> This looks like a major problem:
> déc. 06 22:15:30 bigpopa kernel: gnome-shell[19060]: segfault at 0 ip
> 00007f7186f9646b sp 00007fffa9a7e1c0 error 4 in
> r600g_dri.so[7f7186af8000+1092000]
> 
> 
> Please provide "emerge --info", your /var/log/Xorg.0.log,
> /var/log/Xorg.0.log.old and /etc/X11/xorg.conf
> 
> Also "emerge -pv mesa" and "eselect mesa list" outputs

All provided now as attachments.

Regards




Comment 11


Pacho Ramos






          2013-12-07 14:54:36 UTC
        

That logs doesn't contain any trace of the segfault logged in first systemctl output :/

Maybe that is because they got overwritten when X got restarted, for that, I would do this:
1. Try to login
2. When it fails and shows the error, go to first console
3. Save the Xorg.0.log file somewhere else and attach that one here.

Also, I would try to know more about the 3D setup, some tips are provided in:
https://wiki.gentoo.org/wiki/GNOME/3.8-upgrade-guide#GDM.2FGnome_not_starting_due_3D_issues

For that maybe you will need to temporally use a 2D desktop like icewm or gnome[flashback] (probably icewm is faster for this ;))




Comment 12


carlino





          2013-12-07 15:04:26 UTC
        

(In reply to Pacho Ramos from comment #11)
> That logs doesn't contain any trace of the segfault logged in first
> systemctl output :/
> 
> Maybe that is because they got overwritten when X got restarted, for that, I
> would do this:
> 1. Try to login
> 2. When it fails and shows the error, go to first console
> 3. Save the Xorg.0.log file somewhere else and attach that one here.
> 
> Also, I would try to know more about the 3D setup, some tips are provided in:
> https://wiki.gentoo.org/wiki/GNOME/3.8-upgrade-guide#GDM.
> 2FGnome_not_starting_due_3D_issues
> 
> For that maybe you will need to temporally use a 2D desktop like icewm or
> gnome[flashback] (probably icewm is faster for this ;))

Pacho,
As attachment, the "new" Xorg.0.log, extracted right after the failure login and the "oh no...." message




Comment 13


carlino





          2013-12-07 15:04:53 UTC
        

Created attachment 364812 [details]
Xorg.0.log new




Comment 14


carlino





          2013-12-07 15:05:51 UTC
        

(In reply to carlino from comment #12)
> (In reply to Pacho Ramos from comment #11)
> > That logs doesn't contain any trace of the segfault logged in first
> > systemctl output :/
> > 
> > Maybe that is because they got overwritten when X got restarted, for that, I
> > would do this:
> > 1. Try to login
> > 2. When it fails and shows the error, go to first console
> > 3. Save the Xorg.0.log file somewhere else and attach that one here.
> > 
> > Also, I would try to know more about the 3D setup, some tips are provided in:
> > https://wiki.gentoo.org/wiki/GNOME/3.8-upgrade-guide#GDM.
> > 2FGnome_not_starting_due_3D_issues
> > 
> > For that maybe you will need to temporally use a 2D desktop like icewm or
> > gnome[flashback] (probably icewm is faster for this ;))
> 
> Pacho,
> As attachment, the "new" Xorg.0.log, extracted right after the failure login
> and the "oh no...." message ; but I couldn't grep any message about segfault neither




Comment 15


carlino





          2013-12-07 15:10:22 UTC
        

LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
returns:
Error: unable to open display




Comment 16


carlino





          2013-12-07 15:27:01 UTC
        

Is there a way I could re-emerge all packages related to gnome 3 ?




Comment 17


Tom Wijsman (TomWij) (RETIRED)






          2013-12-07 15:58:46 UTC
        

(In reply to carlino from comment #15)
> LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> returns:
> Error: unable to open display

That call misses DISPLAY=":0" or DISPLAY=":0.0" in front.

(In reply to carlino from comment #16)
> Is there a way I could re-emerge all packages related to gnome 3 ?

That won't solve a problem in the Radeon driver; have you tried a different version or a different driver to see whether that helps? It can verify the problem is indeed with the driver and not with the way that GNOME calls it.

If that doesn't solve it, you'll probably want to capture a backtrace such that we (as well as upstream) has more details on what exactly is happening.

http://www.gentoo.org/proj/en/qa/backtraces.xml
https://wiki.gnome.org/Projects/GnomeShell/Debugging




Comment 18


carlino





          2013-12-07 16:29:09 UTC
        

(In reply to Tom Wijsman (TomWij) from comment #17)
> (In reply to carlino from comment #15)
> > LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> > returns:
> > Error: unable to open display
> 
> That call misses DISPLAY=":0" or DISPLAY=":0.0" in front.
> 
> (In reply to carlino from comment #16)
> > Is there a way I could re-emerge all packages related to gnome 3 ?
> 
> That won't solve a problem in the Radeon driver; have you tried a different
> version or a different driver to see whether that helps? It can verify the
> problem is indeed with the driver and not with the way that GNOME calls it.
> 
> If that doesn't solve it, you'll probably want to capture a backtrace such
> that we (as well as upstream) has more details on what exactly is happening.
> 
> http://www.gentoo.org/proj/en/qa/backtraces.xml
> https://wiki.gnome.org/Projects/GnomeShell/Debugging

TomWij, how can I chose a different version of the radeon driver ? When I run emerge -pv radeon_ucode I get [ebuild R ] x11-drivers/radeon-ucode-20130826




Comment 19


carlino





          2013-12-07 16:55:25 UTC
        

(In reply to carlino from comment #18)
> (In reply to Tom Wijsman (TomWij) from comment #17)
> > (In reply to carlino from comment #15)
> > > LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> > > returns:
> > > Error: unable to open display
> > 
> > That call misses DISPLAY=":0" or DISPLAY=":0.0" in front.
> > 
> > (In reply to carlino from comment #16)
> > > Is there a way I could re-emerge all packages related to gnome 3 ?
> > 
> > That won't solve a problem in the Radeon driver; have you tried a different
> > version or a different driver to see whether that helps? It can verify the
> > problem is indeed with the driver and not with the way that GNOME calls it.
> > 
> > If that doesn't solve it, you'll probably want to capture a backtrace such
> > that we (as well as upstream) has more details on what exactly is happening.
> > 
> > http://www.gentoo.org/proj/en/qa/backtraces.xml
> > https://wiki.gnome.org/Projects/GnomeShell/Debugging
> 
TomWij, how can I chose a different version of the radeon driver ? When I
run emerge -pv radeon-ucode I get 
[ebuild R ] x11-drivers/radeon-ucode-20130826
and emerge -pv x11-drivers/xf86-video-ati
[ebuild R ] x11-drivers/xf86-video-ati-7.2.0 USE="udev -glamor"




Comment 20


Pacho Ramos






          2013-12-07 19:00:49 UTC
        

(In reply to carlino from comment #15)
> LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> returns:
> Error: unable to open display

That shouldn't occur if you run it, for example, from xterm on an icewm session

Regarding the driver, have you checked with newer mesa versions? (I think the driver is provided there, if I don't misremember)

Also check the end of "dmesg" output looking for errors




Comment 21


carlino





          2013-12-07 22:24:57 UTC
        

(In reply to carlino from comment #18)
> (In reply to Tom Wijsman (TomWij) from comment #17)
> > (In reply to carlino from comment #15)
> > > LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> > > returns:
> > > Error: unable to open display
> > 
> > That call misses DISPLAY=":0" or DISPLAY=":0.0" in front.
> > 
> > (In reply to carlino from comment #16)
> > > Is there a way I could re-emerge all packages related to gnome 3 ?
> > 
> > That won't solve a problem in the Radeon driver; have you tried a different
> > version or a different driver to see whether that helps? It can verify the
> > problem is indeed with the driver and not with the way that GNOME calls it.
> > 
> > If that doesn't solve it, you'll probably want to capture a backtrace such
> > that we (as well as upstream) has more details on what exactly is happening.
> > 
> > http://www.gentoo.org/proj/en/qa/backtraces.xml
> > https://wiki.gnome.org/Projects/GnomeShell/Debugging
> 
> TomWij, how can I chose a different version of the radeon driver ? When I
> run emerge -pv radeon_ucode I get [ebuild R ]
> x11-drivers/radeon-ucode-20130826

Well, I got rid of  LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render and emerged  x11-drivers/ati-drivers-13.11_beta6:1.
It now works like a charm, I mean, for this precise issue.... : I can now log in through gdm and reach the desktop environment...
Now :
#  LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
libGL: OpenDriver: trying /usr/lib64/dri/tls/swrast_dri.so
libGL: OpenDriver: trying /usr/lib64/dri/swrast_dri.so
libGL: Can't open configuration file /root/.drirc: No such file or directory.
direct rendering: Yes
OpenGL renderer string: Gallium 0.4 on llvmpipe (LLVM 3.1, 128 bits)
    GL_NV_conditional_render, GL_NV_fog_distance, GL_NV_light_max_exponent, 

Still 3 issues to eradicate :
1.can't log in (anymore) with user root (gnome-session[17373]: JS ERROR: !!!   Exception in callback).
2.no sound card detected or available, besides the dummy one.
3.loss of network settings, impossible to get retrieve, after suspend.
4.all the nice suprises left to bump into.
I'm gonna keep looking..
Anyway, thanks a lot guys for your support and your time




Comment 22


carlino





          2013-12-07 22:27:08 UTC
        

(In reply to carlino from comment #21)
> (In reply to carlino from comment #18)
> > (In reply to Tom Wijsman (TomWij) from comment #17)
> > > (In reply to carlino from comment #15)
> > > > LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> > > > returns:
> > > > Error: unable to open display
> > > 
> > > That call misses DISPLAY=":0" or DISPLAY=":0.0" in front.
> > > 
> > > (In reply to carlino from comment #16)
> > > > Is there a way I could re-emerge all packages related to gnome 3 ?
> > > 
> > > That won't solve a problem in the Radeon driver; have you tried a different
> > > version or a different driver to see whether that helps? It can verify the
> > > problem is indeed with the driver and not with the way that GNOME calls it.
> > > 
> > > If that doesn't solve it, you'll probably want to capture a backtrace such
> > > that we (as well as upstream) has more details on what exactly is happening.
> > > 
> > > http://www.gentoo.org/proj/en/qa/backtraces.xml
> > > https://wiki.gnome.org/Projects/GnomeShell/Debugging
> > 
> > TomWij, how can I chose a different version of the radeon driver ? When I
> > run emerge -pv radeon_ucode I get [ebuild R ]
> > x11-drivers/radeon-ucode-20130826
> 
> Well, I got rid of  x11-drivers/xf86-video-ati and emerged  x11-drivers/ati-drivers-13.11_beta6:1.
> It now works like a charm, I mean, for this precise issue.... : I can now
> log in through gdm and reach the desktop environment...
> Now :
> #  LIBGL_ALWAYS_SOFTWARE=1 LIBGL_DEBUG=verbose glxinfo | grep render
> libGL: OpenDriver: trying /usr/lib64/dri/tls/swrast_dri.so
> libGL: OpenDriver: trying /usr/lib64/dri/swrast_dri.so
> libGL: Can't open configuration file /root/.drirc: No such file or directory.
> direct rendering: Yes
> OpenGL renderer string: Gallium 0.4 on llvmpipe (LLVM 3.1, 128 bits)
>     GL_NV_conditional_render, GL_NV_fog_distance, GL_NV_light_max_exponent, 
> 
> Still 3 issues to eradicate :
> 1.can't log in (anymore) with user root (gnome-session[17373]: JS ERROR: !!!
> Exception in callback).
> 2.no sound card detected or available, besides the dummy one.
> 3.loss of network settings, impossible to get retrieve, after suspend.
> 4.all the nice suprises left to bump into.
> I'm gonna keep looking..
> Anyway, thanks a lot guys for your support and your time




Comment 23


Pacho Ramos






          2013-12-07 22:46:32 UTC
        

OK, I think we can close this one as the original problem was related with faulty 3D setup, for the remaining problems, I would open a new report per problem to try to focus on them :/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

