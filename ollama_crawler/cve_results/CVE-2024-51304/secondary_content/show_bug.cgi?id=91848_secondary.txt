Title: 91848 – mplayer-1.0_pre6-r5 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=91848

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 91848
mplayer-1.0_pre6-r5 fails to compile
Last modified: 2006-06-21 19:27:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 91848 
      - mplayer-1.0_pre6-r5 fails to compile


Summary:
mplayer-1.0_pre6-r5 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

133396

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-05-07 19:30 UTC by Timmy Douglas





      Modified:
    
2006-06-21 19:27 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



pxa7736
stian









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timmy Douglas





          2005-05-07 19:30:24 UTC
        

cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o crc.o crc.c
cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o resample.o resample.c
cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o bit_allocate.o bit_allocate.c
cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o bitstream.o bitstream.c
cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o downmix.o downmix.c
cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -g -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o imdct.o imdct.c
In file included from imdct.c:757:
imdct_3dnow.h: In function `fft_asmb_3dnow':
imdct_3dnow.h:241: error: can't find a register in class `GENERAL_REGS' while reloading `asm'
imdct.c: In function `imdct_do_512_sse':
imdct.c:937: warning: use of memory input without lvalue in asm operand 1 is deprecated
imdct.c:937: warning: use of memory input without lvalue in asm operand 2 is deprecated
make[1]: *** [imdct.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/mplayer-1.0_pre6-r5/work/MPlayer-1.0pre6a/liba52'
make: *** [liba52/liba52.a] Error 2

!!! ERROR: media-video/mplayer-1.0_pre6-r5 failed.
!!! Function src_compile, Line 511, Exitcode 2
!!! Failed to build MPlayer!


Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Portage 2.0.51.21-r1 (default-linux/x86/2004.2/gcc34, gcc-3.4.3-20050110, glibc-
2.2.5-r2,glibc-2.3.5-r0, 2.6.11.8 i686)
=================================================================
System uname: 2.6.11.8 i686 AMD Athlon(tm) XP 1600+
Gentoo Base System version 1.6.10
ccache version 2.3 [disabled]
dev-lang/python:     2.1.3-r1, 2.2.3-r5, 2.3.5
sys-apps/sandbox:    1.2.5-r1
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.4.18, 2.4.19-r1, 2.6.11
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -g -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.1/share/config /usr/kde/
3.2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/
shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/
kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/
config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/
share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/
texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -g -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages nostrip sandbox sfperms strict"
GENTOO_MIRRORS="http://mirrors.tds.net/gentoo http://gentoo.oregonstate.edu 
http://www.ibiblio.org/pub/Linux/distributions/gentoo http://csociety-ftp.ecn.
purdue.edu/pub/gentoo/"
LC_ALL="zh_TW.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 X aalib aim alsa apache2 apm arts avi berkdb bitmap-fonts bonobo canna 
cjk crypt curl dga divx4linux dvd eds emacs emboss encode esd fam flac font-
server foomaticdb fortran gd gdbm gif gnome gpm gstreamer gtk gtk2 gtkhtml guile 
iconv imagemagick imap imlib ipv6 java jpeg junit kde leim libg++ libwww mad 
mikmod mmap motif mozilla mp3 mpeg msn ncurses network nls nostrip ogg oggvorbis 
opengl oss pam pdflib perl png postgres python qt quicktime readline samba sdl 
slang spell ssl svga tcpd tiff truetype truetype-fonts type1-fonts unicode 
vorbis xine xml xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2005-05-08 00:59:37 UTC
        

Uhm, what about trying without -g in your C[XX]FLAGS?




Comment 2


Timmy Douglas





          2005-05-08 10:31:39 UTC
        

If mplayer won't compile with -g in cflags, it should at least issue a warning and ignore it. But that would be a bad fix since I want debugging symbols in my mplayer. Anyways, removing -g doesn't help (I think adding -O2 would though...):


cc -c  -I../libvo -I../../libvo -I/usr/X11R6/include -fno-PIC -march=athlon-xp -pipe -frename-registers -fno-pie -fno-pie -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include  -o imdct.o imdct.c
In file included from imdct.c:757:
imdct_3dnow.h: In function `fft_asmb_3dnow':
imdct_3dnow.h:241: error: can't find a register in class `GENERAL_REGS' while reloading `asm'
imdct.c: In function `imdct_do_512_sse':
imdct.c:937: warning: use of memory input without lvalue in asm operand 1 is deprecated
imdct.c:937: warning: use of memory input without lvalue in asm operand 2 is deprecated
make[1]: *** [imdct.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/mplayer-1.0_pre6-r5/work/MPlayer-1.0pre6a/liba52'
make: *** [liba52/liba52.a] Error 2

!!! ERROR: media-video/mplayer-1.0_pre6-r5 failed.





Comment 3


Luca Barbato






          2005-05-08 17:04:14 UTC
        

If you want mplayer with debug information just use the useflag debug and the r6 ebuild.

I will unmask it quite soon




Comment 4


Stian Skjelstad





          2005-06-28 05:54:29 UTC
        

lighten your CFLAGS/CXXFLAGS. mplayer uses a lot of assembler inlines, and stuff
like -frename-registers can mess things up. MPlayer states that if
cflags/cxxflags are given, things can fail, crash etc.




Comment 5


Jakub Moc (RETIRED)






          2006-05-15 10:34:12 UTC
        

*** Bug 133396 has been marked as a duplicate of this bug. ***




Comment 6


Steve Dibb (RETIRED)






          2006-06-21 16:44:00 UTC
        

pre6 has been removed from the tree, any success with pre8?




Comment 7


Timmy Douglas





          2006-06-21 19:27:37 UTC
        

I'm using pre7..compiled by myself outside of portage. I guess I got it to compile by using the default cflags.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

