Title: 850598 – dev-db/sqlite-3.38.5: veryquick.test test hangs on HPPA
URL: https://bugs.gentoo.org/show_bug.cgi?id=850598

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 850598
dev-db/sqlite-3.38.5: veryquick.test test hangs on HPPA
Last modified: 2022-07-25 02:56:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 850598 
      - dev-db/sqlite-3.38.5: veryquick.test test hangs on HPPA


Summary:
dev-db/sqlite-3.38.5: veryquick.test test hangs on HPPA
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

HPPA
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Jakov Smolić








URL:



https://sqlite.org/forum/forumpost/6e...
        




Whiteboard:




Keywords:








Depends on:







Blocks:




850088



 

        Show dependency tree





 





      Reported:
    
2022-06-08 09:07 UTC by Sam James





      Modified:
    
2022-07-25 02:56 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



base-system
hppa









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sam James









          2022-06-08 09:07:37 UTC
        

Reported upstream at https://sqlite.org/forum/forumpost/6e6c6e759b.

3.38.3 and 3.38.5 at least both hang.

----
Portage 3.0.30 (python 3.9.12-final-0, default/linux/hppa/17.0/systemd, gcc-11.2.1, glibc-2.34-r10, 5.18.0-rc7 parisc64)
=================================================================
System uname: Linux-5.18.0-rc7-parisc64-PA8800_-Mako-with-glibc2.34
KiB Mem:     8207148 total,   2457996 free
KiB Swap:    1120444 total,   1120444 free
Timestamp of repository gentoo: Sat, 28 May 2022 01:33:23 +0000
sh bash 5.1_p16
ld GNU ld (Gentoo 2.37_p1 p2) 2.37
app-misc/pax-utils:        1.3.3::gentoo
app-shells/bash:           5.1_p16::gentoo
dev-lang/perl:             5.34.0-r9::gentoo
dev-lang/python:           3.9.12::gentoo, 3.10.4::gentoo
dev-util/cmake:            3.22.4::gentoo
dev-util/meson:            0.60.3::gentoo
sys-apps/baselayout:       2.7-r3::gentoo
sys-apps/sandbox:          2.29::gentoo
sys-apps/systemd:          250.4-r2::gentoo
sys-devel/autoconf:        2.71-r1::gentoo
sys-devel/automake:        1.16.5::gentoo
sys-devel/binutils:        2.37_p1-r2::gentoo
sys-devel/binutils-config: 5.4.1::gentoo
sys-devel/gcc:             11.2.1_p20220115::gentoo
sys-devel/gcc-config:      2.5-r1::gentoo
sys-devel/libtool:         2.4.6-r6::gentoo
sys-devel/make:            4.3::gentoo
sys-kernel/linux-headers:  5.15-r3::gentoo (virtual/os-headers)
sys-libs/glibc:            2.34-r10::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts:

ACCEPT_KEYWORDS="hppa"
ACCEPT_LICENSE="*"
CBUILD="hppa2.0-unknown-linux-gnu"
CFLAGS="-O2 -pipe -march=2.0"
CHOST="hppa2.0-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -march=2.0"
DISTDIR="/var/cache/distfiles"
EMERGE_DEFAULT_OPTS="--nospinner --ask-enter-invalid --quiet-build --keep-going --complete-graph --with-bdeps=y --deep"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe -march=2.0"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs binpkg-multi-instance buildpkg-live config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe -march=2.0"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="C.UTF8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j3 -l4"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
SHELL="/bin/sh"
USE="acl big-endian bzip2 cli crypt fortran gdbm hppa iconv ipv6 libglvnd ncurses nls nptl openmp pam pcre readline seccomp split-usr ssl systemd udev unicode xattr zlib" ADA_TARGET="gnat_2020" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-4 php8-0" POSTGRES_TARGETS="postgres12 postgres13" PYTHON_SINGLE_TARGET="python3_9" PYTHON_TARGETS="python3_9" RUBY_TARGETS="ruby26 ruby27" USERLAND="GNU" VIDEO_CARDS="fbdev dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LC_ALL, LD, LEX, LFLAGS, LIBTOOL, LINGUAS, MAKE, MAKEFLAGS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RANLIB, READELF, RUSTFLAGS, SIZE, STRINGS, STRIP, YACC, YFLAGS




Comment 1


Sam James









          2022-06-08 09:08:05 UTC
        

When running the test suite for SQLite for 3.38.3 (and 3.38.5), things go okay until 'veryquick.test' is run, which hangs indefinitely:

portage   7768  0.1  0.5  52796 42436 pts/2    SNl+ Jun02  14:12 ./testfixture /var/tmp/portage/dev-db/sqlite-3.38.3/work/sqlite-src-3380300-.hppa/test/veryquick.test --verbose=file --output=test-out.txt

The log is hanging at:

$ tail -F temp/build.log
Time: delete_db.test 268 ms
Time: descidx1.test 228 ms
Time: descidx2.test 96 ms
Time: descidx3.test 108 ms
Time: diskfull.test 4864 ms
Time: distinct.test 260 ms
Time: distinct2.test 236 ms
Time: distinctagg.test 268 ms
Time: e_blobbytes.test 1628 ms
Time: e_blobclose.test 112 ms




Comment 2


Sam James









          2022-07-03 23:05:45 UTC
        

3.39.0 seems... fine?

[09:09:36]  <@jsmolic> b087de063bed22932287aff4f12a2e5a3083aa8d is the first fixed commit
[09:09:47]  <@jsmolic> https://sqlite.org/src/info/75a9116e98b9ac5c

which doesn't make much sense, but at least we have a range.




Comment 3


Sam James









          2022-07-25 02:56:30 UTC
        

(In reply to Sam James from comment #2)
> 3.39.0 seems... fine?
> 
> [09:09:36]  <@jsmolic> b087de063bed22932287aff4f12a2e5a3083aa8d is the first
> fixed commit
> [09:09:47]  <@jsmolic> https://sqlite.org/src/info/75a9116e98b9ac5c
> 
> which doesn't make much sense, but at least we have a range.

Updated upstream report: https://sqlite.org/forum/forumpost/91ac9b9dc6.

Let's call it WORKSFORME I guess.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

