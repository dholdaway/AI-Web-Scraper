Title: 362581 – app-admin/conky-1.8.1-r2 failed to configure.
URL: https://bugs.gentoo.org/show_bug.cgi?id=362581

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 362581
app-admin/conky-1.8.1-r2 failed to configure.
Last modified: 2011-04-09 14:58:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 362581 
      - app-admin/conky-1.8.1-r2 failed to configure.


Summary:
app-admin/conky-1.8.1-r2 failed to configure.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-04-08 10:17 UTC by Thomas





      Modified:
    
2011-04-09 14:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas





          2011-04-08 10:17:30 UTC
        

I tried to install conky but it won't configure:

checking for iwlib.h... yes
checking for iw_sockets_open in -liw... no
configure: error: iw_sockets_open not found

the strange thing is: iw_sockets_open seems to be in the file:
cat /usr/include/iwlib.h | grep iw_sockets_open
	iw_sockets_open(void);

The relevant part of the logfile:
configure:13984: checking for iw_sockets_open in -liw
configure:14009: i686-pc-linux-gnu-gcc -o conftest -O2 -march=native -fomit-frame-pointer -fno-ident -pipe  -Wl,-O1 -Wl,--as-needed conftest.c -liw  -lncurses -lm -lX11    >&5
/var/tmp/portage/app-admin/conky-1.8.1-r2/temp/ccbvv644.o: In function `main':
conftest.c:(.text+0x7): undefined reference to `iw_sockets_open'
collect2: ld returned 1 exit status
configure:14009: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Conky"
| #define PACKAGE_TARNAME "conky"
| #define PACKAGE_VERSION "1.8.1"
| #define PACKAGE_STRING "Conky 1.8.1"
| #define PACKAGE_BUGREPORT "brenden1@users.sourceforge.net"
| #define PACKAGE_URL ""
| #define PACKAGE "conky"
| #define VERSION "1.8.1"
| #define _GNU_SOURCE /**/
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define LT_OBJDIR ".libs/"
| #define CONFIG_OUTPUT 1
| #define HAVE_FOPENCOOKIE 1
| #define OWN_WINDOW 1
| #define NCURSES 1
| #define IBM 1
| #define IOSTATS 1
| #define MATH 1
| #define XOAP 1
| #define XOAP_FILE "$HOME/.xoaprc"
| #define WEATHER 1
| #define X11 1
| #define USE_ARGB 1
| #define HAVE_IWLIB_H 1
| /* end confdefs.h.  */
|
| /* Override any GCC internal prototype to avoid an error.
|    Use char because int might match the return type of a GCC
|    builtin and then its argument prototype would still apply.  */
| #ifdef __cplusplus
| extern "C"
| #endif
| char iw_sockets_open ();
| int
| main ()
| {
| return iw_sockets_open ();
|   ;
|   return 0;
| }
configure:14018: result: no
configure:14023: error: iw_sockets_open not found

Reproducible: Always




Comment 1


Wormo (RETIRED)






          2011-04-09 06:38:03 UTC
        

That's a link problem, so it's a problem with the library itself rather than its header file. For instance, maybe your wireless-tools is newer than conky expects, and has a different library API (I notice the conky ebuild does not specify specific versions for wireless-tools).

Try using 'nm' on your /usr/lib/libiw.so and see if 'iw_sockets_open' symbol is really missing. 

Also, please post results of 'emerge --info net-wireless/wireless-tools'




Comment 2


Thomas





          2011-04-09 14:58:33 UTC
        

I rebuildet net-wireless/wireless-tools and now it's working. So for now I don't know what was wrong before.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

