Title: 559760 – dev-libs/nss-3.20 failed to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=559760

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 559760
dev-libs/nss-3.20 failed to emerge
Last modified: 2015-09-21 06:58:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 559760 
      - dev-libs/nss-3.20 failed to emerge


Summary:
dev-libs/nss-3.20 failed to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-09-06 10:47 UTC by lsching17





      Modified:
    
2015-09-21 06:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



hincor









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (dev-libs:nss-3.20:20150906-104135.log,664.72 KB,
                text/plain)

            
2015-09-06 10:49 UTC,

            lsching17




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


lsching17





          2015-09-06 10:47:06 UTC
        

~ $ emerge --info
Portage 2.2.20.1 (python 3.4.1-final-0, default/linux/amd64/13.0/no-multilib, gcc-4.8.5, glibc-2.20-r2, 3.18.13-custom_20150510153510 x86_64)
=================================================================
System uname: Linux-3.18.13-custom_20150510153510-x86_64-Intel-R-_Core-TM-_i7-2600_CPU_@_3.40GHz-with-gentoo-2.2
KiB Mem:    16109960 total,  12012856 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Sun, 06 Sep 2015 00:45:01 +0000
sh bash 4.3_p39
ld GNU ld (Gentoo 2.24 p1.4) 2.24
app-shells/bash:          4.3_p39::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.9-r1::gentoo, 3.4.1::gentoo
dev-util/cmake:           3.2.2::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.17::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.12.6::gentoo, 1.15::gentoo
sys-devel/binutils:       2.24-r3::gentoo
sys-devel/gcc:            4.8.5::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /tmp/root_tmp/portage/tree
    priority: -1000

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -fuse-linker-plugin -march=native -ftree-vectorize"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -fuse-linker-plugin -march=native -ftree-vectorize"
DISTDIR="/tmp/root_tmp/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch parallel-install preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync webrsync-gpg xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.aditsu.net:8000"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8"
PKGDIR="/tmp/root_tmp/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp/root_tmp/portage/tmp"
USE="X a52 aac acl alsa amd64 berkdb bluetooth bzip2 cairo caps cdda cjk cli consolekit cracklib crypt custom-optimization cxx dbus dga dri dts dvd exif flac fortran gdbm gif gnutls gtk iconv icu ipv6 jpeg jpg lcms libnotify lzma lzo mmx mmxext mng modules mp3 mpeg ncurses nls nptl ogg openal opengl openmp opus pam pango pcre pdf png policykit qt4 readline sasl sdl seccomp session smp spell sse sse2 ssl startup-notification svg tcl tcpd threads thunar tiff truetype udev udisks unicode usb vdpau vorbis wifi x264 xattr xft xml xv xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="actions alias auth_basic auth_digest authn_alias authn_anon authn_core authn_dbm authn_default authn_file authz_core authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cache_disk cern_meta charset_lite cgid dav dav_fs dav_lock deflate dir env expires ext_filter file_cache filter headers ident imagemap include info log_config log_forensic logio mime negotiation rewrite reqtimeout setenvif slotmem_shm socache_shmcb status substitute unique_id unixd usertrack version vhost_alias" APACHE2_MPMS="event" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx popcnt mmx mmxext sse sse2 sse3 ssse3 sse4_1 sse4_2" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="intel r600 radeon vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


lsching17





          2015-09-06 10:49:13 UTC
        

Created attachment 411132 [details]
build log




Comment 2


lsching17





          2015-09-06 10:54:55 UTC
        

There are permission errors inside the build log, but i checked that permission is already granted to user "portage".

 ~ $ getfacl /tmp
getfacl: Removing leading '/' from absolute path names
# file: tmp
# owner: root
# group: root
# flags: --t
user::rwx
user:portage:rwx
group::r-x
mask::rwx
other::--x

 ~ $ getfacl /tmp/root_tmp
getfacl: Removing leading '/' from absolute path names
# file: tmp/root_tmp
# owner: root
# group: root
user::rwx
user:portage:--x
group::---
mask::r-x
other::---

 ~ $ getfacl /tmp/root_tmp/portage
getfacl: Removing leading '/' from absolute path names
# file: tmp/root_tmp/portage
# owner: root
# group: root
user::rwx
group::r-x
other::r-x




Comment 3


lsching17





          2015-09-13 01:58:55 UTC
        

i workaround by granting read permission

/tmp/root_tmp

from "user:portage:--x" to "user:portage:r-x"


it is weird that the portage is located at "/tmp/root_tmp/portage" , while it needs read permission of its parent "/tmp/root_tmp"




Comment 4


Mike Gilbert






          2015-09-17 00:00:49 UTC
        

This appears to have nothing to do with nss. Do you get similar failures on other packages?




Comment 5


lsching17





          2015-09-17 07:56:45 UTC
        

(In reply to Mike Gilbert from comment #4)
> This appears to have nothing to do with nss. Do you get similar failures on
> other packages?

This problem occurs for libpcap and spidermonkey (at least)




Comment 6


hincor





          2015-09-17 18:41:08 UTC
        

I can't emerge nss. nsinstall command not found?

Pavilion-Gentoo ~ # MAKEOPTS="-j1" emerge -av1 nss
These are the packages that would be merged, in order:
Calculating dependencies... done!
[ebuild  N     ] dev-libs/nss-3.20::gentoo  USE="cacert nss-pem -utils" 0 KiB
Total: 1 package (1 new), Size of downloads: 0 KiB
Would you like to merge these packages? [Yes/No] y
>>> Verifying ebuild manifests
>>> Emerging (1 of 1) dev-libs/nss-3.20::gentoo
 * nss-3.20.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                                                                      [ ok ]
 * nss-3.14.1-add_spi+cacerts_ca_certs.patch SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                                            [ ok ]
 * nss-pem-015ae754dd9f6fbcd7e52030ec9732eb27fc06a8.tar.bz2 SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                             [ ok ]
>>> Unpacking source...
>>> Unpacking nss-3.20.tar.gz to /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work
>>> Unpacking nss-3.14.1-add_spi+cacerts_ca_certs.patch to /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work
unpack nss-3.14.1-add_spi+cacerts_ca_certs.patch: file format not recognized. Ignoring.
>>> Unpacking nss-pem-015ae754dd9f6fbcd7e52030ec9732eb27fc06a8.tar.bz2 to /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work
>>> Source unpacked in /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work
>>> Preparing source in /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss ...
 * Applying nss-3.17.1-gentoo-fixups.patch ...                                                                                                                                                               [ ok ]
 * Applying nss-3.15-gentoo-fixup-warnings.patch ...                                                                                                                                                         [ ok ]
 * Applying nss-3.14.1-add_spi+cacerts_ca_certs.patch ...                                                                                                                                                    [ ok ]
 * Applying nss-3.15.4-enable-pem.patch ...                                                                                                                                                                  [ ok ]
 * Applying nss-3.14.2-solaris-gcc.patch ...                                                                                                                                                                 [ ok ]
 * Applying nss-cacert-class3.patch ...                                                                                                                                                                      [ ok ]
 * Will copy sources from /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss
 * abi_x86_64.amd64: copying to /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64
 * strip-flags: CFLAGS: changed '-march=core-avx2 -mabm -mrtm -O2 -pipe --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=256' to '-march=core-avx2 -O2 -pipe'
 * strip-flags: CXXFLAGS: changed '-march=core-avx2 -mabm -mrtm -O2 -pipe --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=256' to '-march=core-avx2 -O2 -pipe'
>>> Source prepared.
>>> Configuring source in /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss ...
 * abi_x86_64.amd64: running multilib-minimal_abi_src_configure
>>> Source configured.
>>> Compiling source in /mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss ...
 * abi_x86_64.amd64: running multilib-minimal_abi_src_compile
make -j1 -j1 -C coreconf CC=x86_64-pc-linux-gnu-gcc USE_64=1 
make: Entering directory '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64/coreconf'
cd nsinstall; make export
make[1]: Entering directory '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64/coreconf/nsinstall'
make[1]: Nothing to be done for 'export'.
make[1]: Leaving directory '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64/coreconf/nsinstall'
../coreconf/nsinstall/Linux4.0_x86_64_x86_64-pc-linux-gnu-gcc_glibc_PTH_64_OPT.OBJ/nsinstall -t -m 775 Linux4.0_x86_64_x86_64-pc-linux-gnu-gcc_glibc_PTH_64_OPT.OBJ/imagemagick Linux4.0_x86_64_x86_64-pc-linux-gnu-gcc_glibc_PTH_64_OPT.OBJ/audacious ../dist/Linux4.0_x86_64_x86_64-pc-linux-gnu-gcc_glibc_PTH_64_OPT.OBJ/bin
make: ../coreconf/nsinstall/Linux4.0_x86_64_x86_64-pc-linux-gnu-gcc_glibc_PTH_64_OPT.OBJ/nsinstall: Command not found
../coreconf/rules.mk:99: recipe for target 'libs' failed
make: *** [libs] Error 127
make: Leaving directory '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64/coreconf'
 * ERROR: dev-libs/nss-3.20::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=dev-libs/nss-3.20::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-libs/nss-3.20::gentoo'`.
 * The complete build log is located at '/var/log/portage/dev-libs:nss-3.20:20150917-182930.log'.
 * For convenience, a symlink to the build log is located at '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/temp/build.log'.
 * The ebuild environment file is located at '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/temp/environment'.
 * Working directory: '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss-abi_x86_64.amd64'
 * S: '/mnt/extendedLinux/Portage/build64Pure/portage/dev-libs/nss-3.20/work/nss-3.20/nss'

>>> Failed to emerge dev-libs/nss-3.20, Log file:




Comment 7


Tomáš Mózes





          2015-09-21 06:58:37 UTC
        

It doesn't seem like dev-libs/nss related.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

