Title: 99113 – Daemon init script guidelines
URL: https://bugs.gentoo.org/show_bug.cgi?id=99113

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 99113
Daemon init script guidelines
Last modified: 2005-07-16 08:39:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 99113 
      - Daemon init script guidelines


Summary:
Daemon init script guidelines
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-15 07:31 UTC by Eric Brown





      Modified:
    
2005-07-16 08:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Eric Brown





          2005-07-15 07:31:33 UTC
        

Background:

Services that use the Gentoo init scripts often report a status of [started] or
[OK] even though they fail to start.  The most recent bug like this that I've
found is with snort.  If you have a bad rule, snort will initialize, the
rc-scripts will give it an [OK] status, and then it will die once it parses the
scripts.

The real problem is not that the daemons don't return errors, but that our init
scripts do not make reasonable attempts to verify service startup.  If a Gentoo
init script claims that a service started, it should make an effort to check
that the processes are actually running shortly after a daemon starts, even if
start-stop-darmon says the parent process initialized.

I am aware that there are services that can monitor the status of other services
(app-admin/mon?) but I think this issue is a little different.  If an ebuild
developer knows that an error condition can commonly occur shortly after a
daemon initializes, why not attempt to catch those errors?

I propose increasing developer awareness of this problem, perhaps through some
formal guidelines for ebuild developers.  At the very least, I would like to see
these bugs being acknowledged in bugs.gentoo.org instead of getting the same old
upstream/it's not our fault response.  We are responsible for our init scripts,
and they are important to our users.

Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


SpanKY






          2005-07-15 11:33:45 UTC
        

as you point out, this is a per-package issue

should be brought up on gentoo-dev; bugzilla generates little 'awareness' of issues




Comment 2


Martin Schlemmer (RETIRED)






          2005-07-16 08:39:10 UTC
        

Or file a bug against snort/whatever with a patch if possible.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

