Title: 301008 – sys-fs/lvm2-2.02.56-r2 needs updated sys-fs/udev dependancy
URL: https://bugs.gentoo.org/show_bug.cgi?id=301008

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 301008
sys-fs/lvm2-2.02.56-r2 needs updated sys-fs/udev dependancy
Last modified: 2010-05-01 21:33:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 301008 
      - sys-fs/lvm2-2.02.56-r2 needs updated sys-fs/udev dependancy


Summary:
sys-fs/lvm2-2.02.56-r2 needs updated sys-fs/udev dependancy
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Robin Johnson








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-01-14 17:08 UTC by Daniel Kerwin





      Modified:
    
2010-05-01 21:33 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cardoe









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Kerwin





          2010-01-14 17:08:48 UTC
        

I updated some maschines and a new lvm2 (2.02.56-r2) gets installed. This also requires a new version of udev but udev dowsn#t show up when i run emerge -upvD world. If i update udev seperately it works. udev is part of the world file

Reproducible: Always

Steps to Reproduce:
1.emerge -upvD world
2.
3.

Actual Results:  
These are the packages that would be merged, in order:

Calculating dependencies... done!
[binary     U ] sys-libs/ncurses-5.7-r3 [5.6-r2] USE="cxx%* gpm unicode -ada% -debug -doc -minimal -profile -trace (-nocxx%)"  [0]
[binary  N    ] dev-libs/libffi-3.0.8  USE="-debug -static-libs -test"  [0]
[binary     U ] sys-libs/timezone-data-2009s [2009p] USE="nls"  [0]
[binary  N    ] app-misc/mime-types-8  [0]
[binary     U ] app-portage/portage-utils-0.2.1 [0.1.29] [0]
[binary     U ] sys-apps/net-tools-1.60_p20090728014017-r1 [1.60_p20071202044231-r1] USE="nls -static"  [0]
[binary     U ] sys-libs/gdbm-1.8.3-r4 [1.8.3-r3] USE="berkdb"  [?=>0]
[binary     U ] sys-libs/readline-6.0_p4 [6.0_p3] [0]
[binary  N    ] virtual/libffi-0  [0]
[binary     U ] app-shells/bash-4.0_p35 [4.0_p28] USE="net nls -afs -bashlogger -examples -mem-scramble% -plugins -vanilla"  [0]
[binary     U ] dev-libs/popt-1.15 [1.14] USE="nls"  [0]
[binary     U ] dev-libs/openssl-0.9.8l-r2 [0.9.8k] USE="(sse2) zlib -bindist -gmp -kerberos -test"  [0]
[binary     U ] dev-lang/perl-5.8.8-r8 [5.8.8-r5] USE="berkdb* gdbm -build -debug -doc -ithreads -perlsuid"  [0]
[binary     U ] dev-lang/python-2.6.4 [2.6.2-r1] USE="berkdb* gdbm ipv6 ncurses readline ssl threads (wide-unicode%*) xml -build -doc -examples -sqlite -tk -wininst (-ucs2%)"  [0]
[binary     U ] app-admin/eselect-1.2.8 [1.2.3] USE="-bash-completion -doc"  [0]
[binary     U ] sys-libs/glibc-2.10.1-r1 [2.9_p20081201-r2] USE="(multilib) nls -debug -gd -glibc-omitfp (-hardened) -profile (-selinux) -vanilla"  [0]
[binary     U ] dev-java/java-config-2.1.9-r2 [2.1.9-r1] [0]
[binary     U ] sys-libs/cracklib-2.8.13-r1 [2.8.13] USE="nls python"  [0]
[binary     U ] sys-libs/pam-1.1.0 [1.0.4] USE="cracklib nls -audit -debug% (-selinux) -test -vim-syntax"  [0]
[binary     U ] sys-apps/util-linux-2.16.1 [2.14.2] USE="crypt nls perl%* unicode -loop-aes -old-linux (-selinux) -slang (-uclibc)"  [0]
[uninstall    ] sys-fs/e2fsprogs-1.41.3-r1  USE="nls"  [0]
[blocks b     ] <sys-fs/e2fsprogs-1.41.8 ("<sys-fs/e2fsprogs-1.41.8" is blocking sys-apps/util-linux-2.16.1)
[uninstall    ] sys-libs/e2fsprogs-libs-1.41.3-r1  USE="nls"  [0]
[blocks b     ] <sys-libs/e2fsprogs-libs-1.41.8 ("<sys-libs/e2fsprogs-libs-1.41.8" is blocking sys-apps/util-linux-2.16.1)
[binary     U ] sys-fs/lvm2-2.02.56-r2 [2.02.36] USE="lvm1 readline static (-clvm) (-cman) (-selinux)"  [0]
[blocks B     ] sys-fs/device-mapper ("sys-fs/device-mapper" is blocking sys-fs/lvm2-2.02.56-r2)


Expected Results:  
udev should be updated too. Otherwise you end up with a dead maschine (like i did)

Portage 2.1.6.13 (default/linux/amd64/10.0/server, gcc-4.3.4, glibc-2.9_p20081201-r2, 2.6.31-gentoo-r6-BackEnd-Build-37 x86_64)
=================================================================
System uname: Linux-2.6.31-gentoo-r6-BackEnd-Build-37-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q6600_@_2.40GHz-with-gentoo-1.12.13
Timestamp of tree: Mon, 11 Jan 2010 00:45:01 +0000
app-shells/bash:     4.0_p28
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.4.4-r4, 2.6.2-r1
dev-python/pycrypto: 2.0.1-r8
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=opteron -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=opteron -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--getbinpkgonly --usepkgonly"
FEATURES="ccache confcache distlocks emerge fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ ftp://ftp.ussg.iu.edu/pub/linux/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="en"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://puppet/gentoo-portage"
USE="acl amd64 apache2 bzip2 cli cracklib crypt cups cxx dri fortran gdbm gpm iconv ipv6 mmx modules mudflap multilib mysql ncurses nls nptl nptlonly openmp pam pcre perl pppd python readline reflection session snmp spl sse sse2 ssl sysfs tcpd truetype unicode xml xml2 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fbdev glint intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2010-01-14 18:06:15 UTC
        

Does udev appear in the list of packages when you use the following emerge command?

  emerge -uDpv --with-bdeps=y world




Comment 2


Daniel Kerwin





          2010-01-14 21:08:53 UTC
        

No. This command doesn't make udev show up. This is really strange...




Comment 3


Lars Wendler (Polynomial-C) (RETIRED)






          2010-01-18 14:02:38 UTC
        

Okay, how about this command?

  emerge -uDpv system

In case this doesn't work as well, does the command

  grep -Hr udev /etc/portage

give any output?




Comment 4


Robin Johnson









          2010-01-21 08:07:40 UTC
        

What version of udev did you have before that your system broke?
Upstream's specs simply say that udev should exist, not that it needs to be any minimum version.




Comment 5


Daniel Kerwin





          2010-01-26 12:26:09 UTC
        

When i append udev to my emerge world command:

[binary     U ] sys-fs/udev-146-r1 [141] USE="devfs-compat%* -extras% (-selinux)"  [0]

So it's updated from 141 to 146-r1




Comment 6


Robin Johnson









          2010-02-01 06:48:18 UTC
        

You said that udev-141 didn't work with this new lvm.
Can you find the earliest version that did?
Test the following:
- 141-r1
- 145-r3
- 146-r1





Comment 7


Daniel Kerwin





          2010-02-01 10:36:01 UTC
        

This isn't really the problem. It definitively works with 146-r1 but i have to emerge it manually. The real problem is that it was not part of a world update.




Comment 8


Robin Johnson









          2010-02-01 19:51:02 UTC
        

I need to know if 145 is good enough, to see if the dep needs to be 145 or 146!




Comment 9


Daniel Kerwin





          2010-02-01 20:40:53 UTC
        

I'm sorry but i can't verify that in the moment. All systems are already updated and i don't have a system to test that...




Comment 10


Matthias Schwarzott






          2010-02-23 19:17:01 UTC
        

(In reply to comment #7)
> This isn't really the problem. It definitively works with 146-r1 but i have to

The question is: What does or does not work if udev-version is bad?
Is it about the persistent links /dev/disk/by-id/dm-name-* and /dev/disk/by-id/dm-uuid-*.
If these link do not work, then this is not about too old udev, but too old sys-apps/util-linux, as that does provide /sbin/blkid.
But this all is just a guess.

> emerge it manually. The real problem is that it was not part of a world update.
The problem of udev not being part of your worldfile cannot be solved for lvm2, as lvm2 itself does not depend on udev. There are still people not wanting udev on the system.

So you need to emerge udev yourself if you want to use it (and this will add it to your worldfile).
What I can image is: You did once install some package that did depend on udev, and then unmerged it, so you got udev installed but world does not have and update it.





Comment 11


Doug Goldstein (RETIRED)






          2010-03-24 06:01:11 UTC
        

(In reply to comment #8)
> I need to know if 145 is good enough, to see if the dep needs to be 145 or 146!
> 

At this point, 146-r1 is stable. Would you want to add that?




Comment 12


Robin Johnson









          2010-05-01 21:33:24 UTC
        

.63 and newer have:
|| ( =sys-fs/udev-146-r3 >=sys-fs/udev-151-r2 )

Because of other changes, so this is moot now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

