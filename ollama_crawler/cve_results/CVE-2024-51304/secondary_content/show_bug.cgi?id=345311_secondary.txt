Title: 345311 – portage-2.2.0_alpha1 does not respect things in package.keywords
URL: https://bugs.gentoo.org/show_bug.cgi?id=345311

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 345311
portage-2.2.0_alpha1 does not respect things in package.keywords
Last modified: 2010-11-14 08:52:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 345311 
      - portage-2.2.0_alpha1 does not respect things in package.keywords


Summary:
portage-2.2.0_alpha1 does not respect things in package.keywords
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-11-13 17:58 UTC by dE





      Modified:
    
2010-11-14 08:52 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


dE





          2010-11-13 17:58:35 UTC
        

cat /etc/portage/package.unmask | grep portage
sys-apps/portage

cat /etc/portage/package.keywords | grep openoffice
app-office/openoffice ~amd64

app-office/openoffice
     Available versions:  3.2.0 (~)3.2.1 {aqua bash-completion binfilter cups dbus debug eds elibc_FreeBSD gnome gstreamer gtk java kde kdeenablefinal ldap linguas_af linguas_ar linguas_as_IN linguas_be_BY linguas_bg linguas_bn linguas_br linguas_brx linguas_bs linguas_ca linguas_cs linguas_cy linguas_da linguas_de linguas_dgo linguas_dz linguas_el linguas_en linguas_en_GB linguas_en_US linguas_en_ZA linguas_eo linguas_es linguas_et linguas_eu linguas_fa linguas_fi linguas_fr linguas_ga linguas_gl linguas_gu linguas_he linguas_hi_IN linguas_hr linguas_hu linguas_id linguas_it linguas_ja linguas_ka linguas_kk linguas_km linguas_kn_IN linguas_ko linguas_kok linguas_ks linguas_ku linguas_lt linguas_mai linguas_mk linguas_ml_IN linguas_mn linguas_mni linguas_mr_IN linguas_nb linguas_ne linguas_nl linguas_nn linguas_nr linguas_ns linguas_oc linguas_or_IN linguas_pa_IN linguas_pl linguas_pt linguas_pt_BR linguas_ru linguas_rw linguas_sa_IN linguas_sat linguas_sd linguas_sh linguas_sk linguas_sl linguas_sr linguas_ss linguas_st linguas_sv linguas_sw_TZ linguas_ta linguas_ta_IN linguas_te_IN linguas_tg linguas_th linguas_ti_ER linguas_tn linguas_tr linguas_ts linguas_uk linguas_ur_IN linguas_uz linguas_ve linguas_vi linguas_xh linguas_zh_CN linguas_zh_TW linguas_zu mono nsplugin odk opengl pam templates}                                                   
     Installed versions:  3.2.1(18:59:08 08/16/10)(bash-completion cups dbus java kde nsplugin pam -aqua -binfilter -debug -eds -elibc_FreeBSD -gnome -gstreamer -gtk -kdeenablefinal -ldap -linguas_af -linguas_ar -linguas_as_IN -linguas_be_BY -linguas_bg -linguas_bn -linguas_br -linguas_brx -linguas_bs -linguas_ca -linguas_cs -linguas_cy -linguas_da -linguas_de -linguas_dgo -linguas_dz -linguas_el -linguas_en -linguas_en_GB -linguas_en_US -linguas_en_ZA -linguas_eo -linguas_es -linguas_et -linguas_eu -linguas_fa -linguas_fi -linguas_fr -linguas_ga -linguas_gl -linguas_gu -linguas_he -linguas_hi_IN -linguas_hr -linguas_hu -linguas_id -linguas_it -linguas_ja -linguas_ka -linguas_kk -linguas_km -linguas_kn_IN -linguas_ko -linguas_kok -linguas_ks -linguas_ku -linguas_lt -linguas_mai -linguas_mk -linguas_ml_IN -linguas_mn -linguas_mni -linguas_mr_IN -linguas_nb -linguas_ne -linguas_nl -linguas_nn -linguas_nr -linguas_ns -linguas_oc -linguas_or_IN -linguas_pa_IN -linguas_pl -linguas_pt -linguas_pt_BR -linguas_ru -linguas_rw -linguas_sa_IN -linguas_sat -linguas_sd -linguas_sh -linguas_sk -linguas_sl -linguas_sr -linguas_ss -linguas_st -linguas_sv -linguas_sw_TZ -linguas_ta -linguas_ta_IN -linguas_te_IN -linguas_tg -linguas_th -linguas_ti_ER -linguas_tn -linguas_tr -linguas_ts -linguas_uk -linguas_ur_IN -linguas_uz -linguas_ve -linguas_vi -linguas_xh -linguas_zh_CN -linguas_zh_TW -linguas_zu -odk -opengl -templates)                                                    
     Homepage:            http://go-oo.org
     Description:         OpenOffice.org, a full office productivity suite.

sys-apps/portage
     Available versions:  [P]2.1.6.7 2.1.6.13 2.1.7.17 2.1.8.3 (~)2.1.9.20 (~)2.1.9.21 (~)2.1.9.22 (~)2.2_rc67 (~)2.2_rc98 (~)2.2_rc99 (~)2.2.0_alpha1 **9999 {build doc epydoc +ipc linguas_pl python3 selinux}                    
     Installed versions:  2.2.0_alpha1(22:53:00 10/24/10)(ipc -build -doc -epydoc -linguas_pl -python3 -selinux)
     Homepage:            http://www.gentoo.org/proj/en/portage/index.xml
     Description:         Portage is the package management and distribution system for Gentoo


Portage forces downgrade of openoffice and portage.. so I have to downgrade.

Reproducible: Always

Steps to Reproduce:




emerge --info
Portage 2.2.0_alpha1 (default/linux/amd64/10.0/desktop/kde, gcc-4.4.5, glibc-2.11.2-r0, 2.6.34-zen1 x86_64)
=================================================================
System uname: Linux-2.6.34-zen1-x86_64-AMD_Athlon-tm-_64_X2_Dual-Core_Processor_TK-55-with-gentoo-2.0.1
Timestamp of tree: Fri, 12 Nov 2010 01:45:02 +0000
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r3, 3.1.2-r4
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.3
sys-apps/sandbox:    2.3-r1
sys-devel/autoconf:  2.65-r1
sys-devel/automake:  1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
Repositories: gentoo x11 java-overlay kde-sunset custum
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -fomit-frame-pointer -O2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=native -fomit-frame-pointer -O2"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--complete-graph --with-bdeps=n --binpkg-respect-use=y"
FEATURES="assume-digests binpkg-logs candy distlocks fail-clean fixlafiles fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/x11 /var/lib/layman/java-overlay /var/lib/layman/kde-sunset /usr/local/portage/manual"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 64bit X a-like-o a52 aac acc acl acpi aften alib alsa amd64 amr amrnb amrr animation-rtl animgif apm asf bash-completion bazzar bcmath branding bzip2 cairo cdda cdparanoia cdr cli consolekit cracklib crypt css custom-optimization cxx darcs dbus dga djvu dri dts dv dvd dvdr encode exif fam ffmpeg fftw firefox flac fortran ftp gallium gif git gpm gsl gsm iconv jpeg jpeg2k kde lcms libnotify libsamplerate lzma lzo mad matroska matrox memlimit mercurial mikmod minimal mmx mmxext mng modules mozilla mp3 mp4 mpeg mplayer mudflap multilib musepack ncurses nptl nptlonly nsplugin ntfs oci8-instant-client offensive ogg openal opencore-amr openexr opengl openmp openmpi optimization pam pango pcre pdf plasma png policykit ppds pppd pth python qt3support qt4 quicktime rar raw readline reiserfs sdl session sharedmem shorten slang smp speex spell sse sse2 ssl startup-notification strong-optimization svg symlink sysfs taglib tcpd theora threads tiff truetype unicode vcd vorbis wav wavpack wmf x264 xcb xml xorg xpm xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev synaptics mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" PHP_TARGETS="php5-2" RUBY_TARGETS="ruby18" SANE_BACKENDS="hp" USERLAND="GNU" VIDEO_CARDS="fbdev vesa radeon r300 r600 radeonhd" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jeroen Roovers (RETIRED)






          2010-11-13 18:14:05 UTC
        

profiles/ChangeLog:

  01 Nov 2010; Zac Medico <zmedico@gentoo.org> package.mask:
  Remove portage-2.2 from package.mask since we're now using a keywords mask
  instead. This alleviates issues for cases like bug #336692 in which people
  want to use profiles to unmask portage-2.2.






Comment 2


Zac Medico






          2010-11-13 18:21:05 UTC
        

First of all, you should emerge --sync, since portage-2.2.0_alpha4 is the
latest. Please try to upgrade to the latest portage before doing anything else.

For the masking issue, please post the mask message that's given when you try
to explicitly merge the latest version. For example, since openoffice-3.2.1-r1
is the latest version of openoffice, post the output for this command:

  emerge -p =openoffice-3.2.1-r1




Comment 3


dE





          2010-11-14 08:52:07 UTC
        

Unfortunatley I - 

tar -xf debug debug

Destroying the log, and then I downgraded portage, loosing the debug log.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

