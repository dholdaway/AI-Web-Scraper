Title: 478640 – Plasma: mounts devices as root instead of as user
URL: https://bugs.gentoo.org/show_bug.cgi?id=478640

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 478640
Plasma: mounts devices as root instead of as user
Last modified: 2017-06-25 15:51:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 478640 
      - Plasma: mounts devices as root instead of as user


Summary:
Plasma: mounts devices as root instead of as user
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:



https://bugs.kde.org/show_bug.cgi?id=...
        




Whiteboard:
tracking upstream  
  


Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-07-29 11:11 UTC by Nikos Chantziaras





      Modified:
    
2017-06-25 15:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bugs









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge--info,5.43 KB,
                text/plain)

            
2013-07-29 11:11 UTC,

            Nikos Chantziaras




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nikos Chantziaras





          2013-07-29 11:11:34 UTC
        

Created attachment 354492 [details]
emerge --info

(I reported this upstream:

  https://bugs.kde.org/show_bug.cgi?id=318068

but the bug was closed as "DOWNSTREAM", so I'm opening a new bug here.)

In older KDE versions (I think 4.9, but perhaps it was 4.8) when I clicked on a mountable device icon, for example in Dolphin (but in general everywhere where such icons are offered), the device was mounted immediately without asking me for a root password.

With KDE 4.10 and newer, this doesn't work anymore. I now get prompted for the root password and the mount happens as root.

As a workaround, I now have to mount from the command line which is a hasstle since I prefer using desktop environments instead of the CLI.

Here's an fstab entry for a disk where KDE behaves wrongly:

/dev/sdb1         /windows/D        ntfs-3g  relatime,user,exec,norecover,windows_names,noauto  0 0

Note the "user" option, which allows the filesystem to be mounted by users.

Removing that entry from fstab (in case it interferes with UDisks) does not help.




Comment 1


DrSlony





          2013-08-08 12:14:31 UTC
        

Using gparted I created a partition table and two partitions, one fat32 and one ext2, on a USB stick. When I plug it in, the device notified pops up, I click on usb8_ext2, it opens in Dolphin, and I can't paste anything into it. If I click on USB8_FAT32 I can paste files there. ls shows /run/media/me/usb8_fat32 is owned by root:root and USB8_FAT32 by me:me.




Comment 2


DrSlony





          2013-08-08 12:20:33 UTC
        

ps.
KDE-4.10.5
fuse-2.9.2
sys-fs/udisks-1.0.4-r5 and 2.1.0

Nothing about the device in fstab.




Comment 3


Nikos Chantziaras





          2016-08-06 11:05:58 UTC
        

The issue persists with KDE 5 (Frameworks 5.24, Plasma 5.7.3).

However, now I know it's some issue with udisks2. If I add this to the mount options in fstab:

  uhelper=udisks2

then no root password is needed for mounting. However, now the root password is needed for unmounting!

So the problem isn't really solved, but maybe this provides some hint as what's causing this?




Comment 4


Michael Palimaka (kensington)






          2017-06-25 06:43:58 UTC
        

I haven't tested with ConsoleKit recently, but this works correctly for me now with elogind.




Comment 5


Nikos Chantziaras





          2017-06-25 15:51:16 UTC
        

I switched from openrc to systemd, and it works now. Issue could still be there with openrc, I just don't know.

So "works for me", I guess?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

