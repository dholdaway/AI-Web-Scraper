Title: 292746 – sys-devel/gcc-4.3.4 fails with "Bootstrap comparison failure!" on powerpc
URL: https://bugs.gentoo.org/show_bug.cgi?id=292746

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 292746
sys-devel/gcc-4.3.4 fails with "Bootstrap comparison failure!" on powerpc
Last modified: 2009-11-18 20:43:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 292746 
      - sys-devel/gcc-4.3.4 fails with "Bootstrap comparison failure!" on powerpc


Summary:
sys-devel/gcc-4.3.4 fails with "Bootstrap comparison failure!" on powerpc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-11-11 02:46 UTC by matt





      Modified:
    
2009-11-18 20:43 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ppc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


matt





          2009-11-11 02:46:29 UTC
        

make "DESTDIR=" "RPATH_ENVVAR=LD_LIBRARY_PATH" "TARGET_SUBDIR=powerpc-unknown-linux-gnu" "bindir=/usr/powerpc-unknown-linux-gnu/gcc-bin/4.3.4" "datadir=/usr/share/gcc-data/powerpc-unknown-linux-gnu/4.3.4" "exec_prefix=/usr" "includedir=/usr/lib/gcc/powerpc-unknown-linux-gnu/4.3.4/include" "datarootdir=/usr/share" "docdir=/usr/share/doc" "infodir=/usr/share/gcc-data/powerpc-unknown-linux-gnu/4.3.4/info" "pdfdir=/usr/share/doc" "htmldir=/usr/share/doc" "libdir=/usr/lib" "libexecdir=/usr/libexec" "lispdir=" "localstatedir=/usr/var" "mandir=/usr/share/gcc-data/powerpc-unknown-linux-gnu/4.3.4/man" "oldincludedir=/usr/include" "prefix=/usr" "sbindir=/usr/sbin" "sharedstatedir=/usr/com" "sysconfdir=/usr/etc" "tooldir=/usr/powerpc-unknown-linux-gnu" "build_tooldir=/usr/powerpc-unknown-linux-gnu" "target_alias=powerpc-unknown-linux-gnu" "BISON=bison" "CC_FOR_BUILD=powerpc-unknown-linux-gnu-gcc" "CFLAGS_FOR_BUILD=-g -pipe -mcpu=7400" "CXX_FOR_BUILD=powerpc-unknown-linux-gnu-g++" "EXPECT=expect" "FLEX=flex" "INSTALL=/usr/bin/install -c" "INSTALL_DATA=/usr/bin/install -c -m 644" "INSTALL_PROGRAM=/usr/bin/install -c" "INSTALL_SCRIPT=/usr/bin/install -c" "LEX=flex" "M4=m4" "MAKE=make" "RUNTEST=runtest" "RUNTESTFLAGS=" "SHELL=/bin/sh" "YACC=bison -y" "`echo 'ADAFLAGS=' | sed -e s'/[^=][^=]*=$/XFOO=/'`" "AR_FLAGS=rc" "`echo 'BOOT_ADAFLAGS=-gnatpg -gnata' | sed -e s'/[^=][^=]*=$/XFOO=/'`" "BOOT_CFLAGS=-g -pipe -mcpu=7400" "BOOT_LDFLAGS=" "CFLAGS=-g -pipe -mcpu=7400" "CXXFLAGS=-g -pipe -mcpu=7400" "LDFLAGS=-Wl,-O1" "LIBCFLAGS=-g -pipe -mcpu=7400" "LIBCXXFLAGS=-g -pipe -mcpu=7400 -fno-implicit-templates" "STAGE1_CFLAGS=-O" "STAGE1_CHECKING=--enable-checking=yes,types" "STAGE1_LANGUAGES=c" "STAGE2_CFLAGS=-g -pipe -mcpu=7400" "STAGE3_CFLAGS=-g -pipe -mcpu=7400" "STAGE4_CFLAGS=-g -pipe -mcpu=7400" "GNATBIND=no" "GNATMAKE=no" "AR_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/ar" "AS_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/as" "CC_FOR_TARGET=/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/xgcc -B/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/ -B/usr/powerpc-unknown-linux-gnu/bin/ -B/usr/powerpc-unknown-linux-gnu/lib/ -isystem /usr/powerpc-unknown-linux-gnu/include -isystem /usr/powerpc-unknown-linux-gnu/sys-include" "CFLAGS_FOR_TARGET=-O2 -g -g -pipe -mcpu=7400  " "CPPFLAGS_FOR_TARGET=" "CXX_FOR_TARGET=/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/g++ -B/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/ -nostdinc++  -L/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/powerpc-unknown-linux-gnu/libstdc++-v3/src -L/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/powerpc-unknown-linux-gnu/libstdc++-v3/src/.libs -B/usr/powerpc-unknown-linux-gnu/bin/ -B/usr/powerpc-unknown-linux-gnu/lib/ -isystem /usr/powerpc-unknown-linux-gnu/include -isystem /usr/powerpc-unknown-linux-gnu/sys-include" "CXXFLAGS_FOR_TARGET=-g -pipe -mcpu=7400   -D_GNU_SOURCE" "DLLTOOL_FOR_TARGET=dlltool" "GCJ_FOR_TARGET=-B/usr/powerpc-unknown-linux-gnu/bin/ -B/usr/powerpc-unknown-linux-gnu/lib/ -isystem /usr/powerpc-unknown-linux-gnu/include -isystem /usr/powerpc-unknown-linux-gnu/sys-include" "GFORTRAN_FOR_TARGET=/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/gfortran -B/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build/./gcc/ -B/usr/powerpc-unknown-linux-gnu/bin/ -B/usr/powerpc-unknown-linux-gnu/lib/ -isystem /usr/powerpc-unknown-linux-gnu/include -isystem /usr/powerpc-unknown-linux-gnu/sys-include" "LD_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/ld" "LIPO_FOR_TARGET=lipo" "LDFLAGS_FOR_TARGET=" "LIBCFLAGS_FOR_TARGET=-O2 -g -g -pipe -mcpu=7400  " "LIBCXXFLAGS_FOR_TARGET=-g -pipe -mcpu=7400   -D_GNU_SOURCE -fno-implicit-templates" "NM_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/nm" "OBJDUMP_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/objdump" "RANLIB_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/ranlib" "STRIP_FOR_TARGET=/usr/powerpc-unknown-linux-gnu/bin/strip" "WINDRES_FOR_TARGET=windres" "WINDMC_FOR_TARGET=windmc" "`echo 'LANGUAGES=' | sed -e s'/[^=][^=]*=$/XFOO=/'`" "LEAN=:" "CONFIG_SHELL=/bin/sh" "MAKEINFO=makeinfo --split-size=5000000 --split-size=5000000"  compare
make[2]: Entering directory `/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build'
make[3]: Entering directory `/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build'
rm -f stage_current
make[3]: Leaving directory `/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build'
Comparing stages 2 and 3
warning: ./cc1-checksum.o differs
warning: ./cc1plus-checksum.o differs
Bootstrap comparison failure!
./dbxout.o differs
./fortran/trans-decl.o differs
./varasm.o differs
make[2]: *** [compare] Error 1
make[2]: Leaving directory `/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build'
make[1]: *** [stage3-bubble] Error 2
make[1]: Leaving directory `/mnt/myusbdisk/tmp/portage_tmpdir/portage/sys-devel/gcc-4.3.4/work/build'
make: *** [bootstrap-lean] Error 2
 * 
 * ERROR: sys-devel/gcc-4.3.4 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4874:  Called toolchain_src_compile
 *             environment, line 5400:  Called gcc_src_compile
 *             environment, line 3076:  Called gcc_do_make
 *             environment, line 2866:  Called die
 * The specific snippet of code:
 *       emake LDFLAGS="${LDFLAGS}" STAGE1_CFLAGS="${STAGE1_CFLAGS}" LIBPATH="${LIBPATH}" BOOT_CFLAGS="${BOOT_CFLAGS}" ${GCC_MAKE_TARGET} || die "emake failed with ${GCC_MAKE_TARGET}";
 *  The die message:
 *   emake failed with bootstrap-lean




Portage 2.1.6.13 (default/linux/powerpc/ppc32/10.0, gcc-4.3.2, glibc-2.9_p20081201-r2, 2.6.30-gentoo-r4 ppc)
=================================================================
System uname: Linux-2.6.30-gentoo-r4-ppc-7447A,_altivec_supported-with-gentoo-1.12.13
Timestamp of tree: Sat, 07 Nov 2009 18:45:01 +0000
app-shells/bash:     4.0_p28
dev-lang/python:     2.6.2-r1
dev-util/cmake:      2.6.4
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.63-r1
sys-devel/automake:  1.6.3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="ppc"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-g -pipe -mcpu=7400 -maltivec -mabi=altivec"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-g -pipe -mcpu=7400 -maltivec -mabi=altivec"
DISTDIR="/usr/portage/distfiles"
FEATURES="collosion-protect distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US"
LC_ALL="en_US"
LDFLAGS="-Wl,-O1"
LINGUAS="en en_US"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://192.168.168.16/portage"


[ebuild     U ] sys-devel/gcc-4.3.4 [4.3.2-r3] USE="altivec fortran gtk mudflap nls nptl openmp -bootstrap -build -doc (-fixed-point) -gcj (-hardened) -ip28 -ip32r10k (-libffi) (-multilib) -multislot (-n32) (-n64) -nocxx -nopie -objc -objc++ -objc-gc -test -vanilla" 0 kB




Comment 1


SpanKY






          2009-11-18 03:52:45 UTC
        

try not using the -mcpu=7400 in your CFLAGS




Comment 2


matt





          2009-11-18 20:43:58 UTC
        

ok, somehow it built fine and i missed it after i filled the bug.  thanks anyway :)

matt@ibookx ~ $ eix -sI gcc
[I] sys-devel/gcc
     Available versions:  
        (2.95)  2.95.3-r9 ~2.95.3-r10!s
        (3.1)   -3.1.1-r2
        (3.2)   **3.2.2!s 3.2.3-r4
        (3.3)   ~*3.3.6-r1!s
        (3.4)   3.4.6-r2!s
        (4.0)   ~*4.0.4!s
        (4.1)   4.1.2!s
        (4.2)   ~4.2.4-r1!s
        (4.3)   4.3.2-r3!s ~4.3.2-r4!s ~4.3.3-r2!s 4.3.4!s
        (4.4)   ~4.4.1!s ~4.4.2!s
        {altivec bootstrap boundschecking build d doc fixed-point fortran gcj graphite gtk hardened ip28 ip32r10k java libffi mudflap multilib multislot n32 n64 nls nocxx nopie nossp nptl objc objc++ objc-gc openmp static test vanilla}
     Installed versions:  4.3.4(4.3)!s(04:20:06 AM 11/13/2009)(altivec fortran gtk mudflap nls nptl openmp -bootstrap -build -doc -fixed-point -gcj -hardened -ip28 -ip32r10k -libffi -multilib -multislot -n32 -n64 -nocxx -nopie -objc -objc++ -objc-gc -test -vanilla)
     Homepage:            http://gcc.gnu.org/
     Description:         The GNU Compiler Collection. Includes C/C++, java compilers, pie+ssp extensions, Haj Ten Brugge runtime bounds checking










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

