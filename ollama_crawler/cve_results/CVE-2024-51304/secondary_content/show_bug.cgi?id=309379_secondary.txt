Title: 309379 – Portage-2.1.7.17 NOT merged due file collisions
URL: https://bugs.gentoo.org/show_bug.cgi?id=309379

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 309379
Portage-2.1.7.17 NOT merged due file collisions
Last modified: 2010-03-14 21:38:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 309379 
      - Portage-2.1.7.17 NOT merged due file collisions


Summary:
Portage-2.1.7.17 NOT merged due file collisions
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Unclassified

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-03-14 14:39 UTC by Carlos Eduardo de Andrade





      Modified:
    
2010-03-14 21:38 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Carlos Eduardo de Andrade





          2010-03-14 14:39:43 UTC
        

I'm trying update sys-apps/portage-2.1.6.13 to sys-apps/portage-2.1.7.17 when I receive the file collision message. But, emerge doesn't reach the owner of this files. In fact, the files are part of portage package and it doesn't update itself.



Reproducible: Always

Steps to Reproduce:
1. emerge -v portage

Actual Results:  
 package sys-apps/portage-2.1.7.17 NOT merged                          
 *                                                                       
 * Detected file collision(s):                                           
 *                                                                       
 *      /usr/lib64/portage/bin/dohtml.py                                 
 *      /usr/lib64/portage/bin/xpak-helper.py                            
 *      /usr/lib64/portage/bin/ebuild-helpers/4/dodoc                    
 *      /usr/lib64/portage/pym/_emerge/EbuildProcess.py                  
 *      /usr/lib64/portage/pym/_emerge/AsynchronousTask.py               
 *      /usr/lib64/portage/pym/_emerge/EbuildBuildDir.py                 
 *      /usr/lib64/portage/pym/_emerge/UnmergeDepPriority.py             
 *      /usr/lib64/portage/pym/_emerge/Scheduler.py                      
 *      /usr/lib64/portage/pym/_emerge/UseFlagDisplay.py                 
 *      /usr/lib64/portage/pym/_emerge/DepPrioritySatisfiedRange.py      
 *      /usr/lib64/portage/pym/_emerge/EbuildFetcher.py                  
 *      /usr/lib64/portage/pym/_emerge/ProgressHandler.py                
 *      /usr/lib64/portage/pym/_emerge/PackageCounters.py                
 *      /usr/lib64/portage/pym/_emerge/emergelog.py                      
 *      /usr/lib64/portage/pym/_emerge/JobStatusDisplay.py               
 *      /usr/lib64/portage/pym/_emerge/AbstractDepPriority.py            
 *      /usr/lib64/portage/pym/_emerge/getloadavg.py                     
 *      /usr/lib64/portage/pym/_emerge/TaskScheduler.py                  
 *      /usr/lib64/portage/pym/_emerge/EbuildBuild.py                    
 *      /usr/lib64/portage/pym/_emerge/BinpkgPrefetcher.py               
 *      /usr/lib64/portage/pym/_emerge/main.py                           
 *      /usr/lib64/portage/pym/_emerge/actions.py                        
 *      /usr/lib64/portage/pym/_emerge/BinpkgVerifier.py                 
 *      /usr/lib64/portage/pym/_emerge/QueueScheduler.py                 
 *      /usr/lib64/portage/pym/_emerge/MiscFunctionsProcess.py           
 *      /usr/lib64/portage/pym/_emerge/SequentialTaskQueue.py            
 *      /usr/lib64/portage/pym/_emerge/PackageUninstall.py               
 *      /usr/lib64/portage/pym/_emerge/RootConfig.py                     
 *      /usr/lib64/portage/pym/_emerge/SetArg.py                         
 *      /usr/lib64/portage/pym/_emerge/EbuildExecuter.py                 
 *      /usr/lib64/portage/pym/_emerge/DepPriority.py                    
 *      /usr/lib64/portage/pym/_emerge/BlockerCache.py                   
 *      /usr/lib64/portage/pym/_emerge/show_invalid_depstring_notice.py  
 *      /usr/lib64/portage/pym/_emerge/AbstractPollTask.py               
 *      /usr/lib64/portage/pym/_emerge/EbuildBinpkg.py                   
 *      /usr/lib64/portage/pym/_emerge/TaskSequence.py                   
 *      /usr/lib64/portage/pym/_emerge/SubProcess.py                     
 *      /usr/lib64/portage/pym/_emerge/stdout_spinner.py                 
 *      /usr/lib64/portage/pym/_emerge/Blocker.py                        
 *      /usr/lib64/portage/pym/_emerge/BinpkgExtractorAsync.py           
 *      /usr/lib64/portage/pym/_emerge/BlockerDepPriority.py             
 *      /usr/lib64/portage/pym/_emerge/Dependency.py                     
 *      /usr/lib64/portage/pym/_emerge/UninstallFailure.py               
 *      /usr/lib64/portage/pym/_emerge/EbuildMerge.py                    
 *      /usr/lib64/portage/pym/_emerge/PollConstants.py                  
 *      /usr/lib64/portage/pym/_emerge/PackageMerge.py                   
 *      /usr/lib64/portage/pym/_emerge/EbuildFetchonly.py                
 *      /usr/lib64/portage/pym/_emerge/SpawnProcess.py                   
 *      /usr/lib64/portage/pym/_emerge/Task.py                           
 *      /usr/lib64/portage/pym/_emerge/BinpkgFetcher.py                  
 *      /usr/lib64/portage/pym/_emerge/search.py                         
 *      /usr/lib64/portage/pym/_emerge/is_valid_package_atom.py          
 *      /usr/lib64/portage/pym/_emerge/DepPriorityNormalRange.py         
 *      /usr/lib64/portage/pym/_emerge/Package.py                        
 *      /usr/lib64/portage/pym/_emerge/PollScheduler.py                  
 *      /usr/lib64/portage/pym/_emerge/create_depgraph_params.py         
 *      /usr/lib64/portage/pym/_emerge/EbuildPhase.py                    
 *      /usr/lib64/portage/pym/_emerge/DependencyArg.py                  
 *      /usr/lib64/portage/pym/_emerge/create_world_atom.py              
 *      /usr/lib64/portage/pym/_emerge/format_size.py                    
 *      /usr/lib64/portage/pym/_emerge/PipeReader.py                     
 *      /usr/lib64/portage/pym/_emerge/unmerge.py                        
 *      /usr/lib64/portage/pym/_emerge/BlockerDB.py                      
 *      /usr/lib64/portage/pym/_emerge/SlotObject.py                     
 *      /usr/lib64/portage/pym/_emerge/Binpkg.py                         
 *      /usr/lib64/portage/pym/_emerge/PollSelectAdapter.py              
 *      /usr/lib64/portage/pym/_emerge/countdown.py                      
 *      /usr/lib64/portage/pym/_emerge/AtomArg.py                        
 *      /usr/lib64/portage/pym/_emerge/EbuildMetadataPhase.py            
 *      /usr/lib64/portage/pym/_emerge/_flush_elog_mod_echo.py           
 *      /usr/lib64/portage/pym/_emerge/changelog.py                      
 *      /usr/lib64/portage/pym/_emerge/clear_caches.py                   
 *      /usr/lib64/portage/pym/_emerge/PackageArg.py                     
 *      /usr/lib64/portage/pym/_emerge/FakeVartree.py                    
 *      /usr/lib64/portage/pym/_emerge/RepoDisplay.py                    
 *      /usr/lib64/portage/pym/_emerge/MetadataRegen.py                  
 *      /usr/lib64/portage/pym/_emerge/MergeListItem.py                  
 *      /usr/lib64/portage/pym/_emerge/PackageVirtualDbapi.py            
 *      /usr/lib64/portage/pym/_emerge/depgraph.py                       
 *      /usr/lib64/portage/pym/_emerge/_find_deep_system_runtime_deps.py 
 *      /usr/lib64/portage/pym/_emerge/CompositeTask.py                  
 *      /usr/lib64/portage/pym/_emerge/userquery.py                      
 *      /usr/lib64/portage/pym/portage/tests/dep/testAtom.py             
 *      /usr/lib64/portage/pym/portage/tests/ebuild/test_pty_eof.py      
 *      /usr/lib64/portage/pym/portage/tests/ebuild/test_array_fromfile_eof.py
 *      /usr/lib64/portage/bin/ebuild-helpers/4/dosed                         
 *      /usr/lib64/portage/bin/ebuild-helpers/4/dohard                        
 *                                                                            
 * Searching all installed packages for file collisions...                    
 *                                                                            
 * Press Ctrl-C to Stop                                                       
 *                                                                            
 * None of the installed packages claim the file(s).                          
 *                                                                            
 * Package 'sys-apps/portage-2.1.7.17' NOT merged due to file collisions.     
 * If necessary, refer to your elog messages for the whole content of the     
 * above message.

Expected Results:  
Portage updated correctly




Comment 1


Carlos Eduardo de Andrade





          2010-03-14 14:41:29 UTC
        

Portage 14554-svn (default/linux/amd64/10.0, gcc-4.3.4, glibc-2.9_p20081201-r2, 2.6.31-gentoo-r6 x86_64)                                                                                                      
=================================================================                                      
System uname: Linux-2.6.31-gentoo-r6-x86_64-Intel-R-_Core-TM-2_CPU_T7200_@_2.00GHz-with-gentoo-1.12.13 
Timestamp of tree: Sun, 14 Mar 2010 14:00:01 +0000                                                     
ccache version 2.4 [enabled]                                                                           
app-shells/bash:     4.0_p35                                                                           
dev-java/java-config: 2.1.9-r1                                                                         
dev-lang/python:     2.4.4-r13, 2.5.4-r3, 2.6.4                                                        
dev-util/ccache:     2.4-r7                                                                            
dev-util/cmake:      2.6.4-r3                                                                          
sys-apps/baselayout: 1.12.13                                                                           
sys-apps/sandbox:    1.6-r2                                                                            
sys-devel/autoconf:  2.13, 2.63-r1                                                                     
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2                                              
sys-devel/binutils:  2.18-r3                                                                           
sys-devel/gcc:       4.1.2, 4.3.4                                                                      
sys-devel/gcc-config: 1.4.1                                                                            
sys-devel/libtool:   2.2.6b                                                                            
virtual/os-headers:  2.6.27-r2                                                                         
ACCEPT_KEYWORDS="amd64"                                                                                
CBUILD="x86_64-pc-linux-gnu"                                                                           
CFLAGS="-O2 -march=core2 -mtune=core2 -mfpmath=sse,387 -pipe -fomit-frame-pointer -maccumulate-outgoing-args -ftracer -fpeel-loops -fprefetch-loop-arrays -minline-stringops-dynamically"                     
CHOST="x86_64-pc-linux-gnu"                                                                            
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"                             
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"                                                      
CPPFLAGS="-O2 -march=core2 -mtune=core2 -mfpmath=sse,387 -pipe -fomit-frame-pointer -maccumulate-outgoing-args -ftracer -fpeel-loops -fprefetch-loop-arrays -minline-stringops-dynamically"                   
CXXFLAGS="-O2 -march=core2 -mtune=core2 -mfpmath=sse,387 -pipe -fomit-frame-pointer -maccumulate-outgoing-args -ftracer -fpeel-loops -fprefetch-loop-arrays -minline-stringops-dynamically"                   
DISTDIR="/usr/portage/distfiles"                                                                       
FEATURES="ccache collision-protect distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"                                                                       
GENTOO_MIRRORS=" http://www.las.ic.unicamp.br/pub/gentoo ftp://ftp.las.ic.unicamp.br/pub/gentoo http://gentoo.c3sl.ufpr.br/gentoo ftp://gentoo.c3sl.ufpr.br http://gentoo.chem.wisc.edu/gentoo ftp://gentoo.chem.wisc.edu/gentoo http://ftp.ucsb.edu/pub/mirrors/linux/gentoo ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo http://gentoo.inf.elte.hu http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo "                                                                     
LANG="pt_BR"                                                                                           
LDFLAGS="-Wl,-O1"                                                                                      
LINGUAS="pt_BR en en_US"                                                                               
MAKEOPTS="-j4"                                                                                         
PKGDIR="/home/pkg"                                                                                     
PORTAGE_CONFIGROOT="/"                                                                                 
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"                
PORTAGE_TMPDIR="/var/tmp"                                                                              
PORTDIR="/usr/portage"                                                                                 
PORTDIR_OVERLAY="/usr/portage"                                                                         
SYNC="rsync://rsync.gentoo.org/gentoo-portage"                                                         
USE="X a52 aac accessibility acl acpi aiglx alsa amd64 amule apache2 apm arts audiofile avi bash-completion berkdb bitmap-fonts bluetooth bzip2 cairo canon cdparanoia cdr cli consolekit core2 cracklib crypt cscope ctype cups curl cxx dbus devil dia divx doc double-precision dri dts dvb dvd dvdr dvdread emacs embedded emf encode examples exif ffmpeg fftw firefox flac fontconfig foomaticdb fortran ftp fuse gadu gcj gd gdbm gif glibc-omitfp glitz glut gmp google-gadgets gpm graphviz groupwise gstreamer gtk gtk2 hal highlight history htmlhandbook hunspell iconv icu ieee1394 imagemagick imlib ipv6 jabber jadetex java javascript jpeg jpeg2k jpg kate kde kdehiddenvisibility kpathsea lame latex libass live lm_sensors logitech-mouse loop-aes lua lzma lzo mad matroska midi mime mjpeg mmx mmx2 mmxext mng modules mp3 mpeg mplayer msn mudflap multilib multimedia musepack mysql ncurses netmeeting network nls nowlistening nptl nptlonly nsplugin ntfs nvidia ofx ogg opengl openmp optimization pam pcmcia pcre pda pdf perl php pic plotutils png pnp posix postscript ppds pppd python qt qt3support qt4 quicktime rar readline realmedia reflection rtc samba sdl session skype slp smp sms spell spl sql sqlite sqlite3 sse sse2 sse3 ssh ssl ssse3 statistics strong-optimization subversion svg synaptics sysfs tcl tcltk tcpd texlive texteffect theora threads tiff tk translator truetype truetype-fonts trusted type1 type1-fonts udev unicode usb userlocales v4l v4l2 vorbis webkit wifi winpopup wma wmf wmp wmv wxwindows x264 xanim xattr xcb xcomposite xforms xine xinerama xml xmp xorg xosd xpm xulrunner xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="canon" ELIBC="glibc" INPUT_DEVICES="synaptics evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="pt_BR en en_US" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia nv"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Carlos Eduardo de Andrade





          2010-03-14 14:43:54 UTC
        

This can be useful (a bug on portageq?)

root# portageq
/usr/lib/portage/bin/portageq: line 10: /usr/lib/portage/bin/portageq: arguments list too long ("Lista de argumentos muito longa")
/usr/lib/portage/bin/portageq: line 10: /usr/lib/portage/bin/portageq: Success ("Sucesso")




Comment 3


Samuli Suominen (RETIRED)






          2010-03-14 15:02:24 UTC
        

(In reply to comment #1)
> Portage 14554-svn (default/linux/amd64/10.0, gcc-4.3.4, glibc-2.9_p20081201-r2,
> 2.6.31-gentoo-r6 x86_64)                                                        

Portage 14554-svn?  Doesn't look like 2.1.6.13 to me.




Comment 4


Carlos Eduardo de Andrade





          2010-03-14 15:16:09 UTC
        

> Portage 14554-svn?  Doesn't look like 2.1.6.13 to me.

I'm re-emerge portage-2.1.6.13, and then emerge portage-2.1.7.17. This last was emerged successful but file collisions have been occurred.

Thanks for looking this.

I'm closing this bug.





Comment 5


Zac Medico






          2010-03-14 21:38:27 UTC
        

BTW, you might want to remove collision-protect from FEATURES since protect-owned is enabled by default and it tolerates orphans.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

