Title: 147893 – dev-perl/DBD-Pg fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=147893

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 147893
dev-perl/DBD-Pg fails to compile
Last modified: 2007-05-11 23:30:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 147893 
      - dev-perl/DBD-Pg fails to compile


Summary:
dev-perl/DBD-Pg fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-17 01:01 UTC by Tobias Scherbaum (RETIRED)





      Modified:
    
2007-05-11 23:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tobias Scherbaum (RETIRED)






          2006-09-17 01:01:27 UTC
        

Both 1.43 and 1.48 fail.

>>> Compiling source in /var/tmp/portage/DBD-Pg-1.43/work/DBD-Pg-1.43 ...
/var/tmp/portage/DBD-Pg-1.43/work/DBD-Pg-1.43
 * Using ExtUtils::MakeMaker
Configuring DBD::Pg 1.43
Remember to actually read the README file!
OS: linux
PostgreSQL version: 80008
Checking if your kit is complete...
Looks good
Using DBI 1.50 (for perl 5.008008 on powerpc-linux) installed in /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/
Writing Makefile for DBD::Pg
cp Pg.pm blib/lib/DBD/Pg.pm
/usr/bin/perl5.8.8 -p -e "s/~DRIVER~/Pg/g" /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI//Driver.xst > Pg.xsi
/usr/bin/perl5.8.8 /usr/lib/perl5/5.8.8/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5.8.8/ExtUtils/typemap  Pg.xs > Pg.xsc && mv Pg.xsc Pg.c
powerpc-unknown-linux-gnu-gcc -c  -I/usr/include/postgresql/pgsql -I/usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/ -DDEBUGGING -fno-strict-aliasing -pipe -Wdeclaration-after-statement -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPGLIBVERSION=80008 -O1 -mcpu=7450 -maltivec -mabi=altivec -mpowerpc-gfxopt -pipe  -DPERL_EXTMALLOC_DEF -Dmalloc=Perl_malloc -Dfree=Perl_mfree -Drealloc=Perl_realloc -Dcalloc=Perl_calloc -DVERSION=\"1.43\" -DXS_VERSION=\"1.43\" -fPIC "-I/usr/lib/perl5/5.8.8/powerpc-linux/CORE"   Pg.c
In file included from /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/DBIXS.h:31,
                 from Pg.h:45,
                 from Pg.xs:14:
/usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/dbipport.h:227:1: warning: "PERL_UNUSED_DECL" redefined
In file included from /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/DBIXS.h:19,
                 from Pg.h:45,
                 from Pg.xs:14:
/usr/lib/perl5/5.8.8/powerpc-linux/CORE/perl.h:163:1: warning: this is the location of the previous definition
powerpc-unknown-linux-gnu-gcc -c  -I/usr/include/postgresql/pgsql -I/usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/ -DDEBUGGING -fno-strict-aliasing -pipe -Wdeclaration-after-statement -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPGLIBVERSION=80008 -O1 -mcpu=7450 -maltivec -mabi=altivec -mpowerpc-gfxopt -pipe  -DPERL_EXTMALLOC_DEF -Dmalloc=Perl_malloc -Dfree=Perl_mfree -Drealloc=Perl_realloc -Dcalloc=Perl_calloc -DVERSION=\"1.43\" -DXS_VERSION=\"1.43\" -fPIC "-I/usr/lib/perl5/5.8.8/powerpc-linux/CORE"   dbdimp.c
In file included from /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/DBIXS.h:31,
                 from Pg.h:45,
                 from dbdimp.c:16:
/usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/dbipport.h:227:1: warning: "PERL_UNUSED_DECL" redefined
In file included from /usr/lib/perl5/vendor_perl/5.8.8/powerpc-linux/auto/DBI/DBIXS.h:19,
                 from Pg.h:45,
                 from dbdimp.c:16:
/usr/lib/perl5/5.8.8/powerpc-linux/CORE/perl.h:163:1: warning: this is the location of the previous definition
dbdimp.c:117: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'dbd_db_txn_status'
dbdimp.c: In function '_result':
dbdimp.c:138: error: 'PG_DIAG_SQLSTATE' undeclared (first use in this function)
dbdimp.c:138: error: (Each undeclared identifier is reported only once
dbdimp.c:138: error: for each function it appears in.)
dbdimp.c:138: warning: comparison between pointer and integer
dbdimp.c:138: warning: pointer/integer type mismatch in conditional expression
dbdimp.c: At top level:
dbdimp.c:399: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'dbd_db_txn_status'
dbdimp.c:401: error: expected identifier or '(' before '{' token
dbdimp.c: In function 'dbd_db_rollback_commit':
dbdimp.c:419: error: 'PGTransactionStatusType' undeclared (first use in this function)
dbdimp.c:419: error: expected ';' before 'tstatus'
dbdimp.c:420: warning: ISO C90 forbids mixed declarations and code
dbdimp.c:434: error: 'tstatus' undeclared (first use in this function)
dbdimp.c:435: error: 'PQTRANS_IDLE' undeclared (first use in this function)
dbdimp.c:442: error: 'PQTRANS_UNKNOWN' undeclared (first use in this function)
dbdimp.c: In function 'dbd_st_prepare_statement':
dbdimp.c:1326: warning: assignment makes pointer from integer without a cast
dbdimp.c: In function 'dbd_st_execute':
dbdimp.c:1701: warning: assignment makes pointer from integer without a cast
dbdimp.c:1764: warning: assignment makes pointer from integer without a cast
dbdimp.c:1817: error: 'PG_DIAG_SQLSTATE' undeclared (first use in this function)
dbdimp.c:1817: warning: comparison between pointer and integer
dbdimp.c:1817: warning: pointer/integer type mismatch in conditional expression
dbdimp.c: In function 'dbd_st_deallocate_statement':
dbdimp.c:2034: error: 'PGTransactionStatusType' undeclared (first use in this function)
dbdimp.c:2034: error: expected ';' before 'tstatus'
dbdimp.c:2035: warning: ISO C90 forbids mixed declarations and code
dbdimp.c:2045: error: 'tstatus' undeclared (first use in this function)
dbdimp.c:2050: error: 'PQTRANS_INERROR' undeclared (first use in this function)
make: *** [dbdimp.o] Error 1

!!! ERROR: dev-perl/DBD-Pg-1.43 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called perl-module_src_compile
  perl-module.eclass, line 138:   Called die


Portage 2.1.1 (default-linux/ppc/ppc32/2006.0/G4, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r4 ppc)
=================================================================
System uname: 2.6.17-gentoo-r4 ppc 7447A, altivec supported
Gentoo Base System version 1.12.5
Last Sync: Unknown
distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.6-r1, 2.0.28-r1
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-Os -mcpu=7450 -maltivec -mabi=altivec -mpowerpc-gfxopt -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-Os -mcpu=7450 -maltivec -mabi=altivec -mpowerpc-gfxopt -pipe"
DISTDIR="/srv/distfiles"
FEATURES="autoconfig collision-protect confcache cvs distlocks metadata-transfer noinfo sandbox sfperms strict test"
GENTOO_MIRRORS="http://ftp.belnet.be/pub/mirrors/rsync.gentoo.org/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/home/tobias/cvs/gentoo-x86"
PORTDIR_OVERLAY="/home/tobias/overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="ppc X alsa altivec bash-completion beagle berkdb crypt curses dbus elibc_glibc fortran gdl gnome gtk hal input_devices_keyboard input_devices_mouse ipv6 jikes junit kdeenablefinal kernel_linux libnotify linguas_de nls nptl nptlonly oss pam perl png python readline samba sasl ssl tiff tote totem unicode userland_GNU video_cards_radeon xml"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Christian Hartmann (RETIRED)






          2006-09-17 03:51:32 UTC
        

What version of dev-db/postgresql and dev-db/libpq do you have installed? (Apparently 8.0.8 - nothing wrong with it - just crosschecking.)

What version of dev-perl/DBI is installed?





Comment 2


Tobias Scherbaum (RETIRED)






          2006-09-17 04:03:47 UTC
        

[ebuild   R   ] dev-db/postgresql-8.0.8  USE="nls pam perl python readline ssl xml -doc -kerberos -libg++ -pg-hier -pg-intdatetime (-selinux) -tcl% -tk% -zlib (-tcltk%)" 7,771 kB 
[ebuild   R   ] dev-db/libpq-8.0.8  USE="nls pam readline ssl -kerberos -zlib" 0 kB 
[ebuild   R   ] dev-perl/DBI-1.50  0 kB 





Comment 3


Christian Hartmann (RETIRED)






          2006-10-03 04:12:18 UTC
        

Unable to reproduce. Works after reinstall.




Comment 4


Douwe Querty





          2007-05-11 23:30:25 UTC
        

Same problem here ... Solved it by recompiling the 'dev-perl/DBI' package.
Gentoo won't do that automaticly for you when you are upgrading... however rebuilding it manually has solved my problems

DQ









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

