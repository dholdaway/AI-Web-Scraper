Title: 210047 – PORTAGE_CONFIGROOT needs to be documented
URL: https://bugs.gentoo.org/show_bug.cgi?id=210047

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 210047
PORTAGE_CONFIGROOT needs to be documented
Last modified: 2008-02-14 08:15:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 210047 
      - PORTAGE_CONFIGROOT needs to be documented


Summary:
PORTAGE_CONFIGROOT needs to be documented
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Unclassified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Lowest
       enhancement
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-02-13 20:41 UTC by Joshua Hoblitt





      Modified:
    
2008-02-14 08:15 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joshua Hoblitt





          2008-02-13 20:41:48 UTC
        

It would fantastically handy in our production env. to be able to set something like "PORTAGE_CONFIG_DIR" in /etc/make.conf to override the default conf dir of /etc/portage/

Reproducible: Always




Comment 1


Jakub Moc (RETIRED)






          2008-02-13 20:50:06 UTC
        

You aware how many tools will this break? I guess not...




Comment 2


Joshua Hoblitt





          2008-02-13 20:52:29 UTC
        

Well I would assume that any place /etc/portage is hardwired can be fixed with a simple search and replace...




Comment 3


Jakub Moc (RETIRED)






          2008-02-13 20:57:00 UTC
        

Well, if you want to break compatibility with lots of third-party stuff, you'd better have a good reason for that. I don't see any good reason here, esp. considering that you can symlink or bind-mount /etc/portage whereever you want if you cannot live with /etc/portage 'hardcoded'.




Comment 4


Joshua Hoblitt





          2008-02-13 21:06:27 UTC
        

What 3rd party utilities go poking around in /etc/portage?  I certainly don't use any that do.




Comment 5


Jakub Moc (RETIRED)






          2008-02-13 21:19:41 UTC
        

E.g. gentoolkit, autounmask, gatt-svn and lots of others.




Comment 6


Dawid Węgliński (RETIRED)






          2008-02-13 21:29:31 UTC
        

eix, portage-utils...




Comment 7


Joshua Hoblitt





          2008-02-13 21:50:32 UTC
        

OK so there are 5 packages with this path hardcoded behavior that is utterly trivia to fix.  We've already spent more time talking about why changing the behavior is impossible then doing it.

I don't see how merely adding a new env to /etc/make.conf breaks theses packages anyways.  They could switch to respecting it in there own sweet time.

By the logic you guys are using here PORTDIR should have never been added as you could just bind mount over /usr/portage.  But PORTDIR, PORTDIR_OVERLAY, and DISTDIR are incredibly useful to large installed sites as it allows the portage tree and binary packages to be mounted over NFS (100+ installs here).  I don't see why it's so why it's so unnatural to be able to specify a path for the conf files as well.  Currently I have use a silly script to rsync them...




Comment 8


Marius Mauch (RETIRED)






          2008-02-14 00:46:59 UTC
        

PORTAGE_CONFIGROOT already exists.




Comment 9


Joshua Hoblitt





          2008-02-14 01:10:45 UTC
        

man make.conf | grep CONFIGROOT




Comment 10


Zac Medico






          2008-02-14 01:53:52 UTC
        

(In reply to comment #9)
> man make.conf | grep CONFIGROOT

Defining it in make.conf would lead to a Catch-22 situation since make.conf is supposed to be located at $PORTAGE_CONFIGROOT/etc/make.conf. So, it's documented in `man emerge`. I suppose you might be able to define it in /etc/env.d like is often done for other global environment variables.




Comment 11


Joshua Hoblitt





          2008-02-14 01:56:11 UTC
        

awww, it moves the location of make.conf as well.  That is very handy!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

