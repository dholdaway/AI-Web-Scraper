Title: 411163 – sys-boot/silo-1.4.14_p20100228 on SUN Fire V120 - sdiv.S:376: Error: Hardware capability "div32" not enabled for "sdivcc".
URL: https://bugs.gentoo.org/show_bug.cgi?id=411163

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 411163
sys-boot/silo-1.4.14_p20100228 on SUN Fire V120 - sdiv.S:376: Error: Hardware capability "div32" not enabled for "sdivcc".
Last modified: 2013-01-06 16:27:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 411163 
      - sys-boot/silo-1.4.14_p20100228 on SUN Fire V120 - sdiv.S:376: Error: Hardware capability "div32" not enabled for "sdivcc".


Summary:
sys-boot/silo-1.4.14_p20100228 on SUN Fire V120 - sdiv.S:376: Error: Hardware...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

Sparc64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sparc Porters








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-04-07 16:43 UTC by Andrey Kolbasenko





      Modified:
    
2013-01-06 16:27 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



armin76
schinkelm
sparc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrey Kolbasenko





          2012-04-07 16:43:35 UTC
        

SILO failed on compile phase:

>>> Emerging (1 of 1) sys-boot/silo-1.4.14_p20100228
 * silo_1.4.14+git20100228.orig.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                                                                                                [ ok ]
 * silo_1.4.14+git20100228-1.diff.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                                                                                                  [ ok ]
>>> Unpacking source...
>>> Unpacking silo_1.4.14+git20100228.orig.tar.gz to /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
>>> Unpacking silo_1.4.14+git20100228-1.diff.gz to /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
 * Applying silo-e2fsprogs-1.4.14.patch ...                                                                                                                                                                                           [ ok ]
>>> Source unpacked in /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
>>> Compiling source in /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo ...
make[1]: Вход в каталог `/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo/common'
sparc-unknown-linux-gnu-gcc -Os -Wall -I. -I../include -fomit-frame-pointer -fno-strict-aliasing -U_FORTIFY_SOURCE -DSMALL_RELOC=0x280000 -DLARGE_RELOC=0x380000 -fno-stack-protector -c sdiv.S
sdiv.S: Assembler messages:
sdiv.S:376: Error: Hardware capability "div32" not enabled for "sdivcc".
make[1]: *** [sdiv.o] Ошибка 1
make[1]: Выход из каталога `/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo/common'
make: *** [all] Ошибка 1
 * ERROR: sys-boot/silo-1.4.14_p20100228 failed (compile phase):
 *   (no error message)
 * 
 * Call stack:
 *     ebuild.sh, line  85:  Called src_compile
 *   environment, line 2247:  Called die
 * The specific snippet of code:
 *           make ${MAKEOPTS} CC="$(tc-getCC)" || die;
 * 
 * If you need support, post the output of 'emerge --info =sys-boot/silo-1.4.14_p20100228',
 * the complete build log and the output of 'emerge -pqv =sys-boot/silo-1.4.14_p20100228'.
 * The complete build log is located at '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/temp/environment'.
 * S: '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo'

-------------------------------------------------------------
emerge --info:

Portage 2.1.10.56 (default/linux/sparc/10.0, gcc-4.5.3, glibc-2.13-r4, 3.2.1-gentoo-r2 sparc64)
=================================================================
System uname: Linux-3.2.1-gentoo-r2-sparc64-sun4u-with-gentoo-2.1
Timestamp of tree: Fri, 06 Apr 2012 16:35:01 +0000
app-shells/bash:          4.2_p24
dev-lang/python:          2.7.2-r3, 3.2.2-r1
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.1
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.68
sys-devel/automake:       1.11.4
sys-devel/binutils:       2.22-r1
sys-devel/gcc:            4.5.3-r2
sys-devel/gcc-config:     1.6
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.3 (virtual/os-headers)
sys-libs/glibc:           2.13-r4
Repositories: gentoo
ACCEPT_KEYWORDS="sparc"
ACCEPT_LICENSE="*"
CBUILD="sparc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=ultrasparc -pipe"
CHOST="sparc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/gentoo-release /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -mcpu=ultrasparc -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks ebuild-locks fixlafiles news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="ru_RU.UTF-8"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="ru"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl bzip2 cracklib crypt cxx gcc64 gdbm modules mudflap ncurses nls nptl nptlonly pam pcre readline sparc ssl sysfs tcpd unicode zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fbdev glint mach64 mga r128 radeon sunbw2 suncg14 suncg3 suncg6 sunffb sunleo tdfx dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Marco Schinkel





          2012-06-04 16:41:11 UTC
        

Same problem on Fire V210:

>>> Emerging (1 of 1) sys-boot/silo-1.4.14_p20100228
 * silo_1.4.14+git20100228.orig.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                 [ ok ]
 * silo_1.4.14+git20100228-1.diff.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                   [ ok ]
>>> Unpacking source...
>>> Unpacking silo_1.4.14+git20100228.orig.tar.gz to /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
>>> Unpacking silo_1.4.14+git20100228-1.diff.gz to /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
 * Applying silo-e2fsprogs-1.4.14.patch ...                                                                                                            [ ok ]
>>> Source unpacked in /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work
>>> Compiling source in /var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo ...
make[1]: Entering directory `/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo/common'
sparc-unknown-linux-gnu-gcc -Os -Wall -I. -I../include -fomit-frame-pointer -fno-strict-aliasing -U_FORTIFY_SOURCE -DSMALL_RELOC=0x280000 -DLARGE_RELOC=0x380000 -fno-stack-protector -c sdiv.S
sparc-unknown-linux-gnu-gcc -Os -Wall -I. -I../include -fomit-frame-pointer -fno-strict-aliasing -U_FORTIFY_SOURCE -DSMALL_RELOC=0x280000 -DLARGE_RELOC=0x380000 -fno-stack-protector -c rem.S
sparc-unknown-linux-gnu-gcc -Os -Wall -I. -I../include -fomit-frame-pointer -fno-strict-aliasing -U_FORTIFY_SOURCE -DSMALL_RELOC=0x280000 -DLARGE_RELOC=0x380000 -fno-stack-protector -c udiv.S
rem.S: Assembler messages:
rem.S:377: Error: Hardware capability "div32" not enabled for "sdivcc".
rem.S:380: Error: Hardware capability "mul32" not enabled for "smul".
sdiv.S: Assembler messages:
make[1]: sdiv.S:376: Error: Hardware capability "div32" not enabled for "sdivcc".
*** [rem.o] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: *** [sdiv.o] Error 1
udiv.S: Assembler messages:
udiv.S:354: Error: Hardware capability "div32" not enabled for "udiv".
make[1]: *** [udiv.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo/common'
make: *** [all] Error 1
 * ERROR: sys-boot/silo-1.4.14_p20100228 failed (compile phase):
 *   (no error message)
 *
 * Call stack:
 *     ebuild.sh, line  85:  Called src_compile
 *   environment, line 2267:  Called die
 * The specific snippet of code:
 *           make ${MAKEOPTS} CC="$(tc-getCC)" || die;
 *
 * If you need support, post the output of `emerge --info '=sys-boot/silo-1.4.14_p20100228'`,
 * the complete build log and the output of `emerge -pqv '=sys-boot/silo-1.4.14_p20100228'`.
 * The complete build log is located at '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo'
 * S: '/var/tmp/portage/sys-boot/silo-1.4.14_p20100228/work/silo'




Comment 2


Marco Schinkel





          2012-06-07 07:48:55 UTC
        

the following procedure worked for me for compiling silo:

git clone git://git.kernel.org/pub/scm/linux/kernel/git/davem/silo.git
cd silo
CFLAGS="-mcpu=ultrasparc3 -Aultrasparc3" make

unfortunately, if I add -Aultrasparc3 to CFLAGS in make.conf, it doesnt work :/




Comment 3


Raúl Porcel (RETIRED)






          2012-07-29 17:06:08 UTC
        

Yes, silo doesn't respect CFLAGS.

Try with silo-1.4.14_p20120226 which i've put today in the tree




Comment 4


Stejarel Veres





          2012-08-01 04:49:10 UTC
        

Hi,

I'm not sure if this warrants a new bug and this one is pretty much the only one I could find related to SILO.

Upon upgrading to silo-1.4.14_p20120226 today, I am no longer able to successfully run silo - what I get is:

'Fatal error: Second stage /boot/second.b has wrong size'

Have you seen this before? The size of my /boot/second.b is 53760, which is a multiple of 512 - but that's all I know as far as requirements go. Downgrading to the older silo-1.4.14_p20100228 is not an option because this one doesn't even compile anymore.

What I have is gcc-4.5.3-r2, glibc-2.15-r2, and linux-headers-3.4-r2.

Any input would be greatly appreciated.

Thanks!
Stejarel









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

