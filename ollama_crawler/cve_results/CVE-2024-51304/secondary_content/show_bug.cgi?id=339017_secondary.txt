Title: 339017 – xfce-base/xfdesktop-4.6.2 falls into "unable to get keyboard/mouse grab" error on overloaded system
URL: https://bugs.gentoo.org/show_bug.cgi?id=339017

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 339017
xfce-base/xfdesktop-4.6.2 falls into "unable to get keyboard/mouse grab" error on overloaded system
Last modified: 2013-01-28 06:31:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 339017 
      - xfce-base/xfdesktop-4.6.2 falls into "unable to get keyboard/mouse grab" error on overloaded system


Summary:
xfce-base/xfdesktop-4.6.2 falls into "unable to get keyboard/mouse grab" erro...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

XFCE Team








URL:



https://bugzilla.xfce.org/show_bug.cg...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-09-28 11:24 UTC by Sergey S. Starikoff





      Modified:
    
2013-01-28 06:31 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xfce-base/xfdesktop-4.6.2 build log

              (build.log,74.51 KB,
                text/plain)

            
2010-09-28 13:05 UTC,

            Sergey S. Starikoff




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sergey S. Starikoff





          2010-09-28 11:24:33 UTC
        

Periodically I got the error:
** (xfdesktop:PID): CRITICAL **: Unable to get keyboard/mouse grab. Unable to pop up menu
on the overloaded system (for example rebuildinr world or compiling OpenOffice, but not only with it).

Reproducible: Sometimes

Steps to Reproduce:
1. Load the system (for example open 10-15-20 windows of GUI browser, email-clien, OpenOffice, gimp with 20+ mb image);
2. Try to type some text in _text_ editor or terminal or try to call menu by mouse click on desktop;


Actual Results:  
3. See nothing (no expected result).

Expected Results:  
3. Normal (with correction on system load) operability.

$ emerge --info
Portage 2.1.8.3 (default/linux/x86/10.0, gcc-4.4.3, glibc-2.11.2-r0, 2.6.34-gentoo-r1 i686)
=================================================================
System uname: Linux-2.6.34-gentoo-r1-i686-Intel-R-_Pentium-R-_4_CPU_3.00GHz-with-gentoo-1.12.13
Timestamp of tree: Mon, 27 Sep 2010 07:15:02 +0000
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r3, 3.1.2-r4
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/env.d/50glib2 /usr/share/X11/xkb /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests buildsyspkg collision-protect distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.corbina.net/pub/Linux/gentoo/                   ftp://mirror.aiya.ru/pub/gentoo/                 ftp://ftp.org.kemsu.ru/gentoo/                 http://ftp.chg.ru/pub/Linux/distributions/gentoo/                 ftp://ftp.chg.ru/pub/Linux/distributions/gentoo/"
LANG="ru_RU.KOI8-R"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="ru en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage-ftn"
SYNC="   rsync://rsync.ru.gentoo.org/gentoo-portage"
USE="X a52 ac3 acl alsa avi berkdb bzip2 cdr cli cracklib crypt cups cxx dbus djvu dri dvd flac fortran gdbm gif gtk iconv jpeg jpeg2k modules mp3 mudflap ncurses nls nptl nptlonly ogg openmp pam pcre pdf perl png pppd python qt3support readline reflection session ssl sysfs tcpd tiff vorbis x86 xcb xorg xulrunner zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="sis" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Samuli Suominen (RETIRED)






          2010-09-28 11:34:30 UTC
        

Looks a lot like bugs,

http://bugzilla.xfce.org/show_bug.cgi?id=3234 and
http://bugzilla.xfce.org/show_bug.cgi?id=441

`emerge -pv xfdesktop xorg-server libXi` output too, please and build.log of xfdesktop... for reference.




Comment 2


Sergey S. Starikoff





          2010-09-28 12:55:15 UTC
        

> `emerge -pv xfdesktop xorg-server libXi` output too, please

$ emerge -pv xfdesktop xorg-server libXi

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] xfce-base/xfdesktop-4.6.2  USE="branding -debug -thunar" LINGUAS="ru -be -ca -cs -da -de -el -es -et -eu -fi -fr -he -hu -it -ja -ko -nb_NO -nl -pa -pl -pt_BR -ro -sk -sv -tr -uk -vi -zh_CN -zh_TW" XFCE_PLUGINS="menu" 0 kB
[ebuild   R   ] x11-base/xorg-server-1.7.7-r1  USE="nptl xorg -debug -dmx -hal -ipv6 -kdrive -minimal -sdl -tslib" 0 kB
[ebuild   R   ] x11-libs/libXi-1.3.1  USE="-doc -static-libs" 0 kB





Comment 3


Sergey S. Starikoff





          2010-09-28 13:05:09 UTC
        

Created attachment 248900 [details]
xfce-base/xfdesktop-4.6.2 build log

Got by

# ebuild xfdesktop-4.6.2.ebuild compile




Comment 4


Sergey S. Starikoff





          2010-09-30 09:39:15 UTC
        

One more: this bug is well-reproducable, but not 100%.
Sometimes (I don't guess why/how; rather rarely) xfdesktrop returns from this state to normal operability.




Comment 5


Sergey S. Starikoff





          2010-10-25 06:17:16 UTC
        

And another moment: refreshing environment while switching to build another package returns i/o (mostrly or entirely) to normal operability.




Comment 6


Samuli Suominen (RETIRED)






          2010-12-18 18:48:58 UTC
        

everyones working on xfce 4.8, so 4.6 is no longer maintained by upstream or gentoo. please try with ~arch version of xfce, like xfdesktop-4.7.4.
then reopen if it's still a problem.

thanks!




Comment 7


Sergey S. Starikoff





          2013-01-28 05:39:10 UTC
        

Similiar issue seen with 4.8 and 4.10.
Appeares rarely with increasing PCs power (CPU/mem/etc), but not gone away.

Upstream requests a trace (url attached) but I don't guess what and how to trace (debugging is separate rather heavy task, and I'm not shure about success on heavely loaded system, where this bug appears).
Anubody hane an idea how to get requested trace?




Comment 8


Samuli Suominen (RETIRED)






          2013-01-28 06:31:42 UTC
        

sounds like issue of memory running slow and hitting swap. is there enough swap? OOM (out of memory) might kill some of the required processes

or bad niceness value for selected I/O scheduler. using CFQ, deadline or what?

what happens in dmesg and /var/log/Xorg.0.log when the unresponsivess happens?

you can kill xfdesktop and run it inside gdb to get the backtrace upstream is asking









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

