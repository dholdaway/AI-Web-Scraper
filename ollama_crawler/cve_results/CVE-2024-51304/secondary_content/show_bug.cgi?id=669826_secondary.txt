Title: 669826 – x11-drivers/nvidia-drivers permission issue
URL: https://bugs.gentoo.org/show_bug.cgi?id=669826

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 669826
x11-drivers/nvidia-drivers permission issue
Last modified: 2020-06-27 04:27:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 669826 
      - x11-drivers/nvidia-drivers permission issue


Summary:
x11-drivers/nvidia-drivers permission issue
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Jeroen Roovers (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-10-27 22:10 UTC by KostWarCZE





      Modified:
    
2020-06-27 04:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Xorg.*.log

              (file_669826.txt,1.29 KB,
                text/plain)

            
2018-10-27 22:10 UTC,

            KostWarCZE




Details





emerge --info

              (file_669826.txt,5.18 KB,
                text/plain)

            
2018-10-27 22:13 UTC,

            KostWarCZE




Details





/usr/src/linux/.config

              (file_669826.txt,118.91 KB,
                text/plain)

            
2018-10-27 22:14 UTC,

            KostWarCZE




Details





make.conf

              (file_669826.txt,1.18 KB,
                text/plain)

            
2018-10-27 22:15 UTC,

            KostWarCZE




Details





cat /var/log/Xorg.*.log

              (file_669826.txt,10.46 KB,
                text/plain)

            
2018-10-28 14:03 UTC,

            KostWarCZE




Details





eix-installed -a

              (file_669826.txt,10.44 KB,
                text/plain)

            
2018-10-28 14:08 UTC,

            KostWarCZE




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


KostWarCZE





          2018-10-27 22:10:25 UTC
        

Created attachment 553412 [details]
Xorg.*.log

DISCLAIMER: Selected `blocker` since it prevents the usage of Nvidia GPU.

x11-drivers/nvidia-drivers permission issue which is preventing the Nvidia GPU from working on gentoo. 

All the info is here:
https://wiki.gentoo.org/wiki/User:Kreyren/NVIDIA_OPTIMUS_INSTALL_LOG

[   634.176] (EE) /dev/dri/card1: failed to set DRM interface version 1.4: Permission denied
[   634.176] (EE) /dev/dri/card0: failed to set DRM interface version 1.4: Permission denied

# ls -l /dev/dri/
total 0
crw-rw----+ 1 root video 226,   0 Oct 29 23:25 card0
crw-rw----+ 1 root video 226,   1 Oct 29 23:25 card1
crw-rw----  1 root video 226,  64 Oct 29 23:25 controlD64
crw-rw----  1 root video 226,  65 Oct 29 23:25 controlD65
crw-rw----  1 root video 226, 128 Oct 29 23:25 renderD128
crw-rw----  1 root video 226, 129 Oct 29 23:25 renderD129

# cat /etc/group | grep 'video'
video:x:27:root,kreyren

Gentoo 4.19.0 fresh installation.

Based on IRC i understand that many others have same issue.

Forum post: https://forums.gentoo.org/viewtopic-t-1088530.html




Comment 1


KostWarCZE





          2018-10-27 22:13:36 UTC
        

Created attachment 553414 [details]
emerge --info




Comment 2


KostWarCZE





          2018-10-27 22:14:41 UTC
        

Created attachment 553416 [details]
/usr/src/linux/.config




Comment 3


KostWarCZE





          2018-10-27 22:15:20 UTC
        

Created attachment 553418 [details]
make.conf




Comment 4


Jeroen Roovers (RETIRED)






          2018-10-28 10:19:51 UTC
        

Comment on attachment 553412 [details]
Xorg.*.log

Your regexen cut out all the interesting bits.




Comment 5


Jeroen Roovers (RETIRED)






          2018-10-28 10:27:11 UTC
        

(In reply to KostWarCZE from comment #0)
> DISCLAIMER: Selected `blocker` since it prevents the usage of Nvidia GPU.

My Nvidia GPU disagrees:

$ nvidia-smi
Sun Oct 28 11:25:16 2018
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 410.73       Driver Version: 410.73       CUDA Version: 10.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GT 1030     Off  | 00000000:01:00.0  On |                  N/A |
|  0%   37C    P8    N/A /  30W |    298MiB /  2000MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|    0      3869      G   /usr/bin/X                                   125MiB |
|    0      4897      G   ...equest-channel-token=714499152642211597   171MiB |
+-----------------------------------------------------------------------------+
$ uname -a
Linux wim 4.19.0-gentoo-JeR #1 SMP PREEMPT Sat Oct 27 11:32:57 CEST 2018 x86_64
AMD Athlon(tm) II X3 455 Processor AuthenticAMD GNU/Linux




Comment 6


KostWarCZE





          2018-10-28 14:03:59 UTC
        

Created attachment 553494 [details]
cat /var/log/Xorg.*.log

Added full Xorg.*.log




Comment 7


KostWarCZE





          2018-10-28 14:05:09 UTC
        

(In reply to Jeroen Roovers from comment #5)
> (In reply to KostWarCZE from comment #0)
> > DISCLAIMER: Selected `blocker` since it prevents the usage of Nvidia GPU.
> 
> My Nvidia GPU disagrees:
> 
> $ nvidia-smi
> Sun Oct 28 11:25:16 2018
> +----------------------------------------------------------------------------
> -+
> | NVIDIA-SMI 410.73       Driver Version: 410.73       CUDA Version: 10.0   
> |
> |-------------------------------+----------------------+---------------------
> -+
> | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr.
> ECC |
> | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute
> M. |
> |===============================+======================+=====================
> =|
> |   0  GeForce GT 1030     Off  | 00000000:01:00.0  On |                 
> N/A |
> |  0%   37C    P8    N/A /  30W |    298MiB /  2000MiB |      0%     
> Default |
> +-------------------------------+----------------------+---------------------
> -+
> 
> +----------------------------------------------------------------------------
> -+
> | Processes:                                                       GPU
> Memory |
> |  GPU       PID   Type   Process name                             Usage    
> |
> |============================================================================
> =|
> |    0      3869      G   /usr/bin/X                                  
> 125MiB |
> |    0      4897      G   ...equest-channel-token=714499152642211597  
> 171MiB |
> +----------------------------------------------------------------------------
> -+
> $ uname -a
> Linux wim 4.19.0-gentoo-JeR #1 SMP PREEMPT Sat Oct 27 11:32:57 CEST 2018
> x86_64
> AMD Athlon(tm) II X3 455 Processor AuthenticAMD GNU/Linux

`bash: nvidia-smi: command not found` on my system. Note that package is installed and configured based in info from wiki, IRC and forum.




Comment 8


KostWarCZE





          2018-10-28 14:08:30 UTC
        

Created attachment 553498 [details]
eix-installed -a

List of installed packages









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

