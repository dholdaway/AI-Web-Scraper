Title: 475776 – dev-libs/openssl-1.0.1e-r1 on i686-w64-mingw32 - s_socket.c:401:31: error: 'IPV6_V6ONLY' undeclared (first use in this function)
URL: https://bugs.gentoo.org/show_bug.cgi?id=475776

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 475776
dev-libs/openssl-1.0.1e-r1 on i686-w64-mingw32 - s_socket.c:401:31: error: 'IPV6_V6ONLY' undeclared (first use in this function)
Last modified: 2013-10-14 23:27:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 475776 
      - dev-libs/openssl-1.0.1e-r1 on i686-w64-mingw32 - s_socket.c:401:31: error: 'IPV6_V6ONLY' undeclared (first use in this function)


Summary:
dev-libs/openssl-1.0.1e-r1 on i686-w64-mingw32 - s_socket.c:401:31: error: 'I...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-07-04 22:41 UTC by Bertrand Jacquin





      Modified:
    
2013-10-14 23:27 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bertrand









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (info.log,11.58 KB,
                text/x-log)

            
2013-07-04 22:42 UTC,

            Bertrand Jacquin




Details





build.log

              (build.log,456.83 KB,
                text/x-log)

            
2013-07-04 22:42 UTC,

            Bertrand Jacquin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Bertrand Jacquin





          2013-07-04 22:41:11 UTC
        

Build output snippet :

i686-w64-mingw32-gcc -DMONOLITH -I.. -I../include  -D_WINDLL -DOPENSSL_USE_APPLINK -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_MT -DDSO_WIN32 -DL_ENDIAN -DWIN32_LEAN_AND_MEAN -Wall -DOPENSSL_BN_ASM_PART_WORDS -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DRMD160_ASM -DAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM -Os -pipe -fomit-frame-pointer -fno-strict-aliasing   -c -o s_socket.o s_socket.c
s_socket.c: In function 'init_server_long':
s_socket.c:401:31: error: 'IPV6_V6ONLY' undeclared (first use in this function)
s_socket.c:401:31: note: each undeclared identifier is reported only once for each function it appears in
s_socket.c: In function 'host_ip':
s_socket.c:621:11: warning: implicit declaration of function 'inet_pton' [-Wimplicit-function-declaration]
s_socket.c: In function 'GetHostByName':
s_socket.c:714:4: warning: implicit declaration of function 'gethostbyname2' [-Wimplicit-function-declaration]
s_socket.c:714:7: warning: assignment makes pointer from integer without a cast [enabled by default]
make[1]: *** [s_socket.o] Error 1
make[1]: Leaving directory `/usr/i686-w64-mingw32/tmp/portage/dev-libs/openssl-1.0.1e-r1/work/openssl-1.0.1e/apps'
make: *** [build_apps] Error 1
 * ERROR: dev-libs/openssl-1.0.1e-r1 failed (compile phase):
 *   emake failed

IPV6_V6ONLY is not defined in mingw64-runtime-2.0.8 but is in trunk release :

./mingw-w64-headers/include/ws2ipdef.h

See: https://mingw-w64.svn.sourceforge.net/svnroot/mingw-w64/trunk/mingw-w64-headers/include/ws2ipdef.h

From SVN Log:

------------------------------------------------------------------------
r5480 | cjacek | 2012-11-29 12:11:44 +0100 (Thu, 29 Nov 2012) | 1 line

ws2ipdef.h: Added IPV6_* defines
------------------------------------------------------------------------

Attached build.log and emerge --info

Reproducible: Always

Steps to Reproduce:
1. crossdev -t i686-w64-mingw32
2. USE='-bindist' i686-w64-mingw32-emerge -vat openssl
3.




Comment 1


Bertrand Jacquin





          2013-07-04 22:42:24 UTC
        

Created attachment 352628 [details]
emerge --info




Comment 2


Bertrand Jacquin





          2013-07-04 22:42:39 UTC
        

Created attachment 352630 [details]
build.log




Comment 3


SpanKY






          2013-10-14 23:27:05 UTC
        

then we'll wait for a new release of the mingw runtime









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

