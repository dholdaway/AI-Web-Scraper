Title: 492930 – After recent portage upgrade I can't stop 'emerge -pv' query with ^C
URL: https://bugs.gentoo.org/show_bug.cgi?id=492930

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 492930
After recent portage upgrade I can't stop 'emerge -pv' query with ^C
Last modified: 2013-11-30 11:06:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 492930 
      - After recent portage upgrade I can't stop 'emerge -pv' query with ^C


Summary:
After recent portage upgrade I can't stop 'emerge -pv' query with ^C
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-11-30 09:05 UTC by Paul Osmialowski





      Modified:
    
2013-11-30 11:06 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul Osmialowski





          2013-11-30 09:05:44 UTC
        

Today I upgraded glibc, openrc and portage. Now I can't break any emerge -pv query, I need to wait until it completes. It cannot be reproduced on machines that I didn't upgrade yet.

Severity: My user experience suffers.


Reproducible: Always

Steps to Reproduce:
1. emerge -u portage
2. emerge -pv glibc gdb screen man bzip2 netifrc openrc portage
3. try to stop it before completion with ^C
Actual Results:  
Query stopped as usual

Expected Results:  
Query works until successfull completion

emerge -pv glibc gdb screen man bzip2 netifrc openrc portage

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] app-arch/bzip2-1.0.6-r3  USE="-static -static-libs" 0 kB
[ebuild   R    ] sys-apps/man-1.6g  USE="lzma nls (-selinux)" 0 kB
[ebuild   R    ] sys-apps/portage-2.2.7  USE="(ipc) -build -doc -epydoc (-pypy2_0) -python2 -python3 (-selinux) -xattr" LINGUAS="-ru" PYTHON_TARGETS="python2_7 python3_2 (-pypy2_0) -python2_6 (-python3_3) (-python3_4)" 0 kB
[ebuild   R    ] sys-libs/glibc-2.16.0:2.2  USE="gd systemtap -debug (-hardened) (-multilib) -profile (-selinux) -suid -vanilla" 0 kB
[ebuild   R    ] sys-devel/gdb-7.5.1  USE="client expat nls python server zlib -multitarget {-test} -vanilla" 0 kB
[ebuild   R    ] app-misc/screen-4.0.3-r6  USE="pam -debug -multiuser -nethack (-selinux)" 0 kB
[ebuild   R    ] sys-apps/openrc-0.12.4  USE="netifrc pam tools unicode -debug -ncurses -newnet (-prefix) (-selinux) -static-libs" 0 kB
[ebuild   R    ] net-misc/netifrc-0.1  0 kB

emerge --info
Portage 2.2.7 (default/linux/x86/13.0, gcc-4.6.3, glibc-2.16.0, 3.10.17-gentoo i686)
=================================================================
System uname: Linux-3.10.17-gentoo-i686-Intel-R-_Pentium-R-_4_CPU_3.00GHz-with-gentoo-2.2
KiB Mem:     2066416 total,    342256 free
KiB Swap:    2104508 total,   2096336 free
Timestamp of tree: Sat, 30 Nov 2013 06:30:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.4.6, 2.6.8-r3, 2.7.5-r3, 3.1.5, 3.2.5-r3
dev-util/cmake:           2.8.10.2-r2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.4_p6-r1, 1.5, 1.6.3, 1.7.9-r2, 1.8.5-r3, 1.9.6-r3, 1.10.3, 1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.3.6-r1, 4.4.7, 4.5.4, 4.6.3, 4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.16.0
Repositories: gentoo armagetron sublime-text
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="*"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.0/conf /usr/share/polkit-1/actions /usr/share/themes/oxygen-gtk/gtk-2.0 /var/lib/hsqldb /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -march=i686 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -march=i686 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LC_ALL="pl_PL.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/armagetron /var/lib/layman/sublime-text"
USE="16bit-indices 24bpp 32bit 7zip R X Xaw3d a52 aac aacplus aacs aalib abiword accessibility acl acoustid acpi adns adplug ads aesicm afp akode akonadi alias alisp allegro alsa alstream amr amrnb amrwb analitza angelscript animgif ao apbs aplaymidi apng applet archive armadillo arpack artworkextra asf asn aspell ass assistant asyncns athena attica attrib audacious audio audiofile auth automount autoreplace autotrace aux_xml avahi avalon-framework avalon-logkit avantgo avcodec avformat awt background badval bash-completion bazaar bcmath beautifulsoup3 berkdb bidi bitmap bittorrent bl blas blaster blender-game blksha1 bluetooth bluray boehm-gc bonjour bonobo bookmarks boost branding bs2b bzip2 cache cairo calendar canberra canlock caps caps-ng capslib catalogs cblas cdda cddax cdf cdio cdparanoia cdr cdrtools cegui celt cg cgraph chappa chardet chdir chicken chm ciao cilk city clamd clamdtop clang cli client clipboard clisp clucene cluster clutter collab colord combination-explosion-check common-lisp community compat connectionstatus consolekit contactnotes context contrast contrib corefonts coverart cpufreq cracklib cramfs crashreporter creds cron crypt cryptsetup cscope css ctype ctypes-python cuda cue cups curl cursors cvs cxx d data dbase dbi dbus dc1394 ddate debugger declarative default-font deprecated designer designer-plugin desktopglobe detex developer devfs-compat devhelp device-mapper devil dht dia digitalradio dirac discard-path discouraged djbfft djvu dmi dnd docbook doctool dot double-precision down-root dri drmaa dsdp dselect dssi dtmf dts dv dvb dvbpsi dvd dvdnav dvdr dvi dvi2tty dvipdfm dynamic e2fsprogs eap-tls ebook eclipse edd edit editor eds egl eigen elf elisp emacs embedded emf emoticons-manager emovix enca enchant encode enscript eolconv epiphany epspdf equalizer escreen eselect ethernet etiquette excel exceptions exif expat extensions external-fuse extra extra-cardsets extra-tools extrafilters extramodules extras faac faad facedetect fam fame farstream fasttree fat fax fdk festival ffamber ffmpeg fftw filecaps fileinfo filter filters findbugs finger fingerprint firefox firefox3 fits flac flash floppy fltk fluidsynth fontconfig fontforge foomaticdb fortran fortran2003 fox fping fpx frei0r ftd2xx ftdi ftp fts3 fuse futures g15 g3dvl gadu gallium games gcdmaster gcode gconf gcrypt gd gdal gdbm gdm gdu gecko gedit geoip geoloc geolocation geonames geos ggi gif gimp ginac git gjdoc glade glep glew glib glitz gloox glpk glut gmath gme gml gmp gmplayer gnet gnokii gnome gnome-keyring gnomecd gnumeric gnuplot gnutls google gopher gpg gphoto2 gpm gps gptfdisk gpu grammar graphics graphicsmagick graphite graphviz groupwise grp grub gs gsettings gsf gsl gsm gsmloc gssapi gstreamer gtk gtk2 gtk3 gtkhtml gtkstyle gudev guile gunit gzip-el h224 h281 h323 hal handbook hardcoded-tables harfbuzz hash hdf hdf5 health help heterogeneous highlight hipe hires-icons history hlapi hog hostip hotpixels howl-compat hpcups html htmlreport http humanities hunspell hwdb i18n iax ical icecast icons iconv icu id3 id3tag idn iec61883 ieee1394 ifp ilbc image image-cache imagemagick imaging imlib infinality inherit-graph inifile inkjar inotify internal-fltk intl introspection iodbc ipc iplayer ipod iproute2 iptables ipv6 ipython irc irrlicht isag iscsi iso it3tag itk jabber jack jadetex jai java java5 java6 javacomm javamail javascript jbig jit jmf jms joystick jpeg jpeg2k json judy kate kde kdeprefix kdm kdrive kexiv2 keymap keyutils kig-scripting kipi kmod kontact kpathsea ladspa lame lapack largefile lash lasi lastfm lastfmradio latency_timing latex latex3 lcdfilter lcms ldap ldap-sasl ldapdb ldb ldos leim lensfun less levels libadns libass libburn libcaca libcanberra libclamav libdsk libev libevent libextractor libffi libgda libkms libmms libmpeg2 libnotify libs libsamplerate libssh2 libssp libsysfs libtar libtiger libv4l libv4l2 libvisual libwww libxml2 libyaml lid lightning linuxkeys lirc listen-queue live llvm lm_sensors log4j logitech-mouse logrotate lpsol lqr lua luatex lucene lvm1 lxde lyx lzma lzo m17n-lib m4lib-png mad magic mail manual maps math mathml matplotlib matroska mbox mclib mcve md5sum mdns-bundled mdnsresponder-compat mediawiki memmap mercurial metalink metapost metis metric mew mhash midi mikmod mime minizip mixer mjpeg mmap mms mms-agent mmx mng mod modplug modules mongodb mono moonlight motif motif22-compatibility mouse moviepack moviesounds mozdevelop mozdom mozilla mozsha1 mp2 mp3 mp3tunes mp4 mpeg mpg123 mpi mplayer mpx msn mta mtp mudflap mule multimedia mumble musepack music musicbrainz mvl mzscheme natspec nautilus ncat ncurses ndiff neXt nelma net netapi netbeans netcdf netifrc netlink netpbm nettle network networking new-clx new-login nextaw nfsdcld nfsidmap nfsv3 nfsv4 nfsv41 nio-buffers nis njb nls nntp no-old-linux nodrm nogyroscopic nokia nominatim normalize nowlistening nping npp nptl nsplugin nss ntfs ntfsprogs ntlm ntlm_unsupported_patch ntp numpy nut nuv nvidia nvtt nyx objc objc++ objc-gc ocaml ocamlopt ocr octave odbc ode offensive offscreen ofx ogdi ogg ogg123 ogm ois okteta okular omega omxil opal openal opencl opencore-amr openexr opengl openldap openmedia openmm openmp openpty openrc openssl openxml opus orc oscar osdmenu osgapps osmesa oss otp otr ots overlays pac pager pam pango pari parport password pasteafter pbs pcap pci pcntl pcre pcsc-lite pda pdf pdfannotextractor pdo perl perl-geoipupdate pg-intdatetime pgm phar phonon php physfs pipe pixmaps pkinit places plasma player playlist playtools plot plotutils plugin-checksum plugin-doat plugin-fishlim plugin-sysinfo plugins pm-utils pnat png pnm policykit poppler-data portaudio posix postgres postproc postscript powerkadu ppds ppp presto preview-latex prison private-headers profiler proj projectm ps pstricks pth publishers pvr pyglet python qalculate qemu qhull qimageblitz qos qpak qrupdate qscintilla qt-bundled qt-faststart qt-static qt3 qt3support qt4 qthelp quicktime quotes qwt radio raptor rar raw rcs readline real recursion-limit redeyes redland reflection regex remote remoteosd resid reviewboard rle romio rpm rrdtool rss rtc rtf rtmp rtsp ruby run-exes rups samba sametime sasl sbc scale0tilt scanner schroedinger science screen script scripting scripttools scsi sctp sdk sdl sdl-image sdl-sound sdlgfx seccomp segger semantic-desktop sensord serial servletapi session sftp sge shaders shapefile shared-glapi sharedclient sharedext sharedmem shine shm shmvideo shout sid sift sigsegv simplexml sip sipim skins skype slang smbclient smbtav2 smi smime smp smpeg sms sna sndfile snmp soap sockets solver sound soundex sounds soundtouch soup sourceview sox sparse speech speex spell spidermonkey spl splash sql sqlite sqlite3 srtp sse sse2 sse2check ssl startup-notification static-analyzer static-ppds statistics stats stl stlink stream stun subject-rewrite subtitles subversion suhosin supernodal svg svm swat swig switcher swscale syslog system-mpmath systemtap sysvipc szip t1lib taglib tbb tcl tcpd tdb tdbtest teamarena telepathy teletext telnet test-framework tevent tex4ht texi2html texmacs texteffect tga themedesigner themes theora thesaurus thin thin-splines threads threadsafe thumbnail thumbnails tidy tiff tilepath timezone timidity tinfo tk tls tls-heartbeat tokenizer toolame toolbar toolkit-scroll-bars tools toporouter totem track-src-odirect traits translator tremor truetype tta twisted twolame type3 udev udev-acl udis86 udisks umfpack unicode unlock-notify unwind usb usbredir utempter utils uudeview uuid v4l v4l2 vaapi vala valgrind vamp vapigen vcd vcdinfo vcdx vdpau vdr verbose-io versaloon verse vhook vhost-net video videoslideshow vidix vim-pager vim-with-x virtuoso visualization vlm vmd vmware vmware-tools vnc voice vorbis vpx vst wad wallpapers watchdog wav wavpack wddx weather web webdav webdav-neon webdav-serf webgl webkit webkit2 webm webp widescreen win32codecs winbind windeco wininst winpopup wma wma-fixed wmf wordperfect wrappers wxwidgets wxwindows x264 x86 xa xanim xbase xcap xcb xchatdccserver xcomposite xdm-auth xemacs xembed xerces-c xetex xext xface xforms xforward xfs xft xgetdefault xindy xine xinerama xinetd xkb xlib-xcb xls xml xmldoclet xmlpatterns xmlreader xmlrpc xmlwriter xmp xmpp xnest xorg xorgmodule xosd xpdf-headers xpm xrandr xrender xscreensaver xsl xslt xterm xulrunner xv xvfb xvid xvmc xz yahoo yahoo-geo yaz youtube yp yv12 zeroconf zip zlib zvbi" ABI_X86="32" ALSA_CARDS="emu10k1 emu10k1x" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="canon spca50x template ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CURL_SSL="openssl" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="pl" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2" QEMU_SOFTMMU_TARGETS="arm" QEMU_USER_TARGETS="arm" RUBY_TARGETS="ruby18 ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="dummy nv nvidia v4l r128 intel vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, SYNC




Comment 1


Paul Osmialowski





          2013-11-30 09:07:17 UTC
        

Actual and Expected results in comment above are swapped, sorry for that.




Comment 2


Paul Osmialowski





          2013-11-30 11:06:14 UTC
        

It's not portage/emerge bug, it's new glibc can't pass signals to processes!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

