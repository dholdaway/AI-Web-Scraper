Title: 90878 – mysql 4.0.24-r1 fails tests
URL: https://bugs.gentoo.org/show_bug.cgi?id=90878

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90878
mysql 4.0.24-r1 fails tests
Last modified: 2005-07-28 09:35:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90878 
      - mysql 4.0.24-r1 fails tests


Summary:
mysql 4.0.24-r1 fails tests
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Linux MySQL bugs team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-29 10:31 UTC by Maurice van der Pot (RETIRED)





      Modified:
    
2005-07-28 09:35 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



brant









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Maurice van der Pot (RETIRED)






          2005-04-29 10:31:56 UTC
        

* >>> Test phase [test]: dev-db/mysql-4.0.24-r1
cd mysql-test ; ./mysql-test-run
Installing Test Databases
Removing Stale Files
Installing Master Databases
running  ../sql/mysqld --no-defaults --bootstrap --skip-grant-tables     --basedir=. --datadir=./var/master-data --skip-innodb --skip-bdb --skip-warnings --language=../sql/share/english/
050429 20:20:19 ../sql/mysqld: Shutdown Complete

Installing Slave Databases
running  ../sql/mysqld --no-defaults --bootstrap --skip-grant-tables     --basedir=. --datadir=./var/slave-data --skip-innodb --skip-bdb --skip-warnings --language=../sql/share/english/
050429 20:20:19 ../sql/mysqld: Shutdown Complete

Manager disabled, skipping manager start.
Loading Standard Test Databases
Starting Tests

 TEST                           RESULT
------------------------------------------
alias                          [ pass ]
... lots of passes... some skips...
errors                         [ pass ]
explain                        [ pass ]
flush                          [ fail ]

Errors are (from /var/tmp/portage/mysql-4.0.24-r1/work/mysql-4.0.24/mysql-test/var/log/mysqltest-time) :
/var/tmp/portage/mysql-4.0.24-r1/work/mysql-4.0.24/client/.libs/mysqltest: At line 67: query 'insert into t1 values (345)' failed: 2013: Lost connection to MySQL server during query
./mysql-test-run: line 615:  1041 Killed                  $@ >>$CUR_MYERR 2>&1  (wd: /var/tmp/portage/mysql-4.0.24-r1/work/mysql-4.0.24)
(the last line(s) may be the ones that caused the die() in mysqltest)

Aborting: flush failed. To continue, re-run with '--force'.

Ending Tests
Shutting-down MySQL daemon

master not cooperating with mysqladmin, will try manual kill
./mysql-test-run: line 1138: kill: (1051) - No such process
master refused to die. Sending SIGKILL
./mysql-test-run: line 1142: kill: (1051) - No such process
Master shutdown finished
Slave shutdown finished
make: *** [test] Error 1

!!! ERROR: dev-db/mysql-4.0.24-r1 failed.
!!! Function src_test, Line 297, Exitcode 2
!!! make test failed
!!! If you need support, post the topmost build error, NOT this status message.


emerge --info:

Portage 2.0.51.20-r5 (default-linux/x86/2004.2/gcc34, gcc-3.4.3-20050110, glibc-2.3.5-r0, 2.6.12-rc1 i686)
=================================================================
System uname: 2.6.12-rc1 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.9
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
dev-lang/python:     2.2.3-r5, 2.3.5
sys-apps/sandbox:    1.2.2
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.11
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe -g2 -ggdb2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O2 -pipe -g2 -ggdb2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig collision-protect cvs digest distlocks fixpackages nostrip sandbox sfperms sign strict test userpriv usersandbox"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://ftp.gentoo.skynet.be/pub/gentoo/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo http://mirrors.sec.informatik.tu-darmstadt.de/gentoo http://ftp.easynet.nl/mirror/gentoo/"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 alsa apache2 avi bitmap-fonts bonobo cdr crypt cscope curl dba debug dedicated dga disablexmb dts dvd emboss encode ethereal faad fam fastcgi fbcon ffmpeg flac font-server freetds freetype gd gdbm gif gpm graphviz gstreamer gtk gtk2 imagemagick imlib ipv6 jikes jpeg libwww mad matroska mcal memlimit mikmod mmx mmxext motif mozilla mp3 mpeg mpi mysql mythtv ncurses nls nocd ogg oggvorbis opengl pam pdflib perl plotutils png pnp qt quicktime readline samba sdl slang snmp sse sse2 ssl svga tcltk tcpd tiff truetype truetype-fonts trusted type1-fonts unicode usb userlocales vorbis wmf wxwindows x86 xml xml2 xmms xosd xv xvid zlib"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Brant Gurganus





          2005-05-14 14:20:05 UTC
        

flush passed for me, but key_diff failed

key_diff                       [ fail ]

Errors are (from /var/tmp/portage/mysql-4.0.24-r1/work/mysql-4.0.24/mysql-test/var/log/mysqltest-time) :
/var/tmp/portage/mysql-4.0.24-r1/work/mysql-4.0.24/client/.libs/mysqltest: At line 20: Result content mismatch
(the last line(s) may be the ones that caused the die() in mysqltest)
Below are the diffs between actual and expected results:
-------------------------------------------------------
*** r/key_diff.result   Sat Mar  5 03:55:26 2005
--- r/key_diff.reject   Sun May 15 00:15:20 2005
***************
*** 35,42 ****
  a     a       a       a
  explain select t1.*,t2.* from t1,t1 as t2 where t1.A=t2.B;
  table type    possible_keys   key     key_len ref     rows    Extra
! t1    ALL     a       NULL    NULL    NULL    5
! t2    ALL     b       NULL    NULL    NULL    4       Using where
  select t1.*,t2.* from t1,t1 as t2 where t1.A=t2.B order by binary t1.a,t2.a;
  a     b       a       b
  A     B       a       a
--- 35,42 ----
  a     a       a       a
  explain select t1.*,t2.* from t1,t1 as t2 where t1.A=t2.B;
  table type    possible_keys   key     key_len ref     rows    Extra
! t2    ALL     b       NULL    NULL    NULL    5
! t1    ALL     a       NULL    NULL    NULL    4       Using where
  select t1.*,t2.* from t1,t1 as t2 where t1.A=t2.B order by binary t1.a,t2.a;
  a     b       a       b
  A     B       a       a
-------------------------------------------------------
Please follow the instructions outlined at
http://www.mysql.com/doc/en/Reporting_mysqltest_bugs.html
to find the reason to this problem and how to report this.

Test key_diff failed!




Comment 2


Robin Johnson









          2005-05-15 23:17:15 UTC
        

I can't reproduce this with identical glibc/gcc. kernel is 2.6.10-gentoo-r4.




Comment 3


Francesco R. (RETIRED)






          2005-07-27 14:28:23 UTC
        

Since MySQL 4.0.25 is in the tree. And the addressing of these failures seem
difficult. Going to close this. 

Feel free to reopen if you need specifically this version. In that case we can
work toghether to discover/fix the problem.




Comment 4


Maurice van der Pot (RETIRED)






          2005-07-28 09:35:52 UTC
        

Confirmed to work with 4.0.25-r1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

