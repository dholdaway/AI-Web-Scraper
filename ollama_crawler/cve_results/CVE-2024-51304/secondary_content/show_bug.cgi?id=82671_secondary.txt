Title: 82671 – games-engines/scummvm-0.7.0 link error
URL: https://bugs.gentoo.org/show_bug.cgi?id=82671

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 82671
games-engines/scummvm-0.7.0 link error
Last modified: 2005-02-27 19:46:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 82671 
      - games-engines/scummvm-0.7.0 link error


Summary:
games-engines/scummvm-0.7.0 link error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-20 05:42 UTC by Greisberger Christophe





      Modified:
    
2005-02-27 19:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Greisberger Christophe





          2005-02-20 05:42:45 UTC
        

games-engines/scummvm fails emerging with a link (undefined reference to mpeg2_info , mpeg2_parse , mpeg2_buffer).

Reproducible: Always
Steps to Reproduce:
1. emerge scummvm
2.
3.

Actual Results:  
# emerge queen bass 
Calculating dependencies ...done! 
>>> emerge (1 of 3) games-engines/scummvm-0.7.0 to / 
>>> md5 src_uri ;-) scummvm-0.7.0.tar.bz2 
>>> Unpacking source... 
>>> Unpacking scummvm-0.7.0.tar.bz2 to /var/tmp/portage/scummvm-0.7.0/work 
>>> Source unpacked. 
sdl 
oggvorbis 
Running ScummVM configure... 
Looking for C++ compiler... g++ 
Checking for compiler version... tail: `-1' option is obsolete; use `-n 1' since this will be 
removed in the future 
3.3.5, ok 
Checking hosttype... linux-gnu 
Checking endianness... little 
Running on x86... yes 
Alignment required... no 
Type with 1 byte... char 
Type with 2 bytes... short 
Type with 4 bytes... int 
Checking for Plugin support... no 
Checking for Ogg Vorbis... yes 
Checking for FLAC >= 1.0.1... yes 
Checking for MAD... yes 
Checking for ALSA >= 0.9... yes 
Checking for zlib... yes 
Checking for libmpeg2 >= 0.3.2... yes 
Checking for nasm... /usr/bin/nasm 
 
Engines: 
    SCUMM 
    Simon the Sorcerer 
    Beneath a Steel Sky 
    Broken Sword I (w/ mpeg2 cutscenes) 
    Broken Sword II (w/ mpeg2 cutscenes) 
    Flight of the Amazon Queen 
 
Backend... sdl, assembly routines 
Looking for sdl-config... /usr/bin/sdl-config 
 
Creating config.h 
Creating config.mak 
mkdir -p backends/sdl/.deps 
g++ -Wp,-MMD,"backends/sdl/.deps/events.d",-MQ,"backends/sdl/events.o",-MP -Wall 
-mcpu=athlon-xp -O2 -pipe -fforce-addr -fomit-frame-pointer -fprefetch-loop-arrays 
-funroll-loops -frerun-cse-after-loop -frerun-loop-opt -falign-functions=4 -mmmx -m3dnow 
-msse -mfpmath=sse -mcpu=athlon-xp -O2 -pipe -fforce-addr -fomit-frame-pointer 
-fprefetch-loop-arrays -funroll-loops -frerun-cse-after-loop -frerun-loop-opt 
-falign-functions=4 -mmmx -m3dnow -msse -mfpmath=sse   -ansi -W 
-Wno-unused-parameter -O -Wuninitialized -Wno-long-long -Wno-multichar 
-Wno-unknown-pragmas -pedantic -Wpointer-arith -Wcast-qual -Wconversion -Wshadow 
-Wimplicit -Wundef -Wnon-virtual-dtor -Wno-reorder -Wwrite-strings -fcheck-new 
-Wctor-dtor-privacy  -DHAVE_CONFIG_H -DUNIX -DDISABLE_SAGA 
-DDISABLE_KYRA -I. -I. -I./common -I./backends/midi/mt32        -I/usr/include/SDL 
-D_REENTRANT -Itest/cxxtest -c backends/sdl/events.cpp -o backends/sdl/events.o 
mkdir -p backends/sdl/.deps 
[...  
     blah 
...] 
g++    backends/sdl/events.o backends/sdl/graphics.o backends/sdl/sdl.o base/libbase.a 
scumm/libscumm.a simon/libsimon.a sky/libsky.a sword1/libsword1.a 
sword2/libsword2.a queen/libqueen.a gui/libgui.a graphics/libgraphics.a sound/libsound.a 
backends/libbackends.a common/libcommon.a backends/midi/mt32/libmt32.a   
-lvorbisfile -lvorbis -logg  -lFLAC  -lmad  -lasound  -lz  -lmpeg2 -L/usr/lib -Wl,-rpath,/usr/lib 
-lSDL -lpthread -o scummvm 
graphics/libgraphics.a(animation.o)(.text+0x31d): In function 
`Graphics::BaseAnimationState::init(char const*, void*)': 
: undefined reference to `mpeg2_info' 
graphics/libgraphics.a(animation.o)(.text+0x412): In function 
`Graphics::BaseAnimationState::decodeFrame()': 
: undefined reference to `mpeg2_parse' 
graphics/libgraphics.a(animation.o)(.text+0x463): In function 
`Graphics::BaseAnimationState::decodeFrame()': 
: undefined reference to `mpeg2_buffer' 
collect2: ld returned 1 exit status 
make: *** [scummvm] Error 1 
 
!!! ERROR: games-engines/scummvm-0.7.0 failed. 
!!! Function src_compile, Line 54, Exitcode 2 
!!! emake failed 
!!! If you need support, post the topmost build error, NOT this status message. 


# emerge info 
Portage 2.0.51-r3 (default-linux/x86/2004.3, gcc-3.3.5, glibc-2.3.4.20040808-r1, 
2.6.10-gentoo-r5 i686) 
================================================================= 
System uname: 2.6.10-gentoo-r5 i686 AMD Athlon(tm) XP 2800+ 
Gentoo Base System version 1.5.3 
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled] 
Autoconf: sys-devel/autoconf-2.59-r6,sys-devel/autoconf-2.13 
Automake: 
sys-devel/automake-1.7.9-r1,sys-devel/automake-1.8.5-r3,sys-devel/automake-1.5,sys-devel/automake-1.4_p6,sys-devel/automake-1.6.3,sys-devel/automake-1.9.4 
Binutils: sys-devel/binutils-2.15.92.0.2-r1 
Headers:  sys-kernel/linux26-headers-2.6.8.1-r1,sys-kernel/linux26-headers-2.6.8.1-r2 
Libtools: sys-devel/libtool-1.5.2-r7 
ACCEPT_KEYWORDS="x86" 
AUTOCLEAN="yes" 
CFLAGS="-mcpu=athlon-xp -O2 -pipe -fforce-addr -fomit-frame-pointer 
-fprefetch-loop-arrays -funroll-loops -frerun-cse-after-loop -frerun-loop-opt 
-falign-functions=4 -mmmx -m3dnow -msse -mfpmath=sse" 
CHOST="i686-pc-linux-gnu" 
COMPILER="" 
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/fax /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/bind /var/qmail/control /var/spool/fax/etc" 
CONFIG_PROTECT_MASK="/etc/afs/C /etc/afs/afsws /etc/gconf /etc/terminfo /etc/env.d" 
CXXFLAGS="-mcpu=athlon-xp -O2 -pipe -fforce-addr -fomit-frame-pointer 
-fprefetch-loop-arrays -funroll-loops -frerun-cse-after-loop -frerun-loop-opt 
-falign-functions=4 -mmmx -m3dnow -msse -mfpmath=sse" 
DISTDIR="/usr/portage/distfiles" 
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms" 
GENTOO_MIRRORS="ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ 
ftp://mirror.nutsmaas.nl/gentoo/ http://gentoo.zie.pg.gda.pl 
http://www.gigaload.org/gentoo.org/" 
MAKEOPTS="-j2" 
PKGDIR="/usr/portage/packages" 
PORTAGE_TMPDIR="/var/tmp" 
PORTDIR="/usr/portage" 
PORTDIR_OVERLAY="" 
SYNC="rsync://rsync.gentoo.org/gentoo-portage" 
USE="x86 16bit 3dnow 3dnowex X X509 Xaw3d aac aalib acl acpi acpi4linux adns afs 
aim alsa amd anthy apache2 apm arts artswrappersuid async athena audiofile avibdf 
berkdb bidi bitmap-fonts bluetooth bootsplash bzip2 bzlib canna caps cdda cddb cdio 
cdparanoia cdr cdrom cjk clamav clanJavaScript clanVoice codecs crypt cscope css 
ctype cups curl devfs26 dga dict directfb divx4linux djbfft dmx dnd doc dts dv dvb dvd 
dvdr dvdread encode ethereal evo exif extensions f77 faac faad fam fame fastcgi fbcon 
fbdev fdftk ffmpeg fftw flac flash fmod font-server foomaticdb fortran fpx freetype 
freewnn ftp gcj gd gdbm geoip ggi gif gimp gimpprint glut gmp gphoto2 graphviz gs 
gstreamer gtk gtk2 hal hbci icc icc-pgo iconv icq idea ieee1394 imagemagick imap imlib 
imlib2 inifile innodb ipv6 irmc jack jasper java javamail javascript jbig jce jikes joystick 
jp2 jpeg jpeg2k junit justify kde koffice-plugin ladcca lcms lesstif libcaca libclamav 
libsamplerate libwww lirc live lm_sensors logitech-mouse ltsp lzo lzw lzw-tiff m17n-lib 
mad maildir makecheck maps matroska mbox mcal md5sum memlimit mhash mikmod 
mime ming mjpeg mmap mmx mmx2 mng monkey motif mozcalendar mozilla 
moznoirc mozsvg mp3 mpeg mpeg2 mpeg4 mplayer msn music mysql mysqli mythtv 
nas ncurses netcdf network nls nocardbus nocd nocstrike nodod notfc nothemes ntlm 
nvidia oav objc odbc offensive ofx ogg oggvorbis openal openexr opengl oscar pam 
parse-clocks pcre pda pdf pdflib perl php physfs pic pie plotutils png portaudio povray 
ppds print private pthreads pwdb python qt quicktime rdesktop readline real recode 
rrdtool rtc ruby samba sasl scanner screenshot sdk sdl server silc skk slang slp smime 
sndfile sockets sounds sox spamassassin speedo speex spell sqlite sqlite3 sse sse2 ssl 
stencil-buffer stream streamzap subject-rewrite svg svga sysvipc szip tcltk tcpd tetex 
tga theora tidy tiff tools transcode translator truetype truetype-fonts type1 type1-fonts 
ucs2 ucs4 uim unicode usb userlocales utf8 v4l v4l2 vcd vcd-imager vhosts videos vidix 
vim-with-x virus-scan vnc vorbis wifi winbind wma123 wmf wxwindows xadmin xanim 
xface xfs xim xine xinerama xml xml2 xmms xosd xpm xprint xscreensaver xv xvid 
xvmc yahoo yv12 zlib video_cards_nvidia linguas_ar linguas_de linguas_en linguas_fr 
linguas_hu linguas_jp linguas_ro linguas_ru linguas_sp"




Comment 1


Mr. Bones. (RETIRED)






          2005-02-22 15:26:55 UTC
        

run revdep-rebuild and see if anything turns up




Comment 2


Greisberger Christophe





          2005-02-26 04:35:01 UTC
        

Ok, I'll do it today. I'm just doing an emerge -u world now... 109 packages left. :-p




Comment 3


Mr. Bones. (RETIRED)






          2005-02-27 19:46:46 UTC
        

Builds fine for me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

