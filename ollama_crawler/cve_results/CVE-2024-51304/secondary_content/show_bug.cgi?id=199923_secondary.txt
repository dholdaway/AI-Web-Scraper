Title: 199923 – media-sound/mpd-0.13.0 crashes after being several minutes on pause
URL: https://bugs.gentoo.org/show_bug.cgi?id=199923

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 199923
media-sound/mpd-0.13.0 crashes after being several minutes on pause
Last modified: 2008-01-20 02:56:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 199923 
      - media-sound/mpd-0.13.0 crashes after being several minutes on pause


Summary:
media-sound/mpd-0.13.0 crashes after being several minutes on pause
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Christoph Mende (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-11-21 21:49 UTC by Dominik Kozaczko





      Modified:
    
2008-01-20 02:56 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



avuton
sound









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dominik Kozaczko





          2007-11-21 21:49:59 UTC
        

MPD plays smoothly, I can pause for less than ~two minutes and it resumes smoothly. But after waiting several minutes I am unable to resume playing. Client losts connection, "/etc/init.d/mpd restart" stops but can't restart the daemon and I have to do "killall -9 mpd" to kill the beast (usually doesn't work without -9). "killall" is used because there are three mpd instances instead of one. I really can't figure out what's going on. I turned on verbose logging and still can't find anything.

Another strange thing: After starting mpd from init.d it starts ~three instances. But after stopping the daemon, one instance is still there and one turns itself to "[mpd] <defunct>" and sits there until "killall -9 mpd". This *also* isn't fully reproducible. I found out that multiple instances are generated if MPD resumed paused file.

Reproducible: Sometimes

Steps to Reproduce:
1. Play something with MPD
2. Hit "pause" (or better "stop") and wait several minutes
3. In the meantime you can watch the logs and do "ps aux|grep mpd" 

Actual Results:  
Hangs and needs restart

Expected Results:  
Should act normally

I use mpdscribble-0.2.12

# emerge --info
Portage 2.1.3.19 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.7-r0, 2.6.22-gentoo-r8 i686)
=================================================================
System uname: 2.6.22-gentoo-r8 i686 AMD Athlon(tm) XP 2600+
Timestamp of tree: Wed, 21 Nov 2007 16:00:01 +0000
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="pl_PL.UTF-8"
LC_ALL="pl_PL.UTF-8"
LINGUAS="pl en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X acl acpi alsa bash-completion berkdb bindist bitmap-fonts bzip2 cdr cli cracklib crypt cups curl dbus dri dvd dvdr dvdread fortran gdbm gif gpm gtk hal iconv ipv6 isdnlog jpeg midi mmap mmx mudflap ncurses nls nptl nptlonly nvidia opengl openmp pam pcre pdf perl png posix pppd python readline reflection sdl session spl sse ssl svg tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb v4l vcd vorbis x86 xinerama xml xorg xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="pl en" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Avuton Olrich





          2007-11-25 18:12:32 UTC
        

Can you please echo what use flags are being used for that individual package and would you also try MPD's svn to see if this problem persists? This could be a problem that has since been resolved.




Comment 2


Avuton Olrich





          2007-11-25 18:18:00 UTC
        

Also, if you're serious about helping to find this problem, you could obtain a gdb bittrace for us, thanks.




Comment 3


Avuton Olrich





          2007-11-29 02:05:37 UTC
        

Please try subversion, this problem probably doesn't exist there.




Comment 4


Christoph Mende (RETIRED)






          2008-01-20 02:56:33 UTC
        

works for me, no action for two months here, reopen if the problem persists with mpd-0.14.0_pre20080120









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

