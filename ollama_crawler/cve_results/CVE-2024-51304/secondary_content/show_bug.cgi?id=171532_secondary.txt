Title: 171532 – media-libs/libquicktime ffmpeg dependency ignored
URL: https://bugs.gentoo.org/show_bug.cgi?id=171532

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 171532
media-libs/libquicktime ffmpeg dependency ignored
Last modified: 2007-03-20 19:44:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 171532 
      - media-libs/libquicktime ffmpeg dependency ignored


Summary:
media-libs/libquicktime ffmpeg dependency ignored
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Dependencies

  (show other bugs)



Hardware:

PPC64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-03-20 08:46 UTC by Andrew John Hughes





      Modified:
    
2007-03-20 19:44 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew John Hughes





          2007-03-20 08:46:23 UTC
        

powerpc64-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../.. -I../../include -I../../include/quicktime -I/usr/include/ffmpeg -O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb -finline-functions -Wall -Winline -MT params.lo -MD -MP -MF .deps/params.Tpo -c params.c  -fPIC -DPIC -o .libs/params.o
params.c: In function 'lqt_ffmpeg_set_parameter':
params.c:206: error: 'AVCodecContext' has no member named 'bidir_refine'
params.c:207: error: 'AVCodecContext' has no member named 'brd_scale'
params.c:208: error: 'AVCodecContext' has no member named 'scenechange_factor'
make[3]: *** [params.lo] Error 1
make[3]: *** Waiting for unfinished jobs....
 powerpc64-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../.. -I../../include -I../../include/quicktime -I/usr/include/ffmpeg -O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb -finline-functions -Wall -Winline -MT audio.lo -MD -MP -MF .deps/audio.Tpo -c audio.c -o audio.o >/dev/null 2>&1
 powerpc64-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../.. -I../../include -I../../include/quicktime -I/usr/include/ffmpeg -O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb -finline-functions -Wall -Winline -MT video.lo -MD -MP -MF .deps/video.Tpo -c video.c -o video.o >/dev/null 2>&1
lqt_ffmpeg.c:189: warning: 'encode_parameters_dx50' defined but not used
 powerpc64-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../.. -I../../include -I../../include/quicktime -I/usr/include/ffmpeg -O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb -finline-functions -Wall -Winline -MT lqt_ffmpeg.lo -MD -MP -MF .deps/lqt_ffmpeg.Tpo -c lqt_ffmpeg.c -o lqt_ffmpeg.o >/dev/null 2>&1
mv -f .deps/audio.Tpo .deps/audio.Plo
mv -f .deps/video.Tpo .deps/video.Plo
mv -f .deps/lqt_ffmpeg.Tpo .deps/lqt_ffmpeg.Plo
make[3]: Leaving directory `/var/tmp/portage/media-libs/libquicktime-0.9.10/work/libquicktime-0.9.10/plugins/ffmpeg'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/media-libs/libquicktime-0.9.10/work/libquicktime-0.9.10/plugins'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-libs/libquicktime-0.9.10/work/libquicktime-0.9.10'
make: *** [all] Error 2

!!! ERROR: media-libs/libquicktime-0.9.10 failed.
Call stack:
  ebuild.sh, line 1614:   Called dyn_compile
  ebuild.sh, line 971:   Called qa_call 'src_compile'
  environment, line 3464:   Called src_compile
  libquicktime-0.9.10.ebuild, line 93:   Called die

!!! emake failed
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/media-libs/libquicktime-0.9.10/temp/build.log'.

emerge --info follows:

Portage 2.1.2.2 (default-linux/ppc/ppc64/2006.1/64bit-userland-gcc4/970/pmac, gcc-4.1.1, glibc-2.5-r0, 2.6.19-gentoo-r5.omega ppc64)
=================================================================
System uname: 2.6.19-gentoo-r5.omega ppc64 PPC970MP, altivec supported
Gentoo Base System release 1.12.9
Timestamp of tree: Tue, 13 Mar 2007 12:30:06 +0000
distcc 2.18.3 powerpc64-unknown-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="ppc64"
AUTOCLEAN="yes"
CBUILD="powerpc64-unknown-linux-gnu"
CFLAGS="-O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb"
CHOST="powerpc64-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O1 -mtune=970 -mcpu=970 -mabi=altivec -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer sandbox sfperms splitdebug strict"
GENTOO_MIRRORS="http://gentoo.blueyonder.co.uk ftp://mirrors.blueyonder.co.uk/mirrors/gentoo http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/ ftp://ftp.mirrorservice.org/sites/www.ibiblio.org/gentoo/ "
LINGUAS="en_GB"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/java-gcj-overlay /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac alsa altivec apache2 apm asf bash-completion berkdb bitmap-fonts bzip2 cairo cdparanoia cdr cli cpudetection cracklib crypt cups daap dbus doc dri dts dv dvd dvdread eds emacs emboss encode ffmpeg flac foomaticdb gcj gdbm gif gmp gpm gstreamer gtk hal iconv ieee1394 imlib ipod ipv6 isdnlog jpeg kde lcms ldap libg++ libwww mad midi mikmod mng motif mp3 mpeg ncurses nls nptl nptlonly nsplugin ogg openal opengl oss pam pcre pdf perl png ppc64 ppds pppd python qt qt3 qt4 quicktime readline reflection rtc samba sdl session speex spell spl sqlite ssl tcpd tetex tga theora threads tiff truetype truetype-fonts type1-fonts unicode vorbis wmf x264 xchattext xine xinerama xml xorg xscreensaver xv xvid zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="nv fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Reproducible: Always

Steps to Reproduce:
1. emerge libquicktime
2.
3.

Actual Results:  
Build fails.

Expected Results:  
Build succeeds.




Comment 1


Jakub Moc (RETIRED)






          2007-03-20 09:06:59 UTC
        

emerge -pv ffmpeg, please.





Comment 2


Andrew John Hughes





          2007-03-20 13:29:02 UTC
        

ffmpeg was dragged in as a later dependency (I was emerging kino).  If libquicktime needs ffmpeg it should depend on it.




Comment 3


Jakub Moc (RETIRED)






          2007-03-20 13:30:47 UTC
        

(In reply to comment #2)
> ffmpeg was dragged in as a later dependency (I was emerging kino).  If
> libquicktime needs ffmpeg it should depend on it.
> 

It already depends on it.

ffmpeg? ( media-video/ffmpeg )





Comment 4


Andrew John Hughes





          2007-03-20 15:14:20 UTC
        

Well, in this case, something is broken somewhere as emerging kino built libquicktime first, then ffmpeg.




Comment 5


Jakub Moc (RETIRED)






          2007-03-20 15:22:17 UTC
        

Unless you post the actual emerge --debug -pv output here, we can just guess.





Comment 6


Zac Medico






          2007-03-20 19:44:01 UTC
        

(In reply to comment #4)
> Well, in this case, something is broken somewhere as emerging kino built
> libquicktime first, then ffmpeg.

That type of problem was quite common with <portage-2.1.2, but it's been fixed (bug 147766).  Please reopen if you are able to produce emerge --pretend --debug output showing an incorrect merge order (with >=portage-2.1.2.2).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

