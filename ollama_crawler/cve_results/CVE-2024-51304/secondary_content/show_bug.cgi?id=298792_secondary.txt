Title: 298792 – dev-util/boost-build: de-optimization fix is incorrect
URL: https://bugs.gentoo.org/show_bug.cgi?id=298792

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 298792
dev-util/boost-build: de-optimization fix is incorrect
Last modified: 2012-08-19 12:02:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 298792 
      - dev-util/boost-build: de-optimization fix is incorrect


Summary:
dev-util/boost-build: de-optimization fix is incorrect
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Tiziano Müller (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-12-28 21:52 UTC by Rafał Mużyło





      Modified:
    
2012-08-19 12:02 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



binki
cpp+disabled
flameeyes
hwoarang
SebastianLuther









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rafał Mużyło





          2009-12-28 21:52:24 UTC
        

...resulting in boost built with "-O0 -O3 -Os" CFLAGS

No, it doesn't get printed in the log, but the change in compilation time
is VERY noticeable (if you go down to just -O2).

First correction, then explanation:
right now:
	sed -i \
		-e 's/\(off speed space\)/\1 none/' \
		-e 's/\(debug-symbols      : on off\)/\1 none/' \
		tools/builtin.jam || die "sed failed"
after correction:
        sed -i \
		-e 's/\(off speed space\)/none \1/' \
		-e 's/debug-symbols      : on off/debug-symbols      : none on off/' \
		tools/builtin.jam || die "sed failed"

Now, why ?
Answer lies in the same lines: at the end there a single word that explains it
- 'propagated'.
if 'none' is at the end it's equal to (off+on+space)==(-O0 -O3 -Os)




Comment 1


Tiziano Müller (RETIRED)






          2012-08-19 12:02:58 UTC
        

I'm sorry, but I can't reproduce that with boost-1.50.0 (anymore):

the following is from the `ps aux`:
[...]
101      181342  0.0  0.0  12588  1456 pts/10   S    14:00   0:00  |                           \_ /usr/x86_64-pc-linux-gnu/gcc-bin/4.7.1/x86_64-pc-linux-gnu-g++ -ftemplate-depth-128 -mtune=native -O2 -pipe -finline-functions -Wno-inline -Wall -pedantic -fPIC -DBOOST_ALL_NO_LIB=1 -DBOOST_HAS_ICU=1 -DBOOST_REGEX_DYN_LINK=1 -DNDEBUG -I. -I/usr/include -c -o bin.v2/libs/regex/build/gcc-4.7/gentoorelease/pch-off/wc_regex_traits.o libs/regex/build/../src/wc_regex_traits.cpp
[...]

soo, no flags other than the ones I have here.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

