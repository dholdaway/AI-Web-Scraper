Title: 564324 – dev-python/sphinx-1.3.1-r1: UnicodeDecodeError: 'utf-8' codec can't decode byte 0xba in position 35: invalid start byte
URL: https://bugs.gentoo.org/show_bug.cgi?id=564324

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 564324
dev-python/sphinx-1.3.1-r1: UnicodeDecodeError: 'utf-8' codec can't decode byte 0xba in position 35: invalid start byte
Last modified: 2017-04-11 19:39:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 564324 
      - dev-python/sphinx-1.3.1-r1: UnicodeDecodeError: 'utf-8' codec can't decode byte 0xba in position 35: invalid start byte


Summary:
dev-python/sphinx-1.3.1-r1: UnicodeDecodeError: 'utf-8' codec can't decode by...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-10-28 13:45 UTC by Thomas Beutin





      Modified:
    
2017-04-11 19:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/tmp/portage/dev-python/sphinx-1.3.1-r1/temp/build.log

              (build.log,3.96 KB,
                text/plain)

            
2015-10-28 13:45 UTC,

            Thomas Beutin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Beutin





          2015-10-28 13:45:03 UTC
        

i tried LC_ALL={C,en_GB.utf8,en_IE.iso885915@euro} w/o succes.

>>> Compiling source in /tmp/portage/dev-python/sphinx-1.3.1-r1/work/Sphinx-1.3.1 ...
 * python3_3: running distutils-r1_run_phase python_compile
/usr/bin/python3.3 setup.py build
Traceback (most recent call last):
  File "setup.py", line 84, in <module>
    from babel.messages.pofile import read_po
  File "/usr/lib64/python3.3/site-packages/babel/messages/__init__.py", line 12, in <module>
    from babel.messages.catalog import *
  File "/usr/lib64/python3.3/site-packages/babel/messages/catalog.py", line 23, in <module>
    from babel.dates import format_datetime
  File "/usr/lib64/python3.3/site-packages/babel/dates.py", line 28, in <module>
    from babel.util import UTC, LOCALTZ
  File "/usr/lib64/python3.3/site-packages/babel/util.py", line 278, in <module>
    from babel import localtime
  File "/usr/lib64/python3.3/site-packages/babel/localtime/__init__.py", line 74, in <module>
    LOCALTZ = get_localzone()
  File "/usr/lib64/python3.3/site-packages/babel/localtime/__init__.py", line 70, in get_localzone
    return _get_localzone()
  File "/usr/lib64/python3.3/site-packages/babel/localtime/_unix.py", line 90, in _get_localzone
    etctz = data.strip().decode()
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xba in position 35: invalid start byte

Reproducible: Always




# emerge --info
Portage 2.2.20.1 (python 2.7.10-final-0, default/linux/amd64/13.0/desktop, gcc-4.9.3, glibc-2.21-r1, 4.0.5-gentoo x86_64)
=================================================================
System uname: Linux-4.0.5-gentoo-x86_64-Intel-R-_Core-TM-_i5-2520M_CPU_@_2.50GHz-with-gentoo-2.2
KiB Mem:    16360304 total,   5734548 free
KiB Swap:   20971516 total,  20971516 free
Timestamp of repository gentoo: Wed, 28 Oct 2015 06:15:01 +0000
sh bash 4.3_p39
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
app-shells/bash:          4.3_p39::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.10::gentoo, 3.3.5-r1::gentoo, 3.4.3::gentoo
dev-util/cmake:           3.3.1-r1::gentoo
dev-util/pkgconfig:       0.28-r3::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.17::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.12.6::gentoo, 1.13.4::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.3::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.21-r1::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://192.168.5.1/gentoo-portage
    priority: -1000

rion
    location: /var/lib/layman/rion
    masters: gentoo
    priority: 0

barzog-overlay
    location: /var/lib/layman/barzog-overlay
    masters: gentoo
    priority: 1

seden
    location: /var/lib/layman/seden
    masters: gentoo
    priority: 2

sunrise
    location: /var/lib/layman/sunrise
    masters: gentoo
    priority: 3

desktop-effects
    location: /var/lib/layman/desktop-effects
    masters: gentoo
    priority: 4

java
    location: /var/lib/layman/java
    masters: gentoo
    priority: 5

science
    location: /var/lib/layman/science
    masters: gentoo
    priority: 6

prism-overlay
    location: /var/lib/layman/prism-overlay
    masters: gentoo
    priority: 7

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 8

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7-avx -fomit-frame-pointer -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/fax /usr/share/gnupg/qualified.txt /var/lib/hsqldb /var/spool/fax/etc /var/spool/munin-async/.ssh"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/apache2-php5.5/ext-active/ /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=corei7-avx -fomit-frame-pointer -O2 -pipe"
DISTDIR="/misc/GFZ2Tb/gentoo/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp"
USE="R X X509 a52 aac aalib accounting acl acpi adns aim aio alsa amd64 amr ansi ao apache2 apng applet archive ass audio audiofile automount avahi avx awt bacula-console bash-completion bazaar bcmath berkdb bidi bind-mysql bittorrent blas bluetooth bluray bonobo boost bzip2 cacert cairo calendar caps ccache cdb cdda cddb cdio cdparanoia cdr cgi chipcard chroot colord command-args consolekit corefonts cpudetection cpulimit cracklib cramfs crypt cscope css csv ctype cups curl curlwrappers customlog cvs cvsgraph cxx cyrus dba dbi dbm dbus dbx device-mapper devmap dga dhcp dirac directfb djvu dlopen dnsdb dri dts dv dvb dvd dvdr ecc egl encode excel exif expat faad fam fastcgi fat fdk ffmpeg fftw fits flac flash flatfile fltk fontconfig fonts fpx ftp fuse gallium gd gdal gdbm gdu geoip geos gif gimp ginac git gles gles1 gles2 glib glpk glut gmp gnome-keyring gnuplot gpg gphoto2 graphviz gs gsf gsl gssapi gstreamer gtk gtk3 gudev gzip h323 hardened hardenedphp hddtemp hdf5 hdri highlight hpn html http hunspell hwdb iconv icq icu idea idled idn imagemagick imap imlib imlib2 inifile innodb introspection ios ipalias ipc ipod ipv6 iso jabber jack java javascript jbig jingle jit jpeg jpeg2k json kdrive kerberos keymap kpathsea lame lapack latex lcms ldap less libass libnotify libsamplerate libv4l libv4l2 libwww lm_sensors lmtp logrotate logwatch lua lzma lzo mad magic matroska mbox mcal md5sum memlimit mercurial metis mgetty mhash midi milter mime mimencode ming mmap mms mmx mmxext mng mp3 mp4 mpeg mplayer msn mtp multilib mumps musepack musicbrainz mysql mysqli nagios-dns nagios-game nagios-ntp nagios-ping nagios-ssh nautilus ncurses netboot netcdf netlink network networkmanager nfs nis nls nntp nptl nsplugin nss ntfs ntp oav ocaml ocamlopt ocatve octave odbc offensive ogg openal openexr opengl openmp openrc openssh openssl orc osc oscar pam pam_chroot pam_timestamp pango parse-clocks pcf pcntl pcre pda pdf pdfkit pdflib perl php pic plotutils png policykit posix postfix postgis postgres postproc postscript ppds procmail ps pulseaudio pwdb python qdbm qt4 quotas quvi radius raw rdesktop rdp readline recode reiserfs rrdtool rss rtmp samba sample sasl scanner schroedinger scotch screen sendfile sensord session sftp sftplogging shaper shared sharedext shorten sieve simplexml slang slp smartcard smime smp sms smtp sna sndfile snmp snortsam soap sockets socks5 sound sox spamassassin sparse spatialite speex spell spl sql sqlite sqlite3 sse sse2 sse3 sse4 sse4_1 ssh ssl ssse3 stream subversion svg sysfs syslog sysvipc szip taglib tcpd telepathy theora threads tidy tiff timidity tokenizer tools transparent-proxy truetype truetype-fonts type1-fonts udev udisks unicode upnp upnp-av usb userlocales utf8 uuid v4l vaapi vala vcd vhosts video vim-syntax virtual-users virus-scan vnc vorbis vpx wddx weather webdav webkit webm webp wifi win32codecs withsamplescripts wmf x264 x265 xattr xcb xcomposite xetex xface xfs xft xinerama xinetd xml xml2 xmlrpc xmp xmpp xorg xosd xpdf-headers xpm xrandr xscreensaver xsl xslt xv xvfb xvid xvmc yahoo yaml yaz zlib zvbi" ABI_X86="32 64" APACHE2_MODULES="access auth auth_basic auth_digest authn_default authn_core authn_file authn_dbm authn_dbd authn_alias authn_anon authz_core authz_groupfile authz_host authz_user authz_dbd authz_dbm authz_owner authz_default dbd ident imagemap alias echo charset_lite cache file_cache disk_cache mem_cache ext_filter case_filter case-filter-in deflate filter mime_magic cern_meta proxy proxy_connect proxy_ftp proxy_http proxy_ajp proxy_balancer proxy_fcgi proxy_wstunnel expires headers usertrack info include cgi cgid dav dav_lock dav_fs vhost_alias speling rewrite log_config logio env setenvif mime status substitute autoindex asis negotiation dir imap actions userdir so unique_id version dumpio log_forensic reqtimeout socache_shmcb unixd slotmem_shm ratelimit remoteip lbmethod_bybusyness lbmethod_byrequests lbmethod_bytraffic lbmethod_heartbeat" APACHE2_MPMS="worker" CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4 sse4_1 sse4_2 ssse3" CURL_SSL="nss" ELIBC="glibc" FFTOOLS="cws2fws qt-faststart aviocat ismindex" GPSD_PROTOCOLS="aivdm sirf mtk3301 gpsclock superstar2 timing nmea" GRUB_PLATFORMS="pc multiboot efi coreboot efi-64" INPUT_DEVICES="keyboard mouse evdev wacom synaptics" KERNEL="linux" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer nlpsolver pdfimport wiki-publisher" LINGUAS="en_GB en en_US de_DE de" PHP_TARGETS="php5-4 php5-5 php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2 python3_3 python3_4" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby20 ruby21" SANE_BACKENDS="net hp" USERLAND="GNU" VIDEO_CARDS="vga intel i915 i965 fbdev vesa" XFCE_PLUGINS="battery brightness clock xmonad multiload-nandhp power trash"
USE_PYTHON="2.7 3.2 3.3"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Thomas Beutin





          2015-10-28 13:45:40 UTC
        

Created attachment 415642 [details]
/tmp/portage/dev-python/sphinx-1.3.1-r1/temp/build.log




Comment 2


Justin Lecher (RETIRED)






          2015-10-30 08:33:22 UTC
        

which version of Babel are you using?




Comment 3


Justin Lecher (RETIRED)






          2015-10-30 08:41:55 UTC
        

what is "/etc/localtime" on your system.




Comment 4


Thomas Beutin





          2015-10-30 12:32:01 UTC
        

(In reply to Justin Lecher from comment #2)
> which version of Babel are you using?

# eix dev-python/Babel$
[I] dev-python/Babel
     Available versions:  ~2.0 2.1.1 {doc test PYTHON_TARGETS="pypy pypy3 python2_7 python3_3 python3_4 python3_5"}
     Installed versions:  2.1.1(05:24:53 PM 10/26/2015)(-doc -test PYTHON_TARGETS="python2_7 python3_3 python3_4 -pypy -pypy3 -python3_5")
     Homepage:            http://babel.edgewall.org/ https://pypi.python.org/pypi/Babel
     Description:         A collection of tools for internationalizing Python applications




Comment 5


Thomas Beutin





          2015-10-30 12:35:53 UTC
        

(In reply to Justin Lecher from comment #3)
> what is "/etc/localtime" on your system.

it's a file, and this is binary identical to
/usr/share/zoneinfo/Factory




Comment 6


Justin Lecher (RETIRED)






          2015-10-30 12:38:35 UTC
        

(In reply to Thomas Beutin from comment #5)
> (In reply to Justin Lecher from comment #3)
> > what is "/etc/localtime" on your system.
> 
> it's a file, and this is binary identical to
> /usr/share/zoneinfo/Factory

Could you please try to setup your system according to the docs [1] and try again?

1)
https://wiki.gentoo.org/wiki/System_time#OpenRC




Comment 7


Thomas Beutin





          2015-10-30 13:27:03 UTC
        

(In reply to Justin Lecher from comment #6)
> (In reply to Thomas Beutin from comment #5)
> > (In reply to Justin Lecher from comment #3)
> > > what is "/etc/localtime" on your system.
> > 
> > it's a file, and this is binary identical to
> > /usr/share/zoneinfo/Factory
> 
> Could you please try to setup your system according to the docs [1] and try
> again?

after changig the time zone like this:
# ls -la /etc/localtime 
lrwxrwxrwx 1 root root 33 Oct 30 10:27 /etc/localtime -> /usr/share/zoneinfo/Europe/Berlin

it compiles fine, even on different locales (C, en_US.utf8, en_IE.iso885915@euro)

I don't know when or where i messed this up.

But on the other hand: why is there a file in /usr/share/zoneinfo/ which must not be used as /etc/localtime?

Anyway, sorry for the noise and thanks for digging into it!




Comment 8


Justin Keogh





          2017-04-11 19:39:08 UTC
        

I hit a similar error on sphinx-1.5.2:

struct.error: unpack requires a string argument of length 44
 * ERROR: dev-python/sphinx-1.5.2::gentoo failed (compile phase)

The cause was a corrupt /etc/localtime (due to an error on my part)

The fix was: emerge --config timezone-data









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

