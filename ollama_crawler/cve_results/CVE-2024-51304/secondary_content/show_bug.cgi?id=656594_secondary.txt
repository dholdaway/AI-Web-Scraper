Title: 656594 – app-metrics/collectd-5.8.0 : [TEST] FAIL: test_common
URL: https://bugs.gentoo.org/show_bug.cgi?id=656594

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 656594
app-metrics/collectd-5.8.0 : [TEST] FAIL: test_common
Last modified: 2019-03-01 18:46:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 656594 
      - app-metrics/collectd-5.8.0 : [TEST] FAIL: test_common


Summary:
app-metrics/collectd-5.8.0 : [TEST] FAIL: test_common
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Thomas Deutschmann (RETIRED)








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2018-05-26 22:42 UTC by Toralf Förster





      Modified:
    
2019-03-01 18:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,16.47 KB,
                text/plain)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





app-metrics:collectd-5.8.0:20180526-123009.log

              (app-metrics:collectd-5.8.0:20180526-123009.log,117.16 KB,
                text/plain)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,218.95 KB,
                text/plain)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





environment

              (environment,283.65 KB,
                text/plain)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





etc.portage.tbz2

              (etc.portage.tbz2,20.32 KB,
                application/x-bzip)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





logs.tbz2

              (logs.tbz2,43.05 KB,
                application/x-bzip)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





temp.tbz2

              (temp.tbz2,69.99 KB,
                application/x-bzip)

            
2018-05-26 22:42 UTC,

            Toralf Förster




Details





emerge-info.txt

              (emerge-info.txt,16.51 KB,
                text/plain)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





app-metrics:collectd-5.8.1:20190213-201955.log

              (app-metrics:collectd-5.8.1:20190213-201955.log,118.01 KB,
                text/plain)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,160.28 KB,
                text/plain)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





environment

              (environment,291.87 KB,
                text/plain)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





etc.portage.tbz2

              (etc.portage.tbz2,15.81 KB,
                application/x-bzip)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





logs.tbz2

              (logs.tbz2,43.15 KB,
                application/x-bzip)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





temp.tbz2

              (temp.tbz2,71.63 KB,
                application/x-bzip)

            
2019-02-13 20:29 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2018-05-26 22:42:14 UTC
        

make[2]: Entering directory '/var/tmp/portage/app-metrics/collectd-5.8.0/work/collectd-5.8.0'
make[3]: Entering directory '/var/tmp/portage/app-metrics/collectd-5.8.0/work/collectd-5.8.0'
FAIL: test_common
FAIL: test_format_graphite
FAIL: test_meta_data
FAIL: test_utils_avltree

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.0-desktop-gnome-systemd_test_20180520-112305

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-7.3.0 *

Available Python interpreters, in order of preference:
  [1]   python3.5
  [2]   python2.7 (fallback)
  [3]   pypy (fallback)

java-config:
The following VMs are available for generation-2:


emerge -qpv app-metrics/collectd
[ebuild  N    ] app-metrics/collectd-5.8.0  USE="filecaps udev -contrib -debug -java -perl (-selinux) -static-libs -xfs" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog -aggregation -amqp -apache -apcups -ascent -battery -bind -ceph -cgroups -chrony -conntrack -contextswitch -cpu -cpufreq -cpusleep -csv -curl -curl_json -curl_xml -dbi -disk -dns -drbd -email -entropy -ethstat -exec -fhcount -filecount -fscache -gmond -gps -hddtemp -hugepages -ipc -ipmi -iptables -ipvs -java -log_logstash -logfile -lua -lvm -madwifi -match_empty_counter -match_hashed -match_regex -match_timediff -match_value -mbmon -mcelog -md -memcachec -memcached -modbus -mqtt -multimeter -mysql -netlink -network -nfs -nginx -notify_desktop -notify_email -notify_nagios -ntpd -numa -nut -olsrd -onewire -openldap -openvpn -oracle -ovs_events -ovs_stats -perl -ping -postgresql -powerdns -processes -protocols -python -redis -routeros -rrdcached -sensors -serial -sigrok -smart -snmp -snmp_agent -statsd -table -tail -tail_csv -target_notification -target_replace -target_scale -target_set -tcpconns -teamspeak2 -ted -thermal -threshold -tokyotyrant -turbostat -unixsock -uptime -users -uuid -varnish -virt -vmem -vserver -wireless -write_graphite -write_http -write_kafka -write_log -write_mongodb -write_prometheus -write_redis -write_sensu -write_tsdb -xencpu -zfs_arc -zookeeper" PYTHON_SINGLE_TARGET="python3_5 -python2_7 -python3_4 -python3_6" PYTHON_TARGETS="python2_7 python3_5 -python3_4 -python3_6"




Comment 1


Toralf Förster






          2018-05-26 22:42:17 UTC
        

Created attachment 533396 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2018-05-26 22:42:20 UTC
        

Created attachment 533398 [details]
app-metrics:collectd-5.8.0:20180526-123009.log




Comment 3


Toralf Förster






          2018-05-26 22:42:25 UTC
        

Created attachment 533400 [details]
emerge-history.txt




Comment 4


Toralf Förster






          2018-05-26 22:42:28 UTC
        

Created attachment 533402 [details]
environment




Comment 5


Toralf Förster






          2018-05-26 22:42:31 UTC
        

Created attachment 533404 [details]
etc.portage.tbz2




Comment 6


Toralf Förster






          2018-05-26 22:42:34 UTC
        

Created attachment 533406 [details]
logs.tbz2




Comment 7


Toralf Förster






          2018-05-26 22:42:37 UTC
        

Created attachment 533408 [details]
temp.tbz2




Comment 8


Thomas Deutschmann (RETIRED)






          2018-05-27 00:27:15 UTC
        

I think there's something wrong with your image, see test-suite.log from logs.tbz2. Every test is failing with

> valgrind:  Fatal error at startup: a function redirection
> valgrind:  which is mandatory for this platform-tool combination
> valgrind:  cannot be set up.  Details of the redirection are:
> valgrind:  
> valgrind:  A must-be-redirected function
> valgrind:  whose name matches the pattern:      strlen
> valgrind:  in an object with soname matching:   ld-linux-x86-64.so.2
> valgrind:  was not found whilst processing
> valgrind:  symbols from the object with soname: ld-linux-x86-64.so.2
> valgrind:  
> valgrind:  Possible fixes: (1, short term): install glibc's debuginfo
> valgrind:  package on this machine.  (2, longer term): ask the packagers
> valgrind:  for your Linux distribution to please in future ship a non-
> valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)
> valgrind:  that exports the above-named function using the standard
> valgrind:  calling conventions for this platform.  The package you need
> valgrind:  to install for fix (1) is called
> valgrind:  
> valgrind:    On Debian, Ubuntu:                 libc6-dbg
> valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo
> valgrind:  
> valgrind:  Note that if you are debugging a 32 bit process on a
> valgrind:  64 bit system, you will need a corresponding 32 bit debuginfo
> valgrind:  package (e.g. libc6-dbg:i386).
> valgrind:  
> valgrind:  Cannot continue -- exiting now.  Sorry.
> 
> FAIL test_common (exit status: 1)


Test suite works for me,

============================================================================
Testsuite summary for collectd 5.8.0.git
============================================================================
# TOTAL: 15
# PASS:  15
# SKIP:  0


Please re-open if you cann add any useful information.




Comment 9


Toralf Förster






          2018-05-27 08:54:46 UTC
        

Hhm, I do just wonder why valgrind gives that error b/c that image has -valgrind in make.conf.




Comment 10


Toralf Förster






          2019-02-13 20:29:37 UTC
        

got at the unstable amd64 chroot image 17.0-hardened_test_20190209-222026 this : FAIL: test_common




Comment 11


Toralf Förster






          2019-02-13 20:29:40 UTC
        

Created attachment 565226 [details]
emerge-info.txt




Comment 12


Toralf Förster






          2019-02-13 20:29:42 UTC
        

Created attachment 565228 [details]
app-metrics:collectd-5.8.1:20190213-201955.log




Comment 13


Toralf Förster






          2019-02-13 20:29:45 UTC
        

Created attachment 565230 [details]
emerge-history.txt




Comment 14


Toralf Förster






          2019-02-13 20:29:48 UTC
        

Created attachment 565232 [details]
environment




Comment 15


Toralf Förster






          2019-02-13 20:29:50 UTC
        

Created attachment 565234 [details]
etc.portage.tbz2




Comment 16


Toralf Förster






          2019-02-13 20:29:53 UTC
        

Created attachment 565236 [details]
logs.tbz2




Comment 17


Toralf Förster






          2019-02-13 20:29:56 UTC
        

Created attachment 565238 [details]
temp.tbz2




Comment 18


Thomas Deutschmann (RETIRED)






          2019-03-01 18:46:46 UTC
        

Sorry, but this is still the same valgrind error. I don't know why valgrind doesn't work in your environment but unless I can reproduce I don't know what to do here.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

