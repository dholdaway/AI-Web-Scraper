Title: 855656 – dev-util/omake-0.10.3-r1 fails to compile (lto): undefined reference to getaddrinfo.c.b219a08e
URL: https://bugs.gentoo.org/show_bug.cgi?id=855656

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 855656
dev-util/omake-0.10.3-r1 fails to compile (lto): undefined reference to getaddrinfo.c.b219a08e
Last modified: 2024-03-03 20:48:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 855656 
      - dev-util/omake-0.10.3-r1 fails to compile (lto): undefined reference to getaddrinfo.c.b219a08e


Summary:
dev-util/omake-0.10.3-r1 fails to compile (lto): undefined reference to getad...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




lto



 

        Show dependency tree





 





      Reported:
    
2022-07-02 07:21 UTC by Agostino Sarubbo





      Modified:
    
2024-03-03 20:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



eschwartz









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.xz

              (build.log.xz,50.55 KB,
                application/x-xz)

            
2022-07-02 07:21 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2022-07-02 07:21:37 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: dev-util/omake-0.10.3-r1 fails to compile (lto).
Discovered on: amd64 (internal ref: lto_tinderbox)

NOTE:
This machine uses lto with CFLAGS=-flto -Werror=odr -Werror=lto-type-mismatch -Werror=strict-aliasing




Comment 1


Agostino Sarubbo






          2022-07-02 07:21:40 UTC
        

Created attachment 789422 [details]
build.log.xz

build log and emerge --info (compressed because it exceeds attachment limit, use 'xzless' to read it)




Comment 2


Eli Schwartz






          2024-03-03 20:48:38 UTC
        

Cannot reproduce. No changes have been made to the ebuild since the bug was filed.

My build logs do NOT contain -flto, though no filter-lto was used... my guess is that newer ocaml versions are stripping this automatically because, presumably, ocaml knows it is incompatible with LTO.

This makes sense since the original errors looked like this:

ocamlc -safe-string -g -w -40  -custom -o omake_gen_parse.byte  unix.cma   omake_gen_parse.cmo
lto-wrapper: warning: using serial compilation of 5 LTRANS jobs
lto-wrapper: note: see the ‘-flto’ option documentation[https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-flto] for more information
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0x47): undefined reference to `signals.c.1808f637'
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0x5e): undefined reference to `backtrace.c.8d3a0b5c'
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0x79): undefined reference to `backtrace.c.8d3a0b5c'
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0x86): undefined reference to `backtrace.c.8d3a0b5c'
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0x9c): undefined reference to `backtrace.c.8d3a0b5c'
/usr/lib/gcc/x86_64-pc-linux-gnu/12.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/dev-util/omake-0.10.3-r1/temp/ccxaaYHy.ltrans1.ltrans.o:(.debug_info+0xab): undefined reference to `backtrace.c.8d3a0b5c'


looks like randomly generated ids...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

