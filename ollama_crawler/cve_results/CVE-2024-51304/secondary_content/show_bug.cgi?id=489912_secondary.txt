Title: 489912 – media-tv/mythtv-0.27_p20130924 - x86_64-pc-linux-gnu-gcc: error: l1-cache-line-size=64: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=489912

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 489912
media-tv/mythtv-0.27_p20130924 - x86_64-pc-linux-gnu-gcc: error: l1-cache-line-size=64: No such file or directory
Last modified: 2015-09-06 20:28:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 489912 
      - media-tv/mythtv-0.27_p20130924 - x86_64-pc-linux-gnu-gcc: error: l1-cache-line-size=64: No such file or directory


Summary:
media-tv/mythtv-0.27_p20130924 - x86_64-pc-linux-gnu-gcc: error: l1-cache-lin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

MythTV Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

496046

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2013-10-30 20:53 UTC by kisak42





      Modified:
    
2015-09-06 20:28 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



joachim.herb
nick.ashman









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info '=media-tv/mythtv-0.27_p20130924::gentoo'

              (mythtv0.27_info,6.98 KB,
                text/plain)

            
2013-10-30 20:56 UTC,

            kisak42




Details





build log

              (build.log,61.21 KB,
                text/plain)

            
2013-10-30 21:00 UTC,

            kisak42




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


kisak42





          2013-10-30 20:53:04 UTC
        

Mythtv 0.27_p20130924 fails to finish the compile phase with CFLAGS="-O2 -pipe -march=bdver1 --param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048", but is fine with CFLAGS="-O2 -pipe -march=amdfam10"

Also, mythtv 0.26-fixes ebuilds are fine with -march=bdver1

Please let me know what other information is needed to 

Reproducible: Always




Comment 1


kisak42





          2013-10-30 20:56:43 UTC
        

Created attachment 362316 [details]
emerge --info '=media-tv/mythtv-0.27_p20130924::gentoo'




Comment 2


kisak42





          2013-10-30 21:00:48 UTC
        

Created attachment 362318 [details]
build log

# emerge -pqv '=media-tv/mythtv-0.27_p20130924::gentoo'
[ebuild   R   ] media-tv/mythtv-0.27_p20130924  USE="alsa dvd hls ieee1394 jack libass perl python theora vaapi vdpau vorbis xml xvid (-altivec) -autostart -bluray -cec -crystalhd -debug -dvb -egl -fftw -lcd -lirc -pulseaudio -raop -xmltv" INPUT_DEVICES="-joystick"




Comment 3


kisak42





          2013-10-30 21:12:02 UTC
        

so, apparently this is the only ebuild on my system that does not handle  '--param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048' in some sane manner.




Comment 4


Jeroen Roovers (RETIRED)






          2013-11-01 15:21:54 UTC
        

(In reply to kisak42 from comment #0)
> Mythtv 0.27_p20130924 fails to finish the compile phase with CFLAGS="-O2
> -pipe -march=bdver1 --param l1-cache-size=16 --param l1-cache-line-size=64
> --param l2-cache-size=2048", but is fine with CFLAGS="-O2 -pipe
> -march=amdfam10"
> 
> Also, mythtv 0.26-fixes ebuilds are fine with -march=bdver1

It's caused by `--param[ space ]arg', not by -march=.




Comment 5


kisak42





          2013-11-01 16:56:01 UTC
        

Thank you for adjusting the summary Mr. Roovers.




Comment 6


Jeroen Roovers (RETIRED)






          2013-12-27 15:25:32 UTC
        

*** Bug 496046 has been marked as a duplicate of this bug. ***




Comment 7


Doug Goldstein (RETIRED)






          2015-09-06 03:40:57 UTC
        

I would firstly recommend if you really want to nail down your hardware you use something like --march=native. But due to the way they pass around CFLAGS in their build you'd really have to take this upstream but you can adjust your CFLAGS by replacing the space with an = sign.

--param=l1-cache-line-size=64 should work.




Comment 8


kisak42





          2015-09-06 20:28:27 UTC
        

Good day Mr. Goldstein,

Since this bug report was last touched the default GCC version for gentoo stable has been bumped and these param options are applied when using -march=bdver1, new users should not encounter this issue unless they follow the safe cflags at http://gentoo-en.vfose.ru/wiki/Safe_Cflags/AMD#FX-8xxx.2F6xxx.2F4xxx_.28Bulldozer.29 , which relevant to gcc 4.6.x, but not 4.8.x.
The safe cflag page at https://wiki.gentoo.org/wiki/Safe_CFLAGS#FX-XXXX is up to date as of this writing. (advising users to use CFLAGS="-O2 -march=bdver1 -mprefer-avx128 -mvzeroupper -pipe" on chips like my system)


I am going to close this issue report at this time as resolved/worksforme.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

