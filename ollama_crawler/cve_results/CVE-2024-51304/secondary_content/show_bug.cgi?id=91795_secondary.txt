Title: 91795 – epiphany-1.6.0 segfaults with current mozilla in ~arch. Newer epiphany-versions doesn't compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=91795

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 91795
epiphany-1.6.0 segfaults with current mozilla in ~arch. Newer epiphany-versions doesn't compile
Last modified: 2005-09-28 12:14:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 91795 
      - epiphany-1.6.0 segfaults with current mozilla in ~arch. Newer epiphany-versions doesn't compile


Summary:
epiphany-1.6.0 segfaults with current mozilla in ~arch. Newer epiphany-versio...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
Lowest
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-07 05:53 UTC by Lars Strojny





      Modified:
    
2005-09-28 12:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Output of "strace -o strace.o epiphany"

              (strace.o,716.37 KB,
                text/plain)

            
2005-05-07 06:00 UTC,

            Lars Strojny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Lars Strojny





          2005-05-07 05:53:45 UTC
        






Comment 1


Lars Strojny





          2005-05-07 05:53:45 UTC
        

§ emerge info
Portage 2.0.51.20-r5 (default-linux/x86/2005.0, gcc-3.4.3-20050110, glibc-2.3.4.20050125-r1, 2.6.11.7-inotify i686)
=================================================================
System uname: 2.6.11.7-inotify i686 Intel(R) Pentium(R) 4 CPU 3.40GHz
Gentoo Base System version 1.6.10
ccache version 2.4 [disabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.3
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.11
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -fstack-protector -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -fstack-protector -pipe -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE"
DISTDIR="/mnt/portage/files"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--relax -Wl,--enable-new-dtags -Wl,--sort-common -s"
LINGUAS="de"
MAKEOPTS="-j1 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X a4 aac aalib acl acpi adns alsa animation apache2 avi bash-completion bitmap-fonts bzlib caca calendar cdparanoia cdr cpdflib crypt cups dashboard dba dbus divx4linux djbfft djvu dlloader dvd dvi eds encode epiphany esd evo exif fam fbcon flac ftp gaim gd gd-external geoip gif gimpprint gmail gnome gphoto2 gpm gstreamer gtk2 gtkhtml hal hardened hbci howl iconv imap imlib2 inifile ipv6 ithreads jpeg kdeenablefinal libcaca mad mhash mime mmx mng mono moznocompose moznoirc moznomail mozsvg mpeg mpeg4 mpm-peruser mpm-worker mysql ncurses network nls nntp nodrm nomotif nptl nptlonly nsplugin ogg oggvorbis opengl openssh pam pcre pic png python quicktime readline real rtc samba session simplexml sockets spell splash sqlite sse sse2 ssl svg svga t1lib theora threads tiff truetype truetype-fonts type1-fonts unicode usb userlocales vim-pager vorbis web wmf xanim xml2 xmlrpc xscreensaver xv zlib linguas_de userland_GNU kernel_linux libc_glibc"
Unset:  ASFLAGS, CTARGET

$ emerge -pv mozilla epiphany
 -mozdevelop +moznomail -moznoxft +mozsvg -mozxmlterm -postgres +ssl -xinerama -xprint 0 kB
[ebuild   R   ] www-client/epiphany-1.6.0-r3  -debug -doc 0 kB


$ epiphany
$ epiphany

(epiphany:21719): Gnome-WARNING **: Accessibility: failed to find module 'libgail-gnome' which is needed to make this application accessible
GTK Accessibility Module initialized

(epiphany:21719): Gnome-WARNING **: Accessibility: failed to find module 'libatk-bridge' which is needed to make this application accessible

** (epiphany:21719): WARNING **: EphyBrowser initialization failed for 0x80539b80


** (epiphany:21719): WARNING **: EphyBrowser initialization failed for 0x8066f068


** (epiphany:21719): CRITICAL **: ephy_bookmarks_find_bookmark: assertion `url != NULL' failed

** (epiphany:21719): CRITICAL **: NewTextWriterDashboard: assertion `context != NULL' failed

(gnome_segv:21835): Gnome-WARNING **: Accessibility: failed to find module 'libgail-gnome' which is needed to make this application accessible
GTK Accessibility Module initialized

(gnome_segv:21835): Gnome-WARNING **: Accessibility: failed to find module 'libatk-bridge' which is needed to make this application accessible

$ gdb
(bt) exec-file epiphany
(bt) run
Program received signal SIGSEGV, Segmentation fault.
0xb4f70769 in ?? ()
(gdb) bt
#0  0xb4f70769 in ?? ()

$ strace -o strace.o epiphany
(attachement)




Comment 2


Lars Strojny





          2005-05-07 06:00:27 UTC
        

Created attachment 58268 [details]
Output of "strace -o strace.o epiphany"




Comment 3


foser (RETIRED)






          2005-05-07 06:04:03 UTC
        

I'd start compiling with lower CFLAGS & LDFLAGS.




Comment 4


Lars Strojny





          2005-05-07 06:18:15 UTC
        

OK, I will try to use the default LDFLAGS. Do you think there is something wrong with my CFLAGS? I think this set should work, don't you?




Comment 5


Lars Strojny





          2005-05-07 17:29:22 UTC
        

Changes nothing. Weither using "" as LDFLAGS nor using the same as CFLAGS.
Must be another problem...




Comment 6


foser (RETIRED)






          2005-05-08 03:23:25 UTC
        

Not necessarily, it's not only the package that breaks that may need recompilation.

By the way, I run both versions just fine with the newest mozilla and have had no further reports of anything being wrong.




Comment 7


John N. Laliberte (RETIRED)






          2005-07-05 16:46:10 UTC
        

Are you still having this problem?
Heres some things I would try:

Its not clear whether you tried compiling with reduced CFLAGS, but first i'd try
that along with unsetting your LDFLAGS.  ( you may have already done this )

do you have libgail-gnome installed?

looking at the strace, have you tried renaming your .gnome2 directory to
.gnome2.bak and trying again?

You can also try to give us better debugging information using gdb:
first compile with: 
FEATURES="nostrip" USE="debug" CFLAGS="-march=changeme -g" package-name

after it crashes, do:
thread apply all bt
or just bt if that gives no output.

Thanks!




Comment 8


Lars Strojny





          2005-07-06 09:18:28 UTC
        

Yes, I have still this problem. I recompiled all stuff with empty CFLAGS and
yes, I have libgail installed.




Comment 9


John N. Laliberte (RETIRED)






          2005-09-28 11:52:05 UTC
        

are you using any overlays?




Comment 10


Lars Strojny





          2005-09-28 12:14:15 UTC
        

Not in that time. Currently I have no problems with that, because I'm using
1.8.x now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

