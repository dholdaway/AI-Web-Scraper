Title: 114516 – mysql-4.1.14 ebuild fails: libvio.a(viosslfactories.o):`new_VioSSLConnectorFd': undefined reference to `OpenSSL_add_all_algorithms'
URL: https://bugs.gentoo.org/show_bug.cgi?id=114516

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 114516
mysql-4.1.14 ebuild fails: libvio.a(viosslfactories.o):`new_VioSSLConnectorFd': undefined reference to `OpenSSL_add_all_algorithms'
Last modified: 2005-12-08 12:47:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 114516 
      - mysql-4.1.14 ebuild fails: libvio.a(viosslfactories.o):`new_VioSSLConnectorFd': undefined reference to `OpenSSL_add_all_algorithms'


Summary:
mysql-4.1.14 ebuild fails: libvio.a(viosslfactories.o):`new_VioSSLConnectorFd...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo Linux MySQL bugs team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-05 03:14 UTC by G. Gibson





      Modified:
    
2005-12-08 12:47 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


G. Gibson





          2005-12-05 03:14:28 UTC
        

i686-pc-linux-gnu-ar cru libvio.a vio.o viosocket.o viossl.o viosslfactories.o 
i686-pc-linux-gnu-ranlib libvio.a
/bin/sh ../libtool --preserve-dup-deps --mode=link i686-pc-linux-gnu-gcc  -O3
-DDBUG_OFF -march=pentium2 -O3 -pipe -DHAVE_ERRNO_AS_DEFINE=1    -rdynamic  -o
test-ssl  test-ssl.o -lstdc++ ../dbug/libdbug.a libvio.a ../mysys/libmysys.a
../strings/libmystrings.a -L/usr/lib -lssl -lcrypto -lpthread -lcrypt -lnsl -lm
 -lpthread 
/bin/sh ../libtool --preserve-dup-deps --mode=link i686-pc-linux-gnu-gcc  -O3
-DDBUG_OFF -march=pentium2 -O3 -pipe -DHAVE_ERRNO_AS_DEFINE=1    -rdynamic  -o
test-sslserver  test-sslserver.o -lstdc++    ../dbug/libdbug.a libvio.a
../mysys/libmysys.a ../strings/libmystrings.a -L/usr/lib -lssl -lcrypto
-lpthread -lcrypt -lnsl -lm  -lpthread 
/bin/sh ../libtool --preserve-dup-deps --mode=link i686-pc-linux-gnu-gcc  -O3
-DDBUG_OFF -march=pentium2 -O3 -pipe -DHAVE_ERRNO_AS_DEFINE=1    -rdynamic  -o
test-sslclient  test-sslclient.o -lstdc++    ../dbug/libdbug.a libvio.a
../mysys/libmysys.a ../strings/libmystrings.a -L/usr/lib -lssl -lcrypto
-lpthread -lcrypt -lnsl -lm  -lpthread 
mkdir .libs
i686-pc-linux-gnu-gcc -O3 -DDBUG_OFF -march=pentium2 -O3 -pipe
-DHAVE_ERRNO_AS_DEFINE=1 -rdynamic -o test-ssl test-ssl.o  -lstdc++
../dbug/libdbug.a libvio.a ../mysys/libmysys.a ../strings/libmystrings.a
-L/usr/lib -lssl -lcrypto -lpthread -lcrypt -lnsl -lm -lpthread
i686-pc-linux-gnu-gcc -O3 -DDBUG_OFF -march=pentium2 -O3 -pipe
-DHAVE_ERRNO_AS_DEFINE=1 -rdynamic -o test-sslserver test-sslserver.o  -lstdc++
../dbug/libdbug.a libvio.a ../mysys/libmysys.a ../strings/libmystrings.a
-L/usr/lib -lssl -lcrypto -lpthread -lcrypt -lnsl -lm -lpthread
i686-pc-linux-gnu-gcc -O3 -DDBUG_OFF -march=pentium2 -O3 -pipe
-DHAVE_ERRNO_AS_DEFINE=1 -rdynamic -o test-sslclient test-sslclient.o  -lstdc++
../dbug/libdbug.a libvio.a ../mysys/libmysys.a ../strings/libmystrings.a
-L/usr/lib -lssl -lcrypto -lpthread -lcrypt -lnsl -lm -lpthread
libvio.a(viosslfactories.o): In function `new_VioSSLConnectorFd':
viosslfactories.c:(.text+0x3b8): undefined reference to `OpenSSL_add_all_algorithms'
libvio.a(viosslfactories.o): In function `new_VioSSLAcceptorFd':
viosslfactories.c:(.text+0x649): undefined reference to `OpenSSL_add_all_algorithms'
collect2: ld returned 1 exit status
make[2]: *** [test-ssl] Error 1
make[2]: *** Waiting for unfinished jobs....
libvio.a(viosslfactories.o): In function `new_VioSSLConnectorFd':
viosslfactories.c:(.text+0x3b8): undefined reference to `OpenSSL_add_all_algorithms'
libvio.a(viosslfactories.o): In function `new_VioSSLAcceptorFd':
viosslfactories.c:(.text+0x649): undefined reference to `OpenSSL_add_all_algorithms'
collect2: ld returned 1 exit status
make[2]: *** [test-sslserver] Error 1
libvio.a(viosslfactories.o): In function `new_VioSSLConnectorFd':
viosslfactories.c:(.text+0x3b8): undefined reference to `OpenSSL_add_all_algorithms'
libvio.a(viosslfactories.o): In function `new_VioSSLAcceptorFd':
viosslfactories.c:(.text+0x649): undefined reference to `OpenSSL_add_all_algorithms'
collect2: ld returned 1 exit status
make[2]: *** [test-sslclient] Error 1
make[2]: Leaving directory `/var/tmp/portage/mysql-4.1.14/work/mysql/vio'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/mysql-4.1.14/work/mysql'
make: *** [all] Error 2


Reproducible: Always
Steps to Reproduce:
1. emerge =dev-db/mysql-4.1.14
2.
3.

Actual Results:  
See Details (above).  I get the same results attempting to build mysql-5.0.15 as
well - if that helps narrow it down.

Expected Results:  
mysql merged.

Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r3,
2.6.13-gentoo-r1 i686)
=================================================================
System uname: 2.6.13-gentoo-r1 i686 Pentium II (Deschutes)
Gentoo Base System version 1.12.0_pre11
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.2.3-r1, 2.3.5, 2.4.2
sys-apps/sandbox:    1.2.16
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.20-r1
virtual/os-headers:  2.4.19, 2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium2 -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/afs/C /etc/afs/afsws /etc/gconf /etc/splash
/etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -mcpu=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ http://mirror.datapipe.net/gentoo
ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
ftp://mirrors.sec.informatik.tu-darmstadt.de/gentoo/
http://mirror.datapipe.net/gentoo"
LANG="en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X a52 aac aalib acl acpi adabas afs aim alsa apache2 apm arts
artswrappersuid audiofile avi bcel bcmath berkdb bidi birdstep bitmap-fonts bmp
bzip2 bzlib calendar canna cdb cdparanoia cdr chasen cjk clamav clanJavaScript
clisp cmucl cpdflib crypt cscope ctype cups curl curlwrappers db2 dba dbase
dbmaker dbx dedicated dio directfb divx4linux doc dv dvb dvd dvdr dvdread eds
emboss empress empress-bcs encode esd esoob evms2 exif expat fam fbcon fdftk
ffmpeg fftw filepro firebird flac flash flatfile foomaticdb fortran freetds
freewnn frontbase fusion gatos gb gcj gd gdbm geoip ggi gif ginac glade glitz
glut gmp gnome gnutils gphoto2 gpm gps gstreamer gtk gtk2 gtkhtml guile hal hdf
hdf5 hyperwave-api iconv icq idn ieee1394 imagemagick imap imlib informix ingres
inifile innodb interbase iodbc ipv6 jabber jack java javamail javascript jdepend
joystick jpeg jsch junit jython kde ladcca lcms ldap libg++ libgda libwww lirc
lm_sensors lua mad mailwrapper matroska mbox mcal mcve mdb mhash mikmod ming
mmap mmx mng motif mp3 mpeg mpi msn mysql mysqli ncurses netcdf nis nls nptl oav
objc oci8 odbc ofx ogg oggvorbis openal opengl oracle oracle7 osc oscar oss
ovrimos pam pcre pda pdflib perl pfpro php plotutils png portaudio posix
postgres ppds prelude python qdbm qt quicktime readline recode ruby samba sapdb
scanner sdl shorten simplexml skey slang slp sndfile soap solid sox speex spell
sqlite ssl svg svga sybase sybase-ct sysvipc szip tcltk tcpd tetex theora
threads tiff truetype truetype-fonts type1 type1-fonts udev unicode usb v4l vcd
vhosts vorbis wddx wifi win32codecs wmf wxwin wxwindows xalan xine xinerama xml
xml2 xmlrpc xmms xpm xsl xv xvid yahoo zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Francesco R. (RETIRED)






          2005-12-05 06:23:35 UTC
        

I'll go on that this night (CET time) could you please add the output of 
# emerge -pv dev-libs/openssl dev-db/mysql
, thanks




Comment 2


G. Gibson





          2005-12-05 12:40:08 UTC
        

emerge -pv dev-libs/openssl dev-db/mysql

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] dev-libs/openssl-0.9.7i  -bindist -emacs -test +zlib 0 kB 
[ebuild  N    ] dev-db/mysql-5.0.16-r3  +berkdb -big-tables -cluster -debug
-extraengine -minimal +perl (-selinux) +ssl -static -utf8 0 kB 
[ebuild  N    ] dev-perl/DBD-mysql-3.0002_p3  129 kB 

Total size of downloads: 129 kB




Comment 3


G. Gibson





          2005-12-05 13:13:08 UTC
        

doh!  I just realized I didn't have the ssl flag set.  I'll attempt to build
4.1.14 and/or 5.0.16-r3 and see if that fixes it. (feeling like a pointy-headed
newb).  :/






Comment 4


Pat Double





          2005-12-08 07:29:32 UTC
        

Actually the profile may have "ssl" set, see in your mysql emerge line "+ssl". 
Look in /etc/make.profile/make.defaults to see if ssl is there, probably so. I 
get a similar error from kded (KDE 3.4 and 3.5): 
 
kdecore (KLibLoader): WARNING: KLibrary: /usr/lib/libcrypto.so.0.9.7: undefined 
symbol: PKCS7_content_free 
kdecore (KLibLoader): WARNING: KLibrary: /usr/lib/libcrypto.so.0.9.7: undefined 
symbol: OpenSSL_add_all_algorithms 
kdecore (KLibLoader): WARNING: KLibrary: /usr/lib/libcrypto.so.0.9.7: undefined 
symbol: OpenSSL_add_all_algorithms_conf 
kdecore (KLibLoader): WARNING: KLibrary: /usr/lib/libcrypto.so.0.9.7: undefined 
symbol: OpenSSL_add_all_algorithms_noconf 
 
I do not think this is mysql specific, it seems that either the libcrypto 
library is missing some exports or these functions have been removed. 




Comment 5


Francesco R. (RETIRED)






          2005-12-08 12:47:16 UTC
        

Every combination should *not* fail, I've tryed to reproduce but without luck.
OpenSSL_add_all_algorithms is a fundamental function as far as I can see [1].
Here I've tryed succesfully some combination using the same package versions.

Look like an issue related to meteo wether, try to emerge --sync and reemerge again.

[1] http://www.openssl.org/docs/crypto/OpenSSL_add_all_algorithms.html

regards,
Francesco R.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

