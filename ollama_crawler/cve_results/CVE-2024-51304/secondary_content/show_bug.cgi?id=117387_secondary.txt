Title: 117387 – x11-libs/fltk-1.1.6 ebuild fails, then fails to detect the failure and reports success
URL: https://bugs.gentoo.org/show_bug.cgi?id=117387

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 117387
x11-libs/fltk-1.1.6 ebuild fails, then fails to detect the failure and reports success
Last modified: 2006-01-13 03:48:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 117387 
      - x11-libs/fltk-1.1.6 ebuild fails, then fails to detect the failure and reports success


Summary:
x11-libs/fltk-1.1.6 ebuild fails, then fails to detect the failure and report...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Desktop Misc. Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-01 14:00 UTC by Phil Stracchino (Unix Ronin)





      Modified:
    
2006-01-13 03:48 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Phil Stracchino (Unix Ronin)





          2006-01-01 14:00:27 UTC
        

I've just tried to install media-sound/alsa-tools-1.0.8-r1 on a new Gentoo install.  The ebuild failed because it couldnt' find libfltk, which seemed odd since portage had just successfully emerged x11-libs/fltk as a dependency.  However, when I looked for it, I couldn't find libfltk either.  Examination reveals that the x11-libs/fltk-1.1.6 ebuild is failing:

Compiling glut_font.cxx...
In file included from glut_compatability.cxx:39:
../FL/glut.H:431: error: `APIENTRY' does not name a type
../FL/glut.H:445: error: `APIENTRY' does not name a type
../FL/glut.H:446: error: `APIENTRY' does not name a type
../FL/glut.H:449: error: `APIENTRY' does not name a type
../FL/glut.H:450: error: `APIENTRY' does not name a type
../FL/glut.H:451: error: `APIENTRY' does not name a type
../FL/glut.H:452: error: `APIENTRY' does not name a type
../FL/glut.H:453: error: `APIENTRY' does not name a type
../FL/glut.H:454: error: `APIENTRY' does not name a type
../FL/glut.H:455: error: `APIENTRY' does not name a type
../FL/glut.H:456: error: `APIENTRY' does not name a type
../FL/glut.H:457: error: `APIENTRY' does not name a type
../FL/glut.H:458: error: `APIENTRY' does not name a type
../FL/glut.H:459: error: `APIENTRY' does not name a type
../FL/glut.H:460: error: `APIENTRY' does not name a type
../FL/glut.H:461: error: `APIENTRY' does not name a type
../FL/glut.H:462: error: `APIENTRY' does not name a type
../FL/glut.H:463: error: `APIENTRY' does not name a type
../FL/glut.H:464: error: `APIENTRY' does not name a type
../FL/glut.H:465: error: `APIENTRY' does not name a type
../FL/glut.H:466: error: `APIENTRY' does not name a type
make[1]: *** [glut_compatability.o] Error 1
make[1]: *** Waiting for unfinished jobs....
In file included from glut_font.cxx:32:
../FL/glut.H:431: error: `APIENTRY' does not name a type
../FL/glut.H:445: error: `APIENTRY' does not name a type
../FL/glut.H:446: error: `APIENTRY' does not name a type
../FL/glut.H:449: error: `APIENTRY' does not name a type
../FL/glut.H:450: error: `APIENTRY' does not name a type
../FL/glut.H:451: error: `APIENTRY' does not name a type
../FL/glut.H:452: error: `APIENTRY' does not name a type
../FL/glut.H:453: error: `APIENTRY' does not name a type
../FL/glut.H:454: error: `APIENTRY' does not name a type
../FL/glut.H:455: error: `APIENTRY' does not name a type
../FL/glut.H:456: error: `APIENTRY' does not name a type
../FL/glut.H:457: error: `APIENTRY' does not name a type
../FL/glut.H:458: error: `APIENTRY' does not name a type
../FL/glut.H:459: error: `APIENTRY' does not name a type
../FL/glut.H:460: error: `APIENTRY' does not name a type
../FL/glut.H:461: error: `APIENTRY' does not name a type
../FL/glut.H:462: error: `APIENTRY' does not name a type
../FL/glut.H:463: error: `APIENTRY' does not name a type
../FL/glut.H:464: error: `APIENTRY' does not name a type
../FL/glut.H:465: error: `APIENTRY' does not name a type
../FL/glut.H:466: error: `APIENTRY' does not name a type
make[1]: *** [glut_font.o] Error 1
>>> Test phase [not enabled]: x11-libs/fltk-1.1.6

However, the ebuild then fails to DETECT that it has failed, goes ahead to install what it's got so far anyway (i.e, just the headers), reports success, and then incorrectly marks x11-libs/fltk as installed even though no library is ever built.




Comment 1


Carsten Lohrke (RETIRED)






          2006-01-01 14:57:54 UTC
        

What gfx driver do you have installed? `emerge --info`, please.




Comment 2


Krzysztof Pawlik (RETIRED)






          2006-01-02 03:20:58 UTC
        

What xorg version?




Comment 3


Phil Stracchino (Unix Ronin)





          2006-01-02 09:12:12 UTC
        

Sorry for omitting the emerge.  This will show an incorrect kernel version because at this moment I'm booted in Slackware and chrooted into the Gentoo filesystems.  The actual Gentoo kernel version is linux-2.6.14-gentoo-r5 (hand built, not genkernel).

babylon5 / # emerge --info
Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.4.31 i686)
=================================================================
System uname: 2.4.31 i686
Gentoo Base System version 1.6.13
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://mirrors.tds.net/gentoo http://gentoo.ccccom.com http://mirror.tucdemonic.org/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X alsa apm arts audiofile avi bash-completion bcmath berkdb bitmap-fonts bonobo bzip2 cdparanoia crypt cups curl curlwrappers dbm directfb dri emboss encode exif expat fam foomaticdb fortran ftp gd gdbm gif glut gnome gpm gstreamer gtk gtk2 gtkhtml guile hardened imagemagick imlib innodb ipv6 jpeg lcms ldap libg++ libwww lm_sensors mad matrox mbox mikmod mime mmap mmx mng motif mp3 mpeg mysql ncurses nls ofx ogg oggvorbis opengl oss pam pcre pdflib perl png posix python qt quicktime readline ruby samba sasl sdl sharedmem snmp sockets sox spell ssl svga symlink tcltk tcpd test threads tiff truetype truetype-fonts type1-fonts udev unicode usb v4l vorbis wxwindows xface xml xml2 xmms xpm xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY

By 'gfx driver' I assume you're referring to the X.org graphics device driver:

Section "Device"
    Identifier  "Matrox G450"
    Driver      "mgag400"
    ChipRev     0x80
    Option      "Overlay"       "24,8"
    Option      "NoDDC"
    #VideoRam    32768
    # Insert Clocks lines here if appropriate
EndSection

Xorg version is the current ebuild, 6.8.2.





Comment 4


Krzysztof Pawlik (RETIRED)






          2006-01-13 03:48:55 UTC
        

I can't reproduce it and `APIENTRY' is defined in FL/gl.h









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

