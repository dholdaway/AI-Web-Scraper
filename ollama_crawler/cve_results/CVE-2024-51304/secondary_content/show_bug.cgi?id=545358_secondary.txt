Title: 545358 – dev-libs/libevent - Add USE=malloc-replacement
URL: https://bugs.gentoo.org/show_bug.cgi?id=545358

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 545358
dev-libs/libevent - Add USE=malloc-replacement
Last modified: 2017-02-02 15:51:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 545358 
      - dev-libs/libevent - Add USE=malloc-replacement


Summary:
dev-libs/libevent - Add USE=malloc-replacement
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Jeroen Roovers (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-04-02 20:30 UTC by Taylor Gronka





      Modified:
    
2017-02-02 15:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



mr.gronka









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,5.18 KB,
                text/plain)

            
2015-04-02 20:30 UTC,

            Taylor Gronka




Details





build.log

              (build.log,13.08 KB,
                text/plain)

            
2015-04-07 23:38 UTC,

            Taylor Gronka




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Taylor Gronka





          2015-04-02 20:30:28 UTC
        

Created attachment 400424 [details]
emerge --info

There is a flag to be set that enables/disables event_set_mem_functions(). This flag appears to be disabled by default with no apparent option to enable it via portage. The flag is detailed here:
http://www.wangafu.net/~nickm/libevent-2.1/doxygen/html/event_8h.html

Logs from the issue are located here, along with the solution I currently I have implemented (which is to unintall libevent and user a version build from source):
https://github.com/rejectedsoftware/vibe.d/issues/1055

Programs which use this hook cannot compile or run due to this issue. Occurs with both versions 2.0.22 and 2.1.5.




Comment 1


Jason Zaman






          2015-04-07 18:12:57 UTC
        

Can you please attach the build.log too.




Comment 2


Taylor Gronka





          2015-04-07 23:38:53 UTC
        

Created attachment 400796 [details]
build.log




Comment 3


Jeroen Roovers (RETIRED)






          2017-02-02 14:49:07 UTC
        

Comment on attachment 400796 [details]
build.log

That's rather pointless as the problem doesn't occur in libevent.




Comment 4


Jeroen Roovers (RETIRED)






          2017-02-02 15:24:25 UTC
        

Fixed in 2.1.8.




Comment 5


Jeroen Roovers (RETIRED)






          2017-02-02 15:50:56 UTC
        

I have just reverted that change. It turns out --enable-malloc-replacement was always covered by USE=debug. It should probably not end up being used in stable environments, and developers shouldn't depend on its "features".









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

