Title: 446626 – dev-db/sqlite-3.7.15.2 fails src_test
URL: https://bugs.gentoo.org/show_bug.cgi?id=446626

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 446626
dev-db/sqlite-3.7.15.2 fails src_test
Last modified: 2015-04-26 15:07:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 446626 
      - dev-db/sqlite-3.7.15.2 fails src_test


Summary:
dev-db/sqlite-3.7.15.2 fails src_test
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Arfrever Frehtes Taifersar Arahesis








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2012-12-09 18:12 UTC by Nikoli





      Modified:
    
2015-04-26 15:07 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.xz

              (sqlite-3.7.14.1_build.log.xz,119.12 KB,
                application/octet-stream)

            
2012-12-09 18:12 UTC,

            Nikoli




Details





build.log.xz

              (sqlite-3.7.13_build.log.xz,107.58 KB,
                application/octet-stream)

            
2012-12-09 18:19 UTC,

            Nikoli




Details





build.log.xz

              (sqlite-3.7.15.1_build.log.xz,126.39 KB,
                application/octet-stream)

            
2012-12-21 21:18 UTC,

            Nikoli




Details





buil.log.xz

              (sqlite-3.7.15.2_build.log.xz,117.24 KB,
                application/octet-stream)

            
2013-03-31 09:31 UTC,

            Nikoli




Details





build.log

              (sqlite-3.7.16.1_build.log.xz,142.77 KB,
                application/octet-stream)

            
2013-04-03 10:08 UTC,

            Nikoli




Details





Show
              Obsolete (3)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nikoli





          2012-12-09 18:12:23 UTC
        

Created attachment 331888 [details]
build.log.xz

Time: zerodamage.test 10 ms
Memory used:          now         24  max     130392  max-size    1000006
Allocation count:     now          1  max     458775
Page-cache used:      now          0  max         13  max-size      65784
Page-cache overflow:  now          0  max    7639840
Scratch memory used:  now          0  max          0
Scratch overflow:     now          0  max      74752  max-size      66540
3 errors out of 177161 tests
Failures on these tests: oserror-1.1.1 oserror-1.1.2 oserror-1.1.3
All memory allocations freed - no leaks
Memory used:          now          0  max     130392  max-size    1000006
Allocation count:     now          0  max     458775
Page-cache used:      now          0  max         13  max-size      65784
Page-cache overflow:  now          0  max    7639840
Scratch memory used:  now          0  max          0
Scratch overflow:     now          0  max      74752  max-size      66540
Maximum memory usage: 130392 bytes
Current memory usage: 0 bytes
Number of malloc()  : -1 calls
make: *** [test] Error 1
 * ERROR: dev-db/sqlite-3.7.14.1 failed (test phase):
 *   emake failed



Portage 2.1.11.31 (hardened/linux/amd64, gcc-4.5.4, glibc-2.15-r3, 3.6.7-hardened x86_64)
=================================================================
                        System Settings
=================================================================
Timestamp of tree: Sun, 09 Dec 2012 17:15:01 +0000
ld GNU ld (GNU Binutils) 2.22
app-shells/bash:          4.2_p37
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.3-r2
sys-apps/baselayout:      2.1-r1
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.68
sys-devel/automake:       1.11.6
sys-devel/binutils:       2.22-r1
sys-devel/gcc:            4.5.4
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.6 (virtual/os-headers)
sys-libs/glibc:           2.15-r3
Repositories: gentoo nikoli
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -mtune=generic -mavx -maes -mpclmul -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/openvpn/easy-rsa /usr/share/themes/oxygen-gtk/gtk-2.0 /usr/share/themes/oxygen-gtk/gtk-3.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -mtune=generic -mavx -maes -mpclmul -O2 -pipe"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch protect-owned sandbox sfperms strict test unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j9"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTDIR_OVERLAY="/var/lib/layman/nikoli"
USE="X a52 aac acl acpi aes-ni akonadi alsa amd64 amr atm audiofile avx bash-completion bzip2 cairo caps cdda cddb cdio cdparanoia cdr celt cli consolekit cracklib crypt css cups cxx dbus djvu dri dts dv dvd dvdr encode exif fat ffmpeg flac fluidsynth fontconfig fortran gd geoip gif gimp gmp gnutls gphoto2 gpm graphviz gsm gstreamer gtk handbook hardened iconv icu id3tag idn ilbc imagemagick imap imlib ios ipod ipv6 jbig jpeg jpeg2k justify kde kipi kontact lame laptop lcms libass libnotify libproxy libsamplerate lm_sensors lzma lzo mac mad matroska mikmod mmx mmxext mng modplug modules mp3 mp4 mpeg mtp mudflap multilib musepack musicbrainz ncurses networkmanager nls nptl nptlonly ntfs ogg openal openexr opengl openmp opus pam pango pax_kernel pcre pdf pg-intdatetime phonon plasma pm-utils png policykit postscript pppd qt3support qt4 quicktime rar raw readline reiserfs replaygain rtmp sasl scanner schroedinger semantic-desktop session sid smp sndfile socks5 speex spell sqlite sse sse2 sse3 sse4_1 ssl ssse3 startup-notification svg symlink sysfs taglib theora threads thumbnail tiff truetype tta udev udisks unicode upnp upower usb v4l v4l2 vcd vorbis vpx wavpack webkit webp wifi wma wmf x264 xattr xcb xcomposite xface xinerama xml xmp xpm xscreensaver xv xvid xz zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="*" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="pdfimport presenter-console presenter-minimizer report-builder nlpsolver" LINGUAS="ru ru_RU en" NGINX_MODULES_HTTP="access auth_basic autoindex fastcgi gzip rewrite" PHP_TARGETS="php5-3" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby19" USERLAND="GNU" VIDEO_CARDS="radeon r600 modesetting vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

dev-db/sqlite-3.7.13 was built with the following:
USE="extensions fts3 icu (multilib) readline test threadsafe -debug -doc -secure-delete -soundex -tcl -unlock-notify"




Comment 1


Nikoli





          2012-12-09 18:19:39 UTC
        

Created attachment 331892 [details]
build.log.xz

Now src_test also fails for dev-db/sqlite-3.7.13, but it worked fine before:
# qlop -l dev-db/sqlite-3.7.13
Tue Aug 14 06:08:20 2012 >>> dev-db/sqlite-3.7.13
Thu Nov 22 18:52:15 2012 >>> dev-db/sqlite-3.7.13
Thu Nov 22 20:29:39 2012 >>> dev-db/sqlite-3.7.13




Comment 2


Arfrever Frehtes Taifersar Arahesis





          2012-12-10 00:16:31 UTC
        

(In reply to comment #1)
> Now src_test also fails for dev-db/sqlite-3.7.13, but it worked fine before

So this bug is not a regression.
Anyway all tests of dev-db/sqlite-3.7.14.1 pass (today) for me on amd64.




Comment 3


Markos Chandras (RETIRED)






          2012-12-21 19:22:32 UTC
        

is this still true with the latest ebuild?




Comment 4


Nikoli





          2012-12-21 21:18:33 UTC
        

Created attachment 332974 [details]
build.log.xz

Yes.




Comment 5


Nikoli





          2013-02-14 15:56:29 UTC
        

With dev-lang/tcl-8.5.13-r1 tests work fine.




Comment 6


Nikoli





          2013-03-31 09:30:35 UTC
        

Now tests fail again for dev-db/sqlite-3.7.14.1 and dev-db/sqlite-3.7.15.2




Comment 7


Nikoli





          2013-03-31 09:31:57 UTC
        

Created attachment 343814 [details]
buil.log.xz




Comment 8


Arfrever Frehtes Taifersar Arahesis





          2013-03-31 22:19:51 UTC
        

Please test dev-db/sqlite-3.7.16.1.




Comment 9


Nikoli





          2013-04-03 10:08:32 UTC
        

Created attachment 344186 [details]
build.log

Same problem.




Comment 10


Arfrever Frehtes Taifersar Arahesis





          2013-04-03 16:22:01 UTC
        

Can you reproduce this bug on a non-hardened system?

(I cannot reproduce this bug.)




Comment 11


Nikoli





          2013-05-29 15:39:19 UTC
        

I do not have non hardened system, but i tried booting hardened-sources with grsecurity disabled: sqlite still fails tests.




Comment 12


Nikoli





          2015-04-26 15:07:06 UTC
        

Now with dev-lang/tcl-8.5.17 both dev-db/sqlite-3.8.7.4 and dev-db/sqlite-3.8.9 pass all tests :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

