Title: 448872 – When ima_appraisal_tcb is enabled, system oops'es in bootmisc
URL: https://bugs.gentoo.org/show_bug.cgi?id=448872

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 448872
When ima_appraisal_tcb is enabled, system oops'es in bootmisc
Last modified: 2014-06-01 12:09:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 448872 
      - When ima_appraisal_tcb is enabled, system oops'es in bootmisc


Summary:
When ima_appraisal_tcb is enabled, system oops'es in bootmisc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Hardened

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sven Vermeulen (RETIRED)








URL:







Whiteboard:
integrity  
  


Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-12-27 16:24 UTC by Sven Vermeulen (RETIRED)





      Modified:
    
2014-06-01 12:09 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



hardened-kernel+disabled









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Kernel oops

              (kernel_oops_with_ima_appraisal_tcb.txt,7.22 KB,
                text/plain)

            
2012-12-27 16:25 UTC,

            Sven Vermeulen (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sven Vermeulen (RETIRED)






          2012-12-27 16:24:43 UTC
        

In the /etc/init.d/bootmisc file, the following activity is ran that generates an OOPS in the kernel (3.7-hardened):

"""
dmesg > /var/log/dmesg
"""

Running 'dmesg > /tmp/dmesg' doesn't trigger the oops, nor does moving /tmp/dmesg to /var/log/dmesg. Commenting out the activity (or replacing it with the following excerpt) makes the system behave as needed (no oops).

"""
dmesg > /tmp/dmesg
mv /tmp/dmesg /var/log/dmesg
chcon -t var_log_t /var/log/dmesg
"""

Oops will be attached.

Reproducible: Always




Comment 1


Sven Vermeulen (RETIRED)






          2012-12-27 16:25:16 UTC
        

Created attachment 333488 [details]
Kernel oops




Comment 2


Sven Vermeulen (RETIRED)






          2012-12-27 16:25:49 UTC
        

@hardened-kernel team: adding you in Cc just in case it reminds you of something




Comment 3


Sven Vermeulen (RETIRED)






          2014-06-01 12:09:31 UTC
        

Doesn't come up anymore









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

