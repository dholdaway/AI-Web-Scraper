Title: 654180 – sys-fs/quota-4.04-r1::gentoo[rpc] conflicting sys-libs/glibc[rpc] requirements
URL: https://bugs.gentoo.org/show_bug.cgi?id=654180

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 654180
sys-fs/quota-4.04-r1::gentoo[rpc] conflicting sys-libs/glibc[rpc] requirements
Last modified: 2018-05-12 07:21:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 654180 
      - sys-fs/quota-4.04-r1::gentoo[rpc] conflicting sys-libs/glibc[rpc] requirements


Summary:
sys-fs/quota-4.04-r1::gentoo[rpc] conflicting sys-libs/glibc[rpc] requirements
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-04-27 09:02 UTC by Spooky Ghost





      Modified:
    
2018-05-12 07:21 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



atoth









See Also:


630534





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Spooky Ghost





          2018-04-27 09:02:06 UTC
        

Since #653798 I have not been able to upgrade:

sys-libs/glibc:2.2

  (sys-libs/glibc-2.25-r11:2.2/2.2::gentoo, installed) pulled in by
    sys-libs/glibc[rpc(-)] required by (net-libs/rpcsvc-proto-0:0/0::gentoo, installed)


  (sys-libs/glibc-2.25-r11:2.2/2.2::gentoo, ebuild scheduled for merge) pulled in by
    sys-libs/glibc[-rpc(-)] required by (sys-fs/quota-4.04-r1:0/0::gentoo, ebuild scheduled for merge)

The following USE changes are necessary to proceed:
 (see "package.use" in the portage(5) man page for more details)
# required by sys-fs/quota-4.04-r1::gentoo[rpc]
# required by @selected
# required by @world (argument)
>=sys-libs/glibc-2.25-r11 -rpc


If I set the glibc use flag as suggested:

sys-libs/glibc:2.2

  (sys-libs/glibc-2.25-r11:2.2/2.2::gentoo, installed) pulled in by
    sys-libs/glibc[rpc(-)] required by (net-libs/rpcsvc-proto-0:0/0::gentoo, installed)


  (sys-libs/glibc-2.25-r10:2.2/2.2::gentoo, ebuild scheduled for merge) pulled in by
    sys-libs/glibc[-rpc(-)] required by (sys-fs/quota-4.04-r1:0/0::gentoo, ebuild scheduled for merge)

The following USE changes are necessary to proceed:
 (see "package.use" in the portage(5) man page for more details)
# required by sys-fs/quota-4.04-r1::gentoo[rpc]
# required by @selected
# required by @world (argument)
=sys-libs/glibc-2.25-r10 -rpc


rpcsvc-proto is installed as a dependency of net-fs/autofs.  There is no upgrade path for rpcsvc-proto since all later versions RDEPEND="!<sys-libs/glibc-2.26"


# emerge --info
Portage 2.3.24 (python 2.7.14-final-0, default/linux/amd64/17.0/no-multilib, gcc-6.4.0, glibc-2.25-r11, 4.4.125 x86_64)
=================================================================
System uname: Linux-4.4.125-x86_64-Six-Core_AMD_Opteron-tm-_Processor_2423_HE-with-gentoo-2.4.1
KiB Mem:     4033176 total,    768408 free
KiB Swap:   16777212 total,  16705896 free
Timestamp of repository gentoo: Fri, 27 Apr 2018 07:17:08 +0000
Head commit of repository gentoo: 8609fd580447320a0a861f6abb56d86cdc11fca7

Head commit of repository dmuk: 23f4d6b73591fba629df23a946b60e0727237080

Head commit of repository squeezebox: df12b12ec64f11abcb5c6f7dce55aed6d5216073

sh bash 4.4_p12
ld GNU ld (Gentoo 2.29.1 p3) 2.29.1
ccache version 3.3.4 [enabled]
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.24.3-r1::gentoo
dev-lang/python:          2.7.14-r1::gentoo, 3.5.5::gentoo
dev-util/ccache:          3.3.4-r1::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.11::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.9.6-r3::gentoo, 1.10.3-r2::gentoo, 1.11.6-r1::gentoo, 1.12.6::gentoo, 1.13.4-r1::gentoo, 1.14.1::gentoo, 1.15.1-r2::gentoo
sys-devel/binutils:       2.29.1-r1::gentoo
sys-devel/gcc:            6.4.0-r1::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.14::gentoo (virtual/os-headers)
sys-libs/glibc:           2.25-r11::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

squeezebox
    location: /var/lib/layman/squeezebox
    sync-type: git
    sync-uri: https://github.com/hickinbottoms/gentoo-squeezebox-overlay.git
    masters: gentoo
    priority: 100

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=amdfam10 -O3 -pipe -fstack-check"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.6/ext-active/ /etc/php/apache2-php7.1/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cgi-php7.1/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/php/cli-php7.1/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=amdfam10 -O3 -pipe -fstack-check"
DISTDIR="/misc/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs ccache distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://www.mirrorservice.org/sites/distfiles.gentoo.org http://gentoo.osuosl.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="en_GB.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en en_GB cs de fr hu it ja pt"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--progress --stats"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow 3dnowext X Xaw3d aac aalib acl acpi aim alsa amd64 apache2 audiofile avi bash-completion berkdb bluetooth bmp bonobo bzip2 caps cdb cdr cjk cli consolekit cpdflib cracklib crypt cups curl cxx dba dbm dbus dga directfb divx4linux dri dts dvb dvd dvdr encode esd exif expat fam fbcon ffmpeg fftw flac flash foomaticdb fortran ftp gd gdbm gif gnome gphoto2 gpm gstreamer gtk gtk2 gtkhtml iconv icq icu imagemagick imap imlib innodb inotify ipv6 irmc jabber jadetex java jbig joystick jpeg jpeg2k kerberos lcms ldap libedit libwww lm_sensors mad maildir mailwrapper mhash mime ming mmx mmxext mng modules mp3 mpeg msn mysql ncurses nls nptl nptlonly offensive ogg openal opengl openmp oscar pam pcre pdf pdflib perl php png policykit popcnt postgres ppds pulseaudio python qt5 quicktime readline samba sasl sdl seamonkey seccomp semantic-desktop session slp snmp spell sse sse2 sse3 sse4a ssl svg tcl tcltk tcpd tetex theora tiff tk truetype udev unicode usb v4l2 videos vorbis wmf xattr xine xinerama xml xml2 xmp xpm xsl xv xvid yahoo zlib" ABI_X86="64" ALSA_CARDS="emu10k1 intel8x0" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_core authn_dbd authn_dbm authn_default authn_file authz_core authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio macro mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http remoteip rewrite setenvif slotmem_shm so socache_shmcb speling status unique_id unixd userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon plan sheets stage words" CAMERAS="canon" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="3dnow 3dnowext mmx mmxext popcnt sse sse2 sse3 sse4a" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc efi-64 multiboot xen" INPUT_DEVICES="evdev keyboard joystick mouse vmmouse" KERNEL="linux" L10N="en en-GB cs de fr hu it ja pt" LCD_DEVICES="mtxorb xosd text ncurses" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5" PYTHON_SINGLE_TARGET="python3_5" PYTHON_TARGETS="python2_7 python3_5" RUBY_TARGETS="ruby22 ruby23 ruby24" USERLAND="GNU" VIDEO_CARDS="amdgpu fbdev vesa vga intel nv r128 radeon v4l i915" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS




Comment 1


Andreas K. Hüttel







          2018-04-28 21:32:08 UTC
        

Short summary:

You need 
* either glibc without rpc support, that means glibc-2.26 or glibc-2.25[-rpc]
* or quota without rpc support, i.e. quota[-rpc]

If you don't need it I suggest switching off rpc support of quota. 

If you do need rpc support for quota, you have two options:

1) switch off rpc support of glibc-2.25, unsetting rpc useflag there.
   You should globally switch on the libtirpc useflag then.
   This is the less-tested configuration I guess. 

2) Update to glibc-2.26, which will hopefully go stable soon anyway. 
   You should globally switch on the libtirpc useflag then.
   Please read this mail first for additional information:
   https://archives.gentoo.org/gentoo-dev/message/39db40af2e578018827786d3c964ddf3




Comment 2


Spooky Ghost





          2018-05-12 07:21:52 UTC
        

I have worked around this with some keywords:

=sys-libs/glibc-2.26-r7         ~amd64
=net-libs/libnsl-1.1.0-r3       ~amd64
=net-libs/rpcsvc-proto-1.2-r1   ~amd64

I'm not entirely happen about having to ~amd64 glibc as a workaround but I will mark resolved.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

