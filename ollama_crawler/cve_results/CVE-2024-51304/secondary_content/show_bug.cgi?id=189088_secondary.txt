Title: 189088 – gnome-extra/evolution-data-server-1.10.2 fails w/ USE=doc
URL: https://bugs.gentoo.org/show_bug.cgi?id=189088

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 189088
gnome-extra/evolution-data-server-1.10.2 fails w/ USE=doc
Last modified: 2007-09-29 07:54:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 189088 
      - gnome-extra/evolution-data-server-1.10.2 fails w/ USE=doc


Summary:
gnome-extra/evolution-data-server-1.10.2 fails w/ USE=doc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-16 10:44 UTC by Wernher Eksteen





      Modified:
    
2007-09-29 07:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cryptixd









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Initial snapshot to deep world update prior to emerging them

              (deep-world-update-initial-snapshot,11.03 KB,
                text/plain)

            
2007-08-16 10:53 UTC,

            Wernher Eksteen




Details





Snapshot of current deep world emerge dependency list at broken package

              (deep-world-update-current-status-snapshot,4.03 KB,
                text/plain)

            
2007-08-16 10:56 UTC,

            Wernher Eksteen




Details





Complete build log for gnome-extra/evolution-data-setrver-1.10.2

              (evolution-data-server-1.10.2.log.tar.bz2,37.98 KB,
                application/octet-stream)

            
2007-08-16 11:03 UTC,

            Wernher Eksteen




Details





emerge --info output

              (emerge-info,7.53 KB,
                text/plain)

            
2007-08-16 11:04 UTC,

            Wernher Eksteen




Details





My make.conf

              (make.conf,1.96 KB,
                text/plain)

            
2007-08-16 11:05 UTC,

            Wernher Eksteen




Details





evolution-data-server-1.10.2 emerge log

              (gnome-extra:evolution-data-server-1.10.2:20070816-093345.log,16.03 KB,
                text/plain)

            
2007-08-16 11:13 UTC,

            Jakub Moc (RETIRED)




Details





equery list

              (equery-list.txt,20.15 KB,
                text/plain)

            
2007-09-01 14:34 UTC,

            Wernher Eksteen




Details





Show
              Obsolete (4)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Wernher Eksteen





          2007-08-16 10:44:04 UTC
        

After syncing the portage tree, and performing a deep world update, evolution-data-server-1.10.2 is a dependency for gnome-2.18.2-r1 that fails to build/compile and install to continue with the rest of the dependencies in the emerge list. Because of this, installation/updating can't continue.

Reproducible: Always

Steps to Reproduce:
1.emerge --sync
2.emerge --update --newuse --deep world

or even just by doing...

1.
emerge --update evolution-data-server



Expected Results:  
Since this is a dependency in the dependency emerge list towards installing gnome-2.18.2-r1, installing/updating cannot continue until a bug fix can resolve this issue.




Comment 1


Jakub Moc (RETIRED)






          2007-08-16 10:49:09 UTC
        

My crystall ball got broken recently, sorry. Maybe if you post some errors, someone will be able to help.




Comment 2


Wernher Eksteen





          2007-08-16 10:53:17 UTC
        

Created attachment 128254 [details]
Initial snapshot to deep world update prior to emerging them

This was a snapshot taken to the entire emerge dependency list before running emerge --update --newuse --deep world




Comment 3


Wernher Eksteen





          2007-08-16 10:56:48 UTC
        

Created attachment 128256 [details]
Snapshot of current deep world emerge dependency list at broken package

This is the current snapshot taken of the emerge dependency list with all it's use flags and recursive dependencies. This was taken in prentend mode as emerge -pv --update --newuse --deep world, and is run as emerge --update --newuse --deep world




Comment 4


Jakub Moc (RETIRED)






          2007-08-16 10:59:22 UTC
        

The errors you get, please. We already know that Gnome depends on evolution, that won't help anyone here.





Comment 5


Wernher Eksteen





          2007-08-16 11:03:14 UTC
        

Created attachment 128259 [details]
Complete build log for gnome-extra/evolution-data-setrver-1.10.2




Comment 6


Wernher Eksteen





          2007-08-16 11:04:38 UTC
        

Created attachment 128261 [details]
emerge --info output

This is the output obtained from running "emerge --info"




Comment 7


Wernher Eksteen





          2007-08-16 11:05:48 UTC
        

Created attachment 128262 [details]
My make.conf

This is my /etc/make.conf file




Comment 8


Wernher Eksteen





          2007-08-16 11:11:52 UTC
        

I've attached the emerge --info as text file under "emerge --info output"

I'm using the x86 desktop profile:
/usr/portage/profiles/default-linux/x86/2007.0/desktop/

Running kernel is: 2.6.20-gentoo-r8






Comment 9


Jakub Moc (RETIRED)






          2007-08-16 11:13:26 UTC
        

Created attachment 128265 [details]
evolution-data-server-1.10.2 emerge log




Comment 10


Jakub Moc (RETIRED)






          2007-08-16 11:16:00 UTC
        

<snip>
gtk-doc: Compiling scanner
mkdir .libs
 i686-pc-linux-gnu-gcc -march=prescott -O2 -pipe -fomit-frame-pointer -Wall -Wmissing-prototypes -Wno-sign-compare -I../../../../addressbook -I../../../.. -I../../../.. -I../../../../addressbook/libical/src -DORBIT2=1 -pthread -I/usr/include/libxml2 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/gconf/2 -I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/libgnome-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -c libebook-scan.c  -fPIC -DPIC -o .libs/libebook-scan.o
gtk-doc: Linking scanner
i686-pc-linux-gnu-gcc -march=prescott -O2 -pipe -fomit-frame-pointer -Wall -Wmissing-prototypes -Wno-sign-compare -o .libs/libebook-scan .libs/libebook-scan.o -pthread -Wl,--export-dynamic  ../../../../addressbook/libebook/.libs/libebook-1.2.so -L/usr/lib /var/tmp/portage/gnome-extra/evolution-data-server-1.10.2/work/evolution-data-server-1.10.2/camel/.libs/libcamel-1.2.so -L/usr/lib/nspr -L/usr/lib/lib -L/usr/lib/nss -lssl3 -lsmime3 -lnss3 -lkrb4 -ldes425 -lkrb5 -lk5crypto -lcom_err -lgssapi_krb5 /var/tmp/portage/gnome-extra/evolution-data-server-1.10.2/work/evolution-data-server-1.10.2/libedataserver/.libs/libedataserver-1.2.so -lplds4 -lplc4 -lnspr4 /usr/lib/libdb-4.3.so /usr/lib/libgnome-2.so /usr/lib/libesd.so /usr/lib/libasound.so /usr/lib/libaudiofile.so /usr/lib/libpopt.so /usr/lib/libbonobo-2.so /usr/lib/libbonobo-activation.so /usr/lib/libORBitCosNaming-2.so /usr/lib/libgnomevfs-2.so /usr/lib/libxml2.so -lm /usr/lib/libdbus-glib-1.so /usr/lib/libgnutls.so -lz /usr/lib/libtasn1.so /usr/lib/libgcrypt.so -lnsl /usr/lib/libgpg-error.so /usr/lib/libavahi-glib.so /usr/lib/libavahi-client.so /usr/lib/libdbus-1.so /usr/lib/libavahi-common.so -lresolv -lutil /usr/lib/libgconf-2.so /usr/lib/libORBit-2.so /usr/lib/libgmodule-2.0.so -ldl /usr/lib/libgthread-2.0.so -lpthread -lrt /usr/lib/libgobject-2.0.so /usr/lib/libglib-2.0.so 
creating libebook-scan
gtk-doc: Running scanner libebook-scan
Scan failed: 
</snip>

Pasting a relevant snip here. Compile this this with USE="-doc" and move on.





Comment 11


Wernher Eksteen





          2007-08-16 12:18:16 UTC
        

(In reply to comment #10)
> <snip>
> gtk-doc: Compiling scanner
> mkdir .libs
>  i686-pc-linux-gnu-gcc -march=prescott -O2 -pipe -fomit-frame-pointer -Wall
> -Wmissing-prototypes -Wno-sign-compare -I../../../../addressbook -I../../../..
> -I../../../.. -I../../../../addressbook/libical/src -DORBIT2=1 -pthread
> -I/usr/include/libxml2 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include
> -I/usr/include/gconf/2 -I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0
> -I/usr/include/bonobo-activation-2.0 -I/usr/include/libgnome-2.0
> -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -c
> libebook-scan.c  -fPIC -DPIC -o .libs/libebook-scan.o
> gtk-doc: Linking scanner
> i686-pc-linux-gnu-gcc -march=prescott -O2 -pipe -fomit-frame-pointer -Wall
> -Wmissing-prototypes -Wno-sign-compare -o .libs/libebook-scan
> .libs/libebook-scan.o -pthread -Wl,--export-dynamic 
> ../../../../addressbook/libebook/.libs/libebook-1.2.so -L/usr/lib
> /var/tmp/portage/gnome-extra/evolution-data-server-1.10.2/work/evolution-data-server-1.10.2/camel/.libs/libcamel-1.2.so
> -L/usr/lib/nspr -L/usr/lib/lib -L/usr/lib/nss -lssl3 -lsmime3 -lnss3 -lkrb4
> -ldes425 -lkrb5 -lk5crypto -lcom_err -lgssapi_krb5
> /var/tmp/portage/gnome-extra/evolution-data-server-1.10.2/work/evolution-data-server-1.10.2/libedataserver/.libs/libedataserver-1.2.so
> -lplds4 -lplc4 -lnspr4 /usr/lib/libdb-4.3.so /usr/lib/libgnome-2.so
> /usr/lib/libesd.so /usr/lib/libasound.so /usr/lib/libaudiofile.so
> /usr/lib/libpopt.so /usr/lib/libbonobo-2.so /usr/lib/libbonobo-activation.so
> /usr/lib/libORBitCosNaming-2.so /usr/lib/libgnomevfs-2.so /usr/lib/libxml2.so
> -lm /usr/lib/libdbus-glib-1.so /usr/lib/libgnutls.so -lz /usr/lib/libtasn1.so
> /usr/lib/libgcrypt.so -lnsl /usr/lib/libgpg-error.so /usr/lib/libavahi-glib.so
> /usr/lib/libavahi-client.so /usr/lib/libdbus-1.so /usr/lib/libavahi-common.so
> -lresolv -lutil /usr/lib/libgconf-2.so /usr/lib/libORBit-2.so
> /usr/lib/libgmodule-2.0.so -ldl /usr/lib/libgthread-2.0.so -lpthread -lrt
> /usr/lib/libgobject-2.0.so /usr/lib/libglib-2.0.so 
> creating libebook-scan
> gtk-doc: Running scanner libebook-scan
> Scan failed: 
> </snip>
> 
> Pasting a relevant snip here. Compile this this with USE="-doc" and move on.
> 


Thank you for the advice, it works again. However, gnome-extra/evolution-data-server-1.8.3-r5 had "doc" in it's use flag and compiled fine. 

Surely this is a bug, where one now have to remove doc and change the USE flag to "-doc" for evolution-data-server-1.10.2.

But thanks again for your help.




Comment 12


Gilles Dartiguelongue (RETIRED)






          2007-08-16 12:38:20 UTC
        

having a workaround doesn't mean it's fixed.
Will have a look whenever I get enough time.




Comment 13


Wernher Eksteen





          2007-08-16 12:52:29 UTC
        

(In reply to comment #12)
> having a workaround doesn't mean it's fixed.
> Will have a look whenever I get enough time.
> 

Thank you




Comment 14


Gilles Dartiguelongue (RETIRED)






          2007-08-16 13:09:46 UTC
        

please let this open until it's really solved, thanks.




Comment 15


Peter Volkov (RETIRED)






          2007-08-30 19:45:23 UTC
        

I did not manage to reproduce this bug. But the error sits in the first call of gtkdoc-scan. This is the output of relevant place of successful build:

creating libebook-scan
gtk-doc: Running scanner libebook-scan
cd . && \
          gtkdoc-scan --module=libebook --source-dir=../../../../addressbook/libebook --ignore-headers="Evolution-DataServer-Addressbook.h e-book-marshal.h" --deprecated-guards="EDS_DISABLE_DEPRECATED"


Wernher Eksteen, is it possible to find out (from emerge.log) what version of gtk-doc did you have at that time? Did you recompiled it after that? Does simple run of `gtkdoc-scan` returns you the help message?




Comment 16


Wernher Eksteen





          2007-09-01 14:34:36 UTC
        

Created attachment 129773 [details]
equery list




Comment 17


Wernher Eksteen





          2007-09-01 14:43:08 UTC
        

(In reply to comment #15)
> I did not manage to reproduce this bug. But the error sits in the first call of
> gtkdoc-scan. This is the output of relevant place of successful build:
> 
> creating libebook-scan
> gtk-doc: Running scanner libebook-scan
> cd . && \
>           gtkdoc-scan --module=libebook
> --source-dir=../../../../addressbook/libebook
> --ignore-headers="Evolution-DataServer-Addressbook.h e-book-marshal.h"
> --deprecated-guards="EDS_DISABLE_DEPRECATED"
> 
> 
> Wernher Eksteen, is it possible to find out (from emerge.log) what version of
> gtk-doc did you have at that time? Did you recompiled it after that? Does
> simple run of `gtkdoc-scan` returns you the help message?
> 

Hi Peter Volkov,

Please see "comment #16". I don't know if this will help, I've attached the equery-list of the Gentoo system at that time. Unfortunatly I've nuked the system some time ago (because of bug #189126) so can't provide you with the emerge.log. In future I will include that in my bug reports too.

As you may see from the equery list, dev-util/gtk-doc-1.8-r2 was the gtk-doc version at the time. No, I did not recompile it after and no, I did not run`gtkdoc-scan` to get some help message. I will also keep this in mind in future.

Thanks,
Wernher 




Comment 18


Peter Volkov (RETIRED)






          2007-09-01 14:59:31 UTC
        

But can you reproduce the problem now?
If you run gtkdoc-scan *now*, is it works for you (shows help message)?




Comment 19


Wernher Eksteen





          2007-09-03 08:00:49 UTC
        

(In reply to comment #18)
> But can you reproduce the problem now?
> If you run gtkdoc-scan *now*, is it works for you (shows help message)?
> 

Sorry, but I don't have Gentoo on my system anymore at the moment.




Comment 20


Peter Volkov (RETIRED)






          2007-09-29 07:54:44 UTC
        

Closing as WORSFORME. I do not know how to reproduce the bug and original poster can't provide additional information. Wernher, please, reopen if one day you'll get into similar situation.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

