Title: 124424 – LiveCD install fails on installing perl
URL: https://bugs.gentoo.org/show_bug.cgi?id=124424

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 124424
LiveCD install fails on installing perl
Last modified: 2006-03-24 13:46:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 124424 
      - LiveCD install fails on installing perl


Summary:
LiveCD install fails on installing perl
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Release Media




Classification:

Unclassified




Component:

Installer

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Installer








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-02-28 08:14 UTC by Jacob Fenwick





      Modified:
    
2006-03-24 13:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jacob Fenwick





          2006-02-28 08:14:19 UTC
        

From Log:
GLI: February 28 2006 11:00:47 - Mounted mountpoint: /
GLI: February 28 2006 11:00:48 - Created mountpoint /boot
GLI: February 28 2006 11:00:48 - Mounted mountpoint: /boot
GLI: February 28 2006 11:08:24 - Exception received during 'Unpack stage tarball': CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute postinst for dev-lang/perl-5.8.7-r3
GLI: February 28 2006 11:08:24 - Traceback (most recent call last):
GLI: February 28 2006 11:08:24 - File "/opt/installer/GLIClientController.py", line 165, in run
    self._install_steps[self._install_step]['function']()
GLI: February 28 2006 11:08:24 - File "/opt/installer/GLIArchitectureTemplate.py", line 268, in unpack_stage_tarball
    self._portage.copy_pkg_to_chroot(pkg, True, ignore_missing=True)
GLI: February 28 2006 11:08:24 - File "/opt/installer/GLIPortage.py", line 163, in copy_pkg_to_chroot
    raise GLIException("CopyPackageToChrootError", 'fatal', 'copy_pkg_to_chroot', "Could not execute postinst for " + package)
GLI: February 28 2006 11:08:24 - GLIException: CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute postinst for dev-lang/perl-5.8.7-r3



From Output:
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 22 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.
Exception received:
CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute postinst for dev-lang/perl-5.8.7-r3
Please submit a bug report (after searching to make sure it's not a known issue and verifying you didn't do something stupid) with the contents of /var/log/install.log and /tmp/installprofile.xml and the version of the installer you used




Comment 1


Andrew Gaffney (RETIRED)






          2006-02-28 08:17:03 UTC
        

Please upgrade to the CVS version of the installer by opening a terminal and running '/opt/installer/misc/updategtkfe' and then try your install again. If it fails again, please paste the same information you pasted here already (end of installer.log{.failed} and compile output)




Comment 2


Preston Cody (RETIRED)






          2006-02-28 11:01:03 UTC
        

also please include your install XML profiles.




Comment 3


Jacob Fenwick





          2006-03-03 17:18:30 UTC
        

I hope my hard drive isn't b0rked.
I tried running /opt/installer/misc/updategtkfe and I now I get this:

/var/log/installer.log.failed
GLI: March 03 2006 20:10:21 - partitioning: Processing /dev/hdb...
GLI: March 03 2006 20:10:21 - This is a bad thing. An exception occured outside of the normal install errors. The error was: ''dict' object has no attribute 'get_ordered_partition_list''
GLI: March 03 2006 20:10:21 - Traceback (most recent call last):
GLI: March 03 2006 20:10:21 - File "../../GLIClientController.py", line 188, in run
    self._install_steps[self._install_step]['function']()
GLI: March 03 2006 20:10:21 - File "../../templates/x86ArchitectureTemplate.py", line 123, in partition
    new_part_list = parts_new[device].get_ordered_partition_list()
GLI: March 03 2006 20:10:21 - AttributeError: 'dict' object has no attribute 'get_ordered_partition_list'

/tmp/installprofile.xml
<?xml version="1.0" ?>
<gli-profile>
	<kernel-build-method>
		genkernel
	</kernel-build-method>
	<cron-daemon>
		vixie-cron
	</cron-daemon>
	<domainname>
		localdomain
	</domainname>
	<portage-snapshot>
		file:///mnt/cdrom/snapshots/portage-20060123.tar.bz2
	</portage-snapshot>
	<kernel-source>
		livecd-kernel
	</kernel-source>
	<install-pcmcia-cs>
		False
	</install-pcmcia-cs>
	<time-zone>
		America/New_York
	</time-zone>
	<install-distcc>
		False
	</install-distcc>
	<boot-device>
		/dev/hdb
	</boot-device>
	<dynamic-stage3>
		True
	</dynamic-stage3>
	<kernel-bootsplash>
		True
	</kernel-bootsplash>
	<bootloader-mbr>
		True
	</bootloader-mbr>
	<hostname>
		localhost
	</hostname>
	<bootloader-kernel-args/>
	<post-install-script-uri/>
	<nisdomainname/>
	<install-stage>
		3
	</install-stage>
	<ftp-proxy/>
	<rsync-proxy/>
	<stage-tarball/>
	<bootloader>
		grub
	</bootloader>
	<root-pass-hash>
		$1$nCAKdtY3$hXIZ707yBayNugY5qo.H/1
	</root-pass-hash>
	<http-proxy/>
	<mta/>
	<grp-install>
		False
	</grp-install>
	<logging-daemon>
		syslog-ng
	</logging-daemon>
	<kernel-config/>
	<portage-tree-sync>
		snapshot
	</portage-tree-sync>
	<kernel-initrd>
		True
	</kernel-initrd>
	<install-rp-pppoe>
		False
	</install-rp-pppoe>
	<install-packages>
		xorg-x11 kde
	</install-packages>
	<network-interfaces>
		<device ip="dhcp" options="">
			eth0
		</device>
	</network-interfaces>
	<network-mounts/>
	<partitions>
		<device devnode="/dev/hda" disklabel="msdos">
			<partition format="False" mb="31" minor="1.03125" mkfsopts="" mountopts="" mountpoint="" origminor="0" resized="False" type="free"/>
			<partition format="False" mb="76285" minor="1" mkfsopts="" mountopts="" mountpoint="" origminor="1" resized="False" type="ntfs"/>
		</device>
		<device devnode="/dev/hdb" disklabel="msdos">
			<partition format="True" mb="100" minor="1" mkfsopts="" mountopts="" mountpoint="/boot" origminor="0" resized="False" type="ext2"/>
			<partition format="True" mb="498" minor="2" mkfsopts="" mountopts="" mountpoint="" origminor="0" resized="False" type="linux-swap"/>
			<partition format="True" mb="155728" minor="3" mkfsopts="" mountopts="" mountpoint="/" origminor="0" resized="False" type="ext3"/>
		</device>
	</partitions>
	<services/>
	<etc-files>
		<file name="rc.conf">
			<entry name="DISPLAYMANAGER">
				kdm
			</entry>
			<entry name="EDITOR">
				/bin/nano
			</entry>
		</file>
		<file name="conf.d/clock">
			<entry name="CLOCK">
				UTC
			</entry>
		</file>
		<file name="conf.d/keymaps">
			<entry name="SET_WINDOWSKEYS">
				Yes
			</entry>
		</file>
		<file name="make.conf">
			<entry name="MAKEOPTS">
				-j2
			</entry>
			<entry name="USE">
				 X alsa apache2 apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr cli crypt ctype cups dba eds elibc_glibc emboss encode esd ethereal exif expat fam fastbuild foomaticdb force-cgi-redirect fortran ftp gd gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml guile idn imlib ipv6 jpeg kde kernel_linux lcms libg++ libwww mad memlimit mikmod mng motif mozilla mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png posix python qt quicktime readline samba sdl session simplexml slang soap sockets spell spl ssl tcltk tcpd tiff tokenizer truetype truetype-fonts type1-fonts udev userland_GNU vorbis x86 xml xml2 xmms xsl xv zlib
			</entry>
			<entry name="FEATURES"/>
			<entry name="ACCEPT_KEYWORDS"/>
			<entry name="CFLAGS">
				-march=i686 -O2 -pipe
			</entry>
		</file>
	</etc-files>
</gli-profile>






Comment 4


Andrew Gaffney (RETIRED)






          2006-03-03 18:09:49 UTC
        

Whoops, that was my fault. It's fixed in CVS. Give it another try (run /opt/installer/misc/updategtkfe again).




Comment 5


Jacob Fenwick





          2006-03-04 20:14:30 UTC
        

Failed emerging another package and the environment froze. Here's as much as I'm willing to type out on the screen:

GLI: March 04 ... - Exception received during 'installing filesystem tools': EmergePackageError :FATAL: emerge: Could not emerge app-text/poppler-0.4.3-r4!
GLI: March 04 ... - Traceback (most recent call last):
GLI: March 04 ... - File "../../GLIClientController.py", line 188 in run self._install_steps[self._install_step]['function']()
GLI: March 04 ... - File "../../GLIArchitectureTemplate.py", line 927, in install_filesystem_tools exitstatus = self._portage.emerge(package)
GLI: March 04 ... - File "../../GLIPortage.py", line 223, in emerge raise GLIException("EmergePackageError", "fatal", "emerge", "Could not emerge " + pkg + "!")
GLI: March 04 ... - GLIException: EmergePackgeError :FATAL: emerge: Could not emerge app-text/poppler-0.4.3-r4!
GLI: March 04 ... - ERROR! Could not deactivate swap (/dev/hdb2)!




Comment 6


Andrew Gaffney (RETIRED)






          2006-03-04 21:28:36 UTC
        

You know, you can open a web browser on the LiveCD and copy/paste that stuff into this bug.

Also, it looks like that latest error is just a failure to compile, which is *not* an installer bug. Although, that failure to deactivate the swap is quite weird. I'm going to go out on a limb and say that this is problem with your hardware. You may want to boot the LiveCD with 'memtest' and let it run for up to 24 hours (at least overnight). If you have any detected errors, we can't help you until you fix your hardware.




Comment 7


Jacob Fenwick





          2006-03-05 08:37:39 UTC
        

Andrew, I would have copied and pasted, when I tried to highlight the log highlighted a portion of it, then the environment froze. This is the second time I've seen this happen.
How do I boot the livecd with memtest?




Comment 8


Andrew Gaffney (RETIRED)






          2006-03-05 09:26:33 UTC
        

At the "boot:" prompt when you boot the LiveCD, type "memtest86" and hit enter. How much memory do you have in this machine?




Comment 9


Jacob Fenwick





          2006-03-05 10:41:38 UTC
        

Memtest86 is running... here's what is says for memory at the moment:
Pentium 4 (0.18) 1795 Mhz
L1 Cache: 8K 14709MB/s
L2 Cache: 256K 12549MB/s
Memory  : 255M 1149MB/s
Chipset : Intel i850 (ECC: Disabled) / FSB : 99 Mhz




Comment 10


Jacob Fenwick





          2006-03-08 19:55:27 UTC
        

Ok I've been running this memtest for over 3 days and there have been no errors.




Comment 11


Andrew Gaffney (RETIRED)






          2006-03-10 21:43:35 UTC
        

Nobody else has run into this problem (that I'm aware of). Also, it doesn't look like you've actually gotten the error again. Closing.




Comment 12


Jeffrey Forman (RETIRED)






          2006-03-24 13:46:38 UTC
        

Moving to Release Media/Installer.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

