Title: 223337 – media-video/mplayer-1.0_rc2_p26753 compile fails with assembler-error
URL: https://bugs.gentoo.org/show_bug.cgi?id=223337

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 223337
media-video/mplayer-1.0_rc2_p26753 compile fails with assembler-error
Last modified: 2009-08-03 20:33:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 223337 
      - media-video/mplayer-1.0_rc2_p26753 compile fails with assembler-error


Summary:
media-video/mplayer-1.0_rc2_p26753 compile fails with assembler-error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-05-23 11:50 UTC by qeldroma





      Modified:
    
2009-08-03 20:33 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



demo
jb.krohn









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


qeldroma





          2008-05-23 11:50:59 UTC
        

I tried to emerge two different mplayer-ebuilds just to be sure. Error always the same:
.....
i686-pc-linux-gnu-gcc -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_ISOC9X_SOURCE -I.. -I.. -Wdisabled-optimization -Wno-pointer-sign -Wdeclaration-after-statement -I. -Wall -Wno-switch -Wpointer-arith -Wredundant-decls -O4 -march=i486 -mtune=i686 -pipe -ffast-math -fomit-frame-pointer -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -DHAVE_CONFIG_H -I/usr/X11R6/include -I/usr/kde/3.5/include/artsc -pthread -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include  -I/usr/include/freetype2 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12     -c -o i386/dsputil_mmx.o i386/dsputil_mmx.c
In Datei, eingefügt von i386/dsputil_mmx.c:31:
i386/mmx.h:24:2: Warnung: #warning Everything in this header is deprecated, use plain asm()! New code using this header will be rejected.
{standard input}: Assembler messages:
{standard input}:3931: Error: no such instruction: `pabsw %mm3,%mm3'
{standard input}:3932: Error: no such instruction: `pabsw %mm4,%mm4'
{standard input}:3933: Error: no such instruction: `pabsw %mm5,%mm5'
{standard input}:19085: Error: no such instruction: `palignr $6,%xmm0,%xmm5'
{standard input}:19086: Error: no such instruction: `palignr $8,%xmm0,%xmm4'
...
...
{standard input}:99850: Error: no such instruction: `pmaddubsw %xmm7,%xmm0'
{standard input}:99851: Error: no such instruction: `pmaddubsw %xmm7,%xmm2'
make[1]: *** [i386/dsputil_mmx.o] Fehler 1
make[1]: Leaving directory `/opt/tmp/portage/media-video/mplayer-1.0_rc2_p26753/work/mplayer-1.0_rc2_p26753/libavcodec'
make: *** [libavcodec/libavcodec.a] Fehler 2
 *
 * ERROR: media-video/mplayer-1.0_rc2_p26753 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2543:  Called die
 * The specific snippet of code:
 *       emake || die "Failed to build MPlayer!";
 *  The die message:
 *   Failed to build MPlayer!
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/opt/tmp/portage/media-video/mplayer-1.0_rc2_p26753/temp/build.log'.
 * The ebuild environment file is located at '/opt/tmp/portage/media-video/mplayer-1.0_rc2_p26753/temp/environment'.
 *

 * Messages for package media-video/mplayer-1.0_rc2_p26753:

 * For MPlayer's language support, the configuration will
 * use your LINGUAS variable from /etc/make.conf.  If you have more
 * than one language enabled, then the first one in the list will
 * be used to output the messages, if a translation is available.
 * man pages will be created for all languages where translations
 * are also available.
 *
 * ERROR: media-video/mplayer-1.0_rc2_p26753 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2543:  Called die
 * The specific snippet of code:
 *       emake || die "Failed to build MPlayer!";
 *  The die message:
 *   Failed to build MPlayer!
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/opt/tmp/portage/media-video/mplayer-1.0_rc2_p26753/temp/build.log'.
 * The ebuild environment file is located at '/opt/tmp/portage/media-video/mplayer-1.0_rc2_p26753/temp/environment'.


Reproducible: Always

Steps to Reproduce:
1. emerge --sync
2. emerge mplayer

Actual Results:  
failure

Expected Results:  
done

# emerge --info
Portage 2.1.4.4 (default-linux/x86/2006.1, gcc-4.1.2, glibc-2.6.1-r0, 2.6.24-gentoo-r4_wsrustedt i686)
=================================================================
System uname: 2.6.24-gentoo-r4_wsrustedt i686 AMD Athlon(tm) XP 2100+
Timestamp of tree: Mon, 19 May 2008 10:33:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distcc distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE.utf8"
LC_ALL="de_DE.utf8"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X aac aalib acpi alsa arts artswrappersuid async berkdb bluetooth branding browserplugin bzip2 cairo cddb cdparanoia cli cracklib crypt css cups curl dbus dlloader doc dri dvd dvdr dvdread fbcondecor freetype gd gdbm gif gimpprint gpm gtk gtk2 gzip hal iconv imagemagick imap imlib isdnlog jpeg jpeg2k kde ldap lm_sensors mad midi mmap mmx mmxext mng mozilla mp3 mplayer mudflap mysql ncurses new-login nls nptl nptlonly nsplugin nvidia offensive offensivehal ogg openexr opengl openmp pam pcre pdf perl png povray ppds pppd pwdb python qt qt3 qt4 quicktime rdesktop readline real reflection rtc samba session skey slang snmp spell spl sse ssl svg syslog tcpd tga tidy tiff tools truetype truetype-fonts ucs2 unicode usb userlocales utf8 vhosts win32codecs wma wmf x86 xcomposite xine xinerama xinetd xml xorg xpm xprint xscreensaver xv xvid xvmc zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="vesa nv nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Steve Dibb (RETIRED)






          2008-05-24 02:50:45 UTC
        

need emerge -pv mplayer




Comment 2


qeldroma





          2008-05-24 20:11:47 UTC
        

(In reply to comment #1)
> need emerge -pv mplayer
> 

..will do it on monday, is my pc on work ;)




Comment 3


qeldroma





          2008-05-26 10:44:48 UTC
        

(In reply to comment #1)
> need emerge -pv mplayer
> 

# emerge -pv mplayer

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] media-video/mplayer-1.0_rc2_p26753 [1.0_rc2_p24929-r1] USE="3dnow 3dnowext X a52* aac aalib alsa arts cddb cdparanoia cpudetection dga doc* dv dvd encode gif gtk iconv jpeg mad* mmx mmxext mp2 mp3 opengl oss png pnm quicktime rar real rtc samba sse tga truetype unicode win32codecs x264 xinerama xscreensaver%* xv xvid xvmc (-altivec) -amrnb -amrwb -bidi -bindist -bl -cdio -custom-cflags -debug -directfb -dts -dvb -enca -esd -fbcon -ftp -ggi -ipv6 -jack -joystick -ladspa -libcaca -lirc -live -lzo -md5sum -musepack -nas -nemesi -openal -pulseaudio -radio -sdl -speex -srt -sse2* -ssse3* -svga -teletext -theora* -v4l -v4l2 -vidix -vorbis -xanim -zoran (-livecd%) (-tivo%)" VIDEO_CARDS="vesa -mga -s3virge -tdfx" 0 kB

Total: 1 package (1 upgrade), Size of downloads: 0 kB






Comment 4


Steve Dibb (RETIRED)






          2008-05-28 20:09:44 UTC
        

try it w/o cpudetection use flag




Comment 5


Aleksey Yeryomin





          2008-06-16 06:51:56 UTC
        

(In reply to comment #4)
> try it w/o cpudetection use flag

Have same error.
Using USE="-cpudetection" can't help.
I try to USE="-cpudetection -mmx -mmxext" can't help too... 

[ebuild     U ] media-video/mplayer-1.0_rc2_p26753 [1.0_rc1_p20070622-r4] USE="3dnow 3dnowext X a52 aac aalib alsa arts bidi bindist bl cddb cdparanoia dga directfb doc dts dv dvb dvd enca encode esd fbcon ftp ggi gif gtk iconv ipv6 jack joystick jpeg libcaca lirc live lzo mad md5sum mp2 mp3 musepack nas openal opengl oss png pnm quicktime radio rar real rtc samba sdl speex srt sse sse2 tga theora truetype unicode v4l v4l2 vorbis x264 xanim xinerama xscreensaver%* xv xvid xvmc (-altivec) -amrnb -amrwb -cdio% -cpudetection* -custom-cflags -debug% -ladspa% -mmx* -mmxext* -nemesi% -pulseaudio% -ssse3 (-svga) -teletext% (-vidix) (-win32codecs) -zoran (-dvdnav%*) (-ivtv%) (-livecd%) (-tivo%*)" VIDEO_CARDS="vesa -mga -s3virge -tdfx"

x86_64-pc-linux-gnu-gcc -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_ISOC9X_SOURCE -I.. -I.. -Wdisabled-optimization -Wno-pointer-sign -Wdeclaration-after-statement -I. -Wall -Wno-switch -Wpointer-arith -Wredundant-decls -O4 -march=x86-64  -pipe -ffast-math -fomit-frame-pointer -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -DHAVE_CONFIG_H -I/usr/include/directfb -I/usr/X11R6/include -I/usr/include/  -I/usr/include/SDL  -D_REENTRANT -I/usr/kde/3.5/include/artsc -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include   -I/usr/include/freetype2 -I/usr/include -D_REENTRANT -I/usr/include/gtk-2.0 -I/usr/lib64/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/directfb -I/usr/include/libpng12 -I/usr/include/pixman-1     -c -o i386/dsputil_mmx.o i386/dsputil_mmx.c
In file included from i386/dsputil_mmx.c:31:
i386/mmx.h:24:2: warning: #warning Everything in this header is deprecated, use plain asm()! New code using this header will be rejected.
{standard input}: Assembler messages:
{standard input}:3568: Error: no such instruction: `pabsw %mm3,%mm3'
{standard input}:3569: Error: no such instruction: `pabsw %mm4,%mm4'
{standard input}:3570: Error: no such instruction: `pabsw %mm5,%mm5'
{standard input}:18514: Error: no such instruction: `palignr $6,%xmm0,%xmm5'
...
{standard input}:99178: Error: no such instruction: `pmaddubsw %xmm7,%xmm2'
make[1]: *** [i386/dsputil_mmx.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-video/mplayer-1.0_rc2_p26753/work/mplayer-1.0_rc2_p26753/libavcodec'
make: *** [libavcodec/libavcodec.a] Ошибка 2
 *
 * ERROR: media-video/mplayer-1.0_rc2_p26753 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2610:  Called die
 * The specific snippet of code:
 *       emake || die "Failed to build MPlayer!";
 *  The die message:
 *   Failed to build MPlayer!

# emerge --info
Portage 2.1.4.4 (default-linux/amd64/2007.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.20-gentoo-r7 x86_64)
=================================================================
System uname: 2.6.20-gentoo-r7 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4400+
Timestamp of tree: Mon, 16 Jun 2008 06:00:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.16.1, 2.16.1-r3, 2.17, 2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O3 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib64/mozilla/defaults/pref /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=k8 -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="ru_RU.UTF-8"
LINGUAS="ru en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="/ 3dnow 3dnowext 7zip X X500 X509 Xaw3d a52 aac aalib aap accessibility acl acpi akode alsa amd64 amr aotuv arts asf asterisk async audiofile automount avahi bash-completion bcp berkdb bidi big-tables bindist bjam bl bluetooth bookmarks bzip bzip2 cairo calcomp caps cdda cddb cdparanoia chroot cjk cli compiz corba cpudetection cracklib cript crypt cscope css cups curl daap dbus dg dga directfb djvu dlloader dmi dmx doc double-precision dri dts dv dvb dvd dvdnav dvdr dvdread dvdrw dxr3 edl elf enca encode esd examples exif expat exscalibar extensions fam fbcon ffmpeg firefox flac fortran ftp gd gdbm ggi gif glep glib glibc glibc-omitfp glitz glut gnokii gnutls gphoto2 gpm gstreamer gtk gtkhtml gui hal howl-compat hpn httpd ical iconv ide ieee1394 ifp imagemagick immqt ipv6 irda isdnlog jack jack-tmpfs java javascript joystick jpeg jpeg2k kde kerberos kig-scripting krb4 lame lcms ldap legacyssl libcaca libg++ libvisual lirc live lm_sensors lua lzo mach64 mad matroska matrox mbrola md5sum mfd-rewrites midi mikmod mmx mmxext mng mod modplug mono motif mozilla mp2 mp3 mp4 mpeg mplayer mudflap multislot multitarget musepack musicbrainz mysql nas ncurses netjack nis nls nptl nptlonly nsplugin nvidia oav odbc offensive ogg openal openexr opengl openmp oss pam pam_chroot pam_timestamp pcre pda pdf perl pg-intdatetime png pnm portaudio postgres povray pppd pwdb pyste python qsa qt3 qt3support qt4 quicktime radio rar rdesktop readline reflection rpm rrdcgi rtc rtsp ruby samba sametime scanner scenarios sdl sensord serial server session sftplogging shout skey skins slp smartcard smp sms smux sndfile snmp socks5 speex spell spl sqlite srt sse sse2 ssl stream svg swat sysfs syslog tcl tcltk tcpd tetex tga theora threads tidy tiff timidity tivo tk toolbar trayicon truetype unicode usb userlocales utempter v4l v4l2 vcd vdr videos vim-pager vim-with-x visualization vlm vorbis winbind wmf wxwindows x264 xanim xcb xcomposite xface xine xinerama xinetd xml xorg xosd xscreensaver xv xvid xvmc zeroconf zlib zvbi" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="access auth auth_dbm auth_anon auth_digest alias file-cache filter echo charset-lite cache disk-cache mem-cache ext-filter case_filter case-filter-in deflate mime-magic cern-meta expires headers usertrack unique-id proxy proxy-connect proxy-ftp proxy-http info include cgi cgid dav dav-fs vhost-alias speling rewrite log_config logio env setenvif mime status autoindex asis negotiation dir imap actions userdir so" ELIBC="glibc" INPUT_DEVICES="keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" LIRC_DEVICES="avermedia devinput" USERLAND="GNU" VIDEO_CARDS="chips nvidia dummy fbdev glint nv tga v4l vesa vga via vmware"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 6


Jean Krohn





          2008-07-06 19:09:27 UTC
        

It compiles ok for me with  USE="-mmx -cpudetection -sse -sse2"

All the flags used :

 USE="X a52 aac aalib alsa cddb cdparanoia dga directfb doc dts dv dvb dvd encode esd fbcon ftp ggi gif iconv ipv6 jack joystick jpeg libcaca lirc mad md5sum mp3 musepack nas openal opengl oss png pulseaudio quicktime real samba sdl speex theora truetype unicode v4l vorbis x264 xinerama xscreensaver xv xvid -3dnow -3dnowext (-altivec) -amrnb -amrwb -arts -bidi -bindist -bl -cdio -cpudetection -custom-cflags -debug -enca -gtk -ladspa -live -lzo -mmx -mmxext -mp2 -nemesi -pnm -radio -rar -rtc -srt -sse -sse2 -ssse3 (-svga) -teletext -tga -v4l2 (-vidix) (-win32codecs) -xanim -xvmc -zoran" VIDEO_CARDS="vesa -mga -s3virge -tdfx"




Comment 7


Michael Kers





          2008-10-28 15:48:32 UTC
        

Hi, Just wanted to add that I had a similar problem, and I found a solution: 

My solution was: disable cpudetection (-cpudetection) and to re-emerge ffmpeg to version 0.4.9_p20070616-r3.  The version of mplayer that was failing to emerge was media-video/mplayer-1.0_rc2_p27725-r1

My compile errors are here:
----------------------------------

x86_64-pc-linux-gnu-gcc -DHAVE_AV_CONFIG_H -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_ISOC9X_SOURCE -I.. -I.. -Wdisabled-optimization -Wno-pointer-sign -Wdeclaration-after-statement -std=gnu99 -Wall -Wno-switch -Wpointer-arith -Wredundant-decls -O4 -march=x86-64  -pipe -ffast-math -fomit-frame-pointer -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE -I.  -I/usr/X11R6/include -I/usr/kde/3.5/include/artsc -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include  -I/usr/include/freetype2 -I/usr/include/gtk-2.0 -I/usr/lib64/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12     -c -o i386/mpegvideo_mmx.o i386/mpegvideo_mmx.c
{standard input}: Assembler messages:
{standard input}:2025: Error: no such instruction: `pabsw %xmm0,%xmm0'
{standard input}:2029: Error: no such instruction: `psignw %xmm1,%xmm0'
{standard input}:2081: Error: no such instruction: `pabsw %xmm0,%xmm0'
{standard input}:2087: Error: no such instruction: `psignw %xmm1,%xmm0'
make[1]: *** [i386/mpegvideo_mmx.o] Error 1
make[1]: *** Waiting for unfinished jobs....
In file included from i386/dsputil_mmx.c:31:
i386/mmx.h:24:2: warning: #warning Everything in this header is deprecated, use plain asm()! New code using this header will be rejected.
{standard input}: Assembler messages:
{standard input}:3570: Error: no such instruction: `pabsw %mm3,%mm3'
{standard input}:3571: Error: no such instruction: `pabsw %mm4,%mm4'
{standard input}:3572: Error: no such instruction: `pabsw %mm5,%mm5'




Comment 8


Ben de Groot (RETIRED)






          2008-10-28 16:16:45 UTC
        

(In reply to comment #7)
> My solution was: disable cpudetection (-cpudetection) and to re-emerge ffmpeg
> to version 0.4.9_p20070616-r3.  The version of mplayer that was failing to
> emerge was media-video/mplayer-1.0_rc2_p27725-r1

FFmpeg has no influence whatsoever on mplayer compilation.





Comment 9


GM





          2009-01-15 16:22:27 UTC
        

(In reply to comment #8)
> (In reply to comment #7)
> > My solution was: disable cpudetection (-cpudetection) and to re-emerge ffmpeg
> > to version 0.4.9_p20070616-r3.  The version of mplayer that was failing to
> > emerge was media-video/mplayer-1.0_rc2_p27725-r1
> 
> FFmpeg has no influence whatsoever on mplayer compilation.
> 

I agree with you , FFmpeg is not involved.


I had the same issue:
...
{standard input}:39351: Error: no such instruction: `palignr $4,%xmm7,%xmm6'
make[1]: *** [i386/dsputil_mmx.o] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-video/mplayer-1.0_rc2_p27725-r1/work/mplayer-1.0_rc2_p27725/libavcodec'
make: *** [libavcodec/libavcodec.a] Error 2
 * 
 * ERROR: media-video/mplayer-1.0_rc2_p27725-r1 failed.
...


Fixed with 
USE="-bindist" emerge -va media-video/mplayer

By




Comment 10


Marco Nelissen





          2009-05-09 21:46:23 UTC
        

I had the same problem, but upgrading my binutils to 2.18-r3 fixed it.





Comment 11


Samuli Suominen (RETIRED)






          2009-08-03 20:33:41 UTC
        

(In reply to comment #10)
> I had the same problem, but upgrading my binutils to 2.18-r3 fixed it.
> 

Thanks.

binutils-2.18-r3.ebuild:KEYWORDS="alpha amd64 arm hppa ia64 ~mips ppc ppc64 ~s390 sh sparc x86"

And it's stable for all arch's. Closing.

Solution: Upgrade binutils.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

