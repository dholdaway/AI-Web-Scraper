Title: 374205 – wicd-1.7.1_beta2-r4: gtk-GUI does not connect wireless any more, curses UI crashes
URL: https://bugs.gentoo.org/show_bug.cgi?id=374205

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 374205
wicd-1.7.1_beta2-r4: gtk-GUI does not connect wireless any more, curses UI crashes
Last modified: 2011-12-16 07:19:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 374205 
      - wicd-1.7.1_beta2-r4: gtk-GUI does not connect wireless any more, curses UI crashes


Summary:
wicd-1.7.1_beta2-r4: gtk-GUI does not connect wireless any more, curses UI cr...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Thomas Kahle (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-07-06 10:35 UTC by Peter Weilbacher





      Modified:
    
2011-12-16 07:19 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



ago
c1pher
m.ustymenko









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Weilbacher





          2011-07-06 10:35:59 UTC
        

Since emerging world two days ago I cannot use wicd any more to get a wireless connection, wired still works fine. Just before this happened I emerged world with ~90 updated packages, including dbus-1.4.12 (update from 1.4.6) and python 2.7.2 (update from 2.7.1-r1). I did restart dbus afterwards (actually I rebooted several times). I tried to re-emerge dbus, dbus-python, and wicd, and also downgrade dbus, python and some other packages to their earlier versions, without success.

If I start wicd-gtk from the command line I sometimes get the errors below, but often it just "hangs". wicd-curses always fails reliably with the output below.

(I posted the same problem to the gentoo-user yesterday but haven't gotten any useful hints.)

Reproducible: Always

Steps to Reproduce:
With wicd-curses
1. start wicd-curses
2. select wireless router
3. hit enter

With the GNOME 2.33.1 tray icon:
1. Press left mouse button to open windowed GUI
2. Press Connect of the wireless node
3. Progress bar at the bottom stops shortly afterwards, saying
   "Disconnecting active connections..." in the status bar (even
   if no connections were active).
Actual Results:  
Crashes or hangs, with one of the following outputs:

$ wicd-gtk
Has notifications support True
Loading...
Connecting to daemon...
Connected.
displaytray True
Done loading.
Traceback (most recent call last):
   File "/usr/share/wicd/gtk/wicd-client.py", line 645, in network_selected
     wireless.ConnectWireless(net_id)
   File "/usr/lib64/python2.7/site-packages/dbus/proxies.py", line 140, in __call__
     **keywords)
   File "/usr/lib64/python2.7/site-packages/dbus/connection.py", line 630, in call_blocking
     message, timeout)
dbus.exceptions.DBusException: org.freedesktop.DBus.Python.MemoryError: Traceback (most recent
call last):
   File "/usr/lib64/python2.7/site-packages/dbus/service.py", line 702, in _message_cb
     retval = candidate_method(self, *args, **keywords)
   File "/usr/share/wicd/daemon/wicd-daemon.py", line 1168, in ConnectWireless
     self.SaveWirelessNetworkProfile(id)
   File "/usr/share/wicd/daemon/wicd-daemon.py", line 1278, in SaveWirelessNetworkProfile
     self.config.write()
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 218, in write
     p.set(sname, iname, value)
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 87, in set
     self.set_option(*args, **kargs)
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 77, in set_option
     value = to_unicode(value)
   File "/usr/lib64/python2.7/site-packages/wicd/misc.py", line 390, in to_unicode
     ret = x.decode(encoding).encode('utf-8')
MemoryError

$ wicd-curses

DBus failure! This is most likely caused by the wicd daemon stopping while wicd-curses is running. Please
restart the daemon, and then restart wicd-curses.
Traceback (most recent call last):
   File "/usr/share/wicd/curses/wicd-curses.py", line 905, in call_update_ui
     self.update_ui(True)
   File "/usr/share/wicd/curses/wicd-curses.py", line 89, in wrapper
     return func(*args, **kargs)
   File "/usr/share/wicd/curses/wicd-curses.py", line 916, in update_ui
     self.handle_keys(input_data[1])
   File "/usr/share/wicd/curses/wicd-curses.py", line 837, in handle_keys
     self.connect("wireless",pos)
   File "/usr/share/wicd/curses/wicd-curses.py", line 930, in connect
     wireless.ConnectWireless(networkid)
   File "/usr/lib64/python2.7/site-packages/dbus/proxies.py", line 140, in __call__
     **keywords)
   File "/usr/lib64/python2.7/site-packages/dbus/connection.py", line 630, in call_blocking
     message, timeout)
dbus.exceptions.DBusException: org.freedesktop.DBus.Python.MemoryError: Traceback (most recent
call last):
   File "/usr/lib64/python2.7/site-packages/dbus/service.py", line 702, in _message_cb
     retval = candidate_method(self, *args, **keywords)
   File "/usr/share/wicd/daemon/wicd-daemon.py", line 1168, in ConnectWireless
     self.SaveWirelessNetworkProfile(id)
   File "/usr/share/wicd/daemon/wicd-daemon.py", line 1278, in SaveWirelessNetworkProfile
     self.config.write()
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 218, in write
     p.set(sname, iname, value)
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 87, in set
     self.set_option(*args, **kargs)
   File "/usr/lib64/python2.7/site-packages/wicd/configmanager.py", line 77, in set_option
     value = to_unicode(value)
   File "/usr/lib64/python2.7/site-packages/wicd/misc.py", line 390, in to_unicode
     ret = x.decode(encoding).encode('utf-8')
MemoryError

Expected Results:  
should connect instead of crash/hang

$ emerge --info wicd
Portage 2.1.10.4 (default/linux/amd64/10.0, gcc-4.5.1, glibc-2.12.2-r0, 2.6.38-tuxonice-r2 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.38-tuxonice-r2-x86_64-Intel-R-_Core-TM-2_Duo_CPU_P8600_@_2.40GHz-with-gentoo-2.0.3
Timestamp of tree: Tue, 05 Jul 2011 10:15:01 +0000
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2
dev-util/cmake:           2.8.4-r1
dev-util/pkgconfig:       0.25-r2
sys-apps/baselayout:      2.0.3
sys-apps/openrc:          0.8.3-r1
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.9.6-r2, 1.10.3, 1.11.1
sys-devel/binutils:       2.20.1-r1
sys-devel/gcc:            4.5.1-r1
sys-devel/gcc-config:     1.4.1-r1
sys-devel/libtool:        2.2.10
sys-devel/make:           3.82
sys-kernel/linux-headers: 2.6.36.1 (virtual/os-headers)
sys-libs/glibc:           2.12.2
Repositories: gentoo Peter-s-Repo
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA PUEL dlj-1.1 skype-eula AdobeFlash-10.1"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="-j3 --load-average=4"
FEATURES="assume-digests binpkg-logs distlocks ebuild-locks fixlafiles fixpackages news noinfo parallel-fetch sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.tu-clausthal.de/pub/linux/gentoo http://de-mirror.org/distro/gentoo ftp://ftp.rz.tu-bs.de/pub/mirror/ftp.gentoo.org/gentoo-distfiles http://ftp.spline.inf.fu-berlin.de/mirrors/gentoo ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="en_US.ISO-8859-1"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en de pl es"
MAKEOPTS="-s -j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/root/overlay"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 amr bash-completion berkdb binfilter bluetooth bzip2 cairo cddb cdr cli consolekit cracklib crypt css cups cxx dbus dell device-mapper dga dirac directfb dri dvd dvdr dvi dvipdfm encode exif extras fat fbcondecor fbsplash ffmpeg firefox flac fontconfig fortran fts3 gd gdbm gdu gif gimp gimpprint gnome gnuplot gnutls gpm gtk hddtemp iconv ipv6 jfs jpeg jpeg2k laptop latex3 lcdfilter lcms libedit libnotify loop-aes mad mmx modules mozbranding mp3 mp4 mpeg mplayer mudflap multilib nautilus ncurses network nls nptl nptlonly nsplugin ntfs nvidia ogg onlyalpine opengl openmp pam passfile pcre pdf perl png pni policykit ppds pppd python readline sasl schroedinger sdl secure-delete session smp spell sqlite sqlite3 sse sse2 sse3 sse4 sse4_1 ssl ssse3 svg sysfs system-sqlite tcpd theora threads tiff tk truetype unicode usb v4l v4l2 vaapi vdpau vim-pager vim-syntax vim-with-x vorbis vpx wifi x264 xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="braindump flow karbon kexi kpresenter krita tables words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse synaptics evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de pl es" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nv nvidia vesa" XFCE_PLUGINS="menu trash" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

net-misc/wicd-1.7.1_beta2-r4 was built with the following:
USE="X gtk libnotify (multilib) ncurses nls pm-utils (-ioctl)"




Comment 1


Peter Weilbacher





          2011-07-08 12:03:12 UTC
        

Oh well. I needed wireless to work, so I restored my root fs from a backup from before the latest world emerge. Now the error is gone, I therefore resolve it as WFM, at least until I emerge world again.




Comment 2


Thomas Kahle (RETIRED)






          2011-07-08 12:10:28 UTC
        

(In reply to comment #1)
> Oh well. I needed wireless to work, so I restored my root fs from a backup from
> before the latest world emerge. Now the error is gone, I therefore resolve it
> as WFM, at least until I emerge world again.

I could not reproduce it either.  Everything fine here.  You may try to split the upgrade by doing dbus and wicd alone with nothing else, then see if the problem comes up again. 
Thanks for your report.




Comment 3


Maksym





          2011-12-14 17:46:09 UTC
        

I have same issue: can't use wireless with wicd after upgrade to net-misc/wicd-1.7.1_pre20111210 with wired network all ok.

With wireless router all too, because nothing chnges ito it and my phone connects wifi without any problem.


So, I have:

net-misc/wicd-1.7.1_pre20111210
sys-apps/net-tools-1.60_p201111202031570500

in log I have:

Dec 14 19:44:04 bess dhcpcd[9542]: dhcpcd not running
Dec 14 19:44:04 bess kernel: [ 1784.564307] ADDRCONF(NETDEV_UP): wlan0: link is not ready
Dec 14 19:44:04 bess dhcpcd[9548]: dhcpcd not running
Dec 14 19:44:04 bess kernel: [ 1784.735128] tg3 0000:02:00.0: irq 47 for MSI/MSI-X
Dec 14 19:44:04 bess kernel: [ 1784.841276] ADDRCONF(NETDEV_UP): eth0: link is not ready
Dec 14 19:44:04 bess dhcpcd[9555]: dhcpcd not running
Dec 14 19:44:04 bess kernel: [ 1784.969362] ADDRCONF(NETDEV_UP): wlan0: link is not ready
Dec 14 19:44:21 bess dhcpcd[9593]: dhcpcd not running
Dec 14 19:44:21 bess kernel: [ 1801.268557] ADDRCONF(NETDEV_UP): wlan0: link is not ready
Dec 14 19:44:21 bess dhcpcd[9599]: dhcpcd not running
Dec 14 19:44:21 bess kernel: [ 1801.440113] tg3 0000:02:00.0: irq 47 for MSI/MSI-X
Dec 14 19:44:21 bess kernel: [ 1801.546195] ADDRCONF(NETDEV_UP): eth0: link is not ready
Dec 14 19:44:21 bess dhcpcd[9606]: dhcpcd not running
Dec 14 19:44:21 bess kernel: [ 1801.678960] ADDRCONF(NETDEV_UP): wlan0: link is not ready
Dec 14 19:44:22 bess dhcpcd[9613]: dhcpcd not running
Dec 14 19:44:22 bess kernel: [ 1802.675900] ADDRCONF(NETDEV_UP): wlan0: link is not ready
Dec 14 19:44:22 bess dhcpcd[9619]: dhcpcd not running
Dec 14 19:44:22 bess kernel: [ 1802.843111] tg3 0000:02:00.0: irq 47 for MSI/MSI-X
Dec 14 19:44:22 bess kernel: [ 1802.959782] ADDRCONF(NETDEV_UP): eth0: link is not ready

and again and again




Comment 4


Thomas Kahle (RETIRED)






          2011-12-14 18:42:26 UTC
        

(In reply to comment #3)
> I have same issue: can't use wireless with wicd after upgrade to
> net-misc/wicd-1.7.1_pre20111210 with wired network all ok.

Hi, thanks for your report.  The particular problem reported in this bug could not be reproduced and went away.  Please open a new bug with your problem (which is probably different, because the current version of wicd was not in the tree at the time this bug was active).  Before that, please try downgrading to wicd-1.7.1_beta2-r7. Does it work again then?  If yes, please open a new bug and attach also the content of /var/log/wicd/wicd.log before and after the upgrade.
Please not this file may contain IP-addresses of your local network and other *sensitive data*.  Please cut that data before uploading.

Thanks.




Comment 5


Thomas Kahle (RETIRED)






          2011-12-14 18:43:16 UTC
        

Please add yourself to the CC to be notified of new comments.




Comment 6


Maksym





          2011-12-16 07:19:31 UTC
        

Thanks, Thomas, for You reply.

While looking info about this problem i've noticed that now wicd has new format of config files. So, I try to umerge wicd with all dependecies. Remove all config files and then compile new version of wicd. After fresh install and configure all start works fine.

Thanks, again.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

