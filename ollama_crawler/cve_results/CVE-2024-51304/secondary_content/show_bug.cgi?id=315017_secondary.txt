Title: 315017 – xfce-base/thunar won't start due to D-Bus bug
URL: https://bugs.gentoo.org/show_bug.cgi?id=315017

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 315017
xfce-base/thunar won't start due to D-Bus bug
Last modified: 2010-04-16 19:12:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 315017 
      - xfce-base/thunar won't start due to D-Bus bug


Summary:
xfce-base/thunar won't start due to D-Bus bug
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

XFCE Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-04-13 15:45 UTC by Julien RIOU





      Modified:
    
2010-04-16 19:12 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



freedesktop-bugs
gentoo
steev









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Hal's configuration file (under /etc/dbus-1/system.d/)

              (hal.conf,3.86 KB,
                text/plain)

            
2010-04-16 17:50 UTC,

            Julien RIOU




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Julien RIOU





          2010-04-13 15:45:37 UTC
        

Every time I want to launch Thunar, it doesn't start and let a ugly error in the terminal (or nothing happens when I launch it anywhere else).

Reproducible: Always

Steps to Reproduce:
1. Type « thunar . » in a Terminal (x11-terms/terminal for example).

Actual Results:  
process 5159: arguments to dbus_connection_send_with_reply_and_block() were incorrect, assertion "(error) == NULL || !dbus_error_is_set ((error))" failed in file dbus-connection.c line 3346.
This is normally a bug in some application using the D-Bus library.
  D-Bus not built with -rdynamic so unable to print a backtrace
Aborted

Expected Results:  
Launch the program instead of this error.

Portage 2.1.8.3 (default/linux/x86/10.0, gcc-4.3.4, glibc-2.10.1-r1, 2.6.32-gentoo-r7 i686)
=================================================================
System uname: Linux-2.6.32-gentoo-r7-i686-Intel-R-_Atom-TM-_CPU_330_@_1.60GHz-with-gentoo-1.12.13
Timestamp of tree: Tue, 13 Apr 2010 04:30:01 +0000
distcc 3.1 i686-pc-linux-gnu [disabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.4-r1
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc:       4.3.4
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=core2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -march=core2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch parallel_fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.ovh.net/gentoo-distfiles/ "
LDFLAGS="-Wl,-O1"
LINGUAS="en en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl alsa berkdb bzip2 cairo cli cracklib crypt cups cxx dbus dri fortran gdbm gnome gpm gtk hal iconv jpeg kerberos lame ldap modules mudflap ncurses nls nptl nptlonly nvidia ogg openmp pam pcre perl png pppd python readline reflection session spl ssl sysfs tcpd theora truetype unicode v4l v4l2 vim-syntax vorbis x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Foxx Ladysgarden





          2010-04-14 22:56:37 UTC
        

(In reply to comment #0)
seconding the report





Comment 2


Marc Arens





          2010-04-15 10:37:53 UTC
        

you can disable the hal useflag as a workaround 




Comment 3


Foxx Ladysgarden





          2010-04-15 19:42:15 UTC
        

(In reply to comment #2)
> you can disable the hal useflag as a workaround 
thanks, -hal worked ... i had tried -dbus, which didn't.






Comment 4


Steev Klimaszewski (RETIRED)






          2010-04-15 19:57:22 UTC
        

Which version of DBus are you running (emerge -pv dbus output would be perfect, if you don't use portage, then whatever command shows what version is installed and with what useflags works great.  Even eix's output would be great as long as you update its database first.)  and does anything show up in the system log when you attempt to start thunar.

Someone said that a workaround is to emerge it -hal - this could possibly be an issue with some of the stricter rules that dbus enforces.  We may need to request the newer hal be stabled, although I cannot say for certain.

Can you also attach (or paste into a comment on here, no pastebin for this) the .conf file in /etc/dbus/system.d for thunar?

Finally, have you rebuilt hal/anything linked against dbus?




Comment 5


Marc Arens





          2010-04-15 20:40:52 UTC
        

looks like http://bugs.gentoo.org/show_bug.cgi?id=279077 hit us




Comment 6


Marc Arens





          2010-04-16 12:19:16 UTC
        

So i just found some time to test it. i added my user to the plugdev group, logged out and back in again and thunar works. So i guess this could be marked as invalid or whatever is more appropriate.

It happened to me after updating to sys-apps/dbus-1.2.24




Comment 7


Julien RIOU





          2010-04-16 17:50:31 UTC
        

Created attachment 228051 [details]
Hal's configuration file (under /etc/dbus-1/system.d/)




Comment 8


Julien RIOU





          2010-04-16 17:52:30 UTC
        

I've updated the title (with versions).
I put some results here anyway :

eix results :

[I] sys-apps/dbus
     Available versions:  1.2.3-r1 1.2.24 [M]~1.3.0 [M]~1.3.0-r1 {X debug doc selinux test}
     Installed versions:  1.2.24(19:07:58 04/08/10)(X -debug -doc -selinux -test)

[I] xfce-base/thunar
     Available versions:  1.0.1 [M]~1.1.0 {dbus debug doc exif gnome hal pcre startup-notification test +trash-plugin}
     Installed versions:  1.0.1(17:48:12 03/20/10)(dbus gnome hal pcre trash-plugin -debug -doc -exif -startup-notification -test)

I've joined a conf file (as requested). I didn't found the thunar one.
I've added my user to the plugdev group... the bug's still here.

I'll try the -hal useflag and give you some news.




Comment 9


Julien RIOU





          2010-04-16 18:01:44 UTC
        

I've added the useflag « -hal » to thunar (in /etc/portage/package.use) and it works now !




Comment 10


Marc Arens





          2010-04-16 18:02:32 UTC
        

> I'll try the -hal useflag and give you some news.
No. You only have to add your user to the plugdev group via 
gpasswd -a $youruser plugdev and then log out and in again. Se the bug i linked in Comment #5 .





Comment 11


Samuli Suominen (RETIRED)






          2010-04-16 18:10:20 UTC
        

reopen for correct resolution




Comment 12


Julien RIOU





          2010-04-16 19:12:22 UTC
        

I've re-added the hal useflag (delete the line in package.use), recompile thunar. Use the gpasswd command, log off and log on. Thunar works now.
Thanks !









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

