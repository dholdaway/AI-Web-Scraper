Title: 362893 – media-video/vlc  installs libtool files referencing libpng14
URL: https://bugs.gentoo.org/show_bug.cgi?id=362893

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 362893
media-video/vlc  installs libtool files referencing libpng14
Last modified: 2011-04-14 00:20:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 362893 
      - media-video/vlc  installs libtool files referencing libpng14


Summary:
media-video/vlc  installs libtool files referencing libpng14
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




libpng-1.5



 

        Show dependency tree





 





      Reported:
    
2011-04-10 16:37 UTC by Cesko Voeten





      Modified:
    
2011-04-14 00:20 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ssuominen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Cesko Voeten





          2011-04-10 16:37:21 UTC
        

As per http://forums.gentoo.org/viewtopic-p-6647403.html#6647403
Problematic file:
/usr/lib64/vlc/plugins/misc/libsvg_plugin.la




Comment 1


Samuli Suominen (RETIRED)






          2011-04-10 17:07:47 UTC
        

aballier, does vlc use libltdl for loading plugins? if it does, you should apply this to src_install():

find "${ED}" -name '*.la' -exec sed -i -e "/^dependency_libs/s:=.*:='':" {} +

if it doesn't, and they're simply useless, you should remove them instead.

otherwise vlc will cause other packages to fail when libpng 1.5 hits ~arch




Comment 2


Alexis Ballier






          2011-04-12 20:39:02 UTC
        

Fix your system so that no library used by vlc installs a .la file referencing libpng14 and your problem will be gone. Here it does not reference it.

(In reply to comment #1)
> aballier, does vlc use libltdl for loading plugins? if it does, you should
> apply this to src_install():
> 
> find "${ED}" -name '*.la' -exec sed -i -e "/^dependency_libs/s:=.*:='':" {} +

No thanks, these hacks do not belong to ebuilds.


> if it doesn't, and they're simply useless, you should remove them instead.


As you can see from 9999, they will be gone with the next major release.




Comment 3


Samuli Suominen (RETIRED)






          2011-04-13 04:50:13 UTC
        

(In reply to comment #2)
> Fix your system so that no library used by vlc installs a .la file referencing
> libpng14 and your problem will be gone. Here it does not reference it.
> 
> (In reply to comment #1)
> > aballier, does vlc use libltdl for loading plugins? if it does, you should
> > apply this to src_install():
> > 
> > find "${ED}" -name '*.la' -exec sed -i -e "/^dependency_libs/s:=.*:='':" {} +
> 
> No thanks, these hacks do not belong to ebuilds.

Explain to me why you think it's a hack.  It sets dependency_libs to '' with one-liner to render the installed .la files harmless.  VLC installs libvlc, therefore it can have reverse dependencies linking to it.  Therefore it should be stopped here as well.

> > if it doesn't, and they're simply useless, you should remove them instead.
> As you can see from 9999, they will be gone with the next major release.

Then good, letting this bug stay closed because of above.




Comment 4


Alexis Ballier






          2011-04-14 00:20:51 UTC
        

(In reply to comment #3)
> (In reply to comment #2)
> > Fix your system so that no library used by vlc installs a .la file referencing
> > libpng14 and your problem will be gone. Here it does not reference it.
> > 
> > (In reply to comment #1)
> > > aballier, does vlc use libltdl for loading plugins? if it does, you should
> > > apply this to src_install():
> > > 
> > > find "${ED}" -name '*.la' -exec sed -i -e "/^dependency_libs/s:=.*:='':" {} +
> > 
> > No thanks, these hacks do not belong to ebuilds.
> 
> Explain to me why you think it's a hack.  It sets dependency_libs to '' with
> one-liner to render the installed .la files harmless.  VLC installs libvlc,
> therefore it can have reverse dependencies linking to it.  Therefore it should
> be stopped here as well.

Well... there's a couple of reasons:
- libvlc links to (almost) nothing, so dependency_libs are a non issue
- packages using libvlc should _not_ link to the plugins
- I don't understand your argument about libltdl: as far as I know, it does load the dependency_libs, setting it to '' will just kill that feature
- if you still think its a good idea, elibtoolize will be a better place to change this rather than after installing the package









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

