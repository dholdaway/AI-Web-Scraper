Title: 277260 – media-sound/amarok-2.1.1 needs >=dev-db/mysql-5.1.30
URL: https://bugs.gentoo.org/show_bug.cgi?id=277260

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 277260
media-sound/amarok-2.1.1 needs >=dev-db/mysql-5.1.30
Last modified: 2009-11-17 15:11:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 277260 
      - media-sound/amarok-2.1.1 needs >=dev-db/mysql-5.1.30


Summary:
media-sound/amarok-2.1.1 needs >=dev-db/mysql-5.1.30
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Jorge Manuel B. S. Vicetto (RETIRED)








URL:



https://bugs.kde.org/show_bug.cgi?id=...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-07-09 21:37 UTC by Matt Whitlock





      Modified:
    
2009-11-17 15:11 UTC
      (History)
    




          CC List:
        

7 
          users
          
            (show)
          



genzilla
kde
mysql-bugs
optiluca
sound
spatz
vamp898









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matt Whitlock





          2009-07-09 21:37:18 UTC
        

According to Myriam Schweingruber (an Amarok developer?), Amarok 2.1 requires MySQL 5.1.30:

https://bugs.kde.org/show_bug.cgi?id=199473#c2

The current media-sound/amarok-2.1.1 ebuild does not have a strict enough dependency on dev-db/mysql.  The Amarok ebuild should be updated to require >=dev-db/mysql-5.1.30.

This apparently also means that MySQL 5.1.30 must be added to Portage.

As you will see in the above-linked KDE bug, using MySQL 5.0.83 leads to a crash at Amarok startup due to an invalid key length.




Comment 1


Jorge Manuel B. S. Vicetto (RETIRED)






          2009-07-10 15:41:50 UTC
        

Just for the record, amarok-2.1.1 is working "happily" here with our mysql version.
Furthermore, mysql-5.0.76-r1 includes our patch to build libmysqld as a shared lib.




Comment 2


Matt Whitlock





          2009-07-10 15:46:02 UTC
        

I was using 5.0.76-r1 without problems, too, but I upgraded to 5.0.83, and Amarok crashes consistently now.  Maybe the Amarok ebuild needs a dependency on !dev-db/mysql-5.0.83.  Try it yourself, but back up your collection first!




Comment 3


Robin Johnson









          2009-07-10 16:37:20 UTC
        

This patch that went into 5.1 seems to be part of it, it removes a lot of the exit(1) calls:
http://bugs.mysql.com/bug.php?id=39289

mysql-5.1 is coming more to Gentoo in the next couple of weeks anyway (after I'm back from Linux Symposium).




Comment 4


boris64





          2009-07-10 19:43:16 UTC
        

I feel ashamed to ask, but: 
How long will "in the next couple of weeks" be?

I'm having the same problem as the bug reporter
and can't compile mysql-(community)-5.0.77* 
(because of linux-headers-2.6.30?/gcc-4.4.0?
-> https://bugs.gentoo.org/show_bug.cgi?id=276921).

So Amarok is pretty useless for now (or "the next weeks") :/

PS: Is there a test ebuild or something else available?
I really don't wanna wait anymore.




Comment 5


Robin Johnson









          2009-07-10 19:56:41 UTC
        

boris64: if you want to get the gcc4.4 patches in the meantime, copy the last ebuild that worked for you copy the .83 ebuild to .77-r1, and you'll get the latest patchset where they are. It should work, but I haven't explicitly tested it.

Few: 2-3 weeks




Comment 6


Matt Whitlock





          2009-07-27 23:56:53 UTC
        

Somewhere along the way, my Amarok magically started working with MySQL 5.0.83.  I just blew out my database in ~/.kde4/share/apps/amarok/mysqle and started Amarok, and it scanned my collection and repopulated the database successfully.

To preserve my stats, I followed the steps at http://amarok.kde.org/forum/index.php/topic,16966.msg28088.html (substituting ~/.kde4 for ~/.kde).

No idea why it was crashing before and why it's not now, but I can happily say I have Amarok 2.1.1 working with MySQL 5.0.83, using the stock ebuilds in the Portage tree.  Therefore, closing this bug.




Comment 7


ben adler





          2009-10-14 21:38:41 UTC
        

Matt,

I can't quite follow your reasoning here. You closed the bug because the combination of versions has suddenly been working for *you*. My amarok-2.2.0 still doesn't work correctly with 5.0.84-r1.

As the amarokers tell us to use 5.1.30, I think its a valid bug. Can I reopen it?

Also, why is it that gentoo lags behind on mysql-versions so much? Are all the newer versions buggy?




Comment 8


Robin Johnson









          2009-10-15 00:52:21 UTC
        

(In reply to comment #7)
> As the amarokers tell us to use 5.1.30, I think its a valid bug. Can I reopen
> it?
Does anybody know what specific 5.1.x feature they want?

> Also, why is it that gentoo lags behind on mysql-versions so much? Are all the
> newer versions buggy?
As long as they eat my data (I test them well beyond the bundled testsuite), they will not be in the tree.






Comment 9


白川間瀬流





          2009-11-06 17:41:31 UTC
        

This Bug is 100% not fixed. Amarok 2.2.x _does_ need MySQL>=5.1

thats why every other distro with amarok ships MySQL 5.1 and distros with MySQL 5.0 like this here wont have the new amarok

and thats why the amarok developers say its a Gentoo bug in case of old MySQL (watch amarok bug tracker)

so plz re-open it. Its a bug, its existing, its _not_ fixed




Comment 10


boris64





          2009-11-17 12:50:57 UTC
        

No offense, but is somebody still looking at this?
Will there be a >=mysql-5.1.30 ebuild "some day"?

Amarok crashes a lot (here) and takes ages while 
rebuilding/recovering some innoDB stuff on restart.
It could perhaps be a database problem (as the amarok 
people told me to use >=5.1.30), but as there is no
up2date Mysql version, i guess we'll never know.

:(




Comment 11


白川間瀬流





          2009-11-17 15:11:37 UTC
        

If you configure MySQL, start MySQL Daemon and tell amarok to use a external MySQL Database and select localhost and so on it works.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

