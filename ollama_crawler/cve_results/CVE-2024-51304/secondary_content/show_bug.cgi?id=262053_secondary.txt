Title: 262053 – Fix sys-process/procps for arm and gcc < 4.4
URL: https://bugs.gentoo.org/show_bug.cgi?id=262053

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 262053
Fix sys-process/procps for arm and gcc < 4.4
Last modified: 2009-03-14 12:03:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 262053 
      - Fix sys-process/procps for arm and gcc < 4.4


Summary:
Fix sys-process/procps for arm and gcc < 4.4
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:




261111



Blocks:







 

        Show dependency tree





 





      Reported:
    
2009-03-10 21:44 UTC by Sven 'sleipnir' Rebhan





      Modified:
    
2009-03-14 12:03 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



embedded
maxposedon









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Fix for arm and gcc < 4.4 + cross-compile include fix

              (procps-cross-and-arm-gcc.patch,903 bytes,
                text/plain)

            
2009-03-10 21:46 UTC,

            Sven 'sleipnir' Rebhan




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sven 'sleipnir' Rebhan





          2009-03-10 21:44:20 UTC
        

Compilation of procps fails for gcc < 4.4 because -frename-registers does not work on that version (see http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36209 for details).

Furthermore, a wrong include path for cross-compilation is fixed.

Reproducible: Always




Comment 1


Sven 'sleipnir' Rebhan





          2009-03-10 21:46:46 UTC
        

Created attachment 184627 [details]
Fix for arm and gcc < 4.4 + cross-compile include fix

The patch fixes a bug for arm and gcc < 4.4. Furthermore, it contains a cross-compile include fix.




Comment 2


SpanKY






          2009-03-10 22:30:39 UTC
        

Comment on attachment 184627 [details]
Fix for arm and gcc < 4.4 + cross-compile include fix

these changes are no good

if gcc is generating bad code, file a bug for that

as for ncurses, using ROOT in src_* ebuilds is wrong.  simply delete the -I paths and see if it works.




Comment 3


Sven 'sleipnir' Rebhan





          2009-03-11 20:33:04 UTC
        

The gcc fix was submitted to bug #261111. The package cross-compiles even with the wrong ncurses include path. If a patch is appreciated, I will provide the according sed line.




Comment 4


SpanKY






          2009-03-11 22:24:54 UTC
        

yes, please post a sed to remove the -I to /usr/include/....




Comment 5


Sven 'sleipnir' Rebhan





          2009-03-12 11:29:02 UTC
        

I took a look at the sources of procps and see that there are quite some includes refereing to ncurses.h. I think, removing the -I/usr/include is wrong. So how do we proceed here? 





Comment 6


SpanKY






          2009-03-14 12:03:27 UTC
        

if you read the ebuild you'll see we already clobber CPPFLAGS.  so whatever the package itself is doing is irrelevant.

the gcc issue has its own bug which means there's nothing left here









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

