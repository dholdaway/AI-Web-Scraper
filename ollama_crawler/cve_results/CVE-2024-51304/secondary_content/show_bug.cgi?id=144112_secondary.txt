Title: 144112 – gnome-base/gnome-applets-2.14.2 fails to compile with gst_debug_min error.
URL: https://bugs.gentoo.org/show_bug.cgi?id=144112

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 144112
gnome-base/gnome-applets-2.14.2 fails to compile with gst_debug_min error.
Last modified: 2006-08-18 06:23:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 144112 
      - gnome-base/gnome-applets-2.14.2 fails to compile with gst_debug_min error.


Summary:
gnome-base/gnome-applets-2.14.2 fails to compile with gst_debug_min error.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-16 06:09 UTC by Andrew Dorney





      Modified:
    
2006-08-18 06:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew Dorney





          2006-08-16 06:09:17 UTC
        

I do compile my system with the debug use flag; last night, I went from ~amd64 gstreamer (10.9-ish) to amd64 gstreamer (10.4-ish), as I was cleaning out my package.keywords list from Gnome 2.14. So I recompiled all my gstreamer and gst-plugins packages.

When I rebooted this morning, gnome-settings-daemon refused to start (with the same __gst_debug_min error I get with the ebuild). So I figured I'd recompile anything that required gstreamer. And now gnome-applets isn't compiling.


x86_64-pc-linux-gnu-gcc -march=k8 -O2 -pipe -ggdb -o mixer_applet2 applet.o dock.o load.o preferences.o -Wl,--export-dynamic -pthread -pthread -pthread  /usr/lib64/libgstreamer-0.10.so /usr/lib64/libgstinterfaces-0.10.so /usr/lib64/libgstaudio-0.10.so /usr/lib64/libpanel-applet-2.so /usr/lib64/libgnome-desktop-2.so /usr/lib64/libgnomeui-2.so /usr/lib64/libSM.so /usr/lib64/libICE.so /usr/lib64/libstartup-notification-1.so /usr/lib64/libbonoboui-2.so /usr/lib64/libgnome-keyring.so /usr/lib64/libxml2.so -lz /usr/lib64/libgnomecanvas-2.so /usr/lib64/libgnome-2.so /usr/lib64/libpopt.so /usr/lib64/libart_lgpl_2.so /usr/lib64/libpangoft2-1.0.so /usr/lib64/libgtk-x11-2.0.so /usr/lib64/libgdk-x11-2.0.so /usr/lib64/libatk-1.0.so /usr/lib64/libgdk_pixbuf-2.0.so /usr/lib64/libpangocairo-1.0.so /usr/lib64/libpango-1.0.so /usr/lib64/libcairo.so /usr/lib64/libgnomevfs-2.so /usr/lib64/libbonobo-2.so /usr/lib64/libgconf-2.so /usr/lib64/libgobject-2.0.so /usr/lib64/libbonobo-activation.so /usr/lib64/libORBit-2.so -lm /usr/lib64/libgmodule-2.0.so -ldl /usr/lib64/libgthread-2.0.so /usr/lib64/libglib-2.0.so
/usr/lib64/libgstinterfaces-0.10.so: undefined reference to `__gst_debug_min'
collect2: ld returned 1 exit status
make[3]: *** [mixer_applet2] Error 1
make[3]: Leaving directory `/var/tmp/portage/gnome-applets-2.14.2/work/gnome-applets-2.14.2/mixer'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/gnome-applets-2.14.2/work/gnome-applets-2.14.2/mixer'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/gnome-applets-2.14.2/work/gnome-applets-2.14.2'
make: *** [all] Error 2




StubbornAesthetics ~ # emerge --info
Portage 2.1-r2 (default-linux/amd64/2006.0, gcc-3.4.6, glibc-2.3.6-r4, 2.6.17-gentoo-r4 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r4 x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.12.4
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--alphabetical"
FEATURES="autoconfig distlocks fixpackages metadata-transfer sandbox sfperms splitdebug strict"
GENTOO_MIRRORS="http://gentoo.chem.wisc.edu/gentoo/ http://gentoo.mirrors.pair.com"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X Xaw3d aac aalib accessibility acpi aim alsa amd64 apm arts audiofile avi bash-completion berkdb bitmap-fonts bluetooth bonobo bzlib cdparanoia cdr cjk cli crypt cups curl curlwrappers dbus ddbm dga dio divx4linux dlloader dri dvd dvdr dvdread eds emboss emul-linux-x86 encode esd ethereal exif expat f77 faad fam fbcon ffmpeg flac flash font-server foomaticdb fortran ftp gd gdbm ggi gif glut gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gtkhtml hal icq imagemagick imap imlib inifile ipv6 isdnlog jabber jack java javascript joystick jp2 jpeg kde ladcca ldap lesstif libcaca libg++ libwww lm_sensors lmcs lzw lzw-tiff mad mbox mikmod mng motif mp3 mpeg msn nas ncurses nls nptl nptlonly ogg oggvorbis openal opengl oss pam pcre pdds pdflib perl png portaudio ppds pppd python qt qt3 qt4 quicktime readline reflection ruby sambasasl scanner sdl seamonkey session slang sndfile snmp sockets sox speex spell spl ssl svg tcpd theora threads tidy tiff truetype truetype-fonts type1-fonts unicode usb userlocales utf8 vcd videos vorbis wifi wmf xine xinerama xml xml-rpc xml2 xmms xorg xosd xpm xprint xrandr xv xvid yahoo zlib elibc_glibc input_devices_joystick input_devices_keyboard input_devices_mouse kernel_linux userland_GNU video_cards_dummy video_cards_fbdev video_cards_nv video_cards_nvidia video_cards_vesa video_cards_vga"
Unset:  CTARGET, INSTALL_MASK, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


John N. Laliberte (RETIRED)






          2006-08-16 09:15:25 UTC
        

when you recompiled gstreamer and its plugins, did you use the debug flag again?

If not, try compiling gstreamer +debug, or you can recompile gst-plugins-base -debug.

Report back with results, thanks.




Comment 2


Andrew Dorney





          2006-08-16 09:27:43 UTC
        

Yeah; these were the ones I re-did after going down to stable amd64:

StubbornAesthetics ~ # emerge -pv gstreamer gst-plugins-alsa gst-plugins-oss gst-plugins-xvideo gst-plugins-x gst-plugins-esd gst-plugins-ogg gst-plugins-vorbis gst-plugins-gnomevfs gst-plugins-cdparanoia gst-plugins-pango

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] media-libs/gstreamer-0.10.8  0 kB
[ebuild   R   ] media-plugins/gst-plugins-alsa-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-oss-0.10.2  0 kB
[ebuild   R   ] media-plugins/gst-plugins-xvideo-0.10.4-r1  0 kB
[ebuild   R   ] media-plugins/gst-plugins-x-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-esd-0.10.2  0 kB
[ebuild   R   ] media-plugins/gst-plugins-ogg-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-vorbis-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-gnomevfs-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-cdparanoia-0.10.4  0 kB
[ebuild   R   ] media-plugins/gst-plugins-pango-0.10.4  0 kB


All of those were compiled with -ggdb in the CFLAGS, so debug info was added to them. They don't seem to have a "debug" use flag.

~~ Andrew D.




Comment 3


Andrew Dorney





          2006-08-17 09:11:22 UTC
        

Going back up to the latest ~amd64 components, (gstreamer-0.10.9, gst-plugins-base-0.10.9, and the plugins' latest versions) solved the issue. I'll just wait for those (or a newer version) to go stable before trying to play with them again, I guess.




Comment 4


Daniel Gryniewicz (RETIRED)






          2006-08-17 10:10:54 UTC
        

For the record, sounds like you needed a revdep-rebuild after downgrading your gstreamer packages.




Comment 5


Andrew Dorney





          2006-08-17 16:00:34 UTC
        

(In reply to comment #4)
> For the record, sounds like you needed a revdep-rebuild after downgrading your
> gstreamer packages.
> 

I should probably explain the entire situation from start to finish.

1) Wanted to get rid of some lines in packages.keywords, considering that gstreamer 0.10 has hit stable (for the most part).
2) Downgraded to the versions in comment #2.
3) Could not start any program (including gnome-settings-daemon) that used gstreamer.
4) Ran a revdep-rebuild. It listed nothing.
5) I used ecatmur's dep script to find the packages that depended on gstreamer. They were:

gnome-applets
gnome-media
banshee
sound-juicer

6) Tried to re-emerge those. They all failed (but I only posted this one bug, as they were all related).
7) Re-upgraded to what I had. Recompiled the apps above. Everything works.


So... I did do a revdep-rebuild, as well as manually ran an emerge for the dependencies. Thanks for the suggestion anyway.

~~ Andrew D.




Comment 6


John N. Laliberte (RETIRED)






          2006-08-18 06:23:27 UTC
        

reporter reports he fixed the local issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

