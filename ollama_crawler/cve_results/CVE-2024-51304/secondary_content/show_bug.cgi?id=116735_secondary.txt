Title: 116735 – games-strategy/wesnoth-1.0.{1,2} fails on ppc
URL: https://bugs.gentoo.org/show_bug.cgi?id=116735

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 116735
games-strategy/wesnoth-1.0.{1,2} fails on ppc
Last modified: 2006-01-08 03:51:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 116735 
      - games-strategy/wesnoth-1.0.{1,2} fails on ppc


Summary:
games-strategy/wesnoth-1.0.{1,2} fails on ppc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-25 13:50 UTC by Florian E





      Modified:
    
2006-01-08 03:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ppc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




errors from one of the first tries of emerging wesnoth

              (wesnoth.err,1.22 KB,
                text/plain)

            
2005-12-25 13:55 UTC,

            Florian E




Details





second set off errors+ last 20 lines of emerge log + emerge info

              (wesnoth.1135518794.err,5.42 KB,
                text/plain)

            
2005-12-25 13:57 UTC,

            Florian E




Details





third set, errors + emerge info, downgraded binutils to last stable

              (wesnoth.1135521576.err,3.81 KB,
                text/plain)

            
2005-12-25 13:59 UTC,

            Florian E




Details





fourth set of errors, trying different useflag combinations (dedicated/editor)

              (wesnoth.1135533809.err,2.33 KB,
                text/plain)

            
2005-12-25 14:01 UTC,

            Florian E




Details





a working combination of useflags

              (wesnoth.1135534562.err,408 bytes,
                text/plain)

            
2005-12-25 14:02 UTC,

            Florian E




Details





errors and emerge info, testing dedicated&&editor

              (wesnoth.1135542681.err,3.87 KB,
                text/plain)

            
2005-12-25 14:04 UTC,

            Florian E




Details





errors + emerge info, useflags "-* dedicated editor"

              (wesnoth.1135544645.err,3.97 KB,
                text/plain)

            
2005-12-25 14:06 UTC,

            Florian E




Details





testing USE="-* dedicated editor" on wesnoth-1.0.1, emerge info + errors

              (wesnoth.1135547321.err,1.82 KB,
                text/plain)

            
2005-12-25 14:08 UTC,

            Florian E




Details





many many Out-of-Memory-killers

              (wesnoth.everything.log-2005-12-26-15:17:21,187.41 KB,
                text/plain)

            
2005-12-27 02:41 UTC,

            Florian E




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Florian E





          2005-12-25 13:50:33 UTC
        

emerge fails for (-dedicated) && (+dedicated +editor)

steps to reproduce:
1. try to emerge wesnoth 1.0.1 or 1.0.2 without setting the "dedicated" useflag XOR with setting the dedicated- and editor-useflags

I'll attach some files with slightly different error messages, emerge infos and stuff.




Comment 1


Florian E





          2005-12-25 13:55:12 UTC
        

Created attachment 75516 [details]
errors from one of the first tries of emerging wesnoth




Comment 2


Florian E





          2005-12-25 13:57:26 UTC
        

Created attachment 75517 [details]
second set off errors+ last 20 lines of emerge log + emerge info




Comment 3


Florian E





          2005-12-25 13:59:50 UTC
        

Created attachment 75518 [details]
third set, errors + emerge info, downgraded binutils to last stable




Comment 4


Florian E





          2005-12-25 14:01:39 UTC
        

Created attachment 75520 [details]
fourth set of errors, trying different useflag combinations (dedicated/editor)




Comment 5


Florian E





          2005-12-25 14:02:44 UTC
        

Created attachment 75521 [details]
a working combination of useflags




Comment 6


Florian E





          2005-12-25 14:04:55 UTC
        

Created attachment 75522 [details]
errors and emerge info, testing dedicated&&editor




Comment 7


Florian E





          2005-12-25 14:06:15 UTC
        

Created attachment 75523 [details]
errors + emerge info, useflags "-* dedicated editor"




Comment 8


Florian E





          2005-12-25 14:08:36 UTC
        

Created attachment 75524 [details]
testing USE="-* dedicated editor" on wesnoth-1.0.1, emerge info + errors




Comment 9


Florian E





          2005-12-25 14:14:18 UTC
        

OK, I lost the track, somewhere I downgraded libsdl to the last stable too
I'm sorry,but I'm feeling kinda sick, to much xmas-sweets ^^"




Comment 10


Joe Jezak (RETIRED)






          2005-12-25 21:44:10 UTC
        

Are you using a kernel with preempt enabled?  Can you try disabling it if you do?




Comment 11


Florian E





          2005-12-26 06:25:36 UTC
        

nope, no preemp:
 # uname -a
Linux i-do 2.6.15-rc5 #4 Mon Dec 5 19:56:56 CET 2005 ppc 7447A, altivec supported PowerBook6,5 GNU/Linux
 # ls -l /usr/src/linux
lrwxrwxrwx  1 root root 16 23. Dez 19:25 /usr/src/linux -> linux-2.6.15-rc5
 # grep PREEMP /usr/src/linux/.config 
CONFIG_PREEMPT_NONE=y
# CONFIG_PREEMPT_VOLUNTARY is not set
# CONFIG_PREEMPT is not set




Comment 12


Mr. Bones. (RETIRED)






          2005-12-26 11:27:00 UTC
        

Any output from dmesg?




Comment 13


Florian E





          2005-12-27 02:27:28 UTC
        

I managed to emerge it with changing my CXXFLAGS from "-O2 -pipe -mcpu=G4 -maltivec -mabi=altivec -fno-strict-aliasing" to "-O1 -pipe -mcpu=G4 -maltivec -mabi=altivec -fno-strict-aliasing" with 
# CXXFLAGS="-O1 -pipe -mcpu=G4 -maltivec -mabi=altivec -fno-strict-aliasing" emerge wesnoth
[...]
>>> games-strategy/wesnoth-1.0.2 merged.
[...]
# equery u wesnoth
[...]
 U I
- - dedicated : Adds support for dedicated game servers (some packages do not provide clients and servers at the same time)
- - editor    : Enable compilation editor
- - gnome     : Adds GNOME support
- - kde       : Adds support for kde-base/kde (K Desktop Enviroment)
- - lite      : Lite install
+ + nls       : Adds Native Language Support (using gettext - GNU locale utilities)
- - server    : Enable compilation of server
- - tools     : Enable compilation of translation tools

I played the tutorial and a campaign mission last night ^^

# CXXFLAGS="-O1 -pipe -mcpu=G4 -maltivec -mabi=altivec -fno-strict-aliasing" USE="editor server" emerge wesnoth
works too

it seems to me g++ produced incorrect code with the -O2 optimization set
should I track down the option of -O2 which causes the errors by setting CXXFLAGS to "-O1 {every single part of -O2} ..." and disabling one of them every try?




Comment 14


Florian E





          2005-12-27 02:40:23 UTC
        

(In reply to comment #12)
> Any output from dmesg?
> 
ehmm... checked my logs... 2904 lines of oom-killers ^^""
I'll create an attachment




Comment 15


Florian E





          2005-12-27 02:41:40 UTC
        

Created attachment 75588 [details]
many many Out-of-Memory-killers




Comment 16


Joe Jezak (RETIRED)






          2006-01-07 23:07:20 UTC
        

How much memory do you have?  Swap?




Comment 17


Florian E





          2006-01-08 03:51:09 UTC
        

768MB, no swap
I think it's the first time I got an oom-killer

and like I wrote, builds cleanly and works when changing -O2 to -O1
some memory managment prob in gcc..?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

