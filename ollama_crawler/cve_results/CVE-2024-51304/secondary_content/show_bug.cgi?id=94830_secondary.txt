Title: 94830 – net-www/apache-2.0.54-r6 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=94830

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 94830
net-www/apache-2.0.54-r6 fails to compile
Last modified: 2005-10-30 09:46:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 94830 
      - net-www/apache-2.0.54-r6 fails to compile


Summary:
net-www/apache-2.0.54-r6 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Apache Team - Bugzilla Reports








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

103178 110911

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-06-02 08:15 UTC by Marco Squarcina





      Modified:
    
2005-10-30 09:46 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



lavish
matt_harrison
toddmarimon









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marco Squarcina





          2005-06-02 08:15:38 UTC
        

I'm not able to compile apache-2.0.54-r6. Here's what I get:


...
Making all in mappers
make[2]: Entering directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/mappers'
make[3]: Entering directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/mappers'
/usr/share/apr-0/build/libtool --silent --mode=compile i686-pc-linux-gnu-gcc  -pthread  -march=pentium3 -O2 -pipe -fomit-frame-pointer  -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -DAP_HAVE_DESIGNATED_INITIALIZER   -I/usr/include/apr-0 -I. -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/os/unix -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/server/mpm/prefork -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/http -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/filters -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/proxy -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/include -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/generators -I/usr/include/openssl -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/dav/main -prefer-non-pic -static -c mod_so.c && touch mod_so.lo
/usr/share/apr-0/build/libtool --silent --mode=link i686-pc-linux-gnu-gcc  -pthread  -march=pentium3 -O2 -pipe -fomit-frame-pointer  -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -DAP_HAVE_DESIGNATED_INITIALIZER   -I/usr/include/apr-0 -I. -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/os/unix -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/server/mpm/prefork -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/http -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/filters -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/proxy -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/include -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/generators -I/usr/include/openssl -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/dav/main -module -export-dynamic -L/usr/lib   -o mod_so.la mod_so.lo
make[3]: Leaving directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/mappers'
make[2]: Leaving directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/mappers'
make[1]: Leaving directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules'
Making all in support
make[1]: Entering directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/support'
make[2]: Entering directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/support'
/usr/share/apr-0/build/libtool --silent --mode=compile i686-pc-linux-gnu-gcc  -pthread  -march=pentium3 -O2 -pipe -fomit-frame-pointer  -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -DAP_HAVE_DESIGNATED_INITIALIZER   -I/usr/include/apr-0 -I. -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/os/unix -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/server/mpm/prefork -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/http -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/filters -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/proxy -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/include -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/generators -I/usr/include/openssl -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/dav/main -prefer-non-pic -static -c htpasswd.c && touch htpasswd.lo
/usr/share/apr-0/build/libtool --silent --mode=link i686-pc-linux-gnu-gcc  -pthread  -march=pentium3 -O2 -pipe -fomit-frame-pointer  -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -DAP_HAVE_DESIGNATED_INITIALIZER   -I/usr/include/apr-0 -I. -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/os/unix -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/server/mpm/prefork -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/http -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/filters -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/proxy -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/include -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/generators -I/usr/include/openssl -I/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/modules/dav/main -export-dynamic -L/usr/lib   -o htpasswd  htpasswd.lo   -lz -lssl -lcrypto /var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/srclib/pcre/libpcre.la /usr/lib/libaprutil-0.la -lgdbm -ldb -lexpat /usr/lib/libapr-0.la -lrt -lm -lcrypt -lnsl -lpthread -ldl
/usr/lib/libaprutil-0.so: undefined reference to `db_create_4001'
/usr/lib/libaprutil-0.so: undefined reference to `db_strerror_4001'
collect2: ld returned 1 exit status
make[2]: *** [htpasswd] Error 1
make[2]: Leaving directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/support'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/apache-2.0.54-r6/work/httpd-2.0.54/support'
make: *** [all-recursive] Error 1

!!! ERROR: net-www/apache-2.0.54-r6 failed.
!!! Function src_compile, Line 156, Exitcode 2
!!! problem compiling apache2
!!! If you need support, post the topmost build error, NOT this status message.



################################################################################



This is my emerge info:

nebula root # emerge info
Portage 2.0.51.19 (hardened/x86/2.6, gcc-3.3.5-20050130, glibc-2.3.4.20041102-r1, 2.6.11-hardened-r13 i686)
=================================================================
System uname: 2.6.11-hardened-r13 i686 Pentium III (Coppermine)
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Apr 28 2005, 13:30:58)]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://www.die.unipd.it/pub/Linux/distributions/gentoo-sources/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage//packages/x86/"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage/"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="apache2 bash-completion berkdb chroot crypt cups dlloader ftp gdbm gpm hardened hardenedphp ipv6 libwww ncurses nls nptl nptlonly pam perl php pic python readline spell ssl svga tcpd unicode userlocales x86 xml2 zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY


################################################################################

Cheers 

Marco




Comment 1


Michael Tindal (RETIRED)






          2005-06-02 09:06:20 UTC
        

Can you try reinstall apr and apr-util then rebuilding apache?




Comment 2


Michael Stewart (vericgar) (RETIRED)






          2005-06-02 09:11:19 UTC
        

Not sure if this is what is causing this or not, but the mention of LARGEFILE
being passed to libtool tells me that you probably have old apr/apr-utils
installed on your system (we removed support for LARGEFILE do to many issues).
See if following the information here helps you:
http://dev.gentoo.org/~vericgar/doc/apache-troubleshooting.html




Comment 3


Marco Squarcina





          2005-06-02 12:40:45 UTC
        

Thanks so much! I'll try tomorrow, beacuse I cannot put the server down again
today :/
I'll let u know

Cheers
Marco




Comment 4


Sean Sullivan





          2005-06-03 08:00:12 UTC
        

I had the same issue here. Same errors, same arch. Your suggestion to update apr
and apr-util worked for me :)

-Sean 




Comment 5


Marco Squarcina





          2005-06-04 01:34:42 UTC
        

Ok, it worked, thank you very much!

Cheers
Marco




Comment 6


Jakub Moc (RETIRED)






          2005-08-20 14:17:59 UTC
        

*** Bug 103178 has been marked as a duplicate of this bug. ***




Comment 7


Jakub Moc (RETIRED)






          2005-10-30 09:46:29 UTC
        

*** Bug 110911 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

