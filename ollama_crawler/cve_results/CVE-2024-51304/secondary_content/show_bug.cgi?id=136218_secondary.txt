Title: 136218 – x11-libs/qt-3.3.6-r1, cannot create actiondnd.moc (.moc/release-shared-mt/actiondnd.moc)
URL: https://bugs.gentoo.org/show_bug.cgi?id=136218

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 136218
x11-libs/qt-3.3.6-r1, cannot create actiondnd.moc (.moc/release-shared-mt/actiondnd.moc)
Last modified: 2006-07-31 04:59:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 136218 
      - x11-libs/qt-3.3.6-r1, cannot create actiondnd.moc (.moc/release-shared-mt/actiondnd.moc)


Summary:
x11-libs/qt-3.3.6-r1, cannot create actiondnd.moc (.moc/release-shared-mt/act...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-09 12:17 UTC by Werner M. Mayer





      Modified:
    
2006-07-31 04:59 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



wmm









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Werner M. Mayer





          2006-06-09 12:17:26 UTC
        

qt-x11-free-3.3.6-r1 is a dependency of links, arts and others like the game
maelstrom. Long Logfile:
>>> Checking qt-x11-free-3.3.6.tar.bz2's mtime...
>>> Checking qt-x11-immodule-unified-qt3.3.6-20060317-gentoo.diff.bz2's mtime...
>>> WORKDIR is up-to-date, keeping...
...
gmake: `qmake' is up to date.
Detecting broken X11 headers... (/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/mkspecs/linux-g++ yes /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6 /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6)
X11 headers look good.
Determining machine byte-order... (/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/mkspecs/linux-g++ yes /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6 /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6)
make: Nothing to be done for `first'.
Using little endian.
Testing size of pointers ... (/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/mkspecs/linux-g++ yes /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6 /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6)
rm -f ptrsizetest.o
rm -f *~ core *.core
i686-pc-linux-gnu-g++ -c -pipe -Wall -W -O2 -mtune=i686 -pipe -fno-strict-aliasing   -I/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/mkspecs/linux-g++ -I. -o ptrsizetest.o ptrsizetest.cpp
i686-pc-linux-gnu-g++  -o ptrsizetest ptrsizetest.o
Pointersize: 4
Build type:    linux-g++
qmake vars ......  "QT_PRODUCT=qt-free" "styles += windows motif mac platinum sgi cde motifplus" "kbd-drivers += tty" "mouse-drivers += pc" "sql-drivers -= odbc" "sql-plugins -= odbc" "sql-drivers -= mysql" "sql-plugins -= mysql" "sql-drivers -= psql" "sql-plugins -= psql" "sql-drivers -= ibase" "sql-plugins -= ibase" "sql-drivers -= sqlite" "sql-plugins -= sqlite" "QMAKE_MOC=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/bin/moc" "QMAKE_UIC=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/bin/uic -L $$QT_BUILD_TREE/plugins" "QMAKE_QMAKE=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/bin/qmake" "QMAKE_MOC_SRC=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/src/moc" "INCLUDEPATH+=/usr/X11R6/include/freetype2" "QMAKE_LIBS_X11=-lXft -lfreetype
-lfontconfig $$QMAKE_LIBS_X11" "QMAKE_INCDIR_QT=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/include" "QMAKE_LIBDIR_QT=/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/lib" "QMAKE_RTLDIR_QT=/usr/qt/3/lib" "OBJECTS_DIR=.obj/release-shared-mt" "MOC_DIR=.moc/release-shared-mt" "QMAKE_LIBS_QT+=-lmng" "QMAKE_LIBS_QT_THREAD+=-lmng" "QMAKE_LIBS_QT+=-ljpeg" "QMAKE_LIBS_QT_THREAD+=-ljpeg" "QMAKE_LIBS_QT+=-lpng" "QMAKE_LIBS_QT_THREAD+=-lpng" "QMAKE_LIBS_QT+=-lz" "QMAKE_LIBS_QT_THREAD+=-lz" "QMAKE_LIBS_X11 = -lXcursor $$QMAKE_LIBS_X11" "QMAKE_LIBS_X11 = -lXrandr $$QMAKE_LIBS_X11" "QMAKE_LIBS_X11 = -lXrender $$QMAKE_LIBS_X11" "QMAKE_LIBS_X11 = -lXi $$QMAKE_LIBS_X11" "QT_INSTALL_PREFIX=/usr/qt/3" "docs.path=/usr/qt/3/doc" "headers.path=/usr/qt/3/include" "plugins.path=/usr/qt/3/plugins" "libs.path=/usr/qt/3/lib" "bins.path=/usr/qt/3/bin" "data.path=/usr/qt/3" "translations.path=/usr/qt/3/translations" "QMAKE_CFLAGS+=-fno-exceptions" "QMAKE_CXXFLAGS+=-fno-exceptions" "QMAKE_LFLAGS+=-fno-exceptions"
qmake switches ..
Configuration .......  nocrosscompiler dlopen_opengl minimal-config small-config medium-config large-config full-config styles tools kernel widgets dialogs iconview workspace network canvas table xml opengl sql release dll thread largefile stl ipv6 system-mng mng system-jpeg jpeg system-png png gif system-zlib cups bigcodecs x11sm xshape xcursor xrandr xrender xftfreetype tablet xkb
...
Finding project files. Please wait...
  241 projects found.
Creating makefiles. Please wait...
  skipping /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/src/moc/moc.pro
  skipping /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/src/qt.pro
... 
  skipping /var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/plugins/src/styles/windows/windows.pro
Qt is now configured for building. Just run /usr/bin/gmake.
To reconfigure, run /usr/bin/gmake confclean and configure.
cd qmake && make
make[1]: Entering directory `/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/qmake'
make[1]: `qmake' is up to date.
make[1]: Leaving directory `/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/qmake'
cd src/moc && make
[... deleted for space, everything OK until below ...]
make[3]: Nothing to be done for `first'.
make[3]: Leaving directory `/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/tools/designer/uilib'
cd designer && make -f Makefile
make[3]: Entering directory `/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/tools/designer/designer'
/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/bin/moc actiondnd.cpp -o .moc/release-shared-mt/actiondnd.moc
i686-pc-linux-gnu-g++ -c -pipe -fno-exceptions -fPIC -Wall -W -O2 -mtune=i686 -pipe -fno-strict-aliasing -D_REENTRANT  -DDESIGNER -DQT_INTERNAL_XML -DQT_INTERNAL_WORKSPACE -DQT_INTERNAL_ICONVIEW -DQT_INTERNAL_TABLE -DQT_TABLET_SUPPORT -DQT_NO_DEBUG -DQT_THREAD_SUPPORT -DQT_SHARED -I/var/tmp/portage/qt-3.3.6-r1/work/qt-x11-free-3.3.6/mkspecs/linux-g++ -I. -I/usr/include/freetype2 -I../shared -I../uilib -I../../../include -I.moc/release-shared-mt/ -o ./project.o project.cpp
moc: Cannot create .moc/release-shared-mt/actiondnd.moc
make[3]: *** [.moc/release-shared-mt/actiondnd.moc] Error 1
make[3]: *** Waiting for unfinished jobs....

emerge --info:     Gentoo Base System version 1.6.14
Portage 2.0.54-r2 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r3, 2.6.15-gentoo-r5 i686)
=================================================================
System uname: 2.6.15-gentoo-r5 i686 VIA Samuel 2 (Booted with minimal Livecd)
ccache version 2.3 [enabled]
dev-lang/python:     2.4.2
dev-python/pycrypto: [Not Present]
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mtune=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig buildpkg ccache cvs distcc distlocks keeptemp keepwork noauto noclean notitles sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ...
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr cli crypt cups curl dri eds emboss encode esd expat foomaticdb fortran gdbm gif gmp gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg kde lcms libg++ libwww mad mikmod mng motif mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd python qt quicktime readline recode reflection sdl session spell spl ssl tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis xml xmms xorg xv zlib userland_GNU kernel_linux
elibc_glibc"
Unset:  CTARGET, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTAGE_RSYNC_OPTS

The error is reproducable, e.g. try to emerge links, maelstrom or qt directly 
allways fails, because the x11-libs/qt package is the first package in the 
emerge process.




Comment 1


Werner M. Mayer





          2006-06-10 20:27:59 UTC
        

Workaround for non-kde-users like me: 
To emerge most of the wanted packages I used USE="-arts", avoiding
kde-base/arts and the failing qt-3.3.6-r1. This only works for
packages that do not explicitly need arts and/or qt.




Comment 2


Caleb Tennis (RETIRED)






          2006-07-31 04:59:55 UTC
        

I can't reproduce it.  I suggest clearing our your portage tmpdir and trying again...?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

