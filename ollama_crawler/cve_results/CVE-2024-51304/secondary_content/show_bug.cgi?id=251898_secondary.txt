Title: 251898 – xfce-base/thunar-0.9.3 requires X11 for its test suite
URL: https://bugs.gentoo.org/show_bug.cgi?id=251898

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 251898
xfce-base/thunar-0.9.3 requires X11 for its test suite
Last modified: 2009-05-09 05:21:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 251898 
      - xfce-base/thunar-0.9.3 requires X11 for its test suite


Summary:
xfce-base/thunar-0.9.3 requires X11 for its test suite
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

XFCE Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-21 17:01 UTC by René Rhéaume (a.k.a. repzilon, rener)





      Modified:
    
2009-05-09 05:21 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,3.46 KB,
                text/plain)

            
2008-12-21 17:01 UTC,

            René Rhéaume (a.k.a. repzilon, rener)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


René Rhéaume (a.k.a. repzilon, rener)





          2008-12-21 17:01:01 UTC
        

The Thunar file manager requires X11 to run its suite, something that cannot be done in portage.



Reproducible: Always

Steps to Reproduce:
1. emerge -1 thunar

Actual Results:  
make[3]: Entering directory `/var/tmp/portage/xfce-base/thunar-0.9.3/work/Thunar-0.9.3/tests'
Xlib: connection to ":0.0" refused by server
Xlib: No protocol specified


(lt-test-thunar-vfs-path:26967): Gtk-WARNING **: cannot open display: :0.0
FAIL: test-thunar-vfs-path

[...]

ERROR: xfce-base/thunar-0.9.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_test
 *             environment, line 2572:  Called die
 * The specific snippet of code:
 *       Xemake check || die "emake check failed."
 *  The die message:
 *   emake check failed.

Expected Results:  
Thunar merged into the system.

The workaround is FEATURES='-test' emerge -1 thunar. Thunar also has a few non-graphical tests (for its internal database for example) in its suite. They pass on my system.

I am a bit curious. What is the difference between Xemake and emake?




Comment 1


René Rhéaume (a.k.a. repzilon, rener)





          2008-12-21 17:01:23 UTC
        

Created attachment 176057 [details]
emerge --info




Comment 2


Christoph Mende (RETIRED)






          2008-12-23 09:09:48 UTC
        

well, the difference between Xemake and emake is that Xemake spawns an Xvfb, so this problem shouldn't happen




Comment 3


René Rhéaume (a.k.a. repzilon, rener)





          2008-12-24 22:38:43 UTC
        

Which means it does not work with an xorg-server compiled with the minimal USE flag, as Xvfb is not installed on my system.

Thus, the problem is not the ebuild itself. I did a quick search about excluding tests and found nothing. Can you point me to the document, if such document exists, please?




Comment 4


Jeremy Olexa (darkside) (RETIRED)








          2008-12-28 16:37:55 UTC
        

(In reply to comment #3)
> Which means it does not work with an xorg-server compiled with the minimal USE
> flag, as Xvfb is not installed on my system.
> 
> Thus, the problem is not the ebuild itself. I did a quick search about
> excluding tests and found nothing. Can you point me to the document, if such
> document exists, please?
> 

Please post your build.log of the failure. I get "All 1 tests passed" when I compiled xorg-server with USE=minimal and do not have Xvfb on my system.




Comment 5


Christoph Mende (RETIRED)






          2009-02-09 19:40:46 UTC
        

well, Xemake uses the running X when it's accessible, so it doesn't always require Xvfb. I'm not quite sure how we could fix this though, maybe let the virtualx skip/die/warn/whatever Xemake when it's unable to open any DISPLAY?




Comment 6


Jeremy Olexa (darkside) (RETIRED)








          2009-05-09 05:21:21 UTC
        

Sorry, not a clue. Still worksforme. please don't be offended because I am closing this bug. We have reached a stagnate point that will not resolve itself. =/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

