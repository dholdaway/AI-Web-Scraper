Title: 143732 – dev-db/mysql-4.1.20 doesn't start
URL: https://bugs.gentoo.org/show_bug.cgi?id=143732

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 143732
dev-db/mysql-4.1.20 doesn't start
Last modified: 2007-03-24 01:23:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 143732 
      - dev-db/mysql-4.1.20 doesn't start


Summary:
dev-db/mysql-4.1.20 doesn't start
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux MySQL bugs team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-12 17:12 UTC by jsado_sc3





      Modified:
    
2007-03-24 01:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


jsado_sc3





          2006-08-12 17:12:33 UTC
        

I start mysql, but it doesn't actually start. No error messages are displayed:

# /etc/init.d/mysql start
 * Re-caching dependency info (mtimes differ)...
 * Re-caching dependency info (mtimes differ)...
 * Re-caching dependency info (mtimes differ)...
 * Re-caching dependency info (mtimes differ)...
 *  ...
 * Starting mysql (/etc/mysql/my.cnf)                                                            [ ok ]

# ps -ef | grep mysql
root     28739 11298  0 19:45 pts/9    00:00:00 grep mysql

There is a message when I stop it:
# /etc/init.d/mysql stop
 * Re-caching dependency info (mtimes differ)...
 * Stopping mysql ...
/etc/init.d/mysql: line 332: /var/run/mysqld/mysqld.pid: No such file or directory
 * Stopping mysqld (0)                                                                           [ ok ]

I just upgraded to mysql 4.1.20.

# emerge --info
Portage 2.1-r1 (default-linux/x86/2006.0, gcc-3.3.6, glibc-2.3.6-r3, 2.6.14-gentoo-r2 i686)
=================================================================
System uname: 2.6.14-gentoo-r2 i686 Transmeta Efficeon(tm) Processor TM8000
Gentoo Base System version 1.6.14
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.4, 2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -mcpu=pentium4 -msse2 -mfpmath=sse -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-Os -mcpu=pentium4 -msse2 -mfpmath=sse -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aac acpi alsa apache2 apm audiofile avi berkdb bitmap-fonts bonobo bzlib cli cpdflib crypt cscope dga dio directfb divx4linux dlloader doc dri dts dv dvb dvd dvdread eds emboss encode fbcon fftw flac fortran ftp gb gd gdbm gif gpm gstreamer gtk gtk2 gtkhtml icq imagemagick imap imlib isdnlog jack jpeg ladcca lcms lesstif libg++ libwww mad mikmod mime mmx mmxext mng motif mozilla mp3 mpeg ncurses nis nptl offensive ogg oggvorbis opengl pam pcmcia pcre pda pdflib perl png pnp posix pppd qt3 qt4 quicktime radeon readline reflection sdl session sndfile speex spell spl sse sse2 ssl svg sysvipc tcpd tga theora tidy tiff truetype truetype-fonts type1-fonts udev usb vcd vim-with-x vorbis win32codecs xine xml xmms xorg xpm xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Luca Longinotti (RETIRED)






          2006-08-31 15:03:29 UTC
        

-Os seems to not work well with MySQL.
Please emerge dev-db/mysql-4.1.21 with -O2 in the C(XX)FLAGS.
Best regards, CHTEKK.




Comment 2


jsado_sc3





          2006-09-01 03:26:57 UTC
        

Nope, still doesn't work. I emerged with this command:

CFLAGS="-O2 -mcpu=pentium4 -msse2 -mfpmath=sse -pipe -fomit-frame-pointer" emerge -v mysql





Comment 3


Luca Longinotti (RETIRED)






          2006-09-01 03:35:48 UTC
        

MySQL is a mostly C++ app. Try with the following:

CFLAGS="-O2 -mcpu=pentium4 -pipe -fomit-frame-pointer" CXXFLAGS="-O2 -mcpu=pentium4 -pipe -fomit-frame-pointer" emerge -v mysql

Best regards, CHTEKK.




Comment 4


jsado_sc3





          2006-09-01 04:56:10 UTC
        

Nope. Still doesn't start:

CFLAGS="-O2 -mcpu=pentium4 -pipe -fomit-frame-pointer" CXXFLAGS="-O2 -mcpu=pentium4 -pipe -fomit-frame-pointer" emerge -v mysql

root@bit:~ 3> /etc/init.d/mysql start
 * Caching service dependencies ...                                                              [ ok ]
 *  ...
 * Starting mysql (/etc/mysql/my.cnf)                                                            [ ok ]
root@bit:~ 4> ps -ef | grep mysql
root     23673 30497  0 07:44 pts/1    00:00:00 grep mysql
root@bit:~ 5> /etc/init.d/mysql stop
 * Stopping mysql ...
/etc/init.d/mysql: line 332: /var/run/mysqld/mysqld.pid: No such file or directory
 * Stopping mysqld (0)                                                                           [ ok ]




Comment 5


jsado_sc3





          2006-09-15 15:31:08 UTC
        

Reopening to get some activity on this.




Comment 6


Luca Longinotti (RETIRED)






          2007-01-12 22:45:27 UTC
        

Can't reproduce this, please try with MySQL 4.1.22-r1. Also be sure to check your /var/log/mysql/ logs, if they tell you anything, and make sure MySQL is really not running anymore after you've stopped it (ps faux | grep -i mysql) before starting it again!
Best regards, CHTEKK.




Comment 7


jsado_sc3





          2007-03-24 01:23:00 UTC
        

I have finally gotten mysql to start. I had to delete the database area and recreate it with mysql_install_db. I realized this after seeing this message in /var/log/mysql/msyqld.err:

070323 21:03:54 [ERROR] Fatal error: mysql.user table is damaged or in unsupported 3.20 format.

Makes sense since I am now running mysql 5.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

