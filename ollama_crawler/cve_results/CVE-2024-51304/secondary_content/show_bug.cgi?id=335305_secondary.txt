Title: 335305 – sys-libs/db-4.7.25_p4 fails to build with mksh as /bin/sh
URL: https://bugs.gentoo.org/show_bug.cgi?id=335305

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 335305
sys-libs/db-4.7.25_p4 fails to build with mksh as /bin/sh
Last modified: 2010-09-19 19:13:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 335305 
      - sys-libs/db-4.7.25_p4 fails to build with mksh as /bin/sh


Summary:
sys-libs/db-4.7.25_p4 fails to build with mksh as /bin/sh
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-08-30 17:50 UTC by Patrick Lauer





      Modified:
    
2010-09-19 19:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



pauldv









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrick Lauer






          2010-08-30 17:50:25 UTC
        

configure: creating ./config.status
config.status: creating Makefile
config.status: creating db_cxx.h
config.status: creating db_int.h
config.status: creating clib_port.h
config.status: creating include.tcl
config.status: creating db.h
config.status: creating db_185.h
config.status: creating db185_int.h
config.status: creating db_config.h
config.status: executing libtool commands
rm: cannot remove `libtoolT': No such file or directory
make -j3 
/bin/bash ./libtool --mode=compile x86_64-pc-linux-gnu-gcc -c -I. -I/var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/..  -D_GNU_SOURCE -D_REENTRANT -O2 -march=k8 -pipe -ggdb  /var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/../db185/db185.c
/bin/bash ./libtool --mode=compile x86_64-pc-linux-gnu-gcc -c -I. -I/var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/..  -D_GNU_SOURCE -D_REENTRANT -O2 -march=k8 -pipe -ggdb  /var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/../mutex/mut_tas.c
/bin/bash ./libtool --mode=compile x86_64-pc-linux-gnu-gcc -c -I. -I/var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/..  -D_GNU_SOURCE -D_REENTRANT -O2 -march=k8 -pipe -ggdb  /var/tmp/portage/sys-libs/db-4.7.25_p4/work/db-4.7.25/build_unix/../dist/../btree/bt_compare.c
./libtool: line 929: print: command not found
./libtool: line 929: print: command not found
./libtool: line 929: print: command not found
./libtool: line 929: print: command not found
./libtool: line 1002: print: command not found
./libtool: line 929: print: command not found
./libtool: line 936: print: command not found
./libtool: line 1002: print: command not found
make: *** [bt_compare.lo] Error 1
make: *** Waiting for unfinished jobs....
./libtool: line 929: print: command not found
./libtool: line 936: print: command not found
make: *** [mut_tas.lo] Error 1
./libtool: line 1002: print: command not found
./libtool: line 936: print: command not found
make: *** [db185.lo] Error 1
emake failed
 * ERROR: sys-libs/db-4.7.25_p4 failed:


Portage 2.2_rc72 (default/linux/amd64/10.0/desktop, gcc-4.4.4, glibc-2.12.1-r1, 2.6.35-rc4 x86_64)
=================================================================
System uname: Linux-2.6.35-rc4-x86_64-AMD_Phenom-tm-_9950_Quad-Core_Processor-with-gentoo-2.0.1
Timestamp of tree: Unknown
ccache version 2.4 [disabled]
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r3, 3.1.2-r4
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.2
sys-apps/sandbox:    2.3-r1
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.4-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.35 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/portage /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=k8 -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests buildpkg collision-protect distlocks fixlafiles fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/home/me/code/gentoo-x86/"
PORTDIR_OVERLAY="/usr/local/portage/layman/x11 /usr/local/portage/layman/qting-edge /home/pal/code/kde"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac aalib acl acpi alsa amd64 apache2 berkdb bluetooth branding bzip2 cairo cdio cdparanoia cdr cli consolekit cracklib crypt cups curl cxx dbus device-mapper dga directfb dri dts dv dvd dvdr emboss encode exif extensions extras fam firefox flac fortran ftp fts3 gd gdbm ggi gif gnutls gpm iconv ipv6 ithreads jack jpeg jpeg2k kde kpathsea ladspa lcms libnotify lzo mad md5sum mikmod mmx mmxext mng modules mp2 mp3 mp4 mpeg mudflap multilib musepack nas ncurses networkmanager nls nptl nptlonly nsplugin objc ogg openal opengl openmp pam pango pcre pdf perl png pnm policykit postfix ppds pppd python qemu qt3 qt3support qt4 quicktime rar readline reflection rtc sasl sdl secure-delete semantic-desktop session slang speex spell spl sqlite sse sse2 ssl startup-notification svg sysfs tcpd tga theora threads tiff tk truetype udev unicode usb v4l2 vorbis webkit x264 xcb xml xmp xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="vga radeon r600" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Robin Johnson









          2010-09-10 21:46:15 UTC
        

something is broken in your libtool/autotools I think.
Can't reproduce here.




Comment 2


Patrick Lauer






          2010-09-19 13:20:19 UTC
        

Another package that fails in amusing ways if /bin/sh doesn't point at bash. (I'm using mksh for that at the moment)




Comment 3


SpanKY






          2010-09-19 19:13:26 UTC
        

we dont have resources let alone inclination to support yet another possibly broken ass shell.  this db version emerges with dash as /bin/sh.

you absolutely must report this sort of information when filing bugs.  no one is testing mksh as /bin/sh, so weird reports coming from you is simply going to waste people's time for absolutely no reason.

feel free to investigate mksh support *on your own time only*.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

