Title: 704732 – sys-apps/portage: failure to resolve libfreetype.so for dev-java/openjdk-bin-11.0.4_p11
URL: https://bugs.gentoo.org/show_bug.cgi?id=704732

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 704732
sys-apps/portage: failure to resolve libfreetype.so for dev-java/openjdk-bin-11.0.4_p11
Last modified: 2020-01-03 23:54:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 704732 
      - sys-apps/portage: failure to resolve libfreetype.so for dev-java/openjdk-bin-11.0.4_p11


Summary:
sys-apps/portage: failure to resolve libfreetype.so for dev-java/openjdk-bin-...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Dependencies

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




694246



 

        Show dependency tree





 





      Reported:
    
2020-01-03 23:26 UTC by Zac Medico





      Modified:
    
2020-01-03 23:54 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zac Medico






          2020-01-03 23:26:15 UTC
        

The output of emerge -p --depclean --ignore-soname-deps=n shows this:

> * Broken soname dependencies found:
> *
> *   x86_64: libfreetype.so required by:
> *     dev-java/openjdk-bin-11.0.4_p11
> *

Meanwhile, the dependency is actually satisfied:

> $ ls -l /usr/lib64/libfreetype*
> lrwxrwxrwx 1 root root     21 Feb 19  2019 /usr/lib64/libfreetype.so -> libfreetype.so.6.16.1
> lrwxrwxrwx 1 root root     21 Feb 19  2019 /usr/lib64/libfreetype.so.6 -> libfreetype.so.6.16.1
> -rwxr-xr-x 1 root root 769224 Feb 19  2019 /usr/lib64/libfreetype.so.6.16.1

The problem is that portage fails to recognize that libfreetype.so is satisfied because it does not correspond to an soname. The soname is actually libfreetype.so.6.




Comment 1


Zac Medico






          2020-01-03 23:49:44 UTC
        

Maybe this indicates a flaw in the openjdk build system, since linking directly to libfreetype.so could be bad if for example we have a bump from libfreetype.so.6 to libfreetype.so.7 and libfreetype.so now refers to libfreetype.so.7 which is incompatible with the installed openjdk instance.




Comment 2


Zac Medico






          2020-01-03 23:54:19 UTC
        

(In reply to Zac Medico from comment #1)
> Maybe this indicates a flaw in the openjdk build system, since linking
> directly to libfreetype.so could be bad if for example we have a bump from
> libfreetype.so.6 to libfreetype.so.7 and libfreetype.so now refers to
> libfreetype.so.7 which is incompatible with the installed openjdk instance.

Going with the above interpretation for now. The issue does not affect the latest dev-java/openjdk-11.0.5_p10 ebuild.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

