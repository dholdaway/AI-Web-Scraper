Title: 591130 – net-analyzer/wireshark-2.0.5: configure: error: Couldn't compile Qt without -fPIC nor with -fPIC/error: #error "Qt requires C++11 support"
URL: https://bugs.gentoo.org/show_bug.cgi?id=591130

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 591130
net-analyzer/wireshark-2.0.5: configure: error: Couldn't compile Qt without -fPIC nor with -fPIC/error: #error "Qt requires C++11 support"
Last modified: 2016-08-13 11:47:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 591130 
      - net-analyzer/wireshark-2.0.5: configure: error: Couldn't compile Qt without -fPIC nor with -fPIC/error: #error "Qt requires C++11 support"


Summary:
net-analyzer/wireshark-2.0.5: configure: error: Couldn't compile Qt without -...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Netmon project








URL:



https://code.wireshark.org/review/#/c...
        




Whiteboard:




Keywords:








Depends on:







Blocks:




qt5-c++11



 

        Show dependency tree





 





      Reported:
    
2016-08-12 17:16 UTC by Martin Walch





      Modified:
    
2016-08-13 11:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




config.log

              (config.log,220.27 KB,
                text/plain)

            
2016-08-12 17:16 UTC,

            Martin Walch




Details





build.log

              (build.log,18.34 KB,
                text/plain)

            
2016-08-12 17:16 UTC,

            Martin Walch




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Walch





          2016-08-12 17:16:10 UTC
        

Created attachment 443160 [details]
config.log

build.log:

checking whether Qt works without -fPIC... no
checking whether Qt works with -fPIC... no
configure: error: Couldn't compile Qt without -fPIC nor with -fPIC


config.log:

In file included from /usr/include/qt5/QtCore/qatomic.h:46:0,
                 from /usr/include/qt5/QtCore/qglobal.h:1145,
                 from /usr/include/qt5/QtCore/qnamespace.h:43,
                 from /usr/include/qt5/QtCore/qobjectdefs.h:48,
                 from /usr/include/qt5/QtCore/qobject.h:46,
                 from /usr/include/qt5/QtCore/qabstractanimation.h:43,
                 from /usr/include/qt5/QtCore/QtCore:4,
                 from conftest.cpp:42:
/usr/include/qt5/QtCore/qbasicatomic.h:61:4: error: #error "Qt requires C++11 support"
 #  error "Qt requires C++11 support"
    ^


emerge --info:

Portage 2.2.28 (python 2.7.10-final-0, default/linux/amd64/13.0/desktop/plasma, gcc-4.9.3, glibc-2.22-r4, 4.5.6-gentoo x86_64)
=================================================================
System uname: Linux-4.5.6-gentoo-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q8400_@_2.66GHz-with-gentoo-2.2
KiB Swap:    8388052 total,   8133240 free
Timestamp of repository gentoo: Fri, 12 Aug 2016 06:15:01 +0000
sh bash 4.3_p42-r1
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
distcc 3.2rc1 x86_64-pc-linux-gnu [disabled]
ccache version 3.2.4 [enabled]
app-shells/bash:          4.3_p42-r1::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.10-r1::gentoo, 3.4.3-r1::gentoo
dev-util/ccache:          3.2.4::gentoo
dev-util/cmake:           3.3.1-r1::gentoo
dev-util/pkgconfig:       0.29.1::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.19.1::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.3::gentoo                                                                                                                          
sys-devel/gcc-config:     1.7.3::gentoo                                                                                                                          
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.3::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r4::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync6.de.gentoo.org/gentoo-portage
    priority: -1000

gamerlay
    location: /var/lib/layman/gamerlay
    masters: gentoo
    priority: 0

java
    location: /var/lib/layman/java
    masters: gentoo
    priority: 1

x11
    location: /var/lib/layman/x11
    masters: gentoo
    priority: 2

kde
    location: /var/lib/layman/kde
    masters: gentoo
    priority: 3

qt
    location: /var/lib/layman/qt
    masters: gentoo
    priority: 4

booboo
    location: /var/lib/layman/booboo
    masters: gentoo
    priority: 5

worldforge-overlay
    location: /usr/local/portage/worldforge
    masters: gentoo
    priority: 6

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 7

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE dom4j GPL-2-with-MySQL-FLOSS-exception icu JasPer2.0 JDOM wxWinFDL-3 freedist unRAR intel-ucode sun-concurrent-util"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -fgcse-after-reload -pipe -fpredictive-commoning -ftree-partial-pre -fgcse-sm -fgcse-las --param max-gcse-memory=1073741824 --param max-reload-search-insns=10000 --param max-cselib-memory-locations=50000 --param max-crossjump-edges=10000 --param max-modulo-backtrack-attempts=4000 --param max-hoist-depth=0 --param max-tail-merge-comparisons=1000 --param max-tail-merge-iterations=20 --param omega-eliminate-redundant-constraints=1 --param max-cse-path-length=1048576 -ftree-slp-vectorize -funswitch-loops"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -fgcse-after-reload -pipe -fpredictive-commoning -ftree-partial-pre -fgcse-sm -fgcse-las --param max-gcse-memory=1073741824 --param max-reload-search-insns=10000 --param max-cselib-memory-locations=50000 --param max-crossjump-edges=10000 --param max-modulo-backtrack-attempts=4000 --param max-hoist-depth=0 --param max-tail-merge-comparisons=1000 --param max-tail-merge-iterations=20 --param omega-eliminate-redundant-constraints=1 --param max-cse-path-length=1048576 -ftree-slp-vectorize -funswitch-loops"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-march=native -O2 -fgcse-after-reload -pipe -fpredictive-commoning -ftree-partial-pre -fgcse-sm -fgcse-las --param max-gcse-memory=1073741824 --param max-reload-search-insns=10000 --param max-cselib-memory-locations=50000 --param max-crossjump-edges=10000 --param max-modulo-backtrack-attempts=4000 --param max-hoist-depth=0 --param max-tail-merge-comparisons=1000 --param max-tail-merge-iterations=20 --param omega-eliminate-redundant-constraints=1 --param max-cse-path-length=1048576 -ftree-slp-vectorize -funswitch-loops"
FEATURES="assume-digests binpkg-logs ccache config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync metadata-transfer multilib-strict news nostrip parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-march=native -O2 -fgcse-after-reload -pipe -fpredictive-commoning -ftree-partial-pre -fgcse-sm -fgcse-las --param max-gcse-memory=1073741824 --param max-reload-search-insns=10000 --param max-cselib-memory-locations=50000 --param max-crossjump-edges=10000 --param max-modulo-backtrack-attempts=4000 --param max-hoist-depth=0 --param max-tail-merge-comparisons=1000 --param max-tail-merge-iterations=20 --param omega-eliminate-redundant-constraints=1 --param max-cse-path-length=1048576 -ftree-slp-vectorize -funswitch-loops"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.switch.ch/mirror/gentoo/"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.utf-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_COMPRESS="xz"
PORTAGE_COMPRESS_FLAGS="-6 -e"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="64bit X Xaw3d a52 aac aacs aalib accessibility acl acpi ads agg allegro alsa amd64 amr apache2 aspell attica autoipd bash-completion bazaar bdplus berkdb bindist bittorrent blender blender-game bluray branding bzip2 cairo canberra caps ccache cdda cdr cdrom cegui cjk cli clucene consolekit cracklib crypt cups curl cvs cxx daap dbus deblob declarative default-font designer-plugin desktopglobe devil dga dhcpcd dirac display-manager djvu dlz doc dri dri3 dts dvd dvdnav dvdr emacs embedded emboss encode exif extended-solver fam farstream fbcon ffmpeg fftw firefox fits flac floppy fltk fortran g3dvl gbm gcj gdbm gflags ggi gimp git glamor gmm gmp gopher gpg gpm gpu grub gstreamer guile gzip hunspell hybrid-auth i18n icons iconv icq icu idn ieee1394 imagemagick import-filter iproute2 ipv6 jabber jack java java6 javascript jingle jpeg jpeg2k kate kde kdecards kdepim kdm kipi konsole kontact kvm ladspa lastfm latex lcms ldap libcaca libkms libnotify libssh2 libwww lm_sensors lua lzma lzo marble matroska mdnsresponder-compat mercurial minizip mjpeg mmx mmxext mng modemmanager modules mpeg mpfr mpi mplayer mtp mule multilib musepack mysql ncurses networkmanager newnet nls nova nowin nptl nscd nsplugin offensive ogg ogg123 ogre openal opencl openexr opengl openmp openssl opensslcrypt openstreetmap openvg openxml opus osc oscar osmesa otr pae pam pango pcre pdf phonon pkcs11 plasma player plotutils png policykit posix postscript povray ppds ppp prison private-headers python qemu qmi qmimodem qml qt3support qt4 qt5 ramfs rbd readline redland reiser4 reiserfs reviewboard rfc3779 romio rss rtmp samba scanner schroedinger scim sdl sdl-image seccomp semantic-desktop sensord session shm shmvideo smbclient sna sndfile solver songs sound source speex spell spice sse sse2 sse3 sse4.1 sse4_1 ssl ssse3 startup-notification subversion svg systemtap tcpd telepathy test-programs theora threads tidy tiff tk tools truetype udev udisks unicode usb uxa vaapi vc video videos virtfs vorbis vpx wallpapers wav wavpack webm webp webstart widgets wifi wmf x264 xa xattr xcb xcomposite xemacs xerces-c xft xhtml xine xml xmpp xorg xosd xprint xrandr xscreensaver xulrunner xv xvid xvmc zeroconf zfs zip zlib" ABI_X86="64" ALSA_CARDS="hda-intel" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_connect proxy_http rewrite setenvif so speling status unique_id unixd userdir usertrack vhost_alias" CALLIGRA_FEATURES="author braindump flow karbon kexi krita sheets stage words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 sse4_1 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="de" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" QEMU_SOFTMMU_TARGETS="x86_64" RUBY_TARGETS="ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="fbdev i965 intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Martin Walch





          2016-08-12 17:16:46 UTC
        

Created attachment 443162 [details]
build.log




Comment 2


jospezial





          2016-08-13 10:05:12 UTC
        

the live version fixed that bug for me:

Version 2.3.0 (v2.3.0rc0-192-g92eecfd from unknown)

Copyright 1998-2016 Gerald Combs <gerald@wireshark.org> and contributors.
License GPLv2+: GNU GPL version 2 or later <http://www.gnu.org/licenses/old-licenses/gpl-2.0.html>
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Compiled (64-bit) with Qt 5.7.1, with libpcap, with POSIX capabilities (Linux),
with libnl 3, with GLib 2.48.1, with zlib 1.2.8, with SMI 0.5.0, without c-ares,
with Lua 5.1, with GnuTLS 3.4.14, with Gcrypt 1.7.2, without Kerberos, with
GeoIP, with QtMultimedia, without AirPcap.

Running on Linux 4.8.0-rc1, with locale LC_CTYPE=de_DE.utf8,
LC_NUMERIC=de_DE.utf8, LC_TIME=de_DE.utf8, LC_COLLATE=de_DE.utf8,
LC_MONETARY=de_DE.utf8, LC_MESSAGES=de_DE.UTF-8, LC_PAPER=de_DE.utf8,
LC_NAME=de_DE.utf8, LC_ADDRESS=de_DE.utf8, LC_TELEPHONE=de_DE.utf8,
LC_MEASUREMENT=de_DE.utf8, LC_IDENTIFICATION=de_DE.utf8, with libpcap version
1.8.0, with GnuTLS 3.4.14, with Gcrypt 1.7.2, with zlib 1.2.8.
Intel(R) Core(TM)2 Quad CPU    Q6600  @ 2.40GHz

Built using gcc 5.4.0.

=================================================================
                        Package Settings
=================================================================

net-analyzer/wireshark-99999999::gentoo was built with the following:
USE="caps crypt filecaps geoip gtk lua netlink pcap qt5 smi ssl zlib -adns -androiddump -doc -doc-pdf -kerberos -portaudio -qt4 -sbc (-selinux) -tfshark" ABI_X86="64" CPU_FLAGS_X86="-sse4_2"
CFLAGS="-march=native -O2 -pipe"
CXXFLAGS="-march=native -O2 -pipe -fPIC -DPIC"

dev-qt/qtcore-5.7.9999::qt was built with the following:
USE="icu -debug -systemd -test" ABI_X86="64"
CFLAGS="-march=native -O2 -pipe"
CXXFLAGS="-march=native -O2 -pipe"

sys-devel/gcc-5.4.0::gentoo was built with the following:
USE="cxx fortran graphite (multilib) nls nptl openmp sanitize vtv (-altivec) (-awt) -cilk -debug -doc (-fixed-point) -gcj -go (-hardened) (-jit) (-libssp) -mpx -nopie -nossp -objc -objc++ -objc-gc -regression-test -vanilla" ABI_X86="64"
CFLAGS="-march=native -O2 -pipe"
CXXFLAGS="-march=native -O2 -pipe"




Comment 3


Jeroen Roovers (RETIRED)






          2016-08-13 11:27:35 UTC
        

Also https://code.wireshark.org/review/16138




Comment 4


Jeroen Roovers (RETIRED)






          2016-08-13 11:28:19 UTC
        

This is already fixed in 2.1.1.




Comment 5


Martin Walch





          2016-08-13 11:47:48 UTC
        

(In reply to Jeroen Roovers from comment #4)
> This is already fixed in 2.1.1.

Alright. Sorry, I forgot to check that.

As a side note:
https://code.wireshark.org/review/#/c/16135/
claims that the patch was also cherrypicked for 2.0 (with 2.0.5 being released afterwards), but that does not seem to suffice.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

