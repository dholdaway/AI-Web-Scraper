Title: 234918 – Bad layman path in documentation
URL: https://bugs.gentoo.org/show_bug.cgi?id=234918

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 234918
Bad layman path in documentation
Last modified: 2009-05-27 20:14:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 234918 
      - Bad layman path in documentation


Summary:
Bad layman path in documentation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

[OLD] Docs on www.gentoo.org




Classification:

Unclassified




Component:

Other documents

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
    (vote)
  



Assignee:

Gentoo Overlays Project








URL:



http://www.gentoo.org/proj/en/overlay...
        




Whiteboard:




Keywords:








Depends on:




257155



Blocks:







 

        Show dependency tree





 





      Reported:
    
2008-08-16 13:39 UTC by Poletto Guillaume





      Modified:
    
2009-05-27 20:14 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



gb_about_gnu
phceac
pva
wrobel









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




My copy of /usr/share/doc/layman-1.2.3/html/layman.8.html

              (layman.8.html,29.07 KB,
                text/html)

            
2009-05-27 18:54 UTC,

            Guenther Brunthaler




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Poletto Guillaume





          2008-08-16 13:39:12 UTC
        

I've seen almost everywhere that layman's directory is /usr/portage/local/layman

Actually it's /usr/local/portage/layman (which makes more sense), as we can see in the conf file /etc/layman/layman.cfg


Documentation quote :
---------------------
Code Listing 2.1: Installing layman

emerge layman
echo "source /usr/portage/local/layman/make.conf" >> /etc/make.conf

Note: Layman will create "/usr/portage/local/layman/make.conf" once you add your first overlay. But if you do not plan to install an overlay immediately you should ensure that this file actually exists and contains the empty variable "PORTDIR_OVERLAY". Otherwise portage will complain. You can run "echo PORTDIR_OVERLAY=\"\" > /usr/portage/local/layman/make.conf" in order to have the file created correctly. 
----------


layman.cfg part :

#-----------------------------------------------------------
# Defines the directory where overlays should be installed

storage   : /usr/local/portage/layman


Reproducible: Always

Steps to Reproduce:
Irrelevant
Actual Results:  
See description

Expected Results:  
Documentation updated




Comment 1


nm (RETIRED)






          2008-08-16 17:24:16 UTC
        

Not our problem; reassigning to the overlays project.




Comment 2


Peter Volkov (RETIRED)






          2008-08-21 06:30:34 UTC
        

stable version of layman still uses /usr/portage/local and our documentation is about stable tree. But it's better to keep this bug open not to forgive to update documentation.

CC'ing layman maintainer. Gunnar please touch (or better fix :)) this bug as layman with this change goes to stable.




Comment 3


Gunnar Wrobel (RETIRED)






          2008-11-15 10:43:31 UTC
        

Will only change once >=layman-1.2.0 becomes stable. See #246775.




Comment 4


phceac





          2009-01-26 15:26:49 UTC
        

I've just been fighting with this one.

The current document at 
http://www.gentoo.org/proj/en/overlays/userguide.xml refers to both paths, in different places. I'm using keyword "x86", but I only saw the reference to the new path so I was adding new style "source /usr/local/portage/layman/make.conf".

Finally, I found a clue in /etc/layman/layman.cfg...

Stabilisation of 1.2 will help, but the docs will need checking for old style paths!





Comment 5


Markus Ullmann (RETIRED)






          2009-05-17 21:49:07 UTC
        

well, doc says
---
(for layman 1.1)
# echo "source /usr/portage/local/layman/make.conf" >> /etc/make.conf

(for layman 1.2 and up)
# echo "source /usr/local/portage/layman/make.conf" >> /etc/make.conf
---
so it is clear which to use, isn't it?





Comment 6


phceac





          2009-05-18 03:15:32 UTC
        

I think you mean FIXED. Looks like you made the change to userguide.xml yourself, on 2009-02-01... maybe as a result of this bug?. 
Credit where it's due, and thanks for sorting out the userguide.






Comment 7


Guenther Brunthaler





          2009-05-26 22:20:52 UTC
        

Can we please re-open this bug?

The issue is up again!

Today I emerged the now-stabilized =app-portage/layman-1.2.3 on amd64, and while all the defaults have changed to /usr/local/portage/layman, the documentation still refers to /usr/portage/local/layman.

In order to show this, just run the following command:

$ grep /usr/portage/local `equery files layman | grep html | tail -n1`

which outputs on my box:

              <code class="filename">/usr/portage/local/layman</code>. layman
              <code class="filename">/usr/portage/local/layman/make.conf</code>" &gt;&gt;
          <code class="filename">/usr/portage/local/layman/cache.xml</code>
          </p><p>source /usr/portage/local/layman/make.conf</p><p><code class="filename">

But that's not all - the man page also refers to /usr/portage/local/layman.





Comment 8


Guenther Brunthaler





          2009-05-26 22:26:23 UTC
        

BTW, was there a special reason why the path default has been changed at all?

As I understand it, it has been argumented in the past that /usr/portage/local/portage was a better place than /usr/local/portage/layman, because when /usr/portage was shared on the network, the layman overlays would be shared with it automatically.

/usr/local on the other hand typically contains data only local to the current machine, and is not intended to be shared between different machines (according to the FHS).

I was happy with /usr/portage/local and would really like to know why that default has been changed.





Comment 9


Peter Volkov (RETIRED)






          2009-05-27 06:25:12 UTC
        

Guenther, as I see now documentation states:

=====================================================================
Code Listing 2.2: Telling Portage about layman-fetched repositories

(for layman 1.1)
# echo "source /usr/portage/local/layman/make.conf" >> /etc/make.conf

(for layman 1.2 and up)
# echo "source /usr/local/portage/layman/make.conf" >> /etc/make.conf
=====================================================================

So it looks like the documentation is correct. And I don't know why this path was changed.





Comment 10


Guenther Brunthaler





          2009-05-27 18:51:16 UTC
        

Hi Peter,

(In reply to comment #9)
> Guenther, as I see now documentation states:
> [...]
> (for layman 1.2 and up)
> # echo "source /usr/local/portage/layman/make.conf" >> /etc/make.conf
> [...]
> So it looks like the documentation is correct. And I don't know why this path
> was changed.

Well it *would* seem... but it seems I have different documentation installed than you do! (Which is strange, unless we have different versions installed. I am referring to layman-1.2.3)

The documentation file where *only* /usr/portage/local/layman is mentioned is installed as

88233ce677589313a304268189581b56 */usr/share/doc/layman-1.2.3/html/layman.8.html

on my box.





Comment 11


Guenther Brunthaler





          2009-05-27 18:54:04 UTC
        

Created attachment 192625 [details]
My copy of /usr/share/doc/layman-1.2.3/html/layman.8.html

This is the documentation file I got installed by emerging the currently stable layman-1.2.3.

Its MD5SUM is 88233ce677589313a304268189581b56 (binary mode).

The path /usr/local/portage/layman is mentioned nowhere in this document.




Comment 12


Guenther Brunthaler





          2009-05-27 18:57:59 UTC
        

And just for the sake of completeness:

$ equery belongs /usr/share/doc/layman-1.2.3/html/layman.8.html
[ Searching for file(s) /usr/share/doc/layman-1.2.3/html/layman.8.html in *... ]
app-portage/layman-1.2.3 (/usr/share/doc/layman-1.2.3/html/layman.8.html)





Comment 13


Peter Volkov (RETIRED)






          2009-05-27 19:00:32 UTC
        

Guenther, ah I see now. This bug is about
http://www.gentoo.org/proj/en/overlays/userguide.xml#doc_chap2
(take a look on URL field) while you talk about documentation bundled with layman. Could you open new bug for this new issue please? Thank you.




Comment 14


Guenther Brunthaler





          2009-05-27 20:14:05 UTC
        

Hi Peter,

(In reply to comment #13)
> Could you open new bug for this new issue please? Thank you.

Sure! Done. Created bug 271457.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

