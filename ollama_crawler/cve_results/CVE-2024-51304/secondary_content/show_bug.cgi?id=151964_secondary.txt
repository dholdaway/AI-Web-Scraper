Title: 151964 – dev-perl/Tk-804.027 fails to build (can't find perl)
URL: https://bugs.gentoo.org/show_bug.cgi?id=151964

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 151964
dev-perl/Tk-804.027 fails to build (can't find perl)
Last modified: 2016-03-23 01:33:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 151964 
      - dev-perl/Tk-804.027 fails to build (can't find perl)


Summary:
dev-perl/Tk-804.027 fails to build (can't find perl)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-19 08:21 UTC by Christopher G. Stach II





      Modified:
    
2016-03-23 01:33 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



bugs
mlspamcb









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace.log.bz2

              (strace.log.bz2,93.79 KB,
                application/octet-stream)

            
2006-10-24 17:19 UTC,

            mren




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christopher G. Stach II





          2006-10-19 08:21:08 UTC
        

Portage 2.1.1 (default-linux/x86/2006.1/server, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 Intel(R) Xeon(TM) CPU 2.40GHz
Gentoo Base System version 1.12.5
Last Sync: Wed, 18 Oct 2006 06:00:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=pentium4 -funroll-loops -fforce-addr -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O3 -march=pentium4 -funroll-loops -fforce-addr -pipe"
DISTDIR="/com/portage/distfiles"
FEATURES="autoconfig ccache distlocks fixpackages metadata-transfer notitles sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ ftp://gentoo.cites.uiuc.edu/pub/gentoo/"
LINGUAS=""
MAKEOPTS="-j5"
PKGDIR="/com/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/com/portage/portage"
PORTDIR_OVERLAY="/com/portage/overlay"
SYNC="rsync://rsync.xxx.net/gentoo-portage"
USE="x86 X Xaw3d acl acpi aim apache2 bitmap-fonts bonobo bzip2 caps clvm crypt cscope dga directfb dmx dri eds elibc_glibc esd exif fdftk firefox flash font-server gdbm gif glibc-omitfp glx gnome gnutls gpm gstreamer gtk gtk2 gtkhtml hpn icq imagemagick imap imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 jabber java javascript jce jikes jpeg jpeg2k junit kernel_linux ldap lesstif logrotate maildir mbox mime ming mmap mmx mng motif mozcalendar mozdevelop mozsvg mozxmlterm mpeg msn nas ncurses new-login nls nolvm1 noweb nptl nsplugin offensive opengl oscar pam pcre pdf perl png posix python qt quicktime readline samba sasl sdl sharedmem silc snmp spell sse sse2 ssl svg sysvipc tcpd theora threads tidy tiff truetype truetype-fonts type1-fonts unicode userland_GNU userlocales video_cards_ati video_cards_dummy video_cards_fbdev video_cards_vesa video_cards_vga win32codecs wmf xface xine xinerama xorg xpm xv xvid yahoo zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS


emerge output:

 * Tk-804.027.tar.gz MD5 ;-) ...                                                                                              [ ok ]
 * Tk-804.027.tar.gz RMD160 ;-) ...                                                                                           [ ok ]
 * Tk-804.027.tar.gz SHA1 ;-) ...                                                                                             [ ok ]
 * Tk-804.027.tar.gz SHA256 ;-) ...                                                                                           [ ok ]
 * Tk-804.027.tar.gz size ;-) ...                                                                                             [ ok ]
 * checking ebuild checksums ;-) ...                                                                                          [ ok ]
 * checking auxfile checksums ;-) ...                                                                                         [ ok ]
 * checking miscfile checksums ;-) ...                                                                                        [ ok ]
 * checking Tk-804.027.tar.gz ;-) ...                                                                                         [ ok ]
 * This profile has not been tested thoroughly and is not considered to be
 * a supported server profile at this time.  For a supported server
 * profile, please check the Hardened project (http://hardened.gentoo.org).

 * This profile is merely a convenience for people who require a more
 * minimal profile, yet are unable to use hardened due to restrictions in
 * the software being used on the server. This profile should also be used
 * if you require GCC 4.1 or Glibc 2.4 support. If you don't know if this
 * applies to you, then it doesn't and you should probably be using
 * Hardened, instead.

>>> Unpacking source...
>>> Unpacking Tk-804.027.tar.gz to /var/tmp/portage/perl-tk-804.027/work
 * Applying xorg.patch ...                                                                                                    [ ok ]
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/perl-tk-804.027/work/Tk-804.027 ...
/var/tmp/portage/perl-tk-804.027/work/Tk-804.027
 * Using ExtUtils::MakeMaker
/usr/bin/perl5.8.8 is installed in /usr/lib/perl5/5.8.8/i686-linux okay
PPM for perl5.008008
Test Compiling config/signedchar.c
Test Compiling config/Ksprintf.c
Test Compiling config/tod.c
Test Compiling -DTIMEOFDAY_TZ config/tod.c
Test Compiling -DTIMEOFDAY_NO_TZ config/tod.c
Test Compiling -DTIMEOFDAY_DOTS config/tod.c
Problem gettimeofday()
Using -L/usr/X11R6/lib to find /usr/X11R6/lib/libX11.so.6.2.0
Cannot find X include files via /include
Using -I/usr/X11R6/include to find /usr/X11R6/include/X11/Xlib.h
XFT not requested
Writing Tk/Config.pm
Writing pTk/tkConfig.h
Checking if your kit is complete...
Looks good
Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /usr/local/sbin /sbin /usr/sbin /usr/lib/portage/bin /usr/local/bin /bin /usr/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.1 /opt/sun-jdk-1.4.2.12/bin /opt/sun-jdk-1.4.2.12/jre/bin /opt/sun-jdk-1.4.2.12/jre/javaws /usr/qt/3/bin /usr/bin)
Can't figure out your cwd! at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168.
 at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168
        ExtUtils::MakeMaker::eval_in_subdirs('PACK001=HASH(0x83506fc)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 618
        ExtUtils::MakeMaker::new('MM', 'PACK001=HASH(0x83506fc)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 58
        ExtUtils::MakeMaker::WriteMakefile('VERSION', 804.027, 'XS_VERSION', 804.027, 'DEFINE', '', 'INC', '-I/usr/X11R6/include', 'NAME', ...) called at /var/tmp/portage/perl-tk-804.027/work/Tk-804.027/Tk/MMutil.pm line 584
        Tk::MMutil::TkExtMakefile('VERSION', 804.027, 'EXE_FILES', 'ARRAY(0x855ba58)', 'NAME', 'Tk', 'DIR', 'ARRAY(0x855b0bc)', 'DISTNAME', ...) called at Makefile.PL line 67

!!! ERROR: dev-perl/perl-tk-804.027 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called perl-module_src_compile
  perl-module.eclass, line 136:   Called perl-module_src_prep
  perl-module.eclass, line 125:   Called die

!!! Unable to build! (are you using USE="build"?)
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 1


mren





          2006-10-20 10:51:25 UTC
        

Same here.

Portage 2.1.1 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 AMD Athlon(tm) XP 1900+
Gentoo Base System version 1.12.5
Last Sync: Fri, 20 Oct 2006 17:00:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -funroll-loops -pipe -fomit-frame-pointer -m3dnow -mmmx -msse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/fax /usr/share/X11/xkb /usr/share/config /var/spool/fax/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=athlon-xp -funroll-loops -pipe -fomit-frame-pointer -m3dnow -mmmx -msse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer parallel-fetch sandbox sfperms strict userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/erazor /usr/portage/local/layman/sunrise /usr/portage/local/layman/liquidx"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X a52 aac acpi acpi4linux alsa asf audiofile bash-completion berkdb bitmap-fonts bzip2 cairo cap caps cdparanoia cdr cli cracklib crypt cups curl dbus dga directfb divx4linux dlloader doc dri dvd dvdr dvdread ecc eds elibc_glibc emboss encode escreen expat faad fam fbcon ffmpeg firefox flac fortran fpx freetype fs gdbm gif gimp gimpprint glut gpm graphviz gs gtk hal imagemagick imap innodb input_devices_evdev input_devices_keyboard input_devices_mouse isdnlog jabber java javascript jbig jikes jpeg kde kernel_linux ldap libcaca libg++ linguas_de live lm_sensors logitech-mouse mad maildir matroska md5sum mikmod mjpeg mmx mmxext mng mozilla mozsvg mp3 mpeg mpi msn music mysql ncurses nls nocardbus nptl nptlonly ogg openexr opengl oscar oss pam parse-clocks pcre pda perl pic png ppds pppd python qt3 qt4 quicktime readline real reflection samba sdl session slp smime sndfile speedo spell spl sse ssl subversion svg svga symlink sysfs tcpd tetex theora threads tiff toolbar transcode truetype truetype-fonts type1 type1-fonts udev unicode usb userland_GNU userlocales vcd video_cards_fbdev video_cards_nv video_cards_nvidia video_cards_vesa videos vim-with-x vorbis win32codecs wmf xcomposite xface xfs xine xml xorg xosd xprint xscreensaver xv xvid xvmc yahoo zeroconf zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Michael Cummings (RETIRED)






          2006-10-20 18:36:48 UTC
        

have you tried with an actually supported profile?

 * This profile has not been tested thoroughly and is not considered to be
 * a supported server profile at this time.  For a supported server
 * profile, please check the Hardened project (http://hardened.gentoo.org).

 * This profile is merely a convenience for people who require a more
 * minimal profile, yet are unable to use hardened due to restrictions in
 * the software being used on the server. This profile should also be used
 * if you require GCC 4.1 or Glibc 2.4 support. If you don't know if this
 * applies to you, then it doesn't and you should probably be using
 * Hardened, instead.






Comment 3


Christopher G. Stach II





          2006-10-20 19:29:13 UTC
        

Maybe you should not treat everyone like complete retards.




Comment 4


mren





          2006-10-21 03:09:23 UTC
        

(In reply to comment #2)
> have you tried with an actually supported profile?
> 

Yes, I have
/etc/make.profile -> /usr/portage/profiles/default-linux/x86/2006.1/desktop





Comment 5


Michael Cummings (RETIRED)






          2006-10-23 13:03:23 UTC
        

(In reply to comment #3)
> Maybe you should not treat everyone like complete retards.
> 

In the output posted it clearly stated that the profile wasn't a supported one. Hence the question.




Comment 6


Michael Cummings (RETIRED)






          2006-10-23 13:07:09 UTC
        

Markus,

Are you getting the exact same output? I see "Cannot find X include files via /include" which indicates that the symlink from /usr/X11* isn't pointing back to /usr. Please do a ls -al /usr/X11* and let me knwo if they are *not* symlinks back to /usr (on my boxes, X11 points to X11R6 which in turn points to ../usr). If they are not, or don't exist, please create the symlinks (they should have been already during an X upgrade to modular X, but I've seen a few cases where they were missed). Thanks!




Comment 7


mren





          2006-10-23 16:49:24 UTC
        

Ok, here's the output I got:

>>> Emerging (1 of 1) dev-perl/perl-tk-804.027 to /
 * Tk-804.027.tar.gz MD5 ;-) ...                                                                                                                     [ ok ]
 * Tk-804.027.tar.gz RMD160 ;-) ...                                                                                                                  [ ok ]
 * Tk-804.027.tar.gz SHA1 ;-) ...                                                                                                                    [ ok ]
 * Tk-804.027.tar.gz SHA256 ;-) ...                                                                                                                  [ ok ]
 * Tk-804.027.tar.gz size ;-) ...                                                                                                                    [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                 [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                               [ ok ]
 * checking Tk-804.027.tar.gz ;-) ...                                                                                                                [ ok ]
>>> Unpacking source...
>>> Unpacking Tk-804.027.tar.gz to /var/tmp/portage/perl-tk-804.027/work
 * Applying xorg.patch ...                                                                                                                           [ ok ]
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/perl-tk-804.027/work/Tk-804.027 ...
/var/tmp/portage/perl-tk-804.027/work/Tk-804.027
 * Using ExtUtils::MakeMaker
PPM for perl5.008008
Test Compiling config/signedchar.c
/usr/bin/perl5.8.8 is installed in /usr/lib/perl5/5.8.8/i686-linux okay
Test Compiling config/Ksprintf.c
Test Compiling config/tod.c
Test Compiling -DTIMEOFDAY_TZ config/tod.c
Test Compiling -DTIMEOFDAY_NO_TZ config/tod.c
Test Compiling -DTIMEOFDAY_DOTS config/tod.c
Problem gettimeofday()
Cannot find X include files via /include
XFT not requested
Writing Tk/Config.pm
Writing pTk/tkConfig.h
Using -L/usr/X11R6/lib to find /usr/X11R6/lib/libX11.so.6.2.0
Using -I/usr/X11R6/include to find /usr/X11R6/include/X11/Xlib.h
Checking if your kit is complete...
Looks good
Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /usr/local/sbin /sbin /usr/sbin /usr/lib/portage/bin /usr/local/bin /bin /usr/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.1 /opt/blackdown-jdk-1.4.2.03/bin /opt/blackdown-jdk-1.4.2.03/jre/bin /usr/kde/3.5/sbin /usr/kde/3.5/bin /usr/qt/3/bin /usr/bin)
Can't figure out your cwd! at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168.
 at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168
        ExtUtils::MakeMaker::eval_in_subdirs('PACK001=HASH(0x8345524)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 618
        ExtUtils::MakeMaker::new('MM', 'PACK001=HASH(0x8345524)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 58
        ExtUtils::MakeMaker::WriteMakefile('VERSION', 804.027, 'XS_VERSION', 804.027, 'DEFINE', '', 'INC', '-I/usr/X11R6/include', 'NAME', ...) called at /var/tmp/portage/perl-tk-804.027/work/Tk-804.027/Tk/MMutil.pm line 584
        Tk::MMutil::TkExtMakefile('VERSION', 804.027, 'EXE_FILES', 'ARRAY(0x854a678)', 'NAME', 'Tk', 'DIR', 'ARRAY(0x8549c04)', 'DISTNAME', ...) called at Makefile.PL line 67

!!! ERROR: dev-perl/perl-tk-804.027 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called perl-module_src_compile
  perl-module.eclass, line 136:   Called perl-module_src_prep
  perl-module.eclass, line 125:   Called die

!!! Unable to build! (are you using USE="build"?)
!!! If you need support, post the topmost build error, and the call stack if relevant.



% ls -al /usr/X11*
lrwxrwxrwx 1 root root 5 2006-10-24 01:45 /usr/X11 -> X11R6
lrwxrwxrwx 1 root root 6 2006-10-15 03:55 /usr/X11R6 -> ../usr





Comment 8


Michael Cummings (RETIRED)






          2006-10-24 15:19:02 UTC
        

I admit I'm stumped (anyone else in perl want to take a stab?). I see the problem now (the block about not being to do a cwd, or find perl), just not sure of the cause. I assume you've checked the partition that /var/tmp is on, etc. I've tried running this with similar FEATURES (userpriv has been a culprit in the past) but I still can't dup this.




Comment 9


Chris White (RETIRED)






          2006-10-24 15:33:07 UTC
        

can you emerge strace, run:

`strace -o ~/strace.log emerge perl-tk`

and upload the strace.log as an attachment?




Comment 10


Chris White (RETIRED)






          2006-10-24 15:54:22 UTC
        

"Maybe you should not treat everyone like complete retards."

Wait wha?  Who taught you manners son, I'm gonna have to come over there and serve up the white wall!  Who comes in asking for help and is like "don't treat everyone like complete retards".  Furthermore, what do you have against the mentally impared, that's totally not cool!  So remember kids, don't assume, it makes an ass out of you and you.

C Dub was here 'n stuff




Comment 11


Christopher G. Stach II





          2006-10-24 16:00:15 UTC
        

I didn't ask for help.  It's a bug report. :)




Comment 12


mren





          2006-10-24 17:19:38 UTC
        

Created attachment 100432 [details]
strace.log.bz2

The requested strace log, bzip2-packed.




Comment 13


Chris White (RETIRED)






          2006-10-24 18:37:51 UTC
        

Hmm, ok, theory 1, tee is h0rk3d:

echo "test" | tee file.log

tell me if that works oko




Comment 14


Chris White (RETIRED)






          2006-10-24 18:40:01 UTC
        

Oh, and theory 2, sandbox is crying, try it with FEATURES="-sandbox", then try it with FEATURES="-usersandbox"




Comment 15


mren





          2006-10-25 07:16:27 UTC
        

(In reply to comment #13)
> Hmm, ok, theory 1, tee is h0rk3d:
> 
> echo "test" | tee file.log

Works as expected.





Comment 16


mren





          2006-10-25 07:20:57 UTC
        

(In reply to comment #14)
> Oh, and theory 2, sandbox is crying, try it with FEATURES="-sandbox", then try
> it with FEATURES="-usersandbox"
> 

Tried it, but no result -- still get the error.




Comment 17


Chris White (RETIRED)






          2006-10-25 07:27:19 UTC
        

Son of a motha!

Ok, what's the output of mount out of curiosity?




Comment 18


mren





          2006-10-25 07:36:25 UTC
        

% mount
/dev/hda2 on / type ext3 (rw,noatime)
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw,noexec,nosuid,nodev)
udev on /dev type tmpfs (rw,nosuid)
devpts on /dev/pts type devpts (rw,noexec,nosuid)
cachedir on /lib/splash/cache type tmpfs (rw)
/dev/hda3 on /usr/portage type xfs (rw,noatime)
/dev/hda5 on /usr/portage/distfiles type ext3 (rw,noatime)
none on /dev/shm type tmpfs (rw,noexec,nosuid,nodev)
usbfs on /proc/bus/usb type usbfs (rw,noexec,nosuid,devmode=0664,devgid=85)
binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,noexec,nosuid,nodev)
nfsd on /proc/fs/nfs type nfsd (rw)
rpc_pipefs on /var/lib/nfs/rpc_pipefs type rpc_pipefs (rw)
server:/home on /home type nfs (rw,nfsvers=3,addr=192.168.1.3)
server:/netz/win on /_win type nfs (rw,noatime,nfsvers=3,addr=192.168.1.3)


BUT:

    Now I unpacked the source tarball into /tmp and run `perl Makefile.PL` and get the same error:
    /usr/bin/perl5.8.8 is installed in /usr/lib/perl5/5.8.8/i686-linux okay
    PPM for perl5.008008
    Test Compiling config/signedchar.c
    Test Compiling config/Ksprintf.c
    Test Compiling config/tod.c
    Test Compiling -DTIMEOFDAY_TZ config/tod.c
    Test Compiling -DTIMEOFDAY_NO_TZ config/tod.c
    Test Compiling -DTIMEOFDAY_DOTS config/tod.c
    Problem gettimeofday()
    Using -L/usr/X11R6/lib to find /usr/X11R6/lib/libX11.so.6.2.0
    Using -I/usr/X11R6/include to find /usr/X11R6/include/X11/Xlib.h
    XFT not requested
    Writing Tk/Config.pm
    Writing pTk/tkConfig.h
    Checking if your kit is complete...
    Looks good
    Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /home/mr/bin /bin /usr/bin /usr/local/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.1 /opt/blackdown-jdk-1.4.2.03/bin /opt/blackdown-jdk-1.4.2.03/jre/bin /usr/kde/3.5/bin /usr/qt/3/bin /var/spool/fax/bin /usr/bin)
    Can't figure out your cwd! at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168.
     at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 168
            ExtUtils::MakeMaker::eval_in_subdirs('PACK001=HASH(0x82b2e3c)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 618
            ExtUtils::MakeMaker::new('MM', 'PACK001=HASH(0x82b2e3c)') called at /usr/lib/perl5/5.8.8/ExtUtils/MakeMaker.pm line 58
            ExtUtils::MakeMaker::WriteMakefile('VERSION', 804.027, 'XS_VERSION', 804.027, 'DEFINE', '', 'INC', '-I/usr/X11R6/include', 'NAME', ...) called at /tmp/Tk-804.027/Tk/MMutil.pm line 584
            Tk::MMutil::TkExtMakefile('VERSION', 804.027, 'EXE_FILES', 'ARRAY(0x84c0818)', 'NAME', 'Tk', 'DIR', 'ARRAY(0x84baf70)', 'DISTNAME', ...) called at Makefile.PL line 67

    So, I think this is a problem with perl (itself or some of its components), but not with emerge, ebuild, sandbox, whatelse.






Comment 19


Chris White (RETIRED)






          2006-10-25 08:31:26 UTC
        

Hmm, googling around a bit, what's the output of

ls -la /usr/bin/perl5.8.8
ls -la /usr/lib/perl5/5.8.8/i686-linux

?




Comment 20


mren





          2006-10-25 09:12:13 UTC
        

(In reply to comment #19)
> Hmm, googling around a bit, what's the output of
> 
> ls -la /usr/bin/perl5.8.8

-rwxr-xr-x 1 root root 1210292 2006-10-25 16:42 /usr/bin/perl5.8.8

> ls -la /usr/lib/perl5/5.8.8/i686-linux

total 896
drwxr-xr-x 21 root root   4096 2006-05-24 20:40 .
drwxr-xr-x 43 root root   4096 2006-05-24 20:00 ..
-r--r--r--  1 root root   1435 2006-10-25 16:42 attrs.pm
drwxr-xr-x 35 root root   4096 2006-05-24 20:00 auto
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 B
-r--r--r--  1 root root  22770 2006-10-25 16:42 B.pm
-r--r--r--  1 root root    687 2006-10-25 16:42 ByteLoader.pm
-r--r--r--  1 root root  31952 2006-10-25 16:42 Config_heavy.pl
-rw-r--r--  1 root root   2709 2006-10-25 16:42 Config.pm
-r--r--r--  1 root root 212630 2006-10-25 16:42 Config.pod
drwxr-xr-x  2 root root   4096 2006-10-25 16:42 CORE
-r--r--r--  1 root root  17821 2006-10-25 16:42 Cwd.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Data
-r--r--r--  1 root root  63389 2006-10-25 16:42 DB_File.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Devel
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Digest
-r--r--r--  1 root root  28125 2006-10-25 16:42 DynaLoader.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Encode
-r--r--r--  1 root root  25497 2006-10-25 16:42 Encode.pm
-r--r--r--  1 root root  18653 2006-10-25 16:42 encoding.pm
-r--r--r--  1 root root   7542 2006-10-25 16:42 Errno.pm
-r--r--r--  1 root root   5346 2006-10-25 16:42 Fcntl.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 File
drwxr-xr-x  3 root root   4096 2006-05-24 20:00 Filter
-r--r--r--  1 root root   1752 2006-10-25 16:42 GDBM_File.pm
-rw-r--r--  1 root root   1751 2006-10-25 16:42 _h2ph_pre.ph
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 I18N
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 IO
-r--r--r--  1 root root   1401 2006-10-25 16:42 IO.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 IPC
-r--r--r--  1 root root   5679 2006-10-25 16:42 lib.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 MIME
-r--r--r--  1 root root   2519 2006-10-25 16:42 NDBM_File.pm
-r--r--r--  1 root root  15234 2006-10-25 16:42 Opcode.pm
-r--r--r--  1 root root   4241 2006-10-25 16:42 O.pm
-r--r--r--  1 root root    994 2006-10-25 16:42 ops.pm
-rw-r--r--  1 root root 102557 2006-10-25 16:42 .packlist
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 PerlIO
-rw-r--r--  1 root root  11934 2006-06-13 03:16 perllocal.pod
-r--r--r--  1 root root  18905 2006-10-25 16:42 POSIX.pm
-r--r--r--  1 root root  55394 2006-10-25 16:42 POSIX.pod
-r--r--r--  1 root root   4018 2006-10-25 16:42 re.pm
-r--r--r--  1 root root  17276 2006-10-25 16:42 Safe.pm
-r--r--r--  1 root root   2515 2006-10-25 16:42 SDBM_File.pm
-r--r--r--  1 root root   9801 2006-10-25 16:42 Socket.pm
-r--r--r--  1 root root  36444 2006-10-25 16:42 Storable.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Sys
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 threads
-r--r--r--  1 root root   8536 2006-10-25 16:42 threads.pm
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Time
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 Unicode
drwxr-xr-x  2 root root   4096 2006-05-24 20:00 XS
-r--r--r--  1 root root  10461 2006-10-25 16:42 XSLoader.pm




Comment 21


Michael Cummings (RETIRED)






          2006-11-19 11:40:22 UTC
        

What was your primary shell? any aliases for pwd, etc?




Comment 22


mren





          2006-11-19 13:12:19 UTC
        

GNU bash, version 3.1.17(1)-release (i686-pc-linux-gnu)

And no, I don't have any (known) alias for pwd.




Comment 23


Nico Baggus





          2006-11-29 14:23:33 UTC
        

These are my findings...

I have 4 systems, on two it does build out of the box
(they have ithreads & multi disabled)  and have an i686-linux directory
 (profile 2006.0 & no-nptl/2.4)  the other two fail
(they have ithreads, multi enabled)  and have an i686-linux-thread-multi
directory (profile 2006.1 & 2006.1).

When unpacking & running a plain "perl Makefile.pl" in the Tk-804.027
directory just builds it. Or the "perl Makefile.pl.. " without the $myconf 
from the perl-modules eclass template it can find the X libraries.

When building this same thing using 

ebuild /usr/portage/dev-perl/perl-tk/perl-tk-804.027.ebuild unpack
ebuild /usr/portage/dev-perl/perl-tk/perl-tk-804.027.ebuild compile
ebuild /usr/portage/dev-perl/perl-tk/perl-tk-804.027.ebuild install
ebuild /usr/portage/dev-perl/perl-tk/perl-tk-804.027.ebuild qmerge

It does install...., appearantly the is a problem in portage
somehow mangling the path? library path? path to i686-linux doesn't seem
to be hardcoded. Emerge's behaviour indeed doesn't change when sandboxing options are negated in make.conf.

The failure occurred because I tried to rebuild perl-tk. It was installed on the four systems before.




Comment 24


Nico Baggus





          2006-11-29 14:26:20 UTC
        

oops.., the failing boxes are of profiles 2006.1 & 2006.0.




Comment 25


mren





          2007-03-10 18:39:21 UTC
        

`FEATURES=-userpriv emerge -av perl-tk` solved the problem for me.




Comment 26


Michael Cummings (RETIRED)






          2007-04-15 15:12:15 UTC
        

(In reply to comment #25)
> `FEATURES=-userpriv emerge -av perl-tk` solved the problem for me.
> 

I still can't dup (and i've tried with userpriv on and off)




Comment 27


Christopher G. Stach II





          2007-04-15 15:14:28 UTC
        

I can confirm that -userpriv works.




Comment 28


Bill Prendergast





          2007-07-08 23:05:30 UTC
        

getting very similar bug in these packages:
dev-perl/libwww-perl
dev-perl/MailTools
mail-filter/spamassassin

tested with
FEATURES="-ccache distcc sandbox userfetch userpriv usersandbox"
and
FEATURES="-ccache -distcc -sandbox -userfetch -userpriv -usersandbox"
and
FEATURES="-ccache distcc sandbox userfetch -userpriv usersandbox"

ebuild <full_path_of_ebuild> merge
does work for the above packages and is the workaround I have been using since circa spamassassin-3.1.3 (stable keyword for x86)

Portage 2.1.2.9 (default-linux/x86/2006.1, gcc-4.1.2, glibc-2.5-r4, 2.6.20-gentoo-r8 i686)
=================================================================
System uname: 2.6.20-gentoo-r8 i686 AMD Athlon(tm)
Gentoo Base System release 1.12.9
Timestamp of tree: Sun, 08 Jul 2007 11:50:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [disabled]
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=athlon-xp -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -mtune=athlon-xp -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y"
FEATURES="distcc distlocks metadata-transfer sandbox sfperms strict userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_AU.utf8"
LC_ALL="en_AU.utf8"
LINGUAS="en_AU en_GB en"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.au.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext a52 aac aalib acl acpi aim alsa amr apache2 audiofile avahi bash-completion berkdb bitmap-fonts bzip2 calendar caps cddb cdparanoia cdr cli cracklib crypt cups curl dbus dedicated dts dv dvd dvdr encode exif fam fbcon ffmpeg flac foomaticdb fortran ftp gcj gd gdbm gif gmp gphoto2 gpm hal iconv icq idn ieee1394 imagemagick imap imlib innodb ipv6 isdnlog jabber jack java jpeg jpeg2k kerberos ladcca ladspa ldap libcaca libg++ libsamplerate lm_sensors lzo mad maildir mailwrapper matroska mcal mhash midi mikmod mime mmap mmx mmxext mng mp3 mpeg msession msn mudflap mysql ncurses nls nptl nptlonly nvidia odbc offensive ogg openmp pam pcap pcntl pcre pda pdf perl php png portaudio posix ppds pppd pulseaudio python readline reflection samba sasl scanner sdl session shorten slang smime sndfile snmp socks5 speex spell spl sqlite sqlite3 sse ssl svg svga sysvipc tcpd theora threads tiff transcode truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vcd vorbis win32codecs wmf x264 x86 xine xml xml2 xmlrpc xorg xsl xvid yahoo zlib" ALSA_CARDS="virmidi via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse elographics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_AU en_GB en" USERLAND="GNU" VIDEO_CARDS="dummy fbdev vesa vga nv nvidia"
Unset:  CTARGET, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

>>> Emerging (1 of 1) dev-perl/libwww-perl-5.805 to /
===trimmed===
>>> Compiling source in /var/tmp/portage/dev-perl/libwww-perl-5.805/work/libwww-perl-5.805
 * Using ExtUtils::MakeMaker
===trimmed===
Checking if your kit is complete...
Looks good
Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /usr/lib/distcc/bin /usr/local/sbin /sbin /usr/sbin /usr/lib/portage/bin /usr/local/bin /bin /usr/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.2 /opt/sun-jdk-1.4.2.15/bin /opt/sun-jdk-1.4.2.15/jre/bin /opt/sun-jdk-1.4.2.15/jre/javaws /usr/bin)
Writing Makefile for LWP
/bin/sh: /0: No such file or directory
make: *** [blib/lib/.exists] Error 127

!!! ERROR: dev-perl/libwww-perl-5.805 failed.

>>> Emerging (1 of 1) dev-perl/MailTools-1.74 to /
===trimmed===
>>> Compiling source in /var/tmp/portage/dev-perl/MailTools-1.74/work/MailTools-1.74 ...
 * Using ExtUtils::MakeMaker
Checking for Net::SMTP...ok
Checking for Net::Domain...ok
Checking for IO::Handle...ok
Checking if your kit is complete...
Looks good
Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /usr/lib/distcc/bin /usr/local/sbin /sbin /usr/sbin /usr/lib/portage/bin /usr/local/bin /bin /usr/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.2 /opt/sun-jdk-1.4.2.15/bin /opt/sun-jdk-1.4.2.15/jre/bin /opt/sun-jdk-1.4.2.15/jre/javaws /usr/bin)
Writing Makefile for Mail
/bin/sh: /0: No such file or directory
make: *** [blib/lib/.exists] Error 127

!!! ERROR: dev-perl/MailTools-1.74 failed.

>>> Emerging (1 of 1) mail-filter/spamassassin-3.2.1-r1 to /
===trimmed===
>>> Compiling source in /var/tmp/portage/mail-filter/spamassassin-3.2.1-r1/work/Mail-SpamAssassin-3.2.1 ...
 * Using ExtUtils::MakeMaker
===trimmed===
Checking if your kit is complete...
Looks good
Unable to find a perl 5 (by these names: /usr/bin/perl5.8.8 perl perl5 perl5.8.8 miniperl, in these dirs: /usr/lib/distcc/bin /usr/local/sbin /sbin /usr/sbin /usr/lib/portage/bin /usr/local/bin /bin /usr/bin /opt/bin /usr/i686-pc-linux-gnu/gcc-bin/4.1.2 /opt/sun-jdk-1.4.2.15/bin /opt/sun-jdk-1.4.2.15/jre/bin /opt/sun-jdk-1.4.2.15/jre/javaws /usr/bin)
Writing Makefile for Mail::SpamAssassin
Makefile written by ExtUtils::MakeMaker 6.30
/usr/bin/perl spamc/configure.pl --prefix="/usr" --sysconfdir="/etc/mail/spamassassin" --datadir="/usr/share/spamassassin" --enable-ssl="yes"
cd spamc
/usr/bin/perl version.h.pl
version.h.pl: creating version.h
./configure --prefix=/usr --sysconfdir=/etc/mail/spamassassin --datadir=/usr/share/spamassassin --enable-ssl=yes
checking for gcc... gcc
===trimmed===
checking for EAI_NODATA... (cached) yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating spamc.h
config.status: creating config.h
/bin/sh: /0: No such file or directory
make: *** [blib/lib/Mail/.exists] Error 127

!!! ERROR: mail-filter/spamassassin-3.2.1-r1 failed.




Comment 29


Jakub Moc (RETIRED)






          2008-02-27 18:03:29 UTC
        

(In reply to comment #26)
> (In reply to comment #25)
> > `FEATURES=-userpriv emerge -av perl-tk` solved the problem for me.
> I still can't dup (and i've tried with userpriv on and off)

Closing; if you still have issues with this, file a new bug, this one has become a plain mess. 











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

