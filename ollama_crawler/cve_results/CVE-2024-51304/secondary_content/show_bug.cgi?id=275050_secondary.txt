Title: 275050 – Using newer than x11-libs/cairo-1.6.4-r1 causes text to have a cyan background
URL: https://bugs.gentoo.org/show_bug.cgi?id=275050

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 275050
Using newer than x11-libs/cairo-1.6.4-r1 causes text to have a cyan background
Last modified: 2009-08-12 13:35:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 275050 
      - Using newer than x11-libs/cairo-1.6.4-r1 causes text to have a cyan background


Summary:
Using newer than x11-libs/cairo-1.6.4-r1 causes text to have a cyan background
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-06-22 13:21 UTC by James Gatt





      Modified:
    
2009-08-12 13:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Example of the problem

              (gkrellm.png,18.79 KB,
                image/png)

            
2009-06-22 13:29 UTC,

            James Gatt




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


James Gatt





          2009-06-22 13:21:54 UTC
        

Upgrading to anything above x11-libs/cairo-1.6.4-r1 causes all text in most applications / dialog boxes etc. to have cyan background instead of the correct colour (usually grey or white etc.).

I think this is specific to applications that use GTK+. I first noticed the problem after upgrading many packages, and it took a long time to find out which one triggers the problem. Of course the problem might not be cairo at all, but certainly changing the version of cairo seems to be what makes the difference.

Originally I thought this might be an amd64 problem, but I have since repeated it on a completely different x86 (pentium4) box.


Reproducible: Always

Steps to Reproduce:
1. emerge '>x11-libs/cairo-1.6.4-r1'
2. gkrellm (or any other application - gimp, firefox etc. that uses GTK).

Actual Results:  
Most text appears with a cyan background, rather than the correct colour.

Expected Results:  
The background around the text should be the same colour as the rest of the background.

I cannot believe this is a common problem or it would already have been fixed. However, I have this on two completely different machines that are set up to do completely different tasks, with different hardware (one amd64, other x86), different USE flags and different applications etc. installed.

It does not appear to be anything specific to the user account (I have tried creating a new user and running as this, and the problem prevails).


Portage 2.1.6.11 (default/linux/x86/2008.0, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.24-gentoo-r3 i686)
=================================================================
System uname: Linux-2.6.24-gentoo-r3-i686-Intel-R-_Pentium-R-_4_CPU_3.00GHz-with-glibc2.0
Timestamp of tree: Mon, 01 Jun 2009 13:30:17 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.7
dev-lang/python:     2.5.4-r2
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.63
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=pentium4 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl apache2 bash-completion berkdb bzip2 cli cracklib crypt dbus emacs fortran gdbm gpm gtk gtk2 hddtemp iconv isdnlog kde ldap lm_sensors midi mmx mudflap ncurses nptl nptlonly openmp pam pcre perl postgres pppd python qt readline reflection rrdcgi rrdtool samba sasl session shared smbkrb5passwd sockets spl ssl svg sysfs tcltk tcpd threads truetype unicode urandom x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="fbdev vesa vga"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


James Gatt





          2009-06-22 13:29:06 UTC
        

Created attachment 195445 [details]
Example of the problem

This is a fairly obvious example of what is happening with the more recent cairo installed.




Comment 2


Tomáš Chvátal (RETIRED)






          2009-06-24 13:22:34 UTC
        

(In reply to comment #1)
> Created an attachment (id=195445) [edit]
> Example of the problem
> 
> This is a fairly obvious example of what is happening with the more recent
> cairo installed.
> 

Ow come on, enjoy the GLOW ;]
On other hand it works correctly for me :]




Comment 3


James Gatt





          2009-06-24 15:34:14 UTC
        

I appreciate it must work correctly for virtually everyone - I haven't been able to find anything written about this issue anywhere. However, I do have two completely different machines that reveal the same issue.

Here is the info from the other machine:

Portage 2.1.6.13 (default/linux/amd64/2008.0/server, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.27-gentoo-r8 x86_64)
=================================================================
System uname: Linux-2.6.27-gentoo-r8-x86_64-AMD_Athlon-tm-_64_Processor_3500+-with-glibc2.2.5
Timestamp of tree: Wed, 24 Jun 2009 00:00:20 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.7
dev-lang/python:     2.5.4-r2
dev-util/cmake:      2.6.4
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/bind /var/lib/hsqldb /var/qmail/alias /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB en"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X Xaw3d a52 aac acpi additions alsa amarok amazon amd64 amr amrnb amrwb apache2 apm audiofile bash-completion berkdb bluetooth browserplugin bzip2 cairo cdda cddb cdparanoia cdr cgi chm cli cracklib crypt cscope css ctype dba dbus directfb divx4linux djvu dri dts dv dvb dvd dvdr dvdread eds emul-linux-x86 encode exif fam fbcon ffmpeg firefox flac fortran ftp fusion gd gdbm gif gnome gnutls gpm gs gstreamer gtk hal hddtemp iconv id3 id3tag imagemagick imap innodb isdnlog java javascript jbig jikes joystick jpeg jpeg2k junit kde lame ldap lesstif lirc live lm_sensors lzo mad maildir matroska matrox midi mikmod mime mjpeg mmap mmx mng mp3 mp4 mpeg mpeg2 msn mudflap multilib musepack musicbrainz mythtv ncurses nemesi network nfs nls nocd nptl nptlonly ogg oggvorbis opengl openmp oss overlays pam pcre pda pdf perl php png pnm postgres pppd python qt3 qt3support quicktime rar readline realmedia reflection replaygain rle rrdcgi rrdtool samba sasl sdl session sid smbkrb5passwd snmp spell spl sse sse2 ssl stream svg sysfs tcpd tga theora threads tiff truetype tv_check tv_combiner tv_pick_cgi tvtime uk_bleb uk_rt unicode urandom usb vcd videos vlm vnc vorbis wma wmf wxwindows xanim xine xml xorg xpm xspf xv xvid xvmc yv12 zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB en" LIRC_DEVICES="serial" USERLAND="GNU" VIDEO_CARDS="matrox mga vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

If there is anything daft I am doing on both machines, or anything else I can test and report, I would be glad to know.





Comment 4


James Gatt





          2009-08-12 13:35:27 UTC
        

On further investigation this appears to be a problem only with older versions of X-Win32. Unfortunately the new versions (which don't have the problem) are very much slower.

I can't say this isn't a problem with the X server, despite it only happening with recent cairo versions, so I am setting the status to WORKSFORME as it does appear to work for everyone else and I can use a different X server. ;)










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

