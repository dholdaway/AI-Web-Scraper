Title: 312985 – dev-ruby/rubygems-1.3.6 fails to install with RUBY_TARGETS=jruby
URL: https://bugs.gentoo.org/show_bug.cgi?id=312985

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 312985
dev-ruby/rubygems-1.3.6 fails to install with RUBY_TARGETS=jruby
Last modified: 2010-04-06 07:31:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 312985 
      - dev-ruby/rubygems-1.3.6 fails to install with RUBY_TARGETS=jruby


Summary:
dev-ruby/rubygems-1.3.6 fails to install with RUBY_TARGETS=jruby
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Ruby Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-04-03 15:08 UTC by Martin von Gagern





      Modified:
    
2010-04-06 07:31 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



caster









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (dev-ruby:rubygems-1.3.6:20100403-144751.log,5.92 KB,
                text/plain)

            
2010-04-03 15:08 UTC,

            Martin von Gagern




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2010-04-03 15:08:03 UTC
        

I've got RUBY_TARGETS="ruby18 jruby" in my /etc/make.conf. With that setting, dev-ruby/rubygems-1.3.6 fails to install for jruby:
!!! ERROR: Package backport-util-concurrent was not found!




Comment 1


Martin von Gagern





          2010-04-03 15:08:49 UTC
        

Created attachment 226407 [details]
build log




Comment 2


Alex Legler (RETIRED)








          2010-04-04 12:50:44 UTC
        

Do earlier versions work?




Comment 3


Martin von Gagern





          2010-04-04 13:44:54 UTC
        

(In reply to comment #2)
> Do earlier versions work?

I've got 1.3.5-r3 installed here, but re-emerging it fails with the same error.
Had dev-java/jruby-1.4.0-r5 installed when last I merged jruby, and it's still that same version.

Maybe dev-java/backport-util-concurrent is related. Had that installed in the past, but don't have it now. Maybe it should be a dep.




Comment 4


Alex Legler (RETIRED)








          2010-04-04 14:15:41 UTC
        

2010/02/09 17:10:23 caster Exp $

  09 Feb 2010; Vlastimil Babka <caster@gentoo.org> jruby-1.3.1-r1.ebuild,
  jruby-1.4.0-r4.ebuild, jruby-1.4.0-r5.ebuild:
  Remove backport-util-concurrent dependency as there seem to be no usage of
  it in jruby source anymore.

Caster: maybe we do need it?




Comment 5


Diego Elio Pettenò (RETIRED)






          2010-04-04 14:21:29 UTC
        

Or maybe jruby should have been revbumped when removing the dep: the list of jar files to load is hardcoded into the installed package, based on the *DEPEND variables; so if you retrospectively change an ebuild, --depclean will remove something that is still referenced during install.





Comment 6


Martin von Gagern





          2010-04-04 17:56:42 UTC
        

Both solutions, either emerging backport-util-concurrent or remerging jruby, do work for me.




Comment 7


Vlastimil Babka (Caster) (RETIRED)






          2010-04-06 07:31:03 UTC
        

(In reply to comment #5)
> Or maybe jruby should have been revbumped when removing the dep: the list of
> jar files to load is hardcoded into the installed package, based on the *DEPEND
> variables; so if you retrospectively change an ebuild, --depclean will remove
> something that is still referenced during install.
 
That's right and I know it. I'm sorry, no idea why I didn't revbump (probably was half-asleep).
At least there was a revbump yesterday so updating world should fix itself.
Also running java-check-environment should detect the problem and tell you to try remerge jruby. Installing backport-util-concurrent back is not recommended workaround.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

