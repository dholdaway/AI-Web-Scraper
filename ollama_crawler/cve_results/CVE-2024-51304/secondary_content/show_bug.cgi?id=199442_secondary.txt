Title: 199442 – dev-java/openjms-0.7.6.1-r3 fails due to castor deps
URL: https://bugs.gentoo.org/show_bug.cgi?id=199442

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 199442
dev-java/openjms-0.7.6.1-r3 fails due to castor deps
Last modified: 2008-03-02 18:05:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 199442 
      - dev-java/openjms-0.7.6.1-r3 fails due to castor deps


Summary:
dev-java/openjms-0.7.6.1-r3 fails due to castor deps
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-11-17 14:59 UTC by Patrizio Bassi





      Modified:
    
2008-03-02 18:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




debug info requested

              (debug,91.74 KB,
                text/plain)

            
2007-11-18 19:10 UTC,

            Patrizio Bassi




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrizio Bassi





          2007-11-17 14:59:14 UTC
        

>>> Emerging (20 of 23) dev-java/openjms-0.7.6.1-r3 to /
 * openjms-0.7.6.1-scripts.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                              [ ok ]
 * openjms-0.7.6.1-src.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                                  [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                           [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                          [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                         [ ok ]
 * checking openjms-0.7.6.1-src.tar.gz ;-) ...                                                                                                                 [ ok ]
 * checking openjms-0.7.6.1-scripts.tar.gz ;-) ...                                                                                                             [ ok ]
 * Using: blackdown-jdk-1.4.2
>>> Unpacking source...
>>> Unpacking openjms-0.7.6.1-src.tar.gz to /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work
tar: A lone zero block at 28799
>>> Unpacking openjms-0.7.6.1-scripts.tar.gz to /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work
 * Applying buildfile.patch ...                                                                                                                                [ ok ]
 * Applying source.patch ...                                                                                                                                   [ ok ]
removed `ant-1.5.3-1.jar'
removed `ant-optional-1.5.3-1.jar'
removed `antlr-2.7.2.jar'
removed `castor-0.9.5.jar'
removed `commons-collections-2.1.jar'
removed `commons-dbcp-1.1.jar'
removed `commons-logging-1.0.3.jar'
removed `commons-pool-1.1.jar'
removed `concurrent-1.3.2.jar'
removed `exolabcore-0.3.7.jar'
removed `hsqldb-1.6.1.jar'
removed `jdbc-2.0.jar'
removed `jdbm.jar'
removed `jms-1.0.2a.jar'
removed `jndi-1.2.1.jar'
removed `jta-1.0.1.jar'
removed `junit-3.7.jar'
removed `log4j-1.2.7.jar'
removed `oro-2.0.7.jar'
removed `servletapi-2.3.jar'
removed `xerces-2.3.0.jar'
removed `xml-apis-1.0.b2.jar'
>>> Source unpacked.
>>> Compiling source in /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1 ...
Rewriting source attributes
Using Sax to rewrite the build.xml files
Rewriting ./src/xdocs/devguide/build.xml
Rewriting ./build.xml
Rewriting target attributes
Using Sax to rewrite the build.xml files
Rewriting ./src/xdocs/devguide/build.xml
Rewriting ./build.xml
Rewriting nowarn attributes
Using Sax to rewrite the build.xml files
Rewriting ./src/xdocs/devguide/build.xml
Rewriting ./build.xml
 * Using following ANT_TASKS: ant-antlr
Buildfile: build.xml

prepare:
    [mkdir] Created dir: /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build
    [mkdir] Created dir: /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build/generated-src
    [mkdir] Created dir: /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build/generated-src/org/exolab/jms/selector/parser
    [mkdir] Created dir: /mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build/classes

schemas:

prepare:

castor.uptodate:

castor:
     [java] Exception in thread "main" java.lang.NoClassDefFoundError: org/exolab/castor/core/exceptions/CastorException
     [java]     at java.lang.ClassLoader.defineClass0(Native Method)
     [java]     at java.lang.ClassLoader.defineClass(ClassLoader.java:539)
     [java]     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)
     [java]     at java.net.URLClassLoader.defineClass(URLClassLoader.java:251)
     [java]     at java.net.URLClassLoader.access$100(URLClassLoader.java:55)
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:194)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:187)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:289)
     [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:235)
     [java]     at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)

BUILD FAILED
/mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build.xml:185: The following error occurred while executing this line:
/mnt/Dati/Gentoo/tmp/portage/dev-java/openjms-0.7.6.1-r3/work/openjms-0.7.6.1/build.xml:210: Java returned: 1

Total time: 1 second




Comment 1


Petteri Räty (RETIRED)






          2007-11-17 17:00:23 UTC
        

Add emerge --info and reopen.




Comment 2


Patrizio Bassi





          2007-11-18 10:50:31 UTC
        

sorry generally for java issues i don't add it.

here it is

*** Deprecated use of action 'info', use '--info' instead
Portage 2.1.3.19 (default-linux/amd64/2007.0, gcc-4.2.2, glibc-2.7-r0, 2.6.23.1 x86_64)
=================================================================
System uname: 2.6.23.1 x86_64 Intel(R) Core(TM)2 CPU 6300 @ 1.86GHz
Timestamp of tree: Sat, 17 Nov 2007 10:27:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.2-r1
dev-lang/python:     2.5.1-r3
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -pipe -march=nocona -mtune=nocona -fomit-frame-pointer -mmmx -msse -msse2 -msse3 -mfpmath=sse"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/mail/dspam /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/config /var/run/dspam"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O3 -pipe -march=nocona -mtune=nocona -fomit-frame-pointer -mmmx -msse -msse2 -msse3 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="39"
LC_ALL="it_IT.utf8"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,--enable-new-dtags -Wl,--as-needed -Wl,--hash-style=both"
LINGUAS="it"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/mnt/Dati/Gentoo/tmp/"
PORTDIR="/mnt/Dati/Gentoo/portage/"
PORTDIR_OVERLAY="/usr/portage/local/layman/vmware /usr/local/portage/myportage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit 7zip X X509 Xaw3d a52 aac aalib accessibility ace acl acpi activefilter adns aiglx aio alsa amd amd64 amr amrr amuled ao aoss apache2 arj asf aspnet2 async atk audacious audiofile authfile automount bash-completion berkdb bidi binary-drivers bitmap-fonts bittorrent blas bootsplash browserplugin bzip2 cairo calendar caps cdda cddb cdio cdparanoia cdr cgi charconv chardet chroot ciao clamav clearcase cli client codecs corba cracklib crypt cscope css ctype cups curl cvs daemon dar64 dba dbus depth32 dga dhcp dio directfb diskio divx djbfft dmi dri dvd dvdr dvdread edl encode ethereal exif expat extraengine faac faad fam fastbuild fbcon ffmpeg fftw firefox flac flash foreign-package fortran ftp gcj gd gdbm geometry ggi gif gimp gimpprint glibc-omitfp glitz glut glx gnokii gnome gnutls gphoto2 gpm graphviz gs gtk gtk2 gtkhtml guile h264 hal hddtemp iconv idea idn imagemagick imap innodb ipod ipv6 irda irmc isdnlog jack java java5 javamail javascript jikes jit joystick jpeg jpeg2k junit justify kde kdeenablefinal kdehiddenvisibility kerberos kqemu lame lapack lcd lcms ldap libcaca libclamav libgda libusb lirc live lm_sensors lua lzo mad mailwrapper matroska md5sum mdb mhash midi mikmod mime mmx mmx2 mmxext mng mono mozcalendar mozdevelop mozilla mozsvg mozxmlterm mp3 mp4 mp4live mpeg mpeg2 mpeg4 mplayer mpm-prefork msn msnextras mudflap musepack mysql mysqli mythtv nagios-dns nagios-ntp nagios-ping nagios-ssh ncurses neXt network ngui nls nntp no_wxgtk1 nobsh nopie nossp noxalan nptl nptlonly nsplugin nv nvidia oav odbc ogg openal opengl openmp openssl operanom2 pam pcre pda pdf pdo pear perl php pmu png pnp postgres pppd pthreads pulseaudio python qemu-fast qhull qt3 qt3support qt4 quicktime quotas readline reflection rrdtool rtc ruby samba scanner sdl server session sftplogging sguil slang slp smp snortsam soap sockets socks5 softmmu softquota spamassassin speex spell spl sqlite3 sse sse2 sse3 ssl ssse3 subject-rewrite svg tao tcltk tcpd tetex tga theora tiff tokenizer truetype truetype-fonts trusted type1-fonts unicode usb userlocales vorbis wma wmf wmv wsconvert wxwindows x264 xanim xchatdccserver xchattext xcomposite xine xinerama xml xml2 xmlrpc xorg xosd xpm xprint xsl xv xvid xvm xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="it" USERLAND="GNU" VIDEO_CARDS="fbdev vesa vga nv nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 3


Petteri Räty (RETIRED)






          2007-11-18 15:59:14 UTC
        

And emerge -uDpvt openjms does not pull in castor?




Comment 4


Patrizio Bassi





          2007-11-18 16:15:26 UTC
        

yes i have castor 0.9 and 1.0 installed, i just unmerged and reemerged both just to be sure...




Comment 5


Vlastimil Babka (Caster) (RETIRED)






          2007-11-18 16:30:37 UTC
        

What happens if you do a:
JAVA_PKG_STRICT=1 emerge openjms
?




Comment 6


Petteri Räty (RETIRED)






          2007-11-18 16:35:23 UTC
        

(In reply to comment #4)
> yes i have castor 0.9 and 1.0 installed, i just unmerged and reemerged both
> just to be sure...
> 

Please attach the output of JAVA_PKG_DEBUG=1 emerge -1 openjms




Comment 7


Patrizio Bassi





          2007-11-18 19:10:54 UTC
        

Created attachment 136306 [details]
debug info requested




Comment 8


Patrizio Bassi





          2007-11-18 19:11:52 UTC
        

with the strict option it fails at the same point.




Comment 9


Patrizio Bassi





          2008-03-01 13:37:16 UTC
        

ping!




Comment 10


Petteri Räty (RETIRED)






          2008-03-01 23:42:31 UTC
        

(In reply to comment #9)
> ping!
> 

I still don't know what causes this:
>>> dev-java/openjms-0.7.6.1-r3 merged.

>>> No packages selected for removal by clean
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.





Comment 11


Petteri Räty (RETIRED)






          2008-03-01 23:55:52 UTC
        

Maybe there is something wrong with your blackdown-jdk installation? emerge -C blackdown-jdk, them rm -fr /opt/blackdown-jdk*. You could easy try ibm-jdk-bin but it requires registration to download (free of course but some people might not want to).




Comment 12


Alistair Bush (RETIRED)






          2008-03-02 00:46:45 UTC
        

I am unable to reproduce this on ~amd64.

I noticed that dev-java/jdbm was being pulled from java-overlay, so downgraded to portage version with no effect.

tested with castor-0.9.9.1-r2  castor-0.9.9.1-r3 no effect also.





Comment 13


Patrizio Bassi





          2008-03-02 16:56:40 UTC
        

i removed jdk and whole castor than it merged. so strange as i already did the same operation before reporting the bug




Comment 14


Petteri Räty (RETIRED)






          2008-03-02 18:05:29 UTC
        

(In reply to comment #13)
> i removed jdk and whole castor than it merged. so strange as i already did the
> same operation before reporting the bug
> 

Ok so assuming there was a local problem with your JDK installation (hard disk failures, full disk or whatever).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

