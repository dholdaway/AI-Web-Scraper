Title: 134863 – qt-4.1.3 fails to compile with gcc-4.1.1
URL: https://bugs.gentoo.org/show_bug.cgi?id=134863

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 134863
qt-4.1.3 fails to compile with gcc-4.1.1
Last modified: 2006-08-23 05:49:23 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 134863 
      - qt-4.1.3 fails to compile with gcc-4.1.1


Summary:
qt-4.1.3 fails to compile with gcc-4.1.1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-29 20:48 UTC by Grant Goodyear (RETIRED)





      Modified:
    
2006-08-23 05:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



flameeyes









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Grant Goodyear (RETIRED)






          2006-05-29 20:48:35 UTC
        

Visibility problem?

make[5]: Entering directory `/var/tmp/portage/qt-4.1.3/work/qt-x11-opensource-src-4.1.3/src/plugins/sqldrivers/mysql'
g++ -c -m64 -pipe -I/usr/include/mysql -march=nocona -O2 -pipe -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -Wall -W -fPIC  -DQT_NO_CAST_TO_ASCII -DQT_NO_CAST_FROM_ASCII -DQT_NO_DEBUG -DQT_PLUGIN -DQT_SQL_LIB -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_SHARED -I../../../../mkspecs/linux-g++-64 -I. -I../../../../include/QtCore -I../../../../include/QtSql -I../../../../include -I.moc/release-shared -I. -o .obj/release-shared/main.o main.cpp
make[5]: Entering directory `/var/tmp/portage/qt-4.1.3/work/qt-x11-opensource-src-4.1.3/src/plugins/inputmethods/imsw-multi'
g++ -c -m64 -pipe -I/usr/include/mysql -march=nocona -O2 -pipe -Wall -W -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -fPIC  -DQT_NO_DEBUG -DQT_PLUGIN -DQT_GUI_LIB -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_SHARED -I../../../../mkspecs/linux-g++-64 -I. -I../../../../include/QtCore -I../../../../include/QtGui -I../../../../include -I.moc/release-shared -I. -o .obj/release-shared/qmultiinputcontext.o qmultiinputcontext.cpp
g++ -c -m64 -pipe -I/usr/include/mysql -march=nocona -O2 -pipe -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -Wall -W -fPIC  -DQT_NO_DEBUG -DQT_PLUGIN -DQT_GUI_LIB -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_SHARED -I../../../../mkspecs/linux-g++-64 -I. -I../../../../include/QtCore -I../../../../include/QtGui -I../../../../include -I.moc/release-shared -I. -o .obj/release-shared/qjpeghandler.o qjpeghandler.cpp
g++ -c -m64 -pipe -I/usr/include/mysql -march=nocona -O2 -pipe -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -Wall -W -fPIC  -DQT_NO_CAST_TO_ASCII -DQT_NO_CAST_FROM_ASCII -DQT_NO_DEBUG -DQT_PLUGIN -DQT_SQL_LIB -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_SHARED -I../../../../mkspecs/linux-g++-64 -I. -I../../../../include/QtCore -I../../../../include/QtSql -I../../../../include -I.moc/release-shared -I. -o .obj/release-shared/qsql_mysql.o ../../../sql/drivers/mysql/qsql_mysql.cpp
g++ -c -m64 -pipe -I/usr/include/mysql -march=nocona -O2 -pipe -Wall -W -fvisibility=hidden -fvisibility-inlines-hidden -D_REENTRANT -fPIC  -DQT_NO_DEBUG -DQT_PLUGIN -DQT_GUI_LIB -DQT_CORE_LIB -D_LARGEFILE64_SOURCE -D_LARGEFILE_SOURCE -DQT_SHARED -I../../../../mkspecs/linux-g++-64 -I. -I../../../../include/QtCore -I../../../../include/QtGui -I../../../../include -I.moc/release-shared -I. -o .obj/release-shared/qmultiinputcontextplugin.o qmultiinputcontextplugin.cpp
../../../sql/drivers/mysql/qsql_mysql.cpp: In member function 'virtual bool QMYSQLDriver::open(const QString&, const QString&, const QString&, const QString&, int, const QString&)':
../../../sql/drivers/mysql/qsql_mysql.cpp:965: error: 'CLIENT_MULTI_STATEMENTS' was not declared in this scope
rm -f libqjpeg.so


# emerge info
*** Deprecated use of action 'info', use '--info' instead
Portage 2.1_rc2-r3 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.15-gentoo-r8 x86_64)
=================================================================
System uname: 2.6.15-gentoo-r8 x86_64 Intel(R) Pentium(R) D  CPU 2.66GHz
Gentoo Base System version 1.12.0
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=nocona -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig cvs distlocks metadata-transfer sandbox sfperms sign strict"
GENTOO_MIRRORS="-* http://gentoo.mirrors.pair.com/"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa avi berkdb bitmap-fonts cairo cli crypt cups dlloader dri dvd eds emboss encode flac foomaticdb fortran gif gnome gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg kde lzw lzw-tiff maildir mailwrapper milter mono mp3 mpeg ncurses nls nptl nptlonly opengl pam pcre pda pdflib perl png pppd python qt quicktime readline reflection sasl sdl session spell spl ssl tcpd tiff truetype-fonts type1-fonts unicode usb xorg xpm xv zlib elibc_glibc kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Caleb Tennis (RETIRED)






          2006-05-30 05:03:12 UTC
        

hmm, but it works out of the box for you with a lesser gcc ?




Comment 2


Grant Goodyear (RETIRED)






          2006-05-30 08:02:41 UTC
        

(In reply to comment #1)
> hmm, but it works out of the box for you with a lesser gcc ?

Um, it looks like the answer is "no", at least w/ gcc-3.4.6-r1.

g++ -m64 -shared -o libqjpeg.so .obj/release-shared/main.o .obj/release-shared/qjpeghandler.o   -L/usr/lib64 -L/usr/lib64/mysql -L/var/tmp/portage/qt-4.1.3/work/qt-x11-opensource-src-4.1.3/lib -ljpeg -lQtGui -L/usr/lib64 -L/usr/lib64/mysql -L/var/tmp/portage/qt-4.1.3/work/qt-x11-opensource-src-4.1.3/lib -lpng -lSM -lICE -lXi -lXrender -lXrandr -lXcursor -lfreetype -lfontconfig -lXext -lX11 -lQtCore -lz -lm -lpthread -ldl
../../../sql/drivers/mysql/qsql_mysql.cpp: In member function `virtual bool QMYSQLDriver::open(const QString&, const QString&, const QString&, const QString&, int, const QString&)':
../../../sql/drivers/mysql/qsql_mysql.cpp:965: error: `CLIENT_MULTI_STATEMENTS' was not declared in this scope
../../../sql/drivers/mysql/qsql_mysql.cpp:965: warning: unused variable 'CLIENT_MULTI_STATEMENTS'






Comment 3


Caleb Tennis (RETIRED)






          2006-05-30 08:11:41 UTC
        

what mysql version(s) do you have installed?  Looks like the headers aren't where Qt expects them to be.




Comment 4


Grant Goodyear (RETIRED)






          2006-05-30 19:49:57 UTC
        

(In reply to comment #3)
> what mysql version(s) do you have installed?  Looks like the headers aren't
> where Qt expects them to be.

I had mysql 4.1.19.  I rebuilt qt with mysql-5.0.21, and that compiles just fine.    Ah, well, I'd been meaning to learn how to dump tables and upgrade my mythtv.




Comment 5


Caleb Tennis (RETIRED)






          2006-08-23 05:49:23 UTC
        

never seen this elsewhere.  calling it a fluke, I suppose.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

