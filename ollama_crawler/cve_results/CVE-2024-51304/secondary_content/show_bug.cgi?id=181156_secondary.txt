Title: 181156 – dev-java/gjdoc-0.7.7-r1 failed while configuring
URL: https://bugs.gentoo.org/show_bug.cgi?id=181156

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 181156
dev-java/gjdoc-0.7.7-r1 failed while configuring
Last modified: 2007-10-19 12:46:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 181156 
      - dev-java/gjdoc-0.7.7-r1 failed while configuring


Summary:
dev-java/gjdoc-0.7.7-r1 failed while configuring
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Java

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-07 00:40 UTC by Ken Rose





      Modified:
    
2007-10-19 12:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ken Rose





          2007-06-07 00:40:31 UTC
        

Synced this morning.  While doing emerge -avuDN world, got the following....

checking for fastjar... no
checking for jar... jar
You have no CLASSPATH, I hope it is good
checking for uudecode... yes
checking if uudecode can decode base 64 file... yes
checking if java works... configure: error: The Java VM java failed (see config.log, check the CLASSPATH?)

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/dev-java/gjdoc-0.7.7-r1/work/gjdoc-0.7.7/config.log

!!! ERROR: dev-java/gjdoc-0.7.7-r1 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  gjdoc-0.7.7-r1.ebuild, line 53:   Called econf '--with-antlr-jar=/usr/share/antlr/lib/antlr.jar' '--disable-native' '--disable-dependency-tracking' '--disable-xmldoclet'
  ebuild.sh, line 578:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/dev-java/gjdoc-0.7.7-r1/temp/build.log'.

!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.01"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info



The relevant-looking part of config.log is:

configure:18654: checking how to hardcode library paths into programs
configure:18679: result: immediate
configure:19655: checking for fastjar
configure:19685: result: no
configure:19655: checking for jar
configure:19671: found /opt/sun-jdk-1.6.0.01/bin/jar
configure:19682: result: jar
configure:19884: checking for uudecode
configure:19900: found /usr/local/bin/uudecode
configure:19911: result: yes
configure:19920: checking if uudecode can decode base 64 file
configure:19947: result: yes
configure:20115: checking if java works
configure:20148: CLASSPATH=.: java  Test
Exception in thread "main" java.lang.NoClassDefFoundError: Test
configure:20151: $? = 1
configure: failed program was:
/* [#]line 20125 "configure" */
public class Test {
public static void main (String args[]) {
        System.exit (0);
} }
configure:20157: error: The Java VM java failed (see config.log, check the CLASSPATH?)

## ---------------- ##
## Cache variables. ##
## ---------------- ##



Its assertion notwithstanding, CLASSPATH definitely isn't empty, unless it comes from something other than the environment.
 ken # echo $CLASSPATH
/usr/share/commons-logging/lib/commons-logging.jar:/usr/share/bsf-2.3/lib/bsf.jar:/usr/share/xml-commons-resolver/lib/xml-commons-resolver.jar:/usr/share/xerces-2/lib/xercesImpl.jar:/usr/share/jdepend/lib/jdepend.jar:/usr/share/jzlib/lib/jzlib.jar:/usr/share/libreadline-java/lib/libreadline-java.jar:/opt/freemind/lib/freemind.jar:/usr/share/xalan/lib/xalan.jar:/usr/share/xml-commons/lib/which.jar:/usr/share/jython/lib/jython.jar:/usr/share/commons-collections/lib/commons-collections.jar:/usr/share/avalon-logkit-1.2/lib/logkit.jar:/usr/share/xml-commons-external-1.3/lib/xml-apis.jar:/usr/share/junit/lib/junit.jar:/usr/share/rhino-1.5/lib/js.jar:/usr/share/xalan/lib/serializer.jar:/usr/share/ant-core/lib/ant.jar:/usr/share/antlr/lib/antlr.jar:/usr/share/jakarta-regexp-1.3/lib/jakarta-regexp.jar:/usr/share/ant-core/lib/ant-launcher.jar:/usr/share/xml-commons/lib/resolver.jar:/usr/share/bcel/lib/bcel.jar:/usr/share/ant-core/lib/ant-bootstrap.jar:/usr/share/jakarta-oro-2.0/lib/jakarta-oro.jar:/usr/share/commons-logging/lib/commons-logging-api.jar:/usr/share/xml-commons/lib/xml-apis.jar:/usr/share/xjavac-1/lib/xjavac.jar:/usr/share/log4j/lib/log4j.jar:/usr/share/commons-net/lib/commons-net.jar:/usr/share/telnetd/lib/telnetd.jar:/usr/share/bsh/lib/bsh.jar:/usr/share/commons-beanutils-1.6/lib/commons-beanutils.jar:/usr/share/javacup/lib/javacup.jar:.

And...

 ken # emerge --info
Portage 2.1.2.7 (default-linux/amd64/2006.1/desktop, gcc-4.1.2, glibc-2.5-r3, 2.6.18-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.18-gentoo-r3 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3800+
Gentoo Base System release 1.12.9
Timestamp of tree: Wed, 06 Jun 2007 14:30:01 +0000
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.3.5-r3, 2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=k8 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.mirrors.easynews.com/linux/gentoo/ ftp://gentoo.cites.uiuc.edu/pub/gentoo/"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aim alsa amd64 apache2 arts berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dbus doc dri dvd dvdr eds emboss emul-linux-x86 encode esd ethereal examples fam firefox fortran ftp gdbm gif gnome gpm gstreamer gtk gtk2 hal iconv ipv6 isdnlog java jpeg kde ldap libg++ mad midi mikmod mmap mozilla mp3 mpeg mudflap mysql ncurses nls nptl nptlonly nsplugin ogg opengl openmp oss pam pcre perl png ppds pppd python qt3 qt4 quicktime readline reflection samba sdl session sockets spell spl ssl sysfs tcpd tetex truetype truetype-fonts type1-fonts unicode vorbis wxwindows xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i810 mach64 mga neomagic nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Reproducible: Always

Steps to Reproduce:
1. emerge -av dev-java/gjdoc
2.
3.

Actual Results:  
Described above




Comment 1


Vlastimil Babka (Caster) (RETIRED)






          2007-06-07 01:25:44 UTC
        

No it's not CLASSPATH problem. Must be something related to uudecode (which package provides that command btw?) I don't have uudecode and get this:

checking for fastjar... fastjar
You have no CLASSPATH, I hope it is good
checking for uudecode... no
configure: WARNING: I have to compile Test.class from scratch
checking if javac -source 1.4 -target 1.4 works... yes
checking if java works... yes
checking if javac -source 1.4 -target 1.4 works... (cached) yes

Seems it either uudecodes Text.class embedded in the configure script, or compiles it from scratch. For some reason the uudecode way fails for you, either it decodes invalid class file or decodes it into wrong dir. Could you locate the Test.class there in /var/tmp/portage/... after it fails, and attach it?




Comment 2


Ken Rose





          2007-06-07 02:42:49 UTC
        

There is no Test.class anywhere in the system, and when I extract the uuencoded block and run it manually, it fails to generate an output file.  Looks like I need to hunt that down tomorrow.

BTW, uudecode is from app-text/uudeview

 - ken




Comment 3


Ken Rose





          2007-06-07 17:48:46 UTC
        

All right, it seems that the uudecode that comes from app-text/uudeview-0.5.20 is useless.  I tried copying in a uudecode from an old RedHat box & got my world update to run to completion, so it seems that Vlastimil Babka's deduction is correct.  I emerged app-arch/sharutils and was able to get a successful build, so maybe that's the solution for now.  Should I file a bug against app-text/uudeview-0.5.20, or will this one be transferred?

Thanks,

 - ken




Comment 4


Vlastimil Babka (Caster) (RETIRED)






          2007-06-07 18:14:22 UTC
        

(In reply to comment #3)
> All right, it seems that the uudecode that comes from app-text/uudeview-0.5.20

It's weird because I tried installing this package and it gave me no uudecode...




Comment 5


Petteri Räty (RETIRED)






          2007-06-09 11:51:22 UTC
        

(In reply to comment #4)
> (In reply to comment #3)
> > All right, it seems that the uudecode that comes from app-text/uudeview-0.5.20
> 
> It's weird because I tried installing this package and it gave me no
> uudecode...
> 

betelgeuse@pena ~ $ qfile /usr/bin/uudecode
app-arch/sharutils (/usr/bin/uudecode)

it works with no sharutils installed too and with just uudeview installed. I am guessing you had some broken /usr/bin/uudecode around and re-emerging sharutils replaced it with a working one. Reopen if you get this issue again.





Comment 6


Reto Gantenbein (ganto)





          2007-10-19 10:46:18 UTC
        

hi everybody.

I have similar error:

...
checking for fastjar... fastjar
You have CLASSPATH ., hope it is correct
checking for uudecode... no
configure: WARNING: I have to compile Test.class from scratch
checking if javac -source 1.4 -target 1.4 works... yes
checking if java works... configure: error: The Java VM java failed (see config.log, check the CLASSPATH?)

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/dev-java/gjdoc-0.7.7-r1/work/gjdoc-0.7.7/config.log
 * 
 * ERROR: dev-java/gjdoc-0.7.7-r1 failed.
 * Call stack:
 *   ebuild.sh, line 1654:   Called dyn_compile
 *   ebuild.sh, line 990:   Called qa_call 'src_compile'
 *   ebuild.sh, line 44:   Called src_compile
 *   gjdoc-0.7.7-r1.ebuild, line 53:   Called econf '--with-antlr-jar=/usr/share/antlr/lib/antlr.jar' '--disable-native' '--disable-dependency-tracking' '--disable-xmldoclet'
 *   ebuild.sh, line 591:   Called die
 * 
 * econf failed
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-java/gjdoc-0.7.7-r1/temp/build.log'.
 * 
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="." JAVA_HOME="/opt/sun-jdk-1.5.0.12"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info

it's on a new system. neither emerging sharutils nor uudeview resolves this issue. after installing sharutils my error turns into the same as described above.

please let me know, when you need some more info.




Comment 7


Reto Gantenbein (ganto)





          2007-10-19 12:46:32 UTC
        

after switching the java system vm from sun-jdk-1.5 (1.5.0.12) to sun-jdk-1.6 (1.6.0.03) gjdoc eventually compiled. i already unsuccessfully tried this before without the uudecode binary. 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

