Title: 113699 – de_DE@euro uses wrong encoding (UTF-8 instead of ISO-8859-15)
URL: https://bugs.gentoo.org/show_bug.cgi?id=113699

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 113699
de_DE@euro uses wrong encoding (UTF-8 instead of ISO-8859-15)
Last modified: 2006-04-20 20:27:59 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 113699 
      - de_DE@euro uses wrong encoding (UTF-8 instead of ISO-8859-15)


Summary:
de_DE@euro uses wrong encoding (UTF-8 instead of ISO-8859-15)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-27 04:56 UTC by Roland Leißa





      Modified:
    
2006-04-20 20:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Roland Leißa





          2005-11-27 04:56:44 UTC
        

de_DE@euro uses UTF-8 instead of  
ISO-8859-15. This is wrong since there is already a german locale which uses 
UTF-8 encoding: de_DE.utf8 
Perhaps the same bug is there with other xx_XX@euro locales. 

Reproducible: Always
Steps to Reproduce:
1. export LC_ALL="de_DE@euro" 
 
Actual Results:  
standard encoding is set to utf-8  

Expected Results:  
standard encoding should be set to iso-8859-15  

Portage 2.0.53_rc7 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 
2.6.13-gentoo-r2 i686) 
================================================================= 
System uname: 2.6.13-gentoo-r2 i686 AMD Athlon(tm) XP 2600+ 
Gentoo Base System version 1.12.0_pre10 
dev-lang/python:     2.3.5, 2.4.2 
sys-apps/sandbox:    1.2.13 
sys-devel/autoconf:  2.13, 2.59-r7 
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1 
sys-devel/binutils:  2.16.1 
sys-devel/libtool:   1.5.20-r1 
virtual/os-headers:  2.6.11-r2 
ACCEPT_KEYWORDS="x86 ~x86" 
AUTOCLEAN="yes" 
CBUILD="i686-pc-linux-gnu" 
CFLAGS="-O3 -march=athlon-xp -pipe -fomit-frame-pointer -mfpmath=sse" 
CHOST="i686-pc-linux-gnu" 
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control" 
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c /etc/env.d" 
CXXFLAGS="-O3 -march=athlon-xp -pipe -fomit-frame-pointer -mfpmath=sse" 
DISTDIR="/usr/portage/distfiles" 
FEATURES="autoconfig distlocks sandbox sfperms strict" 
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ " 
LANG="de_DE.ISO-8859-15" 
LC_ALL="de_DE.ISO-8859-15" 
LINGUAS="de en" 
MAKEOPTS="-j2" 
PKGDIR="/usr/portage/packages" 
PORTAGE_TMPDIR="/var/tmp" 
PORTDIR="/usr/portage" 
PORTDIR_OVERLAY="/usr/local/portage" 
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage" 
USE="x86 3dnow 3dnowex 3dnowext X aalib acpi alsa amuled apache2 apm arts 
artswrappersuid audiofile avi bash-completion berkdb bidi bitmap-fonts bmp 
bzip2 cdparanoia cdr cdrom cjk codecs crypt cups curl dba dga dhcp directfb 
divx4linux dts dv dvb dvd dvdr dvdread edl eds emboss encode esd exif expat 
fam fbcon ffmpeg flac foomaticdb freetts gcj gd gd-external gdbm ggi gif gimp 
gimpprint gmp gphoto2 gpm gstreamer gtk gtk2 hal idn imagemagick imlib ipv6 
jack java jpeg junit kde kdeenablefinal kqemu libcaca libg++ libwww live 
logitech-mouse lua lzo mad matroska mhash mikmod mmx mmxext mng mp3 mpeg mpeg4 
mplayer musicbrainz mysql mythtv nas ncurses nls no_wxgtk1 nptl nptlonly odbc 
ogg oggvorbis openal opengl oss pam pcre pdflib perl plotutils png ppds print 
python qt quicktime rdesktop readline real recode remote rtc samba scanner sdl 
slang speex spell sse ssl stats subversion svga tcltk tcpd tetex tga theora 
tiff truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 
visualization vorbis wifi win32codecs wxwindows xanim xine xinerama xml2 xmms 
xscreensaver xv xvid xvmc zlib linguas_de linguas_en userland_GNU kernel_linux 
elibc_glibc" 
Unset:  ASFLAGS, CTARGET, LDFLAGS




Comment 1


Roland Leißa





          2005-11-27 06:45:14 UTC
        

To find out which charset is currently in use:  
$ locale charmap  
So  
$ export="de_DE@euro"  
$ locale charmap  
results:  
UTF-8  
----------------------------  
There seems to be even a greater problem with the terminal encoding:  
The UNICODE variable in /etc/rc.conf lets me switch between ASCII and UTF-8  
terminal encoding. Can I set it to ISO-8859-15 or other encodings somehow?  
It seems to be impossible to use german umlauts and special characters  
(




Comment 2


Roland Leißa





          2005-11-27 06:45:14 UTC
        

To find out which charset is currently in use:  
$ locale charmap  
So  
$ export="de_DE@euro"  
$ locale charmap  
results:  
UTF-8  
----------------------------  
There seems to be even a greater problem with the terminal encoding:  
The UNICODE variable in /etc/rc.conf lets me switch between ASCII and UTF-8  
terminal encoding. Can I set it to ISO-8859-15 or other encodings somehow?  
It seems to be impossible to use german umlauts and special characters  
(äöüÄÜÖß&#8364;) in the terminal without using utf-8:  
cat, joe, nano etc do _not_ show german umlauts although I tried several fonts:  
CONSOLEFONT="default8x16"  
CONSOLEFONT="lat9-16"  
CONSOLEFONT="lat9v-16"  
CONSOLEFONT="lat9u-16"  
CONSOLEFONT="lat9w-16"  
CONSOLEFONT="lat0-16"  
Without success. I can't even type german umlauts.  
Setting UNICODE to yes has other problems:  
German umlauts are encoded to UTF-8 in joe, nano etc although my locale setting  
uses a ISO-8859-15 charmap:  
$ locale charmap  
ISO-8859-15  
Strange things happen when I type german umlauts. The cursor skips 2 places  
instead of one, I can delete things that should not be deleted. After typing  
this:  
roland@GentooBox ~ $ äääääää  
I can do this with backspace:  
roland@GentooBo  
And these are only a few of other _very_ annoying things.  
 




Comment 3


Roland Leißa





          2005-11-27 09:32:01 UTC
        

> There seems to be even a greater problem with the terminal encoding:   
> The UNICODE variable in /etc/rc.conf lets me switch between ASCII and UTF-8   
> terminal encoding. Can I set it to ISO-8859-15 or other encodings somehow?   
> It seems to be impossible to use german umlauts and special characters   
> (




Comment 4


Roland Leißa





          2005-11-27 09:32:01 UTC
        

> There seems to be even a greater problem with the terminal encoding:   
> The UNICODE variable in /etc/rc.conf lets me switch between ASCII and UTF-8   
> terminal encoding. Can I set it to ISO-8859-15 or other encodings somehow?   
> It seems to be impossible to use german umlauts and special characters   
> (äöüÄÜÖß&#8364;) in the terminal without using utf-8:   
> cat, joe, nano etc do _not_ show german umlauts although I tried several 
fonts:   
> CONSOLEFONT="default8x16"   
> CONSOLEFONT="lat9-16"   
> CONSOLEFONT="lat9v-16"   
> CONSOLEFONT="lat9u-16"   
> CONSOLEFONT="lat9w-16"   
> CONSOLEFONT="lat0-16"   
> Without success. I can't even type german umlauts.   
> Setting UNICODE to yes has other problems:   
> German umlauts are encoded to UTF-8 in joe, nano etc although my locale 
setting   
> uses a ISO-8859-15 charmap:   
> $ locale charmap   
> ISO-8859-15   
> Strange things happen when I type german umlauts. The cursor skips 2 places   
> instead of one, I can delete things that should not be deleted. After typing   
> this:   
> roland@GentooBox ~ $ äääääää   
> I can do this with backspace:   
> roland@GentooBo   
> And these are only a few of other _very_ annoying things.   
 
OK, found out that simple restarting of the services /etc/init.d/consolefont 
and /etc/init.d/keymap does not work. Rebooting solved the last problem. Now I 
use these settings: 
UNICODE="no" 
CONSOLEFONT="lat9w-16" 
CONSOLETRANSLATION="8859-15_to_uni" 
KEYMAP="de-latin1" 
And everything works fine in the terminal. But the first problem remains: 
de_DE@euro uses UTF-8. 
Workaroud: 
$ localedef -c -i de_DE -f ISO-8859-15 de_DE.ISO-8859-15 
$ export LC_ALL="de_DE.ISO-8859-15" 
(Or write it in your .bashrc or /etc/env.d/02locale) 
 




Comment 5


SpanKY






          2006-04-20 20:27:59 UTC
        

de_DE@euro has always been ISO-8859-15 ... from the cvs logs on the file that generates all the locales:

1.52         (drepper  29-Jun-01): de_DE@euro/ISO-8859-15 \

and indeed:
$ grep de_DE@euro glibc-2.3.5/localedata/SUPPORTED 
de_DE@euro/ISO-8859-15 \

$ export LC_ALL=de_DE@euro
$ locale charmap  
ISO-8859-15









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

