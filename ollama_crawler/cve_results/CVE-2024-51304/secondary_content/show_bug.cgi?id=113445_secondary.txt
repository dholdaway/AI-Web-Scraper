Title: 113445 – php-5.0.5-r4: aspell-related build failure
URL: https://bugs.gentoo.org/show_bug.cgi?id=113445

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 113445
php-5.0.5-r4: aspell-related build failure
Last modified: 2008-01-08 09:59:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 113445 
      - php-5.0.5-r4: aspell-related build failure


Summary:
php-5.0.5-r4: aspell-related build failure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Spell checking utilities and dictionaries -- related bugs (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-24 03:36 UTC by Piotr Malinski





      Modified:
    
2008-01-08 09:59 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



lubomir.prech
php-bugs









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




PHP-5.0.5-r4 config.log

              (config.log,331.65 KB,
                text/plain)

            
2005-11-24 08:06 UTC,

            Piotr Malinski




Details





config.log - no chroot / re-emerged aspell

              (config.log,331.64 KB,
                text/plain)

            
2005-11-26 10:18 UTC,

            Piotr Malinski




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Piotr Malinski





          2005-11-24 03:36:02 UTC
        

php-5.0.5-r4 can't configure - dies with error: cannot compute sizeof (char  
*), 77  
#############################  
checking whether to enable shmop support... no  
checking whether to enable SimpleXML support... yes  
checking whether libxml build works... (cached) yes  
checking for SNMP support... no  
checking OpenSSL dir for SNMP... no  
checking whether to enable UCD SNMP hack... no  
checking whether to enable SOAP support... yes  
checking whether libxml build works... (cached) yes  
checking whether to enable sockets support... yes  
checking for struct cmsghdr... yes  
checking for hstrerror... no  
checking for netdb.h... (cached) yes  
checking netinet/tcp.h usability... yes  
checking netinet/tcp.h presence... yes  
checking for netinet/tcp.h... yes  
checking sys/un.h usability... yes  
checking sys/un.h presence... yes  
checking for sys/un.h... yes  
checking errno.h usability... yes  
checking errno.h presence... yes  
checking for errno.h... yes  
checking for gethostbyname2... no  
checking for __gethostbyname2... no  
checking enable SPL suppport... yes  
checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)...  
yes  
checking for sqlite support... yes  
checking for char *... yes  
checking size of char *... configure: error: cannot compute sizeof (char *),  
77  
See `config.log' for more details.  
  
!!! ERROR: dev-lang/php-5.0.5-r4 failed.  
!!! Function php5_0-sapi_src_compile, Line 505, Exitcode 1  
!!! configure failed  
!!! If you need support, post the topmost build error, NOT this status  
message.  
################################  
dev-lang/php-5.0.5-r4  -adabas -apache +apache2 +bcmath +berkdb                                                                                                                                 
-birdstep +bzip2 -calendar -cdb -cgi -cjk -cli +crypt -ctype +curl 
-curlwrappers                                                                         
-db2 +dba -dbase -dbmaker -debug -discard-path -doc -empress -empress-bcs 
-esoo                                                                                                                                
b +exif -fdftk -filepro -firebird -flatfile -force-cgi-redirect -frontbase 
-ftp                                                                                                                                 
+gd -gd-external +gdbm +gmp -hardenedphp -hyperwave-api +iconv +imap -informix 
-                                                                                                                                
inifile -interbase -iodbc +ipv6 -java-external -kerberos -ldap -libedit -mcve 
-m                                                                                                                                
emlimit -mhash -ming -mnogosearch -msql -mssql +mysql +mysqli +ncurses +nls 
-oci                                                                                                                                
8 -oci8-instant-client +odbc -oracle7 -ovrimos -pcntl +pcre +pdo-external 
-pear                                                                                                                                 
-pfpro -pic -posix +postgres -qdbm -readline -recode -sapdb -sasl +session 
-shar                                                                                                                                
edext -sharedmem +simplexml -snmp +soap +sockets -solid +spell +spl +sqlite 
-ssl                                                                                                                                 
-sybase -sybase-ct -sysvipc -threads +tidy +tiff +tokenizer +truetype -wddx 
+xm                                                                                                                                
l2 +xmlrpc -xpm +xsl -yaz +zip +zlib 
####################################### 

Reproducible: Always
Steps to Reproduce:
1. emerge dev-lang/php 



Gentoo Base System version 1.12.0_pre10  
Portage 2.0.53_rc7 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r3,  
2.6.14-gentoo i686)  
=================================================================  
System uname: 2.6.14-gentoo i686 AMD Turion(tm) 64 Mobile Technology ML-30  
dev-lang/python:     2.4.2  
sys-apps/sandbox:    1.2.13  
sys-devel/autoconf:  2.13, 2.59-r7  
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1  
sys-devel/binutils:  2.16.1  
sys-devel/libtool:   1.5.20-r1  
virtual/os-headers:  2.6.11-r2  
ACCEPT_KEYWORDS="x86 ~x86"  
AUTOCLEAN="yes"  
CBUILD="i686-pc-linux-gnu"  
CFLAGS="-march=i686 -Os -pipe"  
CHOST="i686-pc-linux-gnu"  
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"  
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"  
CXXFLAGS="-march=i686 -Os -pipe"  
DISTDIR="/usr/portage/distfiles"  
FEATURES="autoconfig distlocks sandbox sfperms strict"  
GENTOO_MIRRORS="http://gentoo.prz.rzeszow.pl http://gentoo.zie.pg.gda.pl  
ftp://gentoo.po.opole.pl"  
LANG="pl_PL.utf8"  
LC_ALL="pl_PL.utf8"  
LINGUAS="pl"  
PKGDIR="/usr/portage/packages"  
PORTAGE_TMPDIR="/var/tmp"  
PORTDIR="/usr/portage"  
PORTDIR_OVERLAY="/usr/local/portage"  
SYNC="rsync://rsync.gentoo.org/gentoo-portage"  
USE="x86 X a52 aac acpi alsa apm arts atm audiofile bcmath berkdb bitmap-fonts  
bluetooth browserplugin bzip2 cdparanoia cdr cdrom clamav crypt cups curl dbus  
dhcp dvd dvdr dvdread eds emboss exif expat fam ffmpeg flac flash foomaticdb  
fortran gd gdbm gif gmp gphoto2 gpm hal idn imagemagick imlib imlib2 ipv6 irda  
jpeg kde kdeenablefinal kqemu lcms libg++ libwww mad mikmod mng motif mp3 mpeg  
mplayer ncurses nls nptl nptlonly nsplugin ogg oggvorbis opengl oss pam pcmcia  
pcre pdflib perl png python qemu-fast qt quicktime rar readline samba scanner  
sdl slang sms sockets softmmu spell ssl svg symlink tcltk tcpd theora tiff  
truetype truetype-fonts type1-fonts udev unicode usb utf8 vcd vorbis wifi  
win32codecs wmf xine xml2 xscreensaver xv zip zlib linguas_pl userland_GNU  
kernel_linux elibc_glibc"  
Unset:  ASFLAGS, CTARGET, LDFLAGS, MAKEOPTS




Comment 1


Jakub Moc (RETIRED)






          2005-11-24 04:11:40 UTC
        

(In reply to comment #0)
> See `config.log' for more details.  

Attach config.log and reopen then.




Comment 2


Piotr Malinski





          2005-11-24 08:06:49 UTC
        

Created attachment 73501 [details]
PHP-5.0.5-r4 config.log




Comment 3


Piotr Malinski





          2005-11-24 08:09:29 UTC
        

config.log attached. 




Comment 4


Jakub Moc (RETIRED)






          2005-11-24 08:48:32 UTC
        

> /usr/lib/libaspell.so: undefined reference to
`std::_List_node_base::swap(std::_List_node_base&,
std::_List_node_base&)@GLIBCXX_3.4'

> /usr/lib/libaspell.so.15: undefined reference to
`std::_List_node_base::swap(std::_List_node_base&,
std::_List_node_base&)@GLIBCXX_3.4'

Uhm, looks like your aspell is broken, run revdep-rebuild and/or re-emerge it.




Comment 5


Piotr Malinski





          2005-11-25 02:55:21 UTC
        

revdep-rebuild finds nothing to rebuild. I've re-emerged aspell and it didn't 
fix the problem. I'll attach the new (and not in chroot) config log when I get 
back home...




Comment 6


Piotr Malinski





          2005-11-26 10:18:33 UTC
        

Created attachment 73643 [details]
config.log - no chroot / re-emerged aspell




Comment 7


Piotr Malinski





          2005-11-26 10:19:39 UTC
        

I've re-emerged aspell and then tried to merge php5 with the same bug. 
revdep-rebuild finds nothing to rebuild... 




Comment 8


Luca Longinotti (RETIRED)






          2005-11-26 11:14:31 UTC
        

>> /usr/lib/libaspell.so.15: undefined reference to ...

This is definitely no PHP problem since I have it running here without problems,
and the error messages clearly indicate your aspell installation is broken.
Try deinstalling _all_ aspell stuff you have on your system, manually clean
/usr/lib/libaspell* just to be sure, and then reemerge the _stable_ aspell
packages and dictionaries you require.
I'mm reassigning to the aspell maintainers here, maybe they know more about
those problems.
Best regards, CHTEKK.




Comment 9


Piotr Malinski





          2005-11-27 04:14:48 UTC
        

I've tried emerge -e aspell with no help... but got PHP compiled  (-spl 
-spell) as I don't need that. I'll see what can I do about aspell. 




Comment 10


Sebastian Bergmann (RETIRED)






          2006-01-23 08:07:15 UTC
        

I cannot reproduce this with dev-lang/php-5.0.5-r5:

[ebuild   R   ] dev-lang/php-5.0.5-r5  -adabas -apache -apache2 -bcmath -berkdb -birdstep +bzip2 -calendar -cdb -cgi -cjk +cli -crypt -ctype -curl -curlwrappers -db2 -dba -dbase -dbmaker -debug -discard-path -doc -empress -empress-bcs -esoob -exif -fdftk -filepro -firebird -flatfile -force-cgi-redirect -frontbase -ftp -gd -gd-external -gdbm -gmp -hardenedphp -hyperwave-api -iconv -imap -informix -inifile -interbase -iodbc +ipv6 -java-external -kerberos -ldap -libedit -mcve -memlimit -mhash -ming -mnogosearch -msql -mssql -mysql -mysqli -ncurses -nls -oci8 -oci8-instant-client -odbc -oracle7 -ovrimos -pcntl +pcre -pdo-external +pear -pfpro -pic -posix -postgres -qdbm +readline -recode -sapdb -sasl +session -sharedext -sharedmem +simplexml -snmp -soap -sockets -solid +spell +spl -sqlite -ssl -sybase -sybase-ct -sysvipc -threads -tidy -tiff -tokenizer -truetype -wddx +xml -xmlrpc -xpm -xsl -yaz -zip +zlib 0 kB


wopr-mobile ~ # php -m
[PHP Modules]
bz2
dom
libxml
pcre
pspell
readline
session
SimpleXML
SPL
standard
xml
zlib

[Zend Modules]


Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Intel(R) Pentium(R) M processor 1500MHz
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -Os -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=pentium-m -Os -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig cvs digest distlocks fixpackages sandbox sfperms sign strict"
GENTOO_MIRRORS="ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo ftp://trumpetti.atm.tut.fi/gentoo http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apm arts avi berkdb bitmap-fonts bzip2 crypt cups eds emboss encode expat foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 jpeg kde libg++ libwww mad mikmod motif mp3 mpeg ncurses nls nptl ogg oggvorbis opengl oss pam pdflib perl php png python qt quicktime readline sdl spell ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTDIR_OVERLAY


Also note that the spl USE flag has nothing to with {a|p}spell but handles the Standard PHP Library (SPL) extension.


Like Luca commented before me, this is not a PHP issue. Something is wrong with the user's aspell installation. Closing.




Comment 11


Jakub Moc (RETIRED)






          2008-01-08 09:59:29 UTC
        

*** Bug 204756 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

