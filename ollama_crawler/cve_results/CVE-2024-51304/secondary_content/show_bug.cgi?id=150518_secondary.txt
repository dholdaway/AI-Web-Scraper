Title: 150518 – emerge of dev-db/knoda-0.7.4-r1 fails w/ gcc-4.1.1
URL: https://bugs.gentoo.org/show_bug.cgi?id=150518

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 150518
emerge of dev-db/knoda-0.7.4-r1 fails w/ gcc-4.1.1
Last modified: 2006-10-08 15:09:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 150518 
      - emerge of dev-db/knoda-0.7.4-r1 fails w/ gcc-4.1.1


Summary:
emerge of dev-db/knoda-0.7.4-r1 fails w/ gcc-4.1.1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GCC Porting

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Please assign to toolchain








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-08 14:50 UTC by Carsten Klaucke





      Modified:
    
2006-10-08 15:09 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Patch to compile knoda-0.7.4 with gcc-4.1.1

              (knoda-0.7.4-gcc-4.1.1.patch,4.81 KB,
                patch)

            
2006-10-08 15:03 UTC,

            Carsten Klaucke




Details
            | Diff





adapted ebuild to process the knoda-0.7.4-gcc-4.1.1.patch

              (knoda-0.7.4-r2.ebuild,726 bytes,
                text/plain)

            
2006-10-08 15:05 UTC,

            Carsten Klaucke




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Carsten Klaucke





          2006-10-08 14:50:57 UTC
        

When trying to emerge dev-db/knoda-0.7.4-r1, I get the following error:

hk_kdetabledesign.cpp: In member function 'void hk_kdetabledesign::set_fields_enabled()':
hk_kdetabledesign.cpp:1072: error: no match for 'operator==' in '((hk_kdetabledesign*)this)->hk_kdetabledesign::actualfieldit == 0'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/include/g++-v4/bits/stl_list.h:169: note: candidates are: bool std::_List_iterator<_Tp>::operator==(const std::_List_iterator<_Tp>&) const [with _Tp = hk_kdetabledesign::fieldstruct]
/usr/qt/3/include/qcstring.h:298: note:                 bool operator==(const QCString&, const QCString&)
/usr/qt/3/include/qcstring.h:301: note:                 bool operator==(const QCString&, const char*)
/usr/qt/3/include/qcstring.h:304: note:                 bool operator==(const char*, const QCString&)
/usr/qt/3/include/qstring.h:302: note:                 bool operator==(char, QChar)
/usr/qt/3/include/qstring.h:307: note:                 bool operator==(QChar, char)
/usr/qt/3/include/qstring.h:312: note:                 bool operator==(QChar, QChar)
/usr/qt/3/include/qstring.h:1017: note:                 bool operator==(const QString&, const QString&)
/usr/qt/3/include/qstring.h:1024: note:                 bool operator==(const QString&, const char*)
/usr/qt/3/include/qstring.h:1030: note:                 bool operator==(const char*, const QString&)
/usr/qt/3/include/qpoint.h:147: note:                 bool operator==(const QPoint&, const QPoint&)
/usr/qt/3/include/qsize.h:161: note:                 bool operator==(const QSize&, const QSize&)
/usr/qt/3/include/qrect.h:151: note:                 bool operator==(const QRect&, const QRect&)
make[3]: *** [hk_kdetabledesign.lo] Error 1
make[3]: *** Waiting for unfinished jobs....
/usr/include/hk_classes/hk_database.h:281: warning: unused parameter 'oldname'
/usr/include/hk_classes/hk_database.h:281: warning: unused parameter 'newname'
/usr/include/hk_classes/hk_connection.h:273: warning: unused parameter 'oldname'
/usr/include/hk_classes/hk_connection.h:273: warning: unused parameter 'newname'
make[3]: Leaving directory `/var/tmp/portage/knoda-0.7.4-r2/work/knoda-0.7.4/hk_kdeclasses'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/knoda-0.7.4-r2/work/knoda-0.7.4/hk_kdeclasses'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/knoda-0.7.4-r2/work/knoda-0.7.4'
make: *** [all] Error 2

!!! ERROR: dev-db/knoda-0.7.4-r2 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called kde_src_compile
  kde.eclass, line 164:   Called kde_src_compile 'all'
  kde.eclass, line 331:   Called kde_src_compile 'myconf' 'configure' 'make'
  kde.eclass, line 327:   Called die

!!! died running emake, kde_src_compile:make
!!! If you need support, post the topmost build error, and the call stack if relevant.

emerge --info:

Portage 2.1.1 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 AMD Athlon(tm) Processor
Gentoo Base System version 1.12.5
Last Sync: Sat, 07 Oct 2006 07:50:01 +0000
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/alias /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LINGUAS=""
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X a52 aac aalib acl alsa arts asf audiofile bash-completion berkdb bitmap-fonts blas bzip2 cairo cblas cdda cddb cdparanoia cdr cli cmucl crypt css cups curl dbus divx djvu dlloader dri dts dvd dvdr dvdread elibc_glibc emacs encode esd exif fam fame ffmpeg fftw firefox flac foomaticdb fortran gd gdbm gencertdaily gif gimpprint gmedia gphoto2 gpm gs gtk guile hal icq idn imagemagick imap imlib innodb input_devices_keyboard input_devices_mouse ipv6 java jpeg jpeg2k kde kernel_linux lcms ldap leim libg++ lm_sensors lzo lzw mad maildir mikmod mjpeg mmap mmx mmxext mng motif mozilla moznocompose moznoirc moznomail moznoroaming mozsvg mp3 mpeg mplayer mule musicbrainz mysql ncurses netcdf network nls nptl nptlonly nsplugin nvidia offensive ogg openal opengl oscar oss pam pcre pdf perl plotutils png povray ppds python qt3 qt4 quicktime readline real realmedia reflection screen sdl seamonkey session slang speex spell spl ssl svg svga tcltk tcpd tetex theora tiff truetype truetype-fonts type1-fonts udev usb userland_GNU userlocales vcd video_cards_nv video_cards_nvidia visualization vorbis win32codecs wmf wmp wxwindows xemacs xine xml xml2 xmms xorg xosd xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Carsten Klaucke





          2006-10-08 15:03:33 UTC
        

Created attachment 99165 [details, diff]
Patch to compile knoda-0.7.4 with gcc-4.1.1




Comment 2


Carsten Klaucke





          2006-10-08 15:05:15 UTC
        

Created attachment 99166 [details]
adapted ebuild to process the knoda-0.7.4-gcc-4.1.1.patch




Comment 3


Carsten Klaucke





          2006-10-08 15:09:46 UTC
        

Hi,

the same bug is mentioned here:
http://www.mail-archive.com/debian-bugs-rc@lists.debian.org/msg59891.html

So I tried to patch the affected files with the help of newer revisions of knoda-0.8.1. I added the patch above. Emerging of knoda works for me with the new ebuild and the patch in a local overlay.

I preferred patching instead of emerging the unstable version of knoda (0.8.1) because it doesn't support sqlite. Version 0.8.2 does support sqlite but it's still alpha.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

