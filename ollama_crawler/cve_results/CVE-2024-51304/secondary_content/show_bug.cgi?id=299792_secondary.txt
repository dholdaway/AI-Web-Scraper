Title: 299792 – www-client/epiphany-extensions-2.28.1-r1 fails with build errors.
URL: https://bugs.gentoo.org/show_bug.cgi?id=299792

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 299792
www-client/epiphany-extensions-2.28.1-r1 fails with build errors.
Last modified: 2010-01-09 10:41:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 299792 
      - www-client/epiphany-extensions-2.28.1-r1 fails with build errors.


Summary:
www-client/epiphany-extensions-2.28.1-r1 fails with build errors.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-01-05 17:48 UTC by Clemmitt M. Sigler





      Modified:
    
2010-01-09 10:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Patch to epiphany-extensions-2.28.1-r1.ebuild to apply three new source patches.

              (patch_tmp.txt,634 bytes,
                patch)

            
2010-01-05 17:50 UTC,

            Clemmitt M. Sigler




Details
            | Diff





First source patch to epiphany-extensions-2.28.1-r1.ebuild.

              (epiphany-extensions-2.28.1-WebKitHitTestResult-broken.patch,8.30 KB,
                patch)

            
2010-01-05 17:52 UTC,

            Clemmitt M. Sigler




Details
            | Diff





Second source patch to epiphany-extensions-2.28.1-r1.ebuild.

              (epiphany-extensions-2.28.1-rss-update-enable.patch,15.37 KB,
                patch)

            
2010-01-05 17:53 UTC,

            Clemmitt M. Sigler




Details
            | Diff





Third source patch to epiphany-extensions-2.28.1-r1.ebuild.

              (epiphany-extensions-2.28.1-rss-minor-code-simplification.patch,4.47 KB,
                patch)

            
2010-01-05 17:53 UTC,

            Clemmitt M. Sigler




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Clemmitt M. Sigler





          2010-01-05 17:48:00 UTC
        

Emerging www-client/epiphany-extensions-2.28.1-r1 fails with the following build errors:
---
ephy-actions-extension.c:69: error: expected specifier-qualifier-list before 'EphyEmbedEventContext'
ephy-actions-extension.c: In function 'ephy_actions_extension_add_action':
ephy-actions-extension.c:372: error: 'ActionData' has no member named 'context'
ephy-actions-extension.c:372: error: 'EPHY_EMBED_CONTEXT_NONE' undeclared (first use in this function)
ephy-actions-extension.c:372: error: (Each undeclared identifier is reported only once
ephy-actions-extension.c:372: error: for each function it appears in.)
ephy-actions-extension.c: In function 'ephy_actions_extension_run_action_on_embed_property':
ephy-actions-extension.c:465: error: too few arguments to function 'ephy_embed_event_get_property'
ephy-actions-extension.c: In function 'ephy_actions_extension_document_popup_cb':
ephy-actions-extension.c:474: error: 'EphyEmbedEventContext' undeclared (first use in this function)
ephy-actions-extension.c:474: error: expected ';' before 'context'
ephy-actions-extension.c:482: error: 'context' undeclared (first use in this function)
ephy-actions-extension.c:482: error: 'ActionData' has no member named 'context'
ephy-actions-extension.c:484: error: 'EPHY_EMBED_CONTEXT_IMAGE' undeclared (first use in this function)
ephy-actions-extension.c:491: error: 'EPHY_EMBED_CONTEXT_LINK' undeclared (first use in this function)
ephy-actions-extension.c: In function 'ephy_actions_extension_context_menu_cb':
ephy-actions-extension.c:756: error: 'EphyEmbedEventContext' undeclared (first use in this function)
ephy-actions-extension.c:756: error: expected ';' before 'context'
ephy-actions-extension.c:763: error: 'context' undeclared (first use in this function)
ephy-actions-extension.c:774: error: 'ActionData' has no member named 'context'
ephy-actions-extension.c:776: error: 'EPHY_EMBED_CONTEXT_IMAGE' undeclared (first use in this function)
ephy-actions-extension.c:781: error: 'EPHY_EMBED_CONTEXT_DOCUMENT' undeclared (first use in this function)
make[3]: *** [libactionsextension_la-ephy-actions-extension.lo] Error 1
make[3]: Leaving directory `/var/tmp/portage/www-client/epiphany-extensions-2.28.1-r1/work/epiphany-extensions-2.28.1/extensions/actions'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/www-client/epiphany-extensions-2.28.1-r1/work/epiphany-extensions-2.28.1/extensions'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/www-client/epiphany-extensions-2.28.1-r1/work/epiphany-extensions-2.28.1'
make: *** [all] Error 2
---
My system's `emerge --info` output:
---
Portage 2.1.6.13 (default/linux/x86/10.0, gcc-4.3.4, glibc-2.9_p20081201-r2, 2.6.30-tuxonice-r6 i686)
=================================================================
System uname: Linux-2.6.30-tuxonice-r6-i686-Intel-R-_Pentium-R-_M_processor_1300MHz-with-gentoo-1.12.13
Timestamp of tree: Mon, 04 Jan 2010 15:45:03 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p35
dev-java/java-config: 1.3.7-r1, 2.1.9-r2
dev-lang/python:     2.5.4-r4, 2.6.4, 3.1.1-r1
dev-python/pycrypto: 2.1.0_beta1
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.3, 1.11.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=pentium3 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://gentoo.mirrors.pair.com/ http://gentoo.mirrors.tds.net/gentoo"
LANG="C"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/gnome /usr/local/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 acl acpi alsa apm bash-completion berkdb bzip2 cairo caps cdr cli cracklib crypt css cups curl cxx dbus dga dri dv dvd encode esd exif ffmpeg firefox flatfile foomaticdb fortran ftp gcj gdbm gif gimp gmp gnome gphoto2 gpm gstreamer gtk gtkhtml hal iconv ieee1394 imagemagick imlib ipv6 java javascript jingle jpeg jpeg2k lame lcms lm_sensors logrotate mad memlimit mime mmx mng modules motif mp3 mudflap ncurses nptl nptlonly nsplugin ogg opengl openmp oss pam pcmcia pcre pdf perl png posix ppds pppd python qt3 qt4 quicktime rdesktop readline reflection samba scanner sdl session sharedmem sndfile spell spl sqlite sse sse2 ssl subversion svg sysfs tcpd theora threads tiff timidity truetype tse3 usb v4l v4l2 vcd vnc vorbis wifi win32codecs x86 xine xml xorg xpm xv xvid yahoo zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="radeon vesa fbdev vga"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS
---

I've created three new patches that get www-client/epiphany-extensions-2.28.1-r1 to build.  Here are source URLs for those patches:

http://mail.gnome.org/archives/svn-commits-list/2009-September/msg07983.html

http://mail.gnome.org/archives/svn-commits-list/2009-December/msg04494.html

http://mail.gnome.org/archives/svn-commits-list/2009-December/msg04688.html

I'll attach patches for epiphany-extensions-2.28.1-r1.ebuild and these three source patches next.  HTH.

Clemmitt




Comment 1


Clemmitt M. Sigler





          2010-01-05 17:50:42 UTC
        

Created attachment 215316 [details, diff]
Patch to epiphany-extensions-2.28.1-r1.ebuild to apply three new source patches.

Patch to apply three new source patches to get www-client/epiphany-extensions-2.28.1-r1.ebuild to build.




Comment 2


Clemmitt M. Sigler





          2010-01-05 17:52:19 UTC
        

Created attachment 215317 [details, diff]
First source patch to epiphany-extensions-2.28.1-r1.ebuild.

First source patch to epiphany-extensions-2.28.1-r1.ebuild.




Comment 3


Clemmitt M. Sigler





          2010-01-05 17:53:05 UTC
        

Created attachment 215318 [details, diff]
Second source patch to epiphany-extensions-2.28.1-r1.ebuild.

Second source patch to epiphany-extensions-2.28.1-r1.ebuild.




Comment 4


Clemmitt M. Sigler





          2010-01-05 17:53:38 UTC
        

Created attachment 215319 [details, diff]
Third source patch to epiphany-extensions-2.28.1-r1.ebuild.

Third source patch to epiphany-extensions-2.28.1-r1.ebuild.




Comment 5


Romain Perier (RETIRED)






          2010-01-06 09:27:11 UTC
        

- Please attach full build.log
- Attach the output of emerge -pv epiphany (just to check something)

thanks in advance




Comment 6


Clemmitt M. Sigler





          2010-01-08 16:08:06 UTC
        

(In reply to comment #5)
> - Please attach full build.log
> - Attach the output of emerge -pv epiphany (just to check something)

Hi Romain,

Output of `emerge -pv epiphany`:
---
$ emerge -pv epiphany

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] www-client/epiphany-2.29.3  USE="nss -avahi -debug -doc (-introspection) -networkmanager -test" 0 kB [1]

Total: 1 package (1 reinstall), Size of downloads: 0 kB
Portage tree and overlays:
 [0] /usr/portage
 [1] /usr/local/portage/layman/gnome
---
I believe this is the answer, so I'm closing this bug report.  Of course, I'm using the gnome overlay and epiphany-2.29.3 from there.

Back story: I'm just now installing Gentoo on a new (amd64) laptop (my current one is an old x86 laptop).  I noticed when installing Gnome on it that epiphany-extensions-2.28.1-r1 emerged without complaint, so I suspected something was strange with my other installation.  It goes without saying that I don't have the gnome overlay installed on the new amd64 laptop.

Thanks for taking the time to look into this bug report :^)

[Search keywords: epiphany-extensions build error gnome overlay ]

Clemmitt





Comment 7


Romain Perier (RETIRED)






          2010-01-09 10:41:17 UTC
        

yup, ephy-extensions-2.28.x is not able to work with ephy-2.29 (probably ephy-2.29 has some API changes), but np.

:)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

