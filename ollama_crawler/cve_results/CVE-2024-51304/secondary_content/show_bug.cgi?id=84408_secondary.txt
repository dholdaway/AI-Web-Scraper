Title: 84408 – x11-libs/qt-3.3.4-r2 emerge fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=84408

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 84408
x11-libs/qt-3.3.4-r2 emerge fails
Last modified: 2005-03-08 02:04:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 84408 
      - x11-libs/qt-3.3.4-r2 emerge fails


Summary:
x11-libs/qt-3.3.4-r2 emerge fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-07 09:10 UTC by Tony Austin





      Modified:
    
2005-03-08 02:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tony Austin





          2005-03-07 09:10:39 UTC
        

After a considerable time the emerge fails with an error message as below.

Reproducible: Always
Steps to Reproduce:
1. emerge -v qt
2.
3.

Actual Results:  
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/bin/uic -L
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/plugins dnd/dndbase.ui -i
dndbase.h -o dnd/dndbase.cpp
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/bin/uic: error while loading
shared libraries: /var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/bin/uic:
undefined symbol: _ZNK7QString3argExii
make[2]: *** [dnd/dndbase.cpp] Error 127
make[2]: *** Waiting for unfinished jobs....
cd dirview && make -f Makefile
make[2]: Entering directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/bin/qmake  -spec
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/mkspecs/linux-g++ -o
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/./examples/dirview
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview/dirview.pro
make[2]: Leaving directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/demo'
make[1]: *** [sub-demo] Error 2
make[1]: *** Waiting for unfinished jobs....
cd /var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/./examples/dirview
make Makefile
make[3]: Entering directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
make[3]: `Makefile' is up to date.
make[3]: Leaving directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
make[2]: Leaving directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
make[2]: Entering directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
g++ -c -pipe -I/usr/include/postgresql/server -I/usr/include/postgresql/pgsql
-I/usr/include/postgresql/pgsql/server -fno-exceptions -Wall -W -mcpu=athlon -O3
-pipe -D_REENTRANT  -DQT_TABLET_SUPPORT -DQT_NO_DEBUG -DQT_THREAD_SUPPORT
-DQT_SHARED
-I/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/mkspecs/linux-g++ -I.
-I/usr/include/freetype2 -I../../include -I/usr/X11R6/include
-I.moc/release-shared-mt/ -o .obj/release-shared-mt/dirview.o dirview.cpp
g++ -c -pipe -I/usr/include/postgresql/server -I/usr/include/postgresql/pgsql
-I/usr/include/postgresql/pgsql/server -fno-exceptions -Wall -W -mcpu=athlon -O3
-pipe -D_REENTRANT  -DQT_TABLET_SUPPORT -DQT_NO_DEBUG -DQT_THREAD_SUPPORT
-DQT_SHARED
-I/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/mkspecs/linux-g++ -I.
-I/usr/include/freetype2 -I../../include -I/usr/X11R6/include
-I.moc/release-shared-mt/ -o .obj/release-shared-mt/main.o main.cpp
/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/bin/moc dirview.h -o
.moc/release-shared-mt/moc_dirview.cpp
g++ -c -pipe -I/usr/include/postgresql/server -I/usr/include/postgresql/pgsql
-I/usr/include/postgresql/pgsql/server -fno-exceptions -Wall -W -mcpu=athlon -O3
-pipe -D_REENTRANT  -DQT_TABLET_SUPPORT -DQT_NO_DEBUG -DQT_THREAD_SUPPORT
-DQT_SHARED
-I/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/mkspecs/linux-g++ -I.
-I/usr/include/freetype2 -I../../include -I/usr/X11R6/include
-I.moc/release-shared-mt/ -o .obj/release-shared-mt/moc_dirview.o
.moc/release-shared-mt/moc_dirview.cpp
g++ -fno-exceptions -o dirview .obj/release-shared-mt/dirview.o
.obj/release-shared-mt/main.o .obj/release-shared-mt/moc_dirview.o  
-L/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/lib -L/usr/X11R6/lib
-lqt-mt -lmng -ljpeg -lpng -lz -lXi -lXrender -lXrandr -lXcursor -lXft
-lfreetype -lfontconfig -lXext -lX11 -lm -lSM -lICE -ldl -lpthread
make[2]: Leaving directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples/dirview'
make[1]: Leaving directory
`/var/tmp/portage/qt-3.3.4-r3/work/qt-x11-free-3.3.4/examples'
make: *** [sub-examples] Error 2
 
 !!! ERROR: x11-libs/qt-3.3.4-r3 failed.
 !!! Function src_compile, Line 149, Exitcode 2
 !!! (no error message)
 !!! If you need support, post the topmost build error, NOT this status message.

Expected Results:  
Completed the emerge.

mail afio # emerge info
Portage 2.0.51-r15 (default-linux/x86/2004.0, gcc-3.2.3,
glibc-2.3.2-r1,glibc-2.3.2-r3,glibc-2.3.3.20040420-r1, 2.4.20-gentoo-r25 i686)
=================================================================
System uname: 2.4.20-gentoo-r25 i686 AMD Athlon(tm) Processor
Gentoo Base System version 1.4.3.10p1
Python:              dev-lang/python-2.2.3-r1 [2.2.3 (#1, Jul 26 2003, 23:34:56)]
dev-lang/python:     2.2.3-r1
sys-devel/autoconf:  2.57-r1, 2.58-r1, 2.59-r4
sys-devel/automake:  1.7.5-r2, 1.8.5-r1
sys-devel/binutils:  2.14.90.0.2, 2.14.90.0.6-r2
sys-devel/libtool:   1.4.3-r1, 1.4.1-r10, 1.5.2-r5
virtual/os-headers:  2.4.19, 2.4.19-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="no"
CFLAGS="-mcpu=athlon -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/X11R6/lib/X11/xkb /usr/kde/2/share/config
/usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/env.d"
CXXFLAGS="-mcpu=athlon -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="ftp://ftp.rhnet.is/pub/gentoo ftp://gentoo.linux.no/pub/gentoo
http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dnow X aalib acl apache2 apm avi bitmap-fonts bonobo cdr crypt cups curl
directfb doc dvd emboss encode exiscan-acl f77 fam font-server foomaticdb
fortran gdbm gif gphoto2 gpm gtk gtk2 gtkhtml guile imap imlib ipv6 java jpeg
libg++ libwww mad maildir mikmod mozilla mp3 mpeg nas ncurses nls oggvorbis
opengl oss pam pdflib perl png postgres ppds python quicktime readline samba
scanner sdl slang slp spell ssl svga tcltk tcpd tetex tiff truetype
truetype-fonts type1-fonts ungif usb x86 xml2 xmms xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Carsten Lohrke (RETIRED)






          2005-03-07 11:29:59 UTC
        

Aside from this issue, please set AUTOCLEAN in your make.conf to yes. It's a deprecated option, which caused all sorts of hard to resolve bugs in the past, if set to no.




Comment 2


Caleb Tennis (RETIRED)






          2005-03-07 11:41:08 UTC
        

What version of Qt is currently installed?




Comment 3


Tony Austin





          2005-03-07 11:47:49 UTC
        

Currently installed qt version is 3.1.2-r4




Comment 4


Caleb Tennis (RETIRED)






          2005-03-07 12:11:15 UTC
        

Looks like that during the build uic is linking against your already installed Qt library vs. the one that's being built.  I thought we had this one nixed, but I guess not.

A workaround would be to unmerge your existing Qt verson first before merging this one, though that's definitely not the best solution.




Comment 5


Caleb Tennis (RETIRED)






          2005-03-07 12:11:58 UTC
        

Note that if unmerge Qt before merging a new version, your system will be left in a somewhat unusable (GUI) state, so do this at your own risk.




Comment 6


Tony Austin





          2005-03-07 23:03:06 UTC
        

Unmerging and re-emerging qt seems to have solved the problem.  Thanks for yourhelp.




Comment 7


Gregorio Guidi (RETIRED)






          2005-03-08 02:04:13 UTC
        

Closing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

