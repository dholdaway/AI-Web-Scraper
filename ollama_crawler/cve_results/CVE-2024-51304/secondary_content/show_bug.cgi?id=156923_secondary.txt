Title: 156923 – Openoffice 2.0.4 build failed
URL: https://bugs.gentoo.org/show_bug.cgi?id=156923

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 156923
Openoffice 2.0.4 build failed
Last modified: 2006-12-03 03:26:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 156923 
      - Openoffice 2.0.4 build failed


Summary:
Openoffice 2.0.4 build failed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-12-02 09:42 UTC by Yury Tereshonkov





      Modified:
    
2006-12-03 03:26 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



yury.tereshonkov









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




System information (emerge --info and other)

              (info.txt,4.47 KB,
                text/plain)

            
2006-12-02 09:44 UTC,

            Yury Tereshonkov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Yury Tereshonkov





          2006-12-02 09:42:55 UTC
        

I've got openoffice 2.0.3 in my system, that was built with

CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -m3dnow -msse -mfpmath=sse -mmmx -O3 -pipe -fforce-addr -fomit-frame-pointer -funroll-loops -frerun-cse-after-loop -frerun-loop-opt -falign-functions=4 -maccumulate-outgoing-args -ffast-math -fprefetch-loop-arrays"
CFLAGS=${CXXFLAGS}

Before emerging openoffice I had rebuild python with
CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer -pipe"

After that I ran
export CFLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer -pipe"; export CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer -pipe"; emerge openoffice

I've got an error, I have full (33 Mb) log tail of them:

Cleaning /var/tmp/portage/app-office/openoffice-2.0.4/image//usr/lib/openoffice
Building /var/tmp/portage/app-office/openoffice-2.0.4/image//usr/lib/openoffice/ooo-wrapper2
Generating man page ...
Building /var/tmp/portage/app-office/openoffice-2.0.4/image//usr/lib/openoffice/install-dict
Building /var/tmp/portage/app-office/openoffice-2.0.4/image//usr/lib/openoffice/program/java-set-classpath
Installing extra en-US templates ...
Installing system files ...
Execute ooinstall ...
Reading setup from ./setup
Sucking env from build setup
Performing environment substitutions ...
Setting up environment
Running installer
... checking environment variables ...

########################################################
make_installer.pl, version 1.0
Product list file: openoffice.lst
Taking setup script from solver
Unpackpath: /var/tmp/portage/app-office/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/instsetoo_native/util
Compiler: unxlngi6
Product: OpenOffice
BuildID: 9073
Build: OOD680
No minor set
Product version
Installpath: /usr/lib/openoffice
Package format: native
Package list file: ../inc_openoffice/unix/packagelist.txt
Addon-Package list file: ../inc_openoffice/unix/packagelist_language.txt
Not calling epm
No file stripping
Unzip ARCHIVE files
services.rdb can be created
Languages:
	ru
########################################################
... checking required files ...
...... searching zip ...
	Found: /usr/bin/zip
...... searching unzip ...
	Found: /usr/bin/unzip
... analyzing openoffice.lst ... 
... analyzing script: /var/tmp/portage/app-office/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/solver/680/unxlngi6.pro/bin/setup_osl.ins ... 
... analyzing directories ... 
... analyzing files ... 
... analyzing scpactions ... 
... analyzing shortcuts ... 
... analyzing profile ... 
... analyzing profileitems ... 
... analyzing modules ... 
------------------------------------
... languages ru ... 
... analyzing files ...
... analyzing files with flag ARCHIVE ...
... analyzing files with flag SCPZIP_REPLACE ...
... analyzing files with flag PATCH_SO_NAME ...
... creating preregistered services.rdb ...

**************************************************
ERROR: ERROR: Could not register all components!
in function: create_services_rdb
**************************************************

**************************************************
ERROR: Saved logfile: /var/tmp/portage/app-office/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/instsetoo_native/util/OpenOffice//logging/ru/log_OOD680__ru.log
**************************************************
... cleaning the output tree ...
... removing directory /var/tmp/portage/app-office/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/instsetoo_native/util/OpenOffice//zip/ru ...
... removing directory /var/tmp/portage/app-office/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/instsetoo_native/util/OpenOffice//services.rdb/ru_witherror_1 ...
Sat Dec  2 16:27:32 2006 (00:47 min.)
Failed to install:  at ./ooinstall line 129.
make: *** [install] &#1054;&#1096;&#1080;&#1073;&#1082;&#1072; 1

!!! ERROR: app-office/openoffice-2.0.4 failed.
Call stack:
  ebuild.sh, line 1568:   Called dyn_install
  ebuild.sh, line 1022:   Called src_install
  openoffice-2.0.4.ebuild, line 282:   Called die

!!! Installation failed!
!!! If you need support, post the topmost build error, and the call stack if relevant.

!!! When you file a bug report, please include the following information:
GENTOO_VM=blackdown-jdk-1.4.2  CLASSPATH="" JAVA_HOME="/opt/blackdown-jdk-1.4.2.03"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info

My system info in attachment.




Comment 1


Yury Tereshonkov





          2006-12-02 09:44:26 UTC
        

Created attachment 103226 [details]
System information (emerge --info and other)

Information about my system.




Comment 2


Jakub Moc (RETIRED)






          2006-12-02 09:53:55 UTC
        

We don't support your C[XX]FLAGS, sorry. (And, your python is broken if it was built w/ -ffast-math).





Comment 3


Yury Tereshonkov





          2006-12-03 02:47:30 UTC
        

I told that I run

export CFLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer
-pipe"; export CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -O2
-fomit-frame-pointer -pipe"; emerge python openoffice

I used
C[XX]FLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer
-pipe";

So python was emerged with safety C[XX]FLAGS and openoffice was run with the same safety flags. I didn't ever use agressive flags for openoffice.




Comment 4


Yury Tereshonkov





          2006-12-03 03:12:22 UTC
        

Please see this bug, my flags for openoffice and python was

C[XX]FLAGS="-march=athlon-xp -mtune=athlon-xp -O2 -fomit-frame-pointer
-pipe";




Comment 5


Jakub Moc (RETIRED)






          2006-12-03 03:26:31 UTC
        

File a new bug after you've recompiled your system w/ sane flags, if you still have problems then.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

