Title: 302160 – sys-apps/acl-2.2.49 -fPIC problem
URL: https://bugs.gentoo.org/show_bug.cgi?id=302160

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 302160
sys-apps/acl-2.2.49 -fPIC problem
Last modified: 2010-04-12 15:51:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 302160 
      - sys-apps/acl-2.2.49 -fPIC problem


Summary:
sys-apps/acl-2.2.49 -fPIC problem
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-01-25 12:16 UTC by Cedric Godin





      Modified:
    
2010-04-12 15:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Cedric Godin





          2010-01-25 12:16:05 UTC
        

When rebuilding kde-base/kdelibs-4.3.4 because of media-libs/jpeg update, I have the following error.

[ 37%] Building CXX object kio/CMakeFiles/kio.dir/kssl/ksslx509v3.o
Linking CXX shared library ../lib/libkio.so
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.2/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/4.4.2/../../../../lib64/libacl.a(acl_from_text.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.2/../../../../lib64/libacl.a: could not read symbols: Bad value
collect2: ld a retourné 1 code d'état d'exécution
make[2]: *** [lib/libkio.so.5.3.0] Erreur 1
make[1]: *** [kio/CMakeFiles/kio.dir/all] Erreur 2

It seems related to lack of -fPIC in the acl compilation.

BTW, i have this error on ~x86 too but without the name of the :

[ 37%] Building CXX object kio/CMakeFiles/kio.dir/kssl/ksslutils.o
[ 37%] Building CXX object kio/CMakeFiles/kio.dir/kssl/ksslx509v3.o
Linking CXX shared library ../lib/libkio.so
/usr/lib/gcc/i686-pc-linux-gnu/4.4.2/../../../../i686-pc-linux-gnu/bin/ld: warning: creating a DT_TEXTREL in object.
collect2: ld returned 1 exit status
make[2]: *** [lib/libkio.so.5.3.0] Error 1
make[1]: *** [kio/CMakeFiles/kio.dir/all] Error 2
make: *** [all] Error 2



Reproducible: Always

Steps to Reproduce:
1. emerge -1 =kde-base/kdelibs-4.3.4




Portage 2.2_rc61 (default/linux/amd64/10.0/desktop, gcc-4.4.2, glibc-2.10.1-r1, 2.6.32-gentoo x86_64)
=================================================================
System uname: Linux-2.6.32-gentoo-x86_64-AMD_Athlon-tm-_64_Processor_3200+-with-gentoo-2.0.1
Timestamp of tree: Mon, 25 Jan 2010 07:15:02 +0000
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.4, 3.1.1-r1
dev-util/cmake:      2.8.0
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.0-r1
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.8.5-r3, 1.9.6-r2, 1.10.3, 1.11.1
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon64 -O2 -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests collision-protect distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unmerge-logs unmerge-orphans userfetch userpriv"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="fr_BE.UTF-8"
LC_ALL="fr_BE.UTF-8"
LDFLAGS="-Wl,-z,now"
LINGUAS="fr en_US en_GB"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/gnustep"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 64bit X a52 aac accessibility acl acpi akonadi alsa amd64 archive asf audiofile avahi avi bash-completion berkdb bitmap-fonts blender-game branding bzip2 cairo cdinstall cdparanoia cdr chm chroot cle266 clucene consolekit crypt css cups curl dbus dedicated dga diskio dts dv dvb dvd dvdnav dvdr dvdread eigen elf emerald encode erandom faad fam fame fbcon fbcondecor ffmpeg fftw file-icons firefox flac font-server foomaticdb fts3 fuse gcc-libffi gd geoip gif gimp git glitz gnustep gphoto2 gpm graphviz hal hddtemp hpcups iceweasel icq imap imlib innodb inotify ipv6 irc ithreads jack java jfs joystick jpeg jpeg2k kcal kde kde4 kipi konqueror kontact kqemu largeterminal lcms libffi libnotify libwww live lm_sensors lzma lzo mad maildir mdnsresponder-compat memlimit menu-plugin mikmod mjpeg mmx mmxext mng modperl mozilla moznocompose moznoirc moznomail moznopango mozsvg mp3 mp4 mpeg mplayer mpm-worker msn multilib musepack musicbrainz ncurses nepomuk net network new-hpcups nls no-old-linux no_wxgtk1 nowebdav nptl nptlonly nsplugin ntfs nvidia objc offensive ogg oggvorbis on-the-fly-crypt openal openexr opengl openssl pam pcf pcre pdf pdfkit pdflib perl pg_legacytimestamp plasma png policykit postgres ppds python qmax qt qt3support qt4 quicktime raptor rdesktop readline redland rtc sasl sblive scanner sdl semantic-desktop session slang slp solver speex spell sql sqlite sse sse2 ssl startup-notification subversion svg theora threads tidy tiff trash-plugin truetype truetype-fonts type1-fonts unicode usb userlocales utempter v4l v4l2 vcd vdesktop vhosts videos visualization vlm vmmouse vorbis webdav-neon webkit wmf wv2 xanim xattr xcb xcomposite xfs xine xinerama xml xml2 xorg xpm xrandr xulrunner xv xvid xvmc yv12 zip zlib" ALSA_CARDS="emu10k1 intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr en_US en_GB" RUBY_TARGETS="ruby18" SANE_BACKENDS="hp" USERLAND="GNU" VIDEO_CARDS="nvidia" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Samuli Suominen (RETIRED)






          2010-01-25 12:36:22 UTC
        

Try deleting /usr/lib/libacl.a or /lib/libacl.a (it won't break your system, because the .so will still be there) 

and/or 

re-emerging sys-apps/acl

and post emerge --info




Comment 2


Samuli Suominen (RETIRED)






          2010-01-25 12:36:46 UTC
        

(In reply to comment #1)
> and post emerge --info

Nevermind about this, was for another bug.





Comment 3


Cedric Godin





          2010-01-25 15:19:01 UTC
        

seems to work now. Sorry for the noise. Can be closed as invalid.




Comment 4


Cyp





          2010-04-12 15:51:09 UTC
        

I had the same issue just now when building kdelibs. Removing the following two orphaned symlinks from 2008 and reemerging acl fixed the issue. (Reemerging acl was probably redundant.) No idea what the symlinks were doing there.

lrwxrwxrwx 1 root root    19 Nov 14  2008 /lib/libacl.a -> /usr/lib64/libacl.a
lrwxrwxrwx 1 root root    20 Nov 14  2008 /lib/libacl.la -> /usr/lib64/libacl.la










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

