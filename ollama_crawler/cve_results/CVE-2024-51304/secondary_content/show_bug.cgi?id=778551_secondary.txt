Title: 778551 – app-editors/emacs-27.2 failed to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=778551

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 778551
app-editors/emacs-27.2 failed to emerge
Last modified: 2021-03-27 19:04:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 778551 
      - app-editors/emacs-27.2 failed to emerge


Summary:
app-editors/emacs-27.2 failed to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

GNU Emacs project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-03-27 06:37 UTC by Leonid Kopylov





      Modified:
    
2021-03-27 19:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



ionen
jstein









See Also:


778554





Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,9.58 KB,
                text/plain)

            
2021-03-27 06:37 UTC,

            Leonid Kopylov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Leonid Kopylov





          2021-03-27 06:37:00 UTC
        

# emerge -pqv '=app-editors/emacs-27.2::gentoo'
[ebuild     U ] app-editors/emacs-27.2 [27.2_rc1] USE="acl alsa cairo dbus dynamic-loading games gconf gfile gif gmp gpm gsettings gtk gui harfbuzz imagemagick inotify jpeg json kerberos lcms libxml2 m17n-lib mailutils png sound source ssl svg systemd threads tiff xft xpm xwidgets zlib -Xaw3d (-aqua) -athena -gzip-el -livecd -motif (-selinux) -toolkit-scroll-bars -wide-int"

# emerge --info '=app-editors/emacs-27.2::gentoo'
Portage 3.0.17 (python 3.8.8-final-0, default/linux/amd64/17.1/desktop/gnome/systemd, gcc-10.2.0, glibc-2.32-r8, 5.11.10-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-5.11.10-gentoo-x86_64-Intel-R-_Core-TM-_i7-8700B_CPU_@_3.20GHz-with-glibc2.2.5
KiB Mem:     8121560 total,   3813956 free
KiB Swap:    8388604 total,   8388604 free
Timestamp of repository gentoo: Sat, 27 Mar 2021 06:00:01 +0000
Head commit of repository gentoo: 69f6a49d930bb7e2388c32e4e28c4ff3e2569b84
sh bash 5.1_p4
ld GNU ld (Gentoo 2.35.2 p1) 2.35.2
ccache version 4.2 [disabled]
app-shells/bash:          5.1_p4::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.32.1::gentoo
dev-lang/python:          2.7.18_p7::gentoo, 3.8.8::gentoo, 3.9.2::gentoo, 3.10.0_alpha6-r2::gentoo
dev-util/ccache:          4.2::gentoo
dev-util/cmake:           3.20.0::gentoo
sys-apps/baselayout:      2.7-r1::gentoo
sys-apps/sandbox:         2.21::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.13.4-r2::gentoo, 1.16.3-r1::gentoo
sys-devel/binutils:       2.35.2::gentoo
sys-devel/gcc:            10.2.0-r5::gentoo
sys-devel/gcc-config:     2.4::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.11::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r8::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts:
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1

guru
    location: /var/lib/layman/guru
    sync-type: laymansync
    sync-uri: https://anongit.gentoo.org/git/repo/proj/guru.git
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA google-chrome OPERA-2018 PUEL AnyDesk-TOS geekbench TeamViewer microsoft-edge"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php8.0/ext-active/ /etc/php/cgi-php8.0/ext-active/ /etc/php/cli-php8.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/var/cache/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
GENTOO_MIRRORS="http://mirror.isoc.org.il/pub/gentoo/"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="7zip X a52 aac aacs aalib accessibility acl acpi addc addns ads afp afs alsa amd64 amr amrenc ao apache2 apidoc appindicator archive argon2 aspell audio audit authdaemond autoipd avif base bcache bcmath bcrypt bdplus benchmarks berkdb bidi bluetooth bluetooth-sound bluray bookmarks branding brotli bzip2 cacert cairo calendar capstone ccache cdda cddb cdio cdparanoia cdr cgi cgroup-hybrid chromaprint chromium cli clockdiff cluster codec2 colord conntrack contrib contribdnn cookie_check corefonts coverage creds cron crypt cryptsetup cscope cue cups curl daap dbus dec265 declarative designer device-mapper discover djvu dnd dns dns-over-tls doc doctool dos dot doxysearch drafts dri dts dvb dvd dvdr dvi dynamic-loading eds efi egl elasticsearch emacs emboss enc265 enchant encode eolconv equalizer evo examples excel exif experimental extra extras faac faad fam fastcgi fat fbcon fcitx4 fdk ffmpeg firebird firewalld firmware flac flickr flint flite fontconfig fontforge fonts fortran fpm fprint fpx freebox fribidi ftp fuse games gconf gd gdbm gdk-pixbuf geoclue geoip2 geolocation gfile gif git glade gles2 glib glide glusterfs gme gmp gnome gnome-keyring gnome-online-accounts go google googledrive gopher gpg gphoto2 gpm grafana graph graphviz grub gsettings gsf gsm gssapi gstreamer gtk gtk-doc gtk3 gui guile haptic harfbuzz hdri heif help highlight homed howl-compat hpn html http http2 ibus iconv icu id3tag idn image imagemagick imaging imap imhttp imlib impcap importd inifile inputlirc intl introspection io-uring ios iptc ipv6 ipython isabelle iso jadetex java javamail javascript jpeg json junction justify kate kbd kerberos kernel-hooks kinit kubernetes kvazaar kyotocabinet ladspa lame lapack lapacke latex lcms ldap ldap-bind ldap-sasl ldapdb leaps-timezone lensfun libass libcaca libde265 libevent libglvnd libkms libnotify libotf libproxy librtmp libsecret libsoxr libssh libtar libtesseract libtiger libtirpc libudev libv4l libvisual libxml2 libzfs lirc live lkrn lm-sensors lmdb localstorage location log4j logrotate lua lvm lz4 lzma lzo m17n-lib macosx-notifications mad magic mailutils man math mathml matplotlib maxminddb md5sum mdadm mdblookup mdnsresponder-compat mediawiki mediawiki-experimental metalink mhash mikmod minizip mjpeg mms mng modplug mongo mongodb mount mp3 mp4 mpc mpeg mpfr mpir mplayer mpx mssql mtp mule multilib multipath musepack mysql mysqli nas nat natspec nautilus nbconvert ncurses netapi netgroups nethack netlink netloc network networkauth networkmanager nfs nfsdcld nfsv4 nfsv41 nftables nis nls normalize notebook nptl nscd nsplugin nss ntfsdecrypt ntlm oauth odbc odbcmanual odk offensive office offlinehelp ogg omhttp omhttpfs omudpspoof opencv openexr opengl openh264 openldap openmp openntpd opus orientation overlay overlays ovs pac pam pango parse-clocks parted pcap pci pcntl pcre pcre32 pdf pdfimport pdo perl physfs pipelight pkcs11 pkcs7 playlist plugin-ifdemo plugins png policykit pop portaudio positioning postgres ppds printsupport projectm pskc pulseaudio pwhich pwquality pyglet python qml qr qrcode qt5 quick quicktime quota rabbitmq radio radius rar raw rdp readline realtime recode redis reencrypt reiserfs remote remotecalls rendering repart rpc rrdcgi rsyslog rtmp rubberband ruby samba sample samples sasl savedconfig sbc screencast script sctp sdjournal sdk sdl sdl-image sdlgfx seccomp security-key sendto sensord sensors servletapi sftp share sharedmem shout skins slp smi smtp snapper snappy sndfile sndio snmp soap sockets socks5 sodium sound source source-highlight sox soxr spamassassin sparse speex spell spice spidermonkey split-usr spoof-source spotlight sql sqlite squashfs srp srt ssh sshdump ssl staging startup-notification stemmer stunnel sudo svg symengine symlink sync-plugin-portage sysprof systemd szip taglib tcl tcpd tdb teamd telepathy telnet terminal tevent tfshark theano themes theora thetvdb thread-names threads thunderbolt tidy tiff tk tls-heartbeat tokyocabinet toolame tools tracker trashquota tremor truetype tty-helpers twolame uchardet udev udisks umfpack undi unicode upnp upnp-av upower uring usb usbredir user-session usertools utils v4l vala valadoc vamp vcd vde vdr vhost-user-fs views vim vim-pager vim-syntax virt-network virtfs virtualbox vmware vnc voices vorbis vte vtk wad wavpack wayland web webagg webchannel webdav webengine webkit webp webready websockets widgets wifi winbind wininst wks-server wmf wps wxwidgets x11extras x264 x265 xa xattr xcb xemacs xetex xface xfs xft xindy xine xinerama xinetd xkb xml xmlpatterns xmlreader xmlwriter xmp xpm xps xscreensaver xslt xtables xv xvid xwidgets xxhash yaml yubikey yuv4mpeg z3 zeroconf zeromq zfs zimg zip zlib zmq zram zsh-completion zstd" ABI_X86="64 32" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt rdrand sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="evdev" KERNEL="linux" L10N="en en-US he ru" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="nlpsolver scripting-beanshell wiki-publisher scripting-javascript" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_8" PYTHON_TARGETS="python3_8" RUBY_TARGETS="ruby26" USERLAND="GNU" VIDEO_CARDS="intel i965 iris vmware vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Leonid Kopylov





          2021-03-27 06:37:27 UTC
        

Created attachment 694623 [details]
build.log




Comment 2


Ionen Wolkens






          2021-03-27 08:13:53 UTC
        

checking for gtk+-3.0 >= 3.10 glib-2.0 >= 2.37.5... yes
checking whether GTK compiles... no
configure: error: Gtk+ wanted, but it does not compile, see config.log.  Maybe some x11-devel files missing?
!!! Please attach the following file when seeking support:
!!! /var/tmp/portage/app-editors/emacs-27.2/work/emacs-27.2/config.log

Considering you filed a 2nd bug also about failing to find gtk3 (bug #778554), I assume there's something off with your gtk3 rather than these packages.

As mentioned, the config.log would help.




Comment 3


Leonid Kopylov





          2021-03-27 08:46:24 UTC
        

after reinstalling gtk+, i could merge both packages, but though gtk+ reinstalled, it gave me the following error, but no /var/tmp/portage/x11-libs/gtk+-3.24.26/temp/build.log is exists:

# emerge gtk+ -1qav
[ebuild   R   ] x11-libs/gtk+-3.24.26  USE="X colord cups examples gtk-doc introspection sysprof vim-syntax wayland xinerama (-aqua) -broadway -cloudprint -test" ABI_X86="32 (64) (-x32)"

Would you like to merge these packages? [Yes/No]
>>> Verifying ebuild manifests
>>> Emerging (1 of 1) x11-libs/gtk+-3.24.26::gentoo
>>> Installing (1 of 1) x11-libs/gtk+-3.24.26::gentoo
>>> Failed to execute postinst for x11-libs/gtk+-3.24.26
>>> Jobs: 1 of 1 complete                           

 * Messages for package x11-libs/gtk+-3.24.26:

 * FAILED postinst: 1
 * ERROR: x11-libs/gtk+-3.24.26::gentoo failed (postinst phase):
 *   Update immodules cache failed (for amd64)
 *
 * Call stack:
 *     ebuild.sh, line  125:  Called pkg_postinst
 *   environment, line 2811:  Called multilib_parallel_foreach_abi 'multilib_pkg_postinst'
 *   environment, line 2592:  Called multibuild_foreach_variant '_multilib_multibuild_wrapper' 'multilib_pkg_postinst'
 *   environment, line 2132:  Called _multibuild_run '_multilib_multibuild_wrapper' 'multilib_pkg_postinst'
 *   environment, line 2130:  Called _multilib_multibuild_wrapper 'multilib_pkg_postinst'
 *   environment, line  679:  Called multilib_pkg_postinst
 *   environment, line 2809:  Called die
 * The specific snippet of code:
 *           gnome2_query_immodules_gtk3 || die "Update immodules cache failed (for ${ABI})"
 *
 * If you need support, post the output of `emerge --info '=x11-libs/gtk+-3.24.26::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=x11-libs/gtk+-3.24.26::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/x11-libs/gtk+-3.24.26/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/x11-libs/gtk+-3.24.26/temp/environment'.
 * Working directory: '/var/tmp/portage/x11-libs/gtk+-3.24.26/homedir'
 * S: '/var/tmp/portage/x11-libs/gtk+-3.24.26/work/gtk+-3.24.26'




Comment 4


Jonas Stein






          2021-03-27 19:04:08 UTC
        

It is sad to read that you have problems with the software. The situation seems to be a bit more complicate and requires some analysis.
We can not help you efficiently via bug tracker. The bug tracker aims rather on specific problems in .ebuilds and less on individual systems. 

I have had very good experience on the gentoo IRC [1] with questions like this. Of course there are also forums and mailing lists [2,3].
I hope you understand, that I will close the bug here therefore and wish you good luck on one of the mentioned channels [4].
Please reopen the ticket in order to provide an indication for an specific error in an ebuild or any gentoo related product.

[1] https://www.gentoo.org/get-involved/irc-channels/
[2] https://forums.gentoo.org/
[3] https://www.gentoo.org/get-involved/mailing-lists/all-lists.html
[4] https://www.gentoo.org/support/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

