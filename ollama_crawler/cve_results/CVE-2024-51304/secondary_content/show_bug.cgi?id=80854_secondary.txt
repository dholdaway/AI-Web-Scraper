Title: 80854 – Xfreecell fails to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=80854

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 80854
Xfreecell fails to emerge
Last modified: 2005-02-07 07:31:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 80854 
      - Xfreecell fails to emerge


Summary:
Xfreecell fails to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:



http://forums.gentoo.org/viewtopic.ph...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-05 05:17 UTC by Arne Mejlholm (RETIRED)





      Modified:
    
2005-02-07 07:31 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



flash3001
gomezloper









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




new ebuild

              (xfreecell-1.0.5b-r1.ebuild,875 bytes,
                text/plain)

            
2005-02-05 05:18 UTC,

            Arne Mejlholm (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Arne Mejlholm (RETIRED)






          2005-02-05 05:17:37 UTC
        

R!tman noticed a bug when emerging xfreecell:

http://forums.gentoo.org/viewtopic.php?t=290612&highlight=xfreecell

the ebuild seems to fail because there is no explicit src_compile() declaration.

add this:

src_compile() {
        emake
}

and the ebuild compiles and installs smoothly.

The new ebuild is attached below, someone should commit it as soon as possible,
as the current ebuild is broken...

Thanks




Comment 1


Arne Mejlholm (RETIRED)






          2005-02-05 05:18:08 UTC
        

Created attachment 50436 [details]
new ebuild




Comment 2


Chris Gianelloni (RETIRED)






          2005-02-05 08:00:16 UTC
        

Ebuilds don't need an implicit src_compile if it uses the default, which this package does.  Now, I just merged it, and it compiles fine.

Since there was no "emerge info" posted, nor any other useable information, I'm going to RESOLVE this one as WORKSFORME.




Comment 3


Arne Mejlholm (RETIRED)






          2005-02-05 08:09:51 UTC
        

Well, I've been able to reproduce it on two machines, so something is not
right... 

Machine 1 (running x86):

Portage 2.0.51-r15 (default-linux/x86/2004.0, gcc-3.3.5, glibc-2.3.4.20040808-r1
, 2.6.10-gentoo-r6 i686)
=================================================================
System uname: 2.6.10-gentoo-r6 i686 Intel(R) Pentium(R) 4 Mobile CPU 1.60GHz
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4 [2.3.4 (#1, Dec 21 2004, 05:01:36)]
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.4
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.8.5-r2, 1.5, 1.4_p6, 1.6.3, 1.7.9, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O3 -march=pentium4 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config /usr/kde/
3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/confi
g/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/shar
e/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=pentium4 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks parallel-fetch sandbox sfperms"
GENTOO_MIRRORS="http://mirror.uni-c.dk/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/mnt/personal/gentoo/overlay"
SYNC="rsync://tuffy/gentoo-portage/"
USE="x86 X aalib alsa apache2 apm avi bash-completion berkdb bitmap-fonts cdr cr
ypt cups dvd emacs encode esd f77 fam flac font-server 

Machine 2 (running ~x86):

Portage 2.0.51-r15 (default-linux/x86/2004.2, gcc-3.3.4, glibc-2.3.4.20041102-r0
, 2.6.10-gentoo-r4 i686)
=================================================================
System uname: 2.6.10-gentoo-r4 i686 Intel(R) Pentium(R) 4 CPU 2.60GHz
Gentoo Base System version 1.6.9
Python:              dev-lang/python-2.3.4 [2.3.4 (#1, Dec 20 2004, 22:42:22)]
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disable
d]
dev-lang/python:     2.3.4
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.8.5-r2, 1.5, 1.4_p6, 1.6.3, 1.7.9, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r2
sys-devel/libtool:   1.5.10-r3
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-march=pentium4 -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share
/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/shar
e/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/sh
are/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/tex
mf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://mirror.uni-c.dk/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://tuffy/gentoo-portage"
USE="x86 X alsa apm arts avi berkdb bitmap-fonts crypt cups encode esd f77 fam f
ont-server foomaticdb fortran gdbm gif gnome gpm gtk gtk2 imlib ipv6 java jpeg k
de libg++ libwww mad mikmod motif mpeg ncurses nls nptl oggvorbis opengl oss pam
 pdflib perl png python qt quicktime readline sdl slang spell ssl svga tcpd tete
x tiff truetype truetype-fonts type1-fonts xml2 xmms xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 4


Chris Gianelloni (RETIRED)






          2005-02-05 10:06:20 UTC
        

Confirmed working on 5 machines using both x86 and amd64 stable and testing.

When an ebuild does not implicitly list a src_compile, then it falls back to the default.  Are you 100% positive that there is not something in your environment that is causing the problem?  I suggest you not only emerge sync again, but also that you try upgrading to the 2004.3 profile.

I cannot reproduce this "error" as you have never posted one.  Hence, WORKSFORME... several times, in fact.






Comment 5


Arne Mejlholm (RETIRED)






          2005-02-05 11:31:02 UTC
        

Strange. Well I've spoken to two of my friends and they also seem to have the
problem. Furthermore I changed to the 2004.3 profile on all the machines and the
problem still occurs. I even tested it on a machine i'm in the process of installing and the result is the same:

brick make.profile # emerge xfreecell                /etc/make.profile 20:19:43
Calculating dependencies ...done!
>>> emerge (1 of 1) games-board/xfreecell-1.0.5b to /
>>> md5 src_uri ;-) xfreecell-1.0.5b.tgz
>>> md5 src_uri ;-) MSNumbers.gz
>>> Unpacking source...
>>> Unpacking xfreecell-1.0.5b.tgz to /var/tmp/portage/xfreecell-1.0.5b/work
>>> Unpacking MSNumbers.gz to /var/tmp/portage/xfreecell-1.0.5b/work
 * Applying xfreecell-1.0.5b-gentoo.patch ...                             [ ok ]
>>> Source unpacked.
>>> Test phase [not enabled]: games-board/xfreecell-1.0.5b

>>> Install xfreecell-1.0.5b into /var/tmp/portage/xfreecell-1.0.5b/image/ categ
ory games-board
>>> dobin: making xfreecell executable...
install: cannot stat `xfreecell': No such file or directory

!!! ERROR: games-board/xfreecell-1.0.5b failed.
!!! Function src_install, Line 27, Exitcode 4
!!! dogamesbin failed
!!! If you need support, post the topmost build error, NOT this status message.

As for something in the enviroment, I can't think of anything that should 
influence portage's behavior. 




Comment 6


Arne Mejlholm (RETIRED)






          2005-02-05 12:02:14 UTC
        

I think I may have located the real problem. If I comment the following line
in /usr/portage/eclass/games.eclass:

EXPORT_FUNCTIONS pkg_postinst src_compile pkg_setup

it builds just fine. If I then uncomment it it fails again.

Could the problem be with the gap between src_compile() and games_src_compile()?





Comment 7


Mr. Bones. (RETIRED)






          2005-02-05 13:37:37 UTC
        

the eclass was broken.  it's fixed in portage again.




Comment 8


Mr. Bones. (RETIRED)






          2005-02-07 07:31:28 UTC
        

*** Bug 81117 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

