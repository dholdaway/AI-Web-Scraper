Title: 118556 – media-gfx/digikam-0.8.0-r1: jpeg files with exif data crash digikamalbums kioslave
URL: https://bugs.gentoo.org/show_bug.cgi?id=118556

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 118556
media-gfx/digikam-0.8.0-r1: jpeg files with exif data crash digikamalbums kioslave
Last modified: 2006-02-10 15:37:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 118556 
      - media-gfx/digikam-0.8.0-r1: jpeg files with exif data crash digikamalbums kioslave


Summary:
media-gfx/digikam-0.8.0-r1: jpeg files with exif data crash digikamalbums kio...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-10 10:35 UTC by Ruben Jenster





      Modified:
    
2006-02-10 15:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kccricket









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ruben Jenster





          2006-01-10 10:35:48 UTC
        

When importing jpeg files that contain exif data into an album the
digikamalbums kioslave chrashes.

Furthermore whenthe album library folder contains some jpegs with exif data and 
digikam is configured to search for new fotos on startup it crashes on every startup.

I do expierence this problem on both of my systems. 
I recompiled following packages with '-O2' instead of '-Os' but it didn't help:

media-libs/jpeg-6b-r5
media-libs/libkipi-0.1.2
media-libs/libexif-0.6.9
media-libs/libkexif-0.2.2



Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-nofb i686)
=================================================================
System uname: 2.6.15-nofb i686 AMD Athlon(tm) XP 2200+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -Os -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -Os -pipe -fomit-frame-pointer"
DISTDIR="/home/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/home/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/usr"
SYNC="rsync://server.kellernet.local/gentoo-portage"
USE="x86 3dnow 3dnowex X aac acpi alsa arts asf audiofile avi bash-completion berkdb bitmap-fonts bluetooth bzip2 cdb cdr crypt css cups curl dbus dvb dvd dvdr eds emboss encode exif expat fam ffmpeg flac foomaticdb fortran gcj gd gdbm gif glut gmp gphoto2 gpm gtk2 hal idn ieee1394 imagemagick imlib ipv6 jack java javascript jikes jpeg kde kdeenablefinal ladspa lcms libg++ libwww lirc lm_sensors logitech-mouse mad mhash mikmod mmx mng mp3 mpeg mplayer musicbrainz mysql ncurses nls nptl nsplugin nvidia ogg oggvorbis openal openexr opengl pcre pda pdflib perl php png ppds python qt quicktime readline ruby samba scanner sdl spell sqlite sse ssl subversion suspend2 svg tcpd tetex threads tiff truetype truetype-fonts type1-fonts udev unicode usb userlocales utf8 v4l vcd vorbis win32codecs xine xinerama xml2 xmms xv xvid zeroconf zlib linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, MAKEOPTS



Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.14-thinkpad-r9 i686)
=================================================================
System uname: 2.6.14-thinkpad-r9 i686 Intel(R) Pentium(R) M processor 1700MHz
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=pentium-m -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -march=pentium-m -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/usr"
SYNC="rsync://server.kellernet.local/gentoo-portage"
USE="x86 X aac acpi alsa apache2 arts asf audiofile avi bash-completion berkdb bitmap-fonts bzip2 cdb cddb cdr crypt css cups curl dbus dvd dvdr eds emboss encode exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gmp gphoto2 gpm gtk2 hal idn imagemagick imlib ipv6 jack java javascript jikes jpeg kcal kde kdeenablefinal lcms libg++ libwww mad math mhash mikmod mmx mng mp3 mpeg mysql ncurses nls nptl nsplugin ogg oggvorbis openal openexr opengl pcmcia pcre pda pdflib perl php png ppds python qt quicktime rdesktop readline ruby scanner sdl spell sqlite sse sse2 ssl subversion svg tcpd tetex threads tiff truetype truetype-fonts type1-fonts udev unicode usb userlocales utf8 vcd vorbis win32codecs xine xinerama xml2 xmms xv xvid zeroconf zlib linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET




Comment 1


Lamarque V. Souza





          2006-01-11 11:46:19 UTC
        

Downgrading libexif to libexif-0.5.12-r3 makes digikam work again. There is only a little problem, when compiling digikam in my system it was linked to libexif.so.10 (libexif-0.6.x), I had to create a symbolic link (ln -s /usr/lib/libexif.so.9.1.2 /usr/lib/libexif.so.10) to make it work. I recompiled digikam with libexif-0.5.12-r3 but it insisted to use libexif.so.10.




Comment 2


Ruben Jenster





          2006-01-11 13:30:20 UTC
        

Thanks, that fixed it.
The dependency in the digikam ebuild should definitly be fixed.

Regards,
Ruben




Comment 3


Keith Constable





          2006-02-10 15:37:09 UTC
        

I vote that this bug should be reopened or revisited.  Downgrading to an old version of libexif is certainly not a fix (at least not a fix I'd be willing to use).

After some very methodical testing, I found that the culprit was actually libkexif, not libexif.  Specifically, the -Os CFLAG caused the bug for me.  If I rebuilt libkexif with -O2 or -O3, I was able to import images as expected.  I even went down to CFLAGS="-mtune=i686 -Os -pipe".  As long as -Os was present for libkexif, digikam would fail to add new images and crash the next time it was started.

Portage 2.1_pre4-r1 (default-linux/x86/2005.0, gcc-3.4.5, glibc-2.3.6-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(TM) XP 1800+
Gentoo Base System version 1.12.0_pre15
ccache version 2.4 [enabled]
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -mtune=i686 -march=athlon-xp -pipe -fomit-frame-pointer -mmmx -msse -m3dnow -mfpmath=sse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-Os -mtune=i686 -march=athlon-xp -pipe -fomit-frame-pointer -mmmx -msse -m3dnow -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks parallel-fetch sandbox strict"
GENTOO_MIRRORS="ftp://mirror.datapipe.net/gentoo http://mirror.usu.edu/mirrors/gentoo/ http://distro.ibiblio.org/pub/linux/distributions/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="x86 3dnow X a52 aac acpi alsa asf avi bitmap-fonts bzip2 cairo cdparanoia crypt css cups dga dts dv dvd dvdr dvdread emboss encode faac faad ffmpeg flac foomaticdb gecko-sdk gif glitz gnutls gpm gstreamer gtk gtk2 gtkhtml imlib java javascript jpeg kdeenablefinal libg++ libwww mad mikmod mmap mmx mng monkey motif moznocompose moznoirc moznomail mozsvg mp3 mpeg ncurses network nptl nsplugin nvidia offensive ogg oggvorbis opengl pam pcre pdflib perl physfs png python qt quicktime readline real rtc samba sdl speex spell sse ssl svg tcltk tcpd tga theora tidy tiff truetype truetype-fonts type1-fonts unicode urandom usb vidix vorbis win32codecs wmf xml xml2 xmms xprint xv xvid xvmc yv12 zlib elibc_glibc kernel_linux userland_GNU video_cards_nvidia"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS, LINGUAS









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

