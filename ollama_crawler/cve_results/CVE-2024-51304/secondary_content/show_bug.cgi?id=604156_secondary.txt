Title: 604156 – QA_SONAME_NO_SYMLINK problem is misdetected as QA_SONAME
URL: https://bugs.gentoo.org/show_bug.cgi?id=604156

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 604156
QA_SONAME_NO_SYMLINK problem is misdetected as QA_SONAME
Last modified: 2017-01-01 21:13:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 604156 
      - QA_SONAME_NO_SYMLINK problem is misdetected as QA_SONAME


Summary:
QA_SONAME_NO_SYMLINK problem is misdetected as QA_SONAME
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Interface (emerge)

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-12-30 15:38 UTC by Andrew Savchenko





      Modified:
    
2017-01-01 21:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



qa









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew Savchenko






          2016-12-30 15:38:44 UTC
        

Hi,

as can be seen from bug 603016, when library has SONAME, but has no symlinks for libfoo.so, this problem is reported as:

 * QA Notice: The following shared libraries lack a SONAME

While it should be reported like "lacks proper symlinks".




Comment 1


Zac Medico






          2016-12-30 20:01:11 UTC
        

If just built net-libs/xrootd-4.4.0 locally, which is the same version bug 603016 was reported against, and SONAME really is lacking from the relevant files. I checked with both scanelf and objdump. I don't know why we're getting different results.

Portage 2.3.3 (python 3.5.2-final-0, default/linux/amd64/13.0/desktop, gcc-4.9.3, glibc-2.22-r4, 4.4.26-1021 x86_64)
=================================================================
System uname: Linux-4.4.26-1021-x86_64-AMD_A4-6210_APU_with_AMD_Radeon_R3_Graphics-with-gentoo-2.2
KiB Mem:     7061104 total,    462696 free
KiB Swap:    7061088 total,   6808456 free
Timestamp of repository gentoo: Sat, 12 Nov 2016 00:45:01 +0000
sh bash 4.3_p48
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
distcc 3.2rc1 x86_64-pc-linux-gnu [disabled]
ccache version 3.2.4 [disabled]
app-shells/bash:          4.3_p48::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.22.2::gentoo
dev-lang/python:          2.7.10-r1::gentoo, 3.4.3-r1::gentoo, 3.5.2::gentoo
dev-util/ccache:          3.2.4::gentoo
dev-util/cmake:           3.5.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.21.7::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.10.3-r1::gentoo, 1.11.6-r1::gentoo, 1.12.6::gentoo, 1.14.1-r1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.3::gentoo, 5.3.0::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.4::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r4::gentoo




Comment 2


Andrew Savchenko






          2017-01-01 13:53:26 UTC
        

Indeed, something is very different on my systems: ago also reports that package lacks SONAME: https://bugs.gentoo.org/show_bug.cgi?id=603016#c3

I'll close this bug for now as it looks like problem is elsewhere.

By the way, can you please provide USE, CXXFLGAS and LDFLAGS you used for xrootd?




Comment 3


Zac Medico






          2017-01-01 21:13:09 UTC
        

(In reply to Andrew Savchenko from comment #2)
> By the way, can you please provide USE, CXXFLGAS and LDFLAGS you used for
> xrootd?

[ebuild  N    ~] net-libs/xrootd-4.4.0::gentoo  USE="readline ssl -doc -fuse -http -kerberos {-test}"
CXXFLAGS="-O2 -pipe -frecord-gcc-switches"
LDFLAGS="-Wl,--as-needed -Wl,--hash-style=gnu"









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

