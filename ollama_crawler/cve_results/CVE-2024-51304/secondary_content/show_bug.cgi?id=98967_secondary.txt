Title: 98967 – vserver apache graceful restart not correct. Connect client to server - child pid nnnn exit signal Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=98967

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 98967
vserver apache graceful restart not correct. Connect client to server - child pid nnnn exit signal Segmentation fault
Last modified: 2006-06-26 09:25:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 98967 
      - vserver apache graceful restart not correct. Connect client to server - child pid nnnn exit signal Segmentation fault


Summary:
vserver apache graceful restart not correct. Connect client to server - child...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Apache Team - Bugzilla Reports








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

98991

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-07-14 02:18 UTC by SerjVarshavskiy





      Modified:
    
2006-06-26 09:25 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


SerjVarshavskiy





          2005-07-14 02:19:56 UTC
        

root: 
kernel linux-2.6.11.6-vserver-1.9.5 
make.profile /usr/portage/profiles/default-linux/x86/2005.0 

variant "ALL options to grsecur OFF" Yields the same results 

make.conf root server: 
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer" 
CHOST="i686-pc-linux-gnu" 
CXXFLAGS="${CFLAGS}" 
MAKEOPTS="-j2" 
USE="-X -kde -alsa cdr dvd" 
FEATURES="buildpkg ccache fixpackages" 
PKGDIR="/usr/packages" 
DISTDIR="/usr/distfiles" 

make.conf for vservers: 
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer" 
CHOST="i686-pc-linux-gnu" 
CXXFLAGS="${CFLAGS}" 
USE="hardened pic -X -kde -alsa cdr dvd" 
MAKEOPTS="-j2" 
PKGDIR="/usr/packages" 
DISTDIR="/usr/distfiles" 

in vserver Apache/1.3.33 (Unix) (Gentoo/Linux) mod_ssl/2.8.22 OpenSSL/0.9.7e 
PHP/4.3.11 

graceful restart not corrected 

vserver vxxx exec /etc/init.d/apache reload 
and connect client to server: 

[Thu Jul 14 13:20:31 2005] [notice] SIGUSR1 received. Doing graceful restart 
[Thu Jul 14 13:20:31 2005] [notice] Apache/1.3.33 (Unix) (Gentoo/Linux) 
mod_ssl/2.8.22 OpenSSL/0.9.7e PHP/4.3.11 configured -- resuming normal 
operations 
[Thu Jul 14 13:20:31 2005] [notice] suEXEC mechanism enabled 
(wrapper: /usr/sbin/suexec) 
[Thu Jul 14 13:20:31 2005] [notice] Accept mutex: sysvsem (Default: sysvsem) 
[Thu Jul 14 13:20:43 2005] [notice] child pid 11349 exit signal Segmentation 
fault (11) 

if vserver vxxx exec /etc/init.d/apache stop 
vserver vxxx exec /etc/init.d/apache start 

to all works OK 

It is very necessary such graceful restart a apache server 
pls HELP (sorry bad english)

Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.3.5-20050130, glibc-
2.3.4.20041102-r1, 2.6.11.6-grsec-vs1.9.5 i686)
=================================================================
System uname: 2.6.11.6-grsec-vs1.9.5 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.12
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.10
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share
/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/distfiles"
FEATURES="autoconfig buildpkg ccache distlocks fixpackages sandbox sfperms 
strict"
GENTOO_MIRRORS="http://gentoo.kurchatov.ru http://mirror.aiya.ru/pub/gentoo 
ftp://mirror.aiya.ru/pub/gentoo  ftp://mirror.averse.net/pub/gentoo 
http://mirror.averse.net/pub.gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://192.168.1.47/gentoo-portage"
USE="x86 apm arts avi berkdb bitmap-fonts cdr crypt cups dvd emboss encode 
foomaticdb fortran freetds gdbm gif gnome gpm imlib ipv6 jpeg libg++ libwww 
mad mikmod motif mp3 mpeg mysql ncurses nls oggvorbis opengl oss pam pdflib 
perl png python quicktime readline sdl spell ssl tcpd tiff truetype truetype-
fonts type1-fonts xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2005-07-14 02:31:56 UTC
        

NOT a bugzilla product bug. Please, kindly read the instructions BEFORE filing a
bug. 

http://bugs.gentoo.org/enter_bug.cgi?format=guided
<snip>
GENTOO LINUX IS WHERE YOU PUT EBUILD BUGS.

Gentoo Linux:  	 The Gentoo Linux Distribution - Ebuilds and System related
issues. If you're unsure where your bugs go, then file them here.
</snip>

http://www.gentoo.org/doc/en/bugzilla-howto.xml




Comment 2


Jakub Moc (RETIRED)






          2005-07-14 04:26:39 UTC
        

*** Bug 98991 has been marked as a duplicate of this bug. ***




Comment 3


Benedikt Böhm (RETIRED)






          2005-07-14 11:54:11 UTC
        

why is this a vserver issue? 




Comment 4


Michael Stewart (vericgar) (RETIRED)






          2005-09-17 19:36:30 UTC
        

Is anyone able to reproduce this bug?




Comment 5


Robert Wolf





          2006-05-30 00:18:00 UTC
        

Hello. I have the same problem. When logrotate is started at about 3:00 a.m., it does postrotate script, which is /etc/init.d/apache reload, and then I cannot connect to apache. In the log, there is 

[Tue May 30 03:10:06 2006] [notice] seg fault or similar nasty error detected in the parent process

I have Server: Apache/2.0.55, Interface: mod_ssl/2.0.55, Library: OpenSSL/0.9.7i from ebuild version 2.0.55-r1.




Comment 6


Robert Wolf





          2006-05-30 00:19:32 UTC
        

Wow, now I found this bug is old, but I found this problem maybe a few months ago.




Comment 7


Michael Stewart (vericgar) (RETIRED)






          2006-06-26 09:25:56 UTC
        

No one is able to reproduce this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

