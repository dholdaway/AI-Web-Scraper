Title: 189202 – Emerging netbeans-5.5-r6 with jdk-1.5 fails with out of memory error
URL: https://bugs.gentoo.org/show_bug.cgi?id=189202

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 189202
Emerging netbeans-5.5-r6 with jdk-1.5 fails with out of memory error
Last modified: 2007-08-17 11:09:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 189202 
      - Emerging netbeans-5.5-r6 with jdk-1.5 fails with out of memory error


Summary:
Emerging netbeans-5.5-r6 with jdk-1.5 fails with out of memory error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Java

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-17 08:54 UTC by Guenther Brunthaler





      Modified:
    
2007-08-17 11:09 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gb_about_gnu









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Guenther Brunthaler





          2007-08-17 08:54:20 UTC
        

When emerging "dev-util/netbeans-5.5-r6", the build process fails with JAVA exception "Cannot allocate memory". Which is strange, because there is plenty of RAM and swap space free in my box.

Reproducible: Always

Steps to Reproduce:
1. emerge =dev-util/netbeans-5.5-r6
2.
3.

Actual Results:  
Execute failed: java.io.IOException: java.io.IOException: Cannot allocate memory

Expected Results:  
emerge succeeding

Installing the older version "dev-util/netbeans-3.6-r1" was not a problem. My system is fully up to date except for netbeans-5.5-r6 - I have done emerge -uDN world as well as emerge --depclean and revdep-rebuild before. Everything's fine except this problem.




Comment 1


Guenther Brunthaler





          2007-08-17 08:56:00 UTC
        

This is the last output before emerge bailed out:
============

jar-prep:

jar:
[jarwithmoduleattributes] Building jar: /var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/netb
eans/platform6/lib/boot.jar

release:
     [copy] Copying 1 file to /var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/netbeans/platf
orm6/lib

  [nbmerge] Failed to build target: all-core/bootstrap

BUILD FAILED
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:557: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:552: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:591: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:573: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:552: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/nbbuild/build.xml:602: The following error occurred while executing this line:
/var/tmp/portage/dev-util/netbeans-5.5-r6/work/netbeans-src/core/bootstrap/build.xml:28: Execute failed: java.io.IOException: java.io.IOException: Cannot allocate memory

Total time: 41 seconds

!!! ERROR: dev-util/netbeans-5.5-r6 failed.
Call stack:
  ebuild.sh, line 1632:   Called dyn_compile
  ebuild.sh, line 983:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  netbeans-5.5-r6.ebuild, line 129:   Called eant '-Dbuild.compiler.deprecation=false' '-Dstop.when.broken.modules=true' 'build-nozip'
  java-utils-2.eclass, line 1919:   Called die

!!! eant failed
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/log/ebuilds/dev-util:netbeans-5.5-r6:20070817-083448.log'.

!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="." JAVA_HOME="/opt/sun-jdk-1.5.0.12"
JAVACFLAGS="-source 1.5 -target 1.5" COMPILER="javac"
and of course, the output of emerge --info





Comment 2


Guenther Brunthaler





          2007-08-17 08:59:38 UTC
        

And here is my emerge --info:

Portage 2.1.2.11 (default-linux/x86/2006.1/desktop, gcc-3.4.6, glibc-2.5-r4, 2.6.22-gentoo-r2 i686)
=================================================================
System uname: 2.6.22-gentoo-r2 i686 AMD Athlon(tm) processor
Gentoo Base System release 1.12.9
Timestamp of tree: Thu, 16 Aug 2007 10:20:01 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86"
ALSA_CARDS="emu10k1"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
ARCH="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CCACHE_SIZE="2G"
CFLAGS="-march=athlon-tbird -O2 -DNDEBUG -pipe -fno-stack-check"
CHOST="i686-pc-linux-gnu"
CLASSPATH="."
CLEAN_DELAY="5"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/local/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CVS_RSH="ssh"
CXXFLAGS="-march=athlon-tbird -O2 -DNDEBUG -pipe -fno-stack-check"
DISPLAY=":0.0"
DISTDIR="/usr/portage/distfiles"
DOC_SYMLINKS_DIR="/usr/share/doc/html"
EDITOR="/usr/bin/joe"
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="--nospinner --verbose"
EMERGE_WARNING_DELAY="10"
FEATURES="ccache distlocks metadata-transfer notitles parallel-fetch prelink sandbox sfperms strict userfetch userpriv usersandbox"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O ${DISTDIR}/${FILE} ${URI}"
FLTK_DOCDIR="/usr/share/doc/fltk-1.1.7/html"
FTP_PROXY="http://proxy:8080"
GCC_SPECS=""
GDK_USE_XFT="1"
GDM_LANG="de_AT.utf8"
GENERATION="2"
GENTOO_MIRRORS="http://ftp.gentoo.or.kr/ http://open-systems.ufl.edu/mirrors/gentoo ftp://darkstar.ist.utl.pt/pub/gentoo/"
GUILE_LOAD_PATH="/usr/share/guile/1.6"
G_BROKEN_FILENAMES="1"
G_FILENAME_ENCODING="UTF-8"





Comment 3


Petteri Räty (RETIRED)






          2007-08-17 09:00:14 UTC
        

(In reply to comment #0)
> When emerging "dev-util/netbeans-5.5-r6", the build process fails with JAVA
> exception "Cannot allocate memory". Which is strange, because there is plenty
> of RAM and swap space free in my box.
> 

How much exactly?




Comment 4


Guenther Brunthaler





          2007-08-17 09:01:42 UTC
        

PORT_LOGDIR="/var/log/ebuilds"
PRELINK_PATH="/usr/local/bin:/usr/local/sbin:/usr/local/opt:/opt:/usr/kde/3.5/lib"
PRELINK_PATH_MASK="/usr/lib/gstreamer-0.10:/usr/lib/gstreamer-0.8:/lib/modules:/usr/lib/locale:/usr/lib/wine:/usr/lib/valgrind:*.la:*.png:*.py:*.pl:*.pm:*.sh:*.xml:*.xslt:*.a:*.js:/opt/doc:/opt/include:/opt/info:/opt/man:/usr/local/opt/doc:/usr/local/opt/include:/usr/local/opt/info:/usr/local/opt/man:/usr/kde"
PS1="\[\033[01;31m\]\h`PS1_nlxbsjpdq50evzj6zaaprqrat shlvl`\[\033[01;34m\]\[\033[01;35m\]`PS1_nlxbsjpdq50evzj6zaaprqrat umask 0022`\[\033[01;34m\] \W `PS1_nlxbsjpdq50evzj6zaaprqrat dirnst`\$\[\033[01;00m\] "
PWD="/home/users/root"
PYTHONDOCS="/usr/share/doc/python-docs-2.4.4/html/lib"
PYTHONPATH="/usr/lib/portage/pym"
QMAKESPEC="linux-g++"
QTDIR="/usr/qt/3"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O ${DISTDIR}/${FILE} ${URI}"
ROOT="/"
ROOTPATH="/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.4.6:/opt/xmingw/bin:/opt/xmingw/i386-mingw32msvc/bin/:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/qt/3/bin:/opt/vmware/server/bin"
RPMDIR="/usr/portage/rpm"
SANE_CONFIG_DIR="/etc/sane.d"
SGML_CATALOG_FILES="/etc/sgml/sgml-docbook.cat:/etc/sgml/openjade-1.3.2.cat:/etc/sgml/sgml-ent.cat:/etc/sgml/sgml-docbook-3.1.cat:/etc/sgml/sgml-lite.cat:/etc/sgml/dsssl-docbook-stylesheets.cat"
SHELL="/bin/bash"
SHLVL="2"
SSL_BITS="2048"
SSL_COMMONNAME="Guenther Brunthaler"
SSL_COUNTRY="AT"
SSL_DAYS="730"
SSL_EMAIL="root@localhost"
SSL_LOCALITY="Vienna"
SSL_ORGANIZATION="Guenther Brunthaler EDV-Dienstleistungen"
SSL_STATE="Vienna"
SSL_UNIT="Preliminary usage."
STAGE1_USE="nptl nptlonly unicode"
STY="10139.pts-3.xtreme"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
TERM="screen"
TERMCAP="SC|screen|VT 100/ANSI X3.64 virtual terminal:\
	:DO=\E[%dB:LE=\E[%dD:RI=\E[%dC:UP=\E[%dA:bs:bt=\E[Z:\
	:cd=\E[J:ce=\E[K:cl=\E[H\E[J:cm=\E[%i%d;%dH:ct=\E[3g:\
	:do=^J:nd=\E[C:pt:rc=\E8:rs=\Ec:sc=\E7:st=\EH:up=\EM:\
	:le=^H:bl=^G:cr=^M:it#8:ho=\E[H:nw=\EE:ta=^I:is=\E)0:\
	:li#38:co#112:am:xn:xv:LP:sr=\EM:al=\E[L:AL=\E[%dL:\
	:cs=\E[%i%d;%dr:dl=\E[M:DL=\E[%dM:dc=\E[P:DC=\E[%dP:\
	:im=\E[4h:ei=\E[4l:mi:IC=\E[%d@:ks=\E[?1h\E=:\
	:ke=\E[?1l\E>:vi=\E[?25l:ve=\E[34h\E[?25h:vs=\E[34l:\
	:ti=\E[?1049h:te=\E[?1049l:us=\E[4m:ue=\E[24m:so=\E[3m:\
	:se=\E[23m:mb=\E[5m:md=\E[1m:mr=\E[7m:me=\E[m:ms:\
	:Co#8:pa#64:AF=\E[3%dm:AB=\E[4%dm:op=\E[39;49m:AX:\
	:vb=\Eg:G0:as=\E(0:ae=\E(B:\
	:ac=\140\140aaffggjjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~..--++,,hhII00:\
	:po=\E[5i:pf=\E[4i:Z0=\E[?3h:Z1=\E[?3l:k0=\E[10~:\
	:k1=\EOP:k2=\EOQ:k3=\EOR:k4=\EOS:k5=\E[15~:k6=\E[17~:\
	:k7=\E[18~:k8=\E[19~:k9=\E[20~:k;=\E[21~:F1=\E[23~:\
	:F2=\E[24~:F3=\E[2P:F4=\E[2Q:F5=\E[2R:F6=\E[2S:\
	:F7=\E[15;2~:F8=\E[17;2~:F9=\E[18;2~:FA=\E[19;2~:kb=^H:\
	:K2=\EOE:kB=\E[Z:kF=\E[1;2B:kR=\E[1;2A:*4=\E[3;2~:\
	:*7=\E[1;2F:#2=\E[1;2H:#3=\E[2;2~:#4=\E[1;2D:%c=\E[6;2~:\
	:%e=\E[5;2~:%i=\E[1;2C:kh=\E[1~:@1=\E[1~:kH=\E[4~:\
	:@7=\E[4~:kN=\E[6~:kP=\E[5~:kI=\E[2~:kD=\E[3~:ku=\EOA:\
	:kd=\EOB:kr=\EOC:kl=\EOD:km:"
USB_DEVFS_PATH="/dev/bus/usb"
USE="3dnow X a52 aac aalib acpi alsa apache2 arts audiofile bash-completion berkdb bitmap-fonts bzip2 cairo caps cddb cdr cli cracklib crypt css cups curl dbus directfb dri dts dv dvd dvdr dvdread ecc emboss encode exif expat fbcon ffmpeg fftw firefox flac foomaticdb fortran freetype ftp fuse gdbm gif gimp glut gmp gphoto2 gpm gstreamer gtk gtk2 hal iconv idea ieee1394 imagemagick imlib isdnlog java5 javascript jbig jikes jp2 jpeg jpeg2k kde kdeenablefinal kdexdeltas kipi lcms ldap libcaca libclamav logrotate lzo mad matroska midi mikmod mmx mng mp3 mpeg mudflap mule musepack musicbrainz ncurses nls nptl nptlonly nsplugin oav odbc ofx ogg openal opengl openmp pam pcre pdf perl pic png postgres ppds pppd python qt qt3 qt4 quicktime readline reflection samba sasl screen sdl session sharedmem slang smartcard sndfile sox speex spell spl sqlite ssl svg symlink tcltk tcpd tetex theora threads tiff tk truetype truetype-fonts type1-fonts unicode usb userlocales utf8 vcd vorbis wxwindows x264 x86 xml xorg xosd xpm xsl xv xvid xvmc zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="nv nvidia fbdev vesa vga"
USER="root"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal"
VIDEO_CARDS="nv nvidia fbdev vesa vga"
VMHANDLE="blackdown-jdk-1.4.2"
WINDOW="0"
XARGS="xargs -r"
XAUTHORITY="/home/users/root/.xauth5IeDuo"
XDG_DATA_DIRS="/usr/share:/usr/kde/3.5/share:/usr/local/share"
_="/usr/bin/emerge"
ftp_proxy="http://proxy:8080"
http_proxy="http://proxy:8080"
no_proxy="localhost 192.168.0.0/16"





Comment 5


Guenther Brunthaler





          2007-08-17 09:02:40 UTC
        

And here ist the last part of my emerge --info

PORT_LOGDIR="/var/log/ebuilds"
PRELINK_PATH="/usr/local/bin:/usr/local/sbin:/usr/local/opt:/opt:/usr/kde/3.5/lib"
PRELINK_PATH_MASK="/usr/lib/gstreamer-0.10:/usr/lib/gstreamer-0.8:/lib/modules:/usr/lib/locale:/usr/lib/wine:/usr/lib/valgrind:*.la:*.png:*.py:*.pl:*.pm:*.sh:*.xml:*.xslt:*.a:*.js:/opt/doc:/opt/include:/opt/info:/opt/man:/usr/local/opt/doc:/usr/local/opt/include:/usr/local/opt/info:/usr/local/opt/man:/usr/kde"
PS1="\[\033[01;31m\]\h`PS1_nlxbsjpdq50evzj6zaaprqrat shlvl`\[\033[01;34m\]\[\033[01;35m\]`PS1_nlxbsjpdq50evzj6zaaprqrat umask 0022`\[\033[01;34m\] \W `PS1_nlxbsjpdq50evzj6zaaprqrat dirnst`\$\[\033[01;00m\] "
PWD="/home/users/root"
PYTHONDOCS="/usr/share/doc/python-docs-2.4.4/html/lib"
PYTHONPATH="/usr/lib/portage/pym"
QMAKESPEC="linux-g++"
QTDIR="/usr/qt/3"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O ${DISTDIR}/${FILE} ${URI}"
ROOT="/"
ROOTPATH="/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.4.6:/opt/xmingw/bin:/opt/xmingw/i386-mingw32msvc/bin/:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/qt/3/bin:/opt/vmware/server/bin"
RPMDIR="/usr/portage/rpm"
SANE_CONFIG_DIR="/etc/sane.d"
SGML_CATALOG_FILES="/etc/sgml/sgml-docbook.cat:/etc/sgml/openjade-1.3.2.cat:/etc/sgml/sgml-ent.cat:/etc/sgml/sgml-docbook-3.1.cat:/etc/sgml/sgml-lite.cat:/etc/sgml/dsssl-docbook-stylesheets.cat"
SHELL="/bin/bash"
SHLVL="2"
SSL_BITS="2048"
SSL_COMMONNAME="Guenther Brunthaler"
SSL_COUNTRY="AT"
SSL_DAYS="730"
SSL_EMAIL="root@localhost"
SSL_LOCALITY="Vienna"
SSL_ORGANIZATION="Guenther Brunthaler EDV-Dienstleistungen"
SSL_STATE="Vienna"
SSL_UNIT="Preliminary usage."
STAGE1_USE="nptl nptlonly unicode"
STY="10139.pts-3.xtreme"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
TERM="screen"
TERMCAP="SC|screen|VT 100/ANSI X3.64 virtual terminal:\
	:DO=\E[%dB:LE=\E[%dD:RI=\E[%dC:UP=\E[%dA:bs:bt=\E[Z:\
	:cd=\E[J:ce=\E[K:cl=\E[H\E[J:cm=\E[%i%d;%dH:ct=\E[3g:\
	:do=^J:nd=\E[C:pt:rc=\E8:rs=\Ec:sc=\E7:st=\EH:up=\EM:\
	:le=^H:bl=^G:cr=^M:it#8:ho=\E[H:nw=\EE:ta=^I:is=\E)0:\
	:li#38:co#112:am:xn:xv:LP:sr=\EM:al=\E[L:AL=\E[%dL:\
	:cs=\E[%i%d;%dr:dl=\E[M:DL=\E[%dM:dc=\E[P:DC=\E[%dP:\
	:im=\E[4h:ei=\E[4l:mi:IC=\E[%d@:ks=\E[?1h\E=:\
	:ke=\E[?1l\E>:vi=\E[?25l:ve=\E[34h\E[?25h:vs=\E[34l:\
	:ti=\E[?1049h:te=\E[?1049l:us=\E[4m:ue=\E[24m:so=\E[3m:\
	:se=\E[23m:mb=\E[5m:md=\E[1m:mr=\E[7m:me=\E[m:ms:\
	:Co#8:pa#64:AF=\E[3%dm:AB=\E[4%dm:op=\E[39;49m:AX:\
	:vb=\Eg:G0:as=\E(0:ae=\E(B:\
	:ac=\140\140aaffggjjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~..--++,,hhII00:\
	:po=\E[5i:pf=\E[4i:Z0=\E[?3h:Z1=\E[?3l:k0=\E[10~:\
	:k1=\EOP:k2=\EOQ:k3=\EOR:k4=\EOS:k5=\E[15~:k6=\E[17~:\
	:k7=\E[18~:k8=\E[19~:k9=\E[20~:k;=\E[21~:F1=\E[23~:\
	:F2=\E[24~:F3=\E[2P:F4=\E[2Q:F5=\E[2R:F6=\E[2S:\
	:F7=\E[15;2~:F8=\E[17;2~:F9=\E[18;2~:FA=\E[19;2~:kb=^H:\
	:K2=\EOE:kB=\E[Z:kF=\E[1;2B:kR=\E[1;2A:*4=\E[3;2~:\
	:*7=\E[1;2F:#2=\E[1;2H:#3=\E[2;2~:#4=\E[1;2D:%c=\E[6;2~:\
	:%e=\E[5;2~:%i=\E[1;2C:kh=\E[1~:@1=\E[1~:kH=\E[4~:\
	:@7=\E[4~:kN=\E[6~:kP=\E[5~:kI=\E[2~:kD=\E[3~:ku=\EOA:\
	:kd=\EOB:kr=\EOC:kl=\EOD:km:"
USB_DEVFS_PATH="/dev/bus/usb"
USE="3dnow X a52 aac aalib acpi alsa apache2 arts audiofile bash-completion berkdb bitmap-fonts bzip2 cairo caps cddb cdr cli cracklib crypt css cups curl dbus directfb dri dts dv dvd dvdr dvdread ecc emboss encode exif expat fbcon ffmpeg fftw firefox flac foomaticdb fortran freetype ftp fuse gdbm gif gimp glut gmp gphoto2 gpm gstreamer gtk gtk2 hal iconv idea ieee1394 imagemagick imlib isdnlog java5 javascript jbig jikes jp2 jpeg jpeg2k kde kdeenablefinal kdexdeltas kipi lcms ldap libcaca libclamav logrotate lzo mad matroska midi mikmod mmx mng mp3 mpeg mudflap mule musepack musicbrainz ncurses nls nptl nptlonly nsplugin oav odbc ofx ogg openal opengl openmp pam pcre pdf perl pic png postgres ppds pppd python qt qt3 qt4 quicktime readline reflection samba sasl screen sdl session sharedmem slang smartcard sndfile sox speex spell spl sqlite ssl svg symlink tcltk tcpd tetex theora threads tiff tk truetype truetype-fonts type1-fonts unicode usb userlocales utf8 vcd vorbis wxwindows x264 x86 xml xorg xosd xpm xsl xv xvid xvmc zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="nv nvidia fbdev vesa vga"
USER="root"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal"
VIDEO_CARDS="nv nvidia fbdev vesa vga"
VMHANDLE="blackdown-jdk-1.4.2"
WINDOW="0"
XARGS="xargs -r"
XAUTHORITY="/home/users/root/.xauth5IeDuo"
XDG_DATA_DIRS="/usr/share:/usr/kde/3.5/share:/usr/local/share"
_="/usr/bin/emerge"
ftp_proxy="http://proxy:8080"
http_proxy="http://proxy:8080"
no_proxy="localhost 192.168.0.0/16"





Comment 6


Guenther Brunthaler





          2007-08-17 09:06:33 UTC
        

(In reply to comment #3)
> (In reply to comment #0)
> > plenty of RAM and swap space free in my box.
> 
> How much exactly?

# free
             total       used       free     shared    buffers     cached
Mem:        776936     716512      60424          0     135152     359332
-/+ buffers/cache:     222028     554908
Swap:      2097144        700    2096444

Plus I have a memory-meter attached to my desktop and did not even not the swap usage going up.

However, if it helps, I have 16 Gigs left in my volume group and can add that to the swap space.

Shall I try this?





Comment 7


Guenther Brunthaler





          2007-08-17 09:07:54 UTC
        

oops, typo: "did not even not" -> "did not even note"





Comment 8


Guenther Brunthaler





          2007-08-17 09:12:18 UTC
        

(In reply to comment #4)
Sorry, this was incorrectly sent due to a mid-air collision.

Here is the missing part of emerge --info

========
G_BROKEN_FILENAMES="1"
G_FILENAME_ENCODING="UTF-8"
HOME="/home/users/root"
HTTPS_PROXY="http://proxy:8080"
HTTP_PROXY="http://proxy:8080"
INFOPATH="/usr/share/info:/usr/share/binutils-data/i686-pc-linux-gnu/2.17/info:/usr/share/gcc-data/i686-pc-linux-gnu/3.4.6/info:/opt/xmingw/info"
INPUT_DEVICES="evdev keyboard mouse"
JAVAC="/etc/java-config-2/current-system-vm/bin/javac"
JAVA_HOME="/etc/java-config-2/current-system-vm"
JDK_HOME="/etc/java-config-2/current-system-vm"
KDEDIRS="/usr:/usr/local:/usr/kde/3.5"
KERNEL="linux"
LADSPA_PATH="/usr/lib/ladspa"
LANG="de_AT.utf8"
LANGUAGE="49"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LESS="-R -M --shift 5 -S -i"
LESSCHARSET="utf-8"
LESSOPEN="|lesspipe.sh %s"
LINGUAS="de"
LOGNAME="root"
LS_COLORS="no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:"
MAKEOPTS="-j2"
MANPATH="/etc/java-config-2/current-system-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/i686-pc-linux-gnu/2.17/man:/usr/share/gcc-data/i686-pc-linux-gnu/3.4.6/man:/opt/xmingw/man:/opt/blackdown-jdk-1.4.2.03/man:/etc/java-config/system-vm/man/:/usr/kde/3.5/share/man:/usr/qt/3/doc/man:/opt/vmware/server/man:/opt/insight/man"
NLSPATH="/usr/share/locale/%L/%N:/usr/share/locale/%L/LC_MESSAGES/%N"
NOCOLOR="true"
NO_PROXY="localhost 192.168.0.0/16"
OPENGL_PROFILE="nvidia"
PAGER="/usr/bin/less"
PATH="/home/users/root/bin:/usr/local/sbin:/usr/local/bin:/usr/lib/ccache/bin:/usr/lib/ccache/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.4.6:/opt/xmingw/bin:/opt/xmingw/i386-mingw32msvc/bin/:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/qt/3/bin:/opt/vmware/server/bin:/home/groups/admdevel/bin"
PKGDIR="/usr/portage/packages"
PKG_CONFIG_PATH="/usr/qt/3/lib/pkgconfig"
PORTAGE_ARCHLIST="ppc s390 amd64 x86 ppc64 x86-fbsd m68k arm sparc sh mips ia64 alpha ppc-macos hppa sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib/portage/bin"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="warn error log info"
PORTAGE_ELOG_MAILFROM="portage"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save"
PORTAGE_GID="250"
PORTAGE_GPG_DIR="/home/users/root/.gnupg"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_NICENESS="19"
PORTAGE_PYM_PATH="/usr/lib/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/science /usr/local/portage"
PORT_LOGDIR="/var/log/ebuilds"





Comment 9


Guenther Brunthaler





          2007-08-17 09:15:50 UTC
        

I just ran "java-check-environment" to be sure - it found everything to be ok.




Comment 10


Guenther Brunthaler





          2007-08-17 09:18:50 UTC
        

Just a few more infos which might help.

# java-config -r
/opt/sun-jdk-1.5.0.12/jre/lib/rt.jar:/opt/sun-jdk-1.5.0.12/jre/lib/i18n.jar:/opt/sun-jdk-1.5.0.12/jre/lib/sunrsasign.jar:/opt/sun-jdk-1.5.0.12/jre/lib/jsse.jar:/opt/sun-jdk-1.5.0.12/jre/lib/jce.jar:/opt/sun-jdk-1.5.0.12/jre/lib/charsets.jar
# java-config -O
/opt/sun-jdk-1.5.0.12
# java-config -o
/opt/sun-jdk-1.5.0.12
# java-config -L
The following VMs are available for generation-2:
1)      Blackdown JDK 1.4.2.03 [blackdown-jdk-1.4.2]
*)      Sun JDK 1.5.0.12 [sun-jdk-1.5]
# java-config -c
/opt/sun-jdk-1.5.0.12/bin/javac




Comment 11


Petteri Räty (RETIRED)






          2007-08-17 09:28:41 UTC
        

You were copy pasting emerge --verbose --info here. Next time please attach it instead of generating tons of emails to us. Thanks.




Comment 12


Guenther Brunthaler





          2007-08-17 09:37:36 UTC
        

(In reply to comment #11)
> You were copy pasting emerge --verbose --info here. Next time please attach it
> instead of generating tons of emails to us. Thanks.

Actually I was attemted to do so at first, but then I read the text above the "Additional Comments" field which reads:

> Additional Comments: (this is where you put emerge --info)

And so I did it...

Sorry - won't happen again.




Comment 13


Vlastimil Babka (Caster) (RETIRED)






          2007-08-17 10:02:08 UTC
        

(In reply to comment #12)
> > Additional Comments: (this is where you put emerge --info)

Noted, https://bugs.gentoo.org/show_bug.cgi?id=173059#c1





Comment 14


Guenther Brunthaler





          2007-08-17 10:23:07 UTC
        

18 Gigs of swap space finally did it!

My apologies to all: This was not a bug, there was *really* not enough swap space when having 2 gigs Swap plus 768 megs RAM for this package to compile.

When I added 16 Gigs more swap space, it compiled fine!

I still wonder why I did not see the depletion of swap space on my GUI memory meter - I can only guess it was a short peak that went by unnoticed.




Comment 15


Vlastimil Babka (Caster) (RETIRED)






          2007-08-17 10:28:26 UTC
        

(In reply to comment #14)
> I still wonder why I did not see the depletion of swap space on my GUI memory
> meter - I can only guess it was a short peak that went by unnoticed.
 
I personally think it's trying to reserve that memory when forking, it's same as that problem with scala... so there are already processes that have reserved memory up to mem+swap limit, and the fork's reserve cannot be satisfied, and so it fails. And it doesn't matter that the memory is not actually used, just reserved, shame. Not sure if the kernel can be somehow configured to relax the reservation and allow some overbooking...




Comment 16


Guenther Brunthaler





          2007-08-17 11:09:46 UTC
        

(In reply to comment #15)
> I personally think it's trying to reserve that memory when forking, it's same

I tend to agree. And it absolutely makes sense, as I have disabled memory overcommit in my kernel!

I have done that because the PostgreSQL installation guide recommended this.

> reserved, shame. Not sure if the kernel can be somehow configured to relax the
> reservation and allow some overbooking...

Indeed, there is.

 # sysctl vm.overcommit_memory
vm.overcommit_memory = 2
 # sysctl vm.overcommit_ratio
vm.overcommit_ratio = 50

The setting "2" for my box tells the kernel to disable memory overcommitting. Normally, it's enabled.

The "ratio" of 50 means to allow allocating 50 percent more virtual memory than there are available. (Only effective if memory overcommit is enabled, of course).

As a consequence, I might be able to skip increasing my swapfile: The next time I emerge netbeans, I will temporarily re-enable memory overcommit, and set the overcommit ration to some nice value such as 1000 percent, i. e.

# sysctl -w vm.overcommit_ratio=1000

If the build does not *really* take that much memory but only allocates it, this should suffice!

Unfortunately, memory overcommit is a somewhat dangerous feature: When the kernel has granted a certain amount of memory to a process - more than is actually available - and the process actually uses this much, the kernel has a problem: The malloc has already been successful - no way of returning an error code when there is not really enough virtual memory to back it up from the swap file.

In such situations, the kernel selects the most memory-hungry process and kills it. Which might be a different one than the process which actually triggered the out-of-memory-condition. Such as the PostgreSQL server - which does not find such an unexpected termination too funny.

But for emerges memory overcommit might indeed be useful.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

