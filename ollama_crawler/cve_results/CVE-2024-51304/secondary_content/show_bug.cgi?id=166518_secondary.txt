Title: 166518 – net-libs/gnutls-1.4.4-r1 - broken libgnutls-extra.la (libopencdk.la)
URL: https://bugs.gentoo.org/show_bug.cgi?id=166518

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 166518
net-libs/gnutls-1.4.4-r1 - broken libgnutls-extra.la (libopencdk.la)
Last modified: 2007-02-20 06:21:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 166518 
      - net-libs/gnutls-1.4.4-r1 - broken libgnutls-extra.la (libopencdk.la)


Summary:
net-libs/gnutls-1.4.4-r1 - broken libgnutls-extra.la (libopencdk.la)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Crypto team [DISABLED]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-02-12 16:14 UTC by Jan





      Modified:
    
2007-02-20 06:21 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jan





          2007-02-12 16:14:42 UTC
        

On my system, revdep-rebuild keeps on emerging net-libs/gnutls-1.4.4-r1 every time:

--
# revdep-rebuild -p
Configuring search environment for revdep-rebuild

Checking reverse dependencies...

Packages containing binaries and libraries broken by a package update
will be emerged.

Collecting system binaries and libraries... done.
  (/root/.revdep-rebuild.1_files)

Collecting complete LD_LIBRARY_PATH... done.
  (/root/.revdep-rebuild.2_ldpath)

Checking dynamic linking consistency...
  broken /usr/lib/libgnutls-extra.la (requires /var/tmp/portage/opencdk-0.5.5/image/usr/lib/libopencdk.la)
 done.
  (/root/.revdep-rebuild.3_rebuild)

Assigning files to ebuilds... done.
  (/root/.revdep-rebuild.4_ebuilds)

Evaluating package order... done.
  (/root/.revdep-rebuild.5_order)

All prepared. Starting rebuild...
emerge --oneshot -p =net-libs/gnutls-1.4.4-r1 

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] net-libs/gnutls-1.4.4-r1  
Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
--

It looks like libgnutls-extra was build against libopencdk in a temporary directory. Re-emerging only gnutls does not resolve this problem.

To resolve this, re-emerge app-crypt/opencdk before re-emering gnutls does.

I really wonder how this broken linking could happen.

Versions:
app-crypt/opencdk-0.5.5
net-libs/gnutls-1.4.4-r1

# emerge --info
Portage 2.1.2-r9 (default-linux/x86/2006.1, gcc-4.1.1, glibc-2.5-r0, 2.6.19-gentoo-r6 i686)
=================================================================
System uname: 2.6.19-gentoo-r6 i686 Intel(R) Core(TM)2 CPU         T7200  @ 2.00GHz
Gentoo Base System version 1.12.6
Timestamp of tree: Mon, 12 Feb 2007 10:20:01 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer -msse3 -mfpmath=sse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer -msse3 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache collision-protect distlocks metadata-transfer parallel-fetching sandbox sfperms strict userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS="de de_DE en en_GB en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dfx 3dnow X X509 acpi alsa apache2 automount avahi bash-completion bitmap-fonts bzip2 ccache cddb cdparanoia cdr chroot cli colordiff cracklib crypt css cups directfb dlloader dri dvd dvdr dvdread encode esd evo exif ffmpeg firefox ftp gaim gdbm gif gnome gpm gtk gtk2 hal iconv imap ipv6 isdnlog java jpeg lame libg++ lm_sensors mbox midi mmx mp3 mpeg mpm-worker multiuser mysql ncurses nls nntp nptl nptlonly nsplugin opengl pam pcre pda pdf perl png ppds pppd python quotas rdesktop readline reflection samba scenarios screen sdl session spl sse2 ssl static-modules svg symlink sysfs syslog tcpd tiff timidity truetype truetype-fonts type1-fonts udev unicode usb vcd vim vim-syntax wifi win32codecs x86 xinerama xinetd xml xorg zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de de_DE en en_GB en_US" USERLAND="GNU" VIDEO_CARDS="fglrx"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

Reproducible: Always




Comment 1


Alon Bar-Lev (RETIRED)






          2007-02-18 19:32:08 UTC
        

Tried to reproduce this... And could not.
Can you?
Is there anything strange happened to your system before?




Comment 2


Jan





          2007-02-19 21:34:15 UTC
        

No. I definitely did not compile gnutls or opencdk myself in the portage tree, this broke without my influence. But even re-emerging older versions of opencdk, then updating to the current version (without letting portage delete the tmp files) and then emerging gnutls does not reproduce the bug on my system. However, this is the only way I could imagine things happened (having old version of opencdk - updating without removing tmp files - installing gnutls). When closing this bug (I would not close it as "FIXED" but I don't see a better choice either) we should keep in mind portage caused linking to a temporary file here, just in case it happens again to somebody else. 




Comment 3


Alon Bar-Lev (RETIRED)






          2007-02-20 06:21:32 UTC
        

Yes.
I also tried this sequence... But could not reproduce.
so I am closing this for now... Hopping that will not happen to anyone else...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

