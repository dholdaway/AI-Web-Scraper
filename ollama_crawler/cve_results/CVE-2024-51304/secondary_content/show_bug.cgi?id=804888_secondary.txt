Title: 804888 – revdep-rebuild (ver  0.5.1) wants to rebuild net-libs/zeromq:0/5
URL: https://bugs.gentoo.org/show_bug.cgi?id=804888

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 804888
revdep-rebuild (ver  0.5.1) wants to rebuild net-libs/zeromq:0/5
Last modified: 2021-07-31 11:53:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 804888 
      - revdep-rebuild (ver  0.5.1) wants to rebuild net-libs/zeromq:0/5


Summary:
revdep-rebuild (ver  0.5.1) wants to rebuild net-libs/zeromq:0/5
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Low
       minor
      


Assignee:

Portage Tools Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-07-28 14:19 UTC by Chris Terry





      Modified:
    
2021-07-31 11:53 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



caterry
caterry
sam
whissi









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info,5.54 KB,
                text/plain)

            
2021-07-28 14:19 UTC,

            Chris Terry




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Chris Terry





          2021-07-28 14:19:38 UTC
        

Created attachment 727527 [details]
emerge --info

net-libs/zeromq-4.3.4-r1:0/5 is installed
running revdep-rebuild produces the following code:
 * This is the new python coded version
 * Please report any bugs found using it.
 * The original revdep-rebuild script is installed as revdep-rebuild.sh
 * Please file bugs at: https://bugs.gentoo.org/
 * Checking dynamic linking consistency
 * Assign files to packages

emerge  --oneshot --complete-graph=y net-libs/zeromq:0/5

I have allowed revdep-rebuild to run and install the package.
After the package is re-installed, running revdep-rebuild produces the same results.




Comment 1


Brian Dolbec (RETIRED)






          2021-07-31 00:58:58 UTC
        

Please run revdep-rebuild with --debug and attach/post the output showing the lib causing the rebuild.

Second, please run : redep-rebuild.sh to see if it also triggers the old bash version (it uses a different method) and report if it too triggers a rebuild.


Third, an entry into /etc/revdep-rebuild/... can tell revdep-rebuild to ignore the offending lib causing the rebuild.   See the other files installed there for examples.

If both versions trigger a rebuild, it is possible that the package installs with a bad link.  In that case the pkg should probably install an file in /etc/revdep-rebuild to prevent the false positive.


CC'ing zeromq maintainer...




Comment 2


Chris Terry





          2021-07-31 11:53:48 UTC
        

When I went back into the system (it was shut down for two days), revdep-rebuild responds with:
Your system is consistent

Maybe a reboot helped, do you think that forgetting the remembered locations (hash -r) would have mitigated this?

I will change the status to resolved and WorksForMe.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

