Title: 136679 – amavisd-new 2.3.3-r2 fails to start due to missing requirement
URL: https://bugs.gentoo.org/show_bug.cgi?id=136679

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 136679
amavisd-new 2.3.3-r2 fails to start due to missing requirement
Last modified: 2006-06-13 10:01:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 136679 
      - amavisd-new 2.3.3-r2 fails to start due to missing requirement


Summary:
amavisd-new 2.3.3-r2 fails to start due to missing requirement
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-13 09:51 UTC by Mario Vazquez





      Modified:
    
2006-06-13 10:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mario Vazquez





          2006-06-13 09:51:58 UTC
        

After installing amavisd-new 2.3.3-r2 the daemon fails to starting giving the following error:

postfix # /etc/init.d/amavisd start
 * Starting amavisd-new ...
ERROR: MISSING REQUIRED BASIC MODULES:
  Unix::Syslog
BEGIN failed--compilation aborted at /usr/sbin/amavisd line 148.          [ !! ]

That can be fixed by including Unix-Syslog as a dependency.


But after adding that, also amavisd daemon fails due to another perl module missing, this time Convert-UUlib with the following message:

Problem in the Amavis::Unpackers code: Can't locate Convert/UUlib.pm in @INC (@INC contains: /etc/perl /usr/lib/perl5/vendor_perl/5.8.8/i686-linux /usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl/5.8.7 /usr/lib/perl5/vendor_perl/5.8.7/i686-linux /usr/lib/perl5/vendor_perl /usr/lib/perl5/site_perl/5.8.8/i686-linux /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl /usr/lib/perl5/5.8.8/i686-linux /usr/lib/perl5/5.8.8 /usr/local/lib/site_perl) at (eval 57) line 17.
BEGIN failed--compilation aborted at (eval 57) line 17.                   [ !! ]

Since amavisd fails to run unless both Unix-Syslog and Convert-UUlib perl modules are installed, they should be included as dependency of the ebuild.  This will probably affect other amavisd ebuild versions.




Comment 1


Mario Vazquez





          2006-06-13 09:57:27 UTC
        

Also I would like to specify that it was a new install.  Amavisd was installed for the first time on the system.

Also, here is my emerge --info
--------------------------------------
Portage 2.1 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r3, 2.6.16-slock12 i686)
=================================================================
System uname: 2.6.16-slock12 i686 Pentium III (Katmai)
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=i686 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/X11/xkb /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=i686 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer parallel-fetch sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 apache2 apm authdaemond avi berkdb bitmap-fonts bzip2 cgi chroot ck-server clamav clamd cli crypt dri eds emboss encode erandom esd fastbuild foomaticdb fortran ftp gd gdbm gif gpm gstreamer hardened hardenedphp idn imap imlib ipv6 isdnlog javascript jpeg kernel_linux libg++ libwww mad maildir mikmod mmx motif mp3 mpeg mysql mysqli ncurses nls nptl nptlonly ogg opengl pam pcre pdflib perl pic png posix pppd python quicktime readline reflection sasl session spell spl sse ssl symlink tcpd threads tidy tiff tokenizer truetype truetype-fonts type1-fonts udev unicode vda vhosts vorbis xml xv zlib elibc_glibc userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Jakub Moc (RETIRED)






          2006-06-13 09:59:31 UTC
        

You apparently need to run perl-cleaner, the dependencies are there.





Comment 3


Mario Vazquez





          2006-06-13 10:01:34 UTC
        

the dependencies are listed in the RDEPEND section, but are not installed.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

