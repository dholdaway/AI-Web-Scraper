Title: 222731 – www-servers/apache-2.2.8: "OPTIONS * HTTP/1.0" accesses and segfaults
URL: https://bugs.gentoo.org/show_bug.cgi?id=222731

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 222731
www-servers/apache-2.2.8: "OPTIONS * HTTP/1.0" accesses and segfaults
Last modified: 2009-02-11 15:51:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 222731 
      - www-servers/apache-2.2.8: "OPTIONS * HTTP/1.0" accesses and segfaults


Summary:
www-servers/apache-2.2.8: "OPTIONS * HTTP/1.0" accesses and segfaults
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-05-18 21:55 UTC by Magnus Rosenbaum





      Modified:
    
2009-02-11 15:51 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



apache-bugs
security









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Magnus Rosenbaum





          2008-05-18 21:55:30 UTC
        

In access_log I get a lot of lines like this:

127.0.0.1 - - [18/May/2008:15:11:00 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:01 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:02 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:03 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:31 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:32 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:39 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:40 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:41 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:42 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:48 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:50 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:52 +0200] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [18/May/2008:15:11:59 +0200] "OPTIONS * HTTP/1.0" 200 -

In error_log there are segfaults, a about the same times:

[Sun May 18 15:11:01 2008] [notice] child pid 20535 exit signal Segmentation fault (11)
[Sun May 18 15:11:02 2008] [notice] child pid 20446 exit signal Segmentation fault (11)
[Sun May 18 15:11:03 2008] [notice] child pid 20526 exit signal Segmentation fault (11)
[Sun May 18 15:11:04 2008] [notice] child pid 19513 exit signal Segmentation fault (11)
[Sun May 18 15:11:32 2008] [notice] child pid 20136 exit signal Segmentation fault (11)
[Sun May 18 15:11:33 2008] [notice] child pid 20965 exit signal Segmentation fault (11)
[Sun May 18 15:11:40 2008] [notice] child pid 20967 exit signal Segmentation fault (11)
[Sun May 18 15:11:41 2008] [notice] child pid 21274 exit signal Segmentation fault (11)
[Sun May 18 15:11:42 2008] [notice] child pid 21284 exit signal Segmentation fault (11)
[Sun May 18 15:11:43 2008] [notice] child pid 20933 exit signal Segmentation fault (11)
[Sun May 18 15:11:49 2008] [notice] child pid 21291 exit signal Segmentation fault (11)
[Sun May 18 15:11:51 2008] [notice] child pid 20597 exit signal Segmentation fault (11)
[Sun May 18 15:11:53 2008] [notice] child pid 20889 exit signal Segmentation fault (11)

However, I have not seen any effect apart from the logs.

It appears only with the "prefork" MPM, not with the "worker" MPM.

It does not appear in apache-2.2.7-r7.

Reproducible: Always

Steps to Reproduce:




Comment 1


Benedikt Böhm (RETIRED)






          2008-06-01 11:09:30 UTC
        

(In reply to comment #0)
> It does not appear in apache-2.2.7-r7.

please use latest stable then (2.2.8) ... if it still doesn't work, reopen this bug




Comment 2


Magnus Rosenbaum





          2008-06-01 12:23:50 UTC
        

I'm very sorry, I reported the wrong version numbers.

The reported bug appears in 2.2.8, while it does not appear in 2.2.6-r7.




Comment 3


Piotr Malinski





          2008-06-05 01:06:43 UTC
        

apache-2.2.6-r7 or 2.2.8-r3 gives me [notice] child pid 21744 exit signal Segmentation fault (11) and few times also thing like "zend_mm_heap corrupted" showed up in error_log. The problem is probably related to PHP as I couldn't make it "crash" on a html page, but on dokuwiki (out of the box) it makes segmentation faults and sometimes "zend_mm_heap corrupted".




Comment 4


Christian Hoffmann (RETIRED)






          2008-06-12 18:47:06 UTC
        

I'm not able to reproduce this w/ apache-2.2.8-r4 (USE="ssl -debug -doc -ldap (-selinux) -sni -static -suexec -threads"), php-5.2.6-r1 (USE="apache2 bcmath bzip2 calendar cgi cli concurrentmodphp crypt ctype curl curlwrappers discard-path exif fastbuild filter force-cgi-redirect ftp gd gmp hash iconv imap ipv6 json mysql mysqli ncurses nls pcre pdo posix readline reflection session sharedext simplexml spl sqlite ssl suhosin tokenizer truetype unicode xml xmlreader xmlrpc xmlwriter xsl zip zlib ...).
I only tried a phpinfo() file though, I'll test with something more complex shortly.
Could you try upgrading to the latest (~arch) version of at least php anyway?

CC'ing security, as one might call this DoS. Feel free to take over this bug.




Comment 5


Magnus Rosenbaum





          2008-06-17 21:48:22 UTC
        

I upgraded to apache-2.2.9 now and there are no segfaults anymore. PHP is still php-5.2.6_rc4.

What I still see are all these "OPTIONS" requests from the local host. I have no idea where they come from.




Comment 6


Christian Hoffmann (RETIRED)






          2008-07-20 17:13:30 UTC
        

(In reply to comment #5)
> I upgraded to apache-2.2.9 now and there are no segfaults anymore. PHP is still
> php-5.2.6_rc4.
So if I got this right, this bug is solved, correct?
If not, please REOPEN and explain.




Comment 7


Gabe Martin-Dempesy





          2009-02-11 15:51:15 UTC
        

The "OPTIONS *" requests are most likely caused by Apache waking up its child processes.  For details, please read: http://wiki.apache.org/httpd/InternalDummyConnection









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

