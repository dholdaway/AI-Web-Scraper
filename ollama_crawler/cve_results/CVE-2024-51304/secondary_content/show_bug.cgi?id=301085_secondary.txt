Title: 301085 – sys-devel/flex-2.3.35 fails test on stable amd64
URL: https://bugs.gentoo.org/show_bug.cgi?id=301085

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 301085
sys-devel/flex-2.3.35 fails test on stable amd64
Last modified: 2010-09-25 11:40:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 301085 
      - sys-devel/flex-2.3.35 fails test on stable amd64


Summary:
sys-devel/flex-2.3.35 fails test on stable amd64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-01-15 13:00 UTC by Thomas Beierlein





      Modified:
    
2010-09-25 11:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Beierlein






          2010-01-15 13:00:39 UTC
        

Exactly the same problem as on bug 244417 comment 7.

emerge --info
Portage 2.1.6.13 (default/linux/amd64/10.0, gcc-4.3.4, glibc-2.10.1-r1, 2.6.31-gentoo-r6 x86_64)
=================================================================
System uname: Linux-2.6.31-gentoo-r6-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9400_@_2.66GHz-with-gentoo-1.12.13
Timestamp of tree: Fri, 15 Jan 2010 07:45:01 +0000
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.9-r2
dev-lang/python:     2.6.4
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="collision-protect distlocks fixpackages multilib-strict parallel-fetch protect-owned sandbox sfperms strict test unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl amd64 berkdb bzip2 cli cracklib crypt cups cxx dri fortran gdbm gpm iconv ipv6 mmx modules mudflap multilib ncurses nls nptl nptlonly openmp pam pcre perl pppd python readline reflection session spl sse sse2 ssl sysfs tcpd unicode xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fbdev glint intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Thomas Beierlein






          2010-08-20 11:40:20 UTC
        

Just retried. Did work for me in meantime.




Comment 2


Nikoli





          2010-08-26 22:21:54 UTC
        

Thomas, you are wrong. Sometimes it builds fine, but sometimes does not (like autoconf in bug #321789). With same configs, installed packages, env, options, etc. So I am able to reproduce it:

Executing test test-pthread
Test test-pthread FAILED. See test-pthread/OUTPUT for details.
Executing test test-string-nr
Test test-string-nr succeeded.
Executing test test-string-r
Test test-string-r succeeded.
Executing test test-yyextra
Test test-yyextra succeeded.
Executing test test-alloc-extra
Test test-alloc-extra succeeded.
Executing test test-noansi-nr
Test test-noansi-nr succeeded.
Executing test test-noansi-r
Test test-noansi-r succeeded.
Executing test test-top
Test test-top succeeded.
Executing test test-table-opts
Test test-table-opts succeeded.
Results:
Tests succeeded: 45
Tests FAILED: 1
make[4]: *** [check-local] Error 1
make[4]: Leaving directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests'
make[3]: *** [check-am] Error 2
make[3]: Leaving directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests'
make[2]: *** [check-recursive] Error 1
make[2]: Leaving directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests'
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35'
make: *** [check] Error 2
 * ERROR: sys-devel/flex-2.5.35 failed:




cat /mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests/test-pthread/OUTPUT 
make[5]: Entering directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests/test-pthread'
../../flex  scanner.l
x86_64-pc-linux-gnu-gcc -c -o scanner.o -I. -I../.. -I../..  -march=core2 -O2 -pipe scanner.c
x86_64-pc-linux-gnu-gcc -o test-pthread -Wl,-O1 -Wl,--as-needed scanner.o  -lpthread
./test-pthread ./test-*.input
Created thread 0.
Created thread 1.
Created thread 2.
Created thread 3.
make[5]: *** [test] Segmentation fault
make[5]: Leaving directory `/mnt/g/portage/sys-devel/flex-2.5.35/work/flex-2.5.35/tests/test-pthread'


dmesg|grep test-pthread
[141768.896543] test-pthread[23749]: segfault at 0 ip 00002b61058009d3 sp 00002b6106989d30 error 6 in libsandbox.so[2b61057fd000+c000]
[141768.896588] test-pthread[23746]: segfault at 0 ip 00002b61058009d3 sp 00002b6106385d30 error 6 in libsandbox.so[2b61057fd000+c000]


Portage 2.1.8.3 (default/linux/amd64/10.0/desktop, gcc-4.4.3, glibc-2.11.2-r0, 2.6.33-gentoo-r2 x86_64)
=================================================================
Timestamp of tree: Thu, 26 Aug 2010 21:45:02 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p37
dev-lang/python:     2.6.5-r3
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.2
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.65
sys-devel/automake:  1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=core2 -O2 -pipe"
FEATURES="assume-digests ccache distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict test unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
LANG="C"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="ru en"
MAKEOPTS="-j3"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/nikoli"
USE="7zip X a52 aac acl acpi akonadi alsa amd64 amr amrnb amrwb ares atm audiofile bash-completion bluetooth bzip2 cairo cdda cddb cdio cdparanoia cdr chroot cli consolekit cracklib crypt css cups cxx dbus divx djvu dri dts dv dvd dvdr dvdread emboss encode exif ffmpeg firefox flac fluidsynth fontconfig fortran gd geoip gif gimp glitz gmp gnutls gphoto2 gpm graphviz gstreamer gtk hal handbook iconv id3tag idn ieee1394 imagemagick imap imlib ipv6 jbig jpeg jpeg2k kde kipi kontact ladspa lame laptop lcms libproxy libsamplerate libwww lm_sensors lzma lzo mad matroska md5sum mikmod mmx mmxext mng modplug modules mp3 mp4 mpeg mtp mudflap multilib musepack musicbrainz ncurses nls nptl nptlonly ntfs nvidia obex ogg openal opencore-amr openexr opengl openmp pam pango pcre pdf perl pg-intdatetime phonon plasma pm-utils png ppds pppd qt3support qt4 quicktime rar raw readline reflection reiserfs sasl scanner schroedinger semantic-desktop session smp sndfile socks5 speex spell spl sqlite sse sse2 sse3 ssl ssse3 startup-notification svg symlink sysfs taglib theora threads thumbnail tiff truetype tta udev unicode upnp usb userlocales v4l v4l2 vaapi vcd vdpau vorbis vpx wavpack webkit wifi wma wmf wps x264 xcb xcomposite xface xml xmp xorg xpm xscreensaver xulrunner xv xvid zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" NGINX_MODULES_HTTP="access auth_basic autoindex fastcgi gzip rewrite" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nouveau nv nvidia vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Nikoli





          2010-09-25 11:40:31 UTC
        

Problem solved in sandbox-2.3-r1 :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

