Title: 575302 – x11-drivers/xf86-video-intel: Add USE=vaapi PDEPEND for better discoverability of VAAPI functionality
URL: https://bugs.gentoo.org/show_bug.cgi?id=575302

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 575302
x11-drivers/xf86-video-intel: Add USE=vaapi PDEPEND for better discoverability of VAAPI functionality
Last modified: 2017-01-29 06:52:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 575302 
      - x11-drivers/xf86-video-intel: Add USE=vaapi PDEPEND for better discoverability of VAAPI functionality


Summary:
x11-drivers/xf86-video-intel: Add USE=vaapi PDEPEND for better discoverabilit...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-02-21 14:26 UTC by Mart Raudsepp





      Modified:
    
2017-01-29 06:52 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mart Raudsepp






          2016-02-21 14:26:59 UTC
        

People don't seem to get VA-API working out of the box on Intel. They assume a global USE=vaapi will take care of that, and assume as such also from the presence of the USE flag on media-libs/mesa.
To better serve our users out of the box experience, I would like us to consider adding a PDEPEND on xf86-video-intel to x11-libs/libva-intel-driver when USE=vaapi and/or perhaps reworking how USE=vaapi works on media-libs/mesa
In case of mesa, it currently forces gallium and llvm even when VIDEO_CARDS only contains intel. I think if there's VIDEO_CARDS=intel, it should pull in libva-intel-driver too and not force gallium/llvm stuff when radeon and such isn't in VIDEO_CARDS, or at least tell in an elog or similar that to actually get vaapi for intel to install libva-intel-driver.
But primarily as a quick improvement I suggest the xf86-video-intel PDEPEND.




Comment 1


Manuel Rüger (RETIRED)






          2016-02-21 19:52:57 UTC
        

I'd rather not want to see this added to xf86-video-intel. People might use the modesetting drivers and not get this dep then. 

As a "quick fix", how about adding a postinst message to mesa?




Comment 2


Chí-Thanh Christopher Nguyễn






          2016-02-21 23:23:30 UTC
        

I don't think this can be expressed well in terms of USE flags for either mesa or xf86-video-intel.

Maybe a metapackage for video acceleration is the better solution?




Comment 3


Mart Raudsepp






          2016-02-21 23:38:44 UTC
        

I don't think it would be all that awful to just go with that PDEPEND. It will cover most users who have intel for now (though only on X11), the rest probably figure it out from various documentation.
I'll see about a proposed patch to mesa a bit later on for discussion, got distracted with other matters for today.
Other than that, any improvements to some documentation on wikis and whatnot can be useful.

This bug was motivated by someone on phoronix comments not enabling the functionality right (assuming USE flag will do), and even me myself not getting it right - I needed you to tell me on IRC that USE=vaapi on mesa is only for gallium stuff, not intel.




Comment 4


Matt Turner






          2017-01-29 06:52:46 UTC
        

Enabling USE=vaapi pulls in libva, which has a VIDEO_CARDS=i965 that PDEPENDS on x11-libs/libva-intel-driver.

So... this all looks fine to me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

