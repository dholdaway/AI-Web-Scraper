Title: 237420 – xorg-server-1.5.0 and wrong keyboard
URL: https://bugs.gentoo.org/show_bug.cgi?id=237420

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 237420
xorg-server-1.5.0 and wrong keyboard
Last modified: 2008-09-13 17:21:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 237420 
      - xorg-server-1.5.0 and wrong keyboard


Summary:
xorg-server-1.5.0 and wrong keyboard
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-09-11 19:41 UTC by Michał Kudła





      Modified:
    
2008-09-13 17:21 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



leio









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Xorg.0.log

              (Xorg.0.log,24.94 KB,
                text/plain)

            
2008-09-11 19:50 UTC,

            Michał Kudła




Details





xorg.conf

              (xorg.conf,4.04 KB,
                text/plain)

            
2008-09-11 19:51 UTC,

            Michał Kudła




Details





my fdi file

              (10-x11-input.fdi,907 bytes,
                text/plain)

            
2008-09-12 11:16 UTC,

            Rafał Mużyło




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michał Kudła





          2008-09-11 19:41:09 UTC
        

after insalling xorg-server 1.5.0 I have many big problem with keyboard. 
I cannot to set propper keyboard in console and X (3.5.x, 4.1.1, XFCE).
Before, I has v. 1.3 and everythig was fine.

Reproducible: Always

Steps to Reproduce:
1.Install xorg-server-1.5.1
2.reboot
3.login

Actual Results:  
no proper keyboard layout

Expected Results:  
should be good as I have under version 1.3

laptok ~ # emerge --info
Portage 2.2_rc8 (default-linux/x86/2007.0/desktop, gcc-4.3.1, glibc-2.6.1-r0, 2.6.26-gentoo i686)
=================================================================
System uname: Linux-2.6.26-gentoo-i686-Intel-R-_Core-TM-2_Duo_CPU_T7300_@_2.00GHz-with-glibc2.0
Timestamp of tree: Thu, 11 Sep 2008 18:05:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.4.4-r14, 2.5.2-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.17-r1, 2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.26
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=core2 -mtune=core2 -mssse3 -O0 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/4.1/env /usr/kde/4.1/share/config /usr/kde/4.1/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -mtune=core2 -mssse3 -O0 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distlocks parallel-fetch preserve-libs sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="pl_PL.UTF-8"
LC_ALL="pl_PL.UTF-8"
LDFLAGS=""
LINGUAS="pl pl_PL"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/kdesvn-portage /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="7zip X Xaw3d a52 aac aalib accessibility acl acpi addbookmarks additions addressbook agg aio alias alsa amarok amr amrnb amrwb apache2 archive arts avahi bash-completion berkdb bigpatch binary-drivers blender-game bluetooth branding bzip2 cairo caps captury cdda cddb cdr chm cli connectionstatus contactnotes coverage cracklib crypt css cups curl cvs cygnal daap dbus dc1394 dga dhcp directfb disk-partition divx dom-storage dri dts dv dvb dvd dvdnav dvdr dvdread ebook ecc emboss enca encode epydoc evo exif exiv2 expat fam fb fbcon ffmpeg firefox flac fltk fontconfig fortran fpx ftp gcj gd gdbm geos gif gimp glib glitz gnokii gnutls gpac gphoto2 gpm gps graphviz gs gsm gstreamer gtk gtkhtml guile hal hdri highlight history htmlhandbook httpd ical iconv id3 id3tag idea ieee1394 imagemagick imap imlib inotify ipw4965 irc isdnlog jabber jai java java5 javacomm javamail javascript jbig jce jingle jmf jms jmx jpeg jpeg2k jpgraph jsapi jython kcal kde kdepim kerberos keyring konqueror ladspa lame lcms ldap libnotify libsamplerate libvisual lm_sensors log4j logrotate lzo mad marble matroska mbrola mdnsresponder-compat midi mikmod mjpeg mmx mmxext mng mod modplug mozdevelop mp3 mp4 mp4live mpeg mpeg2 mpi mplayer mudflap multicall multiuser musepack musicbrainz mysql mysqli ncurses neon networking networkmanager nls nptl nptlonly nsplugin ntfs nvram obex odk ogg openal openexr opengl openmp pam pango parallel parse-clocks pch pcmcia pcre pda pdf perl php plotutils png postgres povray pppd proj python q32 q8 qt3 qt3support qt4 quicktime rar readline real realmedia reflection rhino rle rtc rtsp samba sasl script sdl semantic-desktop sensord servlet-2_4 servletapi session skins smp sms sndfile sound soundtouch soup sox speech speex spell spl sql sqlite srt sse sse2 ssl ssse3 startup-notification statistics stream subversion svg svg-experimental svnserve swig syslog tcl tcpd teamarena tga theora threads threadsafe tiff timidity tivo tk tools tordns truetype unicode upnp urandom usb v4l v4l2 vcd visualization vlm vorbis wavpack webdav wifi win32codecs winbind wmf wmp x264 x86 xanim xcomposite xforms xine xml xorg xosd xpm xprint xslt xulrunner xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="pl pl_PL" USERLAND="GNU" VIDEO_CARDS="nv"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Michał Kudła





          2008-09-11 19:48:23 UTC
        

laptok ~ # cat /var/log/kdm.log
X.Org X Server 1.5.0
Release Date:
X Protocol Version 11, Revision 0
Build Operating System: Linux 2.6.26-gentoo i686
Current Operating System: Linux laptok 2.6.26-gentoo #6 SMP Tue Aug 26 14:45:34 CEST 2008 i686
Build Date: 08 September 2008  10:24:04PM

        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Module Loader present
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: "/var/log/Xorg.0.log", Time: Thu Sep 11 21:11:32 2008
(==) Using config file: "/etc/X11/xorg.conf"
The XKEYBOARD keymap compiler (xkbcomp) reports:
> Warning:          Type "ONE_LEVEL" has 1 levels, but <RALT> has 2 symbols
>                   Ignoring extra symbols
Errors from xkbcomp are not fatal to the X server
expected keysym, got XF86Info: line 914 of inet
expected keysym, got XF86Info: line 914 of inet
expected keysym, got XF86Info: line 914 of inet
The XKEYBOARD keymap compiler (xkbcomp) reports:
> Warning:          Type "ONE_LEVEL" has 1 levels, but <RALT> has 2 symbols
>                   Ignoring extra symbols
Errors from xkbcomp are not fatal to the X server
The XKEYBOARD keymap compiler (xkbcomp) reports:
> Warning:          Type "ONE_LEVEL" has 1 levels, but <RALT> has 2 symbols
>                   Ignoring extra symbols
Errors from xkbcomp are not fatal to the X server
[config/dbus] couldn't register object path






Comment 2


Michał Kudła





          2008-09-11 19:50:06 UTC
        

Created attachment 165213 [details]
Xorg.0.log




Comment 3


Michał Kudła





          2008-09-11 19:51:07 UTC
        

Created attachment 165215 [details]
xorg.conf




Comment 4


Mart Raudsepp






          2008-09-12 00:21:50 UTC
        

What do you mean under not being able to set proper keyboard?
Do you mean keyboard layout?

Do you have a /etc/hal/fdi/policy/10-x11-input.fdi file? If so, please attach it




Comment 5


Michał Kudła





          2008-09-12 04:01:06 UTC
        

This file is empty

laptok ~ # cat /etc/hal/fdi/policy/10-x11-input.fdi
laptok ~ # ls -al /etc/hal/fdi/policy/10-x11-input.fdi
-rw-r--r-- 1 root root 0 VIII 16 18:41 /etc/hal/fdi/policy/10-x11-input.fdi





Comment 6


Rafał Mużyło





          2008-09-12 11:16:41 UTC
        

Created attachment 165258 [details]
my fdi file

In that case make it less empty.
This is my file, for xorg-server 1.5.0.
Your should probably be the same.
BTW., this is bugzilla, not a support forum.




Comment 7


Audiodef





          2008-09-12 19:17:35 UTC
        

I have a similar, or perhaps the same problem, with 1.5.0. When my machine comes to the graphical login, the keyboard will not work except to ctl-alt-f1 to another terminal, where the keyboard works (http://bugs.gentoo.org/show_bug.cgi?id=237219)

I'm getting the feeling some folks don't want to bother with bugs, which strikes me as odd. All that work developing cool open-source stuff and users get told to bug off? Uh....

We're just tryin' to help. :-) 




Comment 8


Michał Kudła





          2008-09-12 20:40:09 UTC
        

Thanks Rafal,
now, I have
laptok ~ # cat /etc/hal/fdi/policy/10-x11-input.fdi
<?xml version="1.0" encoding="UTF-8"?>
<deviceinfo version="0.2">
  <device>
<!--
        <match key="info.capabilities" contains="input.keys">
      <append key="info.callouts.add" type="strlist">hal-setup-keymap</append>
    </match>
-->
    <match key="info.capabilities" contains="input.keys">
      <!-- <merge key="input.xkb.model" type="string">pc104</merge> -->
      <!-- <merge key="input.xkb.rules" type="string">evdev</merge> -->
          <merge key="input.x11_options.XkbRules" type="string">base</merge>
          <merge key="input.x11_options.XkbModel" type="string">evdev</merge>
          <merge key="input.x11_options.XkbLayout" type="string">pl</merge>
          <append key="input.x11_options.XkbOptions" type="strlist">altwin:menu</append>
<!--
          <merge key="input.xkb.layout" type="string">pl</merge>
      <append key="input.xkb.options" type="strlist">altwin:menu</append>
-->
    </match>
  </device>
</deviceinfo>


but keyboard still don't work




Comment 9


Rafał Mużyło





          2008-09-12 22:04:45 UTC
        

This really isn't a support forum.
Did you restart hal after adding that file.
Check what `hal-device <device name>` prints for your keyboard.




Comment 10


Michał Kudła





          2008-09-13 17:21:38 UTC
        

update xorg-x11 from 7.2 up to 7.4 helps me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

