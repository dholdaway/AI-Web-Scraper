Title: 889004 – x11-libs/gtk+-3.24.35 fails to compile (lto): /usr/include/sysprof-4/sysprof-capture-writer.h:169:23: error: type of 'sysprof_capture_writer_set_counters' does not match original declaration [-Werror=lto-type-mismatch]
URL: https://bugs.gentoo.org/show_bug.cgi?id=889004

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 889004
x11-libs/gtk+-3.24.35 fails to compile (lto): /usr/include/sysprof-4/sysprof-capture-writer.h:169:23: error: type of 'sysprof_capture_writer_set_counters' does not match original declaration [-Werror=lto-type-mismatch]
Last modified: 2024-06-23 16:44:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 889004 
      - x11-libs/gtk+-3.24.35 fails to compile (lto): /usr/include/sysprof-4/sysprof-capture-writer.h:169:23: error: type of 'sysprof_capture_writer_set_counters' does not match original declaration [-Werror=lto-type-mismatch]


Summary:
x11-libs/gtk+-3.24.35 fails to compile (lto): /usr/include/sysprof-4/sysprof-...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-12-30 16:43 UTC by Kostadin Shishmanov





      Modified:
    
2024-06-23 16:44 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



anthonyryan1
jstein
leio









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info and build log

              (build.log,305.59 KB,
                text/x-log)

            
2022-12-30 16:43 UTC,

            Kostadin Shishmanov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kostadin Shishmanov





          2022-12-30 16:43:35 UTC
        

Created attachment 845940 [details]
emerge --info and build log

x11-libs/gtk+-3.24.35 fails to compile with CFLAGS=-flto -Werror=odr -Werror=lto-type-mismatch -Werror-strict-aliasing


/usr/include/sysprof-4/sysprof-capture-writer.h:169:23: error: type of 'sysprof_capture_writer_set_counters' does not match original declaration [-Werror=lto-type-mismatch]
  169 | bool                  sysprof_capture_writer_set_counters                    (SysprofCaptureWriter              *self,
      |                       ^
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:1218:1: note: return value type mismatch
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:1218:1: note: type 'gboolean' should match type '_Bool'
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:1218:1: note: 'sysprof_capture_writer_set_counters' was previously declared here
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:1218:1: note: code may be misoptimized unless '-fno-strict-aliasing' is used
/usr/include/sysprof-4/sysprof-capture-writer.h:112:23: error: type of 'sysprof_capture_writer_add_mark' does not match original declaration [-Werror=lto-type-mismatch]
  112 | bool                  sysprof_capture_writer_add_mark                        (SysprofCaptureWriter              *self,
      |                       ^
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:608:1: note: return value type mismatch
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:608:1: note: type 'gboolean' should match type '_Bool'
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:608:1: note: 'sysprof_capture_writer_add_mark' was previously declared here
../../../../../dev-util/sysprof-capture-3.36.0-r1/work/sysprof-3.36.0-abi_x86_64.amd64/../sysprof-3.36.0/src/libsysprof-capture/sysprof-capture-writer.c:608:1: note: code may be misoptimized unless '-fno-strict-aliasing' is used




Comment 1


Mart Raudsepp






          2024-05-19 21:36:58 UTC
        

I don't quite understand how you are getting such an error when gtk+-3.24.35 only supported sysprof-capture-3 (not 4).
I'm making gtk+-3.24.42 explicitly use sysprof-capture-4, please retry with that.




Comment 2


Kostadin Shishmanov





          2024-06-23 16:44:40 UTC
        

Haven't been able to reproduce the issue for some time, no idea what was causing it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

