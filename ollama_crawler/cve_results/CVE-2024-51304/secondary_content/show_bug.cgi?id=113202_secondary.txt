Title: 113202 – alternative install guide pxe dhcpd.conf invalid option-150 code option definitions may not be scoped.
URL: https://bugs.gentoo.org/show_bug.cgi?id=113202

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 113202
alternative install guide pxe dhcpd.conf invalid option-150 code option definitions may not be scoped.
Last modified: 2009-11-01 10:30:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 113202 
      - alternative install guide pxe dhcpd.conf invalid option-150 code option definitions may not be scoped.


Summary:
alternative install guide pxe dhcpd.conf invalid option-150 code option defin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

[OLD] Docs-user




Classification:

Unclassified




Component:

Gentoo Alternative Installation Guide

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
    (vote)
  



Assignee:

Sven Vermeulen (RETIRED)








URL:



http://www.gentoo.org/doc/en/altinsta...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-21 14:23 UTC by Michael Crawford (ali3nx)





      Modified:
    
2009-11-01 10:30 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



docs-team









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Crawford (ali3nx)





          2005-11-21 14:23:08 UTC
        

The defined option for setting paths to grub.lst in dhcp.conf as defined in the
alternative install guide code listing 5.2 is incorrent or invalid in
>=net-misc/dhcp-3.0.1-r1

Reproducible: Always
Steps to Reproduce:
1. define dhcpd.conf with the following configuration as defined in code lising 5.

option option-150 code 150 = text ;
ddns-update-style none ;
host eta {
hardware ethernet 00:00:00:00:00:00;
fixed-address ip.add.re.ss;
option option-150 "/eta/boot/grub.lst";
filename "/eta/boot/pxegrub";
}

2: start or restart >=net-misc/dhcp-3.0.1-r1
Actual Results:  
Nov 21 16:14:15 p4k1tst0rm dhcpd: /etc/dhcp/dhcpd.conf line 25: option
definitions may not be scoped.
Nov 21 16:14:15 p4k1tst0rm dhcpd: option option-150 code
Nov 21 16:14:15 p4k1tst0rm dhcpd:        ^
Nov 21 16:14:15 p4k1tst0rm dhcpd: /etc/dhcp/dhcpd.conf line 29: unknown option
dhcp.option-150
Nov 21 16:14:15 p4k1tst0rm dhcpd: option option-150
"/pxe/x86_64-pc-linux-gnu/grub.lst"
Nov 21 16:14:15 p4k1tst0rm dhcpd:        ^
Nov 21 16:14:15 p4k1tst0rm dhcpd: Configuration file errors encountered -- exiting
Nov 21 16:14:15 p4k1tst0rm dhcpd:
Nov 21 16:14:15 p4k1tst0rm dhcpd: If you did not get this software from
ftp.isc.org, please
Nov 21 16:14:15 p4k1tst0rm dhcpd: get the latest from ftp.isc.org and install
that before
Nov 21 16:14:15 p4k1tst0rm dhcpd: requesting help.
Nov 21 16:14:15 p4k1tst0rm dhcpd:
Nov 21 16:14:15 p4k1tst0rm dhcpd: If you did get this software from ftp.isc.org
and have not
Nov 21 16:14:15 p4k1tst0rm dhcpd: yet read the README, please read it before
requesting help.
Nov 21 16:14:15 p4k1tst0rm dhcpd: If you intend to request help from the
dhcp-server@isc.org
Nov 21 16:14:15 p4k1tst0rm dhcpd: mailing list, please read the section on the
README about
Nov 21 16:14:15 p4k1tst0rm dhcpd: submitting bug reports and requests for help.
Nov 21 16:14:15 p4k1tst0rm dhcpd:
Nov 21 16:14:15 p4k1tst0rm dhcpd: Please do not under any circumstances send
requests for
Nov 21 16:14:15 p4k1tst0rm dhcpd: help directly to the authors of this software
- please
Nov 21 16:14:15 p4k1tst0rm dhcpd: send them to the appropriate mailing list as
described in
Nov 21 16:14:15 p4k1tst0rm dhcpd: the README file.
Nov 21 16:14:15 p4k1tst0rm dhcpd:
Nov 21 16:14:15 p4k1tst0rm dhcpd: exiting.


Expected Results:  
Just some diskless nodes =]

p4k1tst0rm ~ # emerge info
Portage 2.0.51.22-r3 (hardened/x86/2.6, gcc-3.3.6-vanilla, glibc-2.3.5-r2,
2.6.13-hardened i686)
=================================================================
System uname: 2.6.13-hardened i686 Pentium III (Coppermine)
Gentoo Base System version 1.6.13
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -fomit-frame-pointer -fforce-addr -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/mail/dspam /usr/kde/2/share/config
/usr/kde/3/share/config /usr/share/config /var/qmail/control /var/run/dspam"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium3 -O2 -fomit-frame-pointer -fforce-addr -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.arcticnetwork.ca/pub/gentoopub/gentoo
http://mirror.datapipe.net/gentoo http://gentoo.seren.com/gentoo
ftp://gentoo.netnitco.net/pub/mirrors/gentoo/source/"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.arcticnetwork.ca/gentoo-portage"
USE="x86 X509 acl acpi adns apache2 authdaemond bash-completion berkdb bzip2
bzlib ccache chroot cluster crypt ctype curl curlwrappers dba dio dlloader
erandom ethereal exif expat extensions fam fortran freetds ftp gd gdbm geoip gmp
hardened icu idn imagemagick imap innodb ipv6 ithreads java javamail jpeg junit
kerberos ldap libg++ libwww logrotate logwatch maildir memlimit mhash mmx mpi
multislot mysql nagios-dns nagios-ntp nagios-ping nagios-ssh ncurses neural nis
nls nptl nptlonly objc odbc offensive pam pcntl pcre perl pg-hier pg-intdatetime
pg-vacuumdelay php pic pie png posix postgres procmail python readline recode
ruby sasl sendfile session sftplogging shaper shared sharedext sharedmem
simplexml snmp sockets softquota sqlite sse ssl sysvipc szip tcpd threads tiff
truetype udev unicode userlocales vda vhosts virtual-users virus-scan wddx wmf
xml xml2 xmlrpc xsl yaz zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Sven Vermeulen





          2007-07-10 18:36:02 UTC
        

Can you try with the current stable version?

I have dhcp-3.0.3-r9 and it works well:

option domain-name "testdomain.be";
default-lease-time 600;
max-lease-time 7200;
ddns-update-style none ;

option option-150 code 150 = text ;

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.100 192.168.1.200;
}

host eta {
  hardware ethernet 00:00:00:00:00:00;
  fixed-address 192.168.1.52;
  option option-150 "/eta/boot/grub.lst";
  filename "/eta/boot/pxegrub";
}

When I launch dhcpd, it doesn't complain:

Internet Systems Consortium DHCP Server V3.0.3-Gentoo-r9
Copyright 2004-2005 Internet Systems Consortium.
All rights reserved.
For info, please visit http://www.isc.org/sw/dhcp/
Wrote 0 deleted host decls to leases file.
Wrote 0 new dynamic host decls to leases file.
Wrote 0 leases to leases file.

Listening on LPF/eth0/00:c0:9f:94:6b:f5/192.168.1/24
Sending on   LPF/eth0/00:c0:9f:94:6b:f5/192.168.1/24
Sending on   Socket/fallback/fallback-net





Comment 2


Sven Vermeulen (RETIRED)






          2007-07-25 19:24:54 UTC
        

It might not have worked with previous versions, but current versions don't seem to bark on the configuration directive, so marking as WORKSFORME.




Comment 3


Arsen Shnurkov





          2009-11-01 10:22:10 UTC
        

The same bug is reproduced with net-misc/dhcp-3.1.2_p1





Comment 4


Arsen Shnurkov





          2009-11-01 10:26:58 UTC
        

(In reply to comment #3)
> The same bug is reproduced with net-misc/dhcp-3.1.2_p1

/etc/init.d/dhcpd start gives:

Internet Systems Consortium DHCP Server V3.1.2p1-Gentoo
Copyright 2004-2009 Internet Systems Consortium.
All rights reserved.
For info, please visit http://www.isc.org/sw/dhcp/
/chroot/dhcp//etc/dhcp/dhcpd.conf line 29: unknown option dhcp.option-150
  option option-150 "/var/tftp/grub.lst"
         ^
Configuration file errors encountered -- exiting

If you did not get this software from ftp.isc.org, please
get the latest from ftp.isc.org and install that before
requesting help.

If you did get this software from ftp.isc.org and have not
yet read the README, please read it before requesting help.
If you intend to request help from the dhcp-server@isc.org
mailing list, please read the section on the README about
submitting bug reports and requests for help.

Please do not under any circumstances send requests for
help directly to the authors of this software - please
send them to the appropriate mailing list as described in
the README file.

exiting.





Comment 5


Arsen Shnurkov





          2009-11-01 10:30:00 UTC
        

not a bug - I skip line

option option-150 code 150 = text ;










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

