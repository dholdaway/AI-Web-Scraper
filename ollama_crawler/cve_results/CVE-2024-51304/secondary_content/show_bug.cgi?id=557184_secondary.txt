Title: 557184 – rsync tree contains thin manifests since git migration
URL: https://bugs.gentoo.org/show_bug.cgi?id=557184

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 557184
rsync tree contains thin manifests since git migration
Last modified: 2015-08-10 06:50:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 557184 
      - rsync tree contains thin manifests since git migration


Summary:
rsync tree contains thin manifests since git migration
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Interface (emerge)

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Infrastructure








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-08-10 00:39 UTC by Wes





      Modified:
    
2015-08-10 06:50 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



zmedico









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Wes





          2015-08-10 00:39:09 UTC
        

After syncing today portage proclaimed:

=== Sync completed for gentoo
 * Missing digest for '/usr/portage/sys-apps/portage/portage-9999.ebuild'
 * Missing digest for '/usr/portage/sys-apps/portage/portage-2.2.20.ebuild'
 * Missing digest for '/usr/portage/sys-apps/portage/portage-2.2.18.ebuild'
 * Missing digest for '/usr/portage/sys-apps/portage/portage-2.2.14.ebuild'
 * Missing digest for '/usr/portage/sys-apps/portage/portage-2.2.8-r2.ebuild'

Checking the Manifest file, it seems the digests for these versions are indeed missing:

DIST portage-2.2.14.tar.bz2 896674 SHA256 8dd65971e0f1c31dca922b0f7be06e622aabbed8d012d056ff25a169fc9946d8 SHA512 c8724b42d9932adf6065ff9f9c3bb3d22ec3258dcdb23e041ce704f2c7b634d459a36764f3ec5aa4613843733c70725025af10439816c538ec12837db50dc1ab WHIRLPOOL 82bb660fcc1f0bb4639b53829cf8207fc40ee01a0cb9935ad46fb5039f0558fbbbb3af3d12d208289e9701e0874d77a7990911fd50fe04806948c6c6955625fc
DIST portage-2.2.18.tar.bz2 942561 SHA256 e0d54f2fbcdc8b5fce716475183fa6e889b6fa8178c92d65a850df73f1636560 SHA512 be4f95bc04a61cdb371fc66a03d2183961bfd458e9b2b89cf8cab8c9e70bde4119be266177d947e31429627609ed75a75c21abfe4b674ca529632d5728e8e8a6 WHIRLPOOL f334bf5198d2214de557a046ed3217e23d48d8f8d7d64fb0bd2611dd5c8725139eaf7d1e1065f822d8816f3979e86d6a6f8df4d2f4605df0b5c157d6bbf09a6d
DIST portage-2.2.20.tar.bz2 950293 SHA256 483ce0b20960840f6499452ca4ef7df36fde08f835dcadf3cdd118c1ff7207a4 SHA512 fffb43a4c25a70cae071246fde7e379107535e607b9e8dd9fb513315a10750db92209bb436f532930a44cac06ba43aade06a7c2b0a1d675fd816968ba0fce7ae WHIRLPOOL aa1e560007cdafebd2bf56964d61e55a91fef4be5cd9bc50560891140287f6827ecda9d99e31ceb4e5a64691863fde325b51594cfdcfe88eb260fba47dad5fb9
DIST portage-2.2.8.tar.bz2 874672 SHA256 c1074e01173df5384e003598dbc5f64f09e92f83fd26faab2f88f9f0bc64aa7e SHA512 acc47d94ff8c08e5a7bf2d4c4e600863430dd1e7d0bb8b4254d6477a498933cae663db84debf9487d2243c2cba689629ef8e8b6cf108e10d40e89e8e8d7e1257 WHIRLPOOL d54290ede8d3d85e5211cda7e86ed740178121ef2f47cf0858c27941d8679d29c11445befff962986d40a47ded50d0d4654de19e7d4aef3fdf2546655a0d6fe2



Reproducible: Always

Steps to Reproduce:
1. emerge --sync

Actual Results:  
Missing digests

Expected Results:  
That digests be present and Manifest updated accordingly

Is this happening globally or just on my rsync mirror?
rsync://rsync1.au.gentoo.org/gentoo-portage




Comment 1


Wes





          2015-08-10 00:41:10 UTC
        

Seems I misread the Manifest, why is it reporting the error though?




Comment 2


Wes





          2015-08-10 00:44:14 UTC
        

Uhh..
Just tried to emerge -u --deep --newuse world, and now it's saying missing digests for *all* the things:

anomaly@symbiote ~ $ sudo emerge -u --deep --newuse world

These are the packages that would be merged, in order:

Calculating dependencies - * Missing digest for '/usr/portage/media-libs/schroedinger/schroedinger-1.0.11-r1.ebuild'
 * Missing digest for '/usr/portage/dev-libs/elfutils/elfutils-0.158.ebuild'
 / * Missing digest for '/usr/portage/sys-apps/dtc/dtc-1.4.1.ebuild'
 * Missing digest for '/usr/portage/media-libs/fontconfig/fontconfig-2.11.1-r2.ebuild'
 / * Missing digest for '/usr/portage/media-sound/gsm/gsm-1.0.13-r1.ebuild'
 * Missing digest for '/usr/portage/kde-base/kdm/kdm-4.11.19.ebuild'
 \ * Missing digest for '/usr/portage/media-plugins/gst-plugins-resindvd/gst-plugins-resindvd-0.10.23-r1.ebuild'
 * Missing digest for '/usr/portage/sys-fs/fuse/fuse-2.9.4.ebuild'
 / * Missing digest for '/usr/portage/net-dialup/ppp/ppp-2.4.7.ebuild'
 * Manifest not found for '/usr/portage/virtual/logger/logger-0.ebuild'
 * Missing digest for '/usr/portage/net-misc/wget/wget-1.16.ebuild'
 \ * Missing digest for '/usr/portage/sys-apps/dbus/dbus-1.8.16.ebuild'
 * Missing digest for '/usr/portage/kde-base/kwin/kwin-4.11.19.ebuild'
 * Missing digest for '/usr/portage/kde-apps/kolourpaint/kolourpaint-4.14.3.ebuild'
 / * Missing digest for '/usr/portage/kde-apps/kbreakout/kbreakout-4.14.3.ebuild'
 * Missing digest for '/usr/portage/dev-cpp/eigen/eigen-3.1.3.ebuild'
 * Missing digest for '/usr/portage/x11-proto/xcb-proto/xcb-proto-1.11.ebuild'
 / * Missing digest for '/usr/portage/dev-libs/librevenge/librevenge-0.0.2.ebuild'
 * Missing digest for '/usr/portage/sys-fs/dmg2img/dmg2img-1.6.5.ebuild'
 * Missing digest for '/usr/portage/kde-apps/plasma-apps/plasma-apps-4.14.3.ebuild'

<SNIP because this list goes on for hundreds of pages>




Comment 3


Zac Medico






          2015-08-10 01:01:19 UTC
        

I the gentoo-portage-rsync-mirror repo on github shows thin manifests showning up for all packages I've checked. For example:

https://github.com/gentoo/gentoo-portage-rsync-mirror/blob/master/sys-libs/glibc/Manifest




Comment 4


Tomáš Mózes





          2015-08-10 06:42:47 UTC
        

Try to resync your tree, it should be ok now.




Comment 5


Wes





          2015-08-10 06:50:33 UTC
        

Yep working now, thanks









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

