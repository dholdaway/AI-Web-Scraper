Title: 268567 – gnome-base/gdm-2.20.10-r1: unexpected logout due pam problems
URL: https://bugs.gentoo.org/show_bug.cgi?id=268567

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 268567
gnome-base/gdm-2.20.10-r1: unexpected logout due pam problems
Last modified: 2009-06-09 13:01:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 268567 
      - gnome-base/gdm-2.20.10-r1: unexpected logout due pam problems


Summary:
gnome-base/gdm-2.20.10-r1: unexpected logout due pam problems
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-04 09:41 UTC by Pacho Ramos





      Modified:
    
2009-06-09 13:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Pacho Ramos






          2009-05-04 09:41:45 UTC
        

Seems that I am suffering these strange problems since updating from 2.20.10 to 2.20.10-r1 (I have just downgraded again after other logout for testing).

From time to time, X gets restarted due errors like these in /var/log/messages:
May  4 11:38:08 belkin2 login[6140]: pam_tally(login:auth): pam_get_uid; no such user
May  4 11:38:11 belkin2 login[6140]: pam_unix(login:auth): check pass; user unknown
May  4 11:38:11 belkin2 login[6140]: pam_unix(login:auth): authentication failure; logname=LOGIN uid=0 euid=0 tty=tty2 ruser= rhost= 
May  4 11:38:15 belkin2 login[6140]: FAILED LOGIN (1) on 'tty2' FOR `UNKNOWN', User not known to the underlying authentication module
May  4 11:38:57 belkin2 login[6140]: pam_securetty(login:auth): unexpected response from failed conversation function
May  4 11:38:57 belkin2 login[6140]: pam_securetty(login:auth): cannot determine username
May  4 11:38:57 belkin2 login[6140]: pam_tally(login:auth): pam_get_user; user?
May  4 11:38:57 belkin2 login[6140]: pam_nologin(login:auth): cannot determine username
May  4 11:38:57 belkin2 gdm[3580]: WARNING: gdm_slave_xioerror_handler: ha ocurrido un error fatal de X - Reiniciando :0
May  4 11:38:57 belkin2 gdm[3580]: pam_unix(gdm:session): session closed for user pacho

My emerge --info:
Portage 2.1.6.12 (default/linux/amd64/2008.0/desktop, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.29-gentoo-r2 x86_64)
=================================================================
System uname: Linux-2.6.29-gentoo-r2-x86_64-AMD_Athlon-tm-_64_Processor_3200+-with-glibc2.2.5
Timestamp of tree: Sat, 02 May 2009 10:00:02 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.7
dev-lang/python:     2.5.4-r2
dev-python/pycrypto: 2.0.1-r8
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.2-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/distfiles"
FEATURES="autoaddcvs ccache cvs distlocks fixpackages multilib-strict parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.free.fr/mirrors/ftp.gentoo.org"
LANG="es_ES.UTF-8"
LC_ALL="es_ES.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="es es_ES en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acl acpi alsa amd64 applet avahi bash-completion beagle berkdb branding bzip2 cairo cddb cdinstall cdr cleartype cli consolekit cracklib crypt css cups daap dbus djvu dri dts dvd dvdr dvdread dvi eds emboss encode esd evo exif fam fat ffmpeg firefox flac fortran fuse gdbm gif git glitz gnome gnome-keyring gpm gstreamer gtk hal iconv imagemagick isdnlog java jpeg jpeg2k kdeenablefinal kdehiddenvisibility kpathsea latex libnotify lyx lzma mad midi mikmod mmx mmxext mono mp3 mpeg mudflap multilib musicbrainz nautilus ncurses network network-cron nls nptl nptlonly ntfs nvidia ogg opengl openmp pam pango pch pcre pdf perl png ppds pppd python qt3support qt4 quicktime readline reflection reiserfs scanner sdl session spell spl sse sse2 ssl ssse3 startup-notification subversion svg sysfs t1lib tcpd threads tiff truetype unicode usb v4l2 vcd vorbis webkit xattr xcb xinetd xml xmp xorg xpm xulrunner xv xvid zeroconf zlib" ALSA_CARDS="via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="es es_ES en_US" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Reproducible: Always




Comment 1


Pacho Ramos






          2009-05-04 09:44:00 UTC
        

Merged with:
branding consolekit elibc_glibc gnome-keyring pam tcpd

enabled USEs




Comment 2


Gilles Dartiguelongue (RETIRED)






          2009-05-04 12:14:50 UTC
        

There should be no difference in installed files by gdm-2.20.10 and -r1 given the flags you mention. The pam errors you list though might suggest that something gets borked at pam level. Did you customize your pam stack ?




Comment 3


Pacho Ramos






          2009-05-04 19:22:08 UTC
        

(In reply to comment #2)
> There should be no difference in installed files by gdm-2.20.10 and -r1 given
> the flags you mention. The pam errors you list though might suggest that
> something gets borked at pam level. Did you customize your pam stack ?
> 

Not at all, because I don't know anything about pam. Maybe it's because of pambase update due new gdm requeriments (from stable to current testing version) :-/




Comment 4


Gilles Dartiguelongue (RETIRED)






          2009-05-04 19:40:45 UTC
        

could be, tried downgrading only gdm I guess ?




Comment 5


Pacho Ramos






          2009-05-04 19:48:01 UTC
        

(In reply to comment #4)
> could be, tried downgrading only gdm I guess ?
> 

I downgraded only gdm, but I am still trying (I couldn't use computer during all the day as you probably can understand :-))




Comment 6


Gilles Dartiguelongue (RETIRED)






          2009-05-07 21:55:26 UTC
        

please get back to us.




Comment 7


Pacho Ramos






          2009-05-09 21:59:40 UTC
        

Seems that I don't suffer this problem anymore with:
[ebuild   R   ] sys-auth/pambase-20090430  USE="consolekit cracklib gnome-keyring sha512 -debug -mktemp -passwdqc (-selinux) -ssh" 0 kB [0]
[ebuild   R   ] gnome-base/gdm-2.20.10  USE="branding gnome-keyring pam tcpd -accessibility -afs -debug -dmx -ipv6 -remote (-selinux) -xinerama" 0 kB [0]





Comment 8


Gilles Dartiguelongue (RETIRED)






          2009-05-14 22:55:43 UTC
        

I can't reproduce this problem even why I updated my 2.24 box to gdm-2.20.10-r1 and latest pambase.




Comment 9


Pacho Ramos






          2009-05-15 11:49:32 UTC
        

(In reply to comment #8)
> I can't reproduce this problem even why I updated my 2.24 box to gdm-2.20.10-r1
> and latest pambase.
> 

I will update again to -r1 for see if it reappears then




Comment 10


Pacho Ramos






          2009-06-09 13:01:37 UTC
        

I haven't seen this from a while









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

