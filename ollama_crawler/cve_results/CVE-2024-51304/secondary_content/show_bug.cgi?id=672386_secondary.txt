Title: 672386 – dev-libs/libuv-1.24.0 - src_prepare(): Portage patch failed to apply (ltmain.sh version 2.4.6)!
URL: https://bugs.gentoo.org/show_bug.cgi?id=672386

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 672386
dev-libs/libuv-1.24.0 - src_prepare(): Portage patch failed to apply (ltmain.sh version 2.4.6)!
Last modified: 2018-12-02 14:33:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 672386 
      - dev-libs/libuv-1.24.0 - src_prepare(): Portage patch failed to apply (ltmain.sh version 2.4.6)!


Summary:
dev-libs/libuv-1.24.0 - src_prepare(): Portage patch failed to apply (ltmain....
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-12-02 09:53 UTC by Klaus Kusche





      Modified:
    
2018-12-02 14:33 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jer









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Klaus Kusche





          2018-12-02 09:53:21 UTC
        

Emerge log:

 * libuv-1.24.0.tar.gz BLAKE2B SHA512 size ;-) ...                                                                                                                                                          [ ok ]
 * Package:    dev-libs/libuv-1.24.0
 * Repository: gentoo
 * Maintainer: kde@gentoo.org jer@gentoo.org
 * Upstream:   https://github.com/libuv/libuv/issues
 * USE:        abi_x86_64 amd64 elibc_glibc kernel_linux userland_GNU
 * FEATURES:   keeptemp keepwork preserve-libs sandbox userpriv usersandbox
>>> Unpacking source...
>>> Unpacking libuv-1.24.0.tar.gz to /var/portage/portage/dev-libs/libuv-1.24.0/work
>>> Source unpacked in /var/portage/portage/dev-libs/libuv-1.24.0/work
>>> Preparing source in /var/portage/portage/dev-libs/libuv-1.24.0/work/libuv-1.24.0 ...
 * Running eautoreconf in '/var/portage/portage/dev-libs/libuv-1.24.0/work/libuv-1.24.0' ...
 * Running libtoolize --install --copy --force --automake ...
 [ ok ]
 * Running aclocal -I m4 ...
 [ ok ]
 * Running autoconf --force ...
 [ ok ]
 * Running automake --add-missing --copy --foreign --force-missing ...
 [ ok ]
 * Running elibtoolize in: libuv-1.24.0/
 *   Applying portage/1.5.10 patch ...
 *   Applying portage/1.2.0 patch ...

 * Portage patch failed to apply (ltmain.sh version 2.4.6)!
 * Please file a bug report to add a proper patch.
 * ERROR: dev-libs/libuv-1.24.0::gentoo failed (prepare phase):
 *   eltpatch failed
 * 
 * Call stack:
 *     ebuild.sh, line  124:  Called src_prepare
 *   environment, line 1804:  Called eautoreconf
 *   environment, line  768:  Called elibtoolize '--force' '/var/portage/portage/dev-libs/libuv-1.24.0/work/libuv-1.24.0'
 *   environment, line  801:  Called die
 * The specific snippet of code:
 *       ELT_LOGDIR=${T} LD=$(tc-getLD) eltpatch "${@}" || die "eltpatch failed"
 * 
 * If you need support, post the output of `emerge --info '=dev-libs/libuv-1.24.0::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-libs/libuv-1.24.0::gentoo'`.
 * The complete build log is located at '/var/portage/log/dev-libs:libuv-1.24.0:20181202-093452.log'.
 * For convenience, a symlink to the build log is located at '/var/portage/portage/dev-libs/libuv-1.24.0/temp/build.log'.
 * The ebuild environment file is located at '/var/portage/portage/dev-libs/libuv-1.24.0/temp/environment'.
 * Working directory: '/var/portage/portage/dev-libs/libuv-1.24.0/work/libuv-1.24.0'
 * S: '/var/portage/portage/dev-libs/libuv-1.24.0/work/libuv-1.24.0'

Emerge info:
Portage 2.3.52 (python 2.7.15-final-0, default/linux/amd64/17.1/no-multilib, gcc-8.2.0, glibc-2.28-r2, 4.19.4-gentoo x86_64)
=================================================================
System uname: Linux-4.19.4-gentoo-x86_64-Intel-R-_Core-TM-_i7-3940XM_CPU_@_3.00GHz-with-gentoo-2.6
KiB Mem:    32900492 total,  21621584 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Sun, 02 Dec 2018 07:15:01 +0000
Head commit of repository gentoo: 5019cc7b54eb4bd2b33d0449446d0f3e6cd63f3c
sh dash 0.5.10.2
ld GNU gold (Gentoo 2.31.1 p3 2.31.1) 1.16
app-shells/bash:          4.4_p23::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.26.2::gentoo
dev-lang/python:          2.7.15::gentoo, 3.6.6::gentoo
dev-util/cmake:           3.13.1::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.13.4-r2::gentoo, 1.16.1-r1::gentoo
sys-devel/binutils:       2.31.1-r1::gentoo
sys-devel/gcc:            8.2.0-r5::gentoo
sys-devel/gcc-config:     2.0::gentoo
sys-devel/libtool:        2.4.6-r5::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.19::gentoo (virtual/os-headers)
sys-libs/glibc:           2.28-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.de.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes
    sync-rsync-extra-opts: 
    sync-rsync-verify-max-age: 24

archive
    location: /usr/local/portage
    masters: gentoo

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 AdobeFlash-11.x Oracle-BCLA-JavaSE google-chrome googleearth Vivaldi FraunhoferFDK"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -mtune=native -msahf -flto -fuse-linker-plugin -O3 -fomit-frame-pointer -fsched-pressure -fgcse-after-reload -flive-range-shrinkage -fweb -ftracer -fivopts -ftree-loop-im -frename-registers -fstdarg-opt -maccumulate-outgoing-args -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -mtune=native -msahf -flto -fuse-linker-plugin -O3 -fomit-frame-pointer -fsched-pressure -fgcse-after-reload -flive-range-shrinkage -fweb -ftracer -fivopts -ftree-loop-im -frename-registers -fstdarg-opt -maccumulate-outgoing-args -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--quiet-build --quiet-fail --with-bdeps=y"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs collision-protect config-protect-if-modified distlocks ebuild-locks fixlafiles keeptemp keepwork merge-sync multilib-strict news noclean parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://linux.rz.rub.de/download/gentoo-mirror http://ftp.spline.inf.fu-berlin.de/mirrors/gentoo http://distfiles.gentoo.org"
LANG="en_DE.iso885915"
LC_ALL="en_DE.iso885915"
LDFLAGS="-march=native -mtune=native -msahf -flto -fuse-linker-plugin -O3 -fomit-frame-pointer -fsched-pressure -fgcse-after-reload -flive-range-shrinkage -fweb -ftracer -fivopts -ftree-loop-im -frename-registers -fstdarg-opt -maccumulate-outgoing-args -pipe"
LINGUAS="en"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/portage"
USE="64bit X \ a52 aac adobe-cff alsa amd64 apng applet archive arping ass avx bzip2 cacert cairo cdda cdparanoia clang cli clipboard clockdiff contrast cups curl cxx dbus dconf demosaic detex devfs-compat dga divx dns dot dri dri3 drm dts dvd dvdnav dvdr dvi dvipdfm eapol_test egl eme-free encode epspdf evdev exif expat extra faad fdk ffmpeg fftw flac fontconfig foomaticdb fts3 g3dvl gallium gbm gdk-pixbuf gegl gif gimp glamor gles gles1 gles2 glib glibc-omitfp gmp gold graphics gs gstreamer gtk gtk3 gudev harfbuzz hostonly hpack-tools hpn htmlreport http http2 hugepages hwaccel hwdb iconv icu ilbc imagemagick inotify javascript jbig jemalloc jemalloc3 jit jpeg jpeg2k keyrecord kms kpathsea kvazaar lasi latex latex3 lazy-lock lcdfilter lcms leaps_timezone lensfun libdrm libevent libilbc libkms libnotify libopts libsamplerate libtirpc libwww lightning llvm llvm-gcc llvm-shared-libs lto lz4 lzma lzo mad matroska metalink metric midi minizip mmap mms mmx mmxext mng modern-top mp3 mpeg mpfr mta mudflap multicall native-extensions natspec ncat ncurses ndiff nghttp2 nping nptl offensive ogg oldnet opengl openmax openmp openssl openvg opus orc osmesa pam pango pcap pcre pcre16 pdf pdfimport plugins png policykit postproc postscript ppds printsupport proprietary-codecs pstricks pth pulseaudio quicktime r600-llvm-compiler rar raw readline realmedia right_timezone rpc rsync-verify rtc rule_generator sanitize scanner schroedinger scope seccomp secure-delete session sha3 smp snappy sndfile sound speex split-usr sqlite sqlite3 srtp sse sse2 sse3 sse4 sse4_1 sse4_2 ssh ssl ssse3 svc svg symlink sync-plugin-portage system-bzip2 system-cairo system-ffmpeg system-harfbuzz system-hunspell system-icu system-jpeg system-jsoncpp system-libevent system-libvpx system-libwebp system-sqlite system-zlib systemd sysv-utils t1lib texi2html theora threads thunar tiff tools tracepath tremor truetype udev udisks unicode unlock-notify unwind usb utils v4l v4l2 vaapi vdpau video vim-with-x vorbis vpx webkit2 webp wext wifi wmf wmp wxwidgets x264 x265 xcb xcomposite xetex xkb xmp xorg xpm xpresent xrandr xulrunner xv xvid zenmap zip zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon plan sheets stage words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx f16c mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" CURL_SSL="openssl" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" L10N="en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer pdfimport" LLVM_TARGETS="AMDGPU BPF X86" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-1" POSTGRES_TARGETS="postgres9_5 postgres10" PYTHON_SINGLE_TARGET="python3_6" PYTHON_TARGETS="python3_6 python2_7" RUBY_TARGETS="ruby25" SANE_BACKENDS="epson" USERLAND="GNU" VIDEO_CARDS="radeon radeonsi amdgpu" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jeroen Roovers (RETIRED)






          2018-12-02 14:21:46 UTC
        

Could you attach your temp/elibtool.log, please?




Comment 2


Klaus Kusche





          2018-12-02 14:33:17 UTC
        


Strange thing...
After having emerged about 30 other packages today,
libuv-1.24.0 now emerges fine...

Problem seems to be fixed or has disappeared.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

