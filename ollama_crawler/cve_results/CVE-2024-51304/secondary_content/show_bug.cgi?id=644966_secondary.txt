Title: 644966 – www-client/chromium-63.0.3239.132 ../../base/trace_event/trace_log.h:93:62: internal compiler error: Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=644966

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 644966
www-client/chromium-63.0.3239.132 ../../base/trace_event/trace_log.h:93:62: internal compiler error: Segmentation fault
Last modified: 2018-02-03 22:09:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 644966 
      - www-client/chromium-63.0.3239.132 ../../base/trace_event/trace_log.h:93:62: internal compiler error: Segmentation fault


Summary:
www-client/chromium-63.0.3239.132 ../../base/trace_event/trace_log.h:93:62: i...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-01-18 17:15 UTC by Mauro Maroni





      Modified:
    
2018-02-03 22:09 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



gentoobugs.pistos
slyfox
toolchain









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log.bz2,331.88 KB,
                application/x-bzip)

            
2018-01-18 17:17 UTC,

            Mauro Maroni




Details





emerge -pqv '=www-client/chromium-63.0.3239.132::gentoo'

              (emerge-pqv.txt,469 bytes,
                text/plain)

            
2018-01-18 17:18 UTC,

            Mauro Maroni




Details





environment

              (environment,200.55 KB,
                text/plain)

            
2018-01-18 17:19 UTC,

            Mauro Maroni




Details





`emerge --info '=www-client/chromium-63.0.3239.132::gentoo'` of Pistos

              (pistos-chromium-emerge-info.txt,5.81 KB,
                text/plain)

            
2018-01-26 03:50 UTC,

            Pistos




Details





`emerge -pqv '=www-client/chromium-63.0.3239.132::gentoo'` of Pistos

              (pistos-chromium-emerge-pqv.txt,519 bytes,
                text/plain)

            
2018-01-26 03:51 UTC,

            Pistos




Details





/var/log/portage/www-client:chromium-63.0.3239.132:20180125-204411.log of Pistos

              (pistos-chromium-build.log,970.96 KB,
                text/plain)

            
2018-01-26 03:52 UTC,

            Pistos




Details





`gcc -Q -O2 --help=optimizers --help=target` of Pistos

              (pistos-chromium-gcc-q.txt,16.06 KB,
                text/plain)

            
2018-01-26 03:52 UTC,

            Pistos




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mauro Maroni





          2018-01-18 17:15:33 UTC
        

www-client/chromium-63.0.3239.132 fails to compile when doing regular world update. Tried with -j9 and -j2 (just in case of any memory issue), same result.

Reproducible: Always

Steps to Reproduce:
emerge -av --deep --update --newuse --with-bdeps=y world 
Actual Results:  
* ERROR: www-client/chromium-63.0.3239.132::gentoo failed (compile phase):
 *   ninja -v -j2 -l0 -C out/Release v8_context_snapshot_generator failed
 * 
 * Call stack:
 *     ebuild.sh, line  124:  Called src_compile
 *   environment, line 5120:  Called eninja '-C' 'out/Release' 'v8_context_snapshot_generator'
 *   environment, line 1798:  Called die
 * The specific snippet of code:
 *       "$@" || die "${nonfatal_args[@]}" "${*} failed"



Portage 2.3.13 (python 3.5.4-final-0, default/linux/amd64/17.0/desktop/plasma, gcc-6.4.0, glibc-2.25-r9, 4.14.8-gentoo-r1 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.14.8-gentoo-r1-x86_64-AMD_FX-tm-8150_Eight-Core_Processor-with-gentoo-2.4.1
KiB Mem:     8123676 total,   2446668 free
KiB Swap:    8392296 total,   8392040 free
Timestamp of repository gentoo: Mon, 15 Jan 2018 05:45:01 +0000
Head commit of repository gentoo: eb45350e3b1593952ebf3ba7f010447c9ef6113a
sh bash 4.4_p12
ld GNU ld (Gentoo 2.29.1 p3) 2.29.1
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.24.3::gentoo
dev-lang/python:          2.7.14-r1::gentoo, 3.5.4-r1::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.11::gentoo
sys-apps/sandbox:         2.10-r4::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.11.6-r2::gentoo, 1.15.1-r1::gentoo
sys-devel/binutils:       2.29.1-r1::gentoo
sys-devel/gcc:            6.4.0-r1::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.25-r9::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.us.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en es"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow X a52 aac acl acpi activities alsa amd64 bash-completion berkdb bluetooth branding bzip2 cairo cdda cddb cdparanoia cdr cli consolekit crypt cups cxx dbus declarative dri dts dvd dvdr emboss encode exif fam ffmpeg firefox flac fortran gdbm gif glamor gpm hddtemp iconv ios ipod ipv6 jabber jpeg kde kipi kwallet lame lcms ldap libnotify lm_sensors mad mms mng modules mozilla mp3 mp4 mpeg msn multilib ncurses nls nptl nsplugin nvidia ogg opengl openmp pam pango pcre pdf phonon plasma png policykit ppds qml qt3support qt5 quicktime readline samba sdl seccomp semantic-desktop smp snmp sound sox spell sse3 ssl startup-notification svg taglib tcpd threads tiff truetype udev udisks unicode upower usb v4l vdpau vnc vorbis webkit widgets win32codecs wxwidgets x264 xattr xcb xcomposite xine xml xmpp xv xvid xvmc zlib" ABI_X86="64 32" ALSA_CARDS="hda-intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx fma4 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5" PYTHON_SINGLE_TARGET="python3_5" PYTHON_TARGETS="python2_7 python3_5" RUBY_TARGETS="ruby22" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

Portage 2.3.13 (python 3.5.4-final-0, default/linux/amd64/17.0/desktop/plasma, gcc-6.4.0, glibc-2.25-r9, 4.14.8-gentoo-r1 x86_64)
=================================================================
System uname: Linux-4.14.8-gentoo-r1-x86_64-AMD_FX-tm-8150_Eight-Core_Processor-with-gentoo-2.4.1
KiB Mem:     8123676 total,   5647548 free
KiB Swap:    8392296 total,   8392296 free
Timestamp of repository gentoo: Thu, 18 Jan 2018 06:15:01 +0000
Head commit of repository gentoo: f0fabf890886dab370d14e091e97de28db01c200
sh bash 4.4_p12
ld GNU ld (Gentoo 2.29.1 p3) 2.29.1
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.24.3::gentoo
dev-lang/python:          2.7.14-r1::gentoo, 3.5.4-r1::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.11::gentoo
sys-apps/sandbox:         2.10-r4::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.11.6-r2::gentoo, 1.15.1-r1::gentoo
sys-devel/binutils:       2.29.1-r1::gentoo
sys-devel/gcc:            6.4.0-r1::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.25-r9::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.us.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en es"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow X a52 aac acl acpi activities alsa amd64 bash-completion berkdb bluetooth branding bzip2 cairo cdda cddb cdparanoia cdr cli consolekit crypt cups cxx dbus declarative dri dts dvd dvdr emboss encode exif fam ffmpeg firefox flac fortran gdbm gif glamor gpm hddtemp iconv ios ipod ipv6 jabber jpeg kde kipi kwallet lame lcms ldap libnotify lm_sensors mad mms mng modules mozilla mp3 mp4 mpeg msn multilib ncurses nls nptl nsplugin nvidia ogg opengl openmp pam pango pcre pdf phonon plasma png policykit ppds qml qt3support qt5 quicktime readline samba sdl seccomp semantic-desktop smp snmp sound sox spell sse3 ssl startup-notification svg taglib tcpd threads tiff truetype udev udisks unicode upower usb v4l vdpau vnc vorbis webkit widgets win32codecs wxwidgets x264 xattr xcb xcomposite xine xml xmpp xv xvid xvmc zlib" ABI_X86="64 32" ALSA_CARDS="hda-intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx fma4 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5" PYTHON_SINGLE_TARGET="python3_5" PYTHON_TARGETS="python2_7 python3_5" RUBY_TARGETS="ruby22" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Mauro Maroni





          2018-01-18 17:17:32 UTC
        

Created attachment 515266 [details]
build.log




Comment 2


Mauro Maroni





          2018-01-18 17:18:19 UTC
        

Created attachment 515268 [details]
emerge -pqv '=www-client/chromium-63.0.3239.132::gentoo'




Comment 3


Mauro Maroni





          2018-01-18 17:19:31 UTC
        

Created attachment 515270 [details]
environment




Comment 4


Mike Gilbert






          2018-01-18 17:31:56 UTC
        

../../base/trace_event/trace_log.h:93:62: internal compiler error: Segmentation fault

I would guess binutils or gcc is broken. Please try rebuilding them.

Otherwise, please check dmesg for errors.




Comment 5


Mauro Maroni





          2018-01-18 18:34:29 UTC
        

(In reply to Mike Gilbert from comment #4)
> ../../base/trace_event/trace_log.h:93:62: internal compiler error:
> Segmentation fault
> 
> I would guess binutils or gcc is broken. Please try rebuilding them.
> 
> Otherwise, please check dmesg for errors.

Rebuilt gcc yesterday, just rebuilt binutils. Same result. Nothing on dmesg.




Comment 6


Mike Gilbert






          2018-01-18 18:43:05 UTC
        

@toolchain: Can you give any tips to help Mauro troubleshoot this gcc segfault?




Comment 7


Sergei Trofimovich (RETIRED)






          2018-01-20 19:09:34 UTC
        

You need to extract preprocessed file and exact options to gcc that crash it.
For that you need to:
- go to $WORKDIR and run failing gcc command with '-save-temps' added
- find corresponding *.i* file
- attach exact command and *.i* file
- if you are using -march=native we need expanded form of it.
  Paste output of 'gcc -Q -O2 --help=optimizers --help=target'

Then we can try to reproduce/explore it.

Once reproduced I personally use c-reduce to shrink sample down to something tiny: http://trofi.github.io/posts/198-c-reduce-nano-howto.html




Comment 8


Pistos





          2018-01-26 03:48:21 UTC
        

I, too, cannot build this exact chromium version.  Also getting segfaults, but a different one every time:

# cat /var/log/portage/*chrom*2018012* | grep 'Segmentation fault'
gen/ui/gfx/mojo/buffer_types.mojom-shared-internal.h:255:5: internal compiler error: Segmentation fault
gen/blink/core/ComputedStyleBase.h:6657:5: internal compiler error: Segmentation fault
../../net/http/http_stream_factory_impl.h:139:49: internal compiler error: Segmentation fault
/usr/lib/gcc/x86_64-pc-linux-gnu/6.4.0/include/g++-v6/bits/unique_ptr.h:313:35: internal compiler error: Segmentation fault
../../third_party/WebKit/Source/platform/fonts/FontDescription.h:146:3: internal compiler error: Segmentation fault
../../third_party/WebKit/Source/core/html/custom/V0CustomElementUpgradeCandidateMap.h:61:41: internal compiler error: Segmentation fault
../../third_party/WebKit/Source/core/css/resolver/CSSPropertyPriority.h:59:1: internal compiler error: Segmentation fault
../../gpu/command_buffer/service/gles2_cmd_decoder.cc:10346:34: internal compiler error: Segmentation fault
/usr/lib/gcc/x86_64-pc-linux-gnu/6.4.0/include/g++-v6/bits/hashtable_policy.h:627:5: internal compiler error: Segmentation fault

I have recently upgraded from profile 13 to profile 17, and upgraded gcc from 5.4 to 6.4.  I (eventually) followed the instructions in the eselect news item, and the Upgrading GCC instructions, re: rebuilding gcc, libtool, and empty-tree world, etc. etc.  Every other package in my @world [eventually] succeeded in building.  chromium-63 is the final one that won't.

I am attaching emerge --info, emerge -pqv, [one of] the full build log[s], and gcc -q.




Comment 9


Pistos





          2018-01-26 03:50:32 UTC
        

Created attachment 516744 [details]
`emerge --info '=www-client/chromium-63.0.3239.132::gentoo'` of Pistos




Comment 10


Pistos





          2018-01-26 03:51:19 UTC
        

Created attachment 516746 [details]
`emerge -pqv '=www-client/chromium-63.0.3239.132::gentoo'` of Pistos




Comment 11


Pistos





          2018-01-26 03:52:07 UTC
        

Created attachment 516748 [details]
/var/log/portage/www-client:chromium-63.0.3239.132:20180125-204411.log of Pistos




Comment 12


Pistos





          2018-01-26 03:52:45 UTC
        

Created attachment 516750 [details]
`gcc -Q -O2 --help=optimizers --help=target` of Pistos




Comment 13


Pistos





          2018-01-26 15:23:43 UTC
        

I scaled down from MAKEOPTS="-s -j5 -l 6" to MAKEOPTS="-s -j2 -l 3" and then it succeeded for me.  Sorry for the noise!  Hope my example helps someone else, though.  For the record, my system has 12 GB RAM.




Comment 14


Mauro Maroni





          2018-02-03 21:56:47 UTC
        

Tried one more time with -j2 and this time it worked. I do not know, maybe it was a hardware issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

