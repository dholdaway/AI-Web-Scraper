Title: 81476 – scim+gtk-sharp: glibc detected free(): invalid pointer
URL: https://bugs.gentoo.org/show_bug.cgi?id=81476

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 81476
scim+gtk-sharp: glibc detected free(): invalid pointer
Last modified: 2006-11-11 09:49:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 81476 
      - scim+gtk-sharp: glibc detected free(): invalid pointer


Summary:
scim+gtk-sharp: glibc detected free(): invalid pointer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

CJK Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-10 02:58 UTC by Gábor Farkas





      Modified:
    
2006-11-11 09:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dotnet









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




hello.cs

              (hello.cs,408 bytes,
                text/plain)

            
2005-02-10 02:59 UTC,

            Gábor Farkas




Details





backtrace.txt

              (bt.txt,4.63 KB,
                text/plain)

            
2005-02-10 12:00 UTC,

            Gábor Farkas




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Gábor Farkas





          2005-02-10 02:58:21 UTC
        

i use scim.

when i start a gtk-sharp application (any gtk-sharp app), it crashes with: 

*** glibc detected *** free(): invalid pointer: 0x0829df88 ***
Aborted

(well, not exactly at the beginning.. it crashes when it gets shown with a text-editable-field (where scim would do his job)..so for example muine starts fine, it crashes when you open the play-album window)

i'll attach a very simple gtk-sharp app that demonstrates the problem.

running it with mint (not mono), gives some more info:
*** glibc detected *** free(): invalid pointer: 0x08279db0 ***
Nothing can catch this exception: ExecutionEngineException: Abort (SIGABRT).
#0: 0x00009 calli.nat  in (wrapper managed-to-native) Gtk.Widget:gtk_widget_show_all (intptr) ([0x81a36a8] )
#1: 0x00003 vcall      in Gtk.Widget:ShowAll () ()
#2: 0x0001e vcallvirt  in GtkSharpTutorial.helloworld:Main (string[]) ([0x808d8c0] )

does this mean that it crashes in the gtk_widget_show_all method?

i tried this on ubuntu-linux, and there it works fine.

glibc-2.3.4.20041102 (+nptl +nptlonly)
gtk+2.6.1-r1
gtk-sharp-1.0.4-r1
mono-1.0.5-r3
scim-1.0.2

ps:
there is an another problem with scim (not related to gtk-sharp).
howto-reproduce:
1. launch gedit
2. choose the scim input method (if it not the default)
3. start the scim input method (usually ctrl+space)
4. select the m17n-ja-anthy method
5. enter some text
6. press F7 (commit as katakana)

*** glibc detected *** corrupted double-linked list: 0x085aef88 ***


so i wonder..is it some kind of problem with my gentoo? btw. should i report this scim+m17n problem as a separate bug?
gabor@dubb ~ $ gedit
*** glibc detected *** corrupted double-linked list: 0x085aef88 ***




Comment 1


Gábor Farkas





          2005-02-10 02:59:11 UTC
        

Created attachment 50906 [details]
hello.cs

i attached hello.cs, a very simple gtk-sharp app.

compile it with:
"mcs hello.cs -pkg:gtk-sharp"

and run with:
"mono hello.exe"

or
"mint hello.exe"




Comment 2


Peter Johanson (RETIRED)






          2005-02-10 09:40:12 UTC
        

This seems to be related to a problem with scim, not with gtk-sharp, but CCing dotnet anyway.

Can you get any useful backtraces when this happens?




Comment 3


Gábor Farkas





          2005-02-10 12:00:12 UTC
        

useful-backtraces: how?

i tried this:
gtk, mono compiled with the "debug" USE flag.

gdb mint
run hello.exe
bt

backtrace attached...

is this bt useful?




Comment 4


Gábor Farkas





          2005-02-10 12:00:50 UTC
        

Created attachment 50943 [details]
backtrace.txt




Comment 5


Peter Johanson (RETIRED)






          2005-02-11 10:12:13 UTC
        

Well, that definitely seems to point to scim as the ultimate cause... Does the equivelant code in C cause the same error?

Trying to break on the scim_get_module_list() function and stepping from there may be insightful as well.




Comment 6


Gábor Farkas





          2005-02-11 12:07:52 UTC
        

> Well, that definitely seems to point to scim as the ultimate cause... 
i see... but why isn't this happening on ubuntu? maybe some gcc issues?

> Does the equivelant code in C cause the same error?
i haven't created the EXACT same test-case in C, but i assume it would work, because i use scim all the time..it works in firefox, gedit, gaim, eclipse and so on ;)

> Trying to break on the scim_get_module_list() function 
> and stepping from there may be insightful as well.

how can i compile scim to contain debug symbols? there's no "debug" USE flag for scim....




Comment 7


Peter Johanson (RETIRED)






          2005-02-25 08:42:59 UTC
        

Change your CFLAGS to have -g (and maybe remove all other flags to be safe) and add 'nostrip' to your features. Then re-emerge scim.




Comment 8


MATSUU Takuto (RETIRED)






          2006-11-11 09:49:33 UTC
        

hello.cs works fine on my env.

sys-libs/glibc-2.4-r3
x11-libs/gtk+-2.8.19
dev-dotnet/gtk-sharp-2.8.2 and dev-dotnet/gtk-sharp-1.0.10
dev-lang/mono-1.1.13.8.1
app-i18n/scim-1.4.4

Please reopen if you still have problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

