Title: 262660 – Failed to emerge net-ftp/vsftpd-2.1.0
URL: https://bugs.gentoo.org/show_bug.cgi?id=262660

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 262660
Failed to emerge net-ftp/vsftpd-2.1.0
Last modified: 2009-03-17 12:17:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 262660 
      - Failed to emerge net-ftp/vsftpd-2.1.0


Summary:
Failed to emerge net-ftp/vsftpd-2.1.0
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-03-16 13:47 UTC by Osipov S. Stanislav





      Modified:
    
2009-03-17 12:17 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



cassio
john_r_graham









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Osipov S. Stanislav





          2009-03-16 13:47:22 UTC
        

vsftpd compilation failed in
sysdeputil.c:520: error: conflicting types for 'capset'
sysdeputil.c:166: error: previous definition of 'capset' was here
make: *** [sysdeputil.o] Error 1

Reproducible: Always

Steps to Reproduce:
1. emerge --sync && emerge -ND world
2. PROFIT!!!

Actual Results:  
i686-pc-linux-gnu-gcc -c ptracesandbox.c -O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse -idirafter dummyinc
i686-pc-linux-gnu-gcc -c ftppolicy.c -O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse -idirafter dummyinc
i686-pc-linux-gnu-gcc -c sysutil.c -O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse -idirafter dummyinc
i686-pc-linux-gnu-gcc -c sysdeputil.c -O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse -idirafter dummyinc
sysdeputil.c:520: error: conflicting types for 'capset'
sysdeputil.c:166: error: previous definition of 'capset' was here
make: *** [sysdeputil.o] Error 1
 *
 * ERROR: net-ftp/vsftpd-2.1.0 failed.
 * Call stack:
 *               ebuild.sh, line   48:  Called src_compile
 *             environment, line 2129:  Called die
 * The specific snippet of code:
 *       emake CFLAGS="${CFLAGS}" CC="$(tc-getCC)" || die
 *  The die message:
 *   (no error message)
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/net-ftp/vsftpd-2.1.0/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-ftp/vsftpd-2.1.0/temp/environment'.
 *

>>> Failed to emerge net-ftp/vsftpd-2.1.0, Log file:

>>>  '/var/tmp/portage/net-ftp/vsftpd-2.1.0/temp/build.log'

Expected Results:  
success of emerge

frya ~ # emerge --info
Portage 2.1.6.8 (default/linux/x86/2008.0, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.28-gentoo-r2 i686)
=================================================================
System uname: Linux-2.6.28-gentoo-r2-i686-Pentium_III_-Coppermine-with-glibc2.0
Timestamp of tree: Mon, 16 Mar 2009 06:30:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p10-r1
dev-java/java-config: 2.1.6-r1
dev-lang/python:     2.5.4-r2
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.4.7-r1
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.4.3-r1
sys-apps/sandbox:    1.6
sys-devel/autoconf:  2.63
sys-devel/automake:  1.10.2
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.28-r1
ACCEPT_KEYWORDS="x86 ~x86"
ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias"
ARCH="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CCACHE_DIR="/var/tmp/ccache/"
CCACHE_SIZE="8G"
CFLAGS="-O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse"
CHOST="i686-pc-linux-gnu"
CLEAN_DELAY="5"
COLLISION_IGNORE="/lib/modules"
CONFIG_PROTECT="/etc /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CVS_RSH="ssh"
CXXFLAGS="-O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse"
DISTDIR="/usr/portage/distfiles"
EDITOR="/bin/nano"
ELIBC="glibc"
EMERGE_WARNING_DELAY="10"
FEATURES="buildpkg ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
GCC_SPECS=""
GENERATION="2"
GENTOO_MIRRORS="http://mirror.yandex.ru/gentoo-distfiles/"
HOME="/root"
INFOPATH="/usr/share/info:/usr/share/binutils-data/i686-pc-linux-gnu/2.19.1/info:/usr/share/gcc-data/i686-pc-linux-gnu/4.3.3/info"
INPUT_DEVICES="keyboard mouse evdev"
JAVAC="/opt/blackdown-jdk-1.4.2.03/bin/javac"
JAVA_HOME="/opt/blackdown-jdk-1.4.2.03"
JDK_HOME="/opt/blackdown-jdk-1.4.2.03"
KERNEL="linux"
LANG="ru_RU.CP1251"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LC_ALL=""
LC_NUMERIC="C"
LDFLAGS="-Wl,-O1"
LESS="-R -M --shift 5"
LESSOPEN="|lesspipe.sh %s"
LINGUAS="ru en"
LOGNAME="root"
MAIL="/var/mail/root"
MAKEOPTS="-j2"
MANPATH="/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/i686-pc-linux-gnu/2.19.1/man:/usr/share/gcc-data/i686-pc-linux-gnu/4.3.3/man:/opt/blackdown-jdk-1.4.2.03/man:/etc/java-config/system-vm/man/:/usr/lib/php5/man/"
NETBEANS="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler soa visualweb webcommon websvccommon xml"
OPENGL_PROFILE="xorg-x11"
PATH="/scripts:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/4.3.3:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin"
PKGDIR="/usr/portage/packages"
PORTAGE_ARCHLIST="ppc s390 amd64 x86 ppc64 x86-fbsd m68k arm sparc sh mips ia64 alpha hppa amd64-fbsd sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib/portage/bin"
PORTAGE_COMPRESS_EXCLUDE_SUFFIXES="css gif htm[l]? jp[e]?g js pdf png"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="log warn error"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save_summary echo"
PORTAGE_FETCH_CHECKSUM_TRY_MIRRORS="5"
PORTAGE_FETCH_RESUME_MIN_SIZE="350K"
PORTAGE_GID="250"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_PYM_PATH="/usr/lib/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_VERBOSE="1"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PROFILE_ONLY_VARIABLES="ARCH ELIBC KERNEL USERLAND"
PS1="\[\033[01;31m\]\h \[\033[01;34m\]\W \$ \[\033[00m\]"
PWD="/root"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
ROOT="/"
ROOTPATH="/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/4.3.3:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin"
RPMDIR="/usr/portage/rpm"
SHELL="/bin/bash"
SHLVL="1"
SSH_CLIENT="192.168.0.151 1548 22"
SSH_CONNECTION="192.168.0.151 1548 192.168.0.150 22"
SSH_TTY="/dev/pts/0"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
TERM="xterm"
USE="aac accessibility acl acpi alsa amr amrr animgif anonres ao apache2 archive async browserplugin bzip2 cli cracklib crypt cups curl dhcp directfb fasttrack fbcon flac ftp gif gpm iconv imap isdnlog javascript jpeg jpeg2k libclamav lm_sensors logrotate loop-aes midi mikmod mime mpeg mudflap mysql ncurses nls nptl nptlonly ogg openmp pam pcre pdf perl php png posix povray pppd python quotas readline reflection samba sdl-mixer session sharedmem slang smp spl sse ssl svga symlink sysfs tcpd tidy tiff timestats tls transcode twolame unicode userlocales win32codecs wma x264 x86 xml2 xvid zero-penalty-hit zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" USERLAND="GNU" VIDEO_CARDS="mach64 vesa vga fbdev"
USER="root"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS NETBEANS_MODULES USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:env.d"
VIDEO_CARDS="mach64 vesa vga fbdev"
VMHANDLE="blackdown-jdk-1.4.2"
_="/usr/bin/nice"




Comment 1


Cassio Lange





          2009-03-17 11:45:11 UTC
        

hello

try update sys-libs/libcap, sys-libs/pam, sys-apps/tcp-wrappers, dev-libs/openssl




Comment 2


Osipov S. Stanislav





          2009-03-17 12:17:44 UTC
        

Thank you!
=====================================
# emerge -ND sys-libs/libcap sys-libs/pam sys-apps/tcp-wrappers dev-lib/openssl

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] sys-libs/libcap-2.16 [1.10-r5] USE="pam%* (-debug%) (-nocxx%) (-python%*) (-static%)" 48 kB [?=>0]

Total: 1 package (1 upgrade), Size of downloads: 48 kB
Portage tree and overlays:
 [0] /usr/portage
 [?] indicates that the source repository could not be determined
...........................
...........................
>>> Regenerating /etc/ld.so.cache...
>>> Original instance of package unmerged safely.
>>> Regenerating /etc/ld.so.cache...

>>> Recording sys-libs/libcap in "world" favorites file...
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.

frya ~ # emerge -ND world
...........................
...........................
i686-pc-linux-gnu-gcc -c sysdeputil.c -O2 -march=native -mfpmath=sse -fomit-frame-pointer -pipe -mmmx -msse -idirafter dummyinc
i686-pc-linux-gnu-gcc -o vsftpd main.o utility.o prelogin.o ftpcmdio.o postlogin.o privsock.o tunables.o ftpdataio.o secbuf.o ls.o postprivparent.o logging.o str.o netstr.o sysstr.o strlist.o banner.o filestr.o parseconf.o secutil.o ascii.o oneprocess.o twoprocess.o privops.o standalone.o hash.o tcpwrap.o ipaddrparse.o access.o features.o readwrite.o opts.o ssl.o sslslave.o ptracesandbox.o ftppolicy.o sysutil.o sysdeputil.o  `./vsf_findlibs.sh` -Wl,-O1
>>> Source compiled.
>>> Test phase [not enabled]: net-ftp/vsftpd-2.1.0

>>> Install vsftpd-2.1.0 into /var/tmp/portage/net-ftp/vsftpd-2.1.0/image/ category net-ftp
>>> Completed installing vsftpd-2.1.0 into /var/tmp/portage/net-ftp/vsftpd-2.1.0/image/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

