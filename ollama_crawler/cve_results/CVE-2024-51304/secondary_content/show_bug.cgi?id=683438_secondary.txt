Title: 683438 – dev-perl/Socket6-0.280.0 fails tests (Use of uninitialized value in subroutine entry at t/use.t line 46)
URL: https://bugs.gentoo.org/show_bug.cgi?id=683438

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 683438
dev-perl/Socket6-0.280.0 fails tests (Use of uninitialized value in subroutine entry at t/use.t line 46)
Last modified: 2021-05-21 20:02:20 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 683438 
      - dev-perl/Socket6-0.280.0 fails tests (Use of uninitialized value in subroutine entry at t/use.t line 46)


Summary:
dev-perl/Socket6-0.280.0 fails tests (Use of uninitialized value in subroutin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:




perl-testfailure



 

        Show dependency tree





 





      Reported:
    
2019-04-16 07:07 UTC by Kent Fredric (IRC: kent\n) (RETIRED)





      Modified:
    
2021-05-21 20:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:


683444

683442





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kent Fredric (IRC: kent\n) (RETIRED)






          2019-04-16 07:07:51 UTC
        

Not sure what's going on here, triage later.

The offending line is:

my($addr, $port) = getnameinfo($sin, NI_NUMERICHOST | NI_NUMERICSERV);

and the "Use of unit value in subroutine entry" typically indicates an XS function getting passed an undef, so its likely that either the constant is somehow evaluating to undef, or $sin is undef.

$sin is derived via:

my @tmp = getaddrinfo("localhost", "", AF_INET, SOCK_STREAM, 0, 0);
if ($#tmp >= 1) {
    ok(2);
}
my($family, $socktype, $protocol, $sin, $canonname) = splice(@tmp, $[, 5);

Which suggests that getaddrinfo() is returning undef for the resolved packed address for the name.

Given that implies "localhost" doesn't resolve to an IP, possibly network-sandbox to blame, or something in my local /etc/hosts or /etc/nsswitch.conf is to blame.

( Hopefully that also encompasses why I have a test failure for perl 5.28 ... )




Comment 1


Andreas K. Hüttel







          2021-05-21 20:02:20 UTC
        

Works fine now









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

