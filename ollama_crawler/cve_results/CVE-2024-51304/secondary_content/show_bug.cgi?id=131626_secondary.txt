Title: 131626 – genkernel makes wrong .config file
URL: https://bugs.gentoo.org/show_bug.cgi?id=131626

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 131626
genkernel makes wrong .config file
Last modified: 2006-04-29 00:04:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 131626 
      - genkernel makes wrong .config file


Summary:
genkernel makes wrong .config file
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Hosted Projects




Classification:

Unclassified




Component:

genkernel

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-28 18:29 UTC by Ivar Ylvisaker





      Modified:
    
2006-04-29 00:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ivar Ylvisaker





          2006-04-28 18:29:09 UTC
        

Dismayed by the recommendation in Bug 128368 that one should completely rebuild the kernel configuration file every two months or so -- this is an ordeal that takes hours -- or that one could use genkernel, I tried genkernel.  The kernel was 2.6.16-r3 and genkernel was 3.3.11d.  /usr/src/linux pointed to the new kernel.  The command was "genkernel --udev all" (from the Gentoo Linux Kernel Upgrade Guide).

The command compiled and installed a new kernel, which boots, but the configuration file is wrong.  In particular, it didn't resolve the iptables problem, which was the subject of Bug 128368.  For example, the new 2.6.16 CONFIG_NETFILTER_XTABLES parameter does not appear in the new .config file.

It looks like genkernel got its configuration file from /usr/share/genkernel/x86/kernel-config-2.6, which I think came with the genkernel emerge, i.e., genkernel did not extract it from the /usr/src/linux-2.6.16-gentoo-r3 directory.

emerge --info:
Portage 2203-svn (default-linux/x86/2005.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.14
dev-lang/python:     2.2.3-r1, 2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=pentium4 -fprefetch-loop-arrays -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.1/share/config /usr/kde/3.2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=pentium4 -fprefetch-loop-arrays -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://gentoo.mirrors.pair.com/ http://www.ibiblio.org/pub/Linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aalib acl alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr cli crypt cups curl directfb doc dri dts dvd eds emboss encode esd ethereal exif expat fam ffmpeg firebird flac foomatic foomaticdb fortran gd gdbm gif glut gpm gstreamer gtk gtk2 idn imagemagick imlib ipv6 isdnlog java jpeg kde lcms ldap libg++ libwww mad matroska mhash mikmod mmx mng motif mozilla mp3 mpeg ncurses nls nsplugin ogg oggvorbis opengl oss pam pcre pdflib perl png postgres pppd python qt quicktime readline recode reflection scanner sdl session slang spell spl sqlite sse ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis xine xml xml2 xmms xorg xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS




Comment 1


Jakub Moc (RETIRED)






          2006-04-29 00:04:55 UTC
        

--kernel-config=<file>









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

