Title: 453176 – mail-mta/postfix-2.9.x does not work out of the box (mail_queue_enter ... No such file or directory)
URL: https://bugs.gentoo.org/show_bug.cgi?id=453176

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 453176
mail-mta/postfix-2.9.x does not work out of the box (mail_queue_enter ... No such file or directory)
Last modified: 2013-01-20 15:10:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 453176 
      - mail-mta/postfix-2.9.x does not work out of the box (mail_queue_enter ... No such file or directory)


Summary:
mail-mta/postfix-2.9.x does not work out of the box (mail_queue_enter ... No ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Net-Mail Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-01-20 14:10 UTC by Thomas Deutschmann (RETIRED)





      Modified:
    
2013-01-20 15:10 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Deutschmann (RETIRED)






          2013-01-20 14:10:25 UTC
        

Hi,

maybe my expectations are wrong, but because I did not see any warnings/notices after emerging postfix on a new system, I am reporting this:

I would expect, that after emerging mail-mta/postfix (currently 2.9.5) you would have a working mta installed. This is not the case. You will end up with warnings like

  Jan 20 03:10:26 gentoo1 postfix/postdrop[15807]: warning: mail_queue_enter:
  create file maildrop/162073.15807: No such file or directory

in syslog.

This can be fixed by stopping mail-mta/postfix and calling postfix with set-permissions:

  # /etc/init.d/postfix stop
  # postfix set-permissions

The last command will BTW output

  chown: cannot access '/etc/postfix/LICENSE': No such file or directory

Before calling set-permissions:

  # ls -la /var/spool/postfix/
  total 8
  drwxr-xr-x 2 postfix root 4096 Jan 12 22:27 .
  drwxr-xr-x 7 root    root 4096 Jan 12 22:34 ..
  -rw-r--r-- 1 root    root    0 Jan 12 22:27 .keep_mail-mta_postfix-0

after calling set-permissions:

  # ls -la /var/spool/postfix/
  total 64
  drwxr-xr-x 16 root    root     4096 Jan 20 15:04 .
  drwxr-xr-x  7 root    root     4096 Jan 12 22:34 ..
  drwx------  2 postfix root     4096 Jan 20 15:04 active
  drwx------  2 postfix root     4096 Jan 20 15:04 bounce
  drwx------  2 postfix root     4096 Jan 20 15:04 corrupt
  drwx------  2 postfix root     4096 Jan 20 15:04 defer
  drwx------  2 postfix root     4096 Jan 20 15:04 deferred
  drwx------  2 postfix root     4096 Jan 20 15:04 flush
  drwx------  2 postfix root     4096 Jan 20 15:04 hold
  drwx------  2 postfix root     4096 Jan 20 15:04 incoming
  -rw-r--r--  1 root    root        0 Jan 12 22:27 .keep_mail-mta_postfix-0
  drwx-wx---  2 postfix postdrop 4096 Jan 20 15:04 maildrop
  drwxr-xr-x  2 root    root     4096 Jan 20 15:04 pid
  drwx------  2 postfix root     4096 Jan 20 15:04 private
  drwx--x---  2 postfix postdrop 4096 Jan 20 15:04 public
  drwx------  2 postfix root     4096 Jan 20 15:04 saved
  drwx------  2 postfix root     4096 Jan 20 15:04 trace

When we cannot do this in the setup process, we should show a notice/warning to the user.

Reproducible: Always

Steps to Reproduce:
1. Install mail-mta/postfix-2.9.5
2. Start it (/etc/init.d/postfix start)
3. Wait some time or just send a local message
4. Check your syslog
Actual Results:  
Running mail-mta/postfix out of the box will result in warnings like

Jan 20 03:10:26 gentoo1 postfix/postdrop[15807]: warning: mail_queue_enter: create file maildrop/162073.15807: No such file or directory

in syslog.

Expected Results:  
mail-mta/postfix should work out of the box. If not, we should tell the user that he/she has to do something.




Comment 1


Eray Aslan






          2013-01-20 15:10:54 UTC
        

I can't reproduce this.  Moreover, postfix start command - issued by /etc/init.d/postfix start - does create the missing directories.

Not sure what happened in your case.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

