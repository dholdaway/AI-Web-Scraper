Title: 685732 – dev-lang/sassc-3.5.0 - ld: /usr/lib/libsass.a(sass.o): relocation R_X86_64_32 against `.rodata.str1.8' can not be used when making a PIE object; recompile with -fPIC
URL: https://bugs.gentoo.org/show_bug.cgi?id=685732

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 685732
dev-lang/sassc-3.5.0 - ld: /usr/lib/libsass.a(sass.o): relocation R_X86_64_32 against `.rodata.str1.8' can not be used when making a PIE object; recompile with -fPIC
Last modified: 2019-05-23 13:23:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 685732 
      - dev-lang/sassc-3.5.0 - ld: /usr/lib/libsass.a(sass.o): relocation R_X86_64_32 against `.rodata.str1.8' can not be used when making a PIE object; recompile with -fPIC


Summary:
dev-lang/sassc-3.5.0 - ld: /usr/lib/libsass.a(sass.o): relocation R_X86_64_32...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Virgil Dupras (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-05-12 15:44 UTC by David Abbott (RETIRED)





      Modified:
    
2019-05-23 13:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,6.30 KB,
                text/plain)

            
2019-05-12 15:45 UTC,

            David Abbott (RETIRED)




Details





build.log

              (build.log,20.43 KB,
                text/plain)

            
2019-05-12 15:45 UTC,

            David Abbott (RETIRED)




Details





emerge -pqv

              (emerge_p.txt,38 bytes,
                text/plain)

            
2019-05-12 15:46 UTC,

            David Abbott (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Abbott (RETIRED)






          2019-05-12 15:44:20 UTC
        

"can not be used when making a PIE object; recompile with -fPIC"


Reproducible: Always




Comment 1


David Abbott (RETIRED)






          2019-05-12 15:45:09 UTC
        

Created attachment 576200 [details]
emerge --info




Comment 2


David Abbott (RETIRED)






          2019-05-12 15:45:35 UTC
        

Created attachment 576202 [details]
build.log




Comment 3


David Abbott (RETIRED)






          2019-05-12 15:46:21 UTC
        

Created attachment 576204 [details]
emerge -pqv




Comment 4


David Abbott (RETIRED)






          2019-05-13 21:23:01 UTC
        

I got it to install by using static-libs
[ebuild     U *] dev-libs/libsass-9999:0/1::gentoo [3.5.2:0/1::gentoo] USE="static-libs*" ABI_X86="32 (64) (-x32)" 0 KiB




Comment 5


Virgil Dupras (RETIRED)






          2019-05-15 14:34:24 UTC
        

I have troubles reproducing. Isn't this only a case of a profile having recently changed to -fPIC without having rebuilt libsass? Do you still get the problem if you put your use flags as they were and recompile?




Comment 6


David Abbott (RETIRED)






          2019-05-15 14:56:34 UTC
        

Recompiled libsass
[ebuild   R   *] dev-libs/libsass-9999:0/1::gentoo  USE="-static-libs" ABI_X86="32 (64) (-x32)" 0 KiB

now failed with;

make -j7 
make  all-am
make[1]: Entering directory '/var/tmp/portage/dev-lang/sassc-9999/work/sassc-9999'
x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I.  -I./include -I.  -Wall -O2  -O2 -march=native -O2 -pipe -c -o sassc.o sassc.c
/bin/sh ./libtool  --tag=CXX   --mode=link x86_64-pc-linux-gnu-g++ -Wall -O2  -std=c++0x  -O2 -march=native -O2 -pipe -Wall -O2   -std=c++0x  -Wl,-O1 -Wl,--as-needed -o sassc sassc.o   -lsass -ldl 
libtool: link: x86_64-pc-linux-gnu-g++ -Wall -O2 -std=c++0x -O2 -march=native -O2 -pipe -Wall -O2 -std=c++0x -Wl,-O1 -o sassc sassc.o  -Wl,--as-needed /usr/lib/libsass.a -ldl
x86_64-pc-linux-gnu-g++: error: /usr/lib/libsass.a: No such file or directory
make[1]: *** [GNUmakefile:487: sassc] Error 1
make[1]: Leaving directory '/var/tmp/portage/dev-lang/sassc-9999/work/sassc-9999'
make: *** [GNUmakefile:381: all] Error 2
 * ERROR: dev-lang/sassc-9999::gentoo failed (compile phase):

Recompiled libsass
[ebuild   R   *] dev-libs/libsass-9999:0/1::gentoo  USE="static-libs" ABI_X86="32 (64) (-x32)" 0 KiB
qlist libsass
/usr/lib32/pkgconfig/libsass.pc
/usr/lib32/libsass.so.1
/usr/lib32/libsass.so
/usr/lib32/libsass.so.1.0.0
/usr/lib32/libsass.a
/usr/include/sass/base.h
/usr/include/sass/values.h
/usr/include/sass/version.h
/usr/include/sass/context.h
/usr/include/sass/functions.h
/usr/include/sass.h
/usr/include/sass2scss.h
/usr/lib64/pkgconfig/libsass.pc
/usr/lib64/libsass.so.1
/usr/lib64/libsass.so
/usr/lib64/libsass.so.1.0.0
/usr/lib64/libsass.a


sassc installed fine




Comment 7


Virgil Dupras (RETIRED)






          2019-05-15 16:55:54 UTC
        

I don't understand why you end up with "/usr/lib/libsass.a" in your link command in the build log. I don't have much experience with building static libraries in gentoo, but I don't see what in your emerge --info gets you this. In my tests, it links with -lsass.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

