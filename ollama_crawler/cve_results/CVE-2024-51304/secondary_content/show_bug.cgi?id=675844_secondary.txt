Title: 675844 – sys-auth/polkit-0.115-r2 -   Process: 13817 ExecStart=/usr/lib/polkit-1/polkitd --no-debug (code=killed, signal=SEGV)
URL: https://bugs.gentoo.org/show_bug.cgi?id=675844

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 675844
sys-auth/polkit-0.115-r2 -   Process: 13817 ExecStart=/usr/lib/polkit-1/polkitd --no-debug (code=killed, signal=SEGV)
Last modified: 2020-12-16 19:54:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 675844 
      - sys-auth/polkit-0.115-r2 -   Process: 13817 ExecStart=/usr/lib/polkit-1/polkitd --no-debug (code=killed, signal=SEGV)


Summary:
sys-auth/polkit-0.115-r2 -   Process: 13817 ExecStart=/usr/lib/polkit-1/polki...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Freedesktop bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-01-19 12:43 UTC by Gordon Bos





      Modified:
    
2020-12-16 19:54 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



amverweij
crabbedhaloablution









See Also:


https://bugzilla.redhat.com/show_bug.cgi?id=995775





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Gordon Bos





          2019-01-19 12:43:26 UTC
        

~ # systemctl status polkit.service
● polkit.service - Authorization Manager
   Loaded: loaded (/lib/systemd/system/polkit.service; static; vendor preset: disabled)
   Active: failed (Result: signal) since Fri 2019-01-18 12:46:59 CET; 24h ago
     Docs: man:polkit(8)
  Process: 13817 ExecStart=/usr/lib/polkit-1/polkitd --no-debug (code=killed, signal=SEGV)
 Main PID: 13817 (code=killed, signal=SEGV)

Jan 18 12:46:59 b3 systemd[1]: Starting Authorization Manager...
Jan 18 12:46:59 b3 polkitd[13817]: Started polkitd version 0.115
Jan 18 12:46:59 b3 systemd[1]: polkit.service: Main process exited, code=killed, status=11/SEGV
Jan 18 12:46:59 b3 systemd[1]: polkit.service: Failed with result 'signal'.
Jan 18 12:46:59 b3 systemd[1]: Failed to start Authorization Manager.


>
Since the problem appeared to be similar to an issue mentioned on the Red Hat bugzilla (Bug 995775) I installed gdb to verify, which gave me the following result:


~ # gdb /usr/lib/polkit-1/polkitd
GNU gdb (Gentoo 8.1 p1) 8.1
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "armv5tel-softfloat-linux-gnueabi".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<https://bugs.gentoo.org/>.
Find the GDB manual and other documentation resources online at:
<http://www.gnu.org/software/gdb/documentation/>.
For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from /usr/lib/polkit-1/polkitd...(no debugging symbols found)...done.
(gdb) run
Starting program: /usr/lib/polkit-1/polkitd 
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/libthread_db.so.1".
Successfully changed to user polkitd
[New Thread 0xb3f68390 (LWP 9417)]
[Thread 0xb3f68390 (LWP 9417) exited]
[New Thread 0xb3f68390 (LWP 9418)]
[New Thread 0xb35ff390 (LWP 9419)]
Assertion failure: !joinable(), at /var/tmp/portage/dev-lang/spidermonkey-52.9.1_pre1/work/mozjs-52.9.1pre1/js/src/threading/Thread.h:122

Thread 1 "polkitd" received signal SIGSEGV, Segmentation fault.
0xb692750c in ?? () from /usr/lib/libmozjs-52.so
(gdb) 

>
This confirms that the issue is caused by mozjs (spidermonkey). It is hinted in the mentioned Red Hat bug that this likely affects al 32-bit systems.


>
I have reverted to sys-auth/polkit-0.113-r4 which uses dev-lang/spidermonkey-1.8.5-r6 and this runs correctly.

Reproducible: Always




Comment 1


crabbed halo ablution





          2020-12-16 19:27:45 UTC
        

It looks to me like this bug is probably not relevant anymore. My last 32-bit arm system was binned last month but didn't have problems with polkit.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

