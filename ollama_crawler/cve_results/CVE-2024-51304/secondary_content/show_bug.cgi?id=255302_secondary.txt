Title: 255302 – media-libs/xine-lib-1.1.16.1 - /usr/include/libavutil/common.h:326:14: error: operator '||' has no left operand
URL: https://bugs.gentoo.org/show_bug.cgi?id=255302

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 255302
media-libs/xine-lib-1.1.16.1 - /usr/include/libavutil/common.h:326:14: error: operator '||' has no left operand
Last modified: 2009-01-20 20:01:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 255302 
      - media-libs/xine-lib-1.1.16.1 - /usr/include/libavutil/common.h:326:14: error: operator '||' has no left operand


Summary:
media-libs/xine-lib-1.1.16.1 - /usr/include/libavutil/common.h:326:14: error:...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-01-17 19:50 UTC by loki aekin





      Modified:
    
2009-01-20 20:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




My /usr/include/libavutil/common.h

              (common.h,10.29 KB,
                text/plain)

            
2009-01-17 21:13 UTC,

            loki aekin




Details





include/configure.h from failed ebuild

              (configure.h,22.39 KB,
                text/plain)

            
2009-01-20 17:06 UTC,

            loki aekin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


loki aekin





          2009-01-17 19:50:06 UTC
        

media-libs/xine-lib-1.1.16.1 failes to compile

Reproducible: Always

Steps to Reproduce:
1. emerge media-libs/xine-lib-1.1.16.1 on amd64
Actual Results:  
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../../include -I../../.. -I../../../include -I../../../include -I../../../src -I../../../src/xine-engine -I../../../src/xine-engine -I../../../src/xine-utils -I../../../src/input -I../../../src/input -I../../../lib -I../../../lib -fvisibility=hidden -fomit-frame-pointer -D_REENTRANT -D_FILE_OFFSET_BITS=64 -DXINE_COMPILE -march=athlon64 -O2 -pipe -msse3 -frename-registers -ffunction-sections -Wall -Wchar-subscripts -Wnested-externs -Wcast-align -Wmissing-declarations -Wmissing-prototypes -Wmissing-format-attribute -Wno-pointer-sign -Wformat=2 -Wno-format-zero-length -Wstrict-aliasing=2 -Werror=implicit-function-declaration -DNDEBUG -c eq.c  -fPIC -DPIC -o .libs/xineplug_post_planar_la-eq.o
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../../include -I../../.. -I../../../include -I../../../include -I../../../src -I../../../src/xine-engine -I../../../src/xine-engine -I../../../src/xine-utils -I../../../src/input -I../../../src/input -I../../../lib -I../../../lib -fvisibility=hidden -fomit-frame-pointer -D_REENTRANT -D_FILE_OFFSET_BITS=64 -DXINE_COMPILE -march=athlon64 -O2 -pipe -msse3 -frename-registers -ffunction-sections -Wall -Wchar-subscripts -Wnested-externs -Wcast-align -Wmissing-declarations -Wmissing-prototypes -Wmissing-format-attribute -Wno-pointer-sign -Wformat=2 -Wno-format-zero-length -Wstrict-aliasing=2 -Werror=implicit-function-declaration -DNDEBUG -c denoise3d.c  -fPIC -DPIC -o .libs/xineplug_post_planar_la-denoise3d.o
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../../include -I../../.. -I../../../include -I../../../include -I../../../src -I../../../src/xine-engine -I../../../src/xine-engine -I../../../src/xine-utils -I../../../src/input -I../../../src/input -I../../../lib -I../../../lib -fvisibility=hidden -fomit-frame-pointer -D_REENTRANT -D_FILE_OFFSET_BITS=64 -DXINE_COMPILE -march=athlon64 -O2 -pipe -msse3 -frename-registers -ffunction-sections -Wall -Wchar-subscripts -Wnested-externs -Wcast-align -Wmissing-declarations -Wmissing-prototypes -Wmissing-format-attribute -Wno-pointer-sign -Wformat=2 -Wno-format-zero-length -Wstrict-aliasing=2 -Werror=implicit-function-declaration -DNDEBUG -c pp.c  -fPIC -DPIC -o .libs/xineplug_post_planar_la-pp.o
In file included from /usr/include/libavutil/avutil.h:56,
                 from /usr/include/libpostproc/postprocess.h:30,
                 from pp.c:35:
/usr/include/libavutil/common.h:326:14: error: operator '||' has no left operand
pp.c: In function 'pp_draw':
pp.c:336: warning: passing argument 1 of 'pp_postprocess' from incompatible pointer type
make[3]: *** [xineplug_post_planar_la-pp.lo] Error 1
make[3]: *** Waiting for unfinished jobs....
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../../include -I../../.. -I../../../include -I../../../include -I../../../src -I../../../src/xine-engine -I../../../src/xine-engine -I../../../src/xine-utils -I../../../src/input -I../../../src/input -I../../../lib -I../../../lib -fvisibility=hidden -fomit-frame-pointer -D_REENTRANT -D_FILE_OFFSET_BITS=64 -DXINE_COMPILE -march=athlon64 -O2 -pipe -msse3 -frename-registers -ffunction-sections -Wall -Wchar-subscripts -Wnested-externs -Wcast-align -Wmissing-declarations -Wmissing-prototypes -Wmissing-format-attribute -Wno-pointer-sign -Wformat=2 -Wno-format-zero-length -Wstrict-aliasing=2 -Werror=implicit-function-declaration -DNDEBUG -c eq2.c  -fPIC -DPIC -o .libs/xineplug_post_planar_la-eq2.o
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../../include -I../../.. -I../../../include -I../../../include -I../../../src -I../../../src/xine-engine -I../../../src/xine-engine -I../../../src/xine-utils -I../../../src/input -I../../../src/input -I../../../lib -I../../../lib -fvisibility=hidden -fomit-frame-pointer -D_REENTRANT -D_FILE_OFFSET_BITS=64 -DXINE_COMPILE -march=athlon64 -O2 -pipe -msse3 -frename-registers -ffunction-sections -Wall -Wchar-subscripts -Wnested-externs -Wcast-align -Wmissing-declarations -Wmissing-prototypes -Wmissing-format-attribute -Wno-pointer-sign -Wformat=2 -Wno-format-zero-length -Wstrict-aliasing=2 -Werror=implicit-function-declaration -DNDEBUG -c unsharp.c  -fPIC -DPIC -o .libs/xineplug_post_planar_la-unsharp.o
make[3]: Leaving directory `/var/tmp/portage/media-libs/xine-lib-1.1.16.1/work/xine-lib-1.1.16.1/src/post/planar'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/media-libs/xine-lib-1.1.16.1/work/xine-lib-1.1.16.1/src/post'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-libs/xine-lib-1.1.16.1/work/xine-lib-1.1.16.1/src'
make: *** [all-recursive] Error 1
 * 
 * ERROR: media-libs/xine-lib-1.1.16.1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2749:  Called die
 * The specific snippet of code:
 *       emake || die "emake failed."
 *  The die message:
 *   emake failed.



odin loki # emerge --info
Portage 2.2_rc22 (default/linux/amd64/2008.0, gcc-4.3.2, glibc-2.9_p20081201-r1, 2.6.25-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.25-gentoo-r1-x86_64-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_5600+-with-glibc2.2.5
Timestamp of tree: Sat, 17 Jan 2009 09:05:01 +0000
app-shells/bash:     3.2_p48
dev-java/java-config: 1.3.7-r1, 2.1.6-r1
dev-lang/python:     2.5.2-r8
dev-util/cmake:      2.6.2-r1
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.4.2
sys-apps/sandbox:    1.3.2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.19
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.28-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/4.0/env /usr/kde/4.0/share/config /usr/kde/4.0/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -O2 -pipe -msse3"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--jobs=5  --load-average=2 --keep-going"
FEATURES="buildpkg distlocks fixpackages metadata-transfer parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://gd.tuwien.ac.at/opsys/linux/gentoo/ http://inode.gentoo.at/"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/berkano"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X aac acl acpi alsa amd64 apache2 avahi berkdb bzip2 cairo cdr cli cracklib crypt cups dbus divx dri dv dvd dvdr dvdread eds emboss encode evo exif fam fbcondecor ffmpeg firefox flac fortran gdbm gif glitz gmedia gpm gstreamer gtk gutenprint hal htmlhandbook iceweasel iconv ieee1394 inotify ipv6 isdnlog java javascript jpeg kde4 kerberos lame ldap live mad midi mikmod mjpeg mmx mp3 mpeg mplayer mtp mudflap multilib musepack mysql ncurses nepomuk nls nptl nptlonly nsplugin nv nvidia ogg opengl openmp pam pcre pda pdf perl png pppd python qt3 qt4 quicktime radio readline realmedia reflection sdl session spell spl sqlite sqlite3 sse sse2 ssl startup-notification subtitles svg sysfs tcpd tiff truetype type1 unicode usb vorbis wmp xcomposite xml xorg xpm xulrunner xv xvid xvmc zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="PTP" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Rafał Mużyło





          2009-01-17 20:24:50 UTC
        

What is your ffmpeg version ?

Could you attach include/configure.h (generated during build by configure)
and paste that line from /usr/include/libavutil/common.h ?
(I suspect it may be a problem with ARCH_POWERPC -> ARCH_PPC move in
ffmpeg).




Comment 2


loki aekin





          2009-01-17 21:13:49 UTC
        

Created attachment 178818 [details]
My /usr/include/libavutil/common.h




Comment 3


loki aekin





          2009-01-17 21:15:26 UTC
        

Obviously im using media-video/ffmpeg-20099999 so this whole bug may be irrelevant too you, since ffmpeg is pulled in by the berkano overlay (which I wasn't aware of).

I didn't quite understand what exactly you want me to post so I'll just attach my /usr/include/libavutil/common.h. If you are interested in any other info just let me know. Thanks for your effort. ;)

greeets loki!





Comment 4


Rafał Mużyło





          2009-01-17 21:38:13 UTC
        

That's not quite what I had in mind but it probably
worked anyway.
It looks like it's a conflict between how now (as in: in svn)
ffmpeg works with ARCH_PPC and how xine-lib uses that symbol.

This may become an upstream bug for xine-lib, when a more
recent ffmpeg snapshot hits the tree.

Still, attach include/configure.h from the failed xine-lib build.




Comment 5


Robert Piasek (RETIRED)






          2009-01-18 14:27:39 UTC
        

(In reply to comment #4)
> This may become an upstream bug for xine-lib, when a more
> recent ffmpeg snapshot hits the tree.

I've got the same problem with ffmpeg-9999 from the tree on amd64.

downgrading ffmpeg to media-video/ffmpeg-0.4.9_p20081219:0::gentoo makes it compile again.






Comment 6


Jeroen Roovers (RETIRED)






          2009-01-20 15:34:33 UTC
        

I'm not sure how media-video could fix this problem (as a live ebuild from outside the official tree is apparently involved) but let's assign anyway...




Comment 7


loki aekin





          2009-01-20 16:59:09 UTC
        

> Still, attach include/configure.h from the failed xine-lib build.

Sorry I was off working. Here ya go




Comment 8


loki aekin





          2009-01-20 17:06:08 UTC
        

Created attachment 179088 [details]
include/configure.h from failed ebuild




Comment 9


Alexis Ballier






          2009-01-20 18:59:10 UTC
        

that's what you get from using live svn ebuilds; yes ffmpeg headers have been broken upstream for a few days, no there is nothing we can do besides telling you to either rebuild ffmpeg or not using the live ebuild.

in the future, please *at the very least* try with the ffmpeg snapshots before reporting a bug, thanks.




Comment 10


loki aekin





          2009-01-20 20:01:08 UTC
        

(In reply to comment #9)
> that's what you get from using live svn ebuilds; yes ffmpeg headers have been
> broken upstream for a few days, no there is nothing we can do besides telling
> you to either rebuild ffmpeg or not using the live ebuild.
> 
> in the future, please *at the very least* try with the ffmpeg snapshots before
> reporting a bug, thanks.
> 
If I would have known that this issue is related to ffmpeg ==> berkano overlay, I would not have filed this bug. I just masked the svn ebuild and things are just fine. So thanks a lot, but there is no need for any help from your side except for marking this bug irrelevant.

If you think that peeps shouldn't post bugs unless they absolutly know what's going on, than you should post it somewhere so n00bs like me don't even try to bother. Have a nice day!










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

