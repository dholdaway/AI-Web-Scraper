Title: 830710 – net-irc/znc: /etc/conf.d/znc indicates incorrect ZNC_DATADIR
URL: https://bugs.gentoo.org/show_bug.cgi?id=830710

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 830710
net-irc/znc: /etc/conf.d/znc indicates incorrect ZNC_DATADIR
Last modified: 2022-01-08 01:57:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 830710 
      - net-irc/znc: /etc/conf.d/znc indicates incorrect ZNC_DATADIR


Summary:
net-irc/znc: /etc/conf.d/znc indicates incorrect ZNC_DATADIR
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Louis Sautier (sbraz)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-01-06 21:31 UTC by MetaNova





      Modified:
    
2022-01-08 01:57 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




pastes relevant to this bug

              (pastebin.com-24JgSMF9.txt,2.38 KB,
                text/plain)

            
2022-01-07 00:15 UTC,

            MetaNova




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


MetaNova





          2022-01-06 21:31:26 UTC
        

A user by the name of sokan reported to #znc on libera.chat that, ultimately, what they needed to do to get the ZNC service to run was replace
ZNC_DATADIR="/var/lib/znc"
with
ZNC_DATADIR="/var/lib/znc/.znc"




Comment 1


Mike Gilbert






          2022-01-06 22:13:39 UTC
        

Please include the package category and name in the bug summary.




Comment 2


Mike Gilbert






          2022-01-06 22:18:48 UTC
        

Based on the message in pkg_postinst, /var/lib/znc is the correct location.




Comment 3


Dimitris Nakos (sokan)





          2022-01-06 22:53:15 UTC
        

(In reply to Mike Gilbert from comment #2)
> Based on the message in pkg_postinst, /var/lib/znc is the correct location.

The message on pkg_postinst refers to /var/lib/znc indeed. The issue is that when a user runs "znc --makeconf", znc.conf is created in .znc/config/. Therefore ZNC_DATADIR should preferably point to "/var/lib/znc/.znc".

In any case this comment here might prove useful to other user if they stumble on the same issue.




Comment 4


MetaNova





          2022-01-07 00:15:05 UTC
        

Created attachment 761461 [details]
pastes relevant to this bug




Comment 5


Louis Sautier (sbraz)






          2022-01-08 01:57:26 UTC
        

(In reply to Dimitris Nakos (sokan) from comment #3)
> (In reply to Mike Gilbert from comment #2)
> > Based on the message in pkg_postinst, /var/lib/znc is the correct location.
> 
> The message on pkg_postinst refers to /var/lib/znc indeed. The issue is that
> when a user runs "znc --makeconf", znc.conf is created in .znc/config/.
> Therefore ZNC_DATADIR should preferably point to "/var/lib/znc/.znc".
> 
> In any case this comment here might prove useful to other user if they
> stumble on the same issue.

Hi,
I think the postinst is pretty clear about when to run znc --makeconf manually ("To run znc as a user"):
https://gitweb.gentoo.org/repo/gentoo.git/tree/net-irc/znc/files/README.gentoo-r1?id=f302ee221545dd442429c19dd3a21545df86be63

Users who wish to use the OpenRC or systemd services should rely on "emerge --config net-irc/znc".

Feel free to send a patch/PR/comment if you have an idea of how I could improve the README but it feels pretty clear to me at the moment.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

