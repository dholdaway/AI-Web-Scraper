Title: 419793 – app-emulation/hercules-3.07: install failed due to chown root
URL: https://bugs.gentoo.org/show_bug.cgi?id=419793

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 419793
app-emulation/hercules-3.07: install failed due to chown root
Last modified: 2013-07-28 11:58:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 419793 
      - app-emulation/hercules-3.07: install failed due to chown root


Summary:
app-emulation/hercules-3.07: install failed due to chown root
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

All
        OS X
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-06-05 18:04 UTC by Yishen Miao (mys_721tx)





      Modified:
    
2013-07-28 11:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,319.53 KB,
                text/plain)

            
2012-06-05 18:05 UTC,

            Yishen Miao (mys_721tx)




Details





patch to ebuild

              (prefix_ebuild.patch,425 bytes,
                patch)

            
2012-08-25 06:09 UTC,

            Yishen Miao (mys_721tx)




Details
            | Diff





patch to ebuild

              (prefix_ebuild.patch,425 bytes,
                patch)

            
2012-08-25 06:13 UTC,

            Yishen Miao (mys_721tx)




Details
            | Diff





patch to Makefile.in

              (Makefile.in.patch,667 bytes,
                patch)

            
2012-08-25 06:35 UTC,

            Yishen Miao (mys_721tx)




Details
            | Diff





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Yishen Miao (mys_721tx)





          2012-06-05 18:04:53 UTC
        

emaks attempts to set ownership of an executable to root and therefore gets denied. 

Reproducible: Always

Steps to Reproduce:
1. emerge "=app-emulation/hercules-3.07"

Actual Results:  
build failed.

Expected Results:  
build successful.

Portage 2.2.01.20430-prefix (prefix/darwin/macos/10.7/x64, gcc-4.2.1, unavailable, 11.4.0 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Darwin-11.4.0-x86_64-i386-64bit
Timestamp of tree: Tue, 05 Jun 2012 15:55:59 +0000
app-shells/bash:      4.2_p29::gentoo_prefix
dev-java/java-config: 2.1.11-r3::gentoo_prefix
dev-lang/python:      2.7.3-r2::gentoo_prefix
dev-util/pkgconfig:   0.26::gentoo_prefix
sys-devel/autoconf:   2.69::gentoo_prefix
sys-devel/automake:   1.11.5::gentoo_prefix
sys-devel/gcc-config: 1.5-r2::gentoo_prefix
sys-devel/libtool:    2.4.2::gentoo_prefix
sys-devel/make:       3.82::gentoo_prefix
Repositories: gentoo_prefix
Installed sets: 
ACCEPT_KEYWORDS="~x64-macos"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-apple-darwin11"
CFLAGS="-O2 -pipe -march=nocona"
CHOST="x86_64-apple-darwin11"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/portage /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -pipe -march=nocona"
DISTDIR="/Users/mys_721tx/Gentoo/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs collision-protect distlocks ebuild-locks fixlafiles force-prefix news nostrip parallel-fetch preserve-libs protect-owned sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo/"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-dead_strip_dylibs"
MAKEOPTS="-j3"
PKGDIR="/Users/mys_721tx/Gentoo/usr/portage/packages"
PORTAGE_CONFIGROOT="/Users/mys_721tx/Gentoo/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/Users/mys_721tx/Gentoo/var/tmp"
PORTDIR="/Users/mys_721tx/Gentoo/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.prefix.freens.org/gentoo-portage-prefix"
USE="X aqua bash-completion bzip2 cairo coreaudio cracklib crypt cxx fortran iconv ipv6 java jpeg lapack lua mmx mmxext modules ncurses nls objc objc++ opengl openmp png prefix python readline socks5 sse sse2 ssl svg threads unicode x64-macos zlib" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="Darwin" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse" KERNEL="Darwin" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" PHP_TARGETS="php5-3" PYTHON_TARGETS="python2_7" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Yishen Miao (mys_721tx)





          2012-06-05 18:05:42 UTC
        

Created attachment 314329 [details]
build log

(cd /Users/mys_721tx/Gentoo/var/tmp/portage/app-emulation/hercules-3.07/image//Users/mys_721tx/Gentoo/usr/bin; ln -s ./dasdcopy cckd2ckd)
chown root /Users/mys_721tx/Gentoo/var/tmp/portage/app-emulation/hercules-3.07/image//Users/mys_721tx/Gentoo/usr/bin/hercifc
chown: changing ownership of ‘/Users/mys_721tx/Gentoo/var/tmp/portage/app-emulation/hercules-3.07/image//Users/mys_721tx/Gentoo/usr/bin/hercifc’: Operation not permitted




Comment 2


Jeremy Olexa (darkside) (RETIRED)








          2012-06-05 20:02:32 UTC
        

Needs a patch to the build system.




Comment 3


Jeremy Olexa (darkside) (RETIRED)








          2012-08-10 19:05:55 UTC
        

Please re-open if desired (with a patch to review). Unfortunetly, there is more critical work to do.




Comment 4


Yishen Miao (mys_721tx)





          2012-08-25 06:09:17 UTC
        

Created attachment 322150 [details, diff]
patch to ebuild

I add two lines in ebuild to remove chown and chgrp in Makefile.in. I tested on my computer and look like it works.




Comment 5


Yishen Miao (mys_721tx)





          2012-08-25 06:13:05 UTC
        

Created attachment 322152 [details, diff]
patch to ebuild




Comment 6


Yishen Miao (mys_721tx)





          2012-08-25 06:35:42 UTC
        

Created attachment 322154 [details, diff]
patch to Makefile.in

It might be a better to only change Makefile.in and leave ebuild alone.




Comment 7


Fabian Groffen






          2013-07-28 11:58:11 UTC
        

this is currently fixed in the ebuild by disabling setuid support









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

