Title: 323591 – dev-texlive/texlive-latex-2008-r2 will not emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=323591

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 323591
dev-texlive/texlive-latex-2008-r2 will not emerge
Last modified: 2010-06-12 10:10:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 323591 
      - dev-texlive/texlive-latex-2008-r2 will not emerge


Summary:
dev-texlive/texlive-latex-2008-r2 will not emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-11 17:12 UTC by Xavier Rival





      Modified:
    
2010-06-12 10:10 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tex









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Xavier Rival





          2010-06-11 17:12:44 UTC
        

The emerge will crash with the message below:

(/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-dist/tex/generic
/babel/hyphen.cfg                                                              
I couldn't find the file language.dat, I will try the file hyphen.tex          
! I can't find file `hyphen.tex'.                                              
<to be read again>                                                             
                   \relax                                                      
l.356   \input hyphen.tex\relax                                                
                                                                               
(Press Enter to retry, or Control-D to exit)                                   
Please type another input file name:                                           
! Emergency stop.                                                              
<to be read again>                                                             
                   \relax                                                      
l.356   \input hyphen.tex\relax                                                
                                                                               
!  ==> Fatal error occurred, no output PDF file produced!                      
Transcript written on pdflatex.log.                                            
Error: `pdftex -ini  -jobname=pdflatex -progname=pdflatex -translate-file=cp227.tcx *pdflatex.ini' failed
fmtutil: running `luatex -ini   -jobname=lualatex -progname=lualatex lualatex.ini' ...                   
warning: kpathsea: No usable entries in //etc/texmf/ls-R.                                                
warning: kpathsea: See the manual for how to generate ls-R.                                              
warning: kpathsea: No usable entries in //var/lib/texmf/ls-R.                                            
warning: kpathsea: See the manual for how to generate ls-R.                                              
warning: kpathsea: No usable entries in /usr/share/texmf/ls-R.                                           
warning: kpathsea: See the manual for how to generate ls-R.                                              
warning: kpathsea: No usable entries in /usr/share/texmf-site/ls-R.                                      
warning: kpathsea: See the manual for how to generate ls-R.                                              
warning: kpathsea: No usable entries in /usr/share/texmf-dist/ls-R.                                      
warning: kpathsea: See the manual for how to generate ls-R.                                              
This is LuaTeX, Version beta-0.50.0-2010061112 (INITEX)                                                  

(/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-dist/tex/latex/l
atexconfig/lualatex.ini                                                        
! I can't find file `luatexiniconfig.tex'.                                     
l.4 \input luatexiniconfig.tex                                                 
                                                                               
Please type another input file name:                                           
! Emergency stop.                                                              
l.4 \input luatexiniconfig.tex                                                 
                                                                               
No pages of output.                                                            
Transcript written on lualatex.log.                                            
Error: `luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini' failed 
fmtutil: running `luatex -ini   -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' ...
warning: kpathsea: No usable entries in //etc/texmf/ls-R.                                      
warning: kpathsea: See the manual for how to generate ls-R.                                    
warning: kpathsea: No usable entries in //var/lib/texmf/ls-R.                                  
warning: kpathsea: See the manual for how to generate ls-R.                                    
warning: kpathsea: No usable entries in /usr/share/texmf/ls-R.                                 
warning: kpathsea: See the manual for how to generate ls-R.                                    
warning: kpathsea: No usable entries in /usr/share/texmf-site/ls-R.                            
warning: kpathsea: See the manual for how to generate ls-R.                                    
warning: kpathsea: No usable entries in /usr/share/texmf-dist/ls-R.                            
warning: kpathsea: See the manual for how to generate ls-R.                                    
This is LuaTeX, Version beta-0.50.0-2010061112 (INITEX)                                        

(/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-dist/tex/latex/l
atexconfig/pdflualatex.ini                                                     
! I can't find file `luatexiniconfig.tex'.                                     
l.2 \input luatexiniconfig.tex                                                 
                                                                               
Please type another input file name:                                           
! Emergency stop.                                                              
l.2 \input luatexiniconfig.tex                                                 
                                                                               
No pages of output.                                                            
Transcript written on pdflualatex.log.                                         
Error: `luatex -ini  -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' failed

###############################################################################
fmtutil: Error! Not all formats have been built successfully.                  
Visit the log files in directory                                               
  /var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-var/web2c      
for details.                                                                   
###############################################################################

This is a summary of all `failed' messages and warnings:
`pdftex -ini  -jobname=latex -progname=latex -translate-file=cp227.tcx *latex.ini' failed
`pdftex -ini  -jobname=pdflatex -progname=pdflatex -translate-file=cp227.tcx *pdflatex.ini' failed
`luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini' failed                           
`luatex -ini  -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' failed                  
 * ERROR: dev-texlive/texlive-latex-2008-r2 failed:                                               
 *   failed to build format texmf/fmtutil/format.latex.cnf                                        
 *                                                                                                
 * Call stack:                                                                                    
 *     ebuild.sh, line   54:  Called src_compile                                                  
 *   environment, line 2364:  Called texlive-module_src_compile                                   
 *   environment, line 2937:  Called die                                                          
 * The specific snippet of code:                                                                  
 *               VARTEXFONTS="${T}/fonts" TEXMFHOME="${S}/texmf:${S}/texmf-dist:${S}/texmf-var" env -u TEXINPUTS fmtutil --cnffile "${i}" --fmtdir "${S}/texmf-var/web2c" --all || die "failed to build format ${i}";                             
 *                                                                                                                       
 * If you need support, post the output of 'emerge --info =dev-texlive/texlive-latex-2008-r2',                           
 * the complete build log and the output of 'emerge -pqv =dev-texlive/texlive-latex-2008-r2'.                            
 * The complete build log is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/build.log'.             
 * The ebuild environment file is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/environment'.      
 * S: '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work'                                                          

>>> Failed to emerge dev-texlive/texlive-latex-2008-r2, Log file:

>>>  '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/build.log'

I tried to run texmf-update, but it does not solve the issue.
Furthermore:
# find /usr/share |grep language.dat
/usr/share/texmf/tex/generic/config/language.dat
# find /usr/share |grep hyphen.tex
/usr/share/texmf/tex/generic/hyphen/hyphen.tex




Comment 1


Xavier Rival





          2010-06-11 17:40:49 UTC
        

texconfig conf:

=========================== version information ==========================   

==================== binaries found by searching $PATH ===================
PATH=/sbin:/bin:/usr/sbin:/usr/bin                                        
kpsewhich: /usr/bin/kpsewhich                                             
updmap: /usr/bin/updmap                                                   
fmtutil: /usr/bin/fmtutil                                                 
texconfig: /usr/bin/texconfig                                             
tex: /usr/bin/tex                                                         
pdftex: /usr/bin/pdftex                                                   
mktexpk: /usr/bin/mktexpk
dvips: /usr/bin/dvips
dvipdfm: not found

=========================== active config files ==========================
/usr/share/texmf/web2c/texmf.cnf
XDvi: not found
config.ps: not found
config: not found
fmtutil.cnf: not found
mktex.cnf: not found
pdftexconfig.tex: not found
updmap.cfg: not found

============================= font map files =============================
psfonts.map:
pdftex.map:
ps2pk.map:
dvipdfm.map:

=========================== kpathsea variables ===========================
TEXMFMAIN=/usr/share/texmf
TEXMFDIST=/usr/share/texmf-dist
TEXMFLOCAL=/usr/local/share/texmf
TEXMFSYSVAR=//var/lib/texmf
TEXMFSYSCONFIG=//etc/texmf
TEXMFVAR=/root/.texlive2008/texmf-var
TEXMFCONFIG=/root/.texlive2008/texmf-config
TEXMFHOME=/root/texmf
VARTEXFONTS=//var/cache/fonts
TEXMF={/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}
SYSTEXMF=//var/lib/texmf:/usr/share/texmf:/usr/local/share/texmf:/usr/share/texmf-site:/usr/share/texmf-dist
TEXMFDBS={!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist,!!/usr/share/texmf-doc}
WEB2C={/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/web2c
TEXPSHEADERS=.:{/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/{dvips,fonts/{enc,type1,type42,type3}}//
TEXCONFIG={/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/dvips//
ENCFONTS=.:{/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/fonts/enc//
TEXFONTMAPS=.:{/root/.texlive2008/texmf-config,/root/.texlive2008/texmf-var,/root/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/fonts/map/{kpsewhich,pdftex,dvips,}//

==== kpathsea variables from environment only (ok if no output here) ====




Comment 2


Alexis Ballier






          2010-06-11 23:14:23 UTC
        

gimme the output of the 'mktexlsr' command ran as root




Comment 3


Xavier Rival





          2010-06-12 09:21:26 UTC
        

Unfortunately, I think I will not be able to provide that information: I unmerged everything related to texlive, and am currently trying to manually re-merge them one by one (I am doing a fresh install), so as to try to solve the problem.




Comment 4


Alexis Ballier






          2010-06-12 09:27:13 UTC
        

your ls-R files seem corrupted; nothing will work well without them, mktexlsr regenerates them (and ran like that may tell you whats wrong)




Comment 5


Xavier Rival





          2010-06-12 09:44:22 UTC
        

Indeed, this was part of the problem. I did regenerate many of them until the warning related to ls-R files all disappeared, however, it did not solve the problems, which is the reason why I decided to proceed with the complete unmerging and re-emerging of all texlive related packages.

So far, the re-emerging is going well, so I guess something went wrong in my first attempt at emerging texlive, and it will be hard to figure out what, since I did not preserve the first install attempt.




Comment 6


Xavier Rival





          2010-06-12 10:10:25 UTC
        

The whole texlive is now merged. I cannot quite say for sure what went wrong in the first attempt (sorry I cannot put in evidence what went wrong in the first install attempt), so we can close the bug.
Thanks for the help!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

