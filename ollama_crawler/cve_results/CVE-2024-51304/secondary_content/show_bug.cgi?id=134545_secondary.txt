Title: 134545 – Portage breaks after switching to gcc-4.1.1 and doing emerge -e system
URL: https://bugs.gentoo.org/show_bug.cgi?id=134545

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 134545
Portage breaks after switching to gcc-4.1.1 and doing emerge -e system
Last modified: 2007-05-06 16:40:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 134545 
      - Portage breaks after switching to gcc-4.1.1 and doing emerge -e system


Summary:
Portage breaks after switching to gcc-4.1.1 and doing emerge -e system
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-27 09:59 UTC by Stefan Heinsen





      Modified:
    
2007-05-06 16:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Heinsen





          2006-05-27 09:59:03 UTC
        

I switched to gcc-4.1.1 and did a "emerge -e system"
the emerge died when installing dev-python/python-fchksum-1.7.1 with a segmentation fault. After that python seems broken, see
http://code.bulix.org/5293 for a strace.
I did install python 2.4.3 with gcc-4.1.1 by hand and portage now works again.

The last lines of emerge -e system i still have in my shell:

Compiling /usr/lib/python2.4/symtable.py ...
Compiling /usr/lib/python2.4/tabnanny.py ...
Compiling /usr/lib/python2.4/tarfile.py ...
Compiling /usr/lib/python2.4/telnetlib.py ...
Compiling /usr/lib/python2.4/tempfile.py ...
Compiling /usr/lib/python2.4/textwrap.py ...
Compiling /usr/lib/python2.4/this.py ...
Compiling /usr/lib/python2.4/threading.py ...
Compiling /usr/lib/python2.4/timeit.py ...
Compiling /usr/lib/python2.4/toaiff.py ...
Compiling /usr/lib/python2.4/token.py ...
Compiling /usr/lib/python2.4/tokenize.py ...
Compiling /usr/lib/python2.4/trace.py ...
Compiling /usr/lib/python2.4/traceback.py ...
Compiling /usr/lib/python2.4/tty.py ...
Compiling /usr/lib/python2.4/types.py ...
Compiling /usr/lib/python2.4/tzparse.py ...
Compiling /usr/lib/python2.4/unittest.py ...
Compiling /usr/lib/python2.4/urllib.py ...
Compiling /usr/lib/python2.4/urllib2.py ...
Compiling /usr/lib/python2.4/urlparse.py ...
Compiling /usr/lib/python2.4/user.py ...
Compiling /usr/lib/python2.4/uu.py ...
Compiling /usr/lib/python2.4/warnings.py ...
Compiling /usr/lib/python2.4/wave.py ...
Compiling /usr/lib/python2.4/weakref.py ...
Compiling /usr/lib/python2.4/webbrowser.py ...
Compiling /usr/lib/python2.4/whichdb.py ...
Compiling /usr/lib/python2.4/whrandom.py ...
Compiling /usr/lib/python2.4/xdrlib.py ...
Compiling /usr/lib/python2.4/xmllib.py ...
Compiling /usr/lib/python2.4/xmlrpclib.py ...
Compiling /usr/lib/python2.4/zipfile.py ...
Listing /usr/lib/portage/pym ...
Compiling /usr/lib/portage/pym/dispatch_conf.py ...
Compiling /usr/lib/portage/pym/portage_debug.py ...
Listing /usr/lib/python24.zip ...
Can't list /usr/lib/python24.zip
Listing /usr/lib/python2.4 ...
Listing /usr/lib/python2.4/plat-linux2 ...
Compiling /usr/lib/python2.4/plat-linux2/CDROM.py ...
Compiling /usr/lib/python2.4/plat-linux2/DLFCN.py ...
Compiling /usr/lib/python2.4/plat-linux2/IN.py ...
Compiling /usr/lib/python2.4/plat-linux2/TYPES.py ...
Listing /usr/lib/python2.4/lib-tk ...
Can't list /usr/lib/python2.4/lib-tk
Listing /usr/lib/python2.4/lib-dynload ...
Listing /usr/lib/python2.4/site-packages ...
Compiling /usr/lib/python2.4/site-packages/drv_libxml2.py ...
Compiling /usr/lib/python2.4/site-packages/lcms.py ...
Compiling /usr/lib/python2.4/site-packages/libxml2.py ...
Compiling /usr/lib/python2.4/site-packages/libxslt.py ...
Listing /usr/lib/python2.4/site-packages/Numeric ...
Listing /usr/lib/python2.4/site-packages/dbus ...
Listing /usr/lib/python2.4/site-packages/gtk-2.0 ...
Listing /usr/lib/python2.4/site-packages/wx-2.6-gtk2-unicode ...              [ ok ] * Byte compiling python modules for python-2.4 .. ...                        [ ok ]
 *
 * If you have just upgraded from an older version of python you will need to run:
 *
 * /usr/sbin/python-updater
 *
 * This will automatically rebuild all the python dependent modules
 * to run with python-2.4.
 *
 * Your original Python is still installed and can be accessed via
 * /usr/bin/python2.x.
 *
>>> Regenerating /etc/ld.so.cache...
>>> dev-lang/python-2.4.3-r1 merged.

>>> No packages selected for removal by clean.

>>> Emerging (66 of 112) dev-python/python-fchksum-1.7.1 to /
>>> checking ebuild checksums ;-)
>>> checking auxfile checksums ;-)
>>> checking miscfile checksums ;-)
>>> checking python-fchksum-1.7.1.tar.gz ;-)
>>> Unpacking source...
>>> Unpacking python-fchksum-1.7.1.tar.gz to /var/tmp/portage/python-fchksum-1.7.1/work
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/python-fchksum-1.7.1/work/python-fchksum-1.7.1 ...
/usr/portage/dev-python/python-fchksum/python-fchksum-1.7.1.ebuild: line 20: 14443 Speicherzugriffsfehler  python setup.py build

!!! ERROR: dev-python/python-fchksum-1.7.1 failed.
Call stack:
  ebuild.sh, line 1531:   Called dyn_compile
  ebuild.sh, line 931:   Called src_compile
  python-fchksum-1.7.1.ebuild, line 21:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.





#emerge --info
Portage 2.1_rc2-r3 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.16-gentoo-r8 i686)
=================================================================
System uname: 2.6.16-gentoo-r8 i686 AMD Athlon(tm) XP 2500+
Gentoo Base System version 1.12.0
ccache version 2.4 [enabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r1
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -s -pipe -mtune=athlon-xp -mcpu=athlon-xp -march=athlon-xp -fomit-frame-pointer -ffast-math"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/NX/etc /usr/NX/home /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-Os -s -pipe -mtune=athlon-xp -mcpu=athlon-xp -march=athlon-xp -fomit-frame-pointer -ffast-math"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.gentoo.gr.jp http://gentoo.prz.edu.pl http://212.219.56.162/sites/www.ibiblio.org/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ ftp://ftp.twaren.net/Linux/Gentoo/ http://ftp.twaren.net/Linux/Gentoo/"
LANG="de_DE@utf8"
LC_ALL="de_DE@utf8"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex 3dnowext 7zip X aac acpi aim alsa apache2 apm asf avi bash-completion beagle berkdb bitmap-fonts bzip2 cairo cg cli crypt css cups dba dga dri dvb dvd dvdr dvdread eds emboss encode esd examples expat ext-png ext-zlib ffmpeg firefox flac foomaticdb ftp gd gdbm gif glitz gnome gpm gs gstreamer gtk gtk2 gzip hddtemp icq imlib inkjar ipv6 isdnlog jabber java joystick jpeg kde kdeenablefinal kerberos lame lcms ldap libg++ libsexy libwww mad mikmod mldonkeypango mmx mmxext mono motif moznoirc mozpango mozsvg mp3 mp4 mp4live mpeg mpeg2 mplayer msn mysql mythtv nautilus ncurses network nforce2 nls no_wxgtk1 nomac nptl nptlonly nvidia nvram offensive ogg opengl oscar oss pam pcre pdf pdflib perl pic png pppd python qt qtmt quicktime readline real reflection samba sdl session spell spl sse ssl subtitles svg tcpd theora tiff truetype truetype-fonts type1-fonts udev unicode userlocales utf8 vcd vi vorbis win32codecs wmf wxwindows xinerama xml xmms xorg xprint xv xvid zlib elibc_glibc input_devices_evdev kernel_linux linguas_de userland_GNU video_cards_nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Bryan Østergaard (RETIRED)






          2007-05-06 16:40:40 UTC
        

I can't reproduce this so I'm considering this fixed. Reopen if the problem still exists.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

