Title: 239280 – sci-visualization/gnuplot fontpath not prefixed
URL: https://bugs.gentoo.org/show_bug.cgi?id=239280

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 239280
sci-visualization/gnuplot fontpath not prefixed
Last modified: 2009-05-21 09:13:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 239280 
      - sci-visualization/gnuplot fontpath not prefixed


Summary:
sci-visualization/gnuplot fontpath not prefixed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

Gentoo non-Linux Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-01 20:20 UTC by Fabian Groffen





      Modified:
    
2009-05-21 09:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



junghans









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fabian Groffen






          2008-10-01 20:20:17 UTC
        

gnuplot> show fontpath

        fontpath is 
        system fontpath is "/usr/X11R6/lib/X11/fonts/Type1" "/usr/lib/X11/fonts!" 

Probably even best when it would get it from fontconfig or something.  Prefix paths should be in there at least.




Comment 1


Christoph Junghans (RETIRED)






          2009-05-18 17:35:16 UTC
        

I guess the important function is "static const struct path_table fontpath_tbl[]" in src/variable.c, line 256:
http://gnuplot.cvs.sourceforge.net/viewvc/gnuplot/gnuplot/src/variable.c?view=markup

this shows me that most likely kpsexpand gives the wrong path.

Can you test that?




Comment 2


Fabian Groffen






          2009-05-18 17:39:32 UTC
        

You mean this?

  258 #ifdef HAVE_KPSEXPAND
  259     /* teTeX or TeXLive */
  260     { "$`kpsexpand '$HOMETEXMF'`/fonts/type1!" },
  261     { "$`kpsexpand '$TEXMFLOCAL'`/fonts/type1!" },
  262     { "$`kpsexpand '$TEXMFMAIN'`/fonts/type1!" },
  263     { "$`kpsexpand '$TEXMFDIST'`/fonts/type1!" },

[tefnut:~] % kpsexpand '$HOMETEXMF'

[tefnut:~] % kpsexpand '$TEXMFLOCAL'
/Library/Gentoo/usr/local/share/texmf
[tefnut:~] % kpsexpand '$TEXMFMAIN'
/Library/Gentoo/usr/share/texmf
[tefnut:~] % kpsexpand '$TEXMFDIST'
/Library/Gentoo/usr/share/texmf-dist





Comment 3


Christoph Junghans (RETIRED)






          2009-05-18 18:43:44 UTC
        

Strange! But I think I was wrong kpsexpand is disable by default.

So you can either add "--with-kpsexpand" to $myconf or prefix the paths in line 266 and 267:
sed -e "s:/usr/X11R6:${EPREFIX}/usr/X11R6:" -i src/variable.c







Comment 4


Fabian Groffen






          2009-05-21 08:28:10 UTC
        

Gentoo doesn't have lib/X11R6.  The only dir which contains fonts (exists) is "$`kpsexpand '$TEXMFDIST'`/fonts/type1!".

I'll try this kpsexpand configure option




Comment 5


Fabian Groffen






          2009-05-21 09:13:54 UTC
        

It seems to actually do this because the latex USE-flag is not set, which makes sense.  If I enable it, I get the texlive fonts that I was looking for.

Thanks for your comments, I don't think there is much we can fix, just need to enable latex to get more fonts.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

