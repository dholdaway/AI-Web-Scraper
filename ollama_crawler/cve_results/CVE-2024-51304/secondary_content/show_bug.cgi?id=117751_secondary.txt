Title: 117751 – xen-3.0.0-r2 fails to compile with USE=debug
URL: https://bugs.gentoo.org/show_bug.cgi?id=117751

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 117751
xen-3.0.0-r2 fails to compile with USE=debug
Last modified: 2006-01-05 13:55:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 117751 
      - xen-3.0.0-r2 fails to compile with USE=debug


Summary:
xen-3.0.0-r2 fails to compile with USE=debug
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Chris Bainbridge (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-04 08:48 UTC by Ernst de Haan





      Modified:
    
2006-01-05 13:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



chrb









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ernst de Haan





          2006-01-04 08:48:08 UTC
        

Xen fails to compile:

# emerge -pvu --newuse xen

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild  N    ] app-emulation/xen-3.0.0-r2  USE="debug -custom-cflags -doc -screen" 0 kB

Total size of downloads: 0 kB

Output tail:

make[1]: Entering directory `/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/arch/x86'
ld   -m elf_i386  -T x86_32/xen.lds -N \
    boot/x86_32.o /var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o /var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/drivers/char/driver.o /var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/drivers/acpi/driver.o /var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/arch/x86/arch.o -o /var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/xen-syms
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `add_entry':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/ac_timer.c:129: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `set_ac_timer':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/ac_timer.c:171: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `rem_ac_timer':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/ac_timer.c:186: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `_raw_spin_unlock':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/spinlock.h:37: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `update_hl2e':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:565: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o:/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:1202: more undefined references to `debugtrace_dump' follow
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `debugtrace_key':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/keyhandler.c:171: undefined reference to `debugtrace_send_to_console'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/keyhandler.c:171: undefined reference to `debugtrace_send_to_console'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/keyhandler.c:172: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/keyhandler.c:173: undefined reference to `debugtrace_send_to_console'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `update_hl2e':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:565: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o: In function `__shadow_status':
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:1202: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:1203: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:1204: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:1222: undefined reference to `debugtrace_dump'
/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/common/common.o:/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/include/asm/shadow.h:635: more undefined references to `debugtrace_dump' follow
make[1]: *** [/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/xen-syms] Error 1
make[1]: Leaving directory `/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/arch/x86'
make: *** [/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen/xen] Error 2
make: Leaving directory `/var/tmp/portage/xen-3.0.0-r2/work/xen-3.0-testing-20051206/xen'

!!! ERROR: app-emulation/xen-3.0.0-r2 failed.
!!! Function src_install, Line 77, Exitcode 2
!!! installing xen failed
!!! If you need support, post the topmost build error, NOT this status message.

# emerge info

Portage 2.1_pre3-r1 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r3, 2.6.12-gentoo-r9 i686)
=================================================================
System uname: 2.6.12-gentoo-r9 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.12.0_pre12
dev-lang/python:     2.3.4, 2.4.2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo http://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.nutsmaas.nl/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/ ftp://130.59.10.35/mirror/gentoo/"
LINGUAS="en nl fr"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apm arts audiofile avi berkdb bitmap-fonts browserplugin bzip2 cpudetection crypt cups curl debug directfb divx4linux eds emboss encode exif expat fam flac foomaticdb fortran gdbm gif gimpprint glibc-compat20 glut gmp gpm gstreamer gtk2 idn imagemagick imlib java javamail jce jikes jpeg junit kde lcms libg++ libwww mad mikmod mmx mmxext mng motif mozilla mp3 mpeg mplayer ncurses nls nvidia ogg oggvorbis opengl oss pam pcre pdflib perl png ppds python qt quicktime rdesktop readline sdl spell sse ssl svga tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis win32codecs xine xinerama xml2 xmms xprint xv zlib elibc_glibc kernel_linux linguas_en linguas_nl linguas_fr userland_GNU"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTDIR_OVERLAY




Comment 1


Ernst de Haan





          2006-01-04 08:53:43 UTC
        

When executing

   USE=-debug emerge xen

It does compile, so the problem is in the USE=debug setting.




Comment 2


Chris Bainbridge (RETIRED)






          2006-01-05 07:55:27 UTC
        

Try unmerging any previous instances of Xen. It looks like gcc is failing to link to the built xen library... I don't know why this would happen in your case as you have no special LDFLAGS or MAKEOPTS.




Comment 3


Ernst de Haan





          2006-01-05 08:22:12 UTC
        

(In reply to comment #2)
> Try unmerging any previous instances of Xen. It looks like gcc is failing to
> link to the built xen library... I don't know why this would happen in your
> case as you have no special LDFLAGS or MAKEOPTS.

I did not have Xen installed at all. But if it works for you, I won't complain, since +debug is not required for me.




Comment 4


Chris Bainbridge (RETIRED)






          2006-01-05 12:54:47 UTC
        

It could be an upstream bug as well. If you do track it down let me know what the fix is and I'll apply it.




Comment 5


Ernst de Haan





          2006-01-05 13:55:34 UTC
        

On a different machine I can't even compile with USE=-debug. Seems unrelated so I created a new bug report, bug #117937.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

