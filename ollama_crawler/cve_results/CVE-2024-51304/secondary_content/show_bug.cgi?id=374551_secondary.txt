Title: 374551 – sci-libs/fftw-3.2.2-r1 USE flags "threads" and "openmp" shouldn't be allowed to both turn on
URL: https://bugs.gentoo.org/show_bug.cgi?id=374551

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 374551
sci-libs/fftw-3.2.2-r1 USE flags "threads" and "openmp" shouldn't be allowed to both turn on
Last modified: 2011-07-12 10:12:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 374551 
      - sci-libs/fftw-3.2.2-r1 USE flags "threads" and "openmp" shouldn't be allowed to both turn on


Summary:
sci-libs/fftw-3.2.2-r1 USE flags "threads" and "openmp" shouldn't be allowed ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       minor
      


Assignee:

Gentoo Science Related Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-07-09 13:15 UTC by Marcin Mirosław





      Modified:
    
2011-07-12 10:12 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marcin Mirosław





          2011-07-09 13:15:39 UTC
        

According to doc:
Use either `--enable-openmp' or `--enable-threads', not both.

Ebuild allows both use flags to be turn on (but in this case configures fftw with: --disable-threads --enable-openmp ).

Reproducible: Always




Comment 1


Pacho Ramos






          2011-07-10 18:19:02 UTC
        

Then, it isn't allowing you to enable both finally, no? Not sure what do you want exactly :(




Comment 2


Marcin Mirosław





          2011-07-10 18:41:41 UTC
        

Now it is possible to have both flags on, imho only one of them can be enabled at one time.




Comment 3


Mike Gilbert






          2011-07-11 00:55:40 UTC
        

If you enable both the openmp and threads USE flags, the threads flag is ignored. This is pretty standard ebuild behavior.

Assigning to maintainer for the final verdict.




Comment 4


Justin Lecher (RETIRED)






          2011-07-11 05:40:56 UTC
        

right, internally openmp superseeds threads. From the user side this is something you want isn't it?




Comment 5


Marcin Mirosław





          2011-07-12 10:12:16 UTC
        

From a formal point of view if "openmp" is set then "threads" do nothing. Binaries all the same when "threads" is on or off. It would be argument for option:
a) "openmp" blocks "threads" and vice versa

In both cases (--enable-openmp or --enable-threads ) fftw makes threads libraries and links them to libpthread.so . It could be usefull for user to know about such linking. This leads me to proposal:
b) "openmp" should force to "threads" to be on

Meseems option "b)" would be more usefull than option "a)".

(In reply to comment #3)
> If you enable both the openmp and threads USE flags, the threads flag is
> ignored. This is pretty standard ebuild behavior.

I don't see many packages support openmp, it hard to talk about standard behavior. I don't think it's good when use flag is ignored, it can missleads user.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

