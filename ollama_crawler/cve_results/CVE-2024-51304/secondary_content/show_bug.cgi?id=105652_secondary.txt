Title: 105652 – nVidia-glx 6629 on AMD64 hangs X; black screen with (text) cursor; for GeForce 6200 AGP
URL: https://bugs.gentoo.org/show_bug.cgi?id=105652

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 105652
nVidia-glx 6629 on AMD64 hangs X; black screen with (text) cursor; for GeForce 6200 AGP
Last modified: 2006-02-04 15:39:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 105652 
      - nVidia-glx 6629 on AMD64 hangs X; black screen with (text) cursor; for GeForce 6200 AGP


Summary:
nVidia-glx 6629 on AMD64 hangs X; black screen with (text) cursor; for GeForc...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

X11 External Driver Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-11 19:39 UTC by Mike C. Fletcher





      Modified:
    
2006-02-04 15:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




nvidia automated bug-reporting log

              (nvidia-bug-report.log,49.67 KB,
                text/plain)

            
2005-09-11 19:50 UTC,

            Mike C. Fletcher




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mike C. Fletcher





          2005-09-11 19:39:18 UTC
        

When starting X with new configuration, screen is "cleared" to a black screen
with a bar cursor in the upper-left corner.  Hard-disk activity is seen. 
Hitting ctrl-alt-backspace does not return to the command prompt.  Can log into
the box via ssh to reboot.

New Gentoo 2005.1 system (just built this weekend) with glibc 2.  Had a Radeon
7500 (working fine) in the box until just before attempting to install the
GeForce card.  Followed the nVidia upgrade guide and swapped in the card without
changing any other software/hardware.

Kernel module is loading fine.  dmesg has:

    NVRM: loading NVIDIA Linux x86_64 NVIDIA Kernel Module  1.0-6629  Wed Nov  3
11:43:48 PST 2004

Unloading and reloading it doesn't affect the problem.

nVidia GPU (kernel module) is found during xorg initialisation.

Deleting the xorg.conf "Screen" subsections with depths below 16 doesn't change
anything.

Commenting out (all) modules in xorg.conf other than glx has no effect on the
problem.

Disabling AGP in xorg.conf doesn't change the effect.  xorg log confirms that
the AGP feature is being disabled when the setting is specified.

Haven't been able to get "nv" driver working under gentoo either, but it does
appear to work (though somewhat unstably) under Knoppix.

This may be related to:

    http://bugs.gentoo.org/show_bug.cgi?id=70716

        Setting AGP off in xorg doesn't solve the problem.  There's only the one
video card in the system, so not likely a conflict between copies of the driver.

Reproducible: Always
Steps to Reproduce:
1. Install Geforce 6200-based GPU
2. Follow the nVidia upgrade guide
3. Attempt to run startx

Actual Results:  
Screen clears to black with a horizontal bar text cursor (not flashing) in the
upper left corner, (the same screen that normally shows up for a split second
before X switches to the target resolution) then hangs, no response to keyboard
(incl. ctrl-alt-backspace or attempts to switch to a different virtual terminal
(ctrl-alt-2)).

Expected Results:  
Switch to the target X resolution and continue loading.

Portage 2.0.51.22-r2 (default-linux/amd64/2005.1, gcc-3.4.4, glibc-2.3.5-r1,
2.6.11-gentoo-r9 x86_64)
=================================================================
System uname: 2.6.11-gentoo-r9 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=k8"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/env.d"
CXXFLAGS="-O2 -pipe -march=k8"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
PKGDIR="/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/mcfletch/portagedev"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa avi berkdb bitmap-fonts cdr crypt cups curl dvd eds emboss
encode esd fam foomaticdb fortran gdbm gif gphoto2 gpm gstreamer gtk gtk2 imlib
ipv6 java jpeg junit kde ldap lirc lzw lzw-tiff mad mp3 mpeg mysql ncurses nls
ogg oggvorbis opengl pam pdflib perl png postgres python qt quicktime readline
ruby samba sdl slang spell ssl svg tcltk tcpd tiff truetype truetype-fonts
type1-fonts usb userlocales vorbis xml2 xmms xpm xv zlib userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS




Comment 1


Mike C. Fletcher





          2005-09-11 19:50:24 UTC
        

Created attachment 68217 [details]
nvidia automated bug-reporting log

Since it's something nvidia has requested, here's the bug log for reference
purposes.




Comment 2


Jeremy Huddleston (RETIRED)






          2005-10-28 00:43:40 UTC
        

Can you please try the 7676-r1 drivers




Comment 3


Mike C. Fletcher





          2005-11-13 09:58:02 UTC
        

The problem turned out to be the driver choosing too high a resolution for the
monitor.  Forcing the resolution to be lower eliminated the problem.




Comment 4


Jakub Moc (RETIRED)






          2006-02-04 15:39:45 UTC
        

Heh, closing then... 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

