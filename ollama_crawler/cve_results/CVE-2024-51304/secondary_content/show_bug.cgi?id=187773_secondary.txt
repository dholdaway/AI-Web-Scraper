Title: 187773 – mail-client/evolution-2.8.3-r2 - USE='-kerberos' still requires library krb5; linking fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=187773

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 187773
mail-client/evolution-2.8.3-r2 - USE='-kerberos' still requires library krb5; linking fails
Last modified: 2007-08-10 13:17:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 187773 
      - mail-client/evolution-2.8.3-r2 - USE='-kerberos' still requires library krb5; linking fails


Summary:
mail-client/evolution-2.8.3-r2 - USE='-kerberos' still requires library krb5;...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

GNOME Office (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-05 02:46 UTC by Paul McDermott





      Modified:
    
2007-08-10 13:17 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul McDermott





          2007-08-05 02:46:34 UTC
        

USE='-kerberos' should remove Kerberos support for evolution. However, the ebuild fails to link, complaining of a missing krb5 library.

Reproducible: Always

Steps to Reproduce:
1.USE='-kerberos' emerge -av evolution
2.
3.

Actual Results:  
mediacentre paul # USE='-kerberos' emerge -av evolution

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] mail-client/evolution-2.8.3-r2  USE="crypt dbus doc hal ldap spell ssl -bogofilter -debug -ipv6 -kerberos* -krb4 -mono -nntp -pda -profile" 0 kB 

Total: 1 package (1 reinstall), Size of downloads: 0 kB

Would you like to merge these packages? [Yes/No] 

:
:
i686-pc-linux-gnu-gcc -march=athlon-xp -O2 -pipe -fomit-frame-pointer -Wall -Wmissing-prototypes -Wno-sign-compare -o .libs/test-calendar test-calendar.o -pthread  ./.libs/libemiscwidgets.so -L/usr/lib/nspr -L/usr/lib -L/usr/lib/lib -L/usr/lib/nss /var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/widgets/text/.libs/libetext.so /var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/widgets/table/.libs/libetable.so /var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/a11y/widgets/.libs/libevolution-widgets-a11y.so /var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/a11y/.libs/libevolution-a11y.so /var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/e-util/.libs/libeutil.so /usr/lib/libcamel-provider-1.2.so ../../e-util/.libs/libeutil.so /usr/lib/libgnomeprintui-2-2.so /usr/lib/libgnomeprint-2-2.so /usr/lib/libgnomeui-2.so /usr/lib/libjpeg.so /usr/lib/libbonoboui-2.so /usr/lib/libSM.so /usr/lib/libICE.so /usr/lib/libgnome-keyring.so /usr/lib/libgnomecanvas-2.so /usr/lib/libXext.so /usr/lib/libart_lgpl_2.so /usr/lib/libedataserverui-1.2.so /usr/lib/libglade-2.0.so /usr/lib/libexpat.so /usr/lib/libebook-1.2.so /usr/lib/libcamel-1.2.so -lkrb5 -lk5crypto -lcom_err -lgssapi_krb5 -lssl3 -lsmime3 -lnss3 -lsoftokn3 /usr/lib/libgtk-x11-2.0.so /usr/lib/libgdk-x11-2.0.so /usr/lib/libatk-1.0.so /usr/lib/libgdk_pixbuf-2.0.so /usr/lib/libpangocairo-1.0.so /usr/lib/libpangoft2-1.0.so /usr/lib/libpango-1.0.so /usr/lib/libcairo.so /usr/lib/libfreetype.so /usr/lib/libfontconfig.so /usr/lib/libdirectfb.so /usr/lib/libfusion.so /usr/lib/libdirect.so /usr/lib/libpng12.so /usr/lib/libXrender.so /usr/lib/libX11.so /usr/lib/libXau.so /usr/lib/libXdmcp.so /usr/lib/libgnome-2.so /usr/lib/libesd.so /usr/lib/libaudiofile.so /usr/lib/libasound.so /usr/lib/libgnomevfs-2.so /usr/lib/libdbus-glib-1.so /usr/lib/libdbus-1.so -lnsl -lssl -lcrypto -lresolv -lutil /usr/lib/libedataserver-1.2.so -lplc4 -lplds4 -lnspr4 /usr/lib/libdb-4.3.so /usr/lib/libxml2.so -lz /usr/lib/libgconf-2.so /usr/lib/libpopt.so /usr/lib/libbonobo-2.so /usr/lib/libbonobo-activation.so /usr/lib/libORBitCosNaming-2.so -lm /usr/lib/libORBit-2.so /usr/lib/libgmodule-2.0.so -ldl /usr/lib/libgthread-2.0.so -lpthread -lrt /usr/lib/libgobject-2.0.so /usr/lib/libglib-2.0.so  -Wl,--rpath -Wl,/usr/lib/evolution/2.8
/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../../i686-pc-linux-gnu/bin/ld: cannot find -lkrb5
collect2: ld returned 1 exit status
make[3]: *** [test-calendar] Error 1
make[3]: Leaving directory `/var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/widgets/misc'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3/widgets'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/mail-client/evolution-2.8.3-r2/work/evolution-2.8.3'
make: *** [all] Error 2

!!! ERROR: mail-client/evolution-2.8.3-r2 failed.
Call stack:
  ebuild.sh, line 1621:   Called dyn_compile
  ebuild.sh, line 973:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  evolution-2.8.3-r2.ebuild, line 205:   Called gnome2_src_compile
  gnome2.eclass, line 71:   Called die

!!! compile failure
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/log/portage/mail-client:evolution-2.8.3-r2:20070805-023319.log'.


Expected Results:  
Evolution ebuild should not link against krb5 if Kerberos support is not needed.

Can work around by installing app-crypt/mit-krb5-1.5.3 and compiling Evolution *with* Kerberos support




Comment 1


Peter Volkov (RETIRED)






          2007-08-09 14:52:42 UTC
        

Thank you for report. Please, show us the output of

$ equery hasuse -i kerberos

Seems that you have not rebuild dependencies (e.g. evolution-data-server) without kerberos.





Comment 2


Paul McDermott





          2007-08-09 16:44:53 UTC
        

OK, see what you mean

mediacentre paul # equery hasuse -i kerberos
[ Searching for USE flag kerberos in all categories among: ]
 * installed packages
[I--] [  ] mail-client/evolution-2.8.3-r2 (2.0)
[I--] [  ] dev-util/cvs-1.12.12-r2 (0)
[I--] [  ] dev-lang/php-5.2.2-r1 (5)
[I--] [  ] gnome-extra/evolution-data-server-1.8.3-r5 (0)
[I--] [  ] net-nds/openldap-2.3.35-r1 (0)
[I--] [  ] dev-libs/cyrus-sasl-2.1.22-r1 (2)
[I--] [  ] net-misc/openssh-4.6_p1-r2 (0)
[I--] [  ] net-misc/curl-7.15.5-r1 (0)
[I--] [M ] kde-base/kdelibs-3.5.5-r8 (3.5)

But why do I get:
mediacentre paul # equery depends mit-krb5
[ Searching for packages depending on mit-krb5... ]
mediacentre paul #

Isn't this the current implmentation of kerberos?

I can't say I am really understanding...If evolution depends on evolution-data-server, and evolution-data-server has USE='kerberos', shouldn't evolution pick up USE='-kerberos' too?

I am going to rebuild the above list of packages with USE='-kerberos'





Comment 3


Paul McDermott





          2007-08-10 13:17:33 UTC
        

Recompiling evolution-data-server resolved the problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

