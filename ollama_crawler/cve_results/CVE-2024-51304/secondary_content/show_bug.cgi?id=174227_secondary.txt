Title: 174227 – portage failed to remove old baselayout files
URL: https://bugs.gentoo.org/show_bug.cgi?id=174227

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 174227
portage failed to remove old baselayout files
Last modified: 2007-09-29 12:47:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 174227 
      - portage failed to remove old baselayout files


Summary:
portage failed to remove old baselayout files
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

194194

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-04-12 01:06 UTC by GNUtoo





      Modified:
    
2007-09-29 12:47 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



base-system
stefano.varesi
teidakankan









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


GNUtoo





          2007-04-12 01:06:19 UTC
        

#  /etc/init.d/net.eth2 restart
 * Caching service dependencies ...                                                                                                                                                                                                                                                                                [ ok ]
 * Stopping sshd ...                                                                                                                                                                                                                                                                                               [ ok ]
 * samba -> stop: smbd ...                                                                                                                                                                                                                                                                                         [ ok ]
 * samba -> stop: nmbd ...                                                                                                                                                                                                                                                                                         [ ok ]
 * Unmounting network filesystems ...                                                                                                                                                                                                                                                                              [ ok ]
 * Bringing down interface eth2
/lib/rcscripts/net/essidnet.sh: line 8: add_suffix: command not found
/lib/rcscripts/net/iptunnel.sh: line 46: interface_exists: command not found
 *   Removing addresses
 * Bringing up interface eth2
/lib/rcscripts/net/essidnet.sh: line 8: add_suffix: command not found
/lib/rcscripts/net/rename.sh: line 24: bash_variable: command not found
/lib/rcscripts/net/rename.sh: line 25: interface_exists: command not found
 *   Configuring wireless network for eth2
 *   Scanning for access points
 *     Found "wrt54gs" at 00:14:BF:E1:DA:DF, managed
 *     Found "SANTIS50-6BEE6F" at 00:90:96:6B:EE:6F, managed
 *     SANTIS50-6BEE6F has been blacklisted - not connecting
 *     Found "SANTIS50-74F47E" at 00:90:96:74:F4:7E, managed
 *     SANTIS50-74F47E has been blacklisted - not connecting
 *     Found "enda" at 00:16:B6:E7:50:3D, managed
 *     enda has been blacklisted - not connecting
 *   Connecting to "wrt54gs" in managed mode (WEP Disabled) ...                                                                                                                                                                                                                                                    [ ok ]
 *     eth2 connected to SSID "wrt54gs" at 00:14:BF:E1:DA:DF
 *     in managed mode (WEP disabled)
/lib/rcscripts/net/essidnet.sh: line 30: wireless_exists: command not found
/lib/rcscripts/net/iptunnel.sh: line 23: bash_variable: command not found
 *   192.168.1.107/24 ...                                                                                                                                                                                                                                                                                          [ ok ]
 *   Adding routes
 *     default via 192.168.1.1 ...                                                                                                                                                                                                                                                                                 [ ok ]
 * Mounting network filesystems ...                                                                                                                                                                                                                                                                                [ ok ]
 * samba -> start: smbd ...                                                                                                                                                                                                                                                                                        [ ok ]
 * samba -> start: nmbd ...                                                                                                                                                                                                                                                                                        [ ok ]
 * Starting sshd ...                                                                   

moreover baselayout 2.0 still does start the interfaces that it wansn't asked to start:


#  /etc/init.d/net.eth0 status
 * status: started

# rc-update show
            alsasound | boot
             bootmisc | boot
              checkfs | boot
            checkroot | boot
                clock | boot
          consolefont | boot
             hostname | boot
              keymaps | boot
                local |      default nonetwork
           localmount | boot
              modules | boot
             net.eth2 |      default
               net.lo | boot
             netmount |      default
            rmnologin | boot
                 sshd |      default
            syslog-ng |      default
              urandom | boot
              volumes | boot


Reproducible: Always




Comment 1


GNUtoo





          2007-04-12 01:06:25 UTC
        

# emerge --info
Portage 2.1.2.2 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.5-r0, 2.6.20-gentoo_port4 i686)
=================================================================
System uname: 2.6.20-gentoo_port4 i686 Intel(R) Pentium(R) M processor 2.00GHz
Gentoo Base System release 2.0.0_alpha1
Timestamp of tree: Thu, 12 Apr 2007 00:00:08 +0000
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/php/apache1-php5/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium-m -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="7zip X a52 aac acl adns aiglx alsa amr apache2 asf berkdb bitmap-fonts bl blender-game cairo cdda cddb cdr chardet clearcase cli contrarius cracklib cran crypt css cups cvs dbus dga divx dri dts dv dvd dvdr dvdread editor eds effects emboss enca encode examples exif expat fam fat ffmpeg firefox flac foomaticdb gdbm gif gimpprint glsa gmedia gpm gstreamer gtk hal hfs httpd iconv ieee1394 inkjar inquisitio ipv6 isdnlog jfs jpeg jpeg2k kde kerberos kqemu lcms ldap libg++ libnotify lzo mad matroska midi mikmod mjpeg mmx mmxext mng mp3 mp4 mpeg mpi musepack ncurses nls nptl nptlonly nsplugin ntfs ogg openal openexr opengl pam pcre perforce perl php plugin png ppds pppd python qa qt3 qt4 quicktime quotas readline realmedia reflection reiser4 reiserfs rt2500pci rtc rtsp samba sdl session skins sox speex spell spl srteam sse sse2 ssl stream subversion svg swat tcpd tga theora tiff timidity tordns truetype truetype-fonts type1-fonts unicode usb vcd vidx vlm vorbis wma wmf wmp wxwindows x264 x86 xanim xfs xml xorg xprint xv xvid xvmc yahoo yv12 zlib zsh" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 2


SpanKY






          2007-04-12 03:46:54 UTC
        

the net stuff is known to not be fully working with baselayout 2.0 yet




Comment 3


Roy Marples (RETIRED)






          2007-04-12 06:28:32 UTC
        

iptunnel.sh, essidnet.sh and rename.sh no longer exist so either you locally modified them or portage failed to remove them.




Comment 4


Roy Marples (RETIRED)






          2007-04-12 06:29:12 UTC
        

(In reply to comment #2)
> the net stuff is known to not be fully working with baselayout 2.0 yet

Only ppp won't work. Everything else should work but hasn't been fully tested yet.




Comment 5


GNUtoo





          2007-04-12 11:32:04 UTC
        

i also have a new bug...
# /etc/modules.autoload.d/kernel-2.6:  kernel modules to load when system boots.
#
# Note that this file is for 2.6 kernels.
#
# Add the names of modules that you'd like to load when the system
# starts into this file, one per line.  Comments begin with # and
# are ignored.  Read man modules.autoload for additional details.

# For example:
# aic7xxx
ipw2200
kqemu
 
# lsmod
Module                  Size  Used by
ipw2200               182216  0
serio_raw               6788  0
i2c_i801                7948  0
ub                     19104  0

# modprobe kqemu
# lsmod
Module                  Size  Used by
kqemu                 123684  0
ipw2200               182216  0
serio_raw               6788  0
i2c_i801                7948  0
ub                     19104  0

the baselayout doesn't load the modules




Comment 6


Roy Marples (RETIRED)






          2007-04-12 11:43:24 UTC
        

That is already fixed in our svn repo, but you should create a new bug instead of making noise on this bug.




Comment 7


Zac Medico






          2007-04-13 02:00:41 UTC
        

(In reply to comment #3)
> iptunnel.sh, essidnet.sh and rename.sh no longer exist so either you locally
> modified them or portage failed to remove them.

I've just upgraded a system to baselayout-2.0.0_alpha1 and those file were properly removed.  Please reopen if you are able to reproduce the problem.




Comment 8


GNUtoo





          2007-04-13 11:58:30 UTC
        

i emerged the old baselayout and re-emerged the new baselayout and it workd for me but...i open a new bugreport as it has another problem





Comment 9


Jakub Moc (RETIRED)






          2007-09-29 12:47:33 UTC
        

*** Bug 194194 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

