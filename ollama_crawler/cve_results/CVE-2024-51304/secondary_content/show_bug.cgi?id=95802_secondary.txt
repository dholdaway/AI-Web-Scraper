Title: 95802 – Stablizing stunnel-4.09
URL: https://bugs.gentoo.org/show_bug.cgi?id=95802

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 95802
Stablizing stunnel-4.09
Last modified: 2006-05-18 22:12:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 95802 
      - Stablizing stunnel-4.09


Summary:
Stablizing stunnel-4.09
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Other
      







Importance:
      
High
       normal
      


Assignee:

Lance Albertson (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-06-11 14:07 UTC by Lance Albertson (RETIRED)





      Modified:
    
2006-05-18 22:12 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ppc-macos









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Lance Albertson (RETIRED)






          2005-06-11 14:07:50 UTC
        

Hey all,

Just got done marking stunnel 4.09 stable for x86. I think it's pretty ready for the rest of you folks to do the same if you feel like it. I should note that I changed how the ebuild worked from the previous stable version. The major change is the location for the pid file. It was in /etc/stunnel, and now resides in /var/run/stunnel. The init script should warn the users if they are still using the old location.

Please mark as you see fit.




Comment 1


SpanKY






          2005-06-11 14:10:42 UTC
        

arm stable




Comment 2


Danny van Dyk (RETIRED)






          2005-06-11 17:48:09 UTC
        

amd64 stable




Comment 3


Danny van Dyk (RETIRED)






          2005-06-11 18:04:52 UTC
        

Bleh, removing from CC...




Comment 4


nixnut (RETIRED)






          2005-06-12 11:15:08 UTC
        

Emerging on my ppc box yields the error below.

 * Adding group 'stunnel' to your system ...
 *  - Groupid: next available
 * Adding user 'stunnel' to your system ...
 *  - Userid: 103
 *  - Shell: /bin/false
 *  - Home: -1
 *  - Groups: stunnel
useradd: invalid home directory `-1'

!!! ERROR: net-misc/stunnel-4.09 failed.
!!! Function enewuser, Line 611, Exitcode 3
!!! enewuser failed
!!! If you need support, post the topmost build error, NOT this status message.

!!! FAILED postinst: 1


emerge info:
Portage 2.0.51.19 (default-linux/ppc/2005.0, gcc-3.4.3, glibc-2.3.4.20041102-r1,
2.6.11-h3 ppc)
=================================================================
System uname: 2.6.11-h3 ppc 
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Jun  1 2005, 18:21:02)]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.4_p6, 1.8.5-r3, 1.6.3, 1.7.9-r1, 1.9.5
sys-devel/binutils:  2.15.90.0.3-r5
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r4
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CFLAGS="-O2 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mtune=G4 -maltivec -mabi=altivec -fno-strict-aliasing -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict userpriv
usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="ppc X alsa berkdb bitmap-fonts crypt cups curl eds emboss esd fam fortran
gif gnome gpm gstreamer gtk gtk2 imlib ipv6 jpeg kde libwww motif mozilla mp3
mpeg ncurses nls ogg oggvorbis opengl pam pdflib perl png python qt readline
slang spell ssl tcpd tiff truetype truetype-fonts type1-fonts unicode vorbis
xml2 xprint xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS





Comment 5


Lance Albertson (RETIRED)






          2005-06-12 11:23:41 UTC
        

(In reply to comment #4)
> Emerging on my ppc box yields the error below.
> 
>  * Adding group 'stunnel' to your system ...
>  *  - Groupid: next available
>  * Adding user 'stunnel' to your system ...
>  *  - Userid: 103
>  *  - Shell: /bin/false
>  *  - Home: -1
>  *  - Groups: stunnel
> useradd: invalid home directory `-1'

Make sure you have the newest eclass for eutils. This should have been resolved
from bug #93777




Comment 6


nixnut (RETIRED)






          2005-06-12 12:57:32 UTC
        

Emerged fine after an emerge sync




Comment 7


ta2002





          2005-06-12 21:41:54 UTC
        

Don't know how much of this you can affect, but....

Had an old version installed (but never got around
to using it).

When I updated to 4.09, the ebuild regenerated
stunnel.crt, stunnel.csr, stunnel.key, and
stunnel.pem (prepending ._cfg0000 to each). This
doesn't seem like a good idea to me.

I always merge configuration files manually (with
diff), and I noticed that all off the new files
had root:root as the owners (the original files
all had stunnel:stunnel as the owner). I don't
know if this represents a limitation in portage,
but it seemed possible for someone to do the
"wrong thing" (either change the ownership to
root:root when the maintainer wanted to keep
stunnel:stunnel, or leave it as stunnel:stunnel
when the maintainer had some reason to change it
to root:root in the newer version).

Completely confused, I simply unmerged stunnel,
deleted ALL of the configuration files, and then
reinstalled. All of the files in /etc/stunnel
show ownership by stunnel:stunnel now (but I
remember the directory itself had stunnel:root
before, versus root:root now).

Again, I don't know how much you can control
this through the ebuild system, but it seems
like something to make sure ends up right, if
possible. Thanks.





Comment 8


Jason Wever (RETIRED)






          2005-06-17 22:20:23 UTC
        

A little SPARC to brighten your day!




Comment 9


Wormo (RETIRED)






          2005-06-18 00:09:44 UTC
        

removing ppc from cc, since it has been marked stable




Comment 10


Lance Albertson (RETIRED)






          2005-06-18 09:34:26 UTC
        

Woohoo! Now we just have the alpha slackers to wait on ;-)




Comment 11


Fernando J. Pereda (RETIRED)






          2005-06-18 15:00:38 UTC
        

And last but not least ...................

the mighty alpha flavour !

Best regards,
Ferdy




Comment 12


Lance Albertson (RETIRED)






          2005-06-18 19:41:06 UTC
        

Thanks for stabilizing.




Comment 13


Lance Albertson (RETIRED)






          2005-06-22 06:39:55 UTC
        

I cleaned out some old stunnel ebuilds and noticed (after I had done it, bad
me!) that I took out the only ebuild that was flagged for ppc-macos. I noticed
the old ebuild had a few tricks in it to make it work. Would you mind seeing if
you can mark 4.09 testing (since thats what you had before)?

Cheers,




Comment 14


Lance Albertson (RETIRED)






          2005-06-24 17:47:50 UTC
        

FYI, I restored 3.23, but I still recommend you upgrade to 4.09 whenever you get
a chance.




Comment 15


Lina Pezzella (RETIRED)






          2005-06-26 17:54:50 UTC
        

Can you give testing instructions?




Comment 16


Lance Albertson (RETIRED)






          2006-05-18 22:12:22 UTC
        

Closing old bug









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

