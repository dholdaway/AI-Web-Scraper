Title: 122571 – x11-misc/xscreensaver-4.23|24 does not find GL libraries
URL: https://bugs.gentoo.org/show_bug.cgi?id=122571

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 122571
x11-misc/xscreensaver-4.23|24 does not find GL libraries
Last modified: 2006-12-20 12:40:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 122571 
      - x11-misc/xscreensaver-4.23|24 does not find GL libraries


Summary:
x11-misc/xscreensaver-4.23|24 does not find GL libraries
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Desktop Misc. Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

158677

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-02-12 09:28 UTC by Dead Schorsch





      Modified:
    
2006-12-20 12:40 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



pete4abw
rkrylov
x11-drivers









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




config.log for xscreensaver-4.24

              (config.log,123.55 KB,
                text/plain)

            
2006-02-12 09:32 UTC,

            Dead Schorsch




Details





config.log for xscreensaver-4.24 (xorg-x11 GL layer selected)

              (config.log,123.52 KB,
                text/plain)

            
2006-02-12 11:27 UTC,

            Dead Schorsch




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dead Schorsch





          2006-02-12 09:28:50 UTC
        

The current ~x86 xscreensaver ebuild do not find the OpenGL Libraries (provided by nvidia-glx) and therefor does not build the OpenGL based savers, like glmatrix.

Could be an issue with nvidia or with xscreensaver, the later on prompts during configure:


    #################################################################

    Warning: Use of GL was requested, but it was not found.

             More specifically, we found the headers, but not the
             libraries; so either GL is half-installed on this
             system, or something else went wrong.  The `config.log'
             file might contain some clues.

             Those demos which use 3D will not be built or installed.
             You might want to consider installing OpenGL and
             re-running configure.  If your vendor doesn't ship
             their own implementation of OpenGL, you can get a free
             version at <http://www.mesa3d.org/>.  For general OpenGL
             info, see <http://www.opengl.org/>.

    #################################################################


config.log will be appended. nvidia-glx is installed at most recent version and OpenGL generally is available, as glxgears runs at expected speed.




Comment 1


Dead Schorsch





          2006-02-12 09:32:29 UTC
        

Created attachment 79574 [details]
config.log for xscreensaver-4.24




Comment 2


Krzysztof Pawlik (RETIRED)






          2006-02-12 10:54:50 UTC
        

You're using nVidia drivers?

/usr/lib/libGL.so: undefined reference to `_nv000038gl'
/usr/lib/libGLcore.so.1: undefined reference to `_nv000037gl'

Try switching to xorg-x11 OpenGL.




Comment 3


Dead Schorsch





          2006-02-12 11:26:09 UTC
        

Switching to xorg-x11 does not affect the outcome, still the same error message printed. Adding xorg-x11 config.log.




Comment 4


Dead Schorsch





          2006-02-12 11:27:50 UTC
        

Created attachment 79584 [details]
config.log for xscreensaver-4.24 (xorg-x11 GL layer selected)




Comment 5


Krzysztof Pawlik (RETIRED)






          2006-02-12 11:32:48 UTC
        

/usr/lib/gcc/i686-pc-linux-gnu/3.4.5/../../../../i686-pc-linux-gnu/bin/ld: cannot find -lGL
collect2: ld returned 1 exit status

`emerge --info`, xorg-x11 version, `ls -l /usr/lib/libGL*` ?




Comment 6


Dead Schorsch





          2006-02-13 15:15:48 UTC
        

$emerge --info:

Portage 2.1_pre4-r1 (default-linux/x86/2005.1, gcc-3.4.5, glibc-2.3.6-r2,glibc-2.2.5-r2, 2.6.15-gen too-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Sempron(tm)   2800+
Gentoo Base System version 1.12.0_pre15
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozi lla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks fixpackages sandbox sfperms strict userpriv usersandbo x"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gento o"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aac acpi acpi4linux activefilter aim alsa apache2 async audiofile avi bas h-completion berkdb bitmap-fonts bluetooth bmp bzip2 bzlib cddb cdinstall cdparanoia cdr chroot cry pt cups curl dbus dga divx4linux doc dvb dvd dvdr eds emboss encode esd evo exif fbcon foomaticdb f ortran ftp gd gdbm gif gimp gimpprint gnome gnomedb gpm gstreamer gtk gtk2 gtkhtml hal iconv imap i mlib imlib2 ipv6 irmc jpeg libg++ libwww live lzw-tiff mad mbox mime mmx mmx2 mmxext moznocompose m oznoirc moznomail mozp3p mozplaintext mozsvg mp3 mpeg mpeg4 msn ncurses netbeans nls nocd nptl ntpl only nvidia ogg oggvorbis openal opengl pam pda pdflib perl php png posix ppds python quicktime rea dline sdl smime sockets sox spell sse ssl svg tcpd tga truetype-fonts type1-fonts unicode usb vcd v ideos vidix vorbis win32codecs wmf xfs xinerama xml2 xosd xpm xv xvid xvmc zlib elibc_glibc kernel_ linux linguas_de userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LDFLAGS, MAKEOPTS

$ emerge --search xorg-x11:

Searching...
[ Results for search key : xorg-x11 ]
[ Applications found : 1 ]

*  x11-base/xorg-x11
      Latest version available: 6.8.2-r6
      Latest version installed: 6.8.2-r6
      Size of files: 135,439 kB
      Homepage:      http://xorg.freedesktop.org/
      Description:   An X11 implementation maintained by the X.Org Foundation
      License:       Adobe-X CID DEC DEC-2 IBM-X NVIDIA-X NetBSD SGI UCB-LBL XC-2 bigelow-holmes-urw-gmbh-luxi christopher-g-demetriou national-semiconductor nokia tektronix the-open-group todd-c-miller x-truetype xfree86-1.0 MIT SGI-B BSD || ( FTL GPL-2 )

$ ls -la /usr/lib/libGL*

lrwxrwxrwx 1 root root      21 2005-10-22 15:06 /usr/lib/libGLcore.so.1 -> libGLcore.so.1.0.7676
-rwxr-xr-x 1 root root 7794936 2005-10-22 15:06 /usr/lib/libGLcore.so.1.0.7676
-rw-r--r-- 1 root root     709 2006-02-12 15:45 /usr/lib/libGL.la
lrwxrwxrwx 1 root root      17 2005-10-22 15:06 /usr/lib/libGL.so.1 -> libGL.so.1.0.7676
-rwxr-xr-x 1 root root  518220 2005-10-22 15:06 /usr/lib/libGL.so.1.0.7676
-rw-r--r-- 1 root root  726498 2005-10-09 00:00 /usr/lib/libGLU.a
-rw-r--r-- 1 root root     752 2005-10-09 00:00 /usr/lib/libGLU.la
lrwxrwxrwx 1 root root      13 2005-10-09 00:01 /usr/lib/libGLU.so -> libGLU.so.1.3
lrwxrwxrwx 1 root root      13 2005-10-09 00:01 /usr/lib/libGLU.so.1 -> libGLU.so.1.3
-rwxr-xr-x 1 root root  589499 2005-10-09 00:00 /usr/lib/libGLU.so.1.3
-rw-r--r-- 1 root root   27850 2005-10-09 00:00 /usr/lib/libGLw.a
lrwxrwxrwx 1 root root      13 2005-10-09 00:01 /usr/lib/libGLw.so -> libGLw.so.1.0
lrwxrwxrwx 1 root root      13 2005-10-09 00:01 /usr/lib/libGLw.so.1 -> libGLw.so.1.0
-rwxr-xr-x 1 root root   26806 2005-10-09 00:00 /usr/lib/libGLw.so.1.0

The last one is awesome, why are there these old libraries installed, while the current version of nvidia-glx provides:

$ ls -la /usr/lib/opengl/nvidia/lib/libGL*

lrwxrwxrwx 1 root root      21 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGLcore.so -> libGLcore.so.1.0.8178
lrwxrwxrwx 1 root root      21 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGLcore.so.1 -> libGLcore.so.1.0.8178
-rwxr-xr-x 1 root root 8136248 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGLcore.so.1.0.8178
-rw-r--r-- 1 root root     727 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGL.la
lrwxrwxrwx 1 root root      17 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGL.so -> libGL.so.1.0.8178
lrwxrwxrwx 1 root root      17 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGL.so.1 -> libGL.so.1.0.8178
-rwxr-xr-x 1 root root  535264 2006-02-12 15:42 /usr/lib/opengl/nvidia/lib/libGL.so.1.0.8178




Comment 7


Krzysztof Pawlik (RETIRED)






          2006-02-14 02:08:13 UTC
        

X11-drivers: any idea about broken symlinks?




Comment 8


Dead Schorsch





          2006-02-15 03:44:28 UTC
        

And for a quick fix, kann I simply re-link to the nvidia libs?




Comment 9


Dead Schorsch





          2006-02-18 04:07:52 UTC
        

After removing that stale links and running "eselect opengl set nvidia" once more, fresh correct links were created. Everything is back to functional, maybe a side effect of some installation issue. Worksforme.




Comment 10


Peter Hyman





          2006-04-01 11:48:52 UTC
        

what broke this in the first place?




Comment 11


Jakub Moc (RETIRED)






          2006-12-20 12:40:26 UTC
        

*** Bug 158677 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

