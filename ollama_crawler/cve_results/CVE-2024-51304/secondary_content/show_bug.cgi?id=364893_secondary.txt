Title: 364893 – app-cdr/ccd2iso-0.3 fails to install VERSION not defined
URL: https://bugs.gentoo.org/show_bug.cgi?id=364893

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 364893
app-cdr/ccd2iso-0.3 fails to install VERSION not defined
Last modified: 2011-05-06 05:13:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 364893 
      - app-cdr/ccd2iso-0.3 fails to install VERSION not defined


Summary:
app-cdr/ccd2iso-0.3 fails to install VERSION not defined
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Optical Media project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-04-26 07:48 UTC by Michael Weber (RETIRED)





      Modified:
    
2011-05-06 05:13 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (app-cdr:ccd2iso-0.3:20110426-064831.log,4.80 KB,
                text/plain)

            
2011-04-26 07:50 UTC,

            Michael Weber (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Weber (RETIRED)






          2011-04-26 07:48:01 UTC
        

src/ccd2iso.c uses a VERSION, which should be an preprocessor makro, but it's just an env var in the Makefile.

my quick-n-dirty fix is

Index: ccd2iso-0.3.ebuild
===================================================================
RCS file: /var/cvsroot/gentoo-x86/app-cdr/ccd2iso/ccd2iso-0.3.ebuild,v
retrieving revision 1.2
diff -u -B -r1.2 ccd2iso-0.3.ebuild
--- ccd2iso-0.3.ebuild  1 Jan 2010 19:57:05 -0000       1.2
+++ ccd2iso-0.3.ebuild  26 Apr 2011 07:47:37 -0000
@@ -2,6 +2,8 @@
 # Distributed under the terms of the GNU General Public License v2
 # $Header: /var/cvsroot/gentoo-x86/app-cdr/ccd2iso/ccd2iso-0.3.ebuild,v 1.2 2010/01/01 19:57:05 fauli Exp $
 
+EAPI=2
+
 inherit eutils
 
 DESCRIPTION="Converts CloneCD images (popular under Windows) to ISOs"
@@ -15,10 +17,9 @@
 
 DEPEND=""
 
-src_unpack() {
-       unpack ${A}
-       cd "${S}"
+src_prepare() {
        epatch "${FILESDIR}"/${P}-headers.patch
+       sed -e "s:VERSION:\"${PV}\":" -i src/ccd2iso.c || die
 }




Comment 1


Michael Weber (RETIRED)






          2011-04-26 07:50:34 UTC
        

Created attachment 271193 [details]
build.log

Portage 2.1.9.42 (default/linux/amd64/10.0/developer, gcc-4.5.2, libc-0-r0, 2.6.38-gentoo-r3-io.0 x86_64)
=================================================================
System uname: Linux-2.6.38-gentoo-r3-io.0-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T7300_@_2.00GHz-with-gentoo-2.0.2
Timestamp of tree: Unknown
ccache version 2.4 [disabled]
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.4.6, 2.5.4-r4, 2.6.6-r2, 2.7.1-r1, 3.1.3-r1, 3.2
dev-util/ccache:     2.4-r9
dev-util/cmake:      2.8.4
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.2
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.5.2, 4.6.0
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
sys-kernel/linux-headers: 2.6.36.1
virtual/os-headers:  0
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -mcx16 -msahf --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=4096 -mtune=core2 -mfpmath=sse -O2 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -mcx16 -msahf --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=4096 -mtune=core2 -mfpmath=sse -O2 -pipe -ggdb"
DISTDIR="/var/cache/distfiles"
FEATURES="assume-digests binpkg-logs collision-protect distlocks fixlafiles fixpackages multilib-strict news parallel-fetch protect-owned sandbox sfperms sign splitdebug strict test-fail-continue unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox"
FFLAGS=""
GENTOO_MIRRORS="http://ftp.uni-erlangen.de/pub/mirrors/gentoo/"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,--hash-style=gnu -Wl,-O1 -Wl,--as-needed"
LINGUAS="de en en_US en_GB"
PKGDIR="/var/cache/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /var/lib/layman/science /var/lib/layman/sunrise /var/lib/layman/java-overlay /var/lib/layman/gnome /var/lib/layman/xmw /var/lib/layman/gamerlay /var/lib/layman/x11 /var/lib/layman/mozilla /usr/local/portage /var/lib/layman/science /var/lib/layman/sunrise /var/lib/layman/java-overlay /var/lib/layman/gnome /var/lib/layman/xmw /var/lib/layman/gamerlay /var/lib/layman/x11 /var/lib/layman/mozilla"
SYNC="cvs://xmw@cvs.gentoo.org:/var/cvsroot"
USE="X a52 aac aalib acl alsa amd64 ao bash-completion berkdb bluetooth bzip2 cairo cdda cddb cdparanoia cdr cli consolekit cracklib crypt cups curl cxx dbus dga djvu dri dts dv dvd dvdr emboss encode exif faac faad fam fbcon ffmpeg fftw firefox flac fontconfig fortran gdbm gdu gif gimp git glut gnutls gphoto2 gpm gs gstreamer gtk iconv id3tag imagemagick ipv6 java jbig jpeg jpeg2k lame latex lcms libsamplerate lzma lzo mad mikmod mmx mng modules mp3 mp4 mpeg mplayer mudflap multilib nas nautilus ncurses nls nptl nptlonly nsplugin ogg openal openexr opengl openmp pam pango pch pcmcia pcre pdf perl png policykit ppds pppd python qt3support qt4 quicktime raw readline rle scanner sdl session smp speex spell sqlite sqlite3 sse sse2 ssl startup-notification subversion svg symlink sysfs taglib tcl tcpd theora threads tiff tk truetype udev unicode upnp usb vim-syntax vorbis wavpack webkit x264 xcb xine xinerama xml xorg xscreensaver xulrunner xv xvid zlib zsh-completion" ALSA_CARDS="intel-hda" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en en_US en_GB" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Michael Weber (RETIRED)






          2011-05-06 05:13:44 UTC
        

couldn't confirm the problem. sorry for the noise









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

