Title: 120019 – emerging gconf-2.12.1 fails (stalls on md5 src_uri ;-) GConf-2.12.1.tar.bz2)
URL: https://bugs.gentoo.org/show_bug.cgi?id=120019

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 120019
emerging gconf-2.12.1 fails (stalls on md5 src_uri ;-) GConf-2.12.1.tar.bz2)
Last modified: 2006-01-28 05:45:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 120019 
      - emerging gconf-2.12.1 fails (stalls on md5 src_uri ;-) GConf-2.12.1.tar.bz2)


Summary:
emerging gconf-2.12.1 fails (stalls on md5 src_uri ;-) GConf-2.12.1.tar.bz2)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-23 00:43 UTC by Christopher Zapart





      Modified:
    
2006-01-28 05:45 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christopher Zapart





          2006-01-23 00:43:27 UTC
        

When trying to emerge stable gconf-2.12.1 the process hangs indefinitely on the line
" md5 src_uri ;-) GConf-2.12.1.tar.bz2". There is no increased CPU and hard disk
activity, the ebuild is just stalled. The following is the output from emerging gconf:

emerge -uDv world
Calculating world dependencies
!!! Packages for the following atoms are either all
!!! masked or don't exist:
app-admin/torsmo

 ...done!
>>> emerge (1 of 79) gnome-base/gconf-2.12.1 to /
>>> md5 files   ;-) gconf-1.0.8-r3.ebuild
>>> md5 files   ;-) gconf-1.0.8-r5.ebuild
>>> md5 files   ;-) gconf-1.0.9.ebuild
>>> md5 files   ;-) gconf-2.10.1-r1.ebuild
>>> md5 files   ;-) gconf-2.12.0.ebuild
>>> md5 files   ;-) gconf-2.12.1.ebuild
>>> md5 files   ;-) files/digest-gconf-1.0.8-r3
>>> md5 files   ;-) files/digest-gconf-1.0.8-r5
>>> md5 files   ;-) files/digest-gconf-1.0.9
>>> md5 files   ;-) files/gconf-1.0.9-locallock_mdk.patch
>>> md5 files   ;-) files/gconfd-2-fix.patch
>>> md5 files   ;-) files/digest-gconf-2.10.1-r1
>>> md5 files   ;-) files/digest-gconf-2.12.0
>>> md5 files   ;-) files/digest-gconf-2.12.1
>>> md5 src_uri ;-) GConf-2.12.1.tar.bz2

Other ebuilds can be emerged without any problems as usual, only gconf seems to be
affected.

emerge info
Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.14-gentoo-r5 i686)
=================================================================
System uname: 2.6.14-gentoo-r5 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -xP -ip -mtune=pentium4 -i_dynamic -I /opt/intel/compiler90/include"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -xP -ip -mtune=pentium4 -i_dynamic -I /opt/intel/compiler90/include"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://mirror.nutsmaas.nl/gentoo/ http://gd.tuwien.ac.at/opsys/linux/gentoo/ http://gentoo.tiscali.nl/gentoo/"
LANG="en_GB.UTF-8"
LINGUAS="en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X aac acl alsa apm arts audiofile avi berkdb bitmap-fonts bonobo bzip2 cdr cjk crypt cups curl divx4linux dvd eds emboss encode esd exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml guile idn ifc imagemagick imlib immqt-bc ipv6 jack java joystick jpeg junit kde lcms libg++ libwww lirc lua mad mikmod mjpeg mmx mmxext mng motif mozilla mp3 mpeg mysql nas ncurses nls nptl ogg oggvorbis openal opengl oss pam pcre pdflib perl plotutils png ppds python qt quicktime readline real recode scanner sdl spell sse sse2 sse3 ssl svga tcltk tcpd tetex threads tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis win32codecs xine xml xml2 xmms xv xvid zlib video_cards_radeon linguas_en_GB userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS




Comment 1


Christopher Zapart





          2006-01-24 01:17:04 UTC
        

Previous versions of gconf are also affected by this problem (for example
gconf-2.10.1-r1). Other Gentoo ebuilds continue emerging without any problems whatsover. This problem is specific to the gconf ebuild.




Comment 2


Christopher Zapart





          2006-01-24 04:50:00 UTC
        

After manually stepping through the ebuild and portage python scripts I have found
out that the problem is caused by the script /usr/lib/portage/bin/ebuild.sh hanging on
all the empty return functions pkg_*(), for example
pkg_setup()
{
	return
}

if one were to comment out calls to all these empty functions (found for example in
dyn_setup()) then the script ebuild executes without problems, it does not hang on
these pkg_* functions.

in addition, echo in the following code does not get executed at all (I manually added
echo in there):

pkg_setup()
{
 echo "pkg_setup here" 
 return
}

Equally, the second echo with #2 does not execute in the dyn_setup function (because
pkg_setup() never really returns anything, somehow it does not execute at all:

dyn_setup()
{
	echo "dyn_setup here#1"	
	pkg_setup
	echo "dyn_setup here#2"	
}

commenting out all the instances of calls to empty return pkg_ functions of the sort:
pkg_*
{
	return
}

finally enabled me to emerge gconf successfully. But no other ebuilds seem to be
affected by these problems (so far). Perhaps other ebuilds do not trigger calls to
empty return functions in the /usr/lib/portage/bin/ebuild.sh script.

So I am leaving this bug as new, unresolved as I have only solved the symptoms but
have been unable to find out the real root causes of the problem.





Comment 3


John N. Laliberte (RETIRED)






          2006-01-24 15:14:58 UTC
        

if you comment the kill_gconf's out and redigest the ebuild, does this make it stop hanging?




Comment 4


Christopher Zapart





          2006-01-24 23:33:15 UTC
        

After upgrading the gconf (plus the whole gnome) successfully yesterday by using the
described hack with empty pkg_* functions, today gconf installs OK with and without
commenting out kill_gconf in its ebuild. It no longers hangs.

The only difference between commenting out kill_gconf and not is an extra warning
from ORBit.

Output without commenting out kill_gconf:

emerge gconf
Calculating dependencies ...done!
>>> emerge (1 of 1) gnome-base/gconf-2.12.1 to /
>>> md5 files   ;-) gconf-1.0.8-r3.ebuild
>>> md5 files   ;-) gconf-1.0.8-r5.ebuild
>>> md5 files   ;-) gconf-1.0.9.ebuild
>>> md5 files   ;-) gconf-2.10.1-r1.ebuild
>>> md5 files   ;-) gconf-2.12.0.ebuild
>>> md5 files   ;-) gconf-2.12.1.ebuild
>>> md5 files   ;-) files/digest-gconf-1.0.8-r3
>>> md5 files   ;-) files/digest-gconf-1.0.8-r5
>>> md5 files   ;-) files/digest-gconf-1.0.9
>>> md5 files   ;-) files/gconf-1.0.9-locallock_mdk.patch
>>> md5 files   ;-) files/gconfd-2-fix.patch
>>> md5 files   ;-) files/digest-gconf-2.10.1-r1
>>> md5 files   ;-) files/digest-gconf-2.12.0
>>> md5 files   ;-) files/digest-gconf-2.12.1
>>> md5 src_uri ;-) GConf-2.12.1.tar.bz2

ORBit-WARNING **: No POA found for operation drop_all_caches [-1077415640]
>>> Unpacking source...
>>> Unpacking GConf-2.12.1.tar.bz2 to /var/tmp/portage/gconf-2.12.1/work

WIth kill_gconf commented out:

emerge gconf
Calculating dependencies ...done!
>>> emerge (1 of 1) gnome-base/gconf-2.12.1 to /
>>> md5 files   ;-) gconf-1.0.8-r3.ebuild
>>> md5 files   ;-) gconf-1.0.8-r5.ebuild
>>> md5 files   ;-) gconf-1.0.9.ebuild
>>> md5 files   ;-) gconf-2.10.1-r1.ebuild
>>> md5 files   ;-) gconf-2.12.0.ebuild
>>> md5 files   ;-) gconf-2.12.1.ebuild
>>> md5 files   ;-) files/digest-gconf-1.0.8-r3
>>> md5 files   ;-) files/digest-gconf-1.0.8-r5
>>> md5 files   ;-) files/digest-gconf-1.0.9
>>> md5 files   ;-) files/gconf-1.0.9-locallock_mdk.patch
>>> md5 files   ;-) files/gconfd-2-fix.patch
>>> md5 files   ;-) files/digest-gconf-2.10.1-r1
>>> md5 files   ;-) files/digest-gconf-2.12.0
>>> md5 files   ;-) files/digest-gconf-2.12.1
>>> md5 src_uri ;-) GConf-2.12.1.tar.bz2
>>> Unpacking source...
>>> Unpacking GConf-2.12.1.tar.bz2 to /var/tmp/portage/gconf-2.12.1/work

In both cases the installation proceeds as normal, it no longer hangs after the last
md5 checksum. So I guess after successfully upgrading gconf by using a manual
hack the problem has gone away on its own.





Comment 5


John N. Laliberte (RETIRED)






          2006-01-28 05:45:00 UTC
        

seemed to be a local issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

