Title: 170910 – gpgme-1* broken with gnupg2 (tested with gnupg-2.0.3)
URL: https://bugs.gentoo.org/show_bug.cgi?id=170910

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 170910
gpgme-1* broken with gnupg2 (tested with gnupg-2.0.3)
Last modified: 2007-03-21 16:06:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 170910 
      - gpgme-1* broken with gnupg2 (tested with gnupg-2.0.3)


Summary:
gpgme-1* broken with gnupg2 (tested with gnupg-2.0.3)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Crypto team [DISABLED]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




159851 164523



 

        Show dependency tree





 





      Reported:
    
2007-03-14 17:31 UTC by Robin Johnson





      Modified:
    
2007-03-21 16:06 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



wltjr









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robin Johnson









          2007-03-14 17:31:41 UTC
        

This is the bug per my email to the crypto herd.

gpgme-1* breaks due to passphrase input somewhere.
This MUST be fixed before gnupg2 can go stable.

# FEATURES=test ebuild gpgme-1.1.4.ebuild test

... (full build process)
>>> Test phase [check]: app-crypt/gpgme-1.1.4
Making check in assuan
make[1]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/assuan'
make  check-am
make[2]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/assuan'
make[2]: Nothing to be done for `check-am'.
make[2]: Leaving directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/assuan'
make[1]: Leaving directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/assuan'
Making check in gpgme
make[1]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/gpgme'
make  check-am
make[2]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/gpgme'
make[2]: Nothing to be done for `check-am'.
make[2]: Leaving directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/gpgme'
make[1]: Leaving directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/gpgme'
Making check in tests
make[1]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/tests'
Making check in gpg
make[2]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/tests/gpg'
make  check-TESTS
make[3]: Entering directory `/dev/shm/portage/app-crypt/gpgme-1.1.4/work/gpgme-1.1.4/tests/gpg'
-----BEGIN PGP MESSAGE-----
Version: GnuPG v2.0.3 (GNU/Linux)

hQEOA2rm1+5GqHH4EAP+L9hlirYH8tJJ09uhr7ONq6IOvxDoe2k6/gGGwQeuxXJb
5VTH5Ljoj3ih8X3L1fJ//OvSxz3DFjm9QEmAL0ZFwMxMDhQPt8NeDREcIlPPuIWT
mtg0EjHJ7sxrPs83wSl4gapkRcT2s4IqfIGVnzax4W+4TrUluNgQhaTkf+x4CkMD
/jQCSkl6PnC5+DjXxqBO0ENT9180ELbKGlIoRUvFMrx6z+WsXS7/pfM4ijlCikBF
fCtbZQVKIJiHqtMH9ItCvXWSW4v0ZsDba4rP4j98bN7g0VonD0p58Qjq3o4dR4zJ
0BsADd3lUCQ7ctsB3xQsByYfrffudziInLfHxlEJOhT6hQEOA1OB6k7im6N/EAP/
Zd2qGJiTcUjKPrCFB/MNsEdtU1X+Q74iqHnuhWWTra114pNWHQvm9dUXoC1oxVYJ
9wuL0cdJQ8hKTINAkZqGqHVa0wsBMXmLbkW/Rwvd71CmZOXVDJxwUFfBAge9jOeC
r5F9WmvauFUm26zz8nAceV+QIbMaUcoCksPEeVVMEhQD/3w2/ARFBi42TXHaMeAC
ez6DXIl+1bKYPFiMNY6qvs7TGSFgJBCuBeC8423cyd15tR8TUuIrttnMZufgDo5p
gjcAuT/TYY7zhxesasXY9SJGhKVNpvq1Eat2lM8u6tLehyeT74BoStgv3bkN3QSS
Xz7ELGwe0UxQzJ638t4FJP7J0kcBonawMa2xRuIIbBM8ALM89mV/sBDleb617l43
IptkupnRqyBSHpcPuAibYcUU15Gppw4KMebZt69YTiwR4GShHK15BqKvgg==
=umwu
-----END PGP MESSAGE-----
PASS: t-encrypt
(hangs here, sometimes pinentry comes up).

Interrupted.
make[3]: *** wait: No child processes.  Stop.
make[3]: *** Waiting for unfinished jobs....
make[3]: *** wait: No child processes.  Stop.
make[2]: *** [check-am] Error 2
make[1]: *** [check-recursive] Interrupt
make: *** [check-recursive] Interrupt




Comment 1


Robin Johnson









          2007-03-14 17:33:09 UTC
        

alonbl, please work on this bug, high priority.

Potential plans of action (pick one or more)
- Trace it to a specific gnupg build where this error was introduction.
- Debug inside gpgme calls.




Comment 2


Robin Johnson









          2007-03-14 19:21:01 UTC
        

alonbl, please keep the gpgme stuff on this bug.

alonbl wrote this in an email to me:
>> With only gnupg2 installed, do this:
>> FEATURES=test ebuild gpgme-1.1.4.ebuild test
>
> Please don't run interactive tests under sandbox.
> I compiled gpgme and run make check and all tests passed.
> I even disable the built-in agent disabling and use one daemon and
> password caching is working.

Ok, it DOES still happen even outside of the sandbox.

Here is the complete test output:
http://dev.gentoo.org/~robbat2/gnupg_gpgme_passphrase_problems_20070314.typescript

I just hit Enter whenever pinentry came up to ask for input.

Basically I do:
ebuild gnupg-2.0.3.ebuild compile
cd /location/to/$S
make check (this one passes fine)
ebuild gpgme-1.1.4.ebuild compile
cd /location/to/$S
make check (pinentry comes up several times)




Comment 3


Alon Bar-Lev (RETIRED)






          2007-03-14 19:43:13 UTC
        

(In reply to comment #2)
> I just hit Enter whenever pinentry came up to ask for input.

You need to specify "abc" whenever pinentry come up.
And then it will work.





Comment 4


Alon Bar-Lev (RETIRED)






          2007-03-21 16:06:57 UTC
        

robbat2: Please reopen if you still have an issue with this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

