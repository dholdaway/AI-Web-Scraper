Title: 615674 – www-client/firefox{,-bin}-52.0.2: missing MOZ_ESR=1 in ebuilds
URL: https://bugs.gentoo.org/show_bug.cgi?id=615674

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 615674
www-client/firefox{,-bin}-52.0.2: missing MOZ_ESR=1 in ebuilds
Last modified: 2017-04-17 02:36:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 615674 
      - www-client/firefox{,-bin}-52.0.2: missing MOZ_ESR=1 in ebuilds


Summary:
www-client/firefox{,-bin}-52.0.2: missing MOZ_ESR=1 in ebuilds
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-04-15 21:26 UTC by Simon





      Modified:
    
2017-04-17 02:36 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



itumaykin+gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simon





          2017-04-15 21:26:14 UTC
        

Even though all descriptions of the Firefox project point to it being a build of Firefox ESR releases (see for example https://wiki.gentoo.org/wiki/Project:Mozilla), the actual firefox-bin build isn't built from the ESR sources but from the regular ones (see https://github.com/gentoo/gentoo/blob/master/www-client/firefox-bin/firefox-bin-52.0.2.ebuild#L26).

This seems to be a mistake and the stable Firefox builds referencing ESR should actually be built from the ESR sources.

The reason I'm asking this now is because for the current Firefox version (52.0.2) this means no NPAPI support whereas the ESR version has NPAPI still enabled.




Comment 1


Andreas Sturmlechner






          2017-04-15 21:47:11 UTC
        

Why do you think there are two different 52.0.2? It can not be *not* ESR, because version 52 is ESR by definition.




Comment 2


Simon





          2017-04-15 21:53:09 UTC
        

Hi Andreas, thanks for the quick response.
I don't know the intricacies of Firefox's build and source difference, but I conclude it wasn't properly configured as ESR since there's no mention of ESR in Firefox's about screen and in the plugins screen it shows the "Missing something? Some plugins are no longer supported by Firefox." warning (which links to https://support.mozilla.org/1/firefox/52.0.1/Linux/en-US/npapi). This doesn't happen on ESR releases.




Comment 3


Simon





          2017-04-16 09:23:58 UTC
        

actual firefox-bin builds for the ESR version can be found here https://ftp.mozilla.org/pub/firefox/releases/52.0.2esr/

I noticed that the ebuild for the regular firefox doesn't use the ESR sources by default either, though there is an env var (MOZ_ESR) than when set to "1" will use the ESR sources.
Maybe the same could be done for firefox-bin?
Though imho it would make more sense to simply switch to the actual ESR sources/builds by default.




Comment 4


Coacher





          2017-04-16 13:18:40 UTC
        

(In reply to Andreas Sturmlechner from comment #1)
> Why do you think there are two different 52.0.2? It can not be *not* ESR,
> because version 52 is ESR by definition.
Mozilla provides different tarballs depending whether you want your firefox to be ESR or not, even if versions are the same.
See https://archive.mozilla.org/pub/firefox/releases/52.0.2/source/
and https://archive.mozilla.org/pub/firefox/releases/52.0.2esr/source/
Those tarballs have different checksums.




Comment 5


Ian Stakenvicius (RETIRED)






          2017-04-17 02:34:56 UTC
        

Unfortunately this thread is full of a few misconceptions.

#1, There are in fact two different versions of Firefox-52 upstream, an ESR one and a non-ESR one.  

#2, Gentoo packages ~arch as the non-ESR version of firefox, while ESR ones go stable.

So along these lines, firefox-52.0.* (including 52.0.2) is following the upstream non-ESR configuration and this is why MOZ_ESR is not set.  IF you want to have the ESR version of firefox-52 you can get it from Mozilla-Overlay, where I *have* set MOZ_ESR=1.

Firefox-52.1 -will- have MOZ_ESR=1 and will go stable, while firefox-53.0 will continue the non-ESR ~arch only pattern.




Comment 6


Ian Stakenvicius (RETIRED)






          2017-04-17 02:36:03 UTC
        

(thank-you to the posters that did find the correct info -- I just wanted to set the record officially)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

