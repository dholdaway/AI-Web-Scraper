Title: 186278 – emerge gcc 4.1.1 and 4.2.0 hangs after compile due to {T}/build.lo running in background
URL: https://bugs.gentoo.org/show_bug.cgi?id=186278

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 186278
emerge gcc 4.1.1 and 4.2.0 hangs after compile due to {T}/build.lo running in background
Last modified: 2009-05-13 18:09:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 186278 
      - emerge gcc 4.1.1 and 4.2.0 hangs after compile due to {T}/build.lo running in background


Summary:
emerge gcc 4.1.1 and 4.2.0 hangs after compile due to {T}/build.lo running in...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Interface (emerge)

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-07-22 22:07 UTC by Pierre Y.





      Modified:
    
2009-05-13 18:09 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



esigra
menno.schaap









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Pierre Y.





          2007-07-22 22:07:17 UTC
        

The gcc emerging fails (emerge seems to be frozen) right after compilation :

...
/var/tmp/portage/sys-devel/gcc-4.2.0/work/build/./gcc/gfortran -B/var/tmp/portage/sys-devel/gcc-4.2.0/work/build/./gcc/ -B/usr/x86_64-pc-linux-gnu/bin/ -B/usr/x86_64-pc-linux-gnu/lib/ -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include  -m32 -g -O2 -Wall  -m32 -fsyntax-only omp_lib.f90
make[8]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/32/libgomp »
make[7]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/32/libgomp »
make[6]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/32/libgomp »
make[5]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/libgomp »
/var/tmp/portage/sys-devel/gcc-4.2.0/work/build/./gcc/gfortran -B/var/tmp/portage/sys-devel/gcc-4.2.0/work/build/./gcc/ -B/usr/x86_64-pc-linux-gnu/bin/ -B/usr/x86_64-pc-linux-gnu/lib/ -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include -g -O2 -Wall -fsyntax-only omp_lib.f90
make[4]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/libgomp »
make[3]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/libgomp »
make[2]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build/x86_64-pc-linux-gnu/libgomp »
make[1]: quittant le répertoire « /var/tmp/portage/sys-devel/gcc-4.2.0/work/build »
/var/tmp/portage/sys-devel/gcc-4.2.0/work/build /var/tmp/portage/sys-devel/gcc-4.2.0/work/gcc-4.2.0
>>> Source compiled.

And nothing more happens, even if I wait for ages...

I saw that in processes list :

# ps aux
...
root     20463  0.0  0.0      0     0 ?        S    Jul19   0:00 [pdflush]
pierre   27940  0.0  0.3 107796  7268 ?        Sl   Jul22   0:00 /usr/libexec/evolution-data-server-1.10 --oaf-activate-iid=O
root     29134  0.0  0.0      0     0 ?        S    Jul22   0:00 [pdflush]
root     29751  0.0  0.0   2644   472 pts/0    S+   Jul22   0:01 tee -i -a /var/tmp/portage/sys-devel/gcc-4.2.0/temp/build.lo
root     29752  0.0  0.0      0     0 pts/0    Z+   Jul22   0:00 [sandbox] <defunct>

I think this is related to gcc emerging.

Reproducible: Always




$ emerge --info
Portage 2.1.3_rc8 (default-linux/amd64/2007.0/desktop, gcc-4.1.2, glibc-2.6-r0, 2.6.22-gentoo-r1 x86_64)
=================================================================
System uname: 2.6.22-gentoo-r1 x86_64 Intel(R) Pentium(R) D CPU 3.00GHz
Gentoo Base System release 2.0.0_alpha4
Timestamp of tree: Sun, 22 Jul 2007 15:50:01 +0000
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r1
ACCEPT_KEYWORDS="amd64 x86 ~amd64 ~x86"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=nocona -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans"
GENTOO_MIRRORS="http://ftp.club-internet.fr/pub/mirrors/gentoo http://distfiles.gentoo.org"
LANG="fr_FR.UTF-8"
LC_ALL="fr_FR.UTF-8"
LINGUAS="fr en us"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/portage/local/layman/mpd /usr/portage/local/layman/einit /usr/portage/local/layman/synce /usr/portage/local/pierre"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 apache2 arts avi bash-completion berkdb bitmap-fonts bzip2 cairo cdr cli cracklib crypt cups dbus dlloader dri dvd dvdr dvdread eds emboss encode esd evo exif fam firefox flac fortran galago gdbm gif gnome gphoto2 gpm gstreamer gtk gtk2 hal iconv ipv6 isdnlog java jpeg kde kerberos ldap libg++ mad midi mikmod mmx mono mp3 mpeg mudflap musepack mysql mysqli ncurses nls nptl nptlonly nsplugin ogg opengl openmp oss pam pcre pdf pdflib perl png ppds pppd python qt3 qt3support qt4 quicktime readline reflection ruby samba sdl seamonkey session spell spl sse sse2 ssl svg swig tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis xine xinetd xml xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" CAMERAS="canon ptp2" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr en us" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Zac Medico






          2007-07-22 23:01:26 UTC
        

This is a bug in the gcc ebuild since it shouldn't leave any processes running in the background.




Comment 2


Dzmitry Haiduchonak





          2007-10-25 16:03:50 UTC
        

Same trouble when emerging gcc-4.1.1, gcc-4.1.2, libstdc++-v3-3.3.6

is ps axf 
[sandbox] <defunct>




Comment 3


Dzmitry Haiduchonak





          2007-10-25 16:05:42 UTC
        

(In reply to comment #2)
> Same trouble when emerging gcc-4.1.1, gcc-4.1.2, libstdc++-v3-3.3.6
> 
> is ps axf 
> [sandbox] <defunct>
> 

x86 P-3
Gentoo 2007.0





Comment 4


Mark Loeser (RETIRED)






          2009-05-02 01:55:01 UTC
        

No one else has ever complained about this, and I can't see why this would be happening.  Please try with newer stable versions of gcc.




Comment 5


Menno Schaap





          2009-05-13 18:09:02 UTC
        

(In reply to comment #4)
> No one else has ever complained about this, and I can't see why this would be
> happening.  Please try with newer stable versions of gcc.
> 

Dear Mark, 

Please be so kind to have a look at #269283 and #268978.
This looks the same to me. 

Thanks a lot!
Menno









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

