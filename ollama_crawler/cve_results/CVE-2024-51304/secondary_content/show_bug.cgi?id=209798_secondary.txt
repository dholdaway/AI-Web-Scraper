Title: 209798 – sys-power/apcupsd-3.14.2 does not respect LDFLAGS
URL: https://bugs.gentoo.org/show_bug.cgi?id=209798

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 209798
sys-power/apcupsd-3.14.2 does not respect LDFLAGS
Last modified: 2010-08-09 21:00:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 209798 
      - sys-power/apcupsd-3.14.2 does not respect LDFLAGS


Summary:
sys-power/apcupsd-3.14.2 does not respect LDFLAGS
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Diego Elio Pettenò (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




ldflags



 

        Show dependency tree





 





      Reported:
    
2008-02-12 09:30 UTC by Diego Elio Pettenò (RETIRED)





      Modified:
    
2010-08-09 21:00 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



base-system
xarthisius









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Diego Elio Pettenò (RETIRED)






          2008-02-12 09:30:56 UTC
        

These files have a .hash section even when my LDFLAGS tell the linker not to generate it:

sys-power/apcupsd-3.14.2 (/usr/bin/gapcmon)




Comment 1


Michael Imhof (RETIRED)






          2008-05-08 19:07:34 UTC
        

Upstream? Or can it be fixed in the ebuild?




Comment 2


Kevin Pyle





          2009-01-03 21:34:12 UTC
        

That depends on the build system.  Usually, a patch to the build system is required, as in this case.  Looking at src/gapcmon/Makefile.in, the link rule for gapcmon is:

gapcmon: $(gapcmon_OBJS)
    $(LD) -o $@ $(gapcmon_OBJS) @GAPCMON_LIBS@ -lX11 -lXext $(X_LIBS) $(X_EXTRA_LIBS)

The fix should be to add $(LDFLAGS) right after $(LD).  Do not be misled by the use of $(LD) as the variable name.  Based on the configure script, $(LD) is usually set to gcc.  It might be different on a non-Linux system.




Comment 3


Diego Elio Pettenò (RETIRED)






          2009-01-15 15:23:23 UTC
        

Taking over. Michael you let this package rot so much, since I need it, I'm going to take it over and take care.

Please don't say I didn't give you enough notice, last year I already asked you this much and now I'm simply tired.





Comment 4


Diego Elio Pettenò (RETIRED)






          2009-01-15 15:51:12 UTC
        

Upstream's new buildsystem is fun. Why people reinvent the wheel? :(





Comment 5


Kevin Pyle





          2010-01-14 23:46:59 UTC
        

The only version of sys-power/apcupsd I see in the tree right now is 3.14.7, and its Makefile appears to honor LDFLAGS for gapcmon now.




Comment 6


Doktor Notor





          2010-03-20 20:17:55 UTC
        

Looks like fixed to me... 




Comment 7


Kacper Kowalik (Xarthisius) (RETIRED)






          2010-07-28 12:16:57 UTC
        

Both version in tree (3.14.7 3.14.8) respect LDFLAGS. Closing...










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

