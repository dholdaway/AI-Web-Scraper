Title: 220143 – Toolchain : Proposal to group gcc LDPATHs
URL: https://bugs.gentoo.org/show_bug.cgi?id=220143

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 220143
Toolchain : Proposal to group gcc LDPATHs
Last modified: 2010-08-20 17:49:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 220143 
      - Toolchain : Proposal to group gcc LDPATHs


Summary:
Toolchain : Proposal to group gcc LDPATHs
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Eclasses

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

250720

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2008-05-03 19:11 UTC by cJ





      Modified:
    
2010-08-20 17:49 UTC
      (History)
    




          CC List:
        

7 
          users
          
            (show)
          



denisgolovan
eternaleye
ivan.diorditsa
levertond
lpmichalik
tais.hansen
zl29ah









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


cJ





          2008-05-03 19:11:37 UTC
        

Currently, gcc libraries are isolated in different directories, per gcc version (say /usr/lib64/gcc/x86_64-pc-linux-gnu/4.2.3).

Why not put them together (eg. /usr/lib64/gcc/x86_64-pc-linux-gnu/lib/) like any unix library ?
I don't see an inconvenient of doing that, do you ?

Moreover, there are downsides of doing this kind of segregation.
The biggest one is that you currently have 1 active "gcc profile", preventing links to other gcc versions, forcing "unnecessary" recompilation of stuff on upgrades even if the old gcc version isn't removed


AFAIK, this change is not translated by many changes in the toolchain ebuilds, and is very helpful, in the sense that it avoids many breakages.

I really hope (among many) that it will be considered, discussed, and eventually implemented !




Comment 1


Mark Loeser (RETIRED)






          2008-05-03 19:30:40 UTC
        

I'm sure this would break far more things than having them separated apparently does.  Not to mention all of the file collisions this would introduce.

vapier: ?




Comment 2


Thomas Anderson (tanderson) (RETIRED)






          2008-05-03 19:41:12 UTC
        

But other libraries owned by slotted packages work fine with multiple active libraries in parallel. Why should libstdc++ be any different than these?




Comment 3


Mark Loeser (RETIRED)






          2008-05-03 20:08:50 UTC
        

(In reply to comment #2)
> But other libraries owned by slotted packages work fine with multiple active
> libraries in parallel. Why should libstdc++ be any different than these?
> 

Doing this for just the libraries makes sense.  It wasn't clear to me in the initial report that this was the intent.




Comment 4


cJ





          2008-05-03 20:12:57 UTC
        

Yes I was only talking about libraries :)




Comment 5


Tais P. Hansen





          2008-05-14 20:23:47 UTC
        

Would this fix breaking my C++ apps every time I switch gcc compiler with gcc-config. I.e. stop errors like this:

icemon: /usr/lib/gcc/x86_64-pc-linux-gnu/4.1.2/libstdc++.so.6: version `GLIBCXX_3.4.9' not found (required by icemon)





Comment 6


SpanKY






          2008-05-14 21:57:45 UTC
        

i dont see the point of putting them in a different directory.  you arent gaining anything.

gcc-config should already order LDPATH according to increasing version ... if it isnt, then it's a bug




Comment 7


Alex Elsayed





          2008-05-19 04:37:15 UTC
        

(In reply to comment #5)
Yes, it most likely would. AFAIK, that error occurs when a program linked against one version of libstdc++ is forced to use a lower version. In Gentoo's case, this occurs because:
    a.) Only one version of libstdc++ is available at any given time
    b.) All versions have the same soname, rather than the name + 3-part version that most libraries have, causing the program to dlopen the incorrect version rather than complaining about a broken linkage




Comment 8


Thomas Anderson (tanderson) (RETIRED)






          2008-12-15 15:59:29 UTC
        

*** Bug 250720 has been marked as a duplicate of this bug. ***




Comment 9


Mark Loeser (RETIRED)






          2009-07-04 00:07:31 UTC
        

Closing as per Mike's comment about how this shouldn't gain us anything.  If there is a bug in gcc-config's handling of LDPATHs, file another bug for that.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

