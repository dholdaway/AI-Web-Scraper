Title: 622968 – dev-ml/topkg-0.9.0 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=622968

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 622968
dev-ml/topkg-0.9.0 fails to compile
Last modified: 2017-07-01 16:04:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 622968 
      - dev-ml/topkg-0.9.0 fails to compile


Summary:
dev-ml/topkg-0.9.0 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Team for the ML programming language family








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-06-29 00:31 UTC by Ken Rose





      Modified:
    
2017-07-01 16:04 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dev-portage









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info > /tmp/emerge--info.txt

              (emerge--info.txt,5.95 KB,
                text/plain)

            
2017-06-29 00:31 UTC,

            Ken Rose




Details





/var/tmp/portage/dev-ml/topkg-0.9.0/temp/build.log

              (build.log,3.82 KB,
                text/plain)

            
2017-06-29 00:33 UTC,

            Ken Rose




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ken Rose





          2017-06-29 00:31:45 UTC
        

Created attachment 478318 [details]
emerge --info > /tmp/emerge--info.txt

# nice emerge -avuD world --keep-going --with-bdeps=y

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ~] dev-ml/topkg-0.9.0:0/0.9.0::gentoo  0 KiB
[ebuild  rR   ~] dev-ml/extlib-1.7.2:0/1.7.2::gentoo  USE="ocamlopt -doc" 0 KiB
[ebuild  rR    ] app-misc/ledit-2.03::gentoo  USE="ocamlopt" 0 KiB
[ebuild  N    ~] dev-ml/uutf-1.0.1:0/1.0.1::gentoo  USE="ocamlopt -doc {-test} -utftrip" 0 KiB
[ebuild  N    ~] dev-ml/cmdliner-1.0.0:0/1.0.0::gentoo  USE="ocamlopt {-test}" 0 KiB
[ebuild  N    ~] dev-ml/jsonm-1.0.1:0/1.0.1::gentoo  0 KiB
[ebuild     U  ] app-text/psutils-1.17-r3::gentoo [1.17-r2::gentoo] 0 KiB
[ebuild     U  ] dev-perl/ExtUtils-PkgConfig-1.160.0::gentoo [1.150.0::gentoo] 0 KiB
[ebuild     U  ] dev-perl/HTML-Tree-5.60.0::gentoo [5.30.0-r1::gentoo] USE="{-test}" 0 KiB
[ebuild  rR    ] sys-boot/grub-0.97-r16::gentoo  USE="ncurses -custom-cflags -netboot -static" 0 KiB
[ebuild     U  ] media-gfx/sam2p-0.49.3::gentoo [0.49.1::gentoo] USE="examples gif" 0 KiB
[ebuild  rR   ~] dev-ml/cudf-0.8-r1:0/0.8::gentoo  USE="ocamlopt {-test}" 0 KiB
[ebuild     U  ] dev-python/certifi-2017.4.17::gentoo [2017.1.23::gentoo] PYTHON_TARGETS="python2_7 python3_4 (-pypy) (-pypy3) (-python3_5) (-python3_6)" 0 KiB
[ebuild  N     ] dev-ml/labltk-8.06.2:0/8.06.2::gentoo  USE="X ocamlopt" 0 KiB
[ebuild     U  ] cross-armv6j-hardfloat-linux-gnueabi/glibc-2.23-r4:2.2::crossdev [2.23-r3:2.2::crossdev] USE="gd rpc -audit -caps -debug -hardened -multilib -nscd -profile (-selinux) -suid -systemtap -vanilla" 0 KiB
[ebuild     U  ] net-dns/bind-tools-9.11.1_p1::gentoo [9.11.0_p5::gentoo] USE="ipv6 readline seccomp ssl xml -doc -gost -gssapi -idn (-libressl) -urandom" 0 KiB
[ebuild     U ~] www-client/google-chrome-59.0.3071.109::gentoo [59.0.3071.104::gentoo] USE="plugins" L10N="-am -ar -bg -bn -ca -cs -da -de -el -en-GB -es -es-419 -et -fa -fi -fil -fr -gu -he -hi -hr -hu -id -it -ja -kn -ko -lt -lv -ml -mr -ms -nb -nl -pl -pt-BR -pt-PT -ro -ru -sk -sl -sr -sv -sw -ta -te -th -tr -uk -vi -zh-CN -zh-TW" 0 KiB
[ebuild     U  ] www-plugins/adobe-flash-26.0.0.131:22::gentoo [25.0.0.171:22::gentoo] USE="nsplugin ppapi" ABI_X86="32 64 (-x32)" 0 KiB
[ebuild  r  U  ] app-pda/libplist-2.0.0:0/3.1.0::gentoo [1.12:0/3::gentoo] USE="python -static-libs" PYTHON_TARGETS="python2_7 python3_4 (-python3_5) (-python3_6)" 0 KiB
[ebuild  rR    ] app-pda/libusbmuxd-1.0.9:0/2::gentoo  USE="-static-libs" 0 KiB
[ebuild  rR    ] app-pda/libimobiledevice-1.2.0:0/6::gentoo  USE="gnutls python -static-libs" PYTHON_TARGETS="python2_7 python3_4 (-python3_5)" 0 KiB
[ebuild  rR    ] app-pda/ifuse-1.1.3::gentoo  0 KiB
[ebuild  N     ] dev-ml/lablgl-1.05-r1:0/1.05::gentoo  USE="ocamlopt tk -doc -glut" 0 KiB
[ebuild  N     ] dev-ml/lablgtk-2.18.5:2/2.18.5::gentoo  USE="examples gnomecanvas ocamlopt opengl spell svg -debug -glade -sourceview" 0 KiB
[ebuild  N    ~] dev-ml/ocamlgraph-1.8.7:0/1.8.7::gentoo  USE="examples gtk ocamlopt -doc" 0 KiB
[ebuild  N    ~] dev-ml/dose3-5.0.1:0/5.0.1::gentoo  USE="bzip2 ocamlopt xml -curl -parmap -rpm4 {-test} -zip" 0 KiB
[ebuild  N    ~] dev-ml/opam-1.3.1-r1:0/1.3.1::gentoo  0 KiB
[ebuild  N    ~] dev-ml/integers-0.2.2:0/0.2.2::gentoo  0 KiB
[ebuild  N    ~] dev-ml/ocaml-ctypes-0.12.0:0/0.12.0::gentoo  USE="{-test}" 0 KiB
[ebuild  rR    ] sys-devel/llvm-3.9.1-r1:0/3.9.1::gentoo  USE="clang libffi ncurses ocaml python sanitize static-analyzer xml -debug -default-compiler-rt -default-libcxx -doc -gold -libedit (-lldb) -multitarget {-test}" ABI_X86="32 (64) (-x32)" LLVM_TARGETS="AMDGPU BPF NVPTX (X86) -AArch64 -ARM -Hexagon -MSP430 -Mips -PowerPC -Sparc -SystemZ -XCore" PYTHON_TARGETS="python2_7" 0 KiB
[ebuild     U  ] sys-apps/texinfo-6.3::gentoo [6.1::gentoo] USE="nls -static" 0 KiB
[ebuild  rR    ] gnome-base/gvfs-1.30.4::gentoo  USE="cdda gtk http ios udev -afp -archive -bluray -fuse -gnome-keyring -gnome-online-accounts -google -gphoto2 -mtp -nfs -policykit -samba -systemd {-test} -udisks -zeroconf" 0 KiB
[ebuild     U  ] net-libs/webkit-gtk-2.16.4:4/37::gentoo [2.16.3:4/37::gentoo] USE="(X) egl geolocation gstreamer introspection jit nsplugin opengl spell webgl (-aqua) -coverage -doc -gles2 -gnome-keyring -libnotify {-test} -wayland" 0 KiB
[ebuild  rR    ] sys-power/upower-pm-utils-0.9.23-r2::gentoo  USE="introspection ios" 0 KiB

Total: 34 packages (12 upgrades, 12 new, 10 reinstalls), Size of downloads: 0 KiB

The following packages are causing rebuilds:

  (dev-ml/ocaml-ctypes-0.12.0:0/0.12.0::gentoo, ebuild scheduled for merge) causes rebuilds for:
    (sys-devel/llvm-3.9.1-r1:0/3.9.1::gentoo, ebuild scheduled for merge)
  (app-pda/libplist-2.0.0:0/3.1.0::gentoo, ebuild scheduled for merge) causes rebuilds for:
    (app-pda/libimobiledevice-1.2.0:0/6::gentoo, ebuild scheduled for merge)
    (sys-power/upower-pm-utils-0.9.23-r2:0/0::gentoo, ebuild scheduled for merge)
    (app-pda/ifuse-1.1.3:0/0::gentoo, ebuild scheduled for merge)
    (app-pda/libusbmuxd-1.0.9:0/2::gentoo, ebuild scheduled for merge)
    (gnome-base/gvfs-1.30.4:0/0::gentoo, ebuild scheduled for merge)

!!! The following installed packages are masked:
- media-fonts/ttf-bitstream-vera-1.10-r3::gentoo (masked by: package.mask)
/usr/portage/profiles/package.mask:
# Pacho Ramos <pacho@gentoo.org> (14 Jun 2017)
# Deprecated in favor of media-fonts/dejavu since many years ago, see bug
# #282754. Removal in a month.

- net-im/skype-4.3.0.37-r6::gentoo (masked by: package.mask)
/usr/portage/profiles/package.mask:
# Raymond Jennings <shentino@gmail.com> (11 Jun 2017)
# Upstream announced EOL effective July 2017.
# Depends on qt4 which is being deprecated.
# Possible alternative is skypeforlinux,
# which uses the same account information but has different features.
# See bug #620722 and bug #608174.

For more information, see the MASKED PACKAGES section in the emerge
man page or refer to the Gentoo Handbook.


Would you like to merge these packages? [Yes/No] 

>>> Verifying ebuild manifests
>>> Running pre-merge checks for sys-boot/grub-0.97-r16
 * To avoid automounting and auto(un)installing with /boot,
 * just export the DONT_MOUNT_BOOT variable.

 * Your boot partition was not mounted at /boot, so it will be automounted for you.
 * Files will be installed there for grub to function correctly.
>>> Running pre-merge checks for cross-armv6j-hardfloat-linux-gnueabi/glibc-2.23-r4
>>> Running pre-merge checks for www-client/google-chrome-59.0.3071.109
>>> Running pre-merge checks for sys-devel/llvm-3.9.1-r1
 * Checking for at least 2400 MiB disk space at "/var/tmp/portage/sys-devel/llvm-3.9.1-r1/temp"  [ ok ]
>>> Running pre-merge checks for net-libs/webkit-gtk-2.16.4

>>> Emerging (1 of 34) dev-ml/topkg-0.9.0::gentoo
 * topkg-0.9.0.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                       [ ok ]
>>> Unpacking source...
>>> Unpacking topkg-0.9.0.tar.gz to /var/tmp/portage/dev-ml/topkg-0.9.0/work
>>> Source unpacked in /var/tmp/portage/dev-ml/topkg-0.9.0/work
>>> Preparing source in /var/tmp/portage/dev-ml/topkg-0.9.0/work/topkg-0.9.0 ...
>>> Source prepared.
/etc/portage/bashrc: line 2: epatch_user: command not found
>>> Configuring source in /var/tmp/portage/dev-ml/topkg-0.9.0/work/topkg-0.9.0 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/dev-ml/topkg-0.9.0/work/topkg-0.9.0 ...
No such package: result
File "src/topkg_result.ml", line 7, characters 5-11:
Error: Unbound module Result
File "src/topkg_log.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_os.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_vcs.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_conf.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_fexts.ml", line 22, characters 16-40:
Error: Unbound module Topkg_conf
Hint: Did you mean Topkg_cmd?
File "src/topkg_codec.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_opam.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_test.ml", line 23, characters 2-13:
Error: Unbound module Topkg_codec
Hint: Did you mean Topkg_cmd?
File "src/topkg_install.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_build.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_distrib.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_publish.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_pkg.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_ipc.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg_main.ml", line 7, characters 5-17:
Error: Unbound module Topkg_result
File "src/topkg.ml", line 9, characters 8-20:
Error: Unbound module Topkg_result
File "./pkg/pkg.ml", line 29, characters 5-10:
Error: Unbound module Topkg
 * ERROR: dev-ml/topkg-0.9.0::gentoo failed (compile phase):
 *   (no error message)
 * 
 * Call stack:
 *     ebuild.sh, line 115:  Called src_compile
 *   environment, line 374:  Called die
 * The specific snippet of code:
 *       ocaml pkg/pkg.ml build --pkg-name ${PN} || die
 * 
 * If you need support, post the output of `emerge --info '=dev-ml/topkg-0.9.0::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-ml/topkg-0.9.0::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/dev-ml/topkg-0.9.0/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-ml/topkg-0.9.0/temp/environment'.
 * Working directory: '/var/tmp/portage/dev-ml/topkg-0.9.0/work/topkg-0.9.0'
 * S: '/var/tmp/portage/dev-ml/topkg-0.9.0/work/topkg-0.9.0'

>>> Failed to emerge dev-ml/topkg-0.9.0, Log file:

>>>  '/var/tmp/portage/dev-ml/topkg-0.9.0/temp/build.log'




Comment 1


Ken Rose





          2017-06-29 00:33:46 UTC
        

Created attachment 478320 [details]
/var/tmp/portage/dev-ml/topkg-0.9.0/temp/build.log




Comment 2


Alexis Ballier






          2017-07-01 15:59:26 UTC
        

> No such package: result

but it depends on it and I don't see it in your list; didnt you put this in package.provided or something ?




Comment 3


Alexis Ballier






          2017-07-01 16:04:19 UTC
        

cc'ing portage team just in case

I've never been able to isolate a test case but this might be one:
dev-ml/result (r)deps on dev-lang/ocaml:=
dev-ml/topkg (r)deps on result and (r)deps on dev-lang/ocaml:=

portage seems to be able to order topkg *before* result when ocaml changes subslot









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

