Title: 673658 – app-crypt/keybase should RDEPEND on app-crypt/kbfs
URL: https://bugs.gentoo.org/show_bug.cgi?id=673658

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 673658
app-crypt/keybase should RDEPEND on app-crypt/kbfs
Last modified: 2019-09-17 16:48:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 673658 
      - app-crypt/keybase should RDEPEND on app-crypt/kbfs


Summary:
app-crypt/keybase should RDEPEND on app-crypt/kbfs
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Nicolas Bock








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-12-23 23:06 UTC by Bernd





      Modified:
    
2019-09-17 16:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



mgorny









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Bernd





          2018-12-23 23:06:08 UTC
        

As the summary says... Shouldn't keybase RDEPEND on kbfs? Currently it DEPENDs on it, but the /usr/bin/run_keybase binary, shipped with keybase to (re)start the service tries to start/stop the kbfs service as well. So after a depclean, when kbfs get's removed this fails.


Portage 2.3.51 (python 3.6.5-final-0, default/linux/amd64/17.0/systemd, gcc-7.3.0, glibc-2.27-r6, 4.19.10-gentoo-0 x86_64)
=================================================================
System uname: Linux-4.19.10-gentoo-0-x86_64-AMD_FX-tm-8350_Eight-Core_Processor-with-gentoo-2.6
KiB Mem:    16322796 total,   1299704 free
KiB Swap:    4194300 total,   3626256 free
Head commit of repository gentoo-git: 8f9801b5427de30838519576475675fa712884ff

Head commit of repository cg: c19250e4c82b541bd538c49a132099aed08138ac

Head commit of repository games-overlay: b42da1642d8e2756f8c2ce5b4b6b68119392cf58

Head commit of repository dracwyrm: 7bd388189e0d5bd8e3b0507004972277f58e0961

Timestamp of repository R_Overlay: Thu, 20 Dec 2018 05:23:51 +0000
Head commit of repository R_Overlay: c305f6f80eca6ed92f03d91346fff9d1dc3c0ed4

Timestamp of repository dotnet: Mon, 10 Dec 2018 22:11:18 +0000
Head commit of repository dotnet: 26d79e6034db00dd8240f551a95c9748c1eb3834

Timestamp of repository gamerlay: Thu, 13 Dec 2018 23:43:47 +0000
Head commit of repository gamerlay: dadf172386e33c77241407a6be56f4a690f1271b

Head commit of repository niftyled: 214aa7cdd5a2b101e9ee1661a5de49a97a3d8b59

Timestamp of repository octave: Fri, 28 Sep 2018 00:34:44 +0000
Head commit of repository octave: e87055cc2cd1efc2ed1d228ff5b2ab084c0cbcaa

Timestamp of repository steam-overlay: Mon, 03 Dec 2018 21:43:54 +0000
Head commit of repository steam-overlay: 512103e56aef51f78b7bc89734b942ca706cd224

Timestamp of repository toolchain: Sun, 09 Dec 2018 20:43:55 +0000
Head commit of repository toolchain: b205f99a57a6684250f5ceac44cb71fb93dbe18c

Head commit of repository enlightenment-live: c6b1148794bf50e4649f16dc6017e975dc454a92

Head commit of repository enlightenment-niifaq: 9f7aceae7657aca3fac480b6bf32151d0a183b09

Head commit of repository qt: e46756c9970782657cbeb29edb19486a29f9f6d8

Head commit of repository science: f714069dc169b3855b38eddb82d6f85f9363589f

Timestamp of repository fem-overlay: Mon, 10 Dec 2018 22:12:14 +0000
Head commit of repository fem-overlay: 2a6d7f5d930c4f528313ba58179164acaf280586

Timestamp of repository pentoo: Thu, 20 Dec 2018 03:43:51 +0000
Head commit of repository pentoo: f413cb479c1e75a8053c39f8aed126e5189fad6d

Timestamp of repository gentoo: Thu, 20 Dec 2018 13:44:47 +0000
Head commit of repository gentoo: ec42c33227d58aeb8507883dd1037d6b0b4fa147

Head commit of repository waebbl: b5a63e1cc2bdb5545afde6d84cdba6fb42d35254

sh bash 4.4_p12
ld GNU ld (Gentoo 2.30 p5) 2.30.0
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.26.1-r1::gentoo
dev-lang/python:          2.7.15::gentoo, 3.6.5::gentoo, 3.7.0::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.69-r4::gentoo
sys-devel/automake:       1.15.1-r2::gentoo
sys-devel/binutils:       2.30-r4::gentoo
sys-devel/gcc:            7.3.0-r3::gentoo
sys-devel/gcc-config:     2.0::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.19::gentoo (virtual/os-headers)
sys-libs/glibc:           2.27-r6::gentoo
Repositories:

gentoo-git
    location: /mnt/data/code/github/portage-overlays/gentoo-git
    sync-type: git
    sync-uri: git@github.com:waebbl/gentoo.git
    masters: gentoo
    priority: -1000

cg
    location: /mnt/data/code/github/portage-overlays/cg
    sync-type: git
    sync-uri: https://github.com/waebbl/cg.git
    masters: gentoo
    priority: 30

games-overlay
    location: /mnt/data/code/github/portage-overlays/games-overlay
    sync-type: git
    sync-uri: git://github.com/waebbl/games-overlay.git
    masters: gentoo
    priority: 30

dracwyrm
    location: /mnt/data/code/github/portage-overlays/dracwyrm-gentoo-ebuilds
    sync-type: git
    sync-uri: git://github.com/waebbl/dracwyrm-gentoo-ebuilds.git
    masters: gentoo
    priority: 40

R_Overlay
    location: /mnt/data/code/github/portage-overlays/R_Overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/R_Overlay.git
    masters: gentoo
    priority: 50

dotnet
    location: /var/db/repos/dotnet
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/dotnet.git
    masters: gentoo
    priority: 50

gamerlay
    location: /var/db/repos/gamerlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gamerlay.git
    masters: gentoo
    priority: 50

niftyled
    location: /mnt/data/code/github/portage-overlays/niftyledGentoo
    sync-type: git
    sync-uri: https://github.com/waebbl/niftyledGentoo.git
    masters: gentoo
    priority: 50

octave
    location: /var/db/repos/octave
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/octave.git
    masters: gentoo
    priority: 50

steam-overlay
    location: /var/db/repos/steam-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/steam-overlay.git
    masters: gentoo
    priority: 50

toolchain
    location: /var/db/repos/toolchain
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/toolchain.git
    masters: gentoo
    priority: 50

enlightenment-live
    location: /mnt/data/code/github/portage-overlays/enlightenment-live
    sync-type: git
    sync-uri: git://github.com/waebbl/enlightenment-live.git
    masters: gentoo
    priority: 60

enlightenment-niifaq
    location: /mnt/data/code/github/portage-overlays/enlightenment.overlay
    sync-type: git
    sync-uri: git://github.com/waebbl/enlightenment.overlay.git
    masters: gentoo
    priority: 60

qt
    location: /mnt/data/code/github/portage-overlays/qt
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/qt.git
    masters: gentoo
    priority: 60

science
    location: /mnt/data/code/github/portage-overlays/sci
    sync-type: git
    sync-uri: git://github.com/waebbl/sci.git
    masters: gentoo
    priority: 60

fem-overlay
    location: /var/db/repos/fem-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/fem-overlay.git
    masters: gentoo
    priority: 70

pentoo
    location: /mnt/data/code/github/portage-overlays/pentoo
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/pentoo.git
    masters: gentoo
    priority: 90

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo.git
    priority: 99

waebbl
    location: /mnt/data/code/github/portage-overlays/waebbl
    sync-type: git
    sync-uri: https://github.com/waebbl/waebbl-gentoo.git
    masters: gentoo
    priority: 100

Installed sets: @3D, @XWindow, @adm-tools, @android, @base, @benchmarking, @desktop, @dev-tools, @doc-tools, @docs, @e, @emacs, @esteam, @fonts, @fun, @games, @gis, @infinity, @kde, @keep, @kernel-dep, @langs, @lxqt-live, @media, @my_latex, @netz, @nifty, @nvidia, @office, @python, @qt, @sci, @sec, @server, @steam, @themes, @vcs, @virt, @xfce, @zip
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=bdver2 -mprefer-avx128 -mvzeroupper -frecord-gcc-switches"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/grs/systems.conf /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -march=bdver2 -mprefer-avx128 -mvzeroupper -frecord-gcc-switches"
DISTDIR="/mnt/data/download/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps n --complete-graph --keep-going"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe -march=bdver2 -mprefer-avx128 -mvzeroupper -frecord-gcc-switches"
FEATURES="assume-digests binpkg-logs buildsyspkg candy cgroup clean-logs config-protect-if-modified distlocks downgrade-backup ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch preserve-libs protect-owned sandbox sfperms sign split-elog split-log strict strict-keepdir unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe -march=bdver2 -mprefer-avx128 -mvzeroupper -frecord-gcc-switches"
GENTOO_MIRRORS="http://ftp.halifax.rwth-aachen.de/gentoo/ 	ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo 	http://ftp.uni-erlangen.de/pub/mirrors/gentoo 	http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ 	http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ 	http://mirror.netcologne.de/gentoo/ 	http://mirror.eu.oneandone.net/linux/distributions/gentoo/gentoo/"
INSTALL_MASK="/usr/share/locale -/usr/share/locale/de* -/usr/share/locale/en*"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--defsym=__gentoo_check_ldflags__=0"
MAKEOPTS="-j1"
PKGDIR="/mnt/data/download/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X acl alsa amd64 branding bzip2 cli crypt cxx dbus dri egl fortran gdbm gif gnome iconv ipv6 jpeg kde libinput libtirpc multilib ncurses networkmanager nls nptl offensive ogg opengl openmp pam pcre pic png policykit postgres pulseaudio python qt5 readline seccomp ssl svg systemd tcpd theora threads tiff udev unicode vorbis wayland x264 x265 xattr zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon plan sheets stage words" CAMERAS="*" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx f16c fma3 fma4 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop" ELIBC="glibc" ENLIGHTENMENT_MODULES="appmenu clock conf conf-applications conf-bindings conf-dialogs conf-display conf-interaction conf-intl conf-menus conf-paths conf-performance conf-randr conf-shelves conf-theme conf-window-manipulation conf-window-remembers connman cpufreq everything fileman fileman-opinfo gadman geolocation ibar ibox lokker mixer msgbus music-control notification packagekit pager pager-plain quickaccess shot start syscon sysinfo systray tasks teamwork temperature tiling time winlist wizard xkbswitch" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc multiboot qemu" INPUT_DEVICES="evdev libinput" KERNEL="linux" L10N="de de-DE en en-GB en-US" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="nlpsolver" LLVM_TARGETS="AArch64 ARM BPF NVPTX" NGINX_MODULES_HTTP="access addition auth_basic auth_pam autoindex browser cache_purge charset dav dav_ext echo empty_gif fancyindex fastcgi flv geo geoip geoip2 gunzip gzip headers_more image_filter javascript limit_conn limit_req map memc memcached metrics mp4 naxsi proxy push_stream realip referer rewrite scgi secure_link slowfs_cache split_clients ssi sticky stub_status sub upload_progress userid uwsgi xslt" NGINX_MODULES_STREAM="access geo geoip geoip2 javascript limit_conn map return split_clients" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" POSTGRES_TARGETS="postgres10" PYTHON_SINGLE_TARGET="python3_6" PYTHON_TARGETS="python2_7 python3_6 python3_7" QEMU_SOFTMMU_TARGETS="aarch64 arm i386 sparc sparc64 x86_64" QEMU_USER_TARGETS="aarch64 aarch64_be arm armeb i386 sparc sparc32plus sparc64 x86_64" RUBY_TARGETS="ruby24" USERLAND="GNU" VIDEO_CARDS="dummy fbdev nvidia vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Michał Górny









          2019-09-08 18:22:32 UTC
        

Restricting spam.




Comment 3


Nicolas Bock






          2019-09-17 12:55:58 UTC
        

More recent versions of the keybase client come with kbfs packaged in the client sources. If you are still experiencing this issue, could you please upgrade your keybase client to the most recent version (keybase-4.4.2) and try again? Thanks!




Comment 4


Bernd





          2019-09-17 16:38:22 UTC
        

Thanks for you reply. 
The most recent version, I currently have in portage (last sync on saturday or sunday) is 3.0.0, and, of course, the live ebuild.




Comment 5


Bernd





          2019-09-17 16:48:16 UTC
        

Just recompiled the 3.0.0 version (last emerge was in June) and it also works if it's called with -g, i.e. not to use the gui. So this bug looks like it's resolved from my point of view.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

