Title: 103236 – media-video/mjpegtools-1.6.2-r4 fails to emerge, libquicktime problem
URL: https://bugs.gentoo.org/show_bug.cgi?id=103236

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 103236
media-video/mjpegtools-1.6.2-r4 fails to emerge, libquicktime problem
Last modified: 2005-10-16 10:44:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 103236 
      - media-video/mjpegtools-1.6.2-r4 fails to emerge, libquicktime problem


Summary:
media-video/mjpegtools-1.6.2-r4 fails to emerge, libquicktime problem
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Television related Applications in Gentoo's Portage








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-08-21 06:46 UTC by tim





      Modified:
    
2005-10-16 10:44 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



chris
dan.dickey
media-video
pez









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Fix for incorrect quicktime include

              (mjpegtools-1.6.2-quicktime.patch,354 bytes,
                patch)

            
2005-08-28 03:25 UTC,

            Åsmund Grammeltvedt




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


tim





          2005-08-21 06:46:33 UTC
        

media-video/mjpegtools-1.6.2-r4 fails to emerge with libquicktime-0.9.7:

 i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I.. -I/usr/include
-DG_LOG_DOMAIN=\"lavtools\" -DLAVPLAY_VERSION=\"1.6.2\" -I/usr/include
-I/usr/include/lqt -I /usr/X11R6/include -I../utils -I/usr/include/gtk-1.2
-I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/include/jpeg-mmx
-march=pentium-m -O3 -pipe -mfpmath=sse -msse -msse2 -mmmx -fomit-frame-pointer
-funroll-loops -fprefetch-loop-arrays -mno-sse2 -MT lav_io.lo -MD -MP -MF
.deps/lav_io.Tpo -c lav_io.c  -fPIC -DPIC -o .libs/lav_io.o
lav_io.c:39:33: quicktime/quicktime.h: No such file or directory
lav_io.c:40:27: quicktime/lqt.h: No such file or directory
lav_io.c: In function `lav_open_output_file':
lav_io.c:364: warning: assignment makes pointer from integer without a cast
lav_io.c:367: error: `QUICKTIME_MJPA' undeclared (first use in this function)
lav_io.c:367: error: (Each undeclared identifier is reported only once
lav_io.c:367: error: for each function it appears in.)
lav_io.c:367: error: `QUICKTIME_JPEG' undeclared (first use in this function)
lav_io.c:372: error: `QUICKTIME_RAW' undeclared (first use in this function)
lav_io.c:372: error: `QUICKTIME_TWOS' undeclared (first use in this function)
lav_io.c: In function `lav_video_compressor':
lav_io.c:679: warning: return makes pointer from integer without a cast
lav_io.c: In function `lav_open_input_file':

quicktime.h is not located in /usr/lib/quicktime, but in /usr/lib/lqt



Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


Åsmund Grammeltvedt





          2005-08-28 03:25:10 UTC
        

Created attachment 67055 [details, diff]
Fix for incorrect quicktime include

Actually, it's /usr/include/lqt. I got the same error, but the attached patch
allows mjpegtools to compile.




Comment 2


Dan A. Dickey





          2005-09-01 06:35:14 UTC
        

It looks like the mjpegtools was written more against the quicktime4linux 
package than libquicktime.  libquicktime looks newer/better than 
quicktime4linux.  However, the mjpegtools-1.6.2-libquicktime094.patch seems to 
do the wrong thing.  It changes the #include <quicktime.h> in lav_io.c to 
#include <quicktime/quicktime.h>.  libquicktime actually installs quicktime.h 
to the /usr/include/lqt directory, but then apparently also tries to 
symlink /usr/include/quicktime to /usr/include/lqt.  This last part fails in 
libquicktime.  I'm not ebuild savvy enough to know why.  But I thought I'd add 
this information and hopefully someone can fix it properly. 
 
Ouch.  Even odder (curiouser?). 
I just re-emerged libquicktime and the symlink is now in place.  Perhaps when I 
upgraded from 0.9.3-r1 to 0.9.7 the first time, something went wrong.  Perhaps 
in the autoclean of 0.9.3-r1 the symlink went away.  Don't know. 
 




Comment 3


Chris Smith





          2005-10-10 15:24:23 UTC
        

Although I don't have the exact same failure as the person who opened bug  
107176, I have this same libquicktime issue with transcode, which causes the 
same end result. 




Comment 4


CJ Kucera





          2005-10-12 11:13:02 UTC
        

I'm not sure that the symlink thing is necessarily the way to go.  I'm not
familiar enough to say with certainty, but it doesn't look like libquicktime has
any business being in /usr/include/quicktime:

root@arrakis:~# qpkg -f /usr/include/quicktime 
media-libs/quicktime4linux *
media-video/cinelerra-cvs *
root@arrakis:~# qpkg -f /usr/include/lqt/
media-libs/libquicktime *

If mjpegtools is attempting to find lqt.h it should probably be looking in
/usr/include/lqt right now...




Comment 5


Diego Elio Pettenò (RETIRED)






          2005-10-15 12:44:35 UTC
        

Newer libquicktime should fix the problem. 




Comment 6


Chris Smith





          2005-10-16 10:44:24 UTC
        

>Newer libquicktime should fix the problem. 
 
A note: It doesn't fix the problem with transcode. Transcode still needs the 
patch I posted  in Bug 107176. 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

