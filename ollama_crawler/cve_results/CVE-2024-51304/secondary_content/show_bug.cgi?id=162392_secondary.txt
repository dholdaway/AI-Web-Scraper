Title: 162392 – media-sound/lame-3.97 causes system freeze
URL: https://bugs.gentoo.org/show_bug.cgi?id=162392

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 162392
media-sound/lame-3.97 causes system freeze
Last modified: 2007-07-29 09:13:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 162392 
      - media-sound/lame-3.97 causes system freeze


Summary:
media-sound/lame-3.97 causes system freeze
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-16 18:17 UTC by Melendro





      Modified:
    
2007-07-29 09:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



stian









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Melendro





          2007-01-16 18:17:09 UTC
        

I was having a problem since I migrated to gcc-4 when trying to convert the sound of every movie to mp3. Linux got completely frozen at a random moment (sometimes at 5%, sometimes at 90%, sometimes worked, even in the same movie). It happened when using lame or any other program using lame (mencoder and ffmpeg).

I didn't file a bug because I didn't know the cause and I was not able to give useful information, but after trying everything, the removal of "-O2" from make.conf when emerging lame solved it.

I'm not sure if the problem is with lame or with gcc, but I decided to open this bug just in case someone has the same problem and don't know what to do.

Reproducible: Sometimes

Steps to Reproduce:
1. Emerge lame with -O2 in CFLAGS
2. Convert a movie to mp3 sound using mencoder, ffmpeg or other program using lame
3. Linux get completely frozen




Comment 1


Jakub Moc (RETIRED)






          2007-01-16 19:02:15 UTC
        

Not gcc porting.




Comment 2


Jakub Moc (RETIRED)






          2007-01-16 19:03:13 UTC
        

Reopen with some useful information, like ebuild versions involved, emerge --info,  steps to reproduce the problem etc.
 




Comment 3


Melendro





          2007-01-16 20:50:02 UTC
        

[ebuild   R   ] media-sound/lame-3.97  USE="-debug -gtk -mp3rtp" 0 kB
[ebuild   R   ] sys-devel/gcc-4.1.1-r3  USE="fortran gtk nls (-altivec) -bootstrap -build -doc -gcj (-hardened) -ip28 -ip32r10k -mudflap (-multilib) -multislot (-n32) (-n64) -nocxx -objc -objc++ -objc-gc -test -vanilla" 0 kB

But it happens with all versions of gcc and lame since the first version of gcc-4 went stable.

$ emerge --info
Portage 2.1.1-r2 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.4-r4, 2.6.18-gentoo-r6 i686)
=================================================================
System uname: 2.6.18-gentoo-r6 i686 AMD Athlon(tm) XP 1800+
Gentoo Base System version 1.12.6
Last Sync: Tue, 16 Jan 2007 10:50:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon-xp -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://darkstar.ist.utl.pt/gentoo/ http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
LINGUAS="en es"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X a52 aac acpi alsa alsa_cards_ali5451 alsa_cards_als4000 alsa_cards_atiixp alsa_cards_atiixp-modem alsa_cards_bt87x alsa_cards_ca0106 alsa_cards_cmipci alsa_cards_emu10k1x alsa_cards_ens1370 alsa_cards_ens1371 alsa_cards_es1938 alsa_cards_es1968 alsa_cards_fm801 alsa_cards_hda-intel alsa_cards_intel8x0 alsa_cards_intel8x0m alsa_cards_maestro3 alsa_cards_trident alsa_cards_usb-audio alsa_cards_via82xx alsa_cards_via82xx-modem alsa_cards_ymfpci alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol amr apache2 arts artswrappersuid asf audiofile berkdb bitmap-fonts bluetooth bzip2 cairo cdparanoia cdr clamav cli cracklib crypt cups curl dbus dhcp dlloader dri dvd dvdr eds elibc_glibc emboss encode esd exif fam ffmpeg firefox flac fortran ftp gdbm gif gimpprint glut gphoto2 gpm gstreamer gtk hal iconv input_devices_keyboard input_devices_mouse irmc isdnlog java javascript jpeg kde kdeenablefinal kernel_linux libcaca libg++ linguas_en linguas_es lm_sensors mad mailwrapper mikmod mime mmx mmxext mng mp3 mpeg musicbrainz ncurses network nls nptl nptlonly nsplugin ogg opengl oss pam pcre pdf perl png ppds pppd python qt3 quicktime rdesktop readline real reflection rtc samba scanner sdl session sms spell spl sse ssl subtitles tcpd threads tiff timidity truetype truetype-fonts type1-fonts udev unicode usb userland_GNU vcd video_cards_ati video_cards_fbdev video_cards_radeon video_cards_vesa vorbis wifi win32codecs wma wxwindows xine xml xorg xpm xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 4


Luca Barbato






          2007-01-16 21:11:01 UTC
        

Please provide a full emerge --info and try a memtest just to factor out possible hardware issues.






Comment 5


Melendro





          2007-01-17 20:50:47 UTC
        

I already provided the full emerge --info.

I also did a memtest some months ago to see if this was the problem, but no problems was detected by memtest.

I also have some news: now that I have lame compiled without "-O2" it allows me to convert 3 or 4 movies, the next one freezes the system again. I have to reboot after converting 3 movies to be able to convert the next one.





Comment 6


Stian Skjelstad





          2007-04-17 19:45:54 UTC
        

Sounds more like a hardware issue, than software. Just that lame is able to trigged it. Do you have access to any other gentoo hosts with a compatible cpu that you have compiled lame for. If so, try to run lame on that host and see if you get the same hang issues. (An user application should not be able to freeze the system, unless is plays with hardware like Xorg for instance)




Comment 7


Samuli Suominen (RETIRED)






          2007-07-29 09:13:46 UTC
        

No freezes here, inpossible to work with provided information.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

