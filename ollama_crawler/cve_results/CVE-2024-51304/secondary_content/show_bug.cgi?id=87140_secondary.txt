Title: 87140 – not finding libstdc++.la
URL: https://bugs.gentoo.org/show_bug.cgi?id=87140

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 87140
not finding libstdc++.la
Last modified: 2005-04-02 20:25:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 87140 
      - not finding libstdc++.la


Summary:
not finding libstdc++.la
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        All
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-29 10:01 UTC by alex f





      Modified:
    
2005-04-02 20:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


alex f





          2005-03-29 10:01:32 UTC
        

media-libs/faad2-2.0-r5 fails with:

/bin/sh ../libtool --mode=link i686-pc-linux-gnu-g++ -O2 -march=pentium-m -O2 -pipe   -o faad  main.o audio.o getopt.o ../libfaad/libfaad.la ../common/mp4ff/libmp4ff.la -lmp4v2 -lmp4v2 
mkdir .libs
libtool: link: cannot find the library `/usr/lib/gcc-lib/i686-pc-linux-gnu/3.4.3-20050110/libstdc++.la'
make[2]: *** [faad] Fehler 1
make[2]: Leaving directory `/var/tmp/portage/faad2-2.0-r5/work/faad2/frontend'
make[1]: *** [all-recursive] Fehler 1
make[1]: Leaving directory `/var/tmp/portage/faad2-2.0-r5/work/faad2'
make: *** [all] Fehler 2

This seems to be a known bug with lots of duplicates. However running 

 # fix_libtool_files.sh 3.4.3 or

 # fix_libtool_files.sh 3.4.3.20050110

doesn't fix it and I can't find another solution in the comments. Comment #16 from Bug #84324 doesn't mention what was actually fixed. Am glad to provide more info if needed.

# fix_libtool_files.sh 3.4.3.20050110
 * Scanning libtool files for hardcoded gcc library paths...
 *   [1/6] Scanning /lib ...
 *   [2/6] Scanning /usr/lib ...
 *     FIXING: /usr/lib/python2.3/site-packages/_lcms.la ...[]
 *     FIXING: /usr/lib/libdb_cxx-4.2.la ...[]
 *     FIXING: /usr/lib/gtk-2.0/2.4.0/loaders/libpixbufloader-tiff.la ...[]
 *     FIXING: /usr/lib/libtiff.la ...[]
 *     FIXING: /usr/lib/libimlib-tiff.la ...[]
 *     FIXING: /usr/lib/libImlib.la ...[]
 *     FIXING: /usr/lib/gedit-2/plugins/libspell.la ...[]
 *     FIXING: /usr/lib/libaspell.la ...[]
 *     FIXING: /usr/lib/libpspell.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/email-filter.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/tex-filter.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/sgml-filter.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/context-filter.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/nroff-filter.la ...[]
 *     FIXING: /usr/lib/aspell-0.60/texinfo-filter.la ...[]
 *     FIXING: /usr/lib/gstreamer-0.8/libgstmodplug.la ...[]
 *     FIXING: /usr/lib/gstreamer-0.8/libgstffmpeg.la ...[]
 *     FIXING: /usr/lib/enchant/libenchant_aspell.la ...[]
 *     FIXING: /usr/lib/enchant/libenchant_ispell.la ...[]
 *     FIXING: /usr/lib/enchant/libenchant_myspell.la ...[]
 *     FIXING: /usr/lib/imlib2/loaders/tiff.la ...[]
 *     FIXING: /usr/lib/libSDL.la ...[]
 *     FIXING: /usr/lib/libmp4v2.la ...[]
 *     FIXING: /usr/lib/libid3.la ...[]
 *     FIXING: /usr/lib/directfb-0.9.22/systems/libdirectfb_sdl.la ...[]
 *     FIXING: /usr/lib/directfb-0.9.22/inputdrivers/libdirectfb_sdlinput.la ...
[]
 *     FIXING: /usr/lib/libmusicbrainz.la ...[]
 *     FIXING: /usr/lib/libusbpp.la ...[]
 *     FIXING: /usr/lib/libgmpxx.la ...[]
 *   [3/6] Scanning /opt/sun-jdk-1.4.2.07/jre/lib ...
 *   [4/6] Scanning /usr/games/lib ...
 *   [5/6] Scanning /usr/i686-pc-linux-gnu/lib ...
 *   [6/6] Scanning /usr/local/lib ...

# equery list gcc
[ Searching for package 'gcc' in all categories among: ]
 * installed packages
[I--] [  ] sys-devel/gcc-config-1.3.10-r1 (0)
[I--] [  ] sys-devel/gcc-3.4.3.20050110-r1 (3.4)

# genlop gcc
 * sys-devel/gcc

     Wed Dec 29 16:09:50 2004 >>> sys-devel/gcc-3.4.3-r1
     Fri Dec 31 16:35:39 2004 >>> sys-devel/gcc-3.4.3-r1
     Tue Jan 25 13:55:39 2005 >>> sys-devel/gcc-3.4.3.20050110
     Mon Mar 21 20:44:20 2005 >>> sys-devel/gcc-3.4.3.20050110-r1
     Tue Mar 29 14:44:28 2005 >>> sys-devel/gcc-3.4.3.20050110-r1

gcc-config doesn't show the -r1 part of $PV. Should it?

# gcc-config -l
[1] i686-pc-linux-gnu-3.4.3-20050110 *
[2] i686-pc-linux-gnu-3.4.3-20050110-hardened
[3] i686-pc-linux-gnu-3.4.3-20050110-hardenednopie
[4] i686-pc-linux-gnu-3.4.3-20050110-hardenednossp

# emerge info
Portage 2.0.51.19 (default-linux/x86/2004.3, gcc-3.4.3-20050110, glibc-2.3.4.20050125-r1, 2.6.11.6 i686)
=================================================================
System uname: 2.6.11.6 i686 Intel(R) Pentium(R) M processor 1.50GHz
Gentoo Base System version 1.6.10
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Feb 22 2005, 14:18:28)]
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.7.9-r1, 1.6.3, 1.9.5, 1.4_p6, 1.8.5-r3
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.8.1-r4
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-march=pentium-m -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium-m -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distcc distlocks sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://gentoo.osuosl.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="de_DE@euro"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X X509 aac acpi alsa artworkextra avi bash-completion berkdb bitmap-fonts cdr crypt cups curl dhcp directfb divx4linux dmx dvb dvd dvdr dvdread eds emboss encode ethereal evo faad fam fbcon flac font-server foomaticdb gdbm gif glitz gmail gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gtkhtml guile hal howl imap imlib ipv6 java jce jpeg libcaca libg++ libwww mad maildir matroska mbox mikmod mime mmap mmx mmx2 mng mono motif mozilla moznocompose moznoirc moznomail mozsvg mp3 mpeg ncurses network nls nntp noantlr nobcel nobeanutils nobsh nocommonslogging nocommonsnet nojdepend nojsch nojython nolog4j nooro noregexp norhino noxalan noxerces nptl nptlonly objc oggvorbis opengl pcre pdflib perl pic png pnp python quicktime readline real rtc ruby samba sdl skey softmmu speex spell sse sse2 ssl svg svga symlink tcpd theora threads tiff truetype truetype-fonts trusted type1-fonts ucs2 unicode xml2 xv xvid zlib video_cards_radeon linguas_de"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS




Comment 1


SpanKY






          2005-03-29 15:34:53 UTC
        

what does `ls -d /usr/lib/gcc*/*/*` show ?




Comment 2


alex f





          2005-03-29 15:42:37 UTC
        

It shows

  /usr/lib/gcc/i686-pc-linux-gnu/3.4.3-20050110

but the ebuilds failing, complain about not finding

  /usr/lib/gcc-lib/i686-pc-linux-gnu/3.4.3-20050110/libstdc++.la

the 3rd subdirectory is named gcc/ not gcc-lib/




Comment 3


SpanKY






          2005-03-29 15:45:03 UTC
        

do you have /usr/lib/gcc and /usr/lib/gcc-lib ?




Comment 4


alex f





          2005-03-29 15:49:43 UTC
        

~ $ ll /usr/lib/gcc
insgesamt 48
drwxr-xr-x   3 root root  4096 29. Dez 16:09 ./
drwxr-xr-x  83 root root 40960 29. M




Comment 5


alex f





          2005-03-29 15:49:43 UTC
        

~ $ ll /usr/lib/gcc
insgesamt 48
drwxr-xr-x   3 root root  4096 29. Dez 16:09 ./
drwxr-xr-x  83 root root 40960 29. Mär 21:35 ../
drwxr-xr-x   3 root root  4096 21. Mär 20:44 i686-pc-linux-gnu/
~ $ ll /usr/lib/gcc-lib
ls: /usr/lib/gcc-lib: Datei oder Verzeichnis nicht gefunden <-- German for not found
alexf@tosh ~ $ 

Nope, I only have /usr/lib/gcc




Comment 6


SpanKY






          2005-03-29 15:55:46 UTC
        

try `sed -i s:/gcc-lib/:/gcc/:g /usr/lib/*.la` and see if that fixes things




Comment 7


alex f





          2005-03-29 16:27:08 UTC
        

Yes, this fixed it




Comment 8


SpanKY






          2005-04-02 20:25:42 UTC
        

k









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

