Title: 112761 – gentoo-sources 2.6.13-r* and 2.6.14-r1/2 irq errors
URL: https://bugs.gentoo.org/show_bug.cgi?id=112761

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 112761
gentoo-sources 2.6.13-r* and 2.6.14-r1/2 irq errors
Last modified: 2005-11-22 16:37:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 112761 
      - gentoo-sources 2.6.13-r* and 2.6.14-r1/2 irq errors


Summary:
gentoo-sources 2.6.13-r* and 2.6.14-r1/2 irq errors
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       critical
      


Assignee:

x86-kernel@gentoo.org (DEPRECATED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-16 17:09 UTC by VinnieNZ





      Modified:
    
2005-11-22 16:37 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


VinnieNZ





          2005-11-16 17:09:28 UTC
        

When running several of the later releases of gentoo-sources 2.6.13 and
2.6.14-r1 + r2 releases I've had irq errors asking me to add irqpoll to the
kernel params at boot time.  

Someone suggested at the time that 2.6.14 came out that I add pci=routeirq to
the line which resulted in a correctly booting kernel for me, but since
2.6.14-r1 and r2 have been released this same fix has not worked.  Adding
irqpoll option results in a booting pc but it is unstable.

Up until the later realeases of 2.6.13 I had no problems at all with this, and
nothing system wise has changed.  I can still go back to an old kernel and have
it boot fine.

With these IRQ errors, I always seem to get a halt on the 2nd of the drives
found on my ITE controller chip (not hardware raided or anything).

Something somewhere has changed and is causing these problems.  I've also seen
it on two other machines here at work as well - my personal machine is an Athlon
XP on a NForce2 chipset, the ones at work were both P4's on VIA chipsets - so
it's not limited to just me, or my processor type, or motherboard.

Reproducible: Always
Steps to Reproduce:
1. emerge >=gentoo-sources-2.6.13-r3 or emerge >=gentoo-sources-2.6.14-r1
2. make oldconfig
3. make && make modules_install
4. cp and reboot

Actual Results:  
Numerous IRQ errors stating to add irqpoll to the boot options - doing so
results in an unstable system.

Expected Results:  
Boot a working and stable kernel with no boot params required, like the older
versions did.

Portage 2.0.53_rc7 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.6-r0,
2.6.14-gentoo i686)
=================================================================
System uname: 2.6.14-gentoo i686 AMD Athlon(tm) XP 2800+
Gentoo Base System version 1.6.13
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env
/usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer
-fvisibility-inlines-hidden"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy ccache distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.recoil.net.nz/gentoo
http://ftp.citylink.co.nz/gentoo http://planetmirror.com/pub/gentoo
http://mirror.pacific.net.au/linux/Gentoo http://mirror.isp.net.au/ftp/pub/gentoo/"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://firebird/gentoo-portage"
USE="x86 3dnow X alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 cdb cdr
crypt cups curl directfb dts dvd dvdr eds emboss encode esd ethereal exif expat
fam ffmpeg flac foomatic foomaticdb fortran gd gdbm gif glut gmp gphoto2 gpm
gstreamer gtk2 hal idn imagemagick imlib ipv6 java jpeg kde lcms libg++ libwww
lirc mad mikmod mmx mng motif mp3 mpeg mythtv ncurses nls nptl nptlonly odbc ogg
oggvorbis opengl oss pam pcre pdflib perl png ppds python qt quicktime readline
recode samba scanner sdl slang spell sse ssl tcpd tiff truetype truetype-fonts
type1-fonts udev usb vorbis xine xml2 xmms xv xvid zlib userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LINGUAS




AMD AthlonXP 2800+
Gateway GA-7N400 Pro2

As well as 2x late model P4's (not sure of the exact model/speed of CPU) on VIA
chipset MB's (an Asus and a Gigabyte board I believe).




Comment 1


VinnieNZ





          2005-11-22 16:37:42 UTC
        

Fixed this myself - noticed when compiling a Kernel at work there was this option:
CONFIG_IRQBALANCE.

Simply removed this option from my .config file and removed pci=routeirq from
the boot params and now everything works as it should.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

