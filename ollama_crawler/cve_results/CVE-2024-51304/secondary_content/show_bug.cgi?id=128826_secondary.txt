Title: 128826 – bash-completion-20060301 bugged with emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=128826

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 128826
bash-completion-20060301 bugged with emerge
Last modified: 2007-10-19 09:05:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 128826 
      - bash-completion-20060301 bugged with emerge


Summary:
bash-completion-20060301 bugged with emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mike Kelly (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

196354

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-04-04 14:43 UTC by Patrizio Bassi





      Modified:
    
2007-10-19 09:05 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



jakub
ka0ttic
scsichen
shell-tools









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrizio Bassi





          2006-04-04 14:43:17 UTC
        

explain with an example:

su -
[pass]
...

root@blight ~ # emerge xorg-su: cd: ": No such file or directory
-su: cd: ": No such file or directory

xorg-cf-files       xorg-docs           xorg-server         xorg-sgml-doctools  xorg-x11

root@blight ~ # emerge xorg-         

i wrote "emerge xorg" and pressed tab




Comment 1


Jakub Moc (RETIRED)






          2006-04-04 14:54:21 UTC
        

Sorry, not reproducible here w/ latest bash-completion and bash, though I don't understand your steps to reproduce really.

What I tried was

$ emerge xorg<tab>

$ su -
# emerge xorg<tab>

exactly the same result in both cases and no errors.

Reopen with bash-completion and bash versions.





Comment 2


Patrizio Bassi





          2006-04-05 00:24:47 UTC
        

emerge bash bash-co-su: cd: ": No such file or directory
-su: cd: ": No such file or directory

bash-completion         bash-completion-config
root@blight ~ # emerge bash bash-completion bash-completion-config -pv

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] app-shells/bash-3.1_p16  USE="nls -afs -bashlogger -build" 0 kB
[ebuild   R   ] app-shells/bash-completion-20060301  99 kB
[ebuild   R   ] app-shells/bash-completion-config-0.8-r2  106 kB

Total size of downloads: 206 kB

i don't know which other infos i can give you, please ask and i'll try :)

emerge info is useless here.




Comment 3


Jakub Moc (RETIRED)






          2006-04-05 02:20:38 UTC
        

Patrizio, I'm probably dense but I simply fail to understand your steps to reproduce. There's indeed no bash-co-su: ebuild, why it this a bug?




Comment 4


Patrizio Bassi





          2006-04-05 02:34:11 UTC
        

jacub, that's why i filled the bug :)

explain:

$ su -
[pass]

#   <-- now root

# emerge bash-co <press tab>

it adds the "-su" string (su - was the way i became root)

if i login from tty as root
it adds "-bash"

so it seems to add the process using the session.
hope it's clearer than before




Comment 5


Patrizio Bassi





          2006-04-05 02:40:40 UTC
        

i forgot to add that if i write:

emerge --unmerge colo <tab>
result is:

emerge --unmerge colo-su: cd: ": No such file or directory
-su: cd: ": No such file or directory

colo          colorcvs      colorgcc      colorsel      color-theme
color         colordiff     colorschemes  colortail     color-tools

while...is i write:

emerge unmerge  colo <tab>

emerge unmerge colo
color         colordiff     colorgcc      colorschemes


what that means? ihmo it means
1) emerge --COMMANDS are not yet in bash-comp module, but only 
emerge COMMANDS old style
2) it's bugged with all not reconized commands.




Comment 6


Jakub Moc (RETIRED)






          2006-04-05 02:47:24 UTC
        

OK, clear now, but not reproducible at all. Are you perhaps defining some aliases in ~/.bashrc or /etc/profile *before* sourcing bash-completion?




Comment 7


Patrizio Bassi





          2006-04-05 03:03:51 UTC
        

# .bashrc
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

[ -f /etc/profile.d/bash-completion ] && . /etc/profile.d/bash-completion

alias cd..='cd ..'
alias cp='cp -i'
alias df='df -h -x tmpfs -x subfs'
alias ls='ls -F --color=auto'
alias md='mkdir'
alias mv='mv -i'
alias rd='rmdir'

profile is vanilla




Comment 8


Mike Kelly (RETIRED)






          2007-01-11 07:31:02 UTC
        

I can't reproduce this either. If it's still a problem for you, feel free to re-open this bug.




Comment 9


Patrizio Bassi





          2007-01-11 07:53:04 UTC
        

i think i just found the bug.

it's related to overlays.

example:
PORTAGE_OVERLAY="blablabla"

works.

but if you have multiple overlays and you use
PORTAGE_OVERLAY="blablabla"
PORTAGE_OVERLAY="$PORTAGE_OVERLAY  blablabla2"

it will fail.
i suppose the problem is in the parsing.

can you take a look to this?
(ok...i know of layman...sometimes i do things manually)






Comment 10


Mike Kelly (RETIRED)






          2007-01-11 08:03:45 UTC
        

(In reply to comment #9)
> i think i just found the bug.
> 
> it's related to overlays.
> 
> example:
> PORTAGE_OVERLAY="blablabla"

I'm assuming you mean PORTDIR_OVERLAY.

> works.
> 
> but if you have multiple overlays and you use
> PORTAGE_OVERLAY="blablabla"
> PORTAGE_OVERLAY="$PORTAGE_OVERLAY  blablabla2"
> 
> it will fail.

This works for me:

PORTDIR_OVERLAY="/usr/local/portage"
PORTDIR_OVERLAY="$PORTDIR_OVERLAY
        /home/pioto/svn/pioto-overlay
        /home/pioto/svn/creandus-overlay"

I still really don't see where this is coming from, and I still can't reproduce it.




Comment 11


Patrizio Bassi





          2007-01-11 10:21:15 UTC
        

try to put all in one line.
doesn't work for me on one line.




Comment 12


Mike Kelly (RETIRED)






          2007-01-11 14:29:07 UTC
        

No, still works exactly the same. You must have some invalid config options somewhere in your configuration, or you just have some really weirdly broken system.




Comment 13


Patrizio Bassi





          2007-01-12 07:56:18 UTC
        

i don't think so, but i'm not really sure.
 i can fix/reproduce by commenting/uncommenting the overlay lines.






Comment 14


Jakub Moc (RETIRED)






          2007-10-19 07:39:57 UTC
        

*** Bug 196354 has been marked as a duplicate of this bug. ***




Comment 15


Jakub Moc (RETIRED)






          2007-10-19 09:05:58 UTC
        

*** Bug 196354 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

