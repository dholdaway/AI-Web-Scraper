Title: 128746 – Run `mysql_fix_privilege_tables` after every MySQL update
URL: https://bugs.gentoo.org/show_bug.cgi?id=128746

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 128746
Run `mysql_fix_privilege_tables` after every MySQL update
Last modified: 2006-04-04 03:01:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 128746 
      - Run `mysql_fix_privilege_tables` after every MySQL update


Summary:
Run `mysql_fix_privilege_tables` after every MySQL update
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:



http://bugs.mysql.com/bug.php?id=11006




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-04 02:50 UTC by Marco Lazzeri





      Modified:
    
2006-04-04 03:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marco Lazzeri





          2006-04-04 02:50:54 UTC
        

Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, unavailable, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Pentium III (Katmai)
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     [Not Present]
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  [Not Present]
sys-devel/automake:  [Not Present]
sys-devel/binutils:  [Not Present]
sys-devel/libtool:   [Not Present]
virtual/os-headers:  [Not Present]
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.unina.it/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X aac aalib alsa apache2 arts artswrappersuid audiofile avi bash-completion berkdb bitmap-fonts browserplugin bzip2 cdparanoia crypt cups directfb divx4linux dv encode fastcgi fb fbcon firefox flac gif gimpprint gpm graphviz gstreamer gtk gtk2 icq imap innodb ithreads java javascript jikes jpeg jython kde kdeenablefinal lame libcaca libg++ libwww md5sum mmx mono mozdevelop moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mpeg msn mysql ncurses nethack nls nodroproot nptl nptlonly nsplugin ogg oggvorbis opengl oracle parse-clocks pcre pda perl png postgres python qt quicktime rar readline real ruby samba sdl soap sql sqlite sse ssl subversion svga tcltk threads tiff truetype truetype-fonts type1-fonts unicode utf8 vhosts vidix vim-with-x vorbis win32codecs xine xml xml2 xprint xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Marco Lazzeri





          2006-04-04 02:57:21 UTC
        

1. Set default charset to UTF-8 in /etc/mysql/my.cnf

2. Update MySQL

3. Try to GRANT new privileges to a MySQL user

4. `grep 'invalid character set' /var/log/mysql/mysqld.err`

5. Run 'mysql_fix_privilege_tables' and everything gets fixed

I suggest to add the latest step to MySQL ebuilds. Or, at least, an ewarn.




Comment 2


Jakub Moc (RETIRED)






          2006-04-04 03:01:01 UTC
        

That's really not needed at all except for major mysql upgrades, which are already covered by out upgrading howto. Please, see

http://www.gentoo.org/doc/en/mysql-upgrading.xml









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

