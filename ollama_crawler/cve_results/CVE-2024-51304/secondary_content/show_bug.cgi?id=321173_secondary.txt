Title: 321173 – remainders of media-libs/jpeg-mmx caused several problems with gstreamer
URL: https://bugs.gentoo.org/show_bug.cgi?id=321173

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 321173
remainders of media-libs/jpeg-mmx caused several problems with gstreamer
Last modified: 2010-05-23 12:59:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 321173 
      - remainders of media-libs/jpeg-mmx caused several problems with gstreamer


Summary:
remainders of media-libs/jpeg-mmx caused several problems with gstreamer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-05-23 12:47 UTC by Paul Osmialowski





      Modified:
    
2010-05-23 12:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul Osmialowski





          2010-05-23 12:47:17 UTC
        

I need to ask you for advice, how can I prevent my host from problems with Gentoo like that:
Some time ago media-libs/jpeg-mmx library was removed from portage. Unfortunately, during upgrades I wasn't noticed about that. My steps during update are:
emerge --sync
emerge --metadata
emerge -uND world
ldconfig
revdep-rebuild
Recently I started to use gstreamer for my new project. Unfortunately, some of the image encoders refused to work with error message:
Wrong JPEG library version: library is 62, caller expects 80
I went to /usr/lib and did ls -la|grep libjpeg, the output was:
-rw-r--r--   1 root root   256950 Oct  8  2006 libjpeg-mmx.a
-rw-r--r--   1 root root      493 Oct  8  2009 libjpeg-mmx.la
lrwxrwxrwx   1 root root       21 Oct  8  2006 libjpeg-mmx.so -> libjpeg-mmx.so.62.0.0
lrwxrwxrwx   1 root root       21 Oct  8  2006 libjpeg-mmx.so.62 -> libjpeg-mmx.so.62.0.0
-rwxr-xr-x   1 root root   169000 Oct  8  2006 libjpeg-mmx.so.62.0.0
-rw-r--r--   1 root root   333102 Apr  1 09:22 libjpeg.a
-rw-r--r--   1 root root      914 Apr  1 09:22 libjpeg.la
lrwxrwxrwx   1 root root       16 Apr  1 09:22 libjpeg.so -> libjpeg.so.8.0.1
lrwxrwxrwx   1 root root       16 Apr  1 09:22 libjpeg.so.8 -> libjpeg.so.8.0.1
-rwxr-xr-x   1 root root   242864 Apr  1 09:22 libjpeg.so.8.0.1
this libjpeg-mmx.so.62.0.0 seemed suspicious for me. So I went to /var/db/pkg to grep through all CONTENTS files and I found that there's a package called jpeg-mmx to which there's no ebuild in portage anymore. So I unmerged this (with warning that this is important library) and started gstreamer launcher. It ended with new error:
(gst-launch-0.10:13360): GStreamer-WARNING **: Failed to load plugin '/usr/lib/gstreamer-0.10/libgstjpeg.so': libjpeg-mmx.so.62: cannot open shared object file: No such file or directory
Now situation (and solution) is clear.


Reproducible: Always

Steps to Reproduce:
1. upgrade old gentoo machine
2. try to use gstreamer
3. ...well, you won't be able to reproduce that the way I did it, as I used gstreamer to stream live image from Player/Stage system which is not in the portage; I was using smokeenc which caused problems with libgstjpeg.so

Actual Results:  
problems as described

Expected Results:  
no problems

This is not the first bug related to mysterious "Wrong JPEG library version" message. I guess my problem description may be interesting for others.




Comment 1


Samuli Suominen (RETIRED)






          2010-05-23 12:59:53 UTC
        

uh, having the old jpeg-mmx installed would break number of packages, many of them from media-* categories. 

that's why it was masked and removed from portage more than 3 years ago per bug 156373.

it's not worth the trouble to hunt them down anymore.

you should just use emerge --depclean to get rid of these old stray libs









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

