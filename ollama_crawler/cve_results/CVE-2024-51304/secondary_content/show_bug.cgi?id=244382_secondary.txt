Title: 244382 – net-misc/ser2net-2.5  yesno: command not found
URL: https://bugs.gentoo.org/show_bug.cgi?id=244382

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 244382
net-misc/ser2net-2.5  yesno: command not found
Last modified: 2008-10-30 21:52:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 244382 
      - net-misc/ser2net-2.5  yesno: command not found


Summary:
net-misc/ser2net-2.5  yesno: command not found
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Rajiv Aaron Manglani (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-25 21:53 UTC by Matthias Egger





      Modified:
    
2008-10-30 21:52 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sbriesen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthias Egger





          2008-10-25 21:53:10 UTC
        

The ebuild uses the non existent program/function yesno on the lines 21 and 22. Therefore the init script can not start ser2net.

Reproducible: Always

Steps to Reproduce:
1. /etc/init.d/ser2net start

Actual Results:  
/etc/init.d/ser2net: line 21: yesno: command not found
/etc/init.d/ser2net: line 22: yesno: command not found
* Starting Serial to network proxy ()        ... [ !! ]


Expected Results:  
run ;)

Portage 2.1.4.5 (default/linux/x86/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.21-gentoo-r4 i686)
=================================================================
System uname: 2.6.21-gentoo-r4 i686 VIA Nehemiah
Timestamp of tree: Fri, 24 Oct 2008 23:15:03 +0000
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r14, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=i686 -mmmx -msse -mfpmath=sse -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-Os -march=i686 -mmmx -msse -mfpmath=sse -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks getbinpkg metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.switch.ch/ftp/mirror/gentoo/ http://gentoo.mirror.solnet.ch/"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/overlay"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="nptl nptlonly pam x86" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="fbdev glint i810 intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa vga via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Stefan Briesenick (RETIRED)






          2008-10-26 23:01:07 UTC
        

hmm, "yesno" is part of new baselayout/openrc. Do you have OpenRC installed already?





Comment 2


Matthias Egger





          2008-10-28 19:36:13 UTC
        

(In reply to comment #1)
> hmm, "yesno" is part of new baselayout/openrc. Do you have OpenRC installed
> already?
> 

Hi Stefan

Thank you for your time you have taken.

Yes you're right. I haven't installed baselayout/openrc yet. Is there any workaround for this problem? Because at the moment i have no interest in migrating to Baselayout2/OpenRC.





Comment 3


Stefan Briesenick (RETIRED)






          2008-10-30 21:46:37 UTC
        

well, this is the needed function of openrc:

yesno()
{
        [ -z "$1" ] && return 1

        case "$1" in
                [Yy][Ee][Ss]|[Tt][Rr][Uu][Ee]|[Oo][Nn]|1) return 0;;
                [Nn][Oo]|[Ff][Aa][Ll][Ss][Ee]|[Oo][Ff][Ff]|0) return 1;;
        esac

        local value=
        eval value=\$${1}
        case "${value}" in
                [Yy][Ee][Ss]|[Tt][Rr][Uu][Ee]|[Oo][Nn]|1) return 0;;
                [Nn][Oo]|[Ff][Aa][Ll][Ss][Ee]|[Oo][Ff][Ff]|0) return 1;;
                *) vewarn "\$${1} is not set properly"; return 1;;
        esac
}

you can add this function either in /etc/init.d/ser2net or in /etc/conf.d/ser2net. Alternatively you can create a shellscript 'yesno' somewhere in your $PATH with the contents/body of the yesno() function. Should work...

On the other hand: migrating to baselayout 2.0/openrc takes about 10 minutes. And it's really worth the time!





Comment 4


Stefan Briesenick (RETIRED)






          2008-10-30 21:52:57 UTC
        

ahh, well, I close this bug now with WORKSFORME, since this is not really a bug. ;-)

ser2net is ~arch as baselayout2/openrc. So either install openrc, or use the mentioned workaround.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

