Title: 246201 – net-misc/curl-7.19.1 fails tests with FEATURES="userpriv"
URL: https://bugs.gentoo.org/show_bug.cgi?id=246201

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 246201
net-misc/curl-7.19.1 fails tests with FEATURES="userpriv"
Last modified: 2011-04-21 08:12:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 246201 
      - net-misc/curl-7.19.1 fails tests with FEATURES="userpriv"


Summary:
net-misc/curl-7.19.1 fails tests with FEATURES="userpriv"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Daniel Black (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-11-09 19:33 UTC by Xake





      Modified:
    
2011-04-21 08:12 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



bugs+gentoo
rhill









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Xake





          2008-11-09 19:33:37 UTC
        

$summary

Only two tests pass on my machine.

Reproducible: Always

Steps to Reproduce:
FEATURES="userpriv test" emerge curl

Actual Results:  
test 2003...FAILED
TESTDONE: 2 tests out of 398 reported OK: 0%
TESTFAIL: These test cases failed: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 71 72 73 74 75 76 77 78 79 80 82 83 84 85 86 87 88 92 93 94 95 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 117 118 119 120 121 122 123 124 125 126 127 128 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 151 152 153 154 156 157 158 160 161 163 164 166 167 168 171 172 173 174 175 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 210 211 214 215 216 217 218 220 221 222 223 224 225 226 227 228 229 231 233 234 235 236 237 238 245 246 247 248 249 250 251 256 258 259 260 261 262 264 266 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 350 351 352 353 354 402 405 500 501 502 503 504 505 506 507 508 510 511 512 513 514 515 516 517 519 520 521 522 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 549 550 551 552 553 554 556 557 558 559 704 705 1000 1001 1002 1003 1005 1006 1007 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1047 1049 1051 1052 1053 1054 1055 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1084 2000 2001 2002 2003 
TESTDONE: 513 tests were considered during 119 seconds.
TESTINFO: 115 tests were skipped due to these restraints:
TESTINFO: "rlimit problem: fds needed 1050 > system limit 1024" 1 times (518)
TESTINFO: "curl lacks ipv6 support" 16 times (116, 212, 240, 241, 242, 252, 253, 254, 255, 263, 1046, 1048, 1050, 1056, 1083, 1085)
TESTINFO: "curl lacks scp support" 10 times (601, 603, 605, 607, 617, 619, 621, 623, 629, 631)
TESTINFO: "curl lacks netrc_debug support" 6 times (130, 131, 132, 133, 134, 257)
TESTINFO: "curl lacks OpenSSL support" 2 times (307, 308)
TESTINFO: "no stunnel" 16 times (300, 301, 302, 303, 304, 305, 306, 309, 400, 401, 403, 404, 406, 407, 408, 409)
TESTINFO: "failed starting SSH server" 6 times (700, 701, 702, 703, 706, 707)
TESTINFO: "curl lacks idn support" 3 times (165, 1034, 1035)
TESTINFO: "curl lacks NTLM support" 26 times (67, 68, 69, 70, 81, 89, 90, 91, 150, 155, 159, 162, 169, 170, 176, 209, 213, 239, 243, 265, 267, 547, 548, 555, 1008, 1021)
TESTINFO: "curl lacks sftp support" 29 times (600, 602, 604, 606, 608, 609, 610, 611, 612, 613, 614, 615, 616, 618, 620, 622, 624, 625, 626, 627, 628, 630, 632, 633, 634, 635, 636, 637, 2004)
make[1]: *** [quiet-test] Error 1
make[1]: Leaving directory `/var/tmp/portage/net-misc/curl-7.19.1/work/curl-7.19.1/tests'
make: *** [test] Error 2


Expected Results:  
test 2003...OK (512 out of 513, remaining: 00:01)
TESTDONE: 398 tests out of 398 reported OK: 100%
TESTDONE: 513 tests were considered during 757 seconds.
TESTINFO: 115 tests were skipped due to these restraints:
TESTINFO: "rlimit problem: fds needed 1050 > system limit 1024" 1 times (518)
TESTINFO: "curl lacks ipv6 support" 16 times (116, 212, 240, 241, 242, 252, 253, 254, 255, 263, 1046, 1048, 1050, 1056, 1083, 1085)
TESTINFO: "curl lacks scp support" 10 times (601, 603, 605, 607, 617, 619, 621, 623, 629, 631)
TESTINFO: "curl lacks netrc_debug support" 6 times (130, 131, 132, 133, 134, 257)
TESTINFO: "curl lacks OpenSSL support" 2 times (307, 308)
TESTINFO: "no stunnel" 16 times (300, 301, 302, 303, 304, 305, 306, 309, 400, 401, 403, 404, 406, 407, 408, 409)
TESTINFO: "failed starting SSH server" 6 times (700, 701, 702, 703, 706, 707)
TESTINFO: "curl lacks idn support" 3 times (165, 1034, 1035)
TESTINFO: "curl lacks NTLM support" 26 times (67, 68, 69, 70, 81, 89, 90, 91, 150, 155, 159, 162, 169, 170, 176, 209, 213, 239, 243, 265, 267, 547, 548, 555, 1008, 1021)
TESTINFO: "curl lacks sftp support" 29 times (600, 602, 604, 606, 608, 609, 610, 611, 612, 613, 614, 615, 616, 618, 620, 622, 624, 625, 626, 627, 628, 630, 632, 633, 634, 635, 636, 637, 2004)
make[1]: Leaving directory `/var/tmp/portage/net-misc/curl-7.19.1/work/curl-7.19.1/tests'


$ emerge --info
WARNING: repository at /usr/local/portage/mine is missing a repo_name entry
WARNING: repository at /usr/local/portage/policykit is missing a repo_name entry
Portage 2.2_rc13 (hardened/linux/x86/2008.0, gcc-4.3.2, glibc-2.8_p20080602-r0, 2.6.27-gentoo-r2 i686)
=================================================================
System uname: Linux-2.6.27-gentoo-r2-i686-Intel-R-_Pentium-R-_4_CPU_2.80GHz-with-glibc2.4
Timestamp of tree: Sun, 09 Nov 2008 02:00:01 +0000
distcc 3.0 i686-pc-linux-gnu [enabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.5.2-r8
dev-util/ccache:     2.4-r8
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.3.0-r1
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.19
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe -ftracer -ftree-vectorize -ggdb"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=pentium4 -pipe -ftracer -ftree-vectorize -ggdb"
DISTDIR="/var/portage/distfiles"
FEATURES="candy ccache distcc distlocks parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict test unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://ftp.sunet.se/pub/os/Linux/distributions/gentoo"
LANG="sv"
LDFLAGS="-Wl,--as-needed -Wl,-O1 -Wl,--sort-common -Wl,--warn-once,--hash-style=gnu"
LINGUAS="sv"
MAKEOPTS="-j5"
PKGDIR="/var/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/var/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/xake-toolchain /usr/local/portage/layman/gnome /usr/local/portage/layman/nouveau /usr/local/portage/layman/haskell /usr/local/portage/layman/java-overlay /usr/local/portage/layman/rbu /usr/local/portage/mine /usr/local/portage/policykit"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 acl alsa archive avahi bash-completion bzip2 cairo ccache cdaudio cdda cdr cli consolekit cracklib crypt cups cxx dbus dhcpcd dri dvd dvdr eds fam ffmpeg flac fuse gcj gdbm gif glib gmp gnome gnome-keyring gnutls gpm gstreamer gtk hal hardened iconv isdnlog jabbe java6 jpeg libnotify logrotate lvm midi mmx mp3 mpeg mtp mudflap musicbrainz nautilus ncurses network-cron networkmanager nfs nls nptl nptlonly ogg opengl openmp openntpd pam parted pcre pdf perl pic pidgin png policykit pppd python qemu readline reflection samba session smp spell spl sse sse2 ssl subversion svg sysfs test tex theora tiff tracker truetype unicode urandom usb userlocales vim-syntax vorbis x364 x86 xcb xmp xmpp xorg xulrunner xv xvid zeroconf zlib" ALSA_CARDS="emu10k1 intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="sv" USERLAND="GNU" VIDEO_CARDS="nouveau nv nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Wormo (RETIRED)






          2008-11-10 07:54:20 UTC
        

Which tests succeed if you turn off userpriv?




Comment 2


Xake





          2008-11-10 10:52:12 UTC
        

(In reply to comment #1)
> Which tests succeed if you turn off userpriv?
> 

In my first post under "Actual results" is what happends with FEATURES="userpriv" emerge curl (i.e. all test fails excpet two), while under "Expected results" you got what happends if FEATURES="-userpriv" emerge curl (i.e. all test works).




Comment 3


Xake





          2011-04-21 08:12:48 UTC
        

Cannot really tell if this is fixed with later versions or if this broke because of insane permissions for /tmp or something other on my system.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

