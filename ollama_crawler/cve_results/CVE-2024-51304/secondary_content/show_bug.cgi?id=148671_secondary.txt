Title: 148671 – dev-util/subversion 1.3.2-r3 / 1.4.0 segfaults on commit / import
URL: https://bugs.gentoo.org/show_bug.cgi?id=148671

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 148671
dev-util/subversion 1.3.2-r3 / 1.4.0 segfaults on commit / import
Last modified: 2006-09-23 12:06:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 148671 
      - dev-util/subversion 1.3.2-r3 / 1.4.0 segfaults on commit / import


Summary:
dev-util/subversion 1.3.2-r3 / 1.4.0 segfaults on commit / import
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Paul de Vrieze (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-22 09:59 UTC by Fab





      Modified:
    
2006-09-23 12:06 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (infos,2.81 KB,
                text/plain)

            
2006-09-22 10:01 UTC,

            Fab




Details





svn commit strace

              (svn.commit.log,73.08 KB,
                text/plain)

            
2006-09-22 10:02 UTC,

            Fab




Details





svn import strace

              (svn.import.log,55.53 KB,
                text/plain)

            
2006-09-22 10:03 UTC,

            Fab




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fab





          2006-09-22 09:59:41 UTC
        

Hi,

I'm trying to use subversion 1.3.2-r3.
I did the following to create the repository :

 # svnadmin create /data/svn-repos/mesge
 # chown -R root:svnusers /data/svn-repos/mesge
 # chmod -R g-w /data/svn-repos/mesge
 # chmod -R g+rw /data/svn-repos/mesge/db
 # chmod -R g+rw /data/svn-repos/mesge/locks


Everything is ok. My user is in the svnusers group, I ran :

 $ svn co file:///data/svn-repos/mesge/

Then I copy/paste the 'trunk' folder in the extracted revision 0 folder, and :

 $ svn add trunk
 $ svn commit
Segfault



I tried to upgrade to subversion-1.4.0, same issue.
I tried the 'import' command, same issue.

Did I miss something ?
I'll attach emerge --info, and strace of each command.

Thanks.




Comment 1


Fab





          2006-09-22 10:01:04 UTC
        

Created attachment 97763 [details]
emerge --info




Comment 2


Fab





          2006-09-22 10:02:19 UTC
        

Created attachment 97764 [details]
svn commit strace




Comment 3


Fab





          2006-09-22 10:03:00 UTC
        

Created attachment 97765 [details]
svn import strace




Comment 4


Paul de Vrieze (RETIRED)






          2006-09-23 07:54:37 UTC
        

Did you actually get an editor to give the commit/import message. I can't really see what went wrong. It should work just fine. As an experiment you might want to create the repository as a user and leave other things alone. This however should not make a difference.




Comment 5


Fab





          2006-09-23 08:08:30 UTC
        

(In reply to comment #4)
> Did you actually get an editor to give the commit/import message.

Yes, I'm using vim. But even when I'm trying this command :

 $ svn commit -m 'first commit'

Issue is the same : segfaults.

> As an experiment you might want to create the repository as a user and leave other things alone.

I'll give it a try.


Additionally, I tried with 1.3.2-r1, and segfaults are also here, I don't understand. I think I'll try to rebuild dependencies.




Comment 6


Fab





          2006-09-23 12:05:22 UTC
        

> As an experiment you might want to create the repository as a user and leave
> other things alone. This however should not make a difference.

I tried and it change nothing.


But I found the solution. I ran :

 $ gdb --args svn commit -m 'first commit'

gdb told me something about libapr-0.so.0 near around the segfault.
So, I ran :

 # emerge --oneshot $(equery which libapr-0.so.0)

And I retried ==> segfaults.
Then I decided to rebuild subversion-1.4.0 like the following to see what's going on :

 # FEATURES="nostrip" emerge subversion

And, fortunately, after rebuilding subversion, the segfault has disappeared !
Now it seems to work fine. Anyway, thanks for your help.




Comment 7


Fab





          2006-09-23 12:06:41 UTC
        

mmmmh, not 'equery which' but 'equery belongs' :-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

