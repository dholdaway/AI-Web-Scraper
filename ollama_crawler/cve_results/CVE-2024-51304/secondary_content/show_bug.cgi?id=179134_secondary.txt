Title: 179134 – app-shells/zsh-4.3.4 compile crash whith error: unrecognizable insn
URL: https://bugs.gentoo.org/show_bug.cgi?id=179134

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179134
app-shells/zsh-4.3.4 compile crash whith error: unrecognizable insn
Last modified: 2007-05-19 19:07:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179134 
      - app-shells/zsh-4.3.4 compile crash whith error: unrecognizable insn


Summary:
app-shells/zsh-4.3.4 compile crash whith error: unrecognizable insn
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-19 18:20 UTC by Mad Deer





      Modified:
    
2007-05-19 19:07 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mad Deer





          2007-05-19 18:20:21 UTC
        

I can`t compile app-shells/zsh-4.3.4 and can`t understand why.
with same USE app-shells/zsh-4.3.2-r2 that I use too but I does not change anything.

Reproducible: Always

Steps to Reproduce:
emerge zsh

Actual Results:  

i686-pc-linux-gnu-gcc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -DMODULE -march=athlon64 -O3 -pipe -msse3 -fomit-frame-pointer -m32 -ffast-math -funroll-all-loops -ftree-vectorize -fPIC -o mathfunc..o mathfunc.c
mathfunc.c: In function 'math_func':
mathfunc.c:461: error: unrecognizable insn:
(insn 680 679 681 79 (parallel [
            (set (reg:SI 261)
                (fix:SI (reg:XF 264)))
            (clobber (reg:CC 17 flags))
        ]) -1 (nil)
    (nil))
mathfunc.c:461: internal compiler error: in extract_insn, at recog.c:2084
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugs.gentoo.org/> for instructions.
Preprocessed source stored into /var/tmp/portage/app-shells/zsh-4.3.4/temp/ccc3V1FC.out file, please attach this to your bugreport.
make[3]: *** [mathfunc..o] Error 1
make[3]: Leaving directory `/var/tmp/portage/app-shells/zsh-4.3.4/work/zsh-4.3.4/Src/Modules'
make[2]: *** [modules] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-shells/zsh-4.3.4/work/zsh-4.3.4/Src'
make[1]: *** [modules] Error 2
make[1]: Leaving directory `/var/tmp/portage/app-shells/zsh-4.3.4/work/zsh-4.3.4/Src'
make: *** [all] Error 1

!!! ERROR: app-shells/zsh-4.3.4 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  zsh-4.3.4.ebuild, line 79:   Called die

!!! make failed
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/app-shells/zsh-4.3.4/temp/build.log'.



# emerge --info
Portage 2.1.2.7 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.5-r2, 2.6.19-gentoo-r5 i686)
=================================================================
System uname: 2.6.19-gentoo-r5 i686 AMD Turion(tm) 64 X2 Mobile Technology TL-50
Gentoo Base System release 1.12.10
Timestamp of tree: Sat, 19 May 2007 09:30:01 +0000
dev-java/java-config: 1.3.7, 2.0.32
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.19.2-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon64 -O3 -pipe -msse3 -fomit-frame-pointer -m32 -ffast-math -funroll-all-loops -ftree-vectorize"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/firefox/searchplugins/* /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/MozillaThunderbird/components/myspell/* /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=athlon64 -O3 -pipe -msse3 -fomit-frame-pointer -m32 -ffast-math -funroll-all-loops -ftree-vectorize"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--alphabetical"
FEATURES="buildpkg distlocks metadata-transfer nodoc noinfo parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.corbina.ru/pub/Linux/gentoo/"
LANG="ru_RU.koi8r"
LINGUAS="ru"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowex 3dnowext X a52 aac acl acpi aiglx alsa apache2 audiofile bitmap-fonts bluetooth bzip2 cairo cdr chardet cli cracklib crypt cups dbus dri dvd dvdr dvdread emboss evo fam fbcon firefox fortran gdbm gif gpm gtk gtk2 hal iconv imlib isdnlog jpeg kde kdeenablefinal kqemu libg++ mad mbox midi mikmod mmx mmxext mp3 mpeg mudflap ncurses nls nptl nptlonly nsplugin ogg oggvorbis opengl openmp pam pcre pdf perl png pppd python qt3 qt3support quicktime readline reflection sdl session softmmu spell spl sse ssl svg symlink tcpd tiff truetype truetype-fonts type1-fonts unicode userlocales vorbis win32codecs x264 x86 xml xorg xv xvid zlib" ALSA_CARDS="intel8x0 intel8x0m hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru" USERLAND="GNU" VIDEO_CARDS="nv nvidia synaptics"
Unset:  CTARGET, INSTALL_MASK, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2007-05-19 18:36:42 UTC
        

<snip>
CFLAGS="-march=athlon64 -O3 -pipe -msse3 -fomit-frame-pointer -m32 -ffast-math
-funroll-all-loops -ftree-vectorize"
</snip>

Try with *sane* C[XX]FLAGS, such as "-march=athlon64 -O2 -pipe -msse3 -fomit-frame-pointer"

And - never put stuff like -m32 or -ffast-math into your global C[XX]FLAGS; also -ftree-vectorize is known to be broken.




Comment 2


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2007-05-19 19:07:12 UTC
        

(In reply to comment #1)
> also -ftree-vectorize is known to be broken.
It doesn't work only with zlib, ruby, fontconfig, kpdf(/kdegraphics) and poppler (or poppler-bindings?) on an average KDE system :) .











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

