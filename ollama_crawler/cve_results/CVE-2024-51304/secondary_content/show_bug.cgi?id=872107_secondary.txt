Title: 872107 – x11-libs/libnotify-0.8.1 fails to build caused by UnicodeDecodeError
URL: https://bugs.gentoo.org/show_bug.cgi?id=872107

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 872107
x11-libs/libnotify-0.8.1 fails to build caused by UnicodeDecodeError
Last modified: 2022-09-22 06:43:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 872107 
      - x11-libs/libnotify-0.8.1 fails to build caused by UnicodeDecodeError


Summary:
x11-libs/libnotify-0.8.1 fails to build caused by UnicodeDecodeError
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-09-20 21:48 UTC by Alexander Gottweis





      Modified:
    
2022-09-22 06:43 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



floppym
freedesktop-bugs
stablestud









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge build output

              (build.log,8.18 KB,
                text/x-log)

            
2022-09-20 21:48 UTC,

            Alexander Gottweis




Details





emerge info output

              (emerge.info,6.42 KB,
                text/plain)

            
2022-09-20 21:49 UTC,

            Alexander Gottweis




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexander Gottweis





          2022-09-20 21:48:51 UTC
        

Created attachment 813169 [details]
emerge build output

Hi,

I cannot get x11-libs/libnotify to compile, it fails already in the preparation phase due to an UnicodeDecodeError.

# emerge -pqv '=x11-libs/libnotify-0.8.1::gentoo'
[ebuild  N    ] x11-libs/libnotify-0.8.1  USE="introspection -gtk-doc -test" ABI_X86="(64) -32 (-x32)"

Also the previous version of libnotify also fails to compile (0.7.12)

The build log this also could be a meson bug, but I'm not sure whether this is true.




Comment 1


Alexander Gottweis





          2022-09-20 21:49:37 UTC
        

Created attachment 813172 [details]
emerge info output




Comment 2


Alexander Gottweis





          2022-09-20 22:04:05 UTC
        

It fails in the preparation phase caused by this:

UnicodeDecodeError: 'utf-8' codec can't decode byte 0xa7 in position 120: invalid start byte

It seems to be called by meson, but I cannot figure out the exact file containing that invalid start byte




Comment 3


Mike Gilbert






          2022-09-21 03:56:47 UTC
        

I am unable to reproduce the issue. There is probably something unique to your system.

Based on the log and reading meson.build, it appears the following command outputs data that is not decodable as UTF-8:

xsltproc --nonet http://docbook.sourceforge.net/release/xsl-ns/current/manpages/docbook.xsl




Comment 4


Alexander Gottweis





          2022-09-21 22:04:32 UTC
        

(In reply to Mike Gilbert from comment #3)
> I am unable to reproduce the issue. There is probably something unique to
> your system.
> 
> Based on the log and reading meson.build, it appears the following command
> outputs data that is not decodable as UTF-8:
> 
> xsltproc --nonet
> http://docbook.sourceforge.net/release/xsl-ns/current/manpages/docbook.xsl

Indeed that xsltproc command fails with:
~$ xsltproc --nonet 'http://docbook.sourceforge.net/release/xsl-ns/current/manpages/docbook.xsl'
file:///usr/share/sgml/docbook/xsl-ns-stylesheets/common/common.xsl:1: parser error : Start tag expected, '<' not found
compilation error: file file:///usr/share/sgml/docbook/xsl-ns-stylesheets/html/docbook.xsl line 28 element include
xsl:include : unable to load file:///usr/share/sgml/docbook/xsl-ns-stylesheets/common/common.xsl

Taking a look into the common.xsl, I noticed that this file must've been somehow corrupted, has it didn't contain any valid XML/XSL but random binary data.

~$ file /usr/share/sgml/docbook/xsl-ns-stylesheets/common/common.xsl
/usr/share/sgml/docbook/xsl-ns-stylesheets/common/common.xsl: data

After re-emerging app-text/docbook-xsl-ns-stylesheets that error is gone, and libnotify emerges successfully again!

Thanks :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

