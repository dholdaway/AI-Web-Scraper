Title: 200050 – [KEYWORD] =sys-apps/hal-0.5.10
URL: https://bugs.gentoo.org/show_bug.cgi?id=200050

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 200050
[KEYWORD] =sys-apps/hal-0.5.10
Last modified: 2008-09-04 03:39:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 200050 
      - [KEYWORD] =sys-apps/hal-0.5.10


Summary:
[KEYWORD] =sys-apps/hal-0.5.10
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:

KEYWORDREQ








Duplicates (1):
    

217062

      (view as bug list)
    


Depends on:




224501



Blocks:




222219



 

        Show dependency tree





 





      Reported:
    
2007-11-23 06:34 UTC by Saleem Abdulrasool (RETIRED)





      Modified:
    
2008-09-04 03:39 UTC
      (History)
    




          CC List:
        

7 
          users
          
            (show)
          



arm
bsd+disabled
chrschmitt
Dirk.R.Gently
gnome
peper
sh+disabled









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




patch to enable HAL PMU support

              (hal-0.5.10-ppc.patch,392 bytes,
                patch)

            
2008-04-13 01:20 UTC,

            Christian Schmitt




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Saleem Abdulrasool (RETIRED)






          2007-11-23 06:34:18 UTC
        

CC'ed arches: your keywords have been dropped due to new package requirements of HAL.  Please keyword the following packages after testing:

app-misc/hal-info
sys-apps/hal
sys-auth/policykit
sys-power/pm-utils




Comment 1


Saleem Abdulrasool (RETIRED)






          2007-11-23 07:42:05 UTC
        

@alpha, hppa, ia64, ppc, sparc, bsd: please also keyword gnome-power-manager-2.20.0 as that depends on hal-0.5.10.




Comment 2


Saleem Abdulrasool (RETIRED)






          2007-11-23 07:42:45 UTC
        

erm, I meant =gnome-base/gnome-power-manager-2.20.1




Comment 3


Saleem Abdulrasool (RETIRED)






          2007-11-23 07:48:14 UTC
        

I guess to make it easier, the following are the packages with version information (sorry for all the spam):

=app-misc/hal-info-20071011
=gnome-extra/gnome-power-manager-2.20.1
=sys-apps/hal-0.5.10
=sys-auth/policykit-0.6
=sys-power/pm-utils-0.99.4




Comment 4


Gilles Dartiguelongue (RETIRED)






          2007-11-23 10:51:10 UTC
        

aren't we supposed to get a new gnome-mount along with these ?




Comment 5


Doug Goldstein (RETIRED)






          2007-11-23 14:28:10 UTC
        

(In reply to comment #4)
> aren't we supposed to get a new gnome-mount along with these ?
> 

Yes you are. One that depends on policykit-gnome. It's in Gentopia.




Comment 6


Joe Peterson (RETIRED)






          2007-11-23 17:48:19 UTC
        

In testing this for FreeBSD, I found the following issues:

1) policy-kit requires linux-specific stuff; I noticed that this was turned off in the last hal version.  Could --with-policy-kit be conditional?

2) acl-management requires policy-kit (also not enabled in last hal - could this be conditional also?)

3) on FreeBSD, libvolume_id-0.77 is required, but not in the tree yet; we can fix this by getting new version...

4) pm-utils doesn't currently work on FreeBSD; is this a hard depend for hal now or can it be conditional toot?





Comment 7


Jakub Moc (RETIRED)






          2007-11-23 23:27:36 UTC
        

(In reply to comment #6)

Apparently not, see Bug 200059. 




Comment 8


Saleem Abdulrasool (RETIRED)






          2008-01-06 00:41:19 UTC
        

We've dropped policykit for now as it is going to cause more headaches than worth.  Please test and keyword the following set of packages:

=sys-apps/hal-0.5.10
=sys-power/pm-utils-0.99.4
=app-misc/hal-info-20071011
=x11-drivers/xf86-input-evdev-1.2.0




Comment 9


Jeroen Roovers (RETIRED)






          2008-01-10 18:13:21 UTC
        

(In reply to comment #8)
> We've dropped policykit for now as it is going to cause more headaches than
> worth.  Please test and keyword the following set of packages:
> 
> =sys-apps/hal-0.5.10

Marked ~hppa.

> =sys-power/pm-utils-0.99.4

Not applicable (no hardware support, no keyword).

> =app-misc/hal-info-20071011

Why was the keyword dropped at all?

> =x11-drivers/xf86-input-evdev-1.2.0

Dito.




Comment 10


Friedrich Oslage (RETIRED)






          2008-01-31 19:42:54 UTC
        

Tested sys-apps/hal-0.5.9.1-r3 USE="disk-partition (-acpi) (-apm) -crypt -debug (-dell) -doc -laptop (-selinux) (-pcmcia)" on sparc.

Although it compiles fine the tests fail:

test -z "/usr/share/hal/fdi" || /bin/mkdir -p "/tmp/portage/sys-apps/hal-0.5.10/work/hal-0.5.10/hald/.local-fdi-test/usr/share/hal/fdi"
 /usr/bin/install -c -m 644 'fdi.dtd' '/tmp/portage/sys-apps/hal-0.5.10/work/hal-0.5.10/hald/.local-fdi-test/usr/share/hal/fdi/fdi.dtd'
make[7]: Leaving directory `/tmp/portage/sys-apps/hal-0.5.10/work/hal-0.5.10/fdi'
make[6]: Leaving directory `/tmp/portage/sys-apps/hal-0.5.10/work/hal-0.5.10/fdi'
make[5]: Leaving directory `/tmp/portage/sys-apps/hal-0.5.10/work/hal-0.5.10/fdi'
20:38:44.745 [E] create_cache.c:540: Cannot scan '.local-fdi-test/share/hal/fdi/preprobe': No such file or directory
20:38:44.745 [E] create_cache.c:701: Error generating fdi cache
FAIL: hald-cache-test.sh
===============================
1 of 1 tests failed
Please report to david@fubar.dk
===============================
make[4]: *** [check-TESTS] Error 1

# emerge --info
Portage 2.1.3.19 (default-linux/sparc/sparc64/2007.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.23-gentoo-r6 sparc64)
=================================================================
System uname: 2.6.23-gentoo-r6 sparc64 sun4u
Timestamp of tree: Thu, 31 Jan 2008 18:30:01 +0000
app-shells/bash:     3.2_p17-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="sparc"
CBUILD="sparc-unknown-linux-gnu"
CFLAGS="-mcpu=ultrasparc3 -mtune=ultrasparc3 -mvis -Wa,-Av8plusa -O2 -pipe -frename-registers -ggdb"
CHOST="sparc-unknown-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CPPFLAGS="-mcpu=ultrasparc3 -mtune=ultrasparc3 -mvis -Wa,-Av8plusa -O2 -pipe -frename-registers -ggdb"
CXXFLAGS="-mcpu=ultrasparc3 -mtune=ultrasparc3 -mvis -Wa,-Av8plusa -O2 -pipe -frename-registers -ggdb"
DISTDIR="/tmp/distfiles"
FEATURES="ccache collision-protect distlocks installsources metadata-transfer parallel-fetch sanxbox splitdebug strict test userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en de"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit 7zip X a52 aac aalib alsa artworkextra audacious avahi blender-game bluetooth bzip2 caps cups curl custom-cflags cvs dbus dga disk-partition divx dts dv dvd dvdread encode fastcgi fat ffmpeg flac ftp fuse gd gif gimp gimpprint gmedia gnome gnome-print gnomecanvas gpm grammar gtk hal hpn ieee1394 ithreads javascript jpeg jpeg2k lzo mad memcache midi mikmod mjpeg mp2 mp3 mpeg mpeg2 mplayer musepack nautilus ncurses network networking nls nptl nptlonly nsplugin offensive ogg openal opengl opera pam pcre png pnm ppds quicktime realmedia regex ruby samba sdl sdl-image slang smartcard smp sms sound soundex sparc speex spell sqlite3 ssl subversion svg symlink test theora threads tiff timidity truetype tta unicode usb userlocales utils vcd vidix vim vim-syntax vim-with-x vorbis wma wmf wmp x264 xanim xcb xfce xine xinerama xorg xulrunner xv xvid zlib" ALSA_PCM_PLUGINS="adpcm alaw copy dshare dsnoop extplug file hooks ladspa lfloat linear meter mulaw multi null rate route share shm" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LINGUAS="en de" USERLAND="GNU" VIDEO_CARDS="mach64"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 11


Raúl Porcel (RETIRED)






          2008-03-24 17:15:55 UTC
        

What's up with the test failure?




Comment 12


Mart Raudsepp






          2008-04-03 00:07:35 UTC
        

(In reply to comment #11)
> What's up with the test failure?

<steev> which test failure?
<steev> oh, thats fine
<steev> ignore the test failure




Comment 13


Tobias Klausmann (RETIRED)






          2008-04-03 20:43:01 UTC
        

hal and hal-info keyworded on alpha

Since USE=laptop would pull in pm-utils which doesn't make sense on alpha, I've use-masked it for alpha. Also, hal-0.5.10 needs newer linux-headers than those in the 2006.1 profile, so I masked hal-0.5.10, hal-info-20071011 and x11-drivers/xf86-input-evdev-1.2.0 for that profile.

Also keyworded x11-drivers/xf86-input-evdev-1.2.0, which was easy for a change :)




Comment 14


Raúl Porcel (RETIRED)






          2008-04-09 17:23:23 UTC
        

~ia64/~sparc done




Comment 15


Raúl Porcel (RETIRED)






          2008-04-10 08:53:02 UTC
        

*** Bug 217062 has been marked as a duplicate of this bug. ***




Comment 16


Christian Schmitt





          2008-04-13 01:20:40 UTC
        

Created attachment 149529 [details, diff]
patch to enable HAL PMU support

I created a patch for 0.5.10 to enable PMU support on the PPC arch which should be enabled since APM emulation is not the best solution. This version works nicely on my iBook.




Comment 17


nixnut (RETIRED)






          2008-06-01 10:57:16 UTC
        

~ppc'd




Comment 18


SpanKY






          2008-06-02 09:21:46 UTC
        

i dont know how you managed to `repoman commit` as you need ~ppc in hal-info and pm-utils (or mask the relevant USE flag)




Comment 19


nixnut (RETIRED)






          2008-06-03 14:40:06 UTC
        

(In reply to comment #18)
> i dont know how you managed to `repoman commit` as you need ~ppc in hal-info
> and pm-utils (or mask the relevant USE flag)

I haven't got a clue either. I've now masked the laptop use flag for hal and keyworded hal-info. 






Comment 20


Christian Schmitt





          2008-06-27 14:18:44 UTC
        

For HAL and pm-utils on PPC I have opened the new bug 229763 with some patches




Comment 21


Saleem Abdulrasool (RETIRED)






          2008-09-04 03:39:06 UTC
        

HAL-0.5.11-r1 has been stabled.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

