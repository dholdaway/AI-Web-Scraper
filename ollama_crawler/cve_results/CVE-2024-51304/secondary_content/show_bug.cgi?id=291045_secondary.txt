Title: 291045 – Add boot parameter for /etc/init.d/checkfs to check all (or selected) filesystems.
URL: https://bugs.gentoo.org/show_bug.cgi?id=291045

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 291045
Add boot parameter for /etc/init.d/checkfs to check all (or selected) filesystems.
Last modified: 2009-10-30 16:45:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 291045 
      - Add boot parameter for /etc/init.d/checkfs to check all (or selected) filesystems.


Summary:
Add boot parameter for /etc/init.d/checkfs to check all (or selected) filesys...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-29 17:34 UTC by Jaak Ristioja





      Modified:
    
2009-10-30 16:45 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Proposed patch for checkroot and checkfs

              (diff,782 bytes,
                patch)

            
2009-10-29 17:35 UTC,

            Jaak Ristioja




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jaak Ristioja





          2009-10-29 17:34:40 UTC
        

Currently the /etc/init.d/checkfs does not check file systems even when the "gentoo=forcefsck" boot parameter is given. Please add a boot parameter to make it check them.

I suggest that the "forcefsck" parameter be used for both the checkfs and checkroot init scripts, and a new "forcerootfsck" be added for the checkroot script only.




Comment 1


Jaak Ristioja





          2009-10-29 17:35:43 UTC
        

Created attachment 208649 [details, diff]
Proposed patch for checkroot and checkfs




Comment 2


Sebastian Luther (few)





          2009-10-29 20:27:42 UTC
        

Against which version of baselayout is your patch?




Comment 3


Jaak Ristioja





          2009-10-30 05:39:36 UTC
        

The latest stable one on amd64, version 1.12.11.1. The patch was actually just meant to demonstrate the simplicity of such change in code.




Comment 4


SpanKY






          2009-10-30 07:18:46 UTC
        

this is already in openrc:
_forcefsck()
{
    [ -e /forcefsck ] || get_bootparam forcefsck
}




Comment 5


Jaak Ristioja





          2009-10-30 09:25:10 UTC
        

Excuse me, but what is openrc?




Comment 6


SpanKY






          2009-10-30 16:45:05 UTC
        

baselayout-2









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

