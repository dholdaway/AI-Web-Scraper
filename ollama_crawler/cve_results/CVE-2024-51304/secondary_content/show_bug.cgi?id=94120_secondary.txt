Title: 94120 – baselayout doesn't activate lvm2 volume groups
URL: https://bugs.gentoo.org/show_bug.cgi?id=94120

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 94120
baselayout doesn't activate lvm2 volume groups
Last modified: 2005-07-02 23:34:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 94120 
      - baselayout doesn't activate lvm2 volume groups


Summary:
baselayout doesn't activate lvm2 volume groups
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

AMD64
        Other
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-26 14:46 UTC by konsti





      Modified:
    
2005-07-02 23:34 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



askwar









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


konsti





          2005-05-26 14:46:19 UTC
        

I have an ~amd64 installation and while booting the lvm2 vgs are not activated anymore, so booting stops there. After logging in for maintenance (root is not on lvm) I type "vgchange -a y" press Ctrl-D and ehre we go.
The string "vgchange" occures in no file located in /etc/init.d/*. Shouldn't that be the case?

Concerned are 
baselayout-1.11.12-r3
and
baselayout-1.11.12-r1




Comment 1


Jakub Moc (RETIRED)






          2005-05-26 15:50:54 UTC
        

(In reply to comment #0)
> The string "vgchange" occures in no file located in /etc/init.d/*. Shouldn't
that be the case?

Uhm, not really. The relevant script is /lib/rcscripts/addons/lvm-start.sh. Do
you have it?




Comment 2


SpanKY






          2005-05-26 20:12:10 UTC
        

re-emerge lvm2 and see if that fixes things




Comment 3


SpanKY






          2005-05-29 20:15:51 UTC
        

lvm2-start.sh has the vgchange code in it




Comment 4


konsti





          2005-05-30 12:50:12 UTC
        

The file /lib/rcscripts/addons/lvm-start.sh is there it is somehow not called.
I also tested baselayout-1.12.0_alpha2-r1 which has the same error, I will show
up in the baselayout thread in gentoo-dev :)

Konsti




Comment 5


Jakub Moc (RETIRED)






          2005-06-01 00:25:47 UTC
        

(In reply to comment #4)
> The file /lib/rcscripts/addons/lvm-start.sh is there it is somehow not called.

Hmm, this is pretty strange as it works like a charm for me. It even works for
LVM2 over RAID-1. Now using baselayout 1.11.12-r4 but it has worked with 1.11.11
as well.




Comment 6


SpanKY






          2005-06-01 05:48:22 UTC
        

you have to make sure you properly did `etc-update` and your /etc/conf.d/rc now
defines RC_VOLUME_ORDER




Comment 7


Alexander Skwar





          2005-06-27 09:19:17 UTC
        

Please reopen. I've got the same problem on ~x86.

I ran "etc-update". /etc/conf.d/rc has:

RC_VOLUME_ORDER="raid evms lvm dm"

That looks all right to me.

Until a few days, lvm worked for me.

I suppose that /lib/rcscripts/addons/lvm-start.sh is not run.

[18:14:43 alexander@server:~] $ epm -q baselayout
baselayout-1.11.12-r4


[18:13:21 alexander@server:~] $ emerge info
Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r0,
2.6.12-ck2.007.reiser4_rc5-mm2.deflate-static i686)
=================================================================
System uname: 2.6.12-ck2.007.reiser4_rc5-mm2.deflate-static i686 AMD Athlon(tm)
XP 2000+
Gentoo Base System version 1.6.12
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.9
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/bind
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache collision-protect distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/
ftp://ftp.tu-clausthal.de/pub/linux/gentoo/
http://distro.ibiblio.org/pub/linux/distributions/gentoo/
http://distfiles.gentoo.org/"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X acl alsa apache2 apm arts artswrappersuid async avi
bash-completion bluetooth bonobo calendar cdda cddb cdparanoia cdr cdrom codecs
crypt cscope css cups divx4linux dvdread encode esd ethereal exif fam fbcon
fbdev ffmpeg fftw firefox flash foomaticdb ftp gd gdbm gif gimp gimpprint gmail
gnokii gnome gphoto2 gpm gs gstreamer gtk gtk2 guile hal iconv idn imagemagick
imap imlib java javascript jpeg kde kdeenablefinal kdexdeltas libwww
logitech-mouse logrotate lufsusermount lzw lzw-tiff mad maildir matroska matrox
mbox mime mmap mmx mng mozdevelop mozilla moznocompose moznoirc mozp3p mozsvg
mp3 mpeg mplayer ncurses network nls no-old-linux no_wxgtk1 noantlr nobcel
nobeanutils nobsh nocommonslogging nocommonsnet nojdepend nojsch nojython
nolog4j nooro nopop3d noregexp norhino noxalan noxerces offensive ofx ogg
oggvorbis opengl oss pam parse-clocks pcntl pcre pda pdflib perl pic pie png
posix ppds python qt quicktime quotes rdesktop readline real recode samba sasl
shared slang sockets speex spell sse ssl svg symlink sysvipc tcltk tcpd theora
tidy tiff truetype truetype-fonts type1-fonts unicode usb usepackagedmakefiles
vcd videos vim vim-pager vim-with-x vorbis wmf wsconvert x11vnc xchattext xfs
xine xml2 xmms xv xvid zlib video_cards_matrox linguas_de userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, PORTDIR_OVERLAY




Comment 8


Alexander Skwar





          2005-07-02 23:34:34 UTC
        

Again: Please reopen!

Does anyone have an idea, why the lvm2 vg's aren't reactivated during boot?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

