Title: 485498 – app-admin/syslog-ng-3.4.2 - In file included from gprocess.c:25:0: gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=485498

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 485498
app-admin/syslog-ng-3.4.2 - In file included from gprocess.c:25:0: gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory
Last modified: 2013-09-21 03:52:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 485498 
      - app-admin/syslog-ng-3.4.2 - In file included from gprocess.c:25:0: gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory


Summary:
app-admin/syslog-ng-3.4.2 - In file included from gprocess.c:25:0: gprocess.h...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mr. Bones. (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-09-20 15:42 UTC by Ladislav Zitka





      Modified:
    
2013-09-21 03:52 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



archenroot









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ladislav Zitka





          2013-09-20 15:42:20 UTC
        

sylog-ng-3.4.2 was failing using emerging world update by missing file:
In file included from gprocess.c:25:0:
gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory
compilation terminated.


Reproducible: Always

Steps to Reproduce:
1. issue `emerge --update --newuse --deep --with-bdeps=y @world`
Actual Results:  
 * Package:    app-admin/syslog-ng-3.4.2
 * Repository: gentoo
 * Maintainer: mr_bones_@gentoo.org
 * USE:        amd64 caps elibc_glibc ipv6 kernel_linux pcre ssl tcpd userland_GNU
 * FEATURES:   preserve-libs sandbox userpriv usersandbox
>>> Unpacking source...
>>> Unpacking syslog-ng_3.4.2.tar.gz to /var/tmp/portage/app-admin/syslog-ng-3.4.2
iv_popen_test.c:66:8: warning: ignoring return value of 'fwrite', declared with attribute warn_unused_result [-Wunused-result]

...........


/eventlog -           I../lib/ivykis/src/include -I../lib/ivykis/src/include -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -pipe -Wall -pthread -c filter.c  -fPIC -DPIC -o .l           ibs/libsyslog_ng_la-filter.o
libtool: compile:  x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/eventlog -           I../lib/ivykis/src/include -I../lib/ivykis/src/include -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -pipe -Wall -pthread -c filter-expr-parser.c  -fPIC            -DPIC -o .libs/libsyslog_ng_la-filter-expr-parser.o
/bin/sh ../libtool  --tag=CC   --mode=compile x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..   -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/incl           ude  -I/usr/include/eventlog      -I../lib/ivykis/src/include -I../lib/ivykis/src/include -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -O2 -pipe -Wall -pt           hread -c -o libsyslog_ng_la-gprocess.lo `test -f 'gprocess.c' || echo './'`gprocess.c
In file included from file-perms.c:29:0:
gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory
compilation terminated.
make[4]: *** [libsyslog_ng_la-file-perms.lo] Error 1
make[4]: *** Waiting for unfinished jobs....
libtool: compile:  x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/eventlog -           I../lib/ivykis/src/include -I../lib/ivykis/src/include -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -pipe -Wall -pthread -c globals.c  -fPIC -DPIC -o .           libs/libsyslog_ng_la-globals.o
libtool: compile:  x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I.. -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/eventlog -           I../lib/ivykis/src/include -I../lib/ivykis/src/include -D_GNU_SOURCE -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -pipe -Wall -pthread -c gprocess.c  -fPIC -DPIC -o            .libs/libsyslog_ng_la-gprocess.o
In file included from gprocess.c:25:0:
gprocess.h:33:30: fatal error: sys/capability.h: No such file or directory
compilation terminated.
make[4]: *** [libsyslog_ng_la-gprocess.lo] Error 1
make[4]: Leaving directory `/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2/lib'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2/lib'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2/lib'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2'
make: *** [all] Error 2
 * ERROR: app-admin/syslog-ng-3.4.2::gentoo failed (compile phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=app-admin/syslog-ng-3.4.2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=app-admin/syslog-ng-3.4.2::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/app-admin/syslog-ng-3.4.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-admin/syslog-ng-3.4.2/temp/environment'.
 * Working directory: '/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2'
 * S: '/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2'

 * Messages for package app-admin/syslog-ng-3.4.2:

 * ERROR: app-admin/syslog-ng-3.4.2::gentoo failed (compile phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=app-admin/syslog-ng-3.4.2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=app-admin/syslog-ng-3.4.2::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/app-admin/syslog-ng-3.4.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-admin/syslog-ng-3.4.2/temp/environment'.
 * Working directory: '/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2'
 * S: '/var/tmp/portage/app-admin/syslog-ng-3.4.2/work/syslog-ng-3.4.2'

 * GNU info directory index is up-to-date.

 * IMPORTANT: 8 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.

 * After world updates, it is important to remove obsolete packages with
 * emerge --depclean. Refer to `man emerge` for more information.


Expected Results:  
successful compilation 

sys/capability.h is in libcap development library, so I emerged both libcap and libcap-ng, then emerged explicitly syslog-ng and it resulted in success. 

here is my `emerge --info` result:
login as: root
[0;35;40m                                           .
[0;35;40m     .vir.                                d$b
[0;35;40m  .d$$$$$$b.    .cd$$b.     .d$$b.   d$$$$$$$$$$$b  .d$$b.      .d$$b.
[0;35;40m  $$$$( )$$$b d$$$()$$$.   d$$$$$$$b Q$$$$$$$P$$$P.$$$$$$$b.  .$$$$$$$b                                                   .
[0;35;40m  Q$$$$$$$$$$B$$$$$$$$P"  d$$$PQ$$$$b.   $$$$.   .$$$P' `$$$ .$$$P' `$$                                                   $
[0;35;40m    "$$$$$$$P Q$$$$$$$b  d$$$P   Q$$$$b  $$$$b   $$$$b..d$$$ $$$$b..d$$                                                   $
[0;35;40m   d$$$$$$P"   "$$$$$$$$ Q$$$     Q$$$$  $$$$$   `Q$$$$$$$P  `Q$$$$$$$P
[0;35;40m  $$$$$$$P       `"""""   ""        ""   Q$$$P     "Q$$$P"     "Q$$$P"
[0;35;40m  `Q$$P"                                  """
[0;37;40m

This is \n.\O (\s \m \r) \t

Using keyboard-interactive authentication.
Password:
Welcome to  cat /etc/gentoo-release
-------------------------------------------------------
(TM) 2013 to the Present archenroot@gmail.com
-------------------------------------------------------
Hostname: prokyon
DNS Domain: archenroot.org NIS/YP: (none)
OS type: Linux time
Kernel: 3.6.11-gentoo 11
Processor: 8 GenuineIntel 3399MHz Intel(R)Core(TM)i7-2600K
Memory: 32917148 kB Swap: 0 kB
-------------------------------------------------------
prokyon ~ # nano /var/lib/layman/nektoo/metadata/layout.conf
prokyon ~ # java -version
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.4) (Gentoo build 1.6.0_27-b27)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)
prokyon ~ # bmon
prokyon ~ # emerge --info
Portage 2.2.1 (default/linux/amd64/13.0, gcc-4.6.3, glibc-2.15-r3, 3.6.11-gentoo x86_64)
=================================================================
System uname: Linux-3.6.11-gentoo-x86_64-Intel-R-_Core-TM-_i7-2600K_CPU_@_3.40GHz-with-gentoo-2.2
KiB Mem:    32917148 total,  27507984 free
KiB Swap:          0 total,         0 free
Timestamp of tree: Fri, 20 Sep 2013 14:00:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
distcc 3.1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.7.5-r2, 3.2.5-r2
dev-util/cmake:           2.8.10.2-r2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.6.3
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.15-r3
Repositories: gentoo nektoo enlightenment bitcoin
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="-j9 --load-average=25.85"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.mirror.dkm.cz/pub/gentoo/ rsync://ftp.fi.muni.cz/pub/linux/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/nektoo /var/lib/layman/enlightenment /var/lib/layman/bitcoin"
USE="X acl amd64 apache2 berkdb bzip2 caps cli cracklib crypt cxx doc dri fam fbcondecor gdbm graphviz iconv ipv6 logrotate mmx mng modules mudflap multilib ncurses nls nptl openmp pam pcre readline session sse sse2 sse3 ssl symlink tcpd unicode zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="actions alias asis auth_basic auth_digest authn_anon authn_alias authn_file authz_host authz_user cache cgi dav dav_fs dav_lock deflate dir filter mime proxy proxy_ajp rewrite userdir" APACHE2_MPMS="prefork" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-4" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2" RUBY_TARGETS="ruby19 ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, SYNC, USE_PYTHON




Comment 1


Ladislav Zitka





          2013-09-20 15:44:08 UTC
        

It cannot be seen from the comments straightforwardly so the easy workaround again:
sys/capability.h is coming from libcap development library, so I emerged both libcap and libcap-ng, then emerged explicitly syslog-ng and it resulted in success.




Comment 2


Jeroen Roovers (RETIRED)






          2013-09-20 16:21:38 UTC
        

(In reply to Ladislav Jech from comment #1)
> It cannot be seen from the comments straightforwardly so the easy workaround
> again:
> sys/capability.h is coming from libcap development library, so I emerged
> both libcap and libcap-ng, then emerged explicitly syslog-ng and it resulted
> in success.

syslog-ng ebuilds have "caps? ( sys-libs/libcap )" in DEPEND, and your build log shows you hade USE=caps, so you should already have had /usr/include/sys/capability.h before syslog-ng was emerged. The only possible scenario where this might go wrong is when emerge somehow got the merge order wrong.




Comment 3


Mr. Bones. (RETIRED)






          2013-09-21 03:52:28 UTC
        

reopen if you can reproduce the failure with emerge -ev syslog-ng









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

