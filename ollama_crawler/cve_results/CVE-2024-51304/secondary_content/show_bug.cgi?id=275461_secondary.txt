Title: 275461 – media-libs/libsdl (?) sdl-config is missing SYS_ROOT for library-path output
URL: https://bugs.gentoo.org/show_bug.cgi?id=275461

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 275461
media-libs/libsdl (?) sdl-config is missing SYS_ROOT for library-path output
Last modified: 2009-09-18 01:54:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 275461 
      - media-libs/libsdl (?) sdl-config is missing SYS_ROOT for library-path output


Summary:
media-libs/libsdl (?) sdl-config is missing SYS_ROOT for library-path output
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-06-26 08:34 UTC by Karsten Steingaß





      Modified:
    
2009-09-18 01:54 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karsten Steingaß





          2009-06-26 08:34:51 UTC
        

Only relevant for crosscompile!!!
The sdl-config script contains hardcoded /usr/lib path, if the configure script of some package invokes sdl-config to gather library information even with SYSROOT_SET -L/usr/lib(64) is returned

Reproducible: Always

Steps to Reproduce:
1. Setup crosstoolchain and cross-root
2. emerge any package which configure script calls sdl-config

Actual Results:  
At linking stage the wrong library path is used by Libtool!

Expected Results:  
Linking is fine!

add ${SYS_ROOT} to -L${exec_prefix}
    ==> -L${SYS_ROOT}/${exec_prefix}
before installing sdl-config in case of crosscompilation




Comment 1


SpanKY






          2009-06-30 20:55:21 UTC
        

i dont know where you're finding this "SYS_ROOT", but is not a standard thing and nothing in the tree should be using it

if anything is to change in sdl-config, it's changing it so that it does not output -L paths for /usr/lib or /usr/lib64 at all




Comment 2


Karsten Steingaß





          2009-07-01 07:27:47 UTC
        

SYS_ROOT=/usr/${CHOST}

Its used (and exported) by several ebuilds for crosscompilation.

Removing the library-path alltogether is wrong. The librarypath should point to the CHOSTs library path this can be changed through a simple sed in the install section of the ebuild before copying the sdl-config to its destination.

You are right in the point that its not ideal to use an exported variable for the path even if e.g. directfb-config is doing it that way.




Comment 3


Mr. Bones. (RETIRED)






          2009-07-09 15:58:39 UTC
        

reopen with a patch




Comment 4


Mr. Bones. (RETIRED)






          2009-09-18 01:54:35 UTC
        

bugzilla




Comment 5


Mr. Bones. (RETIRED)






          2009-09-18 01:54:54 UTC
        

No response, closing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

