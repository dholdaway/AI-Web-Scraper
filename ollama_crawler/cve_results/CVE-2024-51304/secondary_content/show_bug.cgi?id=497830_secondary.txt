Title: 497830 – xfce-base/xfdesktop-4.10.2 - icons missing (Action Buttons, Launcher, etc.) in panel/menu
URL: https://bugs.gentoo.org/show_bug.cgi?id=497830

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 497830
xfce-base/xfdesktop-4.10.2 - icons missing (Action Buttons, Launcher, etc.) in panel/menu
Last modified: 2014-03-04 20:58:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 497830 
      - xfce-base/xfdesktop-4.10.2 - icons missing (Action Buttons, Launcher, etc.) in panel/menu


Summary:
xfce-base/xfdesktop-4.10.2 - icons missing (Action Buttons, Launcher, etc.) i...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

XFCE Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-01-11 21:55 UTC by sphakka





      Modified:
    
2014-03-04 20:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



grknight









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xfdesktop emerge --info

              (xfdesktop.emerge.info,6.05 KB,
                text/plain)

            
2014-01-11 21:56 UTC,

            sphakka




Details





panel2 screenshot

              (xfce4-panel2.png,50.33 KB,
                image/png)

            
2014-01-11 21:57 UTC,

            sphakka




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


sphakka





          2014-01-11 21:55:24 UTC
        

Since a while, my xfdesktop has lost many icons in panels and menus, f.i.: "Action Buttons", "Devices", "Places"... (anything that should have one in File Manager). The default Panel2 shows a folder icon for "Show Desktop" and "Directory Menu" (see attached image). It looks like that any icon that wasn't installed by a specific application package refuses to show up.

I tried to remove any xfce-related session/cache .directory, and re-emerged any xfce packages as well as icon themes (Tango, Faenza, ...), at no avail. This happens irrespective of the selected icon theme.

I noticed many empty subdirs in '/usr/share/icons/hicolor/' which, someone suggested elsewhere, should instead have contents with symlinks to the current icon theme's files...

Reproducible: Always




Comment 1


sphakka





          2014-01-11 21:56:26 UTC
        

Created attachment 367662 [details]
xfdesktop emerge --info




Comment 2


sphakka





          2014-01-11 21:57:15 UTC
        

Created attachment 367664 [details]
panel2 screenshot




Comment 3


Nikolay Kichukov





          2014-01-12 06:17:21 UTC
        

Hi,
this has happened to me after I update a few days back. The problem was that the icon files were there, but I was not able to load any .png or .jpg file at all! It took me one whole day to figure out which package is the problematic one and emerge the ~amd64 version which resolved the problem for me. So if your image viewer applications are also not able to load existing .png files, you can try emerging gdk-pixbuf-2.30.1.ebuild.

HTH,
-Nikolay




Comment 4


sphakka





          2014-01-12 21:07:29 UTC
        

(In reply to Nikolay Kichukov from comment #3)
> the icon files were there, but I was not able to load any .png or .jpg file
> at all! It took me one whole day to figure out which package is the

Mmh, I have no problems with viewing/editing PNG & Co -- I regularly use 'ristretto' and 'gimp'. So I guess the problem is elsewhere...

> .png files, you can try emerging gdk-pixbuf-2.30.1.ebuild.

I might try that anyway, though I see that gdk-pixbuf-2.30.1 is hard [M]asked. Is it safe? I can't afford to break my only system...




Comment 5


Nikolay Kichukov





          2014-01-13 11:03:59 UTC
        

Hi,
this may not be related to the bug I experienced then. If you prefer to stay 'stable', do not install the masked package then.

Cheers,
-N




Comment 6


Samuli Suominen (RETIRED)






          2014-01-14 08:47:00 UTC
        

you tried re-emerging the current gdk-pixbuf, right?




Comment 7


sphakka





          2014-01-15 17:48:40 UTC
        

(In reply to Samuli Suominen from comment #6)
> you tried re-emerging the current gdk-pixbuf, right?

I did (version 2.28.2). Icons are still missing :-(




Comment 8


Samuli Suominen (RETIRED)






          2014-01-19 07:28:15 UTC
        

try `gtk-update-icon-cache -f /usr/share/icons/hicolor` and perhaps check for garbage in home directory's ~/.icons and ~/.local/share/icons

i'm going to have to ask you to update gdk-pixbuf, like in Comment #3, if you can't figure out any other reason yourself, just to narrow this down




Comment 9


sphakka





          2014-01-19 16:55:07 UTC
        

(In reply to Samuli Suominen from comment #8)
> try `gtk-update-icon-cache -f /usr/share/icons/hicolor` and perhaps check
> for garbage in home directory's ~/.icons and ~/.local/share/icons 

That didn't work.

> i'm going to have to ask you to update gdk-pixbuf, like in Comment #3

I recall I had the some problem on an Arch box which went away at a point, and indeed now gdk-pixbuf-2.30 is installed there. But the problem here is that it wants to pull in a major upgrade:

# emerge -uDpv x11-libs/gdk-pixbuf

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U #] dev-libs/glib-2.38.2:2 [2.36.4-r1:2] USE="-debug (-fam) (-selinux) -static-libs -systemtap {-test} -utils -xattr" ABI_X86="(64) -32 (-x32)" PYTHON_TARGETS="python2_7 -python2_6" 6,561 kB
[ebuild     U #] x11-libs/gdk-pixbuf-2.30.1:2 [2.28.2:2] USE="X jpeg tiff -debug -introspection -jpeg2k {-test}" 1,265 kB
[blocks B      ] <dev-libs/gobject-introspection-1.38 ("<dev-libs/gobject-introspection-1.38" is blocking dev-libs/glib-2.38.2)

...plus the block caused by

dev-python/pygobject-3.8.3 (>=dev-libs/gobject-introspection-1.34.2)

I'm definitely reluctant in venturing in what seems an unmask cascading nightmare, unless there's a safe profile that I can't use without too much tinkering -- I'm currently with "default/linux/amd64/13.0/desktop".




Comment 10


sphakka





          2014-03-04 20:25:42 UTC
        

Good news!

After a huge system cleanup + 'emerge --depclean' + reinstallation of 

  x11-themes/hicolor-icon-theme
  x11-themes/gnome-icon-theme

everything is back to normal :-)

I couldn't actually trace to where the breakage happened but I suspect a nasty mix of gtk and gtk3 USE flags (now they're both globally disabled). In particular I removed "x11-themes/gtk-engines-xfce". Also, gdk-pixbuf had nothing to do with this issue...

I guess this bug can now be marked as RESOLVED.




Comment 11


Samuli Suominen (RETIRED)






          2014-03-04 20:58:24 UTC
        

(In reply to sphakka from comment #10)
> I guess this bug can now be marked as RESOLVED.

agreed. however, too bad we never figured out the root cause.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

