Title: 150303 – emerge rox-extra/clock-2.1.7 hangs; seems like emerge is waiting for interraction ?
URL: https://bugs.gentoo.org/show_bug.cgi?id=150303

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 150303
emerge rox-extra/clock-2.1.7 hangs; seems like emerge is waiting for interraction ?
Last modified: 2006-10-07 10:02:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 150303 
      - emerge rox-extra/clock-2.1.7 hangs; seems like emerge is waiting for interraction ?


Summary:
emerge rox-extra/clock-2.1.7 hangs; seems like emerge is waiting for interrac...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Jim Ramsay (lack) (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-06 10:55 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2006-10-07 10:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




rox.eclass (replaces current /usr/portage/eclass/rox.eclass)

              (rox.eclass,4.31 KB,
                application/octet-stream)

            
2006-10-06 13:53 UTC,

            Jim Ramsay (lack) (RETIRED)




Details





clock-2.1.7.ebuild (fixed rox-clib dependency)

              (clock-2.1.7.ebuild,521 bytes,
                application/octet-stream)

            
2006-10-06 13:55 UTC,

            Jim Ramsay (lack) (RETIRED)




Details





/mnt/big/portage/clock-2.1.7/work/Clock/src/config.log

              (config.log,20.05 KB,
                application/octet-stream)

            
2006-10-06 15:17 UTC,

            DEMAINE Benoît-Pierre, aka DoubleHP




Details





Show
              Obsolete (2)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 10:55:26 UTC
        

after 5 mn waiting, I hit 'y' and enter ... then emerge crashes.

>>> Emerging (2 of 9) rox-extra/clock-2.1.7 to /
 * Clock-2.1.7.tar.gz MD5 ;-) ...                                                                                                                                                      [ ok ]
 * Clock-2.1.7.tar.gz RMD160 ;-) ...                                                                                                                                                   [ ok ]
 * Clock-2.1.7.tar.gz SHA1 ;-) ...                                                                                                                                                     [ ok ]
 * Clock-2.1.7.tar.gz SHA256 ;-) ...                                                                                                                                                   [ ok ]
 * Clock-2.1.7.tar.gz size ;-) ...                                                                                                                                                     [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                                                   [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                                                  [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                                                 [ ok ]
 * checking Clock-2.1.7.tar.gz ;-) ...                                                                                                                                                 [ ok ]
>>> Unpacking source...
>>> Unpacking Clock-2.1.7.tar.gz to /mnt/big/portage/clock-2.1.7/work
>>> Source unpacked.
>>> Compiling source in /mnt/big/portage/clock-2.1.7/work ...
./AppRun: line 27: /AppRun: No such file or directory
Compiling /mnt/big/portage/clock-2.1.7/work/Clock... please wait...
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking whether make sets $(MAKE)... yes
checking how to run the C preprocessor... gcc -E
checking for X... libraries , headers
checking for egrep... grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for unistd.h... (cached) yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking for sys/stat.h... (cached) yes
checking libintl.h usability... yes
checking libintl.h presence... yes
checking for libintl.h... yes
checking apsymbols.h usability... no
checking apsymbols.h presence... no
checking for apsymbols.h... no
checking apbuild/apsymbols.h usability... no
checking apbuild/apsymbols.h presence... no
checking for apbuild/apsymbols.h... no
checking for setlocale... yes
checking for fstat... yes
checking for stat... yes
checking for bindtextdomain... yes
checking for gettext... yes
checking for getopt_long... yes
checking for libdir... /mnt/big/portage/clock-2.1.7/work/Clock/libdir
checking for ROX-CLib via 0launch... y

Interface: http://www.kerofin.demon.co.uk/2005/interfaces/ROX-CLib
The interface is correctly signed with the following keys:
- Valid signature from 0597A2AFB6B372ACB97AC6E433B938C2E9D8826D
Do you want to trust all of these keys to sign interfaces?
Trust all [Y/N] Trusting 0597A2AFB6B372ACB97AC6E433B938C2E9D8826D
no
checking version of ROX-CLib >= 2.1.8... no
configure: error: Cannot find ROX-CLib
Compile failed
Press Return...


!!! ERROR: rox-extra/clock-2.1.7 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called rox_src_compile
  rox.eclass, line 52:   Called die

!!! Failed to compile the package
!!! If you need support, post the topmost build error, and the call stack if relevant.

(cant give emerge --info: comment becomes too long; ask me later if you really need it)




Comment 1


Jim Ramsay (lack) (RETIRED)






          2006-10-06 12:25:48 UTC
        

Do you by chance have 0install (and 0launch) somewhere on your system?

I ask because I see this on your system:

  checking for ROX-CLib via 0launch... y

And this on mine:

  checking for ROX-CLib via 0launch... no

Please try removing or renaming the '0launch' executable temporarily and retrying.




Comment 2


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 13:29:53 UTC
        

root@moon_gen:~# which 0launch
/usr/bin/0launch

mv /usr/bin/0launch /usr/bin/0launch_

checking libintl.h usability... yes
checking libintl.h presence... yes
checking for libintl.h... yes
checking apsymbols.h usability... no
checking apsymbols.h presence... no
checking for apsymbols.h... no
checking apbuild/apsymbols.h usability... no
checking apbuild/apsymbols.h presence... no
checking for apbuild/apsymbols.h... no
checking for setlocale... yes
checking for fstat... yes
checking for stat... yes
checking for bindtextdomain... yes
checking for gettext... yes
checking for getopt_long... yes
checking for libdir... /mnt/big/portage/clock-2.1.7/work/Clock/libdir
checking for ROX-CLib via 0launch... no
checking version of ROX-CLib >= 2.1.8... no
configure: error: Cannot find ROX-CLib
Compile failed
Press Return...


I have seen an old bug asking for a dep ... 




Comment 3


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 13:45:44 UTC
        

still, clock should be emergeable whatever 0launch is installed or not ..




Comment 4


Jim Ramsay (lack) (RETIRED)






          2006-10-06 13:51:53 UTC
        

Yes, I agree completely.  I just wanted to see if 0launch was actually the source of the issue.

I have a twofold solution which will be in CVS shortly.

1- Added proper rox-clib-2.1.8 dependency into the ebuild, should fix this latest problem.

2- Updated rox.class so that it will tell all configure programs not to use 0launch to find rox-clib.

The main gentoo CVS is currently down (for scheduled maintenance), but I should be committing these fixes pretty soon after it's back up, I just need to do more thorough testing on my rox.eclass changes.




Comment 5


Jim Ramsay (lack) (RETIRED)






          2006-10-06 13:53:39 UTC
        

Created attachment 99002 [details]
rox.eclass (replaces current /usr/portage/eclass/rox.eclass)

If you would be so kind as to try the replacements for clock-1.2.7.ebuild and rox.eclass I am attaching to this bug and let me know the results, I would appreciate it.




Comment 6


Jim Ramsay (lack) (RETIRED)






          2006-10-06 13:55:16 UTC
        

Created attachment 99003 [details]
clock-2.1.7.ebuild (fixed rox-clib dependency)

Update 2/2, the ebuild.

Potential issues exist if your arch is ppc.  Please let me know if this is the case.




Comment 7


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 14:08:04 UTC
        

~x86 ... testing your ebuild within 3 mn
(if I understand what to do with this rox.eclass in short time)




Comment 8


Jim Ramsay (lack) (RETIRED)






          2006-10-06 14:10:08 UTC
        

You replace your existing /usr/portage/eclass/rox.eclass with the attachment, like the attachment comment implies :)




Comment 9


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 14:17:35 UTC
        

^C have been pressed from time to time: do NOT assume everything shown have been run.

root@moon_gen:~# mv attachment.cgi\?id\=99002 rox.eclass
root@moon_gen:~# mv attachment.cgi\?id\=99003 rox.eclass
attachment.cgi?id=99003
root@moon_gen:~# mv attachment.cgi\?id\=99003 clock-2.1.7.ebuild
root@moon_gen:~# emerge ./clock-2.1.7.ebuild
emerging by path implies --oneshot... adding --oneshot to options.

*** emerging by path is broken and may not always work!!!

Calculating dependencies
!!! '/root/clock-2.1.7.ebuild is not in a valid portage tree hierarchy or does not exist'

root@moon_gen:~# cp
root@moon_gen:~# cp -a /usr/portage/eclass/rox.eclass
root@moon_gen:~# emerge ./clock-2.1.7.ebuild
root@moon_gen:~# cp -a /usr/portage/eclass/rox.eclass /tmp/
root@moon_gen:~# cp rox.eclass /usr/portage/eclass/rox.eclass
root@moon_gen:~# cp -a /usr/portage/rox- /tmp/
rox-base/  rox-extra/
root@moon_gen:~# cp -a /usr/portage/rox-extra/clock/clock-2.1.7.ebuild /tmp/
clock-2.1.7.ebuild
root@moon_gen:~# cp -a /usr/portage/rox-extra/clock/clock-2.1.7.ebuild /tmp/
root@moon_gen:~# cp clock-2.1.7.ebuild /usr/portage/rox-extra/clock/
root@moon_gen:~# emerge -va clock
{...]
root@moon_gen:~# ebuild manifest /usr/portage/rox-extra/clock/clock-2.1.7.ebuild
'/root/manifest' does not exist.
root@moon_gen:~# ebuild manifest /usr/portage/rox-extra/clock/clock-2.1.7.ebuild
root@moon_gen:~# ebuild /usr/portage/rox-extra/clock/clock-2.1.7.ebuild manifest
>>> Creating Manifest for /usr/portage/rox-extra/clock
root@moon_gen:~# emerge -va clock
checking for gettext... yes
checking for getopt_long... yes
checking for libdir... /mnt/big/portage/clock-2.1.7/work/Clock/libdir
checking version of ROX-CLib >= 2.1.8... no
configure: error: Cannot find ROX-CLib
Compile failed
Press Return...

!!! ERROR: rox-extra/clock-2.1.7 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile





Comment 10


Jim Ramsay (lack) (RETIRED)






          2006-10-06 14:28:16 UTC
        

Normally you would do (as root):
# cp rox.eclass /usr/portage/eclass/
# cp clock-2.1.7.ebuild /usr/portage/rox-extra/clock/
# ebuild /usr/portage/rox-extra/clock/clock-2.1.7.ebuild digest
# emerge -pv rox-extra/clock
# emerge rox-extra/clock

Just for kicks, what version of rox-clib do you actually have installed (if any)?
# equery list rox-clib
[ Searching for package 'rox-clib' in all categories among: ]
 * installed packages
[I--] [ ~] rox-base/rox-clib-2.1.8 (0)





Comment 11


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 14:44:43 UTC
        

I am _very_ tired ... so lets be verbose just in case

root@moon_gen:~# wget http://bugs.gentoo.org/attachment.cgi?id=99002
--23:09:09--  http://bugs.gentoo.org/attachment.cgi?id=99002
           => `attachment.cgi?id=99002'
Resolving bugs.gentoo.org... 140.211.166.163
Connecting to bugs.gentoo.org|140.211.166.163|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4,417 (4.3K) [application/octet-stream]

100%[=================================================================================================>] 4,417         22.01K/s

23:09:10 (21.93 KB/s) - `attachment.cgi?id=99002' saved [4417/4417]

root@moon_gen:~# wget http://bugs.gentoo.org/attachment.cgi?id=99003
--23:09:15--  http://bugs.gentoo.org/attachment.cgi?id=99003
           => `attachment.cgi?id=99003'
Resolving bugs.gentoo.org... 140.211.166.163
Connecting to bugs.gentoo.org|140.211.166.163|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 521 [application/octet-stream]

100%[=================================================================================================>] 521           --.--K/s

23:09:16 (18.73 MB/s) - `attachment.cgi?id=99003' saved [521/521]

root@moon_gen:~# mv attachment.cgi\?id\=99002 rox.eclass
root@moon_gen:~# mv attachment.cgi\?id\=99003 clock-2.1.7.ebuild



root@moon_gen:~# ls
aber.wifi.sh        dead.letter   e17_2.sh     elec.liste_progs  News_from_november_2005           rox.eclass      xorg.conf_plopppp
CF_epson            doc_2000      e17.all-C    fb.mga.sh         opt_portable_yann_wifi            sh              xorg.update_tuto
CF_kodak            DOM_16_linux  e17.sh       geda-suite        root_from_lost_box                URGENT.url.txt
clock-2.1.7.ebuild  doublehp      elec-all.sh  hdd_log           root_from_lost_box2_hidden_files  xorg.conf_
root@moon_gen:~# (23:24:55) Cynth_J: et cool si tu en a marre de la th




Comment 12


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 14:44:43 UTC
        

I am _very_ tired ... so lets be verbose just in case

root@moon_gen:~# wget http://bugs.gentoo.org/attachment.cgi?id=99002
--23:09:09--  http://bugs.gentoo.org/attachment.cgi?id=99002
           => `attachment.cgi?id=99002'
Resolving bugs.gentoo.org... 140.211.166.163
Connecting to bugs.gentoo.org|140.211.166.163|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4,417 (4.3K) [application/octet-stream]

100%[=================================================================================================>] 4,417         22.01K/s

23:09:10 (21.93 KB/s) - `attachment.cgi?id=99002' saved [4417/4417]

root@moon_gen:~# wget http://bugs.gentoo.org/attachment.cgi?id=99003
--23:09:15--  http://bugs.gentoo.org/attachment.cgi?id=99003
           => `attachment.cgi?id=99003'
Resolving bugs.gentoo.org... 140.211.166.163
Connecting to bugs.gentoo.org|140.211.166.163|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 521 [application/octet-stream]

100%[=================================================================================================>] 521           --.--K/s

23:09:16 (18.73 MB/s) - `attachment.cgi?id=99003' saved [521/521]

root@moon_gen:~# mv attachment.cgi\?id\=99002 rox.eclass
root@moon_gen:~# mv attachment.cgi\?id\=99003 clock-2.1.7.ebuild



root@moon_gen:~# ls
aber.wifi.sh        dead.letter   e17_2.sh     elec.liste_progs  News_from_november_2005           rox.eclass      xorg.conf_plopppp
CF_epson            doc_2000      e17.all-C    fb.mga.sh         opt_portable_yann_wifi            sh              xorg.update_tuto
CF_kodak            DOM_16_linux  e17.sh       geda-suite        root_from_lost_box                URGENT.url.txt
clock-2.1.7.ebuild  doublehp      elec-all.sh  hdd_log           root_from_lost_box2_hidden_files  xorg.conf_
root@moon_gen:~# (23:24:55) Cynth_J: et cool si tu en a marre de la théorie je veux de la pratique :)! donc tu es du genre a penser: que cest
 lemotion du geste qi compte?
root@moon_gen:~# cp rox.eclass /usr/portage/eclass/
root@moon_gen:~# cp clock-2.1.7.ebuild /usr/portage/rox-extra/clock/
root@moon_gen:~# ebuild /usr/portage/rox-extra/clock/clock-2.1.7.ebuild digest
>>> Creating Manifest for /usr/portage/rox-extra/clock
root@moon_gen:~# emerge -pv rox-extra/clock

These are the packages that would be merged, in order:

emerge rox-extra/clockCalculating dependencies... done!
[ebuild     U ] rox-extra/clock-2.1.7 [2.1.6] 0 kB

Total size of downloads: 0 kB
root@moon_gen:~# emerge rox-extra/clock
Calculating dependencies... done!

>>> Emerging (1 of 1) rox-extra/clock-2.1.7 to /
 * Clock-2.1.7.tar.gz MD5 ;-) ...                                                                                                                           [ ok ]
 * Clock-2.1.7.tar.gz RMD160 ;-) ...                                                                                                                        [ ok ]
 * Clock-2.1.7.tar.gz SHA1 ;-) ...                                                                                                                          [ ok ]
 * Clock-2.1.7.tar.gz SHA256 ;-) ...                                                                                                                        [ ok ]
 * Clock-2.1.7.tar.gz size ;-) ...                                                                                                                          [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                        [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                       [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                      [ ok ]
 * checking Clock-2.1.7.tar.gz ;-) ...                                                                                                                      [ ok ]
>>> Unpacking source...
>>> Unpacking Clock-2.1.7.tar.gz to /mnt/big/portage/clock-2.1.7/work
>>> Source unpacked.
>>> Compiling source in /mnt/big/portage/clock-2.1.7/work ...
 * Running SED
./AppRun: line 27: /AppRun: No such file or directory
Compiling /mnt/big/portage/clock-2.1.7/work/Clock... please wait...
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking whether make sets $(MAKE)... yes
checking how to run the C preprocessor... gcc -E
checking for X... libraries , headers
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for unistd.h... (cached) yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking for sys/stat.h... (cached) yes
checking libintl.h usability... yes
checking libintl.h presence... yes
checking for libintl.h... yes
checking apsymbols.h usability... no
checking apsymbols.h presence... no
checking for apsymbols.h... no
checking apbuild/apsymbols.h usability... no
checking apbuild/apsymbols.h presence... no
checking for apbuild/apsymbols.h... no
checking for setlocale... yes
checking for fstat... yes
checking for stat... yes
checking for bindtextdomain... yes
checking for gettext... yes
checking for getopt_long... yes
checking for libdir... /mnt/big/portage/clock-2.1.7/work/Clock/libdir
checking version of ROX-CLib >= 2.1.8... no
configure: error: Cannot find ROX-CLib
Compile failed
Press Return...

!!! ERROR: rox-extra/clock-2.1.7 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called rox_src_compile
  rox.eclass, line 71:   Called die

!!! Failed to compile the package
!!! If you need support, post the topmost build error, and the call stack if relevant.





Comment 13


Jim Ramsay (lack) (RETIRED)






          2006-10-06 14:56:53 UTC
        

Thanks for your patience!

It looks to me like the rox.eclass fix is working fine, it's not even looking for 0launch at configure time any more.  Good.

This leaves your dependency issue.  Do you have rox-clib installed already?  If so, what version?  Please send the ouput from:
# equery list rox-clib




Comment 14


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 14:59:37 UTC
        

root@moon_gen:~# equery list rox-clib
[ Searching for package 'rox-clib' in all categories among: ]
 * installed packages
[I--] [ ~] rox-base/rox-clib-2.1.8 (0)

I ll stay online for ~1h left. For faster exchanges just email me.




Comment 15


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:02:59 UTC
        

checking version of ROX-CLib >= 2.1.8... no
configure: error: Cannot find ROX-CLib

very strange:

root@moon_gen:~# emerge -vp rox-base/rox-clib
Calculating dependencies... done!
[ebuild   R   ] rox-base/rox-clib-2.1.8  426 kB

Total size of downloads: 426 kB
root@moon_gen:~# equery files =rox-base/rox-clib-2.1.8 |wc
    306     306   12719





Comment 16


Jim Ramsay (lack) (RETIRED)






          2006-10-06 15:12:07 UTC
        

Okay, I have committed this into CVS now.  It should solve your initial 0launch problem.

As for your dependency issues, that's very very odd.  If rox-clib is installed, the config script should just be able to find it.

I wonder if 0launch is messing with your library paths too.  Can you send me the contents of your /var/tmp/portage/clock-2.1.7/work/Clock/src/config.log please?




Comment 17


Jim Ramsay (lack) (RETIRED)






          2006-10-06 15:12:38 UTC
        

Comment on attachment 99002 [details]
rox.eclass (replaces current /usr/portage/eclass/rox.eclass)

Now in CVS




Comment 18


Jim Ramsay (lack) (RETIRED)






          2006-10-06 15:12:51 UTC
        

Comment on attachment 99003 [details]
clock-2.1.7.ebuild (fixed rox-clib dependency)

Now in CVS




Comment 19


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:14:47 UTC
        

atatching my log

about when should update be available ? (UTC time, or ETA after any post)




Comment 20


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:17:16 UTC
        

Created attachment 99009 [details]
/mnt/big/portage/clock-2.1.7/work/Clock/src/config.log




Comment 21


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:20:47 UTC
        

configure:4146: checking for getopt_long
configure:4202: gcc -o conftest -O2 -march=pentium3 -pipe   conftest.c  >&5
configure:4208: $? = 0
configure:4215: test -z "$ac_c_werror_flag" || test ! -s conftest.err
configure:4218: $? = 0
configure:4225: test -s conftest
configure:4228: $? = 0
configure:4242: result: yes
configure:4456: checking for libdir
configure:4484: result: /mnt/big/portage/clock-2.1.7/work/Clock/libdir
configure:4498: checking version of ROX-CLib >= 2.1.8
configure:4512: result: no
configure:4550: error: Cannot find ROX-CLib

If it ever said what it tested, and where it looked at, I could check why it did not find it ...




Comment 22


Jim Ramsay (lack) (RETIRED)






          2006-10-06 15:21:55 UTC
        

Aha, it's probably the magic 'libdir' script.

Okay, one more idea.  Try this:

# export LIBDIRPATH="/usr/lib"
# emerge clock
(hopefully this will work)
# Clock
(hopefully it will run)

If this works it will take some more tinkering for it to actually run properly all the time, and I'm going to have to learn more about the magic of 0install.

By the way, I believe the new versions of these files should be available to 'emerge sync' some time in the next hour or so, depending on which mirrors you use.




Comment 23


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:25:05 UTC
        

(In reply to comment #21)
> # export LIBDIRPATH="/usr/lib"
> # emerge clock
> (hopefully this will work)
> # Clock
> (hopefully it will run)

LOL !!!

lets try, but first:

root@moon_gen:~# ls /usr/lib/ROX-CLib/
AppInfo.xml   .DirIcon      Linux-ix86/   ROX-CLib.xml
AppRun        Help/         Messages/     src/
root@moon_gen:~# ls /usr/lib/ROX-CLib/ -l
total 28
-rw-r--r-- 1 root root 1183 2006-07-06 13:30 AppInfo.xml
-rwxr-xr-x 1 root root 1599 2006-07-06 13:30 AppRun
drwxr-xr-x 4 root root 4096 2006-07-06 13:30 Help
drwxr-xr-x 5 root root 4096 2006-01-17 21:16 Linux-ix86
drwxr-xr-x 3 root root 4096 2006-07-06 13:30 Messages
-rw-r--r-- 1 root root  841 2006-07-06 13:30 ROX-CLib.xml
drwxr-xr-x 3 root root 4096 2006-07-06 13:30 src

means 0launche passed around; you know what I mean if u ever used it ...




Comment 24


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:28:15 UTC
        

(In reply to comment #21)
> # export LIBDIRPATH="/usr/lib"
> # emerge clock
> (hopefully this will work)

yes

> # Clock
> (hopefully it will run)

yes

(wait 1mn, an other test do do after that)




Comment 25


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-06 15:31:34 UTC
        

root@moon_gen:~# mv /usr/bin/0launch_ /usr/bin/0launch

root@moon_gen:~# emerge -va clock

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] rox-extra/clock-2.1.7  0 kB

checking for getopt_long... yes
checking for libdir... /mnt/big/portage/clock-2.1.7/work/Clock/libdir
checking version of ROX-CLib >= 2.1.8... yes
checking for altzone... no
checking version information... version 2.1.7 (18 March 2006)
configure: creating ./config.status
config.status: creating Makefile

WORKSFORME

You can close the bug if you feel like it.

When will portage CVS be up to date ? within 10mn ? 1h ? 4h ?




Comment 26


Jim Ramsay (lack) (RETIRED)






          2006-10-07 07:21:30 UTC
        

Does it now work every time?  For example, if you start up a new shell and run:
# Clock
As a regular user, does it actually run properly?




Comment 27


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-07 10:00:54 UTC
        

dhp@moon_gen:~$ Clock
/usr/lib/rox/Clock/AppRun: line 27: /AppRun: No such file or directory
/usr/lib/rox/Clock/Linux-ix86/Clock: error while loading shared libraries: librox-clib.so.6: cannot open shared object file: No such file or directory




Comment 28


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-10-07 10:02:07 UTC
        

dhp@moon_gen:~$ export LIBDIRPATH="/usr/lib"
dhp@moon_gen:~$ Clock && echo OK
OK
dhp@moon_gen:~$










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

