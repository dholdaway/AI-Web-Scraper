Title: 289985 – dev-libs/cyrus-sasl has a postinstall problem with /usr/sbin/saslpasswd2
URL: https://bugs.gentoo.org/show_bug.cgi?id=289985

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 289985
dev-libs/cyrus-sasl has a postinstall problem with /usr/sbin/saslpasswd2
Last modified: 2012-03-12 11:07:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 289985 
      - dev-libs/cyrus-sasl has a postinstall problem with /usr/sbin/saslpasswd2


Summary:
dev-libs/cyrus-sasl has a postinstall problem with /usr/sbin/saslpasswd2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

FreeBSD

  (show other bugs)



Hardware:

All
        FreeBSD
      







Importance:
      
High
       normal
      


Assignee:

Gentoo/BSD Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-21 11:47 UTC by Dmitri Bogomolov





      Modified:
    
2012-03-12 11:07 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



andreas.mack
lil_tux









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,3.21 KB,
                text/plain)

            
2009-10-21 11:51 UTC,

            Dmitri Bogomolov




Details





emerge_info

              (emegre_info.txt,3.56 KB,
                text/plain)

            
2009-12-01 09:54 UTC,

            Yuri Bebesh




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dmitri Bogomolov





          2009-10-21 11:47:02 UTC
        

After installing dev-libs/cyrus-sasl I always get this messages:

 * Generating an empty sasldb2 with correct permissions ...
/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/temp/environment: line 4671: //usr/sbin/saslpasswd2: No such file or directory
 * ERROR: dev-libs/cyrus-sasl-2.1.23-r1 failed:
 *   Failed to generate sasldb2
 * 
 * Call stack:
 *     ebuild.sh, line  49:  Called pkg_postinst
 *   environment, line 4671:  Called die
 * The specific snippet of code:
 *           echo "p" | "${ROOT}/usr/sbin/saslpasswd2" -f "${ROOT}/etc/sasl2/sasldb2" -p login || die "Failed to generate sasldb2";
 * 
 * If you need support, post the output of 'emerge --info =dev-libs/cyrus-sasl-2.1.23-r1',
 * the complete build log and the output of 'emerge -pqv =dev-libs/cyrus-sasl-2.1.23-r1'.
!!! When you file a bug report, please include the following information:
GENTOO_VM=  CLASSPATH="" JAVA_HOME=""
JAVACFLAGS="" COMPILER=""
and of course, the output of emerge --info
 * The complete build log is located at '/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/temp/environment'.
 * S: '/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/work/cyrus-sasl-2.1.23'
!!! FAILED postinst: 1

Reproducible: Always




Comment 1


Dmitri Bogomolov





          2009-10-21 11:51:37 UTC
        

Created attachment 207808 [details]
emerge --info




Comment 2


Heiko





          2009-10-22 16:43:35 UTC
        

Hmm the ebuild reads:
  echo "p" | "${EROOT}/usr/sbin/saslpasswd2" -f "${EROOT}/etc/sasl2/sasldb2" -p login \
            || die "Failed to generate sasldb2"
whereas your error reads:
  echo "p" | "${ROOT}/usr/sbin/saslpasswd2" -f "${ROOT}/etc/sasl2/sasldb2" -p login || die "Failed to generate sasldb2";

Do you have cyrus-sasl already installed and try to upgrade it? Then maybe you need to unmerge it and reinstall it. Anyway, try syncing, uninstalling and reinstalling cyrus-sasl.




Comment 3


Heiko





          2009-10-22 16:47:01 UTC
        

(In reply to comment #2)
> Hmm the ebuild reads:
>   echo "p" | "${EROOT}/usr/sbin/saslpasswd2" -f "${EROOT}/etc/sasl2/sasldb2" -p
> login \
>             || die "Failed to generate sasldb2"
> whereas your error reads:
>   echo "p" | "${ROOT}/usr/sbin/saslpasswd2" -f "${ROOT}/etc/sasl2/sasldb2" -p
> login || die "Failed to generate sasldb2";
> 
> Do you have cyrus-sasl already installed and try to upgrade it? Then maybe you
> need to unmerge it and reinstall it. Anyway, try syncing, uninstalling and
> reinstalling cyrus-sasl.
> 

Ok, screw my post, i was thinking that was about Gentoo/Prefix rather than Gentoo/Alt-FreeBSD. Sorry for the noise :/





Comment 4


Dmitri Bogomolov





          2009-10-23 14:19:45 UTC
        

(In reply to comment #3)

> > Do you have cyrus-sasl already installed and try to upgrade it? Then maybe you
> > need to unmerge it and reinstall it. Anyway, try syncing, uninstalling and
> > reinstalling cyrus-sasl.
> > 
> 
> Ok, screw my post, i was thinking that was about Gentoo/Prefix rather than
> Gentoo/Alt-FreeBSD. Sorry for the noise :/
> 

I have a server with Gentoo/FreeBSD-6.2 and now trying 7.2. I seen this error during all other installations. I don't really use sasl now, so can't diagnose whether it works at all. I see that /usr/sbin/saslpasswd2 not installed.




Comment 5


Dmitri Bogomolov





          2009-10-26 14:36:43 UTC
        

my use-flags:
berkdb crypt ldap* pam postgres ssl -authdaemond -gdbm (-java) (-kerberos) -mysql -ntlm_unsupported_patch -sample -sqlite -srp -urandom




Comment 6


Yuri Bebesh





          2009-12-01 09:54:19 UTC
        

Created attachment 211667 [details]
emerge_info




Comment 7


Yuri Bebesh





          2009-12-01 09:54:48 UTC
        

I have this error too.

 *
 * ERROR: dev-libs/cyrus-sasl-2.1.23-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called pkg_postinst
 *             environment, line 4635:  Called die
 * The specific snippet of code:
 *           echo "p" | "${ROOT}/usr/sbin/saslpasswd2" -f "${ROOT}/etc/sasl2/sasldb2" -p login || die "Failed to generate sasldb2";
 *  The die message:
 *   Failed to generate sasldb2
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-libs/cyrus-sasl-2.1.23-r1/temp/environment'.
 *

 * GNU info directory index is up-to-date.


my emerge info:
http://bugs.gentoo.org/attachment.cgi?id=211667&action=edit




Comment 8


Dmitri Bogomolov





          2011-02-08 19:32:08 UTC
        

There is no problem in g/fbsd-8.0 with =dev-libs/cyrus-sasl-2.1.23-r2. /usr/sbin/saslpasswd2 present.

Can't change Version field of this bug.




Comment 9


Dmitri Bogomolov





          2012-03-12 11:07:31 UTC
        

This no longer reproduced i think.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

