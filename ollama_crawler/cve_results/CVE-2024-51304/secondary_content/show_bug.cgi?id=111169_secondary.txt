Title: 111169 – dev-php/php-4.4.0-r2 fails while configure step with gdbm and berkdb USE flag
URL: https://bugs.gentoo.org/show_bug.cgi?id=111169

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 111169
dev-php/php-4.4.0-r2 fails while configure step with gdbm and berkdb USE flag
Last modified: 2005-11-23 17:10:23 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 111169 
      - dev-php/php-4.4.0-r2 fails while configure step with gdbm and berkdb USE flag


Summary:
dev-php/php-4.4.0-r2 fails while configure step with gdbm and berkdb USE flag
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

113413

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-11-01 10:05 UTC by Thomas Meyer





      Modified:
    
2005-11-23 17:10 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



keaneyw









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Meyer





          2005-11-01 10:05:27 UTC
        

When installing php-4.4 with USE flags berkdb and gdbm, the confiugure step
fails with:
"Configuring extensions
checking for OpenSSL support... yes
checking for Kerberos support... no
checking for pkg-config... /usr/bin/pkg-config
checking for OpenSSL version... >= 0.9.6
checking for CRYPTO_free in -lcrypto... yes
checking for SSL_CTX_set_ssl_version in -lssl... yes
checking for ZLIB support... yes
checking if the location of ZLIB install directory is defined... /usr
checking for gzgets in -lz... yes
checking whether to enable bc style precision math functions... yes
checking for BZip2 support... yes
checking for BZ2_bzerror in -lbz2... yes
checking whether to enable calendar conversion support... yes
checking for cpdflib support... no
checking for CRACKlib support... no
checking whether to enable ctype functions... yes
checking for CURL support... yes
checking for cURL 7.9.8 or greater... libcurl 7.15.0
checking for curl_easy_perform in -lcurl... yes
checking for curl_version_info in -lcurl... yes
checking for cyrus imap support... no
checking for xDBM support... no
checking whether to enable DBA... no
checking for gdbm_open in -lgdbm... yes
checking for GDBM support... yes
configure: error: DBA: Could not find necessary header file(s)."

emerge dev-php/php --verbose --pretend gives "

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] dev-php/php-4.4.0-r2  +X +berkdb* +crypt +curl -debug -doc
-fdftk -firebird -flash -freetds +gd -gd-external +gdbm -gmp -hardenedphp -imap
-informix +ipv6 +java +jpeg -kerberos +ldap -mcal -memlimit -mssql +mysql
+ncurses +nls -oci8 -odbc +pam +png -postgres +readline -snmp +spell +ssl +tiff
+truetype +xml2 -yaz 0 kB"

"
as you can see i always compile php without berkdb support. without berkdb
support php configures and compiles correctly.

seems to be an error in the configure command of php.
headers for gdbm. are under "

ls -l /usr/include/gdbm*
-rw-r--r--  1 root root 4744 24. Sep 21:51 /usr/include/gdbm.h

/usr/include/gdbm:
insgesamt 8
-rw-r--r--  1 root root 1563 24. Sep 21:51 dbm.h
lrwxrwxrwx  1 root root   18 23. M




Comment 1


Thomas Meyer





          2005-11-01 10:05:27 UTC
        

When installing php-4.4 with USE flags berkdb and gdbm, the confiugure step
fails with:
"Configuring extensions
checking for OpenSSL support... yes
checking for Kerberos support... no
checking for pkg-config... /usr/bin/pkg-config
checking for OpenSSL version... >= 0.9.6
checking for CRYPTO_free in -lcrypto... yes
checking for SSL_CTX_set_ssl_version in -lssl... yes
checking for ZLIB support... yes
checking if the location of ZLIB install directory is defined... /usr
checking for gzgets in -lz... yes
checking whether to enable bc style precision math functions... yes
checking for BZip2 support... yes
checking for BZ2_bzerror in -lbz2... yes
checking whether to enable calendar conversion support... yes
checking for cpdflib support... no
checking for CRACKlib support... no
checking whether to enable ctype functions... yes
checking for CURL support... yes
checking for cURL 7.9.8 or greater... libcurl 7.15.0
checking for curl_easy_perform in -lcurl... yes
checking for curl_version_info in -lcurl... yes
checking for cyrus imap support... no
checking for xDBM support... no
checking whether to enable DBA... no
checking for gdbm_open in -lgdbm... yes
checking for GDBM support... yes
configure: error: DBA: Could not find necessary header file(s)."

emerge dev-php/php --verbose --pretend gives "

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] dev-php/php-4.4.0-r2  +X +berkdb* +crypt +curl -debug -doc
-fdftk -firebird -flash -freetds +gd -gd-external +gdbm -gmp -hardenedphp -imap
-informix +ipv6 +java +jpeg -kerberos +ldap -mcal -memlimit -mssql +mysql
+ncurses +nls -oci8 -odbc +pam +png -postgres +readline -snmp +spell +ssl +tiff
+truetype +xml2 -yaz 0 kB"

"
as you can see i always compile php without berkdb support. without berkdb
support php configures and compiles correctly.

seems to be an error in the configure command of php.
headers for gdbm. are under "

ls -l /usr/include/gdbm*
-rw-r--r--  1 root root 4744 24. Sep 21:51 /usr/include/gdbm.h

/usr/include/gdbm:
insgesamt 8
-rw-r--r--  1 root root 1563 24. Sep 21:51 dbm.h
lrwxrwxrwx  1 root root   18 23. Mär 2005  gdbm -> /usr/include//gdbm
-rw-r--r--  1 root root 2003 24. Sep 21:51 ndbm.h
"





Reproducible: Always
Steps to Reproduce:
1.emerge dev-php/php
2.
3.

Actual Results:  
configure step fails

Expected Results:  
php should compile and install completly.

last lines of config.log:
"configure:17975: checking for ZLIB support
configure:18021: checking if the location of ZLIB install directory is defined
configure:18374: checking for gzgets in -lz
configure:18393: gcc -o conftest -march=athlon-xp -O3 -pipe   -L/usr/X11R6/lib -
ltiff -L/usr/lib conftest.c -lz  -lssl -lcrypto -lresolv -lm  -lxmlparse -lxmlto
k 1>&5
configure:18531: checking whether to enable bc style precision math functions
configure:18825: checking for BZip2 support
configure:18969: checking for BZ2_bzerror in -lbz2
configure:18988: gcc -o conftest -march=athlon-xp -O3 -pipe   -L/usr/X11R6/lib -
ltiff -L/usr/lib conftest.c -lbz2  -lz -lssl -lcrypto -lresolv -lm  -lxmlparse -
lxmltok 1>&5
configure:19383: checking whether to enable calendar conversion support
configure:19662: checking for cpdflib support
configure:20841: checking for CRACKlib support
configure:21265: checking whether to enable ctype functions
configure:21540: checking for CURL support
configure:21607: checking for cURL 7.9.8 or greater
configure:21907: checking for curl_easy_perform in -lcurl
configure:21926: gcc -o conftest -march=athlon-xp -O3 -pipe   -L/usr/X11R6/lib -
ltiff -L/usr/lib -lcurl -lssl -lcrypto -ldl -lz conftest.c -lcurl  -lcurl -lbz2
-lz -lssl -lcrypto -lresolv -lm  -lxmlparse -lxmltok -lcurl -lssl -lcrypto -ldl
-lz 1>&5
configure:22045: checking for curl_version_info in -lcurl
configure:22064: gcc -o conftest -march=athlon-xp -O3 -pipe   -L/usr/X11R6/lib -
ltiff -L/usr/lib -lcurl -lssl -lcrypto -ldl -lz conftest.c -lcurl  -lcurl -lbz2
-lz -lssl -lcrypto -lresolv -lm  -lxmlparse -lxmltok -lcurl -lssl -lcrypto -ldl
-lz 1>&5
configure:22331: checking for cyrus imap support
configure:23256: checking for xDBM support
configure:23887: checking whether to enable DBA
configure:24026: checking for gdbm_open in -lgdbm
configure:24045: gcc -o conftest -march=athlon-xp -O3 -pipe   -L/usr/X11R6/lib -
ltiff -L/usr/lib conftest.c -lgdbm  -lcurl -lbz2 -lz -lssl -lcrypto -lresolv -lm
  -lxmlparse -lxmltok -lcurl -lssl -lcrypto -ldl -lz 1>&5
configure:24212: checking for GDBM support
"




Comment 2


Luca Longinotti (RETIRED)






          2005-11-03 08:56:47 UTC
        

It may be that this is occasionally broken with the old-style PHP, reemerge
sys-libs/db-1*, sys-libs/db-4* and sys-libs/gdbm, and then try again.
But, if possible, please upgrade to dev-lang/php, the new PHP ebuilds that will
sobstitute the old dev-php/php, dev-php/php-cgi and dev-php/mod_php.
Please take a look at the upgrading documentation:
http://svn.gnqs.org/projects/gentoo-php-overlay/file/docs/php-upgrading.html?format=raw
And, even if the packages are still marked as masked (~ARCH) they're much better
and stabler than the old PHP packages.
Best regards, CHTEKK.




Comment 3


Jakub Moc (RETIRED)






          2005-11-23 17:10:23 UTC
        

*** Bug 113413 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

