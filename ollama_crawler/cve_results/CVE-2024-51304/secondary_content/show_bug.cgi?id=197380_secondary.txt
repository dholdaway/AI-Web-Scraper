Title: 197380 – app-text/jadetex-3.13-r2: emerge dies during src_install
URL: https://bugs.gentoo.org/show_bug.cgi?id=197380

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 197380
app-text/jadetex-3.13-r2: emerge dies during src_install
Last modified: 2009-10-29 03:45:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 197380 
      - app-text/jadetex-3.13-r2: emerge dies during src_install


Summary:
app-text/jadetex-3.13-r2: emerge dies during src_install
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

TeX project








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

209212

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-10-29 07:49 UTC by Adam Piątyszek





      Modified:
    
2009-10-29 03:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



farcaller









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Adam Piątyszek





          2007-10-29 07:49:02 UTC
        

Hi!

The latest jadetex in portage tree can not be emerged with currently stabilising texlive-2007, but it is a depencency of app-text/texlive-2007 ebuild. Here are the relevant parts of the build log that shows the errors:

[...]
(/usr/share/texmf-dist/tex/latex/ltxmisc/ulem.sty)This is pdfTeXk, Version 3.141
592-1.40.3 (Web2C 7.5.6) (INITEX)
 %&-line parsing enabled.
---! //var/lib/texmf/web2c/pdflatex.fmt was written by pdfetex
(Fatal format file error; I'm stymied)
make: *** [pdfjadetex.fmt] Błąd 1
make: *** Oczekiwanie na niezakończone zadania....

[...]
Transcript written on jadetex.log.
 * 
 * ERROR: app-text/jadetex-3.13-r2 failed.
 * Call stack:
 *                ebuild.sh, line 1695:  Called dyn_install
 *                ebuild.sh, line 1132:  Called qa_call 'src_install'
 *                ebuild.sh, line   44:  Called src_install
 *   jadetex-3.13-r2.ebuild, line   45:  Called die
 * The specific snippet of code:
 *      emake DESTDIR="${D}" install || die
 *  The die message:
 *   (no error message)
 * 


Reproducible: Always

Steps to Reproduce:
1. emerge texlive-2007:

# emerge -av =app-text/texlive-2007

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ] app-text/jadetex-3.13-r2  0 kB 
[ebuild  N    ] dev-texlive/texlive-htmlxml-2007-r1  USE="-doc" 0 kB 
[ebuild  N    ] app-text/texlive-2007  USE="X -cjk -context -cyrillic -doc -extra -games graphics -humanities -music -omega png pstricks -publishers science xetex xml" LINGUAS="-af -ar -bg -bn -cs -cy -da -de -el en -en_GB -eo -es -et -fi -fr -he -hi -hr -hsb -hy -id -is -it -ja -ko -la -ml -mn -nl -no pl -pt -ro -ru -sk -sl -sr -sv -ta -th -tr -uk -vi -zh" 0 kB 

Actual Results:  
Emerging dies on "emake ... install"


The output of "emerge --info":

Portage 2.1.3.16 (default-linux/x86/2007.0/desktop, gcc-4.2.2, glibc-2.6.1-r0, 2.6.22-gentoo-r8 i686)
=================================================================
System uname: 2.6.22-gentoo-r8 i686 Intel(R) Core(TM)2 CPU T7200 @ 2.00GHz
Timestamp of tree: Mon, 29 Oct 2007 06:00:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--alphabetical"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://trumpetti.atm.tut.fi/gentoo/ http://gentoo.zie.pg.gda.pl"
LANG="pl_PL.UTF-8"
LC_ALL="pl_PL.UTF-8"
LINGUAS="en pl"
MAKEOPTS="-s -j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/science /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="16bit 7zip X a52 aac acpi alsa aoss apache2 arj atlas auctex avi bash-completion berkdb bidi bitmap-fonts blas bzip2 cairo cblas cdda cddb cdparanoia cdr crypt cups curl dbus dhcp dillo divx dlloader dri dts dvd dvdr dvdread dvi edl emacs emacs-w3 encode exif exo extras fam fbcon fftw firefox flac foomaticdb fortran gd gdbm gif gmedia gpm gstreamer gtk gtk2 gzip-el hal i8x0 icq idle imagemagick imap imlib irda jabber javascript jpeg jpeg2k lapack lcd leim libnotify logrotate mad maildir mailwrapper md5sum mmx mmxext motif mozdevelop moznocompose moznoirc moznomail mozsvg mp3 mpeg mplayer musepack ncurses nls nptl nptlonly nsplugin objc++ ogg opengl openmp pcre pdf perl plotutils plugins pmu png ppds preview-latex python qa quicktime rar readline real realmedia rtc sasl sdl session slang smime spell srv sse sse2 ssl ssse3 startup-notification svg symlink tcpd tetex theora thumbnail tiff toolkit-scroll-bars trayicon truetype type1 unicode usb userlocales vcd vorbis wifi win32codecs wma wmf wmp x86 xforms xfs xft xhtml xml xorg xosd xprint xscreensaver xslt xv xvid xvmc zip zlib zsh-completion" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en pl" USERLAND="GNU" VIDEO_CARDS="i810"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Alexis Ballier






          2007-10-29 08:01:11 UTC
        

could you please attach the /var/lib/texmf/ls-R file ?




Comment 2


Alexis Ballier






          2007-10-29 08:05:35 UTC
        

actually, here pdflatex.fmt is at: /var/lib/texmf/web2c/pdftex/pdflatex.fmt
so I suppose your pdflatex.fmt is some stray format files from tetex since it's written by pdfetex.


could you remove files in /var/lib/texmf/web2c and run texmf-update ?




Comment 3


Adam Piątyszek





          2007-10-29 08:28:35 UTC
        

Hi!

(In reply to comment #2)
> could you remove files in /var/lib/texmf/web2c and run texmf-update ?

That did the trick. Thanks! ;-)

Maybe you should give some warning message before installing some of the texlive packages (e.g. texlive-core) to remove this directory with old TeX configs?

BR,
/Adam





Comment 4


Alexis Ballier






          2007-10-29 09:47:03 UTC
        

there is a draft doc there :
http://dev.gentoo.org/~aballier/migrationhowto.xml

it should explain how to safely remove tetex, but I still have to improve it. Once it'll be an official doc, I'll add a pointer in the texlive-core ebuild.




Comment 5


Jakub Moc (RETIRED)






          2008-02-07 16:03:49 UTC
        

*** Bug 209212 has been marked as a duplicate of this bug. ***




Comment 6


Roger





          2009-10-29 03:45:04 UTC
        

I have run into this bug while emerging -e world for a gcc-4.3.4 upgrade.

 # qfile /var/lib/texmf/web2c
 dev-texlive/texlive-latex (/var/lib/texmf/web2c)
 dev-texlive/texlive-basic (/var/lib/texmf/web2c)

 (also, jadetex-3.13-r2 used to own some of those files as well.)

Since jadetex is the first to be emerged, then the texlive packages, it's likely really safe to just rm -rf /var/lib/texmf/web2c as comment #2 states.  And then execute "texmf-update".

Seems jadetex might be slightly outdated as well!










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

