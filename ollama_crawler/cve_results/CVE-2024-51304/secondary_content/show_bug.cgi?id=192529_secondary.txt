Title: 192529 – update from apache 2.2.4 to 2.2.6 creates two ssl default vhosts causing apache not to restart
URL: https://bugs.gentoo.org/show_bug.cgi?id=192529

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 192529
update from apache 2.2.4 to 2.2.6 creates two ssl default vhosts causing apache not to restart
Last modified: 2007-09-14 17:30:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 192529 
      - update from apache 2.2.4 to 2.2.6 creates two ssl default vhosts causing apache not to restart


Summary:
update from apache 2.2.4 to 2.2.6 creates two ssl default vhosts causing apac...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-09-14 17:12 UTC by Kai Dietrich





      Modified:
    
2007-09-14 17:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kai Dietrich





          2007-09-14 17:12:22 UTC
        

I "emerge -auDNv apache" upgraded my apache 2.2.4 (IIRC) to the new 2.2.6 and did an etc-update afterwards.
"/etc/init.d/apache2 restart" results in:
 * Stopping apache2 ... [ ok ]
 * Starting apache2 ...
[Fri Sep 14 19:01:16 2007] [warn] _default_ VirtualHost overlap on port 443, the first has precedence [ !! ]

afterwards no apache2 task is running

the cause for this is, that there is an obviously obsolete /etc/apache2/modules.d/41_mod_ssl.default-vhost.conf
with some errorneous settings.
( eg. "ErrorLog logs/ssl_error_log" resulting in: 
/var/logs/apache2/error_log:

(2)No such file or directory: apache2: could not open error log file /usr/lib/apache2/logs/ssl_error_log.
Unable to open logs )



Reproducible: Didn't try

Steps to Reproduce:
I don't know which part of my emerge/etc-update procedure causes the config problems but i guess it's just the update form 2.2.4 to 2.2.6 so:
1. "emerge -auDNv apache"

ofcourse this probably only happens if
/etc/conf.d/apache2 has
"APACHE2_OPTS="-D SSL_DEFAULT_VHOST""
enabled




Comment 1


Jakub Moc (RETIRED)






          2007-09-14 17:23:01 UTC
        

Neither 2.2.4 nor 2.2.6 installs /etc/apache2/modules.d/41_mod_ssl.default-vhost.conf - you can check the tarballs yourself. You have a stale junk left after apache-2.0.x; delete the orphaned file and move on.

http://dev.gentoo.org/~hollow/dist/apache/gentoo-apache-2.2.4-r12-20070819.tar.bz2
http://dev.gentoo.org/~hollow/dist/apache/gentoo-apache-2.2.6-20070907.tar.bz2




Comment 2


Kai Dietrich





          2007-09-14 17:30:19 UTC
        

Hmm, strange. But 2.2.4 worked fine while 2.2.6 didn't - with the same orphaned file in place. And it took me some time to figure out what happened.

(In reply to comment #1)
> Neither 2.2.4 nor 2.2.6 installs
> /etc/apache2/modules.d/41_mod_ssl.default-vhost.conf - you can check the
> tarballs yourself. You have a stale junk left after apache-2.0.x; delete the
> orphaned file and move on.
> 
> http://dev.gentoo.org/~hollow/dist/apache/gentoo-apache-2.2.4-r12-20070819.tar.bz2
> http://dev.gentoo.org/~hollow/dist/apache/gentoo-apache-2.2.6-20070907.tar.bz2
> 











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

