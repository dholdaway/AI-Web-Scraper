Title: 122791 – fontconfig-2.2.3: ugly default japanese fonts
URL: https://bugs.gentoo.org/show_bug.cgi?id=122791

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 122791
fontconfig-2.2.3: ugly default japanese fonts
Last modified: 2006-02-16 12:09:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 122791 
      - fontconfig-2.2.3: ugly default japanese fonts


Summary:
fontconfig-2.2.3: ugly default japanese fonts
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

CJK Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-02-14 06:36 UTC by crusaderky





      Modified:
    
2006-02-16 12:09 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



fonts









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




fonts.conf

              (fonts.conf,11.64 KB,
                application/xml)

            
2006-02-14 17:15 UTC,

            crusaderky




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


crusaderky





          2006-02-14 06:36:55 UTC
        

I've followed the tutorial[1] to the letter to enable japanese on my gentoo box.
[1]http://gentoo-wiki.com/HOWTO_Enabling_Japanese

Whenever a specific japanese font is not explicitly requested, kanjis are extremely ugly and can't be zoomed at all (the web browser's Ctrl-+ zooms everything else, but not the kanjis. This happens both with Firefox and Opera.

For example, this happens when opening a UTF-8 page that contains kanjii and has the following CSS:
font-family: "Luxi Sans", "Bitstream Vera Sans", "Lucida Grande", "Trebuchet MS", helvetica, verdana, arial, sans-serif;


this doesn't happen if the font is explicitly requested, i.e.
font-family: "Kochi Mincho";
(which obviously you can't do when browsing the internet).

sample pages:
[2]http://www.guidetojapanese.org/particles_ex.html
[3]http://www.mahou.org/Kanji/RadicalSelect/?376E=on

WORKAROUND: re-emerge X.org with USE="-cjk", thus completely removing the default x.org cjk font. This way, the default font for japanese becomes kochi-substitute, which works fine.

EXPECTED BEHAVIOUR: either use kochi-substitute as a default font, or something equivalent.

Having or not FontPath "/usr/share/fonts/kochi-substitute/" in xorg.conf, or having or not any FontPath entry at all, is unrelevant.

# emerge -pv xorg-x11
[ebuild   R   ] x11-base/xorg-x11-6.8.2-r6  -3dfx +3dnow +bitmap-fonts -cjk -debug -dlloader -dmx -doc -font-server -insecure-drivers +ipv6 -minimal +mmx +nls -nocxx +opengl +pam +sdk +sse -static +truetype-fonts +type1-fonts (-uclibc) +xprint +xv 0 kB

# emerge info
Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(TM) XP 2000+
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig digest distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.gg3.net/ ftp://ftp.ecc.u-tokyo.ac.jp/GENTOO http://gentoo.channelx.biz/ http://ftp.isu.edu.tw/pub/Linux/Gentoo ftp://ftp.isu.edu.tw/pub/Linux/Gentoo"
LANG="it_IT.UTF-8"
LC_ALL="it_IT.UTF-8"
LINGUAS="it"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex X X509 a52 aac aaca52 aad adns alsa audiofile avi berkdb bitmap-fonts bzip2 cdparanoia cdr chroot cjk crypt cscope cups curl dga dts dvb dvd dvdr dvdread emboss encode erandom ethereal exif expat fam fbcon ffmpeg firefox flac flash foomaticdb fortran freetype gd gdbm ggi gif gimpprint ginac glut gmp gnutls gpm gtk gtk2 guile hal idn imagemagick imap imlib innodb ipv6 jack java javascript jikes jpeg junit kerberos krb4 lcms ldap libcaca libg++ libwww live lzo mad matroska mcal md5sum memlimit mhash mikmod ming mmx mmxext mng motif mozilla mozsvg mp3 mpeg mpi mysql ncurses network nls nptl nsplugin nvidia odbc offensive ogg oggvorbis opengl pam parse-clocks pcre pdflib perl pic plotutils png postgres ppds prelude python qhull qt quicktime readline real recode rtc samba scanner sdl skey slang slp sndfile snmp socks5 speex spell sqlite sse ssl stream svg tcltk tcpd tetex tga theora threads tiff truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 vcd vorbis win32codecs wmf wxwindows xine xml xml2 xosd xprint xv xvid xvmc yaz zlib linguas_it userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS

ls /var/db/pkg/media-fonts
corefonts-1-r2     intlfonts-1.2.1               sharefonts-0.10-r3  ttf-bitstream-vera-1.10-r3
freefonts-0.10-r2  kochi-substitute-20030809-r3  terminus-font-4.14




Comment 1


Donnie Berkholz (RETIRED)






          2006-02-14 10:51:41 UTC
        

Seems to me this is a fontconfig issue, of preference order.




Comment 2


crusaderky





          2006-02-14 16:26:37 UTC
        

My current Files section in xorg.conf:

      4 Section "Files"
      5    RgbPath     "/usr/lib/X11/rgb"
      6    FontPath    "/usr/share/fonts/kochi-substitute/"
      7    FontPath    "/usr/share/fonts/misc:unscaled"
      8    FontPath    "/usr/share/fonts/Type1"
      9    FontPath    "/usr/share/fonts/TTF"
     10    FontPath    "/usr/share/fonts/corefonts"
     11    FontPath    "/usr/share/fonts/freefont"
     12    FontPath    "/usr/share/fonts/sharefonts"
     13    FontPath    "/usr/share/fonts/terminus"
     14    FontPath    "/usr/share/fonts/ttf-bitstream-vera"
     15    FontPath    "/usr/share/fonts/unifont"
     16    FontPath    "/usr/share/fonts/75dpi:unscaled"
     17    FontPath    "/usr/share/fonts/100dpi:unscaled"
     18    FontPath    "/usr/share/fonts/artwiz"
     19 EndSection

As you see, kochi-substitute is now first and it should override everything else, but it doesn't.




Comment 3


Donnie Berkholz (RETIRED)






          2006-02-14 16:50:44 UTC
        

The xorg.conf font path order is totally unrelated to any relatively recent apps (i.e., gtk-2 or qt-3). I'm talking about fontconfig the package, which is configured via /etc/fonts/.




Comment 4


crusaderky





          2006-02-14 17:15:51 UTC
        

Created attachment 79813 [details]
fonts.conf

local.conf doesn't contain anything. I'm attaching fonts.conf




Comment 5


Donnie Berkholz (RETIRED)






          2006-02-14 17:19:51 UTC
        

Thanks for attaching it, but I was suggesting you should change your local configuration if you think the default fonts are ugly.




Comment 6


crusaderky





          2006-02-14 17:40:58 UTC
        

upgrading to fontconfig-2.3.2 fixes the problem without any need to touch local.conf.




Comment 7


Alastair Tse (RETIRED)






          2006-02-16 11:33:12 UTC
        

i guess this bug is now closed? i don't even know what resolution to give this.




Comment 8


crusaderky





          2006-02-16 12:09:14 UTC
        

since the x86 version doesn't work properly, you should consider marking v2.3.2 as stable.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

