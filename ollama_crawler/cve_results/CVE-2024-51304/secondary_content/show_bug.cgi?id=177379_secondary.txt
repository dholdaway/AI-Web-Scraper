Title: 177379 – No non-legacy nvidia-drivers work with xorg-x11-7.2
URL: https://bugs.gentoo.org/show_bug.cgi?id=177379

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 177379
No non-legacy nvidia-drivers work with xorg-x11-7.2
Last modified: 2007-05-07 23:12:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 177379 
      - No non-legacy nvidia-drivers work with xorg-x11-7.2


Summary:
No non-legacy nvidia-drivers work with xorg-x11-7.2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

X11 External Driver Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-06 22:21 UTC by James Bowlin





      Modified:
    
2007-05-07 23:12 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xorg.conf

              (xorg.conf,2.19 KB,
                text/plain)

            
2007-05-06 22:23 UTC,

            James Bowlin




Details





Xorg.log

              (Xorg.0.log.old,25.95 KB,
                text/plain)

            
2007-05-06 22:23 UTC,

            James Bowlin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


James Bowlin





          2007-05-06 22:21:40 UTC
        

After updating 29 x11 packages that went stable today, including xorg-x11

I can no longer play videos.  Trying to play a dvd with either Xine or
Mplayer causes X11 errors and puts the screen into an unreadable state.
With Mplayer X11 crashes.

I'm using the nvidia-drivers-1.0.9755-r1 because I had problems with the
stable version on my system (ASUS m2npv-vm w/ Nvidia Geforce 6150 graphics).
Here is the error message from X11.0.log:

WW) NVIDIA(0): The NVIDIA X driver has encountered too many errors.  Falling 
 (WW) NVIDIA(0):     back to legacy PCI mode. 
 (II) NVIDIA(0): Setting mode "1024x768,1024x768" 
 (II) NVIDIA(0): Setting mode "1600x1200,1680x1050" 
 (II) NVIDIA(0): Setting mode "1024x768,1024x768" 
 (II) NVIDIA(0): Setting mode "1600x1200,1680x1050" 
 (II) NVIDIA(0): Setting mode "1024x768,1024x768" 
 (II) NVIDIA(0): Setting mode "1600x1200,1680x1050" 
 (II) NVIDIA(0): Setting mode "1024x768,1024x768" 
 (II) NVIDIA(0): Setting mode "1600x1200,1680x1050" 
 
 Backtrace: 
 0: /usr/bin/X(xf86SigHandler+0x6d) [0x481a8d] 
 1: /lib/libc.so.6 [0x2b7609576940] 
 2: /usr/lib64/xorg/modules/drivers//nvidia_drv.so(_nv001049X+0x2b) [0x2b760a20432b]

Here is my emerge --info:
Portage 2.1.2.2 (default-linux/amd64/2006.1, gcc-4.1.1, glibc-2.5-r2, 2.6.20-gentoo-r7 x86_64)
=================================================================
System uname: 2.6.20-gentoo-r7 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3600+
Gentoo Base System release 1.12.9
Timestamp of tree: Sun, 06 May 2007 16:30:04 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31-r5
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /lib/modules /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://cudlug.cudenver.edu/gentoo/ http://mirror.espri.arizona.edu/gentoo/ "
LANG="en_US"
LC_ALL=""
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acpi alsa amd64 bash-completion berkdb bitmap-fonts cddb cdparanoia cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread encode exif fbcon ffmpeg firefox flac fortran gdbm gif gpm hal iconv ieee1394 imagemagick isdnlog java jpeg kde kdeenablefinal kdexdeltas libg++ libwww lm_sensors mad midi mp3 mpeg mplayer musicbrainz ncurses nls nptl nptlonly nsplugin ogg opengl pam pcre pdf perl plotutils png ppds pppd python qt3 quicktime readline reflection ruby session sockets spell spl ssl symlink tcltk tcpd tetex tidy tk truetype truetype-fonts type1-fonts unicode usb vim-pager vim-syntax vorbis xine xinerama xorg xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

I will try to attach the X11 log and config files separately because I don't see an option for doing that on the current screen.




Comment 1


James Bowlin





          2007-05-06 22:23:14 UTC
        

Created attachment 118383 [details]
xorg.conf

attaching xorg.conf




Comment 2


James Bowlin





          2007-05-06 22:23:50 UTC
        

Created attachment 118385 [details]
Xorg.log

attached Xorg.log file




Comment 3


James Bowlin





          2007-05-06 23:34:57 UTC
        

I masked all of the x11 packages that I had emerged earlier today and then did a new emerge -uDN world and everything is working again.  I had tried just doing this for xorg-x11 but I had no keyboard input in X.  Here are the packages I masked:

>=x11-libs/xtrans-1.0.3
>=x11-apps/mkfontscale-1.0.3
>=x11-apps/luit-1.0.2
>=x11-apps/sessreg-1.0.2
>=x11-apps/xmodmap-1.0.2
>=x11-libs/libXt-1.0.5
>=x11-apps/mkfontdir-1.0.3
>=x11-libs/libXv-1.0.3
>=x11-libs/libXScrnSaver-1.1.2
>=x11-apps/xkbcomp-1.0.3
>=x11-libs/libXres-1.0.3
>=x11-misc/xkeyboard-config-0.8-r1
>=x11-apps/xrandr-1.2.0
>=x11-apps/xdpyinfo-1.0.2
>=x11-apps/xauth-1.0.2
>=x11-apps/xprop-1.0.2
>=x11-apps/xinit-1.0.3-r3
>=x11-apps/xfontsel-1.0.2
>=x11-base/xorg-server-1.2.0-r3
>=x11-apps/xrdb-1.0.3
>=x11-drivers/xf86-input-evdev-1.1.5-r1
>=x11-drivers/xf86-input-mouse-1.2.1
>=x11-drivers/xf86-input-keyboard-1.1.1
>=x11-apps/xdm-1.1.4
>=x11-apps/mesa-progs-6.5.2
>=x11-base/xorg-x11-7.2

In the past few weeks I responded to several posts in the forums where people
could not get xorg-x11-7.2 to work on their system.  I'm surprised it was
marked stable.




Comment 4


James Bowlin





          2007-05-07 19:57:35 UTC
        

I narrowed down the problem to the xorg-x11-7.2 package.  I was able to emerge
all the other packages in the list above without re-creating the problem.

I tried using xorg-x11-7.2 with nvidia-drivers-1.0.8776-r1.  I did not get
the same problem when starting up a video program but I managed to get
the screen to entirely freeze when switching metamodes so this is a no-go
for me as well.  AFAICT there is no way I can use xorg-x11-7.2 on my system
with _any_ non-legacy version of nvidia-drivers so I changed the subject line
to reflect this.  The screen borks when I try to play videos with the unstable
drivers and the screen borks when I try to switch metamodes with the stable
drivers.

I am currently using nvidia-drivers-1.0.8776-r1 with xorg-x11-7.1 and I don't
see any immediate problems.  I was previously using nvidia-drivers-1.0.9755-r1
with xorg-z11-7.1 with no problems.




Comment 5


James Bowlin





          2007-05-07 23:12:34 UTC
        

Since the xorg-x11 package is just an empty shell it appears my problem has
disappeared. Xorg-x11-7.2 seems to be working fine with the latest
nvidia-drivers now.  It was certainly crashing yesterday.  I don't know why it
was broken then but working today.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

