Title: 504998 – media-video/mpv-0.3.6 compile runs out of memory
URL: https://bugs.gentoo.org/show_bug.cgi?id=504998

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 504998
media-video/mpv-0.3.6 compile runs out of memory
Last modified: 2014-03-19 10:08:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 504998 
      - media-video/mpv-0.3.6 compile runs out of memory


Summary:
media-video/mpv-0.3.6 compile runs out of memory
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Nikoli








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-03-18 18:05 UTC by igel





      Modified:
    
2014-03-19 10:08 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



media-video
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,282.41 KB,
                text/plain)

            
2014-03-18 18:06 UTC,

            igel




Details





ebuild patch to strip offending flags

              (mpv-0.3.6-no-graphite.patch,657 bytes,
                patch)

            
2014-03-19 10:06 UTC,

            igel




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


igel





          2014-03-18 18:05:44 UTC
        

Trying to compile mpv runs out of memory towards the end (? - says 225/226 anyways) - I killed it at 5.8G memory usage.

Reproducible: Always

Steps to Reproduce:
1. emerge media-video/mpv
Actual Results:  
compile runs out of memory

Expected Results:  
compiles successfully




Comment 1


igel





          2014-03-18 18:06:43 UTC
        

Created attachment 372952 [details]
build.log




Comment 2


Jeroen Roovers (RETIRED)






          2014-03-18 18:54:52 UTC
        

Please post your `emerge --info' output in a comment.

Judging from the build log, you might have better success trying with a sane set of CFLAGS, but it's impossible to tell because you didn't say /what/ is using up all that memory.




Comment 3


igel





          2014-03-19 10:05:53 UTC
        

(In reply to Jeroen Roovers from comment #2)
> Please post your `emerge --info' output in a comment.
> 
> Judging from the build log, you might have better success trying with a sane
> set of CFLAGS, but it's impossible to tell because you didn't say /what/ is
> using up all that memory.

For what it's worth, you're right: it /is/ due to the "insane" gcc flags.

For reference, I narrowed it down to "-O3" combined with any of "-fgraphite-identity" and "-floop-parallelize-all". I'll add a patch for the ebuild to strip the two -f... flags, but since they seem to be unsupported, I'll close this bug.

Thanks for bearing with me :)




Comment 4


igel





          2014-03-19 10:06:36 UTC
        

Created attachment 373008 [details, diff]
ebuild patch to strip offending flags









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

