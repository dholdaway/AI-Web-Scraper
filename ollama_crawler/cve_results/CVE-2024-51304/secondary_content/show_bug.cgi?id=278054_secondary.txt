Title: 278054 – dev-db/mysql: Unmerging dev-db/mysql-5.0.18-r30 gives an error
URL: https://bugs.gentoo.org/show_bug.cgi?id=278054

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 278054
dev-db/mysql: Unmerging dev-db/mysql-5.0.18-r30 gives an error
Last modified: 2009-07-19 09:46:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 278054 
      - dev-db/mysql: Unmerging dev-db/mysql-5.0.18-r30 gives an error


Summary:
dev-db/mysql: Unmerging dev-db/mysql-5.0.18-r30 gives an error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-07-16 14:06 UTC by Martin Mokrejš





      Modified:
    
2009-07-19 09:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Mokrejš





          2009-07-16 14:06:37 UTC
        

This is probably related to the fact that I had two version installed in same slot, at least I think.
# revdep-rebuild -i
* Configuring search environment for revdep-rebuild

* Checking reverse dependencies
* Packages containing binaries and libraries broken by a package update
* will be emerged.

* Collecting system binaries and libraries
* Generated new /root/.revdep-rebuild.1_files

* Collecting complete LD_LIBRARY_PATH
* Generated new /root/.revdep-rebuild.2_ldpath

* Checking dynamic linking consistency
[ 24% ] *   broken /usr/bin/mysql-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysql_client_test-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
[ 25% ] *   broken /usr/bin/mysqladmin-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqlbinlog-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqlcheck-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqldump-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqlimport-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqlshow-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqltest-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqltestmanager-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqltestmanager-pwgen-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/bin/mysqltestmanagerc-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
[ 97% ] *   broken /usr/sbin/mysqld-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
*   broken /usr/sbin/mysqlmanager-500 (requires libcrypto.so.0.9.7
libssl.so.0.9.7)
[ 100% ]                 
* Generated new /root/.revdep-rebuild.3_rebuild

* Assigning files to packages
*   /usr/bin/mysql-500 -> dev-db/mysql
*   /usr/bin/mysql_client_test-500 -> dev-db/mysql
*   /usr/bin/mysqladmin-500 -> dev-db/mysql
*   /usr/bin/mysqlbinlog-500 -> dev-db/mysql
*   /usr/bin/mysqlcheck-500 -> dev-db/mysql
*   /usr/bin/mysqldump-500 -> dev-db/mysql
*   /usr/bin/mysqlimport-500 -> dev-db/mysql
*   /usr/bin/mysqlshow-500 -> dev-db/mysql
*   /usr/bin/mysqltest-500 -> dev-db/mysql
*   /usr/bin/mysqltestmanager-500 -> dev-db/mysql
*   /usr/bin/mysqltestmanager-pwgen-500 -> dev-db/mysql
*   /usr/bin/mysqltestmanagerc-500 -> dev-db/mysql
*   /usr/sbin/mysqld-500 -> dev-db/mysql
*   /usr/sbin/mysqlmanager-500 -> dev-db/mysql
* Generated new /root/.revdep-rebuild.4_packages_raw and /root/.revdep-rebuild.4_package_owners

* Cleaning list of packages to rebuild
* Generated new /root/.revdep-rebuild.4_packages

* Assigning packages to ebuilds
* Generated new /root/.revdep-rebuild.4_ebuilds

* Evaluating package order
* Portage could not find any version of the following packages it could build:
* dev-db/mysql:500
* (Perhaps they are masked, blocked, or removed from portage.)
* Try to emerge them manually.
* Warning: Portage cannot rebuild any of the necessary packages.
#
# emerge --unmerge mysql; emerge -uN mysql

 dev-db/mysql
    selected: 5.0.18-r30 5.0.76-r1 
   protected: none 
     omitted: none 

>>> 'Selected' packages are slated for removal.
>>> 'Protected' and 'omitted' packages will not be removed.

>>> Waiting 5 seconds before starting...
>>> (Control-C to abort)...
>>> Unmerging in: 5 4 3 2 1 
>>> Unmerging dev-db/mysql-5.0.18-r30...
!!! Error: The version specified is not the current one
exiting
ls: cannot access mysql_config-[[:digit:]][[:digit:]][[:digit:]]: No such file or directory
 * you may want to run "eselect mysql list" followed by a 
 * "eselect mysql list" to choose the default mysql server
>>> Unmerging dev-db/mysql-5.0.76-r1...

 * Regenerating GNU info directory index...
 * Processed 208 info files.

 * IMPORTANT: 6 config files in '/etc' need updating.
 * See the CONFIGURATION FILES section of the emerge
 * man page to learn how to update config files.

 * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.


 * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.

Calculating dependencies -^C

Exiting on signal 2
# emerge --info
Portage 2.1.6.13 (default/linux/x86/2008.0, gcc-4.3.3, glibc-2.10.1-r0, 2.6.27.6 i686)
=================================================================
System uname: Linux-2.6.27.6-i686-Intel-R-_Xeon-TM-_CPU_3.00GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 15 Jul 2009 10:30:04 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     4.0_p24
dev-java/java-config: 2.1.8-r1
dev-lang/python:     2.5.4-r2, 2.6.2-r1
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.0
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=pentium4 -mmmx -msse -msse2 -msse3  -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/bind /var/qmail/alias /var/qmail/control /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/nfslarge/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/nfslarge/usr/portage"
PORTDIR_OVERLAY="/nfslarge/usr/portage/local/layman/science /nfslarge/usr/portage/local/layman/sunrise /nfslarge/usr/portage/local"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="R X Xaw3d acl acpi apache2 bash-completion bcmath berkdb blas boost bzip2 cblas clamav cli colordiff compress consolekit cpio cracklib crypt cscope css ctype curl curlwrappers cxx dbus djbfft emboss emf enblend encode enscript expat fam fortran ftp gcj gd gdbm gif glibc-compat20 glibc-omitfp glitz glut gmp gnuplot gnutls gpm graphviz gs gtk gtkhtml hal icc iconv ifc inifile innodb isdnlog ithreads java javascript jbig jikes jpeg jpeg2k kdtree lapack lcms libedit libwww lzo lzw maildir mhash midi mime ming mjpeg mmap mmx mng mod_python modperl modplug mozilla moznoirc mpeg mpi mpi_njtree mpich2 mudflap mule mxdatetime mysql mysqli ncurses netcdf netpbm network nntp nptl nptlonly numeric openmp pam pcntl pcre pdf perl plotutils plugin png pnm postproc postscript ppds pppd procmail pymol python rar raw readline reflection reiserfs rpm rtc scp seamonkey server session sftp sift smime sndfile sockets spl srt sse sse2 sse3 ssl svg svgz sysfs sysvipc tcl tcpd threads tiff transcode unicode urandom userlocales uuencode vim-syntax vim-with-x wmf x86 xanim xfs xinetd xml xorg xpm xslt xv xvid zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

#




Comment 1


Wormo (RETIRED)






          2009-07-18 06:13:27 UTC
        

Why did you have 2 versions installed in the same slot?




Comment 2


Martin Mokrejš





          2009-07-18 09:49:40 UTC
        

(In reply to comment #1)
> Why did you have 2 versions installed in the same slot?
> 

No idea what could have happened. The machine was installed in 2006 or 2007 and at that time mysql used slots for mysql-4.0, mysql-4.1, and mysql-5, if I remember right. Maybe a remnant from that time?

BTW, what I do not like with emerge is the fact that it does not warn me about such issues.




Comment 3


Samuli Suominen (RETIRED)






          2009-07-19 09:46:35 UTC
        

There has been no slotmove in profiles/updates for mysql which would have explained it. Looks to me something has been messed up in your /var/db/pkg..

Closing as WORKSFORME.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

