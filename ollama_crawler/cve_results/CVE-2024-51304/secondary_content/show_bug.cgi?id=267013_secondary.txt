Title: 267013 – >=net-fs/nfs-utils-1.14 fail to due to FORTIFY_SOURCE
URL: https://bugs.gentoo.org/show_bug.cgi?id=267013

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 267013
>=net-fs/nfs-utils-1.14 fail to due to FORTIFY_SOURCE
Last modified: 2009-04-26 22:21:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 267013 
      - >=net-fs/nfs-utils-1.14 fail to due to FORTIFY_SOURCE


Summary:
>=net-fs/nfs-utils-1.14 fail to due to FORTIFY_SOURCE
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Network Filesystems








URL:



http://hardened.gentooexperimental.or...
        




Whiteboard:




Keywords:








Depends on:







Blocks:




fortify-source



 

        Show dependency tree





 





      Reported:
    
2009-04-21 20:32 UTC by James Browning





      Modified:
    
2009-04-26 22:21 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



gengor
zorry









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The fragment of the build log

              (emerge fragment.txt,5.49 KB,
                text/plain)

            
2009-04-21 20:35 UTC,

            James Browning




Details





emerge -info output

              (einfos,4.69 KB,
                text/plain)

            
2009-04-23 02:54 UTC,

            James Browning




Details





package list for the system.

              (pkglist,53.27 KB,
                text/plain)

            
2009-04-23 03:21 UTC,

            James Browning




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


James Browning





          2009-04-21 20:32:12 UTC
        

A grotty hack (not included) to add "-U_FORTIFY_SOURCE" to the ebuilds CFLAGS allowed it to emerge normally.
Gengor said to block re: bug 259417


Reproducible: Always

Steps to Reproduce:
1. have gcc-4.2.4-r1 from the xake toolchain overlay
2. emerge nfs-utils 1.1.4 or 1.1.5

Actual Results:  
compile fail to complete, breaking the emerge (microblurb from 1.1.4)

Expected Results:  
nfs-utils should emerge normally

i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I../../support/include  -I../../support/include -D_GNU_SOURCE -I../../support/include -I../../support/export -D_GNU_SOURCE -Wall -Wstrict-prototypes  -pipe -march=pentium2 -mtune=prescott -O2 -pipe -g -ggdb -MT mountd-rmtab.o -MD -MP -MF .deps/mountd-rmtab.Tpo -c -o mountd-rmtab.o `test -f 'rmtab.c' || echo './'`rmtab.c           
In file included from rmtab.c:25:                                                                                            
../../support/include/ha-callout.h: In function 'ha_callout':                                                                
../../support/include/ha-callout.h:57: error: 'N_DEBUG' undeclared (first use in this function)                              
../../support/include/ha-callout.h:57: error: (Each undeclared identifier is reported only once                              
../../support/include/ha-callout.h:57: error: for each function it appears in.)                                              
make[2]: *** [mountd-rmtab.o] Error 1




Comment 1


James Browning





          2009-04-21 20:35:35 UTC
        

Created attachment 189086 [details]
The fragment of the build log

I pastebined it then copied it back from the pastebin




Comment 2


Gordon Malm (RETIRED)






          2009-04-23 02:17:03 UTC
        

You didn't mention you were using a toolchain overlay on IRC that I recall. ;)

Please post your emerge --info.  I can't reproduce this compile error on x86 with in-tree sys-devel/gcc-4.3.3-r2 (pie,relro,now,fortify).  Haven't tested on amd64.

$ objdump -d /usr/sbin/exportfs | grep call | grep _chk | wc -l
59

I've added a URL to a bug the overlay had marked closed/worksforme.  CCing Magnus as he may know if its due to a bug in your overlay gcc (4.2.4 - which I think they abandoned).




Comment 3


Gordon Malm (RETIRED)






          2009-04-23 02:20:44 UTC
        

Missed adding CC.




Comment 4


James Browning





          2009-04-23 02:53:19 UTC
        

Given that I built it in early November and it's not listed in my eix output, probably. I didn't mention it then.  attachments arriving VSN.




Comment 5


James Browning





          2009-04-23 02:54:25 UTC
        

Created attachment 189201 [details]
emerge -info output




Comment 6


James Browning





          2009-04-23 03:21:40 UTC
        

Created attachment 189202 [details]
package list for the system.




Comment 7


Gordon Malm (RETIRED)






          2009-04-23 03:35:30 UTC
        

Seeing as you are also on x86 I don't believe this to be a problem with our gcc.  Going to close as WORKSFORME.  Anyone feel free to re-open if they find it a problem on in-tree toolchain.




Comment 8


James Browning





          2009-04-26 22:21:50 UTC
        

I just check again w/ the 4.3.3-r2 GCC from that overlay. It worked, okay guys overload the bozo bit relating to me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

