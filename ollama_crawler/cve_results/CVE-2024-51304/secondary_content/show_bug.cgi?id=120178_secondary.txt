Title: 120178 – etc-update fails after trivial merges - syntax error on line 108
URL: https://bugs.gentoo.org/show_bug.cgi?id=120178

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 120178
etc-update fails after trivial merges - syntax error on line 108
Last modified: 2006-05-19 04:53:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 120178 
      - etc-update fails after trivial merges - syntax error on line 108


Summary:
etc-update fails after trivial merges - syntax error on line 108
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Tools

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-24 06:04 UTC by Jeff Sweeney





      Modified:
    
2006-05-19 04:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Requested attachment: bash -x /usr/sbin/etc-update

              (etc.log,7.28 KB,
                text/plain)

            
2006-01-25 19:14 UTC,

            Jeff Sweeney




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jeff Sweeney





          2006-01-24 06:04:56 UTC
        

Running etc-update produces the following information if updates are present, otherwise etc-update completes normally. Trivial merges are performed when present correctly. 

   Scanning Configuration files...
   /usr/sbin/etc-update: line 108: 1: syntax error: operand expected (error   
   token is "1")

I have updated the system within the last 24 hours and emerged all availiable upgrades.

My system configuration is:

Gentoo Base System version 1.6.14
Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.14-gentoo-r5 i686)
=================================================================
System uname: 2.6.14-gentoo-r5 i686 AMD Athlon(tm) MP 
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -mtune=athlon-mp -march=athlon-mp -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -mtune=athlon-mp -march=athlon-mp -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks fixpackages sandbox sfperms strict"
GENTOO_MIRRORS="http://192.168.100.1/gentoo-dist/ http://192.168.100.1/gentoo-dvd/ http://ftp.swin.edu.au/gentoo http://gentoo.osuosl.org/"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.au.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X X509 alsa apache2 apm artworkextra asf audiofile avalon avi berkdb bitmap-fonts bzip2 caps cddb cdr cpudetection crypt cups curl divx4linux djbfft dnd doc dvd dvdr dvdread eds elf emacs emboss encode erandom esd examples exif expat fam fbcon firebird firefox flash floppyboot font-server fontconfig foomaticdb fortran gd gdbm gif glut gmp gnome gnutls gpm gstreamer gtk gtk2 gtkhtml guile hpn idea idn imlib immqt-bc innodb insecure-savers ipv6 java javascript jce jikes joystick jp2 jpeg jpeg2k junit jython kde kdeenablefinal kig-scripting latex lcms ldap leim lesstif libcaca libclamav libg++ libwww log4j lzo lzw mad memlimit mhash mikmod ming mmx mng mozcalendar mozilla mozsvg mp3 mpeg mudflap mysql ncurses new-login nls nntp nptl nsplugin oav objc offensive ogg oggvorbis opengl oss pam parse-clocks pcre pdflib perl php png python qt quicktime readline recode rhino ruby samba sasl savedconfig sdl snmp socks5 source spell sse sse2 ssl symlink tcltk tcpd test tetex threads tidy tiff toolbar truetype truetype-fonts type1-fonts ucs2 ucs4 udev unicode userlocales utf8 vcd verbose vorbis win32codecs wmf xine xml xml2 xmms xscreensaver xv xvmc zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Marius Mauch (RETIRED)






          2006-01-24 07:37:56 UTC
        

Try running `bash -x /usr/sbin/etc-update` and attach the output.




Comment 2


Jeff Sweeney





          2006-01-25 19:14:12 UTC
        

Created attachment 78127 [details]
Requested attachment: bash -x /usr/sbin/etc-update




Comment 3


Simon Stelling (RETIRED)






          2006-04-13 11:15:13 UTC
        

+ for file in '`ls ${TMP}/files|sort -n`'
+ ((  0 == 0  ))
+ isfirst='[00m[00m1[00m'
/usr/sbin/etc-update: line 108: [00m[00m1[00m: syntax error: operand expected (error token is "[00m[00m1[00m")

Did you replace /bin/ls with a script that calls `ls --color=always or so`? If you do, please revert that change. It'll break lots of things. Instead you should use `alias ls='ls --color'` to achieve your goal in a safer way.




Comment 4


Simon Stelling (RETIRED)






          2006-05-19 04:53:49 UTC
        

assuming that was the problem, feel free to reopen if that's not the case









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

