Title: 112073 – wxGTK-2.6.* with unicode USE do not compile as unicode
URL: https://bugs.gentoo.org/show_bug.cgi?id=112073

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 112073
wxGTK-2.6.* with unicode USE do not compile as unicode
Last modified: 2006-08-06 15:36:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 112073 
      - wxGTK-2.6.* with unicode USE do not compile as unicode


Summary:
wxGTK-2.6.* with unicode USE do not compile as unicode
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo wxWidgets project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-10 05:01 UTC by lzap





      Modified:
    
2006-08-06 15:36 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



betelgeuse
rhill









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




fixed ebuild

              (wxGTK-2.6.1.ebuild,1.89 KB,
                text/plain)

            
2005-11-10 05:21 UTC,

            lzap




Details





also as a patch

              (wxGTK-2.6.1-r1.patch,143 bytes,
                patch)

            
2005-11-10 05:24 UTC,

            lzap




Details
            | Diff





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


lzap





          2005-11-10 05:01:31 UTC
        

The emerged library is NOT unicode enabled, so it is not able to emerge other
dependant packages /like wxPython/.

Reproducible: Always
Steps to Reproduce:
1.emerge wxGTK-2.6.1
2.ls /usr/lib/wx/config/
3.there are *ansi* files, not *unicode* ones

Actual Results:  
It works, but the library has bad properties. In combination with GTK2 this is
BLOCKER ISSUE!




Comment 1


lzap





          2005-11-10 05:09:43 UTC
        

The proof is here.

The unicode flag was removed from the IUSE in the 2.6 branch, so it is not
properly configured with "--with-unicode".

I am going to test it and provide the patch for this issue.

/var/tmp/portage/wxGTK-2.6.1/work/wxWidgets-2.6.1/configure --prefix=/usr
--host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info
--datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib
--build=i686-pc-linux-gnu --disable-debugreport --with-zlib --disable-debug
--disable-debug_gdb --with-png --with-jpeg --with-tiff --enable-opengl
--with-opengl --with-gnomeprint --with-sdl --disable-joystick --with-gtk=2
--without-odbc
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
loading argument cache configarg.cache
checking for --enable-gui... yes
checking for --enable-monolithic... no
checking for --enable-plugins... no
checking for --enable-universal... no
checking for --enable-nanox... no
checking for --enable-gpe... no
checking for --with-libpng... yes
checking for --with-libjpeg... yes
checking for --with-libtiff... yes
checking for --with-libxpm... yes
checking for --with-libmspack... yes
checking for --with-sdl... yes
checking for --with-gnomeprint... yes
checking for --with-opengl... yes
checking for --with-dmalloc... no
checking for --with-regex... yes
checking for --with-zlib... yes
checking for --with-odbc... no
checking for --with-expat... yes
checking for --enable-shared... yes
checking for --enable-optimise... yes
checking for --enable-debug... no
checking for --enable-stl... no
checking for --enable-debug_flag... no
checking for --enable-debug_info... no
checking for --enable-debug_gdb... no
checking for --enable-debug_cntxt... no
checking for --enable-mem_tracing... no
checking for --enable-profile... no
checking for --enable-no_rtti... no
checking for --enable-no_exceptions... no
checking for --enable-permissive... no
checking for --enable-no_deps... no
checking for --enable-compat22... no
checking for --disable-compat24... no
checking for --enable-rpath... yes
checking for --enable-intl... yes
checking for --enable-config... yes
checking for --enable-protocols... yes
checking for --enable-ftp... yes
checking for --enable-http... yes
checking for --enable-fileproto... yes
checking for --enable-sockets... yes
checking for --enable-ole... yes
checking for --enable-dataobj... yes
checking for --enable-ipc... yes
checking for --enable-apple_ieee... yes
checking for --enable-arcstream... yes
checking for --enable-backtrace... yes
checking for --enable-catch_segvs... yes
checking for --enable-cmdline... yes
checking for --enable-datetime... yes
checking for --enable-debugreport... no
checking for --enable-dialupman... yes
checking for --enable-dynlib... yes
checking for --enable-dynamicloader... yes
checking for --enable-exceptions... yes
checking for --enable-ffile... yes
checking for --enable-file... yes
checking for --enable-filesystem... yes
checking for --enable-fontmap... yes
checking for --enable-fs_inet... yes
checking for --enable-fs_zip... yes
checking for --enable-geometry... yes
checking for --enable-log... yes
checking for --enable-longlong... yes
checking for --enable-mimetype... yes
checking for --enable-mslu... yes
checking for --enable-snglinst... yes
checking for --enable-std_iostreams... yes
checking for --enable-std_string... yes
checking for --enable-stdpaths... yes
checking for --enable-stopwatch... yes
checking for --enable-streams... yes
checking for --enable-system_options... yes
checking for --enable-textbuf... yes
checking for --enable-textfile... yes
checking for --enable-timer... yes
checking for --enable-unicode... no
checking for --enable-sound... yes
checking for --enable-mediactrl... no
checking for --enable-wxprintfv... no
checking for --enable-zipstream... yes
checking for --enable-url... yes
checking for --enable-protocol... yes
checking for --enable-protocol_http... yes
checking for --enable-protocol_ftp... yes
checking for --enable-protocol_file... yes
checking for --enable-threads... yes
checking for --enable-docview... yes
checking for --enable-help... yes
checking for --enable-mshtmlhelp... yes
checking for --enable-html... yes
checking for --enable-htmlhelp... yes
checking for --enable-xrc... yes
checking for --enable-constraints... yes
checking for --enable-printarch... yes
checking for --enable-mdi... yes
checking for --enable-mdidoc... yes
checking for --enable-loggui... yes
checking for --enable-logwin... yes
checking for --enable-logdialog... yes
checking for --enable-webkit... yes
checking for --enable-postscript... yes
checking for --enable-prologio... no
checking for --enable-resources... no
checking for --enable-clipboard... yes
checking for --enable-dnd... yes
checking for --enable-metafile... yes
checking for --enable-controls... no
checking for --enable-accel... yes
checking for --enable-button... yes
checking for --enable-bmpbutton... yes
checking for --enable-calendar... yes
checking for --enable-caret... yes
checking for --enable-checkbox... yes
checking for --enable-checklst... yes
checking for --enable-choice... yes
checking for --enable-choicebook... yes
checking for --enable-combobox... yes
checking for --enable-datepick... yes
checking for --enable-display... yes
checking for --enable-gauge... yes
checking for --enable-grid... yes
checking for --enable-imaglist... yes
checking for --enable-listbook... yes
checking for --enable-listbox... yes
checking for --enable-listctrl... yes
checking for --enable-notebook... yes
checking for --enable-radiobox... yes
checking for --enable-radiobtn... yes
checking for --enable-sash... yes
checking for --enable-scrollbar... yes
checking for --enable-slider... yes
checking for --enable-spinbtn... yes
checking for --enable-spinctrl... yes
checking for --enable-splitter... yes
checking for --enable-statbmp... yes
checking for --enable-statbox... yes
checking for --enable-statline... yes
checking for --enable-stattext... yes
checking for --enable-statusbar... yes
checking for --enable-tabdialog... no
checking for --enable-textctrl... yes
checking for --enable-togglebtn... yes
checking for --enable-toolbar... yes
checking for --enable-tbarnative... yes
checking for --enable-tbarsmpl... yes
checking for --enable-treectrl... yes
checking for --enable-tipwindow... yes
checking for --enable-popupwin... yes
checking for --enable-commondlg... yes
checking for --enable-choicedlg... yes
checking for --enable-coldlg... yes
checking for --enable-filedlg... yes
checking for --enable-finddlg... yes
checking for --enable-fontdlg... yes
checking for --enable-dirdlg... yes
checking for --enable-msgdlg... yes
checking for --enable-numberdlg... yes
checking for --enable-splash... yes
checking for --enable-textdlg... yes
checking for --enable-tipdlg... yes
checking for --enable-progressdlg... yes
checking for --enable-wizarddlg... yes
checking for --enable-menus... yes
checking for --enable-miniframe... yes
checking for --enable-tooltips... yes
checking for --enable-splines... yes
checking for --enable-mousewheel... yes
checking for --enable-validators... yes
checking for --enable-busyinfo... yes
checking for --enable-joystick... no
checking for --enable-metafile... yes
checking for --enable-dragimage... yes
checking for --enable-accessibility... no
checking for --enable-palette... yes
checking for --enable-image... yes
checking for --enable-gif... yes
checking for --enable-pcx... yes
checking for --enable-iff... no
checking for --enable-pnm... yes
checking for --enable-xpm... yes
checking for --enable-ico_cur... yes
checking for --enable-official_build... no
saving argument cache configarg.cache
checking for toolkit... gtk
checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i686-pc-linux-gnu-gcc accepts -g... yes
checking for i686-pc-linux-gnu-gcc option to accept ANSI C... none needed
checking if the C compiler requires -ext o... 
checking whether we are using the Metrowerks C compiler... no
checking whether we are using the IBM xlC C compiler... no
checking how to run the C preprocessor... i686-pc-linux-gnu-gcc -E
checking for egrep... grep -E
checking whether i686-pc-linux-gnu-gcc needs -traditional... no
checking for i686-pc-linux-gnu-g++... i686-pc-linux-gnu-g++
checking whether we are using the GNU C++ compiler... yes
checking whether i686-pc-linux-gnu-g++ accepts -g... yes
checking if the C++ compiler requires -ext o... 
checking whether we are using the Metrowerks C++ compiler... no
checking whether we are using the IBM xlC C++ compiler... no
checking for i686-pc-linux-gnu-ranlib... i686-pc-linux-gnu-ranlib
checking for ar... ar
checking for a BSD-compatible install... /bin/install -c
checking for strip... strip
checking if make is GNU make... yes
checking whether ln -s works... yes
checking for strcasecmp() in string.h... yes
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for stdlib.h... (cached) yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking for unistd.h... (cached) yes
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking fnmatch.h usability... yes
checking fnmatch.h presence... yes
checking for fnmatch.h... yes
checking for fnmatch... yes
checking langinfo.h usability... yes
checking langinfo.h presence... yes
checking for langinfo.h... yes
checking X11/Xlib.h usability... yes
checking X11/Xlib.h presence... yes
checking for X11/Xlib.h... yes
checking for X11/XKBlib.h... yes
checking for an ANSI C-conforming const... yes
checking for inline... inline
checking for char... yes
checking size of char... 1
checking for short... yes
checking size of short... 2
checking for void *... yes
checking size of void *... 4
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for size_t... yes
checking size of size_t... 4
checking for long long... yes
checking size of long long... 8
checking for wchar_t... yes
checking size of wchar_t... 4
checking for va_copy... yes
checking for _FILE_OFFSET_BITS value needed for large files... 64
checking if large file support is available... yes
checking for _LARGEFILE_SOURCE value needed for large files... 1
checking for fseeko... yes
checking whether byte ordering is bigendian... no
checking how to run the C++ preprocessor... i686-pc-linux-gnu-g++ -E
checking iostream usability... yes
checking iostream presence... yes
checking for iostream... yes
checking if C++ compiler supports bool... yes
checking if C++ compiler supports the explicit keyword... yes
checking whether the compiler supports const_cast<>... yes
checking whether the compiler supports reinterpret_cast<>... yes
checking whether the compiler supports static_cast<>... yes
checking for std::string in <string>... yes
checking for std::istream... yes
checking for std::ostream... yes
checking for glibc 2.1 or later... yes
checking regex.h usability... yes
checking regex.h presence... yes
checking for regex.h... yes
checking for regcomp... yes
checking for zlib.h >= 1.1.4... yes
checking for zlib.h... (cached) yes
checking for deflate in -lz... yes
checking for png.h > 0.90... yes
checking for png.h... (cached) yes
checking for png_check_sig in -lpng... yes
checking for jpeglib.h... yes
checking for jpeg_read_header in -ljpeg... yes
checking tiffio.h usability... yes
checking tiffio.h presence... yes
checking for tiffio.h... yes
checking for TIFFError in -ltiff... yes
checking expat.h usability... yes
checking expat.h presence... yes
checking for expat.h... yes
checking if expat.h is valid C++ header... yes
checking for XML_ParserCreate in -lexpat... yes
checking mspack.h usability... no
checking mspack.h presence... no
checking for mspack.h... no
checking for GTK+ version... 
checking for pkg-config... /usr/bin/pkg-config
checking for GTK+ - version >= 2.0.0... yes (version 2.6.10)
checking for pango_font_family_is_monospace... no
checking if GTK+ is version >= 2.4... yes
checking for poll... yes
checking for gdk_im_open in -lgdk... yes
checking for Xinerama... yes
checking for Xxf86vm extension... yes
checking for X11/extensions/xf86vmode.h... yes
found in /usr/X11R6/include
checking GL/gl.h usability... yes
checking GL/gl.h presence... yes
checking for GL/gl.h... yes
checking for -lGL... yes
checking for -lGLU... yes
checking if the linker accepts --version-script... yes
checking for mode_t... yes
checking for off_t... yes
checking for pid_t... yes
checking for size_t... (cached) yes
checking for uid_t in sys/types.h... yes
checking for ssize_t... yes
checking if size_t is unsigned int... yes
checking for pw_gecos in struct passwd... yes
checking for wcslen... yes
checking for wcsrtombs... yes
checking for vsnprintf... yes
checking for vsnprintf declaration... yes
checking for iconv... yes
checking if iconv needs const... no
checking for sigaction... yes
checking for sa_handler type... int
checking for backtrace() in <execinfo.h>... yes
checking for __cxa_demangle() in <cxxabi.h>... yes
checking for mkstemp... yes
checking for statfs... yes
checking for fcntl... yes
checking for timegm... yes
checking for putenv... yes
checking for nanosleep... yes
checking for uname... yes
checking for strtok_r... yes
checking for inet_addr... yes
checking for inet_aton... yes
checking for esd_close in -lesd... yes
checking esd.h usability... yes
checking esd.h presence... yes
checking for esd.h... yes
checking for known CD-ROM interface... yes
checking whether pthreads work with -pthread... yes
checking if more special flags are required for pthreads... no
checking for thr_setconcurrency... no
checking sched.h usability... yes
checking sched.h presence... yes
checking for sched.h... yes
checking for sched_yield... yes
checking for pthread_attr_getschedpolicy... yes
checking for pthread_attr_setschedparam... yes
checking for sched_get_priority_max... yes
checking for pthread_cancel... yes
checking for pthread_mutexattr_t... yes
checking for dlopen... no
checking for dlopen in -ldl... yes
checking for dlerror... no
checking for dlerror in -ldl... yes
checking sys/soundcard.h usability... yes
checking sys/soundcard.h presence... yes
checking for sys/soundcard.h... yes
checking for sdl-config... /usr/bin/sdl-config
checking for SDL - version >= 1.2.0... yes
checking for libgnomeprintui-2.2 >= 2.8... yes
checking LIBGNOMEPRINTUI_CFLAGS... -DXTHREADS -D_REENTRANT -DXUSE_MTSAFE_API
-I/usr/include/libgnomeprintui-2.2 -I/usr/include/libgnomeprint-2.2
-I/usr/include/libgnomecanvas-2.0 -I/usr/include/libart-2.0
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/libxml2
-I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/include/gtk-2.0
-I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/freetype2/config  
checking LIBGNOMEPRINTUI_LIBS... -Wl,--export-dynamic -lgnomeprintui-2-2
-lgnomeprint-2-2 -lgnomecanvas-2 -lxml2 -lz -lart_lgpl_2 -lpangoft2-1.0
-lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lm -lpangoxft-1.0
-lpangox-1.0 -lpango-1.0 -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0  
checking for strptime... yes
checking for timezone variable in <time.h>... timezone
checking for localtime... yes
checking for tm_gmtoff in struct tm... yes
checking for gettimeofday... yes
checking whether gettimeofday takes two arguments... yes
checking for socket... yes
checking what is the type of the third argument of getsockname... socklen_t
checking what is the type of the fifth argument of getsockopt... socklen_t
checking for cos... no
checking for floor... no
checking if floating point functions link without -lm... no
checking for sin... yes
checking for ceil... yes
checking if floating point functions link with -lm... yes
checking for i686-pc-linux-gnu-ranlib... (cached) i686-pc-linux-gnu-ranlib
checking for a BSD-compatible install... /bin/install -c
checking whether ln -s works... yes
checking whether make sets $(MAKE)... yes
checking for i686-pc-linux-gnu-ar... (cached) ar
checking for i686-pc-linux-gnu-strip... (cached) strip
checking for i686-pc-linux-gnu-nm... i686-pc-linux-gnu-nm
checking if make is GNU make... yes
checking for dependency tracking method... gcc
checking if the compiler supports precompiled headers... no
checking whether make sets $(MAKE)... (cached) yes
checking for cppunit-config... no
checking for Cppunit - version >= 1.8.0... configure: creating ./config.status





Comment 2


lzap





          2005-11-10 05:21:10 UTC
        

Created attachment 72575 [details]
fixed ebuild

Ive added --enable-unicode for the stable ebuild




Comment 3


lzap





          2005-11-10 05:24:08 UTC
        

Created attachment 72577 [details, diff]
also as a patch

I suggest releasing r1 quickly.




Comment 4


Ryan Hill (RETIRED)






          2005-12-11 16:21:25 UTC
        

please search. :)

https://bugs.gentoo.org/show_bug.cgi?id=111330
https://bugs.gentoo.org/show_bug.cgi?id=99795




Comment 5


lzap





          2005-12-12 00:31:34 UTC
        

NO, this is not true. It definitely doesnt compile both versions, it compiles ONLY the ANSI version.

Look at the ebuild! Its wrong.




Comment 6


Jakub Moc (RETIRED)






          2006-01-15 03:36:45 UTC
        

*** Bug 112626 has been marked as a duplicate of this bug. ***




Comment 7


Ryan Hill (RETIRED)






          2006-01-24 17:53:31 UTC
        

look at the wxlib eclass that's inherited by the ebuild.

in the ebuild you have the line:
use X && configure_build gtk2 unicode "${myconf} --with-gtk=2"

the configure_build function in the eclass contains:
    if [[ "$2" == "unicode" ]] && use unicode; then
        mkdir ${S}/$1_build_unicode
        cd ${S}/$1_build_unicode
        subconfigure $3 --enable-unicode
        emake -j1 CXX="$(tc-getCXX)" CC="$(tc-getCC)" || die "Unicode emake failed"
        if [[ -e contrib/src ]]; then
            cd contrib/src
            emake -j1 CXX="$(tc-getCXX)" CC="$(tc-getCC)" || die "Unicode emake contrib failed"
        fi
    fi




Comment 8


Ryan Hill (RETIRED)






          2006-01-24 18:46:37 UTC
        

# ls /usr/lib/wx/config/
gtk2-ansi-release-2.6  gtk2-unicode-release-2.6





Comment 9


Attila Stehr





          2006-02-06 13:24:36 UTC
        

works w/ me too ;)

magic media # ls /usr/lib/wx/config/
.  ..  gtk2-ansi-release-2.6  gtk2-unicode-release-2.6
magic media #





Comment 10


Frédéric Point





          2006-04-09 12:33:15 UTC
        

But why wxpython is complaining about that :
>>> Unpacking wxPythonSrc-2.4.2.4.tar.gz to /var/tmp/portage/wxpython-2.4.2.4/work
>>> Source unpacked.
!!! set-wxconfig: Error:  Can't find normal or debug version:
!!! set-wxconfig:         /usr/bin/wxgtk2u-2.4-config not found
!!! set-wxconfig:         /usr/bin/wxgtk2ud-2.4-config not found
!!! You need to emerge wxGTK with unicode in your USE

Is this a bug in wxpython ?




Comment 11


Mart Raudsepp






          2006-04-10 14:26:16 UTC
        

No.
You need matching versions. wxPython-2.4.x will never work with wxGTK-2.6




Comment 12


Mart Raudsepp






          2006-08-06 15:36:01 UTC
        

Comment on the original posted problem:

It does unicode fine for me with latest stable 2.6.2-r1 ebuild. As others have noted, the wxlib eclass takes care of this - if configure_build is called with the second argument as unicode (which you can see in the ebuild), it will do both unicode and non-unicode at the moment.

I do not know why you don't see a unicode config in /usr/lib/wx/config/, if this still doesn't work for you with USE=unicode, please reopen and provide more information. emerge --info, what's in /usr/lib/wx/include, if it installed libraries containing gtk2u in their name, not just gtk2, etc.

On comment #10:
If there are issues with wxpython-2.4 picking up wxGTK-2.6 or something of that sort, please open a new bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

