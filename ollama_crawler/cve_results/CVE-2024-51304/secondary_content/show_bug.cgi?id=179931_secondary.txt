Title: 179931 – sys-libs/ss  cannot find -lcom_err when cross compiling
URL: https://bugs.gentoo.org/show_bug.cgi?id=179931

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179931
sys-libs/ss  cannot find -lcom_err when cross compiling
Last modified: 2007-05-27 17:10:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179931 
      - sys-libs/ss  cannot find -lcom_err when cross compiling


Summary:
sys-libs/ss  cannot find -lcom_err when cross compiling
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-26 22:59 UTC by Karl H





      Modified:
    
2007-05-27 17:10 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karl H





          2007-05-26 22:59:52 UTC
        

when cross compiling sys-libs/ss configure fails on:

/usr/libexec/gcc/armeb-softfloat-linux-uclibc/ld: cannot find -lcom_err


Reproducible: Always

Steps to Reproduce:
1.xmerge sys-libs/ss

Actual Results:  
>>> Emerging (1 of 3) sys-libs/ss-1.39 to /armeb-gentoo-v2/
 * e2fsprogs-1.39.tar.gz RMD160 ;-) ...                                                                                     [ ok ]
 * e2fsprogs-1.39.tar.gz SHA1 ;-) ...                                                                                       [ ok ]
 * e2fsprogs-1.39.tar.gz SHA256 ;-) ...                                                                                     [ ok ]
 * e2fsprogs-1.39.tar.gz size ;-) ...                                                                                       [ ok ]
 * checking ebuild checksums ;-) ...                                                                                        [ ok ]
 * checking auxfile checksums ;-) ...                                                                                       [ ok ]
 * checking miscfile checksums ;-) ...                                                                                      [ ok ]
 * checking e2fsprogs-1.39.tar.gz ;-) ...                                                                                   [ ok ]
>>> Unpacking source...
>>> Unpacking e2fsprogs-1.39.tar.gz to /var/tmp/portage/sys-libs/ss-1.39/work
 * Applying ss-1.38-locale.patch ...                                                                                        [ ok ]
 * Applying ss-1.39-makefile.patch ...                                                                                      [ ok ]
 * Applying ss-1.39-parse-types.patch ...                                                                                   [ ok ]
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/sys-libs/ss-1.39/work/e2fsprogs-1.39 ...
 * econf: updating e2fsprogs-1.39/config/config.guess with /usr/share/gnuconfig/config.guess
 * econf: updating e2fsprogs-1.39/config/config.sub with /usr/share/gnuconfig/config.sub
./configure --prefix=/usr --host=armeb-softfloat-linux-uclibc --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --enable-elf-shlibs --with-ldopts= --disable-nls --build=i686-pc-linux-gnu
Generating configuration file for e2fsprogs version 1.39
Release date is May, 2006
checking build system type... i686-pc-linux-gnu
checking host system type... armeb-softfloat-linux-uclibc
CC defaults to armeb-softfloat-linux-uclibc-gcc
checking for armeb-softfloat-linux-uclibc-gcc... armeb-softfloat-linux-uclibc-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether armeb-softfloat-linux-uclibc-gcc accepts -g... yes
checking for armeb-softfloat-linux-uclibc-gcc option to accept ANSI C... none needed
LD defaults to armeb-softfloat-linux-uclibc-gcc
checking how to run the C preprocessor... armeb-softfloat-linux-uclibc-gcc -E
checking for egrep... grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking linux/fs.h usability... yes
checking linux/fs.h presence... yes
checking for linux/fs.h... yes
checking for additional special compiler flags... (none)
LDFLAGS is
Disabling maintainer mode by default
Disabling compression support by default
Enabling htree directory support by default
Enabling ELF shared libraries
Disabling BSD shared libraries by default
Disabling profiling libraries by default
Disabling checker libraries by default
Disabling journal debugging by default
Disabling blkid debugging by default
Disabling testio debugging by default
Enabling swapfs support by default
Enabling debugfs support by default
Enabling e2image support by default
Enabling e2resize support by default
Building e2fsck statically by default
Building fsck wrapper by default
Building e2initrd helper by default
Disabling device-mapper support by default
checking whether make sets $(MAKE)... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking whether NLS is requested... no
checking for msgfmt... /usr/bin/msgfmt
checking for gmsgfmt... /usr/bin/gmsgfmt

<snip>

        CC prompt.c
        CC request_tbl.c
        CC list_rqs.c
        CC pager.c
        CC requests.c
        CC data.c
        CC get_readline.c
        SUBST mk_cmds
        MK_CMDS std_rqs.c
        CC std_rqs.c
        GEN_LIB libss.a
        GEN_ELF_SOLIB libss.so.2.0
/usr/libexec/gcc/armeb-softfloat-linux-uclibc/ld: cannot find -lcom_err
collect2: ld returned 1 exit status
make: *** [libss.so.2.0] Error 1
make: Leaving directory `/var/tmp/portage/sys-libs/ss-1.39/work/e2fsprogs-1.39/lib/ss'

!!! ERROR: sys-libs/ss-1.39 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  ss-1.39.ebuild, line 48:   Called die




Comment 1


Karl H





          2007-05-26 23:02:43 UTC
        

My hack solution to fix my build was to edit the ebuild, and change the line:

      --with-ldopts="${LDFLAGS}" \

to

      --with-ldopts="${LDFLAGS} -L/armeb-gentoo-v2/lib" \


This should be fixed though to not require it. 




Comment 2


SpanKY






          2007-05-27 17:10:40 UTC
        

install into your sysroot and it'd work fine

if you dont want to install into sysroot, then you're responsible for adding proper -L flags to your LDFLAGS









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

