Title: 259401 – www-client/mozilla-firefox-3.0.6 - /usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:60: error: 'gfx_format' has not been declared
URL: https://bugs.gentoo.org/show_bug.cgi?id=259401

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 259401
www-client/mozilla-firefox-3.0.6 - /usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:60: error: 'gfx_format' has not been declared
Last modified: 2009-03-06 14:27:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 259401 
      - www-client/mozilla-firefox-3.0.6 - /usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:60: error: 'gfx_format' has not been declared


Summary:
www-client/mozilla-firefox-3.0.6 - /usr/lib64/xulrunner-1.9/include/gfxIImage...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-02-17 20:03 UTC by Peter Weilbacher





      Modified:
    
2009-03-06 14:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Weilbacher





          2009-02-17 20:03:39 UTC
        

I have tried to compile www-client/mozilla-firefox-3.0.6 every now and then again for the last week or so. It always fails with this message.

ERROR: compile

ERROR: www-client/mozilla-firefox-3.0.6 failed.
Call stack:
              ebuild.sh, line   49:  Called src_compile
            environment, line 3254:  Called die
The specific snippet of code:
      emake ${jobs} || die
 The die message:
  (no error message)

If you need support, post the topmost build error, and the call stack if relevant.
A complete build log is located at '/root/log/www-client:mozilla-firefox-3.0.6:20090217-125438.log'.
The ebuild environment file is located at '/home/portage/tmp/portage/www-client/mozilla-firefox-3.0.6/temp/environment'.

Reproducible: Always

Steps to Reproduce:




The actual failure is

nsGNOMEShellService.cpp
In file included from nsGNOMEShellService.cpp:50:
/usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:60: error: 'gfx_format' has not been declared
/usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:60: error: 'gfx_depth' has not been declared
/usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:106: error: 'gfx_format' has not been declared
/usr/lib64/xulrunner-1.9/include/gfxIImageFrame.h:130: error: 'gfx_color' has not been declared
In file included from nsGNOMEShellService.cpp:57:
/usr/lib64/xulrunner-1.9/include/imgIContainer.h:82: error: 'gfx_format' has not been declared
gmake[6]: *** [nsGNOMEShellService.o] Error 1

I don't understand this, it has worked for previous versions and still works in compilations I do outside portage almost every day. These types are defined in gfx/idl/gfxtypes.idl and so should be in gfxtypes.h but I can find it neither in there nor any other file in /usr/lib64/xulrunner-1.9/include/... I also re-emerged xulrunner-1.9.0.6-r1 again, without success.

I guess it's something in my setup (emerge --info):

Portage 2.1.6.4 (default/linux/amd64/2008.0/no-multilib, gcc-4.3.3, glibc-2.9_p2
0081201-r1, 2.6.28-tuxonice x86_64)
=================================================================
System uname: Linux-2.6.28-tuxonice-x86_64-Intel-R-_Core-TM-2_Duo_CPU_P8600_@_2.
40GHz-with-glibc2.2.5
Timestamp of tree: Tue, 17 Feb 2009 08:00:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7-r1, 2.1.6-r1
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shu
tdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/
fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/t
exmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/home/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms str
ict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.tu-clau
sthal.de/pub/linux/gentoo http://de-mirror.org/distro/gentoo ftp://ftp.rz.tu-bs.
de/pub/mirror/ftp.gentoo.org/gentoo-distfiles http://ftp.spline.inf.fu-berlin.de
/mirrors/gentoo ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo http://distfile
s.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="C"
LDFLAGS="-Wl,-O1"
LINGUAS="en de pl es"
MAKEOPTS="-s -j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress 
--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclu
de=/local --exclude=/packages"
PORTAGE_TMPDIR="/home/portage/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac aalib acl acpi alsa amd64 bash-completion berkdb bzip2 cairo cddb
 cdr cli cracklib crypt cups dell dga dri dvd dvdread encode esd exif fbsplash f
fmpeg firefox flac fontconfig fortran gd gdbm gif gimpprint gnome gnuplot gpm gt
k hal hddtemp iconv ipv6 isdnlog jpeg jpeg2k laptop lcms libnotify loop-aes mad 
midi mmx mozbranding mp3 mpeg mplayer mudflap ncurses nls nptl nptlonly nsplugin
 nvidia ogg opengl openmp pam pcre pdf perl png pppd python readline reflection 
sdl session spl sqlite sqlite3 sse sse2 sse3 sse4 ssl ssse3 svg sysfs tcl tcpd t
heora threads tiff tk truetype unicode vim-pager vim-syntax vim-with-x vorbis wi
fi x264 xcb xine xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp
 atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 h
da-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymf
pci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug fil
e hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug
 rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_a
lias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz
_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock
 deflate dir disk_cache env expires ext_filter file_cache filter headers include
 info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif sp
eling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICE
S="keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633
 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de pl es" USERLAND="
GNU" VIDEO_CARDS="intel nv nvidia vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PO
RTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLA
Y




Comment 1


Torbjörn Svensson





          2009-02-18 22:25:42 UTC
        

Can you please post your output of
# emerge -pv mozilla-firefox xulrunner




Comment 2


Peter Weilbacher





          2009-02-19 08:45:31 UTC
        

Sure, here it is:

$ emerge -pv mozilla-firefox xulrunner

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] net-libs/xulrunner-1.9.0.6-r1  USE="gnome ipv6 -custom-optimization -dbus -java -startup-notification" 0 kB
[ebuild     U ] www-client/mozilla-firefox-3.0.6 [3.0.5] USE="gnome ipv6 xulrunner -bindist -custom-optimization -dbus -iceweasel -java -mozdevelop -restrict-javascript -startup-notification" LINGUAS="de en es pl -af -ar -be -bg -bn -bn_IN -ca -cs -cy -da -el -en_GB -en_US -eo -es_AR -es_ES -et -eu -fi -fr -fy -fy_NL -ga -ga_IE -gl -gu -gu_IN -he -hi -hi_IN -hu -id -is -it -ja -ka -kn -ko -ku -lt -lv -mk -mn -mr -nb -nb_NO -nl -nn -nn_NO -oc -pa -pa_IN -pt -pt_BR -pt_PT -ro -ru -si -sk -sl -sq -sr -sv -sv_SE -te -th -tr -uk -zh -zh_CN -zh_TW" 0 kB

Total: 2 packages (1 upgrade, 1 reinstall), Size of downloads: 0 kB




Comment 3


Peter Weilbacher





          2009-03-06 14:27:13 UTC
        

This has fixed itself with the new .7 packages. Thanks for the help. ;-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

