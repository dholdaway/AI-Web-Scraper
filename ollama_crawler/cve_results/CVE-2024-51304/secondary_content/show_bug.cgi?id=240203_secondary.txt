Title: 240203 – app-text/gnomesword-2.1.7 dies attempting to free() invalid pointer
URL: https://bugs.gentoo.org/show_bug.cgi?id=240203

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 240203
app-text/gnomesword-2.1.7 dies attempting to free() invalid pointer
Last modified: 2008-12-19 14:28:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 240203 
      - app-text/gnomesword-2.1.7 dies attempting to free() invalid pointer


Summary:
app-text/gnomesword-2.1.7 dies attempting to free() invalid pointer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Theology Herd (disbanded)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-06 07:33 UTC by Paul Price





      Modified:
    
2008-12-19 14:28 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul Price





          2008-10-06 07:33:34 UTC
        

gnomesword crashes when started from either the Gnome menu or the command-line.  A couple of windows pop up briefly (too short to see anything), and then glibc detects a free() of an invalid pointer.  I'm fairly sure I've got everything up to date, but I'm a bit of a n00b so it's possible I've stuffed something up.




Reproducible: Always

Steps to Reproduce:
1. Run gnomesword from Gnome menu or command-line.

Actual Results:  
price@neverland:/home/price>gnomesword2 

Initiating GNOME session handler

update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
update flow align
*** glibc detected *** gnomesword2: free(): invalid pointer: 0x000000000133bc80 ***
======= Backtrace: =========
/lib/libc.so.6[0x2b39d6f32aad]
/lib/libc.so.6(cfree+0x76)[0x2b39d6f34796]
/usr/lib/libgtkhtml-3.6.so.18(html_text_slave_get_glyph_items+0x23c)[0x2b39d1b0496c]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1b05941]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1abd532]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1ac123f]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1abd532]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1ac4999]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1ade3a7]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1ab64f8]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d44b5fed]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x109)[0x2b39d5901d09]
/usr/lib/libgobject-2.0.so.0[0x2b39d5911c6f]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x61e)[0x2b39d5912b4e]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d45b8c8e]
/usr/lib/libgtk-x11-2.0.so.0(gtk_main_do_event+0x490)[0x2b39d44b0520]
/usr/lib/libgdk-x11-2.0.so.0[0x2b39d4c90bf0]
/usr/lib/libgdk-x11-2.0.so.0(gdk_window_process_updates+0x124)[0x2b39d4c910e4]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x109)[0x2b39d5901d09]
/usr/lib/libgobject-2.0.so.0[0x2b39d5911ad1]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_adjustment_value_changed+0x3c)[0x2b39d43e1a2c]
/usr/lib/libgtkhtml-3.6.so.18[0x2b39d1ab63de]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d450b97a]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d45b4b43]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d45b6bb5]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d447849f]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d45b4b43]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x855)[0x2b39d5912d85]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x83)[0x2b39d5912f63]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_size_allocate+0x18f)[0x2b39d45bdd0f]
/usr/lib/libgtk-x11-2.0.so.0[0x2b39d447844d]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x1c7)[0x2b39d5901dc7]
/usr/lib/libgobject-2.0.so.0[0x2b39d591175d]
======= Memory map: ========
00400000-0048f000 r-xp 00000000 08:07 5161420                            /usr/bin/gnomesword2
0068e000-0068f000 r--p 0008e000 08:07 5161420                            /usr/bin/gnomesword2
0068f000-00699000 rw-p 0008f000 08:07 5161420                            /usr/bin/gnomesword2
00699000-0167c000 rw-p 00699000 00:00 0                                  [heap]
2b39d1863000-2b39d187e000 r-xp 00000000 08:07 3983155                    /lib64/ld-2.6.1.so
2b39d187e000-2b39d1880000 rw-p 2b39d187e000 00:00 0 
2b39d1a7d000-2b39d1a7e000 r--p 0001a000 08:07 3983155                    /lib64/ld-2.6.1.so
2b39d1a7e000-2b39d1a7f000 rw-p 0001b000 08:07 3983155                    /lib64/ld-2.6.1.so
2b39d1a7f000-2b39d1b32000 r-xp 00000000 08:07 4916737                    /usr/lib64/libgtkhtml-3.6.so.18.0.2
2b39d1b32000-2b39d1d32000 ---p 000b3000 08:07 4916737                    /usr/lib64/libgtkhtml-3.6.so.18.0.2
2b39d1d32000-2b39d1d34000 r--p 000b3000 08:07 4916737                    /usr/lib64/libgtkhtml-3.6.so.18.0.2
2b39d1d34000-2b39d1d39000 rw-p 000b5000 08:07 4916737                    /usr/lib64/libgtkhtml-3.6.so.18.0.2
2b39d1d39000-2b39d1d3c000 rw-p 2b39d1d39000 00:00 0 
2b39d1d3c000-2b39d1d7e000 r-xp 00000000 08:07 4718968                    /usr/lib64/libgnomeprintui-2-2.so.0.1.0
2b39d1d7e000-2b39d1f7d000 ---p 00042000 08:07 4718968                    /usr/lib64/libgnomeprintui-2-2.so.0.1.0
2b39d1f7d000-2b39d1f7f000 r--p 00041000 08:07 4718968                    /usr/lib64/libgnomeprintui-2-2.so.0.1.0
2b39d1f7f000-2b39d1f81000 rw-p 00043000 08:07 4718968                    /usr/lib64/libgnomeprintui-2-2.so.0.1.0
2b39d1f81000-2b39d1f82000 rw-p 2b39d1f81000 00:00 0 
2b39d1f82000-2b39d1ff2000 r-xp 00000000 08:07 4771561                    /usr/lib64/libgnomeprint-2-2.so.0.1.0
2b39d1ff2000-2b39d21f1000 ---p 00070000 08:07 4771561                    /usr/lib64/libgnomeprint-2-2.so.0.1.0
2b39d21f1000-2b39d21f3000 r--p 0006f000 08:07 4771561                    /usr/lib64/libgnomeprint-2-2.so.0.1.0
2b39d21f3000-2b39d21f5000 rw-p 00071000 08:07 4771561                    /usr/lib64/libgnomeprint-2-2.so.0.1.0
2b39d21f5000-2b39d2209000 r-xp 00000000 08:07 1232239                    /lib64/libz.so.1.2.3
2b39d2209000-2b39d2308000 ---p 00014000 08:07 1232239                    /lib64/libz.so.1.2.3
2b39d2308000-2b39d2309000 rw-p 00013000 08:07 1232239                    /lib64/libz.so.1.2.3
2b39d2309000-2b39d239f000 r-xp 00000000 08:07 4702711                    /usr/lib64/libgnomeui-2.so.0.2201.0
2b39d239f000-2b39d259e000 ---p 00096000 08:07 4702711                    /usr/lib64/libgnomeui-2.so.0.2201.0
2b39d259e000-2b39d25a1000 r--p 00095000 08:07 4702711                    /usr/lib64/libgnomeui-2.so.0.2201.0
2b39d25a1000-2b39d25a4000 rw-p 00098000 08:07 4702711                    /usr/lib64/libgnomeui-2.so.0.2201.0
2b39d25a4000-2b39d25a5000 rw-p 2b39d25a4000 00:00 0 
2b39d25a5000-2b39d25ae000 r-xp 00000000 08:07 3507338                    /usr/lib64/libSM.so.6.0.0
2b39d25ae000-2b39d27ae000 ---p 00009000 08:07 3507338                    /usr/lib64/libSM.so.6.0.0
2b39d27ae000-2b39d27af000 r--p 00009000 08:07 3507338                    /usr/lib64/libSM.so.6.0.0
2b39d27af000-2b39d27b0000 rw-p 0000a000 08:07 3507338                    /usr/lib64/libSM.so.6.0.0
2b39d27b0000-2b39d27c7000 r-xp 00000000 08:07 3719213                    /usr/lib64/libICE.so.6.3.0
2b39d27c7000-2b39d29c6000 ---p 00017000 08:07 3719213                    /usr/lib64/libICE.so.6.3.0
2b39d29c6000-2b39d29c7000 r--p 00016000 08:07 3719213                    /usr/lib64/libICE.so.6.3.0
2b39d29c7000-2b39d29c8000 rw-p 00017000 08:07 3719213                    /usr/lib64/libICE.so.6.3.0
2b39d29c8000-2b39d29cc000 rw-p 2b39d29c8000 00:00 0 
2b39d29cc000-2b39d2a2d000 r-xp 00000000 08:07 4313386                    /usr/lib64/libgnomevfs-2.so.0.2200.0
2b39d2a2d000-2b39d2c2c000 ---p 00061000 08:07 4313386                    /usr/lib64/libgnomevfs-2.so.0.2200.0
2b39d2c2c000-2b39d2c2f000 r--p 00060000 08:07 4313386                    /usr/lib64/libgnomevfs-2.so.0.2200.0
2b39d2c2f000-2b39d2c31000 rw-p 00063000 08:07 4313386                    /usr/lib64/libgnomevfs-2.so.0.2200.0
2b39d2c31000-2b39d2c33000 rw-p 2b39d2c31000 00:00 0 
2b39d2c33000-2b39d2c62000 r-xp 00000000 08:07 4702611                    /usr/lib64/libgconf-2.so.4.1.5
2b39d2c62000-2b39d2e62000 ---p 0002f000 08:07 4702611                    /usr/lib64/libgconf-2.so.4.1.5
2b39d2e62000-2b39d2e64000 r--p 0002f000 08:07 4702611                    /usr/lib64/libgconf-2.so.4.1.5
2b39d2e64000-2b39d2e67000 rw-p 00031000 08:07 4702611                    /usr/lib64/libgconf-2.so.4.1.5
2b39d2e67000-2b39d2ed1000 r-xp 00000000 08:07 5161606                    /usr/lib64/libbonoboui-2.so.0.0.0
2b39d2ed1000-2b39d30d0000 ---p 0006a000 08:07 5161606                    /usr/lib64/libbonoboui-2.so.0.0.0
2b39d30d0000-2b39d30d1000 r--p 00069000 08:07 5161606                    /usr/lib64/libbonoboui-2.so.0.0.0
2b39d30d1000-2b39d30d5000 rw-p 0006a000 08:07 5161606                    /usr/lib64/libbonoboui-2.so

Expected Results:  
Started gnomesword.




Comment 1


Jeroen Roovers (RETIRED)






          2008-10-06 07:39:48 UTC
        

Please post your `emerge --info' too.




Comment 2


Paul Price





          2008-10-06 17:27:18 UTC
        

Portage 2.1.4.4 (default-linux/amd64/2006.1/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.23-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.23-gentoo-r3 x86_64 AMD Turion(tm) 64 X2 Mobile Technology TL-56
Timestamp of tree: Sat, 04 Oct 2008 20:34:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r6, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -msse3 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/init.d /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -msse3 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache digest distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 apm arts bash-completion berkdb cairo cdr cli cracklib crypt cups dbus dri dvd dvdr eds emboss encode esd fam firefox fortran gdbm gif gnome gnutls gpm gstreamer gtk gtk2 hal iconv imap ipv6 isdnlog jpeg laptop ldap lm_sensors mad mbox midi mikmod mp3 mpeg mudflap ncurses nls nptl nptlonly ntpl ntplonly ogg opengl openmp oss pam pcre pdf perl pic png ppds pppd python quicktime readline reflection samba sdl session spell spl ssl sysfs tcpd truetype unicode vim-with-x vorbis xinerama xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY






Comment 3


Steve Dibb (RETIRED)






          2008-12-18 15:15:59 UTC
        

You're using an old profile, I'd recommend upgrading it to 2008.0

Can you also try a more recent version of gnomesword?




Comment 4


Paul Price





          2008-12-19 04:34:18 UTC
        

After a thorough update (profile --> 2008.0, emerge -u world, revdep-rebuild), gnomesword works.  Sorry for the false alarm.

Thanks!




Comment 5


Steve Dibb (RETIRED)






          2008-12-19 14:28:11 UTC
        

(In reply to comment #4)
> After a thorough update (profile --> 2008.0, emerge -u world, revdep-rebuild),
> gnomesword works.  Sorry for the false alarm.
> 
> Thanks!
> 

No worries, thanks Paul









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

