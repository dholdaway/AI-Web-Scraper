Title: 82485 – emerge hal (0.4.5-r2) fails on _configuration_ stage when linux24 headers installed
URL: https://bugs.gentoo.org/show_bug.cgi?id=82485

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 82485
emerge hal (0.4.5-r2) fails on _configuration_ stage when linux24 headers installed
Last modified: 2005-02-20 14:23:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 82485 
      - emerge hal (0.4.5-r2) fails on _configuration_ stage when linux24 headers installed


Summary:
emerge hal (0.4.5-r2) fails on _configuration_ stage when linux24 headers ins...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-18 11:39 UTC by Yasha Davidov





      Modified:
    
2005-02-20 14:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




log of configuration

              (config.log,51.74 KB,
                text/plain)

            
2005-02-18 11:41 UTC,

            Yasha Davidov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Yasha Davidov





          2005-02-18 11:39:01 UTC
        

emerge hal (0.4.5-r2) fails. On configuration stage I get
checking for BLKGETSIZE64... no



Reproducible: Always
Steps to Reproduce:
# emerge hal



Actual Results:  
Calculating dependencies ...done!
>>> emerge (1 of 1) sys-apps/hal-0.4.5-r2 to /
>>> md5 src_uri ;-) hal-0.4.5.tar.gz
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     2.6.10-gentoo-r6005
>>> Unpacking source...
>>> Unpacking hal-0.4.5.tar.gz to /var/tmp/portage/hal-0.4.5-r2/work
 * Applying hal-0.4.1-old_storage_policy.patch ...                        [ ok ]
* Applying hal-0.4.5-gentoo_gphoto2_usermap.patch ...                    [ ok ]
* Applying hal-0.4.5-net_lockup.patch ...                                [ ok ]
* Applying hal-0.4.5-vat_ntfs_labels.patch ...                           [ ok
]>>> Source unpacked.
 * econf: updating hal-0.4.5/config.guess with /usr/share/gnuconfig/config.guess
* econf: updating hal-0.4.5/config.sub with /usr/share/gnuconfig/config.sub
./configure --prefix=/usr --host=i386-pc-linux-gnu --mandir=/usr/share/man
--infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc
--localstatedir=/var/lib --libdir=/usr/lib --disable-verbose-mode
--disable-pcmcia-support --enable-fstab-sync --enable-hotplug-map
--disable-docbook-docs --enable-doxygen-docs --with-pid-file=/var/run/hald/hald.pid
configure: WARNING: If you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used.
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i386-pc-linux-gnu-strip... no
checking for strip... strip
checking whether to enable maintainer-specific portions of Makefiles... no
checking for style of include used by make... GNU
checking for i386-pc-linux-gnu-gcc... i386-pc-linux-gnu-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether i386-pc-linux-gnu-gcc accepts -g... yes
checking for i386-pc-linux-gnu-gcc option to accept ANSI C... none needed
checking dependency style of i386-pc-linux-gnu-gcc... gcc3
checking for library containing strerror... none required
checking for i386-pc-linux-gnu-gcc... (cached) i386-pc-linux-gnu-gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether i386-pc-linux-gnu-gcc accepts -g... (cached) yes
checking for i386-pc-linux-gnu-gcc option to accept ANSI C... (cached) none needed
checking dependency style of i386-pc-linux-gnu-gcc... (cached) gcc3
checking for i386-pc-linux-gnu-gcc... (cached) i386-pc-linux-gnu-gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether i386-pc-linux-gnu-gcc accepts -g... (cached) yes
checking for i386-pc-linux-gnu-gcc option to accept ANSI C... (cached) none needed
checking dependency style of i386-pc-linux-gnu-gcc... (cached) gcc3
checking how to run the C preprocessor... i386-pc-linux-gnu-gcc -E
checking for egrep... grep -E
checking for ANSI C header files... yes
checking build system type... i686-pc-linux-gnu
checking host system type... i386-pc-linux-gnu
checking for a sed that does not truncate output... /bin/sed
checking for ld used by i386-pc-linux-gnu-gcc... /usr/i386-pc-linux-gnu/bin/ld
checking if the linker (/usr/i386-pc-linux-gnu/bin/ld) is GNU ld... yes
checking for /usr/i386-pc-linux-gnu/bin/ld option to reload object files... -r
checking for BSD-compatible nm... nm
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for i386-pc-linux-gnu-g++... i386-pc-linux-gnu-g++
checking whether we are using the GNU C++ compiler... yes
checking whether i386-pc-linux-gnu-g++ accepts -g... yes
checking dependency style of i386-pc-linux-gnu-g++... gcc3
checking how to run the C++ preprocessor... i386-pc-linux-gnu-g++ -E
checking for i386-pc-linux-gnu-g77... i386-pc-linux-gnu-g77
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether i386-pc-linux-gnu-g77 accepts -g... yes
checking the maximum length of command line arguments... 32768
checking command to parse nm output from i386-pc-linux-gnu-gcc object... ok
checking for objdir... .libs
checking for i386-pc-linux-gnu-ar... no
checking for ar... ar
checking for i386-pc-linux-gnu-ranlib... no
checking for ranlib... ranlib
checking for i386-pc-linux-gnu-strip... strip
checking if i386-pc-linux-gnu-gcc static flag  works... yes
checking if i386-pc-linux-gnu-gcc supports -fno-rtti -fno-exceptions... no
checking for i386-pc-linux-gnu-gcc option to produce PIC... -fPIC
checking if i386-pc-linux-gnu-gcc PIC flag -fPIC works... yes
checking if i386-pc-linux-gnu-gcc supports -c -o file.o... yes
checking whether the i386-pc-linux-gnu-gcc linker
(/usr/i386-pc-linux-gnu/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by i386-pc-linux-gnu-g++... /usr/i386-pc-linux-gnu/bin/ld
checking if the linker (/usr/i386-pc-linux-gnu/bin/ld) is GNU ld... yes
checking whether the i386-pc-linux-gnu-g++ linker
(/usr/i386-pc-linux-gnu/bin/ld) supports shared libraries... yes
checking for i386-pc-linux-gnu-g++ option to produce PIC... -fPIC
checking if i386-pc-linux-gnu-g++ PIC flag -fPIC works... yes
checking if i386-pc-linux-gnu-g++ supports -c -o file.o... yes
checking whether the i386-pc-linux-gnu-g++ linker
(/usr/i386-pc-linux-gnu/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for i386-pc-linux-gnu-g77 option to produce PIC... -fPIC
checking if i386-pc-linux-gnu-g77 PIC flag -fPIC works... yes
checking if i386-pc-linux-gnu-g77 supports -c -o file.o... yes
checking whether the i386-pc-linux-gnu-g77 linker
(/usr/i386-pc-linux-gnu/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking whether make sets $(MAKE)... (cached) yes
checking whether ln -s works... yes
checking for python... /usr/bin/python
checking for python version... 2.3
checking for python platform... linux2
checking for python script directory... ${prefix}/lib/python2.3/site-packages
checking for python extension module directory...
${exec_prefix}/lib/python2.3/site-packages
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... 64
checking for _LARGE_FILES value needed for large files... no
checking for /usr/share/hwdata/pci.ids... no
checking for /usr/share/misc/pci.ids... yes
checking for /usr/share/pci.ids... no
checking popt.h usability... yes
checking popt.h presence... yes
checking for popt.h... yes
checking for poptGetContext in -lpopt... yes
checking sys/capability.h usability... yes
checking sys/capability.h presence... yes
checking for sys/capability.h... yes
checking for pkg-config... /usr/bin/pkg-config
checking for glib-2.0 >= 2.2.2, gobject-2.0 >= 2.2.2, dbus-glib-1 >= 0.20,
dbus-1 >= 0.20... yes
checking PACKAGE_CFLAGS... -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include
-I/usr/include/dbus-1.0 -I/usr/lib/dbus-1.0/include
checking PACKAGE_LIBS... -lgobject-2.0 -ldbus-glib-1 -lglib-2.0 -ldbus-1
checking expat.h usability... yes
checking expat.h presence... yes
checking for expat.h... yes
checking for XML_ParserCreate in -lexpat... yes
checking for dbus-1 >= 0.20... yes
checking DBUS_CFLAGS... -I/usr/include/dbus-1.0 -I/usr/lib/dbus-1.0/include
checking DBUS_LIBS... -ldbus-1
checking for doxygen... /usr/bin/doxygen
checking whether to build Doxygen documentation... yes
checking for BLKGETSIZE64... no
configure: error: BLKGETSIZE64 is not defined

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/hal-0.4.5-r2/work/hal-0.4.5/config.log

!!! ERROR: sys-apps/hal-0.4.5-r2 failed.
!!! Function econf, Line 485, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.



# emerge info
Portage 2.0.51-r15 (default-linux/x86/2004.3, gcc-3.3.5,
glibc-2.3.4.20040808-r1, 2.6.10-gentoo-r6005 i686)
=================================================================
System uname: 2.6.10-gentoo-r6005 i686 AMD Athlon(tm) XP 2200+
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb 16 2005, 23:55:10)]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.4.21-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O3 -march=athlon-xp -pipe -mcpu=i686 -fomit-frame-pointer"
CHOST="i386-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=athlon-xp -pipe -mcpu=i686 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://gentoo.chem.wisc.edu/gentoo"
LANG="ru_RU.KOI8-R"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X aac acpi alsa apm arts avi bash-completion berkdb bitmap-fonts
bzlib cdr cpdflib crypt cups curl divx doc dvd emacs encode esd ethereal exif
f77 fam flac flash flatfile font-server foomaticdb fortran ftp gdbm gif
gimpprint gnome gpm gstreamer gtk gtk2 guile iconv icq imagemagick imlib ipv6
jabber java jpeg libg++ libwww mad mikmod ming mmx mng motif mozilla mpeg mule
mysql ncurses nls nptl oggvorbis opengl oscar pam pcre pda pdflib perl php
plotutils png pnp posix ppds python quicktime readline samba sdl sockets spell
sqlite sse ssl svg tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts usb
wmf x xine xml2 xmms xosd xpm xv xvid zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Yasha Davidov





          2005-02-18 11:41:51 UTC
        

Created attachment 51542 [details]
log of configuration




Comment 2


foser (RETIRED)






          2005-02-20 08:37:20 UTC
        

you need 2.6 headers, we dep on those, so I don't see how this could happen ?




Comment 3


Yasha Davidov





          2005-02-20 13:57:12 UTC
        

Really strange. 
# emerge unmerge linux-headers
# emerge linux26-headers
helped. But I thought that I had 2.6 headers installed.




Comment 4


foser (RETIRED)






          2005-02-20 14:23:52 UTC
        

well, if you can't consistently reproduce it, I can't do much about it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

