Title: 484596 – media-sound/pulseaudio USE=bluetooth - A2DP streaming to headset does not work
URL: https://bugs.gentoo.org/show_bug.cgi?id=484596

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 484596
media-sound/pulseaudio USE=bluetooth - A2DP streaming to headset does not work
Last modified: 2014-04-01 06:14:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 484596 
      - media-sound/pulseaudio USE=bluetooth - A2DP streaming to headset does not work


Summary:
media-sound/pulseaudio USE=bluetooth - A2DP streaming to headset does not work
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Arun Raghavan (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-09-11 16:35 UTC by pille





      Modified:
    
2014-04-01 06:14 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sound









See Also:


https://bugzilla.redhat.com/show_bug.cgi?id=964031

506024





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


pille





          2013-09-11 16:35:01 UTC
        

currently it's not possible to use bluetooth A2DP streaming to a headset (e.g. setup using blueman) as connecting fails.
i understand that upgrading to bluez-5 like proposed in issue 452162 is a major update and probably breaks other stuff without further testing, but the guys at fedora had a similar issue and patched bluez-4.101: https://bugzilla.redhat.com/show_bug.cgi?id=964031

i would appreciate hearing this resolved for gentoo, so i can happily enjoy my music wireless again...

Reproducible: Always

Steps to Reproduce:
1.use blueman, pair with headset
2.add audio sink

Actual Results:  
fail

Expected Results:  
sound

i'm using
Enable=Source,Sink,Headset,Gateway,Control,Socket,Media
in /etc/bluetooth/audio.conf




Comment 1


Jeroen Roovers (RETIRED)






          2013-09-13 13:16:58 UTC
        

Please post your `emerge --info net-wireless/bluez media-sound/pulseaudio' output in a comment.




Comment 2


pille





          2013-09-16 09:10:25 UTC
        

saba ~ # emerge --info net-wireless/bluez media-sound/pulseaudio
Portage 2.2.0_alpha188 (default/linux/amd64/13.0/desktop, gcc-4.7.3-vanilla, glibc-2.17, 3.8.0-sabayon x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.8.0-sabayon-x86_64-Intel-R-_Core-TM-_i7-2600_CPU_@_3.40GHz-with-gentoo-2.2
KiB Mem:     8078040 total,    618180 free
KiB Swap:    8388604 total,         0 free
Timestamp of tree: Mon, 19 Aug 2013 08:15:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
app-shells/bash:          4.2_p37
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.5::sabayon-distro
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2::sabayon-distro
sys-apps/openrc:          0.12_pre1-r2::sabayon-distro
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.69
sys-devel/automake:       1.12.6
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.7.3::sabayon-distro
sys-devel/gcc-config:     1.7.3::sabayon-distro
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.7
sys-libs/glibc:           2.17::sabayon-distro
Repositories: gentoo user_defined
Installed sets: @system
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=x86-64 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/conf.d /etc/entropy /etc/init.d /usr/share/config/kdm /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/skel /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=x86-64 -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs ccache config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo/ http://archive.mmu.edu.my/gentoo rsync://gentoo.bloodhost.ru/gentoo-distfiles ftp://gentoo.mirrors.tds.net/gentoo ftp://ftp.halifax.rwth-aachen.de/gentoo/ rsync://mirror.neolabs.kz/gentoo http://ftp.gentoo.bg/ http://ftp.cc.uoc.gr/mirrors/linux/gentoo/ ftp://ftp.cc.uoc.gr/mirrors/linux/gentoo/ ftp://mirrors.tera-byte.com/pub/gentoo"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j16 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac accessibility acl acpi aiglx aim alsa amd64 artswrappersuid audiofile avahi bash-completion berkdb bidi bluetooth bzip2 cairo cdda cddb cdr cjk cli consolekit cpudetection cracklib crypt cups cxx dbus dga dri dts dv dvb dvd dvdr dvdread dvi emboss encode exif fam fame fat ffmpeg firefox flac foomatic-db fortran freetype gcj gdbm gif gimpprint gmp gnutls gphoto2 gpm gsm gtk hfs iconv icq ieee1394 imap inotify ipod ipv6 irc irda jabber jack jfs joystick jpeg kdeenablefinal kdehiddenvisibility kerberos lame lcd lcms ldap libnotify live lm_sensors lzo mad mail matroska mjpeg mmx mng modules mozdevelop mp3 mp3rtp mp4 mpeg msn mudflap multilib musepack musicbrainz ncurses network nls nptl nsplugin ntfs ogg openal openexr opengl openmp pam pango pcmcia pcre pda pdf perl png policykit ppds pulseaudio python qt3support qt4 rar rdesktop readline real reiserfs rss scanner sdl session slp speex spell sse sse2 ssl startup-notification stream svg sysfs tcpd theora tiff truetype udev udisks unicode upower usb v4l v4l2 visualization vorbis wifi win32codecs wmf wxwidgets x264 xcb xfs xine xinerama xml xpm xprint xulrunner xv xvid xvmc yahoo zeroconf zlib" ABI_X86="64" ALSA_CARDS="emu10k1x darla20 darla24 emu10k1 gina20 gina24 hdsp hdspm ice1712 indigo indigoio layla20 layla24 mia mixart mona pcxhr rme32 rme96 sb16 sbawe sscape usbusx2y vx222 usb-usx2y" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="prefork" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="agfa_cl20 casio_qv dimagev dimera3500 kodak_dc120 kodak_dc210 kodak_dc240 kodak_dc3200 kodak_ez200 konica_qm150 panasonic_coolshot panasonic_dc1000 panasonic_dc1580 panasonic_l859 polaroid_pdc320 polaroid_pdc640 polaroid_pdc700 ricoh_g3 sipix_blink sipix_blink2 sipix_web2 sony_dscf1 sony_dscf55 toshiba_pdrm11 adc65 aox barbie canon clicksmart310 digigr8 digita directory enigma13 fuji gsmart300 hp215 iclick jamcam jd11 konica largan lg_gsm mars mustek pccam300 pccam600 ptp2 ricoh samsung sierra smal sonix soundvision spca50x sq905 stv0674 stv0680 sx330z template" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev void" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer pdfimport wiki-publisher" LINGUAS="en en_US af ar az bg bn br bs ca cs cy da de el en_GB eo es et eu fa fi fr fy ga gl he hi hr hu is it ja kk km ko lt lv mk mn ms nb nds nl nn pa pl pt pt_BR ro ru rw se sk sl sr sr@Latn ss sv ta tg tr uk uz vi zh_CN zh_TW es_AR es_ES fy_NL ga_IE gu gu_IN nb_NO nn_NO pt_PT sv_SE zh" LIRC_DEVICES="audio audio_alsa serial pctv" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-3" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" QEMU_SOFTMMU_TARGETS="x86_64 arm cris i386 m68k microblaze mips mips64 mips64el mipsel ppc ppc64 ppcemb sh4 sh4eb sparc sparc64" QEMU_USER_TARGETS="alpha arm armeb cris i386 m68k microblaze mips mipsel ppc ppc64 ppc64abi32 sh4 sh4eb sparc sparc32plus sparc64 x86_64" RUBY_TARGETS="ruby19" USERLAND="GNU" VIDEO_CARDS="fbdev vesa radeonhd" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

net-wireless/bluez-4.101-r5 was built with the following:
USE="alsa cups gstreamer pcmcia readline usb -consolekit -debug (-selinux) -test-programs" PYTHON_SINGLE_TARGET="python2_7 -python2_6" PYTHON_TARGETS="python2_7 -python2_6"
CFLAGS="-O2 -march=x86-64 -pipe"
CXXFLAGS="-O2 -march=x86-64 -pipe"


media-sound/pulseaudio-4.0 was built with the following:
USE="X alsa asyncns avahi bluetooth caps dbus gdbm glib ipv6 jack orc ssl systemd tcpd udev webrtc-aec -doc -equalizer -gnome -gtk -libsamplerate -lirc (-neon) (-oss) -qt4 -realtime (-system-wide) -test -xen"
CFLAGS="-O2 -march=x86-64 -pipe"
CXXFLAGS="-O2 -march=x86-64 -pipe"




Comment 3


Arun Raghavan (RETIRED)






          2013-09-17 14:21:04 UTC
        

Please post pulseaudio and bluez verbose logs from when this failure happens.

Have you disabled the socket interface as described in the Fedora bug?




Comment 4


pille





          2013-09-18 11:52:51 UTC
        

if i recall correctly, i've tried disabling the socket interface, but than had nothing at all showing up in pavucontrol. however i tried to reproduce it for the verbose logs on my machine at work and failed when socket is disabled. currently i'm enjoying A2DP music. i'll get back to this issue and try to reproduce it again on the original machine, later. hopefully i'll just close this issue, because both machines should have similar package-versions.




Comment 5


pille





          2013-09-18 18:32:42 UTC
        

seems there's some voodoo involved.
spent some time with the original machine and at first nothing worked, later one device (headset) worked, much later the loundspeaker worked.
btw: both devices at the same time never worked, but that may be a limitation of my bluetooth hardware.

for reference from my working /etc/bluetooth/audio.conf:
  Enable=Sink,Control,Media
where i tried different combinations.

power-cycling all devices and re-pairing them may have helped in the process.




Comment 6


pille





          2014-04-01 06:14:58 UTC
        

while the last half year was boring b/c of no bluetooth audio,
i can now report that bluez-5.15 and pulseaudio-5.0 are working fine together using A2DP. blueman is now unsupported. gnome-bluetooth seems ok for pairing via GUI. else the new bluetoothctl is ok, too.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

