Title: 538808 – x11-libs/motif-2.3.4-r3: symbol name clash in Prefix on AIX
URL: https://bugs.gentoo.org/show_bug.cgi?id=538808

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 538808
x11-libs/motif-2.3.4-r3: symbol name clash in Prefix on AIX
Last modified: 2015-02-25 14:32:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 538808 
      - x11-libs/motif-2.3.4-r3: symbol name clash in Prefix on AIX


Summary:
x11-libs/motif-2.3.4-r3: symbol name clash in Prefix on AIX
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        AIX
      







Importance:
      
Normal
       normal
      


Assignee:

Ulrich Müller








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-02-04 14:21 UTC by Michael Haubenwallner (RETIRED)





      Modified:
    
2015-02-25 14:32 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



prefix









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Haubenwallner (RETIRED)






          2015-02-04 14:21:21 UTC
        

Since we use runtime-linking on AIX, there is a name clash for symbol 'key_table'.
Workaround is:

--- motif-2.3.4-r3.ebuild       28 Jan 2015 10:35:43 -0000      1.7
+++ motif-2.3.4-r3.ebuild       4 Feb 2015 14:19:20 -0000
@@ -61,6 +61,10 @@
     [[ ${CHOST} == *-solaris2.11 ]] \
         && append-cppflags -DNEED_XOS_R_H -DHAVE_READDIR_R_3
 
+    # symbol name clash (we use runtime-linking) with libpthreads.a[shr_comm.o]
+    [[ ${CHOST} == *-aix* ]] \
+        && append-cppflags -Dkey_table=${PN}_key_table
+
     if use !elibc_glibc && use !elibc_uclibc && use unicode; then
         # libiconv detection in configure script doesn't always work
         # http://bugs.motifzone.net/show_bug.cgi?id=1423


Thanks!




Comment 1


Ulrich Müller






          2015-02-04 15:00:06 UTC
        

Unfortunately, key_table is an exported symbol of libUil's public API, so changing it will potentially break binaries linking against libUil.

Can you please report the issue upstream: http://bugs.motifzone.net/




Comment 2


Michael Haubenwallner (RETIRED)






          2015-02-09 17:06:45 UTC
        

(In reply to Ulrich Müller from comment #1)
> Can you please report the issue upstream: http://bugs.motifzone.net/

Feels like either it silently fails to send mails, or these are blocked by my company's mailserver...




Comment 3


Ulrich Müller






          2015-02-13 09:00:27 UTC
        

I've sent an e-mail to ICS support about the bugtracker issue.

However, I wonder about the symbol name clash, because key_table exists in motif since decades, and x11-libs/motif has the ppc-aix keyword, so it must have worked at some point in the past. Has something in AIX's libpthread changed?




Comment 4


Michael Haubenwallner (RETIRED)






          2015-02-25 14:32:16 UTC
        

Having the ~ppc-aix keyword does not necessarily mean anything in particular, most likely it has been inherited from either lesstif or openmotif.

But indeed I'm wondering what has changed to make the problem disappear...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

