Title: 125934 – freeciv crashes when accessing help.
URL: https://bugs.gentoo.org/show_bug.cgi?id=125934

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125934
freeciv crashes when accessing help.
Last modified: 2007-01-16 21:05:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125934 
      - freeciv crashes when accessing help.


Summary:
freeciv crashes when accessing help.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-12 06:51 UTC by Neil Watson





      Modified:
    
2007-01-16 21:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Neil Watson





          2006-03-12 06:51:57 UTC
        

When trying to access a help article free closes from a segmentation fault.

Version 2.0.8

ettin ~ # emerge info
Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r2, 2.6.11.4 i686)
=================================================================
System uname: 2.6.11.4 i686 AMD Athlon(tm) MP 2000+
Gentoo Base System version 1.6.14
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.8.1-r1, 2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-mp -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-mp -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/opt/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 X acl alsa apm arts audiofile avi berkdb bitmap-fonts bonobo bzip2 cdr crypt cups curl dri dvdr editor eds emboss encode esd exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml guile idn imagemagick imlib ipv6 java jpeg kde lcms libg++ libwww mad mbox mikmod mng motif mp3 mpeg mppe-mppc mysql ncurses nls ogg oggvorbis openal opengl oss pam pcre pdflib perl png python qt quicktime readline recode sdl slang spell ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis xine xinerama xml xml2 xmms xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Mr. Bones. (RETIRED)






          2006-03-12 09:31:26 UTC
        

works fine for me.

can you post the output from "emerge -evp" freeciv please?




Comment 2


Neil Watson





          2006-03-12 12:21:26 UTC
        

emerge -evp freeciv

These are the packages that I would merge, in order:

Calculating dependencies  . ...done!
[ebuild  N    ] sys-devel/patch-2.5.9  -build -static 197 kB 
[ebuild  N    ] sys-devel/gnuconfig-20051223  0 kB 
[ebuild  N    ] dev-lang/tcl-8.4.9  -threads 3,414 kB 
[ebuild  N    ] sys-devel/binutils-config-1.8-r6  0 kB 
[ebuild  N    ] sys-devel/gettext-0.14.4  -doc -emacs +nls 6,869 kB 
[ebuild  N    ] sys-devel/binutils-2.16.1  -multislot -multitarget +nls -test 12,392 kB 
[ebuild  N    ] sys-devel/gcc-config-1.3.12-r6  0 kB 
[ebuild  N    ] sys-libs/gpm-1.20.1-r4  -emacs (-selinux) 561 kB 
[ebuild  N    ] sys-libs/ncurses-5.4-r6  -bootstrap -build -debug -doc +gpm -minimal -nocxx -unicode 2,103 kB 
[ebuild  N    ] sys-devel/m4-1.4.3  +nls 298 kB 
[ebuild  N    ] sys-devel/bison-1.875d  +nls -static 862 kB 
[ebuild  N    ] virtual/libintl-0  0 kB 
[ebuild  N    ] sys-apps/sed-4.1.4-r1  -bootstrap -build +nls -static 0 kB 
[ebuild  N    ] sys-apps/texinfo-4.8-r2  -build +nls -static 1,486 kB 
[ebuild  N    ] sys-libs/zlib-1.2.3  -build 415 kB 
[ebuild  N    ] sys-devel/gcc-3.4.5  (-altivec) -bootstrap -boundschecking -build +fortran -gcj +gtk -hardened -ip28 (-multilib) -multislot (-n32) (-n64) +nls -nocxx -nopie -nossp -objc -vanilla 0 kB 
[ebuild  N    ] sys-devel/gcc-3.3.6  (-altivec) -bootstrap -boundschecking -build +fortran -gcj +gtk -hardened -ip28 (-multilib) -multislot (-n32) (-n64) +nls -nocxx -nopie -nossp -objc -vanilla 23,522 kB 
[ebuild  N    ] sys-kernel/linux-headers-2.6.11-r2  36,470 kB 
[ebuild  N    ] sys-libs/glibc-2.3.5-r2  -build -erandom -glibc-compat20 -glibc-omitfp -hardened -linuxthreads-tls (-multilib) +nls -nptl -nptlonly -pic -profile (-selinux) -userlocales 15,628 kB 
[ebuild  N    ] sys-devel/autoconf-2.13  433 kB 
[ebuild  N    ] sys-devel/autoconf-wrapper-3-r1  0 kB 
[ebuild  N    ] sys-devel/autoconf-2.59-r7  -emacs 0 kB 
[ebuild  N    ] sys-libs/cracklib-2.8.5-r1  +nls +python 0 kB 
[ebuild  N    ] sys-devel/flex-2.5.33-r1  +nls -static 0 kB 
[ebuild  N    ] dev-util/pkgconfig-0.20  -hardened 0 kB 
[ebuild  N    ] sys-libs/pam-0.78-r3  +berkdb -nis -pam_chroot -pam_console -pam_timestamp -pwdb (-selinux) 6,345 kB 
[ebuild  N    ] app-shells/bash-3.0-r12  -bashlogger -build +nls 2,404 kB 
[ebuild  N    ] sys-libs/readline-5.1_p2  0 kB 
[ebuild  N    ] sys-apps/diffutils-2.8.7-r1  +nls -static 1,037 kB 
[ebuild  N    ] dev-libs/openssl-0.9.7i  -bindist -emacs -test +zlib 0 kB 
[ebuild  N    ] app-misc/ca-certificates-20050804  0 kB 
[ebuild  N    ] dev-lang/tk-8.4.9  -threads 3,189 kB 
[ebuild  N    ] sys-libs/gdbm-1.8.3-r2  +berkdb 223 kB 
[ebuild  N    ] dev-libs/expat-1.95.8  -test 310 kB 
[ebuild  N    ] dev-lang/python-2.4.2  +X +berkdb -bootstrap -build -doc +gdbm +ipv6 +ncurses -nocxx +readline +ssl +tcltk -ucs2 7,676 kB 
[ebuild  N    ] dev-python/python-fchksum-1.7.1  26 kB 
[ebuild  N    ] sys-apps/sandbox-1.2.12  217 kB 
[ebuild  N    ] app-misc/pax-utils-0.1.10  -caps 0 kB 
[ebuild  N    ] sys-apps/debianutils-2.14.1-r1  -build -static 123 kB 
[ebuild  N    ] sys-apps/portage-2.0.54  -build -doc (-selinux) 0 kB 
*** Please update portage to the above version before proceeding.
    Failure to do so may result in failed or improper merges.
    A simple 'emerge -u portage' is sufficient.

[ebuild  N    ] sys-apps/shadow-4.0.7-r4  +nls -nousuid +pam (-selinux) -skey 995 kB 
[ebuild  N    ] sys-apps/pam-login-3.17  -livecd +nls (-selinux) 154 kB 
[ebuild  N    ] sys-libs/com_err-1.38  +nls 0 kB 
[ebuild  N    ] sys-libs/ss-1.38  +nls 0 kB 
[ebuild  N    ] sys-fs/e2fsprogs-1.38-r1  +nls -static 0 kB 
[ebuild  N    ] app-crypt/hashalot-0.3-r2  0 kB 
[ebuild  N    ] sys-apps/util-linux-2.12r-r2  +crypt +nls -old-crypt +pam +perl (-selinux) -static 0 kB 
[ebuild  N    ] media-libs/libpng-1.2.8  -doc 375 kB 
[ebuild  N    ] app-arch/bzip2-1.0.3-r5  -build -static 653 kB 
[ebuild  N    ] x11-base/opengl-update-2.2.4  0 kB 
[ebuild  N    ] media-libs/freetype-2.1.9-r1  -bindist -doc +zlib 969 kB 
[ebuild  N    ] sys-apps/groff-1.19.1-r2  +X 2,567 kB 
[ebuild  N    ] sys-apps/man-1.6-r1  +nls 228 kB 
[ebuild  N    ] media-libs/fontconfig-2.2.3  732 kB 
[ebuild  N    ] sys-devel/make-3.80-r3  -build +nls -static 0 kB 
[ebuild  N    ] sys-apps/sysvinit-2.86-r3  -bootstrap -build -ibm (-selinux) -static 0 kB 
[ebuild  N    ] perl-core/Test-Simple-0.62  -minimal 0 kB 
[ebuild  N    ] virtual/perl-Test-Simple-0.62  0 kB 
[ebuild  N    ] dev-perl/Locale-gettext-1.05  -minimal 0 kB 
[ebuild  N    ] sys-apps/help2man-1.33.1  +nls 73 kB 
[ebuild  N    ] sys-devel/libtool-1.5.22  0 kB 
[ebuild  N    ] sys-apps/attr-2.4.24  -debug +nls 0 kB 
[ebuild  N    ] sys-apps/acl-2.2.32  -debug +nls 0 kB 
[ebuild  N    ] sys-devel/automake-1.5  514 kB 
[ebuild  N    ] sys-devel/automake-1.6.3  465 kB 
[ebuild  N    ] sys-devel/automake-1.7.9-r1  564 kB 
[ebuild  N    ] sys-devel/automake-1.4_p6  366 kB 
[ebuild  N    ] sys-devel/automake-wrapper-1-r1  0 kB 
[ebuild  N    ] sys-devel/automake-1.8.5-r3  647 kB 
[ebuild  N    ] sys-apps/coreutils-5.2.1-r7  +acl -build +nls (-selinux) -static 0 kB 
[ebuild  N    ] sys-apps/baselayout-1.11.14-r6  -bootstrap -build -static -unicode 0 kB 
[ebuild  N    ] sys-apps/hotplug-base-20040401  40 kB 
[ebuild  N    ] sys-fs/udev-079-r1  (-selinux) 0 kB 
[ebuild  N    ] sys-kernel/vanilla-sources-2.6.15.1  -build -doc -symlink 38,905 kB 
[ebuild  N    ] x11-apps/ttmkfdir-3.0.9-r3  19 kB 
[ebuild  N    ] x11-base/xorg-x11-6.8.2-r6  -3dfx -3dnow +bitmap-fonts -cjk -debug -dlloader -dmx -doc -font-server -insecure-drivers +ipv6 -minimal -mmx +nls -nocxx +opengl +pam -sdk -sse -static +truetype-fonts +type1-fonts (-uclibc) -xprint +xv 45,134 kB 
[ebuild  N    ] sys-apps/file-4.13  -build +python 410 kB 
[ebuild  N    ] sys-apps/which-2.16  122 kB 
[ebuild  N    ] app-arch/cpio-2.6-r5  +nls 437 kB 
[ebuild  N    ] app-arch/rpm2targz-9.0-r3  2 kB 
[ebuild  N    ] sys-apps/utempter-0.5.5.6  20 kB 
[ebuild  N    ] x11-terms/xterm-207  -Xaw3d -doc -toolbar +truetype -unicode 0 kB 
[ebuild  N    ] sys-apps/findutils-4.1.20-r2  -build +nls (-selinux) -static 0 kB 
[ebuild  N    ] dev-java/java-config-1.2.11-r1  15 kB 
[ebuild  N    ] dev-java/blackdown-jdk-1.4.2.03  +X +alsa -browserplugin -doc -mozilla -nsplugin 0 kB 
[ebuild  N    ] sys-libs/db-4.2.52_p2-r1  -bootstrap -doc +java -nocxx +tcltk 3,980 kB 
[ebuild  N    ] sys-devel/libperl-5.8.7  +berkdb -debug +gdbm -ithreads 0 kB 
[ebuild  N    ] dev-lang/perl-5.8.7-r3  +berkdb -build -debug -doc +gdbm -ithreads -minimal -perlsuid 0 kB 
[ebuild  N    ] sys-devel/automake-1.9.6-r1  747 kB 
[ebuild  N    ] app-admin/perl-cleaner-1.01  3 kB 
[ebuild  N    ] media-sound/alsa-headers-1.0.10  0 kB 
[ebuild  N    ] media-libs/alsa-lib-1.0.10  -doc -jack 0 kB 
[ebuild  N    ] media-libs/audiofile-0.2.6-r1  365 kB 
[ebuild  N    ] sys-apps/tcp-wrappers-7.6-r8  +ipv6 115 kB 
[ebuild  N    ] media-sound/esound-0.2.36-r1  +alsa -debug +ipv6 -static +tcpd 361 kB 
[ebuild  N    ] media-libs/libmikmod-3.1.11-r1  +alsa +esd* +oss 597 kB 
[ebuild  N    ] media-libs/libogg-1.1.2  410 kB 
[ebuild  N    ] media-libs/libvorbis-1.1.0  -aotuv 1,281 kB 
[ebuild  N    ] media-libs/libmad-0.15.1b  -debug 490 kB 
[ebuild  N    ] dev-libs/glib-2.8.5  -debug -doc -hardened 0 kB 
[ebuild  N    ] kde-base/kde-env-3-r4  0 kB 
[ebuild  N    ] media-libs/jpeg-6b-r5  598 kB 
[ebuild  N    ] media-libs/tiff-3.7.3  1,242 kB 
[ebuild  N    ] media-libs/lcms-1.14-r1  +jpeg +python +tiff +zlib 0 kB 
[ebuild  N    ] media-libs/libmng-1.0.8-r1  497 kB 
[ebuild  N    ] x11-libs/cairo-1.0.2  +X -doc -glitz +png 0 kB 
[ebuild  N    ] x11-libs/pango-1.10.2  -debug -doc 0 kB 
[ebuild  N    ] dev-libs/atk-1.10.3  -debug -doc -static 0 kB 
[ebuild  N    ] dev-perl/XML-Parser-2.34  -minimal 224 kB 
[ebuild  N    ] dev-util/intltool-0.34.1  127 kB 
[ebuild  N    ] dev-libs/libxml2-2.6.23  -debug -doc +ipv6 +python +readline 0 kB 
[ebuild  N    ] x11-misc/shared-mime-info-0.16  735 kB 
[ebuild  N    ] x11-libs/gtk+-2.8.8  -debug -doc +jpeg +tiff 0 kB 
[ebuild  N    ] media-fonts/gnu-gs-fonts-std-8.11  3,664 kB 
[ebuild  N    ] app-text/ghostscript-esp-7.07.1-r8  +X -cjk +cups -emacs +gtk 5,276 kB 
[ebuild  N    ] app-text/poppler-0.5.0-r4  -cairo +jpeg +zlib 0 kB 
[ebuild  N    ] net-print/cups-1.1.23-r7  -gnutls +nls +pam -samba -slp +ssl 8,501 kB 
[ebuild  N    ] sys-process/procps-3.2.6  (-n32) 0 kB 
[ebuild  N    ] sys-apps/ed-0.2-r6  181 kB 
[ebuild  N    ] dev-db/mysql-4.1.14  +berkdb -big-tables -cluster -debug -doc -extraengine -geometry -minimal +perl +readline (-selinux) +ssl -static +tcpd -utf8 16,724 kB 
[ebuild  N    ] x11-libs/qt-3.3.4-r8  +cups -debug -doc -examples -firebird +gif -immqt -immqt-bc +ipv6 +mysql -nas -odbc +opengl -postgres -sqlite +xinerama 14,101 kB 
[ebuild  N    ] kde-base/arts-3.4.3  +alsa +arts -artswrappersuid -debug +esd -hardened -jack -kdeenablefinal +mp3 -nas +vorbis +xinerama 922 kB 
[ebuild  N    ] dev-perl/Net-Daemon-0.38  -minimal 0 kB 
[ebuild  N    ] perl-core/Storable-2.15  -minimal 0 kB 
[ebuild  N    ] virtual/perl-Storable-2.15  0 kB 
[ebuild  N    ] dev-perl/PlRPC-0.2018  -minimal 0 kB 
[ebuild  N    ] dev-perl/DBI-1.48  -minimal 0 kB 
[ebuild  N    ] dev-perl/DBD-mysql-2.9007  -minimal 114 kB 
[ebuild  N    ] sys-apps/module-init-tools-3.2.1  0 kB 
[ebuild  N    ] media-libs/svgalib-1.9.21-r1  -build -no-helper 928 kB 
[ebuild  N    ] dev-lang/nasm-0.98.39-r1  -build -doc 0 kB 
[ebuild  N    ] media-libs/libsdl-1.2.8-r1  +X -aalib +alsa +arts -dga -directfb +esd -fbcon -ggi -libcaca -nas -noaudio -noflagstrip -nojoystick -novideo +opengl +oss -pic +svga +xinerama +xv 2,541 kB 
[ebuild  N    ] dev-libs/glib-1.2.10-r5  -hardened 411 kB 
[ebuild  N    ] x11-libs/gtk+-1.2.10-r11  -debug +nls 2,880 kB 
[ebuild  N    ] media-libs/smpeg-0.4.4-r6  +X -debug +gtk -mmx +opengl 0 kB 
[ebuild  N    ] media-libs/sdl-mixer-1.2.6  +mikmod +mp3 +vorbis 1,120 kB 
[ebuild  N    ] games-strategy/freeciv-2.0.8  -Xaw3d +alsa -dedicated +esd +gtk +nls +readline +sdl 0 kB 

Total size of downloads: 289,781 kB




Comment 3


Mr. Bones. (RETIRED)






          2006-03-16 00:18:55 UTC
        

Try it with different use flags and CFLAGS and see if you can isolate the problem.  I can't get it to fail here in the way you've described.




Comment 4


Neil Watson





          2006-03-18 05:20:22 UTC
        

Removed flags but, the problem persists.  I ran civclient with strace.  Here are the last few lines:
gettimeofday({1142687566, 916967}, NULL) = 0
poll([{fd=3, events=POLLIN, revents=POLLIN}, {fd=5, events=POLLIN|POLLPRI}], 2, 0) = 1
ioctl(3, FIONREAD, [32])                = 0
read(3, "\1\2.a\0\0\0\0\347\16\340\0\0\0\0\0\0\0\0\0\23\0\0\0`\363"..., 32) = 32
ioctl(3, FIONREAD, [0])                 = 0
gettimeofday({1142687566, 917171}, NULL) = 0
poll([{fd=3, events=POLLIN}, {fd=5, events=POLLIN|POLLPRI}], 2, 0) = 0
mmap2(NULL, 229376, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6b22000
munmap(0xb6b22000, 229376)              = 0
mmap2(NULL, 365817856, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xa0e7b000
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++





Comment 5


Tristan Heaven (RETIRED)






          2007-01-15 19:21:05 UTC
        

Is this still happening?




Comment 6


Neil Watson





          2007-01-16 00:10:46 UTC
        

Alas, I cannot say.  I switched to Debian before I could fully debug the problem.




Comment 7


Tristan Heaven (RETIRED)






          2007-01-16 21:05:07 UTC
        

ok









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

