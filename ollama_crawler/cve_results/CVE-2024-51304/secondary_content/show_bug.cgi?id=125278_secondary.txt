Title: 125278 – dev-db/unixODBC-2.2.11-r1 fails on sparc with "gcc: cannot specify -o with -c or -S and multiple compil ations"
URL: https://bugs.gentoo.org/show_bug.cgi?id=125278

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125278
dev-db/unixODBC-2.2.11-r1 fails on sparc with "gcc: cannot specify -o with -c or -S and multiple compil ations"
Last modified: 2006-06-12 00:54:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125278 
      - dev-db/unixODBC-2.2.11-r1 fails on sparc with "gcc: cannot specify -o with -c or -S and multiple compil ations"


Summary:
dev-db/unixODBC-2.2.11-r1 fails on sparc with "gcc: cannot specify -o with -c...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

Sparc
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Ryan Phillips (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-06 12:01 UTC by Duncan Coutts (RETIRED)





      Modified:
    
2006-06-12 00:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sparc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Duncan Coutts (RETIRED)






          2006-03-06 12:01:47 UTC
        

I'm getting a build failure for dev-db/unixODBC-2.2.11-r1 on my sparc box. Here's the last module it builds that generates the error. It's invoking gcc wrong for this file, though I can't obviously see what gcc is interpreting as another input file (rather than as an arg to another flag).

source='SQLBindParameter.c' object='SQLBindParameter.lo' libtool=yes \
depfile='.deps/SQLBindParameter.Plo' tmpdepfile='.deps/SQLBindParameter.TPlo' \
depmode=gcc3 /bin/sh ../depcomp \
/bin/sh ../libtool --mode=compile sparc-unknown-linux-gnu-gcc -DPACKAGE_NAME=\"\ " -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_ BUGREPORT=\"\" -DPACKAGE=\"unixODBC\" -DVERSION=\"2.2.11\" -DYYTEXT_POINTER=1 -D STDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE _STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDI NT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_SEM_H=1 -DHAVE_DLFCN_H=1 -DHAVE_ICONV=1 -DIC ONV_CONST= -DHAVE_LIBCRYPT=1 -DHAVE_READLINE_HISTORY_H=1 -DHAVE_READLINE=1 -DTIM E_WITH_SYS_TIME=1 -DHAVE_SYS_TIME_H=1 -DSIZEOF_LONG=4 -DHAVE_LONG_LONG=1 -DHAVE_ STRCASECMP=1 -DHAVE_STRNCASECMP=1 -DHAVE_VSNPRINTF=1 -DHAVE_STRTOL=1 -DHAVE_ATOL L=1 -DHAVE_STRTOLL=1 -DHAVE_ENDPWENT=1 -DHAVE_LIBPTHREAD=1 -D_REENTRANT=1 -DHAVE _LOCALTIME_R=1 -DHAVE_FTOK=1 -DHAVE_SEMGET=1 -DHAVE_SHMGET=1 -DHAVE_SEMOP=1 -DHA VE_SNPRINTF=1 -DNEED_SEMUNDO_UNION=1 -DCOLLECT_STATS=1 -DSTDC_HEADERS=1 -DHAVE_M ALLOC_H=1 -DHAVE_UNISTD_H=1 -DHAVE_PWD_H=1 -DHAVE_CRYPT_H=1 -DHAVE_LIMITS_H=1 -D HAVE_STRINGS_H=1 -DHAVE_STRING_H=1 -DHAVE_LOCALE_H=1 -DHAVE_SYS_TYPES_H=1 -DHAVE _SYS_SEM_H=1 -DHAVE_DIRENT_H=1 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_VPRINTF= 1 -DHAVE_PUTENV=1 -DHAVE_SOCKET=1 -DHAVE_STRDUP=1 -DHAVE_STRSTR=1 -DHAVE_SETENV= 1 -DHAVE_SETLOCALE=1 -DHAVE_STRCHR=1 -DUNIXODBC_SOURCE=1  -I. -I. -I../include - I../libltdl -DSHLIBEXT=\"\" -DSYSTEM_FILE_PATH=\"/etc/unixODBC\" -DSYSTEM_LIB_PA TH=\"/usr/lib\" -DUNICODE_ENCODING=\"auto-search\" -DASCII_ENCODING=\"auto-searc h\"     -O2 -mcpu=ultrasparc -pipe -pthread -c -o SQLBindParameter.lo `test -f ' SQLBindParameter.c' || echo './'`SQLBindParameter.c
 sparc-unknown-linux-gnu-gcc -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAG E_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE=\"unixOD BC\" -DVERSION=\"2.2.11\" -DYYTEXT_POINTER=1 -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H =1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DH AVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_S YS_SEM_H=1 -DHAVE_DLFCN_H=1 -DHAVE_ICONV=1 -DICONV_CONST= -DHAVE_LIBCRYPT=1 -DHA VE_READLINE_HISTORY_H=1 -DHAVE_READLINE=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_SYS_TIME _H=1 -DSIZEOF_LONG=4 -DHAVE_LONG_LONG=1 -DHAVE_STRCASECMP=1 -DHAVE_STRNCASECMP=1  -DHAVE_VSNPRINTF=1 -DHAVE_STRTOL=1 -DHAVE_ATOLL=1 -DHAVE_STRTOLL=1 -DHAVE_ENDPW ENT=1 -DHAVE_LIBPTHREAD=1 -D_REENTRANT=1 -DHAVE_LOCALTIME_R=1 -DHAVE_FTOK=1 -DHA VE_SEMGET=1 -DHAVE_SHMGET=1 -DHAVE_SEMOP=1 -DHAVE_SNPRINTF=1 -DNEED_SEMUNDO_UNIO N=1 -DCOLLECT_STATS=1 -DSTDC_HEADERS=1 -DHAVE_MALLOC_H=1 -DHAVE_UNISTD_H=1 -DHAV E_PWD_H=1 -DHAVE_CRYPT_H=1 -DHAVE_LIMITS_H=1 -DHAVE_STRINGS_H=1 -DHAVE_STRING_H= 1 -DHAVE_LOCALE_H=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_SEM_H=1 -DHAVE_DIRENT_H=1 -D HAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_VPRINTF=1 -DHAVE_PUTENV=1 -DHAVE_SOCKET=1  -DHAVE_STRDUP=1 -DHAVE_STRSTR=1 -DHAVE_SETENV=1 -DHAVE_SETLOCALE=1 -DHAVE_STRCH R=1 -DUNIXODBC_SOURCE=1 -I. -I. -I../include -I../libltdl -DSHLIBEXT=\"\" -DSYST EM_FILE_PATH=\"/etc/unixODBC\" -DSYSTEM_LIB_PATH=\"/usr/lib\" -DUNICODE_ENCODING =\"auto-search\" -DASCII_ENCODING=\"auto-search\" -O2 -mcpu=ultrasparc -pipe -pt hread -c SQLBindParameter.c -MT SQLBindParameter.lo -MD -MP "" .deps/SQLBindPara meter.TPlo  -fPIC -DPIC -o .libs/SQLBindParameter.o
sparc-unknown-linux-gnu-gcc: cannot specify -o with -c or -S and multiple compil ations
make[1]: *** [SQLBindParameter.lo] Error 1
make[1]: Leaving directory `/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2. 2.11/DriverManager'
make: *** [all-recursive] Error 1

!!! ERROR: dev-db/unixODBC-2.2.11-r1 failed.
!!! Function src_compile, Line 52, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.


Here's the emerge --info:

Portage 2.0.54 (default-linux/sparc/sparc64/2005.0, gcc-3.3.5-20050130, glibc-2.3.3.20040420-r2, 2.6.8-gentoo-r12 sparc64)
=================================================================
System uname: 2.6.8-gentoo-r12 sparc64 sun4u
Gentoo Base System version 1.6.14
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.4.26-r1
ACCEPT_KEYWORDS="sparc"
AUTOCLEAN="yes"
CBUILD="sparc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=ultrasparc -pipe"
CHOST="sparc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=ultrasparc -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.ox.ac.uk/sites/rsync.gentoo.org/ http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="sparc X audiofile avi bash-completion berkdb bitmap-fonts bzip2 cdr crypt cups curl dlloader eds encode exif expat fam fbcon foomaticdb gcc64 gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml imagemagick imlib jpeg lcms libwww mad mng mozilla mp3 mpeg ncurses nls ogg oggvorbis opengl oss pam pcre pdflib perl png python readline spell ssl tcpd tetex tiff truetype truetype-fonts type1-fonts vorbis xml xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS

let me know if you want me to try anything or what extra info you need.

I found this when trying to build dev-haskell/hdbc-odbc on sparc.




Comment 1


Chris Parrott (RETIRED)






          2006-03-06 23:20:04 UTC
        

For what it's worth, I have not been able to reproduce this problem on my sparc.  Here are the last few lines of the result of running 'ebuild unixODBC-2.2.11-r1.ebuild compile' on my machine:

sparc-unknown-linux-gnu-gcc -O2 -mcpu=ultrasparc -Wall -Wunused -o .libs/gODBCConfig main.o -rdynamic -rdynamic  -L/usr/lib /usr/lib/libgnomeui.so /usr/lib/libart_lgpl.so /usr/lib/libgdk_imlib.so -lSM -lICE /usr/lib/libgtk.so /usr/lib/libgdk.so /usr/lib/libgmodule.so -lXi -lXext -lX11 /usr/lib/libgnome.so /usr/lib/libgnomesupport.so -lz /usr/lib/libesd.so /usr/lib/libaudiofile.so -lm -ldb1 /usr/lib/libglib.so -L/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/lib /usr/lib/libodbcinst.so -ldl ./.libs/libgtkodbcconfig.so ../../ini/.libs/libinilc.a -lpthread
creating gODBCConfig
make[2]: Leaving directory `/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig/src'
make[2]: Entering directory `/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig'
make[2]: Nothing to be done for `all-am'.
make[2]: Leaving directory `/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig'
make[1]: Leaving directory `/var/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig'
>>> Source compiled.


And here is the output from emerge --info on my system:

# emerge --info

Portage 2.1_pre5-r4 (default-linux/sparc/sparc64/2006.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.15-gentoo-r7 sparc64)
=================================================================
System uname: 2.6.15-gentoo-r7 sparc64 sun4u
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.3.5-r2, 2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r4
ACCEPT_KEYWORDS="sparc ~sparc"
AUTOCLEAN="yes"
CBUILD="sparc-unknown-linux-gnu"
CFLAGS="-O2 -mcpu=ultrasparc"
CHOST="sparc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -mcpu=ultrasparc"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo-distfiles.mirrors.tds.net"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="sparc X apache2 arts avi berkdb bitmap-fonts crypt cups dlloader eds encode esd fbcon foomaticdb fortran gcc64 gdbm gif gnome gstreamer gtk gtk2 imlib jpeg kde libwww mad mikmod motif mpeg ncurses nls nptl ogg opengl oss pam pdflib perl png python qt readline sdl spell ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml xmms xv zlib elibc_glibc kernel_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY


Howeer, when testing the unixODBC-2.2.11-r1 build on my sparc, I get the error noted in bug 102689 whenever I try to run OBDCConfig.  It would be helpful to be able to use this tool when trying to configure unixODBC.




Comment 2


Duncan Coutts (RETIRED)






          2006-03-09 05:39:00 UTC
        

I emerged dev-db/unixODBC-2.2.11-r1 again (after updating a couple other packages) and did not get the problem, so I dunno what's going on there.




Comment 3


Jakub Moc (RETIRED)






          2006-06-12 00:54:37 UTC
        

(In reply to comment #2)
> I emerged dev-db/unixODBC-2.2.11-r1 again (after updating a couple other
> packages) and did not get the problem, so I dunno what's going on there.

Closing then, reopen if it's still an issue. 











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

