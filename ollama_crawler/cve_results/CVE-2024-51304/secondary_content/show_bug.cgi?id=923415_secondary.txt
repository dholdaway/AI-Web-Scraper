Title: 923415 – mail-client/thunderbird-115.7.0 failed to rebuild after system upgrade
URL: https://bugs.gentoo.org/show_bug.cgi?id=923415

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 923415
mail-client/thunderbird-115.7.0 failed to rebuild after system upgrade
Last modified: 2024-02-08 09:28:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 923415 
      - mail-client/thunderbird-115.7.0 failed to rebuild after system upgrade


Summary:
mail-client/thunderbird-115.7.0 failed to rebuild after system upgrade
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-01-31 11:38 UTC by Leonid Kopylov





      Modified:
    
2024-02-08 09:28 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



leonchik1976
parona









See Also:


923416





Package list:







Runtime testing required:

---























      Attachments
    




build.log.xz

              (build.log.xz,49.41 KB,
                application/x-xz)

            
2024-01-31 11:38 UTC,

            Leonid Kopylov




Details





build.log.xz

              (build.log.xz,48.56 KB,
                application/x-xz)

            
2024-02-08 06:37 UTC,

            Leonid Kopylov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Leonid Kopylov





          2024-01-31 11:38:29 UTC
        

# emerge -pqv '=mail-client/thunderbird-115.7.0::gentoo'
[ebuild   R   ] mail-client/thunderbird-115.7.0  USE="X clang dbus jack openh264 pulseaudio sndio system-av1 system-harfbuzz system-jpeg system-libevent system-librnp system-libvpx system-webp wayland -debug (-eme-free) (-hardened) -hwaccel -libproxy -lto (-pgo) (-selinux) (-system-icu) -system-png (-system-python-libs) -wifi" CPU_FLAGS_ARM="(-neon)" L10N="he ru -af -ar -ast -be -bg -br -ca -cak -cs -cy -da -de -dsb -el -en-CA -en-GB -es-AR -es-ES -es-MX -et -eu -fi -fr -fy -ga -gd -gl -hr -hsb -hu -id -is -it -ja -ka -kab -kk -ko -lt -lv -ms -nb -nl -nn -pa -pl -pt-BR -pt-PT -rm -ro -sk -sl -sq -sr -sv -th -tr -uk -uz -vi -zh-CN -zh-TW"

# emerge --info '=mail-client/thunderbird-115.7.0::gentoo'
Portage 3.0.61 (python 3.12.1-final-0, default/linux/arm64/17.0/desktop/gnome/systemd/merged-usr, gcc-13, glibc-2.38-r10, 6.7.2-gentoo-r1-arm64 aarch64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-6.7.2-gentoo-r1-arm64-aarch64-with-glibc2.38
KiB Mem:    32817316 total,   8194692 free
KiB Swap:    8388604 total,   5580028 free
Timestamp of repository gentoo: Wed, 31 Jan 2024 08:30:01 +0000
Head commit of repository gentoo: eb9ad82b9b674b83de965ba6ed3ceb3bbabf45ed
Timestamp of repository EmilienMottet: Sat, 27 Jan 2024 17:35:25 +0000
Head commit of repository EmilienMottet: e34c3966bbf65a5775448eb5c8dd85612fb2bcb9

Timestamp of repository HomeAssistantRepository: Sat, 27 Jan 2024 17:35:16 +0000
Head commit of repository HomeAssistantRepository: 2bab2eb749e7b358bcb6bcf1a4a9df9cc6ddbb25

Timestamp of repository darkelf: Mon, 15 Jan 2024 16:18:29 +0000
Head commit of repository darkelf: 4c323552d606189b00b24d5d01eff3af9623f742

Timestamp of repository guru: Tue, 30 Jan 2024 11:48:02 +0000
Head commit of repository guru: 639f343c2568bec64f6b6016bd6690a28db49415

Timestamp of repository inode64-overlay: Tue, 30 Jan 2024 18:03:10 +0000
Head commit of repository inode64-overlay: 1e6b0cf49d0fe4911cd91af22e1aa0a6bc973620

Timestamp of repository kde: Mon, 29 Jan 2024 21:18:14 +0000
Head commit of repository kde: dd1034a095782c26bac184572b38b7c0f2e22b58

Timestamp of repository pentoo: Wed, 31 Jan 2024 08:18:14 +0000
Head commit of repository pentoo: 38b166029e0d23aebbe20bfe0f398d2ff2b62c02

sh bash 5.2_p26
ld GNU ld (Gentoo 2.41 p5) 2.41.0
ccache version 4.9 [enabled]
app-misc/pax-utils:        1.3.7::gentoo
app-shells/bash:           5.2_p26::gentoo
dev-build/autoconf:        2.13-r8::gentoo, 2.71-r7::gentoo, 2.72-r1::gentoo
dev-build/automake:        1.16.5-r1::gentoo
dev-build/cmake:           3.28.1-r1::gentoo
dev-build/libtool:         2.4.7-r2::gentoo
dev-build/make:            4.4.1-r1::gentoo
dev-build/meson:           1.3.1-r1::gentoo
dev-java/java-config:      2.3.3-r1::gentoo
dev-lang/perl:             5.38.2-r1::gentoo
dev-lang/python:           3.10.13::gentoo, 3.11.7::gentoo, 3.12.1_p1::gentoo
dev-lang/rust:             1.74.1::gentoo
dev-lang/rust-bin:         1.74.1::gentoo
dev-util/ccache:           4.9::gentoo
sys-apps/baselayout:       2.14-r1::gentoo
sys-apps/sandbox:          2.38::gentoo
sys-apps/systemd:          255.3::gentoo
sys-devel/binutils:        2.41-r5::gentoo
sys-devel/binutils-config: 5.5::gentoo
sys-devel/clang:           15.0.7-r3::gentoo, 16.0.6::gentoo, 17.0.6::gentoo
sys-devel/gcc:             12.3.1_p20240112::gentoo, 13.2.1_p20240113-r1::gentoo
sys-devel/gcc-config:      2.11::gentoo
sys-devel/lld:             17.0.6::gentoo
sys-devel/llvm:            15.0.7-r3::gentoo, 16.0.6::gentoo, 17.0.6::gentoo
sys-kernel/linux-headers:  6.7::gentoo (virtual/os-headers)
sys-libs/glibc:            2.38-r10::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    volatile: False
    sync-rsync-extra-opts:
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-max-age: 3

EmilienMottet
    location: /var/db/repos/EmilienMottet
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/EmilienMottet.git
    masters: gentoo
    volatile: False

HomeAssistantRepository
    location: /var/db/repos/HomeAssistantRepository
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/HomeAssistantRepository.git
    masters: gentoo
    volatile: False

darkelf
    location: /var/db/repos/darkelf
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/darkelf.git
    masters: gentoo
    volatile: False

guru
    location: /var/db/repos/guru
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/guru.git
    masters: gentoo
    volatile: False

inode64-overlay
    location: /var/db/repos/inode64-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/inode64-overlay.git
    masters: gentoo
    volatile: False

kde
    location: /var/db/repos/kde
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/kde.git
    masters: gentoo
    volatile: False

pentoo
    location: /var/db/repos/pentoo
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/pentoo.git
    masters: gentoo
    volatile: False

Binary Repositories:

gentoobinhost
    priority: 1
    sync-uri: https://gentoo.osuosl.org/releases/arm64/binpackages/17.0/arm64

ACCEPT_KEYWORDS="arm64 ~arm64"
ACCEPT_LICENSE="* -@EULA geekbench Microsoft-vscode TeamViewer Vivaldi"
CBUILD="aarch64-unknown-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="aarch64-unknown-linux-gnu"
CONFIG_PROTECT="/etc /opt/zookeeper-bin/conf /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php8.1/ext-active/ /etc/php/apache2-php8.2/ext-active/ /etc/php/apache2-php8.3/ext-active/ /etc/php/cgi-php8.1/ext-active/ /etc/php/cgi-php8.2/ext-active/ /etc/php/cgi-php8.3/ext-active/ /etc/php/cli-php8.1/ext-active/ /etc/php/cli-php8.2/ext-active/ /etc/php/cli-php8.3/ext-active/ /etc/php/fpm-php8.1/ext-active/ /etc/php/fpm-php8.2/ext-active/ /etc/php/fpm-php8.3/ext-active/ /etc/php/phpdbg-php8.1/ext-active/ /etc/php/phpdbg-php8.2/ext-active/ /etc/php/phpdbg-php8.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/var/cache/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GDK_PIXBUF_MODULE_FILE GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR XDG_STATE_HOME"
FCFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs binpkg-multi-instance buildpkg-live ccache config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox pkgdir-index-trusted preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict strict-keepdir unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync warn-on-large-env xattr"
FFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
GENTOO_MIRRORS="https://mirror.isoc.org.il/pub/gentoo/ https://mirror.eu.oneandone.net/linux/distributions/gentoo/gentoo/"
LANG="en_US.utf8"
LC_ALL="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LEX="flex"
MAKEOPTS="-j6"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
SHELL="/bin/bash"
USE="X a52 aac accessibility acl acpi alsa arm64 audit bash-completion berkdb bidi bluetooth branding brotli btrfs bzip2 cairo cdda cdr cli colord crypt cryptsetup cups curl dbus designer device-mapper doc dri dts dvdr eds emacs encode evdev evo examples exif experimental ffmpeg flac fortran fuse gamepad gdbm gif git gmp gnome gnome-keyring gnome-online-accounts gnome-shell gnutls go gpg gpm gstreamer gtk gtk-doc gui hscolour html http iconv icu idn introspection iodbc ipv6 jack java jemalloc joystick jpeg json kde kerberos keyring lcms ldap libnotify libtirpc lua lvm lz4 lzma lzo mad man mbedtls mng mongodb mp3 mp4 mpeg multimedia mysql nas nautilus ncurses netlink network networkmanager nfs nls nss odbc offensive ogg opengl openmp openssl pam pango pcap pcre pdf perl pkcs11 plasma plugins png policykit postgres ppds pulseaudio python qml qt5 readline redis samba sasl screencast sdl seccomp semantic-desktop snmp sound source speech spell sqlite ssl startup-notification svg symlink sysprof systemd tcl telemetry test-rust threads tiff tk tools tracker truetype udev udisks unicode upower usb utils v4l vala vim-syntax vnc vorbis vulkan wayland webengine webkit webp wxwidgets x264 xattr xcb xft xinerama xml xv xvid yaml zeroconf zip zlib zsh-completion zstd" ADA_TARGET="gnat_2021" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_anon authn_dbm authn_file authz_dbm authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir env expires ext_filter file_cache filter headers include info log_config logio mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words stage" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_ARM="edsp vfp vfpv3 vfpv4 vfp-d32 aes sha1 sha2 crc32 asimddp v8" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 ntrip navcom oceanserver oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 tsip tripmate tnt ublox" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="evdev joystick libinput" KERNEL="linux" L10N="en en-US he ru" LCD_DEVICES="bayrad cfontz glk hd44780 lb216 lcdm001 mtxorb text" LIBREOFFICE_EXTENSIONS="nlpsolver scripting-beanshell scripting-javascript wiki-publisher" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php8-1" POSTGRES_TARGETS="postgres15" PYTHON_SINGLE_TARGET="python3_12" PYTHON_TARGETS="python3_11 python3_12" RUBY_TARGETS="ruby31 ruby32 ruby33" VIDEO_CARDS="virgl" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipp2p iface geoip fuzzy condition tarpit sysrq proto logmark ipmark dhcpmac delude chaos account"
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EMERGE_DEFAULT_OPTS, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LD, LFLAGS, LIBTOOL, LINGUAS, MAKE, MAKEFLAGS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PYTHONPATH, RANLIB, READELF, RUSTFLAGS, SIZE, STRINGS, STRIP, YACC, YFLAGS

=================================================================
                        Package Settings
=================================================================

mail-client/thunderbird-115.7.0::gentoo was built with the following:
USE="X clang dbus jack openh264 pulseaudio sndio system-av1 system-harfbuzz system-jpeg system-libevent system-librnp system-libvpx system-webp wayland -debug (-eme-free) (-hardened) -hwaccel -libproxy -lto (-pgo) (-selinux) (-system-icu) -system-png (-system-python-libs) -wifi" CPU_FLAGS_ARM="(-neon)" L10N="he ru -af -ar -ast -be -bg -br -ca -cak -cs -cy -da -de -dsb -el -en-CA -en-GB -es-AR -es-ES -es-MX -et -eu -fi -fr -fy -ga -gd -gl -hr -hsb -hu -id -is -it -ja -ka -kab -kk -ko -lt -lv -ms -nb -nl -nn -pa -pl -pt-BR -pt-PT -rm -ro -sk -sl -sq -sr -sv -th -tr -uk -uz -vi -zh-CN -zh-TW"
CFLAGS="-march=native -pipe -fomit-frame-pointer"
CXXFLAGS="-march=native -pipe -fomit-frame-pointer"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--compress-debug-sections=zlib -Wl,-rpath=/usr/lib64/thunderbird,--enable-new-dtags"




Comment 1


Leonid Kopylov





          2024-01-31 11:38:38 UTC
        

Created attachment 883860 [details]
build.log.xz




Comment 2


Alfred Wingate





          2024-01-31 13:36:00 UTC
        

 1:11.47 error[E0460]: found possibly newer version of crate `compiler_builtins` which `unicode_ident` depends on
 1:11.48    --> /var/tmp/portage/mail-client/thunderbird-115.7.0/work/thunderbird-115.7.0/third_party/rust/proc-macro2/src/fallback.rs:743:17
 1:11.48     |
 1:11.48 743 |     c == '_' || unicode_ident::is_xid_start(c)
 1:11.48     |                 ^^^^^^^^^^^^^
 1:11.48     |
 1:11.48     = note: perhaps that crate needs to be recompiled?
 1:11.48     = note: the following crate versions were found:
 1:11.48             crate `compiler_builtins`: /usr/lib/rust/1.74.1/lib/rustlib/aarch64-unknown-linux-gnu/lib/libcompiler_builtins-8f96674f32f2b4f6.rlib
 1:11.48             crate `unicode_ident`: /var/tmp/portage/mail-client/thunderbird-115.7.0/work/thunderbird_build/release/deps/libunicode_ident-826df3c6422ddb7c.rmeta
 1:11.49 error[E0463]: can't find crate for `unicode_ident`
 1:11.49    --> /var/tmp/portage/mail-client/thunderbird-115.7.0/work/thunderbird-115.7.0/third_party/rust/proc-macro2/src/fallback.rs:747:5
 1:11.49     |
 1:11.49 747 |     unicode_ident::is_xid_continue(c)
 1:11.49     |     ^^^^^^^^^^^^^ can't find crate
 1:11.49 warning: ignoring -C extra-filename flag due to -o flag
 1:11.49 Some errors have detailed explanations: E0460, E0463.
 1:11.49 For more information about an error, try `rustc --explain E0460`.
 1:11.49 warning: `proc-macro2` (lib) generated 1 warning
 1:11.50 error: could not compile `proc-macro2` (lib) due to 2 previous errors; 1 warning emitted




Comment 3


Leonid Kopylov





          2024-02-08 06:37:06 UTC
        

Created attachment 884507 [details]
build.log.xz




Comment 4


Leonid Kopylov





          2024-02-08 06:37:17 UTC
        

build.log without ccache




Comment 5


Alfred Wingate





          2024-02-08 06:48:39 UTC
        

Comment on attachment 884507 [details]
build.log.xz

Please name your files in a non misleading way.




Comment 6


Alfred Wingate





          2024-02-08 06:52:39 UTC
        

A bit of PEBKAC on my end, just wrong mime type again.




Comment 7


Joonas Niilola






          2024-02-08 07:20:27 UTC
        

(In reply to Leonid Kopylov from comment #3)
> Created attachment 884507 [details]
> build.log.xz

This is still using sccache,

> /usr/bin/sccache /usr/bin/rustc --crate-name proc_macro2 ... wrap_proc_macro`
> 0:25.19 error[E0460]: found possibly newer version of crate 

Also the configure log shows many cached hits.




Comment 8


Leonid Kopylov





          2024-02-08 07:45:54 UTC
        

(In reply to Joonas Niilola from comment #7)
> (In reply to Leonid Kopylov from comment #3)
> > Created attachment 884507 [details]
> > build.log.xz
> 
> This is still using sccache,
> 
> > /usr/bin/sccache /usr/bin/rustc --crate-name proc_macro2 ... wrap_proc_macro`
> > 0:25.19 error[E0460]: found possibly newer version of crate 
> 
> Also the configure log shows many cached hits.

yes, it builds without sccache




Comment 9


Joonas Niilola






          2024-02-08 09:28:00 UTC
        

Glad to hear it! Again, always try without ccache/sccache first if you hit issues using them.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

