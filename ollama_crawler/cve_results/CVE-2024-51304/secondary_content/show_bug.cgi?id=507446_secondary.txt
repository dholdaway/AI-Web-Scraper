Title: 507446 – sys-libs/libraw1394-2.1.0-r1 fails on old C libraries that lack CLOCK_MONOTONIC_RAW
URL: https://bugs.gentoo.org/show_bug.cgi?id=507446

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 507446
sys-libs/libraw1394-2.1.0-r1 fails on old C libraries that lack CLOCK_MONOTONIC_RAW
Last modified: 2014-04-20 03:19:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 507446 
      - sys-libs/libraw1394-2.1.0-r1 fails on old C libraries that lack CLOCK_MONOTONIC_RAW


Summary:
sys-libs/libraw1394-2.1.0-r1 fails on old C libraries that lack CLOCK_MONOTON...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-04-11 19:55 UTC by Matthew Marlowe (RETIRED)





      Modified:
    
2014-04-20 03:19 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Failed Build Log for 2.1.0-r1

              (sys-libs:libraw1394-2.1.0-r1:20140411-191341.log,16.18 KB,
                text/x-log)

            
2014-04-11 20:03 UTC,

            Matthew Marlowe (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthew Marlowe (RETIRED)






          2014-04-11 19:55:47 UTC
        

libraw1394-2.0.8 compiles fine so there is something specific to >= libraw1394-2.1.0 (adding to my local package mask).

[I] sys-libs/libraw1394
     Available versions:  2.0.8 [m]~2.1.0 [m]2.1.0-r1 {static-libs ABI_MIPS="n32 n64 o32" ABI_X86="32 64 x32"}
     Installed versions:  2.0.8(12:43:13 PM 04/11/2014)(-static-libs)
     Homepage:            http://ieee1394.wiki.kernel.org/
     Description:         library that provides direct access to the IEEE 1394 bus

hyperion include # cd /usr/src/linux/include/linux/
hyperion linux # !grep
grep 'CLOCK_MONOTONIC_RAW' *.h
firewire-cdev.h: * and Linux' %CLOCK_MONOTONIC_RAW.
time.h:#define CLOCK_MONOTONIC_RAW              4

/usr/include/linux/*.h files also have the appropriate declarations.

hyperion gvfs # uname -a
Linux hyperion.professionalsysadmin.com 3.2.51-gentooa #1 SMP Sat Oct 12 10:54:32 PDT 2013 x86_64 Intel(R) Pentium(R) D CPU 3.40GHz GenuineIntel GNU/Linux

/var/tmp/portage/sys-libs/libraw1394-2.1.0-r1/work/libraw1394-2.1.0/tools/testlibraw.c: In function 'read_cycle_timer':
/var/tmp/portage/sys-libs/libraw1394-2.1.0-r1/work/libraw1394-2.1.0/tools/testlibraw.c:215:11: error: 'CLOCK_MONOTONIC_RAW' undeclared (first use in this function)
/var/tmp/portage/sys-libs/libraw1394-2.1.0-r1/work/libraw1394-2.1.0/tools/testlibraw.c:215:11: note: each undeclared identifier is reported only once for each function it appears in
make[2]: *** [testlibraw.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/portage/sys-libs/libraw1394-2.1.0-r1/work/libraw1394-2.1.0-amd64/tools'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/sys-libs/libraw1394-2.1.0-r1/work/libraw1394-2.1.0-amd64'
make: *** [all] Error 2
 * ERROR: sys-libs/libraw1394-2.1.0-r1::gentoo failed (compile phase):




Comment 1


Matthew Marlowe (RETIRED)






          2014-04-11 19:57:24 UTC
        

hyperion linux # emerge --info
Portage 2.2.8 (default/linux/amd64/13.0/desktop/kde, gcc-4.6.3, glibc-2.11.3, 3.2.51-gentooa x86_64)
=================================================================
System uname: Linux-3.2.51-gentooa-x86_64-Intel-R-_Pentium-R-_D_CPU_3.40GHz-with-gentoo-2.2
KiB Mem:     8199132 total,    483608 free
KiB Swap:   16783868 total,  16197644 free
Timestamp of tree: Fri, 11 Apr 2014 09:45:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.6.8-r3, 2.7.5-r3, 3.1.5, 3.2.5-r3
dev-util/cmake:           2.8.11.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.4.7, 4.5.4, 4.6.3
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.11.3
Repositories: gentoo gamerlay vmware mattmDev
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/polkit-1/actions /usr/share/themes/oxygen-gtk/gtk-2.0 /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -march=native"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps=y --quiet-build=n"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildsyspkg distlocks ebuild-locks fail-clean fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms sign strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.mirrors.easynews.com/linux/gentoo/ http://gentoo.osuosl.org/ ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo/"
LANG="en_US"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/gamerlay /var/lib/layman/vmware /home/matt/dev/gendev"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 aac aacplus aacs aalib acl acpi addns addressbook ads aften aio akonadi alac alsa amd64 amr analitza animgif apcupsd apng archive artworkextra asf aspell atmo attica augeas avahi bash-completion bcmath berkdb binary-drivers bittorrent bluetooth bluray boost branding bs2b bzip2 cairo calendar canon caps cdda cddb cdparanoia cdr cdrdao cdrom cdsound celt cg chm cisco city cleartype cli clucene cmake collab colordiff compat compress consolekit contactnotes context contrast contrib corefonts cover coverart cpio cpudetection cracklib crypt css csv ctype cuda cue cups curl curlwrappers cvs cxx cycles dbus declarative demosaic detex device-mapper dia diff dirac disk-partition diskio djvu dlz dnd doc doc-pdf docbook dot dri dts dv dvd dvdarchive dvdr dvi dvipdfm ebook eigen emacs emacs22icons emboss emf emoticon emoticons emovix encode eolconv epub eve examples exif expat expoblending extensions extra extra-algorithms extra-ciphers extraengine extras faac faad facebook facedetect fam fame farstream fat fax festival ffmpeg fftw fingerprint firefox fits flac flash flickr flv fontconfig foomaticdb fortran fortune fpm fpx freetds ft2232_spi ftp fuse games gcrypt gd gdbm geo geoip gif gimp git github gl2ps glep glew glibc-compat20 glsl gme gmm gmp gnome-keyring gnome-print gnomecanvas gnumeric gnuplot gnutls google gpg gphoto2 gpm gps gpssync grammar graphics graphviz gs gssapi gtk gzip gzip-el h224 handbook hbci hdri health highlight history html humanities iconv id3 id3tag idea ident ieee1394 image imagemagick imap infinality inotify ipc irc iscsi jabber jadetex java javascript jbig jce john jpeg jpeg2k json karma kate kde kdecards kdepim keychain kipi kmail kmod konqueror kontact kpathsea lame lapack laptop largefile lasi lastfm latex latex3 lcms ldap lensfun libass libburn libcaca libnotify libsamplerate libssh2 libtiger libv4l libv4l2 libyaml live lm_sensors loop-aes lua lvm lyrics lzma lzo mac mad maildir marble math matroska md mdadm mdnsresponder-compat mdraid mediaplayer melt mhash mime mimencode mirage mixer mjpeg mmx mng mod modplug modules mono motif mouse mozilla mp3 mp3tunes mp4 mpeg mpfi mpg123 mtp multilib multimedia musepack music musicbrainz ncurses network network-cron networking nfs nfsv4 nicnatsemi nicrealtek nls nntp nptl nsplugin ntfs ntp nvidia odk ofa offensive ofx ogg ogg123 ogm ogre ois okteta okular omega openal opencl openctl opencv openexr opengl opengtl openipmi openmp openrc openssl openxml otr ovftool pam pango panorama parted passfile pcap pcapnav pcntl pcre pdf pdo perl pgo phonon php pidgin pipe pixmaps pkcs11 plasma player plotutils plugins png podcast policykit postgres postproc postscript ppds prison projectm pstricks publishers qalculate qimageblitz qscintilla qt3support qt4 qthelp quicktime quotes qwt radio raptor raw readline real redeyes regex reports resources rle romio rpc rrdtool rss rtf rtmp rtsp ruby rule-generator s3 samba sasl satamv schroedinger science script scsi sdk sdl sdl-image sdlgfx semantic-desktop sensord session shadow sharedext shout simage skins skype smbclient smi smime smp sms smtp smux sndfile snmp soap sockets solver sound sounds speech speex spell sse sse2 sse3 ssh ssl stars startup-notification stream svg swat symlink syslog system-jpeg sysvipc t1lib tables taglib tcl tcpd telepathy templates tex4ht theora thesaurus threads thumbnail tidy tiff timezone tk tls toolbar toolkit-scroll-bars tools transcode truetype twitter twolame type1 udev udisks unicode unlock-notify upnp upower usb utils uudeview uuencode v4l v4l2 vaapi vcd vcdx vdpau video videoslideshow vim vim-syntax vix vlc vlm vmware-tools vmware_guest_linux vmware_guest_windows vnc vorbis vpx wav wavpack web-services webdav-serf webgl webkit webm webp winbind wma wma-fixed wmf word-perfect wxwidgets x264 xanim xcb xcomposite xetex xface xfs xft xindy xinerama xinetd xml xmlreader xmlrpc xmlwriter xmp xosd xpm xscreensaver xsl xtradb xv xvfb xvid yahoo youtube zeroconf zip zlib zvbi" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2 samsung canon directory" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en" NGINX_MODULES_HTTP="access auth_basic autoindex browser charset empty_gif fastcgi geo gzip limit_req limit_zone map memcached proxy referer rewrite scgi split_clients ssi upstream_ip_hash userid uwsgi addition cache_purge dav flv geoip gzip_static headers_more image_filter push random_index realip secure_link stub_status sub xslt upload" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-3" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_6 python2_7 python3_2" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 2


Matthew Marlowe (RETIRED)






          2014-04-11 20:03:01 UTC
        

Created attachment 374774 [details]
Failed Build Log for 2.1.0-r1




Comment 3


Rafał Mużyło





          2014-04-11 20:33:30 UTC
        

> glibc-2.11.3
Just a guess, but I'd start with addressing this point.
This should be in <bits/time.h>, pulled by <time.h>.




Comment 4


SpanKY






          2014-04-20 03:19:00 UTC
        

yeah, the define was added in glibc-2.12.  we don't really support old versions of glibc, so upgrade and all will be well.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

