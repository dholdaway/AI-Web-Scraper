Title: 863104 – sys-apps/coreutils-9.1-r1: test failures (test-set-mode-acl-1.sh, test-copy-acl-1.sh, test-file-has-acl-1.sh) (mkdir: cannot create directory '/var/tmp/gl129694-24727': Permission denied)
URL: https://bugs.gentoo.org/show_bug.cgi?id=863104

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 863104
sys-apps/coreutils-9.1-r1: test failures (test-set-mode-acl-1.sh, test-copy-acl-1.sh, test-file-has-acl-1.sh) (mkdir: cannot create directory '/var/tmp/gl129694-24727': Permission denied)
Last modified: 2022-11-24 14:52:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 863104 
      - sys-apps/coreutils-9.1-r1: test failures (test-set-mode-acl-1.sh, test-copy-acl-1.sh, test-file-has-acl-1.sh) (mkdir: cannot create directory '/var/tmp/gl129694-24727': Permission denied)


Summary:
sys-apps/coreutils-9.1-r1: test failures (test-set-mode-acl-1.sh, test-copy-a...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

Loong
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2022-08-02 16:47 UTC by HougeLangley





      Modified:
    
2022-11-24 14:52 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



loong
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build Log

              (coreutils-9.1-r1-full-build-log.tar.xz,45.23 KB,
                application/x-xz)

            
2022-08-02 16:47 UTC,

            HougeLangley




Details





emerge --info

              (coreutils-9.1-r1-emerge--info.tar.xz,3.02 KB,
                application/x-xz)

            
2022-08-02 16:48 UTC,

            HougeLangley




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


HougeLangley





          2022-08-02 16:47:31 UTC
        

Created attachment 797038 [details]
Build Log

============================================================================
Testsuite summary for GNU coreutils 9.1
============================================================================
# TOTAL: 370
# PASS:  351
# SKIP:  16
# XFAIL: 0
# FAIL:  3
# XPASS: 0
# ERROR: 0
============================================================================
See gnulib-tests/test-suite.log
Please report to bug-coreutils@gnu.org
============================================================================
make[6]: *** [Makefile:7353: test-suite.log] Error 1
make[6]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1/gnulib-tests'
make[5]: *** [Makefile:7461: check-TESTS] Error 2
make[5]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1/gnulib-tests'
make[4]: *** [Makefile:10142: check-am] Error 2
make[4]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1/gnulib-tests'
make[3]: *** [Makefile:7245: check-recursive] Error 1
make[3]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1/gnulib-tests'
make[2]: *** [Makefile:10144: check] Error 2
make[2]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1/gnulib-tests'
make[1]: *** [Makefile:21011: check-recursive] Error 1
make[1]: Leaving directory '/var/tmp/portage/sys-apps/coreutils-9.1-r1/work/coreutils-9.1'
make: *** [Makefile:21496: check] Error 2
 * ERROR: sys-apps/coreutils-9.1-r1::gentoo failed (test phase):
 *   emake failed




Comment 1


HougeLangley





          2022-08-02 16:48:03 UTC
        

Created attachment 797041 [details]
emerge --info




Comment 2


Sam James









          2022-08-04 02:21:15 UTC
        

FAIL: test-set-mode-acl-1.sh
FAIL: test-copy-acl-1.sh
FAIL: test-file-has-acl-1.sh

The failures for all of them look alike:
```
[...]
+ /bin/sh .././test-set-mode-acl.sh
+ test 1 = 0
+ func_tmpdir
+ : /var/tmp
+ tmp=
+ tmp=/var/tmp/gl129694-24727
+ umask 077
+ mkdir /var/tmp/gl129694-24727
mkdir: cannot create directory '/var/tmp/gl129694-24727': Permission denied
+ echo '.././test-set-mode-acl.sh: cannot create a temporary directory in /var/tmp'
.././test-set-mode-acl.sh: cannot create a temporary directory in /var/tmp
+ exit 1
+ Exit 1
+ set +e
+ exit 1
+ exit 1
+ remove_tmp_
+ __st=1
+ cleanup_
[...]
```




Comment 3


Sam James









          2022-08-04 02:21:33 UTC
        

CCing loong@ although I doubt it's arch specific, just because it's so new.




Comment 4


WANG Xuerui






          2022-10-07 09:00:44 UTC
        

Can't reproduce on amd64 nor loong:

amd64:

============================================================================
Testsuite summary for GNU coreutils 9.1
============================================================================
# TOTAL: 370
# PASS:  332
# SKIP:  38
# XFAIL: 0
# FAIL:  0
# XPASS: 0
# ERROR: 0
============================================================================

loong:

============================================================================
Testsuite summary for GNU coreutils 9.1
============================================================================
# TOTAL: 370
# PASS:  354
# SKIP:  16
# XFAIL: 0
# FAIL:  0
# XPASS: 0
# ERROR: 0
============================================================================

Both run latest ~loong toolchains.

I'd suspect generally outdated sysroot or weird partitioning (I have my PORTAGE_TMPDIR pointed to /tmp which is a tmpfs created by systemd). Would you have your system fully updated (things changed a lot in September) and re-test to see if anything changed on your side?




Comment 5


Mike Gilbert






          2022-11-24 14:52:37 UTC
        

I would guess that /var/tmp has the wrong permissions on the reporter's system.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

