Title: 602306 – app-vim/command-t-4.0 fails to load (NameError: uninitialized constant CommandT in commandt.vim)
URL: https://bugs.gentoo.org/show_bug.cgi?id=602306

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 602306
app-vim/command-t-4.0 fails to load (NameError: uninitialized constant CommandT in commandt.vim)
Last modified: 2017-08-23 14:51:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 602306 
      - app-vim/command-t-4.0 fails to load (NameError: uninitialized constant CommandT in commandt.vim)


Summary:
app-vim/command-t-4.0 fails to load (NameError: uninitialized constant Comman...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Vim Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-12-10 23:56 UTC by Zetok





      Modified:
    
2017-08-23 14:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zetok





          2016-12-10 23:56:25 UTC
        

Error when one tries to use command-t:


Error detected while processing /usr/share/vim/vimfiles/autoload/commandt.vim:
line  183:
NameError: uninitialized constant CommandT
Error detected while processing function commandt#FileFinder:
line    2:
NoMethodError: undefined method `show_file_finder' for nil:NilClass


Error renders command-t useless.

Reproducible: Always


emerge --info command-t
Portage 2.3.0 (python 3.4.5-final-0, hardened/linux/amd64, gcc-4.9.3, glibc-2.22-r4, 4.8.10-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.8.10-gentoo-x86_64-AMD_FX-8370_Eight-Core_Processor-with-gentoo-2.2
KiB Mem:    32796816 total,   5020260 free
KiB Swap:          0 total,         0 free
sh bash 4.3_p48-r1
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
ccache version 3.2.4 [disabled]
app-shells/bash:          4.3_p48-r1::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.22.2::gentoo
dev-lang/python:          2.7.12::gentoo, 3.4.5::gentoo
dev-util/ccache:          3.2.4::gentoo
dev-util/cmake:           3.5.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.22.4::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.12.6::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.3::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6-r2::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.3::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r4::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo/gentoo.git
    priority: -1000

zetok-overlay
    location: /usr/local/portage
    masters: gentoo
    priority: 0

hasufell
    location: /var/lib/layman/hasufell
    masters: gentoo
    priority: 1

anders-larsson
    location: /var/lib/layman/anders-larsson
    masters: gentoo
    priority: 2

yngwin
    location: /var/lib/layman/yngwin
    masters: gentoo
    priority: 3

gamerlay
    location: /var/lib/layman/gamerlay
    masters: gentoo
    priority: 4

rust
    location: /var/lib/layman/rust
    masters: gentoo
    priority: 5

libressl
    location: /var/lib/layman/libressl
    masters: gentoo
    priority: 6

steam-overlay
    location: /var/lib/layman/steam-overlay
    masters: gentoo
    priority: 7

haskell
    location: /var/lib/layman/haskell
    masters: gentoo
    priority: 8

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -ggdb -pipe -fstack-protector-strong"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -march=native -ggdb -pipe -fstack-protector-strong"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs candy compressdebug config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync network-sandbox news parallel-fetch parallel-install preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo/ ftp://gentoo.mirrors.tds.net/gentoo ftp://ftp.halifax.rwth-aachen.de/gentoo/ rsync://mirror.neolabs.kz/gentoo http://ftp.gentoo.bg/ http://ftp.cc.uoc.gr/mirrors/linux/gentoo/ ftp://ftp.cc.uoc.gr/mirrors/linux/gentoo/ ftp://mirrors.tera-byte.com/pub/gentoo"
LANG="pl_PL.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j7  --load-average 8"
PKGDIR="/home/zetok/working/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X aac accessibility acl alsa amd64 amr berkdb bzip2 cjk cli cracklib crypt cxx dri flac gdbm glamor gnutls hardened ibus iconv immqt-bc ipv6 justify libressl lzma lzo m17n-lib mad mmx mmxext modules mp3 multilib musepack ncurses nls nptl ogg opencl opengl openmp opus pam pax_kernel pcre pie pulseaudio readline seccomp session spell sse sse2 ssl ssp systemd tcpd theora unicode urandom vaapi vdpau vorbis wayland xattr xtpax xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="krita" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx fma3 fma4 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop" CURL_SSL="gnutls" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" L10N="by de en en_GB fr ko pl ru uk" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="by de en en_GB fr ko pl ru uk" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby21" USERLAND="GNU" VIDEO_CARDS="radeon radeonsi" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

app-vim/command-t-4.0::gentoo was built with the following:
USE="" ABI_X86="64" RUBY_TARGETS="ruby21 -ruby20 -ruby22 -ruby23"




Comment 1


Zetok





          2016-12-31 06:39:47 UTC
        

I've tried downgrading to previous versions, and they are also affected, even though they previously worked. So it's probably a problem with missing (or broken) dependency.

Problem started occurring after update to ruby 2.1.




Comment 2


Tim Harder






          2017-08-23 14:51:48 UTC
        

I just installed command-t on a ruby-free system, letting all the ruby deps install for the first time and it worked fine for me.

Note that ruby-2.1 is now masked for removal so try a newer implementation and reopen if you still have issues with the newest command-t version (5.0.1) now in the tree.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

