Title: 129769 – koffice-libs-1.5.0 fails to compile because of ruby header
URL: https://bugs.gentoo.org/show_bug.cgi?id=129769

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 129769
koffice-libs-1.5.0 fails to compile because of ruby header
Last modified: 2007-03-18 14:02:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 129769 
      - koffice-libs-1.5.0 fails to compile because of ruby header


Summary:
koffice-libs-1.5.0 fails to compile because of ruby header
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:









Duplicates (13):
    

126346 129822 129825 130484 131246 131748 133957 134625 135808 137277 148385 148457 152570

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-04-12 22:38 UTC by Juergen Rose





      Modified:
    
2007-03-18 14:02 UTC
      (History)
    




          CC List:
        

15 
          users
          
            (show)
          



CptnObvious999
cweiske
fcoiffie
gentoo-bugzilla
gustavo.michels
huseyinkozan
martin.buerge
micb
mls
patrick.rutka
rampage7
serge
tiago.freire
tobias
webmaster









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Juergen Rose





          2006-04-12 22:38:14 UTC
        

Hi,
emerging koffice-libs-1.5.0 compiling fails with:

make[4]: Entering directory `/var/tmp/portage/koffice-libs-1.5.0/work/koffice-libs-1.5.0/lib/kross/ruby'
/bin/sh ../../../libtool --silent --mode=compile --tag=CXX i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../../.. -I../../../lib/kross -I/usr/lib/ruby/1.8/i686-linux -I/usr/kde/3.5/include -I/usr/qt/3/include -I.  -I/usr/kde/3.5/include  -DQT_THREAD_SUPPORT  -D_REENTRANT  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -O2 -march=pentium4 -fomit-frame-pointer -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION -fexceptions -c -o rubyinterpreter.lo `test -f 'rubyinterpreter.cpp' || echo './'`rubyinterpreter.cpp
In file included from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/gthr-default.h:44,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/gthr.h:96,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/c++io.h:37,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/iosfwd:47,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/bits/stl_algobase.h:70,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/bits/stl_tree.h:66,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/map:66,
                 from rubyinterpreter.cpp:21:
/usr/include/unistd.h:266: error: declaration of `int eaccess(const char*, int) throw ()' throws different exceptions
/usr/lib/ruby/1.8/i686-linux/missing.h:43: error: than previous declaration `int eaccess(const char*, int)'
make[4]: *** [rubyinterpreter.lo] Error 1


root@shark:/root(47)# emerge --info
Portage 2.1_pre7-r5 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.4-r1, 2.6.16 i686)
=================================================================
System uname: 2.6.16 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.12.0_pre17
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/grass60/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown
 /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
 rsync://ftp.fi.muni.cz/pub/linux/gentoo ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo rsync://gd.tuwien.ac.at/opsys/linux/ge
ntoo ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo ftp://ftp.tu-clausthal.de/pub/linux/gentoo http://gentoo.oregons
tate.edu"
LINGUAS="de fr"
PKGDIR="/usr/portage/packages/All"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X Xaw3d a52 aac acpi alsa ao aotuv apache2 apm arts asf atlas auctex audiofile automount avi berkdb bitmap-fonts blas
 bonobo bzip2 cairo cdda cddb cdf cdio cdparanoia cdr cgi cli corba crypt ctype cups curl daap dba dbus devmap dga dlloader dr
i dvb dvd dvi dxr3 dynagraph eds effects elf emacs emboss encode epiphany esd evo evolution exif expat fam fame fastbuild ffmp
eg fftw fits flac fltk foomaticdb force-cgi-redirect fortran fpx ftp gd gdal gdbm geos gif gimp ginac glade gml gmp gnome gnup
lot gphoto2 gpm graphviz grass gs gsl gsm gstreamer gtk gtk2 guile hal hardened hddtemp hdf hdf5 hlapi icq id3 imagemagick iml
ib innodb ipv6 isdnlog jabber jbig john jp2 jpeg jpeg2k kde kexi lame lapack latex lcms ldap libg++ libgda libsamplerate libww
w lirc lm_sensors lzo lzw mad math matroska memlimit mikmod mmx mmxext mng mod mono motif mozcalendar mozdevelop mozilla mozsv
g mozxmlterm mp3 mp4live mpeg mpeg2 mplayer musicbrainz mysql mysqli nautilus ncurses netcdf network nfs nls nntp nptl nptlonl
y numarray numeric nvidia ocaml octave odbc ogdi ogg opengl oss pam pcre pdf pdflib perl plotutils plugin png posix postgres p
ppd proj python qhull qt quicktime readline real reiserfs rhythmbox rle rrdcgi rrdtool samba sdl session simplexml slang slp s
mp sndfile snmp soap sockets sox spell spl sqlite sse sse2 ssl subtitles svg t1lib tcltk tcpd tetex theora tidy tiff tokenizer
 truetype truetype-fonts type1-fonts udev unicode v4l2 video_cards_nv video_cards_nvidia vorbis win32codecs wmf xemacs xext xi
ne xml xml2 xmlreader xmlrpc xmms xpm xsl xv xvid xvmc zlib zvbi elibc_glibc input_devices_keyboard input_devices_mouse kernel
_linux linguas_de linguas_fr userland_GNU video_cards_vesa video_cards_fbdev"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS

root@shark:/root(48)# emerge -pvD ruby

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] dev-lang/ruby-1.8.4.20060226  USE="ipv6% tcltk -cjk -doc -examples -socks5 -threads" 0 kB 

    regards
       Juergen




Comment 1


Diego Elio Pettenò (RETIRED)






          2006-04-12 22:59:34 UTC
        

Rebuild ruby after having updated glibc to 2.4.




Comment 2


Dirk Heinrichs





          2006-04-12 23:10:16 UTC
        

I got this too and figured out that the two conflicting header files come
from ruby and glibc. Further investigation showed that ruby was installed
_before_ the glibc update (2.3.x -> 2.4). So I re-emerged ruby and everything
compiles fine, now.

Please change to "RESOLVED FIXED" (as WORKSFORME implies there is no solution available).




Comment 3


Diego Elio Pettenò (RETIRED)






          2006-04-13 09:38:05 UTC
        

*** Bug 129825 has been marked as a duplicate of this bug. ***




Comment 4


Diego Elio Pettenò (RETIRED)






          2006-04-13 09:38:24 UTC
        

*** Bug 129822 has been marked as a duplicate of this bug. ***




Comment 5


Peter B.





          2006-04-16 09:48:02 UTC
        

I do have the same error before and _after_ reemerging ruby.
Please reopen this bug.

Thanks

Peter


emerge --info
Portage 2.1_pre7-r5 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.4-r1, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(tm) XP 2500+
Gentoo Base System version 1.12.0_pre17
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe "
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/init.d /etc/pam.d /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j2 -s "
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/peter/myebuilds /usr/local/overlays/initng-portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 7zip X a52 aac acl acpi acpi4linux alsa amd amr apm arts artworkextra async atlas automount avi bash-completion berkdb binfilter bitmap-fonts blender-game bluetooth browserplugin bzip2 bzlib calendar cdda cddb cdf cdparanoia cdr cdrom cli codecs crypt css csv ctype cups curl dba dbus devmap dga dhcp dict divx4linux dpms dri dts dv dvd dvdr dvdread emboss encode exif expat f2c fame fastbuild fat fbcon fbdev festival ffmpeg firefox flac font-server foomaticdb force-cgi-redirect fortran freetts freetype freetype-version-1 ftp gcj gd gdbm gif gimp gimpprint ginac glx gnuplot gpm grammar gs gstreamer gtk gtk2 h323 hal hfs id3 ieee1394 imagemagick imlib inkjar input_devices_joystick input_devices_keyboard input_devices_mouse isdnlog jack java javascript joystick jp2 jpeg jpeg2k kde kdeenablefinal kdepim kdexdeltas kig-scripting kqemu ladspa latex ldap libg++ libwww lirc live lm_sensors logitech-mouse logrotate lzo lzw lzw-tiff mad math mbox mbrola mcal memlimit mikmod mime mjpeg mmx mmx2 mng motif mozsvg mozxmlterm mp3 mpeg mpeg2 mpeg4 mplayer mysql nas ncurses net nethack network nls nowin nptl nptlonly nvidia odbc ogg oggvorbis on-the-fly-crypt openal openexr opengl optimize pam pcap pcre pda pdf pdflib perl plotutils plugin png posix postgres povray ppds pppd proengineer pwdb python qt quicktime rar rdesktop readline real reiserfs rplay rtc samba sasl scanner screen sdl sensord server session simplexml skins slang slp smime soap sockets sox speex spell spl sse sse2 ssl subtitles svg swat sysfs syslog szip tcltk tcpd tetex theora thesaurus tiff timidity tokenizer transcode truetype truetype-fonts type1 type1-fonts udev unicode usb userlocales utf8 v4l v4l2 vcd vcdimager vdr video_cards_nvidia vidix vim visualization vnc vorbis win32codecs withsamplescripts wma wmf wsconvert x11vnc xanim xfs xine xinetd xml xml2 xmlrpc xmms xosd xpm xscreensaver xsl xv xvid xvmc yv12 zeroconf zlib elibc_glibc initng_plugins_doc initng_plugins_also initng_plugins_bash_launcher initng_plugins_chdir initng_plugins_chroot initng_plugins_conflict initng_plugins_cpout initng_plugins_critical initng_plugins_cron initng_plugins_daemon_clean initng_plugins_dev initng_plugins_dllaunch initng_plugins_envparser initng_plugins_find initng_plugins_fstat initng_plugins_history initng_plugins_idleprobe initng_plugins_initctl initng_plugins_interactive initng_plugins_iparser initng_plugins_last initng_plugins_limit initng_plugins_logfile initng_plugins_netprobe initng_plugins_ngc2 initng_plugins_ngcs initng_plugins_nge initng_plugins_pause initng_plugins_pidfiletest initng_plugins_reload initng_plugins_renice initng_plugins_rlparser initng_plugins_simple_launcher initng_plugins_splash initng_plugins_stcmd initng_plugins_stdout initng_plugins_suid initng_plugins_syncron initng_plugins_syslog initng_plugins_unneeded initng_plugins_usplash kernel_linux linguas_de userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS




Comment 6


Peter B.





          2006-04-16 12:50:57 UTC
        

I also reemerged the ruby dependencies und python, but the error still occures:


Making all in ruby
`-mcpu=' is deprecated. Use `-mtune=' or '-march=' instead.
`-mcpu=' is deprecated. Use `-mtune=' or '-march=' instead.
In file included from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/gthr-default.h:44,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/gthr.h:96,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu/bits/c++io.h:37,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/iosfwd:47,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/bits/stl_algobase.h:70,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/bits/stl_tree.h:66,
                 from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/map:66,
                 from rubyinterpreter.cpp:21:
/usr/include/unistd.h:266: error: declaration of `int eaccess(const char*, int) throw ()' throws different exceptions
/usr/lib/ruby/1.8/i686-linux/intern.h:224: error: than previous declaration `int eaccess(const char*, int)'
make[4]: *** [rubyinterpreter.lo] Error 1
make[4]: *** Waiting for unfinished jobs....
make[3]: *** [all-recursive] Error 1
make[2]: *** [all-recursive] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2

!!! ERROR: app-office/koffice-1.5.0 failed.
Call stack:
  ebuild.sh, line 1532:   Called dyn_compile
  ebuild.sh, line 929:   Called src_compile
  koffice-1.5.0.ebuild, line 56:   Called kde_src_compile
  kde.eclass, line 113:   Called kde_src_compile 'all'
  kde.eclass, line 230:   Called kde_src_compile 'myconf' 'configure' 'make'
  kde.eclass, line 226:   Called die

!!! died running emake, kde_src_compile:make
!!! If you need support, post the topmost build error, and the call stack if relevant.





Comment 7


Jakub Moc (RETIRED)






          2006-04-19 08:41:45 UTC
        

*** Bug 130484 has been marked as a duplicate of this bug. ***




Comment 8


Chris Dragan





          2006-04-22 05:46:33 UTC
        

Perhaps koffice-libs-1.5.0 should DEPEND on >=ruby-1.8.4-r2, which includes the glibc 2.4 patch, according to bug 126886 ?




Comment 9


Diego Elio Pettenò (RETIRED)






          2006-04-25 10:58:16 UTC
        

*** Bug 131246 has been marked as a duplicate of this bug. ***




Comment 10


Gustavo Michels





          2006-04-25 11:23:02 UTC
        

Same here, remerging stable ruby didn't work. I have glibc-2.4, so ruby-1.8.4-r2 was required, which did the trick.

Maybe add >=ruby-1.8.4-r2 as a dependency if using glibc-2.4 (don't even know if portage accepts this logic)?




Comment 11


Peter B.





          2006-04-25 12:17:39 UTC
        

Yes, with glibc-2.4 and ruby-1.8.4-r2 koffice compiles.
Dependencies should be updated




Comment 12


Jakub Moc (RETIRED)






          2006-04-30 00:24:47 UTC
        

*** Bug 131748 has been marked as a duplicate of this bug. ***




Comment 13


Jakub Moc (RETIRED)






          2006-04-30 00:25:33 UTC
        

(In reply to comment #11)
> Yes, with glibc-2.4 and ruby-1.8.4-r2 koffice compiles.
> Dependencies should be updated

No. Don't mix stable and ~arch. 






Comment 14


Jakub Moc (RETIRED)






          2006-05-21 13:03:27 UTC
        

*** Bug 133957 has been marked as a duplicate of this bug. ***




Comment 15


Diego Elio Pettenò (RETIRED)






          2006-05-28 05:56:54 UTC
        

*** Bug 134625 has been marked as a duplicate of this bug. ***




Comment 16


Paulo J. Matos





          2006-06-03 05:01:36 UTC
        

Just as a note: as mentioned emerging ruby _after_ glibc update worked for me too in 32 bits arch with gcc-4.1.1 using ~x86 accept keyword.




Comment 17


Jakub Moc (RETIRED)






          2006-06-06 12:00:06 UTC
        

*** Bug 135808 has been marked as a duplicate of this bug. ***




Comment 18


Caleb Tennis (RETIRED)






          2006-06-19 10:14:46 UTC
        

*** Bug 137277 has been marked as a duplicate of this bug. ***




Comment 19


Jakub Moc (RETIRED)






          2006-09-21 00:22:52 UTC
        

*** Bug 148457 has been marked as a duplicate of this bug. ***




Comment 20


Carsten Lohrke (RETIRED)






          2006-09-29 08:19:25 UTC
        

*** Bug 126346 has been marked as a duplicate of this bug. ***




Comment 21


Carsten Lohrke (RETIRED)






          2006-09-29 08:20:33 UTC
        

*** Bug 148385 has been marked as a duplicate of this bug. ***




Comment 22


Carsten Lohrke (RETIRED)






          2007-03-18 14:02:13 UTC
        

*** Bug 152570 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

