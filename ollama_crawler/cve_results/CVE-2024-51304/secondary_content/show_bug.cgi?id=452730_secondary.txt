Title: 452730 – x11-wm/icewm-1.3.7 suggested patches
URL: https://bugs.gentoo.org/show_bug.cgi?id=452730

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 452730
x11-wm/icewm-1.3.7 suggested patches
Last modified: 2013-09-06 21:21:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 452730 
      - x11-wm/icewm-1.3.7 suggested patches


Summary:
x11-wm/icewm-1.3.7 suggested patches
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       minor
      


Assignee:

Desktop WM Team (OBSOLETE)








URL:



http://www.icewm.org/




Whiteboard:




Keywords:

PATCH







Depends on:







Blocks:




472086



 

        Show dependency tree





 





      Reported:
    
2013-01-17 19:39 UTC by Dag Bakke





      Modified:
    
2013-09-06 21:21 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jer









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Reads CPU temp from the correct file in /sys

              (icewm-1.3.7-cputemp.patch,42.92 KB,
                patch)

            
2013-01-17 19:40 UTC,

            Dag Bakke




Details
            | Diff





Adds the option of updating the taskbar clock less often, reducing wakeups

              (icewm-1.3.7-option-TaskBarClockUpdateInterval.patch,43.28 KB,
                patch)

            
2013-01-17 19:41 UTC,

            Dag Bakke




Details
            | Diff





Reads CPU temp from the correct file in /sys

              (icewm-1.3.7-cputemp.patch,1.30 KB,
                patch)

            
2013-01-17 20:22 UTC,

            Dag Bakke




Details
            | Diff





updated ebuild

              (icewm-1.3.7-r1.ebuild,2.84 KB,
                text/plain)

            
2013-01-17 20:25 UTC,

            Dag Bakke




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dag Bakke





          2013-01-17 19:39:19 UTC
        

While researching why my ACPI temp does not show up in icewm 1.3.7, I found a patch for that particular problem, as well as a few other interesting bits. 
The attached patches were both lifted from: 

http://sourceforge.net/tracker/?words=tracker_browse&sort=open_date&sortdir=desc&offset=0&group_id=31&atid=300031&assignee=&status=1&category=&artgroup=&keyword=&submitter=&artifact_id=0

I have done nothing but reformatting the patches slightly. An ebuild maintainer might want to review the URL above for other interesting patches.


icewm-1.3.7-cputemp.patch
Dmitriy Khanzhin ( dvkh ) - 2011-04-10 07:45:21 PDT
Now /proc/acpi/thermal_zone/ is no longer exist. (For core2-class CPUs.) This patch added request of the CPU temperature from /sys/class/thermal/.


icewm-1.3.7-option-TaskBarClockUpdateInterval.patch
From: Timo Juhani Lindfors <timo.lindfors@iki.fi>
Date: Mon, 11 Oct 2010 14:28:08 +0300
Subject: [PATCH] Add new option TaskBarClockUpdateInterval for reducing wakeups from idle

Currently icewm wakes up every second to update the clock even if it
only shows hours and minutes. Detecting if %S is used is hard. This
patch implements an option that lets the user to manually specify how
often he wants the clock to update itself. Future improvement would of
course be to synchronize this to real time somehow.




Comment 1


Dag Bakke





          2013-01-17 19:40:16 UTC
        

Created attachment 335946 [details, diff]
Reads CPU temp from the correct file in /sys




Comment 2


Dag Bakke





          2013-01-17 19:41:10 UTC
        

Created attachment 335948 [details, diff]
Adds the option of updating the taskbar clock less often, reducing wakeups




Comment 3


Dag Bakke





          2013-01-17 19:53:12 UTC
        

meh. please allow me to figure out what went wrong here before this is merged.




Comment 4


Dag Bakke





          2013-01-17 20:18:37 UTC
        

Comment on attachment 335946 [details, diff]
Reads CPU temp from the correct file in /sys

obviosuly broken. sorry




Comment 5


Dag Bakke





          2013-01-17 20:22:42 UTC
        

Created attachment 335952 [details, diff]
Reads CPU temp from the correct file in /sys

This works on my core2 laptop. My i7 laptop does not appear to have the appropriate entry in /sys/class/thermal. Unless I am missing some kernel option.
Investigating.

In any case: It works on core2 and is not a net loss on any other system.




Comment 6


Dag Bakke





          2013-01-17 20:25:21 UTC
        

Created attachment 335954 [details]
updated ebuild

adds: 
patch for making core2 show correct cpu temp in toolbar
patch enabling an option for updating the toolbar clock less often, causing fewer wakeups




Comment 7


Dag Bakke





          2013-01-17 21:12:41 UTC
        

My i7 laptop is a macbook air, so I'll never have a thermal_zone0 unless someone patches the acpi tables. 

The contributed patches should work for everyone with a thermal_zone0.




Comment 8


Jeroen Roovers (RETIRED)






          2013-01-18 15:26:29 UTC
        

That's a lot of patching. Is upstream aware of this?




Comment 9


Dag Bakke





          2013-01-18 22:55:56 UTC
        

Uh. No.

1.
This is not a lot of patching. These are trivial by my yardstick. One real bugfix, one new option which is disabled by default.

2.
I lifted these patches from the official icewm bugtracker, so upstream should be fully aware of this.

3.
.... but icewm is fairly close to dead upstream. Sad but true. The last commit to icewm happened 8 months ago. Some attribute this to icewm being mature. While I can attest to that evaluation, I do think it is "interesting" to see the apparently obvious bugfix patch be untouched by the upstream maintainer for close to two years.




Comment 10


Pacho Ramos






          2013-09-06 21:21:30 UTC
        

+*icewm-1.3.7-r1 (06 Sep 2013)
+
+  06 Sep 2013; Pacho Ramos <pacho@gentoo.org> +files/icewm,
+  +files/icewm-1.3.7-configurenotify.patch, +files/icewm-1.3.7-deprecated.patch,
+  +files/icewm-1.3.7-dso.patch, +files/icewm-1.3.7-menuiconsize.patch,
+  +files/icewm-1.3.7-thermal.patch, +files/icewm-defaults.patch,
+  +files/icewm-fribidi.patch, +files/icewm-keys.patch, +files/icewm-menu.patch,
+  +files/icewm-startup, +files/icewm-toolbar.patch, +files/icewm-wmclient.patch,
+  +files/icewm-xdg-menu, +icewm-1.3.7-r1.ebuild:
+  Use Fedora patches to fix a lot if bugs, also menu handling. Fix thermal
+  information handling (#452730 by Dag Bakke).
+

This includes the thermal patch, but not the rest: My clock shows seconds by default, also please provide a patch that doesn't touch defaults









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

