Title: 147109 – emerge dies trying to display depgraph
URL: https://bugs.gentoo.org/show_bug.cgi?id=147109

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 147109
emerge dies trying to display depgraph
Last modified: 2006-09-10 21:06:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 147109 
      - emerge dies trying to display depgraph


Summary:
emerge dies trying to display depgraph
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core - Dependencies

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-10 15:11 UTC by Steven Lucy





      Modified:
    
2006-09-10 21:06 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Steven Lucy





          2006-09-10 15:11:27 UTC
        

[yes, I tried syncing twice and this problem did not go away]
[I put these two bugs together since I suspect they are symptoms of the same problem; feel free to break apart if they are unrelated]

[problem 1:]
catch-22:/etc# emerge -auv portage

These are the packages that would be merged, in order:

Calculating dependencies... done!
Traceback (most recent call last):
  File "/usr/bin/emerge", line 3244, in ?
    mydepgraph.display(mydepgraph.altlist())
  File "/usr/bin/emerge", line 1650, in display
    verboseadd += create_use_string(key.upper(), cur_iuse_map[key], cur_use_map[key],
KeyError: 'crosscompile_opts'

[problem 2:]
catch-22:/etc# emerge -u portage

Calculating dependencies... done!
>>> Emerging (1 of 23) sys-apps/sandbox-1.2.18.1 to /
>>> checksums files   ;-) sandbox-1.2.20_alpha1-r2.ebuild
>>> checksums files   ;-) sandbox-1.2.18.1.ebuild
>>> checksums files   ;-) sandbox-1.2.18.ebuild
>>> checksums files   ;-) sandbox-1.2.12.ebuild
>>> checksums files   ;-) sandbox-1.2.20_alpha2.ebuild
>>> checksums files   ;-) sandbox-1.2.16.ebuild
>>> checksums files   ;-) sandbox-1.2.17.ebuild
>>> checksums files   ;-) files/digest-sandbox-1.2.20_alpha1-r2

!!! Digest verification Failed:
!!!    /stowage/portage/sys-apps/sandbox/files/digest-sandbox-1.2.18
!!! Reason: Failed on SHA256 verification
!!! Got:      561d669f6dc466e9bcf9aaa7a28ac72b107bb316ad0d3f339e784907e1bb9247
!!! Expected: 6707c7c578ca80a4df0c073c7d7a12fd5a3cf85af072d96169e90941b29e69b4

>>> Please ensure you have sync'd properly. Please try 'emerge sync' and
>>> optionally examine the file(s) for corruption. A sync will fix most cases.

[info:]
catch-22:/etc# emerge --info

Portage 2.1_pre5-r4 (default-linux/x86/no-nptl/2.4, gcc-3.3.3, glibc-2.3.6-r3, 2.4.26-gentoo-r6 i686)
=================================================================
System uname: 2.4.26-gentoo-r6 i686 Pentium III (Katmai)
Gentoo Base System version 1.12.0_pre16
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.4, 2.4.2-r1
dev-python/pycrypto: 2.0.1-r4
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 1.3.13-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.4.26-r1
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium3 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 alsa apm avi berkdb bitmap-fonts cli crypt dlloader dri eds emboss encode foomaticdb fortran gdbm gif gstreamer gtk2 imlib ipv6 isdnlog jpeg libg++ libwww lpr lprng mad mikmod mp3 mpeg ncurses nls ogg opengl oss pam pcre pdflib perl png pppd python qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts vorbis xml xmms xorg xv zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux userland_GNU video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i740 video_cards_i810 video_cards_imstt video_cards_mga video_cards_neomagic video_cards_nsc video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTAGE_RSYNC_OPTS, PORTDIR_OVERLAY

catch-22:/etc#




Comment 1


Jakub Moc (RETIRED)






          2006-09-10 15:22:21 UTC
        

You have broken pycrypto (Bug 133299) - need 2.0.1-r5, so the digest verification fails.





Comment 2


Steven Lucy





          2006-09-10 21:06:52 UTC
        

After fixing my pycrypto per comment 1 (I had to use -O, since a dependency was running into the hash problem), I was able to then "blindly" emerge -u portage, which fixed the dep tree display problem.

So there was an upgrade-related bug in there somewhere, but I was able to get around it.  I'm guessing no one has an interest in tracking down exactly what went wrong, so I'm marking this as "WORKSFORME".









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

