Title: 203909 – sys-apps/hal-0.5.10 - hald startup takes long time
URL: https://bugs.gentoo.org/show_bug.cgi?id=203909

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 203909
sys-apps/hal-0.5.10 - hald startup takes long time
Last modified: 2009-05-27 19:47:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 203909 
      - sys-apps/hal-0.5.10 - hald startup takes long time


Summary:
sys-apps/hal-0.5.10 - hald startup takes long time
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Freedesktop bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-12-31 17:14 UTC by Imre Péntek





      Modified:
    
2009-05-27 19:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emergeinfo.txt,3.30 KB,
                text/plain)

            
2008-01-22 22:43 UTC,

            Imre Péntek




Details





dmesg output

              (dmesg.txt,10.38 KB,
                text/plain)

            
2008-01-22 22:46 UTC,

            Imre Péntek




Details





hald startup log snippet

              (messages,7.29 KB,
                text/plain)

            
2008-02-17 03:55 UTC,

            Imre Péntek




Details





dmsg part with HALD_VERBOSE=true

              (dmesg.txt,872 bytes,
                text/plain)

            
2009-05-27 19:42 UTC,

            B.Rathmann




Details





Current Kernel Config (2.6.27-gentoo-r8

              (config,43.42 KB,
                text/plain)

            
2009-05-27 19:43 UTC,

            B.Rathmann




Details





output of emerge --info

              (emerge_info,3.50 KB,
                text/plain)

            
2009-05-27 19:44 UTC,

            B.Rathmann




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Imre Péntek





          2007-12-31 17:14:57 UTC
        

it takes about one minute for hald to start up when booting my gentoo. I've seen several distros with the same hald issue, but several others (and several other versions of the same distros) starting up hald without a delay.

Reproducible: Always

Steps to Reproduce:
boot your gentoo
 * starting hardware abstraction layer daemon
at this point I have to wait about one minute to see:
 * starting hardware abstraction layer daemon          [OK]




Comment 1


Jakub Moc (RETIRED)






          2008-01-02 10:08:15 UTC
        

Without info like emerge --info output, HAL version or relevant part of dmesg, nothing we could debug or fix.




Comment 2


Imre Péntek





          2008-01-22 22:42:19 UTC
        

I now use hal-0.5.10




Comment 3


Imre Péntek





          2008-01-22 22:43:54 UTC
        

Created attachment 141617 [details]
emerge --info




Comment 4


Imre Péntek





          2008-01-22 22:46:17 UTC
        

Created attachment 141619 [details]
dmesg output




Comment 5


Imre Péntek





          2008-01-23 14:30:20 UTC
        

I replaced my kernel, and noticed that the same applies for sys-kernel/genkernel-3.4.9 with default config
Linux boborjan 2.6.23-gentoo-r5 #1 SMP Wed Jan 23 13:52:24 CET 2008 x86_64 Mobile AMD Athlon(tm) 64 Processor 3000+ AuthenticAMD GNU/Linux

After that, I also replaced my hal several times, and found that same applies for the following hal versions:
boborjan ~ # grep hal /etc/portage/package.mask 
=sys-apps/hal-0.5.10
=sys-apps/hal-0.5.9.1-r3
=sys-apps/hal-0.5.9.1-r2
=sys-apps/hal-0.5.9.1-r1
=sys-apps/hal-0.5.9-r1
boborjan ~ # 

but sys-apps/hal-0.5.7.1-r5 starts up quickly.




Comment 6


Imre Péntek





          2008-02-17 03:55:10 UTC
        

Created attachment 143720 [details]
hald startup log snippet

HALD_VERBOSE="yes"
/var/log/messages snippet
disabling battery module solves the issue.




Comment 7


Kai Krakow





          2008-07-18 20:29:33 UTC
        

This happens to me when dbus is not ready fast enough. Inserting a "sleep 3" in /etc/init.d/dbus after the line starting dbus fixes this for me. I'll post a separate bug for this because it only hit me after switching to baselayout-2 and parallel_startup=yes.




Comment 8


Imre Péntek





          2008-07-19 08:00:28 UTC
        

I noticed far ago, that the bug isn't present when my kernel doesn't have battery.o (or something like that). Otherwise, dmesg will say my battery voltage is less than the half of the design voltage. btw my battery is in very bad shape if usable at all.




Comment 9


Tony Vroon (RETIRED)






          2009-02-04 19:56:23 UTC
        

I must say that I am completely unable to reproduce the HAL/d-bus parallel start interaction on a dual quad-core Opteron 2254 system with 32GB RAM (if that isn't fast enough, I'm not sure what is...)
If this is still an issue with HAL 0.5.11-r7, could you please open a (new) bug and assign it directly to me. Sorry for the lack of response to your bug report.




Comment 10


B.Rathmann





          2009-05-27 19:42:28 UTC
        

Created attachment 192635 [details]
dmsg part with HALD_VERBOSE=true

Just a short snippet from /var/log/messages to prove the delay




Comment 11


B.Rathmann





          2009-05-27 19:43:36 UTC
        

Created attachment 192636 [details]
Current Kernel Config (2.6.27-gentoo-r8




Comment 12


B.Rathmann





          2009-05-27 19:44:34 UTC
        

Created attachment 192637 [details]
output of emerge --info




Comment 13


B.Rathmann





          2009-05-27 19:47:49 UTC
        

(In reply to comment #9)
> If this is still an issue with HAL 0.5.11-r7, could you please open a (new) bug
> and assign it directly to me. Sorry for the lack of response to your bug
> report.
> 
Since updating to kernel 2.6.27-gentoo-r8 and hald 0.5.11-r8 I am seeing this kind of delays (30-60 seconds) too. Boot sequence prints "Starting Hardware Abstraction layer..." and just waits. After ~60s it resumes work as expected.

I added a log snippet, my kernel config and emerge --info. If you have any additional questions, just ask me.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

