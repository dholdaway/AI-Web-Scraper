Title: 311457 – mail-client/mozilla-thunderbird-3.0.3 new mail pop up is not relevant
URL: https://bugs.gentoo.org/show_bug.cgi?id=311457

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 311457
mail-client/mozilla-thunderbird-3.0.3 new mail pop up is not relevant
Last modified: 2010-04-21 11:57:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 311457 
      - mail-client/mozilla-thunderbird-3.0.3 new mail pop up is not relevant


Summary:
mail-client/mozilla-thunderbird-3.0.3 new mail pop up is not relevant
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-03-26 15:24 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2010-04-21 11:57 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/tmp/emerge--info

              (emerge--info,14.07 KB,
                text/plain)

            
2010-03-26 15:24 UTC,

            DEMAINE Benoît-Pierre, aka DoubleHP




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-03-26 15:24:39 UTC
        

It's a bit difficult to describe. When i receive new emails, i have a small notification pop up just showing the from and subject.

Even when i *had* read all my new mails (but now moved them to an other directory), when new mail come in, the pop-up keeps telling me about the ones I have already read long time ago, but not about actual new ones.

Different, but linked problem: i have marked "favourite" only 6 remote Imap Inbox. But TB keeps connecting to other directories (that are NOT marked favourite); usually the All, and/or Spam directory of my Gmail accounts (not always the same directory/folder from day to day). And TB rings bell (and shows pop-up) when there are new messages there. So, when it decides to sync on the Spam/Junk folder ... i got bell every minute. And even then, the pop-up keeps saying about old-and-read messages, instead of the messages "he just discovered on the server".

Not the same account/folder, but always at least one.

This is TB3 specific. It did not happen at all with TB2. I consider these as regression bugs. I think the second problem may be linked to the new pseudo magical Smart Folder feature.




Comment 1


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-03-26 15:24:55 UTC
        

Created attachment 225333 [details]
/tmp/emerge--info




Comment 2


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-03-26 17:27:21 UTC
        

notification pop-up always show two entries, and both are always identical.

[ebuild   R   ] mail-client/mozilla-thunderbird-3.0.3  USE="crypt dbus gnome mozdom startup-notification -bindist -custom-optimization -ldap -lightning -system-sqlite" LINGUAS="en en_GB en_US fr -af -ar -be -ca -cs -de -el -es -es_AR -es_ES -et -eu -fi -fy -fy_NL -ga -ga_IE -hu -id -is -it -ja -ko -lt -nb -nb_NO -nl -nn -nn_NO -pa -pa_IN -pl -pt_BR -ro -ru -si -sk -sv -sv_SE -ta -ta_LK -tr -uk" 0 kB





Comment 3


Jory A. Pratt






          2010-03-28 02:51:21 UTC
        

I am unable to duplicate this bug. Test with a clean profile, also give us more accurate steps to reproduce this issue. Please also inline your emerge --info on bug reports does not attach them.




Comment 4


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-03-28 11:14:50 UTC
        

I can not test with a new profile; I have only one life, and can not afford time to have two TB instances configured, and compare their respective pop-ups. It took me 1 month to be sure it was a bug, because, I do not always look at this pop-up. In fact, I only care about the sound alert, and very rarely put my eye on the pop-up.

Clean profile means: double configuration, and run two TB at a time. My actual life does not allow me to do this.

To repro:
- start TB
- read all emails
- wait incoming email
- read them or not
- wait for more incoming emails

Tests should include: put Thunderbird on a virtual screen that is not shown, so that TB is never notified it had the focus (this notification *could* be an important element). When I work hard, I just listen to the sound notification, and keep the information "new mail" in memory, and may stay several minutes before focusing on TB; in the mean time, more new mail may come.

What I Can say after one month is that: if I don't focus on TB, then further notification (when I take the time to look at the pop-up) always contain duplicated entries (even when the email is received only once), and that they may quote as new mail (in the pop-up) mails that I had read previously, and that when I focus on TB later, I had actually received new mail, but that one I had read (that one that had been quoted) had NOT been received a second time.

Several aspects may be related: as TB tries to sync the All folder on Gmail/Imap, even when I read an email in the inbox, that same email remain marked unread in All. So, the first bug is in fact that TB fetches a folder (All) that is not marked Favourite. This could explain why I have notifications about emails that I had read already. It would not explain why the pop-up report them twice.

dhp@uranus ~ $ emerge --info | wc
    208    1255   16077

I'll report inline when bugzilla allows longer comments. Around 2008, bugzilla said me once that my --info was too long for being pasted inline, and that long logs should be attached. Since that day, I always attach it. I presume that Bugzilla configuration have not changed yet. And I will continue until I am said we can paste comments longer than 16k.

I am sorry if you find this message not really helpfull. But testing with a new profile would required to spend very much time focused on TB, and do it every day. I just can't. I could recomile in debug mode, because this can be automated; my TB is started by a script; I can change this script to generate traces, and record logs so that I justs pend 20mn on configuring this, and then in a few weeks I can publish the logs; this would not consume my time or require my attention on daily basis. To confirm this bug, we just need a log of what TB considers as new mail, and what he tries to show in the notification pop-up. If the source tree is properly written, it should be possible to log this.




Comment 5


Jory A. Pratt






          2010-03-28 15:31:20 UTC
        

As I can not reproduce and you say you can not test with a clean profile, I am left with no choice but to close as worksforme. If you find the time and test with a clean profile and still are able to duplicate the bug feel free to reopen.




Comment 6


Jory A. Pratt






          2010-03-28 22:42:25 UTC
        

Refer to previous comment.




Comment 7


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-04-09 16:08:53 UTC
        

- most messages are shown twice because they are found unread (by TB) in two folders: Inbox and All

- I have been said in IRC that since TB3, all folders are now synched all the time, regarless of the Favourite flag. That's why TB3 searches for new messages in all folders, even those which are not marked Favourite.

- All folder (on Gmail Imap - this is a hidden-included feature of TB3, and can not be desactivated) is a vital part of the new Archive machanism.

I consider the second point as a bug for the following reason. 

I mark my Inbox Favourite so that TB will/should only fetch my Inbox when my laptop connects over PSTN or GSM/3g. In fact, because of those stupid TB3 stuff, TB3 will also sync All and Spam folders. This multiplies the network traffic by 4 to 10. Thus, when I use TB3 over PSTN or 3g, it uses 4 to 10 times more network bandwidth than TB2. IRC people told me I should unregister from those directories; but if I do so, I will not be able to double check against false positive spam (when I connect over Wifi or xDSL).

Thus, 80% of the global problem is due to a change of behaviour upstream, and should not be fixed at the distro level. I have to report upstream.

I think you can repro easily:
- create a new gmail account
- subscribe to all Imap folders (including spam and All), and configure the account to sync every minute
- send an email
- read the email only in Inbox, and do not click on the All folder
- send a second different email, and wait for the pop-up.

Please, Jory, try to repro.

I can hardly repro this because of side effetcs of several other bugs (amongst them, a big old bug in the password manager that exist since TB 1.0 and have never been fixed in more than six years).

I will take a few hours this WE to test this.




Comment 8


DEMAINE Benoît-Pierre, aka DoubleHP





          2010-04-21 11:57:46 UTC
        

and sometimes the pop up only shown old emails (shown already 20 times), and not the new incoming ones that are responsible for the notification.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

