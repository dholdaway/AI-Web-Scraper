Title: 623024 – dev-libs/botan-1.10.16 (with boost-1.64.0) - ld: cannot find -lboost_python-2.7
URL: https://bugs.gentoo.org/show_bug.cgi?id=623024

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 623024
dev-libs/botan-1.10.16 (with boost-1.64.0) - ld: cannot find -lboost_python-2.7
Last modified: 2017-10-15 09:58:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 623024 
      - dev-libs/botan-1.10.16 (with boost-1.64.0) - ld: cannot find -lboost_python-2.7


Summary:
dev-libs/botan-1.10.16 (with boost-1.64.0) - ld: cannot find -lboost_python-2.7
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Crypto team [DISABLED]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-06-29 13:19 UTC by Peter Asplund





      Modified:
    
2017-10-15 09:58 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



alonbl
proxy-maint
soap









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build.log

              (build.log,101.88 KB,
                text/x-log)

            
2017-06-29 13:19 UTC,

            Peter Asplund




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Asplund





          2017-06-29 13:19:12 UTC
        

Created attachment 478336 [details]
Build.log

Botan-1.10.16 fails to build against Boost 1.64.0. 

Related bug: 604046 (but with Botan-1.10.14 and Boost 1.63)

$ emerge --info
Portage 2.3.6 (python 3.5.3-final-0, default/linux/amd64/13.0/desktop/gnome/systemd, gcc-6.3.0, glibc-2.24-r3, 4.11.4-gentoo x86_64)
=================================================================
System uname: Linux-4.11.4-gentoo-x86_64-Intel-R-_Core-TM-_i7_CPU_920_@_2.67GHz-with-gentoo-2.4.1
KiB Mem:    12303176 total,   2320352 free
KiB Swap:   12418208 total,  12418208 free
Timestamp of repository gentoo: Mon, 26 Jun 2017 06:30:01 +0000
sh bash 4.4_p12
ld GNU ld (Gentoo 2.28 p1.2) 2.28
ccache version 3.3.4 [disabled]
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.24.1-r2::gentoo
dev-lang/python:          2.7.13::gentoo, 3.4.6::gentoo, 3.5.3::gentoo, 3.6.1-r1::gentoo
dev-util/ccache:          3.3.4::gentoo
dev-util/cmake:           3.8.2::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1::gentoo
sys-apps/openrc:          0.27.2::gentoo
sys-apps/sandbox:         2.10-r4::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r3::gentoo
sys-devel/automake:       1.11.6-r2::gentoo, 1.13.4-r1::gentoo, 1.15.1::gentoo
sys-devel/binutils:       2.28-r2::gentoo
sys-devel/gcc:            6.3.0::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r4::gentoo
sys-devel/make:           4.2.1-r1::gentoo
sys-kernel/linux-headers: 4.10::gentoo (virtual/os-headers)
sys-libs/glibc:           2.24-r3::gentoo
Repositories:

AzP
    location: /usr/local/portage
    masters: gentoo

FireBurn
    location: /var/lib/layman/FireBurn
    sync-type: laymansync
    sync-uri: git://github.com/FireBurn/Overlay.git
    masters: gentoo
    priority: 50

gentoo-gpu
    location: /var/lib/layman/gentoo-gpu
    sync-type: laymansync
    sync-uri: https://github.com/sjnewbury/gentoo-gpu.git
    masters: gentoo
    priority: 50

java
    location: /var/lib/layman/java
    sync-type: laymansync
    sync-uri: git://anongit.gentoo.org/proj/java.git
    masters: gentoo
    priority: 50

mva
    location: /var/lib/layman/mva
    sync-type: laymansync
    sync-uri: git://github.com/msva/mva-overlay
    masters: gentoo
    priority: 50

pg_overlay
    location: /var/lib/layman/pg_overlay
    sync-type: laymansync
    sync-uri: https://github.com/perfect7gentleman/pg_overlay.git
    masters: gentoo
    priority: 50

steam-overlay
    location: /var/lib/layman/steam-overlay
    sync-type: laymansync
    sync-uri: git://github.com/anyc/steam-overlay.git
    masters: gentoo
    priority: 50

sunrise
    location: /var/lib/layman/sunrise
    sync-type: laymansync
    sync-uri: git://anongit.gentoo.org/proj/sunrise-reviewed.git
    masters: gentoo
    priority: 50

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: 9999

Installed sets: @esteam, @system
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/chromium/policies/managed/chrome-gnome-shell.json /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/opt/chrome/policies/managed/chrome-gnome-shell.json /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--jobs=3 --with-bdeps=y --load-average=50 --keep-going"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://mirror.mdfnet.se/gentoo ftp://mirror.mdfnet.se/gentoo"
LANG="en_US.utf8"
LDFLAGS="-Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="24bpp 256-color 3dnow 3dnowext 64bit S3TC X a52 aac aacplus aalib accessibility acl acpi aio alsa amazon amd64 amr amrnb amrwb apng asf aspell autoipd avahi avi bash-completion bidi binary-drivers bluetooth bookmarks branding btrfs bzip2 c++0x cairo ccache cdda cdr cg cgi clang cleartype cleartype_hinting cli clutter cmake colord cover coverart cracklib crypt css cue cups curl custom-optimization cxx daap dbus dconf debugger device-mapper devil dga dhclient dirac divx dmx dns dri dri3 drm dts dvd dvdr dvdread egl eglfs emboss encode evo exif f2fs fakevim fam fastcgi fat fbcon ffmpeg firefox flac fluidsynth fontconfig fortran fpm freeimage freerdp ftp fuse g3dvl gaim gbm gd gdbm gdu gflags ggi gif gimp git glamor glew glib glut gmail gmailtimestamps gmedia gnome gnome-keyring gnome-online-accounts gnome-shell gold google gphoto2 gpm gstreamer gtk gtk2 gtk3 gtkhtml gvim gzip h224 h281 h323 howl-compat hpijs hwdb iconv icq icu idn imap inotify introspection iphone ipv6 jabber java java6 jingle jpeg jpeg2k kde kdrive lame lcms ldap libinput libnotify libsecret libsexy libssh2 libv4l libv4l2 llvm llvm-shared-libs lm_sensors mad madwifi mbox md5sum mdnsresponder-compat mh midi mikmod mime minizip mmxext mng moc mod modplug modules mozembed mozilla moznocompose moznoirc moznomail moznoroaming mozsha1 mozsvg mp2 mp3 mp4 mp4live mpeg msn multimedia musepack musicbrainz nas nautilus ncurses nemesi networkmanager new-hpcups nfsv41 nls nptl nsplugin ntfs ntfsprogs nx ofa ogg openal opencl opencore-amr openexr opengl openmp openssl opensslcrypt optimization pam pango pcntl pcre pdf pdflib perl php pidgin pipechan png pnm policykit pop ppds private-headers pulseaudio pvr python python3 qml qt3support qt4 qt5 qtscript quicktime radio raw rdesktop rdp readline realmedia reiser4 reiserfs rtc s3tc samba sasl schroedinger scintilla sdl seccomp secure-delete session sid sip sndfile sockets spell sql sqlite srt sse3 sse4 sse4.1 sse4.2 sse4_1 sse4_2 ssh ssl ssse3 staging startup-notification static-analyzer steamruntime subtitles subversion suid svg systemd tcpd telepathy teletext tga theora threads tiff tls tracker transcode truetype udev udisks unicode upcall upnp upower usb v4l v4l2 vaapi valgrind vdpau video videos vim vim-pager vim-syntax vim-with-x vorbis vte vulkan wav wavpack wayland webdav webdav-neon webdav-serf webkit webkit2 webm webp webphoto webstart widgets wifi winbind wma wma-fixed wmf wmp wxwidgets x264 x265 xanim xattr xcb xcomposite xdmcp xext xfs xinerama xkb xml xmp xrandr xv xvid xvmc zeitgeist zeroconf zip zlib zoran" ABI_X86="64" ALSA_CARDS="emu10k1 hda_intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" CURL_SSL="openssl" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="libinput roccat_konextd" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en sv" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_5" QEMU_SOFTMMU_TARGETS="i386 arm x86_64" QEMU_USER_TARGETS="i386 arm x86_64" RUBY_TARGETS="ruby21 ruby22" USERLAND="GNU" VIDEO_CARDS="amdgpu radeonsi" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7 3.5"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jack Lloyd





          2017-09-29 22:27:37 UTC
        

This seems to be due to the ebuild editing Makefile.python to replace -lboost_python with -lboost_python-$(echo ${EPYTHON} | sed 's/python//')

Reassigning to bug-wranglers@ - as best I can tell this is an issue with the ebuild and not upstream, and I do not run Gentoo anymore so I cannot test any changes to the ebuild.

FWIW Botan 1.10.16's Python wrapper builds fine for me with Boost 1.65.1 and Python 2.7 on Arch.




Comment 2


Alon Bar-Lev (RETIRED)






          2017-09-30 20:22:35 UTC
        

---
x86_64-pc-linux-gnu-g++ -shared build/python/wrap_python_core.o build/python/wrap_python_filter.o build/python/wrap_python_rsa.o build/python/wrap_python_x509.o -L. -L/usr/lib64 -Wl,--as-needed -lbotan-1.10 -lboost_python-2.7 -o build/python/_botan.so
/usr/lib/gcc/x86_64-pc-linux-gnu/6.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lboost_python-2.7
---

$ equery files boost | grep libboost_python-2.7.so
/usr/lib64/libboost_python-2.7.so
/usr/lib64/libboost_python-2.7.so.1.65.0

$ ls -la /usr/lib64/libboost_python-2.7.so
lrwxrwxrwx 1 root root 29 Sep 30 23:05 /usr/lib64/libboost_python-2.7.so -> libboost_python-2.7.so.1.65.0

$ ldd /var/tmp/portage/dev-libs/botan-1.10.16/image/usr/lib64/python2.7/site-packages/botan/_botan.so
        libboost_python-2.7.so.1.65.0 => /usr/lib64/libboost_python-2.7.so.1.65.0 (0x00007f367a0b9000)


Working at my side, no issues, please check your boost files and compare.




Comment 3


Alon Bar-Lev (RETIRED)






          2017-10-04 19:48:57 UTC
        

Please reopen if more information.
Thanks.




Comment 4


Peter Asplund





          2017-10-15 09:58:03 UTC
        

I'm not seeing this issue anymore, but Boost-1.64.0 is no longer in the tree. There only seems to be 1.63 and 1.65.

It is OK to close this, afaik. Thanks!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

