Title: 822432 – portage profile precedence order off?
URL: https://bugs.gentoo.org/show_bug.cgi?id=822432

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 822432
portage profile precedence order off?
Last modified: 2022-07-28 05:07:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 822432 
      - portage profile precedence order off?


Summary:
portage profile precedence order off?
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-11-08 12:23 UTC by Joakim Tjernlund





      Modified:
    
2022-07-28 05:07 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



gentoo
jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joakim Tjernlund





          2021-11-08 12:23:57 UTC
        

We have our own portage profiles, a base which is common for all, gentoo64-common
and then gentoo64-nosym which inherits:
gentoo64-nosym # cat parent 
gentoo:default/linux/amd64/17.1/desktop
../gentoo64-common

The problem I notice is that if I add in gentoo64-common sub profile, package.use:
  sys-apps/fwupd -modemmanager

that will not take, modemmanager USE flag is still active. If I move that
setting to gentoo64-nosym it works, no modemmanager USE set for fwupd.

Is this a bug in portage, out profile setup or the way it is supposed to work ?




Comment 1


Zac Medico






          2021-11-08 23:34:55 UTC
        

The ../gentoo64-common/package.use setting that you've described should work, though it could be overridden by a USE=modemanager or similar package.use setting in the profile that inherits ../gentoo64-common.




Comment 2


Joakim Tjernlund





          2021-11-09 08:56:05 UTC
        

hmm, I got USE=modemmanager in gentoo64-nosym/make.defaults, I guess
that might override sys-apps/fwupd -modemmanager in gentoo64-common/package.use ?

I always figured a sys-apps/fwupd -modemmanager would take precedence but maybe only if they are in the same profile ?




Comment 3


Zac Medico






          2021-11-09 15:49:20 UTC
        

(In reply to Joakim Tjernlund from comment #2)
> hmm, I got USE=modemmanager in gentoo64-nosym/make.defaults, I guess
> that might override sys-apps/fwupd -modemmanager in
> gentoo64-common/package.use ?

Yes, it will.

> I always figured a sys-apps/fwupd -modemmanager would take precedence but
> maybe only if they are in the same profile ?

Yes, that's right.




Comment 4


Zac Medico






          2021-11-09 20:47:01 UTC
        

The interaction of USE in make.defaults with package.use is analogous to interactions between settings in use.mask and package.use.mask as defined in Algorithm 5.1 of PMS:

https://dev.gentoo.org/~ulm/pms/head/pms.html#x1-54002r1









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

