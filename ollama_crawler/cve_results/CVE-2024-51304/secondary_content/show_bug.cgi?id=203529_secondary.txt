Title: 203529 – net-misc/dhcpcd-3.1.8 fails to obtain IP address
URL: https://bugs.gentoo.org/show_bug.cgi?id=203529

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 203529
net-misc/dhcpcd-3.1.8 fails to obtain IP address
Last modified: 2008-03-31 03:50:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 203529 
      - net-misc/dhcpcd-3.1.8 fails to obtain IP address


Summary:
net-misc/dhcpcd-3.1.8 fails to obtain IP address
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

203524

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-12-27 23:15 UTC by Zsolti





      Modified:
    
2008-03-31 03:50 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



roy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zsolti





          2007-12-27 23:15:05 UTC
        

startup hangs because a bad dhcp server does not send ips. it hangs forever at hald.

Reproducible: Always

Steps to Reproduce:
1. bootup gentoo
2. wait
3.

Actual Results:  
startup blocks forever

Expected Results:  
bootup should continue

/etc/conf.d/net
config_eth0=( "dhcp" )

modules=( "wpa_supplicant" )
wpa_supplicant_ath0="-Dmadwifi"
wpa_timeout_ath0=30

config_ath0=( "dhcp" )

Portage 2.1.3.19 (default-linux/amd64/2007.0, gcc-4.1.2, glibc-2.7-r0, 2.6.23-lisabook-rc2 x86_64)
=================================================================
System uname: 2.6.23-lisabook-rc2 x86_64 Intel(R) Core(TM)2 CPU T7400 @ 2.16GHz
Timestamp of tree: Thu, 27 Dec 2007 22:30:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17-r1
dev-lang/python:     2.4.4-r6, 2.5.1-r4
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=nocona"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=nocona"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror http://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LINGUAS="de hu en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 amr audiofile bash-completion berkdb bitmap-fonts bluetooth bzip2 cairo cddb cdr cli cracklib crypt cups dbus dia directfb doc dri dv dvd dvdr emacs encode exif fbcon ffmpeg firefox flac foomaticdb fortran fuse gdbm gif gnome gtk gtk2 hal hbci hfs httpd ical iconv insecure-drivers ipv6 isdnlog jack jpeg ladspa lame libnotify libsamplerate live lm_sensors logrotate madwifi makecheck matroska midi mmx mmxext mod mono mozsvg mp3 mpeg mudflap musicbrainz ncurses network nls nptl nptlonly nsplugin ogg opengl openmp pam pcre pda pdf perl pic png postscript ppds pppd python quicktime readline reflection samba sdl session shout spell spl sse sse2 ssl stream svg tcpd theora threads thunderbird truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vcd vlm vorbis wmf x264 xml xorg xv xvid yv12 zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de hu en" USERLAND="GNU" VIDEO_CARDS="i810 vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2007-12-27 23:34:16 UTC
        

Good that you filed a dupe instead of reopening the original bug, while still failing to provide the requested info about your DHCP client and versions, and instead you fired up your email client and sent an offensive mail insulting myself and baselayout developers.

If you are using net-misc/dhcpcd, then set a timeout like this:

dhcpcd_eth0="-t 60"

If you are using something else, then set the option accordingly




Comment 2


Jakub Moc (RETIRED)






          2007-12-27 23:35:23 UTC
        

*** Bug 203524 has been marked as a duplicate of this bug. ***




Comment 3


Zsolti





          2007-12-27 23:44:57 UTC
        

net-misc/dhcpcd-3.1.8

"-t 60" should be default.
 




Comment 4


Zsolti





          2007-12-27 23:51:32 UTC
        

and yes. it seems you have failed your job. i just started to add my emerge --info and other stuff as attachement as i always do, but you immediately closed the bug. your job should be to listen to reporters who take their time to report a bug and *not* to immediately close it just to make your bug-close-statistic better.





Comment 5


Jakub Moc (RETIRED)






          2007-12-27 23:54:58 UTC
        

(In reply to comment #3)
> net-misc/dhcpcd-3.1.8
> "-t 60" should be default.

The default is 20 seconds, read the manpage. Unless you provide info like the DHCP server/client logs, noone will help you here. Also, hald doesn't need net at all, see the initscript.

(And take your off-topic noise outta here please, I don't give a damn about some bugs close stats since we don't have any in the first place).





Comment 6


SpanKY






          2007-12-28 00:47:23 UTC
        

what do you mean it hanges at hald ?  if it were hanging at dhcp, it would hang while processing net.eth0, not hald




Comment 7


Zsolti





          2007-12-28 18:41:47 UTC
        

(In reply to comment #6)
> what do you mean it hanges at hald ?  if it were hanging at dhcp, it would hang
> while processing net.eth0, not hald
> 

it hangs at "hald started". hanging is occasionally. just occured a few minutes ago. when i delete the link net.ath0 system boots cleanly.





Comment 8


Roy Marples





          2007-12-30 16:44:05 UTC
        

Have you enabled parallel startup in /etc/conf.d/rc? If so, turn it off and see how that helps.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

