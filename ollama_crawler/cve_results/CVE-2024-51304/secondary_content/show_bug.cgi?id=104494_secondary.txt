Title: 104494 – pmount cannot be run as a normal user; Permission Denied
URL: https://bugs.gentoo.org/show_bug.cgi?id=104494

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 104494
pmount cannot be run as a normal user; Permission Denied
Last modified: 2005-10-16 19:20:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 104494 
      - pmount cannot be run as a normal user; Permission Denied


Summary:
pmount cannot be run as a normal user; Permission Denied
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-01 09:26 UTC by Stefan Moonen





      Modified:
    
2005-10-16 19:20 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Moonen





          2005-09-01 09:26:41 UTC
        

Pmount should be a system utility for users to be able to mount removable
devices, but the current ebuild turns things around by not giving any executing
rights to normal users. I've tested only with pmount-hal so far.
I also had to SetUID the pmount-hal executable to root before I was able to use
gnome-volume-manager 1.5.0 as a normal user. I found the problem when I was
inserting a USB-stick which was detected by HAL (0.5.x), but not mounted by
gnome-volume-manager because it wasn't running while it should.

Reproducible: Always
Steps to Reproduce:
1. Emerge pmount (0.9.3-r3).
2. Emerge and run HAL (0.5.4), DBUS (0.36.1) and gnome-volume-manger (1.5.0).
3. Login as a normal user in GNOME.
3. Run gnome-volume-manager in for example a terminal.

Actual Results:  
When I ran gnome-volume-manager as a user from gnome-terminal it gave me an
error not being able to execute pmount-hal:

manager.c/1071: mounting
/org/freedesktop/Hal/devices/volume_uuid_2cf94080_6b87_47e2_abc4_653ce01ed983...
manager.c/630: executing command: /usr/bin/pmount-hal
/org/freedesktop/Hal/devices/volume_uuid_2cf94080_6b87_47e2_abc4_653ce01ed983
/bin/sh: /usr/bin/pmount-hal: Permission denied

Expected Results:  
Gnome-volume-manager should've started and added mountpoints for any already
connected device.

Emerge --info:

Portage 2.0.51.22-r2 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r1,
2.6.13-gentoo i686)
=================================================================
System uname: 2.6.13-gentoo i686 AMD Athlon(tm) XP 3000+
Gentoo Base System version 1.12.0_pre7
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=athlon-xp -msse -mmmx -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe -march=athlon-xp -msse -mmmx -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo
ftp://mirror.nutsmaas.nl/gentoo/"
LANG="en_US.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.nl.gentoo.org/gentoo-portage/"
USE="x86 3dnow X a52 aac acpi apache2 apm arts avi berkdb bitmap-fonts bluetooth
browserplugin bzip2 cairo cdda cdr crypt cups curl dbus dga divx4linux dts dvd
dvdr eds emboss encode esd exif fam fbcon ffmpeg firefox foomaticdb fortran
freetype ftp gd gdbm gif gnome gnutls gpm gstreamer gtk gtk2 hal howl ieee1394
imagemagick imlib ipv6 java javascript jpeg kde ldap libg++ libwww lirc
lm_sensors mad mikmod mmx mng motif mozsvg mp3 mpeg msn mysql ncurses nls nocd
nvidia ogg oggvorbis openal opengl oss pam pdflib perl php png python qt
quicktime readline ruby samba sdl sockets spell sse ssl svga symlink tcltk tcpd
theora tiff truetype truetype-fonts type1-fonts usb v4l vcd videos vorbis
win32codecs wxwindows xine xinerama xml xml2 xv xvid zlib userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Steev Klimaszewski (RETIRED)






          2005-09-01 09:57:57 UTC
        

What groups are you in?  After emerging pmount, the following information is
displayed...

 * This package has been installed setuid.  The permissions are as such that
 * only users that belong to the plugdev group are allowed to run this.
 *
 * Please add your user to the plugdev group to be able to mount USB drives

If your user is not in the plugdev group, you won't be able to use pmount.




Comment 2


Stefan Moonen





          2005-09-01 10:18:31 UTC
        

It was stupid of me to oversee that before I was posting this message. But I
emerged alot of packages in one time so I guess I just didn't see the notice.
Thanks for the clearup and the quick response!




Comment 3


Stefan Moonen





          2005-09-01 10:58:48 UTC
        

While permissions are set correcetly (execute-rights for the group plugdev on
pmount-hal) and my user added to the group plugdev, I still get the same error
as I mentioned above. Is there a way to explain that?




Comment 4


Steev Klimaszewski (RETIRED)






          2005-09-01 12:16:09 UTC
        

Do you have the /media directory?  And when you added yourself to plugdev, did
you log out completely so that the groups would take effect?  (You can run the
command "groups" to see if it shows you as being in the plugdev group) - I have
the exact same setup, and everything works fine here.  




Comment 5


Steev Klimaszewski (RETIRED)






          2005-10-16 19:20:32 UTC
        

No response from the reported, closing WFM









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

