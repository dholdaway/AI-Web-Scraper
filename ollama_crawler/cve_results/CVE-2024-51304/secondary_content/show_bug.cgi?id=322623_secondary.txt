Title: 322623 – x11-drivers/ati-drivers-10.5 is broken for multi displays and compiles against wrong kernel -version mismatch
URL: https://bugs.gentoo.org/show_bug.cgi?id=322623

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 322623
x11-drivers/ati-drivers-10.5 is broken for multi displays and compiles against wrong kernel -version mismatch
Last modified: 2011-03-12 19:53:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 322623 
      - x11-drivers/ati-drivers-10.5 is broken for multi displays and compiles against wrong kernel -version mismatch


Summary:
x11-drivers/ati-drivers-10.5 is broken for multi displays and compiles agains...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Luca Barbato








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-03 15:26 UTC by f1r31c3r





      Modified:
    
2011-03-12 19:53 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



enrico.tagliavini
x11









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


f1r31c3r





          2010-06-03 15:26:13 UTC
        

I can see how this bug developed, drivers 10.4 did not compile against the new kernel 2.6.34 so a 10.5 was released which compiled against the latest kernel.

I am having severe problems with the EDID information from my second monitor this occured on all previous drivers to date but on this version it segfaults on the second monitor turning it off. I have tried multiple ways to manually modeline my second monitor to no avail. 
This is why i dropped back to a previous kernel version currently 2.6.33-gentoo-r2. Compiling the 10.5 Ebuid against this kernel version when my kernel symlinks point to 2.6.34 kernel version compiles.

Yup the Ebuild compiles disregard of my symlinks which predictably has an effect when i startx. The driver X.org log shows version mismatch to the running kernel and shuts off DRI.

Ebuild is broken there.

The same problem weather DRI fails or not occurs with segmentation faults from the driver on the second monitor

Xorg.log
(II) fglrx(0): Connected Display0: DFP on internal TMDS [tmds1]
(II) fglrx(0):  Display0: Failed to get EDID information. 
(II) fglrx(0): Connected Display1: DFP on secondary TMDS [tmds2i]
(II) fglrx(0): Display1 EDID data ---------------------------

Its not the monitor or the cable Both have been tested Maybe the Card or driver but 10.4 against 2.6.33-rc builds worked both heads fine even with the EDID error.

The predicted result from the Ebuild compiling against the incorrect Kernel Symlink:

(WW) fglrx(0): Kernel Module version does *not* match driver.
(EE) fglrx(0): incompatible kernel module detected - HW accelerated OpenGL will not work
(II) fglrx(0): [uki] removed 1 reserved context for kernel
(II) fglrx(0): [uki] unmapping 8192 bytes of SAREA 0x4000 at 0xb6faf000
(WW) fglrx(0): ***********************************************
(WW) fglrx(0): * DRI initialization failed!                  *
(WW) fglrx(0): * (maybe driver kernel module missing or bad) *
(WW) fglrx(0): * 2D acceleraton available (MMIO)             *
(WW) fglrx(0): * no 3D acceleration available                *
(WW) fglrx(0): ********************************************* *

10.4/10.5 is rather broken against kernel 2.6.34 yet 10.4 works well with the previous 2.6.33-rc versions.

I am going to try and change my symlinks back to point to 2.6.33-rc kernel and recompile. Try see if the multi monitor segfault still exists.

Reproducible: Always

Steps to Reproduce:
1.Install ATI-drivers-10.5 for Multi DVI displays second display renders disabled no matter what.
2.Reboot with Kernel linux-2.6.33-gentoo-r2 and compile ATI-drivers-10.5 against this version while /usr/src/linux symlinks point to kernel-2.6.34
3.Load X and observe errors Note same monitor behaviour disabling of the second monitor with segfaults when trying to change or enable the monitor. Even tried pointing the xorg.conf to use the second display and segfault output to console.

Note my current emerge --info shows me running on the prior kernel version where DRI fails. This is so i can show you the errors and that it builds against this kernel version with the wrong Symlinks.

Actual Results:  
Multi Monitor fails Second monitor becomes disabled and segmentation faults occur on every occurrence trying to enable. I feel it maybe related to the bellow error in the xorg log. Both monitors are identical models

(II) fglrx(0): Connected Display0: DFP on internal TMDS [tmds1]
(II) fglrx(0):  Display0: Failed to get EDID information. 
(II) fglrx(0): Connected Display1: DFP on secondary TMDS [tmds2i]
(II) fglrx(0): Display1 EDID data ---------------------------

Driver result when compiled against the incorrect kernel

(WW) fglrx(0): Kernel Module version does *not* match driver.
(EE) fglrx(0): incompatible kernel module detected - HW accelerated OpenGL will not work
(II) fglrx(0): [uki] removed 1 reserved context for kernel
(II) fglrx(0): [uki] unmapping 8192 bytes of SAREA 0x4000 at 0xb6faf000
(WW) fglrx(0): ***********************************************
(WW) fglrx(0): * DRI initialization failed!                  *
(WW) fglrx(0): * (maybe driver kernel module missing or bad) *
(WW) fglrx(0): * 2D acceleraton available (MMIO)             *
(WW) fglrx(0): * no 3D acceleration available                *
(WW) fglrx(0): ********************************************* *

Expected Results:  
Loaded multi display properly without segmentation fault errors or EDID errors and errored to me when i tried to compile it against incorrect symlink on kernel version. The Drivers have always checked the symlink against the running kernel in previous versions due to the above outcome. If the software has changed so it relies only on headers and not kernel versions how come it mismatches and fails to work.

Portage 2.1.8.3 (default/linux/x86/10.0, gcc-4.3.4, glibc-2.10.1-r1, 2.6.33-gentoo-r2-f1r31c3r i686)
=================================================================
System uname: Linux-2.6.33-gentoo-r2-f1r31c3r-i686-Intel-R-_Xeon-TM-_CPU_3.06GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 02 Jun 2010 23:30:01 +0000
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.4-r1
dev-python/pycrypto: 2.1.0_beta1
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.1-r1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.8.5-r3, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc:       4.3.4
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="*"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe -ggdb"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=native -pipe -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news nostrip parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://gentoo.virginmedia.com/sites/gentoo "
LANG="en_GB.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa ao apic aspell asyncns audiofile autoipd automount avahi berkdb bluetooth bts bzip2 cairo caps cdio cdr cdrkit cdrtools cid clflush cli cmov consolekit cracklib crypt css cue cups cupsddk cx8 cxx dbus de desktop device-mapper dga directfb djconsole dmx dri dri2 dts dvb dvd dvdr emerald encode esd evdev extras fax fbcon fbcondecor ffmpeg flac fluidsynth flv fontconfig fortran fpu fuse fxsr gd gdbm gdu gecko glib glitz gnome gnutls gphoto2 gpm gstreamer gtk hal hifieq howl-compat hpcups hplip ht http hunspell iconv ipv6 jack jce jpeg jpeg2k kde ladspa lame lcms ldap libburn libmms libnotify libsamplerate live lyrics lzo makt mca mce mdnsresponder-compat mmx mmxext mng modplug modules mp3 msn msr mtrr mudflap musepack mysql nano-syntax nas nautilus ncurses nls nptl nptlonly nsplugin obex odbc ogg openal opengl openmp oss pae pam pbe pcre perl pge php pipe png policykit ppds pppd pse pse36 pulseaudio python qt3support qt4 quicktime radeon radeonhd readline record recording reflection render samba scanner sdl sep session sid slp snmp spl sql sqlite ss sse sse2 ssl svg svga sysfs system-wide tcpd templates theora threads tiff tm truetype tsc udev unicode v4l v4l2 vme vorbis wavpack webkit win32codecs wine winetools wininstallers x264 x86 xcb xcomposite xml xorg xrender xscreensaver xtpr xtrap xv xvid zeroconf zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB en" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fglrx radeon radeonhd v4l vesa virtualbox" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

------************-------

My symlink:

linux -> /usr/src/linux-2.6.34-gentoo




Comment 1


f1r31c3r





          2010-06-03 15:55:27 UTC
        

Confirmed the DRI failure behaviour by changing the Symlinks linux -> /usr/src/linux-2.6.33-gentoo-r2 the correct running kernel for test and reloading the DRI returns with full 3D rendering.

But the EDID failure on the second monitor remains, causing the second monitor to become disabled due to no capabilities information missing which in turn segmentation faults when configuration is attempted.

I listed bug as an Ebuild bug due to the Ebuild compiling against the wrong symlinks or ignoring them causing the DRI failure which i can now confirm due to version mismatch.

I am lost as to how i am to fix this error with multi display urm.

Please advise if i need to split the bug into two faults. 
Thanks




Comment 2


f1r31c3r





          2010-06-03 17:10:50 UTC
        

Here is my EDID DDC output from the roll-back ati-drivers-10.4 against kernel 2.6.33-gentoo-rc2.

As you can see it pulls in a small amount from display0 something that fails completely on 10.5 driver. On roll-back the configuration state was left in a mess I had to use amdcccle control applet to set the configuration, reboot several times before the gnome display properties could see the second monitor and allow it to be multi desktop configured. 

There is something changed more than was listed in the change-log from 10.4 to 10.5.

If i switch the display connectors over as mentioned above the screens move over but the effect in the log bellow is identical. something is not working correctly.

(II) Loading sub module "ddc"
(II) LoadModule: "ddc"
(II) Module "ddc" already built-in
(II) fglrx(0): Connected Display0: DFP on internal TMDS [tmds1]
(II) fglrx(0): Display0 EDID data ---------------------------
(II) fglrx(0): Manufacturer: XXX  Model: 3  Serial#: 0
(II) fglrx(0): Year: 1990  Week: 0
(II) fglrx(0): EDID Version: 1.3
(II) fglrx(0): Digital Display Input
(II) fglrx(0): Max Image Size [cm]: horiz.: 40  vert.: 30
(II) fglrx(0): Gamma: 1.00
(II) fglrx(0): DPMS capabilities: StandBy Suspend Off
(II) fglrx(0): Supported color encodings: RGB 4:4:4 YCrCb 4:2:2
(II) fglrx(0): First detailed timing not preferred mode in violation of standard!
(II) fglrx(0): redX: 0.000 redY: 0.000   greenX: 0.000 greenY: 0.000
(II) fglrx(0): blueX: 0.000 blueY: 0.000   whiteX: 0.000 whiteY: 0.000
(II) fglrx(0): Supported established timings:
(II) fglrx(0): 640x480@60Hz
(II) fglrx(0): 800x600@60Hz
(II) fglrx(0): 1024x768@60Hz
(II) fglrx(0): Manufacturer's mask: 0
(II) fglrx(0): Supported standard timings:
(II) fglrx(0): #0: hsize: 640  vsize 480  refresh: 60  vid: 16433
(II) fglrx(0): #1: hsize: 800  vsize 600  refresh: 60  vid: 16453
(II) fglrx(0): #2: hsize: 1024  vsize 768  refresh: 60  vid: 16481
(II) fglrx(0): EDID (in hex):
(II) fglrx(0): 	00ffffffffffff006318030000000000
(II) fglrx(0): 	0000010380281e00f000000000000000
(II) fglrx(0): 	00000021080031404540614000000000
(II) fglrx(0): 	00000000000000000000000000000000
(II) fglrx(0): 	00000000000000000000000000000000
(II) fglrx(0): 	00000000000000000000000000000000
(II) fglrx(0): 	00000000000000000000000000000000
(II) fglrx(0): 	0000000000000000000000000000000e
(II) fglrx(0): End of Display0 EDID data --------------------
(II) fglrx(0): Connected Display1: DFP on secondary TMDS [tmds2i]
(II) fglrx(0): Display1 EDID data ---------------------------
(II) fglrx(0): Manufacturer: GNR  Model: 0  Serial#: 832
(II) fglrx(0): Year: 2007  Week: 11
(II) fglrx(0): EDID Version: 1.3
(II) fglrx(0): Digital Display Input
(II) fglrx(0): Max Image Size [cm]: horiz.: 40  vert.: 25
(II) fglrx(0): Gamma: 2.20
(II) fglrx(0): DPMS capabilities: Off
(II) fglrx(0): Supported color encodings: RGB 4:4:4 YCrCb 4:4:4 
(II) fglrx(0): Default color space is primary color space
(II) fglrx(0): First detailed timing is preferred mode
(II) fglrx(0): GTF timings supported
(II) fglrx(0): redX: 0.638 redY: 0.349   greenX: 0.286 greenY: 0.593
(II) fglrx(0): blueX: 0.141 blueY: 0.078   whiteX: 0.312 whiteY: 0.330
(II) fglrx(0): Supported established timings:
(II) fglrx(0): 720x400@70Hz
(II) fglrx(0): 640x480@60Hz
(II) fglrx(0): 640x480@67Hz
(II) fglrx(0): 640x480@72Hz
(II) fglrx(0): 640x480@75Hz
(II) fglrx(0): 800x600@56Hz
(II) fglrx(0): 800x600@60Hz
(II) fglrx(0): 800x600@72Hz
(II) fglrx(0): 800x600@75Hz
(II) fglrx(0): 832x624@75Hz
(II) fglrx(0): 1024x768@60Hz
(II) fglrx(0): 1024x768@70Hz
(II) fglrx(0): 1024x768@75Hz
(II) fglrx(0): 1280x1024@75Hz
(II) fglrx(0): Manufacturer's mask: 0
(II) fglrx(0): Supported standard timings:
(II) fglrx(0): #0: hsize: 1280  vsize 1024  refresh: 60  vid: 32897
(II) fglrx(0): #1: hsize: 1280  vsize 960  refresh: 60  vid: 16513
(II) fglrx(0): #2: hsize: 1152  vsize 864  refresh: 75  vid: 20337
(II) fglrx(0): #3: hsize: 1440  vsize 900  refresh: 60  vid: 149
(II) fglrx(0): #4: hsize: 1440  vsize 900  refresh: 75  vid: 3989
(II) fglrx(0): Supported detailed timing:
(II) fglrx(0): clock: 106.5 MHz   Image Size:  408 x 255 mm
(II) fglrx(0): h_active: 1440  h_sync: 1520  h_sync_end 1672 h_blank_end 1904 h_border: 0
(II) fglrx(0): v_active: 900  v_sync: 903  v_sync_end 909 v_blanking: 934 v_border: 0
(II) fglrx(0): Ranges: V min: 56 V max: 76 Hz, H min: 30 H max: 82 kHz, PixClock max 140 MHz
(II) fglrx(0): Monitor name: TS902W
(II) fglrx(0): Serial No: 000832
(II) fglrx(0): EDID (in hex):
(II) fglrx(0): 	00ffffffffffff001dd2000040030000
(II) fglrx(0): 	0b110103802819782f570ea359499724
(II) fglrx(0): 	144f54bfef0081808140714f9500950f
(II) fglrx(0): 	0101010101019a29a0d0518422305098
(II) fglrx(0): 	360098ff1000001c000000fd00384c1e
(II) fglrx(0): 	520e000a202020202020000000fc0054
(II) fglrx(0): 	53393032570a202020202020000000ff
(II) fglrx(0): 	003030303833320a2020202020200068
(II) fglrx(0): End of Display1 EDID data --------------------
(II) fglrx(0): Output DFP1 using monitor section 0-DFP1
(**) fglrx(0): Option "PreferredMode" "1440x900"
(**) fglrx(0): Option "Position" "1440 0"
(**) fglrx(0): Option "Disable" "false"
(**) fglrx(0): Option "Rotate" "normal"
(**) fglrx(0): Option "TargetRefresh" "60"
(II) fglrx(0): Output DFP2 using monitor section 0-DFP2
(**) fglrx(0): Option "PreferredMode" "1440x900"
(**) fglrx(0): Option "Position" "0 0"
(**) fglrx(0): Option "Disable" "false"
(**) fglrx(0): Option "Rotate" "normal"
(**) fglrx(0): Option "TargetRefresh" "60"
(II) fglrx(0): Output CRT1 has no monitor section
(II) fglrx(0): Output CRT2 has no monitor section
(II) fglrx(0): Output TV has no monitor section
(II) fglrx(0): Output COMPONENT_VIDEO has no monitor section
(II) fglrx(0): Output DFP1 connected
(II) fglrx(0): Output DFP2 connected
(II) fglrx(0): Output CRT1 disconnected
(II) fglrx(0): Output CRT2 disconnected
(II) fglrx(0): Output TV disconnected
(II) fglrx(0): Output COMPONENT_VIDEO disconnected
(II) fglrx(0): Using user preference for initial modes
(II) fglrx(0): Output DFP1 using initial mode 1440x900
(II) fglrx(0): Output DFP2 using initial mode 1440x900
(II) fglrx(0): DPI set to (96, 96)
(II) fglrx(0): Adapter ATI Radeon HD 3850 has 2 configurable heads and 2 displays connected.
(==) fglrx(0): QBS disabled
(==) fglrx(0):  PseudoColor visuals disabled


The unmodified xorg.conf after rolling back, i have deleted nothing modified nothing this is untouched after the amdccle config utility blatted it to get my monitors running.

Section "ServerLayout"
	Identifier     "X.org Configured"
	Screen      0  "amdcccle-Screen[1]-0" 0 0
	InputDevice    "Mouse0" "CorePointer"
	InputDevice    "Keyboard0" "CoreKeyboard"
EndSection

Section "Files"

#	FontPath     "/usr/share/fonts/misc/"
#	FontPath     "/usr/share/fonts/TTF/"
#	FontPath     "/usr/share/fonts/OTF"
#	FontPath     "/usr/share/fonts/Type1/"
#	FontPath     "/usr/share/fonts/100dpi/"
#	FontPath     "/usr/share/fonts/75dpi/"
	ModulePath   "/usr/lib/xorg/modules"
	ModulePath   "/usr/lib/opengl/xorg-x11/extensions/"
	ModulePath   "/usr/lib/dri/"
	FontPath     "/usr/share/fonts/misc:unscaled"
	FontPath     "/usr/share/fonts/75dpi:unscaled"
	FontPath     "/usr/share/fonts/100dpi:unscaled"
	FontPath     "/usr/share/fonts/xawtv"
	FontPath     "/usr/share/fonts/ttf-bitstream-vera"
	FontPath     "/usr/share/fonts/freefont-ttf"
	FontPath     "/usr/share/fonts/artwiz-aleczapka-en"
	FontPath     "/usr/share/fonts/unifont"
	FontPath     "/usr/share/fonts/freefonts"
	FontPath     "/usr/share/fonts/Speedo"
	FontPath     "/usr/share/fonts/dejavu"
	FontPath     "/usr/share/fonts/terminus"
	FontPath     "/usr/share/fonts/default/ghostscript"
	FontPath     "/usr/share/fonts/OTF"
	FontPath     "/usr/share/fonts/TTF"
	FontPath     "/usr/share/fonts/cyrillic"
	FontPath     "/usr/share/fonts/Type1"
	FontPath     "/usr/share/fonts/corefonts"
EndSection

Section "Module"
	Load  "evdev"
	Load  "dri"
	Load  "glx"
	Load  "GLcore"
	Load  "extmod"
	Load  "dri2"
	Load  "ddc"
	Load  "record"
	Load  "dbe"
	Load  "v4l"
EndSection

Section "ServerFlags"
	Option	    "AIGLX" "On"
	Option	    "Xinerama" "off"
EndSection

Section "InputDevice"
	Identifier  "Keyboard0"
	Driver      "evdev"
EndSection

Section "InputDevice"
	Identifier  "Mouse0"
	Driver      "evdev"
EndSection

Section "Monitor"
	Identifier   "0-DFP1"
	Option	    "VendorName" "ATI Proprietary Driver"
	Option	    "ModelName" "Generic Autodetecting Monitor"
	Option	    "DPMS" "true"
	Option	    "PreferredMode" "1440x900"
	Option	    "TargetRefresh" "60"
	Option	    "Position" "1440 0"
	Option	    "Rotate" "normal"
	Option	    "Disable" "false"
EndSection

Section "Monitor"
	Identifier   "0-DFP2"
	Option	    "VendorName" "ATI Proprietary Driver"
	Option	    "ModelName" "Generic Autodetecting Monitor"
	Option	    "DPMS" "true"
	Option	    "PreferredMode" "1440x900"
	Option	    "TargetRefresh" "60"
	Option	    "Position" "0 0"
	Option	    "Rotate" "normal"
	Option	    "Disable" "false"
EndSection

Section "Device"
	Identifier  "amdcccle-Device[1]-0"
	Driver      "fglrx"
	Option	    "Monitor-DFP2" "0-DFP2"
	Option	    "Monitor-DFP1" "0-DFP1"
	BusID       "PCI:1:0:0"
EndSection

Section "Device"
	Identifier  "amdcccle-Device[1]-1"
	Driver      "fglrx"
	Option	    "Monitor-DFP1" "0-DFP1"
	BusID       "PCI:1:0:0"
	Screen      1
EndSection

Section "Screen"
	Identifier "amdcccle-Screen[1]-0"
	Device     "amdcccle-Device[1]-0"
	DefaultDepth     24
	SubSection "Display"
		Viewport   0 0
		Virtual   2880 2880
		Depth     24
	EndSubSection
EndSection

Section "Screen"
	Identifier "amdcccle-Screen[1]-1"
	Device     "amdcccle-Device[1]-1"
	DefaultDepth     24
	SubSection "Display"
		Viewport   0 0
		Depth     24
	EndSubSection
EndSection

Section "Extensions"
	Option	    "Composite" "On"
EndSection





Comment 3


Enrico Tagliavini





          2010-06-15 21:19:26 UTC
        

(In reply to comment #1)
> I listed bug as an Ebuild bug due to the Ebuild compiling against the wrong
> symlinks or ignoring them causing the DRI failure which i can now confirm due
> to version mismatch.

No this is not an ebuild bug, the ebuild compiles the module for the kernel pointed by /usr/src/linux so if it is .34 it will install the .34 module under /lib/modules/2.6.34-gentoo so the .33 kernel is still using the old module that's why you get the missmatch.

About your second monitor problem i *think* it is an upstream bug, at least sound like to be. Anyway the .34 kernel is not supported at all by catalyst 10.5 but the ebuild use an unofficial patch to make it work with .34





Comment 4


Enrico Tagliavini





          2010-10-03 12:09:35 UTC
        

Some news. I just bought a second full hd monitor. Multi display works as expected
I removed my old xorg.conf then generated a new one with aticonfig --initial=dual-head then i used amdcccle to configure the display settings (it needed some step here to be honest before getting the 1920x1080 res). this with ati-drivers-10.9-r1

The EDID error is not related to the driver i think, but i might be wrong.

Does it still fails for you?




Comment 5


Enrico Tagliavini





          2011-03-12 19:53:49 UTC
        

I close this bug, no activity for a long time









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

