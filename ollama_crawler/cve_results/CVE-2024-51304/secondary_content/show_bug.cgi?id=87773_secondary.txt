Title: 87773 – thunderbird crash while sending an attachent signed by enigmail with PGP/MIME
URL: https://bugs.gentoo.org/show_bug.cgi?id=87773

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 87773
thunderbird crash while sending an attachent signed by enigmail with PGP/MIME
Last modified: 2005-12-23 02:54:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 87773 
      - thunderbird crash while sending an attachent signed by enigmail with PGP/MIME


Summary:
thunderbird crash while sending an attachent signed by enigmail with PGP/MIME
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-03 05:49 UTC by Luca Guglielmetti





      Modified:
    
2005-12-23 02:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



smithj









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Luca Guglielmetti





          2005-04-03 05:49:14 UTC
        

thunderbird crash while sending an attachent signed by enigmail with PGP/MIME

Software:
mozilla-launcher 1.32
mozilla-thunderbird 1.0.2

Steps to reproce:
1. open thunderbird (1.0.2)
2. write a message with an attachment
3 [details, diff]. sign the message witch enigmail using PGP/MIME
4. send the message

Reproducible: Always

thunderbird crash with the following error:

$ > thunderbird 
No running windows found
*** Failed to load overlay chrome://enigmail/content/enigmailCheckLanguage.xul
/usr/libexec/mozilla-launcher: line 547: 15947 Segmentation fault      "$mozbin" "$@"
thunderbird-bin exited with non-zero status (139)

probably the error is in the enigmail extension, but the error cointain the script "mozilla-launcher"




Comment 1


David Bergstein





          2005-05-31 18:48:16 UTC
        

This may be related to the same issue, I am observing whenever 
mozilla-thunderbird-1.0.2 tries to decrypt/verify a PGP/MIME email (in my case, 
GLSA emails), the program crashes.  If I turn off the automatic setting to 
decrypt/verify, I can browse GLSA emails that I imported from Mozilla.  The 
crash is also reproducible if I manually select decrypt/verify from the 
Enigmail menu while viewing a GLSA. 




Comment 2


David Bergstein





          2005-05-31 19:11:21 UTC
        

(In reply to comment #1) 
> This may be related to the same issue, I am observing whenever  
> mozilla-thunderbird-1.0.2 tries to decrypt/verify a PGP/MIME email (in my 
case,  
> GLSA emails), the program crashes.  If I turn off the automatic setting to  
> decrypt/verify, I can browse GLSA emails that I imported from Mozilla.  The  
> crash is also reproducible if I manually select decrypt/verify from the  
> Enigmail menu while viewing a GLSA.  
 
As additional follow-up here is some output from mozilla-thunderbird-1.0.2 via 
the enigmail debug log files: 
 
1.  Composing a PGP/MIME signed email (crash occurs on send, no additional 
attachments required): 
 
enigmail.js: Logging debug output to ~/tmp/enigdbug.txt 
enigmail.js: Enigmail version 0.91.0.0 
enigmail.js: OS/CPU=Linux i686 
enigmail.js: Platform=X11 
enigmail.js: composeSecure=true 
enigmail.js: Enigmail.initialize: gEnvList = 
DISPLAY=:0.0,HOME=/home/dbergst,LOGNAME=dbergst,LD_LIBRARY_PATH=/usr/lib/MozillaThunderbird:/usr/lib/MozillaThunderbird/plugins,MOZILLA_FIVE_HOME=/usr/lib/MozillaThunderbird,PATH=/usr/bin:/bin:/usr/X11R6/bin:/usr/kde/3.3/bin:/bin:/usr/lib/ccache/bin:/usr/lib/distcc/bin:/usr/bin:/usr/local/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.3.5-20050130:/opt/blackdown-jdk-1.4.2.01/bin:/opt/blackdown-jdk-1.4.2.01/jre/bin:/usr/qt/3/bin:/usr/kde/3.3/bin:/usr/games/bin,PWD=/home/dbergst,SHELL=/bin/bash,USER=dbergst 
enigmail.js: ResolvePath: filePath=gpg 
EnigmailAgentPath=/usr/bin/gpg 
 
enigmail> /usr/bin/gpg --charset utf8 --batch --no-tty --version 
gpg (GnuPG) 1.4.1 
Copyright (C) 2005 Free Software Foundation, Inc. 
This program comes with ABSOLUTELY NO WARRANTY. 
This is free software, and you are welcome to redistribute it 
under certain conditions. See the file COPYING for details. 
 
Home: ~/.gnupg 
Supported algorithms: 
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA 
Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH 
Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512 
Compression: Uncompressed, ZIP, ZLIB 
 
enigmail.js: Enigmail.stillActive: 
enigmail.js: Enigmail.initialize: END 
enigmailMsgComposeOverlay.js: EnigEditorGetContentsAs 
enigmailMessengerOverlay.js: enigSetMenuSettings: postfix= 
enigmailMsgComposeOverlay.js: enigDoPgpButton: what=togglePGPMime 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=enabled 
enigmailMsgComposeOverlay.js: enigTogglePGPMime: 
enigmailMessengerOverlay.js: enigSetMenuSettings: postfix= 
enigmailMsgComposeOverlay.js: enigDoPgpButton: what=toggle-sign 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=enabled 
enigmailMessengerOverlay.js: enigSetSendMode: sendMode=toggle-sign 
enigmailMessengerOverlay.js: enigDisplaySignClickWarn 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=signPlain 
  signPlain=false 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=signEnc 
  signEnc=false 
enigmailMessengerOverlay.js: enigDisplayUi: 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=enabled 
enigmailMsgComposeOverlay.js: enigGenericSendMessage: msgType=0 
  Identity = [nsIMsgIdentity: id1] 
enigmailMsgComposeOverlay.js: enigModifyCompFields: otherRandomHeaders = 
X-Enigmail-Version: 0.91.0.0 
 
enigmailMsgComposeOverlay.js: enigEncryptMsg: msgType=0, gEnigSendMode=1 
enigmailMsgComposeOverlay.js: enigEncryptMsg: currentId=[nsIMsgIdentity: id1], 
dbergstein@comcast.net 
enigmailMsgComposeOverlay.js: enigGetAccDefault: identity=id1 value=enabled 
enigmailMsgComposeOverlay.js: enigEncryptMsg:gMsgCompose=[xpconnect wrapped 
nsIMsgCompose] 
enigmailMsgComposeOverlay.js: enigEncryptMsg: toAddr=dbergstein@comcast.net 
enigmailMsgComposeHelper.js: getRecipientsKeys: 
emailAddrs=dbergstein@comcast.net 
enigmail.js: getRulesData 
enigmail.js: loadRulesFile 
enigmail.js: getRulesFile 
enigmailMsgComposeOverlay.js: hasAttachments = false 
enigmailMsgComposeOverlay.js: enigEncryptMsg: Using EnigMime, flags=225 
enigmailMsgComposeOverlay.js: enigEncryptMsg: oldSecurityInfo = [xpconnect 
wrapped nsIMsgSMIMECompFields] 
enigmailMsgComposeOverlay.js: enigEncryptMsg: securityInfo = [xpconnect 
wrappednsIEnigMsgCompFields] 
enigmailMessengerOverlay.js: enigConfirmBeforeSend: sendFlags=225 
enigmailMsgComposeOverlay.js: enigEncryptMsg: enabled quoted-printable 
 
2.  Attempting to verify PGP/MIME signed email (GLSA): 
 
enigmail.js: Logging debug output to ~/tmp/enigdbug.txt 
enigmail.js: Enigmail version 0.91.0.0 
enigmail.js: OS/CPU=Linux i686 
enigmail.js: Platform=X11 
enigmail.js: composeSecure=true 
enigmail.js: Enigmail.initialize: gEnvList = 
DISPLAY=:0.0,HOME=/home/dbergst,LOGNAME=dbergst,LD_LIBRARY_PATH=/usr/lib/MozillaThunderbird:/usr/lib/MozillaThunderbird/plugins,MOZILLA_FIVE_HOME=/usr/lib/MozillaThunderbird,PATH=/usr/bin:/bin:/usr/X11R6/bin:/usr/kde/3.3/bin:/bin:/usr/lib/ccache/bin:/usr/lib/distcc/bin:/usr/bin:/usr/local/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.3.5-20050130:/opt/blackdown-jdk-1.4.2.01/bin:/opt/blackdown-jdk-1.4.2.01/jre/bin:/usr/qt/3/bin:/usr/kde/3.3/bin:/usr/games/bin,PWD=/home/dbergst,SHELL=/bin/bash,USER=dbergst 
enigmail.js: ResolvePath: filePath=gpg 
EnigmailAgentPath=/usr/bin/gpg 
 
enigmail> /usr/bin/gpg --charset utf8 --batch --no-tty --version 
gpg (GnuPG) 1.4.1 
Copyright (C) 2005 Free Software Foundation, Inc. 
This program comes with ABSOLUTELY NO WARRANTY. 
This is free software, and you are welcome to redistribute it 
under certain conditions. See the file COPYING for details. 
 
Home: ~/.gnupg 
Supported algorithms: 
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA 
Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH 
Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512 
Compression: Uncompressed, ZIP, ZLIB 
 
enigmail.js: Enigmail.stillActive: 
enigmail.js: Enigmail.initialize: END 
enigmail.js: Enigmail.mimeInitialized: false 
enigmailMsgHdrViewOverlay.js: enigUpdateHdrIcons: exitCode=-2081, 
statusFlags=0, keyId=, userId=, Possibly PGP/MIME encrypted or signed message; 
click Decrypt button to verifiy 
enigmailMessengerOverlay.js: enigUpdateOptionsDisplay: 
enigmailMessengerOverlay.js: enigMessageDecrypt: undefined 
enigmailMessengerOverlay.js: mail.show_headers=2 
enigmailMessengerOverlay.js: content-type: multipart/signed; micalg=pgp-sha1; 
protocol="application/pgp-signature"; 
boundary="------------enig5D3459910C0555699A2D4800" 
enigmailMessengerOverlay.js: content-transfer-encoding: 
enigmailMessengerOverlay.js: x-enigmail-version: 0.90.2.0 
enigmailCommon.js: EnigShowHeadersAll: false 
enigmailMessengerOverlay.js: multipart/signed 
 
 




Comment 3


Jonathan Smith (RETIRED)






          2005-06-01 08:33:39 UTC
        

might this be related to bug 94744?




Comment 4


David Bergstein





          2005-06-01 20:02:51 UTC
        

OK, now I see the issue.  Apparently the version of enigmail that was built 
with Thunderbird was not only an older version, but not enabled in any user 
profiles.  This has to be done by the root account since Thunderbird gets 
installed protected from user modification.  I had compounded the issue by 
downloading a newer version of enigmail and installing it in my local user 
profile (this may have caused a software conflict with the engimail version 
installed via the Thunderbird ebuild).  To correct this issue, I uninstalled 
the enigmail software from my user account, then followed the procedure to 
install a copy of enigmail from enigmail.mozdev.org, i.e., as root ran the 
following command: 
 
thunderbird -install-global enigmail-0.91.0-tb-linux.xpi 
 
Where enigmail-0.91.0-tb-linux.xpi was the file I downloaded from 
enigmail.mozdev.org. 
 
Now enigmail and PGP/MIME are working correctly on my system. 




Comment 5


David Bergstein





          2005-06-03 16:28:36 UTC
        

(In reply to comment #4) 
> OK, now I see the issue.  Apparently the version of enigmail that was built  
> with Thunderbird was not only an older version, but not enabled in any user  
> profiles.  This has to be done by the root account since Thunderbird gets  
> installed protected from user modification.  I had compounded the issue by  
> downloading a newer version of enigmail and installing it in my local user  
> profile (this may have caused a software conflict with the engimail version  
> installed via the Thunderbird ebuild).  To correct this issue, I uninstalled  
> the enigmail software from my user account, then followed the procedure to  
> install a copy of enigmail from enigmail.mozdev.org, i.e., as root ran the  
> following command:  
>   
> thunderbird -install-global enigmail-0.91.0-tb-linux.xpi  
>   
> Where enigmail-0.91.0-tb-linux.xpi was the file I downloaded from  
> enigmail.mozdev.org.  
>   
> Now enigmail and PGP/MIME are working correctly on my system.  
 
Correction to the above, as I did not properly quote the correct install 
procedure.  In any event it appears there is an internal conflict (still) with 
the old enigmime version, so I will manually re-enable the older enigmail 
version that is built with gentoo as soon as my app rebuild finishes. 
 
FYI, the site admin procedure that is documented at mozdev.org is at the URL 
below: 
 
http://enigmail.mozdev.org/install-globally.html 




Comment 6


David Bergstein





          2005-06-08 04:38:30 UTC
        

(In reply to comment #3) 
> might this be related to bug 94744? 
 
Yes, I would agree.  The enigmail software tends to be updated more often than 
thunderbird; perhaps it should be in a separate ebuild. 




Comment 7


Jonathan Smith (RETIRED)






          2005-06-08 04:51:24 UTC
        

(In reply to comment #6)
> The enigmail software tends to be updated more often than 
> thunderbird; perhaps it should be in a separate ebuild. 

if that is to be the case, USE="crypt" should trigger a
PDEPEND="app-catagory/enigmail"




Comment 8


Luca Guglielmetti





          2005-06-08 12:38:17 UTC
        

(In reply to comment #5)
>
> FYI, the site admin procedure that is documented at mozdev.org is at the URL 
> below: 
>  
> http://enigmail.mozdev.org/install-globally.html 

thanks!
that worked well for me








Comment 9


Jakub Moc (RETIRED)






          2005-12-23 02:54:11 UTC
        

Thanks for reporting back, closing.

enigmail support has been dropped meanwhile, watch Bug 99182 wrt re-inclusion.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

