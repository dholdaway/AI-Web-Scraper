Title: 426728 – www-client/chromium-20.0.1132.43 - ld catches a SIGBUS while linking out/Release/chrome
URL: https://bugs.gentoo.org/show_bug.cgi?id=426728

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 426728
www-client/chromium-20.0.1132.43 - ld catches a SIGBUS while linking out/Release/chrome
Last modified: 2014-03-10 23:55:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 426728 
      - www-client/chromium-20.0.1132.43 - ld catches a SIGBUS while linking out/Release/chrome


Summary:
www-client/chromium-20.0.1132.43 - ld catches a SIGBUS while linking out/Rele...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-07-15 16:10 UTC by Honza





      Modified:
    
2014-03-10 23:55 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (www-client:chromium-20.0.1132.43:20120715-121613.log.bz2,426.61 KB,
                application/x-bzip)

            
2012-07-16 23:06 UTC,

            Honza




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Honza





          2012-07-15 16:10:35 UTC
        

When compiling www-client/chromium-20.0.1132.43, the compile failed with message

collect2: ld terminated with signal 7 [Bus error]


Reproducible: Always

Steps to Reproduce:
1. emerge chromium

Actual Results:  
  flock out/Release/linker.lock i686-pc-linux-gnu-g++ -pthread -Wl,-z,noexecstack -fPIC -pie -Lout/Release -lpthread -ldl -lm -L/usr/lib -licui18 ........ t/Release/obj.target/native_client/src/trusted/platform_qualify/libplatform_qual_lib.a out/Release/obj.target/content/libcontent_utility.a -Wl,--
end-group -lX11 -lXcursor -lX11 -lXrender -lXss -lXext -lrt -ldl -lgmodule-2.0 -lgobject-2.0 -lgthread-2.0 -lglib-2.0 -lXi -lgtk-x11-2.0 -lgdk-x1
1-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -levent -lsmime3 -lnssutil
3 -lnss3 -lplds4 -lplc4 -lnspr4 -lpthread -lz -licui18n -licuuc -licudata -lv8 -lresolv -ldbus-1 -lXcomposite -lpng15 -ljpeg -lXfixes -lasound -l
webp -lxml2 -lxslt -lm -lcups -lgnutls -lgcrypt -lgpg-error -lcrypt -lbz2 -lexpat -lFLAC -lspeex -ludev
collect2: ld terminated with signal 7 [Bus error]                                                                                                
make: *** [out/Release/chrome] Error 1                                                                                                           
 .[31;01m*.[0m ERROR: www-client/chromium-20.0.1132.43 failed (compile phase):                                                                   
 .[31;01m*.[0m   emake failed                                                                                                                    
 .[31;01m*.[0m                                                                                                                                   
 .[31;01m*.[0m If you need support, post the output of `emerge --info '=www-client/chromium-20.0.1132.43'`,                                      
 .[31;01m*.[0m the complete build log and the output of `emerge -pqv '=www-client/chromium-20.0.1132.43'`.                                       
 .[31;01m*.[0m The complete build log is located at '/var/log/portage/www-client:chromium-20.0.1132.43:20120715-121613.log'.                     
 .[31;01m*.[0m For convenience, a symlink to the build log is located at '/var/tmp/portage/www-client/chromium-20.0.1132.43/temp/build.log'.     
 .[31;01m*.[0m The ebuild environment file is located at '/var/tmp/portage/www-client/chromium-20.0.1132.43/temp/environment'.                   
 .[31;01m*.[0m Working directory: '/var/tmp/portage/www-client/chromium-20.0.1132.43/work/chromium-20.0.1132.43'                                 
 .[31;01m*.[0m S: '/var/tmp/portage/www-client/chromium-20.0.1132.43/work/chromium-20.0.1132.43'                                                 


Expected Results:  
The chromium should compile. The www-client/chromium-18.0.1025.168 did.

Selected binutils is i686-pc-linux-gnu-2.20.1 and selected gcc i686-pc-linux-gnu-4.5.3-hardenednopie - the chromium 18 was able to be build with those versions of toolchain.

I have 4GB RAM.

Portage 2.1.10.65 (hardened/linux/x86, gcc-4.5.3-hardenednopie, glibc-2.11.2-r3, 2.6.32-28-generic-pae i686)
=================================================================
System uname: Linux-2.6.32-28-generic-pae-i686-AMD_Phenom-tm-_II_X3_720_Processor-with-gentoo-1.12.11.1
Timestamp of tree: Sat, 14 Jul 2012 16:45:01 +0000
app-shells/bash:          4.0_p28
dev-java/java-config:     2.1.9-r1
dev-lang/python:          2.6.6-r2
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      1.12.11.1
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.4_p6, 1.6.3, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11.1
sys-devel/binutils:       2.18-r3, 2.20.1-r1
sys-devel/gcc:            2.95.3-r8::<unknown repository>, 3.4.6-r2, 4.3.4, 4.5.3-r2
sys-devel/gcc-config:     1.4.1
sys-devel/libtool:        2.2.10
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 3.1
sys-libs/glibc:           2.11.2-r3
Repositories: gentoo sunrise x-portage
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=k8 -march=k8 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /usr/share/openvpn/easy-rsa /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -mtune=k8 -march=k8 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-march=i686 -O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles news parallel-fetch parse-eapi-ebuild-head protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS="-march=i686 -O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.tu-clausthal.de/pub/linux/gentoo http://ftp.sh.cvut.cz/MIRRORS/gentoo/gentoo/ http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise /usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dnow 3dnowex 3dnowext X Xaw3d aalib acl alsa apache2 apm avi bash-completion berkdb browserplugin bzip2 caps cdr cli cracklib crypt css cups curl cxx dbus dga directfb doc dri dts dvd encode erandom esd fbcon ffmpeg flac fltk force-cgi-redirect gd gdbm ggi gif gpm gtk hardened iconv imagemagick imlib innodb ipv6 jadetex java jpeg jpeg2k lcms lesstif libcaca libwww lirc lua mad mailwrapper matroska mbox mcal memlimit mikmod mmx mmx2 mmxext mng modules motif mozilla mpeg mudflap multislot mysql ncurses nls nptl ogg oggvorbis old-linux opengl openmp oss pam pax_kernel pcre pdflib perl pic png postscript pppd python qt quicktime readline samba sdl session slang snmp spell sqlite sse sse2 ssl svga tcpd tetex theora tiff truetype unicode urandom usb userlocales v4l v4l2 vhosts videos vorbis wmf x264 x86 xgetdefault xml xorg xosd xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="access auth auth_dbm auth_anon auth_basic auth_digest authz_host authz_default authz_user alias file-cache echo charset-lite cache disk-cache mem-cache ext-filter case_filter case-filter-in deflate mime-magic cern-meta expires headers usertrack unique-id proxy proxy-connect proxy-ftp proxy-http info include cgi cgid dav dav-fs vhost-alias speling rewrite log_config logio env setenvif mime status autoindex asis negotiation dir imap actions userdir so mem_cache mime_magic vhost_alias filter authn_file" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" PHP_TARGETS="php5-3" PYTHON_TARGETS="python3_2 python2_7" QEMU_SOFTMMU_TARGETS="arm i386 x86_64" QEMU_USER_TARGETS="alpha arm i386 x86_64" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="r128 radeon radeonhd vesa r300 r600" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Honza





          2012-07-15 16:25:00 UTC
        

... tried adding 1GB of swap and compiled second time. This time it worked, despite only 80k of swap being used.

Ok, not sure how this should be solved ... some warning message? Or should it be crossreported as a ld bug of not being able to clearly tell problem is not having swap?

(In any case, I hope this bugreport will help someone.)




Comment 2


Honza





          2012-07-15 23:16:40 UTC
        

... of course now the chromium is not working, but that's probably unrelated (reported upstream as https://code.google.com/p/chromium/issues/detail?id=137438 ...)




Comment 3


Yixun Lan







          2012-07-16 07:44:42 UTC
        

you didn't attach the full build log.
I guess the failure probably due to the final linkage consume too much memory, thus trigger OOM error.




Comment 4


Honza





          2012-07-16 23:02:20 UTC
        

Classical OOM errors are written into dmesg, this wasn't. But yes, considering the swap helped it probably WAS amount-of-RAM related ... only adding physical RAM wouldn't help as it already has 4GB (or, to be exact, adding physical RAM would not help better that adding swap).




Comment 5


Honza





          2012-07-16 23:06:47 UTC
        

Created attachment 318386 [details]
build log

Full build log. Only 40MB (before bzip2ing) with nothing interesting except the parts already posted. Enjoy.




Comment 6


Jeroen Roovers (RETIRED)






          2012-07-18 16:35:06 UTC
        

Maybe you simply ran out of memory.




Comment 7


Honza





          2012-07-19 07:21:22 UTC
        

(In reply to comment #6)
> Maybe you simply ran out of memory.

By 80k? Also, I think I still had something in cache (I mean, top was showing something in "buffers" and "cached").




Comment 8


Yixun Lan







          2012-07-19 23:57:10 UTC
        


could you try 20.0.1132.57,see bug#426204,we stablize it recently
also it compiles fine here
(In reply to comment #7)
> (In reply to comment #6)
> > Maybe you simply ran out of memory.
> 
> By 80k? Also, I think I still had something in cache (I mean, top was
> showing something in "buffers" and "cached").




Comment 9


Honza





          2012-07-21 23:50:39 UTC
        

(In reply to comment #8)
> could you try 20.0.1132.57,see bug#426204,we stablize it recently
> also it compiles fine here
> (In reply to comment #7)
> > (In reply to comment #6)
> > > Maybe you simply ran out of memory.
> > 
> > By 80k? Also, I think I still had something in cache (I mean, top was
> > showing something in "buffers" and "cached").

To my suprise, it compiles fine even without swap.




Comment 10


Paweł Hajdan, Jr. (RETIRED)






          2012-08-01 07:54:28 UTC
        

(In reply to comment #9)
> To my suprise, it compiles fine even without swap.

Could you confirm this is fixed for you?




Comment 11


Honza





          2012-08-05 11:05:56 UTC
        

I'm not going to compile chromium several times just to get statistically significant sample. Both "fixed" and "not reproducible always" is possible now. I'll return to this bug if it happens again for example after next GLSA or if I broke the installed chromium by upgrading some library it depends on, but I hope neither happen for some time.

Or I'll return if some solution requiring recompilation will be offered on 
https://code.google.com/p/chromium/issues/detail?id=137438 (which is problem I have with that chromium now, but as it has workaround it's not so critical).




Comment 12


Mike Gilbert






          2012-08-05 15:21:08 UTC
        

We can only work with the information given, and that really doesn't tell us much.




Comment 13


Honza





          2014-03-10 23:55:03 UTC
        

Same problem on different computer with 12GB RAM (or is it same computer I only added more memory since?). Different chromium (33.0.1750.146), different gcc (4.6.3), same binutils. After adding 100MB of swap (which was never used) it compiled ok.

I don't expect you to do something about it, looks like it's random so it would be near impossible to debug unless someone will come with smaller example than chromium.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

