Title: 196555 – [4.2/bad code] dev-libs/openssl-0.9.8g RC5 tests broken w/ -ftree-vectorize
URL: https://bugs.gentoo.org/show_bug.cgi?id=196555

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 196555
[4.2/bad code] dev-libs/openssl-0.9.8g RC5 tests broken w/ -ftree-vectorize
Last modified: 2008-06-27 12:57:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 196555 
      - [4.2/bad code] dev-libs/openssl-0.9.8g RC5 tests broken w/ -ftree-vectorize


Summary:
[4.2/bad code] dev-libs/openssl-0.9.8g RC5 tests broken w/ -ftree-vectorize
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

197150

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-10-20 22:06 UTC by Duncan





      Modified:
    
2008-06-27 12:57 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



dschridde+gentoobugs
flameeyes
kingtaco









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Duncan





          2007-10-20 22:06:18 UTC
        

At least on ~amd64, with gcc-4.2.2 and binutils-2.18.50.0.2, openssl-0.9.8g doesn't like CFLAGS including -ftree-vectorize .  It causes the RC5 encryption tests to fail with random numbers (the "got" result changes every time the ebuild is run). Perhaps a filter-flags is in order?

With CFLAGS=${CFLAGS/-ftree-vectorize /} in /etc/portage/env/dev-libs/openssl ,  (and with MAKEOPTS=-j1 but I just filed that bug), the ebuild completes the tests and merges normally, so it's definitely that flag.

Duncan




Comment 1


Pierrot Rey





          2007-10-21 06:49:13 UTC
        

Thanks, it works great now.

Pierrot





Comment 2


Santiago Gala





          2007-10-21 10:27:42 UTC
        

/me too, I'll emerge it removing the flag. Something worth to report upstream. Is upstream taken care of, or should I report?




Comment 3


SpanKY






          2007-10-21 16:55:45 UTC
        

we do not want users reporting GCC bugs upstream, we will take care of that step

first we need to isolate and reduce the testcase




Comment 4


Santiago Gala





          2007-10-26 10:39:42 UTC
        

> first we need to isolate and reduce the testcase

as or "isolate and reduce", the funny thing is that the error is actually a test case failing, it looks difficult to miss it. Correct me if I'm wrong, but any test case failing should be reported "as is", this is precisely the purpose of test cases. :)





Comment 5


Jakub Moc (RETIRED)






          2007-10-26 18:21:49 UTC
        

*** Bug 197150 has been marked as a duplicate of this bug. ***




Comment 6


Luis Diaz





          2007-10-28 19:22:42 UTC
        

Full error details:

test multi-call ....................done
bulk test ok
../util/shlib_wrap.sh ./rc5test
ecb RC5 error encrypting (1)
got     :C4 BA 6A 9C 55 CA 10 F5
expected:21 A5 DB EE 15 4B 8F 6D
ecb RC5 error encrypting (2)
got     :F5 FC 76 70 78 AA 17 C2
expected:F7 C0 13 AC 5B 2B 89 52
ecb RC5 error encrypting (3)
got     :9C 56 00 58 45 16 E5 2B
expected:2F 42 B3 B7 03 69 FC 92
ecb RC5 error encrypting (4)
got     :7A 24 F4 F7 7E C0 06 F4
expected:65 C1 78 B2 84 D1 97 CC
ecb RC5 error encrypting (5)
got     :55 C9 F3 60 46 F1 93 07
expected:EB 44 E4 15 DA 31 98 24
cbc RC5 error encrypting (9)
got     :22 6E 5B 84 93 FD 9F 4B
expected:DC FE 09 85 77 EC A5 FF
cbc RC5 error encrypting (10)
got     :84 B7 40 4D F9 08 0A F5
expected:96 46 FB 77 63 8F 9C A8
cbc RC5 error encrypting (11)
got     :6A C8 4D E6 74 FE E2 FB
expected:B2 B3 20 9D B6 59 4D A4
cbc RC5 error encrypting (12)
got     :F9 6C 11 DB B9 59 A9 30
expected:54 5F 7F 32 A5 FC 38 36
cbc RC5 error encrypting (13)
got     :EE 9D 6E 4F BD 34 95 D1
expected:82 85 E7 C1 B5 BC 74 02
cbc RC5 error encrypting (14)
got     :41 56 E4 2C D7 DA 72 D2
expected:FC 58 6F 92 F7 08 09 34
cbc RC5 error encrypting (15)
got     :2E 2E 82 95 F3 40 8C 39
expected:CF 27 0E F9 71 7F F7 C4
cbc RC5 error encrypting (16)
got     :0E 8C B1 C4 23 C3 80 BC
expected:E4 93 F1 C1 BB 4D 6E 8C
cbc RC5 error encrypting (17)
got     :CE DF 86 18 F8 81 11 DD
expected:5C 4C 04 1E 0F 21 7A C3
cbc RC5 error encrypting (18)
got     :32 B8 7B B1 72 6E 4E FB
expected:92 1F 12 48 53 73 B4 F7
cbc RC5 error encrypting (19)
got     :D7 66 F7 87 A6 97 73 36
expected:5B A0 CA 6B BE 7F 5F AD
cbc RC5 error encrypting (20)
got     :8A 11 F9 C6 95 F5 9D 1C
expected:C5 33 77 1C D0 11 0E 63
cbc RC5 error encrypting (21)
got     :37 C1 07 46 74 4E 92 0F
expected:29 4D DB 46 B3 27 8D 60
cbc RC5 error encrypting (22)
got     :83 7D C1 78 18 C7 B2 5D
expected:DA D6 BD A9 DF E8 F7 E8
cbc RC5 error encrypting (23)
got     :13 AE 76 16 05 50 D6 0C
expected:97 E0 78 78 37 ED 31 7F
cbc RC5 error encrypting (24)
got     :91 74 10 E7 86 6A 44 E7
expected:78 75 DB F6 73 8C 64 78
cbc RC5 error encrypting (25)
got     :FE 1B 45 42 86 27 DF 37
expected:8F 34 C3 C6 81 C9 96 95
cbc RC5 error encrypting (26)
got     :42 F3 F3 9D 5E BD AA 5F
expected:7C B3 F1 DF 34 F9 48 11
cbc RC5 error encrypting (27)
got     :D6 92 D3 EA 75 61 C4 EE
expected:7F D1 A0 23 A5 BB A2 17
make[1]: *** [test_rc5] Error 30
make[1]: Leaving directory `/var/tmp/portage/dev-libs/openssl-0.9.8g/work/openssl-0.9.8g/test'
make: *** [tests] Error 2
 *
 * ERROR: dev-libs/openssl-0.9.8g failed.
 * Call stack:
 *               ebuild.sh, line 1695:  Called dyn_compile
 *               ebuild.sh, line 1033:  Called qa_call 'src_compile'
 *               ebuild.sh, line   44:  Called src_compile
 *   openssl-0.9.8g.ebuild, line  124:  Called src_test
 *   openssl-0.9.8g.ebuild, line  132:  Called die
 * The specific snippet of code:
 *      make test || die "make test failed"
 *  The die message:
 *   make test failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-libs/openssl-0.9.8g/temp/build.log'.
 *





Comment 7


Mike Doty (RETIRED)






          2007-11-07 18:54:18 UTC
        

amd64 emul chroots fail in the same way




Comment 8


SpanKY






          2008-06-21 04:54:39 UTC
        

assuming gcc-4.3 has the issue fixed




Comment 9


Ryan Hill (RETIRED)






          2008-06-25 02:53:20 UTC
        

it does.




Comment 10


Duncan





          2008-06-27 12:57:29 UTC
        

Confirmed by original filer as working now, too.

Thanks! =8^)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

