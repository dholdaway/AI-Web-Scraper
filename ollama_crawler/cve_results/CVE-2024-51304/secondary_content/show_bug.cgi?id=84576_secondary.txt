Title: 84576 – emerge --changelog fails to display the Changelog entries for ebuilds located in a PORTDIR_OVERLAY
URL: https://bugs.gentoo.org/show_bug.cgi?id=84576

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 84576
emerge --changelog fails to display the Changelog entries for ebuilds located in a PORTDIR_OVERLAY
Last modified: 2008-11-24 23:50:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 84576 
      - emerge --changelog fails to display the Changelog entries for ebuilds located in a PORTDIR_OVERLAY


Summary:
emerge --changelog fails to display the Changelog entries for ebuilds located...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-08 17:56 UTC by Christoph Budziszewski





      Modified:
    
2008-11-24 23:50 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



sascha-gentoo-bugzilla
soulse









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ChangeLog from Portage overlay

              (ChangeLog,368 bytes,
                text/plain)

            
2005-03-12 06:53 UTC,

            Sascha Silbe




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christoph Budziszewski





          2005-03-08 17:56:58 UTC
        

The ChangeLog is not displayed although the File exists.
It works with "normal" ebuilds.

Reproducible: Always
Steps to Reproduce:
1.emerge --changelog --verbose --pretend nvi
2.
3.

Actual Results:  
discofish root # emerge --changelog --verbose --pretend nvi

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild     U ] app-editors/nvi-1.81.5-r3 [1.81.5-r2] 0 kB [2]

Total size of downloads: 0 kB
Portage overlays:
 [1] /usr/local/portage
 [2] /usr/local/portage-local--main--1.0



Expected Results:  
discofish root # emerge --changelog --verbose --pretend nvi

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild     U ] app-editors/nvi-1.81.5-r3 [1.81.5-r2] 0 kB [2]

Total size of downloads: 0 kB
Portage overlays:
 [1] /usr/local/portage
 [2] /usr/local/portage-local--main--1.0

*nvi-1.81.5-r3 (05 Mar 2005)

  05 Mar 2005; Sascha Silbe <sascha-gentoo-portage@silbe.org>
  nvi-1.81.5-r3.ebuild:
  Use "alternatives" eclass to support installing vim and nvi in parallel.



discofish root # emerge info
Portage 2.0.51.19 (default-linux/x86/2004.0, gcc-3.3.4, glibc-2.3.4.20041102-r0,
2.6.10-infra-r2-discofish i686)
=================================================================
System uname: 2.6.10-infra-r2-discofish i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb  7 2005, 21:13:15)]
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.8.5-r3, 1.6.3, 1.7.9-r1, 1.4_p6, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=pentium4 -pipe  -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config
/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown
/usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref
/usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/alias
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -pipe  -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/
ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
MAKEOPTS="-j5 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/portage-local--main--1.0"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aalib alsa apache2 avi berkdb bitmap-fonts cdr crypt cups curl dvd
dvdr emboss encode f77 fam flac font-server foomaticdb fortran gd gdbm gif
gphoto2 gpm gtk2 imagemagick imlib ipv6 jpeg kde kdeenablefinal kerberos libcaca
libg++ libwww mad mikmod mmx mozilla mp3 mpeg mysql nas ncurses nls nogcj
oggvorbis opengl pam pda pdflib perl png python qt quicktime readline samba sdl
slang spell sqlite sse ssl tcltk tcpdtetex tiff truetype truetype-fonts
type1-fonts xface xinerama xml xml2 xmms xv zlib linguas_de"
Unset:  ASFLAGS, CBUILD, CTARGET, LDFLAGS




Comment 1


Marco Morales





          2005-03-12 01:51:41 UTC
        

Its invalid ... current version > next version, thats why you arent getting any text from changelog




Comment 2


Sascha Silbe





          2005-03-12 05:20:55 UTC
        

The currently installed version is app-editors/nvi-1.81.5-r3, it's going to get upgraded to app-editors/nvi-1.81.5-r2. 100% ordinary upgrade procedure. If it were a downgrade, it would also have been marked as such by the "emerge -p" output. The package was released after the changes so the ChangeLog format is correct, too. 




Comment 3


Marius Mauch (RETIRED)






          2005-03-12 06:46:50 UTC
        

broken Changelog?




Comment 4


Sascha Silbe





          2005-03-12 06:53:29 UTC
        

Created attachment 53258 [details]
ChangeLog from Portage overlay




Comment 5


Marco Morales





          2005-03-12 07:47:05 UTC
        

Sorry for my misunderstood....
I dont know much python but it seems it doesnt handle suffixes and revision numbers... is it actually trying to do it or isnt it a feature at all?





Comment 6


Pawel Madej aka Nysander





          2008-11-24 23:18:12 UTC
        

is this bug valid anymore? if not please close this bug




Comment 7


Zac Medico






          2008-11-24 23:47:57 UTC
        

(In reply to comment #4)
> Created an attachment (id=53258) [edit]
> ChangeLog from Portage overlay

It doesn't work because there's no ChangeLog entry for nvi-1.81.5-r2. There has to be entries for both the old version that's installed and the new one that will replace it. Also, your changelog is missing an asterisk (*) before "nvi-1.81.5-r3 (05 Mar 2005)". The asterisk is required. Bascally, you'd need two entries similar to these:

*nvi-1.81.5-r3 (05 Mar 2005)

  05 Mar 2005; Sascha Silbe <sascha-gentoo-portage@silbe.org> 
  nvi-1.81.5-r3.ebuild:
  Use "alternatives" eclass to support installing vim and nvi in parallel.

*nvi-1.81.5-r2 (04 Mar 2005)

  04 Mar 2005; Sascha Silbe <sascha-gentoo-portage@silbe.org> 
  nvi-1.81.5-r2.ebuild:
  Add older entry so emerge --changelog works.





Comment 8


Zac Medico






          2008-11-24 23:50:55 UTC
        

Please reopen if there's still a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

