Title: 150704 – spelling crashes gedit and evolution
URL: https://bugs.gentoo.org/show_bug.cgi?id=150704

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 150704
spelling crashes gedit and evolution
Last modified: 2007-07-09 16:03:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 150704 
      - spelling crashes gedit and evolution


Summary:
spelling crashes gedit and evolution
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-09 21:15 UTC by Alan Trick





      Modified:
    
2007-07-09 16:03 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



atrick
gentoo-bugs









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alan Trick





          2006-10-09 21:15:59 UTC
        

Symptoms
========

Evolution and gedit crash when you do anything related to spell checking. To triger in gedit go to menu: Tools: Set Language, then gedit crashes with the following output in the terminal:

*** glibc detected *** gedit: double free or corruption (out): 0x0827ec10 ***
======= Backtrace: =========
/lib/libc.so.6[0xb7e2c67f]
/lib/libc.so.6(__libc_free+0x8b)[0xb7e2d1ab]
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/libstdc++.so.6(_ZdlPv+0x21)[0xb2b9ced1]
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/libstdc++.so.6(_ZNSs4_Rep10_M_destroyERKSaIcE+0x1d)[0xb2b78ddd]
/usr/lib/libaspell.so.15(_ZN8aspeller9find_fileERN7acommon6StringERKS1_S4_S4_PKc+0x223)[0xb2c36283]
/usr/lib/libaspell.so.15(_ZN8aspeller8Language5setupEN7acommon10ParmStringEPNS1_6ConfigE+0x303)[0xb2c47be3]
/usr/lib/libaspell.so.15(_ZN8aspeller7DataSet14set_check_langEN7acommon10ParmStringEPNS1_6ConfigE+0x28b)[0xb2c1cb6b]
/usr/lib/libaspell.so.15(_ZN28aspeller_default_readonly_ws10ReadOnlyWS4loadEN7acommon10ParmStringEPNS1_6ConfigEPN8aspeller11SpellerImplEPKNS5_16LocalWordSetInfoE+0x52b)[0xb2c2cc1b]
/usr/lib/libaspell.so.15(_ZN8aspeller12add_data_setEN7acommon10ParmStringERNS0_6ConfigEPNS_11SpellerImplEPKNS_16LocalWordSetInfoES1_j+0xb3c)[0xb2c1dfcc]
/usr/lib/libaspell.so.15(_ZN8aspeller7MultiWS4loadEN7acommon10ParmStringEPNS1_6ConfigEPNS_11SpellerImplEPKNS_16LocalWordSetInfoE+0x58c)[0xb2c3750c]
/usr/lib/libaspell.so.15(_ZN8aspeller12add_data_setEN7acommon10ParmStringERNS0_6ConfigEPNS_11SpellerImplEPKNS_16LocalWordSetInfoES1_j+0xb3c)[0xb2c1dfcc]
/usr/lib/libaspell.so.15(_ZN8aspeller11SpellerImpl5setupEPN7acommon6ConfigE+0x402)[0xb2c26c62]
/usr/lib/libaspell.so.15(_ZN7acommon11new_spellerEPNS_6ConfigE+0xe7)[0xb2c00117]
/usr/lib/libaspell.so.15(new_aspell_speller+0x32)[0xb2bfb902]
/usr/lib/gedit-2/plugins/libspell.so(gedit_spell_checker_get_available_languages+0x84)[0xb2c89a74]
/usr/lib/gedit-2/plugins/libspell.so(gedit_spell_language_dialog_run+0x2c0)[0xb2c8d1a0]
/usr/lib/gedit-2/plugins/libspell.so[0xb2c87f5d]
/usr/lib/libgobject-2.0.so.0(g_cclosure_marshal_VOID__VOID+0x4b)[0xb6ffe43b]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x13b)[0xb6ff109b]
/usr/lib/libgobject-2.0.so.0[0xb7001519]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x899)[0xb70029d9]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x29)[0xb7002b89]
/usr/lib/libgtk-x11-2.0.so.0[0xb77886e3]
/usr/lib/libgtk-x11-2.0.so.0(gtk_action_activate+0x88)[0xb7789538]
/usr/lib/libgobject-2.0.so.0(g_cclosure_marshal_VOID__VOID+0x4b)[0xb6ffe43b]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x13b)[0xb6ff109b]
/usr/lib/libgobject-2.0.so.0[0xb7001519]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x899)[0xb70029d9]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x29)[0xb7002b89]
/usr/lib/libgtk-x11-2.0.so.0(gtk_widget_activate+0x92)[0xb797c562]
/usr/lib/libgtk-x11-2.0.so.0(gtk_menu_shell_activate_item+0x122)[0xb7874bc2]
/usr/lib/libgtk-x11-2.0.so.0[0xb78761d0]
/usr/lib/libgtk-x11-2.0.so.0[0xb786de25]
/usr/lib/libgtk-x11-2.0.so.0[0xb7867f72]
/usr/lib/libgobject-2.0.so.0[0xb6fef649]
/usr/lib/libgobject-2.0.so.0(g_closure_invoke+0x13b)[0xb6ff109b]
/usr/lib/libgobject-2.0.so.0[0xb7001b4d]
/usr/lib/libgobject-2.0.so.0(g_signal_emit_valist+0x678)[0xb70027b8]
/usr/lib/libgobject-2.0.so.0(g_signal_emit+0x29)[0xb7002b89]
/usr/lib/libgtk-x11-2.0.so.0[0xb79781e4]
/usr/lib/libgtk-x11-2.0.so.0(gtk_propagate_event+0x193)[0xb7861393]
/usr/lib/libgtk-x11-2.0.so.0(gtk_main_do_event+0x327)[0xb7862587]
/usr/lib/libgdk-x11-2.0.so.0[0xb76f89aa]
/usr/lib/libglib-2.0.so.0(g_main_context_dispatch+0x181)[0xb6f3d7c1]
/usr/lib/libglib-2.0.so.0[0xb6f4083f]
/usr/lib/libglib-2.0.so.0(g_main_loop_run+0x1b7)[0xb6f40bf7]
/usr/lib/libgtk-x11-2.0.so.0(gtk_main+0xc1)[0xb7862a01]
gedit(main+0x61e)[0x807171e]
/lib/libc.so.6(__libc_start_main+0xe2)[0xb7dde892]
gedit[0x80709f1]
======= Memory map: ========
08048000-08161000 r-xp 00000000 03:04 6464530    /usr/bin/gedit
08161000-0818b000 rw-p 00119000 03:04 6464530    /usr/bin/gedit
0818b000-083d9000 rw-p 0818b000 00:00 0          [heap]
b2900000-b2921000 rw-p b2900000 00:00 0 
b2921000-b2a00000 ---p b2921000 00:00 0 
b2a1e000-b2a7e000 rw-p b2a1e000 00:00 0 
b2a7e000-b2ade000 rw-s 00000000 00:08 3768334    /SYSV00000000 (deleted)

emerge --info
=============

Portage 2.1.1 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 Intel(R) Pentium(R) M processor 1.80GHz
Gentoo Base System version 1.12.5
Last Sync: Sun, 08 Oct 2006 19:30:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=pentium-m -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LC_ALL="en_CA.utf8"
LINGUAS="en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/portage-xgl /usr/portage/local/layman/gentopia /usr/portage/local/layman/ecatmur"
SYNC="rsync://rsync.gentoo.org/gentoo-portage/"
USE="x86 X aac aalib ace acpi alsa apache apache2 apm artworkextra avahi avi bash-completion bcmath berkdb bitmap-fonts bonjour bzip2 cairo cdb cdr cdrom cjk cli crypt cups curl daap dba dbus dlloader dri dvd dvdr dvdread dvi eds elibc_glibc emboss encode evolution examples fam firefox flac flash flatfile fortran ftp gcj gd gdbm gif gimpprint glitz gnome gphoto2 gpm gstreamer gtk gtk+ gtk2 guile hal imap imlib inifile input_devices_keyboard input_devices_mouse ipod ipv6 isdnlog jpeg keberos kerberos kernel_linux lcms ldap libclamav libg++ libnotify libsexy libwww linguas_en_US logitech-mouse mad mhash mikmod ming mp3 mpeg musicbrainz mysql nautilus ncurses network nls nodrm nptl nptlonly ogg opengl pam pam_console pcre pdf pdo-external pear pearl perl png pop posix postgres ppds pppd python quicktime rar readline real reflection samba sasl sdl session snmp sockets spell spl ssl startup-notification svg symlink tagwriting tcpd tetex tiff tokenizer truetype truetype-fonts udev unicode userland_GNU utf8 vcd vhosts video_cards_fglrx video_cards_vesa vorbis win32codecs wmf xml xorg xpm xscreensaver xsl xv zip zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS

Other Notes
===========

I've tried re-emerging gcc, glib, gtk, aspell, enchant, gnome-spell, gedit, evolution and several other things, but to nothings helped. I think it started when I upgraded to gnome 2.16. Also GnomeSword has a little 'StudyPad' thing that looks like Evolution's mail composer, and spelling works in there.




Comment 1


Gilles Dartiguelongue (RETIRED)






          2006-10-10 01:53:16 UTC
        

I had a bug that looked similar. When running evolution or tomboy note taking tool, some accentuated caracters were locking the app while typing. I had to get rid of some old gtkhtml lib that was left on the system. Maybe that'll help.




Comment 2


Alan Trick





          2006-10-10 11:22:20 UTC
        

I have gtkhtml-3.12.0 (it's the newest that's in portage). The bug's only triggered by spelling stuff, so as long as I keep auto spelling off, and make sure I don't have any languages set, I'm ok. Otherwise it dies.

I'd be happy to try anthing else to give you more info if you want.




Comment 3


Mart Raudsepp






          2006-10-31 17:28:09 UTC
        

I am unable to reproduce any of this (gedit, evolution, etc), with the reproduction information given here in any of the cases.
Maybe more precise reproduction steps would be useful. What language, what steps starting from launching the thing, etc...
PS: gedit is now at 2.16.2 but there are no relevant changes in code as far I can see.




Comment 4


Alan Trick





          2006-10-31 19:42:17 UTC
        

I reported the bug on the Gnome bugzilla as well. They blamed it on linking which is all voodoo to me. It doesn't matter which language, any use of the spell checker from these two applications kills it.

http://bugzilla.gnome.org/show_bug.cgi?id=364042

I haven't been able to repeat it on my brother's amd64 machine.




Comment 5


Leonardo Boshell (RETIRED)






          2006-11-15 12:11:58 UTC
        

Can you still reproduce it?
If so, what versions of gedit and aspell do you have installed?





Comment 6


Alan Trick





          2006-11-16 11:35:15 UTC
        

Yeah, I just checked gedit and it crashed. gedit is at version 2.16.2, `aspell -v` ouputs "@(#) International Ispell Version 3.1.20 (but really Aspell 0.50.5)"




Comment 7


Muelli





          2007-06-03 19:19:39 UTC
        

Can't reproduce it.

Opening gedit, hacking some text in, pressing Tools -> Setlanguage and selecting a language works like charme.

 $ aspell -v; gedit --version
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.4)
GNOME gedit 2.18.1





Comment 8


Gilles Dartiguelongue (RETIRED)






          2007-07-09 08:54:05 UTC
        

Alan, your trace could suggest that the bug is at the aspell level, would you mind updating it to 0.60 ?




Comment 9


Alan Trick





          2007-07-09 14:32:45 UTC
        

Oh, I should have updated my status with this. My HD died a while back and I reinstalled everything and I haven't noticed this bug since. Unless other people have trouble with it you might be best off marking it as invalid or something.




Comment 10


Mart Raudsepp






          2007-07-09 16:03:26 UTC
        

Alright, thanks for the update. Closing then









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

