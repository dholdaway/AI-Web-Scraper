Title: 142620 – emerge sandbox fails "C compiler cannot create executables"
URL: https://bugs.gentoo.org/show_bug.cgi?id=142620

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 142620
emerge sandbox fails "C compiler cannot create executables"
Last modified: 2006-09-18 12:59:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 142620 
      - emerge sandbox fails "C compiler cannot create executables"


Summary:
emerge sandbox fails "C compiler cannot create executables"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Sandbox

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Highest
       critical
      


Assignee:

Sandbox Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-03 01:02 UTC by Felix von Leitner





      Modified:
    
2006-09-18 12:59 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



comababyspeaks
fox2mike
jakub
lionel-dev
pacho









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




here is the config.log

              (config.log,7.34 KB,
                text/plain)

            
2006-08-03 02:12 UTC,

            Felix von Leitner




Details





config.log for lionel-dev

              (config.log,7.65 KB,
                application/octet-stream)

            
2006-09-03 08:26 UTC,

            Lionel Bouton




Details





config.log

              (config.log,7.27 KB,
                text/plain)

            
2006-09-04 01:50 UTC,

            GeekDog




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Felix von Leitner





          2006-08-03 01:02:22 UTC
        

# emerge sandbox
Calculating dependencies... done!

>>> Emerging (1 of 1) sys-apps/sandbox-1.2.18.1 to /
 * sandbox-1.2.18.1.tar.bz2 MD5 ;-) ...                                                                                           [ ok ]
 * sandbox-1.2.18.1.tar.bz2 RMD160 ;-) ...                                                                                        [ ok ]
 * sandbox-1.2.18.1.tar.bz2 SHA1 ;-) ...                                                                                          [ ok ]
 * sandbox-1.2.18.1.tar.bz2 SHA256 ;-) ...                                                                                        [ ok ]
 * sandbox-1.2.18.1.tar.bz2 size ;-) ...                                                                                          [ ok ]
 * checking ebuild checksums ;-) ...                                                                                              [ ok ]
 * checking auxfile checksums ;-) ...                                                                                             [ ok ]
 * checking miscfile checksums ;-) ...                                                                                            [ ok ]
 * checking sandbox-1.2.18.1.tar.bz2 ;-) ...                                                                                      [ ok ]
>>> Unpacking source...
>>> Unpacking sandbox-1.2.18.1.tar.bz2 to /var/tmp/portage/sandbox-1.2.18.1/work
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/sandbox-1.2.18.1/work/sandbox-1.2.18.1 ...
 * If configure fails with a 'cannot run C compiled programs' error, try this:
 * FEATURES=-sandbox emerge sandbox
 * Configuring sandbox for ABI=x86...
 * econf: updating sandbox-1.2.18.1/config.guess with /usr/share/gnuconfig/config.guess
 * econf: updating sandbox-1.2.18.1/config.sub with /usr/share/gnuconfig/config.sub
../sandbox-1.2.18.1//configure --prefix=/usr --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib32 --enable-multilib --build=i686-pc-linux-gnu
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details.

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/sandbox-1.2.18.1/work/build-x86-x86_64-pc-linux-gnu/config.log

!!! ERROR: sys-apps/sandbox-1.2.18.1 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  sandbox-1.2.18.1.ebuild, line 83:   Called econf '--libdir=/usr/lib32' '--enable-multilib'
  ebuild.sh, line 539:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.




# emerge --info
Portage 2.1.1_pre4-r2 (default-linux/amd64/2005.0, gcc-vanilla, glibc-2.4-r3, 2.6.17.7 x86_64)
=================================================================
System uname: 2.6.17.7 x86_64 unknown
Gentoo Base System version 1.12.2
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer notitles sandbox sfperms strict userpriv"
GENTOO_MIRRORS="http://pandemonium.tiscali.de/pub/gentoo/ http://distfiles.gentoo.org"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="amd64 X aac acpi alsa avi berkdb bitmap-fonts bzlib cdb cdr cli crypt cups dlloader dri dvb dvd dvdr eds emboss encode exif flac foomaticdb fortran ftp gif gmp gnome gpm gstreamer gtk gtk2 gtkhtml imlib ipv6 isdnlog jabber jpeg kde lzw lzw-tiff mad maildir mmap mozilla mp3 mpeg ncurses netboot nodrm nptl nptlonly offensive ogg oggvorbis opengl pam pcre pdflib png posix pppd qt qt3 qt4 quicktime readline reflection sdl session slang sockets speex spell spl ssl theora tiff truetype truetype-fonts type1-fonts usb xorg xpm xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2006-08-03 01:05:38 UTC
        

> * If configure fails with a 'cannot run C compiled programs' error, try this:
> * FEATURES=-sandbox emerge sandbox

Did you do it?





Comment 2


Felix von Leitner





          2006-08-03 02:12:34 UTC
        

Created attachment 93319 [details]
here is the config.log

-sandbox is default on my box.




Comment 3


Felix von Leitner





          2006-08-03 02:17:06 UTC
        

added info.




Comment 4


Jakub Moc (RETIRED)






          2006-08-03 02:33:42 UTC
        

(In reply to comment #2)
> -sandbox is default on my box.

Erm? You emerge --info begs to differ.  

> FEATURES="autoconfig distlocks metadata-transfer notitles sandbox sfperms strict > userpriv"




Comment 5


Felix von Leitner





          2006-08-03 06:47:22 UTC
        

I tried it both way, the --info was taken in the brief moment where I had switched it on.



Portage 2.1.1_pre4-r2 (default-linux/amd64/2005.0, gcc-4.1.1/amd64-vanilla, glibc-2.4-r3, 2.6.17.7 x86_64)
=================================================================
System uname: 2.6.17.7 x86_64 unknown
Gentoo Base System version 1.12.2
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer notitles sfperms strict userpriv"
GENTOO_MIRRORS="http://pandemonium.tiscali.de/pub/gentoo/ http://distfiles.gentoo.org"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="amd64 X aac acpi alsa avi berkdb bitmap-fonts bzlib cdb cdr cli crypt cups dlloader dri dvb dvd dvdr eds emboss encode exif flac foomaticdb fortran ftp gif gmp gnome gpm gstreamer gtk gtk2 gtkhtml imlib ipv6 isdnlog jabber jpeg kde lzw lzw-tiff mad maildir mmap mozilla mp3 mpeg ncurses netboot nodrm nptl nptlonly offensive ogg oggvorbis opengl pam pcre pdflib png posix pppd qt qt3 qt4 quicktime readline reflection sdl session slang sockets speex spell spl ssl theora tiff truetype truetype-fonts type1-fonts usb xorg xpm xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY



checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details.

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/sandbox-1.2.18.1/work/build-x86-x86_64-pc-linux-gnu/config.log

!!! ERROR: sys-apps/sandbox-1.2.18.1 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  sandbox-1.2.18.1.ebuild, line 83:   Called econf '--libdir=/usr/lib32' '--enable-multilib'
  ebuild.sh, line 539:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.






Comment 6


Raúl Casado





          2006-08-17 23:56:52 UTC
        

I am not sure this is a problem with sandbox. I am having the same problem with sys-libs/db-4.3.29-r2 package.

Emerge output:
 * Using: sun-jdk-1.5
>>> Unpacking source...
>>> Unpacking db-4.3.29.tar.gz to /var/tmp/portage/db-4.3.29-r2/work
 * Applying db-4.3-libtool.patch ...                                                                                                 [ ok ]
 * Applying db-4.3.27-fix-dep-link.patch ...                                                                                         [ ok ]
 * Applying db-4.3-jni-check-prefix-first.patch ...                                                                                  [ ok ]
 * Applying db-4.3-listen-to-java-options.patch ...                                                                                  [ ok ]
 * Using GNU config files from /usr/share/libtool
 *   Updating config.sub                                                                                                             [ ok ]
 *   Updating config.guess                                                                                                           [ ok ]
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/db-4.3.29-r2/work/db-4.3.29/build_unix ...
QA Notice: USE Flag 'userland_GNU' not in IUSE for sys-libs/db-4.3.29-r2
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking if building in the top-level or dist directories... no
checking if --disable-cryptography option specified... no
checking if --disable-hash option specified... no
checking if --disable-queue option specified... no
checking if --disable-replication option specified... no
checking if --disable-statistics option specified... no
checking if --disable-verify option specified... no
checking if --enable-compat185 option specified... yes
checking if --enable-cxx option specified... yes
checking if --enable-debug option specified... no
checking if --enable-debug_rop option specified... no
checking if --enable-debug_wop option specified... no
checking if --enable-diagnostic option specified... no
checking if --enable-dump185 option specified... no
checking if --enable-java option specified... yes
checking if --enable-mingw option specified... no
checking if --enable-o_direct option specified... no
checking if --enable-posixmutexes option specified... no
checking if --enable-rpc option specified... yes
checking if --enable-smallbuild option specified... no
checking if --enable-tcl option specified... no
checking if --enable-test option specified... no
checking if --enable-uimutexes option specified... no
checking if --enable-umrw option specified... no
checking if --with-mutex=MUTEX option specified... no
checking if --with-mutexalign=ALIGNMENT option specified... no
checking if --with-tcl=DIR option specified... no
checking if --with-uniquename=NAME option specified... no
checking for i686-pc-linux-gnu-ar... i686-pc-linux-gnu-ar
checking for i686-pc-linux-gnu-chmod... no
checking for chmod... chmod
checking for i686-pc-linux-gnu-cp... no
checking for cp... cp
checking for i686-pc-linux-gnu-ln... no
checking for ln... ln
checking for i686-pc-linux-gnu-mkdir... no
checking for mkdir... mkdir
checking for i686-pc-linux-gnu-ranlib... i686-pc-linux-gnu-ranlib
checking for i686-pc-linux-gnu-ranlib... /usr/bin/i686-pc-linux-gnu-ranlib
checking for i686-pc-linux-gnu-rm... no
checking for rm... rm
checking for i686-pc-linux-gnu-rpcgen... no
checking for rpcgen... rpcgen
checking for i686-pc-linux-gnu-sh... no
checking for sh... sh
checking for sh... /bin/sh
checking for i686-pc-linux-gnu-strip... i686-pc-linux-gnu-strip
checking for i686-pc-linux-gnu-strip... /usr/bin/i686-pc-linux-gnu-strip
checking for a BSD-compatible install... /bin/install -c
checking for i686-pc-linux-gnu-cc... i686-pc-linux-gnu-cc
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details.

!!! ERROR: sys-libs/db-4.3.29-r2 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  db-4.3.29-r2.ebuild, line 109:   Called die

!!! configure failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.5.0.08"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info

####################

# emerge --info
Portage 2.1.1_pre5-r2 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.4-r3, 2.6.17-gentoo-r5 i686)
=================================================================
System uname: 2.6.17-gentoo-r5 i686 Intel(R) Pentium(R) M processor 1.86GHz
Gentoo Base System version 1.12.4
Last Sync: Thu, 17 Aug 2006 17:50:01 +0000
ccache version 2.4 [enabled]
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -msse2 -msse -mmmx -mfpmath=sse -pipe -O3 -fweb -momit-leaf-frame-pointer -fomit-frame-pointer -ftracer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=pentium-m -msse2 -msse -mmmx -mfpmath=sse -pipe -O3 -fweb -momit-leaf-frame-pointer -fomit-frame-pointer -ftracer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://linuv.uv.es/mirror/gentoo/"
LANG="es_ES@euro"
LC_ALL="es_ES@euro"
LINGUAS="en en_GB es es_ES"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apache2 apm arts avi berkdb bitmap-fonts bluetooth cdparanoia cdr cdrom cli crypt cups dlloader dri dvd dvdr dvdread eds elibc_glibc emboss encode esd foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 hal imlib input_devices_keyboard input_devices_mouse input_devices_synaptics ipv6 irda isdnlog java jpeg kde kernel_linux libg++ libwww linguas_en linguas_en_GB linguas_es linguas_es_ES logrotate mad mikmod mmx mng motif mozsvg mp3 mpeg ncurses nls nptl nsplugin ogg opengl oss pam pcre pdflib perl png pppd python qt3 qt4 quicktime readline reflection samba sdl session spell spl sse sse2 ssl svg svgz tcpd threads tiff truetype truetype-fonts type1-fonts udev userland_GNU video_cards_ati video_cards_fglrx video_cards_radeon video_cards_vesa vorbis wmf xine xinerama xml xmms xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 7


Shyam Mani (RETIRED)






          2006-08-19 01:04:15 UTC
        

I'm seeing the same issue on x86 + db-4.3.29-r2.




Comment 8


Jakub Moc (RETIRED)






          2006-08-19 01:12:24 UTC
        

Everyone here, could you 

emerge -C eselect-compiler; emerge =gcc-config-1*

then run gcc-config and set your gcc just to be sure, then try again please.





Comment 9


Jakub Moc (RETIRED)






          2006-08-19 04:51:24 UTC
        

(In reply to comment #6)
> I am not sure this is a problem with sandbox. I am having the same problem with
> sys-libs/db-4.3.29-r2 package.

(In reply to comment #7)
> I'm seeing the same issue on x86 + db-4.3.29-r2.
> 

Folks, sys-libs/db is a different issue. Please, file a *new* bug and attach config.log and emerge --info there. 

Thanks.






Comment 10


Jakub Moc (RETIRED)






          2006-08-21 02:43:58 UTC
        

sys-libs/db has been moved to Bug 144614, please post your emerge --info and config.log there, you are already CCed.






Comment 11


Ramana Kumar





          2006-08-23 04:58:23 UTC
        

I'm also having this problem - any idea what's wrong? Could it be a multilib related problem? I'm on amd64 and it looks like the other people are too.




Comment 12


john





          2006-08-29 09:22:32 UTC
        

Im having the same problem with my amd64 box. This happenend after i upgrade to gcc 4.1 and removed the eselect-compiler and then tried to emerge eav system.

Portage 2.1.1_rc1-r1 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.4
Last Sync: Mon, 28 Aug 2006 21:50:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.3-r3
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://trumpetti.atm.tut.fi/gentoo/ ftp://trumpetti.atm.tut.fi/gentoo/ ftp://ftp.du.se/pub/os/gentoo http://ftp.linux.ee/pub/gentoo/distfiles/"
LANG="en_US.UTF-8"
LINGUAS=""
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X alsa avi berkdb bitmap-fonts cli crypt cups dlloader dri elibc_glibc emboss encode foomaticdb fortran gif gpm gstreamer gtk gtk2 imlib input_devices_keyboard input_devices_mouse ipv6 isdnlog jpeg kernel_linux lzw lzw-tiff mp3 mpeg ncurses nls nptl nptlonly opengl pam pcre pdflib perl png pppd python quicktime readline reflection sdl session spell spl ssl tcpd tiff truetype truetype-fonts type1-fonts usb userland_GNU video_cards_nv video_cards_nvidia video_cards_vesa vorbis xorg xpm xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 13


Lionel Bouton





          2006-09-03 08:23:03 UTC
        

Very same problem (although with sandbox 1.2.17 instead of 1.2.18-r1). Only happened on my AMD64 box, my 3 other (x86) boxes are currently either in the emerge -aev world or past sandbox in emerge -aev system.

The same error happens with any combination of sandbox/usersandbox in FEATURES (yep, tried the 4).

# emerge -v sandbox
Calculating dependencies... done!
>>> Emerging (1 of 1) sys-apps/sandbox-1.2.17 to /
>>> checking ebuild checksums ;-)
>>> checking auxfile checksums ;-)
>>> checking miscfile checksums ;-)
>>> checking sandbox-1.2.17.tar.bz2 ;-)
>>> Unpacking source...
>>> Unpacking sandbox-1.2.17.tar.bz2 to /var/tmp/portage/sandbox-1.2.17/work
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/sandbox-1.2.17/work/sandbox-1.2.17 ...
 * If configure fails with a 'cannot run C compiled programs' error, try this:
 * FEATURES=-sandbox emerge sandbox
 * Configuring sandbox for ABI=x86...
 * econf: updating sandbox-1.2.17/config.guess with /usr/share/gnuconfig/config.guess
 * econf: updating sandbox-1.2.17/config.sub with /usr/share/gnuconfig/config.sub
../sandbox-1.2.17//configure --prefix=/usr --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib32 --enable-multilib --build=i686-pc-linux-gnu
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i686-pc-linux-gnu-gcc... i686-pc-linux-gnu-gcc
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details.

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/sandbox-1.2.17/work/build-x86-x86_64-pc-linux-gnu/config.log

!!! ERROR: sys-apps/sandbox-1.2.17 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  sandbox-1.2.17.ebuild, line 84:   Called econf '--libdir=/usr/lib32' '--enable-multilib'
  ebuild.sh, line 541:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

emerge --info:

Portage 2.1-r2 (default-linux/amd64/2005.1, gcc-4.1.1, glibc-2.3.6-r4, 2.6.16-gentoo-r13 x86_64)
=================================================================
System uname: 2.6.16-gentoo-r13 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3800+
Gentoo Base System version 1.12.4
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/NX/etc /usr/NX/home /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://gentoo.mirror.solnet.ch"
LINGUAS="fr en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://quiet.gyver.int/gentoo-portage"
USE="amd64 X a52 aac aalib akode alsa arts asf audiofile avi bash-completion berkdb bindist bitmap-fonts bzip2 cairo cdparanoia cjk cli crypt cups dga dlloader dri dts dvb dvd dvdread eds emacs emboss encode esd exif ffmpeg flac foomaticdb gif gimpprint glibc-omitfp glut gphoto2 gstreamer gtk gtk2 hal ieee1394 imagemagick imlib isdnlog java jikes jpeg kde lcms ldap libcaca live lm_sensors logitech-mouse lzw lzw-tiff mad matroska mikmod mng mod mozdevelop mozsvg mp3 mp4 mpeg musepack ncurses nls nptl nptlonly nsplugin nvidia offensive ogg oggvorbis openal openexr opengl pam pcre pdf pdflib perl physfs png povray ppds pppd python quicktime rdesktop readline reflection rtc ruby samba sametime scanner sdl session shout slp sndfile speex spell spl ssl svg theora threads tidy tiff truetype truetype-fonts type1-fonts unicode usb vorbis x264 xcomposite xine xinerama xmms xorg xpm xprint xrandr xscreensaver xv xvid xvmc zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_fr linguas_en userland_GNU video_cards_nv video_cards_nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 14


Lionel Bouton





          2006-09-03 08:26:08 UTC
        

Created attachment 95840 [details]
config.log for lionel-dev




Comment 15


GeekDog





          2006-09-04 01:50:42 UTC
        

Created attachment 95927 [details]
config.log




Comment 16


GeekDog





          2006-09-04 01:52:15 UTC
        

Also happens for me on amd64 - maybe the scope of this bug should be changed from "All"? It happened while I was in the middle of rebuilding after upgrading gcc, which is quite a big problem!

# FEATURES=-sandbox emerge sandbox
Calculating dependencies... done!
>>> Emerging (1 of 1) sys-apps/sandbox-1.2.17 to /
>>> checking ebuild checksums ;-)
>>> checking auxfile checksums ;-)
>>> checking miscfile checksums ;-)
>>> checking sandbox-1.2.17.tar.bz2 ;-)
>>> Unpacking source...
>>> Unpacking sandbox-1.2.17.tar.bz2 to /var/tmp/portage/sandbox-1.2.17/work
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/sandbox-1.2.17/work/sandbox-1.2.17 ...
 * If configure fails with a 'cannot run C compiled programs' error, try this:
 * FEATURES=-sandbox emerge sandbox
 * Configuring sandbox for ABI=x86...
 * econf: updating sandbox-1.2.17/config.guess with /usr/share/gnuconfig/config.guess
 * econf: updating sandbox-1.2.17/config.sub with /usr/share/gnuconfig/config.sub
../sandbox-1.2.17//configure --prefix=/usr --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --libdir=/usr/lib32 --enable-multilib --build=i686-pc-linux-gnu
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for i686-pc-linux-gnu-gcc... no
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... configure: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details.

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/sandbox-1.2.17/work/build-x86-x86_64-pc-linux-gnu/config.log

!!! ERROR: sys-apps/sandbox-1.2.17 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  sandbox-1.2.17.ebuild, line 84:   Called econf '--libdir=/usr/lib32' '--enable-multilib'
  ebuild.sh, line 541:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

# emerge --info
Portage 2.1-r2 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r4 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r4 x86_64 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System version 1.12.4
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -fomit-frame-pointer -momit-leaf-frame-pointer -fno-ident -ffast-math"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe -fomit-frame-pointer -momit-leaf-frame-pointer -fno-ident -ffast-math"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.blueyonder.co.uk ftp://mirrors.blueyonder.co.uk/mirrors/gentoo http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/ ftp://ftp.mirrorservice.org/sites/www.ibiblio.org/gentoo/ "
LINGUAS="en_GB en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac alsa arts asf avi berkdb bitmap-fonts cdr cli crypt css divx4linux dlloader dri dvd dvdr eds emacs emboss encode fbcon ffmpeg fortran gif gpm gstreamer gtk2 hal imlib ipv6 isdnlog jpeg kde kdeenablefinal lm_sensors lzw lzw-tiff mad mp3 mpeg msn ncurses network nls nptl nptlonly nsplugin nvidia offensive ogg ogg-vorbis opengl pam pcre pdf pdflib perl png pppd python qt3 qt4 quicktime readline reflection samba sdl session spell spl ssl tcpd tetex theora tiff truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vcd video_cards_nvidia vorbis xmms xorg xpm xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_en_GB linguas_en userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 17


SpanKY






          2006-09-04 02:13:24 UTC
        

Felix: your multilib setup is broken; fix it

GeekDog: you have a screwed up glibc install, you should not have /usr/lib*/tls/; delete those files and make sure glibc-2.3.* is fully unmerged




Comment 18


Lionel Bouton





          2006-09-18 12:59:29 UTC
        

Just to make sure there is a trace somewhere of how I resolved my problem (in fact it probably is a bug, I'll let gentoo devs decide).

I had a cross compiler for x86 installed on my amd64 Gentoo (in order to have another x86-enabled distcc server). I just tried an emerge -e system again which errored on sandbox like the last try. This time I did:

emerge --unmerge cross-i686-pc-linux-gnu/gcc

and then emerge --resume which is now happily recompiling gcc as I type (sandbox compilation long gone successfully).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

