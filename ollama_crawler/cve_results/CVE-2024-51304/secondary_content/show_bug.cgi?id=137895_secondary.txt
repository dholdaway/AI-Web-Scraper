Title: 137895 – net-wireless/ndiswraper-1.17 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=137895

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137895
net-wireless/ndiswraper-1.17 fails to compile
Last modified: 2007-02-10 06:40:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137895 
      - net-wireless/ndiswraper-1.17 fails to compile


Summary:
net-wireless/ndiswraper-1.17 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mobile Herd (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-24 19:19 UTC by Vincent van de Camp





      Modified:
    
2007-02-10 06:40 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bg









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vincent van de Camp





          2006-06-24 19:19:59 UTC
        

What happens is:

  CC [M]  /var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.o
In file included from /var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:333,
                 from /var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:24:
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/winnt_types.h:125:2: #error "gcc 3.4 or newer should be used for compiling this module"
In file included from /var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:24:
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:689: error: syntax error before "LONG"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:690: error: syntax error before "LONG"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:691: error: syntax error before "struct"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:693: error: syntax error before "struct"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:695: error: syntax error before "struct"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:721: error: syntax error before "NTSTATUS"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:756: error: syntax error before "KIRQL"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:757: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:758: error: syntax error before "KIRQL"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:759: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:760: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:761: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:813: error: syntax error before "LONG"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/ntoskernel.h:814: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:122: error: syntax error before "KIRQL"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:132: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:140: error: syntax error before "KIRQL"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:147: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:154: error: syntax error before "void"
/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.c:166: error: syntax error before "void"
make[2]: *** [/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver/hal.o] Error 1
make[1]: *** [_module_/var/tmp/portage/ndiswrapper-1.17/work/ndiswrapper-1.17/driver] Error 2
make[1]: Leaving directory `/usr/src/linux-2.6.15-gentoo-r1'
make: *** [default] Error 2

!!! ERROR: net-wireless/ndiswrapper-1.17 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  ndiswrapper-1.17.ebuild, line 58:   Called linux-mod_src_compile
  linux-mod.eclass, line 515:   Called die

!!! Unable to make  KSRC=//usr/src/linux KVERS=2.6.15-gentoo-r1 DISABLE_USB=1 all.
!!! If you need support, post the topmost build error, and the call stack if relevant.



laptop vincentc # emerge --info
Portage 2.1-r1 (default-linux/x86/2006.0, gcc-3.3.6, glibc-2.3.6-r4, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Pentium III (Coppermine)
Gentoo Base System version 1.12.1
dev-lang/python:     2.3.5-r2, 2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=pentium3 -pipe -mmmx -fomit-frame-pointer -msse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-O3 -march=pentium3 -pipe -mmmx -fomit-frame-pointer -msse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm avi berkdb bidi bitmap-fonts cli crypt cups divx4linux dri eds emboss encode esd faad foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg libg++ libwww mad matroska mikmod mmx motif mp3 mpeg ncurses nls nptl nptlonly ogg opengl oss pam pcmcia pcre pdflib perl png pppd python quicktime readline reflection sdl session spell spl sse ssl stream streamout tcpd truetype truetype-fonts type1-fonts udev v4l vorbis win32codecs wmv wxwindows xinerama xml xmms xorg xscreensaver xv zlib elibc_glibc kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Petteri Räty (RETIRED)






          2006-06-25 09:25:18 UTC
        

#error "gcc 3.4 or newer should be used for compiling this module"

Well it seems I need to make the ebuild error out if and old compiler is used.




Comment 2


Vincent van de Camp





          2006-06-26 08:34:29 UTC
        

I found it... portage had just installed gcc 3.4.6-r1, so I was convinced that gcc was at the right level. However, a gcc --version I just did came back with 3.6.6. So the ndiswrapper isn't at fault here. I'll do some looking around why gcc wasn't updated. Thanks:)




Comment 3


Nick Devito





          2006-07-07 10:10:28 UTC
        

Check gcc-config, as it might have your compiler set to 3.3.6, even though 3.4.x is installed. 




Comment 4


Steev Klimaszewski (RETIRED)






          2007-02-10 06:40:30 UTC
        

Resolving as user reported that he found the issue









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

