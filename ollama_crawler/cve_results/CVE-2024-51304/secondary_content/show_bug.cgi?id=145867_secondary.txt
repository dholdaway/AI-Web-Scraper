Title: 145867 – gcc-4.1.1 emerge fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=145867

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145867
gcc-4.1.1 emerge fails
Last modified: 2007-10-07 04:30:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145867 
      - gcc-4.1.1 emerge fails


Summary:
gcc-4.1.1 emerge fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

145874

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-09-01 09:44 UTC by Etaoin Shrdlu





      Modified:
    
2007-10-07 04:30 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



benitezalejandrogm
mattsch
zioproto









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




output error and emerge --info output

              (failed_gcc-4.1.1_emerge.txt,7.51 KB,
                text/plain)

            
2006-09-01 15:51 UTC,

            Kristopher Baker




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Etaoin Shrdlu





          2006-09-01 09:44:06 UTC
        

stage1/xgcc -Bstage1/ -B/usr/i686-pc-linux-gnu/bin/ -c   -march=athlon-xp -mtune=athlon-xp -pipe -O2 -fprofile-generate -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Wmissing-format-attribute     -DHAVE_CONFIG_H -I. -Icp -I/var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/gcc -I/var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/gcc/cp -I/var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/gcc/../include -I/var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/gcc/../libcpp/include     /var/tmp/portage/gcc-4.1.1/work/gcc-4.1.1/gcc/cp/cp-gimplify.c -o cp/cp-gimplify.o
stage1/xgcc -Bstage1/ -B/usr/i686-pc-linux-gnu/bin/   -march=athlon-xp -mtune=athlon-xp -pipe -O2 -fprofile-generate -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Wmissing-format-attribute     -DHAVE_CONFIG_H  -o cc1plus-dummy \
      cp/cp-lang.o stub-objc.o cp/call.o cp/decl.o cp/expr.o cp/pt.o cp/typeck2.o cp/class.o cp/decl2.o cp/error.o cp/lex.o cp/parser.o cp/ptree.o cp/rtti.o cp/typeck.o cp/cvt.o cp/except.o cp/friend.o cp/init.o cp/method.o cp/search.o cp/semantics.o cp/tree.o cp/repo.o cp/dump.o cp/optimize.o cp/mangle.o cp/cp-objcp-common.o cp/name-lookup.o cp/cxx-pretty-print.o cp/cp-gimplify.o tree-mudflap.o attribs.o c-common.o c-format.o c-pragma.o c-semantics.o c-lex.o c-dump.o  c-pretty-print.o c-opts.o c-pch.o c-incpath.o cppdefault.o c-ppoutput.o c-cppbuiltin.o prefix.o c-gimplify.o tree-inline.o dummy-checksum.o main.o  libbackend.a ../libcpp/libcpp.a ../libcpp/libcpp.a   ../libiberty/libiberty.a
/usr/i686-pc-linux-gnu/bin/ld: libbackend.a(loop-invariant.o): bad reloc symbol index (0x804 >= 0x3c) for offset 0x1dfc in section `.text'
libbackend.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[2]: *** [cc1plus-dummy] Error 1
make[2]: Leaving directory `/var/tmp/portage/gcc-4.1.1/work/build/gcc'
make[1]: *** [stageprofile_build] Error 2
make[1]: Leaving directory `/var/tmp/portage/gcc-4.1.1/work/build/gcc'
make: *** [profiledbootstrap] Error 2

!!! ERROR: sys-devel/gcc-4.1.1 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  ebuild.sh, line 1248:   Called toolchain_src_compile
  toolchain.eclass, line 24:   Called gcc_src_compile
  toolchain.eclass, line 1528:   Called gcc_do_make
  toolchain.eclass, line 1402:   Called die

!!! emake failed with profiledbootstrap
!!! If you need support, post the topmost build error, and the call stack if relevant.
-----------
[Fri Sep 01 20:53:31 root@waldorf ~]# emerge -pv gcc

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  NS   ] sys-devel/gcc-4.1.1  USE="gtk nls -bootstrap -build -doc -fortran -gcj -hardened -ip28 -ip32r10k -mudflap -multislot -nocxx -objc -objc++ -objc-gc -test -vanilla" 0 kB

Total size of downloads: 0 kB
[Fri Sep 01 20:53:36 root@waldorf ~]# emerge --info
Portage 2.1-r2 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r4, 2.6.17-gentoo-r4 i686)
=================================================================
System uname: 2.6.17-gentoo-r4 i686 AMD Athlon(tm) XP 1500+
Gentoo Base System version 1.12.4
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -mtune=athlon-xp -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo            http://trumpetti.atm.tut.fi/gentoo      
http://ftp.heanet.ie/pub/gentoo http://darkstar.ist.utl.pt/gentoo               http://gd.tuwien.ac.at/opsys/linux/gentoo               http://gentoo.oregonstate.edu           http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LINGUAS="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X a52 aac acpi alsa apache2 arts audiofile avi berkdb bitmap-fonts bzip2 bzlib cdr curl dga divx4linux dri dvd dvdread encode ethereal exif expat fam ffmpeg flac font-server ftp gd gdbm gif gtk gtk2 hardenedphp iconv idn imagemagick imap imlib innodb ipv6 java javascript jikes jpeg kde kdeenablefinal kdexdeltas lm_sensors mad maildir matrox mbox mime mmap mmx mng motif mp3 mpeg msn musepack ncurses nls nocardbus nptl nptlonly nsplugin offensive ogg oggvorbis openal opengl pam pcre pdflib perl php png posix python qt quicktime rdesktop readline sdl sharedext sndfile soap sockets sox spell spl ssl sysvipc tcltk threads tiff tokenizer truetype truetype-fonts type1-fonts unicode usb usepackagedmakefiles vhosts vorbis wmf xine xml xml2 xpm xsl xv xvid yahoo zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_en_GB userland_GNU video_cards_mga video_cards_vga video_cards_vesa video_cards_fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-09-01 10:10:30 UTC
        

*** Bug 145874 has been marked as a duplicate of this bug. ***




Comment 2


Kristopher Baker





          2006-09-01 15:51:03 UTC
        

Created attachment 95690 [details]
output error and emerge --info output

running into the same issue ... attaching my output as a textfile to avoid clutter




Comment 3


Kristopher Baker





          2006-09-02 07:13:26 UTC
        

i did some further looking into it and it's not exactly the same




Comment 4


Kristopher Baker





          2006-09-03 19:27:49 UTC
        

i believe i have fixed it ... i appeared to have issues left over from a prev upgrade of gcc that i didn't get fixed

i upgraded to gcc-3.4.6 ran through the gcc upgrade instructions --> http://www.gentoo.org/doc/en/gcc-upgrading.xml

gcc-4.1.1 has now successfully compiled ... so i'm guessing the orig reporter has a slightly borked gcc or a library might be borked




Comment 5


Jakub Moc (RETIRED)






          2007-05-21 17:29:58 UTC
        

*** Bug 179336 has been marked as a duplicate of this bug. ***




Comment 6


Francesco Saverio Proto





          2007-05-25 12:18:08 UTC
        

I did a fresh install of Gentoo 2007.0 on amd64 that is shipping
sys-devel/gcc-4.1.1-r3

when I try to upgrade to gcc-4.1.2 I get this same bug.

all the other packages of the system did upgrade correctly.

here is my make.conf
CXXFLAGS="${CFLAGS}"
CHOST="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -fomit-frame-pointer -mno-tls-direct-seg-refs"
USE="gd xtended vhosts iproute2 avahi bonjour slang ctype pcre session unicode urandom curl geoip zlib sockets ftp simplexml pdf -extensions -imq -l7filter kerberos quotas php apache2 perl activefilter dhcp -ipv6 -mppe-mppc radius chroot bash-completion mysql -X java samba -gtk zip swat png tiff gif jpeg -opengl -alsa -firefox -kde dvdr encode mp3 vorbis -gnome new-login xml graphviz bzip2 xmlreader xmlrpc xmlwriter python -qt3 -qt4 -qt3support"







Comment 7


Francesco Saverio Proto





          2007-05-25 18:43:48 UTC
        

I'm sorry. I have no idea of what happened but today after a

emerge --sync
emerge -v --deep --update world

I upgraded a few packages (about 10) and this time the gcc upgrading worked (it was the last package to compile).

So probably my bug was a false positive.

Saverio Proto









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

