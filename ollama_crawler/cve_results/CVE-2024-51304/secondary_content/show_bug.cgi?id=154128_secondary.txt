Title: 154128 – mplayer-1.0_rc1: no OSD text
URL: https://bugs.gentoo.org/show_bug.cgi?id=154128

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 154128
mplayer-1.0_rc1: no OSD text
Last modified: 2007-08-15 06:53:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 154128 
      - mplayer-1.0_rc1: no OSD text


Summary:
mplayer-1.0_rc1: no OSD text
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-05 05:41 UTC by crusaderky





      Modified:
    
2007-08-15 06:53 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



beandog









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


crusaderky





          2006-11-05 05:41:56 UTC
        

With mplayer-1.0_rc1, I can't see the OSD fonts, i.e. those that say how much time has passed and is remaining. When pressing '0', I only see the left-to-right arrow. When pressing 'J', audio track changes but I get no visual feedback.

SSA subtitles, when I select ass=1 in ~/.mplayer/config (thus enabling SSA font rendering), work fine. In any other case, subtitles DON'T work.


When starting gmplayer, I get this:
New_Face failed. Maybe the font path is wrong.
Please supply the text font file (~/.mplayer/subfont.ttf).
subtitle font: load_sub_face failed.

Everything worked fine with the original ebuild for mplayer-1.0_rc1 (that with the subtitles USE flag).




Comment 1


Steve Dibb (RETIRED)






          2006-11-06 06:39:21 UTC
        

(In reply to comment #0)
> With mplayer-1.0_rc1, I can't see the OSD fonts, i.e. those that say how much
> time has passed and is remaining. When pressing '0', I only see the
> left-to-right arrow. When pressing 'J', audio track changes but I get no visual
> feedback.
> 
> SSA subtitles, when I select ass=1 in ~/.mplayer/config (thus enabling SSA font
> rendering), work fine. In any other case, subtitles DON'T work.
> 
> 
> When starting gmplayer, I get this:
> New_Face failed. Maybe the font path is wrong.
> Please supply the text font file (~/.mplayer/subfont.ttf).
> subtitle font: load_sub_face failed.
> 
> Everything worked fine with the original ebuild for mplayer-1.0_rc1 (that with
> the subtitles USE flag).
> 

Well, all the subtitles flag does (which may or may not get added back in) is check to make sure that you have "iconv" and "freetype" USE flags added.  If you do, then subtitle support will turn on automatically.

If you still have problems with fonts, try setting one manually in ~/.mplayer/config

font=/usr/share/fonts/foo.ttf




Comment 2


crusaderky





          2006-11-06 08:41:14 UTC
        

There is no "freetype" USE flag in mplayer 1.0-rc1. iconv is already set.

media-video/mplayer-1.0_rc1  USE="3dnow 3dnowext X aac alsa amr bl cdparanoia dga dts dvb dvd dvdread enca encode fbcon ggi gif gtk iconv ipv6 jpeg libcaca live lzo mad mmx mmxext musepack opengl png real rtc samba sdl speex sse tga theora truetype unicode v4l v4l2 vorbis win32codecs xanim xv xvid xvmc -3dfx -aalib (-altivec) -arts -bidi -bindist -cpudetection -custom-cflags -debug -directfb -doc -dv -esd -jack -joystick -lirc -livecd -matrox -nas -openal -oss -sse2 -svga -x264 -xinerama" LINGUAS="-bg -cs -da -de -el -en -es -fr -hu -ja -ko -mk -nl -no -pl -pt_BR -ro -ru -sk -tr -uk -zh_CN -zh_TW"



>If you still have problems with fonts, try setting one manually in
>~/.mplayer/config
>font=/usr/share/fonts/foo.ttf
Yes, this workaround works. However, font size is gigantic.

workaround:
font='Bitstream Vera Sans'
fontconfig=1
subfont-osd-scale=4
subfont-text-scale=3





Comment 3


Steve Dibb (RETIRED)






          2006-11-06 09:00:30 UTC
        

(In reply to comment #2)
> There is no "freetype" USE flag in mplayer 1.0-rc1. iconv is already set.

truetype.  whatever. :B

> >If you still have problems with fonts, try setting one manually in
> >~/.mplayer/config
> >font=/usr/share/fonts/foo.ttf
> Yes, this workaround works. However, font size is gigantic.
> 
> workaround:
> font='Bitstream Vera Sans'
> fontconfig=1
> subfont-osd-scale=4
> subfont-text-scale=3
> 

Dunno, ask mplayer-users list.  *shrug*





Comment 4


crusaderky





          2006-11-06 09:21:59 UTC
        

>font='Bitstream Vera Sans'
>fontconfig=1

the above is redundant. Either just

fontconfig=1

or

font=/usr/share/fonts/ttf-bitstream-vera/Vera.ttf

is enough to make subtitles work (gigantic, but working :P )




Comment 5


Jason Lynch





          2006-11-06 09:44:13 UTC
        

The most recent ebuild chooses not to install the regular set of fonts if the truetype USE flag is set. This prevents non-fontconfig subtitles from working, as simply enabling truetype/fontconfig support in mplayer doesn't force it on, and the regular fonts are still required by default.

I can confirm that unconditionally installing the fonts in the ebuild allows the OSD to work whether or not fontconfig=1 (or -fontconfig on the command line) is specified.




Comment 6


Reimar Döffinger





          2006-11-09 03:08:57 UTC
        

The bitmap fonts have their problems though, are no longer fully supported and will no longer work right for non-ascii, see http://bugzilla.mplayerhq.hu/show_bug.cgi?id=199
Installing/linking (or referencing in the config) a suitable ttf font, preferably one that includes at least most unicode characters would be preferable (can someone recommend one? Vera seems to contain very few).




Comment 7


crusaderky





          2006-11-09 03:28:55 UTC
        

(In reply to comment #6)
> The bitmap fonts have their problems though, are no longer fully supported and
> will no longer work right for non-ascii, see
> http://bugzilla.mplayerhq.hu/show_bug.cgi?id=199
> Installing/linking (or referencing in the config) a suitable ttf font,
> preferably one that includes at least most unicode characters would be
> preferable (can someone recommend one? Vera seems to contain very few).
> 

I think that the best solution is to require fontconfig. This way, if a font doesn't support some characters, you can fall back on other ones (i.e. I can perfectly visualize japanese kanji, even if Vera doesn't support them).




Comment 8


Steve Dibb (RETIRED)






          2007-03-23 14:54:55 UTC
        

I can agree with comment #5 that the fonts should be installed no matter what, however it still leaves the case of which one will mplayer fall back on?  I'm not sure if I'll have to symlink to a font in /usr/share/mplayer or not.  I'll have to look that one up.

As far as comment #7, the use flags should be fixed now so that if truetype is enabled, fontconfig is pulled in and it's support is added to the default mplayer.conf.  I would prefer to have it be an option instead of a hard dependency.




Comment 9


Steve Dibb (RETIRED)






          2007-08-15 06:53:19 UTC
        

pretty much cleaned up best it can, closing as WORKSFORME









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

