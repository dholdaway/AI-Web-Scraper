Title: 168903 – www-client/mozilla-firefox-2.0.0.2 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=168903

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 168903
www-client/mozilla-firefox-2.0.0.2 fails to compile
Last modified: 2007-03-02 09:30:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 168903 
      - www-client/mozilla-firefox-2.0.0.2 fails to compile


Summary:
www-client/mozilla-firefox-2.0.0.2 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-03-01 16:38 UTC by Vesa Tervo





      Modified:
    
2007-03-02 09:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vesa Tervo





          2007-03-01 16:38:45 UTC
        

2.0.0.2 compiles fine on my Intel based computers (p3 and p4)
but fails on my AMD Sempron:

nsProperties.cpp
i686-pc-linux-gnu-g++ -o nsProperties.o -c -fvisibility=hidden -DMOZILLA_INTERNAL_API -DOSTYPE=\"Linux2.6\" -DOSARCH=\"Linux\" -DBUILD_ID=0000000000 -D_IMPL_NS_COM  -I../../dist/include/string -I../../dist/include/xpcom -I../../dist/include -I/usr/include/nspr       -fPIC  -DGENTOO_NSPLUGINS_DIR=\"/usr/lib/nsplugins\" -DGENTOO_NSBROWSER_PLUGINS_DIR=\"/usr/lib/nsbrowser/plugins\"  -fno-rtti -fno-handle-exceptions  -Wconversion -Wpointer-arith -Wcast-align -Woverloaded-virtual -Wsynth -Wno-ctor-dtor-privacy -Wno-non-virtual-dtor -Wno-long-long -march=athlon-xp -pipe -Wno-return-type -w -fshort-wchar -pthread -pipe  -DNDEBUG -DTRIMMED -ffunction-sections -O2  -DGENTOO_NSPLUGINS_DIR=\"/usr/lib/nsplugins\" -DGENTOO_NSBROWSER_PLUGINS_DIR=\"/usr/lib/nsbrowser/plugins\"  -DMOZILLA_CLIENT -include ../../mozilla-config.h -Wp,-MD,.deps/nsProperties.pp nsProperties.cpp
nsProperties.cpp: In member function 'virtual nsresult nsProperties::Internal::QueryInterface(const nsIID&, void**)':
nsProperties.cpp:44: error: '__offsetof__' was not declared in this scope
nsProperties.cpp: In member function 'virtual nsrefcnt nsProperties::Internal::AddRef()':
nsProperties.cpp:44: error: '__offsetof__' was not declared in this scope
nsProperties.cpp: In member function 'virtual nsrefcnt nsProperties::Internal::Release()':
nsProperties.cpp:44: error: '__offsetof__' was not declared in this scope
gmake[3]: *** [nsProperties.o] Error 1
gmake[3]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.2/work/mozilla/xpcom/ds'
gmake[2]: *** [libs] Error 2
gmake[2]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.2/work/mozilla/xpcom'
gmake[1]: *** [tier_2] Error 2
gmake[1]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.2/work/mozilla'
make: *** [default] Error 2

!!! ERROR: www-client/mozilla-firefox-2.0.0.2 failed.
Call stack:
  ebuild.sh, line 1614:   Called dyn_compile
  ebuild.sh, line 971:   Called qa_call 'src_compile'
  environment, line 4043:   Called src_compile
  mozilla-firefox-2.0.0.2.ebuild, line 186:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/www-client/mozilla-firefox-2.0.0.2/temp/build.log'.


emerge --info
Portage 2.1.2-r9 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.5-r0, 2.6.19-gentoo-r6 i686)
=================================================================
System uname: 2.6.19-gentoo-r6 i686 AMD Sempron(tm)   2400+
Gentoo Base System release 1.12.9
Timestamp of tree: Thu, 01 Mar 2007 03:00:09 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.3.5-r3, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O3 -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://trumpetti.atm.tut.fi/gentoo/"
LANG="en_US"
LINGUAS="en fi en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 alsa apache2 apm arts avi berkdb bitmap-fonts cdr cgi cli cracklib crypt css cups divx4linux dri dv dvdr dvdread eds emboss encode esd fam fame firefox foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 iconv imlib ipv6 isdnlog jpeg kde libg++ libwww mad midi mikmod mmx mmxext motif mp3 mpeg ncurses nls no-htdocs nptl nptlonly offensive ogg opengl oss pam pcre pdf perl php png pppd python qt qt3 qt3support qt4 qtk quicktime readline recode reflection samba sdl server session smtp sockets spell spl sse ssl subtitles svg tcltk tcpd truetype truetype-fonts type1-fonts vorbis x86 xml xorg xv xvid zlib" ALSA_CARDS="via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="kbd keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en fi en_GB" USERLAND="GNU" VIDEO_CARDS="via vga s3 fbdev vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Raúl Porcel (RETIRED)






          2007-03-01 18:44:03 UTC
        

Try using -O2 instead of -O3.
And try if you can build 2.0.0.1.




Comment 2


Vesa Tervo





          2007-03-01 19:10:18 UTC
        

using -O2 fails the same way,
I am trying to re-emerge 2.0.0.1. right now.





Comment 3


Vesa Tervo





          2007-03-01 19:48:13 UTC
        

2.0.0.1 fails now also, even though it emerged fine before,
so the problem is not with the 2.0.0.2 - I think this bug can be deleted
and I just have to debug further...




Comment 4


Raúl Porcel (RETIRED)






          2007-03-02 09:30:25 UTC
        

Closing then :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

