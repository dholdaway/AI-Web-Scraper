Title: 708612 – sys-apps/busybox-1.31.1-r2 fails to compile on WSL : sleep: cannot read realtime clock: Invalid argument
URL: https://bugs.gentoo.org/show_bug.cgi?id=708612

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 708612
sys-apps/busybox-1.31.1-r2 fails to compile on WSL : sleep: cannot read realtime clock: Invalid argument
Last modified: 2020-02-07 13:57:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 708612 
      - sys-apps/busybox-1.31.1-r2 fails to compile on WSL : sleep: cannot read realtime clock: Invalid argument


Summary:
sys-apps/busybox-1.31.1-r2 fails to compile on WSL : sleep: cannot read realt...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Embedded Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-02-07 13:17 UTC by Mike Lothian





      Modified:
    
2020-02-07 13:57 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,1.98 KB,
                text/plain)

            
2020-02-07 13:17 UTC,

            Mike Lothian




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mike Lothian





          2020-02-07 13:17:35 UTC
        

Just noticed this on my WSL (Windows Subsystem for Linux)

>>> Jobs: 0 of 1 complete, 1 failed                 Load avg: 0.52, 0.58, 0.59
 * Package:    sys-apps/busybox-1.31.1-r2
 * Repository: gentoo
 * Maintainer: embedded@gentoo.org
 * USE:        abi_x86_64 amd64 elibc_glibc ipv6 kernel_linux static systemd userland_GNU
 * FEATURES:   preserve-libs sandbox userpriv usersandbox
>>> Unpacking source...
>>> Unpacking busybox-1.31.1.tar.bz2 to /var/tmp/portage/sys-apps/busybox-1.31.1-r2/work
>>> Source unpacked in /var/tmp/portage/sys-apps/busybox-1.31.1-r2/work
>>> Preparing source in /var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1 ...
 * Applying busybox-1.26.2-bb.patch ...
patching file shell/ash.c
Hunk #1 succeeded at 154 with fuzz 2 (offset 10 lines).
Hunk #2 succeeded at 8095 (offset 521 lines).
patching file shell/hush.c
Hunk #1 succeeded at 318 with fuzz 2 (offset 97 lines).
Hunk #2 succeeded at 7215 (offset 1140 lines).
Hunk #3 succeeded at 8405 (offset 1470 lines).
 [ ok ]
 * Applying busybox-1.31.1-glibc-2.31.patch ...
 [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1 ...
 * Could not locate user configfile, so we will save a default one
make -j4 -j1 -s allyesconfig
sleep: cannot read realtime clock: Invalid argument
make[1]: *** [/var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1/scripts/kconfig/Makefile:70: allyesconfig] Error 1
make: *** [Makefile:444: allyesconfig] Error 2
 * ERROR: sys-apps/busybox-1.31.1-r2::gentoo failed (configure phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=sys-apps/busybox-1.31.1-r2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=sys-apps/busybox-1.31.1-r2::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1'
 * S: '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1'

 * Messages for package sys-apps/busybox-1.31.1-r2:

 * Could not locate user configfile, so we will save a default one
 * ERROR: sys-apps/busybox-1.31.1-r2::gentoo failed (configure phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=sys-apps/busybox-1.31.1-r2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=sys-apps/busybox-1.31.1-r2::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1'
 * S: '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/work/busybox-1.31.1'
 *
 * The following package has failed to build, install, or execute postinst:
 *
 *  (sys-apps/busybox-1.31.1-r2:0/0::gentoo, ebuild scheduled for merge), Log file:
 *   '/var/tmp/portage/sys-apps/busybox-1.31.1-r2/temp/build.log'

Reproducible: Always




Comment 1


Mike Lothian





          2020-02-07 13:17:53 UTC
        

Created attachment 612406 [details]
build.log




Comment 2


Mike Lothian





          2020-02-07 13:18:37 UTC
        

Portage 2.3.87 (python 3.7.6-final-0, default/linux/amd64/17.1/no-multilib, gcc-9.2.0, glibc-2.31, 4.4.0-18362-Microsoft x86_64)
=================================================================
System uname: Linux-4.4.0-18362-Microsoft-x86_64-Intel-R-_Core-TM-_i5-7300U_CPU_@_2.60GHz-with-gentoo-2.6
KiB Mem:     8312092 total,    988084 free
KiB Swap:   25165824 total,  23756936 free
Head commit of repository gentoo: 65728389a639f3ac5e6cae546d0d951afc9f0fa1

Head commit of repository FireBurn: d01f292a89d390f775ebe4604dd552c3abb2f75a

Head commit of repository gamerlay: 62c6384f2ff8b35f76b0ba7865241f7704431bb6

Head commit of repository kde: 1dbc6e523e015d29938699d245bf02886020c1e1

Timestamp of repository steam-overlay: Sun, 26 Jan 2020 23:17:33 +0000
Head commit of repository steam-overlay: 09937bfa194c56751cd66c1b9ab78623226e4192

Timestamp of repository x11: Sun, 26 Jan 2020 23:17:38 +0000
Head commit of repository x11: 8c1c83a77daf7f2921aa33dccc4090448ca22e46

sh bash 5.0_p11
ld GNU gold (Gentoo 2.34 p1 2.34.0) 1.16
app-shells/bash:          5.0_p11::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.30.1::gentoo
dev-lang/python:          2.7.17-r1::gentoo, 3.7.6::gentoo, 3.8.1::gentoo
dev-util/cmake:           3.16.4::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/sandbox:         2.18::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.16.1-r2::gentoo
sys-devel/binutils:       2.34::gentoo
sys-devel/gcc:            9.2.0-r3::gentoo
sys-devel/gcc-config:     2.2.1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.5::gentoo (virtual/os-headers)
sys-libs/glibc:           2.31::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo/gentoo
    priority: -1000

FireBurn
    location: /home/fireburn/Overlay
    sync-type: git
    sync-uri: https://github.com/FireBurn/Overlay
    sync-user: fireburn:users
    masters: gentoo

gamerlay
    location: /var/db/repos/gamerlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gamerlay.git
    masters: gentoo

kde
    location: /var/db/repos/kde
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/kde.git
    masters: gentoo

steam-overlay
    location: /var/db/repos/steam-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/steam-overlay.git
    masters: gentoo

x11
    location: /var/db/repos/x11
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/x11.git
    masters: gentoo

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=native -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.6/conf"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O3 -march=native -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--autounmask-write --with-bdeps y --complete-graph y"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed"
LINGUAS="en_GB en"
MAKEOPTS="-j4"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac acl acpi activities alsa amd64 apng berkdb bluetooth branding brightness-control bzip2 cairo cdda cdr cli connection-sharing crypt cups custom-cflags cxx dav1d dbus declarative default-gold dri dri3 drm dts egl emboss encode exif fam ffmpeg flac fortran gbm gdbm gentoo-vm gif glamor gold googledrive gpm graphite gstreamer gtk harfbuzz http2 iconv icu ipv6 ithreads javafx jce jpeg kipi kwallet lcms ldap legacy-systray libkms libnotify libtirpc lm-sensors lzma lzo mad mng mp3 mp4 mpeg mpris mpx ncurses networkmanager nls nptl nsplugin ogg openal opengl openmp openssl opus pam pango pba pcre pdf pdfimport phonon plasma png policykit postproc ppds pulseaudio qml readline seccomp spell split-usr ssl startup-notification svg sync-plugin-portage systemd tcpd theora threads thumbnail tiff touchpad truetype udev udisks unicode upower usb user-session v4l vorbis vpx wayland webp widgets wifi wxwidgets x264 xattr xcb xcomposite xml xv xvid zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias access_compat" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev synaptics libinput" KERNEL="linux" L10N="en-GB en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LLVM_TARGETS="X86" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-2" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_7" PYTHON_TARGETS="python3_7" RUBY_TARGETS="ruby25" USERLAND="GNU" VIDEO_CARDS="modesetting virgl" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Mike Lothian





          2020-02-07 13:20:11 UTC
        

This could possibly be related to sys-apps/coreutils-8.31-r1




Comment 4


Mike Lothian





          2020-02-07 13:24:09 UTC
        

Nope this is probably related to glibc-2.31

I'll investigate further




Comment 5


Mike Lothian





          2020-02-07 13:57:31 UTC
        

So recompiling sys-apps/coreutils-8.31-r1 fixed the issue for me - weird









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

