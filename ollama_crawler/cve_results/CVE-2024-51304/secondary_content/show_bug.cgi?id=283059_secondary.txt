Title: 283059 – dev-lang/python-2.6.2-r1 on ARM: Error: selected processor does not support ...
URL: https://bugs.gentoo.org/show_bug.cgi?id=283059

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 283059
dev-lang/python-2.6.2-r1 on ARM: Error: selected processor does not support ...
Last modified: 2009-11-27 13:55:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 283059 
      - dev-lang/python-2.6.2-r1 on ARM: Error: selected processor does not support ...


Summary:
dev-lang/python-2.6.2-r1 on ARM: Error: selected processor does not support ...
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-08-28 19:07 UTC by Jacob Godserv





      Modified:
    
2009-11-27 13:55 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



arm
dlan
jacobgalbreath









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (python-2.6-build.log,147.61 KB,
                text/plain)

            
2009-08-28 19:07 UTC,

            Jacob Godserv




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jacob Godserv





          2009-08-28 19:07:32 UTC
        

When building python-2.6.1-r1 on an armv7a processor, I get these error messages:

/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S: Assembler messages:
/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S:203: Error: selected processor does not support `stfeqs f0,[r2]'
/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S:208: Error: selected processor does not support `stfeqd f0,[r2]'
/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S:283: Error: selected processor does not support `ldfs f0,[sp]'
/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S:286: Error: selected processor does not support `ldfd f0,[sp]'
/var/tmp/portage/dev-lang/python-2.6.2-r1/work/Python-2.6.2/Modules/_ctypes/libffi/src/arm/sysv.S:289: Error: selected processor does not support `ldfd f0,[sp]'

Full build.log will be attached shortly.

Reproducible: Always

Steps to Reproduce:




 # emerge --info
Portage 2.1.6.13 (default/linux/arm/2008.0, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.30-rc8-omap1-beagle-05719-g151c7a7 armv7l)
=================================================================
System uname: Linux-2.6.30-rc8-omap1-beagle-05719-g151c7a7-armv7l-ARMv7_Processor_rev_2_-v7l-with-glibc2.4
Timestamp of tree: Fri, 28 Aug 2009 18:00:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-lang/python:     2.5.4-r2
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.63-r1
sys-devel/automake:  1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="arm"
CBUILD="armv7a-softfloat-linux-gnueabi"
CFLAGS="-march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -fomit-frame-pointer -Os -pipe"
CHOST="armv7a-softfloat-linux-gnueabi"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -fomit-frame-pointer -Os -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--buildpkg"
FEATURES="ccache collision-protect distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl arm berkdb bzip2 cli cracklib crypt cups fortran gdbm gpm iconv ipv6 isdnlog mudflap ncurses nls nptl nptlonly openmp pam pcre perl pppd python readline reflection session spl ssl sysfs tcpd unicode xorg zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse touchscreen" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="fbdev"
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jacob Godserv





          2009-08-28 19:07:49 UTC
        

Created attachment 202540 [details]
build.log




Comment 2


Raúl Porcel (RETIRED)






          2009-08-28 19:16:39 UTC
        

@python: can't we disable ctypes build?




Comment 3


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2009-08-28 19:40:55 UTC
        

(In reply to comment #2)
> @python: can't we disable ctypes build?

Maybe using system version of dev-libs/libffi would help...




Comment 4


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2009-10-07 14:41:24 UTC
        

Can you reproduce this bug with dev-lang/python-2.6.3?




Comment 5


Jacob Godserv





          2009-11-27 03:35:06 UTC
        

CC'ing another developer in our project Neuvoo, since he will likely have more time to test this than me.




Comment 6


Jacob Galbreath





          2009-11-27 13:49:54 UTC
        

Natively compiled python-2.6.4 successfully on nevuoo-0.2.1_rc2-minimal.  Slightly newer toolchain, same CFLAGS and USE flags.




Comment 7


Jacob Godserv





          2009-11-27 13:53:51 UTC
        

I'm closing the bug, then, since it seems like it was fixed after 2.6.3. Let us know if you need more information.




Comment 8


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2009-11-27 13:55:32 UTC
        

(In reply to comment #7)

It was rather fixed in external libffi.
2.6.2-r1 ebuild was using internal copy of libffi-3.0.5.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

