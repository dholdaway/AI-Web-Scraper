Title: 116356 – mjpegtools-1.8.0-r1 doesn't set CFLAGS correctly
URL: https://bugs.gentoo.org/show_bug.cgi?id=116356

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 116356
mjpegtools-1.8.0-r1 doesn't set CFLAGS correctly
Last modified: 2005-12-22 00:56:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 116356 
      - mjpegtools-1.8.0-r1 doesn't set CFLAGS correctly


Summary:
mjpegtools-1.8.0-r1 doesn't set CFLAGS correctly
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-21 23:56 UTC by Sebastian





      Modified:
    
2005-12-22 00:56 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sebastian





          2005-12-21 23:56:51 UTC
        

Hi!

I updated to mjpegtools-1.8.0-r1 today. The merge went fine, but the CFLAGS are off. I get warnings (`-mcpu=' is deprecated. Use `-mtune=' or '-march=' instead.') even though I don't use 'mcpu'. Maybe the mjpegtools Makefile has changed?

 i586-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../.. -I../.. -I../../utils -march=i586 -mcpu=i586 -Os -march=i586 -m3dnow -mmmx -pipe -fomit-frame-pointer -mno-sse2 -pthread -Wall -Wunused -MT build_sub22_mests.lo -MD -MP -MF .deps/build_sub22_mests.Tpo -c build_sub22_mests.c  -fPIC -DPIC -o .libs/build_sub22_mests.o
`-mcpu=' is deprecated. Use `-mtune=' or '-march=' instead.

emerge info
Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.14.4 i686)
=================================================================
System uname: 2.6.14.4 i686
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i586-pc-linux-gnu"
CFLAGS="-Os -march=i586 -m3dnow -mmmx -pipe -fomit-frame-pointer"
CHOST="i586-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -march=i586 -m3dnow -mmmx -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://sunsite.rwth-aachen.de/pub/Linux/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.informatik.rwth-aachen.de/gentoo-portage"
USE="x86 3dnow ithreads logrotate mmx ncurses readline userlocales zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS

Cheers

Sebastian




Comment 1


Jakub Moc (RETIRED)






          2005-12-22 00:01:39 UTC
        

Innocent warning that does not break anything. Ask upstream to fix it if you really care.




Comment 2


Sebastian





          2005-12-22 00:24:49 UTC
        

Hi!

Yes, I see your point. But shouldn't the ebuild take care of setting the wanted CFLAGS? Don't we specify CFLAGS for that in make.conf. There're hundreds of ebuilds out there that even patch things so that the CFLAGS in make.conf are used.

I think the ebuild should take care of this. You can't totally rely on upstream. That's why there are so many patches in portage.

Thanks

Sebastian




Comment 3


Sebastian





          2005-12-22 00:26:04 UTC
        

Just to clear it up. I want '-Os -march=i586 -m3dnow -mmmx -pipe -fomit-frame-pointer' and not '-march=i586 -mcpu=i586 -Os -march=i586 -m3dnow -mmmx -pipe -fomit-frame-pointer'.

Sebastian




Comment 4


Jakub Moc (RETIRED)






          2005-12-22 00:30:49 UTC
        

(In reply to comment #2)
> Hi!
> 
> Yes, I see your point. But shouldn't the ebuild take care of setting the wanted
> CFLAGS? Don't we specify CFLAGS for that in make.conf. There're hundreds of
> ebuilds out there that even patch things so that the CFLAGS in make.conf are
> used.

Your CFLAGS aren't used? How so? How's -march=i586 -mcpu=i586 different from just march=i586? Once again, this is a compiler warning that does not break/harm anything.





Comment 5


Sebastian





          2005-12-22 00:56:57 UTC
        

Hi!

I had a look at the 'configure' script. I think it'd take me some time to make changes so it runs the way I'd like it to. Time I haven't got at the moment. So nevermind for now.

Cheers

Sebastian









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

