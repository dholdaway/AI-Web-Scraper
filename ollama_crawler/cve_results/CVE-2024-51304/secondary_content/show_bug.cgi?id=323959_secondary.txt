Title: 323959 – dev-db/postgresql-server/files/postgresql.init-8.4-r1 is buggerred
URL: https://bugs.gentoo.org/show_bug.cgi?id=323959

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 323959
dev-db/postgresql-server/files/postgresql.init-8.4-r1 is buggerred
Last modified: 2010-06-16 18:07:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 323959 
      - dev-db/postgresql-server/files/postgresql.init-8.4-r1 is buggerred


Summary:
dev-db/postgresql-server/files/postgresql.init-8.4-r1 is buggerred
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PgSQL Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-14 16:43 UTC by James Cloos





      Modified:
    
2010-06-16 18:07 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



titanofold









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


James Cloos





          2010-06-14 16:43:33 UTC
        

After updating postgresql-server to 8.4.4-r1 the init script is unable to either start or stop the server.

(Actually, it can start it, but it thinks that it failed and therefore fails to update rc, making it impossible to use the init script to stop it, or to start anything which depends on postgresql-server.)

Manually installing the postgresql.init-8.4 file as /etc/init.d/postgresql-8.4 works as a fix.

The ebuild version is:

# $Header: /var/cvsroot/gentoo-x86/dev-db/postgresql-server/postgresql-server-8.4.4-r1.ebuild,v 1.1 2010/06/04 14:18:53 patrick Exp $




Comment 1


Aaron W. Swenson






          2010-06-14 20:06:54 UTC
        

Make sure the server is idle and no connections are open. Kill it manually.

If the server was started with the old script, the new script can't really kill it. Or start it. There's no real explanation for this that I've found as the same client is being used to handle the server in the new script as the old script.

After that, the new script should be able to handle it just fine.

Additionally, ensure that you have local sockets as an allowed means of communication. The method allowed doesn't seem to matter, just the media.




Comment 2


Patrick Lauer






          2010-06-16 18:07:34 UTC
        

This looks like a one-off failure when upgrading, switching to the new init scripts, while the server is running. Once you stop the server with pg_ctl you can start it again, so I don't see what we can do to fix it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

