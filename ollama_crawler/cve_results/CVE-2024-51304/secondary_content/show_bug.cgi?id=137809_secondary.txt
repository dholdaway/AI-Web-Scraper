Title: 137809 – sys-fs/lvm2-2.02.06 fails with --as-needed
URL: https://bugs.gentoo.org/show_bug.cgi?id=137809

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137809
sys-fs/lvm2-2.02.06 fails with --as-needed
Last modified: 2007-01-06 11:39:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137809 
      - sys-fs/lvm2-2.02.06 fails with --as-needed


Summary:
sys-fs/lvm2-2.02.06 fails with --as-needed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Eric Edgar (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




as-needed



 

        Show dependency tree





 





      Reported:
    
2006-06-24 03:40 UTC by Matthias Schwarzott





      Modified:
    
2007-01-06 11:39 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



robbat2
rockoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthias Schwarzott






          2006-06-24 03:40:45 UTC
        

lvm2 fails to emerge with LDFLAGS="-Wl,--as-needed":

egrep -v '^ *(|#.*|dumpconfig|formats|help|pvdata|segtypes|version) *$' > .commands
i686-pc-linux-gnu-gcc -o lvm dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm.o -Wl,--as-needed -Wl,--as-needed -Wl,--export-dynamic -L./lib -L/usr/lib -Wl,--as-needed -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper -lreadline -ldl -lreadline  -rdynamic
i686-pc-linux-gnu-gcc -o lvm.static dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm-static.o -static -Wl,--as-needed -Wl,--as-needed -Wl,--export-dynamic -L./lib -L/usr/lib -Wl,--as-needed -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper \
                -lreadline -ldl -lreadline  -rdynamic
../lib/liblvm.a(sharedlib.o): In function `load_shared_library':
sharedlib.c:(.text+0x18a): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
complete.c:(.text+0x20d5): warning: Using 'getpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(tilde.o): In function `tilde_expand_word':
tilde.c:(.text+0x20a): warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(shell.o): In function `sh_get_home_dir':
shell.c:(.text+0x12f): warning: Using 'getpwuid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
complete.c:(.text+0x20d0): warning: Using 'setpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
complete.c:(.text+0x2181): warning: Using 'endpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(display.o): In function `cr':
display.c:(.text+0x714): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_move_vert':
display.c:(.text+0x795): undefined reference to `tputs'
display.c:(.text+0x7ec): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_move_cursor_relative':
display.c:(.text+0x888): undefined reference to `tputs'
display.c:(.text+0x97a): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o):display.c:(.text+0xa29): more undefined references to `tputs' follow
/usr/lib/libreadline.a(display.o): In function `update_line':
display.c:(.text+0x1e84): undefined reference to `tgoto'
display.c:(.text+0x1e9c): undefined reference to `tputs'
display.c:(.text+0x1fb2): undefined reference to `tputs'
display.c:(.text+0x1fcf): undefined reference to `tputs'
display.c:(.text+0x202e): undefined reference to `tgoto'
display.c:(.text+0x2042): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `rl_redisplay':
display.c:(.text+0x346f): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_redisplay_after_sigwinch':
display.c:(.text+0x3586): undefined reference to `tputs'
display.c:(.text+0x35c4): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_get_screen_size':
terminal.c:(.text+0x114): undefined reference to `tgetnum'
terminal.c:(.text+0x181): undefined reference to `tgetnum'
/usr/lib/libreadline.a(terminal.o): In function `_rl_init_terminal_io':
terminal.c:(.text+0x54a): undefined reference to `PC'
terminal.c:(.text+0x55b): undefined reference to `BC'
terminal.c:(.text+0x565): undefined reference to `UP'
terminal.c:(.text+0x5ee): undefined reference to `tgetent'
terminal.c:(.text+0x60f): undefined reference to `tgetstr'
terminal.c:(.text+0x641): undefined reference to `PC'
terminal.c:(.text+0x653): undefined reference to `BC'
terminal.c:(.text+0x65f): undefined reference to `UP'
terminal.c:(.text+0x673): undefined reference to `tgetflag'
terminal.c:(.text+0x6d4): undefined reference to `tgetflag'
terminal.c:(.text+0x76e): undefined reference to `tgetflag'
terminal.c:(.text+0x7c8): undefined reference to `tgetflag'
/usr/lib/libreadline.a(terminal.o): In function `_rl_backspace':
terminal.c:(.text+0x9c2): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `rl_ding':
terminal.c:(.text+0xa6a): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_enable_meta_key':
terminal.c:(.text+0xab4): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_control_keypad':
terminal.c:(.text+0xaf5): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_set_cursor':
terminal.c:(.text+0xb39): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o):terminal.c:(.text+0xb66): more undefined references to `tputs' follow
collect2: ld gab 1 als Ende-Status zur




Comment 1


Matthias Schwarzott






          2006-06-24 03:40:45 UTC
        

lvm2 fails to emerge with LDFLAGS="-Wl,--as-needed":

egrep -v '^ *(|#.*|dumpconfig|formats|help|pvdata|segtypes|version) *$' > .commands
i686-pc-linux-gnu-gcc -o lvm dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm.o -Wl,--as-needed -Wl,--as-needed -Wl,--export-dynamic -L./lib -L/usr/lib -Wl,--as-needed -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper -lreadline -ldl -lreadline  -rdynamic
i686-pc-linux-gnu-gcc -o lvm.static dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm-static.o -static -Wl,--as-needed -Wl,--as-needed -Wl,--export-dynamic -L./lib -L/usr/lib -Wl,--as-needed -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper \
                -lreadline -ldl -lreadline  -rdynamic
../lib/liblvm.a(sharedlib.o): In function `load_shared_library':
sharedlib.c:(.text+0x18a): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
complete.c:(.text+0x20d5): warning: Using 'getpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(tilde.o): In function `tilde_expand_word':
tilde.c:(.text+0x20a): warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(shell.o): In function `sh_get_home_dir':
shell.c:(.text+0x12f): warning: Using 'getpwuid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
complete.c:(.text+0x20d0): warning: Using 'setpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
complete.c:(.text+0x2181): warning: Using 'endpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(display.o): In function `cr':
display.c:(.text+0x714): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_move_vert':
display.c:(.text+0x795): undefined reference to `tputs'
display.c:(.text+0x7ec): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_move_cursor_relative':
display.c:(.text+0x888): undefined reference to `tputs'
display.c:(.text+0x97a): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o):display.c:(.text+0xa29): more undefined references to `tputs' follow
/usr/lib/libreadline.a(display.o): In function `update_line':
display.c:(.text+0x1e84): undefined reference to `tgoto'
display.c:(.text+0x1e9c): undefined reference to `tputs'
display.c:(.text+0x1fb2): undefined reference to `tputs'
display.c:(.text+0x1fcf): undefined reference to `tputs'
display.c:(.text+0x202e): undefined reference to `tgoto'
display.c:(.text+0x2042): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `rl_redisplay':
display.c:(.text+0x346f): undefined reference to `tputs'
/usr/lib/libreadline.a(display.o): In function `_rl_redisplay_after_sigwinch':
display.c:(.text+0x3586): undefined reference to `tputs'
display.c:(.text+0x35c4): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_get_screen_size':
terminal.c:(.text+0x114): undefined reference to `tgetnum'
terminal.c:(.text+0x181): undefined reference to `tgetnum'
/usr/lib/libreadline.a(terminal.o): In function `_rl_init_terminal_io':
terminal.c:(.text+0x54a): undefined reference to `PC'
terminal.c:(.text+0x55b): undefined reference to `BC'
terminal.c:(.text+0x565): undefined reference to `UP'
terminal.c:(.text+0x5ee): undefined reference to `tgetent'
terminal.c:(.text+0x60f): undefined reference to `tgetstr'
terminal.c:(.text+0x641): undefined reference to `PC'
terminal.c:(.text+0x653): undefined reference to `BC'
terminal.c:(.text+0x65f): undefined reference to `UP'
terminal.c:(.text+0x673): undefined reference to `tgetflag'
terminal.c:(.text+0x6d4): undefined reference to `tgetflag'
terminal.c:(.text+0x76e): undefined reference to `tgetflag'
terminal.c:(.text+0x7c8): undefined reference to `tgetflag'
/usr/lib/libreadline.a(terminal.o): In function `_rl_backspace':
terminal.c:(.text+0x9c2): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `rl_ding':
terminal.c:(.text+0xa6a): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_enable_meta_key':
terminal.c:(.text+0xab4): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_control_keypad':
terminal.c:(.text+0xaf5): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o): In function `_rl_set_cursor':
terminal.c:(.text+0xb39): undefined reference to `tputs'
/usr/lib/libreadline.a(terminal.o):terminal.c:(.text+0xb66): more undefined references to `tputs' follow
collect2: ld gab 1 als Ende-Status zurück
make[1]: *** [lvm.static] Fehler 1
make[1]: Leaving directory `/var/tmp/portage/lvm2-2.02.06/work/LVM2.2.02.06/tools'
make: *** [tools] Fehler 2

!!! ERROR: sys-fs/lvm2-2.02.06 failed.
Call stack:
  ebuild.sh, line 1540:   Called dyn_compile
  ebuild.sh, line 940:   Called src_compile
  lvm2-2.02.06.ebuild, line 86:   Called die

!!! compile problem
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 2


Matthias Schwarzott






          2006-06-24 03:41:17 UTC
        

# emerge --info:
Portage 2.1.1_pre1-r2 (default-linux/x86/2006.0, gcc-3.4.6/vanilla, glibc-2.4-r3, 2.6.16-gentoo-r8 i686)
=================================================================
System uname: 2.6.16-gentoo-r8 i686 AMD Athlon(tm) XP 3000+
Gentoo Base System version 1.12.1
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache collision-detect confcache cvs distlocks metadata-transfer parallel-fetch sandbox sfperms sign strict"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,--as-needed"
LINGUAS="de"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/matze/gentoo/overlays/sci /home/matze/gentoo/overlays/de /home/matze/gentoo/overlays/zzam"
SYNC="cvs://zzam@cvs.gentoo.org:/var/cvsroot"
USE="x86 3dnow 3dnowext X a52 aac acl alsa apache2 apm artswrappersuid audacious avi berkdb bitmap-fonts bluetooth bzip2 cap caps cddb cdparanoia cli crypt cups dbus doc dri dts dvb dvd dvdr eds emboss encode fbcon ffmpeg font-server foomaticdb fortran fuse gcj gdbm gif gimpprint glut gpm gstreamer gtk gtk2 hal imap imlib ipv6 isdnlog java jpeg jpeg2k kde kdexdeltas libg++ libwww logitech-mouse mad mikmod mmx mmxext mng motif mp3 mpeg mplayer musicbrainz mysql ncurses nls nogecko-sdk nptl nptlonly nvram ogg opengl oss pam pcre pdflib perl png ppds pppd python qt quotes readline reflection samba session sms sndfile softmmu spell spl sqlite sse ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb userlocales vcd vdr visualization vorbis win32codecs xinerama xml xorg xrandr xslt xv zlib zvbi elibc_glibc input_devices_mouse input_devices_keyboard kernel_linux linguas_de lirc_devices_all userland_GNU video_cards_nvidia video_cards_v4l video_cards_vesa video_cards_vbdev video_cards_nv"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Matthias Schwarzott






          2006-06-24 06:36:26 UTC
        

After having reemerged sys-libs/readline I am no longer able to reproduce this problem.




Comment 4


Arthur I.





          2006-07-07 07:01:19 UTC
        

exactly same problem

remerge readline not solve problem.

Portage 2.1.1_pre2-r4 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.4-r3, 2.6.16-gentoo-r7 i686)
=================================================================
System uname: 2.6.16-gentoo-r7 i686 Intel(R) Pentium(R) 4 CPU 2.80GHz
Gentoo Base System version 1.12.1
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.aiya.ru/pub/gentoo/ ftp://mirror.aiya.ru/pub/gentoo/ "
LANG="ru_RU.utf8"
LC_ALL=""
LINGUAS="ru"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 7zip X a52 aac aalib acl acpi alsa apache2 artworkextra asterisk avi background bash-completion beagle berkdb bitmap-fonts bluetooth boundschecking browserplugin bzip2 cairo caps cdparanoia cdr chm clamav cli clvm cman cpudetection crypt css cups curl dbus dga divx4linux dlloader dri dvd dvdr dvdread dynagraph eds emboss encode exif expat extensions extras fame ffmpeg firefox flac foomaticdb gd gdbm ggi gif gnome gnutls gphoto2 gpm graphviz gstreamer gtk gtk2 gulm hal idea idn imagemagick imap imlib isdnlog ithreads java javascript jbig jpeg jpeg2k kde kdeenablefinal kdehiddenvisibility kerberos krb4 largeterminal ldap libcaca libg++ libwww logitech-mouse mad mailwrapper matrox mbox mbrola mikmod mmx mmx2 mng mono motif mozilla mozsvg mp3 mpeg mplayer mpm-prefork mppe-mppc musepack musicbrainz mysql nas ncurses nls nntp noamazon nojoystick nptl nptlonly nsplugin offensive ogg openal opengl oss pam pcre pdf pdflib perl php pic png pppd python qt qt3 qt4 quicktime rar rdesktop readline real reflection samba sasl sdl sendfile session slang spell spl sql sqlite sse sse2 ssl stats subversion svg syslog tcpd tga theora threads tiff timidity truetype truetype-fonts type1-fonts ucs2 udev unicode usb vim-with-x visualization vorbis widescreen win32codecs wma wma123 wmf wxgtk1 xine xinerama xml xml2 xmms xorg xprint xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_ru userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 5


Arthur I.





          2006-07-07 07:01:54 UTC
        

m4 -fomit-frame-pointer -pipe -fPIC -Wall -Wundef -Wshadow -Wcast-align -Wwrite-strings -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -Winline -Wmissing-noreturn -O2 -O2 -march=pentium4 -fomit-frame-pointer -pipe -fPIC -Wall -Wundef -Wshadow -Wcast-align -Wwrite-strings -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -Winline -Wmissing-noreturn -O2 lvm-static.c -o lvm-static.o
i686-pc-linux-gnu-gcc -E -P cmdnames.h 2> /dev/null | \
                egrep -v '^ *(|#.*|dumpconfig|formats|help|pvdata|segtypes|version) *$' > .commands
i686-pc-linux-gnu-gcc -o lvm dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm.o -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper -lreadline -ldl -lncurses  -rdynamic
i686-pc-linux-gnu-gcc -o lvm.static dumpconfig.o formats.o lvchange.o lvconvert.o lvcreate.o lvdisplay.o lvextend.o lvmchange.o lvmcmdline.o lvmdiskscan.o lvreduce.o lvremove.o lvrename.o lvresize.o lvscan.o polldaemon.o pvchange.o pvcreate.o pvdisplay.o pvmove.o pvremove.o pvresize.o pvscan.o reporter.o segtypes.o toollib.o vgcfgbackup.o vgcfgrestore.o vgchange.o vgck.o vgcreate.o vgconvert.o vgdisplay.o vgexport.o vgextend.o vgimport.o vgmerge.o vgmknodes.o vgreduce.o vgremove.o vgrename.o vgscan.o vgsplit.o lvm-static.o -static -Wl,--export-dynamic -L../lib -L/usr/lib -llvm -ldevmapper \
                -lreadline -ldl -lncurses  -rdynamic
../lib/liblvm.a(sharedlib.o): In function `load_shared_library':
sharedlib.c:(.text+0x12d): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
(.text+0x1249): warning: Using 'getpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(tilde.o): In function `tilde_expand_word':
(.text+0x197): warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(shell.o): In function `sh_get_home_dir':
(.text+0x63): warning: Using 'getpwuid' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
(.text+0x1244): warning: Using 'setpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/libreadline.a(complete.o): In function `rl_username_completion_function':
(.text+0x12eb): warning: Using 'endpwent' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
make[1]: Leaving directory `/var/tmp/portage/lvm2-2.02.06/work/LVM2.2.02.06/tools'

!!! ERROR: sys-fs/lvm2-2.02.06 failed.
Call stack:
  ebuild.sh, line 1545:   Called dyn_compile
  ebuild.sh, line 940:   Called src_compile
  lvm2-2.02.06.ebuild, line 86:   Called die

!!! compile problem
!!! If you need support, post the topmost build error, and the call stack if relevant.






Comment 6


Daniel Webert





          2006-07-25 07:42:13 UTC
        

building binutils-2.17, building toolchain, building emptytree world, building lvm2 - no problem overhere on x86 w/ gcc-4.1+glibc-2.4




Comment 7


Robin Johnson









          2006-12-21 19:35:14 UTC
        

please try 2.02.17.




Comment 8


Mike Mattie





          2007-01-06 11:30:20 UTC
        

cannot reproduce:

2.0.2.10 emerges just fine for me, with binutils 2.17.50.0.3. I also have --as-needed in my LDFLAGS.





Comment 9


Jakub Moc (RETIRED)






          2007-01-06 11:39:01 UTC
        

Closing, multiple people report this working just fine.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

