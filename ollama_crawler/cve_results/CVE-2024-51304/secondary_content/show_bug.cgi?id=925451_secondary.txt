Title: 925451 – net-libs/nodejs-22.10 fails to compile with Assertion failed: !result->early_return()
URL: https://bugs.gentoo.org/show_bug.cgi?id=925451

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 925451
net-libs/nodejs-22.10 fails to compile with Assertion failed: !result->early_return()
Last modified: 2024-02-25 22:02:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 925451 
      - net-libs/nodejs-22.10 fails to compile with Assertion failed: !result->early_return()


Summary:
net-libs/nodejs-22.10 fails to compile with Assertion failed: !result->early_...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

William Hubbs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-02-24 23:29 UTC by Alexis Praga





      Modified:
    
2024-02-25 22:02 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



alexis.praga









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (build.log.xz,54.15 KB,
                application/x-xz)

            
2024-02-24 23:29 UTC,

            Alexis Praga




Details





emerge --info

              (emerge-info.txt,6.63 KB,
                text/plain)

            
2024-02-24 23:30 UTC,

            Alexis Praga




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexis Praga





          2024-02-24 23:29:46 UTC
        

Created attachment 885912 [details]
Build log

Hi,

On an up-to-date Gentoo machine, nodejs fails to compile due to 

  #  /var/tmp/portage/net-libs/nodejs-20.11.0/work/node-v20.11.0/out/Release/node_mksnapshot[4930]: int BuildSnapshot(int, char**) at ../../tools/snapshot/node_mksnapshot.cc:69
  #  Assertion failed: !result->early_return()

Output of emerge --pqv.txt
[ebuild  N    ] net-libs/nodejs-20.11.0  USE="icu npm snapshot ssl system-icu system-ssl -corepack -debug -doc -inspector (-lto) -pax-kernel -test" CPU_FLAGS_X86="sse2" 

Build log attached.

Thanks,




Comment 1


Alexis Praga





          2024-02-24 23:30:22 UTC
        

Created attachment 885913 [details]
emerge --info




Comment 2


Alexis Praga





          2024-02-25 11:51:27 UTC
        

After looking into it, it was actually an incorrect OpenSSL configuration that was causing the issue. Closing the issue and sorry for the noise !




Comment 3


Sam James









          2024-02-25 20:22:38 UTC
        

(In reply to Alexis Praga from comment #2)
> After looking into it, it was actually an incorrect OpenSSL configuration
> that was causing the issue. Closing the issue and sorry for the noise !

Could you elaborate?




Comment 4


Alexis Praga





          2024-02-25 21:55:47 UTC
        

Sure. Testing the binary for nodejs complained about a badly formatted line in openssl configuration. I've been playing around with /etc/ssl/openssl.cnf so reverting the configuration file to its default version made the binary work and Gentoo package compile. Unfortunately, I don't have the "wrong" version anymore for openssl.cnf.




Comment 5


Sam James









          2024-02-25 22:02:40 UTC
        

(In reply to Alexis Praga from comment #4)
> Sure. Testing the binary for nodejs complained about a badly formatted line
> in openssl configuration. I've been playing around with /etc/ssl/openssl.cnf
> so reverting the configuration file to its default version made the binary
> work and Gentoo package compile. Unfortunately, I don't have the "wrong"
> version anymore for openssl.cnf.

Thank you! This sort of thing is quite helpful to know for future debugging.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

