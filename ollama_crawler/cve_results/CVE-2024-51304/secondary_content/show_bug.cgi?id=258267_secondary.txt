Title: 258267 – rsync mirror distributing invalid Manifest for gtk-sharp-2.12.8.tar.bz2 in packages dev-dotnet/{pango,gdk}-sharp
URL: https://bugs.gentoo.org/show_bug.cgi?id=258267

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 258267
rsync mirror distributing invalid Manifest for gtk-sharp-2.12.8.tar.bz2 in packages dev-dotnet/{pango,gdk}-sharp
Last modified: 2009-02-11 22:01:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 258267 
      - rsync mirror distributing invalid Manifest for gtk-sharp-2.12.8.tar.bz2 in packages dev-dotnet/{pango,gdk}-sharp


Summary:
rsync mirror distributing invalid Manifest for gtk-sharp-2.12.8.tar.bz2 in pa...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mirror Admins








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-02-09 01:40 UTC by Maciej Piechotka





      Modified:
    
2009-02-11 22:01 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dotnet









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Maciej Piechotka





          2009-02-09 01:40:59 UTC
        

The gtk-sharp-2.12.8.tar.bz2 digest seems not to match in several packages:
dev-dotnet/gtk-sharp-gapi-2.12.8
dev-dotnet/gtk-sharp-2.12.8
dev-dotnet/gdk-sharp-2.12.8
dev-dotnet/atk-sharp-2.12.8
dev-dotnet/glade-sharp-2.12.8
dev-dotnet/pango-sharp-2.12.8

Please check if the file is correct (it does not seems to be corrupted as it untars) - it might be substituted(the reason I marked it critical). Checked twice.

Reproducible: Always




Portage 2.2_rc23 (default/linux/x86/2008.0/developer, gcc-4.3.3, glibc-2.9_p20081201-r1, 2.6.28-zen4 i686)
=================================================================
System uname: Linux-2.6.28-zen4-i686-Intel-R-_Celeron-R-_M_processor_1.50GHz-with-gentoo-2.0.0
Timestamp of tree: Sun, 08 Feb 2009 22:10:04 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p48
dev-java/java-config: 1.3.7-r1, 2.1.7
dev-lang/python:     2.6.1
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.6.2-r1
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.4.2
sys-apps/sandbox:    1.3.5
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.19.1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.28-r1
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -mtune=pentium-m -march=pentium-m -mfpmath=sse -pipe -momit-leaf-frame-pointer -ggdb -w -ftree-vectorize -ftree-loop-optimize -freorder-blocks-and-partition -fgcse-sm -fgcse-las -fgcse-after-reload -ftracer -maccumulate-outgoing-args"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-Os -mtune=pentium-m -march=pentium-m -mfpmath=sse -pipe -momit-leaf-frame-pointer -ggdb -w -ftree-vectorize -ftree-loop-optimize -freorder-blocks-and-partition -fgcse-sm -fgcse-las -fgcse-after-reload -ftracer -maccumulate-outgoing-args -fvisibility-inlines-hidden"
DISTDIR="/var/tmp/distfiles"
FEATURES="ccache collision-protect cvs digest distlocks fixpackages multilib-strict parallel-fetch prelink preserve-libs protect-owned sandbox sfperms sign splitdebug stricter unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--add-needed -Wl,--as-needed -Wl,--hash-style=both -Wl,--sort-common"
LINGUAS="en_GB en_US pl"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage-crossdev /usr/portage/local/layman/rbu /usr/portage/local/layman/x11 /usr/portage/local/layman/java-overlay /usr/portage/local/layman/my-gnome /usr/portage/local/layman/zen-overlay /usr/portage/local/layman/ruby /usr/portage/local/layman/java-experimental /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aac acl acpi alsa applet attr avahi avalon banshee bash-completion berkdb bittorrent boo browseplugin bzip2 c++ cairo calendar caps cddb cdparanoia cdr cdrkit cli clisp consolekit context cracklib crypt cups curl curlwrappers cxx d daap dbus deskbar detex devhelp disk-partition djvu docbook dri dvd dvdnav dvdr dvdread eclipse eds emacs emboss emerald encode eog epiphany esd evo evolution exif expat extra fam ffmpeg flac flash fortran fuse galago gconf gd gdbm gdl gedit gif gimp git glib glut gmail gmp gnome gnome-keyring gnutls gpm groovy gsf gstreamer gtk guile hal iconv idle imap inherit-graph inotify ipod iproute2 ipv6 isdnlog jabber java java5 java6 jingle jpeg jpeg2k jython keyring kpathsea kqemu laptop latex libburn libffi libgda libnotify libsexy logrotate lucene mad maildir mailwrapper mhash midi mikmod mmap mmx mono moonlight mozilla mp3 mpeg mudflap mule musicbrainz nautilus ncurses network networkmanager nls nntp no-old-linux nptl nptlonly nsplugin nss ntpl ogg oggvorbis openal opengl openmp pam pango pbm pccts pch pcre pda pdf perl png policykit pop postgres ppds pppd pulseaudio python qt3support quicktime raw readline reflection regex reiserfs resolvconf rhino ruby samba scanner science sdl session snmp soap soup sourceview spell spl sqlite sqlite3 sse sse2 ssh ssl startup-notification subversion svg symlink sysfs syslog tcpd tetex theora threads threadsafe tiff timidity totem tracker trayicon truetype unicode usb valgrind vim vorbis vte webkit wifi win32codecs wxwindows x86 xattr xcb xforms xhtml xml xml2 xorg xrender xsl xslt xulrunner xv zeroconf zlib" ALSA_CARDS="atiixp" ALSA_PCM_PLUGINS="null empty dmix dshare ioplug" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="panasonic" ELIBC="glibc" INPUT_DEVICES="mouse keyboard evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB en_US pl" NETBEANS_MODULES="ide java websvccommon " USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Peter Alfredsen (RETIRED)






          2009-02-09 01:54:22 UTC
        

grep -r --include="Manifest" gtk-sharp-2.12.8.tar.bz2 /usr/portage/dev-dotnet/

Shows me that the digests are identical in all packages using that tarball. And they all emerge fine, having fetched it from local mirrors.

md5sum /usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2
1b12a33df2ab87448848c0cc0733ca77  /usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2

That's the same as the md5 of the upstream tarball:
http://ftp.acc.umu.se/pub/gnome/sources/gtk-sharp/2.12/gtk-sharp-2.12.8.md5sum

I'll push this tarball straight onto the main mirror and force a re-sync. Can you tell us where you got your tarball from and what its md5sum and size in bytes is?





Comment 2


Maciej Piechotka





          2009-02-09 02:05:59 UTC
        

# grep -r --include="Manifest" gtk-sharp-2.12.8.tar.bz2 /usr/portage/dev-dotnet/
/usr/portage/dev-dotnet/gtk-dotnet-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/pango-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/glib-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/gtk-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/gtk-sharp-docs/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/gtk-sharp-gapi/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/gdk-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/glade-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020
/usr/portage/dev-dotnet/atk-sharp/Manifest:DIST gtk-sharp-2.12.8.tar.bz2 1605876 RMD160 d287020b230e637869f4fe830961724bd44f7b01 SHA1 3c97abd67e92738e7960f9e0e5f2410e8ff4912b SHA256 b2edc4bb213c1a0fc40dede222116686f04c4ba9196f80c5d1532d5ee2128020

# md5sum /var/tmp/distfiles/gtk-sharp-2.12.8.tar.bz2
1b12a33df2ab87448848c0cc0733ca77  /var/tmp/distfiles/gtk-sharp-2.12.8.tar.bz2

This means that the data on portage mirror were incorrect.




Comment 3


Peter Alfredsen (RETIRED)






          2009-02-09 02:09:29 UTC
        

(In reply to comment #2)

These look like the same results I have. You should not be getting digest errors with that file.




Comment 4


Maciej Piechotka





          2009-02-09 02:18:07 UTC
        

(In reply to comment #3)
> (In reply to comment #2)
> 
> These look like the same results I have. You should not be getting digest
> errors with that file.
> 

I confirm that it now compiles normally.
1. It was some bug in portage
2. Removing Manifest from dev-dotnet/gtk-sharp-gapi and making digest (I've done this to check the case) removed the false digest from the rest




Comment 5


Peter Alfredsen (RETIRED)






          2009-02-09 02:22:10 UTC
        

That makes no sense whatsoever. Leaving this open to see if anyone else is affected.




Comment 6


dongxu li





          2009-02-09 10:04:16 UTC
        

(In reply to comment #4)
> (In reply to comment #3)
> > (In reply to comment #2)
> > 
> > These look like the same results I have. You should not be getting digest
> > errors with that file.
> > 
> 
> I confirm that it now compiles normally.
> 1. It was some bug in portage
> 2. Removing Manifest from dev-dotnet/gtk-sharp-gapi and making digest (I've
> done this to check the case) removed the false digest from the rest
> 

I got the same error here. regenerating the digest after removal if it works for me.




Comment 7


Peter Alfredsen (RETIRED)






          2009-02-09 10:15:58 UTC
        

Somebody post the actual text of this error, please?




Comment 8


dongxu li





          2009-02-09 10:19:14 UTC
        

(In reply to comment #7)
> Somebody post the actual text of this error, please?
> 

First, the wrong line in Manifest,

DIST gtk-sharp-2.12.8.tar.bz2 207360 RMD160 1eeed0a4c463e7bc417661b89e4f84dc9619d84a SHA1 33647c0e64a285933fb75f578fd6e43ddad4c3e5 SHA256 97b24b283802683214a327146da60689e668e49c4091a87053b6146c36756af6

2009-02-09 05:12:23 (90.4 KB/s) - `/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2' saved [1605876/1605876]

('Filesize does not match recorded size', 1605876L, 207360)
!!! Fetched file: gtk-sharp-2.12.8.tar.bz2 VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      1605876
!!! Expected: 207360
Refetching... File renamed to '/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2._checksum_failure_.Iib6o4'





Comment 9


Peter Alfredsen (RETIRED)






          2009-02-09 10:29:57 UTC
        

(In reply to comment #8)
> (In reply to comment #7)
> > Somebody post the actual text of this error, please?
> > 
> 
> First, the wrong line in Manifest,
> 
> DIST gtk-sharp-2.12.8.tar.bz2 207360 RMD160
> 1eeed0a4c463e7bc417661b89e4f84dc9619d84a SHA1
> 33647c0e64a285933fb75f578fd6e43ddad4c3e5 SHA256
> 97b24b283802683214a327146da60689e668e49c4091a87053b6146c36756af6
> 
> 2009-02-09 05:12:23 (90.4 KB/s) -
> `/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2' saved [1605876/1605876]
> 
> ('Filesize does not match recorded size', 1605876L, 207360)
> !!! Fetched file: gtk-sharp-2.12.8.tar.bz2 VERIFY FAILED!
> !!! Reason: Filesize does not match recorded size
> !!! Got:      1605876
> !!! Expected: 207360
> Refetching... File renamed to
> '/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2._checksum_failure_.Iib6o4'
> 

This is from which package?




Comment 10


dongxu li





          2009-02-09 10:40:44 UTC
        

(In reply to comment #9)
> (In reply to comment #8)
> > (In reply to comment #7)
> > > Somebody post the actual text of this error, please?
> > > 
> > 
> > First, the wrong line in Manifest,
> > 
> > DIST gtk-sharp-2.12.8.tar.bz2 207360 RMD160
> > 1eeed0a4c463e7bc417661b89e4f84dc9619d84a SHA1
> > 33647c0e64a285933fb75f578fd6e43ddad4c3e5 SHA256
> > 97b24b283802683214a327146da60689e668e49c4091a87053b6146c36756af6
> > 
> > 2009-02-09 05:12:23 (90.4 KB/s) -
> > `/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2' saved [1605876/1605876]
> > 
> > ('Filesize does not match recorded size', 1605876L, 207360)
> > !!! Fetched file: gtk-sharp-2.12.8.tar.bz2 VERIFY FAILED!
> > !!! Reason: Filesize does not match recorded size
> > !!! Got:      1605876
> > !!! Expected: 207360
> > Refetching... File renamed to
> > '/usr/portage/distfiles/gtk-sharp-2.12.8.tar.bz2._checksum_failure_.Iib6o4'
> > 
> 
> This is from which package?
> 

I got this from both pango-sharp and gdk-sharp

emerge --sync was right before this




Comment 11


Peter Alfredsen (RETIRED)






          2009-02-09 10:56:21 UTC
        

Anyone experiencing this bug, please note which rsync server you're syncing against.
It looks like someone has regenerated the manifests downstream from the CVS server.




Comment 12


dongxu li





          2009-02-09 11:20:55 UTC
        

(In reply to comment #11)
> Anyone experiencing this bug, please note which rsync server you're syncing
> against.
> It looks like someone has regenerated the manifests downstream from the CVS
> server.
> 

confirmed, redoing emerge --sync solved all manifest issues here

not sure about the bad server, but my mirror list,

 GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo ftp://mirror.datapipe.net/gentoo ftp://gentoo.mirrors.tds.net/gentoo http://64.50.236.52/ http://gentoo.mirrors.tds.net/gentoo"




Comment 13


Peter Alfredsen (RETIRED)






          2009-02-09 11:31:22 UTC
        

grep -A1 "Starting rsync" /var/log/emerge.log |less
should give you a list of all syncs that have been logged.




Comment 14


Maciej Piechotka





          2009-02-09 11:42:53 UTC
        

(In reply to comment #13)
> grep -A1 "Starting rsync" /var/log/emerge.log |less
> should give you a list of all syncs that have been logged.
> 

The last entry:
1234149018: >>> Starting rsync with rsync://140.211.166.165/gentoo-portage
1234149307: === Sync completed with rsync://140.211.166.165/gentoo-portage




Comment 15


Peter Alfredsen (RETIRED)






          2009-02-09 11:48:39 UTC
        

(In reply to comment #14)

> The last entry:
> 1234149018: >>> Starting rsync with rsync://140.211.166.165/gentoo-portage
> 1234149307: === Sync completed with rsync://140.211.166.165/gentoo-portage

That mirror is back to normal
rsync -av rsync://140.211.166.165/gentoo-portage/dev-dotnet/pango-sharp/Manifest . 






Comment 16


Peter Alfredsen (RETIRED)






          2009-02-11 22:01:07 UTC
        

You are using a developer profile. This enables FEATURES=digest. Please don't use a developer unless you actually are a developer and know the problems it causes. In this case, the digests are regenerated with a corrupted tarball which leads to all other packages in the depgraph having the incorrect Manifest when they're checked, causing the error described in this bug. This was probably just a tarball that hadn't been completely mirrored yet when another mirror fetched it. That would have cleared up in no time, instead I've spent precious time tracking down wtf could cause this.
In the future, please be aware of this. We really are serious when we say that if you don't know EXACTLY what you're doing, you shouldn't enable developer profile. At all. Ever.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

