Title: 133646 – app-text/tetex-3.0_p1-r3: lex.yy.c:975: error: `yy_prev_more_offset' undeclared
URL: https://bugs.gentoo.org/show_bug.cgi?id=133646

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 133646
app-text/tetex-3.0_p1-r3: lex.yy.c:975: error: `yy_prev_more_offset' undeclared
Last modified: 2006-06-11 07:49:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 133646 
      - app-text/tetex-3.0_p1-r3: lex.yy.c:975: error: `yy_prev_more_offset' undeclared


Summary:
app-text/tetex-3.0_p1-r3: lex.yy.c:975: error: `yy_prev_more_offset' undeclared
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Text-Markup Team (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




124511



 

        Show dependency tree





 





      Reported:
    
2006-05-17 15:08 UTC by Martin Mokrejš





      Modified:
    
2006-06-11 07:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



base-system









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




lex.yy.c

              (lex.yy.c,65.48 KB,
                text/plain)

            
2006-05-23 13:11 UTC,

            Martin Mokrejš




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Mokrejš





          2006-05-17 15:08:11 UTC
        

make[3]: Entering directory `/var/tmp/portage/tetex-3.0_p1-r3/work/tetex-src-3.0/texk/web2c/web2c'
Expect one shift/reduce conflict.
bison -y -d -v ./web2c.y
conflicts: 1 shift/reduce
test -f y.tab.c && mv -f y.tab.c y_tab.c
test -f y.tab.h && mv -f y.tab.h y_tab.h
i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H  -I. -I. -I../.. -I../.. -I.. -I./..  -O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe  -c main.c
i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H  -I. -I. -I../.. -I../.. -I.. -I./..  -O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe  -c y_tab.c
flex -l ./web2c.l
i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H  -I. -I. -I../.. -I../.. -I.. -I./..  -O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe  -c lex.yy.c
lex.yy.c: In function `yylex':
lex.yy.c:975: error: `yy_prev_more_offset' undeclared (first use in this function)
lex.yy.c:975: error: (Each undeclared identifier is reported only once
lex.yy.c:975: error: for each function it appears in.)
make[3]: *** [lex.yy.o] Error 1
make[3]: Leaving directory `/var/tmp/portage/tetex-3.0_p1-r3/work/tetex-src-3.0/texk/web2c/web2c'
make[2]: *** [web2c/web2c] Error 2
make[2]: Leaving directory `/var/tmp/portage/tetex-3.0_p1-r3/work/tetex-src-3.0/texk/web2c'
make[1]: *** [all] Error 1
make[1]: Leaving directory `/var/tmp/portage/tetex-3.0_p1-r3/work/tetex-src-3.0/texk'
make: *** [all] Error 1

!!! ERROR: app-text/tetex-3.0_p1-r3 failed.
Call stack:
  ebuild.sh, line 1527:   Called dyn_compile
  ebuild.sh, line 931:   Called src_compile
  tetex-3.0_p1-r3.ebuild, line 65:   Called tetex-3_src_compile
  tetex-3.eclass, line 148:   Called tetex_src_compile
  tetex.eclass, line 175:   Called die


I have sys-devel/flex-2.5.33-r1.


Portage 2.1_rc1-r2 (default-linux/x86/2005.0, gcc-3.4.6, glibc-2.4-r3, 2.6.16-rc1 i686)
=================================================================
System uname: 2.6.16-rc1 i686 Intel(R) Pentium(R) 4 CPU 2.60GHz
Gentoo Base System version 1.12.0_pre19
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.4.19-r1, 2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/bind /var/qmail/alias /var/qmail/control /var/vpopmail/domains /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS="cs cz en"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 FFmpeg X Xaw3d a52 aac aalib acpi alsa amr apache2 apm arts ati avi berkdb bitmap-fonts bonobo caca cdparanoia cdr cli cpudetection crypt cscope ctype cups dba dga directfb divx divx5 divx5linux dri dts dv dvb dvd dvdr dvdread eds emacs emacs-w3 emboss encode esd ethereal evo f77 faad faad2 fam fame fbcon ffmpeg flash foomaticdb fortran fvwm fvwm2 gb gd gdbm ggi gif gphoto2 gpm gstreamer gtk gtk2 gtkhtml i8x0 icc iconv ieee1394 ifc imagemagick imlib imlib2 inifile innodb isdnlog ithreads java jpeg lcms leim libcaca libg++ libwww lirc live lzo mad matroska mcal mesa mhash mikmod ming mmx mmx2 mmxext motif mozilla mp3 mpeg mule musepack mysql ncurses network nls nptl nptlonly ogg oggvorbis opengl oss pam pcre pda pdflib perl plotutils plugin png ppds pppd pthread pthreads python qt qtx quicktime readline reflection rtc samba scanner scp sdl server session slp spell spl sse sse2 ssl stroke tcltk tcpd tetex theora thread threads tiff truetype truetype-fonts type1-fonts unicode usb userlocales v4l v4l2 vorbis win32 win32codecs winvidix wmf x264 xanim xml xml2 xmms xorg xosd xprint xv xvid xvmc zeo zlib elibc_glibc kernel_linux linguas_cs linguas_cz linguas_en userland_GNU video_cards_ati"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Martin Ehmsen (RETIRED)






          2006-05-18 02:05:56 UTC
        

This was a known problem with flex-2.5.31, which I thought was fixed in 2.5.33. (It is described in the PROBLEMS file shipping with tetex-3)
Does anybody from base-system have any insight as to why this problem turns up again?




Comment 2


Martin Ehmsen (RETIRED)






          2006-05-21 09:01:52 UTC
        

This is very strange if I do (or equivalent):

# cd /usr/portage/app-text/tetex
# ebuild tetex-3.0_p1-r3.ebuild clean unpack
# cd /var/tmp/portage/tetex-3.0_p1-r3/work/tetex-src-3.0/texk/web2c/web2c
# flex -l web2c.l
# grep yy_prev_more_offset lex.yy.c

then I get:

        (yy_prev_more_offset) = (yy_more_offset); \
static int yy_prev_more_offset = 0;
        (yy_more_offset) = (yy_prev_more_offset); \
                        for ( yyl = (yy_prev_more_offset); yyl < yyleng; ++yyl )

which is what one would expect (and it works). That is also with flex-2.5.33-r1.

Could you please try the above and report back here.




Comment 3


Martin Mokrejš





          2006-05-22 12:54:50 UTC
        

I get:

# grep yy_prev_more_offset lex.yy.c
        (yy_prev_more_offset) = (yy_more_offset); \
static int yy_prev_more_offset = 0;
        (yy_more_offset) = (yy_prev_more_offset); \
                        for ( yyl = (yy_prev_more_offset); yyl < yyleng; ++yyl )
#


Portage 2.1_rc1-r4 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.4-r3, 2.6.16-rc1 i686)
=================================================================
System uname: 2.6.16-rc1 i686 Intel(R) Pentium(R) 4 CPU 2.60GHz
Gentoo Base System version 1.12.0_pre19
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.4.19-r1, 2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/bind /var/qmail/alias /var/qmail/control /var/vpopmail/domains /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -mmmx -msse -msse2 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS="cs cz en"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 FFmpeg X Xaw3d a52 aac aalib acpi alsa amr apache2 apm ati avi berkdb bitmap-fonts bonobo caca cdparanoia cdr cli cpudetection crypt cscope ctype cups dba dga directfb divx divx5 divx5linux dri dts dv dvb dvd dvdr dvdread eds emacs emacs-w3 emboss encode ethereal evo f77 faad faad2 fam fame fbcon ffmpeg flash foomaticdb fortran fvwm fvwm2 gb gd gdbm ggi gif gphoto2 gpm gstreamer gtk gtk2 gtkhtml i8x0 icc iconv ieee1394 ifc imagemagick imlib imlib2 inifile innodb isdnlog ithreads java jpeg lcms leim libcaca libg++ libwww lirc live lzo mad matroska mcal mesa mhash mikmod ming mmx mmx2 mmxext motif mozilla mp3 mpeg mule musepack mysql ncurses network nls nptl nptlonly ogg oggvorbis opengl oss pam pcre pda pdflib perl plotutils plugin png ppds pppd pthread pthreads python qt qtx quicktime readline reflection rtc samba scanner scp server session slp spell spl sse sse2 ssl stroke tcltk tcpd tetex theora thread threads tiff truetype truetype-fonts type1-fonts udev unicode usb userlocales v4l v4l2 vorbis win32 win32codecs winvidix wmf x264 xanim xml xml2 xmms xorg xosd xprint xv xvid xvmc zeo zlib elibc_glibc kernel_linux linguas_cs linguas_cz linguas_en userland_GNU video_cards_ati"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 4


Martin Ehmsen (RETIRED)






          2006-05-23 04:43:53 UTC
        

Very wierd!
Can you please attach your lex.yy.c to this bug?




Comment 5


Martin Mokrejš





          2006-05-23 13:11:53 UTC
        

Created attachment 87341 [details]
lex.yy.c




Comment 6


Martin Ehmsen (RETIRED)






          2006-05-23 13:42:19 UTC
        

I think the following lines from lex.yy.c which is output from your flex says it all:

#define YY_FLEX_MAJOR_VERSION 2
#define YY_FLEX_MINOR_VERSION 5
#define YY_FLEX_SUBMINOR_VERSION 31

Your flex do not think it is 2.5.33, so please try to re-emerge flex and try again.
If that does not work for you, open a new bug on flex and have some base-system dev look at why flex-2.5.33 think it is 2.5.31.




Comment 7


Martin Mokrejš





          2006-05-23 14:33:11 UTC
        

Sorry, it turned ouit I had /usr/local/bin/flex 2.5.31 installed since I was testing that version in the past.




Comment 8


SpanKY






          2006-06-11 07:49:08 UTC
        

pwnt









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

