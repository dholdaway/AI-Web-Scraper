Title: 935244 – dev-libs/dynolog-0.3.1_p20230126-r2 fails to configure with multiple glog target was not found errors
URL: https://bugs.gentoo.org/show_bug.cgi?id=935244

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 935244
dev-libs/dynolog-0.3.1_p20230126-r2 fails to configure with multiple glog target was not found errors
Last modified: 2024-09-19 15:03:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 935244 
      - dev-libs/dynolog-0.3.1_p20230126-r2 fails to configure with multiple glog target was not found errors


Summary:
dev-libs/dynolog-0.3.1_p20230126-r2 fails to configure with multiple glog tar...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Tupone Alfredo








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-06-30 16:32 UTC by demo





      Modified:
    
2024-09-19 15:03 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



deyaa.saifeldin
negril.nx+gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (dynolog-0.3.1_p20230126-r2:20240629-235204.log,24.31 KB,
                text/x-log)

            
2024-06-30 16:32 UTC,

            demo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


demo





          2024-06-30 16:32:24 UTC
        

Created attachment 896670 [details]
build log

Hello ...


I was trying to install onnxruntime, and dynolog is a dependency because cafe2 is a dependency.

The configuration failed, log attached. Glog was already installed, because it's a dynolog dependency.

This is the error for easy web lookup:

CMake Error at CMakeLists.txt:53 (target_link_libraries):
Target "dynolog_lib" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.



CMake Error at dynolog/src/rpc/CMakeLists.txt:17 (target_link_libraries):
Target "dynolog_rpc_lib" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.



CMake Error at dynolog/src/tracing/CMakeLists.txt:15 (target_link_libraries):
Target "dynolog_ipcmonitor_lib" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.



CMake Error at dynolog/src/gpumon/CMakeLists.txt:21 (target_link_libraries):
Target "dynolog_dcgm_lib" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.



CMake Error at dynolog/tests/rpc/CMakeLists.txt:7 (target_link_libraries):
Target "json_client" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.



CMake Error at dynolog/tests/tracing/CMakeLists.txt:6 (target_link_libraries):
Target "IPCMonitorTest" links to:

glog::glog

but the target was not found.  Possible reasons include:

* There is a typo in the target name.
* A find_package call is missing for an IMPORTED target.
* An ALIAS target is missing.




Comment 1


Paul Zander





          2024-06-30 20:15:20 UTC
        

Can you attach the output of equery files dev-cpp/glog and emerge -pv dev-cpp/glog please?


The relevant error is:

[33mCMake Warning at /usr/share/cmake/Modules/CMakeFindDependencyMacro.cmake:76 (find_package):
  By not providing "FindUnwind.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "Unwind", but
  CMake did not find one.

  Could not find a package configuration file provided by "Unwind" (requested
  version 1.8.1) with any of the following names:

    UnwindConfig.cmake
    unwind-config.cmake

  Add the installation prefix of "Unwind" to CMAKE_PREFIX_PATH or set
  "Unwind_DIR" to a directory containing one of the above files.  If "Unwind"
  provides a separate development package or SDK, be sure it has been
  installed.
Call Stack (most recent call first):
  /lib64/cmake/glog/glog-config.cmake:35 (find_dependency)
  dynolog/src/rpc/CMakeLists.txt:16 (find_package)




Comment 2


demo





          2024-07-02 07:56:31 UTC
        

(In reply to Paul Zander from comment #1)
> Can you attach the output of equery files dev-cpp/glog and emerge -pv
> dev-cpp/glog please?
> 
> 
> The relevant error is:
> 
> [33mCMake Warning at
> /usr/share/cmake/Modules/CMakeFindDependencyMacro.cmake:76 (find_package):
>   By not providing "FindUnwind.cmake" in CMAKE_MODULE_PATH this project has
>   asked CMake to find a package configuration file provided by "Unwind", but
>   CMake did not find one.
> 
>   Could not find a package configuration file provided by "Unwind" (requested
>   version 1.8.1) with any of the following names:
> 
>     UnwindConfig.cmake
>     unwind-config.cmake
> 
>   Add the installation prefix of "Unwind" to CMAKE_PREFIX_PATH or set
>   "Unwind_DIR" to a directory containing one of the above files.  If "Unwind"
>   provides a separate development package or SDK, be sure it has been
>   installed.
> Call Stack (most recent call first):
>   /lib64/cmake/glog/glog-config.cmake:35 (find_dependency)
>   dynolog/src/rpc/CMakeLists.txt:16 (find_package)

Sorry for the late reply ...

HYG Paul

equery files dev-cpp/glog: http://0x0.st/Xajt.txt

emerge -pv dev-cpp/glog: http://0x0.st/Xajv.txt

And by unwind you mean sys-libs/libunwind, or sys-libs/llvm-libunwind?




Comment 3


Paul Zander





          2024-07-02 09:36:34 UTC
        

Looking at your USE flag combination you should have sys-libs/libunwind installed, can you attach equery check sys-libs/libunwind and emerge -pv sys-libs/libunwind please?




Comment 4


demo





          2024-07-02 09:44:38 UTC
        

(In reply to Paul Zander from comment #3)
> Looking at your USE flag combination you should have sys-libs/libunwind
> installed, can you attach equery check sys-libs/libunwind and emerge -pv
> sys-libs/libunwind please?

HYG http://0x0.st/XaeO.txt




Comment 5


Paul Zander





          2024-07-02 10:20:23 UTC
        

equery check sys-libs/libunwind as well please




Comment 6


demo





          2024-07-02 10:38:23 UTC
        

(In reply to Paul Zander from comment #5)
> equery check sys-libs/libunwind as well please

It should be the line at the end, I didn't check because each command gave me nominal output.

HYG

$ equery check sys-libs/libunwind
* Checking sys-libs/libunwind-1.8.1 ...
432 out of 432 files passed




Comment 7


Paul Zander





          2024-07-02 12:46:56 UTC
        

Try rebuilding dynolog now. The only way I could reproduce this was by forcibly uninstalling sys-libs/libunwind.




Comment 8


demo





          2024-07-02 13:23:20 UTC
        

(In reply to Paul Zander from comment #7)
> Try rebuilding dynolog now. The only way I could reproduce this was by
> forcibly uninstalling sys-libs/libunwind.

I gave it another try, but still got the same error!

BTW, when I search for either UnwindConfig.cmake, unwind-config.cmake none is present.

equery f sys-libs/libunwind | grep -i UnwindConfig.cmake or unwind-config.cmake gives me empty line.




Comment 9


Paul Zander





          2024-07-02 15:10:38 UTC
        

You should have a /usr/share/glog/cmake/FindUnwind.cmake




Comment 10


demo





          2024-07-02 15:17:28 UTC
        

(In reply to Paul Zander from comment #9)
> You should have a /usr/share/glog/cmake/FindUnwind.cmake

Thank you for your replies!

Setting up the variable CMAKE_PREFIX_PATH to include /usr/share/glog/cmake didn't do the trick ...

But hence you said that the issue is not reproducible, I'll take it somewhere else.

Thanks again!




Comment 11


Paul Zander





          2024-07-02 15:56:24 UTC
        

Does the file exist? Maybe join #gentoo on irc. Makes it a bit easier to to communicate. You can ping negril there.




Comment 12


demo





          2024-07-02 16:09:15 UTC
        

(In reply to Paul Zander from comment #11)
> Does the file exist?

Yes it does!

$ ls -lha /usr/share/glog/cmake/FindUnwind.cmake-rw-r--r-- 1 root root 2.1K Jun 29 23:08 /usr/share/glog/cmake/FindUnwind.cmak


But then in the environment file of the dynolog;

$ grep CMAKE_PREFIX_PATH /var/tmp/portage/dev-libs/dynolog-0.3.1_p20230126-r2/temp/environment
set(CMAKE_PREFIX_PATH "${EPREFIX}/usr" CACHE STRING "" FORCE)

This is whole file: http://0x0.st/Xa9X.txt

Maybe join #gentoo on irc. Makes it a bit easier to to
> communicate. You can ping negril there.

Will do!




Comment 13


Paul Zander





          2024-09-19 15:03:25 UTC
        

User had PATH in his make.conf breaking the detection.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

