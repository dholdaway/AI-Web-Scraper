Title: 766414 – net-libs/nodejs-14.15.4[-system-ssl]: fails to build with distcc
URL: https://bugs.gentoo.org/show_bug.cgi?id=766414

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 766414
net-libs/nodejs-14.15.4[-system-ssl]: fails to build with distcc
Last modified: 2021-05-04 14:36:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 766414 
      - net-libs/nodejs-14.15.4[-system-ssl]: fails to build with distcc


Summary:
net-libs/nodejs-14.15.4[-system-ssl]: fails to build with distcc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       minor
      


Assignee:

William Hubbs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-01-21 16:54 UTC by Derek White





      Modified:
    
2021-05-04 14:36 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



marecki









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Derek White





          2021-01-21 16:54:30 UTC
        

Upon attempting to compile NodeJS with distcc, compilation fails.

Was able to solve the issue by removing distcc (FEATURES="-distcc" emerge -1av nodejs)

This is my first bug report (That I remember), please let me know what I need to correct, if anything.

###################################################################
################# Build Fail Below ################################
###################################################################

These are the packages that would be merged, in order:

Calculating dependencies  .... done!
[ebuild     U  ] net-libs/nodejs-14.15.4:0/14::gentoo [14.15.1:0/14::gentoo] USE="icu npm snapshot ssl -debug -doc -inspector -pax_kernel -system-icu -system-ssl -systemtap -test" CPU_FLAGS_X86="sse2" 0 KiB

Total: 1 package (1 upgrade), Size of downloads: 0 KiB

>>> Verifying ebuild manifests


>>> Running pre-merge checks for net-libs/nodejs-14.15.4

>>> Emerging (1 of 1) net-libs/nodejs-14.15.4::gentoo
 * node-v14.15.4.tar.xz BLAKE2B SHA512 size ;-) ...                      [ ok ]
 * Using python3.7 to build
>>> Unpacking source...
>>> Unpacking node-v14.15.4.tar.xz to /var/tmp/portage/net-libs/nodejs-14.15.4/work
>>> Source unpacked in /var/tmp/portage/net-libs/nodejs-14.15.4/work
>>> Preparing source in /var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4 ...
 * Applying nodejs-10.3.0-global-npm-config.patch ...
 [ ok ]
 * Applying nodejs-14.15.0-fix_ppc64_crashes.patch ...
 [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4 ...
[1m[93mWARNING[0m: Could not recognize `gas`: distcc[41] ERROR: compile (null) on localhost failed
GNU assembler version 2.34.0 (x86_64-pc-linux-gnu) using BFD version (Gentoo 2.34 p6) 2.34.0
Assembler messages:
Fatal error: The input '/dev/null' and output '/dev/null' files are the same

[1m[31mERROR[0m: Did not find a new enough assembler, install one or build with
       --openssl-no-asm.
       Please refer to BUILDING.md
 * ERROR: net-libs/nodejs-14.15.4::gentoo failed (configure phase):
 *   (no error message)
 * 
 * Call stack:
 *     ebuild.sh, line 125:  Called src_configure
 *   environment, line 2766:  Called die
 * The specific snippet of code:
 *   		linux_use_bundled_gold=0" "${EPYTHON}" configure.py --prefix="${EPREFIX}"/usr --dest-cpu=${myarch} $(use_with systemtap dtrace) "${myconf[@]}" || die
 * 
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-14.15.4::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-14.15.4::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-14.15.4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-14.15.4/temp/environment'.
 * Working directory: '/var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4'
 * S: '/var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4'

>>> Failed to emerge net-libs/nodejs-14.15.4, Log file:

>>>  '/var/tmp/portage/net-libs/nodejs-14.15.4/temp/build.log'
 * Messages for package net-libs/nodejs-14.15.4:
 * ERROR: net-libs/nodejs-14.15.4::gentoo failed (configure phase):
 *   (no error message)
 * 
 * Call stack:
 *     ebuild.sh, line 125:  Called src_configure
 *   environment, line 2766:  Called die
 * The specific snippet of code:
 *   		linux_use_bundled_gold=0" "${EPYTHON}" configure.py --prefix="${EPREFIX}"/usr --dest-cpu=${myarch} $(use_with systemtap dtrace) "${myconf[@]}" || die
 * 
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-14.15.4::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-14.15.4::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-14.15.4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-14.15.4/temp/environment'.
 * Working directory: '/var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4'
 * S: '/var/tmp/portage/net-libs/nodejs-14.15.4/work/node-v14.15.4'


#########################################################################
######################## Emerge Info Below ##############################
#########################################################################
 
Portage 3.0.13 (python 3.8.6-final-0, default/linux/amd64/17.1/desktop, gcc-9.3.0, glibc-2.32-r5, 5.4.80-gentoo-r1 x86_64)
=================================================================
System uname: Linux-5.4.80-gentoo-r1-x86_64-AMD_Ryzen_5_1600_Six-Core_Processor-with-glibc2.2.5
KiB Mem:    16411964 total,  10803968 free
KiB Swap:   16777212 total,  16777212 free
Timestamp of repository gentoo: Wed, 20 Jan 2021 17:00:01 +0000
Head commit of repository gentoo: 30982b173dfb766b162fff65a89a46a84f9b87b7
Timestamp of repository dev1990-overlay: Tue, 19 Jan 2021 22:02:50 +0000
Head commit of repository dev1990-overlay: b509a5ca8e2b9e2f3c98261495b00229a3846ac1

Timestamp of repository go-overlay: Fri, 15 Jan 2021 18:09:43 +0000
Head commit of repository go-overlay: 34a2e0ce976cb2566b17e233a11debb61e25f834

Timestamp of repository guru: Tue, 19 Jan 2021 15:02:48 +0000
Head commit of repository guru: ba35660cd27b5fc8a3ddf423496703a75359ae4b

Timestamp of repository libressl: Fri, 15 Jan 2021 18:09:27 +0000
Head commit of repository libressl: cc0a1cfe9bbec8fccb028e6165c9539a5f920de9

Timestamp of repository reagentoo: Mon, 18 Jan 2021 23:03:30 +0000
Head commit of repository reagentoo: 8184b707df299e8694565ebe321fa74be95310b6

Timestamp of repository ricerlay: Fri, 15 Jan 2021 18:10:13 +0000
Head commit of repository ricerlay: c6401f2bbb4da3db0519f3b9463394d7e88d72b9

Timestamp of repository waebbl: Fri, 15 Jan 2021 18:10:02 +0000
Head commit of repository waebbl: 39de8f0678afe6d0b28a9111cfec4fefc229d965

Head commit of repository steam-overlay: 6ed5630096d43208168572264f204d40e6b2a5c0

sh bash 5.0_p18
ld GNU ld (Gentoo 2.34 p6) 2.34.0
distcc 3.3.3 x86_64-pc-linux-gnu [enabled]
ccache version 4.1 [enabled]
app-shells/bash:          5.0_p18::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.30.3::gentoo
dev-lang/python:          2.7.18-r5::gentoo, 3.7.9-r1::gentoo, 3.8.6-r1::gentoo, 3.9.0-r1::gentoo
dev-util/ccache:          4.1::gentoo
dev-util/cmake:           3.17.4-r1::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/openrc:          0.42.1::gentoo
sys-apps/sandbox:         2.20::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.16.2-r1::gentoo
sys-devel/binutils:       2.34-r2::gentoo
sys-devel/gcc:            9.3.0-r2::gentoo
sys-devel/gcc-config:     2.3.2-r1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.4-r1::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r5::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-max-age: 24
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1
    sync-rsync-extra-opts: 

dev1990-overlay
    location: /var/db/repos/dev1990-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/dev1990-overlay.git
    masters: gentoo

go-overlay
    location: /var/db/repos/go-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/go-overlay.git
    masters: gentoo

guru
    location: /var/db/repos/guru
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/guru.git
    masters: gentoo

libressl
    location: /var/db/repos/libressl
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/libressl.git
    masters: gentoo

reagentoo
    location: /var/db/repos/reagentoo
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/reagentoo.git
    masters: gentoo

ricerlay
    location: /var/db/repos/ricerlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/ricerlay.git
    masters: gentoo

waebbl
    location: /var/db/repos/waebbl
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/waebbl.git
    masters: gentoo

darthgandalf-overlay
    location: /var/lib/layman/darthgandalf-overlay
    masters: gentoo
    priority: 50

fem-overlay
    location: /var/lib/layman/fem-overlay
    masters: gentoo
    priority: 50

flatpak-overlay
    location: /var/lib/layman/flatpak-overlay
    masters: gentoo
    priority: 50

megacoffee
    location: /var/lib/layman/megacoffee
    masters: gentoo go-overlay
    priority: 50

spikyatlinux
    location: /var/lib/layman/spikyatlinux
    masters: gentoo
    priority: 50

steam-overlay
    location: /usr/local/portage/steam-overlay
    sync-type: git
    sync-uri: https://github.com/anyc/steam-overlay.git
    masters: gentoo
    priority: 50

zugaina
    location: /var/lib/layman/zugaina
    masters: gentoo
    priority: 50

Installed sets: @steam
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=znver1 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=znver1 -O2 -pipe"
DISTDIR="/var/cache/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-march=znver1 -O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs ccache config-protect-if-modified distcc distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-march=znver1 -O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.ussg.iu.edu/pub/linux/gentoo http://gentoo.osuosl.org/ https://gentoo.osuosl.org/ rsync://mirrors.rit.edu/gentoo/ ftp://mirrors.rit.edu/gentoo/ https://mirrors.rit.edu/gentoo/ http://mirrors.rit.edu/gentoo/ https://mirror.sjc02.svwh.net/gentoo/ http://mirror.sjc02.svwh.net/gentoo/ http://mirror.lug.udel.edu/pub/gentoo/ http://gentoo.cs.utah.edu/"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8 -l7"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac acl acpi alsa amd64 berkdb bluetooth branding bzip2 cairo cdda cdr cli crypt cups dbus dri dts dvd dvdr elogind emboss encode exif flac fortran gdbm gif gpm gtk gui iconv icu ipv6 jpeg lcms libglvnd libnotify libtirpc mad mng mp3 mp4 mpeg multilib ncurses nls nptl ogg opengl openmp pam pango pcre pdf png policykit ppds pulseaudio qt5 readline sdl seccomp spell split-usr ssl startup-notification svg tcpd tiff truetype udev udisks unicode upower usb vorbis wayland wxwidgets x264 xattr xcb xml xv xvid zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="libinput" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_7" PYTHON_TARGETS="python2_7 python3_8" QEMU_SOFTMMU_TARGETS="x86_64 riscv32 riscv64 arm" QEMU_USER_TARGETS="x86_64" RUBY_TARGETS="ruby26" USERLAND="GNU" VIDEO_CARDS="amdgpu radeonsi qxl" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Marek Szuba (RETIRED)







          2021-05-04 14:36:19 UTC
        

Cannot reproduce this. You might want to carefully check your distcc configuration to make sure it does not have any dangling symlinks, mixed-up compiler versions et cetera.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

