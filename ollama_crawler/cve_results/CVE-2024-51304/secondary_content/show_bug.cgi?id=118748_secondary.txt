Title: 118748 – rss-glx-0.8.0-r2  installs kde .desktop files when USE=-kde
URL: https://bugs.gentoo.org/show_bug.cgi?id=118748

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 118748
rss-glx-0.8.0-r2  installs kde .desktop files when USE=-kde
Last modified: 2006-02-11 06:00:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 118748 
      - rss-glx-0.8.0-r2  installs kde .desktop files when USE=-kde


Summary:
rss-glx-0.8.0-r2  installs kde .desktop files when USE=-kde
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       trivial
      


Assignee:

Krzysztof Pawlik (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-12 02:12 UTC by Peter Hyman





      Modified:
    
2006-02-11 06:00 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Hyman





          2006-01-12 02:12:02 UTC
        

all files in
/usr/share/applnk/System/Screensavers

placed by rss-glx are for KDE. They should not be installed if -kde is in use. Provided .desktop files are set for KDE. There is no configure option to NOT install them.

These files *.desktop should be removed prior to merging into the filesystem.

Example: biof.desktop

[Desktop Entry]
Encoding=UTF-8
Exec=biof
Icon=kscreensaver
Type=Application
Actions=InWindow;Root
Name=Biof (GL)

[Desktop Action Setup]
Exec=kxsconfig biof
Name=Setup...

[Desktop Action InWindow]
Exec=kxsrun biof -- -window-id %w
Name=Display in specified window
NoDisplay=true
 
[Desktop Action Root]
Exec=kxsrun biof -- --root
Name=Display in root window
NoDisplay=true




Comment 1


Peter Hyman





          2006-01-12 02:25:44 UTC
        

I may have been incorrect. Perhaps a local conf variable should be set if -kde is used.

if ! use kde
local myconf="--without-kdessconfigdir"
fi

something like that. Or, just blow out the desktop files.

from configure...

Optional Packages:
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]
  --with-pic              try to use only PIC/non-PIC objects [default=use
                          both]
  --with-tags[=TAGS]
                          include additional configurations [automatic]
  --with-x                use the X Window System
  --with-configdir        Where is xscreensaver stashing its screensaver configs?
  --with-kdessconfigdir   Where is KDE stashing its screensaver configs?






Comment 2


Peter Hyman





          2006-01-12 02:46:51 UTC
        

that myconf change does NOT stop the .desktop files from being installed. They need to be removed

find ... -name '*desktop' |xargs rm -f

or just remove ${D}/usr/share/applnk/ and below since it's not needed.

something like that.

from the install routine... even with --without-kdessconfig
mkdir -p -- /mnt/src/var/tmp/portage/rss-glx-0.8.0-r2/image//usr/share/applnk/System/ScreenSavers
/bin/install -c -m 644 hufo_smoke.desktop 




Comment 3


Krzysztof Pawlik (RETIRED)






          2006-02-11 06:00:13 UTC
        

0.8.0-r3 doesn't install them for me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

