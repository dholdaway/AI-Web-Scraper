Title: 151208 – nvidia driver 1.0.8774 does not load
URL: https://bugs.gentoo.org/show_bug.cgi?id=151208

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 151208
nvidia driver 1.0.8774 does not load
Last modified: 2006-10-13 13:59:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 151208 
      - nvidia driver 1.0.8774 does not load


Summary:
nvidia driver 1.0.8774 does not load
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-13 11:22 UTC by Jan Hrabe





      Modified:
    
2006-10-13 13:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jan Hrabe





          2006-10-13 11:22:09 UTC
        

# modprobe nvidia
FATAL: Error inserting nvidia (/lib/modules/2.6.17-gentoo-r8/video/nvidia.ko): Unknown symbol in module, or unknown parameter (see dmesg)

-------------

# dmesg | grep nvidia
nvidia: Unknown symbol agp_bind_memory
nvidia: Unknown symbol agp_enable
nvidia: Unknown symbol agp_backend_acquire
nvidia: Unknown symbol agp_bridges
nvidia: Unknown symbol agp_free_memory
nvidia: Unknown symbol agp_allocate_memory
nvidia: Unknown symbol agp_unbind_memory
nvidia: Unknown symbol agp_copy_info
nvidia: Unknown symbol agp_backend_release

-----------------

# emerge --info
Portage 2.1.1 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.12.5
Last Sync: Fri, 13 Oct 2006 14:30:01 +0000
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS=""
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa arts berkdb bitmap-fonts bzip2 cairo cdr cli crypt cups dbus dlloader dri dvd dvdr eds elibc_glibc emacs emboss encode esd fam firefox foomaticdb fortran gdbm gif gimpprint gpm gstreamer hal ieee1394 imagemagic input_devices_keyboard input_devices_mouse isdnlog jpeg kde kernel_linux libg++ mad mikmod mp3 mpeg ncurses nis nls nptl nptlonly ogg opengl oss pam pcre pdf perl pic png ppds pppd python qt3 qt4 quicktime readline reflection ruby sdl session spell spl ssl tcpd tetex tiff truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_nv video_cards_vesa vorbis win32codecs xml xorg xv zlib"    
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

-------------

Note: I currently use the X11 nv and the emerge --info may reflect that in some way.




Comment 1


Jakub Moc (RETIRED)






          2006-10-13 11:25:50 UTC
        

Would help if you compiled it with the same gcc version as your kernel... 




Comment 2


Jan Hrabe





          2006-10-13 13:59:06 UTC
        

(In reply to comment #1)
> Would help if you compiled it with the same gcc version as your kernel... 
> 

Well, it might but what makes you think I haven't?  As far as I am aware,
the whole system had been recompiled with the new gcc quite recently.  Also, why would a compiler update lead to missing agp_something interfaces?

It looks like the problem actualy was that a kernel module agpgart, related to the CONFIG_AGP and CONFIG_AGP_NVIDIA kernel config options, was not loaded.  I now have this built in (instead of a module) and everything works fine again.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

