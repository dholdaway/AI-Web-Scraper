Title: 206343 – [gcc-4.3] smartmontools-5.37 build failure
URL: https://bugs.gentoo.org/show_bug.cgi?id=206343

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 206343
[gcc-4.3] smartmontools-5.37 build failure
Last modified: 2008-01-17 18:29:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 206343 
      - [gcc-4.3] smartmontools-5.37 build failure


Summary:
[gcc-4.3] smartmontools-5.37 build failure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GCC Porting

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




gcc-4.3



 

        Show dependency tree





 





      Reported:
    
2008-01-17 15:12 UTC by Devils-Hawk





      Modified:
    
2008-01-17 18:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




gcc-4.3.0 patch for smartmontools-5.37

              (smartmontools-gcc43.patch,517 bytes,
                patch)

            
2008-01-17 15:15 UTC,

            Devils-Hawk




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Devils-Hawk





          2008-01-17 15:12:33 UTC
        

Redefining a #define is an hard error in C++ now (not in C because the standards differ). gcc-4.3.0 tries to conform => smartmontools do not like that.
Attached patch should fix the compile. I think it preserves behaviour but it should be noted that 1 line above the fix, the old value of the define is used than the redefinition happens and then the new value is used. I do not have any clue how the preprocessor handles this but i assumed it uses the new value only from the point of redefinition onwards.

Reproducible: Always




Comment 1


Devils-Hawk





          2008-01-17 15:15:31 UTC
        

Created attachment 141142 [details, diff]
gcc-4.3.0 patch for smartmontools-5.37




Comment 2


Ryan Hill (RETIRED)






          2008-01-17 18:29:42 UTC
        

Current GCC svn reverts the change that made redefinitions errors.  See http://gcc.gnu.org/bugzilla/show_bug.cgi?id=24924.  Any checkout after -r131530 (14 Jan 2008) will work.  Thanks for the patch though. :)










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

