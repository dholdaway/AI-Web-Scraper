Title: 923334 – net-nds/openldap-2.6.6 fails to compile: ld.lld: error: version script assignment of OPENLDAP_2.200 to symbol ber_sockbuf_io_udp failed: symbol not defined
URL: https://bugs.gentoo.org/show_bug.cgi?id=923334

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 923334
net-nds/openldap-2.6.6 fails to compile: ld.lld: error: version script assignment of OPENLDAP_2.200 to symbol ber_sockbuf_io_udp failed: symbol not defined
Last modified: 2024-09-21 11:08:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 923334 
      - net-nds/openldap-2.6.6 fails to compile: ld.lld: error: version script assignment of OPENLDAP_2.200 to symbol ber_sockbuf_io_udp failed: symbol not defined


Summary:
net-nds/openldap-2.6.6 fails to compile: ld.lld: error: version script assign...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo LDAP project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-01-30 11:55 UTC by Agostino Sarubbo





      Modified:
    
2024-09-21 11:08 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



contyk
jy6x2b32pie9
mark.j
robbat2









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,128.88 KB,
                text/plain)

            
2024-01-30 11:55 UTC,

            Agostino Sarubbo




Details





build.log (2.6.8)

              (openldap-2.6.8-build.log,48.06 KB,
                text/plain)

            
2024-08-27 08:44 UTC,

            Petr Šabata




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2024-01-30 11:55:55 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: net-nds/openldap-2.6.6 fails to compile.
Discovered on: amd64 (internal ref: python-3.12_tinderbox)
System: CLANG-LLD (https://wiki.gentoo.org/wiki/Project:Tinderbox/Common_Issues_Helper#CLANG-LLD)

Info about the issue:
https://wiki.gentoo.org/wiki/Project:Tinderbox/Common_Issues_Helper#CF0014




Comment 1


Agostino Sarubbo






          2024-01-30 11:55:57 UTC
        

Created attachment 883719 [details]
build.log

build log and emerge --info




Comment 2


NHO





          2024-04-28 19:35:31 UTC
        

upstream bug: https://bugs.openldap.org/show_bug.cgi?id=9982




Comment 3


NHO





          2024-04-29 05:03:04 UTC
        

That was wrong upstream bug, sorry. Relevant code from that bug is in.

https://bugs.openldap.org/show_bug.cgi?id=9739




Comment 4


Mosaic J





          2024-07-17 16:59:20 UTC
        

Hi, has this been resolved or have you found a way to work around? I have just encountered the same issue and don't know what's to do now. Would you like to kindly share if you made progress?




Comment 5


Robin Johnson









          2024-08-25 20:05:05 UTC
        

1. I cannot reproduce this.
2. Please retest with 2.6.8
3. Those upstream bugs are NOT the correct bugs; those deal w/ the LDAP_CONNECTIONLESS code, that is NOT enabled in ago's build.




Comment 6


Petr Šabata





          2024-08-27 08:43:53 UTC
        

(In reply to Robin Johnson from comment #5)
> 1. I cannot reproduce this.
> 2. Please retest with 2.6.8

Odd, as I can reproduce this right away with the following:

=net-nds/openldap-2.6.8
+ llvm/clang/lld 18.1.8

I'll attach the build.log but it's effectively still the same as the original one.

(In reply to Mosaic J from comment #4)
> Hi, has this been resolved or have you found a way to work around? I have
> just encountered the same issue and don't know what's to do now. Would you
> like to kindly share if you made progress?

This is a common issue starting with llvm 17; as a workaround you can add "-Wl,--undefined-version" to your LDFLAGS.




Comment 7


Petr Šabata





          2024-08-27 08:44:47 UTC
        

Created attachment 901297 [details]
build.log (2.6.8)




Comment 8


Petr Šabata





          2024-09-21 11:08:36 UTC
        

Just for the record, still reproducible with LLVM 19.1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

