Title: 234295 – x11-drivers/ati-drivers-{8.493,8.501} - Unable to modprobe fglrx module with 2.6.25.* kernel
URL: https://bugs.gentoo.org/show_bug.cgi?id=234295

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 234295
x11-drivers/ati-drivers-{8.493,8.501} - Unable to modprobe fglrx module with 2.6.25.* kernel
Last modified: 2008-09-17 18:42:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 234295 
      - x11-drivers/ati-drivers-{8.493,8.501} - Unable to modprobe fglrx module with 2.6.25.* kernel


Summary:
x11-drivers/ati-drivers-{8.493,8.501} - Unable to modprobe fglrx module with ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Luca Barbato








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-09 08:04 UTC by Aniruddha





      Modified:
    
2008-09-17 18:42 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



htuomola
je_fro
x11-drivers









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Aniruddha





          2008-08-09 08:04:09 UTC
        

Since kernel 2.6.25.* The fglrx module won't load:

# modprobe fglrx
FATAL: Error inserting fglrx (/lib/modules/2.6.25-gentoo-r7/video/fglrx.ko): Invalid module format

Unused symbols are enabled in the kernel:

[*] Enable unused/obsolete exported symbols  

# emerge --info
Portage 2.1.4.4 (default/linux/x86/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r7 i686)
=================================================================
System uname: 2.6.25-gentoo-r7 i686 Intel(R) Core(TM)2 Duo CPU E8400 @ 3.00GHz
Timestamp of tree: Fri, 08 Aug 2008 15:00:01 +0000
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r13, 2.5.2-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.tiscali.nl/ "
LANG="C"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl acpi alsa avahi berkdb bluetooth branding bzip2 cairo cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread eds emboss encode esd evo fam firefox fortran gdbm gif gnome gpm gstreamer gtk hal iconv ipv6 isdnlog jpeg kerberos ldap libnotify mad midi mikmod mp3 mpeg mudflap ncurses nls nptl nptlonly ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3support quicktime readline reflection sdl session spell spl ssl startup-notification svg sysfs tcpd tiff truetype unicode usb vorbis win32codecs x86 xml xorg xulrunner xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="fglrx radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Reproducible: Always




Comment 1


Jeroen Roovers (RETIRED)






          2008-08-11 16:45:13 UTC
        

Did you try rebuilding that module against those kernel sources yet?




Comment 2


Aniruddha





          2008-08-11 16:57:53 UTC
        

(In reply to comment #1)
> Did you try rebuilding that module against those kernel sources yet?
> 

I did re-merge ati-drivers. See for more detailed information:
http://forums.gentoo.org/viewtopic-t-700972-highlight-.html




Comment 3


Jeroen Roovers (RETIRED)






          2008-08-12 15:46:07 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> > Did you try rebuilding that module against those kernel sources yet?
> > 
> 
> I did re-merge ati-drivers. See for more detailed information:
> http://forums.gentoo.org/viewtopic-t-700972-highlight-.html

Sorry - I am not going to parse tens of pages of information looking for what you intended to show me. It may still be there, it may have been edited out, it might be in the thread starter or in comment #456 pointing to a Google search which showed up a single reference from its cache originating from a website that went bust in 2003 - I just can't be sure...

So please either summarise the relevant information right here on the bug report or close it.




Comment 4


Aniruddha





          2008-08-12 16:52:10 UTC
        

(In reply to comment #3)
> (In reply to comment #2)
> > (In reply to comment #1)
> > > Did you try rebuilding that module against those kernel sources yet?
> > > 
> > 
> > I did re-merge ati-drivers. See for more detailed information:
> > http://forums.gentoo.org/viewtopic-t-700972-highlight-.html
> 
> Sorry - I am not going to parse tens of pages of information looking for what
> you intended to show me. It may still be there, it may have been edited out, it
> might be in the thread starter or in comment #456 pointing to a Google search
> which showed up a single reference from its cache originating from a website
> that went bust in 2003 - I just can't be sure...
> 
> So please either summarise the relevant information right here on the bug
> report or close it.
> 

1st I did summarize my answer (read ->  'I did re-merge ati-drivers')
2nd If you had clicked the link you had found the relevant information immediately. 
3rd I personally couldn't care less whether this bug gets closed. I found a bug and decided to share this information here in order to make Gentoo better for everyone.






Comment 5


Michal Kurgan (RETIRED)






          2008-08-12 19:31:49 UTC
        

did you run "make modules_install" for kernel before "emerge ati-drivers"?
what version of x11-drivers/ati-drivers are you using?
do you have any additional messages is dmesg?





Comment 6


Aniruddha





          2008-08-12 19:39:00 UTC
        

(In reply to comment #5)
> did you run "make modules_install" for kernel before "emerge ati-drivers"?
> what version of x11-drivers/ati-drivers are you using?
> do you have any additional messages is dmesg?
> 

I used genkernel to compile the kernel which includes a "make modules_install". I tried both ati-drivers 8.493 and 8.501.





Comment 7


Michal Kurgan (RETIRED)






          2008-08-12 21:13:43 UTC
        

Are there any additional information in system log (dmesg) after "modprobe fglrx"?




Comment 8


Aniruddha





          2008-08-15 22:16:56 UTC
        

Marking this "worksforme" since I haven't been able to reproduce this bug on the same machine with a newly installed Gentoo.




Comment 9


mnd





          2008-08-17 10:26:41 UTC
        

(In reply to comment #8)
> Marking this "worksforme" since I haven't been able to reproduce this bug on
> the same machine with a newly installed Gentoo.
> 

I got this same error with 2.6.25-r7 and ati-drivers 8.501 on a freshly installed system. Checking dmesg after that unsuccessful module loading it says:

fglrx: disagrees about version of symbol struct_module

I 'solved' the problem by changing to 2.6.25-r8, on which those drivers work fine.




Comment 10


mnd





          2008-08-17 10:27:45 UTC
        

(In reply to comment #9)
> I 'solved' the problem by changing to 2.6.25-r8, on which those drivers work
> fine.
> 
Uh, I of course meant 2.6.24-r8.






Comment 11


Aniruddha





          2008-09-17 14:50:26 UTC
        

Reopening cause the problems occurred again :(




Comment 12


Jeroen Roovers (RETIRED)






          2008-09-17 18:01:57 UTC
        

(In reply to comment #4)
> (In reply to comment #3)
> > > I did re-merge ati-drivers. See for more detailed information:
> > > http://forums.gentoo.org/viewtopic-t-700972-highlight-.html

> 2nd If you had clicked the link you had found the relevant information
> immediately. 

I explained why I wasn't going to do that. :)

> 3rd I personally couldn't care less whether this bug gets closed. I found a bug
> and decided to share this information here in order to make Gentoo better for
> everyone.

Is that supposed to be an ad hominem? I work +20 hours a week to make Gentoo better, with no pay. :)

Anyway, I'm out of here. I'm assuming now that this is a problem with x11-drivers/ati-drivers...




Comment 13


Luca Barbato






          2008-09-17 18:42:28 UTC
        

I know for sure that the latest driver works with the .26 kernel since I have such combination working.

Could you please try those?










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

