Title: 158865 – media-libs/libvorbis-{1.1.0,1.1.2} fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=158865

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 158865
media-libs/libvorbis-{1.1.0,1.1.2} fails to compile
Last modified: 2007-08-23 07:12:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 158865 
      - media-libs/libvorbis-{1.1.0,1.1.2} fails to compile


Summary:
media-libs/libvorbis-{1.1.0,1.1.2} fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       major
      


Assignee:

ppc64 architecture team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-12-22 14:43 UTC by Charlie Page





      Modified:
    
2007-08-23 07:12 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



charlie.page









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The emerge output for libvorbis 1.1.2

              (emerge-output.txt,20.20 KB,
                text/plain)

            
2006-12-22 14:45 UTC,

            Charlie Page




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Charlie Page





          2006-12-22 14:43:38 UTC
        

the emerge output for libvorbis 1.1.2 is attached.


emerge --info
Portage 2.1.1-r2 (default-linux/ppc/ppc64/2006.1/32bit-userland/power5, gcc-4.1.1, glibc-2.4-r4, 2.6.18-gentoo-r3 ppc64)
=================================================================
System uname: 2.6.18-gentoo-r3 ppc64 POWER5 (gr)
Gentoo Base System version 1.12.6
Last Sync: Fri, 22 Dec 2006 17:00:01 +0000
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/init.d /etc/java-config/vms/ /etc/man.conf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.espri.arizona.edu/gentoo http://mirrors.acm.cs.rpi.edu/gentoo/"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="ppc X a52 aac acl alsa alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol amarok amr apache2 apm arts bash-completion berkdb bitmap-fonts c++ caps chroot cli cracklib crypt cups dlloader dri dvd dvdr dvdread eds elibc_glibc emboss encode esd firefox foomaticdb fortran gcc64 gdbm gif gimpprint gnome gpm gstreamer gtk hal hpn ibm iconv imap imlib input_devices_evdev input_devices_keyboard input_devices_mouse isdnlog java javascript jikes jpeg kde kernel_linux lcms ldap ldapsam libg++ libwww lua lzo mad mikmod mjpeg mng modplug motif mozbranding mp3 mp4 mp4live mpeg mpeg2 multipleip nas ncurses network new-login nfs nls no-old-linux nptl nptlonly nsplugin ogg opengl pam pam_chroot pam_console pam_timestamp pcre pda pdf pear-db perl php png posix postgres pppd python qt3 qt4 quicktime quotas rdesktop readline reflection samba sdl server session slp sndfile spell spl sql sqlite ssl stlport svg tcpd threads thunderbird tiff truetype truetype-fonts type1-fonts udev unicode userland_GNU userlocales utempter video_cards_ati video_cards_dummy video_cards_fbdev video_cards_mga video_cards_nv video_cards_sisusb video_cards_v4l vnc vorbis wma wmf xml xorg xprint xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Charlie Page





          2006-12-22 14:45:26 UTC
        

Created attachment 104608 [details]
The emerge output for libvorbis 1.1.2

fails on the assembler code




Comment 2


nixnut (RETIRED)






          2007-01-20 19:47:39 UTC
        

Our ppc64 friends probably have a better idea how to deal with this.




Comment 3


Markus Rothe (RETIRED)






          2007-01-20 20:15:44 UTC
        

seems to be related to 32bit userland. 64bit userland compiles fine here. would you please try this:

$ emerge setarch --noreplace
$ setarch ppc
$ emerge libvorbis




Comment 4


Charlie Page





          2007-01-20 23:49:18 UTC
        

(In reply to comment #3)
> seems to be related to 32bit userland. 64bit userland compiles fine here. would
> you please try this:
> 
> $ emerge setarch --noreplace
> $ setarch ppc
> $ emerge libvorbis
> 

doesn't seem to work.

if /bin/sh ../libtool --tag=CC --mode=compile powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include      -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT analysis.lo -MD -MP -MF ".deps/analysis.Tpo" -c -o analysis.lo analysis.c; \
        then mv -f ".deps/analysis.Tpo" ".deps/analysis.Plo"; else rm -f ".deps/analysis.Tpo"; exit 1; fi
{standard input}: Assembler messages:
{standard input}:382: Error: junk at end of line: `1'
{standard input}:384: Error: junk at end of line: `1'
make[3]: *** [lsp.lo] Error 1
make[3]: *** Waiting for unfinished jobs....
 powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT lpc.lo -MD -MP -MF .deps/lpc.Tpo -c lpc.c  -fPIC -DPIC -o .libs/lpc.o
 powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT analysis.lo -MD -MP -MF .deps/analysis.Tpo -c analysis.c  -fPIC -DPIC -o .libs/analysis.o
 powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT lpc.lo -MD -MP -MF .deps/lpc.Tpo -c lpc.c -o lpc.o >/dev/null 2>&1
 powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT analysis.lo -MD -MP -MF .deps/analysis.Tpo -c analysis.c -o analysis.o >/dev/null 2>&1
make[3]: Leaving directory `/var/tmp/portage/libvorbis-1.1.2/work/libvorbis-1.1.2/lib'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/libvorbis-1.1.2/work/libvorbis-1.1.2/lib'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/libvorbis-1.1.2/work/libvorbis-1.1.2'
make: *** [all] Error 2

!!! ERROR: media-libs/libvorbis-1.1.2 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  libvorbis-1.1.2.ebuild, line 62:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.





Comment 5


Markus Rothe (RETIRED)






          2007-06-09 14:59:46 UTC
        

ok. new idea: can you please run the last compiler command with the -save-temps option? The configure script might detect powerpc64/powerpc wrong?

i.e. powerpc-unknown-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -I../include      -O3 -ffast-math -mfused-madd -mcpu=750 -D_REENTRANT -mtune=power5 -mcpu=power5 -O2 -pipe -fomit-frame-pointer -DUSE_MEMORY_H -MT analysis.lo -MD -MP -MF ".deps/analysis.Tpo" -c -o analysis.lo analysis.c -save-temps




Comment 6


Markus Rothe (RETIRED)






          2007-08-23 07:12:12 UTC
        

unfortunately I cannot reproduce this and the reporter doesn't seem to be active any more.

Charlie: please reopen with the file from comment #5 attached, if you still have this issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

