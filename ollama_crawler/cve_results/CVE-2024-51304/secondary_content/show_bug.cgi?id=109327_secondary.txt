Title: 109327 – VLC-0.8.1-r1 fails to find mozplugins (can't open included file nsISupports.idl for reading)
URL: https://bugs.gentoo.org/show_bug.cgi?id=109327

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 109327
VLC-0.8.1-r1 fails to find mozplugins (can't open included file nsISupports.idl for reading)
Last modified: 2005-10-15 04:42:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 109327 
      - VLC-0.8.1-r1 fails to find mozplugins (can't open included file nsISupports.idl for reading)


Summary:
VLC-0.8.1-r1 fails to find mozplugins (can't open included file nsISupports.i...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-14 21:50 UTC by Craig





      Modified:
    
2005-10-15 04:42 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Craig





          2005-10-14 21:50:39 UTC
        

I'm fairly new at Gentoo, so I hope I get this right. Please forgive & correct
any trangressions and misunderstandings so I can learn :-)

I tried to emerge vlc a few times with the same result "vlcintf.idl:3: can't
open included file nsISupports.idl for reading". Eventually I was able to get it
working with a little grunt work.

I didn't have a -I /usr/lib/mozilla/include/idl or a -I /usr/share/idl/mozilla
directory as the errors suggested, so I created them.

On my system all the .IDL's were in /usr/lib/mozilla-firefox/idl (This is not in
the -I's.)

I had to cd into the created /usl/lib/mozilla/include/idl and do a cp
/usr/lib/mozilla-firefox/idl/*.idl .

This allowed vlc to compile cleanly, but has left .IDL's in a directory that was
not in the firefox ebuild. I see this as a risk should Firefox ever be updated.

I have now removed all these "temporary" copies of the .IDL's to ensure I don't
emerge --update sometime in the future with bad files. This will break any
future recompile of VLC but this is better (IMHO) than leaving them there.

How do I modify things so /usr/lib/mozilla-firefox/idl becomes a -I at this
point? Or am I going about things the wrong way, is something on my system or a
misunderstanding of the way things work causing the error?


Reproducible: Always
Steps to Reproduce:
1.emerge vlc
2.
3.

Actual Results:  
/usr/bin/xpidl  -I/usr/share/idl/mozilla \
  -I/usr/lib/mozilla/include/idl \
  -m header -o vlcintf ./vlcintf.idl
./vlcintf.idl:3: can't open included file nsISupports.idl for reading


Expected Results:  
vlc should emerge cleanly without having to copy .IDL's into a valid include
directory.

In my case at least /usr/lib/mozilla-firefox/idl should also be an include
directory.

Here is the tail of my compile.

make[2]: Leaving directory `/var/tmp/portage/vlc-0.8.1-r1/work/vlc-0.8.1'
Making all in mozilla
make[2]: Entering directory `/var/tmp/portage/vlc-0.8.1-r1/work/vlc-0.8.1/mozilla'
/usr/bin/xpidl  -I/usr/share/idl/mozilla \
  -I/usr/lib/mozilla/include/idl \
  -m header -o vlcintf ./vlcintf.idl
./vlcintf.idl:3: can't open included file nsISupports.idl for reading

input callback returned failure
make[2]: *** [vlcintf.h] Error 2
make[2]: Leaving directory `/var/tmp/portage/vlc-0.8.1-r1/work/vlc-0.8.1/mozilla'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/vlc-0.8.1-r1/work/vlc-0.8.1'
make: *** [all] Error 2

!!! ERROR: media-video/vlc-0.8.1-r1 failed.
!!! Function src_compile, Line 197, Exitcode 2
!!! make of VLC failed
!!! If you need support, post the topmost build error, NOT this status message.

Here is my environment.

gentoo # emerge --info
Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r2,
2.6.12-gentoo-r10 i686)
=================================================================
System uname: 2.6.12-gentoo-r10 i686 Intel(R) Pentium(R) 4 CPU 2.00GHz
Gentoo Base System version 1.6.13
ccache version 2.3 [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O3 -pipe -mmmx -msse -msse2 -fomit-frame-pointer
-mcpu=i686"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS=""
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.iinet.net.au/pub/Gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.au.gentoo.org/gentoo-portage"
USE="x86 X aac acpi alsa amarok amd apache2 apm arts avi bash-completion berkdb
bitmap-fonts bluetooth cdda cddb cdr cdrom commercial crypt css cups curl
directfb divx4linux dvd dvdr eds encode fam fat firefox flac foomaticdb fortran
ftp gd gd-external gif gmail gmailtimestamps gnome gpm gstreamer gtk gtk2 hpn
ieee1394 imagemagick imap imlib ipv6 java javascript jit jpeg jpg junit kde
kernel_linux libg++ libwww lm_sensors mad mailbox maildir mmx mmx2 mmxext motif
mp3 mpeg mpeg2 mpeg4 mplayer mysql nas ncurses nls nsplugin nvidia ogg oggvorbis
opengl openssh openssl oss pam pam-mysql pdflib perl php pic png procmail python
qt quicktime readline reiserfs samba sasl scp sdk sdl session sftp slang snmp
spell sse sse2 ssl subtitles svga tcltk tcpd tiff truetype truetype-fonts type1
type1-fonts usb userland_GNU vorbis xinerama xml2 xmms xprint xscreensaver xv
xvid zlib elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Diego Elio Pettenò (RETIRED)






          2005-10-15 04:42:12 UTC
        

0.8.1-r1 requires the complete mozilla suite and *should* build against that 
fairly well if they haven't changes locations or other similar things. 
 
If you want it to work fine, it's anyway suggested to use 0.8.2-r1 instead, as 
that builds against gecko-sdk. 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

