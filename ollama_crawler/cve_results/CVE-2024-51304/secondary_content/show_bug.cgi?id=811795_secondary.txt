Title: 811795 – sys-apps/baselayout adds host paths to prefix systems
URL: https://bugs.gentoo.org/show_bug.cgi?id=811795

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 811795
sys-apps/baselayout adds host paths to prefix systems
Last modified: 2022-07-19 15:53:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 811795 
      - sys-apps/baselayout adds host paths to prefix systems


Summary:
sys-apps/baselayout adds host paths to prefix systems
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-09-05 22:39 UTC by William Hubbs





      Modified:
    
2022-07-19 15:53 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



alexey+gentoo
base-system
williamh









See Also:


811789





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


William Hubbs






          2021-09-05 22:39:06 UTC
        

The issue is the addition to PATH in /etc/env.d/99host. It causes
breakages like the one I've added to this bug as a blocker.

My approach from the baselayout side would be to drop the creation of
/etc/env.d/99host for prefix systems
(I don't see this as a meson bug), but I don't know what the ramifications
of that are.

Thoughts?

William




Comment 1


William Hubbs






          2021-09-05 22:47:01 UTC
        

I will drop the blocker because it turned out that this is an automagic
dependency. This means the build system for the package in question
needs to be fixed.

However, I still think it is a concern that baselayout is adding paths
on the host system to the environment inside a prefix.

Thoughts?

William




Comment 2


Mike Gilbert






          2021-09-05 22:51:51 UTC
        

I think this bug is invalid. Having extra elements in PATH should not be harmful to ebuilds.




Comment 3


William Hubbs






          2021-09-05 23:55:03 UTC
        

I want to turn this bug into more of a discussion.

Adding host paths to a prefix can confuse build systems like the example
bug I linked in See also.

It is true that this flushed out an automagic dependency. However, I
would like to know more about why baselayout adds host paths to prefix
systems and if there is possibly a better way to do it so that emerging
packages inside the prefix doesn't get confused between
what it finds in the prefix vs what it finds on the host system.




Comment 4


Fabian Groffen






          2021-09-06 09:48:18 UTC
        

the host paths are added because there's tools that cannot be provided by the prefix, this is in particular for things like prtconv or other system utilities that configure uses to determine what box one's running on.  Others are utilities such as dmesg or top that you want to be able to use within the Prefix, but cannot be provided or requires root e.g. to setuid.




Comment 5


Fabian Groffen






          2022-07-19 15:53:28 UTC
        

Host paths are intentionally added to allow prefix users access to binaries that cannot be provided by the prefix guest.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

