Title: 813117 – sys-devel/gcc-11.2.0: compiles (libgfortran?) in src_install
URL: https://bugs.gentoo.org/show_bug.cgi?id=813117

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 813117
sys-devel/gcc-11.2.0: compiles (libgfortran?) in src_install
Last modified: 2024-08-09 14:32:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 813117 
      - sys-devel/gcc-11.2.0: compiles (libgfortran?) in src_install


Summary:
sys-devel/gcc-11.2.0: compiles (libgfortran?) in src_install
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-09-15 01:01 UTC by Sam James





      Modified:
    
2024-08-09 14:32 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sam James









          2021-09-15 01:01:22 UTC
        

Noticed this a few times recently.

```
# grep ">>> Install" sys-devel/gcc-11.2.0/temp/build.log
>>> Install sys-devel/gcc-11.2.0 into /var/tmp/portage/sys-devel/gcc-11.2.0/image

```

And yet:
```
# tail -F sys-devel/gcc-11.2.0/temp/build.log -n 2
/bin/bash ./libtool  --tag=CC   --mode=compile /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/xgcc -B/var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/ -B/usr/x86_64-pc-linux-gnu/bin/ -B/usr/x86_64-pc-linux-gnu/lib/ -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include    -DHAVE_CONFIG_H -I. -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp  -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux/x86 -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/posix -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/../include  -Wall -ftls-model=initial-exec -DUSING_INITIAL_EXEC_TLS -Wc,-pthread -fcf-protection -mshstk -g -pipe -march=native -fdiagnostics-color=always -O2  -m32 -MT env.lo -MD -MP -MF .deps/env.Tpo -c -o env.lo /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/env.c
libtool: compile:  /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/xgcc -B/var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/ -B/usr/x86_64-pc-linux-gnu/bin/ -B/usr/x86_64-pc-linux-gnu/lib/ -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include -DHAVE_CONFIG_H -I. -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux/x86 -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/posix -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/../include -Wall -ftls-model=initial-exec -pthread -DUSING_INITIAL_EXEC_TLS -fcf-protection -mshstk -g -pipe -march=native -fdiagnostics-color=always -O2 -m32 -MT env.lo -MD -MP -MF .deps/env.Tpo -c /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/env.c  -fPIC -DPIC -o .libs/env.o
```

For example:
```
root     2121149  0.0  0.0   7496  2620 pts/3    SN+  01:00   0:00 /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/xgcc -B/var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gc / -B/usr/x86_64-pc-linux-gnu/bin/ -B/usr/x86_64-pc-linux-gnu/lib/ -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include -DHAVE_CONFIG_H -I. -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux/x86 -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/posix -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I/var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/../include -Wall -ftls-model=initial-exec -pthread -DUSING_INITIAL_EXEC_TLS -fcf-protection -mshstk -g -pipe -march=native -fdiagnostics-color=always -O2 -m32 -MT task.lo -MD -MP -MF .deps/task.Tpo -c /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/task.c -fPIC -DPIC -o .libs/task.o
root     2121150  0.0  0.3  71676 50196 pts/3    RN+  01:00   0:00 /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/cc1 -quiet -I . -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux/x86 -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/linux -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/config/posix -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp -I /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/../include -imultilib 32 -iprefix /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/gcc/../../../lib/gcc/x86_64-pc-linux-gnu/11.2.0/ -isystem /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/include -isystem /var/tmp/portage/sys-devel/gcc-11.2.0/work/build/./gcc/include-fixed -MD .libs/task.d -MF .deps/task.Tpo -MP -MT task.lo -D_REENTRANT -D HAVE_CONFIG_H -D USING_INITIAL_EXEC_TLS -D PIC -isystem /usr/x86_64-pc-linux-gnu/include -isystem /usr/x86_64-pc-linux-gnu/sys-include /var/tmp/portage/sys-devel/gcc-11.2.0/work/gcc-11.2.0/libgomp/task.c -march=tigerlake -mmmx -mpopcnt -msse -msse2 -msse3 -mssse3 -msse4.1 -msse4.2 -mavx -mavx2 -mno-sse4a -mno-fma4 -mno-xop -mfma -mavx512f -mbmi -mbmi2 -maes -mpclmul -mavx512vl -mavx512bw -mavx512dq -mavx512cd -mno-avx512er -mno-avx512pf -mavx512vbmi -mavx512ifma -mno-avx5124vnniw -mno-avx5124fmaps -mavx512vpopcntdq -mavx512vbmi2 -mgfni -mvpclmulqdq -mavx512vnni -mavx512bitalg -mno-avx512bf16 -mavx512vp2intersect -mno-3dnow -madx -mabm -mno-cldemote -mclflushopt -mclwb -mno-clzero -mcx16 -mno-enqcmd -mf16c -mfsgsbase -mfxsr -mno-hle -msahf -mno-lwp -mlzcnt -mmovbe -mmovdir64b -mmovdiri -mno-mwaitx -mno-pconfig -mpku -mno-prefetchwt1 -mprfchw -mno-ptwrite -mrdpid -mrdrnd -mrdseed -mno-rtm -mno-serialize -mno-sgx -msha -mshstk -mno-tbm -mno-tsxldtrk -mvaes -mno-waitpkg -mno-wbnoinvd -mxsave -mxsavec -mxsaveopt -mxsaves -mno-amx-tile -mno-amx-int8 -mno-amx-bf16 -mno-uintr -mno-hreset -mno-kl -mno-widekl -mno-avxvnni --param l1-cache-size=48 --param l1-cache-line-size=64 --param l2-cache-size=24576 -mtune=tigerlake -quiet -dumpdir .libs/ -dumpbase task.c -dumpbase-ext .c -mshstk -m32 -g -O2 -Wall -fdiagnostics-color=always -ftls-model=initial-exec -fcf-protection=full -fPIC -o -
```

I'll attach a log once rebuilt gcc as I hadn't set it up to save (gah!).




Comment 1


Sam James









          2024-08-09 14:32:26 UTC
        

I suspect this is really the relinking libtool does (maybe in the ancient libtool in GCC). Not seen this recently either.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

