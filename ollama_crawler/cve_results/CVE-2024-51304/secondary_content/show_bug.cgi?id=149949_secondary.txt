Title: 149949 – portmap not automatically installed
URL: https://bugs.gentoo.org/show_bug.cgi?id=149949

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 149949
portmap not automatically installed
Last modified: 2007-03-25 12:33:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 149949 
      - portmap not automatically installed


Summary:
portmap not automatically installed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-03 05:24 UTC by Peter Bienstman (RETIRED)





      Modified:
    
2007-03-25 12:33 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Bienstman (RETIRED)






          2006-10-03 05:24:08 UTC
        

I've installed a new Gentoo server on amd64 machines. During shutdown, it complained about not being able to find portmap, and it actually turned out portmap was not installed, so I had to emerge it manually.

This means that somewhere there is a missing dependency...

Portage 2.1.1-r1 (default-linux/amd64/2006.1/server, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r8 x86_64 Dual Core AMD Opteron(tm) Processor 270
Gentoo Base System version 1.12.5
Last Sync: Mon, 02 Oct 2006 21:50:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: [Not Present]
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=opteron -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=opteron -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ "
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X apache2 bash-completion berkdb bitmap-fonts cli crypt cups dlloader dri elibc_glibc fortran gdbm gpm gtk input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog jpeg kernel_linux ldap libg++ logrotate mailwrapper mysql ncurses nls nptl nptlonly pam pcre perl png ppds pppd python readline reflection session snmp spl ssl tcpd tiff tk truetype truetype-fonts type1-fonts udev unicode userland_GNU video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i810 video_cards_mga video_cards_neomagic video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo xml xorg zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2006-10-03 05:28:28 UTC
        

"it complained" - exactly what complained?





Comment 2


Peter Bienstman (RETIRED)






          2006-10-03 05:35:13 UTC
        

A service that was shutting down (unable to stop portmap). I think NFS, but I'm not exactly sure, as once I emerged portmap, the message obviously disappeared.




Comment 3


SpanKY






          2006-10-03 05:50:20 UTC
        

this is on purpose ... the netmount script is written generically so that it works with all network based filesystems and if it detects nfs, it'll require portmap

we cant force portmap in RDEPEND as not everyone wants it




Comment 4


Peter Bienstman (RETIRED)






          2006-10-03 06:03:48 UTC
        

So why does the netmount script require portmap if it detects NFS, if you say portmap is not needed for NFS?




Comment 5


SpanKY






          2006-10-03 06:11:12 UTC
        

i never said that




Comment 6


Peter Bienstman (RETIRED)






          2006-10-03 06:17:24 UTC
        

OK, so the conclusion is that if you want NFS, you should be manually emerging portmap, as the only way portage could know you are using NFS is by looking e.g. at fstab or the kernel config?

Perhaps the netmount script could print out a warning saying that portmap should be installed, rather than saying portmap could not be stopped?




Comment 7


SpanKY






          2006-10-03 06:26:21 UTC
        

correct, that is the only way portage could know ... and it gets even more complicated as you can use NFS mounts perfectly fine without portmap if you specify enough options while mounting (i do this on all my machines so i dont need portmap)

the warning comes from the baselayout init system, not from the netmount script; but that is because the netmount script adds 'portmap' to depend ...




Comment 8


SpanKY






          2007-03-25 12:33:57 UTC
        

nothing to be done i think and netmount has some more tweaks wrt nfs/portmap









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

