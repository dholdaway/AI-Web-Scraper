Title: 153697 – emerge maildrop fails on libfam
URL: https://bugs.gentoo.org/show_bug.cgi?id=153697

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 153697
emerge maildrop fails on libfam
Last modified: 2006-11-05 12:13:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 153697 
      - emerge maildrop fails on libfam


Summary:
emerge maildrop fails on libfam
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Fernando J. Pereda (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-01 07:51 UTC by Scorpaen





      Modified:
    
2006-11-05 12:13 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



net-mail+disabled
scorpaen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Scorpaen





          2006-11-01 07:51:36 UTC
        

i have recompiled libfam, restarted famd, restarted server. 

neo scorpaen # emerge --info
Portage 2.1.1-r1 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 i686)
=================================================================
System uname: 2.6.17-gentoo-r8 i686 Intel(R) Xeon(TM) CPU 2.40GHz
Gentoo Base System version 1.12.5
Last Sync: Wed, 01 Nov 2006 03:00:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 apache2 apm berkdb bitmap-fonts bzip2 cli cracklib crypt cups dba dlloader dri eds elibc_glibc emboss encode fam foomaticdb fortran gd gdbm gif gpm gstreamer gtk2 iconv imagemagick imap imlib input_devices_evdev input_devices_keyboard input_devices_mouse isdnlog jpeg jpg kernel_linux libg++ libwww mad mikmod motif mp3 mpeg mysql ncurses nls nptl nptlonly ogg oss pam pcre perl png pppd python qt3 qt4 quicktime readline reflection sdl sesion session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev userland_GNU video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i740 video_cards_i810 video_cards_imstt video_cards_mga video_cards_neomagic video_cards_nsc video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo vorbis xml xorg zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Scorpaen





          2006-11-01 07:56:11 UTC
        

Linking maildiracl
/usr/lib/libfam.a(fam.o): In function `GroupStuff::GroupStuff()':
: undefined reference to `operator new[](unsigned int)'
/usr/lib/libfam.a(fam.o): In function `GroupStuff::GroupStuff()':
: undefined reference to `operator new[](unsigned int)'
/usr/lib/libfam.a(fam.o): In function `FAMClose':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(fam.o): In function `FAMOpen2':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(fam.o): In function `FAMOpen2':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(fam.o): In function `FAMOpen2':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(fam.o): In function `FAMMonitor(FAMConnection*, char const*, FAMRequest*, void*, int)':
: undefined reference to `operator delete[](void*)'
/usr/lib/libfam.a(fam.o): In function `FAMMonitor(FAMConnection*, char const*, FAMRequest*, void*, int)':
: undefined reference to `operator delete[](void*)'
/usr/lib/libfam.a(fam.o): In function `FAMMonitorCollection':
: undefined reference to `operator delete[](void*)'
/usr/lib/libfam.a(fam.o): In function `FAMMonitorCollection':
: undefined reference to `operator delete[](void*)'
/usr/lib/libfam.a(fam.o):(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
/usr/lib/libfam.a(Client.o): In function `__static_initialization_and_destruction_0(int, int)':
: undefined reference to `std::ios_base::Init::Init()'
/usr/lib/libfam.a(Client.o): In function `Client::storeEndExist(int)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `Client::storeUserData(int, void*)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `__tcf_0':
: undefined reference to `std::ios_base::Init::~Init()'
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::Node::~Node()':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::underflow(BTree<int, bool>::Node*, unsigned int)':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::underflow(BTree<int, bool>::Node*, unsigned int)':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, void*>::Node::~Node()':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, void*>::underflow(BTree<int, void*>::Node*, unsigned int)':
: undefined reference to `operator delete(void*)'
/usr/lib/libfam.a(Client.o):: more undefined references to `operator delete(void*)' follow
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::insert(BTree<int, bool>::Node*, int const&, bool const&)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::insert(BTree<int, bool>::Node*, int const&, bool const&)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, bool>::insert(BTree<int, bool>::Node*, int const&, bool const&)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, void*>::insert(BTree<int, void*>::Node*, int const&, void* const&)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o): In function `BTree<int, void*>::insert(BTree<int, void*>::Node*, int const&, void* const&)':
: undefined reference to `operator new(unsigned int)'
/usr/lib/libfam.a(Client.o):: more undefined references to `operator new(unsigned int)' follow
/usr/lib/libfam.a(Client.o):(.rodata._ZTI5BTreeIibE[typeinfo for BTree<int, bool>]+0x0): undefined reference to `vtable for __cxxabiv1::__class_type_info'
/usr/lib/libfam.a(Client.o):(.rodata._ZTI5BTreeIiPvE[typeinfo for BTree<int, void*>]+0x0): undefined reference to `vtable for __cxxabiv1::__class_type_info'
/usr/lib/libfam.a(Client.o):(.eh_frame+0x11): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status
make[2]: *** [maildirkw] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/portage/maildrop-2.0.2-r1/work/maildrop-2.0.2/maildir'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/var/tmp/portage/maildrop-2.0.2-r1/work/maildrop-2.0.2/maildir'
make: *** [all-recursive] Error 1

!!! ERROR: mail-filter/maildrop-2.0.2-r1 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  maildrop-2.0.2-r1.ebuild, line 104:   Called die

!!! compile problem
!!! If you need support, post the topmost build error, and the call stack if relevant.





Comment 2


Fernando J. Pereda (RETIRED)






          2006-11-01 14:46:45 UTC
        

I _still_ think that this is not a maildrop problem but a libfam one.

I'll poke a couple of persons and do a couple of compiles and see how it goes.

- ferdy




Comment 3


Fred Marsteller





          2006-11-02 08:44:11 UTC
        

[code]
/etc/init.d/famd stop
emerge --unmerge fam maildrop
emerge maildrop
[/code]

PIA, but works.  This emerges gamin instead of fam.  Why emerge works with libfam provided by gamin but not fam, I can't guess.




Comment 4


Fernando J. Pereda (RETIRED)






          2006-11-05 12:13:58 UTC
        

Those errors are NOT from maildrop but from libfam.a. And I can't seem to be able to reproduce this one.

Please reopen if you have more info.

- ferdy









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

