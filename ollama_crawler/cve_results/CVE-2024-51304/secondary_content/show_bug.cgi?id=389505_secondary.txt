Title: 389505 – media-libs/devil-1.7.8 hardcodes libpng12 in m4/devil-defines.m4
URL: https://bugs.gentoo.org/show_bug.cgi?id=389505

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 389505
media-libs/devil-1.7.8 hardcodes libpng12 in m4/devil-defines.m4
Last modified: 2011-11-04 17:37:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 389505 
      - media-libs/devil-1.7.8 hardcodes libpng12 in m4/devil-defines.m4


Summary:
media-libs/devil-1.7.8 hardcodes libpng12 in m4/devil-defines.m4
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-11-04 16:04 UTC by driedfruit





      Modified:
    
2011-11-04 17:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ssuominen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Remove libpng12 from m4/devil-defines.m4

              (devil-1.7.8-libpng12.patch,787 bytes,
                text/plain)

            
2011-11-04 16:04 UTC,

            driedfruit




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


driedfruit





          2011-11-04 16:04:46 UTC
        

Created attachment 291667 [details]
Remove libpng12 from m4/devil-defines.m4

Which, eventually leads to:

/var/tmp/portage/media-libs/devil-1.7.8/work/devil-1.7.8/lib/.libs/libIL.so: undefined reference to `png_set_longjmp_fn'
collect2: ld returned 1 exit status




Comment 1


Samuli Suominen (RETIRED)






          2011-11-04 17:22:40 UTC
        

# emerge -1 devil

[ .. ]

checking png.h usability... yes
checking png.h presence... yes
checking for png.h... yes
checking for main in -lpng12... no
checking for png.h... (cached) yes
checking for main in -lpng... yes
checking whether we would like to have support for png format... yes

[ .. ]

>>> Merging media-libs/devil-1.7.8 to /

[ .. ]

$ objdump -p /usr/lib/libIL.so.1.1.0 | grep libpng
  NEEDED               libpng15.so.15
  required from libpng15.so.15:

Looks to be working just fine.    I don't see any need for action here.




Comment 2


Samuli Suominen (RETIRED)






          2011-11-04 17:37:34 UTC
        

The reasons for such 'undefined reference' might be something like:

- manually made libpng12.so symlink that makes -lpng12 available
- manually installed older libpng12 in some directory like /usr/local/include/ with png.h in there

In any case, it's not reproducible with libpng's *from portage*

Unless you can prove otherwise (by attaching config.log from ./configure of devil) I'm closing this as worksforme









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

