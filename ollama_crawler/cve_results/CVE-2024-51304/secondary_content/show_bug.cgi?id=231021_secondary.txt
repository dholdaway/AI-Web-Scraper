Title: 231021 – www-client/mozilla-firefox-2.0.0.15 fails to compile, Unsupported architecture. Supported are: x86, ppc
URL: https://bugs.gentoo.org/show_bug.cgi?id=231021

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 231021
www-client/mozilla-firefox-2.0.0.15 fails to compile, Unsupported architecture. Supported are: x86, ppc
Last modified: 2008-07-17 15:04:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 231021 
      - www-client/mozilla-firefox-2.0.0.15 fails to compile, Unsupported architecture. Supported are: x86, ppc


Summary:
www-client/mozilla-firefox-2.0.0.15 fails to compile, Unsupported architectur...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       major
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

231832

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2008-07-07 05:43 UTC by Robert W.





      Modified:
    
2008-07-17 15:04 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



even.more.spam.for.me
ppc
stefan









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




This is the complete build.log generated during the emerge.

              (build.log,408.49 KB,
                text/plain)

            
2008-07-07 05:47 UTC,

            Robert W.




Details





emerge --info

              (emerge--info,4.08 KB,
                text/plain)

            
2008-07-16 08:22 UTC,

            Flo Gravo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robert W.





          2008-07-07 05:43:20 UTC
        

www-client/mozilla-firefox-2.0.0.15 refuses to compile on an iBook G4 with error message:
   Unsupported architecture. Supported are: x86, ppc

Clearly, a G4 is a PowerPC.

Reproducible: Always

Steps to Reproduce:
1. emerge "=www-client/mozilla-firefox-2.0.0.15"
2.
3.

Actual Results:  
[...]
/var/tmp/portage/www-client/mozilla-firefox-2.0.0.15/work/mozilla/config/nsinstall -R -m 755 libxpcom_compat_c.so ../../../dist/bin/components
../../../dist/bin/elf-dynstr-gc ../../../dist/bin/components/libxpcom_compat_c.so
Unsupported architecture. Supported are: x86, ppc
gmake[3]: *** [libs] Fehler 1
gmake[3]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.15/work/mozilla/xpcom/obsolete/component'
gmake[2]: *** [libs] Fehler 2
gmake[2]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.15/work/mozilla/xpcom/obsolete'
gmake[1]: *** [tier_2] Fehler 2
gmake[1]: Leaving directory `/var/tmp/portage/www-client/mozilla-firefox-2.0.0.15/work/mozilla'
make: *** [default] Fehler 2


Expected Results:  
Should compile and install cleanly.

Portage 2.1.4.4 (default/linux/powerpc/ppc32/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25.6-1 ppc)
=================================================================
System uname: 2.6.25.6-1 ppc 7447A, altivec supported
Timestamp of tree: Sun, 06 Jul 2008 10:36:18 +0000
distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="ppc"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-O2 -mtune=G4 -mcpu=G4 -maltivec -fno-strict-aliasing -pipe 	-mabi=altivec"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -mtune=G4 -mcpu=G4 -maltivec -fno-strict-aliasing -pipe 	-mabi=altivec"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs ccache distcc distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://mirror.bytemark.co.uk/gentoo/ http://gentoo.ynet.sk/pub http://ftp.uoi.gr/mirror/OS/gentoo/ http://mirror.qubenet.net/mirror/gentoo/"
LINGUAS="de en"
MAKEOPTS="-j11"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/portage/local/layman/gnome /usr/portage/local/layman/xfce /usr/portage/local/layman/powerpc /usr/local/portage /usr/portage/local/layman/swegener"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl alsa altivec apm arts bash-completion berkdb bluetooth branding bzip2 cairo caps cddb cdr cli cracklib crypt cscope cups dbus doc dri dvd dvdread eds emacs emboss encode esd evo fam ffmpeg fftw firefox fortran gdbm gif gpg gpm graphviz gtk hal htmlhandbook iconv idn ipv6 isdnlog java java5 java6 jpeg jpg kde latex ldap libnotify mad midi mikmod mp3 mpeg mudflap musicbrainz ncurses networkmanager nls nptl nptlonly ogg opengl openmp pam pcre pda pdf perl plotutils png ppc ppds pppd python qt3 qt3support qt4 quicktime readline reflection samba sdl session socks5 spell spl ssl startup-notification svg tcpd threads tiff truetype unicode usb vcd vim-syntax vorbis wifi xattr xcomposite xine xml xorg xscreensaver xv zeroconf zlib" ALSA_CARDS="aoa aoa-fabric-layout aoa-onyx aoa-soundbus aoa-soundbus-i2s aoa-tas aoa-toonie powermac usb-audio via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="synaptics mouse evdev keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en" USERLAND="GNU" VIDEO_CARDS="fbdev radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Robert W.





          2008-07-07 05:47:21 UTC
        

Created attachment 159771 [details]
This is the complete build.log generated during the emerge.




Comment 2


Raúl Porcel (RETIRED)






          2008-07-07 17:53:56 UTC
        

Thats really weird, i can't understand how nobody got this...i'll try to reproduce.




Comment 3


Raúl Porcel (RETIRED)






          2008-07-08 14:59:51 UTC
        

paste the output of 'emerge -pv mozilla-firefox', please




Comment 4


Robert W.





          2008-07-08 22:53:57 UTC
        

(In reply to comment #3)
mary@belle-gunness ~ $ emerge -pv mozilla-firefox

These are the packages that would be merged, in order:

Calculating dependencies... done!

[ebuild     U ] www-client/mozilla-firefox-2.0.0.15 [2.0.0.14] USE="ipv6 java -bindist -debug -filepicker -gnome -iceweasel -mozdevelop -moznopango -restrict-javascript -xforms -xinerama -xprint" LINGUAS="de en -af -ar -be -bg -ca -cs -da -el -en_GB -en_US -es -es_AR -es_ES -eu -fi -fr -fy -fy_NL -ga -ga_IE -gu -gu_IN -he -hu -it -ja -ka -ko -ku -lt -mk -mn -nb -nb_NO -nl -nn -nn_NO -pa -pa_IN -pl -pt -pt_BR -pt_PT -ro -ru -sk -sl -sv -sv_SE -tr -uk -zh -zh_CN -zh_TW" 0 kB




Comment 5


Raúl Porcel (RETIRED)






          2008-07-15 13:26:41 UTC
        

*** Bug 231832 has been marked as a duplicate of this bug. ***




Comment 6


Raúl Porcel (RETIRED)






          2008-07-15 13:28:38 UTC
        

Could you guys try with the previous version it worked? Because this is really weird thats its happening right now and not before...




Comment 7


Robert W.





          2008-07-15 14:29:27 UTC
        

(In reply to comment #6)
> Could you guys try with the previous version it worked? Because this is really
> weird thats its happening right now and not before...
> 

Currently I have installed mozilla-firefox-2.0.0.14 with the same configuration. Obviously it must compile fine. Let me know if you want a build log or anything else.




Comment 8


Raúl Porcel (RETIRED)






          2008-07-15 14:33:54 UTC
        

But can you try rebuilding? I find really strange they broke this...




Comment 9


Robert W.





          2008-07-15 15:51:33 UTC
        

(In reply to comment #8)
> But can you try rebuilding? I find really strange they broke this...
> 

Interesting, mozilla-firefox-2.0.0.14 now fails, too with the same error.





Comment 10


Stefan de Konink





          2008-07-15 16:03:19 UTC
        

(In reply to comment #9)
> (In reply to comment #8)
> > But can you try rebuilding? I find really strange they broke this...
> > 
> 
> Interesting, mozilla-firefox-2.0.0.14 now fails, too with the same error.

gcc upgrade?





Comment 11


Raúl Porcel (RETIRED)






          2008-07-15 16:26:47 UTC
        

Stefan, what kernel are you using?

Thanks




Comment 12


Stefan de Konink





          2008-07-15 16:30:20 UTC
        

(In reply to comment #11)
> Stefan, what kernel are you using?

2.6.24; I was unable to get 2.6.25 working together with X, wireless broke with new wifi stack and so on. If you want me to try 2.6.26, I can.




Comment 13


Robert W.





          2008-07-15 17:02:46 UTC
        

(In reply to comment #10)
> > Interesting, mozilla-firefox-2.0.0.14 now fails, too with the same error.
> 
> gcc upgrade?
> 

I have had a look at. There was an upgrade from gcc-3.4.6-r2 to gcc-4.1.2 after the relevant date I installed firefox last time. I ran fix_libtool_files.sh but without success. The error persists.
I'll try again with gcc 3.4.6.

Btw. my kernel is a 2.6.25.6 (vanilla).






Comment 14


Robert W.





          2008-07-15 17:34:40 UTC
        

(In reply to comment #13)

> I'll try again with gcc 3.4.6.
> 

Exactly the same error is still there with gcc 3.4.6.





Comment 15


Raúl Porcel (RETIRED)






          2008-07-15 17:40:43 UTC
        

(In reply to comment #12)
> (In reply to comment #11)
> > Stefan, what kernel are you using?
> 
> 2.6.24; I was unable to get 2.6.25 working together with X, wireless broke with
> new wifi stack and so on. If you want me to try 2.6.26, I can.
> 

No, no need to test with a new kernel, since it looks it isn't a kernel problem since Robert uses .25. Thought you may be using that as well, but you're using .24, so it can't be that...
It fails because it uses elf-dynstr-gc or whatever is called, but that worked before...

Weird...




Comment 16


Flo Gravo





          2008-07-16 08:22:24 UTC
        

Created attachment 160531 [details]
emerge --info

I can confirm this for:
net-libs/xulrunner-1.9-r2
mail-client/mozilla-thunderbird-2.0.0.14

Could it be that it fails, because of the use of a 32bit user land with a 64bit kernel.

# uname -i
unknown

# uname -m
ppc64




Comment 17


Raúl Porcel (RETIRED)






          2008-07-16 11:39:42 UTC
        

I've disabled this for now. Try again, it should work




Comment 18


Robert W.





          2008-07-16 20:44:24 UTC
        

(In reply to comment #16)
> Created an attachment (id=160531) [edit]
> emerge --info
> 
> I can confirm this for:
> net-libs/xulrunner-1.9-r2
> mail-client/mozilla-thunderbird-2.0.0.14
> 
> Could it be that it fails, because of the use of a 32bit user land with a 64bit
> kernel.
> 
> # uname -i
> unknown
> 
> # uname -m
> ppc64
> 

I doubt, because I don't have any 64-bit stuff

Linux belle-gunness 2.6.25.6-1 #12 PREEMPT Fri Jun 13 15:08:14 CEST 2008 ppc 7447A, altivec supported PowerBook6,7 GNU/Linux




Comment 19


Raúl Porcel (RETIRED)






          2008-07-17 10:20:14 UTC
        

Does it work now?




Comment 20


Robert W.





          2008-07-17 15:04:49 UTC
        

(In reply to comment #19)
> Does it work now?
> 

Yes, mozilla-firefox-2.0.0.15 built and installed fine.

Thank you.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

