Title: 226037 – dev-util/subversion-1.5.0_rc9 emerge fails due to missing -lpq
URL: https://bugs.gentoo.org/show_bug.cgi?id=226037

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 226037
dev-util/subversion-1.5.0_rc9 emerge fails due to missing -lpq
Last modified: 2008-06-12 12:04:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 226037 
      - dev-util/subversion-1.5.0_rc9 emerge fails due to missing -lpq


Summary:
dev-util/subversion-1.5.0_rc9 emerge fails due to missing -lpq
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-06-12 08:51 UTC by Leonid Podolny





      Modified:
    
2008-06-12 12:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge.info

              (emerge.info,4.50 KB,
                text/plain)

            
2008-06-12 08:52 UTC,

            Leonid Podolny




Details





build.log

              (build.log,187.24 KB,
                text/plain)

            
2008-06-12 08:52 UTC,

            Leonid Podolny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Leonid Podolny





          2008-06-12 08:51:58 UTC
        

cd subversion/libsvn_ra_serf && /bin/sh /var/tmp/portage/dev-util/subversion-1.5.0_rc9/work/subversion-1.5.0-rc9/libtool --tag=CC --silent --mode=link x86_
64-pc-linux-gnu-gcc  -O2 -pipe -march=nocona -fno-strict-aliasing   -pthread   -L/usr/lib64 -L/usr/local/lib  -rpath /usr/lib64 -o libsvn_ra_serf-1.la  aut
h.lo blame.lo commit.lo getdate.lo getlocations.lo getlocationsegments.lo getlocks.lo locks.lo log.lo merge.lo mergeinfo.lo options.lo property.lo propfind
_buckets.lo replay.lo serf.lo update.lo util.lo win32_auth_sspi.lo xml.lo ../../subversion/libsvn_delta/libsvn_delta-1.la ../../subversion/libsvn_subr/libs
vn_subr-1.la /usr/lib64/libaprutil-1.la /usr/lib64/libapr-1.la /usr/lib/libserf-0.la
cd subversion/libsvn_fs_fs && /bin/sh /var/tmp/portage/dev-util/subversion-1.5.0_rc9/work/subversion-1.5.0-rc9/libtool --tag=CC --silent --mode=link x86_64
-pc-linux-gnu-gcc  -O2 -pipe -march=nocona -fno-strict-aliasing   -pthread   -L/usr/lib64 -L/usr/local/lib  -rpath /usr/lib64 -o libsvn_fs_fs-1.la  dag.lo
err.lo fs.lo fs_fs.lo id.lo key-gen.lo lock.lo tree.lo ../../subversion/libsvn_delta/libsvn_delta-1.la ../../subversion/libsvn_subr/libsvn_subr-1.la /usr/l
ib64/libaprutil-1.la /usr/lib64/libapr-1.la ../../subversion/libsvn_fs_util/libsvn_fs_util-1.la
/usr/lib/gcc/x86_64-pc-linux-gnu/4.3.1/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lpq
collect2: ld returned 1 exit status
make: *** [subversion/libsvn_ra_serf/libsvn_ra_serf-1.la] Error 1
make: *** Waiting for unfinished jobs....




Comment 1


Leonid Podolny





          2008-06-12 08:52:25 UTC
        

Created attachment 156469 [details]
emerge.info




Comment 2


Leonid Podolny





          2008-06-12 08:52:48 UTC
        

Created attachment 156471 [details]
build.log




Comment 3


Leonid Podolny





          2008-06-12 08:54:10 UTC
        

Also note that postgresql is not installed and 'postgresql' USE flag is off, so I really don't have libpq on my system. 




Comment 4


Diego Elio Pettenò (RETIRED)






          2008-06-12 10:08:30 UTC
        

Try running revdep-rebuild, something brought in -lpq request, probably something you had merged with postgres support in the past.





Comment 5


Leonid Podolny





          2008-06-12 10:22:12 UTC
        

(In reply to comment #4)
> Try running revdep-rebuild, something brought in -lpq request, probably
> something you had merged with postgres support in the past.
> 

It was the first thing I tried.
I really had postgres server on this box until recently, but I have run revdep-rebuild more than once since then, last time this morning, when I saw that subversion doesn't compile.




Comment 6


Diego Elio Pettenò (RETIRED)






          2008-06-12 10:29:36 UTC
        

Okay let's do it the hard way then ;)

fgrep -e -lpq /usr/lib* --include '*.la'

does it report anything?




Comment 7


Leonid Podolny





          2008-06-12 11:08:41 UTC
        

(In reply to comment #6)
> Okay let's do it the hard way then ;)
Yupee.

> 
> fgrep -e -lpq /usr/lib* --include '*.la'
> 
> does it report anything?
> 
No.

But I found something else.

looptop ~ # find /usr/lib64/ -name "*.la"| xargs grep pq
/usr/lib64/libserf-0.la:dependency_libs=' -R/usr/lib -L/usr/lib64 -L/usr/lib /usr/lib64/libaprutil-1.la /usr/lib64/libgdbm.la -ldb -lpq /usr/lib64/libsqlite3.la /usr/lib64/libsqlite.la /usr/lib64/libexpat.la /usr/lib64/libapr-1.la -luuid -lrt -lcrypt -lpthread -ldl -lz -lssl -lcrypto'
/usr/lib64/libsvn_ra_serf-1.la:dependency_libs=' -R/usr/lib -L/usr/lib64 -L/usr/local/lib /usr/lib64/libsvn_delta-1.la /usr/lib64/libsvn_subr-1.la /usr/lib64/libdb-4.6.la /usr/lib64/libserf-0.la /usr/lib64/libaprutil-1.la /usr/lib64/libgdbm.la -ldb -lpq /usr/lib64/libsqlite3.la /usr/lib64/libsqlite.la /usr/lib64/libexpat.la /usr/lib64/libapr-1.la -luuid -lrt -lcrypt -lpthread -ldl -lz -lssl -lcrypto'

I'll try to unmerge subversion and merge it back.




Comment 8


Diego Elio Pettenò (RETIRED)






          2008-06-12 11:51:50 UTC
        

Sorry I forgot a -r in the fgrep commandline.

What you want to re-emerge is likely net-libs/serf, rather than subversion.
And welcome to the hell that libtool can create (cfr http://blog.flameeyes.eu/articles/2008/04/14/what-about-those-la-files )





Comment 9


Leonid Podolny





          2008-06-12 11:53:05 UTC
        

(In reply to comment #8)
> Sorry I forgot a -r in the fgrep commandline.
> 
> What you want to re-emerge is likely net-libs/serf, rather than subversion.
> And welcome to the hell that libtool can create (cfr
> http://blog.flameeyes.eu/articles/2008/04/14/what-about-those-la-files )
> 

Yes, I already figured it out. And it does help, indeed. 




Comment 10


Diego Elio Pettenò (RETIRED)






          2008-06-12 12:04:34 UTC
        

Closing this then, it's the usual .la problem, I'm afraid there is no easy and quick solution for this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

