Title: 368283 – cross-i686-pc-linux-gnu/glibc-2.12.2 - make[1]: /var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/sln: Command not found
URL: https://bugs.gentoo.org/show_bug.cgi?id=368283

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 368283
cross-i686-pc-linux-gnu/glibc-2.12.2 - make[1]: /var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/sln: Command not found
Last modified: 2011-05-28 17:31:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 368283 
      - cross-i686-pc-linux-gnu/glibc-2.12.2 - make[1]: /var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/sln: Command not found


Summary:
cross-i686-pc-linux-gnu/glibc-2.12.2 - make[1]: /var/tmp/portage/cross-i686-p...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-05-21 18:58 UTC by Siim Ainsaar





      Modified:
    
2011-05-28 17:31 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



david.w.noon









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (cross-i686-pc-linux-gnu:glibc-2.12.2:20110520-163746.log.gz,855.18 KB,
                application/x-gzip)

            
2011-05-21 18:58 UTC,

            Siim Ainsaar




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Siim Ainsaar





          2011-05-21 18:58:41 UTC
        

Created attachment 274227 [details]
Build log

Compiling cross-i686-pc-linux-gnu/glibc-2.12.2 on an amd64 system fails as I first reported at bug 368119 (the same command errs, but the error message is different). The build log is attached.




/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/sln
/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/symlink.list
make[1]:
/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/build-amd64-i686-pc-linux-gnu-nptl/elf/sln:
Command not found
make[1]: *** [install-symbolic-link] Error 127
make[1]: Leaving directory
`/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/glibc-2.12.2'
make: *** [install] Error 2
emake failed
 * ERROR: cross-i686-pc-linux-gnu/glibc-2.12.2 failed (install phase):
 *   (no error message)
 *
 * Call stack:
 *           ebuild.sh, line   56:  Called src_install
 *         environment, line 3838:  Called eblit-run 'src_install'
 *         environment, line 1171:  Called eblit-glibc-src_install
 *   src_install.eblit, line  229:  Called eblit-glibc-src_install
 *   src_install.eblit, line  238:  Called toolchain-glibc_src_install
 *   src_install.eblit, line   22:  Called die
 * The specific snippet of code:
 *      emake install_root="${install_root}" install || die
 *
 * If you need support, post the output of 'emerge --info
=cross-i686-pc-linux-gnu/glibc-2.12.2',
 * the complete build log and the output of 'emerge -pqv
=cross-i686-pc-linux-gnu/glibc-2.12.2'.
 * This ebuild is from an overlay: '/usr/local/portage/'
 * The complete build log is located at
'/var/log/portage/cross-i686-pc-linux-gnu:glibc-2.12.2:20110520-163746.log.gz'.
 * The ebuild environment file is located at
'/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/temp/environment'.
 * S: '/var/tmp/portage/cross-i686-pc-linux-gnu/glibc-2.12.2/work/glibc-2.12.2'






$ emerge --info =cross-i686-pc-linux-gnu/glibc-2.12.2
Portage 2.1.9.42 (default/linux/amd64/10.0/desktop, gcc-4.4.5, libc-0-r0,
2.6.37-tuxonice x86_64)
=================================================================
                        System Settings
=================================================================
System uname:
Linux-2.6.37-tuxonice-x86_64-Intel-R-_Core-TM-2_Duo_CPU_P8700_@_2.53GHz-with-gentoo-2.0.2
Timestamp of tree: Fri, 20 May 2011 15:15:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.7.1-r1, 3.1.3-r1
dev-util/cmake:      2.8.4-r1
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.2-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1-r1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
sys-kernel/linux-headers: 2.6.36.1
sys-libs/glibc:      2.12.2
virtual/os-headers:  0
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -mcx16 -msahf -msse4.1 --param l1-cache-size=32 --param
l1-cache-line-size=64 --param l2-cache-size=3072 -O2 -pipe -ftracer
-maccumulate-outgoing-args"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/nspluginwrapper/i386/linux/npviewer
/usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/
/etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release
/etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/
/etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d
/etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d
/etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -mcx16 -msahf -msse4.1 --param l1-cache-size=32 --param
l1-cache-line-size=64 --param l2-cache-size=3072 -O2 -pipe -ftracer
-maccumulate-outgoing-args"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y --autounmask"
FEATURES="assume-digests binpkg-logs collision-protect compress-build-logs
distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox
sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch
userpriv usersandbox usersync"
FFLAGS=""
GENTOO_MIRRORS="http://gentoo.mirror.pw.edu.pl/ http://gentoo.supp.name/
http://de-mirror.org/distro/gentoo/ http://gentoo.tiscali.nl/"
LANG=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=900"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress
--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles
--exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /var/lib/layman/sunrise
/var/lib/layman/esteid"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 64bit X a52 aac aalib ace acpi alsa amd64 amr animgif apng
archive ares artworkextra asf aspell ass asyncdns asyncns atlas audacious
autotrace bash-completion berkdb bidi binary-drivers blas bluetooth boost bs2b
bzip2 cairo caps cblas-external cdda cddb cdparanoia cdr cdrom cg chardet chm
cjk cleartype cli cln colordiff compress consolekit corefonts cpio cracklib
crypt cscope css cuda cue cups cxx dbus dell dga dirac djbfft djvu doc
double-precision dri dts dv dvd dvdnav dvdr dvi dvipdfm ebook ee emboss emf
enca encode equalizer exceptions exif expat fasttrack fat fbcon ffmpeg fftw
firefox firefox3 fits flac flash fontconfig fortran ftp gcj gd gdbm gdu geoip
geolocation gif gimp gkrellm glib glitz glut gmail gmp gnome gnuplot gnutella
gopher gpm gpu grammar graphicsmagick graphviz gs gsl gtalk gtk gucharmap
handbook hardcoded-tables hdf hdf5 hdri highlight history hpijs hpn iconv icu
id3 id3tag idn ieee1394 image-cache imagemagick imlib inkjar ipv6 irc iso14755
jabber java java6 javascript jbig jpeg jpeg2k kate kde keyscrub kpathsea kqemu
ladspa lame lapack lapack-atlas laptop largeterminal lasi latex lcdfilter lcms
ldap libcaca libnl libnotify libsamplerate libssh2 libvisual live lm_sensors
loop-aes lzma lzo mac mad matroska mbox mbrola memlimit metric mime mjpeg mkl
mmx mmxext mng models modules monolithic-build mp3 mp4 mpeg mplayer msn mudflap
multilib multiprocess multiuser musepack music nautilus ncurses netpbm
network-cron nls nntp nocd nodrm nptl nptlonly ntfs ntp ntpd nvidia ogg ogg123
ogm okteta okular opencv openexr opengl openmp openssl openstreetmap openvg
optimization optimize-cflags optimized-qmake pam pango pch pcmcia pcre pdf perl
pgf phonon pidgin pm-utils png pnm policykit postproc postscript povray ppds
pppd prediction ps pstoedit pulseaudio python qt3support qt4 quesoglc quicktime
rar raw readline reiserfs replaygain rle romio rpm rtc sbcl scanner
schroedinger screen sdl session sftp sha512 shaders sift skype slang smp
sndfile solver sound sounds sox speex spell srt sse sse2 sse3 ssh ssl ssse3
stars startup-notification static-ppds strong-optimization subtitles svg sysfs
syslog system-sqlite szip t1lib taglib tcpd templates themes theora thesaurus
thin-splines threads threadsafe thumbnail tiff timezone timidity truetype type3
udev umfpack unicode usb userlocales utempter uuencode v4l v4l2 vaapi vamp vcd
vcdx videos vim vim-pager vim-syntax vorbis vpx wav wavpack webcam wifi wma wmf
wps wv2 x264 xattr xcb xcf xcomposite xext xinerama xml xmp xorg xosd xpm
xrandr xrender xscreensaver xulrunner xv xvid xvmc youtube zip zlib"
ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop
empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul
mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions
alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file
authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user
autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires
ext_filter file_cache filter headers include info log_config logio mem_cache
mime mime_magic negotiation rewrite setenvif speling status unique_id userdir
usertrack vhost_alias" CALLIGRA_FEATURES="braindump flow karbon kexi kpresenter
krita tables words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load
memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm
earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip
navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing
tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse synaptics evdev"
KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001
mtxorb ncurses text" LINGUAS="en" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18"
USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan
length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq
steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND,
PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS



$ emerge -pqv =cross-i686-pc-linux-gnu/glibc-2.12.2
[ebuild     U ] cross-i686-pc-linux-gnu/glibc-2.12.2 [2.11.3] USE="gd
(multilib) nls -debug -glibc-omitfp -hardened -profile (-selinux) -vanilla"




Comment 1


William Seager





          2011-05-22 13:01:16 UTC
        

I have exactly the same problem.

Here is my emerge --info


Portage 2.1.9.42 (default/linux/amd64/10.0/desktop, gcc-4.4.5, libc-0-r0, 2.6.39-gentoo x86_64)
=================================================================
System uname: Linux-2.6.39-gentoo-x86_64-Intel-R-_Core-TM-_i7_CPU_920_@_2.67GHz-with-gentoo-2.0.2
Timestamp of tree: Sun, 22 May 2011 06:00:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.6.6-r2, 2.7.1-r1, 3.1.3-r1
dev-util/cmake:      2.8.4-r1
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.2-r1
sys-apps/sandbox:    2.5
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1-r1
sys-devel/libtool:   2.4-r1
sys-devel/make:      3.81-r2
sys-kernel/linux-headers: 2.6.36.1
sys-libs/glibc:      2.12.2
virtual/os-headers:  0
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -msse4 -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe -msse4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/kde-sunset /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 berkdb bluetooth branding bzip2 cairo cdr cleartype cli consolekit cracklib crypt cups cxx dbus dri dts dvd dvdr embedded emboss encode exif fam firefox flac fortran gdbm gdu gif gphoto2 gpm iconv jpeg kde kpathsea lcms ldap libnotify mad mmx mng modules mp3 mp4 mpeg mudflap multilib mysql ncurses nls nptl nptlonly ogg opengl openmp pam pango pcre pdf perl png policykit ppds pppd python qt3support qt4 readline samba sdl semantic-desktop session spell sql sse sse2 ssl startup-notification svg sysfs tcpd threads tiff truetype udev unicode usb vorbis webkit x264 xcb xcomposite xinerama xml xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="braindump flow karbon kexi kpresenter krita tables words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nv nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


William Seager





          2011-05-23 14:24:06 UTC
        

As reported by  Damian Krasowski in bug 368119,
the following worked for me:

crossdev -C i686-pc-linux-gnu
emerge libtool
emerge binutils
crossdev -S i686-pc-linux-gnu




Comment 3


Siim Ainsaar





          2011-05-24 06:38:12 UTC
        

For me, the following was enough to fix it:

crossdev -C i686-pc-linux-gnu
crossdev -S i686-pc-linux-gnu

Looks like somewhere during software and hardware upgrades my '/etc/portage/env/cross-i686-pc-linux-gnu/' directory had gone missing, therefore portage tried to build a fully multilib cross-i686-pc-linux-gnu/glibc, which would make no sense, if I understand correctly. (Why build an amd64 part for a library used only for cross-compiles?) For sure, it did not make sense for the glibc build system that decided not make the target 'others' in 'elf/', so sln was not built while needed. Now it still does not compile it, but needs it neither. Thus, RESOLVED INVALID? Or have some configuration principles changed with crossdev updates, so some extra output should be added to the sys-devel/crossdev ebuild(s) to suggest the above two commands?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

