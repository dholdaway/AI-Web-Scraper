Title: 154577 – yelp-2.16.1 fails to compile due to cairo version dependancy
URL: https://bugs.gentoo.org/show_bug.cgi?id=154577

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 154577
yelp-2.16.1 fails to compile due to cairo version dependancy
Last modified: 2006-11-14 20:34:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 154577 
      - yelp-2.16.1 fails to compile due to cairo version dependancy


Summary:
yelp-2.16.1 fails to compile due to cairo version dependancy
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-09 09:16 UTC by Markus Johansson





      Modified:
    
2006-11-14 20:34 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Markus Johansson





          2006-11-09 09:16:59 UTC
        

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.8.0.5) Gecko/20060906 Firefox/1.5.0.5
Build Identifier: 

yelp-2.16.1 fails to compile with the following message:

/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_pdf_surface_create'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to
`cairo_surface_set_fallback_resolution'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_ps_surface_set_size'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_surface_get_type'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to
`cairo_pdf_surface_create_for_stream'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_pdf_surface_set_size'
collect2: ld returned 1 exit status

I had cairo-1.0.4-r1 (latest stable) installed which does not have the pdf
useflag that yelp requires. The newer >=cairo-1.2 (unstable) does have the pdf
use flag. I compiled cairo-1.2.4 with the pdf useflag and yelp compiled
successfully. My suggestion would be for yelp to require >=cairo-1.2 with pdf
use flag.

Reproducible: Always

Steps to Reproduce:
1. Use latest stable cairo (cairo-1.0.4-r1)
2. emerge yelp
Actual Results:  
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_pdf_surface_create'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to
`cairo_surface_set_fallback_resolution'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_ps_surface_set_size'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_surface_get_type'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to
`cairo_pdf_surface_create_for_stream'
/usr/lib64/libgtk-x11-2.0.so: undefined reference to `cairo_pdf_surface_set_size'
collect2: ld returned 1 exit status
make[3]: *** [yelp] Error 1
make[3]: Leaving directory `/var/tmp/portage/yelp-2.16.1/work/yelp-2.16.1/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/var/tmp/portage/yelp-2.16.1/work/yelp-2.16.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/yelp-2.16.1/work/yelp-2.16.1'
make: *** [all] Error 2

!!! ERROR: gnome-extra/yelp-2.16.1 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  ebuild.sh, line 1255:   Called gnome2_src_compile
  gnome2.eclass, line 64:   Called die

!!! compile failure
!!! If you need support, post the topmost build error, and the call stack if
relevant.

Expected Results:  
yelp should compile

Workaround: Add cairo to portage.keywords and upgrade to newest version of cairo.




Comment 1


Rémi Cardona (RETIRED)






          2006-11-09 23:53:15 UTC
        

Try rebuilding gtk+, it'll probably solve this issue.




Comment 2


Jakub Moc (RETIRED)






          2006-11-10 11:21:16 UTC
        

I'd have a better suggestion - don't mix unstable gtk+ with stable cairo (same for the rest of your Gnome stuff).





Comment 3


John N. Laliberte (RETIRED)






          2006-11-10 11:42:41 UTC
        

yelp deps on gtk+-2.10, which checks if you have compiled cairo with pdf and X use flags.

What version of gtk+ did you have installed? 

You should not have been able to emerge yelp without compiling gtk+-2.10.x which should have failed when checking for cairo compiled with X and pdf use flags.




Comment 4


Markus Johansson





          2006-11-10 13:55:06 UTC
        

Today I did a emerge --sync and the newer cairo is now being pulled in.

According to the gtk+-2.10.6 ebuild (which is the version i am using) it should have pulled in >=x11-libs/cairo-1.2.0 which it for some reason didn't. Perhaps this bug is due to some local problem at my computer.
Everything appears to be working now.

I'm quite new to bugzilla, should i mark this as INVALID or is that a task for someone else?




Comment 5


John N. Laliberte (RETIRED)






          2006-11-14 20:34:37 UTC
        

marking wfm per reporters comments.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

