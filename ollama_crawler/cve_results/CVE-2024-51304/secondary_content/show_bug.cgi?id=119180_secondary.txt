Title: 119180 – libtool-1.5.2* fails build-relink test when using LD_LIBRARY_PATH
URL: https://bugs.gentoo.org/show_bug.cgi?id=119180

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 119180
libtool-1.5.2* fails build-relink test when using LD_LIBRARY_PATH
Last modified: 2006-01-19 01:32:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 119180 
      - libtool-1.5.2* fails build-relink test when using LD_LIBRARY_PATH


Summary:
libtool-1.5.2* fails build-relink test when using LD_LIBRARY_PATH
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-16 03:24 UTC by Benno Schulenberg





      Modified:
    
2006-01-19 01:32 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




output of demo-make.test

              (demo-make.test.log,2.45 KB,
                patch)

            
2006-01-17 05:47 UTC,

            Benno Schulenberg




Details
            | Diff





output of demo-inst.test

              (demo-inst.test.log,3.54 KB,
                patch)

            
2006-01-17 05:47 UTC,

            Benno Schulenberg




Details
            | Diff





output of build-relink.test

              (build-relink.test.log,1.42 KB,
                text/plain)

            
2006-01-17 05:49 UTC,

            Benno Schulenberg




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Benno Schulenberg





          2006-01-16 03:24:27 UTC
        

While taking the first steps to upgrade from gcc-3.3.6 to gcc-3.4.5 and emerging libtool with FEATURES=test, it fails one of its 103 tests:

FAIL: build-relink.test

This happens with version 1.5.20, 1.5.20-r1, and 1.5.22.

(Version 1.5.18-r1 passes this build-relink.test, but fails the sh.test.)

Emerge --info:

Gentoo Base System version 1.12.0_pre12
Portage 2.0.53 (default-linux/x86/2005.1, gcc-3.4.5, glibc-2.3.6-r2, 2.6.14 i686)
=================================================================
System uname: 2.6.14 i686 AMD Athlon(tm) XP 2800+
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20  (installed anyway, to see if that would help -- no)
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks notitles sandbox sfperms strict test userpriv usersandbox"
LINGUAS="en eo es nl"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
USE="x86 3dnow X aac aim alsa apm arts asf audiofile avi bash-completion berkdb bitmap-fonts bzip2 cdparanoia cdr crypt curl dga dio dri dv dvb eds emboss encode esd ethereal exif expat fam fbcon ffmpeg flac gd gdbm gif glut glx gpm gstreamer gtk gtk2 gtkhtml hardened icq idn imagemagick imap imlib jabber jpeg kde kdeenablefinal lcms libg++ libwww lm_sensors lua mad mbox mbrola memlimit mikmod mime mmap mmx mng mp3 mpeg nas ncurses nls nptl ogg openal opengl oscar pam pcre pdflib pic png python qt quicktime readline recode sasl scanner sdl slang sndfile sox speex spell sqlite sse ssl svg svga tcltk test theora threads tidy tiff truetype truetype-fonts type1-fonts unicode vcd vorbis win32codecs wnf xface xine xml xml2 xmms xpm xsl xv xvid yahoo zlib video_cards_via linguas_en linguas_eo linguas_es linguas_nl userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS




Comment 1


SpanKY






          2006-01-16 17:10:13 UTC
        

works fine for me

after it fails, go into the builddir and run it by hand, piping the output into a log file:
cd /var/tmp/portage/libtool-1.5.22/work/libtool-1.5.22/tests
./build-relink.test >& log




Comment 2


Benno Schulenberg





          2006-01-17 05:47:07 UTC
        

Created attachment 77343 [details, diff]
output of demo-make.test

Running ./build-relink.test manually says to first run demo-inst.test, and running that says to first run demo-make.test.  So here follow three attachments:
1) demo-make.test.log
2) demo-inst.test.log
3) build-relink.test.log




Comment 3


Benno Schulenberg





          2006-01-17 05:47:47 UTC
        

Created attachment 77344 [details, diff]
output of demo-inst.test




Comment 4


Benno Schulenberg





          2006-01-17 05:49:21 UTC
        

Created attachment 77345 [details]
output of build-relink.test

(Sorry, they were not patches -- force of habit.)




Comment 5


Benno Schulenberg





          2006-01-17 06:24:43 UTC
        

Hmm, when I unset LD_LIBRARY_PATH it works okay --  both manually and emerging.  (This variable set in /etc/bash/bashrc for locally-installed drm and GL libs.  Had I better set it elsewhere?)




Comment 6


SpanKY






          2006-01-17 06:31:24 UTC
        

using LD_LIBRARY_PATH like that is wrong

add a file to your /etc/env.d which declares LDPATH ... running `env-update` will then insert those paths into your ld.so.conf




Comment 7


SpanKY






          2006-01-19 01:32:22 UTC
        

unable to reproduce when using like LD_LIBRARY_PATH ...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

