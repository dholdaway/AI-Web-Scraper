Title: 120360 – dev-python/ctypes-0.9.6 segfaults on amd64, probably because it has an executable stack
URL: https://bugs.gentoo.org/show_bug.cgi?id=120360

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 120360
dev-python/ctypes-0.9.6 segfaults on amd64, probably because it has an executable stack
Last modified: 2006-08-25 07:48:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 120360 
      - dev-python/ctypes-0.9.6 segfaults on amd64, probably because it has an executable stack


Summary:
dev-python/ctypes-0.9.6 segfaults on amd64, probably because it has an execut...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




117998



 

        Show dependency tree





 





      Reported:
    
2006-01-25 18:50 UTC by Patrick McLean





      Modified:
    
2006-08-25 07:48 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



amd64
tcort









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace from test_clib.py

              (test_clib.py.strace,70.49 KB,
                text/plain)

            
2006-01-25 18:51 UTC,

            Patrick McLean




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrick McLean






          2006-01-25 18:50:10 UTC
        

Merging dev-python/ctypes-0.9.6 works, but it just causes python to segfault when you try to use it:

 $ python test_clib.py
Segmentation fault
 $ python test_strchr.py
Segmentation fault
 $ python test_time.py
Segmentation fault

This may be because it has an executable stack, merging it prints this message:

QA Notice: the following files contain executable stacks
 Files with executable stacks will not work properly (or at all!)
 on some architectures/operating systems.  A bug should be filed
 at http://bugs.gentoo.org/ to make sure the file is fixed.
RWX --- --- usr/lib64/python2.4/site-packages/_ctypes.so

Here's my emerge info:

Portage 2.1_pre3-r1 (default-linux/amd64/2005.1, gcc-3.4.5, glibc-2.3.6-r2, 2.6.15-gentoo x86_64)
=================================================================
System uname: 2.6.15-gentoo x86_64 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System version 1.12.0_pre15
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O3 -fomit-frame-pointer -ffast-math -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon64 -O3 -fomit-frame-pointer -ffast-math -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig cvs digest distlocks multilib-strict sandbox sfperms strict"
GENTOO_MIRRORS="ftp://cs.ubishops.ca/pub/gentoo ftp://gentoo.risq.qc.ca http://gentoo.oregonstate.edu http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/mod-x"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac aalib alsa audiofile avi bash-completion berkdb bitmap-fonts bmp bzip2 c++ cairo caps cdparanoia cdr crypt cscope css cups curl dbus doc dri dts dv dvd dvdr dvdread dvi edl eds emboss encode esd ethereal evo exif expat fam fat ffmpeg fftw flac foomaticdb fortran gb gcj gdbm gif gimp gimpprint glitz glut gmail gmp gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gtkhtml guile gzip hal hfs howl idea idn ieee1394 imagemagick imap imlib imlib2 iproute2 jabber java jfs jpeg junit lcms libcaca libgda libwww linuxkeys live lzo lzw lzw-tiff mad matroska mikmod mmap mng mod mono mozdevelop mozilla mozsvg mp3 mpeg mplayer msn mythtv native nautilus ncurses network nfs nls no-old-linux no_wxgtk1 noantlr nob nobcel nobeanutils nobsh nocommonslogging nocommonsnet nojsch nolog4j nomotif noplugin norhino noxalan noxerces nptl nptlonly offensive ogg oggvorbis openal opengl pam pcre pda pdflib perl plugin png ppds python quicktime radeon readline real reiserfs rtc ruby samba sdl slang sndfile speex spell sqlite ssl stream subversion svg tcltk tcpd tetex tga theora tiff transcode truetype truetype-fonts type1-fonts udev unicode usb userlocales v4l v4l2 vcd vorbis wmf wxwindows xanim xine xml2 xpm xprint xscreensaver xv xvid xvmc zlib elibc_glibc kernel_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LINGUAS




Comment 1


Patrick McLean






          2006-01-25 18:51:14 UTC
        

Created attachment 78125 [details]
strace from test_clib.py




Comment 2


Lukasz Strzygowski (RETIRED)






          2006-06-25 06:17:43 UTC
        

Please try with 0.9.9.6.




Comment 3


Thomas Cort (RETIRED)






          2006-08-16 22:01:15 UTC
        

(In reply to comment #2)
> Please try with 0.9.9.6.

0.9.9.6 looks good on amd64. media-sound/quodlibet works and all of the tests pass.

cheese test # pwd
/usr/lib64/python2.4/site-packages/ctypes/test
cheese test # python runtests.py
.......................................................................................................................................................................................................................................................
----------------------------------------------------------------------
Ran 247 tests in 0.301s (0 modules skipped)
Unavailable resources: printing

OK





Comment 4


Simon Stelling (RETIRED)






          2006-08-25 07:48:54 UTC
        

let's close this then









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

