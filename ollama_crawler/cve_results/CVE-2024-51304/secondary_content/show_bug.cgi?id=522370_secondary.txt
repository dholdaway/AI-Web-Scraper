Title: 522370 – mail-filter/amavisd-new should depend on dev-perl/Socket6, dev-perl/IO-Socket-INET6
URL: https://bugs.gentoo.org/show_bug.cgi?id=522370

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 522370
mail-filter/amavisd-new should depend on dev-perl/Socket6, dev-perl/IO-Socket-INET6
Last modified: 2014-09-09 10:45:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 522370 
      - mail-filter/amavisd-new should depend on dev-perl/Socket6, dev-perl/IO-Socket-INET6


Summary:
mail-filter/amavisd-new should depend on dev-perl/Socket6, dev-perl/IO-Socket...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Net-Mail Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-09-08 10:27 UTC by Daniel





      Modified:
    
2014-09-09 10:45 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



alunduil
antivirus









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel





          2014-09-08 10:27:02 UTC
        

amavisd-new will not start if dev-perl/Socket6 and dev-perl/IO-Socket are not installed:

amavis[2426]: (!)Net::Server: 2014/09/08-10:03:10 Unresolveable host [::1]:10024 - could not load IO::Socket::INET6: Can't locate Socket6.pm in @INC (you may need to install the Socket6 module)
amavis[6316]: (!)Net::Server: 2014/09/08-11:39:24 Unresolveable host [::1]:10024 - could not load IO::Socket::INET6: Can't locate IO/Socket/INET6.pm in @INC (you may need to install the IO::Socket::INET6 module)

After manually installing these two packages, everything works fine.

Applies to current stable 2.8.1-r1 as well as ~2.9.1.




Comment 1


Daniel





          2014-09-08 10:31:18 UTC
        

that's dev-perl/IO-Socket-INET6 of course.




Comment 2


Eray Aslan






          2014-09-08 14:52:52 UTC
        

- Please provide emerge --info mail-filter/amavisd-new and full amavisd debug output
- Using IO-Socket-IP instead of low level module IO-Socket-INET6 is preferred in >=mail-filter/amavisd-new-2.8.0
- dev-perl/IO-Socket-INET6 should have been emerged anyway as a dev-perl/net-server dependency (assuming you have ipv6 in your USE flags)

or perhaps you do have ipv6 support in your kernel but have -ipv6 in your USE flags.  Can you please clarify your setup?

Thanks.




Comment 3


Daniel





          2014-09-08 15:23:15 UTC
        

I do have IPV6 in the kernel.
dev-perl/net-server is installed with USE=-ipv6, as it's set globally.

# emerge --info mail-filter/amavisd-new
Portage 2.2.8-r1 (hardened/linux/amd64, gcc-4.7.3, glibc-2.19-r1, 3.13.4-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-3.13.4-gentoo-x86_64-Intel-R-_Core-TM-_i7_CPU_920_@_2.67GHz-with-gentoo-2.2
KiB Mem:     2041400 total,    267820 free
KiB Swap:          0 total,         0 free
Timestamp of tree: Fri, 05 Sep 2014 09:45:01 +0000
ld GNU ld (GNU Binutils) 2.23.2
ccache version 3.1.9 [enabled]
app-shells/bash:          4.2_p45
dev-lang/python:          2.7.7, 3.3.5-r1
dev-util/ccache:          3.1.9-r3
dev-util/cmake:           2.8.12.2-r1
dev-util/pkgconfig:       0.28-r1
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.2
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2-r1
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.13 (virtual/os-headers)
sys-libs/glibc:           2.19-r1
Repositories: gentoo
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=native -mno-tls-direct-seg-refs"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -march=native -mno-tls-direct-seg-refs"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs ccache config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://de-mirror.org/distro/gentoo/ ftp://mirror.netcologne.de/gentoo/ "
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="acl amd64 berkdb bzip2 cli cracklib crypt cxx dri gdbm hardened iconv justify mmx modules multilib ncurses nls nptl openmp pam pax_kernel pcre readline session sse sse2 ssl tcpd unicode urandom xtpax zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-4 php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="fbdev glint intel mach64 mga nouveau nv r128 radeon savage sis tdfx trident vesa via vmware dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

mail-filter/amavisd-new-2.8.1-r1 was built with the following:
USE="razor spamassassin -clamav -courier -dkim -ldap -mysql -postgres -qmail -snmp -zmq" ABI_X86="64"




Comment 4


Daniel





          2014-09-08 15:23:23 UTC
        

This is the log with Socket6 and IO-Socket-INET6 installed:

Sep  8 17:08:33 *** amavis[13235]: logging initialized, log level 5, syslog: amavis.mail
Sep  8 17:08:33 *** amavis[13235]: run_command: [13236] /usr/bin/uptime </dev/null 2>/dev/null
Sep  8 17:08:33 *** amavis[13236]: open_on_specific_fd: target fd0 closing, to become < /dev/null
Sep  8 17:08:33 *** amavis[13236]: open_on_specific_fd: target fd1 closing, to become (65) &=5
Sep  8 17:08:33 *** amavis[13236]: open_on_specific_fd: target fd1 dup2 from fd5 (65) &=5
Sep  8 17:08:33 *** amavis[13236]: open_on_specific_fd: source fd5 closed
Sep  8 17:08:33 *** amavis[13236]: open_on_specific_fd: target fd2 closing, to become (65) /dev/null
Sep  8 17:08:33 *** amavis[13235]: system uptime 0 7:06:00:  17:08:33 up  7:06,  2 users,  load average: 0,56, 0,49, 0,52
Sep  8 17:08:33 *** amavis[13235]: Valid PID file (younger than sys uptime 0 7:06:00)
Sep  8 17:08:35 *** amavis[13235]: Daemon [7237] terminated by SIGTERM
Sep  8 17:08:35 *** amavis[13255]: logging initialized, log level 5, syslog: amavis.mail
Sep  8 17:08:35 *** amavis[13255]: starting. /usr/sbin/amavisd at *** amavisd-new-2.8.1 (20130628), Unicode aware, LC_CTYPE="en_US.UTF-8", LANG="en_US.UTF-8"
Sep  8 17:08:35 *** amavis[13255]: perl=5.018002, user=, EUID: 103 (103);  group=, EGID: 1003 1003 (1003 1003)
Sep  8 17:08:36 *** amavis[13255]: INFO: no optional modules: unicore::lib::Nt::De.pl Unix::Getrusage
Sep  8 17:08:36 *** amavis[13255]: SpamControl: attempting to load scanner SpamAssassin, module Amavis::SpamControl::SpamAssassin
Sep  8 17:08:36 *** amavis[13255]: SpamControl: scanner SpamAssassin, module Amavis::SpamControl::SpamAssassin
Sep  8 17:08:38 *** amavis[13255]: INFO: SA version: 3.3.2, 3.003002, no optional modules: Net::CIDR::Lite Encode::Detect Image::Info Image::Info::GIF Image::Info::JPEG Image::Info::PNG Image::Info::BMP Image::Info::TIFF
Sep  8 17:08:38 *** amavis[13255]: SpamControl: init_pre_chroot on SpamAssassin done
Sep  8 17:08:38 *** amavis[13255]: socket module IO::Socket::IP, protocol families available: INET, INET6
Sep  8 17:08:38 *** amavis[13255]: bind to /var/amavis/amavisd.sock|unix, 127.0.0.1:10024/tcp, [::1]:10024/tcp
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Process Backgrounded
Sep  8 17:08:38 *** amavis[13256]: Net::Server: 2014/09/08-17:08:38 Amavis (type Net::Server::PreForkSimple) starting! pid(13256)
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Binding to UNIX socket file "/var/amavis/amavisd.sock"
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Binding to TCP port 10024 on host 127.0.0.1 with IPv4
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Binding to TCP port 10024 on host ::1 with IPv6
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Group Not Defined.  Defaulting to EGID '1003 1003'
Sep  8 17:08:38 *** amavis[13256]: Net::Server: User Not Defined.  Defaulting to EUID '103'
Sep  8 17:08:38 *** amavis[13256]: Net::Server: Setting up serialization via flock
Sep  8 17:08:38 *** amavis[13256]: after_chroot_init: EUID: 103 (103);  EGID: 1003 1003 (1003 1003)
Sep  8 17:08:38 *** amavis[13256]: config files read: /etc/amavisd.conf
Sep  8 17:08:38 *** amavis[13256]: Module Amavis::Conf        2.318
Sep  8 17:08:38 *** amavis[13256]: Module Archive::Zip        1.30
Sep  8 17:08:38 *** amavis[13256]: Module BerkeleyDB          0.53
Sep  8 17:08:38 *** amavis[13256]: Module Compress::Raw::Zlib 2.06
Sep  8 17:08:38 *** amavis[13256]: Module Compress::Zlib      2.06
Sep  8 17:08:38 *** amavis[13256]: Module Convert::TNEF       0.18
Sep  8 17:08:38 *** amavis[13256]: Module Convert::UUlib      1.4
Sep  8 17:08:38 *** amavis[13256]: Module Crypt::OpenSSL::RSA 0.28
Sep  8 17:08:38 *** amavis[13256]: Module DB_File             1.827
Sep  8 17:08:38 *** amavis[13256]: Module Digest::MD5         2.52
Sep  8 17:08:38 *** amavis[13256]: Module Digest::SHA         5.82
Sep  8 17:08:38 *** amavis[13256]: Module Encode              2.49
Sep  8 17:08:38 *** amavis[13256]: Module File::Temp          0.23
Sep  8 17:08:38 *** amavis[13256]: Module IO::Socket::INET6   2.71
Sep  8 17:08:38 *** amavis[13256]: Module IO::Socket::IP      0.23
Sep  8 17:08:38 *** amavis[13256]: Module MIME::Entity        5.504
Sep  8 17:08:38 *** amavis[13256]: Module MIME::Parser        5.504
Sep  8 17:08:38 *** amavis[13256]: Module MIME::Tools         5.504
Sep  8 17:08:38 *** amavis[13256]: Module Mail::DKIM::Verifier 0.4
Sep  8 17:08:38 *** amavis[13256]: Module Mail::Header        2.12
Sep  8 17:08:38 *** amavis[13256]: Module Mail::Internet      2.12
Sep  8 17:08:38 *** amavis[13256]: Module Mail::SPF           v2.008
Sep  8 17:08:38 *** amavis[13256]: Module Mail::SpamAssassin  3.003002
Sep  8 17:08:38 *** amavis[13256]: Module Net::DNS            0.66
Sep  8 17:08:38 *** amavis[13256]: Module Net::Server         2.007
Sep  8 17:08:38 *** amavis[13256]: Module NetAddr::IP         4.066
Sep  8 17:08:38 *** amavis[13256]: Module Razor2::Client::Version 2.85
Sep  8 17:08:38 *** amavis[13256]: Module Scalar::Util        1.27
Sep  8 17:08:38 *** amavis[13256]: Module Socket              2.009
Sep  8 17:08:38 *** amavis[13256]: Module Socket6             0.23
Sep  8 17:08:38 *** amavis[13256]: Module Time::HiRes         1.9725
Sep  8 17:08:38 *** amavis[13256]: Module URI                 1.60
Sep  8 17:08:38 *** amavis[13256]: Module Unix::Syslog        1.1
Sep  8 17:08:38 *** amavis[13256]: Amavis::ZMQ code     NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Amavis::DB code      loaded
Sep  8 17:08:38 *** amavis[13256]: Redis code           NOT loaded
Sep  8 17:08:38 *** amavis[13256]: SQL base code        NOT loaded
Sep  8 17:08:38 *** amavis[13256]: SQL::Log code        NOT loaded
Sep  8 17:08:38 *** amavis[13256]: SQL::Quarantine      NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Lookup::SQL code     NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Lookup::LDAP code    NOT loaded
Sep  8 17:08:38 *** amavis[13256]: AM.PDP-in proto code loaded
Sep  8 17:08:38 *** amavis[13256]: SMTP-in proto code   loaded
Sep  8 17:08:38 *** amavis[13256]: Courier proto code   NOT loaded
Sep  8 17:08:38 *** amavis[13256]: SMTP-out proto code  loaded
Sep  8 17:08:38 *** amavis[13256]: Pipe-out proto code  NOT loaded
Sep  8 17:08:38 *** amavis[13256]: BSMTP-out proto code NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Local-out proto code loaded
Sep  8 17:08:38 *** amavis[13256]: OS_Fingerprint code  NOT loaded
Sep  8 17:08:38 *** amavis[13256]: ANTI-VIRUS code      loaded
Sep  8 17:08:38 *** amavis[13256]: ANTI-SPAM code       loaded
Sep  8 17:08:38 *** amavis[13256]: ANTI-SPAM-EXT code   NOT loaded
Sep  8 17:08:38 *** amavis[13256]: ANTI-SPAM-C code     NOT loaded
Sep  8 17:08:38 *** amavis[13256]: ANTI-SPAM-SA code    loaded
Sep  8 17:08:38 *** amavis[13256]: Unpackers code       loaded
Sep  8 17:08:38 *** amavis[13256]: DKIM code            NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Tools code           NOT loaded
Sep  8 17:08:38 *** amavis[13256]: Found $file            at /usr/bin/file
Sep  8 17:08:38 *** amavis[13256]: No $altermime,         not using it
Sep  8 17:08:38 *** amavis[13256]: Internal decoder for .mail
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .F    at /usr/bin/unfreeze
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .Z    at /usr/bin/uncompress
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .gz   at /bin/gzip -d
Sep  8 17:08:38 *** amavis[13256]: Internal decoder for .gz   (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .bz2  at /bin/bzip2 -d
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .xz   at /usr/bin/xzdec
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .lzma at /usr/bin/lzmadec
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .lrz  at /usr/bin/lrzip -q -k -d -o -
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .lzo  at /usr/bin/lzop -d
Sep  8 17:08:38 *** amavis[13256]: No ext program for   .rpm, tried: rpm2cpio.pl, rpm2cpio
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .cpio at /usr/bin/pax
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .tar  at /usr/bin/pax
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .deb  at /usr/bin/ar
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .rar  at /usr/bin/unrar
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .arj  at /usr/bin/unarj
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .arc  at /usr/bin/arc
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .zoo  at /usr/bin/zoo
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .doc  at /usr/bin/ripole
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .cab  at /usr/bin/cabextract
Sep  8 17:08:38 *** amavis[13256]: No ext program for   .tnef, tried: tnef
Sep  8 17:08:38 *** amavis[13256]: Internal decoder for .tnef
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .zip  at /usr/bin/7za
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .kmz  at /usr/bin/7za
Sep  8 17:08:38 *** amavis[13256]: Internal decoder for .zip  (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Internal decoder for .kmz  (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .7z   at /usr/bin/7zr
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .7z   at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .zip  at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .gz   at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .bz2  at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .Z    at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .tar  at /usr/bin/7za (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .xz   at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .lzma at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .jar  at /usr/bin/7z
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .cpio at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .arj  at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .rar  at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .swf  at /usr/bin/7z
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .lha  at /usr/bin/7z
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .iso  at /usr/bin/7z
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .cab  at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .deb  at /usr/bin/7z (backup, not used)
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .rpm  at /usr/bin/7z
Sep  8 17:08:38 *** amavis[13256]: Found decoder for    .exe  at /usr/bin/unrar; /usr/bin/lha; /usr/bin/unarj
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: KasperskyLab AVP - aveclient
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: KasperskyLab AntiViral Toolkit Pro (AVP)
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: KasperskyLab AVPDaemonClient
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: CentralCommand Vexira (new) vascan
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Avira AntiVir
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Avira AntiVir
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Command AntiVirus for Linux
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Symantec CarrierScan via Symantec CommandLineScanner
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Symantec AntiVirus Scan Engine
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: F-Secure Linux Security
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: CAI InoculateIT
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: CAI eTrust Antivirus
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: MkS_Vir for Linux (beta)
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: MkS_Vir daemon
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: ESET Software ESETS Command Line Interface
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: ESET NOD32 for Linux File servers
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Norman Virus Control v5 / Linux
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Panda CommandLineSecure 9 for Linux
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: NAI McAfee AntiVirus (uvscan)
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: VirusBuster
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: CyberSoft VFind
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: avast! Antivirus
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: Ikarus AntiVirus for Linux
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: BitDefender
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: BitDefender
Sep  8 17:08:38 *** amavis[13256]: No primary av scanner: ArcaVir for Linux
Sep  8 17:08:38 *** amavis[13256]: Found secondary av scanner ClamAV-clamscan at /usr/bin/clamscan
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: F-PROT Antivirus for UNIX
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: FRISK F-Prot Antivirus
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: Trend Micro FileScanner
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: drweb - DrWeb Antivirus
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: Kaspersky Antivirus v5.5
Sep  8 17:08:38 *** amavis[13256]: No secondary av scanner: Sophos Anti Virus (savscan)
Sep  8 17:08:38 *** amavis[13256]: Using internal spam scanner code for SpamAssassin
Sep  8 17:08:38 *** amavis[13256]: Deleting db files snmp.db,nanny.db,__db.002,__db.001,__db.004,__db.003 in /var/amavis/db
Sep  8 17:08:38 *** amavis[13256]: Creating db in /var/amavis/db/; BerkeleyDB 0.53, libdb 4.8
Sep  8 17:08:39 *** amavis[13256]: initializing Mail::SpamAssassin (0)
Sep  8 17:08:39 *** amavis[13256]: SpamAssassin debug facilities: info
Sep  8 17:08:41 *** amavis[13256]: SpamAssassin loaded plugins: AutoLearnThreshold, Bayes, BodyEval, Check, DKIM, DNSEval, FreeMail, HTMLEval, HTTPSMismatch, HeaderEval, ImageInfo, MIMEEval, MIMEHeader, Pyzor, Razor2, RelayEval, ReplaceTags, SPF, SpamCop, URIDetail, URIEval, VBounce, WLBLEval, WhiteListSubject
Sep  8 17:08:41 *** amavis[13256]: SpamControl: init_pre_fork on SpamAssassin done
Sep  8 17:08:41 *** amavis[13256]: extra modules loaded after daemonizing/chrooting: Mail/SpamAssassin/Plugin/FreeMail.pm, Mail/SpamAssassin/Plugin/SpamCop.pm, Net/Cmd.pm, Net/Config.pm, Net/SMTP.pm
Sep  8 17:08:41 *** amavis[13256]: Net::Server: Beginning prefork (2 processes)
Sep  8 17:08:41 *** amavis[13256]: Net::Server: Starting "2" children
Sep  8 17:08:41 *** amavis[13260]: Net::Server: Child Preforked (13260)
Sep  8 17:08:41 *** amavis[13260]: entered child_init_hook
Sep  8 17:08:41 *** amavis[13260]: SpamControl: init_child on SpamAssassin done
Sep  8 17:08:41 *** amavis[13256]: Net::Server: Parent ready for children.
Sep  8 17:08:41 *** amavis[13261]: Net::Server: Child Preforked (13261)
Sep  8 17:08:41 *** amavis[13261]: entered child_init_hook
Sep  8 17:08:41 *** amavis[13261]: SpamControl: init_child on SpamAssassin done




Comment 5


Eray Aslan






          2014-09-09 07:49:07 UTC
        

(In reply to Daniel from comment #3)
> I do have IPV6 in the kernel.
> dev-perl/net-server is installed with USE=-ipv6, as it's set globally.

So, you have ipv6 support in your kernel but require amavisd to use only ipv4.  You must tell that to amavisd.  Use

$inet_socket_bind = '127.0.0.1';

in amavisd.conf.




Comment 6


Daniel





          2014-09-09 10:45:34 UTC
        

Thanks, worksforme, too.

But isn't there a way for the amavisd-new ebuild to honour the -ipv6 USE flag accordingly, or at least drop an elog message about it?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

