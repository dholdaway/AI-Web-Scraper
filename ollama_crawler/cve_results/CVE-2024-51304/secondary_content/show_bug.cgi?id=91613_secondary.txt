Title: 91613 – oftpd doesn't links to libgcc_s.so.1, claims it is not installed.
URL: https://bugs.gentoo.org/show_bug.cgi?id=91613

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 91613
oftpd doesn't links to libgcc_s.so.1, claims it is not installed.
Last modified: 2005-11-07 15:31:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 91613 
      - oftpd doesn't links to libgcc_s.so.1, claims it is not installed.


Summary:
oftpd doesn't links to libgcc_s.so.1, claims it is not installed.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Jeremy Huddleston (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-05 13:53 UTC by Walther





      Modified:
    
2005-11-07 15:31 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Walther





          2005-05-05 13:53:29 UTC
        

When running oftpd, after a while it aborts like this:
# oftpd -N ftp /home/ftp
libgcc_s.so.1 must be installed for pthread_cancel to work
#
libgcc_s.so.1 is located in /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.5-20050130/libgcc_s.so.1
gcc-config -l shows:

-----------------------------
# gcc-config -l
[1] i686-pc-linux-gnu-3.3.5-20050130 *
[2] i686-pc-linux-gnu-3.3.5-20050130-hardened
[3] i686-pc-linux-gnu-3.3.5-20050130-hardenednopie
[4] i686-pc-linux-gnu-3.3.5-20050130-hardenednossp
-----------------------------

I have checked all over the gentoo forums, did a bunch of gcc-config profile changes, ran fix_libtool_files.sh on a bunch of gcc versions... and even now, after reemerging many a time oftpd (even using CFLAGS="-march=athlon-xp -O3 -pipe" to see if it had to do with the compiler), I can't make the error go away.

I don't know what's wrong... but my blind guess is that maybe oftp isn't correctly checking for pthread_cancel during it's configure stage?

-----------------------------
checking for gmtime_r... yes
checking for library containing socket... none required
checking for library containing inet_ntoa... none required
checking for inet_aton... yes
checking for library containing pthread_self... none required
configure: creating ./config.status
-----------------------------

There is no "checking for pthread_cancel", which I have seen in other configure scripts for other projects. I am at a pretty dead end, I've had to deal with this annoyance for a couple of months now (using a crontab to relaunch the service :/), and honestly... I want it fixed. I might go mail the maintaner from oftpd next if I can't get help from this bugzilla (it's the logical step after already having tried the forums).

Emerge Info:
-----------------------------
Gentoo Base System version 1.4.16
Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130, glibc-2.3.4.20041102-r1, 2.6.11-gentoo-r5 i686)
=================================================================
System uname: 2.6.11-gentoo-r5 i686 AMD Athlon(tm) XP 2500+
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Apr 30 2005, 19:44:17)]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r1, 2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -finline-functions -finline-limit=600 -mfpmath=387 -ffast-math -ftracer -funroll-loops -fprefetch-loop-arrays -freduce-all-givs"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -finline-functions -finline-limit=600 -mfpmath=387 -ffast-math -ftracer -funroll-loops -fprefetch-loop-arrays -freduce-all-givs"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache digest distlocks sandbox sfperms strict userpriv"
GENTOO_MIRRORS="ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://mirror.datapipe.net/gentoo http://gentoo.seren.com/gentoo http://gentoo.mirrored.ca/"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2 -s"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/etc/portage/overlay"
SYNC="rsync://rsync.samerica.gentoo.org/gentoo-portage"
USE="x86 3dnow X acpi alsa avi bzip2 canna cjk crypt cscope cups dedicated dga divx4linux dts dvd dvdr dvdread encode fam fbcon ffmpeg flac freewnn gd gif ginac gpm gtk gtk2 gtkhtml imap imlib innodb jabber java jikes jpeg kerberos libwww matroska mbox mikmod mmx mng mp3 mpeg ncurses nls nptl nvidia oggvorbis opengl pam pcre pdflib perl png ppds python quicktime readline samba scanner sdl spell sse ssl svg svga tcltk theora threads tiff truetype unicode usb win32codecs wmf xface xml xml2 xmms xprint xv xvid zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LINGUAS




Comment 1


Jeremy Huddleston (RETIRED)






          2005-10-16 14:10:10 UTC
        

Are youu still experiencing this problem?  I can't reproduce it...




Comment 2


Walther





          2005-11-07 15:31:37 UTC
        

Eh ... always? I already gave up on trying to fix this.. I just relaunch it
every 15 minutes using cron...

# oftpd -N ftp /home/ftp/
<..some time later after some transfers have been done...>
libgcc_s.so.1 must be installed for pthread_cancel to work
Aborted
# 

It's the kind of problem noone else seems to have.... *shrugs*, I could try
running it under gdb, but...

(gdb) run
Starting program: /usr/sbin/oftpd -N ftp /home/ftp/
(no debugging symbols found)
[Thread debugging using libthread_db enabled]
[New Thread -1210108240 (LWP 8614)]
[New Thread -1210352720 (LWP 8615)]
[New Thread -1218745424 (LWP 8626)]

Program exited normally.

I could try to help debug it further if there's a way, altough currently I just
stopped paying attention to it as I had much else to do....









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

