Title: 322109 – media-libs/devil-1.7.8: fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=322109

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 322109
media-libs/devil-1.7.8: fails to build
Last modified: 2010-07-04 20:30:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 322109 
      - media-libs/devil-1.7.8: fails to build


Summary:
media-libs/devil-1.7.8: fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-05-30 16:31 UTC by Teodor Petrov





      Modified:
    
2010-07-04 20:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,112.77 KB,
                text/plain)

            
2010-05-30 16:35 UTC,

            Teodor Petrov




Details





portage --info

              (devil.info,3.99 KB,
                text/plain)

            
2010-05-30 16:35 UTC,

            Teodor Petrov




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Teodor Petrov





          2010-05-30 16:31:03 UTC
        

emerge -av1 devil fails with some undefined symbols, see the attachments


Reproducible: Always




Comment 1


Teodor Petrov





          2010-05-30 16:35:11 UTC
        

Created attachment 233533 [details]
build log




Comment 2


Teodor Petrov





          2010-05-30 16:35:25 UTC
        

Created attachment 233535 [details]
portage --info




Comment 3


Rafał Mużyło





          2010-05-30 18:10:32 UTC
        

As the build log may have suggested, png_set_longjmp_fn
is in libpng14. For some reason, only libpng12 was detected.

If the reason was along the lines of "I've masked it, cause...",
this bug is INVALID.




Comment 4


Teodor Petrov





          2010-05-30 19:41:10 UTC
        

(In reply to comment #3)
> As the build log may have suggested, png_set_longjmp_fn
> is in libpng14. For some reason, only libpng12 was detected.
> 
> If the reason was along the lines of "I've masked it, cause...",
> this bug is INVALID.
> 
I've 1.4x installed:

$ eix libpng
[I] media-libs/libpng
     Available versions:  
        (0)     1.2.43-r2 (~)1.4.2
        (1.2)   (~)1.2.43-r3
     Installed versions:  1.4.2( 2,53,59 23.05.2010)
     Homepage:            http://www.libpng.org/
     Description:         Portable Network Graphics library






Comment 5


Rafał Mużyło





          2010-05-30 20:44:12 UTC
        

Where does that libpng12 comes from then ?
Did you i.e. create such link by yourself ?




Comment 6


Teodor Petrov





          2010-05-30 21:34:02 UTC
        

No, I've not made any links in /usr/lib*

Could it be because libpnd12 is a preserved lib for another package?




Comment 7


Rafał Mużyło





          2010-05-30 22:10:19 UTC
        

(In reply to comment #6)
> No, I've not made any links in /usr/lib*
> 
> Could it be because libpnd12 is a preserved lib for another package?
> 

It could - while you should have that fixed in the first place,
there may still be a need for a fix in the ebuild in the relevant m4 macro,
as libpng12 may be present as 1.2 slot.




Comment 8


Samuli Suominen (RETIRED)






          2010-06-05 12:53:21 UTC
        

> checking png.h usability... yes
> checking png.h presence... yes
> checking for png.h... yes
> checking for main in -lpng12... yes

That's from your build.log. That's also wrong, instead you should be seeing this:

checking png.h usability... yes
checking png.h presence... yes
checking for png.h... yes
checking for main in -lpng12... no <<<--- HERE
checking for png.h... (cached) yes
checking for main in -lpng... yes <<<--- and here, it fallback's to the usable libpng14.

Plus I just compiled it myself here. Obviously there's something broken in your system, and the ebuild is fine.





Comment 9


Teodor Petrov





          2010-06-05 13:27:03 UTC
        

(In reply to comment #8)
Do you have libpng-1.2.43+ installed?

Also how could I debug this thing?






Comment 10


Branko Majic





          2010-07-04 20:30:28 UTC
        

Hi

Take a look at #325893, it's the same issue I had.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

