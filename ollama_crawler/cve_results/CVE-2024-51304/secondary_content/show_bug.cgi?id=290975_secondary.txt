Title: 290975 – lafilefixer --justfixit error: crashes if I use --justfixit option
URL: https://bugs.gentoo.org/show_bug.cgi?id=290975

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 290975
lafilefixer --justfixit error: crashes if I use --justfixit option
Last modified: 2010-05-13 01:10:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 290975 
      - lafilefixer --justfixit error: crashes if I use --justfixit option


Summary:
lafilefixer --justfixit error: crashes if I use --justfixit option
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:



http://www.google.com/search?q=/dev/f...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-29 06:33 UTC by Jacobo Reveles





      Modified:
    
2010-05-13 01:10 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jer
loki_val









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Proposed patch to the lafilefixer script

              (lafilefixer.patch,440 bytes,
                patch)

            
2009-10-29 06:40 UTC,

            Jacobo Reveles




Details
            | Diff





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jacobo Reveles





          2009-10-29 06:33:23 UTC
        

I used the following command after properly emerging dev-util/lafilefixer:

lafilefixer --justfixit

but it crashed with the following error:
/usr/bin/lafilefixer: line 118: /dev/fd/62: No such file or directory

it works if I use any other options avilable like --help or --license

Reproducible: Always

Steps to Reproduce:
1. emerge dev-util/lafilefixer
2. run: lafilefixer --justfixit


Actual Results:  
crash with message: /usr/bin/lafilefixer: line 118: /dev/fd/62: No such file or directory


Expected Results:  
find and fix *.la files




Comment 1


Jacobo Reveles





          2009-10-29 06:36:45 UTC
        

forgot to mention the lafilefixer version.
it's 0.5




Comment 2


Jacobo Reveles





          2009-10-29 06:40:51 UTC
        

Created attachment 208609 [details, diff]
Proposed patch to the lafilefixer script

Patch created using diff -up
After applying this patch to the script, it worked as expected.




Comment 3


Jacobo Reveles





          2009-10-29 06:51:25 UTC
        

emerge --info
Portage 2.2_rc46 (default/linux/x86/2008.0/desktop, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.30-gentoo-r6 i686)
=================================================================
System uname: Linux-2.6.30-gentoo-r6-i686-Mobile_Intel-R-_Pentium-R-_4_CPU_2.80GHz-with-gentoo-2.1.5
Timestamp of tree: Tue, 27 Oct 2009 05:30:01 +0000
app-shells/bash:     4.0_p28
dev-java/java-config: 2.1.9
dev-lang/python:     2.6.2-r1
sys-apps/baselayout: 2.1.5
sys-apps/openrc:     0.5.0-r2
sys-apps/sandbox:    2.1
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.5, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.29
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,--as-needed"
LINGUAS="en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alac alsa avahi berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt cups dbus dri dts dvd dvdr dvdread eds emboss encode esd evo fam ffmpeg firefox flac fortran gdbm gif gnome gpm gstreamer gtk hal iconv isdnlog java jpeg lame ldap libnotify mad mikmod mmx modules mp3 mp4 mpeg mudflap nautilus ncurses nls nptl nptlonly ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3support quicktime readline reflection sdl session spell spl sse sse2 ssl startup-notification svg sysfs tcpd thunar tiff truetype unicode usb vorbis wavpack win32codecs x264 x86 xml xorg xscreensaver xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="canon ptp2" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse synaptics joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="radeon" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 4


Jacobo Reveles





          2009-10-29 06:55:41 UTC
        

I just got the same error running revdep-rebuild:
/usr/bin/revdep-rebuild: line 520: /dev/fd/62: No such file or directory





Comment 5


Jeroen Roovers (RETIRED)






          2009-10-29 21:02:20 UTC
        

I think the patch only works around some unknown problem instead of addressing the real issue, but let's pass this on to the package maintainer.




Comment 6


Jeroen Roovers (RETIRED)






          2009-10-29 21:15:18 UTC
        

Is this happening inside a chroot or inside a VM running Gentoo? The URL suggests these things mainly happen when /dev isn't mounted or udev isn't running.




Comment 7


Peter Alfredsen (RETIRED)






          2009-10-29 21:22:23 UTC
        

Not lafilefixer, this one. Looks like something in your environment is screwed up.




Comment 8


Jeroen Roovers (RETIRED)






          2009-10-30 12:35:58 UTC
        

Comment on attachment 208609 [details, diff]
Proposed patch to the lafilefixer script

That's the end of that patch, then.




Comment 9


Jacobo Reveles





          2009-10-31 18:09:13 UTC
        

(In reply to comment #6)
> Is this happening inside a chroot or inside a VM running Gentoo? The URL
> suggests these things mainly happen when /dev isn't mounted or udev isn't
> running.
> 

No, this happened on my real system




Comment 10


Jacobo Reveles





          2009-10-31 18:56:17 UTC
        

(In reply to comment #9)
> (In reply to comment #6)
> > Is this happening inside a chroot or inside a VM running Gentoo? The URL
> > suggests these things mainly happen when /dev isn't mounted or udev isn't
> > running.
> > 
> 
> No, this happened on my real system
> 

also, udev is running and /dev is mounted




Comment 11


Jacobo Reveles





          2009-10-31 20:08:17 UTC
        

I updated the system packages: emerge -u system
and now it works as expected, so looked like a problem with one of the system packages, probably baselayout or udev

This bug can be closed now,
Thanks




Comment 12


Bruce Wang





          2010-05-13 01:10:10 UTC
        

I solved this problem by linking /proc/self/fd to /dev/fd:

ln -s /proc/self/fd /dev/fd

then the error gone.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

