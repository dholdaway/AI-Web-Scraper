Title: 348446 – media-video/transcode-1.1.5-r2 fails to build (invalid .la file)
URL: https://bugs.gentoo.org/show_bug.cgi?id=348446

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348446
media-video/transcode-1.1.5-r2 fails to build (invalid .la file)
Last modified: 2011-01-11 14:01:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348446 
      - media-video/transcode-1.1.5-r2 fails to build (invalid .la file)


Summary:
media-video/transcode-1.1.5-r2 fails to build (invalid .la file)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-12-11 19:50 UTC by LuVar





      Modified:
    
2011-01-11 14:01 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



xmw









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log of failed emerge transcode run

              (build.log,93.96 KB,
                text/plain)

            
2010-12-11 19:53 UTC,

            LuVar




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


LuVar





          2010-12-11 19:50:59 UTC
        

Error while installing transcode. It says that file /usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/libgomp.la doesnt exists. It is right, it doesnt exist...

Reproducible: Always

Steps to Reproduce:
1.sudo emerge --oneshot transcode

Actual Results:  
emerge will fail. This is some tail relevant lines from console:

libtool: link: x86_64-pc-linux-gnu-gcc -shared  .libs/export_ffmpeg_la-export_ffmpeg.o .libs/export_ffmpeg_la-aud_aux.o .libs/export_ffmpeg_la-ffmpeg_cfg.o   -Wl,--as-needed -lavcodec -L/usr/lib /usr/lib64/libmp3lame.so -lm -lz -ldl  -march=native -Wl,-O1   -Wl,-soname -Wl,export_ffmpeg.so -o .libs/export_ffmpeg.so
libtool: link: x86_64-pc-linux-gnu-gcc -shared  .libs/export_jpg_la-export_jpg.o   -Wl,--as-needed -L/usr/lib /usr/lib64/libjpeg.so -lm -lz -ldl  -march=native -Wl,-O1   -Wl,-soname -Wl,export_jpg.so -o .libs/export_jpg.so
libtool: link: x86_64-pc-linux-gnu-gcc -shared  .libs/export_lame.o   -Wl,--as-needed -lm -lz -ldl  -march=native -Wl,-O1   -Wl,-soname -Wl,export_lame.so -o .libs/export_lame.so
/bin/grep: /usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/libgomp.la: No such file or directory
/bin/sed: can't read /usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/libgomp.la: No such file or directory
libtool: link: `/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/libgomp.la' is not a valid libtool archive
make[2]: *** [export_im.la] Error 1
make[2]: *** Waiting for unfinished jobs....
mv -f .deps/export_xvid4_la-aud_aux.Tpo .deps/export_xvid4_la-aud_aux.Plo
libtool: link: ( cd ".libs" && rm -f "export_divx5.la" && ln -s "../export_divx5.la" "export_divx5.la" )
libtool: link: x86_64-pc-linux-gnu-gcc -shared  .libs/export_mp2.o   -Wl,--as-needed -lm -lz -ldl  -march=native -Wl,-O1   -Wl,-soname -Wl,export_mp2.so -o .libs/export_mp2.so
libtool: link: ( cd ".libs" && rm -f "export_jpg.la" && ln -s "../export_jpg.la" "export_jpg.la" )
libtool: link: ( cd ".libs" && rm -f "export_ffmpeg.la" && ln -s "../export_ffmpeg.la" "export_ffmpeg.la" )
libtool: link: ( cd ".libs" && rm -f "export_lame.la" && ln -s "../export_lame.la" "export_lame.la" )
mv -f .deps/export_xvid4_la-export_xvid4.Tpo .deps/export_xvid4_la-export_xvid4.Plo
libtool: link: ( cd ".libs" && rm -f "export_mp2.la" && ln -s "../export_mp2.la" "export_mp2.la" )
make[2]: Leaving directory `/var/tmp/portage/media-video/transcode-1.1.5-r2/work/transcode-1.1.5/export'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-video/transcode-1.1.5-r2/work/transcode-1.1.5'
make: *** [all] Error 2
emake failed
 * ERROR: media-video/transcode-1.1.5-r2 failed:
 *   emake failed
 * 
 * Call stack:
 *     ebuild.sh, line   56:  Called src_compile
 *   environment, line 3252:  Called _eapi2_src_compile
 *     ebuild.sh, line  654:  Called die
 * The specific snippet of code:
 *              emake || die "emake failed"
 * 
 * If you need support, post the output of 'emerge --info =media-video/transcode-1.1.5-r2',
 * the complete build log and the output of 'emerge -pqv =media-video/transcode-1.1.5-r2'.
 * The complete build log is located at '/var/tmp/portage/media-video/transcode-1.1.5-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/media-video/transcode-1.1.5-r2/temp/environment'.
 * S: '/var/tmp/portage/media-video/transcode-1.1.5-r2/work/transcode-1.1.5'

>>> Failed to emerge media-video/transcode-1.1.5-r2, Log file:

>>>  '/var/tmp/portage/media-video/transcode-1.1.5-r2/temp/build.log'

 * Messages for package media-video/transcode-1.1.5-r2:

 * ERROR: media-video/transcode-1.1.5-r2 failed:
 *   emake failed
 * 
 * Call stack:
 *     ebuild.sh, line   56:  Called src_compile
 *   environment, line 3252:  Called _eapi2_src_compile
 *     ebuild.sh, line  654:  Called die
 * The specific snippet of code:
 *              emake || die "emake failed"
 * 
 * If you need support, post the output of 'emerge --info =media-video/transcode-1.1.5-r2',
 * the complete build log and the output of 'emerge -pqv =media-video/transcode-1.1.5-r2'.
 * The complete build log is located at '/var/tmp/portage/media-video/transcode-1.1.5-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/media-video/transcode-1.1.5-r2/temp/environment'.
 * S: '/var/tmp/portage/media-video/transcode-1.1.5-r2/work/transcode-1.1.5'


Expected Results:  
transcode get installed on my system...

emerge --info =media-video/transcode-1.1.5-r2
Portage 2.1.9.24 (default/linux/amd64/10.0/desktop, gcc-4.4.4, glibc-2.11.2-r3, 2.6.34-gentoo-r12 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.34-gentoo-r12-x86_64-Intel-R-_Core-TM-_i7_CPU_930_@_2.80GHz-with-gentoo-1.12.14
Timestamp of tree: Sat, 11 Dec 2010 16:00:23 +0000
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r2, 3.1.2-r3
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.4-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /usr/share/openvpn/easy-rsa /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="sk_SK.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit X a52 aac aalib acl acpi alsa amd64 bash-completion berkdb bluetooth branding bzip2 cairo cdr cli consolekit cpudetection cracklib crypt cups cxx dbus dedicated djvu dri dts dvd dvdr emboss encode exif extras fam ffmpeg firefox flac fontconfig fortran gdbm gif gpm graphviz gs gtk hal hdri iconv imagemagick ipv6 java jbig jpeg jpeg2k kde lcms ldap libnotify lm_sensors lzma mad mikmod mjepg mmx mng modules mp3 mp4 mpeg mudflap multilib multimedia mysql ncurses network nls nptl nptlonly nsplugin nvidia ogg openal opengl openmp pam pango pcre pdf perl png postgres ppds pppd pulseaudio python qt3support qt4 readline samba sdl semantic-desktop session spell sql sse sse2 sse3 sse4 ssl ssse3 startup-notification svg sysfs tcpd theora threads tiff truetype unicode usb utf-8 utf8 vim-syntax virtualbox vorbis vorgis webkit x264 xcb xinerama xml xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" NETBEANS_MODULES="mobility enterprise ergonomics ide java nb profiler websvccommon apisupport harness" PHP_TARGETS="php5-2" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS


File /var/tmp/portage/media-video/transcode-1.1.5-r2/temp/build.log is 94K long, so I will attach it to bug as attachment.




Comment 1


LuVar





          2010-12-11 19:53:43 UTC
        

Created attachment 256922 [details]
build.log of failed emerge transcode run




Comment 2


Michael Weber (RETIRED)






          2010-12-11 22:47:55 UTC
        

Hello,

can you please run `lafilefixer --justfixit` from dev-util/lafilefixer and retry? 

Thanks




Comment 3


LuVar





          2010-12-12 00:25:00 UTC
        

I had emerged that woodoo program and I had started "lafilefixer --justfixit". It had done some work and after it command "emerge transcode" worked.

From my point of view, is this ticket resolved. I dont know what are *.la files, nor whot is lafilefixer program (no man page for it), but it is working now (emerge process for transcode).

Thanks, have a nice rest of weekend.




Comment 4


Alexis Ballier






          2011-01-11 14:01:15 UTC
        

(In reply to comment #3)
> I had emerged that woodoo program and I had started "lafilefixer --justfixit".
> It had done some work and after it command "emerge transcode" worked.
> 
> From my point of view, is this ticket resolved. I dont know what are *.la
> files, nor whot is lafilefixer program (no man page for it), but it is working
> now (emerge process for transcode).
> 
> Thanks, have a nice rest of weekend.
> 


you can also run revdep-rebuild too; its a gcc upgrade that messed the .la files -> worksforme










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

