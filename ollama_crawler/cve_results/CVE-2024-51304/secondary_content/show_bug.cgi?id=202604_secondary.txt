Title: 202604 – app-emulation/wine crash after kernel upgrade to gentoo-sources-2.6.23-r3
URL: https://bugs.gentoo.org/show_bug.cgi?id=202604

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 202604
app-emulation/wine crash after kernel upgrade to gentoo-sources-2.6.23-r3
Last modified: 2011-03-01 07:32:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 202604 
      - app-emulation/wine crash after kernel upgrade to gentoo-sources-2.6.23-r3


Summary:
app-emulation/wine crash after kernel upgrade to gentoo-sources-2.6.23-r3
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Wine Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-12-17 18:37 UTC by Paweł Zaskórski





      Modified:
    
2011-03-01 07:32 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paweł Zaskórski





          2007-12-17 18:37:34 UTC
        

After upgrade kernel to gentoo-sources-2.6.23-r3, wine crash when I try to run Homeworld. Problem appears in wine-0.9.50 and 0.9.51. On gentoo-sources-2.6.22-r9 everything works perfect.

Reproducible: Always

Steps to Reproduce:
1. build and run new kernel (gentoo-sources-2.6.23-r3) with the same configuration as 2.6.22-r9 (run "make oldconfig")
2. try to run homeworld

Actual Results:  
fixme:win:EnumDisplayDevicesW ((null),0,0x33f03c,0x00000000), stub!
wine: Unhandled page fault on write access to 0x00000000 at address 0x43b523 (thread 000f), starting debugger...
Unhandled exception: page fault on write access to 0x00000000 in 32-bit code (0x0043b523).
Register dump:
 CS:0073 SS:007b DS:007b ES:007b FS:0033 GS:003b
 EIP:0043b523 ESP:7c636974 EBP:7c6369d4 EFLAGS:00010246(   - 00      -RIZP1)
 EAX:00000000 EBX:00000000 ECX:00000800 EDX:00002000
 ESI:00000000 EDI:00000000
Stack dump:
0x7c636974:  7efe3ff4 00ec34a0 006887a0 00000002
0x7c636984:  7c6369e4 00000000 7efe3ff4 7efbe459
0x7c636994:  7efe3ff4 00000000 00000000 00400000
0x7c6369a4:  7c6369e4 00000001 7efa1103 00000000
0x7c6369b4:  7ee3b0b1 b7e82ff4 00000000 7efec7e0
0x7c6369c4:  7efe3ff4 00ec34a0 006887a0 7c636a08
Backtrace:
=>1 0x0043b523 in homeworld (+0x3b523) (0x7c6369d4)
  2 0x006887fd in homeworld (+0x2887fd) (0x7c636a08)
  3 0x7efc5bde call_thread_entry_point+0xe() in ntdll (0x7c636a18)
  4 0x7efc68f2 in ntdll (+0x568f2) (0x7c636ab8)
  5 0x7efc6b8f in ntdll (+0x56b8f) (0x7c6373b8)
  6 0xb7e8c18b in libpthread.so.0 (+0x518b) (0x7c6374b8)
  7 0xb7e1804e __clone+0x5e() in libc.so.6 (0x00000000)
0x0043b523: repe stosl  %es:(%edi)
Modules:
Module  Address                 Debug info      Name (108 modules)
PE        400000-  978000       Export          homeworld
PE      10000000-10031000       Deferred        binkw32
ELF     7bf00000-7bf04000       Deferred        <wine-loader>
ELF     7c4c7000-7c527000       Deferred        winedos<elf>
  \-PE  7c4d0000-7c527000       \               winedos
ELF     7c85a000-7c865000       Deferred        libgcc_s.so.1
ELF     7c947000-7c9c7000       Deferred        libglu.so.1
ELF     7c9e3000-7ca63000       Deferred        opengl32<elf>
  \-PE  7ca00000-7ca63000       \               opengl32
ELF     7ca63000-7cb52000       Deferred        wined3d<elf>
  \-PE  7ca80000-7cb52000       \               wined3d
ELF     7cb52000-7cb68000       Deferred        midimap<elf>
  \-PE  7cb60000-7cb68000       \               midimap
ELF     7cb68000-7cc19000       Deferred        libasound.so.2
ELF     7cc19000-7cc50000       Deferred        winealsa<elf>
  \-PE  7cc20000-7cc50000       \               winealsa
ELF     7cc50000-7cc7e000       Deferred        libcrypt.so.1
ELF     7cc7e000-7cccf000       Deferred        libgcrypt.so.11
ELF     7cccf000-7ccde000       Deferred        libtasn1.so.3
ELF     7ccde000-7cd4c000       Deferred        libgnutls.so.13
ELF     7cd4c000-7cd7c000       Deferred        libcups.so.2
ELF     7cd7f000-7cd98000       Deferred        msacm32<elf>
  \-PE  7cd90000-7cd98000       \               msacm32
ELF     7d089000-7d0bc000       Deferred        uxtheme<elf>
  \-PE  7d090000-7d0bc000       \               uxtheme
ELF     7d0bc000-7d0da000       Deferred        imm32<elf>
  \-PE  7d0c0000-7d0da000       \               imm32
ELF     7d0da000-7d0df000       Deferred        libxfixes.so.3
ELF     7d0df000-7d0e3000       Deferred        libxcomposite.so.1
ELF     7d0e3000-7d0e6000       Deferred        libxinerama.so.1
ELF     7d0f1000-7d0f5000       Deferred        libgpg-error.so.0
ELF     7d0f5000-7d0fe000       Deferred        libxcursor.so.1
ELF     7d0fe000-7d102000       Deferred        iso8859-2.so
ELF     7d69d000-7d69f000       Deferred        libnvidia-tls.so.1
ELF     7d69f000-7e037000       Deferred        libglcore.so.1
ELF     7e037000-7e0cd000       Deferred        libgl.so.1
ELF     7e0cd000-7e0d2000       Deferred        libxdmcp.so.6
ELF     7e0d2000-7e0d5000       Deferred        libxau.so.6
ELF     7e0d5000-7e1c0000       Deferred        libx11.so.6
ELF     7e1c0000-7e1ce000       Deferred        libxext.so.6
ELF     7e1ce000-7e1d3000       Deferred        libxxf86vm.so.1
ELF     7e1d3000-7e1ea000       Deferred        libice.so.6
ELF     7e1ea000-7e1f3000       Deferred        libsm.so.6
ELF     7e1f5000-7e1fb000       Deferred        libxrandr.so.2
ELF     7e1fb000-7e203000       Deferred        libxrender.so.1
ELF     7e20f000-7e2a2000       Deferred        winex11<elf>
  \-PE  7e220000-7e2a2000       \               winex11
ELF     7e304000-7e422000       Deferred        libxml2.so.2
ELF     7e422000-7e44c000       Deferred        libfontconfig.so.1
ELF     7e44c000-7e45f000       Deferred        libz.so.1
ELF     7e45f000-7e4d9000       Deferred        libfreetype.so.6
ELF     7e4f5000-7e54b000       Deferred        ddraw<elf>
  \-PE  7e500000-7e54b000       \               ddraw
ELF     7e54b000-7e579000       Deferred        ws2_32<elf>
  \-PE  7e550000-7e579000       \               ws2_32
ELF     7e579000-7e5c4000       Deferred        dsound<elf>
  \-PE  7e580000-7e5c4000       \               dsound
ELF     7e5c4000-7e5d6000       Deferred        libresolv.so.2
ELF     7e5d7000-7e5f2000       Deferred        wsock32<elf>
  \-PE  7e5e0000-7e5f2000       \               wsock32
ELF     7e5f2000-7e611000       Deferred        iphlpapi<elf>
  \-PE  7e600000-7e611000       \               iphlpapi
ELF     7e611000-7e66c000       Deferred        rpcrt4<elf>
  \-PE  7e620000-7e66c000       \               rpcrt4
ELF     7e66c000-7e70d000       Deferred        ole32<elf>
  \-PE  7e680000-7e70d000       \               ole32
ELF     7e70d000-7e722000       Deferred        lz32<elf>
  \-PE  7e710000-7e722000       \               lz32
ELF     7e722000-7e73c000       Deferred        version<elf>
  \-PE  7e730000-7e73c000       \               version
ELF     7e73c000-7e764000       Deferred        msvfw32<elf>
  \-PE  7e740000-7e764000       \               msvfw32
ELF     7e764000-7e78c000       Deferred        msacm32<elf>
  \-PE  7e770000-7e78c000       \               msacm32
ELF     7e78c000-7e7c7000       Deferred        avifil32<elf>
  \-PE  7e790000-7e7c7000       \               avifil32
ELF     7e7c7000-7e856000       Deferred        winmm<elf>
  \-PE  7e7d0000-7e856000       \               winmm
ELF     7e856000-7e88c000       Deferred        winspool<elf>
  \-PE  7e860000-7e88c000       \               winspool
ELF     7e88c000-7e94b000       Deferred        comctl32<elf>
  \-PE  7e8a0000-7e94b000       \               comctl32
ELF     7e94b000-7e998000       Deferred        advapi32<elf>
  \-PE  7e960000-7e998000       \               advapi32
ELF     7e998000-7ea30000       Deferred        gdi32<elf>
  \-PE  7e9b0000-7ea30000       \               gdi32
ELF     7ea30000-7eb6c000       Deferred        user32<elf>
  \-PE  7ea50000-7eb6c000       \               user32
ELF     7eb6c000-7ebc5000       Deferred        shlwapi<elf>
  \-PE  7eb80000-7ebc5000       \               shlwapi
ELF     7ebc5000-7ecc9000       Deferred        shell32<elf>
  \-PE  7ebe0000-7ecc9000       \               shell32
ELF     7ecc9000-7ed6b000       Deferred        comdlg32<elf>
  \-PE  7ecd0000-7ed6b000       \               comdlg32
ELF     7edc8000-7eef1000       Deferred        kernel32<elf>
  \-PE  7ede0000-7eef1000       \               kernel32
ELF     7eef1000-7eefb000       Deferred        libnss_files.so.2
ELF     7eefb000-7ef05000       Deferred        libnss_nis.so.2
ELF     7ef05000-7ef1c000       Deferred        libnsl.so.1
ELF     7ef1c000-7ef42000       Deferred        libm.so.6
ELF     7ef5e000-7f000000       Export          ntdll<elf>
  \-PE  7ef70000-7f000000       \               ntdll
ELF     b7d53000-b7d57000       Deferred        libdl.so.2
ELF     b7d57000-b7e87000       Export          libc.so.6
ELF     b7e87000-b7e9e000       Export          libpthread.so.0
ELF     b7eb2000-b7eba000       Deferred        libnss_compat.so.2
ELF     b7eba000-b7fce000       Deferred        libwine.so.1
ELF     b7fcf000-b7feb000       Deferred        ld-linux.so.2
Threads:
process  tid      prio (all id:s are in hex)
0000000a 
        0000000c    0
        0000000b    0
00000008 (D) C:\Homeworld\homeworld.exe
        0000000f    0 <==
        0000000e    0
        0000000d   15
        00000009    0
Backtrace:
=>1 0x0043b523 in homeworld (+0x3b523) (0x7c6369d4)
  2 0x006887fd in homeworld (+0x2887fd) (0x7c636a08)
  3 0x7efc5bde call_thread_entry_point+0xe() in ntdll (0x7c636a18)
  4 0x7efc68f2 in ntdll (+0x568f2) (0x7c636ab8)
  5 0x7efc6b8f in ntdll (+0x56b8f) (0x7c6373b8)
  6 0xb7e8c18b in libpthread.so.0 (+0x518b) (0x7c6374b8)
  7 0xb7e1804e __clone+0x5e() in libc.so.6 (0x00000000)


Expected Results:  
Homeworld should run

Portage 2.1.3.19 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.22-gentoo-r9 i686)
=================================================================
System uname: 2.6.22-gentoo-r9 i686 AMD Athlon(tm) 64 Processor 3200+
Timestamp of tree: Mon, 17 Dec 2007 10:30:01 +0000
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.3.5-r3, 2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon64 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=athlon64 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="pl_PL"
LC_ALL="pl_PL"
LINGUAS="pl"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/mnt/storage7/portage.tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/mozilla /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 7zip S3TC X a52 aac acl acpi aiglx alsa apache2 audiofile avi bash-completion bcmath beagle berkdb bitmap-fonts branding bzip2 bzlib cairo calendar cdr cli cracklib crypt ctype cups dba dbus dri dvd dvdr dvdread emboss encode exif faad fam ffmpeg firefox flac ftp gamin gd gdbm gif glitz glx gmail gnome gphoto2 gstreamer gtk gtk2 hal hddtemp iconv id3tag imap ipv6 isdnlog jabber java jpeg jpg kde libnotify lm_sensors mad matroska mbox midi mikmod miknod mime mmx mmxext mng modplug mp3 mp4 mpeg mudflap musepack musicbrainz mysql ncurses nls nptl nptlonly nsplugin nvidia ogg oggvorbis opengl openmp pam pcre pdf pdflib perl png pppd python qt qt3 qt3support query-browser quicktime rdesktop readline real reflection rtc sdl session sou sounds spell spl srt sse sse2 ssl svg tcpd theora thunderbird tiff timidity trayicon truetype truetype-fonts tryetype-fonts type1-fonts udev unicode usb vnc vorbis win32codecs wmp workbench x264 x86 xattr xcomposite xface xml xorg xosd xscreensaver xv xvid zip zlib zsh-completion" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="pl" USERLAND="GNU" VIDEO_CARDS="nvidia none"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Valeriy Malov





          2009-11-21 08:12:48 UTC
        

2.6.23 is not even in tree now, maybe this bug is outdated?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

