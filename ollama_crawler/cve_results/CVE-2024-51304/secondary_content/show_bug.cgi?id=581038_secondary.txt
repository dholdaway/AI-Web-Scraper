Title: 581038 – x11-wm/xpra w/ CC=clang: /usr/include/python2.7/modsupport.h:27:1: error: ‘_PyArg_ParseTuple_SizeT’ is an unrecognized format function type [-Werror=format=]
URL: https://bugs.gentoo.org/show_bug.cgi?id=581038

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 581038
x11-wm/xpra w/ CC=clang: /usr/include/python2.7/modsupport.h:27:1: error: ‘_PyArg_ParseTuple_SizeT’ is an unrecognized format function type [-Werror=format=]
Last modified: 2017-03-10 14:02:59 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 581038 
      - x11-wm/xpra w/ CC=clang: /usr/include/python2.7/modsupport.h:27:1: error: ‘_PyArg_ParseTuple_SizeT’ is an unrecognized format function type [-Werror=format=]


Summary:
x11-wm/xpra w/ CC=clang: /usr/include/python2.7/modsupport.h:27:1: error: ‘_P...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Michael Weber (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-04-24 11:16 UTC by Sergey 'L29Ah' Alirzaev





      Modified:
    
2017-03-10 14:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log amd64 CC=clang

              (xpra-1.0.3-r1:20170310-134042.log,340.19 KB,
                text/plain)

            
2017-03-10 13:50 UTC,

            Michael Weber (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sergey 'L29Ah' Alirzaev





          2016-04-24 11:16:29 UTC
        

pra/x11/bindings/wait_for_x_server.c -o /var/tmp/paludis/x11-wm-xpra-0.16.2-r1/work/xpra-0.16.2-python2_7/temp.linux-x86_64-2.7/xpra/x11/bindings/wait_for_x_server.o -Wall -Werror
In file included from /usr/include/python2.7/Python.h:126:0,
                 from xpra/x11/bindings/wait_for_x_server.c:22:
/usr/include/python2.7/modsupport.h:27:1: error: ‘_PyArg_ParseTuple_SizeT’ is an unrecognized format function type [-Werror=format=]
 PyAPI_FUNC(int) PyArg_ParseTuple(PyObject *, const char *, ...) Py_FORMAT_PARSETUPLE(PyArg_ParseTuple, 2, 3);
 ^




Comment 1


Sergey 'L29Ah' Alirzaev





          2016-04-24 11:28:02 UTC
        

fixed it locally with https://github.com/l29ah/booboo/blob/158dc25016cbbdab7519ad8424745ff1d2918cfb/x11-wm/xpra/xpra-0.17.0.ebuild#L98




Comment 2


Michael Weber (RETIRED)






          2016-07-03 09:47:54 UTC
        

This is no longer an issue, or not reproduce-able with

0.17.4
0.16.3
0.15.10-r1
0.14.34
0.14.27

Please re-open or re-file if the problem persists.




Comment 3


Sergey 'L29Ah' Alirzaev





          2016-07-03 11:52:08 UTC
        

Same problem with 0.17.4.




Comment 4


Christohper Harrington





          2016-07-31 06:04:04 UTC
        

(In reply to Sergey 'L29Ah' Alirzaev from comment #3)
> Same problem with 0.17.4.

Somehow related to Paludis? I also cannot reproduce with Python 2.7.




Comment 5


Sergey 'L29Ah' Alirzaev





          2016-07-31 11:52:55 UTC
        

Try with CC=clang.




Comment 6


Michael Weber (RETIRED)






          2017-03-10 13:50:53 UTC
        

Created attachment 466546 [details]
build.log amd64 CC=clang

I tried 1.0.3-r1 with CC=clang and it compiled fine, esp. the line failing above 

clang -O2 -pipe -march=native -fno-strict-aliasing -fPIC -I/usr/include/python2.7 -c xpra/x11/bindings/wait_for_x_server.c -o /var/tmp/portage/x11-wm/xpra-1.0.3-r1/work/xpra-1.0.3-python2_7/temp.linux-x86_64-2.7/xpra/x11/bindings/wait_for_x_server.o -Wall -Werror -Wno-unneeded-internal-declaration -Wno-unknown-attributes -Wno-unused-function -Wno-self-assign -Wno-sometimes-uninitialized
clang -shared -Wl,--hash-style=gnu -Wl,-O1 -Wl,--as-needed -O2 -pipe -march=native -fno-strict-aliasing /var/tmp/portage/x11-wm/xpra-1.0.3-r1/work/xpra-1.0.3-python2_7/temp.linux-x86_64-2.7/xpra/x11/bindings/wait_for_x_server.o -L/usr/lib64 -lX11 -lpython2.7 -o /var/tmp/portage/x11-wm/xpra-1.0.3-r1/work/xpra-1.0.3-python2_7/lib/xpra/x11/bindings/wait_for_x_server.so -O2 -pipe -march=native -fno-strict-aliasing -Wl,--hash-style=gnu -Wl,-O1 -Wl,--as-needed -Wall

I consider this resolved, either by xpra or by python dependencies.




Comment 7


Sergey 'L29Ah' Alirzaev





          2017-03-10 14:02:59 UTC
        

clang -O2 -pipe -O2 -pipe -march=native -fno-strict-aliasing -fPIC -I/usr/include/python2.7 -c xpra/x11/bindings/wait_for_x_server.c -o /var/tmp/paludis/x11-wm-xpra-1.0.3-r1/work/xpra-1.0.3-python2_7/temp.linux-x86_64-2.7/xpra/x11/bindings/wait_for_x_server.o -Wall -Werror -Wno-unneeded-internal-declaration -Wno-unknown-attributes -Wno-unused-function -Wno-self-assign -Wno-sometimes-uninitialized
In file included from xpra/x11/bindings/wait_for_x_server.c:36:
In file included from /usr/include/python2.7/Python.h:126:
/usr/include/python2.7/modsupport.h:27:65: error: 'format' attribute argument not supported: _PyArg_ParseTuple_SizeT [-Werror,-Wignored-attributes]
PyAPI_FUNC(int) PyArg_ParseTuple(PyObject *, const char *, ...) Py_FORMAT_PARSETUPLE(PyArg_ParseTuple, 2, 3);
                                                                ^
/usr/include/python2.7/pyport.h:917:57: note: expanded from macro 'Py_FORMAT_PARSETUPLE'
#define Py_FORMAT_PARSETUPLE(func,p1,p2) __attribute__((format(func,p1,p2)))
                                                        ^
1 error generated.
error: command 'clang' failed with exit status 1









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

