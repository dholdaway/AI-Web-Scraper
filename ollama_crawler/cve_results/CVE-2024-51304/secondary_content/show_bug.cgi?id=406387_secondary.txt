Title: 406387 – dev-lang/php needs a rebuild after dev-db/unixODBC upgrade to 2.3.1 from prior due to normal library ABI bump
URL: https://bugs.gentoo.org/show_bug.cgi?id=406387

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 406387
dev-lang/php needs a rebuild after dev-db/unixODBC upgrade to 2.3.1 from prior due to normal library ABI bump
Last modified: 2012-03-02 21:14:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 406387 
      - dev-lang/php needs a rebuild after dev-db/unixODBC upgrade to 2.3.1 from prior due to normal library ABI bump


Summary:
dev-lang/php needs a rebuild after dev-db/unixODBC upgrade to 2.3.1 from prio...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-03-01 04:55 UTC by Daniel Savard





      Modified:
    
2012-03-02 21:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (build.log,14.64 KB,
                text/plain)

            
2012-03-01 20:37 UTC,

            Daniel Savard




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Savard





          2012-03-01 04:55:29 UTC
        

The unixODBC 2.3.1 removes the libodbc.so.1 from the filesystem while it is still required by some ebuilds compiled against it. Namely libvpx-1.0.0. So, libvpx ebuild fails with an error due to the missing link/file.

Reproducible: Always

Steps to Reproduce:
1.emerge unixODBC-2.3.1
2.emerge libvpx-1.0.0
3.
Actual Results:  
Failure due to libodbc.so.1 missing in the filesystem.

Expected Results:  
Should complete and link against libodbc.so.2 instead.

Temporary patch: Create a link from libodbc.so.1 to libodbc.so.2 accordingly to documentation on unixODBC site: http://www.unixodbc.org/ see release notes for 2.3.1, Novembre 2011.




Comment 1


Jeroen Roovers (RETIRED)






          2012-03-01 05:41:06 UTC
        

Um, media-libs/libvpx does not use dev-db/unixODBC, or shouldn't, so if you would be so good as to substantiate your claim, and attach the build log showing that libvpx fails to build, then please reopen this bug report after you've done that.




Comment 2


Daniel Savard





          2012-03-01 20:37:34 UTC
        

Created attachment 303873 [details]
Build log

Build log to demonstrate the libvpx-1.0.0 ebuild is trying to link to libodbc.so.1 from unixODBC ebuild and fails.




Comment 3


Daniel Savard





          2012-03-01 20:40:04 UTC
        

emerge --info =media-libs/libvpx-1.0.0
Portage 2.1.10.44 (default/linux/amd64/10.0, gcc-4.5.3, glibc-2.13-r4, 3.2.1-gentoo-r2 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.2.1-gentoo-r2-x86_64-Intel-R-_Core-TM-_i7-2600_CPU_@_3.40GHz-with-gentoo-2.0.3
Timestamp of tree: Thu, 01 Mar 2012 19:45:01 +0000
ccache version 3.1.6 [disabled]
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2-r3, 3.1.4-r3, 3.2.2
dev-util/ccache:          3.1.6
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.0.3
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.10.3, 1.11.1
sys-devel/binutils:       2.21.1-r1
sys-devel/gcc:            4.5.3-r2
sys-devel/gcc-config:     1.4.1-r1
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.13-r4
Repositories: gentoo x-overlay
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 PUEL AdobeFlash-10.3"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks ebuild-locks fixlafiles news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://gentoo.gossamerhost.com http://gentoo.mirrors.tera-byte.com/ http://mirror.csclub.uwaterloo.ca/gentoo-distfiles/ http://gentoo.arcticnetwork.ca/ http://mirror.the-best-hosting.net http://gentoo.cites.uiuc.edu/pub/gentoo/ http://gentoo.llarian.net/ http://mirror.iawnet.sandia.gov/gentoo/ http://mirror.lug.udel.edu/pub/gentoo/ ftp://mirrors.tera-byte.com/pub/gentoo ftp://gentoo.arcticnetwork.ca/pub/gentoo/ ftp://mirror.csclub.uwaterloo.ca/gentoo-distfiles/ ftp://ftp.lug.udel.edu/pub/gentoo/ ftp://mirror.iawnet.sandia.gov/pub/gentoo/ ftp://mirror.mcs.anl.gov/pub/gentoo/ "
LANG="fr_CA.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en fr"
MAKEOPTS="-j9"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlay"
SYNC="rsync://pauli.cids.ca/gentoo-portage"
USE="X a52 aac aalib acl acpi aim alsa amd64 ao apache2 arj audiofile avahi berkdb blas bluetooth bonobo branding bsf bzip2 cairo caps cdaudio cdda cddax cddb cdparanoia cdr cgi cli consolekit cracklib crypt cscope css ctype cups curl curlwrappers cxx db2 dbi dbm dbus dbx derby dga directfb djvu doc dri dts dv dvd dvdr dvdread eds emacs encode enscript evo examples exif expat extras fam fastcgi fbcon festival ffmpeg fftw flac flatfile fltk fontconfig foomaticdb fortran ftp fuse gb gcj gconf gd gdbm geant4 geoip ggi gif gimp ginac glitz glut gmp gnome gnome-keyring gnuplot gnutls gphoto2 gpm gps graphviz gsl gsm gssapi gstreamer gtk gtkhtml gzip hddtemp httpd i18n iconv icq icu id3tag idn ieee1394 imagemagick imap imlib inifile intl ios ipv6 ithreads jabber jack jadetex java java6 javascript jbig jikes jingle jpeg jpeg2k junit kerberos kpathsea lame lapack lash latex lcms ldap ldap-sasl leim libcaca libedit libgda libnotify libsamplerate libwww live lm_sensors lzma lzo mad maildir mailwrapper mbox mcal memlimit midi mikmod milter mime mmap mms mmx mng modplug modules mozilla mp3 mp4 mpeg mpi mplayer msn mtp mudflap mule multilib musepack musicbrainz nas nautilus ncurses networkmanager nls nntp nptl nptlonly nsplugin nvidia ocaml ocr odbc ofx ogg oggvorbis openal openexr opengl openldap openmp openssl osc oscar pam pam_krb5 pam_ssh pcre pda pdf perl php pidgin plotutils png policykit portaudio posix postgres ppds pppd prefork pthreads pulseaudio python qt4 quicktime radius rar raw readline rss sane sasl scanner sdl sendmail servletapi session sha512 sharedext sharedmem slang slp smartcard smp sndfile snmp soap sockets sound sox speex spell sqlite sqlite3 sse sse2 ssl stream suexec svg swt symlink sysfs syslog sysvipc taglib tcl tcpd tetex theora threads tiff timidity tk tokenizer truetype udev unicode usb v4l v4l2 vaapi vcd vdpau vhosts vim-syntax vlm vnc vorbis wavpack wddx wmf x264 xattr xcb xcomposite xemacs xface xft xine xinerama xinetd xml xmlrpc xmp xmpp xorg xosd xpm xprint xscreensaver xsl xulrunner xv xvid xvmc yahoo zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cern_meta cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config log_forensic logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif speling status unique_id userdir usertrack version vhost_alias" APACHE2_MPMS="worker" CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev wacom" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en fr" PHP_TARGETS="php5.3 php5-3" RUBY_TARGETS="ruby18" SANE_BACKENDS="net epson2" USERLAND="GNU" VIDEO_CARDS="nouveau intel v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 4


Samuli Suominen (RETIRED)






          2012-03-02 01:03:42 UTC
        

the problem is propably in dev-lang/php which is used by libvpx for building some docs. not really a bug, you just need to run revdep-rebuild.




Comment 5


Daniel Savard





          2012-03-02 21:14:15 UTC
        

You are right, I did rebuild PHP and the problem vanished. However, I must tell you the revdep-rebuild didn't rebuild the PHP. I had to do it manually.

THX









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

