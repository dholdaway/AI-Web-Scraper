Title: 336809 – emerge sci-geosciences/mapserver -5.4.2  fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=336809

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 336809
emerge sci-geosciences/mapserver -5.4.2  fails
Last modified: 2010-10-25 14:10:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 336809 
      - emerge sci-geosciences/mapserver -5.4.2  fails


Summary:
emerge sci-geosciences/mapserver -5.4.2  fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Sci-geo Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-09-11 13:57 UTC by John L. Poole





      Modified:
    
2010-10-25 14:10 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,89.71 KB,
                text/plain)

            
2010-09-11 14:04 UTC,

            John L. Poole




Details





emerge  --info =sci-geosciences/mapserver-5.4.2

              (emerge_info,3.82 KB,
                text/plain)

            
2010-09-11 14:04 UTC,

            John L. Poole




Details





emerge -pqv =sci-geosciences/mapserver-5.4.2

              (emerge_pqv,175 bytes,
                text/plain)

            
2010-09-11 14:04 UTC,

            John L. Poole




Details





environment

              (environment,352.19 KB,
                text/plain)

            
2010-09-11 14:05 UTC,

            John L. Poole




Details





ebuild for mapserver 5.6.5

              (mapserver-5.6.5.ebuild,7.13 KB,
                text/plain)

            
2010-10-25 14:10 UTC,

            John L. Poole




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John L. Poole





          2010-09-11 13:57:54 UTC
        

emerge of sci-geosciences/mapserver fails at:

...
chmod 644 mapscript.bs
cp mapscript.bs blib/arch/auto/mapscript/mapscript.bs
chmod 644 blib/arch/auto/mapscript/mapscript.bs
mapscript_wrap.c: In function '_wrap_PDFObj_map_set':
mapscript_wrap.c:28760: error: 'result' undeclared (first use in this function)
mapscript_wrap.c:28760: error: (Each undeclared identifier is reported only once
mapscript_wrap.c:28760: error: for each function it appears in.)
distcc[6495] ERROR: compile mapscript_wrap.c on localhost failed
make: *** [mapscript_wrap.o] Error 1
 * ERROR: sci-geosciences/mapserver-5.4.2 failed:
 *   compilation failed
 *
 * Call stack:
 *     ebuild.sh, line   54:  Called src_compile
 *   environment, line 9273:  Called perl-module_src_compile
 *   environment, line 6512:  Called die
 * The specific snippet of code:
 *               emake OTHERLDFLAGS="${LDFLAGS}" ${mymake} || die "compilation failed";
 *
 * If you need support, post the output of 'emerge --info =sci-geosciences/mapserver-5.4.2',
 * the complete build log and the output of 'emerge -pqv =sci-geosciences/mapserver-5.4.2'.
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.20"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info
 * The complete build log is located at '/var/tmp/portage/sci-geosciences/mapserver-5.4.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sci-geosciences/mapserver-5.4.2/temp/environment'.
 * S: '/var/tmp/portage/sci-geosciences/mapserver-5.4.2/work/mapserver-5.4.2'

logs to follow




Comment 1


John L. Poole





          2010-09-11 14:04:07 UTC
        

Created attachment 246829 [details]
build.log




Comment 2


John L. Poole





          2010-09-11 14:04:38 UTC
        

Created attachment 246833 [details]
emerge  --info =sci-geosciences/mapserver-5.4.2




Comment 3


John L. Poole





          2010-09-11 14:04:54 UTC
        

Created attachment 246835 [details]
emerge -pqv =sci-geosciences/mapserver-5.4.2




Comment 4


John L. Poole





          2010-09-11 14:05:19 UTC
        

Created attachment 246837 [details]
environment




Comment 5


John L. Poole





          2010-10-25 14:07:14 UTC
        

I noticed that mapserver is currently offering a stable version at 5.6.5, so I created my own ebuild using the 5.4.2 as a template.  Basically, I had to remove the portions relating to TCL in the ebuild (two sections of it) and with such redactions, mapserver 5.6.5 installed.  I'll attach my ebuild for reference.

I was noticing that the problem I had below with the 5.4.2 build was with SWIG and it looked to be a bug in mapserver's code, hence I figured I might as well get mapserver's current build on the chance they have fixed that bug (which I guess they did).

So for people wanting to install mapserver, here's a path to try.

If someone will chime in as to why TCL is important (and the consequences of my removal of it), it surely would be helpful.




Comment 6


John L. Poole





          2010-10-25 14:10:36 UTC
        

Created attachment 251943 [details]
ebuild for mapserver 5.6.5

has tcl functionality removed.

The package would not build if I included the tcl portions.  I do not know what detrimental effect there may be with the tcl removed.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

