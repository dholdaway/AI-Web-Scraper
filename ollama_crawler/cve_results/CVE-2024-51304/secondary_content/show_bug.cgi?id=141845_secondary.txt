Title: 141845 – ant error when emerging java packages: java.lang.NoSuchMethodError: org.apache.tools.ant.util.FileUtils.getFileUtils()Lorg/apache/tools/ant/util/FileUtils;
URL: https://bugs.gentoo.org/show_bug.cgi?id=141845

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 141845
ant error when emerging java packages: java.lang.NoSuchMethodError: org.apache.tools.ant.util.FileUtils.getFileUtils()Lorg/apache/tools/ant/util/FileUtils;
Last modified: 2006-09-18 16:15:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 141845 
      - ant error when emerging java packages: java.lang.NoSuchMethodError: org.apache.tools.ant.util.FileUtils.getFileUtils()Lorg/apache/tools/ant/util/FileUtils;


Summary:
ant error when emerging java packages: java.lang.NoSuchMethodError: org.apach...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       blocker
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

148127

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-07-26 19:01 UTC by Nicolas Laplante





      Modified:
    
2006-09-18 16:15 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



shawvrana









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nicolas Laplante





          2006-07-26 19:01:10 UTC
        

When I try to emerge any java package, I get the following error:

>>> Compiling source in /var/tmp/portage/commons-digester-1.7-r1/work/commons-digester-1.7-src ...
Buildfile: build.xml

init:
     [echo] -------- digester 1.7 --------

prepare:
    [mkdir] Created dir: /var/tmp/portage/commons-digester-1.7-r1/work/commons-digester-1.7-src/target
    [mkdir] Created dir: /var/tmp/portage/commons-digester-1.7-r1/work/commons-digester-1.7-src/target/classes
    [mkdir] Created dir: /var/tmp/portage/commons-digester-1.7-r1/work/commons-digester-1.7-src/target/conf
    [mkdir] Created dir: /var/tmp/portage/commons-digester-1.7-r1/work/commons-digester-1.7-src/target/tests

static:

BUILD FAILED
java.lang.NoSuchMethodError: org.apache.tools.ant.util.FileUtils.getFileUtils()Lorg/apache/tools/ant/util/FileUtils;

Total time: 1 second

!!! ERROR: dev-java/commons-digester-1.7-r1 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  commons-digester-1.7-r1.ebuild, line 45:   Called eant 'jar' 'javadoc' '-Dcommons-beanutils.jar=/usr/share/commons-beanutils-1.6/lib/commons-beanutils.jar' '-Dcommons-collections.jar=/usr/share/commons-collections/lib/commons-collections.jar' '-Dcommons-logging.jar=/usr/share/commons-logging/lib/commons-logging.jar'
  java-utils-2.eclass, line 1224:   Called die

!!! eant failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.5.0.07"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER="javac"
and of course, the output of emerge --info

I have this same error for every java package I want to install.

Here's me emerge --info:

evolution ~ # emerge --info
Portage 2.1-r1 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.3.6-r4, 2.6.17-gentoo-r4 i686)
=================================================================
System uname: 2.6.17-gentoo-r4 i686 AMD Athlon(tm) XP 2100+
Gentoo Base System version 1.6.15
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -mtune=athlon-xp -pipe -fomit-frame-pointer -momit-leaf-frame-pointer -ftree-vectorize -msse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -mtune=athlon-xp -pipe -fomit-frame-pointer -momit-leaf-frame-pointer -ftree-vectorize -msse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg ccache collision-protect distlocks metadata-transfer parallel-fetch sandbox sfperms strict userfetch userpriv"
GENTOO_MIRRORS="http://gentoo.cites.uiuc.edu/pub/gentoo/"
LINGUAS="en fr es"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X acpi alsa apache2 apm arts avi berkdb bitmap-fonts cairo caps cdr cli crypt cups dlloader dri dvd dvdr eds emboss encode esd foomaticdb fortran gdbm gif glibc-omitfp gnome gpm gstreamer gtk gtk2 imlib isdnlog java jpeg libg++ libwww mad mikmod mmx mono motif mozdevelop mp3 mpeg ncurses nls nptl nptlonly ogg opengl oss pam pcre pdflib perl png pppd python qt quicktime readline reflection samba sdl session spell spl sse ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml xmms xorg xprint xv zlib elibc_glibc input_devices_mouse input_devices_keyboard kernel_linux linguas_en linguas_fr linguas_es userland_GNU video_cards_nv video_cards_nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

I analysed the content of /usr/share/ant-core/lib/ant.jar and it does contain the org.apache.tools.ant.util.FileUtils class.




Comment 1


Jakub Moc (RETIRED)






          2006-07-27 02:13:39 UTC
        

Make sure you have followed http://www.gentoo.org/proj/en/java/java-upgrade.xml




Comment 2


Nicolas Laplante





          2006-07-27 08:37:41 UTC
        

I followed the Java upgrade guide as you proposed and I still have the problem.

evolution ~ # java-config-1 -L
[sun-jdk-1.4.2.12] "Sun JDK 1.4.2.12" (/etc/env.d/java/20sun-jdk-1.4.2.12) *

evolution ~ # java-config-2 -L
1) Sun JDK 1.4.2.12 [sun-jdk-1.4] (/usr/share/java-config-2/vm/sun-jdk-1.4)
*) Sun JDK 1.5.0.07 [sun-jdk-1.5] (/usr/share/java-config-2/vm/sun-jdk-1.5)

java-check-environment didn't show any errors;
java-1.5-fixer didn't show any errors;





Comment 3


Josh Nichols (RETIRED)






          2006-07-27 09:40:34 UTC
        

What versions of ant, ant-core, and ant-tasks do you have installed?




Comment 4


Nicolas Laplante





          2006-07-28 11:32:10 UTC
        

Error is gone. Upgraded to ant-1.6.5 and ant-core-1.6.5-r13. 

I previously had 1.6.2. 

Thanks again!




Comment 5


Vlastimil Babka (Caster) (RETIRED)






          2006-09-18 16:15:24 UTC
        

Make sure you have everything from the java upgrade guide (comment 1) keyworded and use a deep update after keywording to get everything to the latest versions.




Comment 6


Vlastimil Babka (Caster) (RETIRED)






          2006-09-18 16:15:56 UTC
        

*** Bug 148127 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

