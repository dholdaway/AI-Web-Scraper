Title: 234443 – app-editors/vim-7.1.319 - python undefined reference to `openpty' undefined reference to `forkpty'
URL: https://bugs.gentoo.org/show_bug.cgi?id=234443

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 234443
app-editors/vim-7.1.319 - python undefined reference to `openpty' undefined reference to `forkpty'
Last modified: 2009-10-18 01:33:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 234443 
      - app-editors/vim-7.1.319 - python undefined reference to `openpty' undefined reference to `forkpty'


Summary:
app-editors/vim-7.1.319 - python undefined reference to `openpty' undefined r...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Vim Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-11 05:22 UTC by Jason S.





      Modified:
    
2009-10-18 01:33 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



anthony.giorgio
lars









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jason S.





          2008-08-11 05:22:22 UTC
        

vim appears to have an incompatibility with my version of python for one reason or another.

vim-core has updated to 7.1.319 without issue, but vim cannot.

vIM output:
make[2]: Leaving directory `/var/tmp/portage/app-editors/vim-7.1.319/work/vim71/src/po'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_tempnam':
(.text+0x4f5a): warning: the use of `tempnam' is dangerous, better use `mkstemp'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_tmpnam':
(.text+0x5043): warning: the use of `tmpnam_r' is dangerous, better use `mkstemp'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_openpty':
(.text+0x22f2): undefined reference to `openpty'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_forkpty':
(.text+0x2364): undefined reference to `forkpty'
collect2: ld returned 1 exit status
make[1]: *** [vim] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-editors/vim-7.1.319/work/vim71/src'
make: *** [first] Error 2

vim-core version and flags:
[I] app-editors/vim-core
Installed versions:  7.1.319(04:02:56 PM 06/22/2008)(acl bash-completion nls -livecd)

vim version and flags:
[U] app-editors/vim
Installed versions:  7.1.285(03:55:12 PM 06/22/2008)(acl bash-completion gpm nls perl python ruby vim-pager vim-with-x -cscope -minimal)

python version and flags:
[I] dev-lang/python
Installed versions:  2.5.2-r7(2.5)(07:18:53 PM 08/03/2008)(gdbm ncurses readline sqlite ssl threads tk -berkdb -bootstrap -build -doc -elibc_uclibc -examples -ipv6 -ucs2 -wininst)

I may attempt to do USE="-python" emerge -auv vim, I don't believe I have any good reason to have python support in vim. Though that doesn't resolve this issue for everybody.

Reproducible: Always

Steps to Reproduce:
1. emerge -auv vim
2. Then you just wait
3. FTBFS

Actual Results:  
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_tmpnam':
(.text+0x5043): warning: the use of `tmpnam_r' is dangerous, better use `mkstemp'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_openpty':
(.text+0x22f2): undefined reference to `openpty'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_forkpty':
(.text+0x2364): undefined reference to `forkpty'
collect2: ld returned 1 exit status
make[1]: *** [vim] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-editors/vim-7.1.319/work/vim71/src'
make: *** [first] Error 2

Expected Results:  
Compile Successfully

Portage 2.2_rc6 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.8_p20080602-r0, 2.6.26-gentoo i686)
=================================================================
System uname: Linux-2.6.26-gentoo-i686-Pentium_III_-Coppermine-with-glibc2.0
Timestamp of tree: Sun, 10 Aug 2008 06:45:01 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.62-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O0 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/4.0/env /usr/kde/4.0/share/config /usr/kde/4.0/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=pentium3 -O0 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch preserve-libs sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.mirrors.easynews.com/linux/gentoo/"
LANG="en_US.UTF-8"
LDFLAGS=""
LINGUAS="en ja"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/overlays/oss-overlay"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="7zip X aac aalib acl administrator aim alsa amarok anthy ao apache2 avahi bash-completion beagle bonjour branding buttons bzip2 cairo canna cgi charconv cjk cli colordiff console contrarius cracklib cran crypt css csv ctype cups curl cursors cvs cvsgraph daap dbus dia divx dmi dmx dnotify doomsday dri dvd dvdnav dvdr dvdread emerald emoticon encode escreen expat extras fam fastcgi festival ffmpeg firefox flac flash force-cgi-redirect fortran ftp fuse gd gdbm geoip gif gimp gkrellm glib glitz glsa gmail gmp gnutls gpgme gpm graphviz gstreamer gtk gzip hal howl-compat httpd ical icecast icons iconv icq icu id3 idn imagemagick imap imlib immqt-bc inquisitio irc isdnlog jabber javascript jingle jp jpeg jpeg2k kcal kde kdecards lame libcaca libnotify libsamplerate libsexy libvisual libwww lighttpd lj logrotate logwatch lua mad magic mcal md5sum mdnsresponder-compat mhash midi mikmod mjpeg mng moznoxft mp3 mp4 mpeg mpeg2 msn mudflap multiuser musepack music musicbrainz mysql mysqli nagios-dns nagios-game nagios-ntp nagios-ping nagios-ssh ncurses nethack network-cron nls nntp nptl nptlonly offensive ogg opengl openid openmp oss pam pcre perl php pink png portage portaudio prediction print pulseaudio python qa qt3 qt3support qt4 quicktime rdesktop readline reflection resolvconf rss ruby samba sasl scim screen sdl sdl-image sdl-sound sdlaudio server session sftp shorten sid simplexml sms sox speex spell spl sql sqlite sqlite3 srv ssl startup-notification stream subtitles subversion svg svga svgz svn-mirror swat swig symlink tcl tcpd themes theora threads threadsafe thumbnail thunderbird tidy tiff timidity tk transcode truetype unicode unzip usb userlocales v4l v4l2 vim vim-pager vim-syntax vim-with-x vnc vncviewer vorbis vorbis-psy wav wavpack webdav win32codecs wireshark wma wmf x11vnc x86 xcomposite xhtml xine xml xmlreader xmlrpc xmlwriter xorg xpm xrandr xscreensaver xsl xslt xterm xv xvid xvmc xvnc zeroconf zip zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="worker" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en ja" USERLAND="GNU" VIDEO_CARDS="radeon vesa vga"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Ali Polatel (RETIRED)






          2008-08-14 08:47:10 UTC
        

Can you test if vim-7.2 works fine?




Comment 2


Jason S.





          2008-08-14 19:48:52 UTC
        

(In reply to comment #1)
> Can you test if vim-7.2 works fine?

No dice:

OLD_PO_FILE_INPUT=yes msgfmt -v -o uk.cp1251.mo uk.cp1251.po
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_tempnam':
(.text+0x4f5a): warning: the use of `tempnam' is dangerous, better use `mkstemp'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_tmpnam':
(.text+0x5043): warning: the use of `tmpnam_r' is dangerous, better use `mkstemp'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_openpty':
(.text+0x22f2): undefined reference to `openpty'
/usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function `posix_forkpty':
(.text+0x2364): undefined reference to `forkpty'
collect2: ld returned 1 exit status





Comment 3


Lars Strojny





          2008-08-16 07:16:46 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> > Can you test if vim-7.2 works fine?
> 
> No dice:

In my case, 7.2 works fine. No linking error




Comment 4


Jim Ramsay (lack) (RETIRED)






          2009-02-22 23:08:26 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> > Can you test if vim-7.2 works fine?
> 
> No dice:
> 
> OLD_PO_FILE_INPUT=yes msgfmt -v -o uk.cp1251.mo uk.cp1251.po
> /usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function
> `posix_tempnam':
> (.text+0x4f5a): warning: the use of `tempnam' is dangerous, better use
> `mkstemp'
> /usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function
> `posix_tmpnam':
> (.text+0x5043): warning: the use of `tmpnam_r' is dangerous, better use
> `mkstemp'
> /usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function
> `posix_openpty':
> (.text+0x22f2): undefined reference to `openpty'
> /usr/lib/python2.5/config/libpython2.5.a(posixmodule.o): In function
> `posix_forkpty':
> (.text+0x2364): undefined reference to `forkpty'
> collect2: ld returned 1 exit status
> 

Can you please post the USE Flags you have set for dev-lang/python?




Comment 5


Jason S.





          2009-02-22 23:26:53 UTC
        

(In reply to comment #4)
> 
> Can you please post the USE Flags you have set for dev-lang/python?

Unfortunately I've rebuilt my computer since my last comment. vim (7.2.108) has successfully installed with the python USE flag enabled.

In case it will help what flags I have set now, I'm going to provide vim and python:

[ Found these USE variables for dev-lang/python-2.4.4-r13 ]
 U I
 + + berkdb       : Adds support for sys-libs/db (Berkeley DB for MySQL)
 - - bootstrap    : !!internal use only!! DO NOT SET THIS FLAG YOURSELF!, used during original system bootstrapping [make stage2]
 - - build        : !!internal use only!! DO NOT SET THIS FLAG YOURSELF!, used for creating build images and the first half of bootstrapping [make stage1
]
 - + cxx          : Builds support for C++ (bindings, extra libraries, code generation, ...)
 - - doc          : Adds extra documentation (API, Javadoc, etc)
 - - elibc_uclibc : ELIBC setting for systems that use the uClibc C library
 - - examples     : Install examples, usually source code
 + + gdbm         : Adds support for sys-libs/gdbm (GNU database libraries)
 + + ipv6         : Adds support for IP version 6
 + + ncurses      : Adds ncurses support (console display library)
 + + readline     : Enables support for libreadline, a GNU line-editing library that almost everyone wants
 + + ssl          : Adds support for Secure Socket Layer connections
 + + threads      : Adds threads support for various packages. Usually pthreads
 - - tk           : Adds support for Tk GUI toolkit - - ucs2         : Enable byte size 2 unicode (DON'T USE THIS UNLESS YOU KNOW WHAT YOU'RE DOING)
 - - wininst      : Install required Windows executables to create an executable installer for MS Windows.
[ Found these USE variables for dev-lang/python-2.5.4-r2 ]
 U I
 + + berkdb       : Adds support for sys-libs/db (Berkeley DB for MySQL)
 - - build        : !!internal use only!! DO NOT SET THIS FLAG YOURSELF!, used for creating build images and the first half of bootstrapping [make stage1
]
 - - doc          : Adds extra documentation (API, Javadoc, etc)
 - - elibc_uclibc : ELIBC setting for systems that use the uClibc C library
 - - examples     : Install examples, usually source code + + gdbm         : Adds support for sys-libs/gdbm (GNU database libraries)
 + + ipv6         : Adds support for IP version 6 + + ncurses      : Adds ncurses support (console display library)
 + + readline     : Enables support for libreadline, a GNU line-editing library that almost everyone wants
 + + sqlite       : Adds support for sqlite - embedded sql database
 + + ssl          : Adds support for Secure Socket Layer connections
 + + threads      : Adds threads support for various packages. Usually pthreads
 - - tk           : Adds support for Tk GUI toolkit
 - - ucs2         : Enable byte size 2 unicode (DON'T USE THIS UNLESS YOU KNOW WHAT YOU'RE DOING) - - wininst      : Install required Windows executables to create an executable installer for MS Windows.
 + + xml          : Add support for XML files


[ Found these USE variables for app-editors/vim-7.2.108 ]
 U I
 + + acl             : Adds support for Access Control Lists
 + + bash-completion : Enable bash-completion support
 - - cscope          : Enables cscope interface -- in vim for example
 + + gpm             : Adds support for sys-libs/gpm (Console-based mouse driver)
 - - minimal         : Install a very minimal build (disables, for example, plugins, fonts, most drivers, non-critical features)
 + + nls             : Adds Native Language Support (using gettext - GNU locale utilities)
 + + perl            : Adds support/bindings for the Perl language
 + + python          : Adds support/bindings for the Python language
 + + ruby            : Adds support/bindings for the Ruby language
 + + vim-pager       : Install vimpager and vimmanpager links
 + + vim-with-x      : Link console vim against X11 libraries to enable title and clipboard features in xterm




Comment 6


Jim Ramsay (lack) (RETIRED)






          2009-10-17 13:50:03 UTC
        

Closing, no one can reproduce this, including the original reporter, so I'm not sure how we can run it down.




Comment 7


Jason S.





          2009-10-17 18:41:46 UTC
        

Shouldn't this be closed invalid or the like?




Comment 8


Jim Ramsay (lack) (RETIRED)






          2009-10-18 01:32:54 UTC
        

Yeah, probably should have been...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

