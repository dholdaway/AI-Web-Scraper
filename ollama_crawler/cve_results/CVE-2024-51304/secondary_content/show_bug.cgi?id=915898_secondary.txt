Title: 915898 – mail-mta/proton-mail-bridge-3.3.2-r1: failed to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=915898

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 915898
mail-mta/proton-mail-bridge-3.3.2-r1: failed to compile
Last modified: 2024-03-29 13:13:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 915898 
      - mail-mta/proton-mail-bridge-3.3.2-r1: failed to compile


Summary:
mail-mta/proton-mail-bridge-3.3.2-r1: failed to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Marek Szuba (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-10-17 16:54 UTC by wellno1





      Modified:
    
2024-03-29 13:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



marecki









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info =mail-mta/proton-mail-bridge-3.3.2-r1::gentoo

              (info,7.13 KB,
                text/plain)

            
2023-10-17 16:54 UTC,

            wellno1




Details





emerge -pqv =mail-mta/proton-mail-bridge-3.3.2-r1::gentoo

              (pqv,65 bytes,
                text/plain)

            
2023-10-17 16:54 UTC,

            wellno1




Details





build.log

              (build.log.bz2,88.75 KB,
                application/x-bzip)

            
2023-10-17 17:10 UTC,

            wellno1




Details





environment

              (environment,108.02 KB,
                text/plain)

            
2023-10-17 17:10 UTC,

            wellno1




Details





proton-bridge-3.5.4-build.log

              (proton-bridge-3.5.4-build.log,890.49 KB,
                text/x-log)

            
2023-10-26 14:25 UTC,

            wellno1




Details





make.conf

              (make.conf,1.72 KB,
                text/plain)

            
2023-10-26 16:12 UTC,

            wellno1




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


wellno1





          2023-10-17 16:54:01 UTC
        

Created attachment 873046 [details]
emerge --info =mail-mta/proton-mail-bridge-3.3.2-r1::gentoo

...
packagefile runtime=/var/tmp/portage/mail-mta/proton-mail-bridge-3.3.2-r1/temp/go-build616932333/b010/_pkg_.a
EOF
/usr/lib/go/pkg/tool/linux_amd64/compile -o $WORK/b268/_pkg_.a -trimpath "$WORK/b268=>" -p github.com/ProtonMail/proton-bridge/v3/pkg/tar -lang=go1.20 -complete -installsuffix shared -buildid _TFyloy2sZuHXwWKnaCt/_TFyloy2sZuHXwWKnaCt -goversion go1.21.1 -c=4 -shared -nolocalimports -importcfg $WORK/b268/importcfg -pack ./pkg/tar/tar.go
/usr/lib/go/pkg/tool/linux_amd64/buildid -w $WORK/b268/_pkg_.a # internal
cp $WORK/b268/_pkg_.a /var/tmp/portage/mail-mta/proton-mail-bridge-3.3.2-r1/temp/go-build/1d/1dbf2aaef75de5dcb058cb9afef1bd22ca5010d315eb2e1b795678c9f80bc2ec-d # internal
make: *** [Makefile:114: build-launcher] Error 1
 * ERROR: mail-mta/proton-mail-bridge-3.3.2-r1::gentoo failed (compile phase):
 *   emake failed




Comment 1


wellno1





          2023-10-17 16:54:30 UTC
        

Created attachment 873047 [details]
emerge -pqv =mail-mta/proton-mail-bridge-3.3.2-r1::gentoo




Comment 2


Sam James









          2023-10-17 16:58:10 UTC
        

Please include the full build.log.




Comment 3


wellno1





          2023-10-17 17:10:20 UTC
        

Created attachment 873049 [details]
build.log




Comment 4


wellno1





          2023-10-17 17:10:37 UTC
        

Created attachment 873050 [details]
environment




Comment 5


Sam James









          2023-10-17 17:12:22 UTC
        

Might be:
````
cd /var/tmp/portage/mail-mta/proton-mail-bridge-3.3.2-r1/work/go-mod/github.com/cloudflare/circl@v1.3.3/math/fp25519
/usr/lib/go/pkg/tool/linux_amd64/asm -p github.com/cloudflare/circl/math/fp25519 -trimpath "$WORK/b112=>" -I $WORK/b112/ -I /usr/lib/go/pkg/include -D GOOS_linux -D GOARCH_amd64 -shared -D GOAMD64_v1 -gensymabis -o $WORK/b112/symabis ./fp_amd64.s
# crypto/internal/nistec
/usr/lib/go/src/crypto/internal/nistec/p256_ordinv.go:14:6: p256OrdMul redeclared in this block
	/usr/lib/go/src/crypto/internal/nistec/p256_asm_ordinv.go:14:6: other declaration of p256OrdMul
/usr/lib/go/src/crypto/internal/nistec/p256_ordinv.go:19:6: p256OrdSqr redeclared in this block
	/usr/lib/go/src/crypto/internal/nistec/p256_asm_ordinv.go:19:6: other declaration of p256OrdSqr
/usr/lib/go/src/crypto/internal/nistec/p256_ordinv.go:21:6: P256OrdInverse redeclared in this block
	/usr/lib/go/src/crypto/internal/nistec/p256_asm_ordinv.go:21:6: other declaration of P256OrdInverse
```




Comment 6


wellno1





          2023-10-18 16:35:48 UTC
        

And so what am I supposed to do? No idea




Comment 7


Sam James









          2023-10-18 16:37:03 UTC
        

People will post an update to a bug if and when there is one.




Comment 8


Marek Szuba (RETIRED)







          2023-10-22 10:31:09 UTC
        

What version of dev-lang/go have you got on your system?




Comment 9


wellno1





          2023-10-22 12:17:00 UTC
        

dev-lang/go-1.21.1::gentoo




Comment 10


wellno1





          2023-10-22 12:27:16 UTC
        

Tried with dev-lang/go-1.21.3, same outcome




Comment 11


Marek Szuba (RETIRED)







          2023-10-25 09:15:51 UTC
        

How about 3.5.4, then?




Comment 12


wellno1





          2023-10-25 20:39:35 UTC
        

Apparently same problem, should I open a new bug with log files?

...
packagefile path/filepath=/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/temp/go-build1624510142/b180/_pkg_.a
packagefile runtime=/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/temp/go-build1624510142/b010/_pkg_.a
EOF
/usr/lib/go/pkg/tool/linux_amd64/compile -o $WORK/b273/_pkg_.a -trimpath "$WORK/b273=>" -p github.com/ProtonMail/proton-bridge/v3/pkg/tar -lang=go1.20 -complete -installsuffix shared -buildid x4JNSAVveR7kQW94sOa-/x4JNSAVveR7kQW94sOa- -goversion go1.21.3 -c=4 -shared -nolocalimports -importcfg $WORK/b273/importcfg -pack ./pkg/tar/tar.go
/usr/lib/go/pkg/tool/linux_amd64/buildid -w $WORK/b273/_pkg_.a # internal
cp $WORK/b273/_pkg_.a /var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/temp/go-build/02/02815e2f430286c732501d7a911223a38f04d21e3abd47ccca015151c99e7a6d-d # internal
make: *** [Makefile:114: build-launcher] Error 1
 * ERROR: mail-mta/proton-mail-bridge-3.5.4::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=mail-mta/proton-mail-bridge-3.5.4::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=mail-mta/proton-mail-bridge-3.5.4::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/temp/environment'.
 * Working directory: '/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/work/proton-bridge-3.5.4'
 * S: '/var/tmp/portage/mail-mta/proton-mail-bridge-3.5.4/work/proton-bridge-3.5.4'

>>> Failed to emerge mail-mta/proton-mail-bridge-3.5.4, Log file:




Comment 13


Marek Szuba (RETIRED)







          2023-10-25 21:22:51 UTC
        

OK, I am beginning to run out of ideas. For me both 3.3.2 and 3.5.4 build fine with these versions of dev-lang/go, and I have tried it on three different Gentoo installations.

Let's try one more thing - could you try again with MAKEOPTS="-j1" and post the build log you get then?

No need for a separate bug if the error you see with 3.5.4 is the same.




Comment 14


wellno1





          2023-10-26 14:25:44 UTC
        

Created attachment 873489 [details]
proton-bridge-3.5.4-build.log




Comment 15


wellno1





          2023-10-26 14:27:15 UTC
        

Changed MAKEOPTS="-j1" same result, added last build.log




Comment 16


wellno1





          2023-10-26 16:12:44 UTC
        

Created attachment 873493 [details]
make.conf









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

