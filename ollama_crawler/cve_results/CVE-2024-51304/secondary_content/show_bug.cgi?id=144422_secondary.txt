Title: 144422 – baselayout-1.12.4-r6: vmware-server-1.0.0.28343 init.d script does nothing
URL: https://bugs.gentoo.org/show_bug.cgi?id=144422

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 144422
baselayout-1.12.4-r6: vmware-server-1.0.0.28343 init.d script does nothing
Last modified: 2006-09-18 16:18:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 144422 
      - baselayout-1.12.4-r6: vmware-server-1.0.0.28343 init.d script does nothing


Summary:
baselayout-1.12.4-r6: vmware-server-1.0.0.28343 init.d script does nothing
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo VMWare Bug Squashers [disabled]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-19 08:05 UTC by crusaderky





      Modified:
    
2006-09-18 16:18 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jakub









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/etc/init.d/vmware

              (vmware,1.40 KB,
                text/plain)

            
2006-08-19 09:40 UTC,

            crusaderky




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


crusaderky





          2006-08-19 08:05:43 UTC
        

/etc/init.d/vmware start does absolutely nothing: it produces no output, it doesn't call /etc/vmware/init.d/vmware and it doesn't start the service.

Workaround: call /etc/vmware/init.d/vmware directly.

I'm using sys-apps/baselayout-1.12.4-r6.

# emerge --info
Portage 2.1-r2 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r4, 2.6.17-gentoo-r4 i686)
=================================================================
System uname: 2.6.17-gentoo-r4 i686 AMD Athlon(TM) XP 2000+
Gentoo Base System version 1.12.4
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig digest distcc distlocks metadata-transfer parallel-fetch sandbox sfperms strict userfetch"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://194.117.143.70 http://pandemonium.tiscali.de/pub/gentoo/ ftp://194.117.143.72/mirrors/gentoo"
LC_ALL="it_IT.UTF-8"
LINGUAS="it"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow X X509 a52 aac alsa apache2 audiofile avi berkdb bitmap-fonts bzip2 cdparanoia cdr chroot cjk cli crypt cscope cups curl dbus dga dlloader dri dts dvb dvd dvdr dvdread emboss encode erandom exif fam fbcon ffmpeg firefox flac flash foomaticdb fortran freetype gd gdbm ggi gif ginac glut gnutls gpm gtk gtk2 gtkhtml guile hal iconv idn imagemagick imap imlib innodb ipv6 isdnlog java javascript jikes joystick jpeg kerberos krb4 lcms ldap libcaca libg++ libwww live lzo mad matroska mcal md5sum memlimit mikmod mmx mmxext mng motif mozsvg mp3 mpeg musepack mysql ncurses network nls nptl nsplugin nvidia odbc offensive ogg opengl pam parse-clocks pcre pdf pdflib perl pic plotutils png ppds pppd prelude python qhull qt3 qt4 quicktime readline real reflection rtc samba scanner sdl session skey slp sndfile snmp socks5 speex spell spl sqlite sse ssl svg tcltk tcpd theora threads tiff truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 vcd vorbis win32codecs wmf wxwindows x264 xml xorg xosd xprint xv xvid xvmc yaz zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_joystick input_devices_wacom input_devices_evdev kernel_linux linguas_it userland_GNU video_cards_nvidia video_cards_vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-08-19 08:14:08 UTC
        

It works just fine here (and, your workaround is exactly what the init script does in start/stop, btw).




Comment 2


Mike Auty (RETIRED)






          2006-08-19 08:54:08 UTC
        

Guido, can you please check your installation for both this and bug 144421 please?  Vmware-server should not be making a /usr/bin/vmware symlink of any kind, since the local console should not be used (the full dependencies for it are not necessarily met, and eventually our hope is to remove it completely).

Also, please verify that your /etc/init.d/vmware script is as installed, since as Jakub points out, neither he nor myself can recreate your problem.  If after a complete clean and a reinstallation (ensuring that you've resynced your portage tree, and *removing* your PORTDIR_OVERLAY settings, to ensure that no old vmware.eclasses might be conflicting) you're still suffering from this problem, please attach your /etc/init.d/vmware script to this bug, and we'll see if we can figure out what's going on.

If a reinstallation helps both these bugs, please let us know, so we can mark them as resolved.  Thanks...  5:)




Comment 3


crusaderky





          2006-08-19 09:40:07 UTC
        

Created attachment 94614 [details]
/etc/init.d/vmware

1)I haven't ever had any portage overlay regarding vmware.
2)I just migrated from vmware workstation, which I wiped extremely carefully, including all files in /etc and /lib/modules.
3)I never modified my /etc/init.d/vmware script.




Comment 4


Mike Auty (RETIRED)






          2006-08-19 09:53:29 UTC
        

Ok, there appears to be only one instance where starting the services will cause absolutely no output of any kind, and that's if the service believes it's being started inside of a vmware image.  It checks this by attempting to run /etc/vmware/checkvm and if this reports an error, it will silently fail.  Since there is no checkvm installed, this seems always to succeed, so shouldn't be what's causing you the issue.  If you get past that check, you should at least see a "Starting vmware" type message, even if none of the services then start...

I'm afraid you'll have to do a little more digging/debugging of the scripts yourself to figure out why it's going wrong, because from the information I've got, it really shouldn't and I can't recreate it.  I'll leave the bug open however, until you manage to find a resolution...




Comment 5


crusaderky





          2006-08-19 10:39:57 UTC
        

I poked around it a bit, commenting out lines, then adding them again and.... now IT WORKS! Just to be safe, I re-emerged it so that to be sure that the script was identical to the original. Now it works flawlessly, for no apparent reason!!!

as I suspected, this gotta be a baselayout bug about caching or something, not a vmware one.




Comment 6


Mike Auty (RETIRED)






          2006-09-18 16:18:47 UTC
        

Guido, currently this bug is still under the vmware group, however it sounds as though your installation now works.  I'm going to mark the bug WORKSFORME (since we didn't really *do* anything to fix it!)  5;)  However, if you'd like someone from baselayout to look into it further, please just reopen the bug and we'll reassign it over to them.  Without it being reproducible though, the chances of them being able to track down the bug.  Hope that's all ok...  5:)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

