Title: 242910 – x11-base/xorg-server-1.3.0.0-r6 - multiple libXrender versions in same slot
URL: https://bugs.gentoo.org/show_bug.cgi?id=242910

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 242910
x11-base/xorg-server-1.3.0.0-r6 - multiple libXrender versions in same slot
Last modified: 2008-10-28 16:58:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 242910 
      - x11-base/xorg-server-1.3.0.0-r6 - multiple libXrender versions in same slot


Summary:
x11-base/xorg-server-1.3.0.0-r6 - multiple libXrender versions in same slot
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-20 18:09 UTC by Jorge Cisneros





      Modified:
    
2008-10-28 16:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jorge Cisneros





          2008-10-20 18:09:50 UTC
        

There are two different versions of libXrender that are needed to satisfy
the dependencies on my system as it is built atm.

here's the output : 

!!! Multiple versions within a single package slot have been pulled
!!! into the dependency graph, resulting in a slot conflict:

x11-libs/libXrender:0

  ('ebuild', '/', 'x11-libs/libXrender-0.9.2', 'merge') pulled in by
    @world
    ('installed', '/', 'x11-base/xorg-server-1.3.0.0-r6', 'nomerge')

  ('installed', '/', 'x11-libs/libXrender-0.9.4', 'nomerge') pulled in by
    @world
    ('installed', '/', 'x11-libs/gtk+-2.12.11', 'nomerge')
    ('installed', '/', 'x11-libs/libXcursor-1.1.9', 'nomerge')
    (and 11 more)


It may be possible to solve this problem by using package.mask to
prevent one of those packages from being selected. However, it is also
possible that conflicting dependencies exist such that they are
impossible to satisfy simultaneously. If such a conflict exists in the
dependencies of two different packages, then those packages can not be
installed simultaneously.

For more information, see MASKED PACKAGES section in the emerge man page
or refer to the Gentoo Handbook.


Reproducible: Always

Steps to Reproduce:
1. emerge -vaDuN world
2. Error
3.

Actual Results:  
refuses to update -D

Expected Results:  
update world


emerge --info

Portage 2.2_rc12 (default/linux/amd64/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r7 x86_64)
=================================================================
System uname: Linux-2.6.25-gentoo-r7-x86_64-Intel-R-_Pentium-R-_Dual_CPU_T2390_@_1.86GHz-with-glibc2.2.5
Timestamp of tree: Mon, 20 Oct 2008 16:05:02 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=nocona"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=nocona"
DISTDIR="/usr/portage/distfiles"
FEATURES="distcc distlocks parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="en"
MAKEOPTS="-j21"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/desktop-effects /usr/portage/local/bioapi"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 avahi berkdb bluetooth bzip2 cdr cli cracklib crypt cups dbus dri dvdread fortran gdbm gnome gpm gtk hal iconv isdnlog jpeg jpg midi mmx mudflap multilib ncurses nls nptl nptlonly openmp pam pcre perl png pppd python readline reflection session spl sse sse2 ssl sysfs tcpd threads unicode xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="i810"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Mike Auty (RETIRED)






          2008-10-20 22:46:43 UTC
        

It doesn't look as though the other packages specifically require >libXrender-0.9.3.  It appears portage is just trying to maintain the status quo.

You should make a backup package of libXrender-0.9.4, in case you need to put it back (emerge --buildpkg =libXrender-0.9.4) and then unmerge it and install libXrender-0.9.2.  It's unfortunate there's the need to downgrade, and that portage is stubornly trying to hang onto the installed version, but you should be able to tell if you really want the older version.

I can say for certain that it will work, since you didn't list all other 11 packages, but the two mentioned only need any version of libXrender and so should work find with the older version (particularly after a run of revdep-rebuild).

Please give that a go, and report back here to say how you've got on.  Thanks...  5:)




Comment 2


Mike Auty (RETIRED)






          2008-10-25 10:01:47 UTC
        

Marking as TEST-REQUEST, please reopen the bug when you report back the results.  Thanks...  5:)




Comment 3


Jorge Cisneros





          2008-10-27 15:48:29 UTC
        

I follow the procedure,  but when i try to run the update world 

Total: 26 packages (8 upgrades, 11 downgrades, 7 reinstalls), Size of downloads: 24,283 kB
Portage tree and overlays:
 [0] /usr/portage
 [1] /usr/portage/local/layman/desktop-effects

!!! Multiple versions within a single package slot have been pulled
!!! into the dependency graph, resulting in a slot conflict:

x11-libs/libXrender:0

  ('installed', '/', 'x11-libs/libXrender-0.9.2', 'nomerge') pulled in by
    @world
    ('ebuild', '/', 'x11-base/xorg-server-1.3.0.0-r6', 'merge')

  ('ebuild', '/', 'x11-libs/libXrender-0.9.4', 'merge') pulled in by
    @world
    ('installed', '/', 'x11-libs/gtk+-2.12.11', 'nomerge')
    ('installed', '/', 'x11-libs/libXcursor-1.1.9', 'nomerge')
    (and 10 more)

x11-proto/renderproto:0

  ('installed', '/', 'x11-proto/renderproto-0.9.3', 'nomerge') pulled in by
    ('ebuild', '/', 'x11-libs/libXrender-0.9.4', 'merge')

  ('ebuild', '/', 'x11-proto/renderproto-0.9.2', 'merge') pulled in by
    ('installed', '/', 'x11-libs/libXrender-0.9.2', 'nomerge')
    ('ebuild', '/', 'x11-base/xorg-server-1.3.0.0-r6', 'merge')


It may be possible to solve this problem by using package.mask to
prevent one of those packages from being selected. However, it is also
possible that conflicting dependencies exist such that they are
impossible to satisfy simultaneously. If such a conflict exists in the
dependencies of two different packages, then those packages can not be
installed simultaneously.

For more information, see MASKED PACKAGES section in the emerge man page
or refer to the Gentoo Handbook.

The list of update is

Calculating dependencies... done!
[ebuild     U ] sys-libs/timezone-data-2008g-r1 [2008e] USE="nls" 355 kB [0]
[ebuild   R   ] media-libs/mesa-6.5.2-r1  USE="nptl -debug -doc -motif -pic -xcb" VIDEO_CARDS="-intel% -mach64 -mga -none -r128 -radeon -s3virge -savage -sis (-sunffb) -tdfx -trident -via (-i810%*)" 0 kB [0]
[ebuild     U ] sys-apps/man-pages-3.10 [3.09] USE="nls" LINGUAS="-cs -da -de -es -fr -it -ja -nl -pl -ro -ru -zh_CN" 960 kB [0]
[ebuild     U ] x11-libs/libXrender-0.9.4 [0.9.2] USE="-debug" 0 kB [0]
[ebuild   R   ] dev-libs/pwlib-1.10.10-r1  USE="alsa ssl -debug -ieee1394 -ipv6 -ldap* -oss -sasl -sdl -v4l -v4l2 -xml" 0 kB [0]
[ebuild     UD] x11-proto/renderproto-0.9.2 [0.9.3] 0 kB [0]
[ebuild     U ] net-libs/libpcap-0.9.8-r2 [0.9.8-r1] USE="-ipv6" 0 kB [0]
[ebuild   R   ] dev-lang/python-2.5.2-r7  USE="berkdb gdbm ncurses readline ssl threads -build -doc -examples -ipv6 -sqlite -tk -ucs2 -wininst (-bootstrap%)" 0 kB [0]
[ebuild     UD] x11-libs/compiz-bcop-0.7.6 [0.7.8] 70 kB [1]
[ebuild     U ] sys-apps/gawk-3.1.6 [3.1.5-r5] USE="nls" 1,818 kB [0]
[ebuild   R   ] app-office/openoffice-bin-3.0.0  USE="gnome -java -kde" LINGUAS="en -af -ar -as_IN -be_BY -bg -br -bs -ca -cs -da -de -dz -el -en_GB -en_ZA -es* -et -fi -fr -ga -gu -he -hi_IN -hr -hu -it -ja -ka -km -ko -lt -mk -ml_IN -mr_IN -nb -ne -nl -nn -nr -ns -or_IN -pa_IN -pl -pt -pt_BR% -rw -sh -sk -sl -sr -ss -st -sv -sw_TZ -ta -te_IN -tg -th -ti_ER -tr -ts -uk -ur_IN -ve -vi -xh -zh_CN -zh_TW -zu" 0 kB [0]
[ebuild     U ] net-misc/openssh-5.1_p1-r1 [4.7_p1-r6] USE="X hpn pam tcpd -X509 -kerberos -ldap -libedit (-selinux) -skey -smartcard -static (-chroot%)" 1,105 kB [0]
[ebuild   R   ] x11-base/xorg-server-1.3.0.0-r6  USE="dri nptl xorg (-3dfx) -debug -dmx -ipv6 -kdrive -minimal -sdl -xprint" INPUT_DEVICES="evdev keyboard mouse synaptics -acecad -aiptek -calcomp -citron -digitaledge -dmc -dynapro -elo2300 -elographics -fpit -hyperpen -jamstudio -joystick -magellan -microtouch -mutouch -palmax -penmount -spaceorb -summa -tek4957 -ur98 -vmmouse -void -wacom" VIDEO_CARDS="-apm -ark -chips -cirrus -cyrix -dummy -epson -fbdev -fglrx -glint -i128 (-i740) (-impact) (-imstt) -intel% -mach64 -mga -neomagic (-newport) (-nsc) -nv -nvidia -r128 -radeon -rendition -s3 -s3virge -savage -siliconmotion -sis -sisusb (-sunbw2) (-suncg14) (-suncg3) (-suncg6) (-sunffb) (-sunleo) (-suntcx) -tdfx -tga -trident -tseng -v4l -vesa -vga -via -vmware -voodoo (-i810%*)" 0 kB [0]
[ebuild     U ] net-wireless/ndiswrapper-1.53-r1 [1.53] USE="-debug -usb" 0 kB [0]
[ebuild     U ] net-analyzer/wireshark-1.0.4 [1.0.3] USE="caps gtk pcap pcre threads zlib -adns -gcrypt -gnutls -ipv6 -kerberos -lua -portaudio -profile (-selinux) -smi" 12,820 kB [0]
[ebuild   R   ] net-im/ekiga-2.0.12  USE="avahi dbus gnome -debug -doc -sdl*" 0 kB [0]
[ebuild     UD] x11-wm/compiz-0.7.6-r1 [0.7.8] USE="dbus gnome gtk -fuse -kde -kde4 -svg -xcb% (-annotate%)" 1,481 kB [1]
[ebuild   R   ] gnome-base/gnome-volume-manager-2.22.5  USE="-automount -consolekit% -debug" 0 kB [0]
[ebuild     UD] x11-plugins/compiz-fusion-plugins-main-0.7.6 [0.7.8] USE="gnome" 1,309 kB [1]
[ebuild     UD] x11-libs/libcompizconfig-0.7.6 [0.7.8] 318 kB [1]
[ebuild     UD] x11-libs/compizconfig-backend-gconf-0.7.6 [0.7.8] 231 kB [1]
[ebuild     UD] x11-plugins/compiz-fusion-plugins-extra-0.7.6 [0.7.8] USE="gnome" 2,556 kB [1]
[ebuild     UD] dev-python/compizconfig-python-0.7.6 [0.7.8] 253 kB [1]
[ebuild     UD] x11-apps/ccsm-0.7.6 [0.7.8] 449 kB [1]
[ebuild     UD] x11-wm/emerald-0.7.6 [0.7.8] 565 kB [1]
[ebuild     UD] x11-wm/compiz-fusion-0.7.6 [0.7.8] USE="gnome -kde -unsupported" 0 kB [1]








Comment 4


Jeroen Roovers (RETIRED)






          2008-10-27 19:00:33 UTC
        

Looks like you're mixing the stable and testing branches - could you attach your /etc/portage/package.keywords please?




Comment 5


Jorge Cisneros





          2008-10-27 22:51:49 UTC
        

The content of package.keywords is

#Downlaod Accel
net-misc/axel

#OpenOffice
app-office/openoffice-bin


#WebCam
media-video/linux-uvc

#Compiz
x11-wm/compiz-fusion
x11-wm/emerald
x11-plugins/compiz-fusion-plugins-extra
x11-libs/compizconfig-backend-gconf
x11-plugins/compiz-fusion-plugins-main
x11-wm/compiz
x11-apps/ccsm
dev-python/compizconfig-python
x11-libs/libcompizconfig
x11-libs/libXrender  
x11-proto/renderproto
x11-libs/compiz-bcop
x11-themes/emerald-themes








Comment 6


Jeroen Roovers (RETIRED)






          2008-10-28 16:58:33 UTC
        

That explains it - you'll need to put some more packages into package.keywords, as your current xorg-server won't play nice with your current libXrender:

cvs/gentoo-x86/x11-base/xorg-server $ grep Xrender xorg-server-1.*
xorg-server-1.3.0.0-r6.ebuild:  <x11-libs/libXrender-0.9.3
xorg-server-1.4.2.ebuild:       >=x11-libs/libXrender-0.9.4
xorg-server-1.5.2.ebuild:       >=x11-libs/libXrender-0.9.4

Please regard it as a feature that portage tells you what you need to install to satisfy all dependencies.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

