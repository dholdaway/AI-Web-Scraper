Title: 546494 – kde-misc/kdiff3-0.9.98 has regressions
URL: https://bugs.gentoo.org/show_bug.cgi?id=546494

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 546494
kde-misc/kdiff3-0.9.98 has regressions
Last modified: 2017-09-03 09:28:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 546494 
      - kde-misc/kdiff3-0.9.98 has regressions


Summary:
kde-misc/kdiff3-0.9.98 has regressions
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       major
      


Assignee:

Bernard Cafarelli








URL:



https://bugs.kde.org/show_bug.cgi?id=...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-04-13 21:42 UTC by Luke-Jr





      Modified:
    
2017-09-03 09:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kensington









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Implements missing command line options

              (commit-e37fe0d,3.56 KB,
                patch)

            
2017-05-11 06:37 UTC,

            peteru




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Luke-Jr





          2015-04-13 21:42:11 UTC
        

Regressions in 0.9.98 make KDiff3 unusable.

Upstream bug: https://bugs.kde.org/show_bug.cgi?id=346154




Comment 1


Bernard Cafarelli






          2015-05-05 09:19:24 UTC
        

Thanks for the report and opening the upstream bug! 0.9.97-r2 is now back in tree

I wonder if this is kdiff3 itself or a qt bug though (I have not seen this with 0.9.98, but I have a qt5 build)




Comment 2


Luke-Jr





          2015-05-05 13:35:57 UTC
        

Well, I used the same Qt with both versions, so unless 0.9.98 removed a workaround it suggests a KDiff3 bug IMO.




Comment 3


Luke-Jr





          2016-07-19 20:09:03 UTC
        

This is an issue again... kensington removed it. :(

Why was kdiff3 0.9.98-r1 stabilised at all with this very serious known bug?




Comment 4


Michael Palimaka (kensington)






          2016-07-20 20:04:15 UTC
        

Please check the git log again, I dropped 0.9.98-r0, not 0.9.97-r2.

I have restored the dropped version again, am converting this bug into something to track the regression, and dropping KDE project as a maintainer.




Comment 5


Andreas Sturmlechner






          2017-05-06 21:46:55 UTC
        

I've added KF5-based snapshot kde-misc/kdiff3-0.9.98_p20170219 to tree, please test.




Comment 6


peteru





          2017-05-10 16:01:46 UTC
        

The qt5 snapshots appears to have dropped a number of command line options and as a result git becomes unusable with kdiff3 as merge tool.

Specifically, git kdiff3 mergetool makes use of the --L1, --L2 and --L3 command line options to provide labels for the files.




Comment 7


peteru





          2017-05-10 16:29:04 UTC
        

Here is more of a clue when running kde-misc/kdiff3-0.9.98_p20170219 (the KF5 snapshot):

 $ kdiff3
 QCommandLineParser: option not defined: "confighelp"
 QCommandLineParser: option not defined: "cs"
 QCommandLineParser: option not defined: "qall"
 QCommandLineParser: option not defined: "fname"
 QCommandLineParser: option not defined: "L1"
 QCommandLineParser: option not defined: "L2"
 QCommandLineParser: option not defined: "L3"




Comment 8


peteru





          2017-05-11 06:37:01 UTC
        

Created attachment 472306 [details, diff]
Implements missing command line options

The attached patch fixes the missing command line options issue and allows kdiff3 to be used as git mergetool again.




Comment 9


Andreas Sturmlechner






          2017-05-14 08:19:21 UTC
        

Thanks peteru, I've forwared the patch to upstream.

@Luke-Jr, has this ever been about kdiff3[qt5] and if so, is your initial bug fixed by the 0.9.98_p20170219 snapshot?




Comment 10


Luke-Jr





          2017-05-14 17:12:48 UTC
        

(In reply to Andreas Sturmlechner from comment #9)
> Thanks peteru, I've forwared the patch to upstream.
> 
> @Luke-Jr, has this ever been about kdiff3[qt5] and if so, is your initial
> bug fixed by the 0.9.98_p20170219 snapshot?

I only ever encountered the issue using git-mergetool, so if it doesn't work with the snapshot, I have no way to test. I suppose I could use peteru's patch to try it out if that'd be helpful?




Comment 11


Andreas Sturmlechner






          2017-05-14 18:14:11 UTC
        

It is already in tree with -r1 if you want to give it a try, tia.




Comment 12


Luke-Jr





          2017-05-15 17:31:35 UTC
        

I am unable to reproduce the original problem with either 0.9.98-r1 or 0.9.98_p20170219-r1.

When I originally opened this bug, I was running x86[_32]. I am now running amd64. Unsure if this is related...




Comment 13


Andreas Sturmlechner






          2017-07-01 14:25:37 UTC
        

It seems here as well as upstream no one else has seen that bug. Should we close it?




Comment 14


Luke-Jr





          2017-07-01 19:54:32 UTC
        

(In reply to Andreas Sturmlechner from comment #13)
> It seems here as well as upstream no one else has seen that bug. Should we
> close it?

Up to you. If someone feels motivated, they might try to install a 32-bit chroot and see if it can be reproduced, but I'm not sure anyone really cares about 32-bit anymore.

FWIW, the relevant bits of my .gitconfig:

[alias]
        kdiff = difftool --dir-diff --no-symlinks

[diff]
        tool = kdiff3
        ignoreSubmodules = untracked

[mergetool "kdiff3"]
        trustExitCode = false




Comment 15


Andreas Sturmlechner






          2017-09-03 09:28:58 UTC
        

(In reply to Luke-Jr from comment #14)
> (In reply to Andreas Sturmlechner from comment #13)
> > It seems here as well as upstream no one else has seen that bug. Should we
> > close it?
> 
> Up to you.

Done.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

