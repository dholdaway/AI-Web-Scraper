Title: 541336 – After updating to qt-5.4.1, everything depends on qt5 segfaults
URL: https://bugs.gentoo.org/show_bug.cgi?id=541336

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 541336
After updating to qt-5.4.1, everything depends on qt5 segfaults
Last modified: 2015-10-20 02:34:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 541336 
      - After updating to qt-5.4.1, everything depends on qt5 segfaults


Summary:
After updating to qt-5.4.1, everything depends on qt5 segfaults
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-02-25 14:03 UTC by Light





      Modified:
    
2015-10-20 02:34 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



huangkangjing
kde









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




test logs submitted by Chaserhkj

              (chaserhkj_log.tar.gz,7.10 KB,
                application/gzip)

            
2015-02-26 11:19 UTC,

            Chaserhkj




Details





Full backtrace

              (lximage-qt.log,3.36 KB,
                text/x-log)

            
2015-03-04 05:52 UTC,

            Chaserhkj




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Light





          2015-02-25 14:03:14 UTC
        

After today's update from qt-5.4.0 to qt-5.4.1, everything that depends on qt5 won't work, including my production lxqt desktop. If I try starting any qt5-based program from xterm(like lximage-qt), it just segfaults. 
I tried rebuilding everything that depends on qt5(lxqt components, kde-framework components) and nothing works.
Qt4-based programs are unaffected.




Comment 1


Chaserhkj





          2015-02-26 09:02:33 UTC
        

Confirmed exactly same behavior on my laptop.

All lxqt apps, wireshark gui built against qt5, qpdfview built against qt5, lximage-qt would refuse to work with a segmentation fault.

Any further information could be provided if required.




Comment 2


Michael Palimaka (kensington)






          2015-02-26 09:16:38 UTC
        

Please provide a backtrace.




Comment 3


Chaserhkj





          2015-02-26 11:12:38 UTC
        

Hi there,
I rebuilt all qt-4.5.1 libraries with -g and tested Qt5 applications with gdb,

In short, the backtrace of the segfault application will always be:

logs of lximage-qt and qpdfview tests, and emerge --info output are attached, in case further inspection into these is needed.




Comment 4


Chaserhkj





          2015-02-26 11:19:51 UTC
        

Created attachment 397542 [details]
test logs submitted by Chaserhkj




Comment 5


Chaserhkj





          2015-02-26 11:21:24 UTC
        

Sorry I forget to finish it in the last comment...

In short, the backtrace of the segfault application will always be:
0x00007ffff7383dc0 in QPlatformInputContext::staticMetaObject () from /usr/lib64/libQt5Gui.so.5




Comment 6


Michael Palimaka (kensington)






          2015-03-04 05:18:05 UTC
        

(In reply to Chaserhkj from comment #4)
> Created attachment 397542 [details]
> test logs submitted by Chaserhkj

Thanks for the info. Is it possible to attach a full backtrace as well? ('bt' in gdb after it crashes)




Comment 7


Chaserhkj





          2015-03-04 05:52:34 UTC
        

Created attachment 397998 [details]
Full backtrace

Hi there,

Here comes the full backtrace of lximage-qt crash in running with qt-5.4.1 in tree.

Thanks for inspecting,
Happy hacking!




Comment 8


Michael Palimaka (kensington)






          2015-03-04 09:16:06 UTC
        

@qt any ideas? I checked the source and didn't see any private header usage.




Comment 9


Light





          2015-06-23 08:55:58 UTC
        

Updated to qt 5.4.2. Still segfaults




Comment 10


Davide Pesavento (RETIRED)






          2015-06-23 11:01:03 UTC
        

Are you using the gold linker?




Comment 11


Light





          2015-06-24 04:37:03 UTC
        

(In reply to Davide Pesavento from comment #10)
> Are you using the gold linker?

No. just default linker with gcc 4.9.2




Comment 12


Michael Palimaka (kensington)






          2015-10-19 18:35:25 UTC
        

Could you please test again? There's newer versions of Qt in the tree now, 5.4.2 stable and 5.5.1 testing.




Comment 13


Light





          2015-10-20 02:09:23 UTC
        

(In reply to Michael Palimaka (kensington) from comment #12)
> Could you please test again? There's newer versions of Qt in the tree now,
> 5.4.2 stable and 5.5.1 testing.

5.4.2 fixed this









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

