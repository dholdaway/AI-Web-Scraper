Title: 184076 – sys-fs/e2fsprogs-1.40 fails tests under paludis
URL: https://bugs.gentoo.org/show_bug.cgi?id=184076

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 184076
sys-fs/e2fsprogs-1.40 fails tests under paludis
Last modified: 2007-07-09 14:58:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 184076 
      - sys-fs/e2fsprogs-1.40 fails tests under paludis


Summary:
sys-fs/e2fsprogs-1.40 fails tests under paludis
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-07-03 10:27 UTC by Rickard Närström





      Modified:
    
2007-07-09 14:58 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



ingmar
smoothhound
spb









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Logfile

              (paludis.log,135.38 KB,
                text/plain)

            
2007-07-03 10:32 UTC,

            Rickard Närström




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rickard Närström





          2007-07-03 10:27:40 UTC
        

I'll attache build log.

----
paludis 0.24.2

Built by paludisbuild@workstation on 2007-05-14T15:27:02+0200
CXX:         x86_64-pc-linux-gnu-g++ 4.1.2 20070214 (  (gdc 0.23, using dmd 1.007)) (Gentoo 4.1.2)
CXXFLAGS:    -O3 -fomit-frame-pointer -march=k8 -pipe
LDFLAGS:
DATADIR:     /usr/share
LIBDIR:      /usr/lib64
LIBEXECDIR:  /usr/libexec
SYSCONFDIR:  /etc
stdlib:      GNU libstdc++ 20070214
libebt:      1.3.0
libwrapiter: 1.0.0
sandbox:     enabled

Repository virtuals:
    Configuration information:
        format:                virtuals

Repository installed_virtuals:
    Configuration information:
        format:                installed_virtuals

Repository gentoo:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /var/paludis/repositories/gentoo/metadata/cache
        distdir:               /var/paludis/distfiles
        eclassdirs:            /var/paludis/repositories/gentoo/eclass
        format:                ebuild
        location:              /var/paludis/repositories/gentoo
        names_cache:           /var/paludis/repositories/gentoo/.cache/names
        newsdir:               /var/paludis/repositories/gentoo/metadata/news
        pkgdir:                /var/paludis/repositories/gentoo/packages
        profiles:              /var/paludis/repositories/gentoo/profiles/default-linux/amd64/2007.0/desktop
        securitydir:           /var/paludis/repositories/gentoo/metadata/glsa
        setsdir:               /var/paludis/repositories/gentoo/sets
        sync:                  rsync://rsync.europe.gentoo.org/gentoo-portage/
        sync_options:
        write_cache:           /var/empty

    Package information:
        app-admin/eselect-compiler: (none)
        dev-java/java-config:  1.3.7, 2.0.33-r1
        dev-lang/python:       2.4.4-r4
        dev-python/pycrypto:   2.0.1-r5
        dev-util/ccache:       (none)
        dev-util/confcache:    (none)
        sys-apps/sandbox:      1.2.18.1
        sys-devel/autoconf:    2.13, 2.61
        sys-devel/automake:    1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
        sys-devel/binutils:    2.17
        sys-devel/gcc-config:  1.3.16
        sys-devel/libtool:     1.5.24
        virtual/os-headers:    2.6.21

    Variable information:
        ACCEPT_KEYWORDS:
        AUTOCLEAN:
        CBUILD:                x86_64-pc-linux-gnu
        CFLAGS:                -Os -fomit-frame-pointer -march=k8 -pipe
        CHOST:                 x86_64-pc-linux-gnu
        CONFIG_PROTECT:
        CONFIG_PROTECT_MASK:
        CTARGET:
        CXXFLAGS:              -Os -fomit-frame-pointer -march=k8 -pipe
        DISTDIR:               /var/paludis/distfiles
        FEATURES:
        GENTOO_MIRRORS:
        INSTALL_MASK:
        LANG:
        LC_ALL:                C
        LDFLAGS:               -Wl,-O1 -Wl,--as-needed
        LINGUAS:
        MAKEOPTS:
        PKGDIR:
        PORTAGE_COMPRESS:
        PORTAGE_COMPRESS_FLAGS:
        PORTAGE_RSYNC_EXTRA_OPTS:
        PORTAGE_RSYNC_OPTS:
        PORTAGE_TMPDIR:        /var/tmp/paludis
        PORTDIR:               /var/paludis/repositories/gentoo
        PORTDIR_OVERLAY:
        SYNC:
        USE:

Repository installed:
    Configuration information:
        buildroot:             /var/tmp/paludis
        format:                vdb
        location:              /var/db/pkg
        names_cache:           /var/db/pkg/.cache/names
        provides_cache:        /var/db/pkg/.cache/provides
        root:                  /
        world:                 /var/db/pkg/world

Repository ricce_n-local:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /var/empty
        distdir:               /var/paludis/distfiles
        eclassdirs:            /var/paludis/repositories/gentoo/eclass /var/paludis/repositories/local/eclass
        format:                ebuild
        location:              /var/paludis/repositories/local
        master_repository:     gentoo
        names_cache:           /var/empty
        newsdir:               /var/paludis/repositories/local/metadata/news
        pkgdir:                /var/paludis/repositories/gentoo/packages
        profiles:              /var/paludis/repositories/gentoo/profiles/default-linux/amd64/2007.0/desktop
        securitydir:           /var/paludis/repositories/local/metadata/glsa
        setsdir:               /var/paludis/repositories/local/sets
        sync:
        sync_options:
        write_cache:           /var/empty
----




Comment 1


Rickard Närström





          2007-07-03 10:32:34 UTC
        

Created attachment 123754 [details]
Logfile




Comment 2


SpanKY






          2007-07-03 18:23:29 UTC
        

try testing it on a portage system

f_16384_block: 16384 byte blocksize: 
gzip: stdin: Is a directory
failed




Comment 3


Rickard Närström





          2007-07-03 19:01:20 UTC
        

The tests succeeds when using portage.




Comment 4


SpanKY






          2007-07-06 20:35:54 UTC
        

have fun tracking it down




Comment 5


Rickard Närström





          2007-07-07 05:36:14 UTC
        

The problem is that paludis exports IMAGE env variable during tests, witch cause test/run_e2fsck to fail due to:

if [ "$IMAGE"x = x ]; then
        IMAGE=$test_dir/image.gz
fi
[...]
if [ "$SKIP_GUNZIP" != "true" ] ; then
        gunzip < $IMAGE > $TMPFILE
fi
[...]
if [ "$SKIP_CLEANUP" != "true" ] ; then
        unset IMAGE FSCK_OPT SECOND_FSCK_OPT OUT1 OUT2 EXP1 EXP2
        unset SKIP_VERIFY SKIP_CLEANUP SKIP_GUNZIP ONE_PASS_ONLY PREP_CMD
        unset DESCRIPTION SKIP_UNLINK AFTER_CMD
fi


Only the first test fail because the IMAGE variable is unset @ end of run_e2fsck




Comment 6


Rickard Närström





          2007-07-07 17:33:21 UTC
        

Add maintainer for paludis to CC. -- Can you please check this out.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

