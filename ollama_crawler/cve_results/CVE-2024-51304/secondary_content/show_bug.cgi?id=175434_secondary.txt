Title: 175434 – cross-compiling kernel from 32bit host for alpha-linux-gnu results in binutils-2.17's ld segfaulting
URL: https://bugs.gentoo.org/show_bug.cgi?id=175434

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 175434
cross-compiling kernel from 32bit host for alpha-linux-gnu results in binutils-2.17's ld segfaulting
Last modified: 2007-05-19 04:01:59 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 175434 
      - cross-compiling kernel from 32bit host for alpha-linux-gnu results in binutils-2.17's ld segfaulting


Summary:
cross-compiling kernel from 32bit host for alpha-linux-gnu results in binutil...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

Alpha
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-04-21 12:01 UTC by Attila Fazekas





      Modified:
    
2007-05-19 04:01 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ltrace

              (ld-bug.out.gz,91.31 KB,
                text/plain)

            
2007-04-21 12:04 UTC,

            Attila Fazekas




Details





.config

              (.config,58.99 KB,
                text/plain)

            
2007-05-04 10:41 UTC,

            Attila Fazekas




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Attila Fazekas





          2007-04-21 12:01:50 UTC
        

`i2o_exec_exit' referenced in section `.init.text' of drivers/built-in.o: defined in discarded section `.exit.text' of drivers/built-in.o
`i2o_exec_exit' referenced in section `.init.text' of drivers/built-in.o: defined in discarded section `.exit.text' of drivers/built-in.o
`i2o_driver_exit' referenced in section `.init.text' of drivers/built-in.o: defined in discarded section `.exit.text' of drivers/built-in.o
`i2o_driver_exit' referenced in section `.init.text' of drivers/built-in.o: defined in discarded section `.exit.text' of drivers/built-in.o
alpha-unknown-linux-gnu-ld: BFD 2.17 assertion fail /var/tmp/cross/alpha-unknown-linux-gnu/portage/cross-alpha-unknown-linux-gnu/binutils-2.17/work/binutils-2.17/bfd/elf64-alpha.c:4170
/bin/sh: line 1: 23061 Segmentation fault      alpha-unknown-linux-gnu-ld -static -N -o .tmp_vmlinux1 -T arch/alpha/kernel/vmlinux.lds arch/alpha/kernel/head.o init/built-in.o --start-group usr/built-in.o arch/alpha/kernel/built-in.o arch/alpha/mm/built-in.o arch/alpha/math-emu/built-in.o kernel/built-in.o mm/built-in.o fs/built-in.o ipc/built-in.o security/built-in.o crypto/built-in.o block/built-in.o lib/lib.a arch/alpha/lib/lib.a lib/built-in.o arch/alpha/lib/built-in.o drivers/built-in.o sound/built-in.o net/built-in.o --end-group
make: *** [.tmp_vmlinux1] Error 139

CONFIG_ALPHA_RAWHIDE=y  (EV56)
generic doesn't work, may be another binutils/gcc problem.

tools:[I--] [ ~] cross-alpha-unknown-linux-gnu/binutils-2.17 (alpha-unknown-linux-gnu)
[I--] [ ~] cross-alpha-unknown-linux-gnu/gcc-4.1.2 (alpha-unknown-linux-gnu-4.1)
[I--] [  ] cross-alpha-unknown-linux-gnu/gdb-6.6-r2 (alpha-unknown-linux-gnu)
[I--] [ ~] cross-alpha-unknown-linux-gnu/glibc-2.5-r1 (alpha-unknown-linux-gnu-2.2)
[I--] [ -] cross-alpha-unknown-linux-gnu/linux-headers-2.6.11-r5 (alpha-unknown-linux-gnu)

on x86.


while compiling many of :
{standard input}: Assembler messages:
{standard input}:7: Warning: setting incorrect section attributes for .got

kernel: linux-2.6.19-gentoo-r5 , and others (newer).

Not too interesting bt:
(gdb) bt
#0  0xb7eb0285 in ?? () from /usr/i686-pc-linux-gnu/alpha-unknown-linux-gnu/lib/libbfd-2.17.so
#1  0xb7ef8c18 in ?? () from /usr/i686-pc-linux-gnu/alpha-unknown-linux-gnu/lib/libbfd-2.17.so
#2  0x0000104a in ?? ()
#3  0xbfa06364 in ?? ()
#4  0x085920d0 in ?? ()
#5  0x0000bc7c in ?? ()
#6  0x00000000 in ?? ()

I`ll try with older version or with gentoo vendor if it means difference.




Comment 1


Attila Fazekas





          2007-04-21 12:04:12 UTC
        

Created attachment 116885 [details]
ltrace

(This is my first contact with alpha arch.)




Comment 2


Attila Fazekas





          2007-04-21 17:01:20 UTC
        

[I--] [ -] cross-alpha-gentoo-linux-gnu/binutils-2.16.1-r3 (alpha-gentoo-linux-gnu)
[I--] [ -] cross-alpha-gentoo-linux-gnu/gcc-4.1.1-r3 (alpha-gentoo-linux-gnu-4.1)
[I--] [ -] cross-alpha-gentoo-linux-gnu/linux-headers-2.6.11-r5 (alpha-gentoo-linux-gnu)

same result. :(




Comment 3


SpanKY






          2007-05-02 19:32:16 UTC
        

i can cross-compile linux-2.6.21 without any crashes ... i see the .got warning, but that's it ...

post your kernel .config you used




Comment 4


Attila Fazekas





          2007-05-04 10:41:55 UTC
        

Created attachment 118124 [details]
.config

but , the default(generic) has other problem.
CFLAGS maybe wrong.

I will compare the FLAGS with natively compiling FLAGS.




Comment 5


SpanKY






          2007-05-19 03:51:07 UTC
        

seems to only happen on 32bit hosts ... tried on my ppc and it bombed while it worked on my x86_64




Comment 6


SpanKY






          2007-05-19 04:01:59 UTC
        

not sure i'm inclined to debug/fix this ...

binutils 2.17.50.0.16 works just fine

you should just upgrade your cross-compiler to a newer version i think









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

