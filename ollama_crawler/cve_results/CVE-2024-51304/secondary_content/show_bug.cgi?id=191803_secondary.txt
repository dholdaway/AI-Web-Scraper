Title: 191803 – x11-drivers/ati-drivers needs SEARCH_DIRS_MASK entry for revdep-rebuild
URL: https://bugs.gentoo.org/show_bug.cgi?id=191803

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 191803
x11-drivers/ati-drivers needs SEARCH_DIRS_MASK entry for revdep-rebuild
Last modified: 2007-11-26 15:29:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 191803 
      - x11-drivers/ati-drivers needs SEARCH_DIRS_MASK entry for revdep-rebuild


Summary:
x11-drivers/ati-drivers needs SEARCH_DIRS_MASK entry for revdep-rebuild
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       trivial
      


Assignee:

Marien Zwart (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-09-09 08:56 UTC by Tomáš Cícha





      Modified:
    
2007-11-26 15:29 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



lu_zero
schnake.newsletter
x11-drivers









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tomáš Cícha





          2007-09-09 08:56:20 UTC
        

I had already solved the similar problem with 32b libstc++.so presence, but still can't get rid of re-building the fglrx driver.

Have no idea what is the problem, revdep-rebuild doesn't complain about specific library:(

Reproducible: Always

Steps to Reproduce:
1.emerge ati-drivers
2.revdep-rebuild

Actual Results:  
This is output from revdep-rebuild:

...
 * Checking dynamic linking consistency
[ 100% ]                 
 *   broken /usr/lib32/dri/fglrx_dri.so (no version information available)
 * Generated new /root/.revdep-rebuild.3_rebuild

 * Assigning files to packages
 *   /usr/lib32/dri/fglrx_dri.so -> x11-drivers/ati-drivers
 * Generated new /root/.revdep-rebuild.4_packages_raw and /root/.revdep-rebuild.4_package_owners
...

Expected Results:  
Well, no rebuild for fully functional driver:)

My emerge --info:

Portage 2.1.3.9 (default-linux/amd64/2007.0, gcc-4.2.0, glibc-2.6.1-r0, 2.6.22-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.22-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3500+
Timestamp of tree: Sun, 09 Sep 2007 06:50:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.5.1-r2
sys-apps/baselayout: 1.12.10-r4
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18.50.0.1
sys-devel/gcc-config: 1.4.0-r2
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -mtune=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -mtune=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://gentoo.mirror.web4u.cz/ "
LANG="cs_CZ"
LC_ALL="cs_CZ"
LINGUAS="cs en en_US en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="   "
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dnow X aac acl acpi alsa amd64 berkdb bitmap-fonts bzip2 cddb cdr cli cracklib crypt cups dbus dri dvd dvdr flac fortran gdbm gif gpm iconv isdnlog java jpeg jpeg2k lm_sensors midi mmx mng mp3 mpeg mudflap ncurses nls nptl nptlonly nsplugin ogg opengl openmp pam pcre pdf perl png pppd python readline reflection session spl sse sse2 ssl tcpd tiff truetype truetype-fonts type1-fonts unicode usb vorbis xorg xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="cs en en_US en_GB" USERLAND="GNU" VIDEO_CARDS="vga vesa fglrx"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Michael Schnake





          2007-09-14 21:46:11 UTC
        

Hehe, I bet you installed the new ATI drivers 8.41.7!

Try a "cat /usr/lib32/dri/fglrx_dri.so", and you will see the following text:

"This is a dummy file to satisfy the installer and packaging
scripts. The real fglrx_dri.so is coming back soon."

revdep-rebuild is right: THAT is a really broken library ;-) But of course that error will persist, regardless how often you re-emerge ati-drivers (8.41.7).

As ati-drivers-8.41.7 is not in portage (there is only an ebuild in Bug http://bugs.gentoo.org/show_bug.cgi?id=191374), I would think this bug is currently INVALID.




Comment 2


Tomáš Cícha





          2007-09-15 06:19:37 UTC
        

(In reply to comment #1)
> Hehe, I bet you installed the new ATI drivers 8.41.7!

Sorry, no win there for you:), it's 8.40.4:)

> Try a "cat /usr/lib32/dri/fglrx_dri.so"...

Therefore the library file is proper:

$ file /usr/lib32/dri/fglrx_dri.so 
/usr/lib32/dri/fglrx_dri.so: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), stripped







Comment 3


Michael Schnake





          2007-09-15 10:46:43 UTC
        

>> Hehe, I bet you installed the new ATI drivers 8.41.7!

>Sorry, no win there for you:), it's 8.40.4:)

What a pitty. Would have been such a NICE problem ;-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

