Title: 481542 – sci-chemistry/avogadro-1.1.0 - segmentation fault on startup in QX11Info::screen (this=this@entry=0x8edb20) at kernel/qx11info_x11.cpp:476
URL: https://bugs.gentoo.org/show_bug.cgi?id=481542

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 481542
sci-chemistry/avogadro-1.1.0 - segmentation fault on startup in QX11Info::screen (this=this@entry=0x8edb20) at kernel/qx11info_x11.cpp:476
Last modified: 2015-08-14 11:26:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 481542 
      - sci-chemistry/avogadro-1.1.0 - segmentation fault on startup in QX11Info::screen (this=this@entry=0x8edb20) at kernel/qx11info_x11.cpp:476


Summary:
sci-chemistry/avogadro-1.1.0 - segmentation fault on startup in QX11Info::scr...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Chemistry-Related Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-08-18 13:55 UTC by Karl Lindén





      Modified:
    
2015-08-14 11:26 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



yamadharma









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Compressed build log

              (build.log.gz,69.61 KB,
                application/gzip)

            
2013-08-18 13:58 UTC,

            Karl Lindén




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karl Lindén





          2013-08-18 13:55:25 UTC
        

When I start sci-chemistry/avogadro-1.1.0 I get a segfault. The segfault is always reproducible.

$ avogadro
"Avogadro version:	1.1.0	Git:	
LibAvogadro version:	1.1.0	Git:	" 
Locale:  "C" 
Libavogadro translations not found. 
System has OpenGL support. 
About to test OpenGL capabilities. 
OpenGL capabilities found: 
	Double Buffering.
	Direct Rendering.
	Antialiasing.
Loading plugins: "/usr/bin/../lib64/avogadro/1_1" 
Searching for plugins in "/usr/lib64/avogadro/1_1" 
Searching for plugins in "/usr/lib64/avogadro/1_1/colors" 
Searching for plugins in "/usr/lib64/avogadro/1_1/engines" 
Searching for plugins in "/usr/lib64/avogadro/1_1/extensions" 
Searching for plugins in "/usr/lib64/avogadro/1_1/tools" 
Loading plugins: "/home/kalle/.avogadro/1_1/plugins" 
X Error: RenderBadPicture (invalid Picture parameter) 141
  Extension:    138 (RENDER)
  Minor opcode: 7 (RenderFreePicture)
  Resource id:  0x3e0001b
X Error: RenderBadPicture (invalid Picture parameter) 141
  Extension:    138 (RENDER)
  Minor opcode: 7 (RenderFreePicture)
  Resource id:  0x3e00022
Segmentation fault

Here is the gdb output:
GNU gdb (Gentoo 7.6 p1) 7.6
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.gentoo.org/>...
Reading symbols from /usr/bin/avogadro...Reading symbols from /usr/lib64/debug/usr/bin/avogadro.debug...done.
done.
(gdb) run
Starting program: /usr/bin/avogadro 
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
"Avogadro version:	1.1.0	Git:	
LibAvogadro version:	1.1.0	Git:	" 
Locale:  "sv_SE" 
Translation successfully loaded. 
System has OpenGL support. 
About to test OpenGL capabilities. 
OpenGL capabilities found: 
	Double Buffering.
	Direct Rendering.
	Antialiasing.
Loading plugins: "/usr/bin/../lib64/avogadro/1_1" 
Searching for plugins in "/usr/lib64/avogadro/1_1" 
Searching for plugins in "/usr/lib64/avogadro/1_1/colors" 
Searching for plugins in "/usr/lib64/avogadro/1_1/engines" 
Searching for plugins in "/usr/lib64/avogadro/1_1/extensions" 
Searching for plugins in "/usr/lib64/avogadro/1_1/tools" 
Loading plugins: "/home/kalle/.avogadro/1_1/plugins" 
[New Thread 0x7fffd8a3c700 (LWP 15744)]
X Error: RenderBadPicture (invalid Picture parameter) 141
  Extension:    138 (RENDER)
  Minor opcode: 7 (RenderFreePicture)
  Resource id:  0x3c0001b
[New Thread 0x7fffd36da700 (LWP 15745)]
X Error: RenderBadPicture (invalid Picture parameter) 141
  Extension:    138 (RENDER)
  Minor opcode: 7 (RenderFreePicture)
  Resource id:  0x3c00022

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff73aa188 in QX11Info::screen (this=this@entry=0x8edb20) at kernel/qx11info_x11.cpp:476
476	{ return x11data ? x11data->screen : QX11Info::appScreen(); }
(gdb) bt 
#0  0x00007ffff73aa188 in QX11Info::screen (this=this@entry=0x8edb20) at kernel/qx11info_x11.cpp:476
#1  0x00007ffff7d27613 in QGLWidget::event (this=0x8ed8f0, e=0x7fffffffcb70) at qgl.cpp:4317
#2  0x00007ffff7321aac in QApplicationPrivate::notify_helper (this=this@entry=0x6d4d90, receiver=receiver@entry=0x8ed8f0, e=e@entry=0x7fffffffcb70) at kernel/qapplication.cpp:4562
#3  0x00007ffff7323f6d in QApplication::notify (this=0x7fffffffdb20, receiver=0x8ed8f0, e=0x7fffffffcb70) at kernel/qapplication.cpp:4423
#4  0x00007ffff6da0fed in QCoreApplication::notifyInternal (this=0x7fffffffdb20, receiver=receiver@entry=0x8ed8f0, event=event@entry=0x7fffffffcb70) at kernel/qcoreapplication.cpp:949
#5  0x00007ffff736269a in sendEvent (event=0x7fffffffcb70, receiver=0x8ed8f0) at ../../src/corelib/kernel/qcoreapplication.h:231
#6  QWidget::setParent (this=this@entry=0x8ed8f0, parent=parent@entry=0xb8bc60, f=...) at kernel/qwidget.cpp:10309
#7  0x00007ffff7362b02 in QWidget::setParent (this=this@entry=0x8ed8f0, parent=parent@entry=0xb8bc60) at kernel/qwidget.cpp:10160
#8  0x00007ffff7345d13 in QLayout::addChildWidget (this=this@entry=0x8ed770, w=w@entry=0x8ed8f0) at kernel/qlayout.cpp:1024
#9  0x00007ffff732cb52 in QBoxLayout::insertWidget (this=this@entry=0x8ed770, index=index@entry=-1, widget=widget@entry=0x8ed8f0, stretch=stretch@entry=0, alignment=...) at kernel/qboxlayout.cpp:1039
#10 0x00007ffff732ccdb in QBoxLayout::addWidget (this=this@entry=0x8ed770, widget=widget@entry=0x8ed8f0, stretch=stretch@entry=0, alignment=...) at kernel/qboxlayout.cpp:1119
#11 0x00000000004327cb in Avogadro::MainWindow::readSettings (this=0x8c16d0) at /usr/src/debug/sci-chemistry/avogadro-1.1.0/avogadro-1.1.0/avogadro/src/mainwindow.cpp:3252
#12 0x000000000043c084 in Avogadro::MainWindow::event (this=0x8c16d0, event=0x7fffffffd680) at /usr/src/debug/sci-chemistry/avogadro-1.1.0/avogadro-1.1.0/avogadro/src/mainwindow.cpp:646
#13 0x00007ffff7321aac in QApplicationPrivate::notify_helper (this=this@entry=0x6d4d90, receiver=receiver@entry=0x8c16d0, e=e@entry=0x7fffffffd680) at kernel/qapplication.cpp:4562
#14 0x00007ffff7323f6d in QApplication::notify (this=0x7fffffffdb20, receiver=0x8c16d0, e=0x7fffffffd680) at kernel/qapplication.cpp:4423
#15 0x00007ffff6da0fed in QCoreApplication::notifyInternal (this=0x7fffffffdb20, receiver=receiver@entry=0x8c16d0, event=event@entry=0x7fffffffd680) at kernel/qcoreapplication.cpp:949
#16 0x00007ffff736319c in sendEvent (event=0x7fffffffd680, receiver=0x8c16d0) at ../../src/corelib/kernel/qcoreapplication.h:231
#17 QWidget::ensurePolished (this=this@entry=0x8c16d0) at kernel/qwidget.cpp:9726
#18 0x00007ffff7367206 in QWidget::setVisible (this=0x8c16d0, visible=<optimized out>) at kernel/qwidget.cpp:7728
#19 0x0000000000421dc7 in main (argc=1, argv=<optimized out>) at /usr/src/debug/sci-chemistry/avogadro-1.1.0/avogadro-1.1.0/avogadro/src/main.cpp:250
(gdb) c
Continuing.
[Thread 0x7fffd36da700 (LWP 15745) exited]
[Thread 0x7fffd8a3c700 (LWP 15744) exited]

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists.
(gdb) q




Comment 1


Karl Lindén





          2013-08-18 13:57:13 UTC
        

$ emerge --info =sci-chemistry/avogadro-1.1.0
Portage 2.1.13.7 (default/linux/amd64/13.0/desktop, gcc-4.7.3, glibc-2.17, 3.10.5-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-3.10.5-gentoo-x86_64-AMD_Athlon-tm-_II_X4_640_Processor-with-gentoo-2.2
KiB Mem:     8180800 total,   1178420 free
KiB Swap:    2097148 total,   2097148 free
Timestamp of tree: Mon, 12 Aug 2013 06:15:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
distcc 3.1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:          4.2_p45
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.5-r1, 3.3.2-r1
dev-util/cmake:           2.8.11.1
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.13.4, 1.14
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.7.3
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo science proaudio x-local lilrc
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=amdfam10 -O2 -fomit-frame-pointer -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -march=amdfam10 -O2 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildsyspkg config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news noinfo parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://ftp.df.lth.se/pub/gentoo/ rsync://ftp.df.lth.se/pub/gentoo/ http://mirror.mdfnet.se/gentoo"
LANG="sv_SE.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/kalle/overlays/science /home/kalle/overlays/proaudio /home/kalle/overlays/local /home/kalle/overlays/lilrc"
SYNC="rsync://rsync.se.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acl amd64 aspell avahi bluetooth cairo caps cd cdda cddb cdr consolekit cracklib cups curl dbus devhelp dssi dvd dvdr exif ffmpeg fftw filecaps flac fltk gallium gif gimp git glib gmp gnutls gstreamer gtk gtk2 gtkspell gtkstyle gudev hwdb jack javascript jit joystick jpeg keymap kmod ladspa lame libgig libnotify libsamplerate lv2 mad mmx mmxext mp3 mpeg multilib nls nptl ogg opengl openmp openrc orc pam pdf png policykit pulseaudio qt4 readline spell sse sse2 sse3 sse4_1 ssl startup-notification subversion svg svn theora threads thunar tiff truetype udev unicode usb v4l vorbis webgl webkit x264 xcomposite xfce xml xorg xscreensaver zlib" ABI_X86="64" ALSA_CARDS="ca0106 hda-intel" CURL_SSL="gnutls" ELIBC="glibc" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev" KERNEL="linux" LINGUAS="en en_GB sv sv_SE" PYTHON_SINGLE_TARGET="python3_3" PYTHON_TARGETS="python2_7 python3_3" RUBY_TARGETS="ruby19" USERLAND="GNU" VIDEO_CARDS="radeon" XFCE_PLUGINS="trash"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

sci-chemistry/avogadro-1.1.0 was built with the following:
USE="sse2 -glsl -python -test"
CFLAGS="-O2 -march=amdfam10 -pipe -ggdb"
CXXFLAGS="-O2 -march=amdfam10 -pipe -ggdb"




Comment 2


Karl Lindén





          2013-08-18 13:58:27 UTC
        

Created attachment 356374 [details]
Compressed build log




Comment 3


Karl Lindén





          2015-08-14 11:26:11 UTC
        

I can no longer reproduce this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

