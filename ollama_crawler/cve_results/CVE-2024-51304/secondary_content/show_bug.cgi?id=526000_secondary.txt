Title: 526000 – app-emulation/virtualbox-modules 4.2.24 with kernel 3.17.0 - .../work/vboxnetadp/linux/VBoxNetAdp-linux.c:186:48: error: macro "alloc_netdev" requires 4 arguments, but only 3 given
URL: https://bugs.gentoo.org/show_bug.cgi?id=526000

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 526000
app-emulation/virtualbox-modules 4.2.24 with kernel 3.17.0 - .../work/vboxnetadp/linux/VBoxNetAdp-linux.c:186:48: error: macro "alloc_netdev" requires 4 arguments, but only 3 given
Last modified: 2014-10-21 06:49:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 526000 
      - app-emulation/virtualbox-modules 4.2.24 with kernel 3.17.0 - .../work/vboxnetadp/linux/VBoxNetAdp-linux.c:186:48: error: macro "alloc_netdev" requires 4 arguments, but only 3 given


Summary:
app-emulation/virtualbox-modules 4.2.24 with kernel 3.17.0 - .../work/vboxnet...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo VMWare Bug Squashers [disabled]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-10-20 10:52 UTC by Harald Weiner





      Modified:
    
2014-10-21 06:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,18.70 KB,
                text/plain)

            
2014-10-20 10:55 UTC,

            Harald Weiner




Details





patch for app-emulation/virtualbox

              (virtualbox.patch,2.97 KB,
                patch)

            
2014-10-21 06:42 UTC,

            Harald Weiner




Details
            | Diff





patch for app-emulation/virtualbox-modules

              (virtualbox-alloc_netdev.diff.patch,2.53 KB,
                patch)

            
2014-10-21 06:43 UTC,

            Harald Weiner




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Harald Weiner





          2014-10-20 10:52:32 UTC
        

During an emerge @module-rebuild the app-emulation/virtualbox-modules-4.2.24 ebuild build step failed with the message:"
* Installing vboxnetadp module
install: cannot stat ‘vboxnetadp.ko’: No such file or directory
!!! doins: vboxnetadp.ko does not exist
"

Reproducible: Always

Steps to Reproduce:
1.emerge "=sys-kernel/gentoo-sources-3.17.0"
2.emerge "=app-emulation/virtualbox-modules-4.2.24"

Actual Results:  
vboxnetadp.ko is not built because of the following error message: /var/tmp/portage/app-emulation/virtualbox-modules-4.2.24/work/vboxnetadp/linux/VBoxNetAdp-linux.c: In function ‘vboxNetAdpOsCreate’:
/var/tmp/portage/app-emulation/virtualbox-modules-4.2.24/work/vboxnetadp/linux/VBoxNetAdp-linux.c:186:48: error: macro "alloc_netdev" requires 4 arguments, but only 3 given

Expected Results:  
the build should succeed.

This bug seems to be related to the one reported at: https://forums.virtualbox.org/viewtopic.php?f=7&t=63208

I have not tried the patch recommended there yet. Update will follow as soon as possible.




Comment 1


Harald Weiner





          2014-10-20 10:55:18 UTC
        

Created attachment 387036 [details]
build.log




Comment 2


Harald Weiner





          2014-10-21 06:42:40 UTC
        

Created attachment 387110 [details, diff]
patch for app-emulation/virtualbox

/etc/portage/patches/app-emulation/virtualbox/virtualbox.patch




Comment 3


Harald Weiner





          2014-10-21 06:43:40 UTC
        

Created attachment 387112 [details, diff]
patch for app-emulation/virtualbox-modules

/etc/portage/patches/app-emulation/virtualbox-modules/virtualbox-alloc_netdev.diff.patch




Comment 4


Harald Weiner





          2014-10-21 06:49:11 UTC
        

I have now tested the patches suggested at https://forums.virtualbox.org/viewtopic.php?f=7&t=63208 and https://forums.virtualbox.org/viewtopic.php?p=296650#p296650 by putting them into /etc/portage/patches/app-emulation/virtualbox respectively /etc/portage/patches/app-emulation/virtualbox-modules. Both patches are needed, app-emulation/virtualbox and app-emulation/virtualbox-modules both need to be recompiled under the 3.17 kernel version, and the kernel modules need to be re-loaded of course.
The virtual machine is now starting up again without any problems.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

