Title: 833189 – net-fs/samba-4.15.4 Build failed  -> task in 'ndrdump' failed with exit status 1
URL: https://bugs.gentoo.org/show_bug.cgi?id=833189

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 833189
net-fs/samba-4.15.4 Build failed  -> task in 'ndrdump' failed with exit status 1
Last modified: 2022-02-12 15:48:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 833189 
      - net-fs/samba-4.15.4 Build failed  -> task in 'ndrdump' failed with exit status 1


Summary:
net-fs/samba-4.15.4 Build failed  -> task in 'ndrdump' failed with exit status 1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's SAMBA Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-02-12 14:43 UTC by Joe





      Modified:
    
2022-02-12 15:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



joseph.brendler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info '=net-fs/samba-4.15.4::gentoo' > emerge-info.txt

              (emerge-info.txt,7.02 KB,
                text/plain)

            
2022-02-12 14:51 UTC,

            Joe




Details





emerge -pqv '=net-fs/samba-4.15.4::gentoo'

              (file_833189.txt,409 bytes,
                text/plain)

            
2022-02-12 14:53 UTC,

            Joe




Details





/var/log/portage/net-fs:samba-4.15.4:20220212-141230.log as tar.bz2

              (emerge.log.tar.bz2,74.59 KB,
                application/x-bzip)

            
2022-02-12 15:00 UTC,

            Joe




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joe





          2022-02-12 14:43:01 UTC
        

/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../lib64/libldb.so: undefined reference to `tevent_context_init@TEVENT_0.9.9'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../lib64/libldb.so: undefined reference to `tevent_loop_allow_nesting@TEVENT_0.9.9'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../lib64/libldb.so: undefined reference to `tevent_set_debug@TEVENT_0.9.9'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../lib64/libldb.so: undefined reference to `_tevent_loop_once@TEVENT_0.9.9'
collect2: error: ld returned 1 exit status

Waf: Leaving directory `/var/tmp/portage/net-fs/samba-4.15.4/work/samba-4.15.4-abi_x86_64.amd64/bin/default'
Build failed
 -> task in 'ndrdump' failed with exit status 1: 
        {task 139967836095872: cprogram cmdline_s4.c.5.o,ndrdump.c.1.o -> ndrdump}
['x86_64-pc-linux-gnu-gcc', '-march=ivybridge', '-O2', '-pipe', '-Wl,-O1', '-Wl,--as-needed', 'lib/cmdline/cmdline_s4.c.5.o', 'librpc/tools/ndrdump.c.1.o', '-o/var/tmp/portage/net-fs/samba-4.15.4/work/samba-4.15.4-abi_x86_64.amd64/bin/default/librpc/tools/ndrdump', '-Wl,-rpath,/usr/lib64', '-Wl,-Bstatic', '-Wl,-Bdynamic'
[...]
 * ERROR: net-fs/samba-4.15.4::gentoo failed (compile phase):
 *   build failed
 * 
 * Call stack:
 *     ebuild.sh, line  127:  Called src_compile
 *   environment, line 4172:  Called multilib-minimal_src_compile
 *   environment, line 2880:  Called multilib_foreach_abi 'multilib-minimal_abi_src_compile'
 *   environment, line 3147:  Called multibuild_foreach_variant '_multilib_multibuild_wrapper' 'multilib-minimal_abi_src_compile'
 *   environment, line 2840:  Called _multibuild_run '_multilib_multibuild_wrapper' 'multilib-minimal_abi_src_compile'
 *   environment, line 2838:  Called _multilib_multibuild_wrapper 'multilib-minimal_abi_src_compile'
 *   environment, line  798:  Called multilib-minimal_abi_src_compile
 *   environment, line 2874:  Called multilib_src_compile
 *   environment, line 3359:  Called waf-utils_src_compile
 *   environment, line 5286:  Called die
 * The specific snippet of code:
 *       "${WAF_BINARY}" ${_mywafconfig} ${jobs} "${@}" || die "build failed"
 * 
 * If you need support, post the output of `emerge --info '=net-fs/samba-4.15.4::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-fs/samba-4.15.4::gentoo'`.
 * The complete build log is located at '/var/log/portage/net-fs:samba-4.15.4:20220212-141230.log'.
 * For convenience, a symlink to the build log is located at '/var/tmp/portage/net-fs/samba-4.15.4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-fs/samba-4.15.4/temp/environment'.
 * Working directory: '/var/tmp/portage/net-fs/samba-4.15.4/work/samba-4.15.4-abi_x86_64.amd64'
 * S: '/var/tmp/portage/net-fs/samba-4.15.4/work/samba-4.15.4'


Reproducible: Always

Steps to Reproduce:
1. emerge samba

Actual Results:  
failed to compile

Expected Results:  
expected successful compile

maybe related to glibc?




Comment 1


Sam James









          2022-02-12 14:46:33 UTC
        

Please always include the full build.log (and emerge --info).

>/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../x86_64-pc-linux-gnu/bin/ld: >/usr/lib/gcc/x86_64-pc-linux-gnu/11.2.1/../../../../lib64/libldb.so: undefined >reference to `_tevent_loop_once@TEVENT_0.9.9'

Try rebuilding ldb (emerge -v1 sys-libs/ldb)?




Comment 2


Joe





          2022-02-12 14:51:36 UTC
        

Created attachment 764925 [details]
emerge --info '=net-fs/samba-4.15.4::gentoo' > emerge-info.txt




Comment 3


Joe





          2022-02-12 14:53:40 UTC
        

Created attachment 764926 [details]
emerge -pqv '=net-fs/samba-4.15.4::gentoo'




Comment 4


Joe





          2022-02-12 15:00:56 UTC
        

Created attachment 764927 [details]
/var/log/portage/net-fs:samba-4.15.4:20220212-141230.log as tar.bz2




Comment 5


Joe





          2022-02-12 15:45:42 UTC
        

samba-4.15.4 compiles successfully after rebuild of ldb-2.4.2

alias nobinmerge='MAKEOPTS="-j2 -l2" FEATURES=" -getbinpkg -userpriv -distcc -distcc-pump" emerge -1'

nobinmerge -v1 sys-libs/ldb









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

