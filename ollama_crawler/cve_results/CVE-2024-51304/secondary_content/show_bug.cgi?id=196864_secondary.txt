Title: 196864 – perl-core/DB_File-1.815 undefined symbol error
URL: https://bugs.gentoo.org/show_bug.cgi?id=196864

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 196864
perl-core/DB_File-1.815 undefined symbol error
Last modified: 2007-10-24 17:39:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 196864 
      - perl-core/DB_File-1.815 undefined symbol error


Summary:
perl-core/DB_File-1.815 undefined symbol error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-10-24 01:56 UTC by Whit Blauvelt





      Modified:
    
2007-10-24 17:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Whit Blauvelt





          2007-10-24 01:56:07 UTC
        

Running mimedefang, on its startup, this error occurs:

mimedefang-multiplexor[30863]: Slave 0 stderr:
/usr/bin/perl: symbol lookup error:
/usr/lib/perl5/vendor_perl/5.8.8/i686-linux/auto/DB_File/DB_File.so:
undefined symbol: db_version_4000

Next the slave dies. This is fatal to the mimedefang-multiplexor. I've run perl-cleaner reallyall, and then reinstalled DB_File, and as well manually upgraded to the latest mimedefang, but this error persists.

# emerge --info
Portage 2.1.3.16 (default-linux/x86/2007.0/server, gcc-4.1.2, glibc-2.6.1-r0, 2.6.18-gentoo-r6 i686)
=================================================================
System uname: 2.6.18-gentoo-r6 i686 AMD Athlon(tm) XP 1800+
Timestamp of tree: Tue, 23 Oct 2007 20:00:01 +0000
app-shells/bash:     3.2_p17
dev-lang/python:     2.3.5-r3, 2.4.4-r5
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon-xp -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS="en"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl apache2 berkdb bitmap-fonts cli cracklib crypt cups doc dri fortran gdbm gpm iconv ipv6 isdnlog jpeg ldap mailwrapper mbox midi mudflap mysql ncurses nls nptl nptlonly openmp pam pcre perl png pppd python readline reflection session snmp spl ssl tcpd truetype truetype-fonts type1-fonts unicode x86 xml xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 i810 imstt mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2007-10-24 09:12:48 UTC
        

Re-emerge sys-libs/db, then recompile perl-core/DB_File and try again.




Comment 2


Whit Blauvelt





          2007-10-24 14:42:51 UTC
        

That got rid of the symbol error. Instead mimedefang-milter's slaves would fail with a sig 11. Reinstalling mimedefang-2.57 stopped those segfaults, but now it fails with:

Oct 24 10:32:45 xxxx mimedefang[10078]: MIMEDefang-2.57: st_optionneg[-1227437168]: 0xff does not fulfill action requirements 0x804cf90
Oct 24 10:32:45 xxxx sm-mta[10294]: l9OEWjPR010294: milter_sys_read(mimedefang): cmd read returned 0, expecting 5
Oct 24 10:32:45 xxxx sm-mta[10294]: l9OEWjPR010294: Milter (mimedefang): to error state

There's seems to be a couple of layers of trouble here - the sys-libs/db needing the recompile, and now something with mimedefang. I'll try recompiling mimedefang-2.63 next, to see if something's been fixed since 2.57 that pertains here. If that's the case, should I rename this to a mimedefang bug, or file a new one?




Comment 3


Whit Blauvelt





          2007-10-24 14:54:15 UTC
        

No joy. Hand-built 2.63's slaves segfault (while the ebuild version of 2.57 have the other problem I just noted). So how can the source of the problem be narrowed down farther?




Comment 4


Jakub Moc (RETIRED)






          2007-10-24 17:39:34 UTC
        

Unrelated, please file a *new* bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

