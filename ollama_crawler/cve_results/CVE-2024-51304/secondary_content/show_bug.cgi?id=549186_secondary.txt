Title: 549186 – net-libs/gnutls-3.3.15 fails all guile tests
URL: https://bugs.gentoo.org/show_bug.cgi?id=549186

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 549186
net-libs/gnutls-3.3.15 fails all guile tests
Last modified: 2016-09-28 22:59:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 549186 
      - net-libs/gnutls-3.3.15 fails all guile tests


Summary:
net-libs/gnutls-3.3.15 fails all guile tests
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Crypto team [DISABLED]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-05-11 14:57 UTC by Paolo Pedroni





      Modified:
    
2016-09-28 22:59 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



alonbl
rene.rheaume
scheme









See Also:


595482





Package list:







Runtime testing required:

---























      Attachments
    




gnutls-3.3.15:20150511-132705.log.gz

              (gnutls-3.3.15:20150511-132705.log.gz,145.13 KB,
                application/gzip)

            
2015-05-11 14:57 UTC,

            Paolo Pedroni




Details





gnutls-3.3.15-20150511-132705.log.gz

              (gnutls-3.3.15:20150511-132705.log.gz,145.13 KB,
                application/gzip)

            
2015-05-15 12:32 UTC,

            Paolo Pedroni




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paolo Pedroni





          2015-05-11 14:57:02 UTC
        

Created attachment 403042 [details]
gnutls-3.3.15:20150511-132705.log.gz

This is what happens when I try to build net-libs/gnutls-3.3.15 (previous installed version was net-libs/gnutls-3.3.10-r2, which worked fine):

FAIL: anonymous-auth.scm
FAIL: session-record-port.scm
FAIL: pkcs-import-export.scm
FAIL: errors.scm
FAIL: x509-certificates.scm
FAIL: x509-auth.scm
FAIL: priorities.scm
FAIL: openpgp-keys.scm
FAIL: openpgp-keyring.scm
FAIL: openpgp-auth.scm
FAIL: srp-base64.scm
make[5]: Entering directory '/var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/guile/tests'
make[5]: Nothing to be done for 'all'.
make[5]: Leaving directory '/var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/guile/tests'
============================================================================
Testsuite summary for GnuTLS 3.3.15
============================================================================
# TOTAL: 11
# PASS:  0
# SKIP:  0
# XFAIL: 0
# FAIL:  11
# XPASS: 0
# ERROR: 0
============================================================================
See guile/tests/test-suite.log
Please report to bugs@gnutls.org
============================================================================
Makefile:1485: recipe for target 'test-suite.log' failed
make[4]: *** [test-suite.log] Error 1
make[4]: Leaving directory '/var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/guile/tests'
Makefile:1591: recipe for target 'check-TESTS' failed
make[3]: *** [check-TESTS] Error 2

# cat /var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/guile/tests/test-suite.log 
===============================================
   GnuTLS 3.3.15: guile/tests/test-suite.log
===============================================

# TOTAL: 11
# PASS:  0
# SKIP:  0
# XFAIL: 0
# FAIL:  11
# XPASS: 0
# ERROR: 0

.. contents:: :depth: 2

FAIL: anonymous-auth.scm
========================

ERROR: Unbound variable: eval-when
                                                                                                                                    
FAIL: session-record-port.scm                                                                                                       
=============================                                                                                                       

ERROR: Unbound variable: eval-when

FAIL: pkcs-import-export.scm
============================

ERROR: Unbound variable: eval-when

FAIL: errors.scm
================

ERROR: Unbound variable: eval-when

FAIL: x509-certificates.scm
===========================

ERROR: Unbound variable: eval-when

FAIL: x509-auth.scm
===================

ERROR: Unbound variable: eval-when

FAIL: priorities.scm
====================

ERROR: Unbound variable: eval-when

FAIL: openpgp-keys.scm
======================

ERROR: Unbound variable: eval-when

FAIL: openpgp-keyring.scm
=========================

ERROR: Unbound variable: eval-when

FAIL: openpgp-auth.scm
======================

ERROR: Unbound variable: eval-when

FAIL: srp-base64.scm
====================

ERROR: Unbound variable: eval-when

# emerge --info
Portage 2.2.18 (python 2.7.9-final-0, default/linux/amd64/13.0/desktop/kde/systemd, gcc-4.9.2, glibc-2.20-r2, 3.18.11-gentoo x86_64)
=================================================================
System uname: Linux-3.18.11-gentoo-x86_64-Intel-R-_Core-TM-_i7-2600_CPU_@_3.40GHz-with-gentoo-2.2
KiB Mem:    16125680 total,   1208008 free
KiB Swap:    8171516 total,   8171516 free
Timestamp of repository gentoo: Mon, 11 May 2015 07:45:01 +0000
sh dash 0.5.7.4
ld GNU gold (Gentoo 2.25 p1.1 2.25) 1.11
distcc 3.1 x86_64-pc-linux-gnu [enabled]
ccache version 3.1.9 [disabled]
app-shells/bash:          4.3_p33-r2::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.9-r1::gentoo, 3.4.2::gentoo
dev-util/ccache:          3.1.9-r4::gentoo
dev-util/cmake:           2.8.12.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.13.11::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.13.4::gentoo
sys-devel/binutils:       2.25::gentoo
sys-devel/gcc:            4.9.2::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.europe.gentoo.org/gentoo-portage
    priority: -1000

kde
    location: /var/lib/layman/kde
    sync-type: git
    sync-uri: git://anongit.gentoo.org/proj/kde.git
    masters: gentoo kde
    priority: 0

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 1

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=sandybridge -msahf --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=8192 -flto=8 -fuse-linker-plugin -floop-interchange -floop-strip-mine -floop-block -fgraphite-identity"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -march=sandybridge -msahf --param l1-cache-size=32 --param l1-cache-line-size=64 --param l2-cache-size=8192 -flto=8 -fuse-linker-plugin -floop-interchange -floop-strip-mine -floop-block -fgraphite-identity"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--keep-going y --with-bdeps y"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs cgroup compress-build-logs config-protect-if-modified distcc distlocks ebuild-locks ipc-sandbox merge-sync news parallel-fetch protect-owned sandbox sfperms split-elog split-log strict test unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gd.tuwien.ac.at/opsys/linux/gentoo/ http://gentoo.tiscali.nl/ http://de-mirror.org/gentoo/ http://mirror.netcologne.de/gentoo/ http://mirror.leaseweb.com/gentoo/"
LANG="it_IT.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=gnu -Wl,--sort-common -flto=8 -fuse-linker-plugin -floop-interchange -floop-strip-mine -floop-block -fgraphite-identity"
MAKEOPTS="-j11"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac aalib acl acpi adns alsa amd64 ao audiofile bash-completion bluetooth branding bzip2 cairo caps cdda cddb cdparanoia cdr cli cracklib crypt css cups curl cxx dbus declarative dga djvu dri dts dvd dvdr emboss encode exif expat fbcon ffmpeg fftw firefox flac fontconfig foomaticdb fortran ftp gd gdbm geoip gif gimp glamor gmp gnutls gphoto2 gpm graphviz gstreamer gtk handbook iconv icu idn imagemagick imlib ipv6 java javascript jbig jpeg jpeg2k kde kipi lame lcms libass libcaca libnotify libsamplerate lm_sensors lua lzma lzo mad mmap mmx mmxext mng modules mp3 mp4 mpeg mplayer multilib musicbrainz ncurses nls nptl nsplugin offensive ogg openal openexr opengl openmp pam pango pcre pdf phonon plasma png policykit postscript ppds pulseaudio qt3support qt4 rdesktop readline recode samba sdl semantic-desktop session smartcard sndfile sockets speex spell sqlite sse sse2 ssl startup-notification subversion svg symlink syslog systemd sysvipc taglib theora threads tidy tiff truetype udev udisks unicode upower usb vaapi vcd vim-syntax vnc vorbis wayland win32codecs wmf wxwidgets x264 xattr xcb xcomposite xinerama xml xpm xscreensaver xv xvid yahoo zlib" ABI_X86="64" ALSA_CARDS="hda-intel virmidi" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="kodak ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="nlpsolver" LINGUAS="it" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4 pypy pypy3" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="intel i965" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

# emerge -1pqv net-libs/gnutls
[ebuild     U ] net-libs/gnutls-3.3.15 [3.3.10-r2] USE="crywrap cxx dane guile nls openssl%* pkcs11 {test} zlib -doc -examples -static-libs" ABI_X86="32 (64) (-x32)" LINGUAS="it -cs -de -en -fi -fr -ms -nl -pl -sv -uk -vi -zh_CN"




Comment 1


Alon Bar-Lev (RETIRED)






          2015-05-15 11:39:46 UTC
        

Hi,

There is no log in attachment#403042 [details].

Please attach complete log and at least one test-suite.log from /var/tmp/portage/net-libs/gnutls-3.3.15/work

Thanks!




Comment 2


Paolo Pedroni





          2015-05-15 12:29:44 UTC
        

(In reply to Alon Bar-Lev from comment #1)
> Hi,
> 
> There is no log in attachment#403042 [details].
> 
> Please attach complete log and at least one test-suite.log from
> /var/tmp/portage/net-libs/gnutls-3.3.15/work
> 
> Thanks!

test-suite.log is in the body of the bug report.

I will attach the build log again.




Comment 3


Paolo Pedroni





          2015-05-15 12:32:46 UTC
        

Created attachment 403334 [details]
gnutls-3.3.15-20150511-132705.log.gz

New post of the original build log. I checked before sending and it's a complete build log. If it's empty again upon reception the problem is not on my side...




Comment 4


Alon Bar-Lev (RETIRED)






          2015-06-03 09:04:31 UTC
        

(In reply to Paolo Pedroni from comment #3)
> Created attachment 403334 [details]
> gnutls-3.3.15-20150511-132705.log.gz
> 
> New post of the original build log. I checked before sending and it's a
> complete build log. If it's empty again upon reception the problem is not on
> my side...

using gzip within gzip is an interesting concept.

ok, only guile tests are failing.

please attach:

 /var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/guile/tests/test-suite.log




Comment 5


Kristian Fiskerstrand (RETIRED)






          2015-06-03 09:14:15 UTC
        

(In reply to Alon Bar-Lev from comment #4)
> (In reply to Paolo Pedroni from comment #3)
> > Created attachment 403334 [details]
> > gnutls-3.3.15-20150511-132705.log.gz
> > 



> please attach:
> 
>  /var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/
> guile/tests/test-suite.log

This information is available in original report. not had time to look into it myself lately, but the error is 

ERROR: Unbound variable: eval-when




Comment 6


Alon Bar-Lev (RETIRED)






          2015-06-03 09:21:29 UTC
        

(In reply to Kristian Fiskerstrand from comment #5)
> (In reply to Alon Bar-Lev from comment #4)
> > (In reply to Paolo Pedroni from comment #3)
> > > Created attachment 403334 [details]
> > > gnutls-3.3.15-20150511-132705.log.gz
> > > 
> 
> 
> 
> > please attach:
> > 
> >  /var/tmp/portage/net-libs/gnutls-3.3.15/work/gnutls-3.3.15-abi_x86_64.amd64/
> > guile/tests/test-suite.log
> 
> This information is available in original report. not had time to look into
> it myself lately, but the error is 
> 
> ERROR: Unbound variable: eval-when

ok, thanks will check it out later.




Comment 7


Alon Bar-Lev (RETIRED)






          2015-06-17 09:53:14 UTC
        

Managed to reproduce this when building manually, running make check 2nd time triggers this, strangely also building from git.

Need guile expert help... best I could find is [1]

Source:
guile/modules/gnutls.in

(eval-when (expand load eval) ...

[1] http://lists.gnu.org/archive/html/bug-guile/2012-07/msg00064.html




Comment 8


Alon Bar-Lev (RETIRED)






          2015-06-26 06:34:55 UTC
        

Using guile-2 it is somewhat better, but still failing on other issues.

FAIL: anonymous-auth.scm
FAIL: session-record-port.scm
PASS: pkcs-import-export.scm
PASS: errors.scm
PASS: x509-certificates.scm
FAIL: x509-auth.scm
PASS: priorities.scm
PASS: openpgp-keys.scm
PASS: openpgp-keyring.scm
FAIL: openpgp-auth.scm
PASS: srp-base64.scm




Comment 9


Alon Bar-Lev (RETIRED)






          2016-08-09 18:49:14 UTC
        

Works for me in guile-2, if not working for you please reopen.




Comment 10


Paolo Pedroni





          2016-08-10 09:50:18 UTC
        

(In reply to Alon Bar-Lev from comment #9)
> Works for me in guile-2, if not working for you please reopen.

Works fine for me as well with gnutls-3.3.24 and gnutls-2. Thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

