Title: 225111 – sys-apps/memtest86+-1.70 - gnu/stubs-32.h: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=225111

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 225111
sys-apps/memtest86+-1.70 - gnu/stubs-32.h: No such file or directory
Last modified: 2014-10-10 07:49:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 225111 
      - sys-apps/memtest86+-1.70 - gnu/stubs-32.h: No such file or directory


Summary:
sys-apps/memtest86+-1.70 - gnu/stubs-32.h: No such file or directory
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Michal Januszewski (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

524920

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2008-06-06 11:38 UTC by Markus Malkusch





      Modified:
    
2014-10-10 07:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



renesanso









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Markus Malkusch





          2008-06-06 11:38:40 UTC
        

I can't compile memtest86+-1.70. This happens only on a hardened 64-Bit-only system with a Xeon X3220 (Quadcore).

On my hardened 32Bit or non-hardened but multilib 64-bit system I can compile it.

Reproducible: Always

Steps to Reproduce:
1.emerge memtest86+

Actual Results:  
cc -c -m32 -march=i486 -fPIC -Wall -g -O2 -fno-strict-aliasing -fno-stack-protector reloc.c
cc -c -Wall -m32 -march=i486 -Os -fomit-frame-pointer -fno-builtin -ffreestanding -fno-stack-protector -fPIC main.c
cc -c -Wall -m32 -march=i486 -Os -fomit-frame-pointer -fno-builtin -ffreestanding -fno-stack-protector -fno-PIC test.c
cc -c -Wall -m32 -march=i486 -Os -fomit-frame-pointer -fno-builtin -ffreestanding -fno-stack-protector -fPIC init.c
cc -c -Wall -m32 -march=i486 -Os -fomit-frame-pointer -fno-builtin -ffreestanding -fno-stack-protector -fPIC lib.c
In file included from /usr/include/features.h:345,
                 from /usr/include/sys/io.h:22,
                 from test.c:14:
/usr/include/gnu/stubs.h:7:27: gnu/stubs-32.h: No such file or directory
In file included from /usr/include/features.h:345,
                 from /usr/include/string.h:26,
                 from reloc.c:4:
/usr/include/gnu/stubs.h:7:27: gnu/stubs-32.h: No such file or directory
make: *** [reloc.o] Error 1
make: *** Waiting for unfinished jobs....
make: *** [test.o] Error 1
 *
 * ERROR: sys-apps/memtest86+-1.70 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2131:  Called die
 * The specific snippet of code:
 *       emake || die
 *  The die message:
 *   (no error message)
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/sys-apps:memtest86+-1.70:20080606-113404.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-apps/memtest86+-1.70/temp/environment'.
 *



emerge --info
Portage 2.1.4.4 (hardened/amd64, gcc-3.4.6, glibc-2.6.1-r0, 2.6.23-hardened-r12 x86_64)
=================================================================
System uname: 2.6.23-hardened-r12 x86_64 Intel(R) Xeon(R) CPU X3220 @ 2.40GHz
Timestamp of tree: Sat, 31 May 2008 08:18:01 +0000
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r13
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.61-r1
sys-devel/automake:  1.7.9-r1, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ABI="amd64"
ACCEPT_KEYWORDS="amd64"
ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol"
APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif so speling status unique_id userdir usertrack vhost_alias"
APACHE2_MPMS="worker"
ARCH="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CDEFINE_amd64="__x86_64__"
CFLAGS="-march=nocona -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CHOST_amd64="x86_64-pc-linux-gnu"
CLASSPATH="."
CLEAN_DELAY="5"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/init.d /etc/java-config/vms/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CVS_RSH="ssh"
CXXFLAGS="-march=nocona -O2 -pipe"
DEFAULT_ABI="amd64"
DISTDIR="/usr/portage/distfiles"
EDITOR="/usr/bin/vim"
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="-v --with-bdeps y"
EMERGE_WARNING_DELAY="10"
FEATURES="confcache distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O ${DISTDIR}/${FILE} ${URI}"
GCC_SPECS=""
GDM_LANG="de_DE.utf8"
GENTOO_MIRRORS="ftp://mirror.switch.ch/mirror/gentoo/ ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ ftp://mirror.ovh.net/gentoo-distfiles/ ftp://pandemonium.tiscali.de/pub/gentoo/ ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://mirror.scarlet-internet.nl/pub/gentoo ftp://ftp.sh.cvut.cz/MIRRORS/gentoo/gentoo ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/"
HISTCONTROL="ignoredups"
HOME="/root"
INFOPATH="/usr/share/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.18/info:/usr/share/gcc-data/x86_64-pc-linux-gnu/3.4.6/info"
INPUT_DEVICES="mouse keyboard"
JAVAC="/etc/java-config-2/current-system-vm/bin/javac"
JAVA_HOME="/etc/java-config-2/current-system-vm"
JDK_HOME="/etc/java-config-2/current-system-vm"
JRE_HOME="/opt/sun-jre-bin-1.4.2.10"
KERNEL="linux"
LANG="de_DE.utf8"
LANGUAGE="de_DE.utf8"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LC_ALL="de_DE.utf8"
LDFLAGS_amd64="-m elf_x86_64"
LESS="-R -M --shift 5"
LESSOPEN="|lesspipe.sh %s"
LIBDIR_amd64="lib64"
LINGUAS="de"
LOGNAME="root"
LS_COLORS="no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.svgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:"
MAIL="/var/mail/root"
MAKEOPTS="-j5"
MANPATH="/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.18/man:/usr/share/gcc-data/x86_64-pc-linux-gnu/3.4.6/man:${MANPATH}:/opt/sun-jre-bin-1.4.2.10/man:/etc/java-config/system-vm/man/:/usr/lib64/php5/man/"
MULTILIB_ABIS="amd64"
PAGER="/usr/bin/less"
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/3.4.6:/opt/sun-jre-bin-1.4.2.10/bin:/opt/sun-jre-bin-1.4.2.10/javaws"
PKGDIR="/usr/portage/packages"
PORTAGE_ARCHLIST="ppc s390 amd64 x86 ppc64 x86-fbsd m68k arm sparc sh mips ia64 alpha hppa sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib64/portage/bin"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="info warn error log"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save"
PORTAGE_GID="250"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_IUSE="^(3dfx|ada|adabas|afs|alpha|alsa_cards_aoa|alsa_cards_aoa-fabric-layout|alsa_cards_aoa-onyx|alsa_cards_aoa-soundbus|alsa_cards_aoa-soundbus-i2s|alsa_cards_aoa-tas|alsa_cards_aoa-toonie|alsa_cards_armaaci|alsa_cards_at91-soc|alsa_cards_at91-soc-eti-b1-wm8731|alsa_cards_au1x00|alsa_cards_cs5535audio|alsa_cards_harmony|alsa_cards_powermac|alsa_cards_pxa2xx-i2sound|alsa_cards_pxa2xx-soc|alsa_cards_pxa2xx-soc-corgi|alsa_cards_pxa2xx-soc-poodle|alsa_cards_pxa2xx-soc-spitz|alsa_cards_pxa2xx-soc-tosa|alsa_cards_sa11xx-uda1341ts|alsa_cards_sun-amd7930|alsa_cards_sun-cs4231|alsa_cards_sun-dbri|altivec|amd64|aqua|arm|asm|birdstep|bmp|bmpx|bootstrap|build|clvm|cman|cmucl|coreaudio|crosscompile_opts_.*|dbmaker|doomsday|drac|elibc_.*|elibc_Darwin|elibc_DragonFly|elibc_FreeBSD|elibc_NetBSD|elibc_OpenBSD|elibc_glibc|elibc_uclibc|emf|empress|empress-bcs|esoob|fdftk|filepro|firebird|frontbase|gamess|gulm|hppa|hvm|ia64|ibm|infopipe|informix|ingres|kernel_.*|kernel_Darwin|kernel_FreeBSD|kernel_linux|lcd_devices_luise|lcd_devices_svga|m68k|macbook|mips|mmx|mmxext|mplayer-bin|multilib|mzscheme|n32|n64|nvidia|nvram|oci8-instant-client|osp|pam_console|pbbuttonsd|pch|pfpro|plugin|ppc|ppc64|ppcsha1|psyco|pvm|raw|real|s390|selinux|sh|solid|sparc|sparc-fbsd|ssse3|svga|sybase|sybase-ct|tcc|uclibc|ultra1|userland_.*|userland_BSD|userland_Darwin|userland_GNU|video_cards_geode|video_cards_i740|video_cards_impact|video_cards_imstt|video_cards_newport|video_cards_nsc|video_cards_nvidia|video_cards_sunbw2|video_cards_suncg14|video_cards_suncg3|video_cards_suncg6|video_cards_sunffb|video_cards_sunleo|video_cards_suntcx|video_cards_vermilion|video_cards_via|video_cards_xgi|vidix|vis|win32codecs|x86|x86-fbsd|xmms|yellownet)$"
PORTAGE_NICENESS="18"
PORTAGE_PYM_PATH="/usr/lib64/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_USE="amd64 elibc_glibc kernel_linux userland_GNU"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PORT_LOGDIR="/var/log/portage"
PWD="/root"
PYTHONPATH="/usr/lib64/portage/pym"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O ${DISTDIR}/${FILE} ${URI}"
ROOT="/"
ROOTPATH="/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/3.4.6:/opt/sun-jre-bin-1.4.2.10/bin:/opt/sun-jre-bin-1.4.2.10/javaws"
RPMDIR="/usr/portage/rpm"
SEARCH_DIRS_MASK="/opt/sun*"
SHELL="/bin/bash"
SHLVL="1"
SSH_CLIENT="10.151.249.65 59712 22"
SSH_CONNECTION="10.151.249.65 59712 10.151.249.69 22"
SSH_TTY="/dev/pts/0"
STAGE1_USE="hardened pic"
SYMLINK_LIB="yes"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
TERM="xterm"
USE="X509 acl amd64 apache2 bash-completion berkdb bzip2 chroot cracklib crypt exif gd gnutls hardened idn ithreads jpeg justify logrotate memlimit midi nls no-old-linux nomac nptl nptlonly objc pam pcre pic png posix readline sasl spf sse2 ssl syslog tcpd threads unicode urandom vhosts xattr xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="worker" ELIBC="glibc" INPUT_DEVICES="mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i810 mach64 mga neomagic nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga vmware voodoo"
USER="root"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:env.d"
VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i810 mach64 mga neomagic nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga vmware voodoo"
_="/usr/bin/emerge"




Comment 1


Michal Januszewski (RETIRED)






          2008-07-09 23:33:05 UTC
        

Could you please try upgrading to a newer version of glibc?  Could you also list the contents of your /usr/include/gnu directory?




Comment 2


Markus Malkusch





          2008-07-10 05:38:59 UTC
        

(In reply to comment #1)
> Could you please try upgrading to a newer version of glibc?

This is a productive server. I don't want to upgrade to a masked glibc.

> Could you also list the contents of your /usr/include/gnu directory?

spitzing ~ # l /usr/include/gnu
insgesamt 28K
drwxr-xr-x  2 root root   76 28. Jun 08:15 .
drwxr-xr-x 66 root root 8,0K  5. Jul 10:28 ..
-rw-r--r--  1 root root 1,4K 28. Jun 08:14 libc-version.h
-rw-r--r--  1 root root 2,8K 28. Jun 08:14 lib-names.h
-rw-r--r--  1 root root  604 28. Jun 08:15 stubs-64.h
-rw-r--r--  1 root root  315 28. Jun 08:14 stubs.h




Comment 3


Michal Januszewski (RETIRED)






          2008-07-15 21:50:37 UTC
        

OK.  Could you please try to install the latest version of memtest86+? (2.01)
Does it exhibit a similar problem?




Comment 4


Markus Malkusch





          2008-07-15 22:07:50 UTC
        

(In reply to comment #3)
> OK.  Could you please try to install the latest version of memtest86+? (2.01)
> Does it exhibit a similar problem?

It's the same problem:

ACCEPT_KEYWORDS=~amd64 emerge memtest86+ -av
[..]
cc -Wall -m32 -march=i486 -Os -fomit-frame-pointer -fno-builtin -ffreestanding -fPIC -fno-stack-protector -m32  -c -o lib.o lib.c
In file included from /usr/include/features.h:345,
                 from /usr/include/string.h:26,
                 from reloc.c:4:
/usr/include/gnu/stubs.h:7:27: gnu/stubs-32.h: No such file or directory
In file included from /usr/include/features.h:345,
                 from /usr/include/sys/io.h:22,
                 from test.c:14:
/usr/include/gnu/stubs.h:7:27: gnu/stubs-32.h: No such file or directory
make: *** [reloc.o] Error 1
make: *** Waiting for unfinished jobs....
make: *** [test.o] Error 1




Comment 5


Michal Januszewski (RETIRED)






          2008-07-15 22:20:43 UTC
        

I've just looked into it somewhat more deeply (I'm not very familiar with hardened) and apparently it's simply impossible to install memtest86+ (or any other intrinsically 32-bit package) on a non-multilib system. 

In fact, if you upgrade your profile to hardened/linux/amd64/2008.0/no-multilib, memtest86+ will automatically become masked.




Comment 6


Michal Januszewski (RETIRED)






          2008-07-18 22:54:18 UTC
        

Closing as WORKSFORME because of the solution presented in comment #5.




Comment 7


Jeroen Roovers (RETIRED)






          2014-10-10 07:49:05 UTC
        

*** Bug 524920 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

