Title: 253569 – cross-sparc-unknown-linux-gnu-gcc-4.1.2 stage2 fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=253569

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 253569
cross-sparc-unknown-linux-gnu-gcc-4.1.2 stage2 fails
Last modified: 2009-01-09 15:41:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 253569 
      - cross-sparc-unknown-linux-gnu-gcc-4.1.2 stage2 fails


Summary:
cross-sparc-unknown-linux-gnu-gcc-4.1.2 stage2 fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-01-03 15:38 UTC by Alex Buell





      Modified:
    
2009-01-09 15:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alex Buell





          2009-01-03 15:38:25 UTC
        

Cross compiling the sparc toolchain on AMD64 always fails at the GCC stage 2 build.

Reproducible: Always

Steps to Reproduce:
1. crossdev -S -t sparc

Actual Results:  
 crossdev -S -t sparc
------------------------------------------------------------------------------------------------------------------------------------
 * Host Portage ARCH:     amd64
 * Target Portage ARCH:   sparc
 * Target System:         sparc-unknown-linux-gnu
 * Stage:                 4 (C/C++ compiler)

 * binutils:              binutils-[stable]
 * gcc:                   gcc-[stable]
 * headers:               linux-headers-[stable]
 * libc:                  glibc-[stable]

 * PORTDIR_OVERLAY:       /usr/local/portage
 * PORT_LOGDIR:           /var/log/portage
 * PKGDIR:                /usr/portage/packages/cross/sparc-unknown-linux-gnu
 * PORTAGE_TMPDIR:        /var/tmp/cross/sparc-unknown-linux-gnu
  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -  _  -  ~  -
 * Forcing the latest versions of {binutils,gcc}-config/gnuconfig ...                                                         [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-binutils.log
 * Emerging cross-binutils ...                                                                                                [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-linux-headers-quick.log
 * Emerging cross-linux-headers-quick ...                                                                                     [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-glibc-headers.log
 * Emerging cross-glibc-headers ...                                                                                           [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-gcc-stage1.log
 * Emerging cross-gcc-stage1 ...                                                                                              [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-linux-headers.log
 * Emerging cross-linux-headers ...                                                                                           [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-glibc.log
 * Emerging cross-glibc ...                                                                                                   [ ok ]
 * Log: /var/log/portage/cross-sparc-unknown-linux-gnu-gcc-stage2.log
 * Emerging cross-gcc-stage2 ...

 * gcc failed :(
 * If you file a bug, please attach the following logfiles:
 * /var/log/portage/cross-sparc-unknown-linux-gnu-info.log
 * /var/log/portage/cross-sparc-unknown-linux-gnu-gcc-stage2.log


Expected Results:  
If successful I should have had a full C and C++ sparc cross compiler running on my AMD64 box. As it stands, I only have the ability to build C programs but not C++ programs :S

/var/log/portage/cross-sparc-unknown-linux-gnu-gcc-stage2.log:
/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/build/./gcc/xgcc -B/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/build/./gcc/ -B/usr/sparc-unknown-linux-gnu/bin/ -B/usr/sparc-unknown-linux-gnu/lib/ -isystem /usr/sparc-unknown-linux-gnu/include -isystem /usr/sparc-unknown-linux-gnu/sys-include -O2  -O2 -O2 -pipe  -DIN_GCC -DCROSS_COMPILE   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fPIC -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2 -D__GCC_FLOAT_NOT_NEEDED  -I. -I. -I/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/gcc-4.1.2/gcc -I/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/gcc-4.1.2/gcc/. -I/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/gcc-4.1.2/gcc/../include -I/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/gcc-4.1.2/gcc/../libcpp/include  -DL_udivdi3 -fvisibility=hidden -DHIDE_EXPORTS -fexceptions -fnon-call-exceptions -c /var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/gcc-4.1.2/gcc/libgcc2.c -o libgcc/./_udivdi3.o
make[3]: *** [libgcc/./_eprintf.o] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/build/gcc'
make[2]: *** [libgcc.a] Error 2
rm gfortran.pod
make[2]: Leaving directory `/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/build/gcc'
make[1]: *** [all-gcc] Error 2
make[1]: Leaving directory `/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/work/build'
make: *** [all] Error 2
 *
 *
 * ERROR: cross-sparc-unknown-linux-gnu/gcc-4.1.2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4708:  Called toolchain_src_compile
 *             environment, line 5226:  Called gcc_src_compile
 *             environment, line 3025:  Called gcc_do_make
 *             environment, line 2845:  Called die
 * The specific snippet of code:
 *       emake LDFLAGS="${LDFLAGS}" STAGE1_CFLAGS="${STAGE1_CFLAGS}" LIBPATH="${LIBPATH}" BOOT_CFLAGS="${BOOT_CFLAGS}" ${GCC_MAKE_TARGET} || die "emake failed with ${GCC_MAKE_TARGET}";
 *  The die message:
 *   emake failed with all
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/temp/environment'.
 * This ebuild is from an overlay: '/usr/local/portage/'
 *

>>> Failed to emerge cross-sparc-unknown-linux-gnu/gcc-4.1.2, Log file:

>>>  '/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/temp/build.log'

 * Messages for package cross-sparc-unknown-linux-gnu/gcc-4.1.2:
 *
 * ERROR: cross-sparc-unknown-linux-gnu/gcc-4.1.2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 4708:  Called toolchain_src_compile
 *             environment, line 5226:  Called gcc_src_compile
 *             environment, line 3025:  Called gcc_do_make
 *             environment, line 2845:  Called die
 * The specific snippet of code:
 *       emake LDFLAGS="${LDFLAGS}" STAGE1_CFLAGS="${STAGE1_CFLAGS}" LIBPATH="${LIBPATH}" BOOT_CFLAGS="${BOOT_CFLAGS}" ${GCC_MAKE_TARGET} || die "emake failed with ${GCC_MAKE_TARGET}";
 *  The die message:
 *   emake failed with all
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/cross/sparc-unknown-linux-gnu/portage/cross-sparc-unknown-linux-gnu/gcc-4.1.2/temp/environment'.
 * This ebuild is from an overlay: '/usr/local/portage/'
 *




Comment 1


Jeroen Roovers (RETIRED)






          2009-01-03 20:55:20 UTC
        

Which version of crossdev do you have?




Comment 2


Alex Buell





          2009-01-03 21:42:20 UTC
        

Version of crossdev: 0.9.18-r10 

 emerge --info
Portage 2.1.6.4 (default/linux/amd64/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.26-gentoo-r4 x86_64)
=================================================================
System uname: Linux-2.6.26-gentoo-r4-x86_64-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_4200+-with-glibc2.2.5
Timestamp of tree: Fri, 02 Jan 2009 11:45:02 +0000
distcc 3.0 x86_64-pc-linux-gnu [disabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7-r1, 2.1.6-r1
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/cmake:      2.4.6-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=athlon64 -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=athlon64 -msse3"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.bytemark.co.uk/gentoo/ http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/ http://mirror.qubenet.net/mirror/gentoo/ http://gentoo.virginmedia.com/ "
LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X Xaw3d aac aalib alsa amd64 aspell berkdb bluetooth branding bzip2 cairo cdr cli cracklib crypt css ctype cups dhcp dri dvd dvdr dvdread emboss encode evo exif fam firefox flac fortran gd gdbm gif glitz glut glx gpm gtk gtk2 hunspell iconv imagemagick imap ipv6 isdnlog java jbig jpeg kerberos kqemu lcms logrotate mad mbox menubar midi mikmod mmx motif mozdevelop mp3 mpeg mudflap multilib multiuser mysql ncurses nethack netpbm nls nptl nptlonly nsplugin offensive ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3support quicktime readline reflection sdk sdl session sni spell spl sse sse2 ssl startup-notification svg sysfs tcpd tiff timidity truetype unicode usb utf8 vorbis xface xinerama xml xorg xscreensaver xsl xulrunner xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="ati radeonhd vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 3


SpanKY






          2009-01-09 07:03:42 UTC
        

use gcc-4.3.2




Comment 4


Alex Buell





          2009-01-09 10:19:25 UTC
        

Why should I have to use gcc 4.3.2? It's not stable is it? 




Comment 5


SpanKY






          2009-01-09 15:41:57 UTC
        

i generally only look at cross-compiling issues with the latest version.  feel free to debug older ones and post patches.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

