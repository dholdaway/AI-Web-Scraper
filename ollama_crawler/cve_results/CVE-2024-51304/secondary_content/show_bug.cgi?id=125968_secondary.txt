Title: 125968 – x11-libs/qt-3.3.4-r8  fails due to Xrender
URL: https://bugs.gentoo.org/show_bug.cgi?id=125968

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125968
x11-libs/qt-3.3.4-r8  fails due to Xrender
Last modified: 2006-03-31 09:24:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125968 
      - x11-libs/qt-3.3.4-r8  fails due to Xrender


Summary:
x11-libs/qt-3.3.4-r8  fails due to Xrender
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-12 11:50 UTC by Jeff Wiegley





      Modified:
    
2006-03-31 09:24 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jeff Wiegley





          2006-03-12 11:50:09 UTC
        

Is this distribution actually suppose to be installable?? I wonder.
I don't mind the compile time necessary when the install isn't broken
but for the past several months every amd64 installation I try to install
fails during the "emerge -e system" stage on some various broken
dependency.

This time it's due to x11-libs/qt. Looks like the ebuild for qt specifies
a need for libXrender and it isn't found so the qt compile halts. (Last time
it was links)

For the other broken installs I can usually find the offending missing
package, manually emerge it and then let an emerge --resume continue.

However, libXrender is package masked. If I put it in package.unmask and
try to manually emerge it I get another warning about the need of another,
package mask of a major X11 library.  Which leads me to believe that if
I try to install qt I will wind up installing an entire development branch
of X which clearly is not ready to be beta tested by the likes of me.

So my questions are:
   1) What do I due to get around this qt/Xrender bug this time?

   2) Am I suppose to be specifying my final desired USE flags during
      the installation or should I just keep them the absolute bare
      minimum? It seems that you would want the system tailored to you
      intended use from the very start. However, it always seems to
      be my USE flags that is pulling in several hundred packages for
      system and this leads to a high probability (100%) that I catch
      some random roken dependency during every single installation.

      For instance... Why is emerge -e system bringing in X, qt, links,
      java???? None of these seem to me to be "base system" applications.

   3) What sort of damage is done if I --skip the installation of qt so
      that I can get a bootable machine? I can deal with X, graphics and
      eye candy later. I'm guessing a lot of problems since tons of stuff
      still needs to be compiled and probably requires qt.

Anyhow, While I sit with a useless server, unable to be installed I
would appreciate it if somebody more knowledgable than I can read the
following diagnostics and tell me how to get past the install stage.

Here's the emerge attempt and errors about trying to install qt:
========================================================================
>>> emerge (1 of 83) x11-libs/qt-3.3.4-r8 to /
>>> md5 files   ;-) qt-3.3.5.ebuild
>>> md5 files   ;-) qt-3.3.4-r8.ebuild
>>> md5 files   ;-) qt-4.1.0-r2.ebuild
>>> md5 files   ;-) qt-4.1.1.ebuild
>>> md5 files   ;-) qt-4.1.0-r1.ebuild
>>> md5 files   ;-) qt-3.3.5-r1.ebuild
>>> md5 files   ;-) qt-3.3.4-r9.ebuild
>>> md5 files   ;-) files/0001-dnd_optimization.patch
>>> md5 files   ;-) files/0037-dnd-timestamp-fix.patch
>>> md5 files   ;-) files/0002-dnd_active_window_fix.patch
>>> md5 files   ;-) files/digest-qt-3.3.5
>>> md5 files   ;-) files/digest-qt-4.1.1
>>> md5 files   ;-) files/qt4-nomkdir.patch
>>> md5 files   ;-) files/qt-3.3.4-0047-fix-kmenu-widget.diff
>>> md5 files   ;-) files/digest-qt-3.3.4-r8
>>> md5 files   ;-) files/digest-qt-3.3.4-r9
>>> md5 files   ;-) files/digest-qt-3.3.5-r1
>>> md5 files   ;-) files/qt-3.3.5-immodule.patch
>>> md5 files   ;-) files/qt-3.3.4-macos.patch
>>> md5 files   ;-) files/qt-3.3.4-gcc4-volatile.patch
>>> md5 files   ;-) files/qt-4.1.0-debug-and-release.diff
>>> md5 files   ;-) files/qt-4.1.0-configure-no-mysql.diff
>>> md5 files   ;-) files/qt-3.3.5-uic-fix.patch
>>> md5 files   ;-) files/qt-3.3.4-immodule-focus.patch
>>> md5 files   ;-) files/qt-ulibc.patch
>>> md5 files   ;-) files/qt-3.3.5-macos.patch
>>> md5 files   ;-) files/qt-3.3.4-qclipboard-hack.patch
>>> md5 files   ;-) files/qt-3.3.4-gcc4.patch
>>> md5 files   ;-) files/qt-3.3.4-0051-qtoolbar_77047.patch
>>> md5 files   ;-) files/0038-dragobject-dont-prefer-unknown.patch
>>> md5 files   ;-) files/digest-qt-4.1.0-r1
>>> md5 files   ;-) files/digest-qt-4.1.0-r2
>>> md5 src_uri ;-) qt-x11-free-3.3.4.tar.bz2
QA Notice: USE Flag 'kernel_linux' not in IUSE for x11-libs/qt-3.3.4-r8
>>> Unpacking source...
>>> Unpacking qt-x11-free-3.3.4.tar.bz2 to /var/tmp/portage/qt-3.3.4-r8/work
 * Applying qt-3.3.4-qclipboard-hack.patch ...                            [ ok ]
 * Applying 0001-dnd_optimization.patch ...                               [ ok ]
 * Applying 0002-dnd_active_window_fix.patch ...                          [ ok ]
 * Applying 0037-dnd-timestamp-fix.patch ...                              [ ok ]
 * Applying 0038-dragobject-dont-prefer-unknown.patch ...                 [ ok ]
 * Applying qt-3.3.4-0051-qtoolbar_77047.patch ...                        [ ok ]
 * Applying qt-3.3.4-0047-fix-kmenu-widget.diff ...                       [ ok ]
 * Applying qt-3.3.4-gcc4.patch ...                                       [ ok ]
 * Applying qt-3.3.4-gcc4-volatile.patch ...                              [ ok ]
 * Applying qt-ulibc.patch ...                                            [ ok ]
>>> Source unpacked.
IBASE auto-detection...
  Could not find libgds.* anywhere in /lib /usr/lib /usr/lib64 /usr/lib64/mysql
IBASE disabled.
MySQL auto-detection...
  Could not find libmysqlclient.* anywhere in /lib /usr/lib /usr/lib64 /usr/lib64/mysql
MySQL disabled.
ODBC auto-detection...
  Could not find libodbc.* anywhere in /lib /usr/lib /usr/lib64 /usr/lib64/mysql
ODBC disabled.
PostgreSQL auto-detection...
  Could not find libpq.* anywhere in /lib /usr/lib /usr/lib64 /usr/lib64/mysql
PostgreSQL disabled.
NIS auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Found nsl lib in /usr/lib64
  Found rpcsvc/ypclnt.h in /usr/include
  Found rpcsvc/yp_prot.h in /usr/include
NIS enabled.
CUPS auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Found cups lib in /usr/lib64
  Found cups/cups.h in /usr/include
CUPS enabled.
OpenGL auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Could not find GLU lib anywhere in  /usr/lib64 /usr/lib64/mysql /usr/X11R6/lib64 /usr/X11R6/lib64 /usr/shlib /usr/lib /lib
OpenGL disabled.
Xcursor auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Could not find Xcursor lib anywhere in  /usr/lib64 /usr/lib64/mysql /usr/X11R6/lib64 /usr/shlib /usr/lib /lib
Xcursor disabled.
XRandR auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Could not find XRandR lib anywhere in  /usr/lib64 /usr/lib64/mysql /usr/X11R6/lib64 /usr/shlib /usr/lib /lib
XRandR disabled.
XRender auto-detection... (-L/usr/lib64 -L/usr/lib64/mysql -I/usr/include/mysql)
  Could not find XRender lib anywhere in  /usr/lib64 /usr/lib64/mysql /usr/X11R6/lib64 /usr/shlib /usr/lib /lib
XRender disabled.
XRender support cannot be enabled due to functionality tests!
 Turn on verbose messaging (-v) to ./configure to see the final report.
 If you believe this message is in error you may use the continue
 switch (-continue) to ./configure to continue.

!!! ERROR: x11-libs/qt-3.3.4-r8 failed.
!!! Function src_compile, Line 184, Exitcode 101
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.

Here's my emerge --info
===============================================================================

Portage 2.0.54 (default-linux/amd64/2006.0, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r5 x86_64)
=================================================================
System uname: 2.6.15-gentoo-r5 x86_64 Intel(R) Pentium(R) 4 CPU 3.20GHz
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=nocona -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://gentoo.netnitco.net "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://localhost:4040/gentoo-portage"
USE="amd64 X Xaw3d acpi alsa apache2 arts avi bash-completion berkdb bitmap-fonts bzip2 cdparanoia cdr crypt cups doc dri dvd dvdr eds emacs emboss emul-linux-x86 encode examples expat foomaticdb fortran gif gnome gpm gstreamer gtk2 imlib innodb ipv6 java javascript jpeg kde kdeenablefinal lcms ldap lzw lzw-tiff mad mmap mng mozilla mp3 mpeg mysql ncurses nis nls nptl offensive ogg oggvorbis opengl pam pdf pdflib perl php png posix python qt quicktime readline samba sdl sharedmem snmp sockets spell ssl sysvipc tcpd threads tiff truetype truetype-fonts type1-fonts udev usb vorbis xml xml2 xpm xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Caleb Tennis (RETIRED)






          2006-03-12 12:49:04 UTC
        

Qt requires X

If you don't want X, you don't need Qt.

I assume you have xorg-x11 installed ?

i think you'll get much more responsive help if you get on IRC in #gentoo or something like that.  Seemingly something else is wrong here.




Comment 2


Caleb Tennis (RETIRED)






          2006-03-12 12:54:16 UTC
        

Curious, why are you using emerge -e ?

Best as I can guess, some package you have part of your base system relies on Qt, which is why this whole dependency chain gets picked up.  

All Qt needs is x11-base/xorg-x11.

I'm a little baffled why Qt finds things like "cups" and "nis" installed, if this is a new base system emerge?  Why are those things already installed?




Comment 3


Caleb Tennis (RETIRED)






          2006-03-31 09:24:06 UTC
        

no response









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

