Title: 829962 – kde-apps/kajongg-21.12.0 w/ dev-python/typing-extensions-4.0.0(?): CMake Error: did not find python3-twisted
URL: https://bugs.gentoo.org/show_bug.cgi?id=829962

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 829962
kde-apps/kajongg-21.12.0 w/ dev-python/typing-extensions-4.0.0(?): CMake Error: did not find python3-twisted
Last modified: 2021-12-30 16:49:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 829962 
      - kde-apps/kajongg-21.12.0 w/ dev-python/typing-extensions-4.0.0(?): CMake Error: did not find python3-twisted


Summary:
kde-apps/kajongg-21.12.0 w/ dev-python/typing-extensions-4.0.0(?): CMake Erro...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-12-25 13:18 UTC by Guy





      Modified:
    
2021-12-30 16:49 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



jstein
mgmadden
python
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




kajongg build log

              (build.log,5.51 KB,
                text/plain)

            
2021-12-25 13:18 UTC,

            Guy




Details





emerge info

              (emerge.inf,6.05 KB,
                text/plain)

            
2021-12-28 03:50 UTC,

            Geoff Madden




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Guy





          2021-12-25 13:18:42 UTC
        

Created attachment 760197 [details]
kajongg build log

This appears to be similar to #412563 from Dec 2012. Possible regression?

-- The following REQUIRED packages have not been found:

 * Twisted (required version >= 16.6.0)




Comment 1


Andreas Sturmlechner






          2021-12-25 14:33:18 UTC
        

Missing `emerge --info`, we also need `equery u twisted`.

> * dependency graph for kde-apps/kajongg-21.12.0
> `--  kde-apps/kajongg-21.12.0  ~amd64 
> ...
>   `--  dev-python/twisted-21.7.0  (>=dev-python/twisted-16.6.0) amd64  [python_targets_python3_8(-)]




Comment 2


Guy





          2021-12-26 01:55:12 UTC
        

# equery u twisted
[ Legend : U - final flag setting for installation]
[        : I - package is installed with flag     ]
[ Colors : set, unset                             ]
 * Found these USE flags for dev-python/twisted-21.7.0:
 U I
 - - conch                     : include Twisted SSHv2 implementation 
 + + crypt                     : Add support for encryption -- using mcrypt or gpg where applicable
 - - http2                     : include http2 support 
 - - python_targets_python3_10 : Build with Python 3.10
 - - python_targets_python3_8  : Build with Python 3.8
 + + python_targets_python3_9  : Build with Python 3.9
 - - serial                    : include serial port support 
 - - test                      : Enable dependencies and/or preparations necessary to run tests (usually controlled by FEATURES=test but can be toggled independently)

# emerge --info
Portage 3.0.30 (python 3.9.9-final-0, default/linux/amd64/17.1/desktop/plasma, gcc-11.2.1, glibc-2.34-r4, 5.14.12-gentoo x86_64)
=================================================================
System uname: Linux-5.14.12-gentoo-x86_64-AMD_Ryzen_9_3900X_12-Core_Processor-with-glibc2.34
KiB Mem:    65728916 total,  34693716 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Sat, 25 Dec 2021 04:30:01 +0000
Head commit of repository gentoo: 717eee35b51b29f2c125147c463871db6d3ae18e
sh bash 5.1_p12
ld GNU ld (Gentoo 2.37_p1 p1) 2.37
distcc 3.4 x86_64-pc-linux-gnu [disabled]
app-misc/pax-utils:        1.3.3::gentoo
app-shells/bash:           5.1_p12::gentoo
dev-java/java-config:      2.3.1::gentoo
dev-lang/perl:             5.34.0-r6::gentoo
dev-lang/python:           2.7.18_p13::gentoo, 3.9.9::gentoo, 3.10.1-r1::gentoo
dev-lang/rust:             1.57.0::gentoo
dev-util/cmake:            3.22.1::gentoo
dev-util/meson:            0.60.2-r1::gentoo
sys-apps/baselayout:       2.8::gentoo
sys-apps/openrc:           0.44.10::gentoo
sys-apps/sandbox:          2.29::gentoo
sys-devel/autoconf:        2.13-r1::gentoo, 2.71-r1::gentoo
sys-devel/automake:        1.16.5::gentoo
sys-devel/binutils:        2.37_p1-r1::gentoo
sys-devel/binutils-config: 5.4::gentoo
sys-devel/clang:           13.0.0::gentoo
sys-devel/gcc:             11.2.1_p20211127::gentoo
sys-devel/gcc-config:      2.5-r1::gentoo
sys-devel/libtool:         2.4.6-r6::gentoo
sys-devel/llvm:            12.0.1::gentoo, 13.0.0::gentoo
sys-devel/make:            4.3::gentoo
sys-kernel/linux-headers:  5.15-r1::gentoo (virtual/os-headers)
sys-libs/glibc:            2.34-r4::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-jobs: 1
    sync-rsync-extra-opts: --timeout=15
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-max-age: 24

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 PUEL AdobeFlash-10.3 AdobeFlash-11.x Oracle-BCLA-JavaSE google-chrome"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=znver2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=znver2 -O2 -pipe"
DISTDIR="/var/cache/distfiles"
EMERGE_DEFAULT_OPTS="--quiet-build --with-bdeps=y --keep-going"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-march=znver2 -O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs binpkg-multi-instance buildpkg buildpkg-live config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-march=znver2 -O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en-US"
MAKEOPTS="-j25"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=15"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
SHELL="/bin/bash"
USE="X a52 aac aalib acl acpi activities alsa amd64 amr bluetooth bluray branding bzip2 cairo cdda cdr chm cjk cli corefonts crypt cups curl dbus declarative dri drm dts dvd dvdr elogind emboss encode exif ffmpeg fftw flac fontconfig fortran fuse gd gdbm gif gimp gpm gstreamer gtk gui hdri iconv icu inotify ipv6 java jpeg kde kerberos kipi kwallet lcms libglvnd libnotify libtirpc mad midi mjpeg mng mp3 mp4 mpeg multilib ncurses nls nptl ntfs nvidia ogg opengl openmp pam pango pcre pdf perl plasma png policykit postscript ppds pulseaudio python qml qt5 rar raw readline ruby samba sasl scanner sdl seccomp semantic-desktop sensord spell split-usr ssl startup-notification svg syslog theora tiff truetype udev udisks unicode upower usb vorbis wayland widgets windbind wxwidgets x264 xattr xcb xinerama xml xorg xv xvid zeroconf zip zlib" ABI_X86="32 64" ADA_TARGET="gnat_2020" ALSA_CARDS="hda-intel" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif slotmem_shm so speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2" ELIBC="glibc" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="evdev" KERNEL="linux" LLVM_TARGETS="NVPTX X86" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres12 postgres13" PYTHON_SINGLE_TARGET="python3_9" PYTHON_TARGETS="python3_9" QEMU_SOFTMMU_TARGETS="i386 x86_64" RUBY_TARGETS="ruby26 ruby27 ruby30" SANE_BACKENDS="net bh escl xerox_mfp" USERLAND="GNU" VIDEO_CARDS="nv"
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LC_ALL, LD, LEX, LFLAGS, LIBTOOL, MAKE, MAKEFLAGS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, RANLIB, READELF, RUSTFLAGS, SIZE, STRINGS, STRIP, YACC, YFLAGS




Comment 3


Guy





          2021-12-28 02:29:55 UTC
        

I finished @world updates on 4 systems. kde-apps/kajongg-21.12.0 failed on all four,

Upon inspection, I realized dev-python/twisted-21.7.0 was not included (did not need to be updated) in the @world updates. I re-emerge dev-python/twisted separately and tried to emerge kde-apps/kajongg-21.12.0 again. kde-apps/kajongg-21.12.0 still failed.




Comment 4


Geoff Madden





          2021-12-28 03:50:20 UTC
        

Created attachment 760604 [details]
emerge info




Comment 5


Geoff Madden





          2021-12-28 03:54:11 UTC
        

Same problem here I additionally added appstream reemerged twisted but failure still . It appears cmake may be the problem. will try with an earlier version of same.
GEoff




Comment 6


Geoff Madden





          2021-12-28 04:09:27 UTC
        

That worked kajongg compiled up ok with cmake 3.21.4




Comment 7


Sam James









          2021-12-28 04:15:39 UTC
        

(In reply to Geoff Madden from comment #6)
> That worked kajongg compiled up ok with cmake 3.21.4

Really helpful, thanks for figuring that bit out. Sadly don't think I can reproduce.




Comment 8


Guy





          2021-12-28 17:35:56 UTC
        

(In reply to Geoff Madden from comment #6)
> That worked kajongg compiled up ok with cmake 3.21.4

I tried this on two of my systems and it did not work for me.




Comment 9


Guy





          2021-12-28 20:24:34 UTC
        

(In reply to Guy from comment #8)
> (In reply to Geoff Madden from comment #6)
> > That worked kajongg compiled up ok with cmake 3.21.4
> 
> I tried this on two of my systems and it did not work for me.

As a data point:

The remaining two systems finished their respective @world updates. I also tried cmake 3.21.4 with them. One completed kajongg successfully and the other did not.

Of the 4 systems total, the only one where downgrading cmake allowed kajongg to successfully complete was the oldest installation with the longest history of and the most installed packages. This install still retains /usr/portage as the home of the portage tree.




Comment 10


Guy





          2021-12-29 15:34:03 UTC
        

This appears to be resolved.

I don't know what fixed it. I updated the portage tree again and re-did emerge @world again. All 4 PCs completed @world with no problems. It isn't obvious to me which updated package resolved this issue.




Comment 11


Sam James









          2021-12-29 23:25:42 UTC
        

hypothesis: typing-extensions-4.0.0 was broken and I bumped it a few days ago. For a few weeks(?), typing-extensions was broken, and would've broken import of some applications for older Python impls.

I bet this was it: https://gitweb.gentoo.org/repo/gentoo.git/tree/dev-python/twisted/twisted-21.7.0.ebuild#n31 (Twisted needs typing-extensions).

@geoff, is it ok for you now?




Comment 12


Geoff Madden





          2021-12-30 06:29:11 UTC
        

(In reply to Sam James from comment #11)
> hypothesis: typing-extensions-4.0.0 was broken and I bumped it a few days
> ago. For a few weeks(?), typing-extensions was broken, and would've broken
> import of some applications for older Python impls.
> 
> I bet this was it:
> https://gitweb.gentoo.org/repo/gentoo.git/tree/dev-python/twisted/twisted-21.
> 7.0.ebuild#n31 (Twisted needs typing-extensions).
> 
> @geoff, is it ok for you now?

just completed the build of kajongg successfully,on checking the system I found typing-extensions was installed at some time.So I guess that helped the compile.




Comment 13


Andreas Sturmlechner






          2021-12-30 16:48:53 UTC
        

I was never able to reproduce this either.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

