Title: 498204 – dev-java/icedtea doesn't satisfy virtual/jre
URL: https://bugs.gentoo.org/show_bug.cgi?id=498204

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 498204
dev-java/icedtea doesn't satisfy virtual/jre
Last modified: 2015-06-11 22:00:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 498204 
      - dev-java/icedtea doesn't satisfy virtual/jre


Summary:
dev-java/icedtea doesn't satisfy virtual/jre
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Java

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-01-15 21:19 UTC by A. Person





      Modified:
    
2015-06-11 22:00 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dev-portage









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


A. Person





          2014-01-15 21:19:15 UTC
        

# eselect java-vm list
Available Java Virtual Machines:
[1] icedtea-6 system-vm

# emerge -pvDuNt world
[nomerge ] [masked java app]
[nomerge ] virtual/jre-1.6.0-r1:1.6
[nomerge ] virtual/jdk-1.6.0-r2:1.6
[ebuild N ] dev-java/icedtea-bin-6.1.12.7:6 USE="X alsa cups nsplugin -cjk -doc -examples -source" 0 kB

dev-java/icedtea-6.1.12.7 (installed) should satisfy the app's java dep. The app's ebuild says:

DEPEND=">=virtual/jre-1.6"




Comment 1


Ralph Sennhauser (RETIRED)






          2014-01-17 19:03:35 UTC
        

What is this masked java app?

Please attach "emerge --info =dev-java/icedtea-6.1.12.7" and the unmodified full length output of "emerge -pvDuNt world", thanks.




Comment 2


A. Person





          2014-01-24 17:40:42 UTC
        

Would it be alright if I keep the java app masked?  It's a privacy concern.

# emerge --info =dev-java/icedtea-6.1.12.7
Portage 2.2.7 (default/linux/amd64/13.0/desktop, gcc-4.7.3, glibc-2.17, 3.12.6-hardened-r4 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-3.12.6-hardened-r4-x86_64-Intel-R-_Core-TM-_i5-2467M_CPU_@_1.60GHz-with-gentoo-2.2
KiB Mem:     3348836 total,   2243544 free
KiB Swap:    2097148 total,   2097148 free
Timestamp of tree: Fri, 24 Jan 2014 08:30:01 +0000
ld GNU ld (GNU Binutils) 2.23.2
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.7.5-r3, 3.3.3
dev-util/cmake:           2.8.11.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.13.4
sys-devel/binutils:       2.23.2
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo multimedia mpd elementary x-portage
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA MakeMKV-EULA AdobeFlash-11.x google-chrome"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=native -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildpkg config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/multimedia /var/lib/layman/mpd /var/lib/layman/elementary /usr/local/portage"
USE="X a52 aac acl acpi alsa amd64 archive berkdb branding bzip2 cairo cdda cdr cli consolekit cracklib crypt cups cxx dbus dri dts dvd dvdr emboss encode exif faac fam ffmpeg firefox flac fontconfig fortran fuse gdbm gif gphoto2 gpm gstreamer gtk hardened iconv icu ios jack jpeg lcms libnotify mad mmx mmxext mng modules mp3 mp4 mpeg multilib ncurses nptl nsplugin odf ogg opengl openmp pam pango pcre pdf png policykit ppds qt3support qt4 raw readline sdl session spell sse sse2 ssl ssse3 startup-notification svg tcpd tiff truetype udev udisks unicode upower usb vaapi vim-syntax vorbis wxwidgets x264 xcb xml xv xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en_US en" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" RUBY_TARGETS="ruby19 ruby18" USERLAND="GNU" VIDEO_CARDS="intel i915" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, SYNC, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

dev-java/icedtea-6.1.12.7 was built with the following:
USE="X alsa cups nss source -cacao -cjk -debug -doc -examples -javascript -jbootstrap -nsplugin -pax_kernel -pulseaudio -systemtap -test -webstart"




Comment 3


Ralph Sennhauser (RETIRED)






          2014-01-24 18:24:45 UTC
        

(In reply to A. Person from comment #2)
> Would it be alright if I keep the java app masked?  It's a privacy concern.

A minimal test case ebuild would do. Right now I suspect an ebuild or Portage bug, maybe vdb corruption. Also, while possible 'DEPEND=">=virtual/jre-1.6"' is rather unlikely.

The alternative to providing information is to debug the issue yourself, once you know what's going on it shouldn't be all that hard to file a far more specific bug.

Just to be clear, icedtea does satisfy virtual/jre by all means.




Comment 4


A. Person





          2014-01-24 18:53:21 UTC
        

OK here it is:

# emerge -pvDuNt world

These are the packages that would be merged, in reverse order:

Calculating dependencies... done!
[nomerge       ] net-p2p/multibit-0.5.16 
[nomerge       ]  virtual/jre-1.6.0-r1:1.6 
[nomerge       ]   virtual/jdk-1.6.0-r2:1.6 
[ebuild  N     ]    dev-java/icedtea-bin-6.1.12.7:6  USE="X alsa cups nsplugin -cjk -doc -examples -source" 0 kB
[ebuild  N     ]     media-libs/jpeg-6b-r9:62  0 kB

Total: 2 packages (2 new), Size of downloads: 0 kB




Comment 5


Ralph Sennhauser (RETIRED)






          2014-01-24 19:48:48 UTC
        

Tho the ebuild is problematic from a QA point of view, still doesn't explain what you see.

Do you happen to have your own virtual/jdk ebuild in your overlay?

What happens when you mask icedtea-bin?




Comment 6


A. Person





          2014-01-25 15:33:11 UTC
        

I don't have virtual/jdk in my overlay.  The problem disappears if I mask dev-java/icedtea-bin.




Comment 7


Ralph Sennhauser (RETIRED)






          2014-01-25 19:52:13 UTC
        

(In reply to A. Person from comment #6)
> I don't have virtual/jdk in my overlay.  The problem disappears if I mask
> dev-java/icedtea-bin.

With that we have pretty much narrowed it down to Portages handling of "|| ()" dependencies.

@portage, would you have an idea why net-p2p/multibit would pull in icedtea-bin:6 even tho icedtea:6 is installed?




Comment 8


Sebastian Luther (few)





          2014-01-25 20:08:13 UTC
        

(In reply to Ralph Sennhauser from comment #7)
> (In reply to A. Person from comment #6)
> 
> With that we have pretty much narrowed it down to Portages handling of "||
> ()" dependencies.
> 
> @portage, would you have an idea why net-p2p/multibit would pull in
> icedtea-bin:6 even tho icedtea:6 is installed?

That looks indeed odd.

@reporter: Please attach the output of "emerge -pvDuNt world --debug".




Comment 9


James Le Cuirot






          2015-06-11 22:00:32 UTC
        

I'm going to close this as I have since straightened out some of the dependency weirdness that was going on and in this case, I think it may have been because you were running a stable system with an unstable VM installed. icedtea has never been marked stable whereas icedtea-bin has. It wasn't stated whether you had overriden dev-java/icedtea in package.accept_keywords but if you didn't, that might have been the cause.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

