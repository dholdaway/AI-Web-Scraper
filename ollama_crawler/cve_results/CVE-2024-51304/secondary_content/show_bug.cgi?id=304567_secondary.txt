Title: 304567 – app-emulation/virtualbox-modules-3.0.12 can't find linux include directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=304567

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 304567
app-emulation/virtualbox-modules-3.0.12 can't find linux include directory
Last modified: 2010-05-19 17:24:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 304567 
      - app-emulation/virtualbox-modules-3.0.12 can't find linux include directory


Summary:
app-emulation/virtualbox-modules-3.0.12 can't find linux include directory
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Hardened

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

The Gentoo Linux Hardened Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

314449

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2010-02-11 15:05 UTC by boris64





      Modified:
    
2010-05-19 17:24 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



de.techno









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emergeinfo.log,27.33 KB,
                text/plain)

            
2010-02-11 15:08 UTC,

            boris64




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


boris64





          2010-02-11 15:05:22 UTC
        

The kernel modules for virtualbox-ose can't be installed as
the installation does not find the linux include directory
(aka linux-headers(!?)).


Reproducible: Always

Steps to Reproduce:




Comment 1


boris64





          2010-02-11 15:05:51 UTC
        

[emerge output]
server20xx ~ # LC_ALL=C emerge virtualbox-modules

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ] app-emulation/virtualbox-modules-3.0.12  0 kB

Total: 1 package (1 new), Size of downloads: 0 kB


>>> Verifying ebuild manifests

>>> Emerging (1 of 1) app-emulation/virtualbox-modules-3.0.12
 * vbox-kernel-module-src-3.0.12.tar.bz2 RMD160 SHA1 SHA256 size ;-) ... [ ok ]
 * checking ebuild checksums ;-) ...                                     [ ok ]
 * checking auxfile checksums ;-) ...                                    [ ok ]
 * checking miscfile checksums ;-) ...                                   [ ok ]
 * CPV:  app-emulation/virtualbox-modules-3.0.12
 * REPO: gentoo
 * USE:  amd64 elibc_glibc kernel_linux multilib userland_GNU
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     2.6.32-hardened-r3-2k10+
>>> Unpacking source...
>>> Unpacking vbox-kernel-module-src-3.0.12.tar.bz2 to /tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work
>>> Source unpacked in /tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work
>>> Preparing source in /tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work ...
>>> Source prepared.
>>> Configuring source in /tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work ...
>>> Source configured.
>>> Compiling source in /tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work ...
ln: creating symbolic link `Module.symvers': File exists
 * Preparing vboxdrv module
make -j8 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- LDFLAGS= KERN_DIR=/usr/src/linux KERNOUT=/usr/src/linux all
*** Building 'vboxdrv' module ***
make[1]: Entering directory `/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work/vboxdrv'
Makefile:174: *** Error: unable to find the include directory for your current Linux kernel. Specify KERN_INCL=<directory> and run Make again.  Stop.
make[1]: Leaving directory `/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work/vboxdrv'
make: *** [all] Error 2
 * ERROR: app-emulation/virtualbox-modules-3.0.12 failed:
 *   Unable to emake HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- LDFLAGS=  KERN_DIR=/usr/src/linux KERNOUT=/usr/src/linux all
 *
 * Call stack:
 *     ebuild.sh, line   48:  Called src_compile
 *   environment, line 3553:  Called linux-mod_src_compile
 *   environment, line 2743:  Called die
 * The specific snippet of code:
 *               eval "emake HOSTCC=\"$(tc-getBUILD_CC)\"                                               CROSS_COMPILE=${CHOST}-                                                 LDFLAGS=\"$(get_abi_LDFLAGS)\"                             ${BUILD_FIXES}                                           ${BUILD_PARAMS}                                                 ${BUILD_TARGETS} " || die "Unable to emake HOSTCC="$(tc-getBUILD_CC)" CROSS_COMPILE=${CHOST}- LDFLAGS="$(get_abi_LDFLAGS)" ${BUILD_FIXES} ${BUILD_PARAMS} ${BUILD_TARGETS}";
 *
 * If you need support, post the output of 'emerge --info =app-emulation/virtualbox-modules-3.0.12',
 * the complete build log and the output of 'emerge -pqv =app-emulation/virtualbox-modules-3.0.12'.
 * The complete build log is located at '/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/temp/build.log'.
 * The ebuild environment file is located at '/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/temp/environment'.
 * S: '/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/work'

>>> Failed to emerge app-emulation/virtualbox-modules-3.0.12, Log file:

>>>  '/tmp/portage/portage/app-emulation/virtualbox-modules-3.0.12/temp/build.log'
[/emerge output]





Comment 2


boris64





          2010-02-11 15:08:13 UTC
        

Created attachment 219235 [details]
emerge --info




Comment 3


Jory A. Pratt






          2010-03-18 00:47:38 UTC
        

You will need to compile with userpriv disabled. Hardened sources automatically protects the image path now.




Comment 4


boris64





          2010-03-18 03:53:17 UTC
        

(In reply to comment #3)
> You will need to compile with userpriv disabled. Hardened sources automatically
> protects the image path now.
> 

Yay! Thank you.

Removed "userpriv" from FEATURES and compiling
virtualbox-modules works again.




Comment 5


Lars Wendler (Polynomial-C) (RETIRED)






          2010-05-19 17:24:01 UTC
        

*** Bug 314449 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

