Title: 585458 – =x11-libs/cairo-1.14.6[X]: missing dependency on x11-libs/libSM, x11-libs/libXt, and x11-libs/libXmu
URL: https://bugs.gentoo.org/show_bug.cgi?id=585458

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 585458
=x11-libs/cairo-1.14.6[X]: missing dependency on x11-libs/libSM, x11-libs/libXt, and x11-libs/libXmu
Last modified: 2017-03-05 17:32:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 585458 
      - =x11-libs/cairo-1.14.6[X]: missing dependency on x11-libs/libSM, x11-libs/libXt, and x11-libs/libXmu


Summary:
=x11-libs/cairo-1.14.6[X]: missing dependency on x11-libs/libSM, x11-libs/lib...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Alexandre Rostovtsev (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-06-09 12:30 UTC by Jocelyn Mayer





      Modified:
    
2017-03-05 17:32 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



itumaykin+gentoo
x11









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




failed build log when x11-libs/libSM x11-libs/libXt and x11-libs/libXmu are not installed

              (cairo-1.14.6_build.log,552.36 KB,
                text/plain)

            
2016-06-09 12:30 UTC,

            Jocelyn Mayer




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jocelyn Mayer





          2016-06-09 12:30:34 UTC
        

Created attachment 436974 [details]
failed build log when x11-libs/libSM x11-libs/libXt and x11-libs/libXmu are not installed

while trying to build =x11-libs/cairo-1.14.6 with the X USE flag set, I get a link failure complaining libSM, libXT and libXmu are missing.

# emerge --info
Portage 2.2.28 (python 3.4.3-final-0, default/linux/powerpc/ppc64/13.0/64bit-userland, gcc-4.9.3, glibc-2.3.4.20041102, 3.12.21-gentoo-r1-G5 ppc64)
=================================================================
System uname: Linux-3.12.21-gentoo-r1-G5-ppc64-PPC970FX,_altivec_supported-with-gentoo-2.2
KiB Mem:     1004992 total,    341036 free
KiB Swap:    2097148 total,   1992472 free
Timestamp of repository gentoo: Mon, 06 Jun 2016 02:30:01 +0000
sh bash 4.3_p42-r1
ld GNU ld (Gentoo 2.24 p1.4) 2.24
ccache version 2.3 [disabled]
app-shells/bash:          4.3_p42-r1::gentoo
dev-lang/perl:            5.8.6-r2::<unknown repository>
dev-lang/python:          2.7.10-r1::gentoo, 3.4.3-r1::gentoo
dev-util/ccache:          2.3::<unknown repository>
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.19.1::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::<unknown repository>, 2.69::gentoo
sys-devel/automake:       1.4_p6::<unknown repository>, 1.5::<unknown repository>, 1.6.3::<unknown repository>, 1.7.9-r1::<unknown repository>, 1.8.5-r3::<unknown repository>, 1.9.4::<unknown repository>, 1.11.6-r1::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            3.3.3-r3::<unknown repository>, 3.4.3-r1::<unknown repository>, 3.4.3.20050110::<unknown repository>, 4.9.3::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.3::gentoo (virtual/os-headers)
sys-libs/glibc:           2.3.4.20041102::<unknown repository>
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 0

ACCEPT_KEYWORDS="ppc64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="powerpc64-unknown-linux-gnu"
CC="/usr/powerpc64-unknown-linux-gnu/gcc-bin/4.9.3/gcc"
CFLAGS="-mcpu=powerpc64 -O2 -mmultiple -mstring -maltivec -mabi=altivec -pipe"
CHOST="powerpc64-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/X11/xkb /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXX="/usr/powerpc64-unknown-linux-gnu/gcc-bin/4.9.3/g++"
CXXFLAGS="-mcpu=powerpc64 -O2 -mmultiple -mstring -maltivec -mabi=altivec -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildsyspkg config-protect-if-modified ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.modulix.net/gentoo/ http://mirror.netcologne.de/gentoo/ http://gentoo.mirrors.ovh.net/gentoo-distfiles/ http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ http://mirror.leaseweb.com/gentoo/ http://mirror.bytemark.co.uk/gentoo/ http://mirror.eu.oneandone.net/linux/distributions/gentoo/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://tux.rainside.sk/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
LANG="C"
LC_ALL="C"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j 1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X Xaw3d a52 aac aalib acl adns aim alsa altivec ao apache2 apm audiofile avahi bash-completion bcmath berkdb bidi blas bluetooth branding bzip2 cairo calendar caps cdb cdda cddb cdparanoia cdr cgi cli cracklib crypt cscope ctype cups curl curlwrappers cvs cxx dbus dga djvu dri dts dv dvd dvdr eds emacs encode enscript evo exif expat fam fastcgi fbcon ffmpeg fftw filecaps flac fltk fontconfig fortran ftp gd gdbm geoip ggi gif gimp git glut gmp gnuplot gnutls gphoto2 gpm gps graphviz gsl gsm gstreamer gtk guile gzip iconv icq icu idn ieee1394 imagemagick imap imlib inotify introspection ipv6 jack javascript jingle jit jpeg jpeg2k ladspa lame lash latex lcms ldap libass libcaca libffi libnotify libsamplerate libwww lua lzma lzo m17n-lib mad maildir matroska mbox memlimit mhash mikmod mime mmap mms mng modplug modules motif mozilla mp3 mp4 mpeg mpi mplayer msn mtp musepack musicbrainz nas ncurses nls nntp nptl nsplugin ocaml odbc offensive ofx ogg openal openexr opengl osc oscar oss pam pcntl pcre pdf perl pie plotutils png policikit portaudio posix postgres postscript ppc64 ppds pulseaudio python quicktime raw rdesktop readline rss ruby samba sasl savedconfig sdl shorten simplexml skey slang slp smp sndfile snmp soap sockets sound sox speex spell ssl startup-notification static-libs subversion svg syslog sysvipc szip taglib tcl tcpd theora threads tidy tiff timidity tk truetype udev unicode upnp upnp-av upower usb v4l vcd vhosts vnc vorbis wavpack wddx wifi wmf wxwidgets x264 xattr xcb xcomposite xface xft xine xinerama xinetd xml xmlrpc xmp xmpp xosd xpm xscreensaver xv xvid yahoo yaz zeroconf zlib" ABI_PPC="64" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2 canon" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev keyboard linuxinput mouse void" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en fr" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="dummy fbdev nouveau nv v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Jocelyn Mayer





          2016-06-09 12:36:21 UTC
        

After merging 11-libs/libSM x11-libs/libXt and x11-libs/libXmu, I'm able to merge =x11-libs/cairo-1.14.6 with no issue.




Comment 2


Chí-Thanh Christopher Nguyễn






          2016-06-09 14:50:17 UTC
        

From looking at configure, it seems that cairo assumes libSM presence when libICE is detected.
libXt and libXmu are not mentioned at all in the build files however, so probably they enter the build through some pkgconfig files like from gtkglext. In that case, the problem is not in cairo but in those libraries.




Comment 3


Chí-Thanh Christopher Nguyễn






          2016-06-09 14:57:57 UTC
        

Reporter: please also attach config.log




Comment 4


Jocelyn Mayer





          2016-06-09 15:17:16 UTC
        

I'm sorry that it might be too late as I remerged x11-libs/cairo and I did not think about saving the config.log file when it failed.




Comment 5


Matt Turner






          2017-03-04 06:11:05 UTC
        

Your build log contains:

> -lpixman-1 -lfontconfig -lfreetype -lEGL -L/usr/lib -L/usr/X11R6/lib -lpng16 -lxcb-shm -lxcb-render -lxcb -lXrender -lz /usr/lib/libGL.so -lSM -lICE -lXmu -lXt -lXext -lXi -lX11 -ldl -lpthread -lrt -lm

Locally, I have:

> -lpthread -lpixman-1 -lfontconfig -lfreetype -lEGL -ldl -lpng16 -lxcb-shm -lxcb -lxcb-render -lXrender -lX11 -lXext -lz -lGL -lrt -lm


Your contains "-L/usr/X11R6/lib", which definitely should not exist. It shouldn't have existed on a Gentoo system for *many* years.

I think there's something wrong on your system...




Comment 6


Jocelyn Mayer





          2017-03-05 08:54:11 UTC
        

/usr/X11R6 is a symlink to /usr. It has been created, if I remember well, during the migration from X11R6 to xorg: this system has been first installed in 2004.
I got the same symlink on my x86_64 main machine, first installed in 2004 too...
Then, I don't think my installation is broken, just that this symlink might be useless nowadays.




Comment 7


Matt Turner






          2017-03-05 17:31:56 UTC
        

(In reply to Jocelyn Mayer from comment #6)
> /usr/X11R6 is a symlink to /usr. It has been created, if I remember well,
> during the migration from X11R6 to xorg: this system has been first
> installed in 2004.
> I got the same symlink on my x86_64 main machine, first installed in 2004
> too...
> Then, I don't think my installation is broken, just that this symlink might
> be useless nowadays.

That's fine and well, and I can believe your system has it from years ago, but it indicates to me that I'm not going to be able to investigate this bug. The set of libraries linked against are very different.

I would grep through your '*.pc' files and try to determine which is providing the libraries that are not present on my linker command line, and perhaps reemerge that package.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

