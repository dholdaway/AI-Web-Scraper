Title: 84022 – imlib2-1.2.0.20050220.ebuild wants to add some selinux-context allthough theres no reason to do that
URL: https://bugs.gentoo.org/show_bug.cgi?id=84022

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 84022
imlib2-1.2.0.20050220.ebuild wants to add some selinux-context allthough theres no reason to do that
Last modified: 2005-04-21 18:40:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 84022 
      - imlib2-1.2.0.20050220.ebuild wants to add some selinux-context allthough theres no reason to do that


Summary:
imlib2-1.2.0.20050220.ebuild wants to add some selinux-context allthough ther...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

The Gentoo Linux Hardened Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-03 16:40 UTC by Nicolas Vilz





      Modified:
    
2005-04-21 18:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nicolas Vilz





          2005-03-03 16:40:29 UTC
        

i don't have selinux in my useflags, I use default-linux/x86/2005.0, and I don't probably don't have security-labels activated on my xfs, because i don't need them. This ebuild wants to set selinux-context on the files.

Calculating world dependencies          ...done!
>>> emerge (1 of 8) media-libs/imlib2-1.2.0.20050220 to /
>>> md5 src_uri ;-) imlib2-1.2.0.20050220.tar.bz2
 * Please do not contact the E team about bugs in Gentoo.
 * Only contact vapier@gentoo.org via e-mail or bugzilla.
 * Remember, this stuff is CVS only code so dont cry when
 * I break you :).
>>> Unpacking source...
>>> Unpacking imlib2-1.2.0.20050220.tar.bz2 to /var/tmp/portage/imlib2-1.2.0.20050220/work
cp: setting attribute `security.selinux' for `/var/tmp/portage/imlib2-1.2.0.20050220/temp/gettextize': Operation not permitted

!!! ERROR: media-libs/imlib2-1.2.0.20050220 failed.
!!! Function gettext_modify, Line 83, Exitcode 1
!!! could not copy gettextize
!!! If you need support, post the topmost build error, NOT this status message.



Reproducible: Always
Steps to Reproduce:
1. emerge =media-libs/imlib2-1.2.0.20050220
2.
3.

Actual Results:  
imlib2-1.2.0.20050220 doesnt merge with error-message above.

Expected Results:  
it should have merged.


Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.4.3, glibc-2.3.4.20050125-r0,
2.6.10-gentoo-r6 i686)
=================================================================
System uname: 2.6.10-gentoo-r6 i686 AMD Athlon(tm) MP Processor 1900+
Gentoo Base System version 1.6.9
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Feb 18 2005, 19:00:50)]
dev-lang/python:     2.3.5
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.5, 1.6.3, 1.4_p6, 1.8.5-r3, 1.9.4, 1.7.9-r1
sys-devel/binutils:  2.15.92.0.2-r4
sys-devel/libtool:   1.5.10-r5
virtual/os-headers:  2.6.10
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-march=athlon-mp -O3 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-mp -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig candy ccache cvs distlocks sandbox sfperms
userpriv usersandbox"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://gentoo-distfiles.local.nil.nul/gentoo-portage"
USE="x86 X aalib acpi alsa apache2 apm arts avi bash-completion berkdb
bitmap-fonts caps crypt cups curl dba dedicated dvd emboss encode esd f77 fam
flac foomaticdb fortran freetype ftp gd gdbm gif gimp gkrellm gnome gpm
gstreamer gtk gtk2 icq imagemagick imlib ipv6 ithreads jack java jpeg kde kdepim
libg++ libwww mad mailbox maildir maildrop mbox mikmod mmx motif mozilla mp3
mpeg mplayer mysql ncurses nls nowin nvidia oav offensive oggvorbis opengl oss
pam pdflib perl png python qt quicktime readline screenshot sdl session slang
spell sqlite ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts
vchroot vhosts xfs xine xinerama xml xml2 xmms xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS




Comment 1


Robert Paskowitz (RETIRED)






          2005-03-26 19:01:04 UTC
        

Is /var or /var/tmp a seperate partition than /usr/bin? 

It appears as though your /usr/bin/gettextize has an extended attribute on it. Try running 'attr -g security.selinux /usr/bin/gettextize'. Also, I'm not sure if 'cp' normally tries to preserve extended attributes, I think coreutils would have needed to been installed with 'selinux' in the useflags. The output of 'emerge -pv coreutils' will clearly highlight the current flags that will be used, as well as what was used last. That could be worth checking as well.

Since none of the imlib2 ebuild, the enlightenment eclass, or the eutils eclass make any selinux reference, it seems likely that this problem is due to other things left on the system.




Comment 2


Nicolas Vilz





          2005-03-27 07:29:22 UTC
        

sorry, the last two weeks were very busy on me. on March 15 it worked finaly... don't know why then and not before. In this time i had no kernel update or whatever...

my coreutils were clean.

Calculating dependencies  ...done!
[ebuild   R   ] sys-apps/coreutils-5.2.1-r5  -acl -build -debug +nls (-selinux) -static (-uclibc) 0 kB 


following output gave genlop -i imlib2 

   * media-libs/imlib2-1.2.0.20050220
   Install date: Tue Mar 15 15:42:44 2005
   USE="X gif jpeg mmx png tiff"
   CFLAGS="-march=athlon-mp -O3 -pipe -fomit-frame-pointer"

and following gave genlop -i coreutils

   Total builds: 5
   Global build time: 25 minutes and 28 seconds.
   Average merge time: 5 minutes and 5 seconds.

   Info about currently installed ebuild:

   * sys-apps/coreutils-5.2.1-r5
   Install date: Fri Mar 18 18:14:57 2005
   USE="nls -build -acl -selinux -static -uclibc"
   CFLAGS="-march=athlon-mp -O3 -pipe -fomit-frame-pointer"

works for me now... but don't understand how this could happen.. or how this solved itself...




Comment 3


Adam Mondl (RETIRED)






          2005-04-21 18:40:12 UTC
        

WORKSFORME









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

