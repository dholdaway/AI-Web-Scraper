Title: 489674 – net-print/hplip-3.13.9 - hpcups[<pid>]: common/utils.c 68: unable to open /var/lib/hp/hplip.state: Permission denied
URL: https://bugs.gentoo.org/show_bug.cgi?id=489674

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 489674
net-print/hplip-3.13.9 - hpcups[<pid>]: common/utils.c 68: unable to open /var/lib/hp/hplip.state: Permission denied
Last modified: 2013-10-30 17:18:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 489674 
      - net-print/hplip-3.13.9 - hpcups[<pid>]: common/utils.c 68: unable to open /var/lib/hp/hplip.state: Permission denied


Summary:
net-print/hplip-3.13.9 - hpcups[<pid>]: common/utils.c 68: unable to open /va...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Printing

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Daniel Pielmeier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-10-28 17:42 UTC by Canek Peláez Valdés





      Modified:
    
2013-10-30 17:18 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



printing









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Canek Peláez Valdés





          2013-10-28 17:42:00 UTC
        

I recently upgraded to net-print/hplip-3.13.9; even after running hp-plugin again to update the proprietary plugin, my network printer (HP LaserJet Professional P1102w) refused to work.

The logs in the journal says:

Oct 28 11:31:34 centurion hpcups[17934]: common/utils.c 68: unable to open /var/lib/hp/hplip.state: Permission denied

If I do

chmod 777 /var/lib/hp/hplip.state
chmod 777 /var/lib/hp

then I'm able to print. I know I'm going over to board, but I don't have the time right now to check what precisely permissions are required.

Also, the file /var/lib/hp/hplip.state and its parent directory change permissions everytime cups is restarted, so I need to change the permissions  back again.

Reproducible: Always

Steps to Reproduce:
1. Stop cups
2. Start cups
3. Try to print a document
Actual Results:  
The print job fails with the message:

hpcups[<pid>]: common/utils.c 68: unable to open /var/lib/hp/hplip.state: Permission denied

Expected Results:  
The job should just succeed.

net-print/cups-1.6.4
net-print/cups-filters-1.0.36-r2
net-print/cups-pk-helper-0.2.4
net-print/hplip-3.13.9

Running in GNOME 3.10.1, but it happens even if I setup the printer with hp-setup and try to print the test page from there.




Comment 1


Daniel Pielmeier






          2013-10-30 16:49:03 UTC
        

Plugin related please open a bug upstream.

Interesting would be the permissions for the folder and the file which do not work. Here /var/lib/hp/ has 755 and is owned by root. This should be okay as common/utils.c wants to open the file for reading. I do not have a state file here as my printer does not require a plugin.




Comment 2


Canek Peláez Valdés





          2013-10-30 17:18:06 UTC
        

(In reply to Daniel Pielmeier from comment #1)
> Plugin related please open a bug upstream.
> 
> Interesting would be the permissions for the folder and the file which do
> not work. Here /var/lib/hp/ has 755 and is owned by root. This should be
> okay as common/utils.c wants to open the file for reading. I do not have a
> state file here as my printer does not require a plugin.

Mmmh. I'm unable to reproduce the problem, and having /var/lib/hp/ with 755 and /var/lib/hp/hplip.state with 644 works. I'm closing it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

