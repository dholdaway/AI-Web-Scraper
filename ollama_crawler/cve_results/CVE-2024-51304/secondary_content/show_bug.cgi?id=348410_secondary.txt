Title: 348410 – update kde-4.5.4 restart gives a black screen with cursor only
URL: https://bugs.gentoo.org/show_bug.cgi?id=348410

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348410
update kde-4.5.4 restart gives a black screen with cursor only
Last modified: 2010-12-24 14:37:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348410 
      - update kde-4.5.4 restart gives a black screen with cursor only


Summary:
update kde-4.5.4 restart gives a black screen with cursor only
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-12-11 07:34 UTC by Geoff Madden





      Modified:
    
2010-12-24 14:37 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



esigra
Hugo.Mildenberger
walch.martin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




xsession error file

              (.xsession-errors,80.35 KB,
                text/plain)

            
2010-12-11 07:37 UTC,

            Geoff Madden




Details





emerge.info

              (emerge.inf.kde,4.78 KB,
                text/plain)

            
2010-12-11 07:41 UTC,

            Geoff Madden




Details





xorg log as requested

              (Xorg.0.log,33.61 KB,
                text/plain)

            
2010-12-12 06:13 UTC,

            Geoff Madden




Details





xorg log as requested

              (Xorg.0.log,33.61 KB,
                text/plain)

            
2010-12-12 06:19 UTC,

            Geoff Madden




Details





.xsession file

              (xsess.errs.tar.bz2,8.14 KB,
                application/octet-stream)

            
2010-12-15 03:41 UTC,

            Geoff Madden




Details





error log 17-12-2010

              (.xsession-errors,108.51 KB,
                text/plain)

            
2010-12-17 09:08 UTC,

            Geoff Madden




Details





xorg log 17-12-2010

              (Xorg.0.log,32.84 KB,
                text/plain)

            
2010-12-17 09:09 UTC,

            Geoff Madden




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Geoff Madden





          2010-12-11 07:34:07 UTC
        

Updated to kde-4.5.4 ,no problems reported, but restart only gave black screen with mouse cursor(working). I removed the existing .kde4 dir,just in case of conflics with previous configs, restarted ,same result.Thinking I may have had a corrupted install I r&r'd kde & tried installing 4.5.3 by masking 4.5.4 in /etc/portage/package.mask, this didn't work & 4.5.4 was reinstalled. With the same result. I have looked in the .kde4 dir and it is not being written to in either default or config directories,
Any help on this one .




Comment 1


Geoff Madden





          2010-12-11 07:37:41 UTC
        

Created attachment 256884 [details]
xsession error file




Comment 2


Geoff Madden





          2010-12-11 07:41:37 UTC
        

Created attachment 256885 [details]
emerge.info




Comment 3


Martin Walch





          2010-12-11 08:48:03 UTC
        

This problem seems to affect also others. I have read about exactly the same problem in the German Gentoo forum with the only difference that the screen becomes white, not black. Noticeably, you both use the ati drivers. Can you give more details about your graphics hardware?

the thread in the forum about the same problem (note: it is in German)
> http://forums.gentoo.org/viewtopic-t-855191.html




Comment 4


Geoff Madden





          2010-12-11 10:12:54 UTC
        

On looking at the update log file its having problems with the various rc files either not being there or empty. Which is not quite true as there are statements in them,but not anything that could be used as a config.

For Mr. Anderson  My card is RV370 5b60 [RADEON X300 PCIE]
                  actual card RV370 [RADEON X300SE]   According to /v/l/messages mem resources are 0  ox6000-ox6fff
                  1  oxfe200000-oxfe2fffff
                  2  oxd8000000-oxdfffffff




Comment 5


Geoff Madden





          2010-12-11 14:11:46 UTC
        

My system is using the xf86-video-ati-6.13.2 as the ati-drivers doesn't support my card




Comment 6


ScytheMan





          2010-12-11 15:29:14 UTC
        

I'm using AMD HD5770 + ati-drivers 10.11 + xorg-server 1.9.2. KDM works, I get a white screen after login.




Comment 7


Hugo Mildenberger





          2010-12-11 17:03:43 UTC
        

Could you please also attach /var/log/Xorg.0.log? 
Maybe there was an update of one of the x11-drivers 
or the xorg-server itself going on behind the 
scene. If so, an ABI change may be the cause.
This could be fixed by running

$ qlist -IC x11-drivers|xargs sudo emerge 




Comment 8


Geoff Madden





          2010-12-12 06:13:59 UTC
        

Created attachment 256937 [details]
xorg log as requested




Comment 9


Geoff Madden





          2010-12-12 06:19:57 UTC
        

Created attachment 256939 [details]
xorg log as requested

Ran the qlist argument and rebuilt all files,no improvement.




Comment 10


Hugo Mildenberger





          2010-12-12 10:24:47 UTC
        

From Xorg.0.log I see KMS isn't supported in kernel. People keep saying
that enabling kernel mode setting would be more stable with recent xserver versions. 

There is also this:
(EE) AIGLX error: dlopen of /usr/lib64/dri/r300_dri.so failed (/usr/lib64/dri/r300_dri.so: cannot open shared object file: No such file or directory)

The library r300_dri.so should be installed by mesa. Since you have ~amd64 in USE flags, are you possibly using media-libs/mesa-7.9? I remember that I had to mask mesa-7.9 on amd64 (though with xf86-video-intel, but due to a similar problem)




Comment 11


Geoff Madden





          2010-12-15 03:35:38 UTC
        

(In reply to comment #10)
> From Xorg.0.log I see KMS isn't supported in kernel. People keep saying
> that enabling kernel mode setting would be more stable with recent xserver
> versions. 
> 
> There is also this:
> (EE) AIGLX error: dlopen of /usr/lib64/dri/r300_dri.so failed
> (/usr/lib64/dri/r300_dri.so: cannot open shared object file: No such file or
> directory)
> 
> The library r300_dri.so should be installed by mesa. Since you have ~amd64 in
> USE flags, are you possibly using media-libs/mesa-7.9? I remember that I had to
> mask mesa-7.9 on amd64 (though with xf86-video-intel, but due to a similar
> problem)
> 

Ok I now have a working gui ,I gather it was the update to mesa that !!fixed it
I do get a workable screen,but boy is it slow to appear,not yet checked the .xsession errors as I have had to rebuild kde and put in missing bits that didn't get compiled this time round. I now have a working mds (mail delivery),so email replies are more likely. mesa version 7.9-r1.




Comment 12


Geoff Madden





          2010-12-15 03:41:02 UTC
        

Created attachment 257200 [details]
.xsession file




Comment 13


Geoff Madden





          2010-12-17 09:08:04 UTC
        

Created attachment 257398 [details]
error log 17-12-2010




Comment 14


Geoff Madden





          2010-12-17 09:09:10 UTC
        

Created attachment 257399 [details]
xorg log 17-12-2010




Comment 15


Geoff Madden





          2010-12-17 09:11:36 UTC
        

(In reply to comment #10)
> From Xorg.0.log I see KMS isn't supported in kernel. People keep saying
> that enabling kernel mode setting would be more stable with recent xserver
> versions. 
> 
> There is also this:
> (EE) AIGLX error: dlopen of /usr/lib64/dri/r300_dri.so failed
> (/usr/lib64/dri/r300_dri.so: cannot open shared object file: No such file or
> directory)
> 
> The library r300_dri.so should be installed by mesa. Since you have ~amd64 in
> USE flags, are you possibly using media-libs/mesa-7.9? I remember that I had to
> mask mesa-7.9 on amd64 (though with xf86-video-intel, but due to a similar
> problem)
> 

I am now in process of recompiling 2.6.36-r5 with KMS enabled for the radeon




Comment 16


Geoff Madden





          2010-12-17 09:13:55 UTC
        

One trick I have found/stumbled on ,If I click on the area where the KDE logo resides it does accelerate the installation of the gui,sometimes!!!!!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

