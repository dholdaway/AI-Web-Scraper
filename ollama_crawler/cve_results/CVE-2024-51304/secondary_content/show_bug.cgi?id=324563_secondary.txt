Title: 324563 – app-admin/hddtemp: add functionality for local drive database
URL: https://bugs.gentoo.org/show_bug.cgi?id=324563

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 324563
app-admin/hddtemp: add functionality for local drive database
Last modified: 2010-07-05 13:28:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 324563 
      - app-admin/hddtemp: add functionality for local drive database


Summary:
app-admin/hddtemp: add functionality for local drive database
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Michal Januszewski (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-18 08:29 UTC by Peter Gantner (a.k.a. nephros)





      Modified:
    
2010-07-05 13:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



spock









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Gantner (a.k.a. nephros)





          2010-06-18 08:29:45 UTC
        

+++ This bug was initially created as a clone of Bug #324213 +++

The following modifications to hddtemp-0.3_beta15-r4 allow for a user-supplied hddtemp database to be included in the update process. Quite handy.

--- hddtemp-0.3_beta15-r4.ebuild        2010-06-18 10:08:37.000000000 +0200
+++ /var/portage/gentoo/app-admin/hddtemp/hddtemp-0.3_beta15-r4.ebuild  2010-03-31 04:36:03.000000000 +0200
@@ -66,9 +66,6 @@
 pkg_postinst() {
        einfo "In order to update your hddtemp database, run:"
        einfo "  update-hddtemp.db"
-       einfo ""
-       einfo "You can add your own drives to the file /etc/hddtemp/hddlocal.db"
-       einfo "and they will be included in the update process."
 }

--- files/update-hddtemp.db     2010-06-18 10:28:09.000000000 +0200
+++ /var/portage/gentoo/app-admin/hddtemp/files/update-hddtemp.db       2009-07-22 05:05:50.000000000 +0200
@@ -24,7 +24,3 @@
 wget http://download.savannah.nongnu.org/releases/hddtemp/hddtemp.db -O hddtemp.db -q || die "Failed to download new hddtemp.db file"
 update_db "hddgentoo.db" "hddtemp.db"
 
-if [ -e /etc/hddtemp/hddlocal.db ]; then
-  update_db "/etc/hddtemp/hddlocal.db" "hddtemp.db" 
-fi
-




Comment 1


Peter Gantner (a.k.a. nephros)





          2010-06-18 08:31:07 UTC
        

Sorry, the diff output is the wrong way around (stupid me).
But you get the idea.




Comment 2


Michal Januszewski (RETIRED)






          2010-06-24 10:08:24 UTC
        

I'm worried about this creating an incentive for users NOT to submit their drives to the Gentoo database (adding a drive to a local file is easier than posting a bug).  Do you think how we manage the Gentoo HDD DB is insufficient somehow?  If so, perhaps we should try to fix that and treat a fully local database as a last resort.




Comment 3


Peter Gantner (a.k.a. nephros)





          2010-06-24 21:59:05 UTC
        

I would have submitted hd information upstream, and used the local database for the meantime, thus not risking it being overwritten with an ebuild update. 

(In reply to comment #2)
> I'm worried about this creating an incentive for users NOT to submit their
> drives to the Gentoo database 
Well I for one wasn't even aware that is expected from users to report HD info to Gentoo. It gets installed and updated quite silently.

If you want bug reports instead, that's fine too, but you should probably be more vocal about it in the einfos.

And it would make sense to update the gentoo db via the update script just like the upstream one so we don't have to bump/reinstall each time.




Comment 4


Michal Januszewski (RETIRED)






          2010-07-05 13:28:14 UTC
        

(In reply to comment #3)
> I would have submitted hd information upstream, and used the local database for
> the meantime, thus not risking it being overwritten with an ebuild update. 

The problem with the upstream database is that they are very slow with processing the updates.  This is why the Gentoo hdd DB was created.

> If you want bug reports instead, that's fine too, but you should probably be
> more vocal about it in the einfos.

That's a good suggestion, I added a few words about it to the einfos in the latest ebuild.
 
> And it would make sense to update the gentoo db via the update script just like
> the upstream one so we don't have to bump/reinstall each time.

Also done :)

Closing the bug as WORKSFORME, as the original request for the local database has not been fulfilled, but it seems to me that we have gained some useful functionality thanks to your suggestions.












Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

