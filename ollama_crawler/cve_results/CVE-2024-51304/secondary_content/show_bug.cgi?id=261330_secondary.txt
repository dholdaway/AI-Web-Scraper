Title: 261330 – net-misc/omniORB-4.1.3 cannot find python backend with python-2.5
URL: https://bugs.gentoo.org/show_bug.cgi?id=261330

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 261330
net-misc/omniORB-4.1.3 cannot find python backend with python-2.5
Last modified: 2010-04-24 19:48:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 261330 
      - net-misc/omniORB-4.1.3 cannot find python backend with python-2.5


Summary:
net-misc/omniORB-4.1.3 cannot find python backend with python-2.5
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

Vlastimil Babka (Caster) (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




python-2.5



 

        Show dependency tree





 





      Reported:
    
2009-03-05 17:33 UTC by Petr Bahula





      Modified:
    
2010-04-24 19:48 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




the same patch as file

              (python2.5.patch,831 bytes,
                patch)

            
2009-03-05 17:36 UTC,

            Petr Bahula




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Petr Bahula





          2009-03-05 17:33:59 UTC
        

Program "omniidl" not work under Python 2.5, it not find their back-end.
Under Python 2.4 work correct.

Reproducible: Always

Steps to Reproduce:
1. With installed  and active python2.5:
# omniidl -bpython __ANY_IDL_FILE__.idl

Actual Results:  
omniidl: Could not import back-end 'python'
omniidl: Maybe you need to use the -p option?
omniidl: (The error was 'No module named python')

-- and the file is not "compiled"

Expected Results:  
-- no error messages and "compiled" files.

Patch for fix this problem:

--- omniORB-4.1.3.ebuild        2009-03-05 18:00:59.000000000 +0100
+++ omniORB-4.1.3-r1.ebuild     2009-03-05 18:00:50.000000000 +0100
@@ -5,7 +5,7 @@
 inherit python eutils
 
 DESCRIPTION="A robust, high-performance CORBA 2 ORB"
-SRC_URI="mirror://sourceforge/omniorb/${PF}.tar.gz"
+SRC_URI="mirror://sourceforge/omniorb/${P}.tar.gz"
 HOMEPAGE="http://omniorb.sourceforge.net/"
 
 IUSE="ssl"
@@ -25,6 +25,14 @@
                -e 's/^CDEBUGFLAGS.*/CDEBUGFLAGS = $(OPTCFLAGS)/' \
                mk/beforeauto.mk.in \
                mk/platforms/i586_linux_2.0*.mk || die "sed failed"
+
+        python_version
+       if [ ${PYVER} = '2.5' ] ; then 
+               einfo "Changed for python 2.5"
+               sed -i -e 's|return my_import("omniidl_be." + name)|return my_import("omniidl_be/" + name)|g' \
+                       src/tool/omniidl/python/omniidl/main.py || die "sed main.py failed"
+
+       fi
 }
 
 src_compile() {




Comment 1


Petr Bahula





          2009-03-05 17:36:04 UTC
        

Created attachment 184039 [details, diff]
the same patch as file




Comment 2


Lars Wendler (Polynomial-C) (RETIRED)






          2009-03-05 17:52:18 UTC
        

Reassigning to maintainer.




Comment 3


Vlastimil Babka (Caster) (RETIRED)






          2009-06-21 08:49:08 UTC
        

Cannot reproduce this, is there an upstream bug or did you create the fix yourself?




Comment 4


Vlastimil Babka (Caster) (RETIRED)






          2009-06-21 09:26:23 UTC
        

OK, reproduced in a chroot. Weird that with python 2.6 it seems to work again. Still, got any more information about the patch and the state of this at upstream?




Comment 5


Vlastimil Babka (Caster) (RETIRED)






          2010-04-24 19:48:52 UTC
        

In 4.1.4-r1 the python dep was raised to 2.6 where it just works.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

