Title: 105551 – games-board/six demands aRts despite USE -arts
URL: https://bugs.gentoo.org/show_bug.cgi?id=105551

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 105551
games-board/six demands aRts despite USE -arts
Last modified: 2005-09-14 23:59:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 105551 
      - games-board/six demands aRts despite USE -arts


Summary:
games-board/six demands aRts despite USE -arts
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-10 16:30 UTC by Philip Webb





      Modified:
    
2005-09-14 23:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Philip Webb





          2005-09-10 16:30:57 UTC
        

'emerge -pv six' gives

[ebuild R ] games-board/six-0.5.2  -arts* -debug -kdeenablefinal -xinerama 0 kB

I do not have a sound card & have removed all sound pkgs from my system.

'emerge six' thereafter gives (many lines into the configure step):

  checking for KDE paths... defaults
  checking for dcopidl... /usr/kde/3.4/bin/dcopidl
  checking for dcopidl2cpp... /usr/kde/3.4/bin/dcopidl2cpp
  checking for mcopidl... not found
  configure: error: The important program mcopidl was not found!
  Please check whether you installed aRts correctly.

  !!! ERROR: games-board/six-0.5.2 failed.
  !!! Function kde_src_compile, Line 158, Exitcode 1
  !!! died running ./configure, kde_src_compile:configure

Emerging 'six' with the USE flag '-arts' should not fail like this.

In  /etc/make.conf  I have

  USE="nvidia usb -alsa -arts -avi -berkdb -encode -esd -flac -f77 -libg++
       -mad -mikmod -mp3 -mysql -nls -ogg -oss -postgres
       -quicktime -sox -vorbis -xmms"



Reproducible: Always
Steps to Reproduce:
1. At CLI enter 'emerge six' with '-arts' in  make.conf  USE flags
2. Watch unfolding configure step
3. Encounter error message as above

Actual Results:  
The emerge halted

Expected Results:  
The emerge should have completed despite the absence of the 'arts' pkg




Comment 1


SpanKY






          2005-09-11 20:44:47 UTC
        

the USE=arts is crap that comes from the kde eclass, nothing we can really do
about it

ive added arts to DEPEND




Comment 2


Philip Webb





          2005-09-12 14:40:56 UTC
        

(In reply to comment #1)
> the USE=arts is crap that comes from the kde eclass, nothing we can really do
> about it
> 
> ive added arts to DEPEND

I've checked the 'six' e-build & it inherits 'kde'.
I checked the 'kde.eclass' & the only mentions of 'arts'
don't seem to imply any requirement nor should they:
I have a lot of other KDE apps installed & use the desktop full-time
& don't have 'arts' installed or any other sound packages.
The problem seems to lie in the 'configure' step of 'six' itself.

I already have 'six' installed & tried to re-install it
after it was listed by 'emerge -pv --newuse world' due to '-arts*'
(I had originally installed it before removing the sound packages),
but nothing else forced a re-install: it opens & plays correctly.

Is it not possible to fix the package configure step, if that's the problem ?





Comment 3


Chris Gianelloni (RETIRED)






          2005-09-13 04:19:20 UTC
        

Got a patch?




Comment 4


Philip Webb





          2005-09-13 15:23:47 UTC
        

(In reply to comment #3)
> Got a patch?

Sorry, no, I wish I had, but it's inside a long configure script
& I'm not a programmer, not even one who writes 27 000 line bash scripts.

I unpacked  kdegames-3.4.1  &  six-0.5.2  from  /usr/portage/distfiles/
& searched the 'configure' files for 'dcopidl', the missing item(s).
Similar lines concerning that item occur in both,
but something in Kdegames configure avoids the problem
-- presumably lines which skip that stuff if '-arts' is set -- ,
whereas it is missing in Six configure.

If anyone has any useful suggestions to guide me,
I'm willing to investigate those  2  files further
& see if I can get Six configure to complete successfully
by commenting something in that file.  However without a bit of help,
I don't believe I'm upto searching the  27 000  lines by myself.

It's a silly bug in a small game, probably due to upstream inexperience,
but it should be fixable & I'm willing to try to do my bit.





Comment 5


SpanKY






          2005-09-14 21:54:42 UTC
        

i didnt test that ... does six actually compile w/out arts ?  it's easier to
override configure, but pointless if the source actually needs arts
functionality ...




Comment 6


Philip Webb





          2005-09-14 23:59:02 UTC
        

(In reply to comment #5)
> i didnt test that ... does six actually compile w/out arts ?  it's easier to
> override configure, but pointless if the source actually needs arts
> functionality ...

The version I have working was compiled before I removed Arts & sound.
I don't know whether it would compile without Arts:
there are packages which compile & run successfully after '--nodeps',
so ebuild packagers don't always know what's what.

If you can give me some advice on how to edit the compile script,
I'm willing to try compiling Six without Arts & see what happens.
My problem is that I really can't face trying to puzzle out
what it is in the  27 000  lines which needs altering to avoid Arts.
The Kdegames configure has something which does respond to '-arts',
but clearly the Six configure script doesn't.
My guess is that the cause is an inexperienced upstream script-writer,
but the only way to find out is to change the Six script & see:
after all, why would a simple game like that need sound of any kind ?
I could try using the generic Kdegames script,
but that might run into all sorts of different problems.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

