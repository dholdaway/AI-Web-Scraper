Title: 358071 – dev-java/commons-cli-1.2 needs dev-python/pyxml
URL: https://bugs.gentoo.org/show_bug.cgi?id=358071

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 358071
dev-java/commons-cli-1.2 needs dev-python/pyxml
Last modified: 2011-03-10 15:58:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 358071 
      - dev-java/commons-cli-1.2 needs dev-python/pyxml


Summary:
dev-java/commons-cli-1.2 needs dev-python/pyxml
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Java

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

358219

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2011-03-09 14:08 UTC by Sebastian Rose





      Modified:
    
2011-03-10 15:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sping









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sebastian Rose





          2011-03-09 14:08:19 UTC
        

Emerge of dev-java/commons-cli fails when dev-python/pyxml is not installed.
The dependency is missing.

Reproducible: Always

Steps to Reproduce:
1. emerge commons-cli-1.2
2.
3.
Actual Results:  
>>> Configuring source in /var/tmp/portage/dev-java/commons-cli-1.2/work/commons-cli-1.2-src ...
Rewriting attributes
Rewriting ./build.xml
Traceback (most recent call last):
  File "/usr/lib64/javatoolkit/bin/xml-rewrite-3.py-2.7", line 240, in <module>
    outxml = processActions(options, f)
  File "/usr/lib64/javatoolkit/bin/xml-rewrite-3.py-2.7", line 109, in processActions
    out_stream = doRewrite(rewriter, out_stream, rewriter.add_gentoo_classpath,classpath = newcp)
  File "/usr/lib64/javatoolkit/bin/xml-rewrite-3.py-2.7", line 100, in doRewrite
    rewriter.write(out)
  File "/usr/lib64/python2.7/site-packages/javatoolkit/xml/DomRewriter.py", line 81, in write
    from xml.dom.ext import PrettyPrint
ImportError: No module named ext

Expected Results:  
Successful emerge von dev-java/commons-cli

GENTOO_VM=icedtea6  CLASSPATH="" JAVA_HOME="/usr/lib64/icedtea6"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""

emerge --info:
Portage 2.2.0_alpha26 (default/linux/amd64/10.0, gcc-4.5.2, glibc-2.13-r1, 2.6.37-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.37-gentoo-r1-x86_64-Intel-R-_Core-TM-2_Duo_CPU_E8400_@_3.00GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 09 Mar 2011 13:30:01 +0000
ccache version 3.1.4 [enabled]
app-shells/bash:     4.2_p7
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.7.1-r1, 3.1.3-r1
dev-util/ccache:     3.1.4
dev-util/cmake:      2.8.4
sys-apps/baselayout: 2.0.1-r1
sys-apps/openrc:     0.7.0
sys-apps/sandbox:    2.5
sys-devel/autoconf:  2.13, 2.68
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.21
sys-devel/gcc:       4.4.5, 4.5.2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.4-r1
sys-devel/make:      3.82
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)
Repositories: gentoo own_overlay proaudio
Installed sets: @kdebase-4.6, @kdeutils-4.6, @system
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe -msse4.1"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe -msse4.1"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="-va"
FEATURES="assume-digests binpkg-logs ccache collision-protect distlocks fixlafiles fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://de-mirror.org/distro/gentoo/ http://gentoo.tiscali.nl/ http://gentoo.mneisen.org/ http://gentoo.virginmedia.com/"
LANG="en_US.UTF8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en en_GB en_US de"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /var/lib/layman/pro-audio"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 apm atm bash-completion berkdb bzip2 cairo caps cdda cdparanoia cdr cli cracklib crypt css cups cxx dbus doc dri dts dv dvd dvdr encode exif ffmpeg fftw flac fortran ftp gcj gdbm gif gimp glut gnutls gphoto2 gpm hddtemp iconv icq ieee1394 imagemagick imap ipv6 jack java java5 java6 javascript jpeg kde ladspa lame lash latex libedit libnotify libsamplerate lm_sensors lua lzo mad matroska mime mmx modules mp3 mpeg mplayer mudflap multilib musepack ncurses nls nptl nptlonly nsplugin offensive ogg openal openexr opengl openmp oscar pam pcre pdf perl php png policykit ppds pppd python qt3 qt4 quicktime readline ruby samba scanner sdl semantic-desktop session smp sndfile source sse sse2 ssl subversion svg sysfs syslog taglib tcpd theora threads tiff timidity truetype unicode usb vcd vim-syntax vorbis wavpack wxwindows x264 xcomposite xine xinerama xml xorg xprint xscreensaver xulrunner xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_GB en_US de" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Petteri Räty (RETIRED)






          2011-03-09 16:34:57 UTC
        

Have you tried updating world with --deep?




Comment 2


Sebastian Rose





          2011-03-09 17:22:21 UTC
        

Before trying to emerge commons-cli? I think so, yes. Even now, emerge --depclean tries to unmerge pyxml, because I merged it with --oneshot. I guess just the dependency is missing:

$ equery depgraph commons-cli
 * Searching for commons-cli ...

 * dependency graph for dev-java/commons-cli-1.2
 `--  dev-java/commons-cli-1.2  amd64 
  `--  virtual/jdk-1.6.0  (>=virtual/jdk-1.4) amd64 
  `--  dev-java/ant-junit-1.8.1  (dev-java/ant-junit) ~amd64 
  `--  app-arch/zip-3.0-r1  (app-arch/zip) ~amd64 
  `--  dev-java/ant-core-1.8.1  (>=dev-java/ant-core-1.7.0) ~amd64 
[ dev-java/commons-cli-1.2 stats: packages (5), max depth (0) ]

$ equery depends pyxml
 * These packages depend on pyxml:
$




Comment 3


Rafał Mużyło





          2011-03-09 18:10:59 UTC
        

Probably '--with-bdeps y' is needed in this case too,
as this problem has been fixed in the tree and javatoolkit no longer requires pyxml.




Comment 4


Sebastian Rose





          2011-03-09 21:39:14 UTC
        

(In reply to comment #3)
> Probably '--with-bdeps y' is needed in this case too,
> as this problem has been fixed in the tree and javatoolkit no longer requires
> pyxml.

Missed that one, thanks. It's working now without pyxml. This bug can be closed.




Comment 5


Serkan Kaba (RETIRED)






          2011-03-09 22:28:20 UTC
        

Resolving as WORKSFORME. Will be permanently resolved after we stabilize dev-java/javatoolkit-0.3.0-r6 and force it in eclass.




Comment 6


Rafał Mużyło





          2011-03-10 15:58:18 UTC
        

*** Bug 358219 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

