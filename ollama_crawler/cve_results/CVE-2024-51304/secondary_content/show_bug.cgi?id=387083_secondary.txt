Title: 387083 – x11-libs/gdk-pixbuf should generate /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache
URL: https://bugs.gentoo.org/show_bug.cgi?id=387083

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 387083
x11-libs/gdk-pixbuf should generate /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache
Last modified: 2012-01-24 13:37:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 387083 
      - x11-libs/gdk-pixbuf should generate /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache


Summary:
x11-libs/gdk-pixbuf should generate /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-10-14 01:45 UTC by Roman





      Modified:
    
2012-01-24 13:37 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



nikita.kipriyanov
volyrkr









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Roman





          2011-10-14 01:45:56 UTC
        

After reinstall gdk-pixbuf does not generate
/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache
GTK applications fail to load any images, e.g. no icons in menus, eog does not recognize any image etc.

Solved by running manually
gdk-pixbuf-query-loaders > /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache

Reproducible: Always

Steps to Reproduce:
1. reinstall gdk-pixbuf
Actual Results:  
GTK+ applications do not show images/icons.

Expected Results:  
GTK+ applications should show images/icons.

gdk-pixbuf-2.22.1-r2
gtk+-2.24.4




Comment 1


Pacho Ramos






          2011-10-18 18:03:47 UTC
        

You will need to provide a build.log of emerge run that fails to generate it

Anyway I think this fix could solve it:

  03 Oct 2011; Fabio Erculiani <lxnay@gentoo.org> gdk-pixbuf-2.22.1-r2.ebuild,
  gdk-pixbuf-2.23.5.ebuild, gdk-pixbuf-2.24.0.ebuild,
  gdk-pixbuf-2.24.0-r1.ebuild:
  make gdk-pixbuf-query-loaders more atomic, fix segfault due to
  __GL_NO_DSO_FINALIZER=1 in environment




Comment 2


Rick Warner





          2011-12-23 20:52:19 UTC
        

I am having the same problem.  This system has not been updated in a long time. Here is an excerpt from the end of the emerge output:

mktemp: unrecognized option '--suffix=gdk_pixbuf_ebuild'
Try `mktemp --help' for more information.
/var/tmp/portage/x11-libs/gdk-pixbuf-2.24.0-r1/temp/environment: line 2748: : No such file or directory
 * Cannot update loaders.cache, gdk-pixbuf-query-loaders failed to run

It appears that it requires a newer version of mktemp than my system had.  I had coreutils-7.5-r1 on their at the time of the error.

I updated to coreutils-8.7 and now mktemp supports the --suffix option and gdk-pixbuf emerges without a problem.

I checked as far back as coreutils-8.1 and suffix is an option there.  7.6 seems to be the newest 7 series, and that one does not have the suffix option.  I think a dependency on coreutils>=8 needs to be added to gdk-pixbuf to solve this completely.

Thanks,
Rick




Comment 3


Rick Warner





          2012-01-24 13:37:38 UTC
        

It has been over a month since I posted this and no one has updated this entry.

However, gdk-pixbuf-2.24.1 was added to portage on Dec 31st and it has >=sys-apps/coreutils-8.5 in DEPEND so I assume this should resolve the issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

