Title: 146523 – net-misc/zaptel-1.2.8 rtc problems
URL: https://bugs.gentoo.org/show_bug.cgi?id=146523

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 146523
net-misc/zaptel-1.2.8 rtc problems
Last modified: 2007-12-25 06:37:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 146523 
      - net-misc/zaptel-1.2.8 rtc problems


Summary:
net-misc/zaptel-1.2.8 rtc problems
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

voip herd (OBSOLETE)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

153832

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-09-06 02:18 UTC by Timo Gurr (RETIRED)





      Modified:
    
2007-12-25 06:37 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



mlspamcb
timmy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timo Gurr (RETIRED)






          2006-09-06 02:18:44 UTC
        

If the rtc useflag is not set the ebuild doesn't complain about missing the rtc kernelmodule and thus you can't modprobe the ztdummy module. (In my opinion rtc shouldn't be a useflag but forced to be checked/enabled by the ebuild.) Or perhaps add a ztdummy useflag which takes care of the rtc support if rtc is only needed for this single module? I'm not very familiar with zaptel though, you probably have more knowledge about how to solve this "problem" :)

modprobe output:
FATAL: Error inserting ztdummy (/lib/modules/2.6.17-gentoo-r7/misc/ztdummy.ko): Unknown symbol in module, or unknown parameter (see dmesg)

dmesg output:
kcapi: card 1 "Diva Server V-PRI/E1-30" ready.
Zapata Telephony Interface Registered on major 196
Zaptel Version: 1.2.8 Echo Canceller: KB1
ztdummy: Unknown symbol rtc_register
ztdummy: Unknown symbol rtc_unregister
ztdummy: Unknown symbol rtc_control

And perhaps a note about where to find rtc support in the kernel would be nice, since there is
Device Drivers --> Real Time Clock  --->
and
Device Drivers --> Character devices  ---> <*> Enhanced Real Time Clock Support




Comment 1


Christophe PEREZ





          2006-09-15 19:06:58 UTC
        

1.2.8 is bugguy !
I had to downgrade to 1.2.7, because my TD400P didn't work anymore with it.
But, 1.2.7 isn't anymore in portage. A chance for me, I saved my modules before upgrading to 1.2.8. I just put them in /lib/modules/2.6.17-gentoo-r7/misc/

And asterisk-1.2.9_p1 is bugguy to, zapbarge doesn't work anymore with it.

We really need lastest versions 1.2.12.1 and zaptel 1.2.9.1.




Comment 2


Nico Baggus





          2006-09-20 00:26:17 UTC
        

rtc should be a flag at least on linux 2.4 kernels where it can't build 
ztdummy.

Also the CRC_CCITT checking on v2.4 kernels is flawed.
an finaly, the modules.conf from /etc should be copied to the image
BEFORE the make INSTALL_PREFIX=${D}.....
appears or else it fails on a v2.4 build.




Comment 3


Nico Baggus





          2006-09-20 00:27:55 UTC
        

On a V2.4 kernel the check shoulc be for CONFIG_CRC32
if needed.




Comment 4


Jakub Moc (RETIRED)






          2006-11-02 09:21:31 UTC
        

*** Bug 153832 has been marked as a duplicate of this bug. ***




Comment 5


Tim Dodge





          2006-11-03 05:14:14 UTC
        

I'm not convinced that Bug 153832 is a duplicate of this bug.

Basically for x86 and AMD64 on kernel 2.6, rtc support is always enabled, regardless of your rtc USE flag setting.

USE_RTC is #defined at about line 50 of ztdummy.c.




Comment 6


Rajiv Aaron Manglani (RETIRED)






          2007-12-25 06:37:05 UTC
        

zaptel 1.2.22.1 in cvs.

please reopen if this is still a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

