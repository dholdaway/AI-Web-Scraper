Title: 186483 – media-video/mplayer-1.0.20070622-r1 build fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=186483

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 186483
media-video/mplayer-1.0.20070622-r1 build fails
Last modified: 2007-08-15 03:24:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 186483 
      - media-video/mplayer-1.0.20070622-r1 build fails


Summary:
media-video/mplayer-1.0.20070622-r1 build fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-07-24 16:01 UTC by Stephen Bosch





      Modified:
    
2007-08-15 03:24 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stephen Bosch





          2007-07-24 16:01:31 UTC
        

Build fails when it is almost complete. I already have binutils 2.17, so that's not the cause. I tried rebuilding win32codecs, since the problem seems to involve libavcodec. It complains about an undefined reference to libxvid_encoder.


Reproducible: Always

Steps to Reproduce:
1. emerge mplayer
2. wait
3. cry
Actual Results:  
i686-pc-linux-gnu-gcc -o mplayer mplayer.o m_property.o mp_fifo.o mp_msg.o mixer.o parser-mpcmd.o subopt-helper.o command.o asxparser.o codec-cfg.o cpudetect.o edl.o find_sub.o m_config.o m_option.o m_struct.o mpcommon.o parser-cfg.o playtree.o playtreeparser.o spudec.o sub_cc.o subreader.o vobsub.o libvo/libvo.a libao2/libao2.a input/libinput.a gui/libgui.a libmenu/libmenu.a libmpcodecs/libmpcodecs.a libaf/libaf.a libmpdemux/libmpdemux.a stream/stream.a libswscale/libswscale.a libvo/libosd.a libavformat/libavformat.a libavcodec/libavcodec.a libavutil/libavutil.a libpostproc/libpostproc.a loader/libloader.a mp3lib/libmp3.a liba52/liba52.a libmpeg2/libmpeg2.a libfaad2/libfaad2.a tremor/libvorbisidec.a dvdread/libdvdread.a libdvdcss/libdvdcss.a osdep/libosdep.a -lXext -lX11 -lpthread -lXv -lXinerama -lXxf86vm -lXxf86dga -lGL -ldl -laa -lvga -lSDL -lpthread -laudio -lXt -ldl -lartsc -lpthread -lgmodule-2.0 -ldl -lgthread-2.0 -lglib-2.0 -lfaac -lmp3lame -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lm -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0 -lglib-2.0 -L/usr/kde/3.5/lib -Wl,-z,noexecstack    -lncurses -lsmbclient -lpng -lz -ljpeg -lgif -lasound -ldl -lpthread -lfreetype -lz -lfontconfig  -L/usr/lib -lfribidi -lz -ltheora -lxvidcore -lm -lpthread -ldl -rdynamic  -lm
libavcodec/libavcodec.a(allcodecs.o): In function `avcodec_register_all':
allcodecs.c:(.text+0x275): undefined reference to `libxvid_encoder'
collect2: ld returned 1 exit status
make: *** [mplayer] Error 1

!!! ERROR: media-video/mplayer-1.0.20070622-r1 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  mplayer-1.0.20070622-r1.ebuild, line 436:   Called die

!!! Failed to build MPlayer!
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/media-video/mplayer-1.0.20070622-r1/temp/build.log'.



Expected Results:  
The build normally completes :)

Here is my emerge --info:

root@stephen:/mnt/media# emerge --info
Portage 2.1.2.7 (default-linux/x86/2006.1, gcc-3.4.5, glibc-2.3.5-r3, 2.6.20-gentoo-r8 i686)
=================================================================
System uname: 2.6.20-gentoo-r8 i686 AMD Duron(tm)
Gentoo Base System release 1.12.9
Timestamp of tree: Fri, 20 Jul 2007 00:00:01 +0000
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.2.3-r5, 2.3.5-r2, 2.4.2
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r1
sys-devel/libtool:   1.4.3-r1, 1.5.22
virtual/os-headers:  2.4.19-r1, 2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/afs/C /etc/afs/afsws /etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://gentoo.chem.wisc.edu/gentoo/ http://gentoo.mirrors.tds.net/gentoo ftp://mirror.datapipe.net/gentoo http://gentoo.netnitco.net http://mirror.usu.edu/mirrors/gentoo/"
LANG="en_US"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/xeffects"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X aac aalib acpi afs alsa arts avi berkdb bidi bitmap-fonts cli cracklib crypt cups curl dri dvb dvd dvdr fortran gdbm gpm gtk gtk2 iconv imagemagick imap imlib ipv6 isdnlog java kde ldap lib libg++ midi mmx mozilla mp3 mudflap nas ncurses nls nptl nptlonly nsplugin oggvorbis opengl openmp oss pam pcre pda pdflib perl png ppds pppd python qt qt3 quicktime readline real reflection samba sdl session spl ssl svga theora tiff truetype truetype-fonts type1-fonts unicode usb videos win32codecs wmf www x86 xinerama xml xml2 xorg xv xvid zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon fglrx vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Samuli Suominen (RETIRED)






          2007-07-25 09:24:51 UTC
        

(In reply to comment #0)
> Portage 2.1.2.7 (default-linux/x86/2006.1, gcc-3.4.5, glibc-2.3.5-r3,

Quite outdated system.. 2007.0 is out, gcc 4.1.x and glibc-2.5 are current stable versions. Makes me think what else you have outdated.. and cause unreproducible error. Upgrade, please.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

