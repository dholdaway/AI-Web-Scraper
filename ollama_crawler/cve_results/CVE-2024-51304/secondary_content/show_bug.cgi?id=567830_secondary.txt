Title: 567830 – sys-boot/grub broken Manifest
URL: https://bugs.gentoo.org/show_bug.cgi?id=567830

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 567830
sys-boot/grub broken Manifest
Last modified: 2015-12-13 20:49:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 567830 
      - sys-boot/grub broken Manifest


Summary:
sys-boot/grub broken Manifest
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Infrastructure




Classification:

Unclassified




Component:

Other

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Infrastructure








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

567842

      (view as bug list)
    


Depends on:




567920



Blocks:







 

        Show dependency tree





 





      Reported:
    
2015-12-09 11:00 UTC by Patrick Lauer





      Modified:
    
2015-12-13 20:49 UTC
      (History)
    




          CC List:
        

10 
          users
          
            (show)
          



alexander
ap
axs
base-system
confabulate
fatzer2
genlinux
marduk
phmagic
yuriy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrick Lauer






          2015-12-09 11:00:49 UTC
        

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U  ] sys-boot/grub-0.97-r16::gentoo [0.97-r14::gentoo] USE="ncurses -custom-cflags -netboot -static" 1,034 KiB

Total: 1 package (1 upgrade), Size of downloads: 1,034 KiB

Would you like to merge these packages? [Yes/No] 

>>> Verifying ebuild manifests

!!! A file listed in the Manifest could not be found: /usr/portage/sys-boot/grub/grub-0.97-r15.ebuild



This has been visible for about 12h now.




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2015-12-09 14:08:34 UTC
        

*** Bug 567842 has been marked as a duplicate of this bug. ***




Comment 2


Mike Gilbert






          2015-12-09 14:12:46 UTC
        

This is infra's problem; devs do not commit EBUILD entries in the Manifest. It seems to process to thinken the Manifest missed the rename here.




Comment 3


Ian Stakenvicius (RETIRED)






          2015-12-09 15:26:42 UTC
        

Yeah but why did that happen, for grub?  usually it's due to another issue in the Manifest, that causes aborts..  my commits were done with repoman, they shouldn't've failed... :/




Comment 4


Mike Gilbert






          2015-12-09 16:08:43 UTC
        

Seems I forgot to check the "reset assignee to default" box. Giving this to infra for real now.




Comment 5


Marius Stoica





          2015-12-09 18:05:43 UTC
        


For the record if anyone still has this issue the solution is below (brought from the gentoo forums) 

cd /usr/portage/sys-boot/grub 
rm Manifest 
ebuild grub-0.97-r16.ebuild digest




Comment 6


Ian Stakenvicius (RETIRED)






          2015-12-09 18:06:43 UTC
        

(In reply to Marius Stoica from comment #5)
> For the record if anyone still has this issue the solution is below (brought
> from the gentoo forums) 
> 
> cd /usr/portage/sys-boot/grub 
> rm Manifest 
> ebuild grub-0.97-r16.ebuild digest

You don't even have to 'rm Manifest' , just 'ebuild grub-0.97-r16.ebuild digest' will suffice.




Comment 7


CaptainBlood





          2015-12-12 17:27:20 UTC
        

As of today, remains faulty still!




Comment 8


SpanKY






          2015-12-12 18:08:34 UTC
        

if you have a .git dir in the root of your portage repo, make sure you delete it.  there were some broken syncs in the past which would cause updates to stall.




Comment 9


Micha





          2015-12-12 19:03:09 UTC
        

Still visible. "ebuild grub-0.97-r16.ebuild digest" workaround is ok.




Comment 10


Robin Johnson









          2015-12-13 20:49:38 UTC
        

This has been fixed on the official mirrors for many days now.
If you did not get the fix, that means your client was not using --checksum.

Portage's algorithm to thicken manifests uses the last mtime in a directory for the new mtime of the manifest. If an ebuild is REMOVED after the last addition, that means the manifest will have a DIFFERENT content, but the same mtime.
Bug #567920 has a related case (renaming of ebuild).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

