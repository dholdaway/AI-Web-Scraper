Title: 324975 – sci-chemistry/ghemical: crash running mopac calculations
URL: https://bugs.gentoo.org/show_bug.cgi?id=324975

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 324975
sci-chemistry/ghemical: crash running mopac calculations
Last modified: 2012-03-04 14:55:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 324975 
      - sci-chemistry/ghemical: crash running mopac calculations


Summary:
sci-chemistry/ghemical: crash running mopac calculations
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Chemistry-Related Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-21 19:07 UTC by Reinis Danne





      Modified:
    
2012-03-04 14:55 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



myckel
tomka









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Command line output of ghemical crash

              (ghemical-mopac-crash.txt,6.16 KB,
                text/plain)

            
2010-06-21 19:17 UTC,

            Reinis Danne




Details





Command line output of successful mopac run (runinng it directly works)

              (mopac-methane.txt,9.13 KB,
                text/plain)

            
2010-06-21 19:19 UTC,

            Reinis Danne




Details





Methane molecule, input file for mopac

              (me.inp,186 bytes,
                text/plain)

            
2010-06-21 19:21 UTC,

            Reinis Danne




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Reinis Danne





          2010-06-21 19:07:36 UTC
        

Running any kind of calculations in Ghemical that are using MOPAC7 crashes just after mopac has red input.

Reproducible: Always

Steps to Reproduce:
1. Draw or import molecule in Ghemical
2. Right click->Compute->Setup->all QM->Select the engine class..->OK
3. Right click->Compute->Geometry Optimization..->OK

Actual Results:  
Ghemical crashes after reading input.

Expected Results:  
Runns multiple iterations in MOPAC7 showing progress in GUI of Ghemical.

Portage 2.1.8.3 (default/linux/amd64/10.0/desktop, gcc-4.4.4, glibc-2.11.1-r0, 2.6.32-gentoo-r7 x86_64)
=================================================================
System uname: Linux-2.6.32-gentoo-r7-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T7300_@_2.00GHz-with-gentoo-1.12.13
Timestamp of tree: Mon, 21 Jun 2010 15:45:03 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.10
dev-lang/python:     2.5.4-r4, 2.6.5-r2, 3.1.2-r3
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.1.2, 4.3.4, 4.4.4
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests ccache distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://mirror.yandex.ru/gentoo-distfiles/ http://ftp.linux.ee/pub/gentoo/distfiles/ ftp://ftp.linux.ee/pub/gentoo/distfiles/ ftp://trumpetti.atm.tut.fi/gentoo/distfiles/ "
LANG="lv_LV.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="lv en"
MAKEOPTS="-s -j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/science /var/lib/layman/sunrise /usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="7zip X a52 aac aalib accessibility acl acpi alsa amd64 avahi avi bash-completion berkdb bluethooth bluetooth branding bzip2 cairo cdparanoia cdr cjk cli consolekit cracklib crypt css cups cxx dbus divx dri dts dv dvd dvdr dvdread eds emboss encode evo exif fam ffmpeg flac fontconfig fortran freetype gdbm gif gnome gnutls gpm gstreamer gtk gtk2 hal iconv ieee1394 ipv6 java jpeg kerberos lame lcms ldap libnotify live lm_sensors mad matroska mikmod mjpeg mmx mng modules mp3 mp4 mpeg mudflap multilib ncurses networkmanager nls nptl nptlonly nsplugin nvidia ogg opengl openmp pam pango pcmcia pcre pdf perl png ppds pppd python qt3support quicktime rar readline reflection sdl session spell spl sse sse2 sse3 ssl ssse3 startup-notification subversion svg sysfs tcl tcpd theora tiff tk truetype udev unicode usb v4l v4l2 vcd vorbis wifi wmf x264 xcb xft xml xmms xorg xulrunner xv xvid zlib" ALSA_CARDS="via82xx hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" FOO2ZJS_DEVICES="hp1018" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="lv en" NETBEANS_MODULES="apisupport harness ide java nb websvccommon cnd dlight" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Reinis Danne





          2010-06-21 19:12:18 UTC
        

This bug has been reported also on Debian tracker and has been reported in Ghemical mailing list:
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=580828
http://www.bioinformatics.org/pipermail/ghemical-devel/2010-May/thread.html




Comment 2


Reinis Danne





          2010-06-21 19:17:51 UTC
        

Created attachment 236169 [details]
Command line output of ghemical crash




Comment 3


Reinis Danne





          2010-06-21 19:19:50 UTC
        

Created attachment 236171 [details]
Command line output of successful mopac run (runinng it directly works)




Comment 4


Reinis Danne





          2010-06-21 19:21:05 UTC
        

Created attachment 236173 [details]
Methane molecule, input file for mopac




Comment 5


Thomas Kahle (RETIRED)






          2010-08-10 12:23:12 UTC
        

Hi, I'm trying to debug this, but I cannot reproduce your problem. I'm trying with the latest versions of everything. Here is what I did:

-) emerge =sci-chemistry/mopac7-1.15  (no USE flags set)
-) emerge =sci-libs/libghemical-2.99.1 with USE="mopac7" 
-) emerge =sci-chemistry/ghemical-2.99.2-r2

-) Start ghemical from a directory where the user can write (since temporary files are created there).

-) Place two atoms by pressing d and clicking into the windows.
-) Right click->Compute->Setup->all QM->Select the engine class "MOPAC7/MNDO"->OK
-) Right click->Compute->Geometry Optimization..->OK

Result: Some computation is done, as witnessed on the command line and ghemical behaves normally. Can you try to exactly mimic what I did and see if the problem persists?
Thanks.





Comment 6


Reinis Danne





          2010-08-11 14:48:37 UTC
        

I have to click the draw button to be able to draw. The result is still the same as reported previously.

Maybe post your emerge --info, there might be some differences.




Comment 7


Thomas Kahle (RETIRED)






          2010-08-11 17:34:26 UTC
        

For the records, here it comes. 
The obvious difference is that I'm on x86. In the course of stabilization I guess other amd64 people will test. Let's see.


$ emerge --info
Portage 2.1.8.3 (default/linux/x86/10.0/desktop, gcc-4.4.3, glibc-2.11.2-r0, 2.6.34-gentoo-r1 i686)
=================================================================
System uname: Linux-2.6.34-gentoo-r1-i686-Intel-R-_Core-TM-2_Duo_CPU_L7500_@_1.60GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 11 Aug 2010 08:30:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r2, 3.1.2-r4
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.0-r1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.5, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="*"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests ccache collision-protect distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms splitdebug strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://de-mirror.org/distro/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,-O1 -Wl,--as-needed"
LINGUAS="en en_US de ja es fr it"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=300"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/sunrise /var/lib/layman/java-overlay /home/tom/tom-overlay /home/tom/gentoo/sci /home/tom/gentoo/sage-on-gentoo"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa anthy apache2 avahi bash-completion berkdb bluetooth branding bzip2 cairo cddb cdparanoia cdr cjk cli consolekit cracklib crypt ctype cups curl cxx daap dbus djvu dri dts dvd dvdr emacs encode exif expat fam fbcon ffmpeg firefox flac fortran ftp gd gdbm gif gimp glut gmp gnome gnome-keyring gnutls gpm graphviz gstreamer gtk guile hal hdaps iconv ieee1394 imagemagick imap imlib ipod ipv6 java javascript jpeg kde latex lcms ldap leim libnotify lm_sensors m17n-lib mad migemo mikmod mime mmx mng modules mp3 mp4 mpeg mplayer mudflap mule musicbrainz mysql mysqli ncurses nls nptl nptlonly nsplugin obex ocaml ogg oggvorbis openal opengl openmp pam pango pcmcia pcre pdf perl php plasma plotutils png policykit ppds pppd python qt3support qt4 readline reflection samba sasl sdl semantic-desktop session slang smartcard spell spl sqlite sqlite3 sse ssl startup-notification svg sysfs tcpd texlive theora threads tiff tk truetype uim unicode usb v4l v4l2 visualization vorbis wicd wifi win32codecs wxwindows x264 x86 xcb xcomposite xft xine xinerama xml xorg xulrunner xv xvid zeroconf zlib zsh-completion" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" DVB_CARDS="usb-dib0700" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US de ja es fr it" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS




Comment 8


Myckel Habets





          2010-08-13 19:34:55 UTC
        

I tested bug 325561, bug 331187, bug 331169 and bug 331175 together for stabilization on x86.  All these need to be stabilized together as they depend on each other (and building will fail if any is not stabilized). I was able to get them build against each other. I ran ghemical and tested the bug mentioned in bug 324975 (that's this bug). No problems encountered.

This bug should be fixed when the bugs mentioned above are marked stable.




Comment 9


Reinis Danne





          2012-03-04 14:55:42 UTC
        

Can't reproduce it anymore, seems to be working. Tough optimization is giving nonsense structures, but that is another issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

