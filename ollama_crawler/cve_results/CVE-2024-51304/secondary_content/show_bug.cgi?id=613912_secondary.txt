Title: 613912 – =media-sound/clementine-1.3.1-r6 : Can't export Audio CD in MP3
URL: https://bugs.gentoo.org/show_bug.cgi?id=613912

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 613912
=media-sound/clementine-1.3.1-r6 : Can't export Audio CD in MP3
Last modified: 2017-03-28 08:24:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 613912 
      - =media-sound/clementine-1.3.1-r6 : Can't export Audio CD in MP3


Summary:
=media-sound/clementine-1.3.1-r6 : Can't export Audio CD in MP3
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Fat-Zer








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-03-26 16:43 UTC by Adrien D





      Modified:
    
2017-03-28 08:24 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



email
polynomial-c
proxy-maint
sound









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Adrien D





          2017-03-26 16:43:43 UTC
        

Hi Team Gentoo,

When I try to extract an Audio CD, and the format is "MP3" it doesn't work.
Wave extract works fine, ogg too. 
With MP3, the temporary WAVE files are extracted but no MP3 in the output folder.

I think it's a problem with a dependancy.

=media-plugins/gst-plugins-lame-1.10.3 installed manually
=media-sound/lame-3.99.5-r1 installed



Reproducible: Always

Steps to Reproduce:
1. Install clementine with default options
2. Try to extract an Audio CD in MP3 format
3. See that it doesn't work



Portage 2.3.3 (python 3.4.5-final-0, !../../var/lib/layman/distros/profiles/CLDM/amd64, gcc-4.9.4, glibc-2.23-r3, 4.9.13-calculate x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.9.13-calculate-x86_64-Intel-R-_Core-TM-_i7-3610QM_CPU_@_2.30GHz-with-gentoo-17
KiB Mem:     8053584 total,   1681984 free
KiB Swap:    8384808 total,   8384808 free
Timestamp of repository gentoo: Fri, 24 Mar 2017 10:30:01 +0000
sh bash 4.3_p48-r1
ld GNU ld (Gentoo 2.26.1 p1.0) 2.26.1
app-shells/bash:          4.3_p48-r1::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.22.3_rc4::gentoo
dev-lang/python:          2.7.12::gentoo, 3.4.5::gentoo
dev-util/cmake:           3.7.2::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.3::gentoo
sys-apps/openrc:          0.23.2::gentoo
sys-apps/sandbox:         2.10-r3::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.26.1::gentoo
sys-devel/gcc:            4.9.4::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.9::gentoo (virtual/os-headers)
sys-libs/glibc:           2.23-r3::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: git://git.calculate-linux.org/repo/gentoo.git
    priority: -1000

adrien-overlay
    location: /var/lib/layman/adrien-overlay
    sync-type: laymansync
    sync-uri: git://github.com/aaaaadrien/adrien-overlay.git
    masters: gentoo
    priority: 50

calculate
    location: /var/lib/layman/calculate
    sync-type: laymansync
    sync-uri: git://github.com/calculatelinux/calculate.git
    masters: gentoo
    priority: 50

distros
    location: /var/lib/layman/distros
    sync-type: laymansync
    sync-uri: git://github.com/calculatelinux/distros.git
    masters: calculate gentoo
    priority: 50

vmware
    location: /var/lib/layman/vmware
    sync-type: laymansync
    sync-uri: git://anongit.gentoo.org/proj/vmware.git
    masters: gentoo
    priority: 50

Installed sets: @autodeps, @custom
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=x86-64 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.0/ext-active/ /etc/php/cgi-php7.0/ext-active/ /etc/php/cli-php7.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=x86-64 -pipe"
DISTDIR="/var/calculate/remote/distfiles"
EMERGE_DEFAULT_OPTS=" --binpkg-changed-deps=n --quiet-build=n --binpkg-respect-use=y --jobs=4"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles getbinpkg merge-sync news parallel-fetch parallel-install preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://mirror.yandex.ru/gentoo-distfiles http://distfiles.gentoo.org"
INSTALL_MASK="/etc/systemd /usr/lib*/systemd"
LANG="fr_FR.utf8"
LDFLAGS="-Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/var/calculate/packages/x86_64"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/calculate/tmp"
USE="3dnow 3dnowext X a52 aac acl acpi aes alsa amd64 amr audiofile avi avx berkdb bittorrent bluetooth box bzip2 cairo caps cdda cddb cdparanoia cdr chm cli consolekit cpudetection cracklib crypt css cue cups cxx dbus dftk djvu dri dv dvd dvdr dvdread ebook encode exif faac fexif ffmpeg flac flash fma3 fma4 foomaticdb fortran ftp gd gdbm gif gphoto2 gpm gstreamer gtk hunspell iconv id3tag idn ieee1394 imagemagick imap introspection ios ipod ipv6 irc jabber jpeg jpeg2k libnotify libwww lm_sensors logrotate lzo mad matroska mikmod mimap mmx mmxext modules mp3 mpeg mplayer multilib musepack ncurses networkmanager nfs nls nptl nsplugin ogg oggvorbis openal opencore-amr openexr opengl openmp opus oscar padlock pam pcre pdf png policykit popcnt portaudio ppp pulseaudio qt3support quicktime raw rdesktop readline real samba sasl scanner sdl seccomp semantic-desktop session smp smtp speex spell srt sse sse2 sse3 sse4_1 sse4_2 sse4a ssl ssse3 svg taglib tcpd tga theora threads tiff truetype udev udisks unicode usb userlocales v4l v4l2 vaapi vcd vdpau vhosts vorbis vpx wavpack webkit webp wimax win32codecs wmf wxwindows x264 x265 xanim xattr xcomposite xinerama xmp xop xv xvid xvmc zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="*" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="3dnow 3dnowext mmx sse sse2 * mmxext" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 efi-32 pc" INPUT_DEVICES="libinput evdev mutouch synaptics keyboard mouse" KERNEL="linux" L10N="en be be_BY bg bg_BG bs cs cs_CZ da da_DK de de_DE en_GB es es_AR es_ES es_LA es_UY es_VE et et_EE fi fi_FI fr fr_CA fr_FR hr hr_HR hu hu_HU it it_IT kk kk_KZ lt lt_LT lv lv_LV nl nl_NL pl pl_PL pt pt_BR pt_PT ro ro_RO ru ru_RU sk sk_SK sl sl_SI sq sq_AL sr sr_RS sv sv_SE uk uk_UA de-1901 en-GB pt-BR" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en be be_BY bg bg_BG bs cs cs_CZ da da_DK de de_DE en_GB es es_AR es_ES es_LA es_UY es_VE et et_EE fi fi_FI fr fr_CA fr_FR hr hr_HR hu hu_HU it it_IT kk kk_KZ lt lt_LT lv lv_LV nl nl_NL pl pl_PL pt pt_BR pt_PT ro ro_RO ru ru_RU sk sk_SK sl sl_SI sq sq_AL sr sr_RS sv sv_SE uk uk_UA" LIRC_DEVICES="devinput" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby21" THEMES="CLDM" USERLAND="GNU" VIDEO_CARDS="amdgpu i915 i965 intel nouveau nv nvidia r100 r200 r300 r600 radeon radeonsi vesa via" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

media-sound/clementine-1.3.1-r6::gentoo was built with the following:
USE="box cdda dbus ipod mtp pulseaudio udisks -amazoncloud -debug -dropbox -googledrive -lastfm -mms -moodbar -projectm -skydrive -test -wiimote" ABI_X86="64" LINGUAS="be bg bs cs da de en_GB es et fi fr hr hu it kk lt lv nl pl pt pt_BR ro ru sk sl sr sv uk -af -ar -bn -br -ca -cy -el -en_CA -eo -eu -fa -ga -gl -he -he_IL -hi -hy -ia -id -is -ja -ka -ko -mr -ms -my -nb -oc -pa -si_LK -sr@latin -te -tr -tr_TR -uz -vi -zh_CN -zh_TW"




Comment 1


Fat-Zer





          2017-03-27 03:02:00 UTC
        

I can't reproduce this... The extraction works fine either with lame plugin installed or not. Does transcoding of files work?

Could you try to build clementine with USE="debug" and post the terminal output of "clementine --verbose" when it's falling to convert. Also it may be helpful if you post the complete list of gst-plugins-* installed.




Comment 2


Adrien D





          2017-03-27 16:44:45 UTC
        

With debug flag, ripping work...

18:38:42.226 DEBUG Ripper:133                       Ripping 3 tracks. 
18:38:42.226 DEBUG Ripper:284                       Progress: 0 
18:38:46.181 DEBUG Database:594                     Starting database integrity check 
18:38:46.222 DEBUG Database:655                     Starting database backup 
18:39:26.586 DEBUG Ripper:284                       Progress: 100 
18:40:12.654 DEBUG Ripper:284                       Progress: 200 
18:40:55.973 DEBUG Ripper:284                       Progress: 300 
18:40:55.976 DEBUG Ripper:172                       "Transcodage de 3 fichiers en utilisant 8 threads" 
18:40:55.976 DEBUG Ripper:172                       "Lancement de /tmp/qt_temp.J13085/1.wav" 
18:40:55.978 DEBUG Ripper:172                       "Using 'lamemp3enc' (rank 256)" 
18:40:55.978 DEBUG Ripper:172                       "Adding xingmux and id3v2mux to the pipeline" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: target = 1" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: bitrate = 320" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: cbr = true" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: quality = 4" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: encoding-engine-quality = 1" 
18:40:55.979 DEBUG Ripper:172                       "Setting lamemp3enc property: mono = false" 
18:40:55.982 DEBUG Ripper:172                       "Lancement de /tmp/qt_temp.J13085/2.wav" 
18:40:55.983 DEBUG Ripper:172                       "Using 'lamemp3enc' (rank 256)" 
18:40:55.983 DEBUG Ripper:172                       "Adding xingmux and id3v2mux to the pipeline" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: target = 1" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: bitrate = 320" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: cbr = true" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: quality = 4" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: encoding-engine-quality = 1" 
18:40:55.983 DEBUG Ripper:172                       "Setting lamemp3enc property: mono = false" 
18:40:55.984 DEBUG Ripper:172                       "Lancement de /tmp/qt_temp.J13085/3.wav" 
18:40:55.985 DEBUG Ripper:172                       "Using 'lamemp3enc' (rank 256)" 
18:40:55.985 DEBUG Ripper:172                       "Adding xingmux and id3v2mux to the pipeline" 
18:40:55.985 DEBUG Ripper:172                       "Setting lamemp3enc property: target = 1" 
18:40:55.985 DEBUG Ripper:172                       "Setting lamemp3enc property: bitrate = 320" 
18:40:55.986 DEBUG Ripper:172                       "Setting lamemp3enc property: cbr = true" 
18:40:55.986 DEBUG Ripper:172                       "Setting lamemp3enc property: quality = 4" 
18:40:55.986 DEBUG Ripper:172                       "Setting lamemp3enc property: encoding-engine-quality = 1" 
18:40:55.986 DEBUG Ripper:172                       "Setting lamemp3enc property: mono = false" 
18:41:01.032 DEBUG Ripper:172                       "/home/adrien/3 -  - Track 3.mp3 écrit avec succès" 
18:41:01.037 DEBUG Ripper:284                       Progress: 582 
18:41:01.411 DEBUG Ripper:172                       "/home/adrien/2 -  - Track 2.mp3 écrit avec succès" 
18:41:01.415 DEBUG Ripper:284                       Progress: 597 
18:41:01.542 DEBUG Ripper:172                       "/home/adrien/1 -  - Track 1.mp3 écrit avec succès" 
18:41:01.546 DEBUG Ripper:284                       Progress: 600 
18:41:01.560 DEBUG TagReader:656                    Saving tags to "/home/adrien/1 -  - Track 1.mp3" 
18:41:01.560 DEBUG TagReader:656                    Saving tags to "/home/adrien/3 -  - Track 3.mp3" 
18:41:01.560 DEBUG TagReader:656                    Saving tags to "/home/adrien/2 -  - Track 2.mp3" 
18:41:01.560 DEBUG MessageReply<MessageType>:90     Releasing ID 0 (finished) 
18:41:01.560 DEBUG Ripper:316                       Tagged 1 of 3 files 
18:41:01.560 DEBUG MessageReply<MessageType>:90     Releasing ID 1 (finished) 
18:41:01.560 DEBUG Ripper:316                       Tagged 2 of 3 files 
18:41:01.560 DEBUG MessageReply<MessageType>:90     Releasing ID 2 (finished) 
18:41:01.560 DEBUG Ripper:316                       Tagged 3 of 3 files 
18:41:01.560 DEBUG Ripper:319                       CD ripper finished.




Comment 3


Adrien D





          2017-03-27 17:05:56 UTC
        

my GST plugins :

[I] media-libs/gst-plugins-bad (1.10.3(1.0){tbz2}@16/02/2017): Less plugins for GStreamer
[I] media-libs/gst-plugins-base (0.10.36-r2(0.10)@11/07/2015 1.10.3(1.0){tbz2}@16/02/2017): Basepack of plugins for gstreamer
[I] media-libs/gst-plugins-good (1.10.3(1.0){tbz2}@16/02/2017): Basepack of plugins for GStreamer
[I] media-libs/gst-plugins-ugly (1.10.3(1.0){tbz2}@16/02/2017): Basepack of plugins for gstreamer
[I] media-libs/gstreamer (0.10.36-r2(0.10)@11/07/2015 1.10.3(1.0){tbz2}@16/02/2017): Open source multimedia framework
[I] media-libs/phonon-gstreamer (4.9.0{tbz2}@14/06/2016): Phonon GStreamer backend
[I] media-plugins/gst-plugins-a52dec (1.10.3(1.0){tbz2}@16/02/2017): ATSC A/52 audio decoder plugin for GStreamer
[I] media-plugins/gst-plugins-cdparanoia (1.10.3(1.0){tbz2}@16/02/2017): CD Audio Source (cdda) plugin for GStreamer
[I] media-plugins/gst-plugins-dv (1.10.3(1.0){tbz2}@16/02/2017): DV demuxer and decoder plugin for GStreamer
[I] media-plugins/gst-plugins-dvdread (1.10.3(1.0){tbz2}@16/02/2017): DVD read plugin for GStreamer
[I] media-plugins/gst-plugins-faad (1.10.3(1.0){tbz2}@16/02/2017): AAC audio decoder plugin.
[I] media-plugins/gst-plugins-flac (1.10.3(1.0){tbz2}@16/02/2017): FLAC encoder/decoder/tagger plugin for GStreamer
[I] media-plugins/gst-plugins-lame (1.10.3(1.0)@26/03/2017): MP3 encoder plugin for GStreamer
[I] media-plugins/gst-plugins-libav (1.10.4(1.0){tbz2}@25/02/2017): FFmpeg based gstreamer plugin
[I] media-plugins/gst-plugins-mad (1.10.3(1.0){tbz2}@16/02/2017): MP3 decoder plugin for GStreamer
[I] media-plugins/gst-plugins-meta (1.10.3(1.0){tbz2}@16/02/2017): Meta ebuild to pull in gst plugins for apps
[I] media-plugins/gst-plugins-mpeg2dec (1.10.3(1.0){tbz2}@16/02/2017): MPEG2 decoder plugin for GStreamer
[I] media-plugins/gst-plugins-mplex (1.10.3(1.0){tbz2}@16/02/2017): MPEG/DVD/SVCD/VCD video/audio multiplexing plugin for GStreamer
[I] media-plugins/gst-plugins-opus (1.10.3(1.0){tbz2}@16/02/2017): Opus audio parser plugin for GStreamer
[I] media-plugins/gst-plugins-pulse (1.10.3(1.0){tbz2}@16/02/2017): PulseAudio sound server plugin for GStreamer
[I] media-plugins/gst-plugins-resindvd (1.10.3(1.0){tbz2}@16/02/2017): DVD playback support plugin for GStreamer
[I] media-plugins/gst-plugins-soup (1.10.3(1.0){tbz2}@16/02/2017): HTTP client source/sink plugin for GStreamer
[I] media-plugins/gst-plugins-taglib (1.10.3(1.0){tbz2}@16/02/2017): ID3v2/APEv2 tagger plugin for GStreamer
[I] media-plugins/gst-plugins-v4l2 (1.10.3(1.0){tbz2}@16/02/2017): plugin for gstreamer
[I] media-plugins/gst-plugins-vaapi (1.10.3(1.0){tbz2}@16/02/2017): Hardware accelerated video decoding through VA-API plugin for GStreamer
[I] media-plugins/gst-plugins-vpx (1.10.3(1.0){tbz2}@16/02/2017): VP8/VP9 video encoder/decoder plugin for GStreamer
[I] media-plugins/gst-plugins-wavpack (1.10.3(1.0){tbz2}@16/02/2017): Wavpack audio encoder/decoder plugin for GStreamer
[I] media-plugins/gst-plugins-x264 (1.10.3(1.0){tbz2}@16/02/2017): H.264 encoder plugin for GStreamer




Comment 4


Adrien D





          2017-03-27 17:06:17 UTC
        

Maybe a broken dependancy ? I don't know, but it works now...




Comment 5


Fat-Zer





          2017-03-28 08:24:53 UTC
        

Ok, according to the log everything works fine too, so as far as nobody can reproduce this I assume that one was specific for your system (some weird configuration, some silly mistake, broking linkage, misupdated gstreamer cache or whatever) and resolving the bug.

Feel free to reopen it if you will be able to reproduce the issue.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

