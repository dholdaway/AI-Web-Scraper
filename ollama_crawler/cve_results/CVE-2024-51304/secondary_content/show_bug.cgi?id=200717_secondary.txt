Title: 200717 – app-emulation/xen-tools-3.1.2:  doesn't support XENFB_TOOLS build option for VNC access to paravirtualized domU's
URL: https://bugs.gentoo.org/show_bug.cgi?id=200717

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 200717
app-emulation/xen-tools-3.1.2:  doesn't support XENFB_TOOLS build option for VNC access to paravirtualized domU's
Last modified: 2011-03-26 11:26:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 200717 
      - app-emulation/xen-tools-3.1.2:  doesn't support XENFB_TOOLS build option for VNC access to paravirtualized domU's


Summary:
app-emulation/xen-tools-3.1.2:  doesn't support XENFB_TOOLS build option for ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Gentoo Xen Devs








URL:







Whiteboard:




Keywords:

Inclusion







Depends on:







Blocks:









 





      Reported:
    
2007-11-29 07:44 UTC by Josh West





      Modified:
    
2011-03-26 11:26 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



luckyluke
sven.koehler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Patch to ebuild which provides XENFB_TOOLS=y support

              (xen-tools-3.1.2.ebuild-xenfb-patch,1.14 KB,
                patch)

            
2007-11-29 07:46 UTC,

            Josh West




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Josh West





          2007-11-29 07:44:11 UTC
        

Xen tools can be built with the XENFB_TOOLS=y option (e.g. XENFB_TOOLS=y make tools) to build the /usr/lib/xen/bin/xen-vncfb binary, which is responsible for setting up VNC listeners to paravirtualized domU's (virtual machines).  Unfortunately, the app-emulation/xen-tools-3.1.2 does not support this ability at this time.

Reproducible: Always

Steps to Reproduce:
1. Emerge app-emulation/xen-tools-3.1.2
2. Look for /usr/lib/xen/bin/xen-vncfb or try to create a paravirtualized domU (virtual machine) with the appropriate VNC directives (see Additional Information).

Actual Results:  
VNC consoles for paravirtualized guests is not available.

Expected Results:  
Supported this feature... but hey, its an easy one to miss.

One can leverage the XENFB_TOOLS functionality (once its available in the xen-tools ebuild) by entering directives such as the following in one's VM configuration file:

vfb = [ 'type=vnc' ]
extra = "xencons=ttyS0 console=ttyS0 video=xenfb"

The above will spawn a VNC listener for your guest.




Comment 1


Josh West





          2007-11-29 07:46:37 UTC
        

Created attachment 137298 [details, diff]
Patch to ebuild which provides XENFB_TOOLS=y support

I have written a patch to the ebuild which adds a "xenfb" USE flag and adjusts the build appropriately to support XENFB_TOOLS.

Hope this helps.




Comment 2


Sven





          2008-08-10 00:33:36 UTC
        

What the current status? (xen-tools-3.2.1)

Is vnc support offered now? I can's see any vnc dependencies in the ebuilds. I can't tell, if that's necessary.

Actually, i'm trying to use it on a non-multilib amd64 system and so the hvm use-flag is disabled. I'm only using paravirtualized systems and since new linux domU kernels support a Xen framebuffer device, i'd like to use it.




Comment 3


Robert Buchholz (RETIRED)






          2008-08-31 23:56:47 UTC
        

The xenfb tool has been removed in 3.2.0, per this commit:
http://xenbits.xensource.com/xen-3.2-testing.hg?rev/1ed990bc8da9

It's now built as part of the hvm, but that setup changed a lot and I'm not sure our current ebuild reflects that correctly.




Comment 4


Spooky Ghost





          2011-01-14 10:59:37 UTC
        

Suggest that this bug should be closed won't fix due to:

a) Xen 3.1 is very old
b) VNC for PV guests is available and working with the ioemu use flag in latest 4.0.1




Comment 5


Luca Lesinigo





          2011-01-31 16:03:22 UTC
        

(In reply to comment #4)

I agree with Spooky and I'll add that the VNC console works correctly also in Xen-3.4.*, if you don't want to upgrade to 4.x.





Comment 6


Alexey Shvetsov







          2011-03-26 11:26:17 UTC
        

Xen 4.1 in tree. Please test with it and reopen if it doesnt work









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

