Title: 697628 – www-client/chromium should depend on dev-python/protobuf-python - ./../third_party/dom_distiller_js/protoc_plugins/json_values_converter.py: [...]  ImportError: No module named protobuf.descriptor_pb2
URL: https://bugs.gentoo.org/show_bug.cgi?id=697628

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 697628
www-client/chromium should depend on dev-python/protobuf-python - ./../third_party/dom_distiller_js/protoc_plugins/json_values_converter.py: [...]  ImportError: No module named protobuf.descriptor_pb2
Last modified: 2019-12-30 10:28:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 697628 
      - www-client/chromium should depend on dev-python/protobuf-python - ./../third_party/dom_distiller_js/protoc_plugins/json_values_converter.py: [...]  ImportError: No module named protobuf.descriptor_pb2


Summary:
www-client/chromium should depend on dev-python/protobuf-python - ./../third_...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-10-13 14:56 UTC by Kévin Petit





      Modified:
    
2019-12-30 10:28 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,6.79 KB,
                text/plain)

            
2019-10-13 16:55 UTC,

            Kévin Petit




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kévin Petit





          2019-10-13 14:56:10 UTC
        

www-client/chromium can't be emerged on a system that doesn't have dev-python/protobuf-python installed yet it doesn't pull it as a dependency.

Reproducible: Always

Steps to Reproduce:
1. emerge www-client/chromium
2.
3.
Actual Results:  
Fails to build with the following error message:

Traceback (most recent call last):
  File "../../third_party/dom_distiller_js/protoc_plugins/json_values_converter.py", line 14, in <module>
    from util import plugin_protos, types, writer
  File "/var/tmp/portage/www-client/chromium-78.0.3904.34/work/chromium-78.0.3904.34/third_party/dom_distiller_js/protoc_plugins/util/plugin_protos.py", line 22, in <module>
    from google.protobuf.descriptor_pb2 import FieldDescriptorProto
ImportError: No module named protobuf.descriptor_pb2
--plugin_out: protoc-gen-plugin: Plugin failed with status code 1.
Protoc has returned non-zero status: 1

Expected Results:  
Successful build

Installing dev-python/protobuf-python enables the build to complete.




Comment 1


Stephan Hartmann (RETIRED)






          2019-10-13 16:01:29 UTC
        

Please attach emerge --info and full build log.




Comment 2


Kévin Petit





          2019-10-13 16:55:18 UTC
        

Created attachment 592656 [details]
emerge --info




Comment 3


Stephan Hartmann (RETIRED)






          2019-10-16 15:06:37 UTC
        

Please attach the full build.log (compressed if needed). The snippet showing the failure is not enough to track down the problem.

protobuf-python is bundled with chromium sources (third_party/protobuf) and the dependency is therefore not needed.




Comment 4


Kévin Petit





          2019-11-03 21:51:17 UTC
        

Thanks for having a look and sorry for the delay.

>protobuf-python is bundled with chromium sources (third_party/protobuf) and the dependency is therefore not needed.

Right, good to know it was just a workaround.

I've just uninstalled protobuf-python and the update to www-client/chromium-78.0.3904.87 succeeded. Either the ebuild was fixed or whatever was creating the issue on my system has gone away.

Since the version I reported this on no longer is part of the portage tree, I can't try that one again. Reject?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

