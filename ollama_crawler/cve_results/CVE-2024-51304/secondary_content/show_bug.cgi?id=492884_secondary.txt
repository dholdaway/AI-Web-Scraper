Title: 492884 – net-libs/nodejs: No supported Python implementation
URL: https://bugs.gentoo.org/show_bug.cgi?id=492884

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 492884
net-libs/nodejs: No supported Python implementation
Last modified: 2013-11-30 17:58:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 492884 
      - net-libs/nodejs: No supported Python implementation


Summary:
net-libs/nodejs: No supported Python implementation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mike Gilbert








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-11-29 18:12 UTC by John L. Poole





      Modified:
    
2013-11-30 17:58 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



bugs
patrick









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,1.68 KB,
                text/plain)

            
2013-11-29 18:17 UTC,

            John L. Poole




Details





environment

              (die.env,205.32 KB,
                text/plain)

            
2013-11-29 18:18 UTC,

            John L. Poole




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John L. Poole





          2013-11-29 18:12:25 UTC
        

emerge update for net-libs/nodjs results in:

 * No Python implementation found for the build. This is usually
 * a bug in the ebuild. Please report it to bugs.gentoo.org
 * along with the build log.
 * ERROR: net-libs/nodejs-0.10.21::gentoo failed (setup phase):
 *   No supported Python implementation installed.


I have two slots of python (2.7 and 3.2) and the same result occurs when I try to perform an update.  Here are the two attempts:

themis portage # emerge --deep --newuse --update world
Calculating dependencies... done!

>>> Verifying ebuild manifests
>>> Running pre-merge checks for net-fs/samba-3.6.20
>>> Running pre-merge checks for x11-drivers/xf86-input-synaptics-1.7.1
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found kernel object directory:
 *     /lib/modules/3.7.10-gentoo-r1/build
 * Found sources for kernel version:
 *     3.7.10-gentoo-r1
>>> Running pre-merge checks for kde-base/kdelibs-4.10.5-r1

>>> Emerging (1 of 219) net-libs/nodejs-0.10.21
 * node-v0.10.21.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                               [ ok ]
 * No Python implementation found for the build. This is usually
 * a bug in the ebuild. Please report it to bugs.gentoo.org
 * along with the build log.

 * ERROR: net-libs/nodejs-0.10.21::gentoo failed (setup phase):
 *   No supported Python implementation installed.
 *
 * Call stack:
 *              ebuild.sh, line  93:  Called pkg_setup
 *              ebuild.sh, line 317:  Called python-any-r1_pkg_setup
 *   python-any-r1.eclass, line 327:  Called python_setup
 *   python-any-r1.eclass, line 315:  Called die
 * The specific snippet of code:
 *      die "No supported Python implementation installed."
 *
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-0.10.21::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-0.10.21::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/die.env'.
 * Working directory: '/usr/lib64/portage/pym'
 * S: '/var/tmp/portage/net-libs/nodejs-0.10.21/work/node-v0.10.21'

>>> Failed to emerge net-libs/nodejs-0.10.21, Log file:

>>>  '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'

 * Messages for package net-libs/nodejs-0.10.21:

 * No Python implementation found for the build. This is usually
 * a bug in the ebuild. Please report it to bugs.gentoo.org
 * along with the build log.
 * ERROR: net-libs/nodejs-0.10.21::gentoo failed (setup phase):
 *   No supported Python implementation installed.
 *
 * Call stack:
 *              ebuild.sh, line  93:  Called pkg_setup
 *              ebuild.sh, line 317:  Called python-any-r1_pkg_setup
 *   python-any-r1.eclass, line 327:  Called python_setup
 *   python-any-r1.eclass, line 315:  Called die
 * The specific snippet of code:
 *      die "No supported Python implementation installed."
 *
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-0.10.21::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-0.10.21::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/die.env'.
 * Working directory: '/usr/lib64/portage/pym'
 * S: '/var/tmp/portage/net-libs/nodejs-0.10.21/work/node-v0.10.21'
themis portage # eselect python list
Available Python interpreters:
  [1]   python2.7 *
  [2]   python3.2
themis portage # eselect python set 2
themis portage # emerge --deep --newuse --update world
Calculating dependencies... done!

>>> Verifying ebuild manifests
>>> Running pre-merge checks for net-fs/samba-3.6.20
>>> Running pre-merge checks for x11-drivers/xf86-input-synaptics-1.7.1
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found kernel object directory:
 *     /lib/modules/3.7.10-gentoo-r1/build
 * Found sources for kernel version:
 *     3.7.10-gentoo-r1
>>> Running pre-merge checks for kde-base/kdelibs-4.10.5-r1

>>> Emerging (1 of 219) net-libs/nodejs-0.10.21
 * node-v0.10.21.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                               [ ok ]
 * No Python implementation found for the build. This is usually
 * a bug in the ebuild. Please report it to bugs.gentoo.org
 * along with the build log.

 * ERROR: net-libs/nodejs-0.10.21::gentoo failed (setup phase):
 *   No supported Python implementation installed.
 *
 * Call stack:
 *              ebuild.sh, line  93:  Called pkg_setup
 *              ebuild.sh, line 317:  Called python-any-r1_pkg_setup
 *   python-any-r1.eclass, line 327:  Called python_setup
 *   python-any-r1.eclass, line 315:  Called die
 * The specific snippet of code:
 *      die "No supported Python implementation installed."
 *
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-0.10.21::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-0.10.21::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/die.env'.
 * Working directory: '/usr/lib64/portage/pym'
 * S: '/var/tmp/portage/net-libs/nodejs-0.10.21/work/node-v0.10.21'

>>> Failed to emerge net-libs/nodejs-0.10.21, Log file:

>>>  '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'

 * Messages for package net-libs/nodejs-0.10.21:

 * No Python implementation found for the build. This is usually
 * a bug in the ebuild. Please report it to bugs.gentoo.org
 * along with the build log.
 * ERROR: net-libs/nodejs-0.10.21::gentoo failed (setup phase):
 *   No supported Python implementation installed.
 *
 * Call stack:
 *              ebuild.sh, line  93:  Called pkg_setup
 *              ebuild.sh, line 317:  Called python-any-r1_pkg_setup
 *   python-any-r1.eclass, line 327:  Called python_setup
 *   python-any-r1.eclass, line 315:  Called die
 * The specific snippet of code:
 *      die "No supported Python implementation installed."
 *
 * If you need support, post the output of `emerge --info '=net-libs/nodejs-0.10.21::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-libs/nodejs-0.10.21::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/nodejs-0.10.21/temp/die.env'.
 * Working directory: '/usr/lib64/portage/pym'
 * S: '/var/tmp/portage/net-libs/nodejs-0.10.21/work/node-v0.10.21'
themis portage # eix net-libs/nodejs
[U] net-libs/nodejs
     Available versions:  ~0.8.26^t 0.10.21^t ~0.10.22^t [M]~0.11.6^t [M]~0.11.7^t [M]~0.11.8^t [M]~0.11.9^t {+npm +snapshot}
     Installed versions:  0.10.17^t(06:39:11 AM 09/24/2013)(npm snapshot)
     Homepage:            http://nodejs.org/
     Description:         Evented IO for V8 Javascript

themis portage #

Emerge info:
themis portage # emerge --info
Portage 2.2.7 (default/linux/amd64/13.0/desktop, gcc-4.7.3, glibc-2.16.0, 3.7.10-gentoo-r1 x86_64)
=================================================================
System uname: Linux-3.7.10-gentoo-r1-x86_64-Intel-R-_Core-TM-_i5_CPU_M_460_@_2.53GHz-with-gentoo-2.2
KiB Mem:     5910228 total,   2345112 free
KiB Swap:     524284 total,    421452 free
Timestamp of tree: Thu, 28 Nov 2013 09:45:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.7.5, 3.2.5-r1
dev-util/cmake:           2.8.10.2-r2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.5.4, 4.6.3, 4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.16.0
Repositories: gentoo x-portage
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/maven-bin-2.2/conf /usr/share/maven-bin-3.0/conf /usr/share/polkit-1/actions"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.osuosl.org/  http://distfiles.gentoo.org"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://plug/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 berkdb bluetooth branding bzip2 cairo cdda cdr cli consolekit cracklib crypt cups cxx dbus dri dts dvd dvdr emboss encode exif fam firefox flac fortran gdbm gif gpm gtk iconv ipv6 jpeg lcms ldap libnotify lock mad mmx mng modules mp3 mp4 mpeg mudflap multilib ncurses nls nptl ogg opengl openmp pam pango pcre pdf png policykit ppds qt3support readline sdl session spell sse sse2 ssl startup-notification svg tcpd thunar tiff truetype udev udisks unicode upower usb vorbis wxwidgets x264 xcb xml xv xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev mouse keyboard synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2" RUBY_TARGETS="ruby19 ruby18" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

themis portage #

themis portage # emerge -pqv '=net-libs/nodejs-0.10.21::gentoo'
[ebuild     U ] net-libs/nodejs-0.10.21 [0.10.17] USE="npm snapshot"
themis portage #

Build and environment to follow.




Comment 1


John L. Poole





          2013-11-29 18:17:51 UTC
        

Created attachment 364210 [details]
build.log




Comment 2


John L. Poole





          2013-11-29 18:18:12 UTC
        

Created attachment 364212 [details]
environment




Comment 3


Mike Gilbert






          2013-11-29 20:39:26 UTC
        

Exactly which version of python-2.7 do you have installed?

The ebuild is actually missing ${PYTHON_DEPS} in DEPEND.




Comment 4


Johan Bergström





          2013-11-29 20:46:36 UTC
        

Thanks for the bug report. It's actually a duplicate of bug 487570.

*** This bug has been marked as a duplicate of bug 487570 ***




Comment 5


John L. Poole





          2013-11-30 04:58:35 UTC
        

Answer for Comment #3:

[I] dev-lang/python
     Available versions:
     (2.6)  2.6.8-r3
     (2.7)  2.7.5-r3 ~2.7.5-r4
     (3.2)  3.2.5-r3
     (3.3)  ~3.3.2-r2 ~3.3.3
       {-berkdb build doc examples gdbm hardened ipv6 +ncurses +readline sqlite +ssl +threads tk +wide-unicode wininst +xml ELIBC="uclibc"}
     Installed versions:  2.7.5-r3(2.7)(11:04:17 AM 11/29/2013)(gdbm ipv6 ncurses readline sqlite ssl threads tk wide-unicode xml -berkdb -build -doc -examples -hardened -wininst ELIBC="-uclibc") 3.2.5-r3(3.2)(11:02:20 AM 11/29/2013)(gdbm ipv6 ncurses readline ssl threads tk wide-unicode xml -build -doc -examples -hardened -sqlite -wininst ELIBC="-uclibc")
     Homepage:            http://www.python.org/
     Description:         An interpreted, interactive, object-oriented programming language




Comment 6


Mike Gilbert






          2013-11-30 05:53:00 UTC
        

(In reply to John L. Poole from comment #5)

eix output tells me nothing about what you have installed, only about what is present in the portage repository.




Comment 7


John L. Poole





          2013-11-30 12:27:10 UTC
        

The eix command tells me that I have installed version 2.7.5-r3(2.7).  When you asked what version of of 2.7 I had installed, using eix is what I thought would provide you the answer.

If you tell me what command to execute to obtain the information you desire I shall gladly execute it and provide the output here.




Comment 8


Mike Gilbert






          2013-11-30 15:44:50 UTC
        

(In reply to John L. Poole from comment #7)
> The eix command tells me that I have installed version 2.7.5-r3(2.7).  When
> you asked what version of of 2.7 I had installed, using eix is what I
> thought would provide you the answer.

eix uses the background color to indicate installed versions. That obviously gets lost when you paste it into a textarea in a web browser.

> If you tell me what command to execute to obtain the information you desire
> I shall gladly execute it and provide the output here.

If you had simply said "2.7.5-r3", that would be enough; I don't need to see the entire output of some command.

However, "equery list dev-lang/python" does produce more useful output when copy/pasting.

If you do indeed have dev-lang/python-2.7.5-r3 installed, I do not think this bug is a duplicate of 487570.

Can you run the following and tell me if it outputs 0 or 1?

portageq has_version / '>=dev-lang/python-2.7.5-r2:2.7'; echo $?




Comment 9


Mike Gilbert






          2013-11-30 16:07:40 UTC
        

A little more information on where I am going with this:

If that command outputs 0, then everything is fine and I have no explanation for why nodejs will not build on your system. We will have do do some more poking.

If that command outputs 1, then portage does not think you have a new enough version of python:2.7 installed. I would suggest re-installing (and possibly upgrading) python:2.7.

emerge --oneshot dev-lang/python:2.7




Comment 10


John L. Poole





          2013-11-30 17:58:06 UTC
        

Here's the command & output requested:

	themis portage # portageq has_version / '>=dev-lang/python-2.7.5-r2:2.7'; echo $?
	0
	themis portage #

Here's what would emerge if I did so:

	themis portage # emerge --oneshot dev-lang/python:2.7 -p

	These are the packages that would be merged, in order:

	Calculating dependencies... done!
	[ebuild   R    ] dev-lang/python-2.7.5-r3
	themis portage #

I then went ahead and tried emerging nodejs just to see if I got the same result, and I did not: nodejs successfully installed:

>>> Installing (1 of 1) net-libs/nodejs-0.10.21

I had been updating some other programs (emerge --update...) while this bug was pending, so my system has changed since the inception of this ticket.  I'm guessing there was a dependency that was fixed.  I regret we didn't get to the bottom of the cause.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

