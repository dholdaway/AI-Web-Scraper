Title: 106139 – attempt to compile new version of glibc dies with "bad register name"
URL: https://bugs.gentoo.org/show_bug.cgi?id=106139

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 106139
attempt to compile new version of glibc dies with "bad register name"
Last modified: 2005-11-28 22:29:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 106139 
      - attempt to compile new version of glibc dies with "bad register name"


Summary:
attempt to compile new version of glibc dies with "bad register name"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-15 20:04 UTC by Kendric Beachey





      Modified:
    
2005-11-28 22:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kendric Beachey





          2005-09-15 20:04:13 UTC
        

I am following the instructions on upgrading amd64 from 2004.3 profile to
2005.0, found at http://amd64.gentoo.org/howtos/index.xml?part=1&chap=1 as asked
to by portage.

Running the script as asked cranks away for a while, and finally the glibc
compile dies with this error:

{standard input}: Assembler messages:
{standard input}:1818: Error: bad register name `%r4096'
{standard input}:1818: Error: no such instruction: `d'
make[2]: ***
[/var/tmp/portage/glibc-2.3.5-r1/work/build-default-x86_64-pc-linux-gnu-linuxthreads/crypt/crypt_util.o]
Error 1
make[2]: Leaving directory `/var/tmp/portage/glibc-2.3.5-r1/work/glibc-2.3.5/crypt'
make[1]: *** [crypt/others] Error 2
make[1]: Leaving directory `/var/tmp/portage/glibc-2.3.5-r1/work/glibc-2.3.5'
make: *** [all] Error 2

!!! ERROR: sys-libs/glibc-2.3.5-r1 failed.
!!! Function toolchain-glibc_src_compile, Line 226, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.

 * Upgrade failed in stage 1.  You still have a fully functional
 * 2004.3 system.

 * You may safely re-execute this upgrade script after correcting any
 * any problems to resume the upgrade process.

 * Please report the following error and any errors above if you file
 * a bug at http://bugs.gentoo.org
emerge emul-glibc failed




Reproducible: Always
Steps to Reproduce:
1. cd /usr/portage/profiles/default-linux/amd64/2005.0/scripts
2. sh ./2004.3-2005.0upgrade.sh
3. wait about 5 minutes

Actual Results:  
The crash described above.

Expected Results:  
Finished the compile and proceed with the profile upgrade.


Here is my emerge info:

Portage 2.0.51.22-r2 (default-linux/amd64/2004.3, gcc-3.4.3,
glibc-2.3.4.20041102-r0, 2.6.9-gentoo-r14 x86_64)
=================================================================
System uname: 2.6.9-gentoo-r14 x86_64 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System version 1.4.16
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.4-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -msse2 -mfpmath=sse -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=k8 -msse2 -mfpmath=sse -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 3dnowex S3TC X Xaw3d a52 aac acpi4linux aim amd apache2 apm arts
audiofile avantgo avi beep blender-game browserplugin bzlib calendar cddb
cdparanoia cdrom cgi chroot clamav client css dba dbcp devfs26 devmap dga dillo
djbfft dnd dts dv dvd dvdr dvdread editor emacs encode evo exif expat extensions
fame fax ffmpeg fftw fmod freetype ftp gb gd gif gimp gimpprint gkrellm glgd
glut gnokii gnome gnomedb gs gtk2 gtkhtml hardenedphp hbci icq icu idea ieee1394
image imagemagick imap innodb java javascript joystick jpeg jpeg2k kde
koffice-plugin ladcca latex lcd lcms libcaca libdsk libgda libsamplerate live
lm_sensors lynxkeymap lzo maildir mbox md5sum mhash mime ming mixer mng monkey
mozcalendar mp3 mpeg mplayer msn multilib music mysql mythtv net network nvidia
oav ofx openal oscar pcre pda pdf pear-db php plotutils png povray ppds
quicktime rplay rtc server silc sndfile sox speedo spell ssl stroke svg t1lib
tga theora tiff timidity transcode type1 v4l v4l2 vcd vcdimager videos vim
virus-scan vnc wmf wxwindows xanim xchattext xface xfs xine xosd xprint
xscreensaver xvid xvmc yahoo yv12 zvbi userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Mike Doty (RETIRED)






          2005-10-18 18:15:57 UTC
        

try again with -r2




Comment 2


Simon Stelling (RETIRED)






          2005-11-19 04:27:15 UTC
        

no response, so i assume -r2 did the trick. if not, please reopen




Comment 3


Kendric Beachey





          2005-11-19 04:38:57 UTC
        

How odd--it appears my response to the "-r2" suggestion was not recorded.  I
sent it via email rather than the web interface.  Here it is again:

Sorry to be dense, but...what?  :-)

Is that a command line option, or a new ebuild revision number, or the
square of the negative value of the radius, or...?




Comment 4


Simon Stelling (RETIRED)






          2005-11-19 04:41:58 UTC
        

with -r2 Mike meant 2.3.5-r2, the latest stable glibc




Comment 5


Kendric Beachey





          2005-11-28 22:29:29 UTC
        

(In reply to comment #4)
> with -r2 Mike meant 2.3.5-r2, the latest stable glibc

Thanks for the clarification.  :-)  It appears that after doing `emerge sync`
and thereby picking up 2.3.5-r2, the process has completed successfully.  Hooray!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

