Title: 227319 – media-gfx/inkscape-0.46-r2 -O2 makes it crash at startup on ppc
URL: https://bugs.gentoo.org/show_bug.cgi?id=227319

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 227319
media-gfx/inkscape-0.46-r2 -O2 makes it crash at startup on ppc
Last modified: 2009-07-22 15:52:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 227319 
      - media-gfx/inkscape-0.46-r2 -O2 makes it crash at startup on ppc


Summary:
media-gfx/inkscape-0.46-r2 -O2 makes it crash at startup on ppc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Graphics Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-06-15 21:11 UTC by Laurent G.





      Modified:
    
2009-07-22 15:52 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



ppc
zhangweiwu









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




backtrace of the startup crash of inkscape compile with CXXFLAGS containing -O2 on ppc

              (inkscape_O2.bktrc,2.16 KB,
                text/plain)

            
2008-06-15 21:14 UTC,

            Laurent G.




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Laurent G.





          2008-06-15 21:11:40 UTC
        

The exec crashes with -O2 whether with or without -g.
It does run well without -O2 whether with or without -g.


Reproducible: Always

Steps to Reproduce:
1.launch inkscape
2.
3.




Portage 2.1.5.5 (default-linux/ppc/ppc32/2007.0, gcc-4.2.4, glibc-2.8_p20080602-r0, 2.6.24-gentoo-r3-l0 ppc)
=================================================================
System uname: 2.6.24-gentoo-r3-l0 ppc 7447A, altivec supported
Timestamp of tree: Sun, 15 Jun 2008 08:36:01 +0000
distcc 2.18.3 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r4
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.62
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="ppc ~ppc"
CBUILD="powerpc-unknown-linux-gnu"
CFLAGS="-mcpu=7400 -O2 -pipe -fno-strict-aliasing -maltivec -mabi=altivec"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-mcpu=7400 -O2 -pipe -fno-strict-aliasing -maltivec -mabi=altivec"
DISTDIR="/in_n_outs/distfiles"
FEATURES="ccache distlocks parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.uni-c.dk/pub/gentoo/ ftp://trumpetti.atm.tut.fi/gentoo/ ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/ ftp://ftp.heanet.ie/pub/gentoo/ ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo http://mirror.gentoo.no/ ftp://ftp.du.se/pub/os/gentoo "
LANG="C"
LC_ALL="C"
LDFLAGS=""
LINGUAS="fr fr_FR"
MAKEOPTS="-j2"
PKGDIR="/in_n_outs/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/bazaar"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 acl alsa altivec apache2 berkdb branding cdr cli cracklib crypt cscope cups dba dri dvd encode fbcon firefox flac flash fortran gb gcj gd gdbm gnome gpm gtk2 iconv ipv6 isdnlog java jikes jpeg kde kdehiddenvisibility midi mng mozdevelop mozsvg mudflap ncurses nls nptl nptlonly nsplugin objc oggvorbis opengl openmp pam pcre pdf pdflib perl png povray ppc ppds pppd python qt readline reflection samba scanner session speex spell spl ssl svg tcpd tetex theora threads tiff tk udev unicode usb wmf xine xinerama xml2 xorg xosd xprint zlib" ALSA_CARDS="snd-aoa" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse wacom" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr fr_FR" USERLAND="GNU" VIDEO_CARDS="ati fbdev radeon r128 fglrx"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Laurent G.





          2008-06-15 21:14:35 UTC
        

Created attachment 156989 [details]
backtrace of the startup crash of inkscape compile with CXXFLAGS containing -O2 on ppc




Comment 2


Laurent G.





          2008-06-22 17:59:11 UTC
        

(In reply to comment #1)
> Created an attachment (id=156989) [edit]
> backtrace of the startup crash of inkscape compile with CXXFLAGS containing -O2
> on ppc

Funny enough, in -O1 and no -g, it runs inside gdb but crashes outside. 





Comment 3


Zhang Weiwu





          2008-10-16 01:53:34 UTC
        

could it be related to this one?
https://bugs.launchpad.net/inkscape/+bug/192852




Comment 4


Markus Meier






          2008-10-18 20:17:02 UTC
        

adding ppc, had no problems with different CFLAGS on amd64/x86.




Comment 5


michael@smith-li.com





          2009-05-02 22:40:07 UTC
        

media-gfx/inkscape-0.46-r6 fails to start up for me with *any* combination of C(XX)?FLAGS.

So far I've tried:
Second attempt:
-O1 -mcpu=G5 -mtune=G5 -fno-strict-aliasing -pipe
-O1 -mcpu=G5 -mtune=G5 -fno-strict-aliasing -pipe

Third attempt:
-mcpu=G5 -mtune=G5 -fno-strict-aliasing -pipe
-mcpu=G5 -mtune=G5 -fno-strict-aliasing -pipe

Fourth attempt:
-fno-strict-aliasing -pipe
-fno-strict-aliasing -pipe

I'll get some debug information up here shortly.




Comment 6


michael@smith-li.com





          2009-05-02 22:47:26 UTC
        

Oops, sorry, to be clear, I meant media-gfx/inkscape-0.46-r5 -- -r6 is the same as -r5 except I added filter-flags options to it to test.




Comment 7


Joe Jezak (RETIRED)






          2009-07-22 15:52:36 UTC
        

It seems to work fine on my G5 and on my Powerbook with -O2 and -Os. Can you still reproduce this problem? Please re-open the bug if you can.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

