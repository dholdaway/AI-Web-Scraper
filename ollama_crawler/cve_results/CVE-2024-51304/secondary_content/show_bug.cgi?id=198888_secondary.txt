Title: 198888 – games-board/pouetchess fails to start because it cannot load textures
URL: https://bugs.gentoo.org/show_bug.cgi?id=198888

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 198888
games-board/pouetchess fails to start because it cannot load textures
Last modified: 2009-04-07 01:22:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 198888 
      - games-board/pouetchess fails to start because it cannot load textures


Summary:
games-board/pouetchess fails to start because it cannot load textures
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-11-12 05:01 UTC by Stephen Bosch





      Modified:
    
2009-04-07 01:22 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stephen Bosch





          2007-11-12 05:01:43 UTC
        

A newly installed pouetchess fails to start. On first start, it asks the user to select a language, then fails with these errors:

~$ pouetChess
libGL warning: 3D driver claims to not support visual 0x4b
Error : Loading of :/usr/share/games/pouetchess/textures/background.jpg failed
Error : Loading of 'E_scene_main_menu' failed: exiting...
~$                               

I thought it might be permissions related, but the user that launched this is in the games group and even doing 'chmod -R 777 *' in the pouetchess directory fails to change the results.

Reproducible: Always

Steps to Reproduce:
1. 'emerge pouetchess'
2. add user to games group, if necessary
3. run pouetchess

Actual Results:  
select a language, then fails with these errors:

~$ pouetChess
libGL warning: 3D driver claims to not support visual 0x4b
Error : Loading of :/usr/share/games/pouetchess/textures/background.jpg failed
Error : Loading of 'E_scene_main_menu' failed: exiting...
~$        

Expected Results:  
pouetchess should run.




Comment 1


Mr. Bones. (RETIRED)






          2007-11-12 08:29:23 UTC
        

reopen with the output from emerge --info




Comment 2


Stephen Bosch





          2007-11-17 21:20:49 UTC
        

Here is my emerge --info:

Portage 2.1.3.9 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.5-r4, 2.6.22-gentoo-r5 i686)
=================================================================
System uname: 2.6.22-gentoo-r5 i686 AMD Duron(tm)
Timestamp of tree: Sun, 30 Sep 2007 19:00:02 +0000
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.4.3-r1, 1.5.24
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/afs/C /etc/afs/afsws /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://gentoo.mirrors.tds.net/gentoo http://gentoo.mirrors.tds.net/gentoo ftp://gentoo.chem.wisc.edu/gentoo/ http://gentoo.chem.wisc.edu/gentoo/ ftp://mirror.datapipe.net/gentoo"
LANG="en_US"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X aac aalib acl acpi afs alsa avi berkdb bidi bitmap-fonts cli cracklib crypt cups curl dri dvb dvd dvdr fortran gdbm gpm gtk gtk2 iconv imagemagick imap imlib ipv6 isdnlog java kde ldap lib midi mmx mozilla mp3 mudflap nas ncurses nls nptl nptlonly nsplugin oggvorbis opengl openmp oss pam pcre pda pdflib perl png ppds pppd python qt qt3 quicktime readline real reflection samba sdl session spl ssl svga theora tiff truetype truetype-fonts type1-fonts unicode usb videos win32codecs wmf www x86 xinerama xml xml2 xorg xv xvid zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon fglrx vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 3


Mr. Bones. (RETIRED)






          2007-11-17 22:53:02 UTC
        

The top-level default-linux/x86/2007.0 profile is only for people who know what they're doing.  You should be using default-linux/x86/2007.0/desktop.

Change your profile and do emerge --newuse -vuD world and revdep-rebuild.




Comment 4


Stephen Bosch





          2007-11-19 23:43:09 UTC
        

(In reply to comment #3)
> The top-level default-linux/x86/2007.0 profile is only for people who know what
> they're doing.  You should be using default-linux/x86/2007.0/desktop.
> 
> Change your profile and do emerge --newuse -vuD world and revdep-rebuild.

Thanks for looking at this.

If there's a problem with my USE flags, please tell me which ones to fix.

I've already done an emerge world and revdep-rebuild with this current profile, and it took days and caused all kinds of headache because of the expat upgrade, and I'm not going to spend another week fixing what isn't broken.

Nowhere in the upgrade documentation NOR in the eselect output does it say anything about the top-level profile being "only for people who know what they are doing". It's a supported, standard profile:

~$ eselect profile list
Available profile symlink targets:
  [1]   default-linux/x86/2006.1
  [2]   default-linux/x86/no-nptl
  [3]   default-linux/x86/no-nptl/2.4
  [4]   default-linux/x86/2006.1/desktop
  [5]   default-linux/x86/2007.0 *
  [6]   default-linux/x86/2007.0/desktop
  [7]   hardened/x86/2.6
  [8]   selinux/2007.0/x86
  [9]   selinux/2007.0/x86/hardened

The USE flags are different. You can see from my emerge --info that I've got different USE flags anyway. I can't see how that's relevant to this bug. If there are unmet dependencies, the ebuild should report them -- but it doesn't, and it builds just fine. The problem is that it doesn't run, as shown above.




Comment 5


Mr. Bones. (RETIRED)






          2007-11-20 00:06:09 UTC
        

Well since it complains that it can't load a jpeg, I'd guess that you're probably missing the jpeg use flag.




Comment 6


Stephen Bosch





          2007-11-20 02:37:57 UTC
        

(In reply to comment #5)
> Well since it complains that it can't load a jpeg, I'd guess that you're
> probably missing the jpeg use flag.

Even if there is no jpeg flag set in /etc/make.conf, pouetchess doesn't have a jpeg use flag, and the only two packages in the dependency graph were already compiled using the jpeg flag when I did the emerge -uaD world and revdep-rebuild back in September:

~$ equery depgraph pouetchess | grep jpeg
            `-- media-libs/jpeg-6b-r7 [ jpeg ]
        `-- media-libs/jasper-1.701.0 [ jpeg2k ]
            `-- media-libs/jpeg-6b-r7 [ jpeg ]
        `-- media-libs/jasper-1.701.0 [ jpeg2k ]
~$ emerge -vp media-libs/jpeg

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] media-libs/jpeg-6b-r7  621 kB

Total: 1 package (1 reinstall), Size of downloads: 621 kB
~$ emerge -vp =media-libs/jasper-1.701.0

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] media-libs/jasper-1.701.0  USE="opengl -jpeg*" 1,330 kB

Total: 1 package (1 reinstall), Size of downloads: 1,330 kB
~$





Comment 7


Mr. Bones. (RETIRED)






          2007-11-20 02:42:37 UTC
        

set the jpeg use flag in make.conf and do emerge --newuse -vuD world




Comment 8


Stephen Bosch





          2007-11-20 17:43:42 UTC
        

(In reply to comment #7)
> set the jpeg use flag in make.conf and do emerge --newuse -vuD world

It doesn't feel like you read my previous post. Please address my comments below.

The packages in the dependency graph for pouetchess that use the jpeg use flag have already been built with it. Doing an emerge --newuse -vuD world is going to rebuild everything and it will take two days, assuming it even completes without a major failure. If pouetchess needs that jpeg support, then the dependencies in the ebuild should reflect that, instead of building quietly and delivering a binary that does not run. (And in this case, the jpeg dependencies *are* met, so this *still* doesn't explain why it won't run.)

This is a bug post about the ebuild. The ebuild needs fixing so that it reports its dependencies honestly. I honestly don't care if it refuses to build or reports a dependency problem, as long as it tells me what's missing/wrong. But it doesn't do that. It builds. If the dependencies are not met, it should not even build.




Comment 9


Mr. Bones. (RETIRED)






          2007-11-20 18:32:26 UTC
        

You're getting close to me marking this bug INVALID.  Do what I said in comment #7 please and report back.




Comment 10


Mr. Bones. (RETIRED)






          2007-11-28 19:01:01 UTC
        

Let me know if it's still a problem.




Comment 11


Mr. Bones. (RETIRED)






          2009-04-07 01:21:25 UTC
        

bugzilla




Comment 12


Mr. Bones. (RETIRED)






          2009-04-07 01:22:00 UTC
        

works for me









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

