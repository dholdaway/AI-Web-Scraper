Title: 125383 – media-video/gpac-0.4.1_pre20060122 fails to install because MP4Box (MP4Client MP42Avi) fails to link (probably missing library)
URL: https://bugs.gentoo.org/show_bug.cgi?id=125383

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125383
media-video/gpac-0.4.1_pre20060122 fails to install because MP4Box (MP4Client MP42Avi) fails to link (probably missing library)
Last modified: 2006-03-10 06:40:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125383 
      - media-video/gpac-0.4.1_pre20060122 fails to install because MP4Box (MP4Client MP42Avi) fails to link (probably missing library)


Summary:
media-video/gpac-0.4.1_pre20060122 fails to install because MP4Box (MP4Client...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-07 10:58 UTC by clemenswaechter





      Modified:
    
2006-03-10 06:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


clemenswaechter





          2006-03-07 10:58:26 UTC
        

Today (7.3.2006) I tried to update my gpac installation but the emerge failed with this error message:

snip
---------
install -s -m 755 bin/gcc/MP4Box "/var/tmp/portage/gpac-0.4.1_pre20060122/image/                    
/usr/bin"
install: cannot stat `bin/gcc/MP4Box': No such file or directory
make: *** [install] Error 1
---------
snip

I skimmed the output of emerge and figured that the real error occurs here:

snip
---------
gcc -Wl,--warn-common -o ../../bin/gcc/MP4Box main.o filedump.o fileimport.o -L.                    
./../bin/gcc -lgpac -lz
../../bin/gcc/libgpac.so: undefined reference to `ReplaceIRINode'
../../bin/gcc/libgpac.so: undefined reference to `svg_attributes_copy'
../../bin/gcc/libgpac.so: undefined reference to `gf_sg_svg_node_init'
../../bin/gcc/libgpac.so: undefined reference to `svg_store_embedded_data'
../../bin/gcc/libgpac.so: undefined reference to `gf_svg_get_attribute_info
(subseqent similar lines omitted)
collect2: ld returned 1 exit status
make[2]: *** [MP4Box] Error 1
make[2]: Leaving directory `/var/tmp/portage/gpac-0.4.1_pre20060122/work/gpac/ap                    
plications/mp4box'
----------
snip

This fails for MP4Client and MP42Avi, too. However, make continues after the
linking fails, so a lot of output followed this message.

Steps to reproduce:
1. emerge =media-video/gpac-0.4.1_pre20060122
2. watch it fail (at least, this "works" for me, sorry I don't have better steps to reproduce)

Actual results:
make install fails as stated above

Expected results:
MP4Box, MP4Client, MP42Avi should have linked correctly and then installed

Output of emerge --info:
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.14.2 i686)
=================================================================
System uname: 2.6.14.2 i686 AMD Athlon(TM) XP 2600+
Gentoo Base System version 1.6.14
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -fstrength-reduce"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -fstrength-reduce"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://gentoo.inode.at/"
LC_ALL="en_US.UTF-8"
LINGUAS="de ja"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X a52 aac aalib acpi alsa apm arts audiofile avi bash-completion berkdb bitmap-fonts bonobo bzip2 canna cdr cjk crypt cups curl doc dts dvd dvdr dvdread eds emboss encode esd exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gnome gpm gstreamer gtk gtk2 gtkhtml guile iconv idn imagemagick imlib immqt-bc ipv6 jabber java jpeg junit kde lcms libg++ libwww mad matroska mikmod mmx mng motif mp3 mpeg ncurses nls ogg oggvorbis opengl oss pam pcre pdflib perl png python qt quicktime readline samba sdl slang softmmu spell ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts udev unicode vorbis xml xml2 xmms xv xvid zlib linguas_de linguas_ja userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LDFLAGS

Please let me know if you need further information or if you want me to test s.th.

Regards,

Clemens W




Comment 1


clemenswaechter





          2006-03-07 10:58:26 UTC
        

Today (7.3.2006) I tried to update my gpac installation but the emerge failed with this error message:

snip
---------
install -s -m 755 bin/gcc/MP4Box "/var/tmp/portage/gpac-0.4.1_pre20060122/image/                    
/usr/bin"
install: cannot stat `bin/gcc/MP4Box': No such file or directory
make: *** [install] Error 1
---------
snip

I skimmed the output of emerge and figured that the real error occurs here:

snip
---------
gcc -Wl,--warn-common -o ../../bin/gcc/MP4Box main.o filedump.o fileimport.o -L.                    
./../bin/gcc -lgpac -lz
../../bin/gcc/libgpac.so: undefined reference to `ReplaceIRINode'
../../bin/gcc/libgpac.so: undefined reference to `svg_attributes_copy'
../../bin/gcc/libgpac.so: undefined reference to `gf_sg_svg_node_init'
../../bin/gcc/libgpac.so: undefined reference to `svg_store_embedded_data'
../../bin/gcc/libgpac.so: undefined reference to `gf_svg_get_attribute_info
(subseqent similar lines omitted)
collect2: ld returned 1 exit status
make[2]: *** [MP4Box] Error 1
make[2]: Leaving directory `/var/tmp/portage/gpac-0.4.1_pre20060122/work/gpac/ap                    
plications/mp4box'
----------
snip

This fails for MP4Client and MP42Avi, too. However, make continues after the
linking fails, so a lot of output followed this message.

Steps to reproduce:
1. emerge =media-video/gpac-0.4.1_pre20060122
2. watch it fail (at least, this "works" for me, sorry I don't have better steps to reproduce)

Actual results:
make install fails as stated above

Expected results:
MP4Box, MP4Client, MP42Avi should have linked correctly and then installed

Output of emerge --info:
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.14.2 i686)
=================================================================
System uname: 2.6.14.2 i686 AMD Athlon(TM) XP 2600+
Gentoo Base System version 1.6.14
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -fstrength-reduce"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -fstrength-reduce"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp:///ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://gentoo.inode.at/"
LC_ALL="en_US.UTF-8"
LINGUAS="de ja"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X a52 aac aalib acpi alsa apm arts audiofile avi bash-completion berkdb bitmap-fonts bonobo bzip2 canna cdr cjk crypt cups curl doc dts dvd dvdr dvdread eds emboss encode esd exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gnome gpm gstreamer gtk gtk2 gtkhtml guile iconv idn imagemagick imlib immqt-bc ipv6 jabber java jpeg junit kde lcms libg++ libwww mad matroska mikmod mmx mng motif mp3 mpeg ncurses nls ogg oggvorbis opengl oss pam pcre pdflib perl png python qt quicktime readline samba sdl slang softmmu spell ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts udev unicode vorbis xml xml2 xmms xv xvid zlib linguas_de linguas_ja userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LDFLAGS

Please let me know if you need further information or if you want me to test s.th.

Regards,

Clemens Wächter




Comment 2


clemenswaechter





          2006-03-10 06:40:55 UTC
        

I resynced portage today and retried. This time, the bug wasn't reproducible anymore. Don't know wheter it was fixed or wheter it was my fault in the first place...

Regards,

Clemens









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

