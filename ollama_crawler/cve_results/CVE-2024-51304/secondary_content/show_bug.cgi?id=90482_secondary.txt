Title: 90482 – gpg error on booting while using /etc/conf.d/cryptfs (when /usr is on diff partition from /)
URL: https://bugs.gentoo.org/show_bug.cgi?id=90482

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90482
gpg error on booting while using /etc/conf.d/cryptfs (when /usr is on diff partition from /)
Last modified: 2006-08-23 16:26:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90482 
      - gpg error on booting while using /etc/conf.d/cryptfs (when /usr is on diff partition from /)


Summary:
gpg error on booting while using /etc/conf.d/cryptfs (when /usr is on diff pa...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-26 04:34 UTC by Christian Häßler





      Modified:
    
2006-08-23 16:26 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



lars
pupeno
sascha-gentoo-bugzilla
wschlich









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christian Häßler





          2005-04-26 04:34:07 UTC
        

Hi,

when i use the /etc/conf.d/cryptfs with the following entry:

mount=crypt-home
source=/dev/hdb1
key=/root/crypto/home.key.gpg
options='-c aes -s 256 -h plain'

i get on Booting the error:
you have to install app-crypt/gpg
but the package app-crypt/gpg is named app-crypt/gnupg and installed too.

Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


SpanKY






          2005-04-26 17:10:38 UTC
        

is your /usr mounted on a diff partition ?




Comment 2


Christian Häßler





          2005-04-27 04:17:47 UTC
        

yes my /usr is mountet on a different partition (/dev/hda6)

y? is this a Problem?




Comment 3


SpanKY






          2005-04-27 05:58:15 UTC
        

yes it's a problem ... gpg installs to /usr/bin/ and cryptfs uses gpg

i think we should update the conf.d file with a note about this and call it a day




Comment 4


Christian Häßler





          2005-04-27 06:22:32 UTC
        

we can mount /usr befor we mounting crypfs isn't this a idea?




Comment 5


SpanKY






          2005-05-20 23:12:51 UTC
        

added notes to the files about using /usr on different partitions and cryptfs/gpg




Comment 6


Christian Häßler





          2005-06-22 03:33:43 UTC
        

Okay i have solved the problem (okay it was not really fast)

You have to make a init-script like this:

pcjunior ~ # cat /etc/init.d/usr
#!/sbin/runscript
# Copyright 1999-2005 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

depend() {
        before checkfs
}

start() {
        einfo "Mounting /usr bevor mouting others"
        mount /dev/hda6
}


And then you have to edit this file:

pcjunior ~ # cat /etc/runlevels/boot/.critical
usr checkroot hostname modules checkfs localmount splash

Add usr (the name for my init-script) on first.

Now it will work




Comment 7


SpanKY






          2006-08-23 16:26:02 UTC
        

*** Bug 144879 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

