Title: 142711 – emerge sys-libs/ncurses-5.5-r2 fails with sandbox error
URL: https://bugs.gentoo.org/show_bug.cgi?id=142711

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 142711
emerge sys-libs/ncurses-5.5-r2 fails with sandbox error
Last modified: 2006-08-05 16:54:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 142711 
      - emerge sys-libs/ncurses-5.5-r2 fails with sandbox error


Summary:
emerge sys-libs/ncurses-5.5-r2 fails with sandbox error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Sandbox Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-03 15:56 UTC by Steve Dutky





      Modified:
    
2006-08-05 16:54 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/var/tmp/portage/ncurses-5.5-r2/work/narrowc/config.log

              (ncConfig.log,17.19 KB,
                text/plain)

            
2006-08-03 16:16 UTC,

            Steve Dutky




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Steve Dutky





          2006-08-03 15:56:22 UTC
        

checking for dlsym... no
checking for dlsym in -ldl... no
configure: error: Cannot find dlsym function

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/ncurses-5.5-r2/work/narrowc/config.log

!!! ERROR: sys-libs/ncurses-5.5-r2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  ncurses-5.5-r2.ebuild, line 49:   Called do_compile
  ncurses-5.5-r2.ebuild, line 70:   Called econf '--libdir=/lib' '--with-terminfo-dirs=/etc/terminfo:/usr/share/terminfo' '--disable-termcap' '--with-shared' '--with-rcs-ids' '--without-ada' '--enable-symlinks' '--enable-const' '--with-chtype=long' '--with-mmask-t=long' '--without-debug' '--with-gpm'
  ebuild.sh, line 541:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/var/log/sandbox/sandbox-sys-libs_-_ncurses-5.5-r2-7642.log"

mkdir:     /usr/lib/cf7679 (symlink to /export/usr/lib/cf7679)
--------------------------------------------------------------------------------




Comment 1


Steve Dutky





          2006-08-03 16:16:56 UTC
        

Created attachment 93383 [details]
/var/tmp/portage/ncurses-5.5-r2/work/narrowc/config.log




Comment 2


SpanKY






          2006-08-04 20:29:26 UTC
        

you neglected to post `emerge info`




Comment 3


Steve Dutky





          2006-08-05 11:25:17 UTC
        

sorry for the oversight:
laptoo dutky # emerge --info
Portage 2.1-r1 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r4, 2.6.17-gentoo-r4 i686)
=================================================================
System uname: 2.6.17-gentoo-r4 i686 Pentium III (Coppermine)
Gentoo Base System version 1.6.14
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ ftp://ftp.ussg.iu.edu/pub/linux/gentoo http://gentoo.chem.wisc.edu/gentoo/ http://mirrors.acm.cs.rpi.edu/gentoo/ "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts cli crypt cups dlloader dri eds emboss encode esd foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg kde libg++ libwww mad mikmod motif mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd python qt qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml xmms xorg xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY






Comment 4


SpanKY






          2006-08-05 11:39:00 UTC
        

am i'm guessing you have weird symlinks/mounts/whatever setup on your machine ?




Comment 5


Steve Dutky





          2006-08-05 12:48:06 UTC
        

spanKY>am i'm guessing you have weird symlinks/mounts/whatever setup on your machine ?

whatever follows.  Does this pose a problem?
laptoo / # mount
/dev/hda3 on / type reiserfs (rw)
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
udev on /dev type tmpfs (rw,nosuid)
devpts on /dev/pts type devpts (rw)
/dev/hda4 on /export type reiserfs (rw)
shm on /dev/shm type tmpfs (rw,noexec,nosuid,nodev)
usbfs on /proc/bus/usb type usbfs (rw,devmode=0664,devgid=85)
/dev/hda1 on /boot type ext2 (rw,noatime)

laptoo / # ls -l
total 14
drwxr-xr-x   2 root root  3520 Jul 28 17:28 bin
drwxr-xr-x   4 root root  1024 Jul 28 17:28 boot
drwxr-xr-x  19 root root 29540 Jan 27  1999 dev
drwxr-xr-x  34 root root  2864 Aug  5 15:27 etc
drwxr-xr-x   9 root root   200 Jan 18  1999 export
lrwxrwxrwx   1 root root    11 Jan 18  1999 home -> export/home
drwxr-xr-x  10 root root  3688 Aug  2 20:30 lib
drwxr-xr-x   4 root root   120 Feb 13 19:03 mnt
lrwxrwxrwx   1 root root    10 Jan 18  1999 opt -> export/opt
dr-xr-xr-x  56 root root     0 Jan 27  1999 proc
drwx------   3 root root   152 Aug  2 18:47 root
drwxr-xr-x   2 root root  3712 Aug  2 15:33 sbin
drwxr-xr-x  11 root root     0 Jan 27  1999 sys
lrwxrwxrwx   1 root root    10 Jan 18  1999 tmp -> export/tmp
lrwxrwxrwx   1 root root    10 Jan 18  1999 usr -> export/usr
lrwxrwxrwx   1 root root    10 Jan 18  1999 var -> export/var





Comment 6


SpanKY






          2006-08-05 12:52:02 UTC
        

yes, your export/ symlinks are screwing this up




Comment 7


Steve Dutky





          2006-08-05 15:11:58 UTC
        

1. Does the problem involve more than /usr --> /export/usr ?

2. If so, would deleting the symbolic link /usr and running 
"cp -rp /export/usr /usr" adequately fix this?

3. Can you tell me how this problem arises?  Specifically, I have apparently succeeded emerging glibc, gcc and other ebuilds.  So far only ncurses appears to barf.




Comment 8


SpanKY






          2006-08-05 15:29:23 UTC
        

you could try changing the link from 'export/usr' to '/export/usr'

if you copied stuff, you should use `cp -a /export/usr /usr`




Comment 9


Steve Dutky





          2006-08-05 16:54:06 UTC
        

spanKY>you could try changing the link from 'export/usr' to '/export/usr'

doh... got it. Thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

