Title: 254251 – faulty compilation order - app-text/texlive-2007-r3 pulls chktex before latex, but chktex depends on latex
URL: https://bugs.gentoo.org/show_bug.cgi?id=254251

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 254251
faulty compilation order - app-text/texlive-2007-r3 pulls chktex before latex, but chktex depends on latex
Last modified: 2009-02-27 13:36:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 254251 
      - faulty compilation order - app-text/texlive-2007-r3 pulls chktex before latex, but chktex depends on latex


Summary:
faulty compilation order - app-text/texlive-2007-r3 pulls chktex before latex...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

TeX project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-01-08 18:32 UTC by Christopher Ruwe





      Modified:
    
2009-02-27 13:36 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christopher Ruwe





          2009-01-08 18:32:12 UTC
        

When compiling app-text/texlive-2007-r3, portage tries to compile the dependancy dev-tex/chktex before dev-texlive/texlive-latex. This obviously fails, as the former depends on the latter:

....
>>> Source compiled.
>>> Test phase [not enabled]: dev-tex/chktex-1.6.4

>>> Install chktex-1.6.4 into /var/tmp/portage/dev-tex/chktex-1.6.4/image/ category dev-tex
make -j2 install DESTDIR=/var/tmp/portage/dev-tex/chktex-1.6.4/image/ 
no ChkTeX.tex
make: no: Command not found
make: *** [ChkTeX.dvi] Error 127

...

Problem can be resolved by emerging texlive-latex first with -1av option, then emerging app-text/texlive further.

Reproducible: Always

Steps to Reproduce:
No LaTeX whatsoever installed

1. emerge texlive -av


Actual Results:  
Stopped: see description


Probelm needs to be resolved by modifying the mergin order




Comment 1


Alexis Ballier






          2009-01-08 19:25:33 UTC
        

well... chktex depends on latex-base which should pull a latex compiler, eg, texlive-latex unless you have broken your sysytem afaik




Comment 2


Christopher Ruwe





          2009-01-09 13:32:08 UTC
        

(In reply to comment #1)
> well... chktex depends on latex-base which should pull a latex compiler, eg,
> texlive-latex unless you have broken your sysytem afaik
> 

Yes, true. Which is why, assuming a texlive-install from a "latex-wise naked" system, e.g. texlive-latex should be pulled \emph{before}, not \emph{after} the chktex-install - which the ebuild does not.

Having not broken my system is somewhat difficult to test/establish/disprove/whatever ... only thing is, everything else works. Which is why I suspect the problem to be somewhere in the ebuild - which I cannot check due to not knowing much about ebuilds besides emerging them.




Comment 3


Alexis Ballier






          2009-01-09 13:48:41 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> > well... chktex depends on latex-base which should pull a latex compiler, eg,
> > texlive-latex unless you have broken your sysytem afaik
> > 
> 
> Yes, true. Which is why, assuming a texlive-install from a "latex-wise naked"
> system, e.g. texlive-latex should be pulled \emph{before}, not \emph{after} the
> chktex-install - which the ebuild does not.

"chktex depends on latex-base" means latex-base will be installed *before* chktex or something else is broken. What's the ebuild you're talking about that does not do this?




Comment 4


Christopher Ruwe





          2009-01-09 15:35:48 UTC
        

(In reply to comment #3)
> (In reply to comment #2)
> > (In reply to comment #1)
> > > well... chktex depends on latex-base which should pull a latex compiler, eg,
> > > texlive-latex unless you have broken your sysytem afaik
> > > 
> > 
> > Yes, true. Which is why, assuming a texlive-install from a "latex-wise naked"
> > system, e.g. texlive-latex should be pulled \emph{before}, not \emph{after} the
> > chktex-install - which the ebuild does not.
> 
> "chktex depends on latex-base" means latex-base will be installed *before*
> chktex or something else is broken. What's the ebuild you're talking about that
> does not do this?
> 

The ebuild in question is app-text/texlive/texlive-2007-r3.ebuild




Comment 5


Alexis Ballier






          2009-01-09 15:41:24 UTC
        

(In reply to comment #4)
> (In reply to comment #3)
> > (In reply to comment #2)
> > > (In reply to comment #1)
> > > > well... chktex depends on latex-base which should pull a latex compiler, eg,
> > > > texlive-latex unless you have broken your sysytem afaik
> > > > 
> > > 
> > > Yes, true. Which is why, assuming a texlive-install from a "latex-wise naked"
> > > system, e.g. texlive-latex should be pulled \emph{before}, not \emph{after} the
> > > chktex-install - which the ebuild does not.
> > 
> > "chktex depends on latex-base" means latex-base will be installed *before*
> > chktex or something else is broken. What's the ebuild you're talking about that
> > does not do this?
> > 
> 
> The ebuild in question is app-text/texlive/texlive-2007-r3.ebuild

The order of deps in this ebuild does not affect chktex's deps...

Don't you have tetex or latex-base in packages.provided or something?






Comment 6


Christopher Ruwe





          2009-01-11 12:01:49 UTC
        

(In reply to comment #5)
> (In reply to comment #4)
> > (In reply to comment #3)
> > > (In reply to comment #2)
> > > > (In reply to comment #1)
> > > > > well... chktex depends on latex-base which should pull a latex compiler, eg,
> > > > > texlive-latex unless you have broken your sysytem afaik
> > > > > 
> > > > 
> > > > Yes, true. Which is why, assuming a texlive-install from a "latex-wise naked"
> > > > system, e.g. texlive-latex should be pulled \emph{before}, not \emph{after} the
> > > > chktex-install - which the ebuild does not.
> > > 
> > > "chktex depends on latex-base" means latex-base will be installed *before*
> > > chktex or something else is broken. What's the ebuild you're talking about that
> > > does not do this?
> > > 
> > 
> > The ebuild in question is app-text/texlive/texlive-2007-r3.ebuild
> 
> The order of deps in this ebuild does not affect chktex's deps...
> 
> Don't you have tetex or latex-base in packages.provided or something?
> 

Well, no. The attempt was to get a complete LaTeX system in one rush by just emerging app-text/texlive, which should pull all the dependancies by itself. It did, in fact, but did not take into account, that chktex depends on a working latex-flavour and thus did not set the right order, i.e., installing texlive-latex before chktex.
Following the gentoo-texlive guide, I understood I could install a complete TeX-distro by just emerging app-text/texlive. The app-text/texlive-2007-r3 ebuild is, as descriebed, faulty, as I had to manually change the merge-order by manually emerging texlive-latex with -1av option. Then, and only after that, the texlive-ebuild completed sucessfully as desired.
In order to eliminate that difficulty, which gentoo and latex newbies might be unable to cope with, I propose to examine the app-text/texlive ebuild for merging order directives, which I myself am unable to do.





Comment 7


Alexis Ballier






          2009-01-13 07:54:12 UTC
        

You didnt seem to get my point.

While it is true that:

(In reply to comment #6)
> Well, no. The attempt was to get a complete LaTeX system in one rush by just
> emerging app-text/texlive, which should pull all the dependancies by itself. 


This is complete nonsense:


> In order to eliminate that difficulty, which gentoo and latex newbies might be
> unable to cope with, I propose to examine the app-text/texlive ebuild for
> merging order directives, which I myself am unable to do.


because chktex is expected to work without installing app-text/texlive too; so whatever is or may be in that texlive ebuild is completely irrelevant to chktex deps, and I'm afraid chktex deps really state latex-base as a dependency so you'll have to examine why this wasn't satisfied (or was satisfied but wasn't working) when installing chktex.




Comment 8


Alexis Ballier






          2009-02-27 13:36:06 UTC
        

on an empty system:

USE=extra emerge -pv texlive

[...]
[ebuild  N    ] app-text/texlive-core-2007-r13  USE="-X -doc" 0 kB
[ebuild  N    ] app-text/poppler-0.10.4  USE="-doc" 0 kB
[ebuild  N    ] virtual/tex-base-0  0 kB
[ebuild  N    ] dev-texlive/texlive-psutils-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-documentation-base-2007  0 kB
[ebuild  N    ] dev-texlive/texlive-basic-2007  USE="-doc" 0 kB
[ebuild  N    ] media-libs/freetype-1.4_pre20080316-r1  USE="kpathsea nls -doc" 0 kB
[ebuild  N    ] app-text/lcdf-typetools-2.69  USE="kpathsea" 0 kB
[ebuild  N    ] dev-texlive/texlive-latex-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-fontsrecommended-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-metapost-2007-r1  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-genericrecommended-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-genericextra-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-langfrench-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-fontsextra-2007-r1  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-plainextra-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-latexrecommended-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-formatsextra-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-texinfo-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-latex3-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-latexextra-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-mathextra-2007  USE="-doc" 0 kB
[ebuild  N    ] dev-texlive/texlive-bibtexextra-2007  USE="-doc" 0 kB
[ebuild  N    ] virtual/latex-base-1.0  0 kB
[ebuild  N    ] dev-tex/xcolor-2.11  0 kB
[ebuild  N    ] dev-tex/chktex-1.6.4  USE="-debug -doc" 0 kB
[...]

from which you can see chktex comes after base latex stuff... and esp. after virtual/latex-base, closing as worksforme









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

