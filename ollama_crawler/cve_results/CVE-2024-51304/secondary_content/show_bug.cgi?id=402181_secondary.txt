Title: 402181 – media-video/ffmpeg-0.10 - libavcodec/x86/cabac.h:93:5: error: can't find a register in class ‘GENERAL_REGS’ while reloading ‘asm’
URL: https://bugs.gentoo.org/show_bug.cgi?id=402181

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 402181
media-video/ffmpeg-0.10 - libavcodec/x86/cabac.h:93:5: error: can't find a register in class ‘GENERAL_REGS’ while reloading ‘asm’
Last modified: 2012-03-30 20:07:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 402181 
      - media-video/ffmpeg-0.10 - libavcodec/x86/cabac.h:93:5: error: can't find a register in class ‘GENERAL_REGS’ while reloading ‘asm’


Summary:
media-video/ffmpeg-0.10 - libavcodec/x86/cabac.h:93:5: error: can't find a re...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-02-04 17:59 UTC by 3PO





      Modified:
    
2012-03-30 20:07 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build Log

              (build.log,30.40 KB,
                text/plain)

            
2012-02-06 19:48 UTC,

            3PO




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


3PO





          2012-02-04 17:59:54 UTC
        

Compiler breaks at:

.....
libavcodec/avpacket.c: In function ‘av_dup_packet’:
libavcodec/avpacket.c:130:5: warning: ‘av_destruct_packet_nofree’ is deprecated (declared at libavcodec/avpacket.c:27)
CC      libavcodec/bgmc.o
CC      libavcodec/bink.o
CC      libavcodec/binkaudio.o
CC      libavcodec/binkdsp.o
CC      libavcodec/bintext.o
CC      libavcodec/bitstream.o
libavcodec/bintext.c:92:13: warning: ‘hscroll’ defined but not used
libavcodec/bink.c: In function ‘binkb_decode_plane’:
libavcodec/bink.c:860:17: warning: passing argument 4 of ‘read_dct_coeffs’ from incompatible pointer type
libavcodec/bink.c:593:12: note: expected ‘const int32_t (*)[64]’ but argument is of type ‘int32_t (*)[64]’
libavcodec/bink.c:893:17: warning: passing argument 4 of ‘read_dct_coeffs’ from incompatible pointer type
libavcodec/bink.c:593:12: note: expected ‘const int32_t (*)[64]’ but argument is of type ‘int32_t (*)[64]’
libavcodec/binkaudio.c: In function ‘decode_block’:
libavcodec/binkaudio.c:269:43: warning: new qualifiers in middle of multi-level non-const cast are unsafe
libavcodec/binkaudio.c:271:5: warning: new qualifiers in middle of multi-level non-const cast are unsafe
CC      libavcodec/bitstream_filter.o
CC      libavcodec/bmp.o
libavcodec/bitstream_filter.c: In function ‘av_bitstream_filter_filter’:
libavcodec/bitstream_filter.c:62:5: warning: cast discards qualifiers from pointer target type
CC      libavcodec/bmpenc.o
CC      libavcodec/bmv.o
CC      libavcodec/c93.o
CC      libavcodec/cabac.o
CC      libavcodec/cavs.o
CC      libavcodec/cavs_parser.o
CC      libavcodec/cavsdec.o
In file included from libavcodec/cabac.c:32:0:
libavcodec/cabac_functions.h: In function ‘get_cabac_noinline’:
libavcodec/x86/cabac.h:93:5: error: can't find a register in class ‘GENERAL_REGS’ while reloading ‘asm’
libavcodec/x86/cabac.h:93:5: error: ‘asm’ operand has impossible constraints
make: *** [libavcodec/cabac.o] Error 1
make: *** Waiting for unfinished jobs....
 * ERROR: media-video/ffmpeg-0.10 failed (compile phase):
 *   emake failed
 *
 * If you need support, post the output of 'emerge --info =media-video/ffmpeg-0.10',
 * the complete build log and the output of 'emerge -pqv =media-video/ffmpeg-0.10'.
 * The complete build log is located at '/log/portage/media-video:ffmpeg-0.10:20120204-175652.log'.
 * The ebuild environment file is located at '/tmp/portage/media-video/ffmpeg-0.10/temp/environment'.
 * S: '/tmp/portage/media-video/ffmpeg-0.10/work/ffmpeg-0.10'

>>> Failed to emerge media-video/ffmpeg-0.10, Log file:

>>>  '/log/portage/media-video:ffmpeg-0.10:20120204-175652.log'


Reproducible: Always

Steps to Reproduce:
emerge -av ffmpeg



emerge --info
Portage 2.2.0_alpha84 (default/linux/x86/10.0/desktop/kde, gcc-4.5.3, glibc-2.14.1-r2, 3.2.1-gentoo i686)
=================================================================
System uname: Linux-3.2.1-gentoo-i686-Intel-R-_Core-TM-2_Quad_CPU_Q8400_@_2.66GHz-with-gentoo-2.1
Timestamp of tree: Sat, 04 Feb 2012 08:00:01 +0000
distcc 3.1 i686-pc-linux-gnu [disabled]
ccache version 3.1.6 [disabled]
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2-r3, 3.1.4-r3
dev-util/ccache:          3.1.6
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.1
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:       2.22-r1
sys-devel/gcc:            4.5.3-r2
sys-devel/gcc-config:     1.4.1-r1
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 3.2 (virtual/os-headers)
sys-libs/glibc:           2.14.1-r2
Repositories: gentoo local-repo
Installed sets: @system
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* skype-eula"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=native"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=native"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--autounmask=y --quiet-build=n"
FEATURES="assume-digests binpkg-logs distlocks ebuild-locks fixlafiles news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo/ ftp://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ "
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="de en"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="7zip X a52 aac aalib acl acpi alsa amr amrnb amrwb apache2 aspell automount berkdb bluetooth bluray branding bzip2 cairo cardbus cdaudio cdda cddb cdparanoia cdr cgi cli consolekit corefonts cracklib crypt cups cxx daap dbus declarative device-mapper dmx dri dts dv dvb dvd dvdr dvdread emboss encode exif extensions faac faad fam fbcon fbcondecor ffmpeg fftw firefox flac fontconfig fortran ftp gd gdbm gdu gif gnutls gpm gtk hddtemp iconv ieee1394 imagemagick imap imlib ipod ipv6 irda ithreads jack java joystick jpeg kde kde4 kipi lame lastfm latin1 lcms libcaca libnotify libwww lirc live lm_sensors logrotate mad matroska mmap mmx mmxext mng modplug modules mp2 mp3 mp3tunes mp4 mp4live mpeg mplayer mtp mudflap musepack mysql nas ncurses network nls nptl nptlonly nsplugin ntfs nvidia nvram ogg opengl openmp oscar oss pam pango pcre pda pdf perl phonon php pic plasma png policykit ppds pppd python qt3support qt4 quicktime rdesktop readline samba scanner schroedinger sdl semantic-desktop session slang sndfile snes snmp spell sql sse sse2 ssl ssse3 startup-notification svg svga sysfs tcpd theora tiff transcode truetype udev unicode usb v4l v4l2 vaapi vcd vdpau vdr vorbis webkit wifi x264 x86 xcb xcomposite xine xinerama xmame xml xorg xrandr xscreensaver xulrunner xv xvfb xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="cgi actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="joystick evdev synaptics void" KERNEL="linux" LCD_DEVICES="all X lcd2usb lcdlinux png ppm serdisplib usbhub usblcd" LINGUAS="de en" LIRC_DEVICES="serial" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fbdev nv nvidia v4l vesa vga displaylink" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


3PO





          2012-02-05 09:54:06 UTC
        

SOLVED
solved by using: USE=pic




Comment 2


Jeroen Roovers (RETIRED)






          2012-02-06 19:39:31 UTC
        

Please attach the entire build log to this bug report.




Comment 3


3PO





          2012-02-06 19:48:21 UTC
        

Created attachment 301067 [details]
build Log




Comment 4


Alexis Ballier






          2012-02-08 14:49:01 UTC
        

have you tried to add -O2 to your cflags ?
using only -march=native builds with -O0 afaik and you can get such compile issues and will for sure get slower programs




Comment 5


Alexis Ballier






          2012-03-30 20:07:46 UTC
        

(In reply to comment #4)
> have you tried to add -O2 to your cflags ?
> using only -march=native builds with -O0 afaik and you can get such compile
> issues and will for sure get slower programs

please reopen after answering









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

