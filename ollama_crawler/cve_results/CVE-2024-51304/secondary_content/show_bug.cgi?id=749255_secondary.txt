Title: 749255 – dev-lang/rust-1.47.0-r1 is broken(?)
URL: https://bugs.gentoo.org/show_bug.cgi?id=749255

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 749255
dev-lang/rust-1.47.0-r1 is broken(?)
Last modified: 2020-10-16 05:06:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 749255 
      - dev-lang/rust-1.47.0-r1 is broken(?)


Summary:
dev-lang/rust-1.47.0-r1 is broken(?)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Georgy Yakovlev








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-10-15 09:40 UTC by Alex





      Modified:
    
2020-10-16 05:06 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



rust









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,5.32 KB,
                text/x-log)

            
2020-10-16 01:05 UTC,

            Kenton Groombridge




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alex





          2020-10-15 09:40:24 UTC
        

On my system I have successfully built dev-lang/rust-1.47.0
but it fails ti build dev-lang/rust-1.47.0-r1, because of internal problems with build.

I could mask dev-lang/rust-1.47.0-r1, but dev-lang/rust-1.47.0 is missing in my
system. Why was it deleted?

There is no benefits to delete a working ebuild and provide a broken replacement!

For many packages we do have  mutiple versions available.
What is wrong with RUST?

Broken ebuild is nothing new to me. It's kind of OK. But why delete something which works? Really works and has NO alternative???


Example: Palemoon is quite often broken for me. Due to internal problems/issues.
I usually mask that version and the next one is often working again.

But no one at Gentoo has deleted older ebuilds for Palemoon.

Please!!! Stop deleting ebuilds for no reasons. If you are not using them, some one else does!




Comment 1


Jeroen Roovers (RETIRED)






          2020-10-15 09:47:43 UTC
        

(In reply to Alex from comment #0)
> On my system I have successfully built dev-lang/rust-1.47.0
> but it fails ti build dev-lang/rust-1.47.0-r1, because of internal problems

Please attach the entire dev-lang/rust-1.47.0-r1 build.log to this bug report.
Please post your `emerge --info dev-lang/rust' output in a comment.




Comment 2


Lars Wendler (Polynomial-C) (RETIRED)






          2020-10-15 09:50:02 UTC
        

(In reply to Alex from comment #0)
> 
> Please!!! Stop deleting ebuilds for no reasons. If you are not using them,
> some one else does!

We do NOT delete ebuilds for no reason. Usually there are very good reasons to remove old ebuilds. Just because -r1 doen't work for you does not mean it is generally broken.

Instead of complaining about removed rust-1.47.0-r0 ebuild, why don't you report what's broken for you with the -r1 ebuild?




Comment 3


Georgy Yakovlev







          2020-10-15 09:56:59 UTC
        

we still have 1.46.0 and 1.45.2 available, both stable. is it not an alternative?
also 3 -bin versions. so 5 replacements.

1.47.0 was removed for a reason, breakage related to llvm.

btw, there's no benefit opening a bug with a rant without providing build log and emerge --info output.


please upload logs and re-open the bug.

setting NEEDINFO.




Comment 4


Alex





          2020-10-15 17:03:21 UTC
        

I can't really understand what is unclear in my initial message.

Did I ever say, that dev-lang/rust-1.47.0-r1 ebuild has a bug and it need to be solved?

Do not read between lines. I am not responsible for anything there you have discovered.

Building process can easily fail due to upstream issue. And I gave such an example. Palemoon has every second version not able to compile itself.

Should I file the bug to Gentoo developers? - Obviously not. It is pure upstream issue.

I repeat Gentoo's problem, is that ebuild is deleted! I am not even able to compare 2 ebuilds (because I am lazy). And with 99% certainty I don't believe ebuild itself is the issue.

Now, any one can explain me why should I provide build dump and for what purpose?

Please, read carefully. Again. The issue I reported is that ebuild is deleted.

There are many options to solve that issue. Just mask it or turn it back to unstable.

You have chosen the worst solution from all available.

Last but not least. You need to learn a very simple thing. If you've made something public you can't easily turn it back. First of all it is irresponsible to other people. Second it is impossible. It just annoying and doesn't create a good image about Gentoo.

Do what ever you wish with that. I was trying to help you instead you considered it as a rant. If so I won't provide any info. And rarely will report any bug,
because of YOUR attitude. In 99% cases I am able to solve bugs by myself... for myself. Think of it.




Comment 5


Georgy Yakovlev







          2020-10-15 18:35:23 UTC
        

ok, nothing to do here.




Comment 6


Georgy Yakovlev







          2020-10-15 18:48:35 UTC
        

here's the old version https://gitweb.gentoo.org/repo/gentoo.git/plain/dev-lang/rust/rust-1.47.0.ebuild?id=70b7f9bc305d27c59577de414ca7ce2e363af5fe

feel free to use in local overlay if you need it.




Comment 7


Kenton Groombridge





          2020-10-16 01:05:20 UTC
        

Created attachment 665948 [details]
build log




Comment 8


Kenton Groombridge





          2020-10-16 01:08:31 UTC
        

I have four systems where dev-lang/rust-1.47.0-r1 fails to build after updating dev-libs/libgit2-1.1.0-r1

Reverting to dev-libs/libgit2-1.0.1 and all is good.


emerge --info
Portage 3.0.8 (python 3.8.6-final-0, default/linux/amd64/17.1/desktop/plasma, gcc-10.2.0, glibc-2.32-r2, 5.9.0-gentoo x86_64)
=================================================================
System uname: Linux-5.9.0-gentoo-x86_64-Intel-R-_Core-TM-_i7-6800K_CPU_@_3.40GHz-with-glibc2.2.5
KiB Mem:    65797228 total,  58080384 free
KiB Swap:    8388604 total,   8388604 free
Timestamp of repository gentoo: Fri, 16 Oct 2020 00:36:49 +0000
Head commit of repository gentoo: f26d348ac21afbdd38e76531b6224548ec395628

sh bash 5.0_p18
ld GNU ld (Gentoo 2.35.1 p1) 2.35.1
distcc 3.3.3 x86_64-pc-linux-gnu [disabled]
app-shells/bash:          5.0_p18::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.30.3-r1::gentoo
dev-lang/python:          2.7.18-r4::gentoo, 3.8.6::gentoo, 3.9.0::gentoo, 3.10.0_alpha1::gentoo
dev-util/cmake:           3.18.4::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/openrc:          0.42.1::gentoo
sys-apps/sandbox:         2.20::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.11.6-r3::gentoo, 1.13.4-r2::gentoo, 1.16.2::gentoo
sys-devel/binutils:       2.35.1::gentoo
sys-devel/gcc:            10.2.0-r2::gentoo
sys-devel/gcc-config:     2.3.2::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.9::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo
    priority: -1000

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 0

ace
    location: /var/lib/layman/ace
    masters: gentoo
    priority: 50

pentoo
    location: /var/lib/layman/pentoo
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=native -mtune=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/vmware-installer"
CXXFLAGS="-O2 -pipe -march=native -mtune=native"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--keep-going"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://192.168.1.115/ http://gentoo.mirrors.tds.net/gentoo https://gentoo.osuosl.org/ http://gentoo.mirrors.easynews.com/linux/gentoo/ http://gentoo.modulix.net/gentoo/ https://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j13"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac aacplus acpi activities afpacket alsa alsa-plugin amd64 bbswitch berkdb binary-drivers bluetooth branding bzip2 cairo caps-ng cdda cdr cli client crypt cups dbus declarative dhcpcd dri3 dts dvb dvd dvdr efi efiemu elogind emboss encode evdev exif external-fuse fdk ff-card ffmpeg file-inspect flac flash fortran gdbm gif git gles2 gpm gstreamer gtk gtk3 gui hex hpcups hpn http2 iconv icu ipv6 java javascript jit jpeg kipi kwallet lcms legacy-systray libglvnd libnotify libtirpc lightdm lm_sensors mad maxminddb mjpeg mng mp3 mp4 mpeg multilib ncurses nfs nfsv4 nls nptl nsplugin nss ntfs ntfsprogs ntp nvidia ogg openal opengl openmp openssl ovftool ozone pam pango pcre pcsc-lite pdf phonon pkcs11 plasma png policykit ppds prelink proprietary-codecs pulseaudio python qemu qml qt5 rar readline samba scanner scp sdl seccomp secure-delete semantic-desktop sensors shm smartcard sna spell split-usr sqlite ssl startup-notification svc svg tcpd theora threads tiff touchpad truetype udev udisks unicode usb uvm uxa v4l v4l2 vaapi vdpau vix vnc vorbis vpx vulkan wayland widevine widgets winbind wma wxwidgets x264 x265 xattr xcb xml xnest xorg xv xvid xvmc zip zlib" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64" INPUT_DEVICES="libinput" KERNEL="linux" L10N="en en_US" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-2 php7-3 php7-4" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_8" PYTHON_TARGETS="python3_8 python3_9" RUBY_TARGETS="ruby27" SANE_BACKENDS="epson" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 9


Georgy Yakovlev







          2020-10-16 04:16:27 UTC
        

^ should be a new bug.
anyway, I'll fix it soon. working on it right now.




Comment 10


Georgy Yakovlev







          2020-10-16 05:06:07 UTC
        

(In reply to Georgy Yakovlev from comment #9)
> ^ should be a new bug.
> anyway, I'll fix it soon. working on it right now.

bug https://bugs.gentoo.org/749381









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

