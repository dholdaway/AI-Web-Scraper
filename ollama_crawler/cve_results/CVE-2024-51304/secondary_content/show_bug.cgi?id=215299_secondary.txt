Title: 215299 – media-gfx/inkscape-0.46-r1 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=215299

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 215299
media-gfx/inkscape-0.46-r1 fails to compile
Last modified: 2008-04-21 17:45:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 215299 
      - media-gfx/inkscape-0.46-r1 fails to compile


Summary:
media-gfx/inkscape-0.46-r1 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Graphics Project








URL:



http://www.inkscape.org




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-03-29 10:08 UTC by Kalidarn





      Modified:
    
2008-04-21 17:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



betelgeuse









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kalidarn





          2008-03-29 10:08:12 UTC
        

Downgrading to x11-libs/cairo-1.5.12 solved this for me.

i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I.. -I/usr/lib/perl5/5.8.8/i686-linux/CORE   -I/usr/include/freetype2   -DRELAYTOOL_CRYPTO='static const int libcrypto_is_present = 1; static int __attribute__((unused)) libcrypto_symbol_is_present(char *m) { return 1; }' -DRELAYTOOL_SSL='static const int libssl_is_present = 1; static int __attribute__((unused)) libssl_symbol_is_present(char *m) { return 1; }'   -DHAVE_SSL  -I/usr/include/freetype2   -I/usr/include/poppler   -I/usr/include/poppler/glib -I/usr/include/poppler -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/pixman-1   -DPOTRACE=\"potrace\" -pthread -I/usr/include/gdkmm-2.4 -I/usr/lib/gdkmm-2.4/include -I/usr/include/glibmm-2.4 -I/usr/lib/glibmm-2.4/include -I/usr/include/pangomm-1.4 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/cairomm-1.0 -I/usr/include/sigc++-2.0 -I/usr/lib/sigc++-2.0/include -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pango-1.0 -I/usr/include/cairo -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/pixman-1 -I/usr/include/gtkmm-2.4 -I/usr/lib/gtkmm-2.4/include -I/usr/include/atkmm-1.6 -I/usr/include/atk-1.0 -I/usr/include/libxml2 -I/usr/include/gtkspell-2.0   -I../cxxtest    -Wall -Wformat-security -W -Wpointer-arith-Wcast-align -Wsign-compare -Woverloaded-virtual -Wswitch -D_FORTIFY_SOURCE=2 -Wno-unused-parameter -march=pentium-m -O2 -pipe -MT box3d.o -MD -MP -MF $depbase.Tpo -c -o box3d.o box3d.cpp &&\
        mv -f $depbase.Tpo $depbase.Po
/usr/include/cairomm-1.0/cairomm/enums.h:195: error: ‘CAIRO_FONT_TYPE_ATSUI_replaced_by_CAIRO_FONT_TYPE_QUARTZ’ was not declared in this scope
make[2]: *** [arc-context.o] Error 1
make[2]: *** Waiting for unfinished jobs....
/usr/include/cairomm-1.0/cairomm/enums.h:195: error: ‘CAIRO_FONT_TYPE_ATSUI_replaced_by_CAIRO_FONT_TYPE_QUARTZ’ was not declared in this scope
make[2]: *** [box3d.o] Error 1
make[2]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.46-r1/work/inkscape-0.46/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.46-r1/work/inkscape-0.46'
make: *** [all] Error 2

 *
 * ERROR: media-gfx/inkscape-0.46-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2600:  Called gnome2_src_compile
 *             environment, line 1968:  Called die
 * The specific snippet of code:
 *       emake || die "compile failure"
 *  The die message:
 *   compile failure

Reproducible: Always

Steps to Reproduce:
1. Upgrade to x11-libs/cairo-1.5.14
2. Try to emerge media-gfx/inkscape-0.46-r1
3. Error




Comment 1


Gilles Dartiguelongue (RETIRED)






          2008-03-29 14:41:57 UTC
        

please don't skip adding emerge --info, TIA.




Comment 2


Kalidarn





          2008-03-29 15:14:19 UTC
        

Sorry, slipped my mind.

Portage 2.1.4.4 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.24-gentoo-r3 i686)
=================================================================
System uname: 2.6.24-gentoo-r3 i686 Intel(R) Pentium(R) M processor 1.86GHz
Timestamp of tree: Sat, 29 Mar 2008 03:00:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/4.0/env /usr/kde/4.0/share/config /usr/kde/4.0/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=pentium-m -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://www.filearena.net/pub/gentoo/ http://mirror.internode.on.net/pub/gentoo/ http://mirror.isp.net.au/ftp/pub/gentoo/ http://mirror.pacific.net.au/linux/Gentoo http://ftp.swin.edu.au/gentoo http://mirror.aarnet.edu.au/pub/gentoo/ http://mirror.linux.org.au/pub/gentoo/"
LANG="en_US.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac accessibility ace acl acpi aiglx alsa apache2 apm archive asf audiofile avi battery berkdb bitmap-fonts bzip2 cairo cdda cdr chm cli cpudetection cpufreq cracklib crypt css ctype cups dba dbus divx dri dts dvd dvdnav dvdr dvdread emboss encode exif exo expat fam fastbuild ffmpeg firefox flac foomaticdb force-cgi-redirect fortran ftp gd gdbm gif gimp gimpprint glitz glut gmp gnutls gpm gtk gtk2 gtkhtml hal htmlhandbook iconv idn imlib isdnlog jabber jingle jpeg kde lame lcms libg++ libnotify libvisual libwww lm_sensors mad matroska memlimit midi mikmod mmx mng modplug mozbranding mozilla mp3 mp4 mpeg msn mudflap ncurses nls no-seamonkey nptl nptlonly nsplugin offensive ogg opengl openmp oss pam panel-plugin pcmcia pcre pdf pdflib perl plugins png posix pppd python qt qt3 qt3support qt4 quicktime rar readline reflection rpm samba scanner sdl sensord session simplexml slang sndfile soap sockets spell spl srt sse sse2 ssl startup-notification svg tcpd theora thumbnail tiff tokenizer truetype truetype-fonts tta type1-fonts udev unicode usb vcd visualization vorbis wavpack wifi win32codecs wma wxwindows x264 x86 xcb xcomposite xinerama xml xml2 xorg xscreensaver xsl xv xvid zip zlib" ALSA_CARDS="snd-intel8x0 snd-intel8x0m" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc glib" INPUT_DEVICES="keyboard mouse synaptics evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="i810"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Markus Meier






          2008-03-29 18:29:39 UTC
        

works here with x11-libs/cairo-1.5.14. which version of dev-cpp/gtkmm have you installed? (I have dev-cpp/gtkmm-2.12.5 here)

> /usr/include/cairomm-1.0/cairomm/enums.h:195: error:
this file belongs to dev-cpp/gtkmm.




Comment 4


Kalidarn





          2008-03-30 07:13:40 UTC
        

I was using the latest stable dev-cpp/gtkmm-2.12.1 which fails to upgrade, I tried all versions 2.12.3, 2.12.4 and 2.12.5 

 i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -DG_LOG_DOMAIN=\"pangomm\" -I../../pango -I../../pango -I../../pango -I../../pango -I../../atk -I../../atk -I../../gdk -I../../gdk -I../../gtk -I../../gtk -I/usr/include/glibmm-2.4 -I/usr/lib/glibmm-2.4/include -I/usr/include/sigc++-2.0 -I/usr/lib/sigc++-2.0/include -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/cairomm-1.0 -I/usr/include/cairo -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/pixman-1 -I/usr/include/pango-1.0 -pthread -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -march=pentium-m -O2 -pipe -Wall -MT color.lo -MD -MP -MF .deps/color.Tpo -c color.cc  -fPIC -DPIC -o .libs/color.o
mv -f .deps/color.Tpo .deps/color.Plo
make[4]: Leaving directory `/var/tmp/portage/dev-cpp/gtkmm-2.12.5/work/gtkmm-2.12.5/pango/pangomm'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/dev-cpp/gtkmm-2.12.5/work/gtkmm-2.12.5/pango/pangomm'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/dev-cpp/gtkmm-2.12.5/work/gtkmm-2.12.5/pango'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/dev-cpp/gtkmm-2.12.5/work/gtkmm-2.12.5'
make: *** [all] Error 2
 *
 * ERROR: dev-cpp/gtkmm-2.12.5 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line  647:  Called gnome2_src_compile
 *             environment, line  573:  Called die
 * The specific snippet of code:
 *       emake || die "compile failure"
 *  The die message:
 *   compile failure

Although it appeared to work after upgrading dev-cpp/cairomm-1.4.4 to dev-cpp/cairomm-1.5.0. (once again latest stable version to testing version.)

media-gfx/inkscape-0.46-r1 does then compile against gtkmm-2.12.3, gtkmm-2.12.4 and gtkmm-2.12.5 just not gtkmm-2.12.1




Comment 5


Kalidarn





          2008-03-30 07:19:34 UTC
        

btw the Gentoo revision of inkscape ie r1/r2 makes no effect on this bug as they are both effected.




Comment 6


Markus Meier






          2008-03-30 21:10:31 UTC
        

gtkmm failure may be bug 152542 (I can't see the actual error message in your posted failure).

I can compile with gtkmm-2.12.1 (on a completely stable box). And it emerges without problems on my ~arch (testing) boxes.
I think (but don't know for sure) that this isn't an inkscape bug, it looks like a problem with mixing cairo/gtkmm stable/unstable versions...




Comment 7


Soup Caps





          2008-04-01 02:23:57 UTC
        

(In reply to comment #6)
> gtkmm failure may be bug 152542 (I can't see the actual error message in your
> posted failure).
> 

I doubt this, as I believe that was some trouble with Pango.


> I can compile with gtkmm-2.12.1 (on a completely stable box). And it emerges
> without problems on my ~arch (testing) boxes.
> I think (but don't know for sure) that this isn't an inkscape bug, it looks
> like a problem with mixing cairo/gtkmm stable/unstable versions...
> 

I can second this conclusion -- cairo, cairomm, and gtkmm must all be relatively development or stable builds, do not crisscross.
Also note, that as a case of bug 213756, that I reported, gtkmm and inkscape need to be built without distcc.
And as a separate issue in and of itself, I would suggest that cairo be built *without* the use of ccache (various __sync_* bugs).
Lastly, if you have some (implicit) version mismatching going on already, in the aforementioned packages, then I suggest that cairo, cairomm, and gtkmm all be downgraded to stable versions, then (if such is desired) gtkmm and cairomm be upgraded to the developmentary versions, and lastly, the same be done with cairo.
Beyond this, packages which require either of these, should (most probably) be kept as up to date as possible, and some that use cairo may need to also be compiled without the usage of ccache.

In accordance with this, no one should experience any build problems, but this is not sufficient compensation for proper fixing of these packages.


Regards




Comment 8


Petteri Räty (RETIRED)






          2008-04-07 23:11:25 UTC
        

this seems to be fixed by upgrading to cairomm-1.5.0. At least that is my guess as after emerge -uD inkscape this went away




Comment 9


Markus Meier






          2008-04-21 17:45:00 UTC
        

(In reply to comment #8)
> this seems to be fixed by upgrading to cairomm-1.5.0. At least that is my guess
> as after emerge -uD inkscape this went away

Thanks for the test Petteri. As the package builds on (completely) stable and unstable boxes, I'll close this bug for now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

