Title: 252479 – Warn user about udev and clock
URL: https://bugs.gentoo.org/show_bug.cgi?id=252479

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 252479
Warn user about udev and clock
Last modified: 2009-02-11 08:55:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 252479 
      - Warn user about udev and clock


Summary:
Warn user about udev and clock
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

[OLD] Docs on www.gentoo.org




Classification:

Unclassified




Component:

Other documents

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
    (vote)
  



Assignee:

Docs Team








URL:



http://www.gentoo.org/doc/en/openrc-m...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-25 14:10 UTC by Harrison Metzger





      Modified:
    
2009-02-11 08:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cardoe









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Harrison Metzger





          2008-12-25 14:10:31 UTC
        

I just upgrade to openrc and I was having many problems. After some time debugging, and comparing my services which started up with someone else's, I was able to fix this. So others don't have to spend the time I did, I would like to make a modification to the guide.

First, udev should be in the sysinit startup group. Without this nothing would mount, and my computer was a giant paper weight. It *should* have been there automatically from the udev upgrade, but it was not. It should be noted that if this fails, one will have to add this themselves.

Second, the /etc/init.d/clock should be deleted. The file hwclock provides the service clock, but if the actual clock file exists than it won't use hwclock. This lead to a few problems. On startup I would get an error about fsck not being able to start ("ERROR: cannot start hwclock as fsck would not start"). On both startup and shutdown I would see "Caching service dependencies" every other line (and this would be slow, 2 mins to start up). Finally, on shutdown I would see "hwlock: waiting for localmount" and this would spam my console for about 10 mins before my computer would reboot.

Once I did the above (which did not happen automatically) openrc worked must better.

The guide mentions hwclock supersedes clock, but it does not say to delete the old clock file which needs to be done (unless the installer was supposed to delete it and it did not, which should be mentioned as well). And udev (to sysinit) should be added to the service that users should check before rebooting.

Reproducible: Always




Comment 1


nm (RETIRED)






          2009-01-26 07:41:34 UTC
        

CCing Doug for comment.




Comment 2


Robin Johnson









          2009-02-11 08:55:48 UTC
        

"udev in the sysvinit runlevel": see bug 253396

"etc/init.d/clock should be deleted.":
did you read the recent openrc ebuilds?
144     if [[ -e ${ROOT}/etc/init.d/clock ]] ; then
145         rm -f "${ROOT}"/etc/init.d/clock
146     fi










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

