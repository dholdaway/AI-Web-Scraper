Title: 106302 – force fsck don't run on lvm2 mount
URL: https://bugs.gentoo.org/show_bug.cgi?id=106302

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 106302
force fsck don't run on lvm2 mount
Last modified: 2006-01-07 19:15:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 106302 
      - force fsck don't run on lvm2 mount


Summary:
force fsck don't run on lvm2 mount
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-17 11:52 UTC by Chan Min Wai





      Modified:
    
2006-01-07 19:15 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Chan Min Wai





          2005-09-17 11:52:04 UTC
        

When people want to do force fsck on the next boot. This options will not check
partation that are on an LVM2 but still check the normal partation.

Reproducible: Always
Steps to Reproduce:
1. Build a system with LVM2 partation (don't put it to root to save trouble) eg
mount it as the /usr /var etc
2. shutdown -r -F now  (Restart now and force fsck next restart)
3. Wait for result

Actual Results:  
System reboot and start fsck the Normal partation but not the lvm2 partation...

Expected Results:  
force fsck should check all partation that is known. even if it is on an lvm2.

Partation problem on lvm2 will be continuate until a manual check is initial. So
increase the "Disk" Problem.




Comment 1


SpanKY






          2005-09-17 15:51:15 UTC
        

that doesnt really make any sense ... checkfs runs 'start_volumes' before
running fsck




Comment 2


SpanKY






          2005-09-17 15:51:35 UTC
        

you neglected to post `emerge info` like the bug report page told you to




Comment 3


Chan Min Wai





          2005-09-18 10:27:00 UTC
        

Ok as you wish.

Portage 2.0.51.22-r2 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.5-r1, 2.6.12-gentoo-r10 i686)
=================================================================
System uname: 2.6.12-gentoo-r10 i686 Intel(R) Pentium(R) 4 CPU 1300MHz
Gentoo Base System version 1.6.13
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -pipe -falign-functions=64
-mmmx -msse -msse2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer -pipe -falign-functions=64
-mmmx -msse -msse2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg candy ccache distlocks fixpackages sandbox sfperms
strict"
GENTOO_MIRRORS="http://mymirror.asiaosc.org/gentoo/ http://mirror.gentoo.gr.jp/"
LANG="zh_TW.UTF-8"
LC_ALL="zh_TW.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/got"
SYNC="rsync://rsync.asia.gentoo.org/gentoo-portage"
USE="x86 X a52 aac aalib acl acpi aim alsa apache2 apm arts audiofile avi
bash-completion berkdb bitmap-fonts bluetooth bonobo bootsplash bzip2 bzlib
calendar caps ccache cdb cdda cddb cdio cdparanoia cdr chroot cjk cpudetection
crypt css cups curl dbm dga dio divx4linux djbfft doc dts dvb dvd dvdr dvdread
eds emboss encode esd ethereal evo2 exif fam fame fb fbcon ffmpeg fftw flac
flash foomaticdb gd gif gnome gnutls gpm gstreamer gtk gtk2 gtkhtml guile hal
hardenedphp howl iconv icq imagemagick imap imlib innodb iodbc jabber java
javascript jp2 jpeg jpeg2k kde kerberos ldap libg++ libwww live lm_sensors
logitech-mouse mad maildir mbox mhash mikmod milter mime ming mjpeg mmx mmxext
motif mozcalendar mozilla mp3 mpeg mpeg4 mplayer msn mysql mysqli ncurses
network nls nptl nptlonly odbc ogg oggvorbis openal opengl oscar oss pam pcre
pda pdflib perl php plotutils png posix postgres python qt quicktime rar
readline real rss samba sasl sblive sdl server sockets socks5 speex spell sse
sse2 ssl svga tcpd threads tiff tokenizer transcode truetype truetype-fonts
trusted type1-fonts unicode usb v4l v4l2 vcd vcdimager vhosts videos vnc vorbis
win32codecs wxwindows xine xml xml2 xmlrpc xosd xpm xprint xscreensaver xv xvid
yahoo zh_TW zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS





Comment 4


Chan Min Wai





          2006-01-07 05:54:15 UTC
        

Spanky Any help?




Comment 5


SpanKY






          2006-01-07 19:15:14 UTC
        

as i said, what you describe doesnt make much sense ... but i dont use lvm anywhere so i cant verify/check any of it

at any rate, newer versions of baselayout now start lvm and such before any init scripts are started (like checkroot or checkfs or localmount) so this shouldnt be an issue anymore









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

