Title: 287888 – >=xorg-server-1.6 needs to rebuild some drivers after the ABI change
URL: https://bugs.gentoo.org/show_bug.cgi?id=287888

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 287888
>=xorg-server-1.6 needs to rebuild some drivers after the ABI change
Last modified: 2009-10-06 18:18:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 287888 
      - >=xorg-server-1.6 needs to rebuild some drivers after the ABI change


Summary:
>=xorg-server-1.6 needs to rebuild some drivers after the ABI change
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-06 12:02 UTC by Sam M W





      Modified:
    
2009-10-06 18:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sam M W





          2009-10-06 12:02:12 UTC
        

As the title suggests, when we upgrade to xorg-server-1.6, some ABIs change. I don't really know what's going on there, but in short, it meant that I lost control of my computer every time I typed startx.

The reason for this was, as revelead by /var/log/Xorg.0.log, was a mismatch in the ABIs of the server and the input drivers (kbd and mouse).

The ebuild should have pulled these in as dependencies, or the ebuild should have ewarned (is that the right word?) about this change and suggested rebuilding the necessary packages.

Reproducible: Always

Steps to Reproduce:
1. upgrade from xorg-server-1.4-* to xorg-server-1.6-*
2. keep your drivers from the 1.4 install
3.
Actual Results:  
Loss of control of computer (that is, unless you have remote access to your computer)

Expected Results:  
easy upgrade to 1.6

maybe automated rebuild of the drivers

It's easy enough to fix.

Just type this as root

for i in $(qlist -I -C)
do
emerge -av $i
done

and choose which packages you want to rebuild.




Comment 1


Sam M W





          2009-10-06 12:28:27 UTC
        

alright, well I feel stupid.
It turns out the ebuild DOES ewarn about this.
But I still feel it could be automated. Is that the gentoo way?




Comment 2


Dmitri Pogosian





          2009-10-06 14:49:55 UTC
        

(In reply to comment #1)
> alright, well I feel stupid.
> It turns out the ebuild DOES ewarn about this.
> But I still feel it could be automated. Is that the gentoo way?
> 

I think the simplest solution would have been to bump the versions of all the drivers that need to be recompiled.  Then emerge -uD xorg-server would have reemerged all that is needed.  As it currently stands, indeed neither emerge nor revdep-rebuild picks them.





Comment 3


Alex Legler (RETIRED)








          2009-10-06 18:18:13 UTC
        

(In reply to comment #1)
> alright, well I feel stupid.
> It turns out the ebuild DOES ewarn about this.
> But I still feel it could be automated. Is that the gentoo way?
> 

Don't think so. ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

