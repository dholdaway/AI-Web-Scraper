Title: 103341 – If mozilla-thunderbird is compiled with ccache enabled it crashes at startup
URL: https://bugs.gentoo.org/show_bug.cgi?id=103341

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 103341
If mozilla-thunderbird is compiled with ccache enabled it crashes at startup
Last modified: 2005-10-27 22:08:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 103341 
      - If mozilla-thunderbird is compiled with ccache enabled it crashes at startup


Summary:
If mozilla-thunderbird is compiled with ccache enabled it crashes at startup
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-08-22 07:14 UTC by Martin Wegner





      Modified:
    
2005-10-27 22:08 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace of thunderbird start with described crash

              (thunderbird-ccache.strace,36.53 KB,
                application/octet-stream)

            
2005-08-22 08:06 UTC,

            Martin Wegner




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Wegner





          2005-08-22 07:14:28 UTC
        

This is related to my former bug report #92353 : I just emerged ccache, enabled
it with the following lines in /etc/make.conf:

# ccache support
FEATURES="${FEATURES} ccache"
CCACHE_SIZE="6G"
CCACHE_DIR="/usr/local/share/ccache/"
CCACHE_UMASK="0664"

The ccache dir was completely empty.

Then I emerged mozilla-thunderbird-1.0.6-r4 . Then I wanted to run it but I got:

% thunderbird
No running windows found
thunderbird-bin exited with non-zero status (1)

An strace will follow.

Then I disabled ccache, recompiled thunderbird, so no cache was used, and it runs.

Reproducible: Always
Steps to Reproduce:
1. emerge ccache
2. Enable ccache
3. (Re-)Emerge mozilla-thunderbird

Actual Results:  
Thunderbird does not start.

Expected Results:  
Should start.

% emerge info
Portage 2.0.51.22-r2 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r1,
2.6.11.9-mw i686)
=================================================================
System uname: 2.6.11.9-mw i686 AMD Athlon(tm) XP 3200+
Gentoo Base System version 1.6.13
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
dev-lang/python:     2.2.3-r5, 2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe -mmmx -msse -m3dnow -mfpmath=sse -ftracer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config
/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown
/usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown
/usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref
/usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -mmmx -msse -m3dnow -mfpmath=sse -ftracer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
ftp://mirror.switch.ch/mirror/gentoo/ http://gentoo.osuosl.org
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aalib acl alsa apache2 apm avi bash-completion berkdb
bitmap-fonts bonobo browserplugin bzip2 bzlib cdparanoia cdr crypt cups curl
dedicated dga divx4linux doc dvd dvdr eds emboss encode escreen exif fam fbcon
firefox flac foomaticdb fortran gd gdbm gif gimpprint gnome gstreamer gtk gtk2
gtkhtml i8x0 imagemagick imap imlib insecure-savers ipppd ipv6 java jpeg jpeg2k
libg++ libwww mad mailwrapper mbox mmx mmxext motif mozdevelop mozilla mozsvg
mp3 mpeg mysql ncurses nls no-htdocs offensive ogg oggvorbis opengl oss pam pcre
pdflib perl png postfix python quicktime readline real rtc ruby samba sdl
silverxp slang speex spell sse ssl stencil-buffer svg svga tcltk tcpd tetex
theora tiff truetype truetype-fonts type1-fonts usb userlocales vim-with-x
visualization vorbis win32codecs wmf xanim xchattext xine xml xml2 xmms xprint
xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Martin Wegner





          2005-08-22 08:06:25 UTC
        

Created attachment 66549 [details]
strace of thunderbird start with described crash




Comment 2


Martin Wegner





          2005-08-26 06:00:34 UTC
        

Same here with
www-client/mozilla (1.7.11-r1)
www-client/mozilla-firefox (1.0.6-r5)

% mozilla
No running windows found
mozilla-bin exited with non-zero status (1)




Comment 3


Jory A. Pratt





          2005-10-27 22:08:09 UTC
        

I have done extensive testing with ccache and have been unable to duplicate all
works fine here.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

