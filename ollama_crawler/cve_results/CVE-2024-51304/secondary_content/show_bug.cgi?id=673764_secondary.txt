Title: 673764 – app-emulation/libvirt-4.10.0: build failure: error: ld returned 1 exit status: relink 'libvirt_driver_qemu.la' with the above command before installing it
URL: https://bugs.gentoo.org/show_bug.cgi?id=673764

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 673764
app-emulation/libvirt-4.10.0: build failure: error: ld returned 1 exit status: relink 'libvirt_driver_qemu.la' with the above command before installing it
Last modified: 2020-04-18 19:33:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 673764 
      - app-emulation/libvirt-4.10.0: build failure: error: ld returned 1 exit status: relink 'libvirt_driver_qemu.la' with the above command before installing it


Summary:
app-emulation/libvirt-4.10.0: build failure: error: ld returned 1 exit status...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Matthias Maier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-12-26 15:56 UTC by Thomas Deutschmann (RETIRED)





      Modified:
    
2020-04-18 19:33 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



virtualization









See Also:


670300





Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log.gz,75.26 KB,
                application/gzip)

            
2018-12-26 15:56 UTC,

            Thomas Deutschmann (RETIRED)




Details





my current `emerge --info` output

              (emerge_info.log,7.98 KB,
                text/plain)

            
2019-06-23 10:54 UTC,

            Ilya Yesin




Details





latest libvirt-5.2.0-r2 build log

              (build.log.xz,48.71 KB,
                application/x-xz)

            
2019-06-23 10:55 UTC,

            Ilya Yesin




Details





my /etc/portage/package.use/libvirt

              (etc_portage_package.use_libvirt,186 bytes,
                text/plain)

            
2019-06-23 10:56 UTC,

            Ilya Yesin




Details





my /etc/portage/package.use/qemu

              (etc_portage_package.use_qemu,270 bytes,
                text/plain)

            
2019-06-23 10:56 UTC,

            Ilya Yesin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Deutschmann (RETIRED)






          2018-12-26 15:56:11 UTC
        

Created attachment 558496 [details]
build.log

> libtool: warning: relinking 'libvirt_driver_qemu.la'
> libtool: install: (cd /var/tmp/portage/app-emulation/libvirt-4.10.0/work/libvirt-4.10.0/src; /bin/sh "/var/tmp/portage/app-emulation/libvirt-4.10.0/work/libvirt-4.10.0/libtool"  --tag CC --mode=relink x86_64-pc-linux-gnu-gcc -I/usr/include/libxml2 -fno-common -W -Waddress -Waggressive-loop-optimizations -Wall -Wattribute-alias -Wattributes -Wbad-function-cast -Wbool-compare -Wbool-operation -Wbuiltin-declaration-mismatch -Wbuiltin-macro-redefined -Wcast-align -Wcast-align=strict -Wcast-function-type -Wchar-subscripts -Wclobbered -Wcomment -Wcomments -Wcoverage-mismatch -Wcpp -Wdangling-else -Wdate-time -Wdeprecated-declarations -Wdesignated-init -Wdiscarded-array-qualifiers -Wdiscarded-qualifiers -Wdiv-by-zero -Wdouble-promotion -Wduplicated-cond -Wduplicate-decl-specifier -Wempty-body -Wendif-labels -Wexpansion-to-defined -Wextra -Wformat-contains-nul -Wformat-extra-args -Wformat-security -Wformat-y2k -Wformat-zero-length -Wframe-address -Wfree-nonheap-object -Whsa -Wif-not-aligned -Wignored-attributes -Wignored-qualifiers -Wimplicit -Wimplicit-function-declaration -Wimplicit-int -Wincompatible-pointer-types -Winit-self -Winline -Wint-conversion -Wint-in-bool-context -Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch -Wlogical-not-parentheses -Wlogical-op -Wmain -Wmaybe-uninitialized -Wmemset-elt-size -Wmemset-transposed-args -Wmisleading-indentation -Wmissing-attributes -Wmissing-braces -Wmissing-declarations -Wmissing-field-initializers -Wmissing-include-dirs -Wmissing-parameter-type -Wmissing-prototypes -Wmultichar -Wmultistatement-macros -Wnarrowing -Wnested-externs -Wnonnull -Wnonnull-compare -Wnull-dereference -Wodr -Wold-style-declaration -Wold-style-definition -Wopenmp-simd -Woverflow -Woverride-init -Wpacked-bitfield-compat -Wpacked-not-aligned -Wparentheses -Wpointer-arith -Wpointer-compare -Wpointer-sign -Wpointer-to-int-cast -Wpragmas -Wpsabi -Wrestrict -Wreturn-local-addr -Wreturn-type -Wscalar-storage-order -Wsequence-point -Wshadow -Wshift-count-negative -Wshift-count-overflow -Wshift-negative-value -Wsizeof-array-argument -Wsizeof-pointer-div -Wsizeof-pointer-memaccess -Wstrict-aliasing -Wstrict-prototypes -Wstringop-truncation -Wsuggest-attribute=cold -Wsuggest-attribute=const -Wsuggest-attribute=format -Wsuggest-attribute=malloc -Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wsuggest-final-methods -Wsuggest-final-types -Wswitch -Wswitch-bool -Wswitch-unreachable -Wsync-nand -Wtautological-compare -Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused -Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function -Wunused-label -Wunused-local-typedefs -Wunused-parameter -Wunused-result -Wunused-value -Wunused-variable -Wvarargs -Wvariadic-macros -Wvector-operation-performance -Wvolatile-register-var -Wwrite-strings -Walloc-size-larger-than=9223372036854775807 -Warray-bounds=2 -Wformat-overflow=2 -Wformat-truncation=2 -Wimplicit-fallthrough=5 -Wnormalized=nfc -Wshift-overflow=2 -Wstringop-overflow=2 -Wunused-const-variable=2 -Wvla-larger-than=4031 -Wno-sign-compare -Wno-cast-function-type -Wjump-misses-init -Wswitch-enum -Wno-format-nonliteral -Wno-format-truncation -fstack-protector-strong -fexceptions -fasynchronous-unwind-tables -fipa-pure-const -Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Wframe-larger-than=4096 -O2 -Og -pipe -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wno-error=unused-function -Wno-error=sign-compare -Wno-error=maybe-uninitialized -frecord-gcc-switches -module -avoid-version -Wl,-z -Wl,nodelete -export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries -Wl,-z -Wl,defs -Wl,-O1 -Wl,--as-needed -o libvirt_driver_qemu.la -rpath /usr/lib64/libvirt/connection-driver libvirt_driver_qemu_impl.la libvirt.la ../gnulib/lib/libgnu.la -ltirpc -ldl -inst-prefix-dir /var/tmp/portage/app-emulation/libvirt-4.10.0/image)
> libtool: relink: x86_64-pc-linux-gnu-gcc -shared  -fPIC -DPIC  -Wl,--whole-archive ./.libs/libvirt_driver_qemu_impl.a ../gnulib/lib/.libs/libgnu.a -Wl,--no-whole-archive  -Wl,--as-needed -L/usr/lib64 -L/var/tmp/portage/app-emulation/libvirt-4.10.0/image/usr/lib64 -lvirt -L/lib64 -lcap-ng -lyajl -lnl-route-3 -lnl-3 -ldevmapper -lacl -lxml2 -lssh2 -ldbus-1 -lgnutls -lcurl -lutil -ltirpc -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lpthread -ldl  -fstack-protector-strong -O2 -Og -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wl,-z -Wl,nodelete -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries -Wl,-z -Wl,defs -Wl,-O1   -pthread -Wl,-soname -Wl,libvirt_driver_qemu.so -o .libs/libvirt_driver_qemu.so
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_domain.o): in function `qemuDomainDeviceDefValidateZPCIAddress':
> qemu_domain.c:(.text+0x3ae4): undefined reference to `virZPCIDeviceAddressIsEmpty'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_domain_address.o): in function `qemuDomainAssignPCIAddressExtension':
> qemu_domain_address.c:(.text+0xd83): undefined reference to `virDeviceInfoPCIAddressExtensionIsWanted'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: qemu_domain_address.c:(.text+0xda6): undefined reference to `virDomainPCIAddressExtensionReserveNextAddr'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_domain_address.o): in function `qemuDomainCollectPCIAddressExtension':
> qemu_domain_address.c:(.text+0x149f): undefined reference to `virDeviceInfoPCIAddressExtensionIsPresent'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: qemu_domain_address.c:(.text+0x14bc): undefined reference to `virDomainPCIAddressExtensionReserveAddr'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_domain_address.o): in function `qemuDomainReleaseDeviceAddress':
> qemu_domain_address.c:(.text+0x3dd8): undefined reference to `virDomainPCIAddressExtensionReleaseAddr'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_process.o): in function `qemuProcessResctrlCreate':
> qemu_process.c:(.text+0x4306): undefined reference to `virResctrlMonitorCreate'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_process.o): in function `qemuProcessSetupVcpu':
> qemu_process.c:(.text+0xaadd): undefined reference to `virResctrlMonitorAddPID'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_process.o): in function `qemuProcessStop':
> qemu_process.c:(.text+0xea83): undefined reference to `virResctrlMonitorRemove'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_process.o): in function `qemuProcessReconnect':
> qemu_process.c:(.text+0x10406): undefined reference to `virResctrlMonitorDeterminePath'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_driver.o): in function `qemuDomainFreeResctrlMonData':
> qemu_driver.c:(.text+0xa63a): undefined reference to `virResctrlMonitorFreeStats'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_driver.o): in function `qemuDomainGetResctrlMonData':
> qemu_driver.c:(.text+0xa747): undefined reference to `virResctrlMonitorGetID'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: qemu_driver.c:(.text+0xa792): undefined reference to `virResctrlMonitorGetCacheOccupancy'
> /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../x86_64-pc-linux-gnu/bin/ld: ./.libs/libvirt_driver_qemu_impl.a(libvirt_driver_qemu_impl_la-qemu_driver.o): in function `qemuDomainSetIOThreadParams':
> qemu_driver.c:(.text+0x261bc): undefined reference to `virDomainSetIOThreadParamsEnsureACL'
> collect2: error: ld returned 1 exit status
> libtool:   error: error: relink 'libvirt_driver_qemu.la' with the above command before installing it
> make[3]: *** [Makefile:7238: install-modLTLIBRARIES] Error 1
> make[3]: Leaving directory '/var/tmp/portage/app-emulation/libvirt-4.10.0/work/libvirt-4.10.0/src'
> make[2]: *** [Makefile:13122: install-am] Error 2
> make[2]: Leaving directory '/var/tmp/portage/app-emulation/libvirt-4.10.0/work/libvirt-4.10.0/src'
> make[1]: *** [Makefile:13116: install] Error 2
> make[1]: Leaving directory '/var/tmp/portage/app-emulation/libvirt-4.10.0/work/libvirt-4.10.0/src'
> make: *** [Makefile:2114: install-recursive] Error 1
>  * ERROR: app-emulation/libvirt-4.10.0::gentoo failed (install phase):
>  *   emake failed

Hopefully not bug 670300 again... 

I am still able to build =app-emulation/libvirt-4.9.0 on that box -- only v4.10.0 is currently failing.



Portage 2.3.52 (python 3.6.6-final-0, default/linux/amd64/17.1, gcc-8.2.0, glibc-2.28-r4, 4.19.12-gentoo x86_64)
=================================================================
System uname: Linux-4.19.12-gentoo-x86_64-Intel-R-_Core-TM-_i7-3770K_CPU_@_3.50GHz-with-gentoo-2.6
KiB Mem:     8123076 total,   6100856 free
KiB Swap:    1048572 total,   1048572 free
Timestamp of repository gentoo: Wed, 26 Dec 2018 14:44:21 +0000
Head commit of repository gentoo: 31854e867c0ef3e454c250db9ca9775a89d36787

sh bash 4.4_p23
ld GNU ld (Gentoo 2.31.1 p5) 2.31.1
ccache version 3.5 [disabled]
app-shells/bash:          4.4_p23::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.26.2::gentoo
dev-lang/python:          2.7.15::gentoo, 3.6.6::gentoo, 3.7.0::gentoo
dev-util/ccache:          3.5-r1::gentoo
dev-util/cmake:           3.13.2::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/openrc:          0.40.3::gentoo
sys-apps/sandbox:         2.14::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.13.4-r2::gentoo, 1.16.1-r1::gentoo
sys-devel/binutils:       2.31.1-r3::gentoo
sys-devel/gcc:            7.3.0-r6::gentoo, 8.2.0-r5::gentoo
sys-devel/gcc-config:     2.0::gentoo
sys-devel/libtool:        2.4.6-r5::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.20::gentoo (virtual/os-headers)
sys-libs/glibc:           2.28-r4::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: git
    sync-uri: https://anongit.gentoo.org/git/repo/sync/gentoo.git
    priority: -1000

ABI="amd64"
ABI_X86="64"
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
ACCEPT_PROPERTIES="*"
ACCEPT_RESTRICT="*"
ANT_HOME="/usr/share/ant"
APACHE2_MPMS="worker"
ARCH="amd64"
BROOT=""
CBUILD="x86_64-pc-linux-gnu"
CCACHE_DIR="/var/cache/ccache"
CFLAGS="-O2 -Og -pipe -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wno-error=unused-function -Wno-error=sign-compare -Wno-error=maybe-uninitialized -frecord-gcc-switches"
CFLAGS_amd64="-m64"
CFLAGS_x32="-mx32"
CFLAGS_x86="-m32"
CHOST="x86_64-pc-linux-gnu"
CHOST_amd64="x86_64-pc-linux-gnu"
CHOST_x32="x86_64-pc-linux-gnux32"
CHOST_x86="i686-pc-linux-gnu"
COLLISION_IGNORE="/lib/modules/*"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3"
CURL_SSL="gnutls"
CXXFLAGS="-O2 -Og -pipe -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wno-error=unused-function -Wno-error=sign-compare -Wno-error=maybe-uninitialized -frecord-gcc-switches"
DCO_SIGNED_OFF_BY="Thomas Deutschmann <whissi@gentoo.org>"
DEFAULT_ABI="amd64"
EDITOR="/bin/nano"
ELIBC="glibc"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
EPREFIX=""
EROOT="/"
ESYSROOT="/"
FCFLAGS="-O2 -Og -pipe -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wno-error=unused-function -Wno-error=sign-compare -Wno-error=maybe-uninitialized -frecord-gcc-switches"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs cgroup config-protect-if-modified distlocks downgrade-backup ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned sandbox sfperms strict strict-keepdir unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -Og -pipe -march=ivybridge -mtune=ivybridge -mno-xsaveopt -Wno-error=unused-function -Wno-error=sign-compare -Wno-error=maybe-uninitialized -frecord-gcc-switches"
GCC_SPECS=""
GRUB_PLATFORMS=""
HOME="/root"
INFOPATH="/usr/share/gcc-data/x86_64-pc-linux-gnu/8.2.0/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.31.1/info:/usr/share/info"
INPUT_DEVICES="libinput keyboard mouse"
IUSE_IMPLICIT="abi_x86_64 prefix prefix-chain prefix-guest"
JAVAC="/etc/java-config-2/current-system-vm/bin/javac"
JAVA_HOME="/etc/java-config-2/current-system-vm"
JDK_HOME="/etc/java-config-2/current-system-vm"
KERNEL="linux"
L10N="en en-US de de-DE pt-BR"
LANG="en_US.UTF-8"
LC_MESSAGES="C"
LC_NUMERIC="de_DE.UTF-8"
LC_PAPER="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LDFLAGS_amd64="-m elf_x86_64"
LDFLAGS_x32="-m elf32_x86_64"
LDFLAGS_x86="-m elf_i386"
LIBDIR_amd64="lib64"
LIBDIR_x32="libx32"
LIBDIR_x86="lib"
LINGUAS="en de"
LOGNAME="root"
MAIL="/var/mail/root"
MAKEOPTS="--jobs 6"
MANPAGER="manpager"
MULTILIB_ABIS="amd64 x86"
NOCOLOR="true"
OFFICE_IMPLEMENTATION="libreoffice"
OLDPWD="/root"
OPENCL_PROFILE="mesa"
OPENGL_PROFILE="xorg-x11"
ORACLE_HOME="/usr/lib64/oracle/client"
PAGER="/usr/bin/less"
PATH="/usr/lib/llvm/7/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin"
PHP_TARGETS="php5-6 php7-2"
POSTGRES_TARGETS="postgres9_5 postgres10"
PWD="/usr/local/portage/app-admin/rsyslog"
PYTHONDONTWRITEBYTECODE="1"
PYTHON_SINGLE_TARGET="python3_6"
PYTHON_TARGETS="python2_7 python3_6 python3_7"
QT_GRAPHICSSYSTEM="raster"
ROOT="/"
ROOTPATH="/usr/lib/llvm/7/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin"
RUBY_TARGETS="ruby24"
SHELL="/bin/bash"
SHLVL="2"
SSH_TTY="/dev/pts/0"
SYMLINK_LIB="no"
SYSROOT="/"
TERM="screen"
TMUX="/tmp//tmux-0/default,5534,0"
TMUX_PANE="%1"
TNS_ADMIN="/etc/oracle/"
TWISTED_DISABLE_WRITING_OF_PLUGIN_CACHE="1"
USER="root"
USERLAND="GNU"
VIDEO_CARDS="vmware"




Comment 1


Matthias Maier






          2018-12-26 16:28:16 UTC
        

Looks like bug 670300 again :-/

I cannot reproduce. Will try again from a clean stage-3




Comment 2


Ilya Yesin





          2019-02-04 20:56:16 UTC
        

Hello Matthias,

I have pretty similar symptoms with versions 4.9.0, 4.10.0 and 5.0.0 on amd64.

Let me know if I can help something.




Comment 3


Matthias Maier






          2019-04-08 01:25:33 UTC
        

Would you mind testing 5.1.0 and 5.2.0 (that will be pushed in a minute)?




Comment 4


Ilya Yesin





          2019-06-22 22:57:29 UTC
        

Hello Matthias,

Sorry for being silent.
I tried (my update scripts with --keep-going y) building every update from 4.9.0 to 5.2.0-r2.
No luck. Symptoms are exactly same:
```
*lots of "undefined reference to 'vir*"*
libtool:   error: error: relink 'libvirt_driver_qemu.la' with the above command before installing it
```
If you need my emerge --info or build logs, please let me know.




Comment 5


Ilya Yesin





          2019-06-23 10:54:05 UTC
        

Created attachment 580562 [details]
my current `emerge --info` output




Comment 6


Ilya Yesin





          2019-06-23 10:55:38 UTC
        

Created attachment 580564 [details]
latest libvirt-5.2.0-r2 build log




Comment 7


Ilya Yesin





          2019-06-23 10:56:21 UTC
        

Created attachment 580566 [details]
my /etc/portage/package.use/libvirt




Comment 8


Ilya Yesin





          2019-06-23 10:56:59 UTC
        

Created attachment 580568 [details]
my /etc/portage/package.use/qemu

hope, it relates somehow




Comment 9


Ilya Yesin





          2019-06-27 15:42:45 UTC
        

This is very strange, but simple unmerge/merge of qemu and libvirt fixed this compilation issue.
It's strange because I was running emerge --oneshot --keep-going y @world several times and one and only thing that was breaking is libvirt.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

