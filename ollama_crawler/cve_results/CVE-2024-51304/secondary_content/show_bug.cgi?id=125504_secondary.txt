Title: 125504 – mozilla-firefox-1.5.0.1-r2 extremely slow
URL: https://bugs.gentoo.org/show_bug.cgi?id=125504

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125504
mozilla-firefox-1.5.0.1-r2 extremely slow
Last modified: 2006-04-29 12:17:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125504 
      - mozilla-firefox-1.5.0.1-r2 extremely slow


Summary:
mozilla-firefox-1.5.0.1-r2 extremely slow
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-08 10:40 UTC by crusaderky





      Modified:
    
2006-04-29 12:17 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



Andreas.Klauer
kccricket









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


crusaderky





          2006-03-08 10:40:53 UTC
        

mozilla-firefox is extremely slow when rendering pages that are CSS rich, i.e.
http://www.crusaderky.altervista.org/index.php
when scrolling the page you can perfectly notice lag using an Athlon 2000+.
Also, when opening certain sites, CPU stays at 100% for several seconds.

mozilla-firefox-1.0 and mozilla-firefox-bin-1.5 are unaffected.

This thread shows that it's a very common problem (but I haven't find any already opened bug report, tough)
http://forums.gentoo.org/viewtopic-p-3165835.html

Starting the source firefox from a completely blank user, with zero plugins and zero config files, doesn't fix the problem.

$ emerge info
Portage 2.0.54 (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(TM) XP 2000+
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -pipe -march=athlon-xp -fforce-addr -fomit-frame-pointer -falign-functions=4 -mfpmath=sse"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig digest distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.gg3.net/ ftp://ftp.ecc.u-tokyo.ac.jp/GENTOO http://gentoo.channelx.biz/ http://ftp.isu.edu.tw/pub/Linux/Gentoo ftp://ftp.isu.edu.tw/pub/Linux/Gentoo"
LANG="it_IT.UTF-8"
LC_ALL="it_IT.UTF-8"
LINGUAS="it"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow X X509 a52 aac aaca52 aad adns alsa apache2 audiofile avi berkdb bitmap-fonts bzip2 cdparanoia cdr chroot cjk crypt cscope cups curl dbus dga dri dts dvb dvd dvdr dvdread emboss encode erandom ethereal exif expat fam fbcon ffmpeg firefox flac flash foomaticdb fortran freetype gd gdbm ggi gif ginac glut gmp gnutls gpm gtk gtk2 guile hal idn imagemagick imap imlib innodb ipv6 jack java javascript jikes jpeg junit kerberos krb4 lcms ldap libcaca libg++ libwww live lzo mad matroska mcal md5sum memlimit mhash mikmod ming mmx mmxext mng motif mozilla mozsvg mp3 mpeg mpi musepack mysql ncurses network nls nptl nsplugin nvidia odbc offensive ogg opengl pam parse-clocks pcre pdflib perl php pic plotutils png postgres ppds prelude python qhull qt quicktime readline real recode rtc samba scanner sdl skey slang slp sndfile snmp socks5 speex spell sqlite sse ssl stream svg tcltk tcpd tetex tga theora threads tiff truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 vcd vorbis win32codecs wmf wxwindows xine xml xml2 xosd xprint xv xvid xvmc yaz zlib linguas_it userland_GNU kernel_linux elibc_glibc"Unset:  ASFLAGS, CTARGET, LDFLAGS




Comment 1


xiaoping Gao





          2006-03-09 02:13:13 UTC
        

(In reply to comment #0)
This bug happens to me too, 
But as I "export MOZ_DISABLE_PANGO=1" and start firefox,
It runs far faster again.
Seems like a bug which has something to do with enabling pango support in firefox-1.5.0.1

here are some bug reports from ubuntu forum:
https://launchpad.net/distros/ubuntu/+source/firefox/+bug/32561
http://bugzilla.ubuntu.com/show_bug.cgi?id=15534




Comment 2


crusaderky





          2006-03-09 02:18:12 UTC
        

I can confirm that. Disabling pango it's still far slower than the windows version (Win2k SP4), but only when it has to do intensive rendering (i.e. translucid effects).




Comment 3


Andreas Klauer





          2006-03-18 06:10:40 UTC
        

I also notice a huge decrease in performance after updating to www-client/mozilla-firefox-1.5.0.1-r2 in comparison to 1.0.x versions. In Firefox 1.0, I could switch tabs instantly. In Firefox 1.5, it takes about one second until the contents of the selected tab are displayed. The same happens if I switch to another window (e.g. an xterm) and then back to Firefox. The CPU load during the time Firefox takes to redraw the window is huge. This is on an Athlon XP 2000+ with 1GB RAM. Setting the MOZ_DISABLE_PANGO does not give me a noticeable improvement.

Unfortunately, the binary created by the Gentoo ebuild comes stripped of all symbols and doesn't seem to respect CFLAGS, so I can't use most debugging tools on it to help determining the problem. But unless Gentoo somehow patches the source, it's a problem that has to be fixed upstream anyway. 




Comment 4


crusaderky





          2006-03-18 10:20:29 UTC
        

> it's a problem that has to be fixed upstream anyway. 

Hardly, since the upstream binary works flawlessly.




Comment 5


Jory A. Pratt





          2006-03-30 19:42:06 UTC
        

As I have done much testing and been unable to replicate the problem I am closing.




Comment 6


crusaderky





          2006-04-15 04:53:42 UTC
        

I finally found out what the hell was causing the problem.

Go to options->advanced->navigation and enable autoscroll and continuous scrolling. Firefox will slow down to a crawl. Disable them, and everything will be smooth again.




Comment 7


Jory A. Pratt





          2006-04-15 08:11:18 UTC
        

As I have always had autoscroll and continues scroll enabled still not an issue.




Comment 8


Andrea Barisani (RETIRED)






          2006-04-29 12:17:51 UTC
        

I can confirm this on ppc, it's *extremely slow* but MOZ_DISABLE_PANGO=1 fix the issue. This should be documented and/or set in the ebuild.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

