Title: 133527 – net-misc/socat-1.4.3.1 fails to build with CFLAGS="-Wall"
URL: https://bugs.gentoo.org/show_bug.cgi?id=133527

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 133527
net-misc/socat-1.4.3.1 fails to build with CFLAGS="-Wall"
Last modified: 2006-08-18 21:18:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 133527 
      - net-misc/socat-1.4.3.1 fails to build with CFLAGS="-Wall"


Summary:
net-misc/socat-1.4.3.1 fails to build with CFLAGS="-Wall"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Netmon project








URL:



https://bugzilla.redhat.com/bugzilla/...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-16 12:26 UTC by Vladimir G. Ivanovic





      Modified:
    
2006-08-18 21:18 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



rhill









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vladimir G. Ivanovic





          2006-05-16 12:26:21 UTC
        

x86_64-pc-linux-gnu-gcc -Wall -march=k8 -mieee-fp -pipe -O2 -fno-strict-aliasing -frename-registers -fweb -ffast-math -D_GNU_SOURCE  -Wall -Wno-parentheses -DHAVE_CONFIG_H -I.  -I.   -c -o xioinitialize.o xioinitialize.c
In file included from socat.c:14:
compat.h:114:4: error: #error "HAVE_BASIC_SIZE_T is out of range:" HAVE_BASIC_SIZE_T
In file included from xioopen.h:8,
                 from xioinitialize.c:9:
compat.h:114:4: error: #error "HAVE_BASIC_SIZE_T is out of range:" HAVE_BASIC_SIZE_T
make: *** [xioinitialize.o] Error 1
make: *** Waiting for unfinished jobs....
make: *** [socat.o] Error 1

!!! ERROR: net-misc/socat-1.4.3.1 failed.


# emerge --info
Portage 2.1_rc1-r2 (default-linux/amd64/2005.1, gcc-4.1.0, glibc-2.4-r3, 2.6.16-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.16-gentoo-r6 x86_64 AMD Turion(tm) 64 Mobile Technology MT-32
Gentoo Base System version 1.12.0_pre19
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r1
dev-util/confcache:  0.4.2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-Wall -march=k8 -mieee-fp -pipe -O2 -fno-strict-aliasing -frename-registers -fweb -ffast-math"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/bind /var/qmail/control /var/service"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-Wall -march=k8 -mieee-fp -pipe -O2 -fno-strict-aliasing -frename-registers -fweb -ffast-math"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache confcache distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://www.ibiblio.org/pub/Linux/distributions/gentoo http://distfiles.gentoo.org"
MAKEOPTS="-j2"
PKGDIR="/etc/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="amd64 X alsa apache2 avi berkdb bitmap-fonts cli crypt cups doc dri eds emboss encode foomaticdb fortran gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog java jikes jpeg kde ldap lzw lzw-tiff mp3 mpeg ncurses nls nptl nptlonly nsplugin opengl pam pcre pdflib perl pic png pppd python qt quicktime readline reflection sdl session spell spl ssl tcpd tiff truetype truetype-fonts type1-fonts unicode usb xml xml2 xorg xpm xv zlib elibc_glibc kernel_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Ryan Hill (RETIRED)






          2006-08-17 20:29:54 UTC
        

Believe it or not, it's triggered by -Wall.

Someone with sane CFLAGS might reproduce this with:
# CFLAGS="${CFLAGS} -Wall" emerge -v socat

a diff shows it only affects this part of configure:
checking for equivalent simple type of size_t... 0 /* unknown, taking default */
checking for equivalent simple type of mode_t... 0 /* unknown, taking default */
checking for equivalent simple type of pid_t... 0 /* unknown, taking default */
checking for equivalent simple type of uid_t... 0 /* unknown, taking default */
checking for equivalent simple type of gid_t... 0 /* unknown, taking default */
checking for equivalent simple type of time_t... 0 /* unknown, taking default */
checking for equivalent simple type of socklen_t... 0 /* unknown, taking default */
checking for equivalent simple type of off64_t... 0 /* unknown, taking default */
checking for basic type of struct stat.st_dev... 0 /* unknown, taking default */
checking for basic type of struct stat.st_ino... 0 /* unknown, taking default */
checking for basic type of struct stat.st_nlink... 0 /* unknown, taking default */
checking for basic type of struct stat.st_size... 0 /* unknown, taking default */
checking for basic type of struct stat.st_blksize... 0 /* unknown, taking default */
checking for basic type of struct stat.st_blocks... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_dev... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_ino... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_nlink... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_size... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_blksize... 0 /* unknown, taking default */
checking for basic type of struct stat64.st_blocks... 0 /* unknown, taking default */
checking for basic type of struct rlimit.rlim_max... 0 /* unknown, taking default */

It is reproducable with at least x86 and amd64, and isn't dependent on GCC 4.1.




Comment 2


Vladimir G. Ivanovic





          2006-08-18 11:29:45 UTC
        

(In reply to comment #1)
> Believe it or not, it's triggered by -Wall.

Correct. Emerging socat-1.4.3.1 on AMD64 with GCC 4.1.1 with

   CFLAGS="-march=k8 -msse3 -pipe -O2 -ffast-math" emerge -av net-misc/socat

works nicely.




Comment 3


Ryan Hill (RETIRED)






          2006-08-18 17:48:30 UTC
        

did you wanna report this to red hat or would you rather i do?




Comment 4


Vladimir G. Ivanovic





          2006-08-18 20:46:56 UTC
        

You please. I wouldn't know exactly what to report, and if they asked any questions...




Comment 5


Ryan Hill (RETIRED)






          2006-08-18 21:18:16 UTC
        

Done.  Closing.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

