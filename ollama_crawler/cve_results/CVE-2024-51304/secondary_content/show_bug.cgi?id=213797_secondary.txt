Title: 213797 – net-nds/openldap-2.3.41 fails to compile (`ldo_deref' undeclared here)
URL: https://bugs.gentoo.org/show_bug.cgi?id=213797

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 213797
net-nds/openldap-2.3.41 fails to compile (`ldo_deref' undeclared here)
Last modified: 2008-04-21 20:49:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 213797 
      - net-nds/openldap-2.3.41 fails to compile (`ldo_deref' undeclared here)


Summary:
net-nds/openldap-2.3.41 fails to compile (`ldo_deref' undeclared here)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo LDAP project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-03-18 09:00 UTC by Gunnar Wrobel (RETIRED)





      Modified:
    
2008-04-21 20:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Gunnar Wrobel (RETIRED)






          2008-03-18 09:00:57 UTC
        

net-nds/openldap-2.3.41 fails to compile.


Reproducible: Always

Steps to Reproduce:
1. USE="berkdb gdbm" emerge  openldap
2.
3.

Actual Results:  

/bin/sh ../..//libtool  --mode=compile cc -O2 -mtune=i686 -pipe -march=k8 -fomit-frame-pointer -I../../include        -I../../include   -I/usr/include/db4.5   -DLDAP_LIBRARY -c init.c
 cc -O2 -mtune=i686 -pipe -march=k8 -fomit-frame-pointer -I../../include -I../../include -I/usr/include/db4.5 -DLDAP_LIBRARY -c init.c  -fPIC -DPIC -o .libs/init.o
init.c:67: error: syntax error before "struct"
init.c:67: error: `ldo_deref' undeclared here (not in a function)
init.c:67: error: initializer element is not constant
init.c:67: error: (near initialization for `attrs[0].offset')
init.c:67: error: initializer element is not constant
init.c:67: error: (near initialization for `attrs[0]')
init.c:69: error: syntax error before "struct"
init.c:69: error: `ldo_sizelimit' undeclared here (not in a function)
init.c:69: error: initializer element is not constant
init.c:69: error: (near initialization for `attrs[1].offset')
init.c:69: error: initializer element is not constant
init.c:69: error: (near initialization for `attrs[1]')
init.c:71: error: syntax error before "struct"
init.c:71: error: `ldo_timelimit' undeclared here (not in a function)
init.c:71: error: initializer element is not constant
init.c:71: error: (near initialization for `attrs[2].offset')
init.c:71: error: initializer element is not constant
init.c:71: error: (near initialization for `attrs[2]')
init.c:73: error: syntax error before "struct"
init.c:73: error: `ldo_defbinddn' undeclared here (not in a function)
init.c:73: error: initializer element is not constant
init.c:73: error: (near initialization for `attrs[3].offset')
init.c:73: error: initializer element is not constant
init.c:73: error: (near initialization for `attrs[3]')
init.c:75: error: syntax error before "struct"
init.c:75: error: `ldo_defbase' undeclared here (not in a function)
init.c:75: error: initializer element is not constant
init.c:75: error: (near initialization for `attrs[4].offset')
init.c:75: error: initializer element is not constant
init.c:75: error: (near initialization for `attrs[4]')
init.c:77: error: syntax error before "struct"
init.c:77: error: `ldo_defport' undeclared here (not in a function)
init.c:77: error: initializer element is not constant
init.c:77: error: (near initialization for `attrs[5].offset')
init.c:77: error: initializer element is not constant
init.c:77: error: (near initialization for `attrs[5]')
init.c:78: error: initializer element is not constant
init.c:78: error: (near initialization for `attrs[6]')
init.c:79: error: initializer element is not constant
init.c:79: error: (near initialization for `attrs[7]')
init.c:80: error: initializer element is not constant
init.c:80: error: (near initialization for `attrs[8]')
init.c:81: error: initializer element is not constant
init.c:81: error: (near initialization for `attrs[9]')
init.c:110: error: initializer element is not constant
init.c:110: error: (near initialization for `attrs[10]')
distcc[30281] ERROR: compile init.c on 217.160.20.101 failed
make[2]: *** [init.lo] Error 1
make[2]: Leaving directory `/var/tmp/portage/net-nds/openldap-2.3.41/work/openldap-2.3.41/libraries/libldap'
make[1]: *** [all-common] Error 1
make[1]: Leaving directory `/var/tmp/portage/net-nds/openldap-2.3.41/work/openldap-2.3.41/libraries'
make: *** [all-common] Error 1
 * 
 * ERROR: net-nds/openldap-2.3.41 failed.
 * Call stack:
 *               ebuild.sh, line   46:  Called src_compile
 *             environment, line 3536:  Called die
 * The specific snippet of code:
 *       emake -j1 || diefunc "$FUNCNAME" "$LINENO" "$?" "make failed";
 *  The die message:
 *   make failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/services/portage.d/net-nds:openldap-2.3.41:20080318-084412.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-nds/openldap-2.3.41/temp/environment'.
 * 


Expected Results:  
Clean build.

Portage 2.1.4_rc8 (default-linux/x86/vserver, gcc-4.1.2, glibc-2.5-r4, 2.6.9-023stab044.11-smp i686)
=================================================================
System uname: 2.6.9-023stab044.11-smp i686 Dual Core AMD Opteron(tm) Processor 175
Timestamp of tree: Tue, 18 Mar 2008 01:46:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.8.5-r3, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -pipe -march=k8 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/init.d /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /usr/X11R6/lib/X11"
CXXFLAGS="-O2 -mtune=i686 -pipe -march=k8 -fomit-frame-pointer"
DISTDIR="/usr/distfiles"
EMERGE_DEFAULT_OPTS=""
FEATURES="ccache distcc distlocks metadata-transfer parallel-fetch sandbox sfperms sign strict unmerge-orphans userfetch userprivs"
GENTOO_MIRRORS="http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/ ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LC_ALL="de_DE.utf8"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--exclude-from=/etc/portage/rsync_excludes"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/webapps-experimental /usr/portage/local/layman/kolab /usr/portage/local/layman/sunrise /usr/portage/local/layman/wrobel"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 	emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m 	maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="vesa fbdev"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS




Comment 1


Jakub Moc (RETIRED)






          2008-03-18 09:06:19 UTC
        

On a side-note, what are you trying to do here?! This -mtune/-march combo absolutely doesn't make sense.

<snip>
CFLAGS="-O2 -mtune=i686 -pipe -march=k8 -fomit-frame-pointer"
</snip>





Comment 2


Markus Ullmann (RETIRED)






          2008-04-21 20:49:47 UTC
        

can't reproduce at all here :(

maybe the distcc box has some screwed setup?
please reopen if issue is reproducable on localhost only









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

