Title: 811921 – www-client/firefox-92.0 failed checks
URL: https://bugs.gentoo.org/show_bug.cgi?id=811921

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 811921
www-client/firefox-92.0 failed checks
Last modified: 2021-09-07 03:53:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 811921 
      - www-client/firefox-92.0 failed checks


Summary:
www-client/firefox-92.0 failed checks
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-09-07 02:29 UTC by John Moe





      Modified:
    
2021-09-07 03:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,36.50 KB,
                text/x-log)

            
2021-09-07 02:29 UTC,

            John Moe




Details





emerge --info

              (emerge-info,6.05 KB,
                text/plain)

            
2021-09-07 02:30 UTC,

            John Moe




Details





emerge -pqv

              (emerge-pqv,753 bytes,
                text/plain)

            
2021-09-07 02:30 UTC,

            John Moe




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John Moe





          2021-09-07 02:29:50 UTC
        

Created attachment 737956 [details]
build.log

While trying to install firefox-92.0, I get the following error.  I'm presuming it's because I've removed AMDGPU from my LLVM_TARGETS, since I have an Intel i7 with an Nvidia MX450; no AMD.  Is my assumption wrong that I don't need that, or should I compile that back in to LLVM?

 0:04.03 checking for executable suffix... configure: error: installation or configuration problem: compiler cannot create executables.
 0:04.03 DEBUG: <truncated - see config.log for full output>
 0:04.03 DEBUG: ; return 0; }
 0:04.03 DEBUG: configure:868: checking for mingw32 environment
 0:04.03 DEBUG: configure:880: /usr/lib/llvm/12/bin/x86_64-pc-linux-gnu-clang -std=gnu99 -c -march=native -mtune=native -pipe  conftest.c 1>&5
 0:04.03 DEBUG: configure:876:8: error: use of undeclared identifier '__MINGW32__'
 0:04.03 DEBUG: return __MINGW32__;
 0:04.03 DEBUG:        ^
 0:04.03 DEBUG: 1 error generated.
 0:04.03 DEBUG: configure: failed program was:
 0:04.03 DEBUG: #line 873 "configure"
 0:04.03 DEBUG: #include "confdefs.h"
 0:04.03 DEBUG:
 0:04.03 DEBUG: int main() {
 0:04.03 DEBUG: return __MINGW32__;
 0:04.03 DEBUG: ; return 0; }
 0:04.03 DEBUG: configure:899: checking for executable suffix
 0:04.03 DEBUG: configure:909: /usr/lib/llvm/12/bin/x86_64-pc-linux-gnu-clang -std=gnu99 -o conftest -march=native -mtune=native -pipe  -Wl,-O1 -Wl,--as-needed -Wl,--compress-debug-sections=zlib -Wl,-rpath=/usr/lib64/firefox,--enable-new-dtags -fuse-ld=lld conftest.c  1>&5
 0:04.03 DEBUG: /usr/bin/ld.lld: symbol lookup error: /usr/bin/../lib64/liblldELF.so.12: undefined symbol: LLVMInitializeAMDGPUTargetInfo, version LLVM_12
 0:04.03 DEBUG: clang-12: error: unable to execute command: No such file or directory
 0:04.03 DEBUG: clang-12: error: linker command failed due to signal (use -v to see invocation)
 0:04.03 DEBUG: configure: error: installation or configuration problem: compiler cannot create executables.
 0:04.03 ERROR: old-configure failed




Comment 1


John Moe





          2021-09-07 02:30:12 UTC
        

Created attachment 737959 [details]
emerge --info




Comment 2


John Moe





          2021-09-07 02:30:27 UTC
        

Created attachment 737962 [details]
emerge -pqv




Comment 3


Tee KOBAYASHI





          2021-09-07 02:38:44 UTC
        

Probably it is required that sys-devel/lld be re-emerged after the change of LLVM_TARGETS.




Comment 4


John Moe





          2021-09-07 02:53:51 UTC
        

I ran emerge --oneshot lld, and it appears to have worked; Firefox is compiling now.  Assuming it finishes compiling and runs, or the next error is completely unrelated, I'll close this off shortly.  Thank you.  :-)

Was that something that should have happened automatically when I changed my LLVM_TARGET and did emerge -aDNuv @world, or something that I should have known to do afterwards?  Or should that be filed as a bug against llvm or lld?




Comment 5


John Moe





          2021-09-07 03:42:02 UTC
        

Emerged successfully and I'm updating this in my new browser; thanks again, closing bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

