Title: 401225 – www-apache/mod_wsgi 3.3 causes abort in apache 2.2.21
URL: https://bugs.gentoo.org/show_bug.cgi?id=401225

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 401225
www-apache/mod_wsgi 3.3 causes abort in apache 2.2.21
Last modified: 2012-02-17 09:20:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 401225 
      - www-apache/mod_wsgi 3.3 causes abort in apache 2.2.21


Summary:
www-apache/mod_wsgi 3.3 causes abort in apache 2.2.21
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Dirkjan Ochtman (RETIRED)








URL:



http://code.google.com/p/modwsgi/issu...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-01-28 19:48 UTC by Johnny





      Modified:
    
2012-02-17 09:20 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



apache-bugs
jaak









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emergeInfo.txt,4.48 KB,
                text/plain)

            
2012-01-28 19:48 UTC,

            Johnny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Johnny





          2012-01-28 19:48:53 UTC
        

Created attachment 300195 [details]
emerge --info

after updating to www-servers/apache-2.2.21-r1 apache gives lots of aborts. Backtrace points to mod_wsgi as the culprit:

# gdb /usr/sbin/apache2 --core core-6
GNU gdb (Gentoo 7.3.1 p2) 7.3.1
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.gentoo.org/>...
Reading symbols from /usr/sbin/apache2...Reading symbols from /usr/lib/debug/usr/sbin/apache2.debug...done.
done.
[New LWP 16205]

warning: Can't read pathname for load map: Input/output error.
[Thread debugging using libthread_db enabled]
Core was generated by `/usr/sbin/apache2 -D DEFAULT_VHOST -D INFO -D STATUS -D LANGUAGE -D SSL -D SSL_'.
Program terminated with signal 6, Aborted.
#0  0x4d15c422 in __kernel_vsyscall ()
(gdb) bt
#0  0x4d15c422 in __kernel_vsyscall ()
#1  0x4cd46968 in raise () from /lib/libc.so.6
#2  0x4cd482c2 in abort () from /lib/libc.so.6
#3  0x4c9a555e in Py_FatalError (msg=0x4c9ea978 "PyEval_AcquireThread: NULL new thread state")
    at Python/pythonrun.c:1670
#4  0x4c9822b2 in PyEval_AcquireThread (tstate=0x0) at Python/ceval.c:272
#5  0x4ba329a9 in wsgi_python_child_cleanup (data=0x0) at mod_wsgi.c:6669
#6  0x4cf13cc8 in apr_pool_destroy () from /usr/lib/libapr-1.so.0
#7  0x59ead7ab in ?? ()
Cannot access memory at address 0x7af44f94

ref also http://forums.gentoo.org/viewtopic-p-6941998.html




Comment 1


Dirkjan Ochtman (RETIRED)






          2012-01-30 15:27:08 UTC
        

Did you revdep-rebuild or otherwise rebuild mod_wsgi after emerging new apache2?




Comment 2


Johnny





          2012-01-30 16:07:00 UTC
        

(In reply to comment #1)
> Did you revdep-rebuild or otherwise rebuild mod_wsgi after emerging new
> apache2?
Yes. revdep-rebuild did not try to rebuild mod_wsgi but I also reemerged it but the problem persisted.
Here's apache options as well in case it might be some interaction with other modules:
APACHE2_OPTS="-D DEFAULT_VHOST -D INFO -D STATUS -D LANGUAGE -D SSL -D SSL_DEFAULT_VHOST -D CGI -D PHP   5 -D PYTHON -D PERL -D SECURITY -D WSGI"




Comment 3


Dirkjan Ochtman (RETIRED)






          2012-02-16 14:27:56 UTC
        

I think it's specific for your system, as it has been working fine on mine.




Comment 4


Jaak Ristioja





          2012-02-16 21:42:37 UTC
        

(In reply to comment #3)
> I think it's specific for your system, as it has been working fine on mine.

It is still a bug. I think got this too. Please reopen.




Comment 5


Dirkjan Ochtman (RETIRED)






          2012-02-17 07:53:56 UTC
        

I've opened an upstream bug at http://code.google.com/p/modwsgi/issues/detail?id=258, please participate there.




Comment 6


Dirkjan Ochtman (RETIRED)






          2012-02-17 09:20:57 UTC
        

The upstream bug has details on issues that can cause this, it still doesn't appear to be a Gentoo bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

