Title: 130090 – squidclam-0.21 redirects every request
URL: https://bugs.gentoo.org/show_bug.cgi?id=130090

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 130090
squidclam-0.21 redirects every request
Last modified: 2006-06-20 06:23:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 130090 
      - squidclam-0.21 redirects every request


Summary:
squidclam-0.21 redirects every request
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Other
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Network Proxy Developers (OBSOLETE)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

137365

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-04-15 12:31 UTC by Attila Tóth





      Modified:
    
2006-06-20 06:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Attila Tóth





          2006-04-15 12:31:35 UTC
        

Using stable squid and clamd. Upgrading squidclam-0.20 to squidclam-0.21 screwed up the proxy redirecting every request to the "infected" page. Clamd, squid and squidclam configuration remained the same. Downgrading to 0.20 solves the problem. Fortunatelly (unlike eaccelerator and mysql) the previous ebuild remained in the tree, so I could use it in the absence of an archived portage tree. The phenomena is clearly linked to the new version. No specific error messages can be seen in any of the system logs. Squid log shows only the necessary log signs of redirection.
I have no clue on this behaviour. The clamd is accessible all the time on 127.0.0.1:3310. Other applications and the previous version of squidclam can communicate with it.

Regards,
Dw.




Comment 1


Alin Năstac (RETIRED)






          2006-04-19 10:50:38 UTC
        

works for me, with default squidclam.conf and squid.conf settings recommended by pkg_postinst info messages: 
 * THIS PACKAGE IS IN ITS EARLY DEVELOPMENT STAGE!
 * See http://squidclam.sourceforge.net/ for more info.
        echo
        einfo Add following lines to your squid.conf:
        einfo  redirect_program /usr/bin/squidclam
        einfo  redirect_children 15
 * and this line to your acl list to prevent loops:
 *     redirector_access deny localhost

 * Squid doesn't pass complete ssl urls to the redirector!
 * Therefore scanning them is pretty useless.
 * Add something like the following to avoid this and save bandwidth:
 *     acl SSL_ports port 443 563
 *     redirector_access deny SSL_ports






Comment 2


Jakub Moc (RETIRED)






          2006-06-20 06:23:19 UTC
        

*** Bug 137365 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

