Title: 197649 – app-office/gnucash-2.2.1-r1 does not compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=197649

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 197649
app-office/gnucash-2.2.1-r1 does not compile
Last modified: 2009-07-24 07:49:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 197649 
      - app-office/gnucash-2.2.1-r1 does not compile


Summary:
app-office/gnucash-2.2.1-r1 does not compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Torsten Veller (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-10-31 15:55 UTC by Jan-Erik Skata





      Modified:
    
2009-07-24 07:49 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



Eddward
gnome-office+disabled
scy-bugs-gentoo
tuomas.jantti









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jan-Erik Skata





          2007-10-31 15:55:23 UTC
        

Seems it is missing some dependency.

Reproducible: Always




x86_64-pc-linux-gnu-gcc -I../.. -pthread -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -DORBIT2=1 -pthread -I/usr/include/libgnomeui-2.0 -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/gnome-keyring-1 -I/usr/include/libgnome-2.0 -I/usr/include/libbonoboui-2.0 -I/usr/include/libgnomecanvas-2.0 -I/usr/include/gtk-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib64/gnome-vfs-2.0/include -I/usr/include/orbit-2.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/libxml2 -I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/include/gail-1.0 -I/usr/include/atk-1.0 -I/usr/lib64/gtk-2.0/include -I/usr/include/cairo -I/usr/include/libpng12 -I/usr/include/gtk-2.0 -I/usr/lib64/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12 -pthread -I../../lib/libqof/qof -I../../lib/libqof/qof -DPKGSYSCONFDIR=\"/etc/gnucash\" -DPKGDATADIR=\"/usr/share/gnucash\" -DGNC_HELPDIR=\"/usr/share\" -I../../src -I../../src -I../../src/core-utils -I../../src/app-utils -I../../src/gnome-utils -I../../src/engine -I../../src/gnome -I../../src/gnome-utils -I../../src/gnc-module -Wdeclaration-after-statement -Wno-pointer-sign -D_FORTIFY_SOURCE=2 -march=nocona -pipe -fomit-frame-pointer -g -O2 -Wall -Wunused -Wmissing-prototypes -Wmissing-declarations -Wno-unused -g -o .libs/gnucash-bin gnucash-bin.o -pthread -pthread -Wl,--export-dynamic -pthread  /usr/lib64/libguile.so -L/usr/lib64 /usr/lib64/libgmp.so -lcrypt /usr/lib64/libltdl.so /usr/lib64/libgnomeui-2.so /usr/lib64/libSM.so /usr/lib64/libICE.so /usr/lib64/libbonoboui-2.so /usr/lib64/libgnomevfs-2.so /usr/lib64/libgnomecanvas-2.so /usr/lib64/libgnome-2.so /usr/lib64/libbonobo-2.so /usr/lib64/libbonobo-activation.so /usr/lib64/libart_lgpl_2.so /usr/lib64/libgconf-2.so /usr/lib64/libORBit-2.so /usr/lib64/libgthread-2.0.so -lrt /usr/lib64/libgtk-x11-2.0.so /usr/lib64/libgdk-x11-2.0.so /usr/lib64/libatk-1.0.so /usr/lib64/libgdk_pixbuf-2.0.so /usr/lib64/libpangocairo-1.0.so /usr/lib64/libpango-1.0.so /usr/lib64/libcairo.so /usr/lib64/libgobject-2.0.so /usr/lib64/libgmodule-2.0.so -ldl /usr/lib64/libglib-2.0.so ../../lib/libqof/qof/.libs/libgnc-qof.so ../../src/engine/.libs/libgncmod-engine.so ../../src/gnome/.libs/libgnc-gnome.so ../../src/gnome-utils/.libs/libgncmod-gnome-utils.so ../../src/app-utils/.libs/libgncmod-app-utils.so ../../src/core-utils/.libs/libgnc-core-utils.so ../../src/gnc-module/.libs/libgnc-module.so /usr/lib64/libpopt.so -lm -Wl,--rpath -Wl,/usr/lib64/gnucash
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld: warning: libgwrap-guile-runtime.so.0, needed by /usr/lib64/gnucash/libgncmod-report-gnome.so, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld: warning: libgwrap-core-runtime.so.0, needed by /usr/lib64/gnucash/libgncmod-report-gnome.so, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld: warning: libffi.so.4, needed by /usr/lib64/gnucash/libgncmod-report-gnome.so, not found (try using -rpath or -rpath-link)
/usr/lib64/gnucash/libgncmod-report-gnome.so: undefined reference to `gw_wcp_get_ptr'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_guile_runtime_init'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wct_p'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wrapset_add_function'
/usr/lib64/gnucash/libgncmod-gnome-utils.so.0: undefined reference to `gw_wcp_assimilate_ptr'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `ffi_type_pointer'
/usr/lib64/gnucash/libgncmod-gnome-utils.so.0: undefined reference to `gw_wcp_p'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wrapset_new'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `ffi_type_sint32'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wct_create'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wcp_is_of_type_p'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_handle_wrapper_error'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_guile_enum_val2int'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wrapset_register'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_guile_enum_val2sym'
/usr/lib64/gnucash/libgw-engine.so.0: undefined reference to `gw_wrapset_add_type'
collect2: ld returned 1 exit status
make[4]: *** [gnucash-bin] Error 1
make[4]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.1-r1/work/gnucash-2.2.1/src/bin'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.1-r1/work/gnucash-2.2.1/src/bin'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.1-r1/work/gnucash-2.2.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.1-r1/work/gnucash-2.2.1'
make: *** [all] Error 2
 *
 * ERROR: app-office/gnucash-2.2.1-r1 failed.
 * Call stack:
 *                 ebuild.sh, line 1695:  Called dyn_compile
 *                 ebuild.sh, line 1033:  Called qa_call 'src_compile'
 *                 ebuild.sh, line   44:  Called src_compile
 *   gnucash-2.2.1-r1.ebuild, line   86:  Called die
 * The specific snippet of code:
 *      emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/app-office:gnucash-2.2.1-r1:20071031-154829.log'.
 *

 * Messages for package app-office/gnucash-2.2.1-r1:

 *
 * ERROR: app-office/gnucash-2.2.1-r1 failed.
 * Call stack:
 *                 ebuild.sh, line 1695:  Called dyn_compile
 *                 ebuild.sh, line 1033:  Called qa_call 'src_compile'
 *                 ebuild.sh, line   44:  Called src_compile
 *   gnucash-2.2.1-r1.ebuild, line   86:  Called die
 * The specific snippet of code:
 *      emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/app-office:gnucash-2.2.1-r1:20071031-154829.log'.
 *


# emerge --info
Portage 2.1.3.16 (default-linux/amd64/2006.1, gcc-4.2.2, glibc-2.6.1-r0, 2.6.23-gentoo x86_64)
=================================================================
System uname: 2.6.23-gentoo x86_64 Intel(R) Core(TM)2 CPU 6600 @ 2.40GHz
Timestamp of tree: Wed, 31 Oct 2007 12:20:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.2-r1
dev-lang/python:     2.4.4-r5, 2.5.1-r3
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=nocona -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://trumpetti.atm.tut.fi/gentoo/ ftp://trumpetti.atm.tut.fi/gentoo/ "
LANG="sv_FI@euro"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X aac alsa amd64 berkdb bitmap-fonts bzip2 cli cracklib crypt dlloader dri dvb dvd dvdr dvdread enblend exif fortran gdbm gif gimp gpm gtk gtk2 iconv isdnlog java jp2 jpeg jpeg2k kde lesstiff mad midi motif mp3 mudflap ncurses nls nptl nptlonly nsplugin offensive opengl openmp pam pcre perl pic png ppds pppd python qt qt3 readline reflection session sift spl ssl tcpd theora threads tiff truetype-fonts type1-fonts unicode v4l wxwindows xcomposite xinerama xorg xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="nv nvidia vesa fbdev v4l nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Josh Sled





          2007-10-31 18:20:08 UTC
        

(In reply to comment #0)
> Seems it is missing some dependency.

Not exactly...  

A bit tangentially, GnuCash 2.2 doesn't use g-wrap any longer.
 
> x86_64-pc-linux-gnu-gcc -I../.. -pthread -I/usr/include/glib-2.0
[...]
> ../../src/gnc-module/.libs/libgnc-module.so /usr/lib64/libpopt.so -lm
> -Wl,--rpath -Wl,/usr/lib64/gnucash
> /usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld:
> warning: libgwrap-guile-runtime.so.0, needed by
> /usr/lib64/gnucash/libgncmod-report-gnome.so, not found (try using -rpath or
> -rpath-link)

Why is it trying to link against the
/usr/lib64/gnucash/libgncmod-report-gnome.so ?  That's pulling in the old and
obsolete references...





Comment 2


Tim Weber





          2007-11-02 09:32:57 UTC
        

Looks similar on my box:

/bin/sh ../../libtool --tag=CC   --mode=link i686-pc-linux-gnu-gcc -I../.. -pthread -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include   -DORBIT2=1 -pthread -I/usr/include/libgnomeui-2.0 -I/usr/include/libgnome-2.0 -I/usr/include/libgnomecanvas-2.0 -I/usr/include/gtk-2.0 -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/libbonoboui-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -I/usr/include/gnome-keyring-1 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/libpng12 -I/usr/include/libxml2 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12  -I../../lib/libqof/qof -I../../lib/libqof/qof -DPKGSYSCONFDIR=\"/etc/gnucash\" -DPKGDATADIR=\"/usr/share/gnucash\" -DGNC_HELPDIR=\"/usr/share\" -I../../src -I../../src -I../../src/core-utils -I../../src/app-utils -I../../src/gnome-utils -I../../src/engine -I../../src/gnome -I../../src/gnome-utils -I../../src/gnc-module -Wdeclaration-after-statement -Wno-pointer-sign -D_FORTIFY_SOURCE=2  -march=i686 -pipe -fomit-frame-pointer -g  -O2 -Wall -Wunused -Wmissing-prototypes -Wmissing-declarations  -Wno-unused  -g -o gnucash-bin gnucash-bin.o -lguile -lltdl  -lgmp -lcrypt -lm -lltdl -pthread -Wl,--export-dynamic -lgthread-2.0 -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0   -pthread -lgnomeui-2 -lSM -lICE -lbonoboui-2 -lgnome-keyring -lxml2 -lgnomecanvas-2 -lgnome-2 -lpopt -lart_lgpl_2 -lpangoft2-1.0 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lpangocairo-1.0 -lpango-1.0 -lcairo -lbonobo-2 -lgnomevfs-2 -lbonobo-activation -lgconf-2 -lgobject-2.0 -lORBit-2 -lm -lgmodule-2.0 -ldl -lgthread-2.0 -lglib-2.0   -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lm -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0   ../../lib/libqof/qof/libgnc-qof.la ../../src/engine/libgncmod-engine.la ../../src/gnome/libgnc-gnome.la ../../src/gnome-utils/libgncmod-gnome-utils.la ../../src/app-utils/libgncmod-app-utils.la ../../src/core-utils/libgnc-core-utils.la ../../src/gnc-module/libgnc-module.la -lpopt -lm  -lm
mkdir .libs
i686-pc-linux-gnu-gcc -I../.. -pthread -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -DORBIT2=1 -pthread -I/usr/include/libgnomeui-2.0 -I/usr/include/libgnome-2.0 -I/usr/include/libgnomecanvas-2.0 -I/usr/include/gtk-2.0 -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/libbonoboui-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -I/usr/include/gnome-keyring-1 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/libpng12 -I/usr/include/libxml2 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12 -I../../lib/libqof/qof -I../../lib/libqof/qof -DPKGSYSCONFDIR=\"/etc/gnucash\" -DPKGDATADIR=\"/usr/share/gnucash\" -DGNC_HELPDIR=\"/usr/share\" -I../../src -I../../src -I../../src/core-utils -I../../src/app-utils -I../../src/gnome-utils -I../../src/engine -I../../src/gnome -I../../src/gnome-utils -I../../src/gnc-module -Wdeclaration-after-statement -Wno-pointer-sign -D_FORTIFY_SOURCE=2 -march=i686 -pipe -fomit-frame-pointer -g -O2 -Wall -Wunused -Wmissing-prototypes -Wmissing-declarations -Wno-unused -g -o .libs/gnucash-bin gnucash-bin.o -pthread -Wl,--export-dynamic -pthread  /usr/lib/libguile.so /usr/lib/libgmp.so -lcrypt /usr/lib/libltdl.so /usr/lib/libgnomeui-2.so /usr/lib/libSM.so /usr/lib/libICE.so /usr/lib/libbonoboui-2.so /usr/lib/libgnome-keyring.so /usr/lib/libxml2.so /usr/lib/libgnomecanvas-2.so /usr/lib/libgnome-2.so /usr/lib/libart_lgpl_2.so /usr/lib/libpangoft2-1.0.so /usr/lib/libbonobo-2.so /usr/lib/libgnomevfs-2.so /usr/lib/libbonobo-activation.so /usr/lib/libgconf-2.so /usr/lib/libORBit-2.so /usr/lib/libgthread-2.0.so /usr/lib/libgtk-x11-2.0.so /usr/lib/libgdk-x11-2.0.so /usr/lib/libatk-1.0.so /usr/lib/libgdk_pixbuf-2.0.so /usr/lib/libpangocairo-1.0.so /usr/lib/libpango-1.0.so /usr/lib/libcairo.so /usr/lib/libgobject-2.0.so /usr/lib/libgmodule-2.0.so -ldl /usr/lib/libglib-2.0.so ../../lib/libqof/qof/.libs/libgnc-qof.so ../../src/engine/.libs/libgncmod-engine.so ../../src/gnome/.libs/libgnc-gnome.so ../../src/gnome-utils/.libs/libgncmod-gnome-utils.so ../../src/app-utils/.libs/libgncmod-app-utils.so ../../src/core-utils/.libs/libgnc-core-utils.so ../../src/gnc-module/.libs/libgnc-module.so /usr/lib/libpopt.so -lm -Wl,--rpath -Wl,/usr/lib/gnucash
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile-ltdl.so.1, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libqthreads.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_thread_count'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_switch_counter'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_ints_disabled'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_block_gc'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `coop_yield'
collect2: ld returned 1 exit status

Note that it dies because of other libraries.

There was once libgwrap in the list of failing libraries as well, but this got solved by re-merging g-wrap.

My versions and use-flags:
bijaz ~ # emerge -pv guile g-wrap guile-lib gnucash

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] dev-scheme/guile-1.8.3-r1  USE="deprecated nls regex -debug -debug-freelist -debug-malloc -discouraged -elisp -networking -threads" 0 kB 
[ebuild   R   ] dev-libs/g-wrap-1.9.6-r3  0 kB 
[ebuild  N    ] dev-scheme/guile-lib-0.1.3  0 kB 
[ebuild     U ] app-office/gnucash-2.2.1-r1 [2.0.5] USE="-chipcard -debug -hbci -ofx -quotes (-doc%) (-nls%*)" 0 kB 
[ebuild  N    ] app-doc/gnucash-docs-2.2.0  9,789 kB 
[blocks B     ] <dev-libs/g-wrap-1.9.8 (is blocking dev-scheme/guile-lib-0.1.3)

Note that I have g-wrap 1.9.6 and thus can't merge guile-lib. I must admit that I don't have a clue what I actually _need_ at all, and the gnucash dependencies don't help in any way, because they say what I've installed right now is fine with them.

I'm willing to test this bug extensively, as I need gnucash better sooner than later (the currently installed version is broken because it's missing libguile.so.12). So, developers, command me. :)




Comment 3


Torsten Veller (RETIRED)






          2007-11-02 15:10:26 UTC
        

I tried to reproduce the failure yesterday but i couldn't. As soon as I am home again, I will investigate.

A workaround should be:
uninstall your old gnucash version and gwrap (if not needed by another package). Then install gnucash again.




Comment 4


Tim Weber





          2007-11-02 16:11:01 UTC
        

The workaround you suggested indeed fixed it, thanks a lot!




Comment 5


Brandon Low





          2007-11-03 03:12:54 UTC
        

ooohhh, so the problem is that the new gnucash is somehow linking against old gnucash libraries on the live system.




Comment 6


Craig Finch





          2008-03-06 04:29:54 UTC
        

This bug is still alive when upgrading from gnucash-2.0.5 to 2.2.3.  
For me, it dies as follows:

/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile-ltdl.so.1, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libqthreads.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_thread_count'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_switch_counter'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_ints_disabled'
/usr/lib/libgwrap-guile-runtime.so.0: undefined reference to `scm_freelist'
/usr/lib/libgwrap-guile-runtime.so.0: undefined reference to `scm_master_freelist'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_block_gc'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `coop_yield'
collect2: ld returned 1 exit status
make[4]: *** [gnucash-bin] Error 1
make[4]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src/bin'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src/bin'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3'
make: *** [all] Error 2
 * 
 * ERROR: app-office/gnucash-2.2.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2729:  Called die
 * The specific snippet of code:
 *       emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/app-office:gnucash-2.2.3:20080305-213439.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-office/gnucash-2.2.3/temp/environment'.
 * 

 * Messages for package app-office/gnucash-2.2.3:

 * 
 * ERROR: app-office/gnucash-2.2.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2729:  Called die
 * The specific snippet of code:
 *       emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/app-office:gnucash-2.2.3:20080305-213439.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-office/gnucash-2.2.3/temp/environment'.




Comment 7


Eddward





          2008-04-15 02:44:36 UTC
        

I just had a similar failure going from 2.0.5 to 2.2.3.



Build Failure
==================================================
i686-pc-linux-gnu-gcc -I../.. -pthread -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -DORBIT2=1 -pthread -I/usr/include/libgnomeui-2.0 -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/gnome-keyring-1 -I/usr/include/libgnome-2.0 -I/usr/include/libbonoboui-2.0 -I/usr/include/libgnomecanvas-2.0 -I/usr/include/gtk-2.0 -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include -I/usr/include/orbit-2.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/libbonobo-2.0 -I/usr/include/bonobo-activation-2.0 -I/usr/include/libxml2 -I/usr/include/pango-1.0 -I/usr/include/freetype2 -I/usr/include/gail-1.0 -I/usr/include/atk-1.0 -I/usr/lib/gtk-2.0/include -I/usr/include/cairo -I/usr/include/libpng12 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/freetype2 -I/usr/include/libpng12 -pthread -I../../lib/libqof/qof -I../../lib/libqof/qof -DPKGSYSCONFDIR=\"/etc/gnucash\" -DPKGDATADIR=\"/usr/share/gnucash\" -DGNC_HELPDIR=\"/usr/share\" -I../../src -I../../src -I../../src/core-utils -I../../src/app-utils -I../../src/gnome-utils -I../../src/engine -I../../src/gnome -I../../src/gnome-utils -I../../src/gnc-module -Wdeclaration-after-statement -march=i686 -fomit-frame-pointer -pipe -g -Os -Wall -Wunused -Wmissing-prototypes -Wmissing-declarations -Wno-unused -g -o .libs/gnucash-bin gnucash-bin.o -pthread -pthread -Wl,--export-dynamic -pthread  /usr/lib/libguile.so /usr/lib/libgmp.so -lcrypt /usr/lib/libltdl.so /usr/lib/libgnomeui-2.so /usr/lib/libSM.so /usr/lib/libICE.so /usr/lib/libbonoboui-2.so /usr/lib/libgnomevfs-2.so /usr/lib/libgnomecanvas-2.so /usr/lib/libgnome-2.so /usr/lib/libbonobo-2.so /usr/lib/libbonobo-activation.so /usr/lib/libart_lgpl_2.so /usr/lib/libgconf-2.so /usr/lib/libORBit-2.so /usr/lib/libgthread-2.0.so -lrt /usr/lib/libgtk-x11-2.0.so /usr/lib/libgdk-x11-2.0.so /usr/lib/libatk-1.0.so /usr/lib/libgdk_pixbuf-2.0.so /usr/lib/libpangocairo-1.0.so /usr/lib/libpango-1.0.so /usr/lib/libcairo.so /usr/lib/libgobject-2.0.so /usr/lib/libgmodule-2.0.so -ldl /usr/lib/libglib-2.0.so ../../lib/libqof/qof/.libs/libgnc-qof.so ../../src/engine/.libs/libgncmod-engine.so ../../src/gnome/.libs/libgnc-gnome.so ../../src/gnome-utils/.libs/libgncmod-gnome-utils.so ../../src/app-utils/.libs/libgncmod-app-utils.so ../../src/core-utils/.libs/libgnc-core-utils.so ../../src/gnc-module/.libs/libgnc-module.so /usr/lib/libpopt.so -lm  -Wl,--rpath -Wl,/usr/lib/gnucash
/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../../../i686-pc-linux-gnu/bin/ld: warning: libguile-ltdl.so.1, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../../../i686-pc-linux-gnu/bin/ld: warning: libqthreads.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not found (try using -rpath or -rpath-link)
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_ints_disabled'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `coop_yield'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_thread_count'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_switch_counter'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_block_gc'
collect2: ld returned 1 exit status
make[4]: *** [gnucash-bin] Error 1
make[4]: Leaving directory `/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src/bin'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src/bin'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/work/gnucash-2.2.3'
make: *** [all] Error 2
 * 
 * ERROR: app-office/gnucash-2.2.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2768:  Called die
 * The specific snippet of code:
 *       emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/temp/build.log'.
 * The ebuild environment file is located at '/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/temp/environment'.
 * 

 * Messages for package app-office/gnucash-2.2.3:

 * 
 * ERROR: app-office/gnucash-2.2.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2768:  Called die
 * The specific snippet of code:
 *       emake -j1 || die "emake failed"
 *  The die message:
 *   emake failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/temp/build.log'.
 * The ebuild environment file is located at '/home/gentoooverflow/tmp/portage/app-office/gnucash-2.2.3/temp/environment'.
 * 

========================================


Emerge Info
========================================
Portage 2.1.4.4 (default-linux/x86/2007.0/desktop, gcc-3.4.6, glibc-2.6.1-r0, 2.6.18-gentoo-r2 i686)
=================================================================
System uname: 2.6.18-gentoo-r2 i686 AMD Sempron(tm) Processor 2600+
Timestamp of tree: Mon, 14 Apr 2008 15:30:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.3.5-r3, 2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -march=i686 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-Os -march=i686 -fomit-frame-pointer -pipe"
DISTDIR="/home/gentoooverflow/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/home/gentoooverflow/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 7zip X a52 aac acl acpi alsa arts artworkextra asf avi berkdb blender-game cairo calendar cdinstall cdparanoia cdr cli cracklib crypt ctype cups dbus divx4linux doc dri dts dv dvd dvdr dvdread eds emacs emboss encode esd evo examples fam fbcon ffmpeg fftw firefox flac flash fortran ftp gcj gdbm ggi gif gnome gnustep gphoto2 gpm gstreamer gtk hal hou iconv icq imagemagick imap isdnlog jabber javascript joystick jpeg kerberos ladcca ldap leim mad maildir matroska mbox mcal midi mikmod mime ming mmap mmx modplug mp3 mpeg msn mudflap mule ncurses nls nocd nowin nptl nptlonly nsplugin offensive ofx ogg oggvorbis openal opengl openmp oss pam pcre pdf pdflib perl png pppd python qt3 qt3support qt4 quicktime readline real realmedia recode reflection rogue sdl seamonkey session sharedmem shorten sid skins sndfile sockets sou spell spl sse ssl svg tcpd theora threads tiff truetype unicode usb v4l vcd videos vorbis win32codecs wmf x86 xine xml xorg xpm xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="dummy fbdev glint nv vesa vga nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 8


Tuomas Jäntti





          2008-08-11 13:04:03 UTC
        

(In reply to comment #7)
> I just had a similar failure going from 2.0.5 to 2.2.3.
> 
And the problem persists still when trying to emerge 2.2.5

/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../../i686-pc-linux-gnu/bin/ld: warnin
g: libguile.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, not f
ound (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../../i686-pc-linux-gnu/bin/ld: warnin
g: libguile-ltdl.so.1, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, n
ot found (try using -rpath or -rpath-link)
/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../../i686-pc-linux-gnu/bin/ld: warnin
g: libqthreads.so.12, needed by /usr/lib/gnucash/libgncmod-register-core.so.0, no
t found (try using -rpath or -rpath-link)
/usr/lib/libgwrap-guile-runtime.so.0: undefined reference to `scm_freelist'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_ints_disabled'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `coop_yield'
/usr/lib/libgwrap-guile-runtime.so.0: undefined reference to `scm_master_freelist'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_thread_count'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_switch_counter'
/usr/lib/gnucash/libgw-engine.so.0: undefined reference to `scm_block_gc'
collect2: ld returned 1 exit status
make[4]: *** [gnucash-bin] Error 1





Comment 9


Torsten Veller (RETIRED)






          2009-07-24 07:49:03 UTC
        

I think i neglected this bug long enough that all problems are gone.

Reopen if there is still something to do.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

