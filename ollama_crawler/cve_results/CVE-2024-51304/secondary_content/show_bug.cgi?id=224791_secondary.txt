Title: 224791 – multisync-gui-0.92 fails because cmake does not find gtk2+
URL: https://bugs.gentoo.org/show_bug.cgi?id=224791

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 224791
multisync-gui-0.92 fails because cmake does not find gtk2+
Last modified: 2009-10-06 08:12:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 224791 
      - multisync-gui-0.92 fails because cmake does not find gtk2+


Summary:
multisync-gui-0.92 fails because cmake does not find gtk2+
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Peter Alfredsen (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-06-03 18:31 UTC by Tobias Kaminsky





      Modified:
    
2009-10-06 08:12 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



peper









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tobias Kaminsky





          2008-06-03 18:31:48 UTC
        

>>> Emerging (1 of 1) app-pda/multisync-gui-0.92.0_pre20080531 to /
 * multisync-gui-0.92.0_pre20080531.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                           [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                  [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                 [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                [ ok ]
 * checking multisync-gui-0.92.0_pre20080531.tar.bz2 ;-) ...                                                                          [ ok ]
>>> Unpacking source...
>>> Unpacking multisync-gui-0.92.0_pre20080531.tar.bz2 to /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work
>>> Source unpacked.
>>> Compiling source in /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531 ...
-- Check for working C compiler: /usr/lib/ccache/bin/i686-pc-linux-gnu-gcc
-- Check for working C compiler: /usr/lib/ccache/bin/i686-pc-linux-gnu-gcc -- works
-- Check size of void*
-- Check size of void* - done
-- checking for one of the modules 'opensync-1.0>=0.36'
--   found opensync-1.0, version 0.36
-- (DEBUG) GTK2_GTK_INCLUDE_DIR is /usr/include/gtk-2.0
-- (DEBUG) GTK2_GLIBCONFIG_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_GLIB_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_GDK_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_GTKGL_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_GLADE_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_PANGO_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_CAIRO_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_ATK_INCLUDE_DIR is /usr/include
-- (DEBUG) GTK2_GTK_LIBRARY is /usr/lib/libgtk-x11-2.0.so
-- (DEBUG) GTK2_GDK_LIBRARY is /usr/lib/libgdk-x11-2.0.so
-- (DEBUG) GTK2_GDK_PIXBUF_LIBRARY is /usr/lib/libgdk_pixbuf-2.0.so
-- (DEBUG) GTK2_GMODULE_LIBRARY is /usr/lib/libgmodule-2.0.so
-- (DEBUG) GTK2_GTHREAD_LIBRARY is /usr/lib/libgthread-2.0.so
-- (DEBUG) GTK2_GOBJECT_LIBRARY is /usr/lib/libgobject-2.0.so
-- (DEBUG) GTK2_GLIB_LIBRARY is /usr/lib/libglib-2.0.so
-- (DEBUG) GTK2_GTKGL_LIBRARY is /usr/lib/libgtkgl.so
-- (DEBUG) GTK2_GLADE_LIBRARY is /usr/lib/libglade-2.0.so
-- (DEBUG) GTK2_PANGO_LIBRARY is /usr/lib/libpango-1.0.so
-- (DEBUG) GTK2_PANGO_LIBRARY is /usr/lib/libpangocairo-1.0.so
-- (DEBUG) GTK2_ATK_LIBRARY is /usr/lib/libatk-1.0.so
-- Found GTK2: /usr/lib/libgtk-x11-2.0.so;/usr/lib/libgdk-x11-2.0.so;/usr/lib/libgdk_pixbuf-2.0.so;/usr/lib/libgmodule-2.0.so;/usr/lib/libgthread-2.0.so;/usr/lib/libgobject-2.0.so;/usr/lib/libglade-2.0.so;/usr/lib/libpango-1.0.so;/usr/lib/libpangocairo-1.0.so;/usr/lib/libatk-1.0.so;/usr/lib/libgtkgl.so
-- Found LIBGLADE: /usr/lib/libglade-2.0.so
-- checking for one of the modules 'libxml-2.0'
--   found libxml-2.0, version 2.6.32
-- Configuring done
-- Generating done
-- Build files have been written to: /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui_build
Scanning dependencies of target multisyncgui
[ 14%] Building C object src/CMakeFiles/multisyncgui.dir/plugins/msync_default.o
[ 28%] Building C object src/CMakeFiles/multisyncgui.dir/msync_callbacks.o
In file included from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:1:
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:7:21: error: gtk/gtk.h: No such file or directory
In file included from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/msync_callbacks.c:1:
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/multisync.h:7:21: error: gtk/gtk.h: No such file or directory
In file included from /usr/include/glade/glade.h:28,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:8,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:1:
/usr/include/glade/glade-xml.h:26:27: error: gtk/gtkwidget.h: No such file or directory
/usr/include/glade/glade-xml.h:27:29: error: gtk/gtktooltips.h: No such file or directory
In file included from /usr/include/glade/glade.h:28,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:8,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:1:
/usr/include/glade/glade-xml.h:44: error: expected specifier-qualifier-list before 'GObject'
/usr/include/glade/glade-xml.h:53: error: expected specifier-qualifier-list before 'GObjectClass'
/usr/include/glade/glade-xml.h:59: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'glade_xml_get_type'
/usr/include/glade/glade-xml.h:75: error: expected declaration specifiers or '...' before 'GCallback'
/usr/include/glade/glade-xml.h:78: error: expected declaration specifiers or '...' before 'GCallback'
/usr/include/glade/glade-xml.h:92: error: expected declaration specifiers or '...' before 'GObject'
/usr/include/glade/glade-xml.h:95: error: expected declaration specifiers or '...' before 'GObject'
/usr/include/glade/glade-xml.h:113: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/usr/include/glade/glade-xml.h:122: error: expected ')' before '*' token
/usr/include/glade/glade-xml.h:123: error: expected ')' before '*' token
/usr/include/glade/glade-xml.h:127: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/usr/include/glade/glade-xml.h:136: error: expected ')' before 'handler'
In file included from /usr/include/glade/glade.h:28,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/multisync.h:8,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/msync_callbacks.c:1:
/usr/include/glade/glade-xml.h:26:27: error: gtk/gtkwidget.h: No such file or directory
/usr/include/glade/glade-xml.h:27:29: error: gtk/gtktooltips.h: No such file or directory
In file included from /usr/include/glade/glade.h:28,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/multisync.h:8,
                 from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/msync_callbacks.c:1:
/usr/include/glade/glade-xml.h:44: error: expected specifier-qualifier-list before 'GObject'
/usr/include/glade/glade-xml.h:53: error: expected specifier-qualifier-list before 'GObjectClass'
/usr/include/glade/glade-xml.h:59: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'glade_xml_get_type'
/usr/include/glade/glade-xml.h:75: error: expected declaration specifiers or '...' before 'GCallback'
/usr/include/glade/glade-xml.h:78: error: expected declaration specifiers or '...' before 'GCallback'
/usr/include/glade/glade-xml.h:92: error: expected declaration specifiers or '...' before 'GObject'
/usr/include/glade/glade-xml.h:95: error: expected declaration specifiers or '...' before 'GObject'
/usr/include/glade/glade-xml.h:113: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/usr/include/glade/glade-xml.h:122: error: expected ')' before '*' token
/usr/include/glade/glade-xml.h:123: error: expected ')' before '*' token

$eix -e gtk+
[I] x11-libs/gtk+
   Installed versions:  1.2.10-r12
                        2.12.9-r2

cmake is 2.4.8

Thanks
Tobi




Comment 1


Tobias Kaminsky





          2008-06-03 18:33:08 UTC
        

For example:
gtk/gtk.h is here:
/usr/include/gtk-2.0/gtk/gtk.h




Comment 2


Peter Alfredsen (RETIRED)






          2008-06-03 20:23:36 UTC
        

What does this return:
pkg-config --cflags atk
?




Comment 3


Tobias Kaminsky





          2008-06-03 20:25:46 UTC
        

(In reply to comment #2)
> What does this return:
> pkg-config --cflags atk
> ?
> 
22:25:29]|[root@tobi-rechner]|/home/tobi
$pkg-config --cflags atk
-I/usr/include/atk-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include





Comment 4


Peter Alfredsen (RETIRED)






          2008-06-03 20:59:06 UTC
        

I've been staring at FindGTK2.cmake for 10 minutes now and the only way this would make sense is if  /usr/include/atk/atk.h exists.
...
Does it?




Comment 5


Tobias Kaminsky





          2008-06-03 21:01:52 UTC
        

(In reply to comment #4)
> I've been staring at FindGTK2.cmake for 10 minutes now and the only way this
> would make sense is if  /usr/include/atk/atk.h exists.
> ...
> Does it?
> 
$ls /usr/include/atk/atk.h
-rw-r--r-- 1 root 1662 2008-03-19 08:39 /usr/include/atk/atk.h

So, we are getting closer.

Thank you :)

Tobi




Comment 6


Peter Alfredsen (RETIRED)






          2008-06-03 21:26:10 UTC
        

> $ls /usr/include/atk/atk.h
> -rw-r--r-- 1 root 1662 2008-03-19 08:39 /usr/include/atk/atk.h
> 
> So, we are getting closer.
> 
> Thank you :)

?
I wasn't expecting it to, really.

Post the output of
ls -la /usr/include/atk
and
equery belongs /usr/include/atk/atk.h




Comment 7


Tobias Kaminsky





          2008-06-03 21:32:36 UTC
        

ls -la /usr/include/atk
lrwxrwxrwx 1 root 12 2008-06-03 19:28 /usr/include/atk -> atk-1.0/atk/

$ls -la /usr/include/atk/
total 208
drwxr-xr-x 2 root  4096 2008-06-03 23:12 .
drwxr-xr-x 3 root    16 2004-04-06 12:07 ..
-rw-r--r-- 1 root  4548 2008-03-19 08:39 atkaction.h
-rw-r--r-- 1 root  9173 2008-03-19 08:39 atkcomponent.h
-rw-r--r-- 1 root  3473 2008-03-19 08:39 atkdocument.h
-rw-r--r-- 1 root  4787 2008-03-19 08:39 atkeditabletext.h
-rw-r--r-- 1 root  1446 2008-03-19 08:39 atk-enum-types.h
-rw-r--r-- 1 root  2458 2008-03-19 08:39 atkgobjectaccessible.h
-rw-r--r-- 1 root  1662 2008-03-19 08:39 atk.h
-rw-r--r-- 1 root  3889 2008-03-19 08:39 atkhyperlink.h
-rw-r--r-- 1 root  2865 2008-03-19 08:39 atkhyperlinkimpl.h
-rw-r--r-- 1 root  2837 2008-03-19 08:39 atkhypertext.h
-rw-r--r-- 1 root  3469 2008-03-19 08:39 atkimage.h
-rw-r--r-- 1 root  2936 2008-03-19 08:39 atkmisc.h
-rw-r--r-- 1 root  2250 2008-03-19 08:39 atknoopobjectfactory.h
-rw-r--r-- 1 root  1941 2008-03-19 08:39 atknoopobject.h
-rw-r--r-- 1 root  2551 2008-03-19 08:39 atkobjectfactory.h
-rw-r--r-- 1 root 31631 2008-03-19 08:39 atkobject.h
-rw-r--r-- 1 root  2509 2008-03-19 08:39 atkregistry.h
-rw-r--r-- 1 root  3278 2008-03-19 08:39 atkrelation.h
-rw-r--r-- 1 root  3253 2008-03-19 08:39 atkrelationset.h
-rw-r--r-- 1 root  3689 2008-03-19 08:39 atkrelationtype.h
-rw-r--r-- 1 root  3708 2008-03-19 08:39 atkselection.h
-rw-r--r-- 1 root 12272 2008-03-19 08:39 atkstate.h
-rw-r--r-- 1 root  3413 2008-03-19 08:39 atkstateset.h
-rw-r--r-- 1 root  4734 2008-03-19 08:39 atkstreamablecontent.h
-rw-r--r-- 1 root 12324 2008-03-19 08:39 atktable.h
-rw-r--r-- 1 root 17991 2008-03-19 08:39 atktext.h
-rw-r--r-- 1 root 12180 2008-03-19 08:39 atkutil.h
-rw-r--r-- 1 root  3210 2008-03-19 08:39 atkvalue.h

$equery belongs /usr/include/atk/atk.h
[ Searching for file(s) /usr/include/atk/atk.h in *... ]


I thought it would be good that this file exists...
But it seems as it comes out of nowhere?

It I remove the file it ends with:
-- (DEBUG) GTK2_GLADE_LIBRARY is /usr/lib/libglade-2.0.so
-- (DEBUG) GTK2_PANGO_LIBRARY is /usr/lib/libpango-1.0.so
-- (DEBUG) GTK2_PANGO_LIBRARY is /usr/lib/libpangocairo-1.0.so
-- (DEBUG) GTK2_ATK_LIBRARY is /usr/lib/libatk-1.0.so
CMake Error: Could not find ATK
CMake Error: Could not find GTK2

Thank you
Tobi





Comment 8


Peter Alfredsen (RETIRED)






          2008-06-03 21:44:19 UTC
        

> I thought it would be good that this file exists...
> But it seems as it comes out of nowhere?

Not nowhere. Your symlinking ways have outsmarted you, methinks.

Anyways, this is not my problem anymore. Delete symlinks as appropriate to achieve the desired effect.
RESOLVED, WORKSFORME




Comment 9


Tobias Kaminsky





          2008-06-04 06:17:27 UTC
        

(In reply to comment #8)
> > I thought it would be good that this file exists...
> > But it seems as it comes out of nowhere?
> 
> Not nowhere. Your symlinking ways have outsmarted you, methinks.

The symlinks were created after I ran into this issue.
But I can confirm that the ebuild is working fine on an other pc.

> Anyways, this is not my problem anymore. Delete symlinks as appropriate to
> achieve the desired effect.
> RESOLVED, WORKSFORME

I have removed the atk symlink and all other symlinks. 
Is there a way to debug the cmake configure to see what goes wrong?

Thanks
Tobi






Comment 10


Juergen Rose





          2009-05-16 22:49:33 UTC
        

I am running now into the same error:
...
[ 14%] Building C object src/CMakeFiles/multisyncgui.dir/plugins/msync_default.o
In file included from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:1:
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:7:21: error: gtk/gtk.h: No such file or directory
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:8:25: error: glade/glade.h: No such file or directory


Is there any solution?





Comment 11


Juergen Rose





          2009-10-06 08:12:58 UTC
        

I still have the error with the missing gtk/gtk.h:
root@thinkpad:/usr/local/portage/app-pda(43)# emerge -vD multisync-gui

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ] app-pda/multisync-gui-0.92.0_pre20080531  0 kB
...
-- checking for one of the modules 'opensync-1.0>=0.36'
--   found opensync-1.0, version 0.36
-- WARNING: you are using the obsolete 'PKGCONFIG' macro use FindPkgConfig
-- (DEBUG) GTK2_GTK_INCLUDE_DIR is /usr/include/gtk-2.0
...
-- Found GTK2: /usr/lib/libgtk-x11-2.0.so;/usr/lib/libgdk-x11-2.0.so;/usr/lib/libgdk_pixbuf-2.0.so;/usr/lib/libgmodule-2.0.so;/usr/lib/libgthread-2.0.so;/usr/lib/libgobject-2.0.so;/usr/lib/libglade-2.0.so;/usr/lib/libpango-1.0.so;/usr/lib/libpangocairo-1.0.so;/usr/lib/libatk-1.0.so;/usr/lib/libgtkgl.so
-- WARNING: you are using the obsolete 'PKGCONFIG' macro use FindPkgConfig
-- Found LIBGLADE: /usr/lib/libglade-2.0.so
...
make -j1 
Scanning dependencies of target multisyncgui
[ 14%] Building C object src/CMakeFiles/multisyncgui.dir/plugins/msync_default.o
In file included from /var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:1:
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:7:21: error: gtk/gtk.h: No such file or directory
directory
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/../multisync.h:8:25: error: glade/glade.h: No such file or directory
...
/var/tmp/portage/app-pda/multisync-gui-0.92.0_pre20080531/work/multisync-gui-0.92.0_pre20080531/src/plugins/msync_default.c:18: error: 'end' undeclared (first use in this function)
make[2]: *** [src/CMakeFiles/multisyncgui.dir/plugins/msync_default.o] Error 1
make[1]: *** [src/CMakeFiles/multisyncgui.dir/all] Error 2
make: *** [all] Error 2

root@thinkpad:/usr/local/portage/app-pda(38)# find /usr/include/ -name gtk.h
/usr/include/gtk-1.2/gtk/gtk.h
/usr/include/gtk-2.0/gtk/gtk.h

root@thinkpad:/usr/local/portage/app-pda(47)# pkg-config --cflags gtk+    
-I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include  
root@thinkpad:/usr/local/portage/app-pda(48)# pkg-config --cflags gtk+-2.0
-I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12  

Please reopen bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

