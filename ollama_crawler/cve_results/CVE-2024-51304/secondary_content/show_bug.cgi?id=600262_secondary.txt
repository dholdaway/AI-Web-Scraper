Title: 600262 – sys-kernel/genkernel: support --firmware-dst needed to work well in ebuilds
URL: https://bugs.gentoo.org/show_bug.cgi?id=600262

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 600262
sys-kernel/genkernel: support --firmware-dst needed to work well in ebuilds
Last modified: 2017-07-14 19:29:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 600262 
      - sys-kernel/genkernel: support --firmware-dst needed to work well in ebuilds


Summary:
sys-kernel/genkernel: support --firmware-dst needed to work well in ebuilds
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Hosted Projects




Classification:

Unclassified




Component:

genkernel

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Genkernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-11-20 08:02 UTC by Pavel Šimerda





      Modified:
    
2017-07-14 19:29 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jstein
mudler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Pavel Šimerda





          2016-11-20 08:02:50 UTC
        

I am using caster's overlay featuring the gentoo-kernel package. It uses its own version of the genkernel ebuild in order to overcome a limitation of the official package. The patch needed to use genkernel in an ebuild is rather straightforward and just splits `--firmware-dir` into `--firmware-src` and `--firmware-dst`, keeping `--firmware-dir` for compatibility.

The following version of the patch is being used with gentoo-kernel-overlay:

https://github.com/tehcaster/gentoo-kernel-overlay/blob/master/sys-kernel/genkernel/files/0001-firmware-improvements.patch

It looks like it originally comes from funtoo:

https://github.com/funtoo/genkernel/commit/1d946d903c93cd022611eff180c52e2df5855a14

I'm willing to help with this.




Comment 1


Robin Johnson









          2016-11-20 22:51:18 UTC
        

I'll merge it, but also note in 3.5.0.6 we no longer install firmware by default, and strongly suggest using the linux-firmware package instead.




Comment 2


Pavel Šimerda





          2017-03-07 23:23:03 UTC
        

Sabayon has just merged the change to genkernel-next.

https://github.com/Sabayon/genkernel-next/pull/41




Comment 3


Robin Johnson









          2017-03-07 23:27:16 UTC
        

mudler:
gk-next, can you consider using the linux-firmware package instead of having genkernel install firmware? the only case that needs special care then is building for another system.




Comment 4


Ettore Di Giacinto (RETIRED)






          2017-03-08 14:35:58 UTC
        

ported same logic used in genkernel: https://github.com/Sabayon/genkernel-next/commit/8e251b1358b9bb6168c2b0b12f85e3bb7ae02ceb

Thanks




Comment 5


Robin Johnson









          2017-03-08 20:45:00 UTC
        

pavlix:
Are there any remaining cases where you specifically still need firmware-dst (and can't use the firmware package)?




Comment 6


Robin Johnson









          2017-07-14 19:29:28 UTC
        

No response, presuming package is fine.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

