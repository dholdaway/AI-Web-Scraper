Title: 139592 – linuxwacom fails with monolithic kernel
URL: https://bugs.gentoo.org/show_bug.cgi?id=139592

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 139592
linuxwacom fails with monolithic kernel
Last modified: 2007-12-30 16:17:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 139592 
      - linuxwacom fails with monolithic kernel


Summary:
linuxwacom fails with monolithic kernel
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

X11 External Driver Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-07 12:36 UTC by Barral





      Modified:
    
2007-12-30 16:17 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



barral
rbu









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Barral





          2006-07-07 12:36:55 UTC
        

when building Xorg-x11 7.0 with INPUT_DEVICES="keyboard mouse wacom", then linuxwacom is emerged in order to install the wacom driver for X11. However, it seems that the build process also tries to make the kernel modules. This fails when the kernel is monolythic. Following the error message from the build process.

make[3]: Leaving directory `/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2/src/wacomxi'
Making all in 2.6.14
make[3]: Entering directory `/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2/src/2.6.14'
    Building linuxwacom drivers for 2.6 kernel.
***Note: Drivers not enabled as modules in your kernel config but requested through configure are NO
T built
make -C /usr/src/linux M=/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2/src/2.6.14
make[4]: Entering directory `/usr/src/linux-2.6.16-gentoo-r7'

  WARNING: Symbol version dump /usr/src/linux-2.6.16-gentoo-r7/Module.symvers
           is missing; modules will have no dependencies and modversions.

  Building modules, stage 2.
  MODPOST
/bin/sh: scripts/mod/modpost: No such file or directory
make[5]: *** [__modpost] Error 127
make[4]: *** [modules] Error 2
make[4]: Leaving directory `/usr/src/linux-2.6.16-gentoo-r7'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2/src/2.6.14'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/linuxwacom-0.7.2/work/linuxwacom-0.7.2'
make: *** [all] Error 2

!!! ERROR: x11-misc/linuxwacom-0.7.2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  linuxwacom-0.7.2.ebuild, line 126:   Called die

!!! build failed.





ANd the Output from emerge --info:

System uname: 2.6.16-gentoo-r7-m205 i686 Intel(R) Pentium(R) M processor 1.80GHz
Gentoo Base System version 1.6.15
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.du.se/pub/os/gentoo/ http://ds.thn.htu.se/linux/gentoo/ http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apache2 arts audiofile avi bash-completion bcmath berkdb bitmap-fonts bluetooth bzip2 cdr cli cpdflib crypt cscope ctype cups dbm divx4linux dlloader doc dri dts dvd dvdread encode examples exif fbcon flac foomaticdb fortran freetds ftp gd gdbm gif gmp gnome gnutls gstreamer gtk gtk2 gtkhtml guile hal hardened hardenedphp iconv ieee1394 imagemagick imlib ipv6 isdnlog jabber jack java javascript jpeg kde kdeenablefinal kerberos krb4 ladcca lapack lcms ldap libcaca libg++ libwww live lzo mad mbox mhash mikmod mime mng motif mozilla mp3 mpeg musepack mysql mysqli mythtv ncurses netcdf nls nocd nsplugin ogg oggvorbis openal opengl oss pam pcmcia pcre pdflib perl php plotutils png portaudio posix pppd python qt qt3 qt4 quicktime readline real recode reflection rtc sdl session shorten simplexml slang sndfile sockets sox speex spell spl ssl svg sysvipc szip tcltk tcpd tetex tga theora threads tidy tiff tokenizer truetype truetype-fonts type1-fonts unicode usb v4l2 vorbis wifi wmf xine xml xml2 xmlrpc xmms xorg xpm xsl xv xvid xvmc zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_wacom kernel_linux userland_GNU video_cards_fbdev video_cards_nv video_cards_nvidia video_cards_vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Barral





          2006-07-22 07:29:36 UTC
        

(In reply to comment #0)
> when building Xorg-x11 7.0 with INPUT_DEVICES="keyboard mouse wacom", then
> linuxwacom is emerged in order to install the wacom driver for X11. However, it
> seems that the build process also tries to make the kernel modules. This fails
> when the kernel is monolythic.
> ...

In order to build linuxwacom components (except the kernel modules of course) in
an environment with a monolythic kernel, the configure scripts must be called with the following option

  ./configure --without-kernel

Would be desirable to include into the ebuild a check for monolythic kernel and inclusion of this configure option in case this is true.

barral




Comment 2


Robert Buchholz (RETIRED)






          2007-12-30 16:17:33 UTC
        

Current stable (0.7.4*) does not compile the module, so does the new ~arch version (0.7.8*).










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

