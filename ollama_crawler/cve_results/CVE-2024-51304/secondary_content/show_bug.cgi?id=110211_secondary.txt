Title: 110211 – Mozilla-based browsers (mozilla-1.7.12-r2,galeon-1.3.21,epiphany--1.8.2) do not work after upgrade gtk+ to 2.8.6, if moziila is upgraded last
URL: https://bugs.gentoo.org/show_bug.cgi?id=110211

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 110211
Mozilla-based browsers (mozilla-1.7.12-r2,galeon-1.3.21,epiphany--1.8.2) do not work after upgrade gtk+ to 2.8.6, if moziila is upgraded last
Last modified: 2007-01-07 20:46:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 110211 
      - Mozilla-based browsers (mozilla-1.7.12-r2,galeon-1.3.21,epiphany--1.8.2) do not work after upgrade gtk+ to 2.8.6, if moziila is upgraded last


Summary:
Mozilla-based browsers (mozilla-1.7.12-r2,galeon-1.3.21,epiphany--1.8.2) do n...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

136899 139160

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-10-23 03:51 UTC by J.Taimr





      Modified:
    
2007-01-07 20:46 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



lema
tcort









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


J.Taimr





          2005-10-23 03:51:20 UTC
        

Starting situation: glib-2.6.5, gtk+-2.6.10, mozilla-1.7.12 upgraded.
Upgrade sequence: =>glib-2.8.2, =>gtk+-2.8.6, => mozilla-1.7.12-r2. All upgrades
went smoothly, but none mozilla-based browser works afterwards (mozilla, galeon,
epiphany). Mozilla dies silently (mozilla-bin stays at background in the state
'sleeping'), galeon and epiphany both produce error message window ('--- crash
unexpectably).
Recovery: downgrade glib back to 2.6.5 (forced by gtk+), then downgrade gtk+ to
2.6.10, and re-emerge mozilla-1.7.12-r2. Everything works again. After upgrade
of glibc to 2.8.2 and gtk+ to 2.8.6 everything works still.
Next re-emerge of mozilla-1.7.12-r2 will return the situation back to
non-working state for all mentioned mozilla-based browsers.
Re-emerge of the previous mozilla-1.7.12-r2 package (compiled and linked against
glib-2.6.5 and gtk+-2.6.10) solves the problem (until next re-emerge of mozilla..)

Reproducible: Always
Steps to Reproduce:
1.emerge glib-2.8.2, gtk+-2.8.6, mozilla-1.7.12-r2
2.none of mozilla-1.7.12-r2, galeon-1.3.21 and ephiphany-1.8.2 works
3.downgrade glib to 2.6.5, gtk+ to 2.6.10 and re-emerge mozilla-1.7.12-r2,
everything (mozilla, galeon, epiphany) works again. Or re-emerge previously
prepared mozilla-1.7.12.-r2.tbz2, compiled and linked against the mentioned
versions of glib and gtk+
4.next re-emerge of mozilla-1.7.12-r2 will make all mentioned browsers
non-functional again

Actual Results:  
Mozilla, galeon and epiphany are non-functional or functional, depending on the
version glib and gtk+ mozilla was compiled and linked against.
By the comparion (/usr/lib/mozilla.good vs. /usr/lib/mozilla.bad) it seems, the
mozilla part, responsible for the mentioned, lives in the
/usr/lib/mozilla/components directory.

Expected Results:  
upgrade of mozilla after the upgrade of glib and gtk+ should work. Re-emerge of
mozilla-1.7.12-r2 with glib-2.8.2 and gtk+-2.8.6 should produce funtional
mozilla libraries.

Portage 2.0.53_rc6 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r2,
2.6.13-gentoo64-r4 i686)
=================================================================
System uname: 2.6.13-gentoo64-r4 i686 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.12.0_pre9
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5-r1, 2.4.2
sys-apps/sandbox:    1.2.13
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe -s -ffast-math -fomit-frame-pointer
-fexpensive-optimizations -ftracer -D_FILE_OFFSET_BITS=64 -D_LARGE_FILE_SOURCE"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/alias /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c
/etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -pipe -s -ffast-math -fomit-frame-pointer
-fexpensive-optimizations -ftracer -D_FILE_OFFSET_BITS=64 -D_LARGE_FILE_SOURCE"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks sandbox sfperms strict userpriv
usersandbox"
GENTOO_MIRRORS="http://ftp.snt.utwente.nl/pub/os/linux/gentoo
ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.heanet.ie/pub/gentoo/
ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo
ftp://gentoo.llarian.net/pub/gentoo"
LANG="cs_CZ"
LDFLAGS="-s -Wl,-O1,--enable-new-dtags,--sort-common,-z,now"
LINGUAS="cs cz nl en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://gate/PORT"
USE="x86 16bit 3dnow 3dnowext GAPING_SECURITY_HOLE X X509 Xaw3d a52 aac aalib
acpi aim alsa ao apache2 aqua_theme arts artswrappersuid asm atm audiofile
authfile avi ax25 bash-completion beep berkdb bitmap-fonts bluetooth bmp bonobo
boo bzip2 c++ cap caps cdb cdda cddb cdf cdio cdparanoia cdr cdrom chroot cid
clamav clamd cle266 cnamefix corba cracklib crosscompile crypt css ctype cups
curl curlwrappers daap dbase dbm devmap dga dio directfb distribution divx4linux
djbfft dmx dnd dnsdb dpms dts dv dvb dvd dvdr dvdread dvi dxr3 ecc edl eds
effects emboss encode escreen esd ethereal etwin evo exif expat extensions fam
fame fat fbcon fbdev ffmpeg fftw flac flatfile fluidsynth font-server fontconfig
foomaticdb fortran fping fpx freetype ftp ftruncate fwdzone gatos gb gcj gd gdbm
geoip gif gimp gimpprint glade glgd glibc-omitfp glitz glut glx gmtsuppl gnome
gnome-print gnomedb gnuplot gnustep gnutls gpgme gphoto2 gpm gps graphviz gs
gstreamer gtk gtk2 gtkhtml guile gzip hal hddtemp hfs high-ints hpn httpd icon
iconv icp icq id3 idea ieee1394 image imagemagick imap imlib imlib2 inetd
insecure-drivers insecure-savers intl ipalias ipv6 ipv6arpa irc ithreads jabber
jack jack-tmpfs java javascript jbig jce jfs jikes jp2 jpeg jpeg2k junit justify
jython kde kdeenablefinal kerberos kipi kqemu krb4 ladcca ladspa lame lcd lcms
ldap ldirectord libcaca libclamav libdsk libg++ libgda libsamplerate libwww live
lm_sensors logitech-mouse lzo lzw mad maildir maildrop mailwrapper matroska
matrox md5sum mdb memlimit messages mhash mikmod mime mimencode mjpeg mmap mmx
mmxext mng mod motif mozcalendar mozilla mozsvg mozxmlterm mp3 mp4live mpeg
mpeg2 mpeg4 mpi mplayer msn multipleip multislot multitarget music mysql mysqli
mythtv nagios-dns nagios-ntp nagios-ping nagios-ssh nas ncurses neXt netcdf
nethack netpbm network nfs nls nptl nptlonly nsplugin nspr ntfs ntlm oav objc
odbc offensive ofx ogg oggvorbis openal opengl openssh openssl osc oscar oss pam
pam_chroot pam_console pam_timestamp pango pascal pcntl pcre pdf pdflib perl
perlsuid pg-vacuumdelay php physfs pic player plotutils plugin png posix
postgres povray ppds prelude print pvm python qdbm qemu-fast qmail qt quicktime
quotas rar readline real recode reiserfs rle roundrobin rplay rpm rrdtool rtc
ruby samba sasl sblive scanner screen sdl semanticfix sendfile sftp sftplogging
shape shaper shared sharedmem sheep shorten shout silc silverxp skey slang
smartcard smime sndfile sockets socks5 softmmu softquota sox spamassassin speedo
speex spell sqlite sse sse-filters ssl stats stencil-buffer stream stroke subp
subtitles suid svg svga sysfs sysvipc szip t1lib tcltk tcpd tetex theora threads
tiff tos transcode transparent-proxy truetype truetype-fonts type1 type1-fonts
udev underscores unicode usb userlocales v4l v4l2 vcd vcdimager vidix virus-scan
vnc vorbis win32codecs withsamplescripts wmf wxwindows xanim xforms xfs xim xine
xinerama xinetd xmail xml xml2 xmlrpc xmms xosd xpm xprint xrandr xscreensaver
xsl xslt xv xvid xvmc yahoo yv12 zlib zvbi linguas_cs linguas_cz linguas_nl
linguas_en userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL




Comment 1


Gary Kwong [:gkw] [:nth10sd]





          2005-12-06 15:39:52 UTC
        

I get a similar problem. I upped glib to 2.8.4 and gtk+ to 2.8.8 recently, and
with the release of firefox 1.5, upgraded it. The firefox ebuild recommended me
to rebuild any package built against firefox. I did so and proceeded to
re-emerge epiphany 1.6.4. However, an error occurred:

 i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../.. -I../../lib -I../../embed
-I../.. -I/usr/lib/mozilla-firefox/include
-I/usr/lib/mozilla-firefox/include/caps
-I/usr/lib/mozilla-firefox/include/chardet
-I/usr/lib/mozilla-firefox/include/commandhandler
-I/usr/lib/mozilla-firefox/include/content
-I/usr/lib/mozilla-firefox/include/cookie
-I/usr/lib/mozilla-firefox/include/docshell
-I/usr/lib/mozilla-firefox/include/dom
-I/usr/lib/mozilla-firefox/include/exthandler
-I/usr/lib/mozilla-firefox/include/find
-I/usr/lib/mozilla-firefox/include/helperAppDlg
-I/usr/lib/mozilla-firefox/include/gfx
-I/usr/lib/mozilla-firefox/include/history -I/usr/lib/mozilla-firefox/include/js
-I/usr/lib/mozilla-firefox/include/layout
-I/usr/lib/mozilla-firefox/include/locale
-I/usr/lib/mozilla-firefox/include/mimetype
-I/usr/lib/mozilla-firefox/include/necko
-I/usr/lib/mozilla-firefox/include/nkcache
-I/usr/lib/mozilla-firefox/include/passwordmgr
-I/usr/lib/mozilla-firefox/include/pipboot
-I/usr/lib/mozilla-firefox/include/pipnss
-I/usr/lib/mozilla-firefox/include/pref
-I/usr/lib/mozilla-firefox/include/shistory
-I/usr/lib/mozilla-firefox/include/sidebar
-I/usr/lib/mozilla-firefox/include/uriloader
-I/usr/lib/mozilla-firefox/include/uconv
-I/usr/lib/mozilla-firefox/include/wallet
-I/usr/lib/mozilla-firefox/include/webbrowserpersist
-I/usr/lib/mozilla-firefox/include/webbrwsr
-I/usr/lib/mozilla-firefox/include/widget
-I/usr/lib/mozilla-firefox/include/windowwatcher
-I/usr/lib/mozilla-firefox/include/xmlextras
-I/usr/lib/mozilla-firefox/include/xpcom
-I/usr/lib/mozilla-firefox/include/xpconnect -DSHARE_DIR=\"/usr/share/epiphany\"
-DMOZILLA_HOME=\"/usr/lib/mozilla-firefox\" -DMOZILLA_PREFIX=\"/usr\"
-DALLOW_PRIVATE_API -I/usr/lib/mozilla-firefox/include/gtkembedmoz
-I/usr/lib/mozilla-firefox/include -I/usr/lib/mozilla-firefox/include/xpcom
-I/usr/lib/mozilla-firefox/include/string
-I/usr/lib/mozilla-firefox/include/nspr -DORBIT2=1 -pthread
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pango-1.0
-I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0
-I/usr/include/cairo -I/usr/include/libxml2 -I/usr/include/libgnomeui-2.0
-I/usr/include/libgnome-2.0 -I/usr/include/libgnomecanvas-2.0
-I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/libbonoboui-2.0
-I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0
-I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include
-I/usr/include/bonobo-activation-2.0 -I/usr/include/freetype2
-I/usr/include/libglade-2.0 -I/usr/include/gnome-vfs-module-2.0
-I/usr/include/gnome-desktop-2.0 -I/usr/include/startup-notification-1.0
-fno-rtti -fshort-wchar -O2 -march=athlon-xp -pipe -fomit-frame-pointer -MT
libephymozillaembed_la-ContentHandler.lo -MD -MP -MF
.deps/libephymozillaembed_la-ContentHandler.Tpo -c ContentHandler.cpp  -fPIC
-DPIC -o .libs/libephymozillaembed_la-ContentHandler.o
In file included from ContentHandler.cpp:62:
MozDownload.h:106: warning: direct base `nsIWebProgressListener' inaccessible in
`MozDownload' due to ambiguity
ContentHandler.cpp:110: error: prototype for `nsresult
GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRBool)' does not
match any in class `GContentHandler'
ContentHandler.h:59: error: candidate is: virtual nsresult
GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRUint32)
ContentHandler.cpp: In member function `nsresult
GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRBool)':
ContentHandler.cpp:140: error: no matching function for call to
`nsDerivedSafe<nsIHelperAppLauncher>::Cancel()'
/usr/lib/mozilla-firefox/include/necko/nsICancelable.h:44: note: candidates are:
virtual nsresult nsICancelable::Cancel(nsresult)
ContentHandler.cpp: In member function `nsresult GContentHandler::Init()':
ContentHandler.cpp:231: error: no matching function for call to
`nsDerivedSafe<nsIMIMEInfo>::GetMIMEType(char**)'
/usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:84: note: candidates
are: virtual nsresult nsIMIMEInfo::GetMIMEType(nsACString&)
ContentHandler.cpp: In member function `nsresult GContentHandler::MIMEDoAction()':
ContentHandler.cpp:426: error: no matching function for call to
`nsDerivedSafe<nsIMIMEInfo>::SetApplicationDescription(const PRUnichar*)'
/usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:130: note: candidates
are: virtual nsresult nsIMIMEInfo::SetApplicationDescription(const nsAString&)
ContentHandler.cpp:434: error: no matching function for call to
`nsDerivedSafe<nsIMIMEInfo>::SetApplicationDescription(int)'
/usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:130: note: candidates
are: virtual nsresult nsIMIMEInfo::SetApplicationDescription(const nsAString&)
ContentHandler.cpp:451: error: no matching function for call to
`nsDerivedSafe<nsIHelperAppLauncher>::Cancel()'
/usr/lib/mozilla-firefox/include/necko/nsICancelable.h:44: note: candidates are:
virtual nsresult nsICancelable::Cancel(nsresult)
make[4]: *** [libephymozillaembed_la-ContentHandler.lo] Error 1
make[4]: Leaving directory
`/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed/mozilla'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory
`/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed'
make[2]: *** [all] Error 2
make[2]: Leaving directory
`/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4'make: *** [all] Error 2

!!! ERROR: www-client/epiphany-1.6.4 failed.
!!! Function gnome2_src_compile, Line 48, Exitcode 2
!!! compile failure

Instead of filing a new bug, I am unsure whether this is a similar problem or
not, so decided to leave a note here.




Comment 2


Gary Kwong [:gkw] [:nth10sd]





          2005-12-06 15:41:32 UTC
        

Btw, I have clean cflags, and on stable x86.

emerge info:
Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2,
2.6.14-gentoo-r2 i686)
=================================================================
System uname: 2.6.14-gentoo-r2 i686 AMD Sempron(TM) 3000+
Gentoo Base System version 1.6.13
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://mirror.averse.net/pub/gentoo
http://mirror.averse.net/pub/gentoo/ http://gentoo.osuosl.org/"
LC_ALL="en_US.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://mirror.averse.net/gentoo-portage"
USE="x86 3dnow 3dnowext X alsa apm arts audiofile avi berkdb bitmap-fonts
browserplugin bzip2 cdr cjk crypt cups curl dbus dvd dvdr dvdread eds emboss
encode esd exif expat fam ffmpeg firefox flac foomaticdb fortran gdbm gif gimp
gimpprint glut gnome gpm gstreamer gtk gtk2 hal howl imagemagick imlib java jpeg
junit lcms libg++ libwww lua mad matroska mikmod mmx mng motif mozilla moznomail
mozsvg mp3 mpeg ncurses nls nptl nsplugin nvidia ogg oggvorbis openal opengl oss
pam pdflib perl png python quicktime readline real recode samba scanner sdl
spell sse ssl svg tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb
vcd vorbis wxwindows xine xml2 xmms xprint xv xvid zlib userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 3


Jory A. Pratt





          2005-12-06 17:41:10 UTC
        

(In reply to comment #1)
> I get a similar problem. I upped glib to 2.8.4 and gtk+ to 2.8.8 recently, and
> with the release of firefox 1.5, upgraded it. The firefox ebuild recommended me
> to rebuild any package built against firefox. I did so and proceeded to
> re-emerge epiphany 1.6.4. However, an error occurred:
> 
>  i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../.. -I../../lib -I../../embed
> -I../.. -I/usr/lib/mozilla-firefox/include
> -I/usr/lib/mozilla-firefox/include/caps
> -I/usr/lib/mozilla-firefox/include/chardet
> -I/usr/lib/mozilla-firefox/include/commandhandler
> -I/usr/lib/mozilla-firefox/include/content
> -I/usr/lib/mozilla-firefox/include/cookie
> -I/usr/lib/mozilla-firefox/include/docshell
> -I/usr/lib/mozilla-firefox/include/dom
> -I/usr/lib/mozilla-firefox/include/exthandler
> -I/usr/lib/mozilla-firefox/include/find
> -I/usr/lib/mozilla-firefox/include/helperAppDlg
> -I/usr/lib/mozilla-firefox/include/gfx
> -I/usr/lib/mozilla-firefox/include/history -I/usr/lib/mozilla-firefox/include/js
> -I/usr/lib/mozilla-firefox/include/layout
> -I/usr/lib/mozilla-firefox/include/locale
> -I/usr/lib/mozilla-firefox/include/mimetype
> -I/usr/lib/mozilla-firefox/include/necko
> -I/usr/lib/mozilla-firefox/include/nkcache
> -I/usr/lib/mozilla-firefox/include/passwordmgr
> -I/usr/lib/mozilla-firefox/include/pipboot
> -I/usr/lib/mozilla-firefox/include/pipnss
> -I/usr/lib/mozilla-firefox/include/pref
> -I/usr/lib/mozilla-firefox/include/shistory
> -I/usr/lib/mozilla-firefox/include/sidebar
> -I/usr/lib/mozilla-firefox/include/uriloader
> -I/usr/lib/mozilla-firefox/include/uconv
> -I/usr/lib/mozilla-firefox/include/wallet
> -I/usr/lib/mozilla-firefox/include/webbrowserpersist
> -I/usr/lib/mozilla-firefox/include/webbrwsr
> -I/usr/lib/mozilla-firefox/include/widget
> -I/usr/lib/mozilla-firefox/include/windowwatcher
> -I/usr/lib/mozilla-firefox/include/xmlextras
> -I/usr/lib/mozilla-firefox/include/xpcom
> -I/usr/lib/mozilla-firefox/include/xpconnect -DSHARE_DIR=\"/usr/share/epiphany\"
> -DMOZILLA_HOME=\"/usr/lib/mozilla-firefox\" -DMOZILLA_PREFIX=\"/usr\"
> -DALLOW_PRIVATE_API -I/usr/lib/mozilla-firefox/include/gtkembedmoz
> -I/usr/lib/mozilla-firefox/include -I/usr/lib/mozilla-firefox/include/xpcom
> -I/usr/lib/mozilla-firefox/include/string
> -I/usr/lib/mozilla-firefox/include/nspr -DORBIT2=1 -pthread
> -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pango-1.0
> -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0
> -I/usr/include/cairo -I/usr/include/libxml2 -I/usr/include/libgnomeui-2.0
> -I/usr/include/libgnome-2.0 -I/usr/include/libgnomecanvas-2.0
> -I/usr/include/libart-2.0 -I/usr/include/gconf/2 -I/usr/include/libbonoboui-2.0
> -I/usr/include/orbit-2.0 -I/usr/include/libbonobo-2.0
> -I/usr/include/gnome-vfs-2.0 -I/usr/lib/gnome-vfs-2.0/include
> -I/usr/include/bonobo-activation-2.0 -I/usr/include/freetype2
> -I/usr/include/libglade-2.0 -I/usr/include/gnome-vfs-module-2.0
> -I/usr/include/gnome-desktop-2.0 -I/usr/include/startup-notification-1.0
> -fno-rtti -fshort-wchar -O2 -march=athlon-xp -pipe -fomit-frame-pointer -MT
> libephymozillaembed_la-ContentHandler.lo -MD -MP -MF
> .deps/libephymozillaembed_la-ContentHandler.Tpo -c ContentHandler.cpp  -fPIC
> -DPIC -o .libs/libephymozillaembed_la-ContentHandler.o
> In file included from ContentHandler.cpp:62:
> MozDownload.h:106: warning: direct base `nsIWebProgressListener' inaccessible in
> `MozDownload' due to ambiguity
> ContentHandler.cpp:110: error: prototype for `nsresult
> GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRBool)' does not
> match any in class `GContentHandler'
> ContentHandler.h:59: error: candidate is: virtual nsresult
> GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRUint32)
> ContentHandler.cpp: In member function `nsresult
> GContentHandler::Show(nsIHelperAppLauncher*, nsISupports*, PRBool)':
> ContentHandler.cpp:140: error: no matching function for call to
> `nsDerivedSafe<nsIHelperAppLauncher>::Cancel()'
> /usr/lib/mozilla-firefox/include/necko/nsICancelable.h:44: note: candidates are:
> virtual nsresult nsICancelable::Cancel(nsresult)
> ContentHandler.cpp: In member function `nsresult GContentHandler::Init()':
> ContentHandler.cpp:231: error: no matching function for call to
> `nsDerivedSafe<nsIMIMEInfo>::GetMIMEType(char**)'
> /usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:84: note: candidates
> are: virtual nsresult nsIMIMEInfo::GetMIMEType(nsACString&)
> ContentHandler.cpp: In member function `nsresult GContentHandler::MIMEDoAction()':
> ContentHandler.cpp:426: error: no matching function for call to
> `nsDerivedSafe<nsIMIMEInfo>::SetApplicationDescription(const PRUnichar*)'
> /usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:130: note: candidates
> are: virtual nsresult nsIMIMEInfo::SetApplicationDescription(const nsAString&)
> ContentHandler.cpp:434: error: no matching function for call to
> `nsDerivedSafe<nsIMIMEInfo>::SetApplicationDescription(int)'
> /usr/lib/mozilla-firefox/include/mimetype/nsIMIMEInfo.h:130: note: candidates
> are: virtual nsresult nsIMIMEInfo::SetApplicationDescription(const nsAString&)
> ContentHandler.cpp:451: error: no matching function for call to
> `nsDerivedSafe<nsIHelperAppLauncher>::Cancel()'
> /usr/lib/mozilla-firefox/include/necko/nsICancelable.h:44: note: candidates are:
> virtual nsresult nsICancelable::Cancel(nsresult)
> make[4]: *** [libephymozillaembed_la-ContentHandler.lo] Error 1
> make[4]: Leaving directory
> `/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed/mozilla'
> make[3]: *** [all-recursive] Error 1
> make[3]: Leaving directory
> `/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed'
> make[2]: *** [all] Error 2
> make[2]: Leaving directory
> `/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4/embed'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/var/tmp/portage/epiphany-1.6.4/work/epiphany-1.6.4'make: *** [all] Error 2
> 
> !!! ERROR: www-client/epiphany-1.6.4 failed.
> !!! Function gnome2_src_compile, Line 48, Exitcode 2
> !!! compile failure
> 
> Instead of filing a new bug, I am unsure whether this is a similar problem or
> not, so decided to leave a note here.


I am not gonna worry about your epiphany problem as your mixing stable with
testing. If you want use the latest epiphany ebuild and you will have no problems.




Comment 4


J.Taimr





          2005-12-11 00:51:18 UTC
        

a)I noted the same problem at 3 another 'Gentoo' computers with
ACCEPT_KEYWORDS="~x86" only, i.e. it is NOT derived from mixing of stable and
unstable
b)It seems, this problem does not exist anymore, with gtk+-2.8.8 everything
works as expected, even after new recompilation. So, this was really gtk+-2.8.6
related. I think, you can close this bug report totally.




Comment 5


Martin Klaffenboeck





          2006-02-07 11:27:26 UTC
        

But before you close this bug, please do a notice somewhere, I have my problems on this I think.

When I try to start mozilla, I get the following:

martin@notebook ~ $ mozilla
No running windows found
/usr/lib/mozilla/mozilla-bin: symbol lookup error: /usr/lib/mozilla/components/libgfx_gtk.so: undefined symbol: pango_x_font_map_for_display
mozilla-bin exited with non-zero status (127)
martin@notebook ~ $

Its this related?  How do i fix this?

Thanks,
Martin




Comment 6


J.Taimr





          2006-02-07 14:01:49 UTC
        

(In reply to comment #5)
> No running windows found
> /usr/lib/mozilla/mozilla-bin: symbol lookup error:
> /usr/lib/mozilla/components/libgfx_gtk.so: undefined symbol:
> pango_x_font_map_for_display
> mozilla-bin exited with non-zero status (127)
.....
> Its this related?  How do i fix this?
.....
It MIGHT be related, but in my case these browsers died silently, without any undef symbols. But the replacement of /usr/lib/components/* by the previous versions helped (at least for me).
Is your libgfx_gtk.so linked against all of libpangox, libpangoxft
and libpangoft2 ?




Comment 7


Thomas Cort (RETIRED)






          2006-03-04 14:00:06 UTC
        

(In reply to comment #5)
I get the same error:

tcort@topcat ~ $ firefox 
No running windows found
/usr/lib/mozilla-firefox/firefox-bin: symbol lookup error: /usr/lib/mozilla-firefox/components/libgfx_gtk.so: undefined symbol: pango_x_font_map_for_display
firefox-bin exited with non-zero status (127)
tcort@topcat ~ $

(In reply to comment #6)
> Is your libgfx_gtk.so linked against all of libpangox, libpangoxft
> and libpangoft2 ?
I'm not sure how to check for that. Will this help?

topcat ~ # ldd /usr/lib/mozilla-firefox/components/libgfx_gtk.so 
        libxpcom.so => /usr/lib/mozilla-firefox/libxpcom.so (0x0000020000072000)
        libplds4.so => /usr/lib/mozilla-firefox/libplds4.so (0x0000020000194000)
        libplc4.so => /usr/lib/mozilla-firefox/libplc4.so (0x00000200001a8000)
        libnspr4.so => /usr/lib/mozilla-firefox/libnspr4.so (0x00000200001be000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x0000020000220000)
        libdl.so.2.1 => /lib/libdl.so.2.1 (0x00000200002ca000)
        libgkgfx.so => /usr/lib/mozilla-firefox/libgkgfx.so (0x00000200002e0000)
        libmozjs.so => /usr/lib/mozilla-firefox/libmozjs.so (0x0000020000320000)
        libgtk-x11-2.0.so.0 => /usr/lib/libgtk-x11-2.0.so.0 (0x00000200003d8000)
        libgdk-x11-2.0.so.0 => /usr/lib/libgdk-x11-2.0.so.0 (0x00000200007e0000)
        libatk-1.0.so.0 => /usr/lib/libatk-1.0.so.0 (0x000002000089e000)
        libgdk_pixbuf-2.0.so.0 => /usr/lib/libgdk_pixbuf-2.0.so.0 (0x00000200008d4000)
        libpangocairo-1.0.so.0 => /usr/lib/libpangocairo-1.0.so.0 (0x0000020000902000)
        libpango-1.0.so.0 => /usr/lib/libpango-1.0.so.0 (0x000002000091e000)
        libcairo.so.2 => /usr/lib/libcairo.so.2 (0x0000020000978000)
        libgobject-2.0.so.0 => /usr/lib/libgobject-2.0.so.0 (0x00000200009e4000)
        libgmodule-2.0.so.0 => /usr/lib/libgmodule-2.0.so.0 (0x0000020000a3e000)
        libglib-2.0.so.0 => /usr/lib/libglib-2.0.so.0 (0x0000020000a52000)
        libm.so.6.1 => /lib/libm.so.6.1 (0x0000020000b0a000)
        libstdc++.so.5 => /usr/lib/gcc-lib/alpha-unknown-linux-gnu/3.3.2/libstdc++.so.5 (0x0000020000b9a000)
        libgcc_s.so.1 => /usr/lib/gcc-lib/alpha-unknown-linux-gnu/3.3.2/libgcc_s.so.1 (0x0000020000cac000)
        libc.so.6.1 => /lib/libc.so.6.1 (0x0000020000cc8000)
        /lib/ld-linux.so.2 (0x0000020001000000)
        libX11.so.6 => /usr/lib/libX11.so.6 (0x0000020000e3e000)
        libXrender.so.1 => /usr/lib/libXrender.so.1 (0x0000020000f4c000)
        libXrandr.so.2 => /usr/lib/libXrandr.so.2 (0x0000020000f6a000)
        libXi.so.6 => /usr/lib/libXi.so.6 (0x0000020000f7e000)
        libfontconfig.so.1 => /usr/lib/libfontconfig.so.1 (0x0000020000f9a000)
        libXcursor.so.1 => /usr/lib/libXcursor.so.1 (0x000002000102c000)
        libXext.so.6 => /usr/lib/libXext.so.6 (0x0000020001048000)
        libXfixes.so.3 => /usr/lib/libXfixes.so.3 (0x000002000106e000)
        libpangoft2-1.0.so.0 => /usr/lib/libpangoft2-1.0.so.0 (0x0000020001084000)
        libfreetype.so.6 => /usr/lib/libfreetype.so.6 (0x00000200010ca000)
        libz.so.1 => /lib/libz.so.1 (0x000002000116a000)
        libpng12.so.0 => /usr/lib/libpng12.so.0 (0x0000020001192000)
        libexpat.so.0 => /usr/lib/libexpat.so.0 (0x00000200011d0000)


# emerge --info
Portage 2.1_pre5-r2 (default-linux/alpha/no-nptl/2.4, gcc-3.3.2,
glibc-2.3.5-r3, 2.4.32 alpha)
=================================================================
System uname: 2.4.32 alpha EV56
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.3.5, 2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.4.26-r1
ACCEPT_KEYWORDS="alpha ~alpha"
AUTOCLEAN="yes"
CBUILD="alpha-unknown-linux-gnu"
CFLAGS="-mieee -pipe -O2 -mcpu=ev56"
CHOST="alpha-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-mieee -pipe -O2 -mcpu=ev56"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ http://adelie.polymtl.ca/
http://distro.ibiblio.org/pub/linux/distributions/gentoo/
http://www.gtlib.gatech.edu/pub/gentoo
http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://gentoo.seren.com/gentoo
http://gentoo.chem.wisc.edu/gentoo/ http://cudlug.cudenver.edu/gentoo/
http://gentoo.mirrors.pair.com/ http://gentoo.mirrors.tds.net/gentoo
http://gentoo.netnitco.net http://mirror.espri.arizona.edu/gentoo/
http://mirrors.acm.cs.rpi.edu/gentoo/ http://gentoo.arcticnetwork.ca/
http://open-systems.ufl.edu/mirrors/gentoo http://gentoo.llarian.net/
http://gentoo.binarycompass.org http://gentoo.mirrored.ca/
http://mirror.datapipe.net/gentoo http://gentoo.cs.lewisu.edu/gentoo/
http://prometheus.cs.wmich.edu/gentoo http://modzer0.cs.uaf.edu/public/gentoo/
http://mirror.usu.edu/mirrors/gentoo/
http://mirror.phy.olemiss.edu/mirror/gentoo
http://mirror.mcs.anl.gov/pub/gentoo/
http://gentoo.mirrors.easynews.com/linux/gentoo/
http://gentoo.cites.uiuc.edu/pub/gentoo/
http://mirror.clarkson.edu/pub/distributions/gentoo/
http://cdot.senecac.on.ca/software/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="alpha X aac aalib aim alsa apache2 artworkextra async audacious audiofile
bash-completion berkdb binfilter bitmap-fonts bittorrent bl bonjour c++ cairo
calendar cdinstall cdparanoia cdr cdrom chroot cli config_wizard cracklib crypt
cscope csv ctype cups curl curlwrappers cvs cvsgraph dhcp dillo editor eds elf
encode epiphany escreen esd ethereal extraicons extras ffmpeg fftw figlet
firefox flac ftp gdb gdbm gif glep gnutls gpm grammar gsl gstreamer gtalk gtk
gtk2 gtkspell gvim gzip html icq id3 imlib ipod jabber javascript jpeg justify
ladspa lame libg++ libsexy libwww lite lj logrotate lua mad mapeditor md5sum
mikmod motif moznoirc moznomail moznoroaming moznoxft mozsha1 mp3 mpeg mpeg2
mplayer msn msnextras music ncurses net nethack nls offensive ogg oggvorbis
opengl openssh openssl oscar oss pam pdflib perl png python quicktime quotes
readline real recode reiserfs scp screen sdl sftp skins sndfile sockets sounds
sox speech spell ssl subversion symlink syslog tcpd threads truetype
truetype-fonts type1-fonts udev userlocales vcd videos vim vim-with-x vorbis
wma wma123 xml xml2 xmlreader xmms xv xvid yahoo zip zlib elibc_glibc
kernel_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS, LINGUAS






Comment 8


Thomas Cort (RETIRED)






          2006-03-04 20:48:35 UTC
        

(In reply to comment #7)
> (In reply to comment #5)
> I get the same error

emerge'ing mozilla-firefox with different USE flags fixed the problem I was having.

Old USE Flags (caused the problem described in  comment #7)...
[ebuild   R   ] www-client/mozilla-firefox-1.0.7-r4  USE="moznoxft truetype -debug -gnome -ipv6 -mozcalendar -mozdevelop -mozsvg -xinerama -xprint"

New USE Flags (builds a working firefox binary)...
[ebuild   R   ] www-client/mozilla-firefox-1.0.7-r4  USE="gnome ipv6 truetype -debug -mozcalendar -mozdevelop -moznoxft -mozsvg -xinerama -xprint"




Comment 9


Peter Penkala






          2006-04-19 22:20:25 UTC
        

In case it is related, I had a similar "undefined symbol" error for galeon and epiphany (but not mozilla).

When trying to start each from the command line, the errors were as follows:
"galeon: symbol lookup error: galeon: undefined symbol: _ZTV24nsGetServiceByContractID"

"epiphany: symbol lookup error: epiphany: undefined symbol: _ZTV24nsGetServiceByContractID"

I had recently upgraded Firefox from ~1.07 to 1.5.0.2.  Re-emerging galeon and epiphany fixed the problem.




Comment 10


Cyp





          2006-04-30 00:22:30 UTC
        

mozilla and mozilla-thunderbird not working for me, they fail to start without any error messages (other than "No running windows found"). I'm on amd64.

[I--] [  ] dev-libs/glib-1.2.10-r5 (1)
[I--] [  ] dev-libs/glib-2.8.6 (2)
[I--] [  ] x11-libs/gtk+-1.2.10-r11 (1)
[I--] [  ] x11-libs/gtk+-2.8.12 (2)





Comment 11


Cyp





          2006-04-30 14:19:58 UTC
        

Just downgraded gtk+ and recompiled mozilla and mozilla-thunderbird, didn't help. (Haven't rebooted, I assume that wouldn't make a difference.)

[I--] [  ] x11-libs/gtk+-2.8.8 (2)




Comment 12


Jakub Moc (RETIRED)






          2006-06-15 11:05:58 UTC
        

*** Bug 136899 has been marked as a duplicate of this bug. ***




Comment 13


Jakub Moc (RETIRED)






          2006-07-04 04:23:33 UTC
        

*** Bug 139160 has been marked as a duplicate of this bug. ***




Comment 14


Christian Marie (RETIRED)






          2006-12-22 05:25:35 UTC
        

Please reopen if this is still a problem for anyone.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

