Title: 246512 – kde-base/kdelibs-4.1.3-r1: patch failure during emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=246512

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 246512
kde-base/kdelibs-4.1.3-r1: patch failure during emerge
Last modified: 2008-11-22 07:18:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 246512 
      - kde-base/kdelibs-4.1.3-r1: patch failure during emerge


Summary:
kde-base/kdelibs-4.1.3-r1: patch failure during emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-11-12 16:46 UTC by Nick Baird





      Modified:
    
2008-11-22 07:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Output from failed patch log

              (kdelibs-4.1.1-cmake-modules.patch-7524.out,7.12 KB,
                text/plain)

            
2008-11-12 16:48 UTC,

            Nick Baird




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nick Baird





          2008-11-12 16:46:53 UTC
        

Trying to update from a working kde-4.1.2 to kde-4.1.3 fails on kdelibs.  kdelibs-4.1.3-r1 ebuild dies when patching with kdelibs-4.1.1-cmake-modules.patch


Reproducible: Always

Steps to Reproduce:
1.emerge kdelibs
2.
3.

Actual Results:  
 * Applying kdelibs-4.1.1-cmake-modules.patch ...                                      
 
  * Failed Patch: kdelibs-4.1.1-cmake-modules.patch ! 
  * ( /usr/portage/kde-base/kdelibs/files/kdelibs-4.1.1-cmake-modules.patch ) 
  *                                                                          
  * Include in your bugreport the contents of:                                
  *                                                                          
  * /var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/kdelibs-4.1.1-cmake-modules.patch-6730.out                                                                                
 
  * 
  * ERROR: kde-base/kdelibs-4.1.3-r1 failed. 
  * Call stack:                              
  * ebuild.sh, line   49:  Called src_prepare 
  * environment, line 3294:  Called base_src_prepare 
  * environment, line  434:  Called base_src_util 'autopatch' 
  * environment, line  475:  Called epatch '/usr/portage/kde-base/kdelibs/files/kdelibs-4.1.1-cmake-modules.patch'                                                            
  * environment, line 1623:  Called die                                                
  * The specific snippet of code:                                                      
  * die "Failed Patch: ${patchname}!";                                                  
  * The die message:                                                                    
  * Failed Patch: kdelibs-4.1.1-cmake-modules.patch!                                    
  *                                                                                    
  * If you need support, post the topmost build error, and the call stack if relevant. 
  * A complete build log is located at '/var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/build.log'.                                                                          
  * The ebuild environment file is located at '/var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/environment'.                                                                  
  *                                                                                    
 
 >>> Failed to emerge kde-base/kdelibs-4.1.3-r1, Log file: 
 
 >>>  '/var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/build.log' 
 
  * Messages for package kde-base/kdelibs-4.1.3-r1: 
 
  * Failed Patch: kdelibs-4.1.1-cmake-modules.patch ! 
  * ( /usr/portage/kde-base/kdelibs/files/kdelibs-4.1.1-cmake-modules.patch ) 
  * 
  * Include in your bugreport the contents of: 
  * 
  * /var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/kdelibs-4.1.1-cmake-modules.patch-6730.out 
  * 
  * ERROR: kde-base/kdelibs-4.1.3-r1 failed. 
  * Call stack: 
  * ebuild.sh, line   49:  Called src_prepare 
  * environment, line 3294:  Called base_src_prepare 
  * environment, line  434:  Called base_src_util 'autopatch' 
  * environment, line  475:  Called epatch '/usr/portage/kde-base/kdelibs/files/kdelibs-4.1.1-cmake-modules.patch' 
  * environment, line 1623:  Called die 
  * The specific snippet of code: 
  * die "Failed Patch: ${patchname}!"; 
  * The die message: 
  * Failed Patch: kdelibs-4.1.1-cmake-modules.patch! 
  * 
  * If you need support, post the topmost build error, and the call stack if relevant. 
  * A complete build log is located at '/var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/build.log'. 
  * The ebuild environment file is located at '/var/tmp/portage/kde-base/kdelibs-4.1.3-r1/temp/environment'.


emerge --info

Portage 2.2_rc12 (default/linux/amd64/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r7 x86_64)                                                                           
=================================================================                     
System uname: Linux-2.6.25-gentoo-r7-x86_64-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_5600+-with-glibc2.2.5                                                                  
Timestamp of tree: Wed, 12 Nov 2008 04:23:01 +0000                                    
app-shells/bash:     3.2_p33                                                          
dev-java/java-config: 1.3.7, 2.1.6                                                    
dev-lang/python:     2.5.2-r7                                                         
dev-util/cmake:      2.6.2                                                            
sys-apps/baselayout: 1.12.11.1                                                        
sys-apps/sandbox:    1.2.18.1-r2                                                      
sys-devel/autoconf:  2.13, 2.61-r2                                                    
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1                     
sys-devel/binutils:  2.18-r3                                                          
sys-devel/gcc-config: 1.4.0-r4                                                        
sys-devel/libtool:   1.5.26                                                           
virtual/os-headers:  2.6.23-r3                                                        
ACCEPT_KEYWORDS="amd64"                                                               
CBUILD="x86_64-pc-linux-gnu"                                                          
CFLAGS="-march=k8 -O2 -fomit-frame-pointer -msse3 -pipe"                              
CHOST="x86_64-pc-linux-gnu"                                                           
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"                                                                    
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"                                                                                 
CXXFLAGS="-march=k8 -O2 -fomit-frame-pointer -msse3 -pipe"                            
DISTDIR="/usr/portage/distfiles"                                                      
FEATURES="collision-protect distlocks parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-orphans userfetch"                                          
GENTOO_MIRRORS="ftp://gentoo.virginmedia.com/sites/gentoo "                           
LC_ALL="en_GB.UTF-8"                                                                  
LDFLAGS="-Wl,-O1,--as-needed,--hash-style=gnu,--sort-common"                          
LINGUAS="en en_GB"                                                                    
MAKEOPTS="-j3"                                                                        
PKGDIR="/usr/portage/packages"                                                        
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/kde-testing /usr/portage/local/layman/kde-testing /usr/portage/local /usr/portage/local"
SYNC="rsync://newserver/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acpi alsa amarok amazon amd64 ao arts artswrappersuid audiofile binary-drivers branding bzip2 cairo cdaudio cdr clucene cpudetection cups curl cxx dbus doc dri dv dvd dvdnav dvdr dvdread encode exif fam ffmpeg firefox flac ftp gif gimp glibc-omitfp hal htmlhandbook http ieee1394 imagemagick imlib ithreads javascript joystick jpeg kde kdehiddenvisibility kqemu ladspa lame libsamplerate lm_sensors logrotate mad midi mikmod mjpeg mmap mmx mmxext motif mp3 mp4 mpeg mpeg2 mplayer multilib musicbrainz ncurses nfs nls nptl nptlonly nsplugin ntfs nvidia ogg opengl pam parted pcre pda pdf perl perlsuid pmount png ppds python qemu qt3 qt3support qt4 quicktimerar readline realmedia reiserfs rtc scanner sdl semantic-desktop sensord session smp sndfile spamassassin spell sqlite sse sse2 ssl ssse3 svg threads threadsafe tiff truetype type1 unicode unzip usb vcd visualization vorbis webdav webdav-neon wmp xcb xcomposite xforms xfs xine xml xorg xpm xulrunner xv xvid xvmc zip zlib" ALSA_CARDS="ice1712" ALSA_PCM_PLUGINS="adpcm alaw copy dshare dsnoop extplug file hooks ladspa lfloat linear meter mulaw multi null rate route share shm asym dmix empty iec958 ioplug plug softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse ps2mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="enen_GB" USERLAND="GNU" VIDEO_CARDS="vesa nv nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Nick Baird





          2008-11-12 16:48:22 UTC
        

Created attachment 171560 [details]
Output from failed patch log




Comment 2


Tomáš Chvátal (RETIRED)






          2008-11-13 11:51:35 UTC
        

This is already fixed, try syncing your tree again...
Reopen if still issue.




Comment 3


Nick Baird





          2008-11-14 17:47:30 UTC
        

(In reply to comment #2)
> This is already fixed, try syncing your tree again...
> Reopen if still issue.
> 

I tried syncing and emerging again both yesterday and today, and I still have the same problem. The ebuild according to my portage tree is still -r1.  Did it get a version bump with the fix?  Maybe the mirror I use is not up to date. 




Comment 4


Nick Baird





          2008-11-14 19:00:18 UTC
        

(In reply to comment #2)
> This is already fixed, try syncing your tree again...
> Reopen if still issue.
> 

I tried syncing and emerging again both yesterday and today, and I still have the same problem. The ebuild according to my portage tree is still -r1.  Did it get a version bump with the fix?  Maybe the mirror I use is not up to date. 




Comment 5


Nick Baird





          2008-11-15 08:47:13 UTC
        

I synced again today and I still have the problem.  The kdelibs-4.1.3-r1.ebuild contains the following:

PATCHES=( "${FILESDIR}/${PN}-4.1.1-cmake-modules.patch" "${FILESDIR}/${PV}-cmake-confe-config.patch" )

but the patch command is failing per the attached log file.




Comment 6


Jorge Manuel B. S. Vicetto (RETIRED)






          2008-11-16 03:50:08 UTC
        

Well, this is puzzling. All we can say is that this seems to be a local problem as we had many people testing the patch and it applied to all of them.
Reopen the bug if you can duplicate it on another box or if anyone else hits it.




Comment 7


fukui





          2008-11-16 21:57:02 UTC
        

(In reply to comment #6)
> Well, this is puzzling. All we can say is that this seems to be a local problem
> as we had many people testing the patch and it applied to all of them.
> Reopen the bug if you can duplicate it on another box or if anyone else hits
> it.
> 

I'm having exactly the same problems here, on another box.




Comment 8


Tomáš Chvátal (RETIRED)






          2008-11-16 22:09:34 UTC
        

Try to update your base system. It looks like some problem with epatch (my personal opinion).

emerge -NvD system




Comment 9


Jari_42





          2008-11-17 19:49:20 UTC
        

(In reply to comment #5)
> I synced again today and I still have the problem.  The kdelibs-4.1.3-r1.ebuild
> contains the following:
> 
> PATCHES=( "${FILESDIR}/${PN}-4.1.1-cmake-modules.patch"
> "${FILESDIR}/${PV}-cmake-confe-config.patch" )
> 
> but the patch command is failing per the attached log file.
> 

Try syncing your kde-testing overlay...
 




Comment 10


fukui





          2008-11-17 20:28:21 UTC
        

The strange thing is, that I only have this kind of problems with some of the kde 4.1.3 packages, anything else works. Everything worked as I did an "emerge -u --deep world" except of the kde 4.1.3 packages, but I will try it.




Comment 11


Nick Baird





          2008-11-22 07:18:48 UTC
        

(In reply to comment #9)
> (In reply to comment #5)
> > I synced again today and I still have the problem.  The kdelibs-4.1.3-r1.ebuild
> > contains the following:
> > 
> > PATCHES=( "${FILESDIR}/${PN}-4.1.1-cmake-modules.patch"
> > "${FILESDIR}/${PV}-cmake-confe-config.patch" )
> > 
> > but the patch command is failing per the attached log file.
> > 
> 
> Try syncing your kde-testing overlay...
> 
> 

Syncing my kde-testing overlay did work for me - thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

