Title: 300677 – scons-1.2.0_p20091224 does`nt compile, Python error
URL: https://bugs.gentoo.org/show_bug.cgi?id=300677

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 300677
scons-1.2.0_p20091224 does`nt compile, Python error
Last modified: 2010-01-12 18:26:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 300677 
      - scons-1.2.0_p20091224 does`nt compile, Python error


Summary:
scons-1.2.0_p20091224 does`nt compile, Python error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

300680

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2010-01-12 09:26 UTC by Karl Ernst Brunk





      Modified:
    
2010-01-12 18:26 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info =dev-util/scons-1.2.0_p20091224

              (e_info_scons,3.74 KB,
                text/plain)

            
2010-01-12 09:27 UTC,

            Karl Ernst Brunk




Details





emerge -pqv =dev-util/scons-1.2.0_p20091224

              (scons_pqv,70 bytes,
                text/plain)

            
2010-01-12 09:28 UTC,

            Karl Ernst Brunk




Details





environment

              (scons_env,131.34 KB,
                text/plain)

            
2010-01-12 09:29 UTC,

            Karl Ernst Brunk




Details





scons-1.2.0_p20091224/temp/build.log

              (build.log,4.01 KB,
                text/plain)

            
2010-01-12 09:30 UTC,

            Karl Ernst Brunk




Details





gentoolkit_build.log

              (gtkit_build.log,16.22 KB,
                text/plain)

            
2010-01-12 16:40 UTC,

            Karl Ernst Brunk




Details





gentoolkit_env

              (gtkit_env.txt,134.30 KB,
                text/plain)

            
2010-01-12 16:41 UTC,

            Karl Ernst Brunk




Details





emerge --info gentoolkit

              (em_info_gtkit.txt,3.73 KB,
                text/plain)

            
2010-01-12 16:42 UTC,

            Karl Ernst Brunk




Details





emerge -pqv gentoolkit

              (em_pqv_gtkit.txt,64 bytes,
                text/plain)

            
2010-01-12 16:42 UTC,

            Karl Ernst Brunk




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karl Ernst Brunk





          2010-01-12 09:26:55 UTC
        

Yesterday - 52 updates. After 44 without errors scons did not start compiling because of :
>>> Compiling source in /var/tmp/portage/dev-util/scons-1.2.0_p20091224/work/scons-1.2.0.d20091224 ...
 * ERROR: dev-util/scons-1.2.0_p20091224 failed:
 *   PYTHON(): Invalid usage
 * 
 * Call stack:
 *     ebuild.sh, line   48:  Called src_compile
 *   environment, line 3410:  Called distutils_src_compile
 *   environment, line  799:  Called PYTHON '-A'
 *   environment, line  177:  Called die
 * The specific snippet of code:
 *                           die "${FUNCNAME}(): Invalid usage";

Similar thing happend with update of gpsd. gpsd did compile but while installing same thing happend.

Reproducible: Always

Steps to Reproduce:
1.emerge =scons-1.2.0_p20091224
2.
3.

Actual Results:  
emerge stops after configuration is done

Expected Results:  
should compile and install

i send over
emerge --info
emerge -pqv
and the build.log




Comment 1


Karl Ernst Brunk





          2010-01-12 09:27:42 UTC
        

Created attachment 216178 [details]
emerge --info =dev-util/scons-1.2.0_p20091224




Comment 2


Karl Ernst Brunk





          2010-01-12 09:28:33 UTC
        

Created attachment 216179 [details]
emerge -pqv =dev-util/scons-1.2.0_p20091224




Comment 3


Karl Ernst Brunk





          2010-01-12 09:29:34 UTC
        

Created attachment 216181 [details]
environment




Comment 4


Karl Ernst Brunk





          2010-01-12 09:30:18 UTC
        

Created attachment 216183 [details]
scons-1.2.0_p20091224/temp/build.log




Comment 5


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2010-01-12 10:18:23 UTC
        

It's strange, because it seems that you use an older version of python.eclass, but the newest version of distutils.eclass. I updated python.eclass before distutils.eclass. Do you have any eclasses in any overlay? Please try installation with empty PORTDIR_OVERLAY.




Comment 6


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2010-01-12 10:19:13 UTC
        

*** Bug 300680 has been marked as a duplicate of this bug. ***




Comment 7


Karl Ernst Brunk





          2010-01-12 14:29:29 UTC
        

(In reply to comment #5)
So i commented the overlay in make.conf and tried again.
No difference. Exact same point it stops.
btw. the Overlay consists just of two media-tv/directories for sopcasting.
As i said the update did 44/52 - then scons died. skipfirst and another 4 where going. then gpsd died(comment6). Again skipfirst and the last two run without any problems.
It seems strange to me too because the python stuff should be used by nearly every emerge an just those two where hitting this and at different stages within the process. So what exactly is python '-A' doing ?







Comment 8


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2010-01-12 14:32:14 UTC
        

Run `emerge --sync` and maybe change rsync mirror.




Comment 9


Karl Ernst Brunk





          2010-01-12 16:36:46 UTC
        

(In reply to comment #8)
> Run `emerge --sync` and maybe change rsync mirror.

Did eix-sync and emerge -uvpDN @system @world.
First strange thing but well known - scons and gpsd did not show off !
emerge -pv scons gpsd did show them as updateable !
While the sync i did see doing 12 changes in the python.eclass
But not that it did not just change the problem - both errors continue at the same place. Even worse - Another 4 updates were available. Three did succide - one failed in a slightly different matter - gentoolkit did :
...
running install_egg_info
Writing /var/tmp/portage/app-portage/gentoolkit-0.3.0_rc8-r1/image/usr/lib/python2.6/site-packages/gentoolkit-9999-py2.6.egg-info
 * Generating '/usr/bin/eclean' wrapper script
 * Generating '/usr/bin/equery' wrapper script
 * Generating '/usr/bin/glsa-check' wrapper script
 * Generating '/usr/bin/epkginfo' wrapper script
 * ERROR: app-portage/gentoolkit-0.3.0_rc8-r1 failed:
 *   PYTHON(): Unrecognized option '--ABI'
 * 
 * Call stack:
 *     ebuild.sh, line   48:  Called src_install
 *   environment, line 3463:  Called PYTHON '--ABI' '-f'
 *   environment, line  143:  Called die
 * The specific snippet of code:
 *                   die "${FUNCNAME}(): Unrecognized option '$1'"
...

i attach the needed files.
Sorry !




Comment 10


Karl Ernst Brunk





          2010-01-12 16:40:39 UTC
        

Created attachment 216236 [details]
gentoolkit_build.log




Comment 11


Karl Ernst Brunk





          2010-01-12 16:41:05 UTC
        

Created attachment 216237 [details]
gentoolkit_env




Comment 12


Karl Ernst Brunk





          2010-01-12 16:42:05 UTC
        

Created attachment 216239 [details]
emerge --info gentoolkit




Comment 13


Karl Ernst Brunk





          2010-01-12 16:42:27 UTC
        

Created attachment 216241 [details]
emerge -pqv gentoolkit




Comment 14


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2010-01-12 16:43:19 UTC
        

You use wrong copy of python.eclass. Post the output of:
sed -ne 3p "$(portageq envvar PORTDIR)/eclass/python.eclass"




Comment 15


Karl Ernst Brunk





          2010-01-12 17:14:14 UTC
        

(In reply to comment #14)
> You use wrong copy of python.eclass. Post the output of:
> sed -ne 3p "$(portageq envvar PORTDIR)/eclass/python.eclass"
> 

# : /var/cvsroot/gentoo-x86/eclass/python.eclass,v 1.84 2010/01/11 16:07:23 arfrever Exp $




Comment 16


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2010-01-12 17:25:58 UTC
        

Do you use Funtoo?




Comment 17


Karl Ernst Brunk





          2010-01-12 17:33:42 UTC
        

> Do you use Funtoo?

Should i be sorry for that ? Yes i do use Daniels funtoo. But i did have a look at the eclass of both trees and the seem to be the same.





Comment 18


Karl Ernst Brunk





          2010-01-12 17:45:00 UTC
        

I am very sorry for the last comment. They not the same ! I will try the original version.
blame on me




Comment 19


Daniel Robbins





          2010-01-12 17:51:54 UTC
        

Karl, there were several Python bugs in our tree over the last day or so - one from Gentoo (bug #300579) and one recent merge-related bug that was Funtoo's fault. 

We've added the upstream Gentoo fix for their bug, and now I've fixed Funtoo's broken merge, so everything should be working again. Please sync again and your python problems should be resolved.




Comment 20


Karl Ernst Brunk





          2010-01-12 18:22:47 UTC
        

(In reply to comment #19)
> Karl, there were several Python bugs in our tree over the last day or so - one
> from Gentoo (bug #300579) and one recent merge-related bug that was Funtoo's
> fault. 
> 
> We've added the upstream Gentoo fix for their bug, and now I've fixed Funtoo's
> broken merge, so everything should be working again. Please sync again and your
> python problems should be resolved.
> 

All three builds gone well now.
Thanks
PS did search funtoo-group for python related stuff but could not find anything related to this problem. Sorry.





Comment 21


Daniel Robbins





          2010-01-12 18:26:05 UTC
        

Just posted a message to the funtoo ML to address that. Thanks :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

