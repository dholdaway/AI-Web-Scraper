Title: 612230 – app-text/mupdf-1.10a-r2 fails to compile - include/mupdf/pdf/object.h:4:1: error: expected identifier before ‘typedef’
URL: https://bugs.gentoo.org/show_bug.cgi?id=612230

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 612230
app-text/mupdf-1.10a-r2 fails to compile - include/mupdf/pdf/object.h:4:1: error: expected identifier before ‘typedef’
Last modified: 2017-03-12 01:16:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 612230 
      - app-text/mupdf-1.10a-r2 fails to compile - include/mupdf/pdf/object.h:4:1: error: expected identifier before ‘typedef’


Summary:
app-text/mupdf-1.10a-r2 fails to compile - include/mupdf/pdf/object.h:4:1: er...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Michael Weber (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-03-10 17:41 UTC by doj





      Modified:
    
2017-03-12 01:16 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log of app-text/mupdf-1.10a-r2 compile fail

              (build.log,74.80 KB,
                text/plain)

            
2017-03-10 17:42 UTC,

            doj




Details





emerge info of app-text/mupdf-1.10a-r2 compile failure

              (info.txt,5.68 KB,
                text/plain)

            
2017-03-10 17:44 UTC,

            doj




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


doj





          2017-03-10 17:41:25 UTC
        

I was updating my ebuilds and app-text/mupdf-1.10a-r2 was a dependency to some other ebuild, but it failed to compile with the following errors:

In file included from include/mupdf/pdf.h:11:0,
                 from source/tools/murun.c:2:
include/mupdf/pdf/object.h:4:1: error: expected identifier before ‘typedef’
 typedef struct pdf_document_s pdf_document;
 ^
make: *** [Makefile:180: build/debug/tools/murun.o] Error 1
make: *** Waiting for unfinished jobs....
In file included from include/mupdf/pdf.h:11:0,
                 from source/tools/mudraw.c:6:
include/mupdf/pdf/object.h:4:1: error: expected identifier before ‘typedef’
 typedef struct pdf_document_s pdf_document;
 ^
make: *** [Makefile:180: build/debug/tools/mudraw.o] Error 1
 * ERROR: app-text/mupdf-1.10a-r2::gentoo failed (compile phase):
 *   emake failed




Comment 1


doj





          2017-03-10 17:42:47 UTC
        

Created attachment 466554 [details]
build.log of app-text/mupdf-1.10a-r2 compile fail




Comment 2


doj





          2017-03-10 17:44:42 UTC
        

Created attachment 466556 [details]
emerge info of app-text/mupdf-1.10a-r2 compile failure




Comment 3


doj





          2017-03-10 17:45:16 UTC
        

root@cubicle:~ # emerge -pqv '=app-text/mupdf-1.10a-r2::gentoo'
[ebuild     U ] app-text/mupdf-1.10a-r2 [1.10a-r1] USE="X curl opengl openssl -javascript (-libressl) -static -static-libs -vanilla"




Comment 4


Michael Weber (RETIRED)






          2017-03-11 20:00:43 UTC
        

Thanks for the report, I try to reproduce this error with an amd64 stable box, need to find one first.




Comment 5


Michael Weber (RETIRED)






          2017-03-11 20:50:27 UTC
        

Sorry, I could not reproduce the bug, exact same FLAGS, compiler version.

Have you tried rerunning the emerge?
Is your system up-to-date? like a recent emerge -avuD --changed-use @world run?

The include hierarchy an the typedef looks rather unsuspicious.




Comment 6


doj





          2017-03-12 01:16:21 UTC
        

yes, very strange. I've synced the portage tree again today and re-emerged and mupdf was compiling just fine. Whatever caused this, it's not a problem for me any more. I'll close this bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

