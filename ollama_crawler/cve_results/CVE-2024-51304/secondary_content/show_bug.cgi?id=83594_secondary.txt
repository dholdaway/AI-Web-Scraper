Title: 83594 – net-www/apache-2.0.52-r3 compile failed.
URL: https://bugs.gentoo.org/show_bug.cgi?id=83594

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 83594
net-www/apache-2.0.52-r3 compile failed.
Last modified: 2006-07-16 09:27:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 83594 
      - net-www/apache-2.0.52-r3 compile failed.


Summary:
net-www/apache-2.0.52-r3 compile failed.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Apache Team - Bugzilla Reports








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-28 13:05 UTC by Przemo Byczynski





      Modified:
    
2006-07-16 09:27 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



andyreif
geekypenguin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




exports.c

              (exports.c,115.73 KB,
                text/plain)

            
2005-03-01 15:35 UTC,

            Jory A. Pratt




Details





apache emerge log

              (apache-configure.log,9.58 KB,
                text/plain)

            
2006-07-06 14:15 UTC,

            Andy




Details





config.layout

              (config.layout,11.42 KB,
                text/plain)

            
2006-07-06 14:17 UTC,

            Andy




Details





config.log

              (config.log,13.22 KB,
                text/plain)

            
2006-07-06 14:19 UTC,

            Andy




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Przemo Byczynski





          2005-02-28 13:05:47 UTC
        

configure: error: changes in the environment can compromise the build
configure: error: run `make distclean' and/or `rm /var/tmp/portage/apache-2.0.52-r3/work/httpd-2.0.52/config.cache' and start over
configure failed for srclib/pcre

!!! ERROR: net-www/apache-2.0.52-r3 failed.
!!! Function src_compile, Line 123, Exitcode 1
!!! bad ./configure please submit bug report to bugs.gentoo.org. Include your config.layout and config.log
!!! If you need support, post the topmost build error, NOT this status message.


Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


Carsten Lohrke (RETIRED)






          2005-02-28 13:19:04 UTC
        

Please use "New -> Gentoo Linux -> Component: Ebuilds" in future. Infrastructure is not the correct addressee.




Comment 2


Christian Parpart (RETIRED)






          2005-02-28 14:20:05 UTC
        

erm... that sounds weird. what did you do? emerging apache repeately? with pressing CTRL-C on first time or so?
Can you attach the full `emerge -v apache` output please? please wipe out your /var/tmp/portage/* directory before emerging (just to be sure)




Comment 3


Jory A. Pratt





          2005-03-01 08:02:44 UTC
        

exports.c:2050: error: redefinition of 'ap_hack_ap_send_http_options'
exports.c:1452: error: previous definition of 'ap_hack_ap_send_http_options' was here
exports.c:2055: error: redefinition of 'ap_hack_ap_hook_get_suexec_identity'
exports.c:1491: error: previous definition of 'ap_hack_ap_hook_get_suexec_identity' was here
exports.c:2056: error: redefinition of 'ap_hack_ap_hook_get_get_suexec_identity'
exports.c:1492: error: previous definition of 'ap_hack_ap_hook_get_get_suexec_identity' was here
exports.c:2057: error: redefinition of 'ap_hack_ap_run_get_suexec_identity'
exports.c:1493: error: previous definition of 'ap_hack_ap_run_get_suexec_identity' was here
exports.c:2058: error: redefinition of 'ap_hack_unixd_setup_child'
exports.c:1494: error: previous definition of 'ap_hack_unixd_setup_child' was here
exports.c:2059: error: redefinition of 'ap_hack_unixd_pre_config'
exports.c:1495: error: previous definition of 'ap_hack_unixd_pre_config' was here
exports.c:2060: error: redefinition of 'ap_hack_unixd_set_user'
exports.c:1496: error: previous definition of 'ap_hack_unixd_set_user' was here
exports.c:2061: error: redefinition of 'ap_hack_unixd_set_group'
exports.c:1497: error: previous definition of 'ap_hack_unixd_set_group' was here
exports.c:2063: error: redefinition of 'ap_hack_unixd_set_rlimit'
exports.c:1499: error: previous definition of 'ap_hack_unixd_set_rlimit' was here
exports.c:2065: error: redefinition of 'ap_hack_unixd_set_proc_mutex_perms'
exports.c:1501: error: previous definition of 'ap_hack_unixd_set_proc_mutex_perms' was here
exports.c:2066: error: redefinition of 'ap_hack_unixd_set_global_mutex_perms'
exports.c:1502: error: previous definition of 'ap_hack_unixd_set_global_mutex_perms' was here
exports.c:2067: error: redefinition of 'ap_hack_unixd_accept'
exports.c:1503: error: previous definition of 'ap_hack_unixd_accept' was here
make[2]: *** [exports.lo] Error 1
make[2]: Leaving directory `/var/tmp/portage/apache-2.0.52-r3/work/httpd-2.0.52/server'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/apache-2.0.52-r3/work/httpd-2.0.52/server'
make: *** [all-recursive] Error 1





Comment 4


Paul Querna





          2005-03-01 08:10:31 UTC
        

Please upgrade your version of awk.




Comment 5


Jory A. Pratt





          2005-03-01 08:12:54 UTC
        

awk is not the issue here I have latest version already installed.




Comment 6


Paul Querna





          2005-03-01 08:17:55 UTC
        

Are you sure?  This looks exactly like bug 78227.




Comment 7


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 08:23:24 UTC
        

This is still a different error to the one that was posted at the opening of this report.  If this can always be reproduced, how come you can get passed a dyiing configure run?

Any how, please post the output from "emerge info".




Comment 8


Jory A. Pratt





          2005-03-01 08:25:36 UTC
        

I am positive seeing I just checked LOL. I sure will be glade once I get my developers status done so you folks quit questioning what I post.




Comment 9


Jory A. Pratt





          2005-03-01 08:29:14 UTC
        

Portage 2.0.51.18 (default-linux/x86/2005.0, gcc-3.4.3-20050110, glibc-2.3.4.20050125-r0, 2.6.10-gentoo-r7 i686)
=================================================================
System uname: 2.6.10-gentoo-r7 i686 AMD Athlon(TM) XP2200+
Gentoo Base System version 1.6.9
Python:              dev-lang/python-2.4-r2 [2.4 (#1, Feb 28 2005, 20:49:10)]
dev-lang/python:     2.4-r2
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.9.4, 1.5, 1.8.5-r3, 1.6.3, 1.7.9-r1
sys-devel/binutils:  2.15.92.0.2-r4
sys-devel/libtool:   1.5.10-r5
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -ftracer -fprefetch-loop-arrays -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/alias /var/qmail/control /var/vpopmail/domains /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -ftracer -fprefetch-loop-arrays -pipe -fvisibility-inlines-hidden"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig candy ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://open-systems.ufl.edu/mirrors/gentoo http://mirror.datapipe.net/gentoo"
LDFLAGS="-Wl,-O1 -Wl,--sort-common"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X alsa apache2 avi berkdb bitmap-fonts cdr crypt cups curl dvd dvdr emboss encode f77 fam flac foomaticdb fortran gcj gdbm gif gpm gstreamer gtk gtk2 imagemagick imap imlib ipv6 java javascript jpeg libg++ libwww mad mikmod mmx motif mpeg mysql ncurses nls nowin nptl nptlonly oggvorbis opengl pam pdflib perl php png python qt quicktime readline sdl spell sse ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts userlocales vhost xml2 xmms xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL

As to how it is passing configure who knows, but here is the info you would like to see!!




Comment 10


Jory A. Pratt





          2005-03-01 08:30:25 UTC
        

And for those that are wondering yes I have gawk 3.1.4-r4 installed.




Comment 11


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 08:39:03 UTC
        

Don't worry, we're not picking on you in particular, we question everyone ;)  But seriously, in this case, none of us have run into this problem and we need to be sure on the relevant information.

Are you by any chance upgrading from stable to 2.0.52-r3?




Comment 12


Jory A. Pratt





          2005-03-01 08:42:26 UTC
        

The update is from -r2 now my wife says she didnt have a problem LOL guess it is just me. ~shrugs~




Comment 13


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 09:02:41 UTC
        

Please attach /var/tmp/portage/apache-2.0.52-r3/work/httpd-2.0.52/server/exports.c.




Comment 14


Jory A. Pratt





          2005-03-01 15:35:59 UTC
        

Created attachment 52420 [details]
exports.c

hope it helps.




Comment 15


Paul Querna





          2005-03-01 15:56:09 UTC
        

You have a bunch of Apache header files in /usr/include/apache2. exports.c is wrongly including them.




Comment 16


Jory A. Pratt





          2005-03-01 15:59:26 UTC
        

so are you suggesting I emerge -C apache and make sure all headers are removed and everything before re-emerging apache.




Comment 17


Jory A. Pratt





          2005-03-01 16:04:29 UTC
        

well after removing every trace of apache the configure fails LOL would you like me to post error here or open new bug on it





Comment 18


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 16:05:53 UTC
        

Please post the error (with context) here.




Comment 19


Jory A. Pratt





          2005-03-01 16:09:29 UTC
        

Configuring Apache Portable Runtime library ...

checking for APR... configure: error: the --with-apr parameter is incorrect. It must specify an install prefix, a
build directory, or an apr-config file.




Comment 20


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 16:17:19 UTC
        

Could you please attach /var/tmp/portage/apache-2.0.52-r3/work/httpd-2.0.52/config.log here and post the output of "emerge -pv apache apr apr-util"?




Comment 21


Jory A. Pratt





          2005-03-01 16:36:12 UTC
        

 aight I found the problem. I was in the middle of rebuilding those deps when you sent that message out. It was simple not reading everything probabably and most likely my fault. Simply re-emerging the "apr apr-util" it compiled fine. Sorry for my stupidy.




Comment 22


Elfyn McBratney (beu) (RETIRED)






          2005-03-01 16:40:59 UTC
        

Cool, resolving bug. :)




Comment 23


Andy





          2006-07-06 14:12:33 UTC
        

I run into the same problem as in the original post, however with apache-2.0.58:
configure: error: changes in the environment can compromise the build
configure: error: run `make distclean' and/or `rm /var/tmp/portage/apache-2.0.58/work/httpd-2.0.58/config.cache' and start over
configure failed for srclib/pcre

 I didn't update for a couple of months and now as I tried this is the only package that continuously fails to build.
I tried to unmerge the old package, but the new one still fails to build.
I tried to reemerge apr apr-util as recommended in comment #21 and also libpcre, but it didn't help. I also wiped out /var/tmp/portage several times.
The gawk version: sys-apps/gawk-3.1.5-r1.

# emerge -pv apache

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] net-www/apache-2.0.58 [2.0.55-r1] USE="apache2 doc ssl -debug -ldap* -mpm-leader -mpm-peruser -mpm-prefork -mpm-threadpool -mpm-worker -no-suexec -static-modules -threads" 0 kB 
or (after unmerging):
[ebuild  N    ] net-www/apache-2.0.58  USE="apache2 doc ssl -debug -ldap -mpm-leader -mpm-peruser -mpm-prefork -mpm-threadpool -mpm-worker -no-suexec -static-modules -threads" 0 kB 

# emerge --info
Portage 2.1-r1 (default-linux/x86/2005.1, gcc-3.4.6, glibc-2.3.6-r4, 2.6.16-gentoo-r7 i686)
=================================================================
System uname: 2.6.16-gentoo-r7 i686 Intel(R) Pentium(R) 4 CPU 2.60GHz
Gentoo Base System version 1.6.15
ccache version 2.3 [disabled]
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4  -ggdb "
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4  -ggdb "
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms splitdebug strict userfetch userpriv userpriv_fakeroot usersandbox"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo"
LC_ALL="en_US.UTF-8"
LINGUAS="en en_US de ru"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aalib acl alsa apache2 apm arts artswrappersuid avi berkdb bitmap-fonts cdparanoia cdr cli crypt cups divx4linux dlloader doc dri dvd dvdr dvdread eds emacs emboss encode f77 ffmpeg firefox foomaticdb fortran gdbm gif gimpprint gnome gpm gstreamer gtk gtk2 imagemagick imap imlib ipv6 isdnlog java jpeg jpeg2k junit kde libg++ libwww live mad mikmod mmx mng motif mozcalendar mozdevelop mozilla mozsvg mp3 mpeg mysql mythtv ncurses nls objc ogg oggvorbis opengl oss pam pcre pdflib perl png ppds pppd python qt qt3 qt4 quicktime readline real reflection scanner sdl session spell spl sse ssl tcpd tetex tiff truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vorbis win32codecs wma wmf xml2 xmms xorg xprint xv xvid zeroconf zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_en linguas_en_US linguas_de linguas_ru userland_GNU video_cards_radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS

The complete emerge log,  config.layout and config.log will be added as attachments.
The file /var/tmp/portage/apache-2.0.58/work/httpd-2.0.58/server/exports.c is not there (comment #13).




Comment 24


Andy





          2006-07-06 14:15:04 UTC
        

Created attachment 91076 [details]
apache emerge log




Comment 25


Andy





          2006-07-06 14:17:56 UTC
        

Created attachment 91077 [details]
config.layout




Comment 26


Andy





          2006-07-06 14:19:21 UTC
        

Created attachment 91078 [details]
config.log




Comment 27


Michael Stewart (vericgar) (RETIRED)






          2006-07-06 19:19:47 UTC
        

This is caused by errant spaces/newlines in CFLAGS. Remove any newlines and double-spaces and the problem will go away.




Comment 28


Andy





          2006-07-16 09:27:15 UTC
        

Yes, thanks.
I should have searched for other reports with this problem, e.g.
bug 106447.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

