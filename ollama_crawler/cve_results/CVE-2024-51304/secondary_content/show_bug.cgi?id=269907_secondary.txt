Title: 269907 – dev-lang/boo fails to install because of root-owned ${T}/.wapi
URL: https://bugs.gentoo.org/show_bug.cgi?id=269907

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 269907
dev-lang/boo fails to install because of root-owned ${T}/.wapi
Last modified: 2010-09-07 15:55:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 269907 
      - dev-lang/boo fails to install because of root-owned ${T}/.wapi


Summary:
dev-lang/boo fails to install because of root-owned ${T}/.wapi
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

dotnet project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-15 05:30 UTC by Maciej Piechotka





      Modified:
    
2010-09-07 15:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dev-zero









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Maciej Piechotka





          2009-05-15 05:30:07 UTC
        

** (/usr/share/NAnt/bin/NAnt.exe:19001): CRITICAL **: _wapi_shm_file_open: shared file [/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/.wapi/shared_data-notebook-Linux-i686-312-12-0] open error: Permission denied

** (/usr/share/NAnt/bin/NAnt.exe:19001): CRITICAL **: _wapi_shm_attach: shared file [/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/.wapi/shared_data-notebook-Linux-i686-312-12-0] open error
**
ERROR:shared.c:349:shm_semaphores_init: assertion failed: (tmp_shared != NULL)

** (/usr/share/NAnt/bin/NAnt.exe:19001): WARNING **: Thread (nil) may have been prematurely finalized
Stacktrace:


** (/usr/share/NAnt/bin/NAnt.exe:19001): WARNING **: Thread (nil) may have been prematurely finalized

** (/usr/share/NAnt/bin/NAnt.exe:19001): WARNING **: Thread (nil) may have been prematurely finalized

Native stacktrace:

	/usr/lib/pkgconfig/../../bin/mono [0x80cb567]
	[0xb807340c]
	[0xb8073424]
	/lib/libc.so.6(gsignal+0x51) [0xb7de0fa1]
	/lib/libc.so.6(abort+0x1b0) [0xb7de2810]
	/usr/lib/libglib-2.0.so.0(g_test_trap_assertions+0) [0xb7fbe57c]
	/usr/lib/libglib-2.0.so.0(g_test_timer_start+0) [0xb7fbeab7]
	/usr/lib/pkgconfig/../../bin/mono [0x81c2e5c]
	/usr/lib/pkgconfig/../../bin/mono [0x81bce9c]
	/usr/lib/pkgconfig/../../bin/mono(mono_once+0x6b) [0x81add2b]
	/usr/lib/pkgconfig/../../bin/mono [0x81bcde4]
	/usr/lib/pkgconfig/../../bin/mono [0x81b6a8f]
	/usr/lib/pkgconfig/../../bin/mono [0x8188668]
	/usr/lib/pkgconfig/../../bin/mono(mono_runtime_init+0x2d) [0x813c42d]
	/usr/lib/pkgconfig/../../bin/mono [0x805d8e3]
	/usr/lib/pkgconfig/../../bin/mono(mono_main+0x290) [0x80b1bd0]
	/usr/lib/pkgconfig/../../bin/mono [0x805b375]
	/lib/libc.so.6(__libc_start_main+0xe2) [0xb7dcb712]
	/usr/lib/pkgconfig/../../bin/mono [0x805b291]

Debug info from gdb:

Error while reading shared library symbols:
Cannot enable thread event reporting for Thread 0xb7db4980 (LWP 19001): generic error
[Thread debugging using libthread_db enabled]
[New Thread 0xb7db4980 (LWP 19001)]
0xb8073424 in __kernel_vsyscall ()
  1 Thread 0xb7db4980 (LWP 19001)  0xb8073424 in __kernel_vsyscall ()

Thread 1 (Thread 0xb7db4980 (LWP 19001)):
#0  0xb8073424 in __kernel_vsyscall ()
#1  0xb7f4ee53 in __read_nocancel () from /lib/libpthread.so.0
#2  0x080cb6dc in mono_handle_native_sigsegv (signal=6, ctx=0xbfb8c6dc)
    at mini-exceptions.c:1480
#3  <signal handler called>
#4  0xb8073424 in __kernel_vsyscall ()
#5  0xb7de0fa1 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#6  0xb7de2810 in abort () at abort.c:88
#7  0xb7fbe57c in g_assertion_message () at gtestutils.c:1301
#8  0xb7fbeab7 in g_assertion_message_expr () at gtestutils.c:1312
#9  0x081c2e5c in _wapi_shm_semaphores_init () at shared.c:349
#10 0x081bce9c in shared_init () at handles.c:246
#11 0x081add2b in mono_once (once=0x82c0678, once_init=0x81bce40 <shared_init>)
    at mono-mutex.c:80
#12 0x081bcde4 in _wapi_handle_new (type=WAPI_HANDLE_SEM, 
    handle_specific=0xbfb8cd68) at handles.c:499
#13 0x081b6a8f in sem_create (security=<value optimized out>, 
    initial=<value optimized out>, max=2147483647) at semaphores.c:181
#14 0x08188668 in mono_thread_pool_init () at threadpool.c:1075
#15 0x0813c42d in mono_runtime_init (domain=0x25ee0, 
    start_cb=0x805c5e0 <mono_thread_start_cb>, 
    attach_cb=0x805c6c0 <mono_thread_attach_cb>) at appdomain.c:173
#16 0x0805d8e3 in mini_init (
    filename=0xbfb8e9a7 "/usr/share/NAnt/bin/NAnt.exe", runtime_version=0x0)
    at mini.c:5273
#17 0x080b1bd0 in mono_main (argc=7, argv=0xbfb8cfd4) at driver.c:1535
#18 0x0805b375 in main (argc=7, argv=0xbfb8cfd4) at main.c:38
#0  0xb8073424 in __kernel_vsyscall ()

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/loadsaveenv: line 3548: 19001 Aborted                 nant -t:mono-2.0 -D:install.prefix=/usr -D:install.libdir=/usr/$(get_libdir) set-release-configuration all

!!! ERROR in dev-lang/boo-0.9.1.3287-r1:
!!! In src_compile at line 3549
!!! Compilation failed

!!! Call stack:
!!!    * src_compile (/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/loadsaveenv:3549)
!!!    * ebuild_f_compile (/usr/libexec/paludis/2/src_compile.bash:54)
!!!    * ebuild_main (/usr/libexec/paludis/ebuild.bash:482)
!!!    * main (/usr/libexec/paludis/ebuild.bash:498)

diefunc: making ebuild PID 18895 exit with error
die trap: exiting with error.

Install error:
  * In program paludis -i1 boo:
  * When performing install action from command line:
  * When executing install task:
  * When installing 'dev-lang/boo-0.9.1.3287-r1:0::gentoo':
  * When running an ebuild command on 'dev-lang/boo-0.9.1.3287-r1:0::gentoo':
  * Install error: Install failed for 'dev-lang/boo-0.9.1.3287-r1:0::gentoo'


NAnt 0.86_beta1
mono 2.4-r3




Comment 1


Sebastian Luther (few)





          2009-05-16 18:16:28 UTC
        

emerge --info and the complete build.log please.




Comment 2


Maciej Piechotka





          2009-05-16 19:14:57 UTC
        

Full log (but I don't think it'll be much informative)

(1 of 1) Installing dev-lang/boo-0.9.1.3287-r1:0::gentoo

Checking 'boo-0.9.1.3287-src.zip'... ok
>>> Running ebuild phase killold as root:root...
>>> Starting builtin_killold
>>> Done builtin_killold
>>> Completed ebuild phase killold
>>> Running ebuild phases init saveenv as paludisbuild:paludisbuild...
>>> Starting builtin_init
>>> Done builtin_init
>>> Starting builtin_saveenv
>>> Done builtin_saveenv
>>> Completed ebuild phases init saveenv
>>> Running ebuild phases loadenv setup saveenv as root:root...
>>> Starting builtin_loadenv
>>> Done builtin_loadenv
>>> Starting pkg_setup
>>> Done pkg_setup
>>> Starting builtin_saveenv
>>> Done builtin_saveenv
>>> Completed ebuild phases loadenv setup saveenv
>>> Running ebuild phases loadenv unpack saveenv as paludisbuild:paludisbuild...
>>> Starting builtin_loadenv
>>> Done builtin_loadenv
>>> Starting src_unpack
>>> Unpacking boo-0.9.1.3287-src.zip to /var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/work
unzip -qo /var/tmp/distfiles/boo-0.9.1.3287-src.zip
>>> Done src_unpack
>>> Starting builtin_saveenv
>>> Done builtin_saveenv
>>> Completed ebuild phases loadenv unpack saveenv
>>> Running ebuild phases loadenv prepare saveenv as paludisbuild:paludisbuild...
>>> Starting builtin_loadenv
>>> Done builtin_loadenv
>>> Starting src_prepare
 * Applying boo-0.9.1.3287-GACproblems.patch ...                         [ ok ]
>>> Done src_prepare
>>> Starting builtin_saveenv
>>> Done builtin_saveenv
>>> Completed ebuild phases loadenv prepare saveenv
>>> Running ebuild phases loadenv configure saveenv as paludisbuild:paludisbuild...
>>> Starting builtin_loadenv
>>> Done builtin_loadenv
>>> Starting src_configure
>>> Done src_configure
>>> Starting builtin_saveenv
>>> Done builtin_saveenv
>>> Completed ebuild phases loadenv configure saveenv
>>> Running ebuild phases loadenv compile saveenv as paludisbuild:paludisbuild...
>>> Starting builtin_loadenv
>>> Done builtin_loadenv
>>> Starting src_compile

** (/usr/share/NAnt/bin/NAnt.exe:7200): CRITICAL **: _wapi_shm_file_open: shared file [/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/.wapi/shared_data-notebook-Linux-i686-312-12-0] open error: Permission denied

** (/usr/share/NAnt/bin/NAnt.exe:7200): CRITICAL **: _wapi_shm_attach: shared file [/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/.wapi/shared_data-notebook-Linux-i686-312-12-0] open error
**
ERROR:shared.c:349:shm_semaphores_init: assertion failed: (tmp_shared != NULL)

** (/usr/share/NAnt/bin/NAnt.exe:7200): WARNING **: Thread (nil) may have been prematurely finalized
Stacktrace:


** (/usr/share/NAnt/bin/NAnt.exe:7200): WARNING **: Thread (nil) may have been prematurely finalized

** (/usr/share/NAnt/bin/NAnt.exe:7200): WARNING **: Thread (nil) may have been prematurely finalized

Native stacktrace:

	/usr/lib/pkgconfig/../../bin/mono [0x80cb567]
	[0xb7f0040c]
	[0xb7f00424]
	/lib/libc.so.6(gsignal+0x51) [0xb7c6cfa1]
	/lib/libc.so.6(abort+0x1b0) [0xb7c6e810]
	/usr/lib/libglib-2.0.so.0(g_test_trap_assertions+0) [0xb7e4a57c]
	/usr/lib/libglib-2.0.so.0(g_test_timer_start+0) [0xb7e4aab7]
	/usr/lib/pkgconfig/../../bin/mono [0x81c2e5c]
	/usr/lib/pkgconfig/../../bin/mono [0x81bce9c]
	/usr/lib/pkgconfig/../../bin/mono(mono_once+0x6b) [0x81add2b]
	/usr/lib/pkgconfig/../../bin/mono [0x81bcde4]
	/usr/lib/pkgconfig/../../bin/mono [0x81b6a8f]
	/usr/lib/pkgconfig/../../bin/mono [0x8188668]
	/usr/lib/pkgconfig/../../bin/mono(mono_runtime_init+0x2d) [0x813c42d]
	/usr/lib/pkgconfig/../../bin/mono [0x805d8e3]
	/usr/lib/pkgconfig/../../bin/mono(mono_main+0x290) [0x80b1bd0]
	/usr/lib/pkgconfig/../../bin/mono [0x805b375]
	/lib/libc.so.6(__libc_start_main+0xe2) [0xb7c57712]
	/usr/lib/pkgconfig/../../bin/mono [0x805b291]

Debug info from gdb:

Error while reading shared library symbols:
Cannot enable thread event reporting for Thread 0xb7c40980 (LWP 7200): generic error
[Thread debugging using libthread_db enabled]
[New Thread 0xb7c40980 (LWP 7200)]
0xb7f00424 in __kernel_vsyscall ()
  1 Thread 0xb7c40980 (LWP 7200)  0xb7f00424 in __kernel_vsyscall ()

Thread 1 (Thread 0xb7c40980 (LWP 7200)):
#0  0xb7f00424 in __kernel_vsyscall ()
#1  0xb7ddae53 in __read_nocancel () from /lib/libpthread.so.0
#2  0x080cb6dc in mono_handle_native_sigsegv (signal=6, ctx=0xbf9194ac)
    at mini-exceptions.c:1480
#3  <signal handler called>
#4  0xb7f00424 in __kernel_vsyscall ()
#5  0xb7c6cfa1 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#6  0xb7c6e810 in abort () at abort.c:88
#7  0xb7e4a57c in g_assertion_message () at gtestutils.c:1301
#8  0xb7e4aab7 in g_assertion_message_expr () at gtestutils.c:1312
#9  0x081c2e5c in _wapi_shm_semaphores_init () at shared.c:349
#10 0x081bce9c in shared_init () at handles.c:246
#11 0x081add2b in mono_once (once=0x82c0678, once_init=0x81bce40 <shared_init>)
    at mono-mutex.c:80
#12 0x081bcde4 in _wapi_handle_new (type=WAPI_HANDLE_SEM, 
    handle_specific=0xbf919b38) at handles.c:499
#13 0x081b6a8f in sem_create (security=<value optimized out>, 
    initial=<value optimized out>, max=2147483647) at semaphores.c:181
#14 0x08188668 in mono_thread_pool_init () at threadpool.c:1075
#15 0x0813c42d in mono_runtime_init (domain=0x25ee0, 
    start_cb=0x805c5e0 <mono_thread_start_cb>, 
    attach_cb=0x805c6c0 <mono_thread_attach_cb>) at appdomain.c:173
#16 0x0805d8e3 in mini_init (
    filename=0xbf91b9d0 "/usr/share/NAnt/bin/NAnt.exe", runtime_version=0x0)
    at mini.c:5273
#17 0x080b1bd0 in mono_main (argc=7, argv=0xbf919da4) at driver.c:1535
#18 0x0805b375 in main (argc=7, argv=0xbf919da4) at main.c:38
#0  0xb7f00424 in __kernel_vsyscall ()

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
=================================================================

/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/loadsaveenv: line 3546:  7200 Aborted                 nant -t:mono-2.0 -D:install.prefix=/usr -D:install.libdir=/usr/$(get_libdir) set-release-configuration all

!!! ERROR in dev-lang/boo-0.9.1.3287-r1:
!!! In src_compile at line 3547
!!! Compilation failed

!!! Call stack:
!!!    * src_compile (/var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1/temp/loadsaveenv:3547)
!!!    * ebuild_f_compile (/usr/libexec/paludis/2/src_compile.bash:54)
!!!    * ebuild_main (/usr/libexec/paludis/ebuild.bash:482)
!!!    * main (/usr/libexec/paludis/ebuild.bash:498)

diefunc: making ebuild PID 7094 exit with error
die trap: exiting with error.

Install error:
  * In program paludis -i1 boo:
  * When performing install action from command line:
  * When executing install task:
  * When installing 'dev-lang/boo-0.9.1.3287-r1:0::gentoo':
  * When running an ebuild command on 'dev-lang/boo-0.9.1.3287-r1:0::gentoo':
  * Install error: Install failed for 'dev-lang/boo-0.9.1.3287-r1:0::gentoo'


Output log: /var/log/paludis/1242500791-install-dev-lang_boo-0.9.1.3287-r1:0::gentoo.out
Messages log: /var/log/paludis/1242500791-install-dev-lang_boo-0.9.1.3287-r1:0::gentoo.messages

Summary of failures:

* dev-lang/boo-0.9.1.3287-r1:0::gentoo: failure

Total: 1 package, 0 successes, 0 skipped, 1 failure, 0 unreached

Resume command: paludis --log-level qa --preserve-world --install --serialised 0.25 'package;=dev-lang/boo-0.9.1.3287-r1:0::gentoo;installed;has_all_deps;P'

 * No unread news items found

 * Searching for configuration files requiring action...
 * No configuration file updates required

# paludis --info dev-lang/boo
paludis 0.36.1
Paludis build information:
    Compiler:
        CXX:                   i686-pc-linux-gnu-g++ 4.4.0
        CXXFLAGS:               -Os -mtune=pentium-m -march=pentium-m -mfpmath=sse -pipe -momit-leaf-frame-pointer -w -ftree-vectorize -ftree-loop-optimize -ftree-loop-linear -freorder-blocks-and-partition -fgcse-sm -fgcse-las -fgcse-after-reload -ftracer -maccumulate-outgoing-args -findirect-inlining -floop-interchange -floop-block -floop-strip-mine -pedantic
        LDFLAGS:               -Wl,-O1 -Wl,--as-needed -Wl,--hash-style=both -Wl,--sort-common
        DATE:                  2009-04-29T01:43:14+0200

    Libraries:
        C++ Library:           GNU libstdc++ 20090421

    Reduced Privs:
        reduced_uid:           111
        reduced_uid->name:     paludisbuild
        reduced_uid->dir:      /var/tmp/paludis
        reduced_gid:           1028
        reduced_gid->name:     paludisbuild

    Paths:
        DATADIR:               /usr/share
        LIBDIR:                /usr/lib
        LIBEXECDIR:            /usr/libexec
        SYSCONFDIR:            /etc
        PYTHONINSTALLDIR:      /usr/lib/python2.6/site-packages
        RUBYINSTALLDIR:        /usr/lib/ruby/site_ruby/1.8/i686-linux

Environment:
    Format:                    paludis
    Config dir:                /etc/paludis
    World file:                /var/db/pkg/world

Repository layman:
    format:                    unavailable
    location:                  /var/db/paludis/repositories/layman
    sync:                      tar+http://git.exherbo.org/layman_repositories.tar.bz2
    sync_options:              

Repository installed-virtuals:
    format:                    installed_virtuals
    root:                      /

Repository virtuals:
    format:                    virtuals

Repository gentoo:
    format:                    ebuild
    location:                  /usr/portage
    append_repository_name_to_write_cache: true
    binary_destination:        false
    binary_keywords:           
    binary_uri_prefix:         
    builddir:                  /var/tmp/paludis
    cache:                     /usr/portage/metadata/cache
    distdir:                   /var/tmp/distfiles
    eapi_when_unknown:         0
    eapi_when_unspecified:     0
    eclassdirs:                /usr/portage/eclass
    ignore_deprecated_profiles: false
    layout:                    traditional
    names_cache:               /usr/portage/.cache/names
    newsdir:                   /usr/portage/metadata/news
    profile_eapi_when_unspecified: 0
    profiles:                  /usr/portage/profiles/default/linux/x86/2008.0/developer
    securitydir:               /usr/portage/metadata/glsa
    setsdir:                   /usr/portage/sets
    sync:                      rsync://rsync.gentoo.org/gentoo-portage
    sync_options:              
    use_manifest:              use
    write_cache:               /var/empty
(...)
Package dev-lang/boo-0.9.1.3287-r1:0::gentoo:

        >>> Running ebuild phase killold as paludisbuild:paludisbuild...
        >>> Starting builtin_killold
        >>> Done builtin_killold
        >>> Completed ebuild phase killold
        >>> Running ebuild phases initmisc infovars as paludisbuild:paludisbuild...
        >>> Starting builtin_initmisc
        >>> Done builtin_initmisc
        >>> Starting builtin_infovars
        ACCEPT_KEYWORDS=x86
        CBUILD=i686-pc-linux-gnu
        CFLAGS=-Os -mtune=pentium-m -march=pentium-m -mfpmath=sse -pipe -momit-leaf-frame-pointer -ggdb -w -ftree-vectorize -ftree-loop-optimize -ftree-loop-linear -freorder-blocks-and-partition -fgcse-sm -fgcse-las -fgcse-after-reload -ftracer -maccumulate-outgoing-args -findirect-inlining -floop-interchange -floop-block -floop-strip-mine
        CHOST=i686-pc-linux-gnu
        CONFIG_PROTECT= 
        CONFIG_PROTECT_MASK= 
        CPPFLAGS=
        CTARGET=
        CXXFLAGS=-Os -mtune=pentium-m -march=pentium-m -mfpmath=sse -pipe -momit-leaf-frame-pointer -ggdb -w -ftree-vectorize -ftree-loop-optimize -ftree-loop-linear -freorder-blocks-and-partition -fgcse-sm -fgcse-las -fgcse-after-reload -ftracer -maccumulate-outgoing-args -findirect-inlining -floop-interchange -floop-block -floop-strip-mine
        DISTDIR=/var/tmp/distfiles
        FEATURES=collision-protect cvs digest multilib-strict sign splitdebug stricter userpriv usersandbox
        FFLAGS=
        GENTOO_MIRRORS=
        INSTALL_MASK=
        LANG=
        LC_ALL=C
        LDFLAGS=-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=both -Wl,--sort-common
        LINGUAS=en_GB en_US pl
        MAKEOPTS=
        PORTAGE_COMPRESS=
        PORTAGE_COMPRESS_FLAGS=
        PORTAGE_CONFIGROOT=
        PORTAGE_RSYNC_EXTRA_OPTS=
        PORTAGE_RSYNC_OPTS=
        PORTAGE_TMPDIR=/var/tmp/paludis
        PORTDIR=/usr/portage
        PORTDIR_OVERLAY=
        SYNC=
        USE=x86 alsa_cards_atiixp alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_empty alsa_pcm_plugins_ioplug alsa_pcm_plugins_null apache2_modules_actions apache2_modules_alias apache2_modules_auth_basic apache2_modules_authn_alias apache2_modules_authn_anon apache2_modules_authn_dbm apache2_modules_authn_default apache2_modules_authn_file apache2_modules_authz_dbm apache2_modules_authz_default apache2_modules_authz_groupfile apache2_modules_authz_host apache2_modules_authz_owner apache2_modules_authz_user apache2_modules_autoindex apache2_modules_cache apache2_modules_dav apache2_modules_dav_fs apache2_modules_dav_lock apache2_modules_deflate apache2_modules_dir apache2_modules_disk_cache apache2_modules_env apache2_modules_expires apache2_modules_ext_filter apache2_modules_file_cache apache2_modules_filter apache2_modules_headers apache2_modules_include apache2_modules_info apache2_modules_log_config apache2_modules_logio apache2_modules_mem_cache apache2_modules_mime apache2_modules_mime_magic apache2_modules_negotiation apache2_modules_rewrite apache2_modules_setenvif apache2_modules_speling apache2_modules_status apache2_modules_unique_id apache2_modules_userdir apache2_modules_usertrack apache2_modules_vhost_alias cameras_panasonic elibc_glibc input_devices_evdev kernel_linux lcd_devices_bayrad lcd_devices_cfontz lcd_devices_cfontz633 lcd_devices_glk lcd_devices_hd44780 lcd_devices_lb216 lcd_devices_lcdm001 lcd_devices_mtxorb lcd_devices_ncurses lcd_devices_text linguas_en_GB linguas_en_US linguas_pl netbeans_modules_ide netbeans_modules_java netbeans_modules_websvccommon userland_GNU video_cards_radeon x86 
        >>> Done builtin_infovars
        >>> Completed ebuild phases initmisc infovars
        >>> Running ebuild phase tidyup as paludisbuild:paludisbuild...
        >>> Starting builtin_tidyup
        rm -fr /var/tmp/paludis/dev-lang-boo-0.9.1.3287-r1-info
        >>> Done builtin_tidyup
        >>> Completed ebuild phase tidyup






Comment 3


Maciej Piechotka





          2009-05-20 07:09:27 UTC
        

After forcing out-of-sandbox build it worked fine. 




Comment 4


cmuelle8





          2009-06-16 21:56:43 UTC
        

I tried PALUDIS_DO_NOTHING_SANBOXY=1 paludis -i ... and it did not work.  The problem persists, same output as above.  my workaround was:

ebuild <boo.ebuild> merge

greetings,
cmuelle8




Comment 5


Tiziano Müller (RETIRED)






          2009-07-19 08:32:12 UTC
        

I just committed a fix for that and it's not a sandbox issue.
The problem is this:
pkg_setup is run as root and gacutil may or may not create (@dotnet: please investigate) a directory .wapi in ${T}. That directory is owned by root:root but when nant tries to write it's shared_data file in that directory in the src_configure/_compile phase it's process uid is paludisbuild:paludisbuild, resp. portage:portage.
I left the bug open by intention and asked the paludis people to take a look at this, maybe the EAPI needs a refinement about whether or not ${T} must be cleaned between phases or not.






Comment 6


Pacho Ramos






          2010-07-04 18:32:17 UTC
        

Tiziano, what do you expect to be done on this by dotnet team? Thanks for the info :-)

I vote for reassigning for handling eapi update (if needed)




Comment 7


Tiziano Müller (RETIRED)






          2010-07-05 10:08:47 UTC
        

(In reply to comment #6)
> Tiziano, what do you expect to be done on this by dotnet team? Thanks for the
> info :-)

gacutil may or may not create (@dotnet: please investigate) a directory .wapi in ${T} ...
is that .wapi directory important in any way? do we lose something by removing it? can we tell gacutil not to create it?





Comment 8


Pacho Ramos






          2010-07-05 10:42:21 UTC
        

(In reply to comment #7)
> gacutil may or may not create (@dotnet: please investigate) a directory .wapi
> in ${T} ...
> is that .wapi directory important in any way? do we lose something by removing
> it? can we tell gacutil not to create it?
> 

I don't think it's important to preserve it in this case (at least, this is what I think after reading "mono" manual page and searching by "wapi"), also, we could maybe set MONO_SHARED_DIR to a different place. 

Looking at dev-lang/mono ebuilds, seems that HOME is being set to "${T}/home" for running tests and MONO_REGISTRY_PATH="${T}/registry"... but I think that we don't need that and simply removing the directory once gacutil runs is good enough




Comment 9


Pacho Ramos






          2010-09-07 15:55:53 UTC
        

(In reply to comment #8)
> Looking at dev-lang/mono ebuilds, seems that HOME is being set to "${T}/home"
> for running tests and MONO_REGISTRY_PATH="${T}/registry"... but I think that we
> don't need that and simply removing the directory once gacutil runs is good
> enough
> 

And,then, I think we can close this









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

