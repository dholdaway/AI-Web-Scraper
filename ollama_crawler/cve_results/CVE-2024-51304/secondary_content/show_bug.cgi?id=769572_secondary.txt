Title: 769572 – dist-kernel update only (re)builds kernel-module packages that were not themselves updateable
URL: https://bugs.gentoo.org/show_bug.cgi?id=769572

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 769572
dist-kernel update only (re)builds kernel-module packages that were not themselves updateable
Last modified: 2021-02-08 19:42:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 769572 
      - dist-kernel update only (re)builds kernel-module packages that were not themselves updateable


Summary:
dist-kernel update only (re)builds kernel-module packages that were not thems...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-02-08 18:31 UTC by Kobboi





      Modified:
    
2021-02-08 19:42 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ionen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kobboi





          2021-02-08 18:31:32 UTC
        

First seen this morning on my work system, but disregarded as I had other things to do (so I just rebuilt nvidia-drivers from a console).

Now seeing the same happen at home:

  (virtual/dist-kernel-5.10.14:0/5.10.14::gentoo, ebuild scheduled for merge) causes rebuilds for:
    (net-misc/openvswitch-2.14.1:0/0::gentoo, ebuild scheduled for merge)
    (app-emulation/virtualbox-modules-6.1.18:0/6.1::gentoo, ebuild scheduled for merge)

If I continue, I will get a nvidia-drivers for gentoo-kernel-5.10.13, followed by an upgrade to gentoo-kernel-5.10.14, followed by a rebuild of openvswitch and virtualbox-modules. If I then reboot, I have no graphical user interface.


Reproducible: Always




Comment 1


Kobboi





          2021-02-08 18:32:23 UTC
        

 * IMPORTANT: 1 news items need reading for repository 'gentoo'.
 * Use eselect news read to view new items.

[ebuild  r  U ] dev-lisp/sbcl-2.1.1 [2.1.0] USE="threads unicode zlib -debug -doc -pax_kernel -source" 
[ebuild   R   ] net-misc/curl-7.74.0-r4  USE="ftp http2 imap ipv6 openssl pop3 progress-meter samba smtp ssl tftp -adns -alt-svc -brotli -gnutls -gopher -hsts -idn -kerberos -ldap -mbedtls -metalink (-nghttp3) -nss -quiche -rtmp -ssh -sslv3% -static-libs -telnet -test -threads (-winssl) -zstd" ABI_X86="(64) -32 (-x32)" CURL_SSL="openssl -gnutls -mbedtls -nss (-winssl)" 
[ebuild     U ] dev-libs/elfutils-0.183 [0.182] USE="bzip2 lzma nls utils -static-libs -test (-threads) -valgrind -zstd" ABI_X86="32 (64) (-x32)" 
[ebuild     U ] dev-python/colorama-0.4.4 [0.4.3-r1] USE="-examples -test" PYTHON_TARGETS="python3_8 -pypy3 -python3_7 -python3_9" 
[ebuild     U ] dev-python/cryptography-3.3.2 [3.3.1] USE="-idna (-libressl) -test" PYTHON_TARGETS="python3_7 python3_8 -pypy3 -python3_9" 
[ebuild     U ] dev-python/peewee-3.14.1 [3.14.0] USE="-doc -examples -test" PYTHON_TARGETS="python3_8 -python3_7 -python3_9" 
[ebuild     U ] dev-python/pyyaml-5.4.1 [5.3.1-r1] USE="libyaml -examples -test" PYTHON_TARGETS="python3_8 -pypy3 -python3_7 -python3_9" 
[ebuild     U ] dev-python/boto3-1.17.3 [1.16.63] USE="-doc -test" PYTHON_TARGETS="python3_8 -python3_7 -python3_9" 
[ebuild  NS   ] sys-kernel/gentoo-kernel-5.10.14 [5.10.13] USE="initramfs -debug -savedconfig -test" 
[ebuild  r  U ] virtual/dist-kernel-5.10.14 [5.10.13]
[ebuild  rR   ] net-misc/openvswitch-2.14.1  USE="dist-kernel ssl -debug -modules -monitor" PYTHON_TARGETS="python3_7 python3_8 -python3_9" 
[ebuild  rR   ] app-emulation/virtualbox-modules-6.1.18  USE="dist-kernel -pax_kernel" 
[ebuild     U ] sci-libs/gdal-3.2.1-r1 [3.2.1] USE="aux-xml gif jpeg lzma pdf png -armadillo -curl -debug (-doc) -fits -geos -gml -hdf5 -java -jpeg2k -mdb -mysql -netcdf -odbc -ogdi -opencl -oracle -perl -postgres -python -spatialite -sqlite -threads -webp -xls -zstd" PYTHON_TARGETS="python3_8 -python3_7 -python3_9" 
[ebuild     U ] x11-drivers/nvidia-drivers-460.39-r1 [460.27.04] USE="X dist-kernel driver kms multilib tools uvm wayland -compat -static-libs (-gtk3%*) (-libglvnd%*)" ABI_X86="32 (64) (-x32)" 
[ebuild     U ] app-misc/gnote-3.38.1 [3.36.2] USE="-debug" 
[ebuild     U ] media-gfx/darktable-3.4.1 [3.4.0-r1] USE="colord cups gnome-keyring nls openmp -avif -doc -flickr -geolocation -gmic -gphoto2 -graphicsmagick -jpeg2k -kwallet -lto -lua -opencl -openexr -test -tools -webp" CPU_FLAGS_X86="sse3" L10N="-af -cs -de -es -fi -fr -he -hu -it -pl -pt-BR -ru -sk -sl" LUA_SINGLE_TARGET="lua5-3" 
[ebuild  rR   ] media-gfx/inkscape-1.0.2  USE="cdr dbus exif jpeg lcms openmp spell -dia -graphicsmagick -imagemagick -inkjar (-jemalloc) -postscript -static-libs -svg2 -visio -wpg" PYTHON_SINGLE_TARGET="python3_8 -python3_7 -python3_9" 
[ebuild     U ] www-apps/cgit-1.2.3-r200 [1.2.3-r100] USE="highlight lua -doc -test -vhosts (-libressl%)" LUA_SINGLE_TARGET="lua5-1 -lua5-2 -luajit" PYTHON_SINGLE_TARGET="python3_8%* -python3_7% -python3_9%" 
[ebuild     U ] dev-util/gnome-builder-3.38.2 [3.38.1] USE="clang devhelp git glade gtk-doc spell sysprof -doc -test" PYTHON_SINGLE_TARGET="python3_8 -python3_7" 
[ebuild  rR   ] sci-mathematics/maxima-5.44.0  USE="X nls unicode -clisp -clozurecl (-cmucl) -ecls -emacs -gcl -sbcl -test -tk" L10N="-de -es -pt -pt-BR" 
[ebuild     U ] x11-plugins/purple-facebook-20190113-r1 [20190113]
[ebuild     U ] sci-mathematics/wxmaxima-21.01.0 [20.12.2]
[ebuild     U ] kde-frameworks/kio-5.78.0-r1 [5.78.0] USE="X acl kwallet -debug -designer -doc -handbook -kerberos -test" 
[ebuild     U ] dev-qt/qtwebengine-5.15.2_p20210205 [5.15.2] USE="alsa pulseaudio system-ffmpeg system-icu widgets -bindist -debug -designer -geolocation -kerberos -test" 
[ebuild     U ] www-client/firefox-85.0.1 [85.0-r1] USE="clang dbus gmp-autoupdate hwaccel openh264 pulseaudio screencast system-av1 system-harfbuzz system-icu system-jpeg system-libevent system-libvpx system-webp wayland -debug -eme-free -geckodriver -hardened -jack -lto -pgo (-selinux) -wifi" L10N="-ach -af -an -ar -ast -az -be -bg -bn -br -bs -ca -ca-valencia -cak -cs -cy -da -de -dsb -el -en-CA -en-GB -eo -es-AR -es-CL -es-ES -es-MX -et -eu -fa -ff -fi -fr -fy -ga -gd -gl -gn -gu -he -hi -hr -hsb -hu -hy -ia -id -is -it -ja -ka -kab -kk -km -kn -ko -lij -lt -lv -mk -mr -ms -my -nb -ne -nl -nn -oc -pa -pl -pt-BR -pt-PT -rm -ro -ru -si -sk -sl -son -sq -sr -sv -ta -te -th -tl -tr -trs -uk -ur -uz -vi -xh -zh-CN -zh-TW" 

The following packages are causing rebuilds:

  (dev-lisp/sbcl-2.1.1:0/2.1.1::gentoo, ebuild scheduled for merge) causes rebuilds for:
    (sci-mathematics/maxima-5.44.0:0/0::gentoo, ebuild scheduled for merge)
  (virtual/dist-kernel-5.10.14:0/5.10.14::gentoo, ebuild scheduled for merge) causes rebuilds for:
    (net-misc/openvswitch-2.14.1:0/0::gentoo, ebuild scheduled for merge)
    (app-emulation/virtualbox-modules-6.1.18:0/6.1::gentoo, ebuild scheduled for merge)




Comment 2


Ionen Wolkens






          2021-02-08 18:40:23 UTC
        

But isn't nvidia-drivers being built after the kernel in this example? It would be for 5.10.14




Comment 3


Kobboi





          2021-02-08 19:41:56 UTC
        

It is. I don't know what happened. Closing as WORKSFORME for now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

