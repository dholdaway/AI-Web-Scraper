Title: 551404 – sys-devel/gcc-4.9.2 segfaults on various builds
URL: https://bugs.gentoo.org/show_bug.cgi?id=551404

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 551404
sys-devel/gcc-4.9.2 segfaults on various builds
Last modified: 2016-05-12 20:05:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 551404 
      - sys-devel/gcc-4.9.2 segfaults on various builds


Summary:
sys-devel/gcc-4.9.2 segfaults on various builds
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-06-07 02:21 UTC by Timothy Miller





      Modified:
    
2016-05-12 20:05 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



hydrapolic









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timothy Miller





          2015-06-07 02:21:45 UTC
        

I've tried rebuilding the compiler, but it hasn't helped.  GCC 4.9.2 is really unstable and segfaults a lot and consistently.  Considering how critical the compiler is to Gentoo, you may want to block this version so that we use something more stable by default.

One first thing I've noticed it consistently segfaulting on is the infiniband driver in the Linux kernel (4.0.5).  Since I don't need that, I disabled the driver and got the the kernel to compile.  (But does this version of GCC miscompile the kernel in nefarious ways?)

Another one is dev-db/sqlite-3.8.10.2.  

[ebuild     U  ] dev-db/sqlite-3.8.10.2:3::gentoo [3.8.10.1:3::gentoo] USE="readline -debug -doc -icu -secure-delete -static-libs -tcl {-test} -tools" ABI_X86="(64) -32 (-x32)" 0 KiB

The compiler segfaults when compiling here:

/bin/sh ./libtool  --tag=CC   --mode=compile x86_64-pc-linux-gnu-gcc -DPACKAGE_NAME=\"sqlite\" -DPACKAGE_TARNAME=\"sqlite\" -DPACKAGE_VERSION=\"3.8.10.2\" -DPACKAGE_STRING=\"sqlite\ 3.8.10.2\" -DPACKAGE_BUGREPORT=\"http://www.sqlite.org\" -DPACKAGE_URL=\"\" -DPACKAGE=\"sqlite\" -DVERSION=\"3.8.10.2\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_FDATASYNC=1 -DHAVE_USLEEP=1 -DHAVE_LOCALTIME_R=1 -DHAVE_GMTIME_R=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_READLINE=1 -DHAVE_POSIX_FALLOCATE=1 -I.   -DNDEBUG -DSQLITE_ENABLE_API_ARMOR -DSQLITE_ENABLE_COLUMN_METADATA -DSQLITE_ENABLE_DBSTAT_VTAB -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_FTS3_PARENTHESIS -DSQLITE_ENABLE_FTS4 -DSQLITE_ENABLE_RTREE -DSQLITE_ENABLE_STMT_SCANSTATUS -DSQLITE_ENABLE_UNLOCK_NOTIFY -DSQLITE_SOUNDEX -DUSE_PREAD -DUSE_PREAD64 -D_LARGEFILE64_SOURCE -D_REENTRANT=1 -DSQLITE_THREADSAFE=1  -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_RTREE -O2 -march=native -ggdb -pipe -c -o sqlite3.lo sqlite3.c
x86_64-pc-linux-gnu-gcc -DPACKAGE_NAME=\"sqlite\" -DPACKAGE_TARNAME=\"sqlite\" -DPACKAGE_VERSION=\"3.8.10.2\" -DPACKAGE_STRING=\"sqlite\ 3.8.10.2\" -DPACKAGE_BUGREPORT=\"http://www.sqlite.org\" -DPACKAGE_URL=\"\" -DPACKAGE=\"sqlite\" -DVERSION=\"3.8.10.2\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_FDATASYNC=1 -DHAVE_USLEEP=1 -DHAVE_LOCALTIME_R=1 -DHAVE_GMTIME_R=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_READLINE=1 -DHAVE_POSIX_FALLOCATE=1 -I.   -DNDEBUG -DSQLITE_ENABLE_API_ARMOR -DSQLITE_ENABLE_COLUMN_METADATA -DSQLITE_ENABLE_DBSTAT_VTAB -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_FTS3_PARENTHESIS -DSQLITE_ENABLE_FTS4 -DSQLITE_ENABLE_RTREE -DSQLITE_ENABLE_STMT_SCANSTATUS -DSQLITE_ENABLE_UNLOCK_NOTIFY -DSQLITE_SOUNDEX -DUSE_PREAD -DUSE_PREAD64 -D_LARGEFILE64_SOURCE -D_REENTRANT=1 -DSQLITE_THREADSAFE=1  -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_RTREE -O2 -march=native -ggdb -pipe -c -o sqlite3-shell.o `test -f 'shell.c' || echo './'`shell.c
libtool: compile:  x86_64-pc-linux-gnu-gcc -DPACKAGE_NAME=\"sqlite\" -DPACKAGE_TARNAME=\"sqlite\" -DPACKAGE_VERSION=\"3.8.10.2\" "-DPACKAGE_STRING=\"sqlite 3.8.10.2\"" -DPACKAGE_BUGREPORT=\"http://www.sqlite.org\" -DPACKAGE_URL=\"\" -DPACKAGE=\"sqlite\" -DVERSION=\"3.8.10.2\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_FDATASYNC=1 -DHAVE_USLEEP=1 -DHAVE_LOCALTIME_R=1 -DHAVE_GMTIME_R=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_READLINE=1 -DHAVE_POSIX_FALLOCATE=1 -I. -DNDEBUG -DSQLITE_ENABLE_API_ARMOR -DSQLITE_ENABLE_COLUMN_METADATA -DSQLITE_ENABLE_DBSTAT_VTAB -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_FTS3_PARENTHESIS -DSQLITE_ENABLE_FTS4 -DSQLITE_ENABLE_RTREE -DSQLITE_ENABLE_STMT_SCANSTATUS -DSQLITE_ENABLE_UNLOCK_NOTIFY -DSQLITE_SOUNDEX -DUSE_PREAD -DUSE_PREAD64 -D_LARGEFILE64_SOURCE -D_REENTRANT=1 -DSQLITE_THREADSAFE=1 -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_RTREE -O2 -march=native -ggdb -pipe -c sqlite3.c  -fPIC -DPIC -o .libs/sqlite3.o
x86_64-pc-linux-gnu-gcc -DPACKAGE_NAME=\"sqlite\" -DPACKAGE_TARNAME=\"sqlite\" -DPACKAGE_VERSION=\"3.8.10.2\" -DPACKAGE_STRING=\"sqlite\ 3.8.10.2\" -DPACKAGE_BUGREPORT=\"http://www.sqlite.org\" -DPACKAGE_URL=\"\" -DPACKAGE=\"sqlite\" -DVERSION=\"3.8.10.2\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_FDATASYNC=1 -DHAVE_USLEEP=1 -DHAVE_LOCALTIME_R=1 -DHAVE_GMTIME_R=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_READLINE=1 -DHAVE_POSIX_FALLOCATE=1 -I.   -DNDEBUG -DSQLITE_ENABLE_API_ARMOR -DSQLITE_ENABLE_COLUMN_METADATA -DSQLITE_ENABLE_DBSTAT_VTAB -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_FTS3_PARENTHESIS -DSQLITE_ENABLE_FTS4 -DSQLITE_ENABLE_RTREE -DSQLITE_ENABLE_STMT_SCANSTATUS -DSQLITE_ENABLE_UNLOCK_NOTIFY -DSQLITE_SOUNDEX -DUSE_PREAD -DUSE_PREAD64 -D_LARGEFILE64_SOURCE -D_REENTRANT=1 -DSQLITE_THREADSAFE=1  -DSQLITE_ENABLE_FTS3 -DSQLITE_ENABLE_RTREE -O2 -march=native -ggdb -pipe -c -o sqlite3-sqlite3.o `test -f 'sqlite3.c' || echo './'`sqlite3.c
sqlite3.c: In function ‘walIndexReadHdr’:
sqlite3.c:50984:1: internal compiler error: Segmentation fault
 }
 ^




Comment 1


Tomáš Mózes





          2015-06-07 06:46:12 UTC
        

Can you please provide more information about your hardware and settings (emerge --info etc.)?

I've been using gcc 4.9.2 on ~amd64 without any problems so it may be related to your environment/architecture/settings.




Comment 2


Timothy Miller





          2015-06-07 12:35:50 UTC
        

$ emerge --info
Portage 2.2.20 (python 2.7.10-final-0, default/linux/amd64/13.0, gcc-4.8.4, glibc-2.20-r2, 4.0.5-gentoo x86_64)
=================================================================
System uname: Linux-4.0.5-gentoo-x86_64-Intel-R-_Core-TM-_i5-4430_CPU_@_3.00GHz-with-gentoo-2.2
KiB Mem:     3897176 total,   1135924 free
KiB Swap:   33554428 total,  32840816 free
Timestamp of repository gentoo: Sun, 07 Jun 2015 00:30:01 +0000
sh bash 4.3_p39
ld GNU ld (Gentoo 2.25 p1.2) 2.25
app-shells/bash:          4.3_p39::gentoo
dev-lang/perl:            5.20.2-r1::gentoo
dev-lang/python:          2.7.10::gentoo, 3.3.5-r1::gentoo, 3.4.1::gentoo
dev-util/cmake:           3.2.3::gentoo
dev-util/pkgconfig:       0.28-r3::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.16.4::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.69-r1::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25-r1::gentoo
sys-devel/gcc:            4.8.4::gentoo, 4.9.2::gentoo
sys-devel/gcc-config:     1.8::gentoo
sys-devel/libtool:        2.4.6-r1::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.0::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -ggdb -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=native -ggdb -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--jobs=4"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://mirror.leaseweb.com/gentoo/ http://mirror.lug.udel.edu/pub/gentoo/ http://gentoo.mirrors.pair.com/"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="--jobs=2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="-4"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 acl ads amd64 avahi avi avx avx256 berkdb bzip2 cairo caps caps-ng cli cpumining cracklib crypt cxx dbus divx dri dv dvd dvdread encode fame fortran gcj gdbm iconv ipv6 jpeg keymap kvm ldap lm_sensors mjpeg mmx mmxext modules mp3 mpeg multilib ncurses nls nptl ogg openmp pam parse-clocks pcre png python quicktime readline session sse sse2 sse3 ssl subtitles tcpd unicode upcall vorbis winbind xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 avx avx256 avx2 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en en_US" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-4" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby19 ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, USE_PYTHON




Comment 3


Timothy Miller





          2015-06-07 12:39:17 UTC
        

On older hardware, I've had concerns about memory errors causing compiler crashes, but the current hardware has been rock solid.  Another possible culprit is memory corruption due to the fact that I'm using btrfs, which I have found to do weird stuff on rare occasion that makes the system unstable.  In both of those cases, the crashes are random, and reboots generally make the problem go away.  In the cases I'm experiencing, they're 100% consistent.  The compiler always crashes in the same place, regardless of rebooting or even rebuilding gcc.  So we're dealing with genuine compiler bugs here.




Comment 4


Mike Gilbert






          2015-06-07 14:06:27 UTC
        

I don't recall having any similar issues with 4.9.2, so I suspect this has something to do with your system.

In any case, I'm passing this to the toolchain maintainers who may have some idea how to diagnose it.




Comment 5


Timothy Miller





          2015-06-07 14:19:49 UTC
        

Here's another crash when compiling app-text/poppler-0.33.0-r1::gentoo:

In file included from /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.4/include/g++-v4/bits/stl_algobase.h:61:0,
                 from /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.4/include/g++-v4/bits/stl_tree.h:61,
                 from /usr/lib/gcc/x86_64-pc-linux-gnu/4.8.4/include/g++-v4/set:60,
                 from /var/tmp/portage/app-text/poppler-0.33.0-r1/work/poppler-0.33.0/poppler/Object.h:37,
                 from /var/tmp/portage/app-text/poppler-0.33.0-r1/work/poppler-0.33.0/poppler/StructTreeRoot.h:19,
                 from /var/tmp/portage/app-text/poppler-0.33.0-r1/work/poppler-0.33.0/poppler/StructTreeRoot.cc:17:
/usr/lib/gcc/x86_64-pc-linux-gnu/4.8.4/include/g++-v4/bits/cpp_type_traits.h:280:37: internal compiler error: Segmentation fault
     struct __is_floating<long double>
                                     ^
Please submit a full bug report,
with preprocessed source if appropriate.
See <https://bugs.gentoo.org/> for instructions.
CMakeFiles/poppler.dir/build.make:1572: recipe for target 'CMakeFiles/poppler.dir/poppler/StructTreeRoot.cc.o' failed
make[2]: *** [CMakeFiles/poppler.dir/poppler/StructTreeRoot.cc.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory '/var/tmp/portage/app-text/poppler-0.33.0-r1/work/poppler-0.33.0_build'
CMakeFiles/Makefile2:60: recipe for target 'CMakeFiles/poppler.dir/all' failed
make[1]: *** [CMakeFiles/poppler.dir/all] Error 2
make[1]: Leaving directory '/var/tmp/portage/app-text/poppler-0.33.0-r1/work/poppler-0.33.0_build'
Makefile:126: recipe for target 'all' failed
make: *** [all] Error 2
 * ERROR: app-text/poppler-0.33.0-r1::gentoo failed (compile phase):
 *   emake failed




Comment 6


Timothy Miller





          2015-06-07 14:21:45 UTC
        

It occurred to me that with -march-native, you don't know what arch I'm compiling for.  Here is the CPU info for the 4th core of my 3.0GHz Haswell Core i5:

processor       : 3
vendor_id       : GenuineIntel
cpu family      : 6
model           : 60
model name      : Intel(R) Core(TM) i5-4430 CPU @ 3.00GHz
stepping        : 3
microcode       : 0x9
cpu MHz         : 900.117
cache size      : 6144 KB
physical id     : 0
siblings        : 4
core id         : 3
cpu cores       : 4
apicid          : 6
initial apicid  : 6
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 fma cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm ida arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid xsaveopt
bugs            :
bogomips        : 5986.04
clflush size    : 64
cache_alignment : 64
address sizes   : 39 bits physical, 48 bits virtual
power management:




Comment 7


SpanKY






          2015-06-07 18:01:13 UTC
        

start with setting MAKEOPTS=-j1.  then pick one package that fails.  try emerging it multiple times.  does it fail in the exact same spot every time ?

review `dmesg` to see if there's anything interesting there.




Comment 8


Timothy Miller





          2015-06-09 23:22:10 UTC
        

Rats.

I don't know what changed.  As soon as I tried your suggestion (-jobs=1), both sqlite and poppler were able to compile just fine.  So I put the parallel build and parallel compile flags back in, but they still compile just fine.  I have no idea what's changed, because they did indeed used to always crash the compiler in the same spot.  Was I perhaps running out of space in the build directory?  No idea.  

Another thing that always crashed the compiler was the infiniband module in the kernel.  I'll try that again.




Comment 9


Timothy Miller





          2015-06-10 15:15:33 UTC
        

This is with MAKEOPTS="-j5" in genkernel.conf:

* ERROR: Failed to compile the "bzImage" target...
* 
* -- Grepping log... --
* 
*  CC      drivers/pci/remove.o
*  CC      fs/udf/misc.o
*  CC      fs/timerfd.o
*  CC      fs/udf/udftime.o
*net/netlink/af_netlink.c: In function ‘netlink_release’:
*net/netlink/af_netlink.c:1277:1: internal compiler error: Segmentation fault
*--
* ^

After I comment that out, this happens:

*  CC [M]  net/netfilter/nf_conntrack_standalone.o
*  CC [M]  net/ipv6/udplite.o
*  CC [M]  net/ipv6/raw.o
*  CC [M]  net/netfilter/nf_conntrack_expect.o
*net/ipv6/raw.c: In function ‘raw6_icmp_error’:
*net/ipv6/raw.c:385:1: internal compiler error: Segmentation fault
* }
* ^

I'm going to run the latter again and see about getting you a copy of the kernel config.




Comment 10


SpanKY






          2015-06-10 15:51:08 UTC
        

(In reply to Timothy Miller from comment #9)

run with MAKEOPTS=-j1.  if it still fails, go into the build dir and run by hand:
  make net/ipv6/raw.o

if that still fails, run:
  make V=1 net/ipv6/raw.o
  make net/ipv6/raw.i

and post the full output and the raw.i as an attachment




Comment 11


Timothy Miller





          2015-06-10 16:01:01 UTC
        

I ran that last compile again, and it went through just fine.  Note that there's no disk space concern here, since the kernel is on my root drive.

dmesg says nothing interesting.

So basically, I have this compiler crashing randomly.  The memory passes memtest86 (not to say that that's anything conclusive).  The only variable that I know of that has changed that has lead up to these compiler crashes is the GCC version.  If the compiler has an internal memory corruption bug, you'd still generally expect it to be deterministic, but I'm only guessing.




Comment 12


SpanKY






          2016-05-12 20:05:17 UTC
        

you can try 4.9.3 now as that's the stable one









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

