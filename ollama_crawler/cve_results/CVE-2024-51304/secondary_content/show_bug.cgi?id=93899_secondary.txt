Title: 93899 – Modules init script fails, it can't find the modules during startup
URL: https://bugs.gentoo.org/show_bug.cgi?id=93899

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 93899
Modules init script fails, it can't find the modules during startup
Last modified: 2006-05-03 19:26:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 93899 
      - Modules init script fails, it can't find the modules during startup


Summary:
Modules init script fails, it can't find the modules during startup
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-25 01:53 UTC by Timo A. Hummel





      Modified:
    
2006-05-03 19:26 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timo A. Hummel





          2005-05-25 01:53:35 UTC
        

I've setup the box like my other 40+ gentoo installs I've made so far (at least
I hope).

I usually build a new kernel using genkernel --udev all, and then place the
modules I need into /etc/modules.autoload.d/kernel-2.6. During boot, the modules
init script complains that it can't find the modules specified. I tried (for
sanity) to put the modules into /etc/modules.autoload.d/kernel-2.6 with their
full path, it still complains.

When I login, a modprobe works, as well as an insmod with the full path,
however, just an insmod <modulename> doesn't work. Also the modules init script
works now right after login. The output of uname -a is correct, and ls
/usr/lib/`uname -r`/ shows the correct directory contents.


Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


SpanKY






          2005-05-25 12:48:10 UTC
        

- no `emerge info` provided
- no mention of what version of module-init-tools
- no mention of actual modules and error messages




Comment 2


Timo A. Hummel





          2005-05-25 13:31:21 UTC
        

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.4.20041102-r1, 2.6.11-gentoo-r9 i686)
=================================================================
System uname: 2.6.11-gentoo-r9 i686 Pentium III (Katmai)
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, May 19 2005, 02:56:58)]
distcc 2.16 i386-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -mcpu=i686 -fomit-frame-pointer"
CHOST="i386-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=i686 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts crypt cups curl emboss
encode esd fam foomaticdb fortran gdbm gif gnome gpm gtk gtk2 imlib ipv6 jpeg
kde libg++ libwww mad mikmod mod_php motif mp3 mpeg mysql ncurses nls ogg
oggvorbis opengl oss pam pdflib perl png python qt quicktime readline samba sdl
spell ssl svga tcpd tiff truetype truetype-fonts type1-fonts vorbis xml2 xmms xv
zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY


sys-apps/module-init-tools: 3.0-r2

Example modules: mii, 3c59x (any module applies also)

* Loading module 3c59x
* Failed to load module 3c59x

Full path:

* Loading module /lib/modules/2.6.11-gentoo-r9/kernel/drivers/net/mii.ko
* Failed to load module /lib/modules/2.6.11-gentoo-r9/kernel/drivers/net/mii.ko




Comment 3


Timo A. Hummel





          2005-05-25 13:32:01 UTC
        

note to the info above:

The modules exist and are in place.




Comment 4


SpanKY






          2005-05-25 13:46:18 UTC
        

verify issue still exists with baselayout-1.11.12 and re-open if it does




Comment 5


Timo A. Hummel





          2005-05-25 14:21:37 UTC
        

baselayout-1.11.12 is masked on my system. Should I emerge anyways?




Comment 6


SpanKY






          2005-05-25 15:13:36 UTC
        

it's up to you

we're not supporting 1.9.x anymore




Comment 7


Timo A. Hummel





          2005-05-26 02:34:16 UTC
        

The issue still exists with baselayout-1.11.12-r2








Comment 8


SpanKY






          2005-05-26 08:02:10 UTC
        

`insmod <modulename>` isnt supposed to work, that's the point of `modprobe`

is there anything useful in `demsg` ?  if not, edit /etc/init.d/modules and
remove the '-q' from the modprobe command and see if that shows anything useful




Comment 9


SpanKY






          2006-05-03 19:26:24 UTC
        

old bug









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

