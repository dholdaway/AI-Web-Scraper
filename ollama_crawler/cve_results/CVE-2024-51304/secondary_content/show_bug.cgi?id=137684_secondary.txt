Title: 137684 – nvu can't compile using gcc4 and freetyp-2.1.10 (or above)
URL: https://bugs.gentoo.org/show_bug.cgi?id=137684

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137684
nvu can't compile using gcc4 and freetyp-2.1.10 (or above)
Last modified: 2006-06-25 04:51:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137684 
      - nvu can't compile using gcc4 and freetyp-2.1.10 (or above)


Summary:
nvu can't compile using gcc4 and freetyp-2.1.10 (or above)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-22 21:17 UTC by Zhang Le (RETIRED)





      Modified:
    
2006-06-25 04:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




this patch could solve the problem

              (nvu-1.0-r4.gcc4.FT_Vector.patch,1.80 KB,
                patch)

            
2006-06-22 21:18 UTC,

            Zhang Le (RETIRED)




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zhang Le (RETIRED)






          2006-06-22 21:17:17 UTC
        

I have included a patch, which can solve this problem.




Comment 1


Zhang Le (RETIRED)






          2006-06-22 21:18:04 UTC
        

Created attachment 89874 [details, diff]
this patch could solve the problem




Comment 2


Jory A. Pratt





          2006-06-23 13:55:57 UTC
        

Emerge info and exact error, then ya can reopen




Comment 3


Zhang Le (RETIRED)






          2006-06-23 23:22:15 UTC
        

(In reply to comment #2)
> Emerge info and exact error, then ya can reopen
> 
If you are maintainer of nvu, I suggest you to try to emerge nvu without this patch, then you can find the problem.
I think gcc4 and freetype 2.1.10(or above) is common.
If you know C++, you can understand the problem just by looking at the patch I provided here.

However, per your request, I attach `emerge info` and error msg here.

$ emerge --info
Portage 2.1.1_pre1-r1 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.4-r3, 2.6.16-nitro-git12 i686)
=================================================================
System uname: 2.6.16-nitro-git12 i686 Intel(R) Pentium(R) M processor 1600MHz
Gentoo Base System version 1.12.1
ccache version 2.4 [enabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r1, 2.17.50.0.2
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/init.d /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache confcache distlocks fixpackages metadata-transfer nodoc parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.gentoo.gr.jp"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1"
LINGUAS="zh_CN"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/got /usr/local/portage /home/zhangle/xgl-coffee"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aac aalib acl acpi alsa apache2 arts avi bash-completion berkdb bitmap-fonts browserplugin bzip2 bzlib cairo caps cdparanoia cdrom chroot cjk cli codecs cpdflib crypt cscope css cups curl curlwrappers dbm dbus dga dio directfb divx4linux dri droproot dts dvd dvdr dvdread emacs emboss encode exif expat fam fax faxonly fb fbcon ffmpeg firefox flac flatfile font-server foomaticdb fpx freetype ftp ftruncate gdbm gif gimp glibc-omitfp gmp gnome gnutls gphoto2 gpm gps graphviz gs gstreamer gtk gtk2 hal iconv id3 idea idn imagemagick imlib imlib2 immqt-bc inline isdnlog java joystick jp2 jpeg jpeg2k kde kqemu lcms libcaca libg++ libwww linguas_zh_CN live lzo lzw lzw-tiff mad matroska mbox md5sum mhash mikmod mime mimencode mjpeg mmap mmx mmxext mozdevelop moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mpeg mpeg4 mplayer mysql ncurses net network nls nptl nptlonly nsplugin ntlm offensive ogg ooo-kde opengl pam pcmcia pcre pda pdf pdfkit pdflib perl png pnp posix pppd python qt quicktime readline real reflection rtc samba sdl session skey sockets socks5 softmmu spell spl sse sse2 ssl svg symlink szip tcpd tetex theora threads tiff timidity truetype truetype-fonts type1 type1-fonts udev unicode usb v4l v4l2 vcd vhosts visualization vnc vorbis win32codecs wma wmf wxwindows xanim xcomposite xinerama xinetd xml xml2 xmlrpc xmms xorg xosd xprint xslt xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_synaptics kernel_linux userland_GNU video_cards_radeon video_cards_fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_RSYNC_EXTRA_OPTS

Error message:
nsType1.cpp:371: error: invalid conversion from 




Comment 4


Zhang Le (RETIRED)






          2006-06-23 23:22:15 UTC
        

(In reply to comment #2)
> Emerge info and exact error, then ya can reopen
> 
If you are maintainer of nvu, I suggest you to try to emerge nvu without this patch, then you can find the problem.
I think gcc4 and freetype 2.1.10(or above) is common.
If you know C++, you can understand the problem just by looking at the patch I provided here.

However, per your request, I attach `emerge info` and error msg here.

$ emerge --info
Portage 2.1.1_pre1-r1 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.4-r3, 2.6.16-nitro-git12 i686)
=================================================================
System uname: 2.6.16-nitro-git12 i686 Intel(R) Pentium(R) M processor 1600MHz
Gentoo Base System version 1.12.1
ccache version 2.4 [enabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r1, 2.17.50.0.2
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/eselect/compiler /etc/gconf /etc/init.d /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache confcache distlocks fixpackages metadata-transfer nodoc parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.gentoo.gr.jp"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1"
LINGUAS="zh_CN"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/got /usr/local/portage /home/zhangle/xgl-coffee"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aac aalib acl acpi alsa apache2 arts avi bash-completion berkdb bitmap-fonts browserplugin bzip2 bzlib cairo caps cdparanoia cdrom chroot cjk cli codecs cpdflib crypt cscope css cups curl curlwrappers dbm dbus dga dio directfb divx4linux dri droproot dts dvd dvdr dvdread emacs emboss encode exif expat fam fax faxonly fb fbcon ffmpeg firefox flac flatfile font-server foomaticdb fpx freetype ftp ftruncate gdbm gif gimp glibc-omitfp gmp gnome gnutls gphoto2 gpm gps graphviz gs gstreamer gtk gtk2 hal iconv id3 idea idn imagemagick imlib imlib2 immqt-bc inline isdnlog java joystick jp2 jpeg jpeg2k kde kqemu lcms libcaca libg++ libwww linguas_zh_CN live lzo lzw lzw-tiff mad matroska mbox md5sum mhash mikmod mime mimencode mjpeg mmap mmx mmxext mozdevelop moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mpeg mpeg4 mplayer mysql ncurses net network nls nptl nptlonly nsplugin ntlm offensive ogg ooo-kde opengl pam pcmcia pcre pda pdf pdfkit pdflib perl png pnp posix pppd python qt quicktime readline real reflection rtc samba sdl session skey sockets socks5 softmmu spell spl sse sse2 ssl svg symlink szip tcpd tetex theora threads tiff timidity truetype truetype-fonts type1 type1-fonts udev unicode usb v4l v4l2 vcd vhosts visualization vnc vorbis win32codecs wma wmf wxwindows xanim xcomposite xinerama xinetd xml xml2 xmlrpc xmms xorg xosd xprint xslt xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_synaptics kernel_linux userland_GNU video_cards_radeon video_cards_fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_RSYNC_EXTRA_OPTS

Error message:
nsType1.cpp:371: error: invalid conversion from int (*)(FT_Vector*, void*) to int (*)(const FT_Vector*, void*)
nsType1.cpp:371: error: invalid conversion from int (*)(FT_Vector*, void*) to int (*)(const FT_Vector*, void*)
nsType1.cpp:371: error: invalid conversion from int (*)(FT_Vector*, FT_Vector*, void*) to int (*)(const FT_Vector*, const FT_Vector*, void*)
nsType1.cpp:371: error: invalid conversion from int (*)(FT_Vector*, FT_Vector*, FT_Vector*, void*) to int (*)(const FT_Vector*, const FT_Vector*, const FT_Vector*, void*)




Comment 5


Jory A. Pratt





          2006-06-24 18:22:47 UTC
        

I have tested on 5 different systems with gcc-4.1.1 and fretype-2.10.1-r2 and all is fine.




Comment 6


Zhang Le (RETIRED)






          2006-06-25 04:51:51 UTC
        

(In reply to comment #4)
> I have tested on 5 different systems with gcc-4.1.1 and fretype-2.10.1-r2 and
> all is fine.
> 
I am sorry, I forget that I have already upgraded freetype to 2.2.1.
This is a api change in freetype 2.2.1.
I should have checked it before I file this bug.
Sorry for the confusion caused.
Should I reopen the bug under this circumstance?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

