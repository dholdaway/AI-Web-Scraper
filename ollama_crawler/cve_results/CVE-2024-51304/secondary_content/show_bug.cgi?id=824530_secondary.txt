Title: 824530 – [TEST] net-irc/weechat-3.3 - ERROR: net-irc/weechat-3.3::gentoo failed (test phase):
URL: https://bugs.gentoo.org/show_bug.cgi?id=824530

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 824530
[TEST] net-irc/weechat-3.3 - ERROR: net-irc/weechat-3.3::gentoo failed (test phase):
Last modified: 2021-11-19 19:02:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 824530 
      - [TEST] net-irc/weechat-3.3 - ERROR: net-irc/weechat-3.3::gentoo failed (test phase):


Summary:
[TEST] net-irc/weechat-3.3 - ERROR: net-irc/weechat-3.3::gentoo failed (test ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Georgy Yakovlev








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2021-11-18 13:58 UTC by Toralf Förster





      Modified:
    
2021-11-19 19:02 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sam









See Also:


754117





Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,14.28 KB,
                text/plain)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,91.14 KB,
                text/plain)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





environment

              (environment,140.92 KB,
                text/plain)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





etc.portage.tar.bz2

              (etc.portage.tar.bz2,20.61 KB,
                application/x-bzip)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





logs.tar.bz2

              (logs.tar.bz2,6.08 KB,
                application/x-bzip)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





net-irc:weechat-3.3:20211118-045646.log

              (net-irc:weechat-3.3:20211118-045646.log,242.89 KB,
                text/plain)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





temp.tar.bz2

              (temp.tar.bz2,40.14 KB,
                application/x-bzip)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





tests.tar.bz2

              (tests.tar.bz2,80.75 KB,
                application/x-bzip)

            
2021-11-18 13:58 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2021-11-18 13:58:28 UTC
        

[299/299] : && /usr/bin/x86_64-pc-linux-gnu-g++ -fsigned-char -Wall -Wextra -Wl,-O1 -Wl,--as-needed -Wl,--defsym=__gentoo_check_ldflags__=0    -rdynamic tests/CMakeFiles/tests.dir/tests.cpp.o -o tests/tests  src/core/libweechat_core.a  src/plugins/libweechat_plugins.a  src/gui/libweechat_gui_common.a  src/gui/curses/headless/libweechat_gui_headless.a  src/gui/curses/headless/libweechat_ncurses_fake.a  tests/libweechat_unit_tests_core.a  src/core/libweechat_core.a  -lgcrypt -lgpg-error  -lgnutls  -ldl  -lcurl  -lstdc++  -lCppUTest  -lCppUTestExt  -rdynamic && :
>>> Source compiled.
>>> Test phase: net-irc/weechat-3.3
 * en_US.UTF-8 locale is required to run weechat's src_test
 * ERROR: net-irc/weechat-3.3::gentoo failed (test phase):
 *   required locale missing
 * 
 * Call stack:
 *     ebuild.sh, line 127:  Called src_test

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1-j4_test-20211117-040043

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-11.2.0 *
clang version 13.0.0
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/13/bin
/usr/lib/llvm/13
13.0.0
Python 3.9.9
Available Ruby profiles:
  [1]   ruby26 (with Rubygems)
  [2]   ruby27 (with Rubygems)
  [3]   ruby30 (with Rubygems) *
Available Rust versions:
  [1]   rust-1.56.1 *
The Glorious Glasgow Haskell Compilation System, version 8.10.4
php cli:

  HEAD of ::gentoo
commit 04fee27d97512110f79ed487ecd6ab5f2d310dd9
Author: Repository mirror & CI <repomirrorci@gentoo.org>
Date:   Thu Nov 18 04:21:35 2021 +0000

    2021-11-18 04:21:33 UTC

emerge -qpvO net-irc/weechat
[ebuild  N    ] net-irc/weechat-3.3  USE="alias buflist charset exec fifo fset irc logger nls perl python relay scripts spell test trigger typing xfer -doc -guile -lua -man -php -ruby (-selinux) -tcl" LUA_SINGLE_TARGET="lua5-1 -lua5-3 -lua5-4" PYTHON_SINGLE_TARGET="python3_9 -python3_8"




Comment 1


Toralf Förster






          2021-11-18 13:58:30 UTC
        

Created attachment 752510 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2021-11-18 13:58:31 UTC
        

Created attachment 752514 [details]
emerge-history.txt




Comment 3


Toralf Förster






          2021-11-18 13:58:33 UTC
        

Created attachment 752518 [details]
environment




Comment 4


Toralf Förster






          2021-11-18 13:58:34 UTC
        

Created attachment 752522 [details]
etc.portage.tar.bz2




Comment 5


Toralf Förster






          2021-11-18 13:58:35 UTC
        

Created attachment 752526 [details]
logs.tar.bz2




Comment 6


Toralf Förster






          2021-11-18 13:58:37 UTC
        

Created attachment 752530 [details]
net-irc:weechat-3.3:20211118-045646.log




Comment 7


Toralf Förster






          2021-11-18 13:58:38 UTC
        

Created attachment 752534 [details]
temp.tar.bz2




Comment 8


Toralf Förster






          2021-11-18 13:58:40 UTC
        

Created attachment 752538 [details]
tests.tar.bz2




Comment 9


Georgy Yakovlev







          2021-11-18 23:22:21 UTC
        

Hi,

it's not a failure


 * en_US.UTF-8 locale is required to run weechat's src_test
 * ERROR: net-irc/weechat-3.3::gentoo failed (test phase):
 *   required locale missing


I made test fail early if it's not detected. I thought it'd be more fair than skipping src_test completely.

https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=8ebba02fcf0950fbf37ee25e8dda5454f2bf500e


I would suggest including this locale for testing, unless you want to check for locale related issues of course: https://wiki.gentoo.org/wiki/User:Sam/Arch_testing




Comment 10


Toralf Förster






          2021-11-19 15:49:26 UTC
        

will add


net-irc/weechat                     L10N: en_US.UTF-8

to use flags for test images - thx !




Comment 11


Sam James









          2021-11-19 19:02:06 UTC
        

(In reply to Toralf Förster from comment #10)
> will add
> 
> 
> net-irc/weechat                     L10N: en_US.UTF-8
> 
> to use flags for test images - thx !

Need it as a locale, not L10N, but thank you for adding it!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

