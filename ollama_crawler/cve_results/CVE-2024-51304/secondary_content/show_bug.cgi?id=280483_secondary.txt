Title: 280483 – app-office/openoffice-3.1.0-r1: compilation failed with gcc 4.4
URL: https://bugs.gentoo.org/show_bug.cgi?id=280483

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 280483
app-office/openoffice-3.1.0-r1: compilation failed with gcc 4.4
Last modified: 2009-08-19 04:12:20 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 280483 
      - app-office/openoffice-3.1.0-r1: compilation failed with gcc 4.4


Summary:
app-office/openoffice-3.1.0-r1: compilation failed with gcc 4.4
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Office Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-08-05 18:07 UTC by disconnect





      Modified:
    
2009-08-19 04:12 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



Adrian.Bassett
marcin.deranek









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


disconnect





          2009-08-05 18:07:04 UTC
        

Trying to compile app-office/openoffice-3.1.0-r1 on my 100% ~amd64 system.
gcc version is 4.4.1 and glibc version is 2.10.1

Reproducible: Always

Steps to Reproduce:
MAKEOPTS=-j1 emerge openoffice
...
<wait few hours>
...
javavm.uno.so
javaloader.uno.so
stocservices.uno.so
sh: line 1:  9178 Segmentation fault      /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/bin/regcomp -register -r /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/instsetoo_native/util/OpenOffice//gid_Starregistry_Services_Rdb_servicesrdb/en-US_ru_inprogress_1/services.rdb -c 'file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libtextconversiondlgslx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libtklx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libtvhlp1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucb1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucpchelp1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucpdav1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucpfile1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucpftp1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucphier1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libucppkg1.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libunordflx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libunoxmllx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/updatefeed.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libupdchklx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libutllx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libuuilx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/vclcanvas.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/vbaeventslx.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libmsformslx.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libvbaobjlx.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libvbaswobjlx.uno.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libvcllx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libwpgimportlx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/liblwpftlx.so;file:///var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/lib/libwpftlx.so' -wop='vnd.sun.star.expand:$OOO_BASE_DIR/program/' 2>&1
... cleaning the output tree ...
... removing directory /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/instsetoo_native/util/OpenOffice//zip/en-US_ru ...
... removing directory /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/instsetoo_native/util/OpenOffice//gid_Starregistry_Services_Rdb_servicesrdb/en-US_ru_witherror_1 ...

**************************************************
ERROR: ERROR: Could not register all components for file services.rdb (gid_Starregistry_Services_Rdb)!
in function: create_services_rdb
**************************************************

**************************************************
ERROR: Saved logfile: /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/instsetoo_native/util/OpenOffice//logging/en-US_ru/log_OOO310_en-US_ru.log
**************************************************
Wed Aug  5 21:09:47 2009 (00:23 min.)
Failed to install: No such file or directory at ./ooinstall line 153.
make: *** [install] Error 1
 * 
 * ERROR: app-office/openoffice-3.1.0-r1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_install
 *             environment, line 5265:  Called die
 * The specific snippet of code:
 *       make DESTDIR="${D}" install || die "Installation failed!";
 *  The die message:
 *   Installation failed!
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/app-office/openoffice-3.1.0-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-office/openoffice-3.1.0-r1/temp/environment'.
 * 
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.14"
JAVACFLAGS="-source 1.5 -target 1.5" COMPILER=""
and of course, the output of emerge --info
 * QA Notice: Unrecognized configure options:
 * 
 * 	configure: WARNING: unrecognized options: --with-system-cairo, --enable-pam, --with-java
 * 	configure: WARNING: unrecognized options: --with-system-cairo, --enable-pam, --with-java
 * 	configure: WARNING: unrecognized options: --with-system-rhino, --with-rhino-jar, --enable-gstreamer, --without-writer2latex, --with-system-redland, --with-distro, --with-arch, --with-srcdir, --with-num-cpus, --without-binsuffix, --with-installed-ooo-dirname, --with-tag, --with-drink, --enable-strip, --disable-access, --disable-post-install-scripts, --enable-extensions
 * 	configure: WARNING: unrecognized options: --with-system-rhino, --with-rhino-jar, --enable-gstreamer, --without-writer2latex, --with-system-redland, --with-distro, --with-arch, --with-srcdir, --with-num-cpus, --without-binsuffix, --with-installed-ooo-dirname, --with-tag, --with-drink, --enable-strip, --disable-access, --disable-post-install-scripts, --enable-extensions




GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.14"
JAVACFLAGS="-source 1.5 -target 1.5" COMPILER=""

disconnect ~ # emerge --info
Portage 2.1.6.13 (default/linux/amd64/2008.0/desktop, gcc-4.4.1, glibc-2.10.1-r0, 2.6.28-gentoo-r6 x86_64)
=================================================================
System uname: Linux-2.6.28-gentoo-r6-x86_64-AMD_Phenom-tm-_9550_Quad-Core_Processor-with-gentoo-2.0.1
Timestamp of tree: Wed, 05 Aug 2009 09:45:01 +0000
app-shells/bash:     4.0_p28
dev-java/java-config: 2.1.8-r1
dev-lang/python:     2.6.2-r1, 3.1
dev-util/cmake:      2.6.4-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.0
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.28-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.yandex.ru/gentoo-distfiles"
LANG="ru_RU.utf8"
LC_ALL="ru_RU.utf8"
LDFLAGS="-Wl,-O1"
LINGUAS="en ru"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://mirror.yandex.ru/gentoo-portage"
USE="3dnow X a52 aac acl acpi alsa amd64 audiofile avahi bash-completion berkdb branding bzip2 cairo caps cdda cddb cdr cli consolekit cracklib crypt css cups curl curlwrappers cvs dbus dga directfb djvu dri dts dv dvd dvdr dvdread eds emboss encode evo exif expat fam fbcon ffmpeg fftw firefox flac ftp gdbm gif gmp gnome gnome-keyring gnutls gphoto2 gpm graphviz gstreamer gtk hal iconv idn imagemagick imlib ipod isdnlog java java5 java6 javascript jbig jingle jpeg jpeg2k kerberos lame lcms ldap libnotify libsamplerate lm_sensors lzo mad matroska mikmod mmap mmx mng mono mp3 mpeg mplayer mtp mudflap multilib musepack musicbrainz mysql ncurses nls nptl nptlonly nsplugin offensive ogg openal openexr opengl openmp pam pcre pdf perl png policykit postgres ppds pppd python qt3 qt3support qt4 quicktime raw rdesktop readline reflection rss ruby samba sdl session slang sndfile speex spell spl sqlite sqlite3 sse sse2 ssl startup-notification subversion svg sysfs taglib tcl tcpd theora threads tiff truetype unicode usb vcd vorbis wavpack wmf x264 xattr xcb xcomposite xine xinerama xml xorg xosd xpm xscreensaver xulrunner xv zeroconf zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="canon" ELIBC="glibc" INPUT_DEVICES="evdev mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en ru" USERLAND="GNU" VIDEO_CARDS="vga vesa fbdev radeon radeonhd fglrx"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Paul de Vrieze (RETIRED)






          2009-08-10 13:01:34 UTC
        

Please attach the top few hundred lines of the log. The segmentation fault you refer has an error message so fake that it is not clear what actually fails. We thus can't confirm that it is actually gcc 4 that fails.




Comment 2


Marcin Deranek





          2009-08-12 19:32:52 UTC
        

I see identical error on my ~amd64, but with gcc-4.3.4

Looking into logs I can find:

sun # grep segfault /var/log/messages
Aug 11 19:09:58 sun regcomp.bin[6101]: segfault at 2 ip 00002b81b85433e8 sp 00007fff456b6420 error 4 in libldap-2.3.so.0[2b81b8523000+39000]
Aug 11 20:56:03 sun regcomp.bin[3430]: segfault at 2 ip 00002af3df48a3e8 sp 00007fffd8c8f5f0 error 4 in libldap-2.3.so.0[2af3df46a000+39000]
Aug 12 20:48:42 sun regcomp.bin[32529]: segfault at 2 ip 00002b1185b6c3e8 sp 00007fff9b124210 error 4 in libldap-2.3.so.0[2b1185b4c000+39000]

And these are openoffice build logs with segfaults:
sun paludis # ls -al $(grep -l 'Segmentation fault' `ls|grep openoffice`)
-rw-r--r-- 1 root root 11069475 2009-08-11 19:10 1250005609-install-app-office_openoffice-3.1.0-r1:0::gentoo.out
-rw-r--r-- 1 root root 11069107 2009-08-11 20:56 1250011960-install-app-office_openoffice-3.1.0-r1:0::gentoo.out
-rw-r--r-- 1 root root 11069152 2009-08-12 20:48 1250097808-install-app-office_openoffice-3.1.0-r1:0::gentoo.out

Seems like segfault is in libldap-2.3.so as timestamps are almost identical.




Comment 3


Paul de Vrieze (RETIRED)






          2009-08-13 11:40:48 UTC
        

Have you tried to rebuild openldap with gcc-4.4? 




Comment 4


Marcin Deranek





          2009-08-16 00:24:18 UTC
        

In my case recompiling only openldap did not help..
Although later on I have recompiled the whole system (gcc-4.4.1) and that did the trick..




Comment 5


disconnect





          2009-08-18 17:59:34 UTC
        

rmdir /tmp/19364
Build succeeded ...!
touch stamp/build
>>> Source compiled.
>>> Test phase [not enabled]: app-office/openoffice-3.1.0-r1

>>> Install openoffice-3.1.0-r1 into /var/tmp/portage/app-office/openoffice-3.1.0-r1/image/ category app-office
 * Preparing Installation
cd bin ; ./package-ooo
Setup:
 Tag:        'ooo310-m11'
 Apply:      '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/patches/dev300/apply'
 Flags:      ''
 Suffix:     ''
 Dir:        '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build'
 DestDir:    ''
 Path:       '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/bin:/usr/lib64/portage/bin/ebuild-helpers:/usr/local/sbin:/sbin:/usr/sbin:/usr/local/bin:/bin:/usr/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.4.1:/usr/qt/3/bin:/opt/vmware/workstation/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/bin'
 Prefix:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr'
 Mandir:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/share/man'
 Docdir:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/share/doc/packages/OpenOffice.org'
 Sysconf:    '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/etc'
 OOInBase:   '/usr/lib64/openoffice'
 OOInstall:  '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/lib64/openoffice'
 OODestDir:  '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image/'
 Config:     --disable-binfilter --disable-crashdump --with-lang="en-US ru" --with-use-shell=bash --without-gpc --without-agg --disable-epm --with-openldap --with-build-version="Build 3.1.0.6" --without-fonts --with-system-jpeg --with-system-libxml --with-system-mozilla --with-system-openssl --with-system-python --with-system-stdlibs --with-system-zlib --with-system-poppler --with-unix-wrapper=ooffice --enable-evolution2 --with-alloc=system --with-vba-package-format=builtin --enable-cairo=yes --enable-gtk  --disable-fontooo --disable-qadevooo --enable-neon --enable-xrender-link --with-external-dict-dir=/usr/share/myspell --with-external-hyph-dir=/usr/share/myspell --with-external-thes-dir=/usr/share/myspell --with-system-boost --with-system-curl --with-system-db --with-system-dicts --with-system-expat --with-system-hunspell --with-system-icu --with-system-libxslt --with-system-neon --with-system-openssl --with-system-vigra --with-system-xrender --without-myspell-dicts --without-stlport --with-vendor="Gentoo Foundation" --with-ant-home=/usr/share/ant --with-jdk-home=/opt/sun-jdk-1.6.0.15 --with-java-target-version=1.5 --with-jvm-path=/usr/lib64/ --with-system-beanshell --with-system-hsqldb --with-system-lucene --with-system-rhino --with-beanshell-jar=/usr/share/bsh/lib/bsh.jar --with-hsqldb-jar=/usr/share/hsqldb/lib/hsqldb.jar --with-lucene-core-jar=/usr/share/lucene-2.3/lib/lucene-core.jar --with-lucene-analyzers-jar=/usr/share/lucene-analyzers-2.3/lib/lucene-analyzers.jar --with-rhino-jar=/usr/share/rhino-1.5/lib/js.jar --enable-mozilla --with-system-mozilla=libxul --disable-binfilter --enable-cups --enable-dbus --enable-evolution2 --enable-gconf --enable-gio --disable-gnome-vfs --enable-lockdown --enable-gstreamer --enable-systray --enable-ldap --enable-opengl --with-openldap --disable-crashdump --disable-strip-solver --with-extension-integration --enable-minimizer --enable-pdfimport --enable-presenter-console --without-writer2latex --with-intro-bitmaps="/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/ooo_custom_images/nologo/introabout/intro.bmp" --with-system-redland   '--with-distro=Gentoo' '--with-arch=amd64' '--with-srcdir=/var/tmp/portage/app-office/openoffice-3.1.0-r1/distdir' '--with-lang=en-US ru' '--with-num-cpus=5' '--without-binsuffix' '--with-installed-ooo-dirname=openoffice' '--with-tag=ooo310-m11' '--with-drink=True Blood' '--enable-gtk' '--enable-cairo' '--with-system-cairo' '--enable-mono' '--disable-kde' '--enable-strip' '--disable-odk' '--enable-pam' '--with-java' '--without-sun-templates' '--disable-access' '--disable-post-install-scripts' '--enable-extensions' '--with-system-libwpd' '--mandir=/usr/share/man' '--libdir=/usr/lib64' 'CFLAGS=-march=native -pipe -DGL_GLEXT_PROTOTYPES' 'LDFLAGS=-Wl,-O1' 'CPPFLAGS='
 ccache:     no
 icecream:   no
 Max number of projects to build in parallel is '5'
Setup:
 Tag:        'ooo310-m11'
 Apply:      '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/patches/dev300/apply'
 Flags:      ''
 Suffix:     ''
 Dir:        '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build'
 DestDir:    ''
 Path:       '/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/bin:/opt/sun-jdk-1.6.0.15/bin:.:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solenv/unxlngx6/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solenv/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/bin:/usr/lib64/portage/bin/ebuild-helpers:/usr/local/sbin:/sbin:/usr/sbin:/usr/local/bin:/bin:/usr/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.4.1:/usr/qt/3/bin:/opt/vmware/workstation/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/bin:/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/bin'
 Prefix:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr'
 Mandir:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/share/man'
 Docdir:     '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/share/doc/packages/OpenOffice.org'
 Sysconf:    '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/etc'
 OOInBase:   '/usr/lib64/openoffice'
 OOInstall:  '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/lib64/openoffice'
 OODestDir:  '/var/tmp/portage/app-office/openoffice-3.1.0-r1/image/'
 Config:     --disable-binfilter --disable-crashdump --with-lang="en-US ru" --with-use-shell=bash --without-gpc --without-agg --disable-epm --with-openldap --with-build-version="Build 3.1.0.6" --without-fonts --with-system-jpeg --with-system-libxml --with-system-mozilla --with-system-openssl --with-system-python --with-system-stdlibs --with-system-zlib --with-system-poppler --with-unix-wrapper=ooffice --enable-evolution2 --with-alloc=system --with-vba-package-format=builtin --enable-cairo=yes --enable-gtk  --disable-fontooo --disable-qadevooo --enable-neon --enable-xrender-link --with-external-dict-dir=/usr/share/myspell --with-external-hyph-dir=/usr/share/myspell --with-external-thes-dir=/usr/share/myspell --with-system-boost --with-system-curl --with-system-db --with-system-dicts --with-system-expat --with-system-hunspell --with-system-icu --with-system-libxslt --with-system-neon --with-system-openssl --with-system-vigra --with-system-xrender --without-myspell-dicts --without-stlport --with-vendor="Gentoo Foundation" --with-ant-home=/usr/share/ant --with-jdk-home=/opt/sun-jdk-1.6.0.15 --with-java-target-version=1.5 --with-jvm-path=/usr/lib64/ --with-system-beanshell --with-system-hsqldb --with-system-lucene --with-system-rhino --with-beanshell-jar=/usr/share/bsh/lib/bsh.jar --with-hsqldb-jar=/usr/share/hsqldb/lib/hsqldb.jar --with-lucene-core-jar=/usr/share/lucene-2.3/lib/lucene-core.jar --with-lucene-analyzers-jar=/usr/share/lucene-analyzers-2.3/lib/lucene-analyzers.jar --with-rhino-jar=/usr/share/rhino-1.5/lib/js.jar --enable-mozilla --with-system-mozilla=libxul --disable-binfilter --enable-cups --enable-dbus --enable-evolution2 --enable-gconf --enable-gio --disable-gnome-vfs --enable-lockdown --enable-gstreamer --enable-systray --enable-ldap --enable-opengl --with-openldap --disable-crashdump --disable-strip-solver --with-extension-integration --enable-minimizer --enable-pdfimport --enable-presenter-console --without-writer2latex --with-intro-bitmaps="/var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/ooo_custom_images/nologo/introabout/intro.bmp" --with-system-redland   '--with-distro=Gentoo' '--with-arch=amd64' '--with-srcdir=/var/tmp/portage/app-office/openoffice-3.1.0-r1/distdir' '--with-lang=en-US ru' '--with-num-cpus=5' '--without-binsuffix' '--with-installed-ooo-dirname=openoffice' '--with-tag=ooo310-m11' '--with-drink=True Blood' '--enable-gtk' '--enable-cairo' '--with-system-cairo' '--enable-mono' '--disable-kde' '--enable-strip' '--disable-odk' '--enable-pam' '--with-java' '--without-sun-templates' '--disable-access' '--disable-post-install-scripts' '--enable-extensions' '--with-system-libwpd' '--mandir=/usr/share/man' '--libdir=/usr/lib64' 'CFLAGS=-march=native -pipe -DGL_GLEXT_PROTOTYPES' 'LDFLAGS=-Wl,-O1' 'CPPFLAGS='
 ccache:     no
 icecream:   no
 Max number of projects to build in parallel is '5'
Cleaning /var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/lib64/openoffice
Generating man pages ...
Building /var/tmp/portage/app-office/openoffice-3.1.0-r1/image//usr/lib64/openoffice/basis3.1/program/java-set-classpath
Installing extra en-US templates ...
Installing system files ...
Execute ooinstall ...
Reading setup from ./setup
Sucking env from build setup
Performing environment substitutions ...
Setting up environment
Running OOo installer
Subroutine installer::epmfile::getcwd redefined at /usr/lib64/perl5/5.8.8/Exporter.pm line 65.
 at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/POSIX.pm line 19
... checking environment variables ...

########################################################
make_installer.pl, version 1.0
Product list file: openoffice.lst
Taking setup script from solver
Unpackpath: /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/instsetoo_native/util
Compiler: unxlngx6
Product: OpenOffice
BuildID: 9399
Build: OOO310
No minor set
Product version
Installpath: /usr/lib64/openoffice
Package format: native
Not calling epm
No file stripping
Unzip ARCHIVE files
services.rdb can be created
Languages:
	en-US,ru
########################################################
... checking required files ...
...... searching zip ...
	Found: /usr/bin/zip
...... searching unzip ...
	Found: /usr/bin/unzip
... analyzing openoffice.lst ... 
... reading include pathes ...
... analyzing script: /var/tmp/portage/app-office/openoffice-3.1.0-r1/work/ooo/build/ooo310-m11/solver/310/unxlngx6.pro/bin/setup_osl.ins ... 
Warning: mis-named or un-known '%' variable at line 56454:
	Description (rw) = "Yinjiza ubufasha bw'Ikibasiki muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 57806:
	Description (rw) = "Yinjiza ubufasha bw'Igishinwa (cy'ubu) muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 58820:
	Description (rw) = "Yinjiza ubufasha bw'Ikibureto muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 59158:
	Description (rw) = "Yinjiza ubufasha bw'Ikibengali muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 61186:
	Description (rw) = "Yinjiza ubufasha bw'Ikibengali (Bangaladeshi) muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 61524:
	Description (rw) = "Yinjiza ubufasha bw'Ikibuligariya muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 68284:
	Description (rw) = "Yinjiza ubufasha bw'Ikibengali muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 69974:
	Description (rw) = "Yinjiza ubufasha bw'Ikinyasamu muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 70669:
	Description (rw) = "Yinjiza ubufasha bw'Igiceki muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 71007:
	Description (rw) = "Yinjiza ubufasha bw'Ikibelarusiya muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 71345:
	Description (rw) = "Yinjiza ubufasha bw'Igishinwa (cya kera) muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 72697:
	Description (rw) = "Yinjiza ubufasha bw'Ikidanimariki muri OpenOffice.org %3.1";
Warning: mis-named or un-known '%' variable at line 74049:
	Description (rw) = "Yinjiza ubufasha bw'Igikorowasi muri OpenOffice.org %3.1";
javaloader.uno.sod or un-known '%' variable at line 76415:
stocservices.uno.so
sh: line 1:  1817 Segmentation fault      /var/tmp/portage/app-office

Seems like it compiles and fails during install. Additional info:
disconnect ooo # grep segfault /var/log/messages
Aug 18 20:38:47 disconnect regcomp.bin[1817]: segfault at 2 ip 0000003d1ec1fa08 sp 00007fff7a357eb0 error 4 in libldap-2.3.so.0[3d1ec00000+38000]





Comment 6


disconnect





          2009-08-19 04:12:20 UTC
        

Recompilation of openldap and running revdep-rebuild after solves the problem.
Now OO.o compiles and installs fine.


Here is the solve:
emerge -1 openldap && revdep-rebuild --library liblber-2.3.so.0 && revdep-rebuild --library libldap-2.3.so.0 && revdep-rebuild --library libldap_r-2.3.so.0
emerge openoffice


Thats weird. I run emerge -e world with gcc 4.4 few weeks ago and in fails on OO.o; I skip it with emerge --resume --skipfrist, then run revdep-rebuild, then i tried to emerge OO.o and it fails again. So i came here and write this bug report.

Seems like emerge -e world compiles openldap badly and OO.o fails on it.

P.S. I just check emerge -e world includes openldap, so it was compiles few weeks ago when i wrote this bug report.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

