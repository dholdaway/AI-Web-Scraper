Title: 137358 – xorg-server - can't compile on amd64
URL: https://bugs.gentoo.org/show_bug.cgi?id=137358

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 137358
xorg-server - can't compile on amd64
Last modified: 2006-07-09 06:26:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 137358 
      - xorg-server - can't compile on amd64


Summary:
xorg-server - can't compile on amd64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

139766

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-06-20 04:22 UTC by Piotr J.





      Modified:
    
2006-07-09 06:26 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



dombo
jaime.f









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Piotr J.





          2006-06-20 04:22:33 UTC
        

Making all in xfixes
make[1]: Entering directory `/var/tmp/portage/xorg-server-1.0.2-r5/work/xorg-server-1.0.2/xfixes'
if /bin/sh ../libtool --tag=CC --mode=compile x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../include -I../include -I../include -I../include -I../include -I../include    -DHAVE_DIX_CONFIG_H  -DXFree86Server  -DXFree86LOADER -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -fno-strict-aliasing -D_BSD_SOURCE -DHAS_FCHOWN -DHAS_STICKY_DIR_BIT   -I../include -I../include -I../Xext -I../composite -I../damageext -I../xfixes -I../Xi -I../mi -I../miext/shadow  -I../miext/damage -I../render -I../randr -I../fb -I../lbx   -march=athlon64 -O3 -pipe -fstack-protector -MT cursor.lo -MD -MP -MF ".deps/cursor.Tpo" -c -o cursor.lo cursor.c; \
then mv -f ".deps/cursor.Tpo" ".deps/cursor.Plo"; else rm -f ".deps/cursor.Tpo"; exit 1; fi
mkdir .libs
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../include -I../include -I../include -I../include -I../include -I../include -DHAVE_DIX_CONFIG_H -DXFree86Server -DXFree86LOADER -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -fno-strict-aliasing -D_BSD_SOURCE -DHAS_FCHOWN -DHAS_STICKY_DIR_BIT -I../include -I../include -I../Xext -I../composite -I../damageext -I../xfixes -I../Xi -I../mi -I../miext/shadow -I../miext/damage -I../render -I../randr -I../fb -I../lbx -march=athlon64 -O3 -pipe -fstack-protector -MT cursor.lo -MD -MP -MF .deps/cursor.Tpo -c cursor.c  -fPIC -DPIC -o .libs/cursor.o
cursor.c: In function `TestForCursorName':
cursor.c:705: warning: cast from pointer to integer of different size
cursor.c: In function `ProcXFixesChangeCursorByName':
cursor.c:721: warning: cast to pointer from integer of different size
cursor.c: In function `ProcXFixesHideCursor':
cursor.c:840: error: syntax error before '*' token
cursor.c:843: error: `xXFixesHideCursorReq' undeclared (first use in this function)
cursor.c:843: error: (Each undeclared identifier is reported only once
cursor.c:843: error: for each function it appears in.)
cursor.c:845: error: `stuff' undeclared (first use in this function)
cursor.c: In function `SProcXFixesHideCursor':
cursor.c:879: error: syntax error before '*' token
cursor.c:881: error: `stuff' undeclared (first use in this function)
cursor.c:882: error: `xXFixesHideCursorReq' undeclared (first use in this function)
cursor.c: In function `ProcXFixesShowCursor':
cursor.c:892: error: syntax error before '*' token
cursor.c:894: error: `xXFixesShowCursorReq' undeclared (first use in this function)
cursor.c:896: error: `stuff' undeclared (first use in this function)
cursor.c: In function `SProcXFixesShowCursor':
cursor.c:923: error: syntax error before '*' token
cursor.c:925: error: `stuff' undeclared (first use in this function)
cursor.c:926: error: `xXFixesShowCursorReq' undeclared (first use in this function)
make[1]: *** [cursor.lo] B&#322;&#261;d 1
make[1]: Leaving directory `/var/tmp/portage/xorg-server-1.0.2-r5/work/xorg-server-1.0.2/xfixes'
make: *** [all-recursive] B&#322;&#261;d 1

!!! ERROR: x11-base/xorg-server-1.0.2-r5 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  ebuild.sh, line 1248:   Called x-modular_src_compile
  x-modular.eclass, line 317:   Called x-modular_src_make
  x-modular.eclass, line 312:   Called die

!!! emake failed
!!! If you need support, post the topmost build error, and the call stack if relevant.



Infos:

[ebuild  N    ] x11-base/xorg-server-1.0.2-r5  USE="dri ipv6 -debug -minimal -xprint" 0 kB

[ebuild   R   ] sys-devel/gcc-3.4.5  USE="-fortran* -ip32r10k%"

gcc profile: x86_64-pc-linux-gnu-3.4.5

FEATURES="buildpkg ccache

VIDEO_CARDS="radeon"


emerge --info :

Portage 2.1 (default-linux/amd64/2006.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.16-hardened-r7 x86_64)
=================================================================
System uname: 2.6.16-hardened-r7 x86_64 AMD Turion(tm) 64 Mobile Technology ML-32
Gentoo Base System version 1.6.14
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O3 -pipe -fstack-protector"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/NX/etc /usr/NX/home /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/X11/xkb /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-march=athlon64 -O3 -pipe -fstack-protector"
DISTDIR="/usr/distfiles"
FEATURES="autoconfig buildpkg ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="pl_PL"
LINGUAS="pl en"
PKGDIR="/usr/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X aac acl acpi alsa avi berkdb bitmap-fonts cli crypt css dri dvd dvdr dvdread eds emboss encode fbcon font-server foomaticdb freetts gg gif gimpprint gpm gsm gstreamer gtk gtk2 imap imlib ipv6 isdnlog jabber jpeg k3b kde kerberos kolab kqemu krb4 lame latex ldap libao libwww lzw lzw-tiff maildir mp3 mpeg mysql ncurses nls nptl nptlonly ogg opengl pam pcre pdflib perl php png ppds pppd python qt quicktime readline reflection sasl sdl session softmmu sox spell spl ssl tcpd tiff truetype-fonts type1-fonts unicode usb vorbis wine xcomposite xorg xpm xv zlib elibc_glibc kernel_linux linguas_pl linguas_en userland_GNU video_cards_radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY



If you want more info mail me
est_seg@o2.pl




Comment 1


Peter





          2006-06-20 16:33:52 UTC
        

remerging compositeproto & fixesproto gets past that cursor.lo error but now I get:

make[4]: Entering directory `/var/tmp/portage/xorg-server-1.0.2-r6/work/xorg-server-1.0.2/hw/xfree86'
if x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../../include -I../../include -I../../include -I../../include -I../../include -I../../include -I../../hw/xfree86 -I../../hw/xfree86/include -I../../hw/xfree86/common -I../../hw/xfree86/os-support -I../../hw/xfree86/os-support/bus -I../../os    -DHAVE_XORG_CONFIG_H  -DXFree86Server  -DXFree86LOADER -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -fno-strict-aliasing -D_BSD_SOURCE -DHAS_FCHOWN -DHAS_STICKY_DIR_BIT   -I../../include -I../../include -I../../Xext -I../../composite -I../../damageext -I../../xfixes -I../../Xi -I../../mi -I../../miext/shadow  -I../../miext/damage -I../../render -I../../randr -I../../fb -I../../lbx   -march=athlon64 -O2 -frename-registers -ftracer -pipe -MT xorg.o -MD -MP -MF ".deps/xorg.Tpo" -c -o xorg.o xorg.c; \
        then mv -f ".deps/xorg.Tpo" ".deps/xorg.Po"; else rm -f ".deps/xorg.Tpo"; exit 1; fi
/bin/sh ../../libtool --tag=CC --mode=link x86_64-pc-linux-gnu-gcc -DHAVE_XORG_CONFIG_H  -DXFree86Server  -DXFree86LOADER -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -fno-strict-aliasing -D_BSD_SOURCE -DHAS_FCHOWN -DHAS_STICKY_DIR_BIT   -I../../include -I../../include -I../../Xext -I../../composite -I../../damageext -I../../xfixes -I../../Xi -I../../mi -I../../miext/shadow  -I../../miext/damage -I../../render -I../../randr -I../../fb -I../../lbx   -march=athlon64 -O2 -frename-registers -ftracer -pipe   -o Xorg -rdynamic xorg.o ../../dix/libdix.la common/libinit.a loader/libloader.a common/libcommon.a parser/libxf86config.a os-support/libxorgos.la dummylib/libdummy.a dixmods/libdixmods.la ../../mi/libmi.la ../../xfixes/libxfixes.la ../../Xext/libXextbuiltin.la ../../GL/glx/libglx.la ../../GL/mesa/libGLcore.la ../../render/librender.la ../../randr/librandr.la ../../damageext/libdamageext.la ../../miext/damage/libdamage.la ../../miext/cw/libcw.la ../../miext/shadow/libshadow.la ../../miext/layer/liblayer.la ../../Xi/libXi.la ../../xkb/libxkb.la ../../lbx/liblbx.la -llbxutil   ../../composite/libcomposite.la ../../dix/libxpstubs.la ../../os/libos.la -ldl -lXfont -lXau -lfontenc -lXdmcp   -lm -lz dixmods/libxorgxkb.la -lm 
mkdir .libs
x86_64-pc-linux-gnu-gcc -DHAVE_XORG_CONFIG_H -DXFree86Server -DXFree86LOADER -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -fno-strict-aliasing -D_BSD_SOURCE -DHAS_FCHOWN -DHAS_STICKY_DIR_BIT -I../../include -I../../include -I../../Xext -I../../composite -I../../damageext -I../../xfixes -I../../Xi -I../../mi -I../../miext/shadow -I../../miext/damage -I../../render -I../../randr -I../../fb -I../../lbx -march=athlon64 -O2 -frename-registers -ftracer -pipe -o Xorg -rdynamic xorg.o  ../../dix/.libs/libdix.a common/libinit.a loader/libloader.a common/libcommon.a parser/libxf86config.a os-support/.libs/libxorgos.a dummylib/libdummy.a dixmods/.libs/libdixmods.a ../../mi/.libs/libmi.a ../../xfixes/.libs/libxfixes.a ../../Xext/.libs/libXextbuiltin.a ../../GL/glx/.libs/libglx.a ../../GL/mesa/.libs/libGLcore.a ../../render/.libs/librender.a ../../randr/.libs/librandr.a ../../damageext/.libs/libdamageext.a ../../miext/damage/.libs/libdamage.a ../../miext/cw/.libs/libcw.a ../../miext/shadow/.libs/libshadow.a ../../miext/layer/.libs/liblayer.a ../../Xi/.libs/libXi.a ../../xkb/.libs/libxkb.a ../../lbx/.libs/liblbx.a /usr/lib64/liblbxutil.so ../../composite/.libs/libcomposite.a ../../dix/.libs/libxpstubs.a ../../os/.libs/libos.a -ldl /usr/lib64/libXfont.so /usr/lib64/libfreetype.so /usr/lib64/libXau.so /usr/lib64/libfontenc.so /usr/lib64/libXdmcp.so -lz dixmods/.libs/libxorgxkb.a -lm
/usr/lib64/libXfont.so: undefined reference to `XpClientIsBitmapClient'
/usr/lib64/libXfont.so: undefined reference to `XpClientIsPrintClient'
collect2: ld returned 1 exit status
make[4]: *** [Xorg] Error 1
make[4]: Leaving directory `/var/tmp/portage/xorg-server-1.0.2-r6/work/xorg-server-1.0.2/hw/xfree86'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/xorg-server-1.0.2-r6/work/xorg-server-1.0.2/hw/xfree86'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/var/tmp/portage/xorg-server-1.0.2-r6/work/xorg-server-1.0.2/hw/xfree86'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/xorg-server-1.0.2-r6/work/xorg-server-1.0.2/hw'
make: *** [all-recursive] Error 1

!!! ERROR: x11-base/xorg-server-1.0.2-r6 failed.
Call stack:
  ebuild.sh, line 1540:   Called dyn_compile
  ebuild.sh, line 940:   Called src_compile
  ebuild.sh, line 1249:   Called x-modular_src_compile
  x-modular.eclass, line 317:   Called x-modular_src_make
  x-modular.eclass, line 312:   Called die

!!! emake failed
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 2


Donnie Berkholz (RETIRED)






          2006-06-20 17:01:04 UTC
        

`emerge fontsproto libXfont` and try again, please. If that doesn't fix it, provide `emerge -vp fontsproto libXfont` output.




Comment 3


Peter





          2006-06-20 19:16:02 UTC
        

yep, I remerged libXfont right after posting that last piece and xorg-server compiled fine. why are all the deps getting broken each time? this same thing happened with 1.0.2-r5 and the only way a was able to trace all deps was to emerge -C EVERY x11 related package and start from scratch.




Comment 4


Donnie Berkholz (RETIRED)






          2006-06-20 19:24:39 UTC
        

I'm not sure why, if you already had the same revision of libXfont installed. Older versions may have changed with regard to building Xprint capabilities, which is what your problem was with.

For lack of a better resolution, works for me. It could be an ongoing portage bug about failure to resolve and install dependencies but there's no real evidence of that.




Comment 5


Jakub Moc (RETIRED)






          2006-07-06 12:58:33 UTC
        

*** Bug 139474 has been marked as a duplicate of this bug. ***




Comment 6


Jakub Moc (RETIRED)






          2006-07-09 06:26:36 UTC
        

*** Bug 139766 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

