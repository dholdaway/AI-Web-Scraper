Title: 134199 – sys-apps/pmount-0.9.9 broken linkage to libsysfs.so.1
URL: https://bugs.gentoo.org/show_bug.cgi?id=134199

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 134199
sys-apps/pmount-0.9.9 broken linkage to libsysfs.so.1
Last modified: 2006-05-24 16:35:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 134199 
      - sys-apps/pmount-0.9.9 broken linkage to libsysfs.so.1


Summary:
sys-apps/pmount-0.9.9 broken linkage to libsysfs.so.1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-24 05:28 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2006-05-24 16:35 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



radek









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-05-24 05:28:42 UTC
        

after running twice esync && emerge -DaNuv world, then 3 times revdep-rebuild I now get every times the same problem:

Checking dynamic linking consistency...
  broken /usr/bin/pmount (requires  libsysfs.so.1)
  broken /usr/bin/pmount-hal (requires  libsysfs.so.1)

then emerge pmount egain, then produce same error again ang again.

# locate libsysfs.so
/lib/libsysfs.so
/lib/libsysfs.so.2
/lib/libsysfs.so.2.0.0


# ldd /usr/bin/pmount
        linux-gate.so.1 =>  (0xffffe000)
        libsysfs.so.1 => not found
        libc.so.6 => /lib/libc.so.6 (0xb7e05000)
        /lib/ld-linux.so.2 (0xb7f41000)

*after* re-emerging pmount twice !

Me thinks pmount ld script use hard reference, or bad system ./configure script.


# emerge -vp1 pmount sys-fs/sysfsutils
These are the packages that would be merged, in order:
Calculating dependencies... done!
[ebuild   R   ] sys-apps/pmount-0.9.9  USE="crypt" 0 kB
[ebuild   R   ] sys-fs/sysfsutils-2.0.0  0 kB
Total size of downloads: 0 kB

ME thinks this bug may be linked to bug 98715, but dont sounds dup.

Me thinks there should be an easy/quick fix at Gentoo level for the dist users before maints tell about it to upstream.

***

reproduce conditions:
- check /lib/libsysfs.so.2.0.0 and sys-apps/pmount-0.9.9 installed
- run revdep-rebuild several times
- see that it always retry to emerge pmount.

*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** 

Gentoo Base System version 1.12.0_pre19
Portage 2.1_rc1-r3 (default-linux/x86/2005.1, gcc-3.4.6, glibc-2.4-r3, 2.6.16-gentoo-r7-Gentoo-moon_05 i686)
=================================================================
System uname: 2.6.16-gentoo-r7-Gentoo-moon_05 i686 AMD Athlon(tm) 4 Processor
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -march=pentium3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks keeptemp keepwork metadata-transfer noclean sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_GB.ISO-8859-15"
LC_ALL="en_GB.ISO-8859-15"
MAKEOPTS="-j2"
PKGDIR="/tmp"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/mnt/big"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X a52 aac aalib acpi aim alsa amr amuled ao apache2 apic apm arts audiofile avi bash-completion berkdb bidi binfilter bitmap-fonts bl bonjour bootsplash cdda cdparanoia cdr cjk cli cmov cpudetection crypt cups curl cx8 dbus de dga directfb dmi doc dri dts dv dvb dvd dvdread dynamic eds emboss encode esd ethereal examples fbcon ffmpeg flac flash foomaticdb fortran fping fpu freetype fxsr gdbm ggi gif gnome gnutls gpm gs gstreamer gtk gtk2 httpd i8x0 icq idea idn ieee1394 imagemagick imlib ipv6 irc isdnlog jabber jack java javascript jpeg kde lcms libcaca libg++ libwww lirc listentcp live lj logrotate lzo mad matrox mca mce mikmod mmx mmxext mono motif mozcalendar mp3 mpeg mplayer msn msr mtrr mtyhtv ncurses network nls no-htdocs nptl nptlonly nsplugin offensive ogg oggvorbis opengl oss pae pam pat pcre pdflib perl pge png pppd pse pse36 python qt quicktime rar readline real reflection rss rtc rtsp samba screen sdl sensord sep server session silc skey skins sndfile speex spell spl sse ssl startup-notification stream subtitles svg svga swat symlink tcpd tga theora threads tiff truetype truetype-fonts tsc type1-fonts unicode urandom usb v4l v4l2 vcd vim vlm vme vorbis win32codecs wmf wxwindows x264 xanim xinerama xml2 xmms xorg xosd xscreensaver xv xvid xvmc yahoo zeroconf zlib elibc_glibc input_devices_evdev input_devices_keyboard input_devices_mouse input_devices_wacom kernel_linux userland_GNU video_cards_apm video_cards_chips video_cards_cirrus video_cards_fbdev video_cards_-i810 video_cards_i128 video_cards_mga video_cards_nv video_cards_-nvidia video_cards_s3 video_cards_s3virge video_cards_sis video_cards_tga video_cards_trident video_cards_v4l video_cards_vesa video_cards_vga video_cards_-via"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Steev Klimaszewski (RETIRED)






          2006-05-24 13:56:23 UTC
        

I am the one who did the version bump to 0.9.9 and I cannot reproduce this is the output of LDD for me

steev@umbra ~ % sudo ldd /usr/bin/pmount
        linux-gate.so.1 =>  (0xffffe000)
        libsysfs.so.2 => /lib/libsysfs.so.2 (0xb7f1c000)
        libc.so.6 => /lib/libc.so.6 (0xb7dfe000)
        /lib/ld-linux.so.2 (0xb7f3b000)

steev@umbra ~ % sudo ldd /usr/bin/pmount-hal
        linux-gate.so.1 =>  (0xffffe000)
        libhal-storage.so.1 => /usr/lib/libhal-storage.so.1 (0xb7f04000)
        libhal.so.1 => /usr/lib/libhal.so.1 (0xb7efb000)
        libdbus-1.so.2 => /usr/lib/libdbus-1.so.2 (0xb7ed3000)
        libsysfs.so.2 => /lib/libsysfs.so.2 (0xb7ec9000)
        libc.so.6 => /lib/libc.so.6 (0xb7dab000)
        libnsl.so.1 => /lib/libnsl.so.1 (0xb7d96000)
        /lib/ld-linux.so.2 (0xb7f22000)





Comment 2


Doug Goldstein (RETIRED)






          2006-05-24 16:35:42 UTC
        

Not reproducable here. Your system is foobar'd. I'd say binutils.


cardoe@dlaptop ~ $ sudo ldd /usr/bin/pmount
Password:
        linux-gate.so.1 =>  (0xffffe000)
        libsysfs.so.2 => /lib/libsysfs.so.2 (0xb7f4b000)
        libc.so.6 => /lib/libc.so.6 (0xb7e2d000)
        /lib/ld-linux.so.2 (0xb7f63000)
cardoe@dlaptop ~ $ sudo ldd /usr/bin/pmount-hal
        linux-gate.so.1 =>  (0xffffe000)
        libhal-storage.so.1 => /usr/lib/libhal-storage.so.1 (0xb7fb8000)
        libhal.so.1 => /usr/lib/libhal.so.1 (0xb7fb1000)
        libdbus-1.so.2 => /usr/lib/libdbus-1.so.2 (0xb7f92000)
        libsysfs.so.2 => /lib/libsysfs.so.2 (0xb7f8b000)
        libc.so.6 => /lib/libc.so.6 (0xb7e6c000)
        libnsl.so.1 => /lib/libnsl.so.1 (0xb7e57000)
        /lib/ld-linux.so.2 (0xb7fd0000)










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

