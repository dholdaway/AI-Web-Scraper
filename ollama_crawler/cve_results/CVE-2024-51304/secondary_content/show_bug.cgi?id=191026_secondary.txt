Title: 191026 – dev-util/libconf-0.42.10-r1: install fails on conf2xml.so with "File exists"
URL: https://bugs.gentoo.org/show_bug.cgi?id=191026

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 191026
dev-util/libconf-0.42.10-r1: install fails on conf2xml.so with "File exists"
Last modified: 2007-09-02 07:30:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 191026 
      - dev-util/libconf-0.42.10-r1: install fails on conf2xml.so with "File exists"


Summary:
dev-util/libconf-0.42.10-r1: install fails on conf2xml.so with "File exists"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-09-02 03:56 UTC by Daniel Santos





      Modified:
    
2007-09-02 07:30 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



daniel.santos









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Santos





          2007-09-02 03:56:57 UTC
        

My initial guess is that Gentoo patching of the handling of this file is causing it to mis-use install, supplying a destination file, which is actually the dest dir.  I haven't examined the Makefile and such yet.

make[2]: Entering directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/python'
cd src && python setup.py install --root=/tmp/portage/dev-util/libconf-0.42.10-r1/image/
running install
running build
running build_ext
running install_lib
creating /tmp/portage/dev-util/libconf-0.42.10-r1/image/usr/lib64/python2.5
creating /tmp/portage/dev-util/libconf-0.42.10-r1/image/usr/lib64/python2.5/site-packages
copying build/lib.linux-x86_64-2.5/conf2xml.so -> /tmp/portage/dev-util/libconf-0.42.10-r1/image/usr/lib64/python2.5/site-packages
running install_egg_info
Writing /tmp/portage/dev-util/libconf-0.42.10-r1/image/usr/lib64/python2.5/site-packages/conf2xml_py-0.1-py2.5.egg-info
make[2]: Leaving directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/python'
make[2]: Entering directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/ruby'
make -C src install
make[3]: Entering directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/ruby/src'
mkdir -p /tmp/portage/dev-util/libconf-0.42.10-r1/image//usr/lib64/ruby/site_ruby/1.8/x86_64-linux
/usr/bin/install -c -m 0755 conf2xml.so /tmp/portage/dev-util/libconf-0.42.10-r1/image//usr/lib64/ruby/site_ruby/1.8/x86_64-linux
/usr/bin/install: cannot create regular file `/tmp/portage/dev-util/libconf-0.42.10-r1/image//usr/lib64/ruby/site_ruby/1.8/x86_64-linux': File exists
make[3]: *** [/tmp/portage/dev-util/libconf-0.42.10-r1/image//usr/lib64/ruby/site_ruby/1.8/x86_64-linux/conf2xml.so] Error 1
make[3]: Leaving directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/ruby/src'
make[2]: *** [install] Error 2
make[2]: Leaving directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings/ruby'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/tmp/portage/dev-util/libconf-0.42.10-r1/work/perl-Libconf-0.42.10/bindings'
make: *** [install] Error 2
 *
 * ERROR: dev-util/libconf-0.42.10-r1 failed.
 * Call stack:
 *   ebuild.sh, line 1654:   Called dyn_install
 *   ebuild.sh, line 1089:   Called qa_call 'src_install'
 *   ebuild.sh, line 44:   Called src_install
 *   libconf-0.42.10-r1.ebuild, line 65:   Called die
 *
 * emake install failed
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/dev-util:libconf-0.42.10-r1:20070902-032401.log'.
 *


Steps to reproduce:
emerge dev-util/libconf

Reproducible: every time

Possibly related bugs: Bug 117061 & Bug 162753

emerge --info

Portage 2.1.3.7 (default-linux/amd64/2007.0, gcc-4.2.0, glibc-2.6.1-r0, 2.6.22-gentoo-r5 x86_64)
=================================================================
System uname: 2.6.22-gentoo-r5 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4200+
Gentoo Base System release 1.12.10
Timestamp of tree: Sat, 01 Sep 2007 03:20:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4, 2.5.1-r2
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.10-r4
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17-r1, 2.18
sys-devel/gcc-config: 1.4.0-r2
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ ftp://distro.ibiblio.org/pub/linux/distributions/gentoo/ http://distro.ibiblio.org/pub/linux/distributions/gentoo/ ftp://ftp.gtlib.gatech.edu/pub/gentoo http://www.gtlib.gatech.edu/pub/gentoo ftp://mirror.iawnet.sandia.gov/pub/gentoo/ ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://gentoo.chem.wisc.edu/gentoo/ ftp://gentoo.chem.wisc.edu/gentoo/ http://cudlug.cudenver.edu/gentoo/ http://gentoo.mirrors.pair.com/ ftp://gentoo.mirrors.pair.com/ http://gentoo.mirrors.tds.net/gentoo ftp://gentoo.mirrors.tds.net/gentoo http://mirror.datapipe.net/gentoo ftp://mirror.datapipe.net/gentoo http://mirror.usu.edu/mirrors/gentoo/ ftp://mirror.usu.edu/mirrors/gentoo/ http://mirror.phy.olemiss.edu/mirror/gentoo http://mirror.mcs.anl.gov/pub/gentoo/ ftp://mirror.mcs.anl.gov/pub/gentoo/ "
LINGUAS="en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 64bit 7zip X Xaw3d a52 aac aalib acl acpi administrator afs aim aimextras aio akode alsa amd64 amr ao aotuv apache apache2 apm applet arts asf async audacious audiofile authdaemond authfile autoipd automount backtrace bash-completion berkdb binfilter bitmap-fonts bittorrent bl bluetooth bonjour boost branding buttons bzip2 c3p0 cairo calendar cdaudio cdb cdda cddb cdparanoia cdr cdrom cg cgi cjk cli commons-digester console cpudetection cpufreq cpulimit cracklib crypt cscope css cups curl curlwrappers daap dbus dga directfb divx djbfft dmx dolby-record-switch dom4j double-precision dri dts dv dvd dvdnav dvdr dvdread dxr3 eds emoticon encode enscript esd excel exif expat extraicons fam fasttrack fbcon ffmpeg fftw firefox flac flash fmod font-server fontconfig fortran ftp fuse gb gcj gd gdb gdbm geos ggi gif ginac glitz glut gmedia gmp gmtfull gnokii gnome gnomecanvas gnutella gnutls gphoto2 gpm graphviz gs gsl gstreamer gtalk gtk gzip hal hddtemp html hwmixer icecast iconv icq id3 ieee1394 imagemagick imap imlib inifile insecure-savers irda isdnlog ithreads jack java java5 javascript jbig jce jikes jingle jmx jpeg jpeg2k kde kdexdeltas kdrive kerberos keyring lame lcms ldap libcaca libsamplerate libvisual libwww lirc live lm_sensors log4j logitech-mouse lua lzo mad maildir math md5sum meanwhile midi mikmod mime ming mjpeg mmap mmkeys mmx mmxext mng modperl modplug motif mouse mozdevelop mozilla mp2 mp3 mp4 mp4live mpeg mpeg2 msn mtp mudflap multicall multislot musepack musicbrainz mysql mysqli nas ncurses net netjack network njb nls nntp nptl nptlonly nsplugin nuv nvidia nvtv objc objc++ objc-gc odk offensive ogg openal openexr opengl openmp p2p pam pango pch pcntl pcre pdf perl php player plotutils png portaudio posix postproc ppds pppd pulseaudio python qq qt3 qt3support qt4 quicktime radio rar readline reflection rrdcgi rtc ruby samba sametime sasl sdl sdl-image sdl-sound seamonkey sensord serpentine session sharedext silc slp smtp sndfile soap sockets sound speex spell spl sqlite sqlite3 sse sse2 ssl startup-notification stream streamripper subversion svg svgz symlink sysfs syslog sysvipc tagwriting tcl tcpd tetex tga theora threads tidy tiff timidity tk tokenizer transcode trayicon truetype truetype-fonts tse3 type1-fonts unicode urandom usb userlocales v4l v4l2 vcd vda vhosts videos vim-syntax vim-with-x visualization vorbis vorbis-psy wav wavpack webdav wifi wma wmf wxwindows x264 xanim xcb xcomposite xface xforms xine xinerama xml xmlreader xmlrpc xmlwriter xorg xplanet xpm xprint xscreensaver xsl xv xvid xvmc yaepg yahoo yv12 zeroconf zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_US" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Daniel Santos





          2007-09-02 04:11:59 UTC
        

Strange, I was able to solve the problem by unmerging libconf and then remerging it :(  Oh yea, this came up in my revdep-rebuild list

Daniel




Comment 2


Jakub Moc (RETIRED)






          2007-09-02 07:30:44 UTC
        

Well, if you find a way to reproduce it, reopen.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

