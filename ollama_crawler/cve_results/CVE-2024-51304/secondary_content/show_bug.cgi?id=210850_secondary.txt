Title: 210850 – open() returns ETIME
URL: https://bugs.gentoo.org/show_bug.cgi?id=210850

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 210850
open() returns ETIME
Last modified: 2008-02-28 11:18:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 210850 
      - open() returns ETIME


Summary:
open() returns ETIME
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-02-20 08:57 UTC by Martin von Gagern





      Modified:
    
2008-02-28 11:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2008-02-20 08:57:08 UTC
        

rm -f ../lib/libdoxygen.a
ar cqs ../lib/libdoxygen.a ../objects/ce_lex.o ../objects/ce_parse.o ../objects/classdef.o ../objects/classlist.o ../objects/cmdmapper.o ../objects/code.o ../objects/commentcnv.o ../objects/cppvalue.o ../objects/debug.o ../objects/defgen.o ../objects/declinfo.o ../objects/defargs.o ../objects/define.o ../objects/definition.o ../objects/diagram.o ../objects/dirdef.o ../objects/docparser.o ../objects/docsets.o ../objects/doctokenizer.o ../objects/dot.o ../objects/doxygen.o ../objects/entry.o ../objects/filedef.o ../objects/filename.o ../objects/formula.o ../objects/ftvhelp.o ../objects/groupdef.o ../objects/htags.o ../objects/htmldocvisitor.o ../objects/htmlgen.o ../objects/htmlhelp.o ../objects/image.o ../objects/index.o ../objects/instdox.o ../objects/language.o ../objects/latexdocvisitor.o ../objects/latexgen.o ../objects/logos.o ../objects/mandocvisitor.o ../objects/mangen.o ../objects/marshal.o ../objects/memberdef.o ../objects/membergroup.o ../objects/memberlist.o ../objects/membername.o ../objects/message.o ../objects/msc.o ../objects/namespacedef.o ../objects/objcache.o ../objects/outputgen.o ../objects/outputlist.o ../objects/pagedef.o ../objects/perlmodgen.o ../objects/pngenc.o ../objects/pre.o ../objects/pycode.o ../objects/pyscanner.o ../objects/fortrancode.o ../objects/fortranscanner.o ../objects/reflist.o ../objects/rtfdocvisitor.o ../objects/rtfgen.o ../objects/rtfstyle.o ../objects/scanner.o ../objects/searchindex.o ../objects/store.o ../objects/tagreader.o ../objects/textdocvisitor.o ../objects/translator.o ../objects/util.o ../objects/version.o ../objects/vhdlcode.o ../objects/vhdldocgen.o ../objects/vhdlscanner.o ../objects/xmldocvisitor.o ../objects/xmlgen.o ../objects/commentscan.o
ar: ../objects/language.o: Timer expired
gmake[2]: *** [../lib/libdoxygen.a] Error 1

This is already with MAKEOPTS=-j1. The issue seems perfectly reproducible here.

Portage 2.1.4.4 (default-linux/x86/2007.0/desktop, gcc-4.2.3, glibc-2.7-r1, 2.6.24-gentoo i686)
=================================================================
System uname: 2.6.24-gentoo i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Timestamp of tree: Wed, 20 Feb 2008 01:46:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.3.6-r2, 2.4.4-r4, 2.5.1-r5
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.24
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=prescott -O2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=prescott -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo http://mirror.switch.ch/ftp/mirror/gentoo/"
LINGUAS="en de en_US en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/voip"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="X aac acl acpi adsl afm alsa apache2 arts auctex audiofile bash-completion bcmath berkdb bigger-fonts bitmap-fonts bzip2 bzlib c++ cairo cdparanoia cdr chroot cli cracklib crypt css cups curl dba dbus dhcp dlloader dnd doc dri dts dv dvd dvdr dvdread eds emacs emboss encode escreen esd ethereal evo exif faad fam fastcgi fbcon ffmpeg fftw firefox flac flatfile fortran ftp gcc-libffi gd gdbm gif gimp gimpprint gnutls gphoto2 gpm graphviz gs gstreamer gtk hal hbci i8x0 iconv idn imagemagick ipv6 isdnlog iso14755 ithreads jabber jack java jpeg jpeg2k kde kerberos ladspa latex lcms ldap leim lesstif lirc lm_sensors logrotate lzo lzw mad maildir mailwrapper mhash midi mikmod mime mjpeg mmx mng motif mozxmlterm mp3 mpeg mpeg2 mplayer mpm-worker mudflap mule mysql ncurses net network nls no-old-linux nptl nptlonly nsplugin odbc ofx ogg opengl openmp operanom2 oss pam pango pcre pdf perl php pic pie plotutils png postgres povray ppds pppd procmail python qt3 qt3support qt4 quicktime rdesktop readline real recode reflection sasl scanner sdl session smime sndfile snmp sockets socks5 sox speex spell spl sse sse2 ssl svg tcl tcpd tex threads thunderbird tiff tokenizer transcode translator truetype truetype-fonts type1 type1-fonts unicode usb userlocales utf8 v4l v4l2 vhosts vorbis win32codecs wmf x86 xanim xchattext xine xinerama xml xorg xscreensaver xv xvid xvmc zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias asis auth_basic auth_digest authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter filter headers include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_connect proxy_ftp proxy_http rewrite setenvif speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="prefork" ELIBC="glibc" FRITZCAPI_CARDS="fcpci" INPUT_DEVICES="evdev joystick keyboard mouse wacom" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de en_US en_GB" LIRC_DEVICES="hauppauge" MISDN_CARDS="avmfritz" USERLAND="GNU" VIDEO_CARDS="i810 fbdev v4l vesa vga"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


SpanKY






          2008-02-21 08:16:40 UTC
        

and if you go into the build dir and run `make` and/or `ar` by hand ?




Comment 2


Martin von Gagern





          2008-02-21 10:49:17 UTC
        

(In reply to comment #1)
> and if you go into the build dir and run `make` and/or `ar` by hand ?

Same thing when I run make or ar manually. strace tells me:
open("../objects/language.o", O_RDONLY|O_LARGEFILE) = -1 ETIME (Timer expired)

# ls -l ../objects/language.o
-rw-r--r-- 1 root root 3098196 Feb 21 10:52 ../objects/language.o
# wc -c ../objects/language.o
wc: ../objects/language.o: Timer expired
# stat ../objects/language.o 
  File: `../objects/language.o'
  Size: 3098196         Blocks: 6064       IO Block: 4096   regular file
Device: fe04h/65028d    Inode: 148517      Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2008-02-21 10:50:06.000000000 +0100
Modify: 2008-02-21 10:52:07.000000000 +0100
Change: 2008-02-21 10:52:07.000000000 +0100

Even switching PORTAGE_TMPDIR to another ext3 file system didn't help. I've never seen anything like this error before, but I get the feeling it might be a kernel thing. I couldn't find any documentation as to under what conditions open might return ETIME.




Comment 3


SpanKY






          2008-02-21 13:40:46 UTC
        

not a toolchain issue then ... that's the kernel pooping out on you




Comment 4


Daniel Drake (RETIRED)






          2008-02-26 14:18:12 UTC
        

Do you have any older kernels already built? For example, could you reboot into 2.6.23 and see if the bug also appears there, or something like that?




Comment 5


Martin von Gagern





          2008-02-26 15:36:21 UTC
        

(In reply to comment #4)
> Do you have any older kernels already built? For example, could you reboot into
> 2.6.23 and see if the bug also appears there, or something like that?

2.6.24-gentoo-r2 seems to work, at least I just got a successful compile of doxygen. Strange thing.





Comment 6


Daniel Drake (RETIRED)






          2008-02-26 15:43:25 UTC
        

Does rebooting back to 2.6.24-gentoo make the problem reappear?




Comment 7


Martin von Gagern





          2008-02-28 10:38:04 UTC
        

(In reply to comment #6)
> Does rebooting back to 2.6.24-gentoo make the problem reappear?

No, it still emerges all right.
It might well be that the reboot by itself solved the issue, not the change of kernel version. I hadn't rebooted between reproducing this issue before.




Comment 8


Daniel Drake (RETIRED)






          2008-02-28 11:18:30 UTC
        

Odd. Please reopen if it happens again









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

