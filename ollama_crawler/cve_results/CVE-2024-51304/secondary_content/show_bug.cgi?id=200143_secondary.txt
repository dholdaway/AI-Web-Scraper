Title: 200143 – net-nntp/hellanzb-0.13-r3 breaks if libnotify is enabled
URL: https://bugs.gentoo.org/show_bug.cgi?id=200143

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 200143
net-nntp/hellanzb-0.13-r3 breaks if libnotify is enabled
Last modified: 2008-01-15 15:56:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 200143 
      - net-nntp/hellanzb-0.13-r3 breaks if libnotify is enabled


Summary:
net-nntp/hellanzb-0.13-r3 breaks if libnotify is enabled
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-11-24 00:56 UTC by Karsten Hiddemann





      Modified:
    
2008-01-15 15:56 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



net-news









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karsten Hiddemann





          2007-11-24 00:56:31 UTC
        

I've been upgrading net-nntp/hellanzb-0.13-r1 to net-nntp/hellanzb-0.13-r3 a few days ago. Now I have to disable the notifications via libnotify or the program cannot start.

Reproducible: Always

Steps to Reproduce:
1. install latest version with libnotify use flag enabled
2. enable Hellanzb.LIBNOTIFY_NOTIFY in /etc/hellanzb.conf
3. start hellanzb.py

Actual Results:  
hellanzb v0.13 (config = /etc/hellanzb.conf)
hellanzb - Now monitoring queue...
[-] Unhandled Error
Traceback (most recent call last):
  File "/usr/lib/python2.4/site-packages/Hellanzb/Daemon.py", line 114, in initDaemon
    startNZBLeecher()
  File "/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/__init__.py", line 261, in startNZBLeecher
    reactor.run()
  File "/usr/lib/python2.4/site-packages/twisted/internet/posixbase.py", line 218, in run
    self.mainLoop()
  File "/usr/lib/python2.4/site-packages/twisted/internet/posixbase.py", line 226, in mainLoop
    self.runUntilCurrent()
--- <exception caught here> ---
  File "/usr/lib/python2.4/site-packages/twisted/internet/base.py", line 555, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File "/usr/lib/python2.4/site-packages/Hellanzb/Log.py", line 102, in notify
    libnotifyNotify(type, title, description, sticky)
  File "/usr/lib/python2.4/site-packages/Hellanzb/Log.py", line 114, in libnotifyNotify
    if not n.show():
gobject.GError: Process /usr/libexec/notification-daemon exited with status 127


Expected Results:  
no errors...

At the moment the only solution seems to be to disable Hellanzb.LIBNOTIFY_NOTIFY or downgrade. I think I'll downgrade since r3 doesn't seem to have undergone enough testing.




Comment 1


Alexis Ballier






          2007-11-24 10:42:18 UTC
        

what is your python version ?
it works fine here

can you give me: emerge --info
and the output of : equery files hellanzb
(from gentoolkit)

didn't you forget to run python-updater after a python upgrade ?




Comment 2


Karsten Hiddemann





          2007-11-24 11:11:17 UTC
        

# python -V
Python 2.4.4


# emerge --info
Portage 2.1.3.19 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.22-gentoo-r5 i686)
=================================================================
System uname: 2.6.22-gentoo-r5 i686 Intel(R) Pentium(R) M processor 1500MHz
Timestamp of tree: Fri, 23 Nov 2007 11:46:01 +0000
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://213.186.33.37/gentoo-distfiles/ ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://gd.tuwien.ac.at/opsys/linux/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
LINGUAS="de en"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 accessibility acl acpi alsa arts bash-completion berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dbus dri dts dvd dvdr dvdread eds emboss encode esd evo exif fam fbcon firefox fortran gdbm gif gnome gpm gtk hal iconv ipv6 isdnlog jpeg kde kerberos ldap libnotify mad midi mikmod mmx mozdevelop mp3 mpeg mudflap ncurses nls nptl nptlonly nsplugin ogg opengl openmp oss pam pcre pdf perl png pppd python qt3 qt3support qt4 quicktime rar readline reflection samba sdl session spamassassin spell spl sse sse2 ssl svg tcpd theora tiff truetype truetype-fonts type1-fonts unicode usb vorbis win32codecs wma x86 xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


# eix hella
[I] net-nntp/hellanzb
     Available versions:  (~)0.13-r3 {libnotify}
     Installed versions:  0.13-r3(03:45:40 PM 11/23/2007)(libnotify)
     Homepage:            http://www.hellanzb.com/
     Description:         Retrieves and processes .nzb files


# eix libnotify
[I] x11-libs/libnotify
     Available versions:  0.4.3 0.4.4 {doc}
     Installed versions:  0.4.4(05:33:14 PM 08/30/2007)(-doc)
     Homepage:            http://www.galago-project.org/
     Description:         Notifications library


# equery files hellanzb
[ Searching for packages matching hellanzb... ]
* Contents of net-nntp/hellanzb-0.13-r3:
/etc
/etc/conf.d
/etc/conf.d/hellanzb
/etc/hellanzb.conf.sample
/etc/init.d
/etc/init.d/hellanzb
/usr
/usr/bin
/usr/bin/hellanzb.py
/usr/lib
/usr/lib/python2.4
/usr/lib/python2.4/site-packages
/usr/lib/python2.4/site-packages/Hellanzb
/usr/lib/python2.4/site-packages/Hellanzb/Core.py
/usr/lib/python2.4/site-packages/Hellanzb/Daemon.py
/usr/lib/python2.4/site-packages/Hellanzb/Elite.py
/usr/lib/python2.4/site-packages/Hellanzb/Growl.py
/usr/lib/python2.4/site-packages/Hellanzb/HellaReactor.py
/usr/lib/python2.4/site-packages/Hellanzb/HellaXMLRPC
/usr/lib/python2.4/site-packages/Hellanzb/HellaXMLRPC/HtPasswdAuth.py
/usr/lib/python2.4/site-packages/Hellanzb/HellaXMLRPC/__init__.py
/usr/lib/python2.4/site-packages/Hellanzb/HellaXMLRPC/xmlrpc.py
/usr/lib/python2.4/site-packages/Hellanzb/Log.py
/usr/lib/python2.4/site-packages/Hellanzb/Logging.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBDownloader.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/ArticleDecoder.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/DupeHandler.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/NZBLeecherUtil.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/NZBModel.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/NZBParser.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/NZBSegmentQueue.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/Protocol.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/__init__.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBLeecher/nntp.py
/usr/lib/python2.4/site-packages/Hellanzb/NZBQueue.py
/usr/lib/python2.4/site-packages/Hellanzb/NewzbinDownloader.py
/usr/lib/python2.4/site-packages/Hellanzb/PostProcessor.py
/usr/lib/python2.4/site-packages/Hellanzb/PostProcessorUtil.py
/usr/lib/python2.4/site-packages/Hellanzb/SmartPar.py
/usr/lib/python2.4/site-packages/Hellanzb/Util.py
/usr/lib/python2.4/site-packages/Hellanzb/__init__.py
/usr/lib/python2.4/site-packages/Hellanzb/external
/usr/lib/python2.4/site-packages/Hellanzb/external/__init__.py
/usr/lib/python2.4/site-packages/Hellanzb/external/elementtree
/usr/lib/python2.4/site-packages/Hellanzb/external/elementtree/SimpleXMLWriter.py
/usr/lib/python2.4/site-packages/Hellanzb/external/elementtree/__init__.py
/usr/share
/usr/share/doc
/usr/share/doc/hellanzb-0.13-r3
/usr/share/doc/hellanzb-0.13-r3/CHANGELOG.bz2
/usr/share/doc/hellanzb-0.13-r3/CREDITS.bz2
/usr/share/doc/hellanzb-0.13-r3/PKG-INFO.bz2
/usr/share/doc/hellanzb-0.13-r3/README.bz2





Comment 3


Alexis Ballier






          2007-11-24 11:37:43 UTC
        

hmm by the time I install python 2.4 on a box, could you please try to reinstall notify-python ?

If it still fails, could you please try to isolate which patch added to -r3 makes it fail ? (By commenting them in the ebuild)




Comment 4


Alexis Ballier






          2007-11-25 16:21:15 UTC
        

just tried in a stable chroot with python 2.4, and its fine, I even get the notifications outside of the chroot

$ python -V
Python 2.4.4

[ebuild   R   ] dev-lang/python-2.4.4-r6  USE="ipv6 ncurses readline ssl -berkdb -bootstrap -build -doc -examples -gdbm -nocxx -nothreads -tk -ucs2" 0 kB 
[ebuild   R   ] dev-python/twisted-2.4.0  USE="crypt -gtk -serial" 0 kB 
[ebuild   R   ] dev-python/notify-python-0.1.1  0 kB 
[ebuild   R   ] net-nntp/hellanzb-0.13-r3  USE="libnotify" 0 kB 





Comment 5


Alexis Ballier






          2007-12-02 20:49:32 UTC
        

no more answer ?

please reopen with more info




Comment 6


Karsten Hiddemann





          2008-01-15 15:56:49 UTC
        

Sorry, forgot to update this: Can't reproduce the problem anymore and it works now for me, thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

