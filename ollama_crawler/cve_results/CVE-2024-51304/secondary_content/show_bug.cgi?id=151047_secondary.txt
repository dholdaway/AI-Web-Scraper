Title: 151047 – sys-apps/coreutils: make check fails while 'diff progs-makefile progs-readme' on hardened
URL: https://bugs.gentoo.org/show_bug.cgi?id=151047

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 151047
sys-apps/coreutils: make check fails while 'diff progs-makefile progs-readme' on hardened
Last modified: 2006-11-10 23:16:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 151047 
      - sys-apps/coreutils: make check fails while 'diff progs-makefile progs-readme' on hardened


Summary:
sys-apps/coreutils: make check fails while 'diff progs-makefile progs-readme'...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

153562

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-10-12 10:50 UTC by Dustin Polke





      Modified:
    
2006-11-10 23:16 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bart









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,5.38 KB,
                text/plain)

            
2006-10-12 10:58 UTC,

            Dustin Polke




Details





Patch to README file

              (README.patch,847 bytes,
                patch)

            
2006-10-12 16:07 UTC,

            Dustin Polke




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dustin Polke





          2006-10-12 10:50:53 UTC
        

Here is complete output of make check:

Making check in lib
make[1]: Entering directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/lib'
./t-fpending > /dev/null
make  check-am
make[2]: Entering directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/lib'
make[2]: Nothing to be done for `check-am'.
make[2]: Leaving directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/lib'
make[1]: Leaving directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/lib'
Making check in src
make[1]: Entering directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/src'
rm -rf progs-readme progs-makefile
echo [ chgrp chown chmod chcon cp dd dircolors du ginstall link ln dir vdir ls mkdir mkfifo mknod mv nohup readlink r
m rmdir shred stat sync touch unlink cat cksum comm csplit cut expand fmt fold head join md5sum nl od paste pr ptx sh
a1sum sort split sum tac tail tr tsort unexpand uniq wc basename date dirname echo env expr factor false hostname id 
kill logname pathchk printenv printf pwd runcon seq sleep tee test true tty whoami yes uname chroot hostid nice pinky
 users who uptime stty df groups chroot df hostid nice pinky stty su uname uptime users who \
         | tr -s ' ' '\n' | sed -e 's,$,,' \
         | LC_ALL=C sort -u > progs-makefile && \
        sed -n '/^The programs .* are:/,/^[a-zA-Z]/p' ../README \
          | sed -n '/^   */s///p' | tr -s ' ' '\n' > progs-readme
diff progs-makefile progs-readme && rm -rf progs-readme progs-makefile
4d3
< chcon
61d59
< runcon
make[1]: *** [check-README] Error 1
make[1]: Leaving directory `/var/tmp/portage/coreutils-5.94-r1/work/coreutils-5.94/src'
make: *** [check-recursive] Error 1

!!! ERROR: sys-apps/coreutils-5.94-r1 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_test
  ebuild.sh, line 986:   Called src_test
  coreutils-5.94-r1.ebuild, line 114:   Called die

I tried 5.2.1-r7 as well. It dies with the same error.




Comment 1


Dustin Polke





          2006-10-12 10:58:05 UTC
        

Created attachment 99455 [details]
emerge --info




Comment 2


Dustin Polke





          2006-10-12 16:06:58 UTC
        

The attached patch solves the problem.
Before performing any test it is checked whether all programs listed in the README file are available. Unfortunately, chcon and runcon are not listed in the README but exist when compiled with USE=selinux. Adding them in the README makes the diff successfully.

Tests then passed without failure.




Comment 3


Dustin Polke





          2006-10-12 16:07:45 UTC
        

Created attachment 99484 [details, diff]
Patch to README file




Comment 4


Jakub Moc (RETIRED)






          2006-10-31 08:37:36 UTC
        

*** Bug 153562 has been marked as a duplicate of this bug. ***




Comment 5


SpanKY






          2006-11-10 23:16:29 UTC
        

fixed in coreutils-6.4









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

