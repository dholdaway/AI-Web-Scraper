Title: 306217 – media-gfx/splashutils-1.5.4.3 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=306217

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 306217
media-gfx/splashutils-1.5.4.3 fails to build
Last modified: 2011-01-08 18:01:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 306217 
      - media-gfx/splashutils-1.5.4.3 fails to build


Summary:
media-gfx/splashutils-1.5.4.3 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Michal Januszewski (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-02-21 17:23 UTC by Mattes





      Modified:
    
2011-01-08 18:01 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jdasmith
thomas









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mattes





          2010-02-21 17:23:31 UTC
        

fbsplashctl-daemon.o: In function `dcr_filter':                                                                                                                                              
daemon.c:(.text+0x1e): undefined reference to `__isoc99_sscanf'                                                                                                                              
fbsplashctl-daemon.o: In function `daemon_start':                                                                                                                                            
daemon.c:(.text+0xb28): undefined reference to `__isoc99_fscanf'                                                                                                                             
./.libs/libfbsplashrender.a(libfbsplashrender_la-libfbsplashrender.o): In function `fbsplashr_input_init':                                                                                   
libfbsplashrender.c:(.text+0x10c7): undefined reference to `__isoc99_fscanf'                                                                                                                 
libfbsplashrender.c:(.text+0x113a): undefined reference to `__isoc99_sscanf'                                                                                                                 
./.libs/libfbsplashrender.a(libfbsplashrender_la-common.o): In function `dev_create':                                                                                                        
common.c:(.text+0x58e): undefined reference to `__isoc99_sscanf'                                                                                                                             
/var/tmp/portage/media-gfx/splashutils-1.5.4.3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_profile':                                              
libfbsplash.c:(.text+0x5d): undefined reference to `__isoc99_fscanf'                                                                                                                         
/var/tmp/portage/media-gfx/splashutils-1.5.4.3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_check_daemon':                                         
libfbsplash.c:(.text+0x558): undefined reference to `__isoc99_fscanf'                                                                                                                        
libfbsplash.c:(.text+0x5bb): undefined reference to `__isoc99_fscanf'                                                                                                                        
/var/tmp/portage/media-gfx/splashutils-1.5.4.3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_get_res':                                              
libfbsplash.c:(.text+0xc45): undefined reference to `__isoc99_sscanf'                                                                                                                        
/usr/lib/libjpeg.a(jmemmgr.o): In function `jinit_memory_mgr':                                                                                                                               
(.text+0x587): undefined reference to `__isoc99_sscanf'                                                                                                                                      
collect2: ld returned 1 exit status                                                                                                                                                          
make[4]: *** [fbsplashctl] Error 1                                                                                                                                                           
make[3]: *** [all-recursive] Error 1                                                                                                                                                         
make[2]: *** [all] Error 2                                                                                                                                                                   
make[1]: *** [all-recursive] Error 1                                                                                                                                                         
make: *** [all] Error 2                                                                                                                                                                      
 * ERROR: media-gfx/splashutils-1.5.4.3 failed:                                                                                                                                              
 *   failed to build splashutils                                                                                                                                                             
 *                                                                                                                                                                                           
 * Call stack:                                                                                                                                                                               
 *     ebuild.sh, line  48:  Called src_compile                                                                                                                                              
 *   environment, line 2939:  Called die                                                                                                                                                     
 * The specific snippet of code:                                                                                                                                                             
 *       emake CC="${CC}" STRIP="true" || die "failed to build splashutils";                                                                                                                 
 *                                                                                                                                                                                           
 * If you need support, post the output of 'emerge --info =media-gfx/splashutils-1.5.4.3',                                                                                                   
 * the complete build log and the output of 'emerge -pqv =media-gfx/splashutils-1.5.4.3'.                                                                                                    
 * The complete build log is located at '/var/log/portage/media-gfx:splashutils-1.5.4.3:20100221-171455.log'.                                                                                
 * The ebuild environment file is located at '/var/tmp/portage/media-gfx/splashutils-1.5.4.3/temp/environment'.                                                                              
 * S: '/var/tmp/portage/media-gfx/splashutils-1.5.4.3/work/splashutils-1.5.4.3'





Reproducible: Always

Steps to Reproduce:
emerge splashutils-1.5.4.3
Actual Results:  
see Description

Expected Results:  
builds

 emerge --info =media-gfx/splashutils-1.5.4.3                                                 
Portage 2.2_rc62 (default/linux/x86/10.0/desktop, gcc-4.3.4, glibc-2.10.1-r1, 2.6.32-zen6 i686)               
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.32-zen6-i686-Intel-R-_Core-TM-2_Duo_CPU_E6750_@_2.66GHz-with-gentoo-1.12.13
Timestamp of tree: Sun, 21 Feb 2010 16:15:03 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.4
dev-python/pycrypto: 2.1.0_beta1
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc:       4.3.4
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.29
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="*"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer -msse3"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /home/mat /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/init.d /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer -msse3"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests buildsyspkg ccache collision-protect distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp.uni-erlangen.de/pub/mirrors/gentoo http://gentoo.mirror.solnet.ch http://gd.tuwien.ac.at/opsys/linux/gentoo http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo"
LANG="de_DE@euro"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise /usr/local/portage /usr/local/berkano"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="X a52 aac ac3 acl acpi alsa bash-completion berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt cups cxx dbus directfb divx dts dvb dvd dvdr dvdread eds emboss encode evo fam firefox flac fortran gdbm gif glib gnome gpm gstreamer gtk hal iconv ip1000 ipv6 irmc java jpeg kde latex ldap libnotify mad matroska mikmod mmx mng modules mp3 mp4 mpeg mudflap ncurses nls nptl nptlonly ntfs nvidiaoqt3 ogg openal opengl openmp pam pcre pdf perl plasma png ppds pppd python qt qt3support qt4 quicktime readline reflection restrict-javascript rss samba sdl session smt spell spl sse sse2 ssl ssse3 startup-notification svg sysfs tcpd theora threads thunar tiff tk tools truetype unicode usb v4l v4l2 vdpau vorbis win32codecs x264 x86 xcomposite xml xorg xulrunner xv xvid zlib" ALSA_CARDS="emu10k1 emu10k1x" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

media-gfx/splashutils-1.5.4.3 was built with the following:
USE="fbcondecor gpm mng png truetype -hardened"




Comment 1


Michal Januszewski (RETIRED)






          2010-03-02 21:12:22 UTC
        

It looks like a problem outside of splashutils.  Some people on the forums (http://forums.gentoo.org/viewtopic-t-796110.html) had luck with the following procedure:

- emerge -C splash-themes-gentoo 
- emerge -Duv world 
- revdep-rebuild 
- emerge -1 jpeg 
- emerge splashutils 
- emerge splash-themes-gentoo

Could you please try that?




Comment 2


Mattes





          2010-03-04 20:33:29 UTC
        

Hello Michal,

I've tryed what aou proposed, but it doesnt work. I extensively  searched the web and forums before posting this bug. nothing I've found worked. 

Everything else compiles fine on my system. Its almost x86, there are only very few ~x86 packages installed. All @system packages are X86. 

Regards mattes




Comment 3


Mattes





          2010-03-09 13:37:59 UTC
        

I've remerged @system last night, no Problems. Compiling simple demo App using sscanf works fine also.







Comment 4


Michal Januszewski (RETIRED)






          2010-03-09 15:48:46 UTC
        

Could you please check whether you get the same error with splashutils-1.5.4.3-r2?




Comment 5


Mattes





          2010-03-09 17:25:34 UTC
        

now its a bit different:

daemon.c: In function 'thf_switch_ttymon':                                                                                                                                                   
daemon.c:439: warning: ignoring return value of 'read', declared with attribute warn_unused_result                                                                                           
daemon.c: In function 'daemon_start':                                                                                                                                                        
daemon.c:615: warning: ignoring return value of 'chdir', declared with attribute warn_unused_result                                                                                          
  LD      fbcondecor_helper                                                                                                                                                                  
fbsplashctl-daemon.o: In function `dcr_filter':                                                                                                                                              
daemon.c:(.text+0x1e): undefined reference to `__isoc99_sscanf'                                                                                                                              
fbsplashctl-daemon.o: In function `daemon_start':                                                                                                                                            
daemon.c:(.text+0xb28): undefined reference to `__isoc99_fscanf'                                                                                                                             
./.libs/libfbsplashrender.a(libfbsplashrender_la-libfbsplashrender.o): In function `fbsplashr_input_init':                                                                                   
libfbsplashrender.c:(.text+0x10c7): undefined reference to `__isoc99_fscanf'                                                                                                                 
libfbsplashrender.c:(.text+0x113a): undefined reference to `__isoc99_sscanf'                                                                                                                 
./.libs/libfbsplashrender.a(libfbsplashrender_la-common.o): In function `dev_create':                                                                                                        
common.c:(.text+0x58e): undefined reference to `__isoc99_sscanf'                                                                                                                             
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_profile':                                           
libfbsplash.c:(.text+0x5d): undefined reference to `__isoc99_fscanf'                                                                                                                         
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_check_daemon':                                      
libfbsplash.c:(.text+0x558): undefined reference to `__isoc99_fscanf'                                                                                                                        
libfbsplash.c:(.text+0x5bb): undefined reference to `__isoc99_fscanf'                                                                                                                        
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_get_res':                                           
libfbsplash.c:(.text+0xc45): undefined reference to `__isoc99_sscanf'                                                                                                                        
/usr/lib/libjpeg.a(jmemmgr.o): In function `jinit_memory_mgr':                                                                                                                               
(.text+0x587): undefined reference to `__isoc99_sscanf'                                                                                                                                      
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0x37): undefined reference to `__syslog_chk'                                                                                                                                          
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0x53): undefined reference to `__vsyslog_chk'                                                                                                                                         
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0x98): undefined reference to `__syslog_chk'                                                                                                                                          
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0xb8): undefined reference to `__vsyslog_chk'                                                                                                                                         
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0xea): undefined reference to `__syslog_chk'                                                                                                                                          
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':                                                                                              
(.text+0x106): undefined reference to `__vsyslog_chk'                                                                                                                                        
collect2: ld returned 1 exit status                                                                                                                                                          
make[4]: *** [fbsplashctl] Error 1           




Comment 6


Mattes





          2010-03-09 17:29:14 UTC
        

as posted before: "All @system packages are X86." was a mistake, portage is 2.2_rc65 









Comment 7


Michal Januszewski (RETIRED)






          2010-04-04 14:09:59 UTC
        

Could you please try reinstalling klibc?  If it doesn't help, could you please to upgrade it to the latest version (~arch)?




Comment 8


Mattes





          2010-04-10 20:41:25 UTC
        

Hello Michal,

klibc is 1.5.15-r1 now, splashutils still doesn't compile :-(

MAKE    libjpeg.a                                                                                                                                                                          
/usr/bin/ld: warning: cannot find entry symbol main; defaulting to 0000000008048120                                                                                                          
Making all in src                                                                                                                                                                            
  CREATE  fbsplash.h                                                                                                                                                                         
Making all in .                                                                                                                                                                              
libfbsplash.c: In function 'fbsplash_parse_kcmdline':                                                                                                                                        
libfbsplash.c:177: warning: ignoring return value of 'fgets', declared with attribute warn_unused_result                                                                                     
libfbsplash.c: In function 'fbsplash_cache_cleanup':                                                                                                                                         
libfbsplash.c:497: warning: ignoring return value of 'system', declared with attribute warn_unused_result                                                                                    
libfbsplash.c: In function 'fbsplash_check_sanity':                                                                                                                                          
libfbsplash.c:570: warning: ignoring return value of 'fgets', declared with attribute warn_unused_result                                                                                     
libfbsplash.c: In function 'fbsplash_set_evdev':                                                                                                                                             
libfbsplash.c:614: warning: ignoring return value of 'fgets', declared with attribute warn_unused_result                                                                                     
libfbsplash.c: In function 'fbsplash_profile':                                                                                                                                               
libfbsplash.c:649: warning: ignoring return value of 'fscanf', declared with attribute warn_unused_result                                                                                    
libfbsplash.c: In function 'fbsplash_send':                                                                                                                                                  
libfbsplash.c:695: warning: format not a string literal and no format arguments                                                                                                              
libfbsplashrender.c: In function 'fbsplashr_input_init':                                                                                                                                     
libfbsplashrender.c:216: warning: ignoring return value of 'fscanf', declared with attribute warn_unused_result                                                                              
libfbsplashrender.c: In function 'vt_cursor_disable':                                                                                                                                        
libfbsplashrender.c:593: warning: ignoring return value of 'write', declared with attribute warn_unused_result                                                                               
libfbsplashrender.c: In function 'vt_cursor_enable':                                                                                                                                         
libfbsplashrender.c:598: warning: ignoring return value of 'write', declared with attribute warn_unused_result                                                                               
libfbsplashrender.c: In function 'fbsplashr_tty_silent_init':                                                                                                                                
libfbsplashrender.c:627: warning: ignoring return value of 'write', declared with attribute warn_unused_result                                                                               
common.c: In function 'dev_create':                                                                                                                                                          
common.c:47: warning: ignoring return value of 'read', declared with attribute warn_unused_result                                                                                            
image.c: In function 'is_png':                                                                                                                                                               
image.c:171: warning: ignoring return value of 'fread', declared with attribute warn_unused_result                                                                                           
ttf.c: In function 'text_get_output':                                                                                                                                                        
ttf.c:676: warning: ignoring return value of 'pipe', declared with attribute warn_unused_result                                                                                              
ttf.c:687: warning: ignoring return value of 'dup', declared with attribute warn_unused_result                                                                                               
  CC      fbcondecor_helper-kernel.o                                                                                                                                                         
  CC      fbcondecor_helper-libfbsplash.o                                                                                                                                                    
  CC      fbcondecor_helper-libfbsplashrender.o                                                                                                                                              
daemon.c: In function 'thf_switch_ttymon':                                                                                                                                                   
daemon.c:476: warning: ignoring return value of 'read', declared with attribute warn_unused_result                                                                                           
daemon.c: In function 'daemon_start':                                                                                                                                                        
daemon.c:652: warning: ignoring return value of 'chdir', declared with attribute warn_unused_result                                                                                          
  CC      fbcondecor_helper-fbcon_decor.o                                                                                                                                                    
  CC      fbcondecor_helper-common.o                                                                                                                                                         
  CC      fbcondecor_helper-parse.o                                                                                                                                                          
  CC      fbcondecor_helper-list.o                                                                                                                                                           
  CC      fbcondecor_helper-render.o                                                                                                                                                         
  CC      fbcondecor_helper-image.o                                                                                                                                                          
  CC      fbcondecor_helper-effects.o                                                                                                                                                        
  CC      fbcondecor_helper-ttf.o                                                                                                                                                            
  CREATE  libfbsplash.pc
  CREATE  libfbsplashrender.pc
daemon.c: In function 'thf_switch_ttymon':
daemon.c:476: warning: ignoring return value of 'read', declared with attribute warn_unused_result
daemon.c: In function 'daemon_start':
daemon.c:652: warning: ignoring return value of 'chdir', declared with attribute warn_unused_result
  LD      fbcondecor_helper
fbsplashctl-daemon.o: In function `dcr_filter':
daemon.c:(.text+0x1e): undefined reference to `__isoc99_sscanf'
fbsplashctl-daemon.o: In function `daemon_start':
daemon.c:(.text+0xbd8): undefined reference to `__isoc99_fscanf'
./.libs/libfbsplashrender.a(libfbsplashrender_la-libfbsplashrender.o): In function `fbsplashr_input_init':
libfbsplashrender.c:(.text+0x10c7): undefined reference to `__isoc99_fscanf'
libfbsplashrender.c:(.text+0x113a): undefined reference to `__isoc99_sscanf'
./.libs/libfbsplashrender.a(libfbsplashrender_la-common.o): In function `dev_create':
common.c:(.text+0x58e): undefined reference to `__isoc99_sscanf'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_profile':
libfbsplash.c:(.text+0x5d): undefined reference to `__isoc99_fscanf'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_check_daemon':
libfbsplash.c:(.text+0x558): undefined reference to `__isoc99_fscanf'
libfbsplash.c:(.text+0x5bb): undefined reference to `__isoc99_fscanf'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r2/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_get_res':
libfbsplash.c:(.text+0xc45): undefined reference to `__isoc99_sscanf'
/usr/lib/libjpeg.a(jmemmgr.o): In function `jinit_memory_mgr':
(.text+0x587): undefined reference to `__isoc99_sscanf'
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../libgpm.a(report-lib.o): In function `gpm_report':
(.text+0x37): undefined reference to `__syslog_chk'





Comment 9


Jonathan Smith





          2010-08-09 16:24:44 UTC
        

I am seeing this too when I try to emerge -aev world following a gcc upgrade.

My emerge --info...

Portage 2.1.8.3 (default/linux/amd64/10.0, gcc-4.4.3, glibc-2.11.2-r0, 2.6.34-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.34-gentoo-r1-x86_64-AMD_Athlon-tm-_64_Processor_3500+-with-gentoo-1.12.13
Timestamp of tree: Mon, 09 Aug 2010 12:15:02 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
ccache version 2.3 [disabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 1.3.7-r1, 2.1.11
dev-lang/python:     2.4.4-r13, 2.5.4-r3, 2.6.5-r2, 3.1.2-r3
dev-util/ccache:     2.3
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       3.4.6-r2, 4.1.2, 4.3.2-r3, 4.3.4, 4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 sun-bcla-java-vm skype-eula AdobeFlash-10.1"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php4/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php4/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php4/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O -pipe"
DISTDIR="/home/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_GB"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 arts bash-completion berkdb bluetooth bzip2 cli cracklib crypt cups cxx dbus dri dvd emacs fbcondecor fortran fuse gdbm gif gnome gpm gstreamer gtk hal iconv imagemagick ipv6 java java5 java6 jpeg kde kerberos ldap mmx modules mono mp3 mudflap multilib mysql ncurses nls nptl nptlonly odbc ogg opengl openmp pam pcre perl php png pppd python qt3support qt4 readline reflection ruby samba sdl session speex spell spl sse sse2 ssl sysfs tcpd threads tiff truetype unicode v4l vorbis xml xorg zlib" ALSA_CARDS="intel8x0 hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev " KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" RUBY_TARGETS="ruby18" SANE_BACKENDS="plustek" USERLAND="GNU" VIDEO_CARDS="fbdev radeon vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 10


Vince C.





          2010-08-29 14:37:52 UTC
        

Here's the error I get about media-gfx/splashutils-1.5.4.3-r3 (using libjpeg-1.4):

>>> Compiling source in /var/tmp/portage/media-gfx/splashutils-1.5.4.3-r3/work/splashutils-1.5.4.3 ...
make -j3 CC=x86_64-pc-linux-gnu-gcc STRIP=true 
make --silent all-recursive
Making all in libs
  CONF    libz.a
  CONF    libjpeg.a
  CONF    libfreetype.a
  MAKE    zlib.a
  CONF    libpng.a
  MAKE    libpng.a
  MAKE    libfreetype.a
  MAKE    libjpeg.a
/usr/bin/ld: warning: cannot find entry symbol main; defaulting to 0000000000400200
Making all in src
  CREATE  fbsplash.h
Making all in .
libfbsplashrender.c: In function ‘fbsplashr_input_init’:
libfbsplashrender.c:216: warning: ignoring return value of ‘fscanf’, declared with attribute warn_unused_result
libfbsplashrender.c: In function ‘vt_cursor_disable’:
libfbsplashrender.c:593: warning: ignoring return value of ‘write’, declared with attribute warn_unused_result
libfbsplashrender.c: In function ‘vt_cursor_enable’:
libfbsplashrender.c:598: warning: ignoring return value of ‘write’, declared with attribute warn_unused_result
libfbsplashrender.c: In function ‘fbsplashr_tty_silent_init’:
libfbsplashrender.c:627: warning: ignoring return value of ‘write’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_parse_kcmdline’:
libfbsplash.c:177: warning: ignoring return value of ‘fgets’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_cache_cleanup’:
libfbsplash.c:497: warning: ignoring return value of ‘system’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_check_sanity’:
libfbsplash.c:570: warning: ignoring return value of ‘fgets’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_set_evdev’:
libfbsplash.c:614: warning: ignoring return value of ‘fgets’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_profile’:
libfbsplash.c:649: warning: ignoring return value of ‘fscanf’, declared with attribute warn_unused_result
libfbsplash.c: In function ‘fbsplash_send’:
libfbsplash.c:695: warning: format not a string literal and no format arguments
common.c: In function ‘dev_create’:
common.c:47: warning: ignoring return value of ‘read’, declared with attribute warn_unused_result
image.c: In function ‘load_png’:
image.c:64: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:67: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:68: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:71: warning: ‘bit_depth’ is deprecated (declared at /usr/include/libpng14/png.h:651)
image.c:74: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:78: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:84: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:84: warning: ‘color_type’ is deprecated (declared at /usr/include/libpng14/png.h:653)
image.c:96: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:96: warning: ‘height’ is deprecated (declared at /usr/include/libpng14/png.h:640)
image.c:100: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:101: warning: ‘height’ is deprecated (declared at /usr/include/libpng14/png.h:640)
image.c:117: warning: ‘height’ is deprecated (declared at /usr/include/libpng14/png.h:640)
image.c:119: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:121: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:130: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:142: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c:143: warning: ‘width’ is deprecated (declared at /usr/include/libpng14/png.h:639)
image.c: In function ‘is_png’:
image.c:171: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result
ttf.c: In function ‘text_get_output’:
ttf.c:676: warning: ignoring return value of ‘pipe’, declared with attribute warn_unused_result
ttf.c:687: warning: ignoring return value of ‘dup’, declared with attribute warn_unused_result
  CC      fbcondecor_helper-kernel.o
daemon.c: In function ‘thf_switch_ttymon’:
daemon.c:476: warning: ignoring return value of ‘read’, declared with attribute warn_unused_result
daemon.c: In function ‘daemon_start’:
daemon.c:652: warning: ignoring return value of ‘chdir’, declared with attribute warn_unused_result
  CC      fbcondecor_helper-libfbsplash.o
  CC      fbcondecor_helper-libfbsplashrender.o
  CC      fbcondecor_helper-fbcon_decor.o
  CC      fbcondecor_helper-common.o
  CC      fbcondecor_helper-parse.o
  CC      fbcondecor_helper-list.o
  CC      fbcondecor_helper-render.o
  CC      fbcondecor_helper-image.o
  CC      fbcondecor_helper-effects.o
  CC      fbcondecor_helper-ttf.o
  CREATE  libfbsplash.pc
  CREATE  libfbsplashrender.pc
daemon.c: In function ‘thf_switch_ttymon’:
daemon.c:476: warning: ignoring return value of ‘read’, declared with attribute warn_unused_result
daemon.c: In function ‘daemon_start’:
daemon.c:652: warning: ignoring return value of ‘chdir’, declared with attribute warn_unused_result
  LD      fbcondecor_helper
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../x86_64-pc-linux-gnu/bin/ld: attempted static link of dynamic object `/usr/lib64/libjpeg.so'
collect2: ld returned 1 exit status
make[4]: *** [fbsplashctl] Error 1
make[4]: *** Waiting for unfinished jobs....
make[3]: *** [all-recursive] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2

Recompiling klibc beforehand didn't help either.




Comment 11


Michal Januszewski (RETIRED)






          2010-08-30 07:27:55 UTC
        

Do you have media-libs/jpeg emerged with the 'static-libs' USE flag?  A dep on this USE flag has recently been added to splashutils to fix some compilation problems. 




Comment 12


Jonathan Smith





          2010-08-30 21:35:40 UTC
        

(In reply to comment #11)
> Do you have media-libs/jpeg emerged with the 'static-libs' USE flag?  A dep on
> this USE flag has recently been added to splashutils to fix some compilation
> problems. 
> 
I have tried with and without this. In some more recent attempts to build have the same 
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../x86_64-pc-linux-gnu/bin/ld:
attempted static link of dynamic object `/usr/lib64/libjpeg.so'
problem reported in #10.
but last time I tried an emerge -evDN world I was back to an error file like the OP:
fbsplashctl-daemon.o: In function `dcr_filter':                                                                                                           
daemon.c:(.text+0x18): undefined reference to `__isoc99_sscanf'                                                                                           






Comment 13


Michal Januszewski (RETIRED)






          2010-09-30 15:41:18 UTC
        

Is this still a problem?  If so, could you please post the current error messages you are getting, along with the current output of `emerge --info`?




Comment 14


thomas





          2010-09-30 21:36:32 UTC
        

I also fails to compile for me, but because it can't find lcms:

/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/../../../../i686-pc-linux-gnu/bin/ld: cannot find -llcms

I already did "revdep-rebuild", "lafilefixer --justfixit" and "emerge -1 lcms:0".

emerge --info:

Portage 2.1.8.3 (default/linux/x86/10.0, gcc-4.3.4, glibc-2.11.2-r0, 2.6.29-gentoo-r5 i686)
=================================================================
System uname: Linux-2.6.29-gentoo-r5-i686-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_3800+-with-gentoo-1.12.13
Timestamp of tree: Wed, 29 Sep 2010 21:15:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.1_p7
dev-java/java-config: 1.3.7-r1, 2.1.11
dev-lang/python:     2.4.4-r9, 2.5.4-r2, 2.6.5-r3, 3.1.2-r4
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.1.2, 4.3.4, 4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer -fno-ident"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer -fno-ident"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests ccache distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ "
LANG="de_DE.UTF-8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,-O1"
LINGUAS="de en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/kde-sunset /usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa asf avahi berkdb bzip2 cairo cdr cli cracklib crypt cups cxx dbus dga divx dri dts dvb dvd dvdr dvdread eds emboss encode esd evo exif expat fam fame ffmpeg fftw firefox fortran gdbm gif glitz gpm gstreamer gtk hal iconv imagemagick ipv6 java joystick jpeg jpeg2k kde kerberos lcd lcms ldap libc-omitfp lirc lm_sensors lzo mad mdnsresponder-compat mikmod mjpeg mmx modules mp3 mpeg mplayer mudflap mysql mysqli ncurses nls nptl nptlonly nsplugin nvidia ogg opengl openmp openssh pam pcre pdf perl png pppd python qt3 qt3support qt4 quicktime readline reflection sdl session spell sse ssl svg sysfs tcpd theora tiff transcode truetype unicode ups usb v4l v4l2 vcd vorbis win32codecs x264 x86 xine xml xorg xv xvid zlib" ALSA_CARDS="emu10k1" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse joystick evdev" KERNEL="linux" LCD_DEVICES="cfontz ncurses text" LINGUAS="de en" LIRC_DEVICES="serial" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 15


endlessmike





          2010-10-01 12:59:53 UTC
        

I was receiving the same error, I resolved it by disabling the mng use flag for splashutils.




Comment 16


Jonathan Smith





          2010-10-03 15:41:13 UTC
        

I'm still seeing a normal build until here:

daemon.c:476: warning: ignoring return value of 'read', declared with attribute warn_unused_result
daemon.c: In function 'daemon_start':
daemon.c:652: warning: ignoring return value of 'chdir', declared with attribute warn_unused_result
fbsplashctl-daemon.o: In function `dcr_filter':
daemon.c:(.text+0x18): undefined reference to `__isoc99_sscanf'
fbsplashctl-daemon.o: In function `daemon_start':
daemon.c:(.text+0x956): undefined reference to `__isoc99_fscanf'
./.libs/libfbsplashrender.a(libfbsplashrender_la-libfbsplashrender.o): In function `fbsplashr_input_init':
libfbsplashrender.c:(.text+0xf69): undefined reference to `__isoc99_fscanf'
libfbsplashrender.c:(.text+0xf95): undefined reference to `__isoc99_sscanf'
./.libs/libfbsplashrender.a(libfbsplashrender_la-common.o): In function `dev_create':
common.c:(.text+0x466): undefined reference to `__isoc99_sscanf'
./.libs/libfbsplashrender.a(libfbsplashrender_la-image.o): In function `load_png':
image.c:(.text+0x3b0): undefined reference to `__longjmp_chk'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_profile':
libfbsplash.c:(.text+0xb0): undefined reference to `__isoc99_fscanf'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_check_daemon':
libfbsplash.c:(.text+0x620): undefined reference to `__isoc99_fscanf'
libfbsplash.c:(.text+0x6ad): undefined reference to `__isoc99_fscanf'
/var/tmp/portage/media-gfx/splashutils-1.5.4.3-r3/work/splashutils-1.5.4.3/src/.libs/libfbsplash.a(libfbsplash.o): In function `fbsplash_get_res':
libfbsplash.c:(.text+0xb7a): undefined reference to `__isoc99_sscanf'
/usr/lib64/libmng.a(libmng_jpeg.o): In function `mng_error_exit':
(.text+0x17d3): undefined reference to `__longjmp_chk'
/usr/lib64/libjpeg.a(jmemmgr.o): In function `jinit_memory_mgr':
(.text+0x658): undefined reference to `__isoc99_sscanf'
/usr/lib64/libpng14.a(libpng14_la-pngread.o): In function `png_create_read_struct_2':
(.text+0x1eee): undefined reference to `__longjmp_chk'
/usr/lib64/libfreetype.a(ftbase.o): In function `ft_validator_error':
(.text+0x861e): undefined reference to `__longjmp_chk'
/usr/lib64/libfreetype.a(smooth.o): In function `gray_record_cell':
(.text+0x986): undefined reference to `__longjmp_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0xe2): undefined reference to `__syslog_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0xf5): undefined reference to `__vsyslog_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0x11d): undefined reference to `__syslog_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0x132): undefined reference to `__vsyslog_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0x14f): undefined reference to `__syslog_chk'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.4.3/../../../../lib64/libgpm.a(report-lib.o): In function `gpm_report':
(.text+0x161): undefined reference to `__vsyslog_chk'
collect2: ld returned 1 exit status
make[4]: *** [fbsplashctl] Error 1
make[3]: *** [all-recursive] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2

I'm just about to try disabling mng then will try again...

My emerge --info:

# emerge --info
Portage 2.1.8.3 (default/linux/amd64/10.0, gcc-4.4.3, glibc-2.11.2-r0, 2.6.35-gentoo-r8 x86_64)
=================================================================
System uname: Linux-2.6.35-gentoo-r8-x86_64-AMD_Athlon-tm-_64_Processor_3500+-with-gentoo-1.12.13
Timestamp of tree: Sun, 03 Oct 2010 14:15:02 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
ccache version 2.3 [disabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 1.3.7-r1, 2.1.11
dev-lang/python:     2.4.4-r13, 2.5.4-r3, 2.6.5-r3, 3.1.2-r4
dev-util/ccache:     2.3
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    2.3-r1
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       3.4.6-r2, 4.1.2, 4.3.2-r3, 4.3.4, 4.4.3-r2, 4.5.1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 sun-bcla-java-vm skype-eula AdobeFlash-10.1"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php4/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php4/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php4/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O -pipe"
DISTDIR="/home/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_GB"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X acl acpi alsa amd64 arts bash-completion berkdb bluetooth bzip2 cli cracklib crypt cups cxx dbus directfb dri dvd emacs fbcondecor fortran fuse gdbm gif gnome gpm gstreamer gtk hal iconv imagemagick ipv6 java java5 java6 jpeg kde kerberos ldap mmx mng modules mono mp3 mudflap multilib mysql ncurses nls nptl nptlonly odbc ogg opengl openmp pam pcre perl php png pppd python qt3support qt4 readline reflection ruby samba sdl session speex spell sse sse2 ssl sysfs tcpd threads tiff truetype unicode v4l vorbis xml xorg zlib" ALSA_CARDS="intel8x0 hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev " KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" RUBY_TARGETS="ruby18" SANE_BACKENDS="plustek" USERLAND="GNU" VIDEO_CARDS="fbdev radeon vesa ati" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 17


Jonathan Smith





          2010-10-03 16:13:28 UTC
        

I should add, switching off the mng use flag didn't help. I have also just been running lafilefixer --justfixit again, but surely my toolchain should be aware of __isoc99_sscanf and so on.

In fact lafilefixer did something nasty - after finding mostly things it skips, but quite a few that it updates, we get this: 
/usr/lib/libcord.la: Updating...
/usr/lib/libxcb-render-util.la: Updating...
*** glibc detected *** /bin/bash: free(): invalid pointer: 0x0000000001129fb0 ***
======= Backtrace: =========
/lib/libc.so.6(+0x72966)[0x7f372c53d966]
/lib/libc.so.6(cfree+0x6c)[0x7f372c54271c]
/bin/bash(xfree+0xe)[0x45f23a]
/bin/bash(dispose_words+0x98)[0x42ca09]
/bin/bash(remember_args+0xaf)[0x460ed5]
/bin/bash(pop_dollar_vars+0x33)[0x4326e7]
/bin/bash(pop_context+0x9)[0x432e1d]
/bin/bash[0x44d699]
/bin/bash[0x44d361]
/bin/bash(run_unwind_frame+0x20)[0x44d3ae]
/bin/bash[0x4308e7]
/bin/bash[0x4314f9]
/bin/bash(execute_command_internal+0x54d)[0x42e84f]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xccc)[0x42efce]
/bin/bash(execute_command_internal+0xb92)[0x42ee94]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0x960)[0x42ec62]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash[0x430236]
/bin/bash(execute_command_internal+0x853)[0x42eb55]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash[0x42f736]
/bin/bash(execute_command_internal+0x68a)[0x42e98c]
/bin/bash(execute_command_internal+0xb92)[0x42ee94]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(execute_command_internal+0xb55)[0x42ee57]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash[0x42f736]
/bin/bash(execute_command_internal+0x68a)[0x42e98c]
/bin/bash(execute_command_internal+0xb92)[0x42ee94]
/bin/bash(execute_command_internal+0x9c2)[0x42ecc4]
/bin/bash[0x4308a9]
/bin/bash[0x4314f9]
/bin/bash(execute_command_internal+0x54d)[0x42e84f]
/bin/bash(execute_command_internal+0xb92)[0x42ee94]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash[0x430236]
/bin/bash(execute_command_internal+0x853)[0x42eb55]
/bin/bash(execute_command+0x54)[0x42f4e2]
/bin/bash(reader_loop+0x1d0)[0x41fffd]
/bin/bash(main+0x11c5)[0x41fba0]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7f372c4e9bbd]
/bin/bash[0x41d979]
======= Memory map: ========
00400000-004c3000 r-xp 00000000 08:07 20438517                           /bin/bash
006c2000-006c3000 r--p 000c2000 08:07 20438517                           /bin/bash
006c3000-006cc000 rw-p 000c3000 08:07 20438517                           /bin/bash
006cc000-006d2000 rw-p 00000000 00:00 0 
00c73000-012f6000 rw-p 00000000 00:00 0                                  [heap]
7f3728000000-7f3728021000 rw-p 00000000 00:00 0 
7f3728021000-7f372c000000 ---p 00000000 00:00 0 
7f372c2b6000-7f372c2ca000 r-xp 00000000 08:07 21079598                   /lib64/libgcc_s.so.1
7f372c2ca000-7f372c4c9000 ---p 00014000 08:07 21079598                   /lib64/libgcc_s.so.1
7f372c4c9000-7f372c4ca000 r--p 00013000 08:07 21079598                   /lib64/libgcc_s.so.1
7f372c4ca000-7f372c4cb000 rw-p 00014000 08:07 21079598                   /lib64/libgcc_s.so.1
7f372c4cb000-7f372c61b000 r-xp 00000000 08:07 20521228                   /lib64/libc-2.11.2.so
7f372c61b000-7f372c81a000 ---p 00150000 08:07 20521228                   /lib64/libc-2.11.2.so
7f372c81a000-7f372c81e000 r--p 0014f000 08:07 20521228                   /lib64/libc-2.11.2.so
7f372c81e000-7f372c81f000 rw-p 00153000 08:07 20521228                   /lib64/libc-2.11.2.so
7f372c81f000-7f372c824000 rw-p 00000000 00:00 0 
7f372c824000-7f372c826000 r-xp 00000000 08:07 20521501                   /lib64/libdl-2.11.2.so
7f372c826000-7f372ca26000 ---p 00002000 08:07 20521501                   /lib64/libdl-2.11.2.so
7f372ca26000-7f372ca27000 r--p 00002000 08:07 20521501                   /lib64/libdl-2.11.2.so
7f372ca27000-7f372ca28000 rw-p 00003000 08:07 20521501                   /lib64/libdl-2.11.2.so
7f372ca28000-7f372ca72000 r-xp 00000000 08:07 20435599                   /lib64/libncurses.so.5.7
7f372ca72000-7f372cc71000 ---p 0004a000 08:07 20435599                   /lib64/libncurses.so.5.7
7f372cc71000-7f372cc75000 r--p 00049000 08:07 20435599                   /lib64/libncurses.so.5.7
7f372cc75000-7f372cc76000 rw-p 0004d000 08:07 20435599                   /lib64/libncurses.so.5.7
7f372cc76000-7f372cc77000 rw-p 00000000 00:00 0 
7f372cc77000-7f372cc95000 r-xp 00000000 08:07 20521561                   /lib64/ld-2.11.2.so
7f372ce4f000-7f372ce52000 rw-p 00000000 00:00 0 
7f372ce92000-7f372ce94000 rw-p 00000000 00:00 0 
7f372ce94000-7f372ce95000 r--p 0001d000 08:07 20521561                   /lib64/ld-2.11.2.so
7f372ce95000-7f372ce96000 rw-p 0001e000 08:07 20521561                   /lib64/ld-2.11.2.so
7f372ce96000-7f372ce97000 rw-p 00000000 00:00 0 
7fff28671000-7fff28693000 rw-p 00000000 00:00 0                          [stack]
7fff287ff000-7fff28800000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted

I have to admit, I don't really know enough about why this has happened, but it doesn't bode well. emerge -aevDN system?





Comment 18


i.Dark_Templar





          2010-10-03 18:07:19 UTC
        

try revdep-rebuild from app-portage/gentoolkit




Comment 19


Jonathan Smith





          2010-10-04 09:12:59 UTC
        

The system is up to date with regard to revdep-rebuild.

When I had physical access to the machine today it looked as if something funny had happened with the RAID mount, and the system had remounted read-only. I think that is responsible for the bizarre #17 error.

Currently going up to gcc-4.4.4-r1, & rebuilding system. The toolchain works for everything but splashutils but hey-ho.






Comment 20


Michal Januszewski (RETIRED)






          2010-10-04 20:40:32 UTC
        

(In reply to comment #19)
> Currently going up to gcc-4.4.4-r1, & rebuilding system. The toolchain works
> for everything but splashutils but hey-ho.

Could you please also try to upgrade to glibc-2.12.1-r1?





Comment 21


Mattes





          2010-10-14 19:16:34 UTC
        

now media-gfx/splashutils-1.5.4.3-r3 is building fine.






Comment 22


Michal Januszewski (RETIRED)






          2011-01-08 18:01:44 UTC
        

Closing as WORKSFORME as the problem seems to be fixed.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

