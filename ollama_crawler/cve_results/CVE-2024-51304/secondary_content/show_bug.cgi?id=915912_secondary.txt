Title: 915912 – sys-devel/gcc-13.2.1_p20231014 fails with crossdev i486-gentoo-linux-musl - brain.h:62:1: error: unknown machine mode ‘BF’
URL: https://bugs.gentoo.org/show_bug.cgi?id=915912

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 915912
sys-devel/gcc-13.2.1_p20231014 fails with crossdev i486-gentoo-linux-musl - brain.h:62:1: error: unknown machine mode ‘BF’
Last modified: 2023-10-18 04:54:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 915912 
      - sys-devel/gcc-13.2.1_p20231014 fails with crossdev i486-gentoo-linux-musl - brain.h:62:1: error: unknown machine mode ‘BF’


Summary:
sys-devel/gcc-13.2.1_p20231014 fails with crossdev i486-gentoo-linux-musl - b...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-10-18 04:01 UTC by immolo





      Modified:
    
2023-10-18 04:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cross









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log.xz,52.05 KB,
                application/x-xz)

            
2023-10-18 04:02 UTC,

            immolo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


immolo





          2023-10-18 04:01:41 UTC
        

Came across this issue while trying to create i486 musl stages.

Steps to reproduce from testing Gentoo:

1. emerge -va sys-devel/crossdev
2. crossdev -t i486-gentoo-linux-musl
3. i486-gentoo-linux-musl-emerge -va sys-devel/gcc

Error:

make[2]: Entering directory '/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/build/i486-gentoo-linux-musl/libgcc'
i486-gentoo-linux-musl-cc --sysroot=/usr/i486-gentoo-linux-musl   -g -march=i486 -pipe -O2 -O2  -g -march=i486 -pipe -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include  -fpic -mlong-double-80 -DUSE_ELF_SYMVER  -DGTHREAD_USE_WEAK=0 -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector -fno-stack-clash-protection  -fpic -mlong-double-80 -DUSE_ELF_SYMVER  -DGTHREAD_USE_WEAK=0 -I. -I. -I../.././gcc -I/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc -I/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/. -I/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/../gcc -I/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/../include -I/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/config/libbid -DENABLE_DECIMAL_BID_FORMAT -DHAVE_CC_TLS  -DUSE_TLS -Wno-missing-prototypes -Wno-type-limits -msse2 -o extendbfsf2.o -MT extendbfsf2.o -MD -MP -MF extendbfsf2.dep  -c /usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/soft-fp/extendbfsf2.c -fvisibility=hidden -DHIDE_EXPORTS
In file included from /usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/soft-fp/extendbfsf2.c:31:
/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/soft-fp/brain.h:62:1: error: unknown machine mode ‘BF’
   62 | typedef float BFtype __attribute__ ((mode (BF)));
      | ^~~~~~~
make[2]: *** [/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/gcc-13-20231014/libgcc/shared-object.mk:14: extendbfsf2.o] Error 1
make[2]: Leaving directory '/usr/i486-gentoo-linux-musl/tmp/portage/sys-devel/gcc-13.2.1_p20231014/work/build/i486-gentoo-linux-musl/libgcc'
make[2]: *** Waiting for unfinished jobs....




Comment 1


immolo





          2023-10-18 04:02:49 UTC
        

Created attachment 873069 [details]
build.log




Comment 2


immolo





          2023-10-18 04:04:17 UTC
        

Also tried with setarch i486 just to rule that out before reporting.




Comment 3


immolo





          2023-10-18 04:54:56 UTC
        

Ok so cleaning out the the crossdev target and rebuilding solves this issue. It's odd how I hit this the first time but as it seems OK with fresh sources I'm going to mark this as WORKSFORME.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

