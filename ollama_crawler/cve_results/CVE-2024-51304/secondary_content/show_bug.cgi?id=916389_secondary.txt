Title: 916389 – =media-libs/libid3tag-0.16.3: invalid tarball size
URL: https://bugs.gentoo.org/show_bug.cgi?id=916389

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 916389
=media-libs/libid3tag-0.16.3: invalid tarball size
Last modified: 2023-11-30 13:47:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 916389 
      - =media-libs/libid3tag-0.16.3: invalid tarball size


Summary:
=media-libs/libid3tag-0.16.3: invalid tarball size
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-10-28 10:53 UTC by arcctgx





      Modified:
    
2023-11-30 13:47 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jstein
luke









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Fetch log

              (media-libs:libid3tag-0.16.3:20231028-134601.log,1.23 KB,
                text/x-log)

            
2023-10-28 14:09 UTC,

            arcctgx




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


arcctgx





          2023-10-28 10:53:09 UTC
        

It appears that the tarball hosted at Codeberg has changed. Now it has a different size:

2023-10-28 12:29:44 (1.01 MB/s) - ‘/home/portage/distfiles/libid3tag-0.16.3.codeberg.tar.gz.__download__’ saved [53381/53381]
!!! Fetched file: libid3tag-0.16.3.codeberg.tar.gz VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      53381
!!! Expected: 53218

I downloaded the tarball from Codeberg with a web browser, and indeed I get the file size 53381 and SHA512 checksum of c20dc32421f54a39cd783b2c11ee5b3748842815d4fecb3bc6fec8f22560fb6900d092bcbc6b2b818312383c233fcd54cb52c8fc1930e2141ee4677b524d9a58.




Comment 1


Jonas Stein






          2023-10-28 13:24:52 UTC
        

GENTOO_MIRRORS="" ebuild libid3tag-0.16.2.ebuild clean fetch 
Appending /usr/local/overlays/gentoo to PORTDIR_OVERLAY...
 * libid3tag-0.16.2.codeberg.tar.gz BLAKE2B SHA512 size ;-) ...    

GENTOO_MIRRORS="" ebuild libid3tag-0.16.3.ebuild clean fetch 
Appending /usr/local/overlays/gentoo to PORTDIR_OVERLAY...
 * libid3tag-0.16.3.codeberg.tar.gz BLAKE2B SHA512 size ;-) ...

works for me.

Please sync again.
Please check also with GENTOO_MIRRORS=""




Comment 2


arcctgx





          2023-10-28 14:08:52 UTC
        

I did resync and used GENTOO_MIRRORS="" as advised, but the problem persists. See attached log file.

This is what's currently defined in libid3tag-0.16.3.ebuild at https://gitweb.gentoo.org/repo/gentoo.git/tree/media-libs/libid3tag:

SRC_URI="https://codeberg.org/tenacityteam/libid3tag/archive/${PV}.tar.gz -> ${P}.codeberg.tar.gz"

This is what's listed in the Manifest:

DIST libid3tag-0.16.3.codeberg.tar.gz 53218 BLAKE2B 58a4ce211aebef4b2f1f0e1a7214e2804e71d2cea805d3c275812978fb702148c5b435c289f9e83fd81fa1970bf83b7b8e772ed24843bcae7519fff455b50c15 SHA512 d49bc637899e4251ed66b5b56aa4c910dcdecd6b03ed197866d74175fc4eadff40f40f336606b23e2505b0e11834c4212a1314feeeaa2c0e9713051fdb56cb45

And this is what you get from Codeberg:

$ wget -q https://codeberg.org/tenacityteam/libid3tag/archive/0.16.3.tar.gz
$ ls -l 0.16.3.tar.gz
-rw-r--r-- 1 arcctgx users 53381 Oct 23 11:26 0.16.3.tar.gz
$ sha512sum 0.16.3.tar.gz
c20dc32421f54a39cd783b2c11ee5b3748842815d4fecb3bc6fec8f22560fb6900d092bcbc6b2b818312383c233fcd54cb52c8fc1930e2141ee4677b524d9a58  0.16.3.tar.gz

So I'm not sure how can that be working for you, but not for me.




Comment 3


arcctgx





          2023-10-28 14:09:36 UTC
        

Created attachment 873567 [details]
Fetch log









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

