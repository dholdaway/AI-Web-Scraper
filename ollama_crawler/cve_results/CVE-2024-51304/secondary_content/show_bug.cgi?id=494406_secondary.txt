Title: 494406 – sys-kernel/gentoo-sources-3.12.5 efi stub does not boot
URL: https://bugs.gentoo.org/show_bug.cgi?id=494406

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 494406
sys-kernel/gentoo-sources-3.12.5 efi stub does not boot
Last modified: 2014-01-21 17:53:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 494406 
      - sys-kernel/gentoo-sources-3.12.5 efi stub does not boot


Summary:
sys-kernel/gentoo-sources-3.12.5 efi stub does not boot
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-12-16 01:13 UTC by Stefan de Konink





      Modified:
    
2014-01-21 17:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Kernel config

              (config-3.12.5,77.66 KB,
                text/plain)

            
2013-12-16 01:13 UTC,

            Stefan de Konink




Details





emerge --info

              (emerge-config.txt,4.22 KB,
                text/plain)

            
2013-12-16 01:14 UTC,

            Stefan de Konink




Details





kernel config

              (.config,68.55 KB,
                text/plain)

            
2013-12-25 22:37 UTC,

            Christian Tietz




Details





Crash with other kernel configuration

              (kernel-boot.jpg,132.54 KB,
                image/jpeg)

            
2014-01-21 15:08 UTC,

            Stefan de Konink




Details





This is the secondary crash

              (crash-after-reboot.JPG,243.79 KB,
                image/jpeg)

            
2014-01-21 15:09 UTC,

            Stefan de Konink




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan de Konink





          2013-12-16 01:13:13 UTC
        

I have just made an attempt to upgrade from gentoo-sources-3.12.1. I have used the same configuration and the diff shows only:

-# Linux/x86 3.12.1-gentoo Kernel Configuration
+# Linux/x86 3.12.5-gentoo Kernel Configuration

The new bzImage is copied to /boot/efi/boot/bootx64.efi, its hash is added to the database but rebooting hangs after the black curtains of the EFI-enabled bios.

Falling back to the previous kernel seems to work.

The platform is AMD A4-1200 APU with Radeon(TM) HD Graphics.

Reproducible: Always




Comment 1


Stefan de Konink





          2013-12-16 01:13:30 UTC
        

Created attachment 365452 [details]
Kernel config




Comment 2


Stefan de Konink





          2013-12-16 01:14:12 UTC
        

Created attachment 365454 [details]
emerge --info




Comment 3


Stefan de Konink





          2013-12-22 18:13:43 UTC
        

I can also confirm that 3.12.4-gentoo works.




Comment 4


Christian Tietz





          2013-12-25 22:31:48 UTC
        

I have been running every kernel from the 3.12 branch since 3.12.1 booting via EFI stub, however, I didn‘t encounter this issue at all.

My platform is ASUS F2A85-V ﻿plugged with AMD A10-6700 APU.




Comment 5


Christian Tietz





          2013-12-25 22:37:53 UTC
        

Created attachment 366196 [details]
kernel config

Sorry, I forgot to attach my kernel config.




Comment 6


Stefan de Konink





          2014-01-21 13:42:30 UTC
        

To update this issue also gentoo-sources-3.13 doesn't boot. I'm going to try the configuration of Christian.




Comment 7


Stefan de Konink





          2014-01-21 15:08:38 UTC
        

Created attachment 368334 [details]
Crash with other kernel configuration

I get this error with the other kernel configuration.

This results in a reboot, which is every interesting with another crash (don't know where it comes from).




Comment 8


Stefan de Konink





          2014-01-21 15:09:19 UTC
        

Created attachment 368336 [details]
This is the secondary crash




Comment 9


Stefan de Konink





          2014-01-21 17:01:26 UTC
        

Should have checked this ages ago. If I remove the radeondrm stuff from my kernel configuration (it was a module). The system boots normally. Now I would need to find an expert that could tell me what is so special about this machine.




Comment 10


Stefan de Konink





          2014-01-21 17:53:35 UTC
        

Problem is suddenly solved, after compiling without radeondrm, and enabling it again. Only relevant addition in .config seems:

CONFIG_DRM_KMS_FB_HELPER=y









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

