Title: 294157 – kde-base/kdelibs-4.3.1-r2 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=294157

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 294157
kde-base/kdelibs-4.3.1-r2 fails to build
Last modified: 2010-01-10 09:17:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 294157 
      - kde-base/kdelibs-4.3.1-r2 fails to build


Summary:
kde-base/kdelibs-4.3.1-r2 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-11-23 11:16 UTC by G. Náray





      Modified:
    
2010-01-10 09:17 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




kde-base:kdelibs-4.3.1-r2:20091123-010118.log

              (20091123-010118.log,1.39 MB,
                text/plain)

            
2009-11-26 22:13 UTC,

            G. Náray




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


G. Náray





          2009-11-23 11:16:22 UTC
        

kde-base/kdelibs-4.3.1-r2 fails to build.

The last interesting messages from building are these two:
[ 76%] Building CXX object khtml/CMakeFiles/khtml.dir/svg/SVGElementInstanceList.o
[ 76%] Building CXX object khtml/CMakeFiles/khtml.dir/svg/SVGUseElement.o

Then some work is done, and the error occurs:
make[2]: *** No rule to make target `/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/work/kdelibs-4.3.1/khtml/svg/SVGLineElement.cpp', needed by `khtml/CMakeFiles/khtml.dir/svg/SVGLineElement.o'.  Stop.
make[1]: *** [khtml/CMakeFiles/khtml.dir/all] Error 2
make: *** [all] Error 2

The bug is very similar to bug 292072, but it happens at slightly different place.


Reproducible: Always

Steps to Reproduce:
1. emerge kdelibs
2.
3.

Actual Results:  
Fails to build

Expected Results:  
Succeed to build

I just updated ebuilds, and thought upgrading kde is a good idea. Earlier i had version 3.5.10. In the similar bug report i saw that unstable and stable is mixed, and that was problem. Well, i try to avoid any unstable stuff, mainly when installing big libraries, but who knows.

I will attach emerge --info, and last lines of emerge log.




Comment 1


G. Náray





          2009-11-23 11:20:46 UTC
        

#emerge --info
Portage 2.1.6.13 (default/linux/x86/10.0/desktop, gcc-4.3.2, glibc-2.9_p20081201-r2, 2.6.30-gentoo-r6 i686)
=================================================================
System uname: Linux-2.6.30-gentoo-r6-i686-AMD_Athlon-tm-_XP_2500+-with-glibc2.0
Timestamp of tree: Sat, 21 Nov 2009 01:45:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.8-r1
dev-lang/python:     2.4.4-r9, 2.5.4-r3
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="hu_HU.UTF-8"
LC_ALL="hu_HU.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en hu de"
MAKEOPTS=""
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/mnt/storage/---linux.hely---/var/tmp"
PORTDIR="/mnt/storage/---linux.hely---/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="16bit 3dnow 3dnowext 7zip X a52 aac aalib accessibility ace acl acpi activefilter addbookmarks administrator adplug aim alias alsa amr amrr animgif aotuv apache2 arj artworkextra asf asterisk audacious autoreplace avahi avi bash-completion berkdb bittorrent bl branding buffysize bzip2 cairo cdaudio cdda cddax cddb cdparanoia cdr chardet chm chroot cjk cli colordiff connectionstatus consolekit contactnotes contentcache cpudetection cracklib crypt css ctype cups dba dbus demo depth32 devfs26 dga dhcp directfb divx dmi doomsday dri dts dv dvb dvd dvdnav dvdr eap-tls eds elf emboss emoticon emoticons-manager enca encode esd ethereal evo evolution examples exif extrafilters fam fastbuild fat ffmpeg fftw firefox flac fmod force-cgi-redirect fortran ftp gadu gd gdbm gif gkrellm gmp gnome gpm gsl gsm gstreamer gtk h323 hal hddtemp hifieq highlight history ia32 icecast iconv icq icu idn imagemagick imap innodb iproute2 ipv6 irc isc java jbig jingle joystick jpeg jpeg2k kde ladspa lame ldap lha libcaca libnotify libsamplerate libwww lirc lm_sensors logitech-mouse lzo lzw mad maildir maps mbrola md5sum mdnsresponder-compat memlimit midi mikmod mjpeg mmx mmxext mng modplug mods modules mouse mozdevelop mozdom mp2 mp3 mp4 mpeg mpeg2 mplayer mpu401 msn mudflap musepack music musicbrainz mysql ncurses net netmeeting network nls nocd nowlistening nptl nptlonly nsplugin ntfs ogg openexr opengl openmp oscar osp pam passwordsave pccts pch pcre pdf perl php physfs plugins png pop posix ppds pppd pri pulseaudio python qt qt3support qt4 quicktime rar rc5 readline realmedia reflection reiser4 reiserfs restrict-javascript rfkill rle rplay rpm rt2500usb rtc rtf rtsp ruby samba sametime sasl scanner sdl sdl-sound sensord server session sid simplexml slang sms sndfile soap sockets sound sounds speex spell spl sql sse sse2 ssl startup-notification statistics svg sysfs tcltk tcpd texteffect tga theora threads thunar tiff timidity tokenizer toolbar transcode translator truetype tta twolame type1 udev unicode usb uuencode v4l v4l2 vcd vdr vhosts videos visual visualization vmdbmysql vnc vncviewer voice vorbis wav wavpack webkit webpresence win32codecs winpopup wma wmf wmp x264 x86 xanim xext xine xml xorg xprint xscreensaver xsl xulrunner xv xvid xvmc yahoo yp zapnet zapras zaptel zip zlib zvbi" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en hu de" USERLAND="GNU" VIDEO_CARDS="fbdev vesa vga nvidia nv"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


#The last lines of building process:
make[2]: *** No rule to make target `/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/work/kdelibs-4.3.1/khtml/svg/SVGLineElement.cpp', needed by `khtml/CMakeFiles/khtml.dir/svg/SVGLineElement.o'.  Stop.
make[1]: *** [khtml/CMakeFiles/khtml.dir/all] Error 2
make: *** [all] Error 2
 * 
 * ERROR: kde-base/kdelibs-4.3.1-r2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 3703:  Called kde4-base_src_compile
 *             environment, line 2835:  Called cmake-utils_src_compile
 *             environment, line 1029:  Called _execute_optionaly 'src_compile'
 *             environment, line  412:  Called enable_cmake-utils_src_compile
 *             environment, line 1398:  Called cmake-utils_src_make
 *             environment, line 1048:  Called die
 * The specific snippet of code:
 *           emake "$@" || die "Make failed!";
 *  The die message:
 *   Make failed!
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/kde-base:kdelibs-4.3.1-r2:20091123-010118.log'.
 * The ebuild environment file is located at '/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/temp/environment'.
 * 

>>> Failed to emerge kde-base/kdelibs-4.3.1-r2, Log file:

>>>  '/var/log/portage/kde-base:kdelibs-4.3.1-r2:20091123-010118.log'





Comment 2


Romain Perier (RETIRED)






          2009-11-23 19:22:43 UTC
        

Please attach the complete build.log 




Comment 3


G. Náray





          2009-11-26 22:13:09 UTC
        

Created attachment 211280 [details]
kde-base:kdelibs-4.3.1-r2:20091123-010118.log




Comment 4


G. Náray





          2009-11-28 09:39:37 UTC
        

I synced portage tree, and am trying to update other packages too, unfortunately now the building tree depends on kdelibs, thus the whole updating is stuck...

However, kdelibs was emerged again, and now it stops with different message at slighlty different place (so the bug not strictly reproducable the same way, because it failed differently). I can attach the newer log if required.

[ 76%] Building CXX object khtml/CMakeFiles/khtml.dir/svg/SVGPathSegList.o
[ 76%] Building CXX object khtml/CMakeFiles/khtml.dir/svg/SVGPathSegMoveto.o
/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/work/kdelibs-4.3.1/khtml/svg/SVGPathSegMoveto.cpp:24:26: error: wtf/Platform.h: Nincs ilyen fájl vagy könyvtár
/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/work/kdelibs-4.3.1/khtml/svg/SVGPathSegMoveto.cpp:26:5: warning: "ENABLE" is not defined
/mnt/storage/---linux.hely---/var/tmp/portage/kde-base/kdelibs-4.3.1-r2/work/kdelibs-4.3.1/khtml/svg/SVGPathSegMoveto.cpp:26:11: error: missing binary operator before token "("
make[2]: *** [khtml/CMakeFiles/khtml.dir/svg/SVGPathSegMoveto.o] Error 1
make[1]: *** [khtml/CMakeFiles/khtml.dir/all] Error 2
make: *** [all] Error 2
 * 
 * ERROR: kde-base/kdelibs-4.3.1-r2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 3699:  Called kde4-base_src_compile
 *             environment, line 2831:  Called cmake-utils_src_compile
 *             environment, line 1025:  Called _execute_optionaly 'src_compile'
 *             environment, line  408:  Called enable_cmake-utils_src_compile
 *             environment, line 1394:  Called cmake-utils_src_make
 *             environment, line 1044:  Called die
 * The specific snippet of code:
 *           emake "$@" || die "Make failed!";
 *  The die message:
 *   Make failed!





Comment 5


G. Náray





          2009-12-03 08:41:41 UTC
        

Well, I did not give up, and tried whatever was possible, that is:
- synced portage tree again (kdelibs version is same, anyway)
- ran revdep-rebuild (usually i have to run it in "manual" mode, which means it collects the broken packages, and i try to emerge some of them, skipping which probably will not build)
- realized that .la files are broken, when emerged packages in previous step, thus
- emerged lafilefixer and ran lafilefixer --justfixit
- ran python-updater, because there was an error, and by searching the internet for this error i found this solution
- finally I gave another try to kdelibs and IT EMERGED SUCCESSFULLY
- now i am stuck with app-cdr/k3b-1.68.0_alpha3, it will be another story

What is the lesson? (This should be post to somewhere where package system team leader can see it.)
In my opinion, the most problem during emerging comes from the fact, that important info is written usually after packages are emerged. While it is better than nothing, it is far from best solution. Why? Because when i update the packages in my system, usually 500 packages are updated, and you can not expect that i will watch the whole updating process, hunting for important info. But enough to update 20 big packages, which lasts hours, you can be sure i will not see those messages. One of those messages was probably that i should run lafilefixer. Another message was probably i should python-updater. I have no idea how many imporant messages i did not see, and how broken is my system since i did not issue those "todo"s.

Since i can not reproduce this bug anymore, i close it from my side. Change its status to whatever you want.




Comment 6


G. Náray





          2009-12-03 08:44:33 UTC
        

Oh, a small correction. I WILL run python-updater, have not run it yet, because kdelibs was required first.




Comment 7


Jorge Manuel B. S. Vicetto (RETIRED)






          2009-12-03 11:23:41 UTC
        

Portage offers features to help you deal with the "avalanche of output" that is swamping you. Listing the most important messages in the end is the most basic feature and one that doesn't require any actions from your part.
By tweaking a few config options, you can also have Portage send mail to you, saving the important messages to files, notifying syslog or using a custom script. Check the Handbook[1] for more info and set PORTAGE_ELOG_SYSTEM on /etc/make.conf.

 [1] - http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=3&chap=1#doc_chap4




Comment 8


Samuli Suominen (RETIRED)






          2010-01-10 09:17:40 UTC
        

(In reply to comment #5)
> - finally I gave another try to kdelibs and IT EMERGED SUCCESSFULLY

Closing per above









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

