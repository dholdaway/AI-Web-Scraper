Title: 513030 – Gentoo prefix bootstrap fails on OS X Mavericks (Python build fails)
URL: https://bugs.gentoo.org/show_bug.cgi?id=513030

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 513030
Gentoo prefix bootstrap fails on OS X Mavericks (Python build fails)
Last modified: 2015-05-31 10:22:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 513030 
      - Gentoo prefix bootstrap fails on OS X Mavericks (Python build fails)


Summary:
Gentoo prefix bootstrap fails on OS X Mavericks (Python build fails)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

AMD64
        OS X
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-06-12 08:16 UTC by Hannu Kröger





      Modified:
    
2015-05-31 10:22 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




var/tmp/portage/dev-lang/python-2.7.5-r4/temp/build.log

              (build.log,281.90 KB,
                application/octet-stream)

            
2014-06-12 08:16 UTC,

            Hannu Kröger




Details





Output on another mac

              (build.log,281.90 KB,
                application/octet-stream)

            
2014-06-15 19:46 UTC,

            Hannu Kröger




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Hannu Kröger





          2014-06-12 08:16:57 UTC
        

Created attachment 378734 [details]
var/tmp/portage/dev-lang/python-2.7.5-r4/temp/build.log

running ./bootstrap-prefix.sh fails because python install fails. Attaching the build.log.

Last rows from the log:
Python build finished, but the necessary bits to build these modules were not found:
_bsddb             _sqlite3           _ssl
_tkinter           bsddb185           dbm
dl                 gdbm               imageop
linuxaudiodev      nis                ossaudiodev
spwd               sunaudiodev
To find the necessary bits, look in setup.py in detect_modules() for the module's name.


Failed to build these modules:
readline

running build_scripts
creating build/scripts-2.7
copying and adjusting /Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Tools/scripts/pydoc -> build/scripts-2.7
copying and adjusting /Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Tools/scripts/idle -> build/scripts-2.7
copying and adjusting /Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Tools/scripts/2to3 -> build/scripts-2.7
copying and adjusting /Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Lib/smtpd.py -> build/scripts-2.7
changing mode of build/scripts-2.7/pydoc from 644 to 755
changing mode of build/scripts-2.7/idle from 644 to 755
changing mode of build/scripts-2.7/2to3 from 644 to 755
changing mode of build/scripts-2.7/smtpd.py from 644 to 755
Makefile:472: recipe for target 'sharedmods' failed
make: *** [sharedmods] Error 1
 * ERROR: dev-lang/python-2.7.5-r4::gentoo_prefix failed (compile phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=dev-lang/python-2.7.5-r4::gentoo_prefix'`,
 * the complete build log and the output of `emerge -pqv '=dev-lang/python-2.7.5-r4::gentoo_prefix'`.
 * The complete build log is located at '/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/temp/build.log'.
 * The ebuild environment file is located at '/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/temp/environment'.
 * Working directory: '/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/x86_64-apple-darwin13'
 * S: '/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5'




Comment 1


Fabian Groffen






          2014-06-12 20:09:07 UTC
        

Odd, it fails on readline:

/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c: In function 'setup_readline':
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:901: error: 'Function' undeclared (first use in this function)
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:901: error: (Each undeclared identifier is reported only once
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:901: error: for each function it appears in.)
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:901: error: expected expression before ')' token
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:903: error: expected expression before ')' token
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:906: error: 'CPPFunction' undeclared (first use in this function)
/Users/hkroger/Gentoo/var/tmp/portage/dev-lang/python-2.7.5-r4/work/Python-2.7.5/Modules/readline.c:906: error: expected expression before ')' token

What compiler is being used at this stage?




Comment 2


Hannu Kröger





          2014-06-15 12:31:48 UTC
        

How can I check this?




Comment 3


Fabian Groffen






          2014-06-15 17:22:21 UTC
        

I cannot reproduce this on 10.9.3




Comment 4


Hannu Kröger





          2014-06-15 19:45:36 UTC
        

(In reply to Fabian Groffen from comment #3)
> I cannot reproduce this on 10.9.3

I tried this on another Mac with 10.9.3 and I got similar error.

I have Macports installed and could be that those tools are then being used to bootstrap prefix. Could that be the problem?




Comment 5


Hannu Kröger





          2014-06-15 19:46:23 UTC
        

Created attachment 378964 [details]
Output on another mac




Comment 6


Fabian Groffen






          2015-05-31 10:22:53 UTC
        

I could reproduce this today.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

