Title: 197117 – dev-python/pyvorbis-1.4 causes nicotine+-1.2.9 to crash with invalid pointer
URL: https://bugs.gentoo.org/show_bug.cgi?id=197117

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 197117
dev-python/pyvorbis-1.4 causes nicotine+-1.2.9 to crash with invalid pointer
Last modified: 2009-02-21 16:29:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 197117 
      - dev-python/pyvorbis-1.4 causes nicotine+-1.2.9 to crash with invalid pointer


Summary:
dev-python/pyvorbis-1.4 causes nicotine+-1.2.9 to crash with invalid pointer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-10-26 10:11 UTC by Thomas Kuther





      Modified:
    
2009-02-21 16:29 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



coldwind
rhill









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




pyvorbis-1.5a.ebuild

              (pyvorbis-1.5a.ebuild,865 bytes,
                text/plain)

            
2007-10-26 10:12 UTC,

            Thomas Kuther




Details





pyvorbis-1.3-unicode.patch

              (pyvorbis-1.3-unicode.patch,1005 bytes,
                patch)

            
2007-10-26 10:13 UTC,

            Thomas Kuther




Details
            | Diff





pyvorbis-1.5a-python2.5.patch

              (pyvorbis-1.5a-python2.5.patch,1.63 KB,
                patch)

            
2007-10-26 10:13 UTC,

            Thomas Kuther




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Kuther





          2007-10-26 10:11:19 UTC
        

With python-2.5, pyvorbis-1.4-r3 and nicotine+-1.2.9 I encounter a crash when rescanning/rebuilding my shares list.

Googling around showed this is a bug in pyvorbis. I do have various ogg files.

http://qa.mandriva.com/show_bug.cgi?id=28202


Reproducible: Always

Steps to Reproduce:
1.start nicotine+
2.rescan your shares containing ogg files.


Actual Results:  
python crashes with glibc invalid pointer on free()

Expected Results:  
shouldn't happen




Comment 1


Thomas Kuther





          2007-10-26 10:12:47 UTC
        

Created attachment 134407 [details]
pyvorbis-1.5a.ebuild

pyvorbis-1.5a + patch fixes the issue, thanks to mdk bug report.




Comment 2


Thomas Kuther





          2007-10-26 10:13:16 UTC
        

Created attachment 134409 [details, diff]
pyvorbis-1.3-unicode.patch

unicode patch




Comment 3


Thomas Kuther





          2007-10-26 10:13:39 UTC
        

Created attachment 134410 [details, diff]
pyvorbis-1.5a-python2.5.patch

python-2.5 patch




Comment 4


Ali Polatel (RETIRED)






          2007-11-02 02:25:11 UTC
        

Can you please post your emerge --info? Also the output of the crash can be very useful.




Comment 5


Thomas Kuther





          2007-11-02 18:14:21 UTC
        

Sorry, I though emerge --info was uninteresting as it affected my old box with ~x86, and also my new box on both ~x86 and ~amd64. And the error can be found in the mandrive bug report. I should have mentioned this.

Ok, downgrading pyvorbis, and rebuilding my shares list (that should pick up the .ogg files too).

And the error:
*** glibc detected *** /usr/bin/python: free(): invalid pointer: 0x00000000019cb990 ***

So that's fully reproducible here.

emerge --info as follows:

Portage 2.1.3.16 (default-linux/amd64/2007.0/desktop, gcc-4.2.2, glibc-2.6.1-r0, 2.6.23-kamikaze5 x86_64)
=================================================================
System uname: 2.6.23-kamikaze5 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 5600+
Timestamp of tree: Thu, 01 Nov 2007 20:30:10 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.2-r1
dev-lang/python:     2.5.1-r3
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0_rc4-r1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -msse3 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -msse3 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="candy ccache collision-protect distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS=" http://gentoo.intergenia.de ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo"
LANG="de_DE.UTF-8"
LC_ALL="de_DE.utf8"
LDFLAGS="-Wl,--hash-style=gnu"
LINGUAS="en de"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/enlightenment /usr/portage/local/layman/xeffects /usr/portage/local/layman/sunrise /usr/portage/local/layman/java-gcj-overlay /usr/portage/local/layman/java-overlay /usr/portage/local/layman/webapps-experimental /usr/portage/local/layman/gechi /usr/portage/local/layman/gentoo-gis /usr/portage/local/layman/armagetron /usr/local/overlays/gimpel /home/tom/cvs/proaudio/trunk/overlays/proaudio /home/tom/cvs/proaudio/trunk/overlays/proaudio-dev /usr/local/overlays/java-experimental"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowex X acl acpi alsa amd64 apache2 berkdb bitmap-fonts branding cairo cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread eds emboss encode evo fam fbcon firefox gdbm gif gpm gstreamer gtk hal iconv isdnlog jack jpeg kdeenablefinal kdehiddenvisibility libnotify mad midi mikmod mmx mmx2 mp3 mpeg mudflap ncurses nls nptl nptlonly ogg opengl openmp pam pcre pdf perl pic png pppd pthreads python qt3 qt3support qt4 quicktime readline reflection sdl session shadow spell spl sse sse2 ssl startup-notification svg tcpd threads tiff truetype truetype-fonts type1-fonts unicode userlocales vorbis xcb xml xorg xv zlib" ALSA_CARDS="ice1712 ice1724" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

HTH




Comment 6


Ryan Hill (RETIRED)






          2009-02-21 15:30:03 UTC
        

http://pyogg.python-hosting.com/ticket/2




Comment 7


Ryan Hill (RETIRED)






          2009-02-21 15:49:03 UTC
        

this is the same bug as bug #101059.  i think our patch is wrong.




Comment 8


Ryan Hill (RETIRED)






          2009-02-21 16:20:39 UTC
        

actually, i can't reproduce this.  please reopen if it's still a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

