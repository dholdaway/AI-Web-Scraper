Title: 354069 – sys-libs/newlib invalid metadata
URL: https://bugs.gentoo.org/show_bug.cgi?id=354069

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 354069
sys-libs/newlib invalid metadata
Last modified: 2011-04-10 16:35:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 354069 
      - sys-libs/newlib invalid metadata


Summary:
sys-libs/newlib invalid metadata
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Luca Barbato








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-08 08:53 UTC by Tiziano Müller (RETIRED)





      Modified:
    
2011-04-10 16:35 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



branko
vapier
zima









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tiziano Müller (RETIRED)






          2011-02-08 08:53:20 UTC
        

The newlib ebuilds rely on certain global variables to be defined during metadata-generation but they are not defined (check the metadata for newlib after syncing from tree) and can't be reliably defined (since they are target-specific).

This results in invalid SLOT-names in the newlib-metadata (slot-names starting with a dash '-...').

CC'ing QA since this is quiet a common error in certain packages (older versions of uclibc still in tree, kgcc64, etc.) and leaving the decision to them whether to open a tracker-bug for all of those packages or close/depend this if such a tracker-bug already exists (didn't find any).




Comment 1


Petr Zima





          2011-02-08 09:46:22 UTC
        

Confirming this bug, it applies to all versions of

sys-libs/newlib,

and also to all versions of

sys-libs/uclibc.

Although I do not use any of those, the corrupt metadata cause errors while generating the search index for paludis. Metadata of other packages seem to be ok.




Comment 2


SpanKY






          2011-02-10 02:47:08 UTC
        



*** This bug has been marked as a duplicate of bug 174407 ***




Comment 3


Tiziano Müller (RETIRED)






          2011-02-10 08:38:25 UTC
        

not a duplicate: it's not about USE-dep SLOTS but the package depends on other non-mandatory variables.

I could as well CC infra since we're distributing invalid metadata via our mirrors.

How about setting a valid default slot when checking for CHOST/CTARGET instead of assuming they're valid (as seen in uclibc-ebuilds >=0.9.30)?




Comment 4


Branko Majic





          2011-02-12 15:10:44 UTC
        

SLOT should be invariant according to:

http://dev.gentoo.org/~ulm/pms/4/pms.html#x1-680008.1

This sounds more like a violation of the current specification since it seems to depend on something that is dependant on user's configuration files.

Should we open-up another bug report for this for uclibc?




Comment 5


SpanKY






          2011-02-12 23:52:10 UTC
        

that's nice.  the ebuild no longer supports newlib-on-glibc installs.




Comment 6


Tiziano Müller (RETIRED)






          2011-02-13 09:03:59 UTC
        

right, newlib is fixed. uclibc still has problems, opened a new bug for it: bug #354701










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

