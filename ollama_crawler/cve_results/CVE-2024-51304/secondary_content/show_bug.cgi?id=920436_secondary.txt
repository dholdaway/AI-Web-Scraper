Title: 920436 – net-print/cups-2.4.7-r2 fails tests on arm64
URL: https://bugs.gentoo.org/show_bug.cgi?id=920436

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 920436
net-print/cups-2.4.7-r2 fails tests on arm64
Last modified: 2024-03-05 08:51:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 920436 
      - net-print/cups-2.4.7-r2 fails tests on arm64


Summary:
net-print/cups-2.4.7-r2 fails tests on arm64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Printing Team








URL:







Whiteboard:




Keywords:








Depends on:




920900



Blocks:




920237



 

        Show dependency tree





 





      Reported:
    
2023-12-20 22:33 UTC by matoro





      Modified:
    
2024-03-05 08:51 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



leio
matoro_gentoo









See Also:


926180





Package list:







Runtime testing required:

---























      Attachments
    




build.log and emerge --info

              (file_920436.txt,227.79 KB,
                text/plain)

            
2023-12-20 22:34 UTC,

            matoro




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


matoro






          2023-12-20 22:33:24 UTC
        

build.log and emerge --info in attachment.  Let me know if tarball is necessary for additional logs.

FAIL: 4 job control files were not purged.
FAIL: Printer 'Test2' produced 0 page(s), expected 23.
FAIL: Printer 'Test3' produced 1 page(s), expected 2.
FAIL: 174 requests logged, expected 176.
FAIL: 146 error messages, expected 33.

Reproducible: Always




Comment 1


matoro






          2023-12-20 22:34:10 UTC
        

Created attachment 880102 [details]
build.log and emerge --info




Comment 2


Mart Raudsepp






          2023-12-22 13:16:09 UTC
        

I can't reproduce this on my ~arm64 system. Maybe it's a timeout issue on slower system?




Comment 3


Mart Raudsepp






          2023-12-22 13:23:20 UTC
        

What arm64 system do you have? This smells like a too quick timeout for a slower box case to me on "Waiting for job history to expire".
Feels like it's waiting for all the test jobs to finish for a given amount of time, then times out and proceeds and it was actually still int he progress of printing Test3 and hadn't started on printing Test2 or something along those lines.




Comment 4


matoro






          2023-12-22 18:05:41 UTC
        

(In reply to Mart Raudsepp from comment #3)
> What arm64 system do you have? This smells like a too quick timeout for a
> slower box case to me on "Waiting for job history to expire".
> Feels like it's waiting for all the test jobs to finish for a given amount
> of time, then times out and proceeds and it was actually still int he
> progress of printing Test3 and hadn't started on printing Test2 or something
> along those lines.

It's a SolidRun Honeycomb, it runs with 16x Cortex A72s (I am using -j10).  Any pointers on where in the code the test timeouts are so I can crank them up and see if it helps?




Comment 5


Mart Raudsepp






          2023-12-22 21:45:55 UTC
        

run-stp-tests.sh calls waitjobs.sh in 3 places, one of them uses a specific timeout of 1800 seconds and the others let waitjobs.sh pick its default of 360 seconds. Not sure which one's applicable here, try cranking em all up to start with I guess (the other cases you could add a big number of seconds for the optional argument in the call instead of modifying the default I suppose).




Comment 6


matoro






          2023-12-29 03:24:08 UTC
        

This is weird, I went back today to try and test if cranking up the timeouts fixed this and now I cannot manage to reproduce it, even without the timeouts.  Guess I will close unless it comes up again.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

