Title: 290785 – gnome-base/gnome-panel-2.26.3: not starting at session startup through gdm, but ok through a terminal
URL: https://bugs.gentoo.org/show_bug.cgi?id=290785

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 290785
gnome-base/gnome-panel-2.26.3: not starting at session startup through gdm, but ok through a terminal
Last modified: 2010-06-11 18:41:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 290785 
      - gnome-base/gnome-panel-2.26.3: not starting at session startup through gdm, but ok through a terminal


Summary:
gnome-base/gnome-panel-2.26.3: not starting at session startup through gdm, b...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-27 17:56 UTC by Denis de La Fortelle





      Modified:
    
2010-06-11 18:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




terminal screen content

              (terminal,342 bytes,
                text/plain)

            
2009-10-29 08:41 UTC,

            Denis de La Fortelle




Details





emerge --info output

              (emerge-info,3.85 KB,
                text/plain)

            
2009-10-29 08:43 UTC,

            Denis de La Fortelle




Details





.xsession-errors

              (xsession-errors,869 bytes,
                text/plain)

            
2009-10-29 08:44 UTC,

            Denis de La Fortelle




Details





gnome-settings-daemon assertions failure

              (xsession-errors,787 bytes,
                text/plain)

            
2010-03-07 10:31 UTC,

            Denis de La Fortelle




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Denis de La Fortelle





          2009-10-27 17:56:25 UTC
        

At the end of an update from gnome 2.24 to 2.26, I got stuck by a missing gnome-panel at session start-up. After some debug, I found that the gnome-panel was activable through the line command of a terminal openable through the desktop background menu.
gnome-panel is fully functional but give this error message on the terminal at start-up and each panel modification

Reproducible: Always

Steps to Reproduce:
1.choose any gnome session with gdm
2.open a terminal through the desktop menu and : 
3.type on the command line: gnome-panel
4:add or remove an applet on the panel

Actual Results:  
After 1: the desktop is fine except missing gnome-panel
After 3: gnome-panel show up ready and effectively functional, spitting an error message on the terminal about /usr/share/applications/gnome-cups-icon.desktop missing
After 4: same spitting

Expected Results:  
gnome-panel appearing ready and functiolal at session start-up

I have a second box with the same system definition but this bug is not appearing.
The comparison of gconf session settings gives no difference.
I tried to reemerge gnome-session, gnome-panel, gconf, cups, gnome-cups-manager without any success.




Comment 1


Gilles Dartiguelongue (RETIRED)






          2009-10-28 21:27:05 UTC
        

*** Bug 290914 has been marked as a duplicate of this bug. ***




Comment 2


Gilles Dartiguelongue (RETIRED)






          2009-10-28 21:29:34 UTC
        

Please attach emerge --info and .xsession-errors




Comment 3


Denis de La Fortelle





          2009-10-29 08:41:58 UTC
        

Created attachment 208614 [details]
terminal screen content

Here is the content of the terminal screen after gnome-panel start-up, with my translation from french to english.




Comment 4


Denis de La Fortelle





          2009-10-29 08:43:54 UTC
        

Created attachment 208616 [details]
emerge --info output




Comment 5


Denis de La Fortelle





          2009-10-29 08:44:24 UTC
        

Created attachment 208618 [details]
.xsession-errors




Comment 6


Gilles Dartiguelongue (RETIRED)






          2009-10-29 09:33:25 UTC
        

Do you have net-print/gnome-cups-manager installed ? If yes, could you re-install it. If not, it seems you have a stale file, you better either remove it or install the package and unmerge it so it removes everything correctly.




Comment 7


Denis de La Fortelle





          2009-11-10 18:48:03 UTC
        

(In reply to comment #6)
> Do you have net-print/gnome-cups-manager installed ? If yes, could you
> re-install it. If not, it seems you have a stale file, you better either remove
> it or install the package and unmerge it so it removes everything correctly.
> 
I have gnome and cups in the USE variable, so gnome includes net-print/gnome-cups-manager. Yes, I have it installed, 0.33-r1.
I have made a full cycle: emerge -1, emerge -C, emerge -1, with no change to the bug report.




Comment 8


Gilles Dartiguelongue (RETIRED)






          2009-11-12 11:11:01 UTC
        

Does it start correctly if you remove that desktop file ?




Comment 9


Denis de La Fortelle





          2010-03-07 10:31:07 UTC
        

Created attachment 222441 [details]
gnome-settings-daemon assertions failure




Comment 10


Denis de La Fortelle





          2010-03-07 10:53:40 UTC
        

... Mid air collision problem ... 

No change to the reported behavior, after regular updates and a full rebuild of world. I just needed to remove the .gnome2 configuration files to get gnome-panel back through the terminal., and restoring those files afterward. But messages are not exactly the same. I got:

x@y ~/Desktop $ gnome-panel &
[1] 1893
x@y ~/Desktop $ Unable to open the following desktop file /usr/share/applications/gnome-cups-icon.desktop for the panel launcher: no such file or directory
Unable to open the following desktop file /usr/share/applications/xsane-xsane.desktop for the panel launcher: no such file or directory

x@y # ls -l /usr/share/applications/xsane* /usr/share/applications/gnome-cups*
-rw-r--r-- 1 root root 426 mars   7 09:55 /usr/share/applications/gnome-cups-manager.desktop
-rw-r--r-- 1 root root 177 mars   6 23:17 /usr/share/applications/xsane.desktop

The ls'd files are those owned by theyr respective package. The error messages seem to be about mis named files. No idea about how such names might be generated ...
I have attached the .xsession-errors file showing some gnome-settings assertion failures.
I do not know if it is the same bug.




Comment 11


Denis de La Fortelle





          2010-06-11 18:41:50 UTC
        

There were two sides to this bug report:
  - two .desktop names, xsane-xsane and gnome-cups-icon, were wrong in gconf settings, shoul be xsane and cups, no precise idea why, corrected with the configuration editor,
  - ~/.local/share/applications, includes some unexpected .desktop entries, e.g.  panel.desktop with the hidden property, corrected by alignment of applications dir content on a working one from another box.
So WORKSFORME.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

