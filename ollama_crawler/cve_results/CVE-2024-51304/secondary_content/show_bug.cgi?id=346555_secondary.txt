Title: 346555 – sys-devel/gcc-4.4.4-r2 - gcc-4.4.4/gcc/gencheck.c:30:24: error: all-tree.def: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=346555

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 346555
sys-devel/gcc-4.4.4-r2 - gcc-4.4.4/gcc/gencheck.c:30:24: error: all-tree.def: No such file or directory
Last modified: 2010-11-24 04:42:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 346555 
      - sys-devel/gcc-4.4.4-r2 - gcc-4.4.4/gcc/gencheck.c:30:24: error: all-tree.def: No such file or directory


Summary:
sys-devel/gcc-4.4.4-r2 - gcc-4.4.4/gcc/gencheck.c:30:24: error: all-tree.def:...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-11-23 19:35 UTC by mehrunes





      Modified:
    
2010-11-24 04:42 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




failed emerge log

              (failure.log.7z,57.48 KB,
                application/x-7zip-compressed)

            
2010-11-23 19:37 UTC,

            mehrunes




Details





successful emerge log

              (success.log.7z,194.43 KB,
                application/x-7zip-compressed)

            
2010-11-23 19:37 UTC,

            mehrunes




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


mehrunes





          2010-11-23 19:35:47 UTC
        

On 4-processor system with optimal MAKEOPTS sys-devel/gcc-4.4.4-r2 not always emerges successfully.

Reproducible: Sometimes

Steps to Reproduce:
0. Use idle multi-cpu system (4 cpu's enough)
1. MAKEOPTS="--jobs --load-average=3" emerge =sys-devel/gcc-4.4.4-r2


Actual Results:  
Failure 2 times out of 5, probably due to bad makefile

/tmp/portage/sys-devel/gcc-4.4.4-r2/work/gcc-4.4.4/gcc/gencheck.c:30:24: error:
all-tree.def: No such file or directory


Expected Results:  
success every time

Since gcc is important package, I an ready to spend more time to provide additional information if necessary.

emerge --info follows. Log files will be attached to the next post
=============

Portage 2.1.8.3 (default/linux/amd64/10.0/desktop, gcc-4.3.2, glibc-2.11.2-r0, 2.6.34-gentoo-r6 x86_64)
=================================================================
System uname: Linux-2.6.34-gentoo-r6-x86_64-AMD_Phenom-tm-_II_X4_940_Processor-with-gentoo-1.12.11.1
Timestamp of tree: Tue, 23 Nov 2010 00:00:23 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.10
dev-lang/python:     2.4.6, 2.5.4-r4, 2.6.4-r99
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11.1
sys-devel/binutils:  2.18-r3, 2.20.1-r1
sys-devel/gcc:       3.4.6-r2, 4.1.2, 4.3.2-r3, 4.4.3-r2, 4.4.4-r2
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=k8 -pipe -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -foptimize-sibling-calls -fprefetch-loop-arrays"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O3 -march=k8 -pipe -fomit-frame-pointer -funroll-loops -fexpensive-optimizations -foptimize-sibling-calls -fprefetch-loop-arrays"
DISTDIR="/usr/distfiles"
FEATURES="assume-digests collision-protect distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans"
GENTOO_MIRRORS="ftp://gentoo.bloodhost.ru/"
LANG="en_GB.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_GB"
MAKEOPTS="--jobs --load-average=3"
PKGDIR="/usr/portage/packages"
PORTAGE_COMPRESS="lzma"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp/"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise /usr/local/portage/layman/sage-on-gentoo /usr/local/portage/layman/oss-overlay /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="7zip X a52 aac acpi alsa amd64 asf bdf berkdb branding bzip2 cairo cdr cli consolekit crypt cxx dbus doc dri dts dvd dvdr emboss encode exif fam firefox flac fortran gdbm gif gmp gpm gstreamer gtk iconv jadetex jpeg latex lcms libnotify mad mathextra mikmod mmx mng modules mp3 mp4 mpeg mudflap multilib multislot ncurses nptl nptlonly objc objc++ ogg opengl openmp oss pam pango pcre pdf perl png ppds pppd pulseaudio python qt3support qt4 readline sdl session sndfile source spell sse sse2 ssl startup-notification svg sysfs tcpd tiff truetype unicode usb utf vorbis wavpack wma x264 xcb xml xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" PHP_TARGETS="php5-2" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


mehrunes





          2010-11-23 19:37:20 UTC
        

Created attachment 255217 [details]
failed emerge log




Comment 2


mehrunes





          2010-11-23 19:37:58 UTC
        

Created attachment 255219 [details]
successful emerge log




Comment 3


Jeroen Roovers (RETIRED)






          2010-11-23 20:34:52 UTC
        

It's quite unusual to set -j: try with -jN, where, depending on which theory of optimal parallellisation, [number of CPUs] < N < [number of CPUs] * 2.

Setting MAKEOPTS="-j -l 3" is known to not work properly either, so you might want to drop `-l 3' while you're at it.




Comment 4


mehrunes





          2010-11-24 04:42:39 UTC
        


> Setting MAKEOPTS="-j -l 3" is known to not work properly either, so you might
> want to drop `-l 3' while you're at it.

Sorry, Jeroen, I don't understand your advice.

Should I drop '-l 3' temporarily (when compiling gcc) or permanently?

And what is the meaning of the words 'not work'? Does it mean that processor load is not what I expect, or that makefile expects fixed number of jobs for the software to compile? 

'-j -l3' not works on amd64 only or on all architechtures? on Linux only or on other OS? Is this a defect in make utility or Linux kernel?

Is the matter described somewhere in Gentoo documentation or another trusted source of information?










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

