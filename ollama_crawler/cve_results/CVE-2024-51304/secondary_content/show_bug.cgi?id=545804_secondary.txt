Title: 545804 – =app-misc/ca-certificates-20140927.3.17.2 incorrect SRC_URI - distfiles are available only from Gentoo mirrors
URL: https://bugs.gentoo.org/show_bug.cgi?id=545804

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 545804
=app-misc/ca-certificates-20140927.3.17.2 incorrect SRC_URI - distfiles are available only from Gentoo mirrors
Last modified: 2015-04-08 03:56:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 545804 
      - =app-misc/ca-certificates-20140927.3.17.2 incorrect SRC_URI - distfiles are available only from Gentoo mirrors


Summary:
=app-misc/ca-certificates-20140927.3.17.2 incorrect SRC_URI - distfiles are a...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




543976



 

        Show dependency tree





 





      Reported:
    
2015-04-07 08:45 UTC by Sergey S. Starikoff





      Modified:
    
2015-04-08 03:56 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sergey S. Starikoff





          2015-04-07 08:45:18 UTC
        

Check distfiles availability on primary mirrors failes:

# mv /usr/portage/distfiles/ca-certificates_20140927.tar.xz  /tmp
# GENTOO_MIRRORS="" emerge -f app-misc/ca-certificates

These are the packages that would be fetched, in order:

Calculating dependencies... done!
[ebuild   R    ] app-misc/ca-certificates-20140927.3.17.2  USE="cacert" 283 KiB

Total: 1 package (1 reinstall), Size of downloads: 283 KiB

Would you like to fetch the source files for these packages? [Yes/No] y

>>> Fetching (1 of 1) app-misc/ca-certificates-20140927.3.17.2::gentoo
>>> Downloading 'http://ftp.jp.debian.org/debian/pool/main/c/ca-certificates/ca-certificates_20140927.tar.xz'
--2015-04-07 11:35:09--  http://ftp.jp.debian.org/debian/pool/main/c/ca-certificates/ca-certificates_20140927.tar.xz
Connecting to 192.168.1.1:8080... connected.
Proxy request sent, awaiting response... 404 Not Found
2015-04-07 11:35:12 ERROR 404: Not Found.

>>> Downloading 'http://ftp2.de.debian.org/debian/pool/main/c/ca-certificates/ca-certificates_20140927.tar.xz'
--2015-04-07 11:35:12--  http://ftp2.de.debian.org/debian/pool/main/c/ca-certificates/ca-certificates_20140927.tar.xz
Connecting to 192.168.1.1:8080... connected.
Proxy request sent, awaiting response... 404 Not Found
2015-04-07 11:35:12 ERROR 404: Not Found.

…
(and so long for all other mirrors, skipping, because there's nothing new)
…

!!! Couldn't download 'ca-certificates_20140927.tar.xz'. Aborting.
 * nss-3.17.2.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                       [ ok ]
 * nss-3.14.1-add_spi+cacerts_ca_certs.patch SHA256 SHA512 WHIRLPOOL size ;-) ...                                               [ ok ]
 * Fetch failed for 'app-misc/ca-certificates-20140927.3.17.2'

>>> Failed to emerge app-misc/ca-certificates-20140927.3.17.2




Comment 1


Sergey S. Starikoff





          2015-04-07 08:47:14 UTC
        

Probably, this issue should block bug #543976 (stabilization request for =app-misc/ca-certificates-20140927.3.17.2).




Comment 2


Thomas Deutschmann (RETIRED)






          2015-04-07 10:32:59 UTC
        

This is a dupe of bug 545804 comment 6.

In other words: It is well known that the origin upstream has removed the file but because the file is cached on Gentoo's own main mirror this isn't a problem.




Comment 3


Thomas Deutschmann (RETIRED)






          2015-04-07 10:33:42 UTC
        

I meant dupe of bug 543976 comment 6.




Comment 4


Sergey S. Starikoff





          2015-04-07 13:06:23 UTC
        

(In reply to Thomas D. from comment #2)
> In other words: It is well known that the origin upstream has removed the
> file but because the file is cached on Gentoo's own main mirror this isn't a
> problem.

Thank you.
I know it.

The question of this bug is that it is wrong to try to fetch distfiles from urls, where they don't present (and we know it).
So, referenced comment is not completely right.

The second question is that upstream should not remove distfiles for up to date package.
So, we should at least re-check this package on possible issues, due to that package was removed by upstream.


To fix this bug we should either, relying on current package, update SRC_URI to fetch distfiles only from Gentoo mirrors, don't checking Debian mirrors, or find reason, because of what package was removed by upstream and follow them.




Comment 5


SpanKY






          2015-04-08 03:56:55 UTC
        

i don't see any action required on our part here.  it's quite a bit of effort to track every ebuild version to make sure the upstream URL is still valid.  we could automate it, but it'd have to tolerate transient issues, and would cause quite a lot of overhead (there's ~20k packages in the tree).

in this case, and many others, you must have a valid GENTOO_MIRRORS listed, in which case things work automatically.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

