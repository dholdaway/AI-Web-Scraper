Title: 481808 – dev-qt/qtgui-4.8.5 and dev-qt/designer-4.8.5: /usr/lib64/qt4/libQtDesigner.so.4 file collision
URL: https://bugs.gentoo.org/show_bug.cgi?id=481808

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 481808
dev-qt/qtgui-4.8.5 and dev-qt/designer-4.8.5: /usr/lib64/qt4/libQtDesigner.so.4 file collision
Last modified: 2013-08-25 05:44:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 481808 
      - dev-qt/qtgui-4.8.5 and dev-qt/designer-4.8.5: /usr/lib64/qt4/libQtDesigner.so.4 file collision


Summary:
dev-qt/qtgui-4.8.5 and dev-qt/designer-4.8.5: /usr/lib64/qt4/libQtDesigner.so...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-08-21 02:17 UTC by Cengiz Gunay





      Modified:
    
2013-08-25 05:44 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Cengiz Gunay





          2013-08-21 02:17:19 UTC
        

While doing:
emerge -avuN -D 100 --backtrack=50 --with-bdeps=y --complete-graph @world @preserved-rebuild

>>> Installing (20 of 319) dev-qt/designer-4.8.5
 * checking 339 files for package collisions
 * This package will overwrite one or more files that may belong to other
 * packages (see list below). You can use a command such as `portageq
 * owners / <filename>` to identify the installed package that owns a
 * file. If portageq reports that only one package owns a file then do
 * NOT file a bug report. A bug report is only useful if it identifies at
 * least two or more packages that are known to install the same file(s).
 * If a collision occurs and you can not explain where the file came from
 * then you should simply ignore the collision since there is not enough
 * information to determine if a real problem exists. Please do NOT file
 * a bug report at http://bugs.gentoo.org unless you report exactly which
 * two packages install the same file(s). See
 * http://wiki.gentoo.org/wiki/Knowledge_Base:Blockers for tips on how to
 * solve the problem. And once again, please do NOT file a bug report
 * unless you have completely understood the above message.
 * 
 * Detected file collision(s):
 * 
 *      /usr/lib64/qt4/libQtDesigner.so.4
 * 
 * Searching all installed packages for file collisions...
 * 
 * Press Ctrl-C to Stop
 * 
 * dev-qt/qtgui-4.8.5:4::gentoo
 *      /usr/lib64/qt4/libQtDesigner.so.4
 * 
 * Package 'dev-qt/designer-4.8.5' NOT merged due to file collisions. If
 * necessary, refer to your elog messages for the whole content of the
 * above message.

Confirmed with:
equery b /usr/lib64/qt4/libQtDesigner.so.4
 * Searching for /usr/lib64/qt4/libQtDesigner.so.4 ...
dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4.8.3)
dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4 -> libQtDesigner.so.4.8.3)

4.8.5 is the terminal ~ version for both packages.

Reproducible: Always

Steps to Reproduce:
1. emerge -1 =dev-qt/designer-4.8.5
2. emerge -1 =dev-qt/qtgui-4.8.5
Actual Results:  
* Detected file collision(s):
 * 
 *      /usr/lib64/qt4/libQtDesigner.so.4

Expected Results:  
install




Comment 1


Michael Palimaka (kensington)






          2013-08-21 07:24:01 UTC
        

(In reply to Cengiz Gunay from comment #0)
> equery b /usr/lib64/qt4/libQtDesigner.so.4
>  * Searching for /usr/lib64/qt4/libQtDesigner.so.4 ...
> dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4.8.3)
> dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4 ->
> libQtDesigner.so.4.8.3)

That definitely looks wrong, I don't know why you would have a library from 4.8.3 still lying around.




Comment 2


Sergey Popov (RETIRED)






          2013-08-21 07:33:52 UTC
        

(In reply to Michael Palimaka (kensington) from comment #1)
> (In reply to Cengiz Gunay from comment #0)
> > equery b /usr/lib64/qt4/libQtDesigner.so.4
> >  * Searching for /usr/lib64/qt4/libQtDesigner.so.4 ...
> > dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4.8.3)
> > dev-qt/qtgui-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4 ->
> > libQtDesigner.so.4.8.3)
> 
> That definitely looks wrong, I don't know why you would have a library from
> 4.8.3 still lying around.

Probably some preserved-libs issue?

Cengiz, could you run emerge @preserved-rebuild first?




Comment 3


Cengiz Gunay





          2013-08-21 15:51:08 UTC
        

Thanks for the quick answer. Unfortunately since I'm in the middle of a massive update, emerge @preserved-rebuild gets stuck with blocks. Especially another outstanding issue bug #479476 still blocks my automatic update. I an get it to work manually but not automatically. I'm fiddling with mask/unmask but couldn't get it to work.
Is there a more direct way of only updating this preserved library?




Comment 4


Davide Pesavento (RETIRED)






          2013-08-21 18:40:01 UTC
        

can you just show us the output of `emerge -pO @preserved-rebuild` please?




Comment 5


Cengiz Gunay





          2013-08-21 18:55:24 UTC
        

# emerge -pO @preserved-rebuild

These are the packages that would be merged, in order:

[ebuild   R    ] media-libs/sdl-image-1.2.12
[ebuild   R    ] media-plugins/gst-plugins-jpeg-1.0.7
[ebuild   R    ] app-office/dia-0.97.2-r1
[ebuild     U  ] app-editors/emacs-24.3-r2 [24.2] USE="gtk3*"
[ebuild     U  ] media-gfx/gimp-2.8.6 [2.8.2] USE="(-aqua)"
[ebuild     U  ] media-video/cheese-3.8.3 [3.4.2]
[ebuild     U  ] gnome-extra/evolution-data-server-3.8.4-r1 [3.4.4] USE="gtk%* -api-doc-extras%"
[ebuild   R    ] dev-games/ogre-1.8.1
[ebuild     U  ] media-video/mplayer-1.2_pre20130729 [1.1-r1] USE="-dv* -faad* -live* -rar* -rtc* -speex* -theora* -toolame* -tremor* -twolame*"
[ebuild   R    ] media-libs/opencv-2.4.5
[ebuild   R    ] app-office/libreoffice-4.1.0.4
[ebuild     U  ] media-libs/gegl-0.2.0-r2 [0.2.0-r1]
[ebuild     U  ] app-editors/xemacs-21.5.33 [21.5.31]
[ebuild   R    ] net-print/cups-filters-1.0.36-r1
[ebuild     U  ] games-strategy/hedgewars-0.9.19-r1 [0.9.18-r1]
[ebuild     U  ] games-strategy/freeorion-0.4.3_pre20130312 [0.4.2_pre20120910-r1]
[ebuild     U  ] net-libs/webkit-gtk-2.0.4 [1.8.3-r300] USE="libsecret%*"
[ebuild     U  ] net-libs/webkit-gtk-1.8.3-r201 [1.8.3-r200]
[ebuild   R    ] app-emulation/fs-uae-2.2.0
[ebuild   R    ] games-fps/tremulous-1.1.0-r4
[ebuild     U  ] app-text/texlive-core-2013 [2012]
[ebuild   R    ] media-libs/freeimage-3.15.4
[ebuild     U  ] dev-games/gigi-0.8_pre20130312 [0.8_pre20120910]
[ebuild     U  ] www-client/chromium-29.0.1547.41 [24.0.1312.14] USE="pulseaudio* system-ffmpeg%* -gps% (-system-sqlite)"   
[ebuild     U  ] dev-tex/luatex-0.76.0 [0.70.1-r1] USE="doc*"
[ebuild     U  ] gnome-extra/nm-applet-0.9.8.2 [0.9.6.4] USE="introspection%* -modemmanager%"
[ebuild     U  ] sys-apps/gptfdisk-0.8.6 [0.8.5] USE="icu%* ncurses%* -static%"
[ebuild     U  ] sci-mathematics/octave-3.6.4 [3.6.3] USE="-postscript%"
[ebuild     U  ] media-video/ffmpeg-1.2.2 [0.10.6] USE="iconv%* opus%* -bluray% -examples% -fdk% -flite% -fontconfig% -iec61883% -libcaca% -libsoxr% -twolame%" FFTOOLS="ffescape%* fourcc2pixfmt%*" 
[ebuild     U  ] kde-base/okular-4.11.0 [4.9.3]
[ebuild     U  ] gnome-base/gnome-control-center-3.8.4.1-r1 [3.4.2-r1] USE="i18n%* -kerberos% -modemmanager% -v4l%" INPUT_DEVICES="-wacom%"
[ebuild     U  ] media-sound/pulseaudio-4.0 [2.1-r1] USE="avahi* qt4%* systemd* (-neon)"
[ebuild     U  ] media-gfx/inkscape-0.48.4-r1 [0.48.4] PYTHON_SINGLE_TARGET="python2_7%* -python2_6%" PYTHON_TARGETS="python2_7%* -python2_6%"
[ebuild     U  ] media-libs/clutter-gst-1.6.0-r1 [1.6.0]
[ebuild   R    ] games-strategy/ufo-ai-2.4
[ebuild     U  ] x11-libs/wxGTK-2.8.12.1-r1 [2.8.12.1]
[ebuild     U  ] www-client/firefox-23.0 [16.0.2] USE="pulseaudio%* -system-cairo% -system-jpeg%"
[ebuild     U  ] x11-wm/mutter-3.8.4 [3.4.1-r1]
[ebuild     U  ] app-office/lyx-2.0.6 [2.0.5] USE="(-subversion*)"
[ebuild     U  ] media-libs/sk1libs-0.9.1-r3 [0.9.1-r1] PYTHON_TARGETS="python2_7%* (-python2_5) -python2_6%"
[ebuild   R    ] dev-dotnet/libgdiplus-2.10.9
[ebuild   R    ] media-libs/imlib2-1.4.5
[ebuild     U  ] gnome-base/gnome-settings-daemon-3.8.4 [3.4.2] USE="i18n%*" INPUT_DEVICES="-wacom%"
[ebuild   R    ] net-misc/tightvnc-1.3.10-r1
[ebuild     U  ] media-gfx/eog-3.8.2 [3.4.3-r1]
[ebuild     U  ] games-strategy/wesnoth-1.10.7 [1.10.4]
[ebuild     U  ] gnome-extra/gnome-color-manager-3.8.2 [3.4.2]
[ebuild     U  ] app-text/poppler-0.22.5 [0.20.5]
[ebuild   R    ] games-fps/worldofpadman-1.6
[ebuild     U  ] dev-python/pyopencl-2013.1 [2012.1]
[ebuild   R    ] media-sound/sox-14.4.1
[ebuild   R    ] kde-base/gwenview-4.11.0
[ebuild   R    ] kde-base/kdelibs-4.11.0
[ebuild     U  ] media-sound/mumble-1.2.4 [1.2.4_beta1] USE="zeroconf*"
[ebuild     U  ] dev-java/icedtea-bin-6.1.12.6-r1 [6.1.12.2]
[ebuild     U  ] dev-java/icedtea-bin-7.2.4.1 [7.2.3.3-r1]
[ebuild     U  ] gnome-base/gnome-shell-3.8.4 [3.4.2] USE="i18n%*" PYTHON_TARGETS="python2_7%* -python2_6%"

It cannot pass the media-libs/freeimage-3.15.4 step. :(




Comment 6


Cengiz Gunay





          2013-08-25 05:44:00 UTC
        

I got around to completing to emerge @preserved-build and world and this is no longer an issue. I have both dev-qt/qtgui-4.8.5 and dev-qt/designer-4.8.5 installed, and the file belongs to dev-qt/designer only:

# equery b  /usr/lib64/qt4/libQtDesigner.so.4
 * Searching for /usr/lib64/qt4/libQtDesigner.so.4 ... 
dev-qt/designer-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4 -> libQtDesigner.so.4.8.5)
dev-qt/designer-4.8.5 (/usr/lib64/qt4/libQtDesigner.so.4.8.5)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

