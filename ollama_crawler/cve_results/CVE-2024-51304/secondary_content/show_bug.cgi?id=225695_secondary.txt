Title: 225695 – media-sound/ardour-2.4.1: SConstruct checks for boost in /usr/local
URL: https://bugs.gentoo.org/show_bug.cgi?id=225695

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 225695
media-sound/ardour-2.4.1: SConstruct checks for boost in /usr/local
Last modified: 2008-08-07 21:18:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 225695 
      - media-sound/ardour-2.4.1: SConstruct checks for boost in /usr/local


Summary:
media-sound/ardour-2.4.1: SConstruct checks for boost in /usr/local
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Professional Audio Applications Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-06-10 04:19 UTC by Benjamin Bannier





      Modified:
    
2008-08-07 21:18 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



daniel.santos









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Wipe /usr/local from SConstruct

              (do_not_use_usr_local.patch,336 bytes,
                patch)

            
2008-06-10 04:20 UTC,

            Benjamin Bannier




Details
            | Diff





config.log

              (config.log,4.88 KB,
                text/plain)

            
2008-06-27 09:40 UTC,

            Daniel Santos




Details





output: emerge --info

              (emerge.info,4.03 KB,
                text/plain)

            
2008-06-27 15:05 UTC,

            Benjamin Bannier




Details





/var/tmp/portage/media-sound/ardour-2.4.1/temp/environment

              (environment,108.03 KB,
                text/plain)

            
2008-06-27 15:06 UTC,

            Benjamin Bannier




Details





/var/tmp/portage/media-sound/ardour-2.4.1/temp/build.log

              (build.log,2.63 KB,
                text/plain)

            
2008-06-27 15:07 UTC,

            Benjamin Bannier




Details





2.5 config.log 

              (config.log,5.38 KB,
                text/plain)

            
2008-08-07 19:53 UTC,

            Daniel Santos




Details





/tmp/portage/media-sound/ardour-2.5/temp/environment

              (environment,111.29 KB,
                text/plain)

            
2008-08-07 19:55 UTC,

            Daniel Santos




Details





/var/log/portage/media-sound:ardour-2.5:20080807-194006.log

              (media-sound:ardour-2.5:20080807-194006.log,2.75 KB,
                text/plain)

            
2008-08-07 19:56 UTC,

            Daniel Santos




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Benjamin Bannier





          2008-06-10 04:19:11 UTC
        

SConstruct checks for boost in /usr/local, and at least on my system boost sits in /usr, thus compile fails.

The offending line is ardour-2.4.1/SConstruct:920

Reproducible: Always

Steps to Reproduce:




Comment 1


Benjamin Bannier





          2008-06-10 04:20:47 UTC
        

Created attachment 156173 [details, diff]
Wipe /usr/local from SConstruct

Here's a *very general* patch against the ebuild that fixes this issue for me.

HTH,

b.




Comment 2


Alexis Ballier






          2008-06-25 16:14:01 UTC
        

I'm not a scons expert, but it seems it only tries to find it in /usr/local in *addition* to /usr.
What's the error you're getting? and what's in your /usr/local ? a broken boost install perhaps ?




Comment 3


Daniel Santos





          2008-06-27 09:32:14 UTC
        

(In reply to comment #0)
naughty, naughty on your bug report -- very to the point, but no info that will help those who aren't having this problem (I'm guessing there are many who don't?)

(root@loudmouth)
/root# emerge -v ardour

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] media-sound/ardour-2.4.1 [2.0.5] USE="freesound%* nls sse (-altivec) -debug (-fftw%*)" 0 kB

Total: 1 package (1 upgrade), Size of downloads: 0 kB

>>> Verifying ebuild Manifests...

>>> Emerging (1 of 1) media-sound/ardour-2.4.1 to /
 * ardour-2.4.1.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                                                                                     [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                                        [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                                       [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                                      [ ok ]
 * checking ardour-2.4.1.tar.bz2 ;-) ...                                                                                                                                    [ ok ]
>>> Unpacking source...
>>> Unpacking ardour-2.4.1.tar.bz2 to /tmp/portage/media-sound/ardour-2.4.1/work
 * Applying ardour-2.0.3-sndfile-external.patch ...                                                                                                                         [ ok ]
 * Applying ardour-2.4-cflags.patch ...                                                                                                                                     [ ok ]
 * Applying ardour-2.3.1-soundtouch.patch ...                                                                                                                               [ ok ]
 * Applying ardour-2.4-gcc43.patch ...                                                                                                                                      [ ok ]
>>> Source unpacked.
>>> Compiling source in /tmp/portage/media-sound/ardour-2.4.1/work/ardour-2.4.1 ...
scons: Reading SConscript files ...
Checking for pkg-config version >= 0.8.0... yes
Checking for gthread-2.0... yes
Checking for lrdf... yes
Checking for libgnomecanvas-2.0... yes
Checking for gtk+-2.0... yes
Checking for jack... yes
Checking for samplerate... yes
Checking for glib-2.0... yes
Checking for libxml-2.0... yes
Checking for raptor... yes
Checking for fftw3f...yes
Checking for fftw3...yes
Checking for C header file fftw3.h... yes
Checking for C header file curl/curl.h... yes
LV2 support is not enabled.  Build with 'scons LV2=1' to enable.
Congratulations, you have a functioning C++ compiler.
system triple: x86_64-unknown-linux-gnu

*******************************
detected DIST_TARGET = x86_64
*******************************

Checking for C header file fftw3.h... yes
Checking for usb_interrupt_write() in C library usb... yes
Checking for C header file linux/input.h... yes
Checking for FLAC__seekable_stream_decoder_init() in C++ library FLAC... no
Checking for C++ header file boost/shared_ptr.hpp... no
Boost header files do not appear to be installed.
 *
 * ERROR: media-sound/ardour-2.4.1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2728:  Called die
 * The specific snippet of code:
 *       scons $(ardour_use_enable DEBUG debug) FPU_OPTIMIZATION=${FPU_OPTIMIZATION} DESTDIR="${D}" $(ardour_use_enable NLS nls) $(ardour_use_enable FREESOUND freesound) FFT_ANALYSIS=1 SYSLIBS=1 CFLAGS="${CFLAGS}" LV2=0 PREFIX=/usr || die "scons failed"
 *  The die message:
 *   scons failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/media-sound:ardour-2.4.1:20080627-092541.log'.
 * The ebuild environment file is located at '/tmp/portage/media-sound/ardour-2.4.1/temp/environment'.
 *




(root@loudmouth)
/root# emerge --info
Portage 2.2_rc1 (default/linux/amd64/2008.0/desktop, gcc-4.3.1, glibc-2.8_p20080602-r0, 2.6.25-gentoo-r5 x86_64)
=================================================================
System uname: Linux-2.6.25-gentoo-r5-x86_64-AMD_Phenom-tm-_9850_Quad-Core_Processor-with-glibc2.2.5
Timestamp of tree: Fri, 27 Jun 2008 08:30:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r5
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.62
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r2
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=athlon64 -O2 -pipe -msse3"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks parallel-fetch preserve-libs sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://mirror.fslutd.org/linux/distributions/gentoo/ http://gentoo.osuosl.org/ ftp://mirror.fslutd.org/linux/distributions/gentoo/ ftp://gentoo.mirrors.pair.com/ http://gentoo.chem.wisc.edu/gentoo/ http://mirror.mcs.anl.gov/pub/gentoo/ http://mirror.espri.arizona.edu/gentoo/ http://gentoo.mirrors.tds.net/gentoo"
LDFLAGS=""
LINGUAS="af ar as_IN be be_BY bg br bs ca cs cy da de dz el en en_GB en_US en_ZA es es_AR es_ES et eu fa fi fr fy fy_NL ga ga_IE gl gu gu_IN he hi_IN hr hu it ja ka km ko ku lt mk ml_IN mn mr_IN ms nb nb_NO nds ne nl nn nn_NO nr ns or_IN pa pa_IN pl pt pt_BR pt_PT ro ru rw sh sk sl sr ss st sv sv_SE sw sw_TZ ta te te_IN tg th ti ti_ER tr ts uk ur ur_IN ve vi xh zh zh_CN zh_TW zu"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/portage/local/layman/java-overlay /usr/portage/local/layman/zugaina"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 3ds 64bit 7zip X Xaw3d a52 aac aalib acl acpi administrator afs aim aimextras aio akode alsa amd64 amr ao aotuv apache apache2 apm applet ares arts asf async audacious audiofile authdaemond authfile autoipd automount avahi backtrace bash-completion berkdb binfilter bittorrent bl bluetooth bonjour boost branding buttons bzip2 c3p0 cairo calendar cdaudio cdb cdda cddb cdparanoia cdr cdrom cegui cg cgi cjk cli commons-digester console cpudetection cpufreq cpulimit cracklib crypt cscope css cups curl curlwrappers cvs daap dbus dedicated dga directfb divx djbfft dmx dolby-record-switch dom4j double-precision dri dts dv dvd dvdnav dvdr dvdread dxr3 eds emboss emoticon encode enscript esd evo excel exif expat extraicons fam fasttrack fbcon ffmpeg fftw firefox flac flash fmod font-server fontconfig fortran ftp fuse fusion gb gcj gd gdb gdbm geos ggi gif ginac glitz glut gmedia gmp gmtfull gnokii gnutella gnutls gphoto2 gpm graphviz gs gsl gstreamer gtalk gtk gzip hal hddtemp html hwmixer icecast iconv icq id3 idn ieee1394 imagemagick imap imlib inifile insecure-savers irda isdnlog ithreads jack java java5 java6 javascript jbig jce jikes jingle jmx jpeg jpeg2k kde kdexdeltas kdrive kerberos keyring lame lcms ldap libcaca libnotify libsamplerate libvisual libwww lirc live lm_sensors log4j logitech-mouse lua lzo mad maildir math maxoptimization md5sum meanwhile midi mikmod mime ming mjpeg mmap mmkeys mmx mmxext mng modperl modplug motif mouse mozdevelop mozilla mp2 mp3 mp4 mp4live mpeg mpeg2 msn mtp mudflap multicall multilib multislot musepack musicbrainz mysql mysqli nas ncurses net netjack network njb nls nntp nptl nptlonly nsplugin nss nuv nvidia nvtv objc objc++ objc-gc ode odk offensive ogg openal openexr opengl openmp p2p pam pango pch pcntl pcre pda pdf perl php player plotutils png portaudio posix postproc ppds pppd pulseaudio python qq qt3 qt3support qt4 quicktime radio rar readline reflection rrdcgi rtc ruby samba sametime sasl sdl sdl-image sdl-sound seamonkey sensord serpentine session sharedext silc slp smp smtp sndfile snmp soap sockets sound speex spell spl sqlite sqlite3 sse sse2 sse3 ssl startup-notification stream streamripper subversion suexec svg svgz symlink sysfs syslog sysvipc tagwriting tcl tcpd tetex tga theora threads tidy tiff timidity tk tokenizer transcode trayicon truetype tse3 unicode urandom usb userlocales v4l v4l2 vcd vda vhosts videos vim-syntax vim-with-x visualization vorbis vorbis-psy wav wavpack webdav wifi wma wmf wxwindows x264 xanim xattr xcb xcomposite xface xforms xine xinerama xml xmlreader xmlrpc xmlwriter xorg xplanet xpm xprint xscreensaver xsl xv xvid xvmc yaepg yahoo yv12 zeroconf zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_alias authn_dbd authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache dumpio env expires ext_filter file_cache filter headers ident imagemap include info log_config log_forensic logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="af ar as_IN be be_BY bg br bs ca cs cy da de dz el en en_GB en_US en_ZA es es_AR es_ES et eu fa fi fr fy fy_NL ga ga_IE gl gu gu_IN he hi_IN hr hu it ja ka km ko ku lt mk ml_IN mn mr_IN ms nb nb_NO nds ne nl nn nn_NO nr ns or_IN pa pa_IN pl pt pt_BR pt_PT ro ru rw sh sk sl sr ss st sv sv_SE sw sw_TZ ta te te_IN tg th ti ti_ER tr ts uk ur ur_IN ve vi xh zh zh_CN zh_TW zu" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS







Comment 4


Daniel Santos





          2008-06-27 09:40:12 UTC
        

Created attachment 158601 [details]
config.log

config.log file

Off topic, I noticed this message:
ccache: failed to create /var/tmp/portage/.ccache (No such file or directory)
.. which is interesting because my ccache is configured to use the default /var/tmp/ccache.




Comment 5


Daniel Santos





          2008-06-27 09:43:20 UTC
        

Related to this upstream discussion: http://ardour.org/node/587




Comment 6


Alexis Ballier






          2008-06-27 14:04:14 UTC
        

(In reply to comment #4)
> Created an attachment (id=158601) [edit]
> config.log
> 
> config.log file
> 
> Off topic, I noticed this message:
> ccache: failed to create /var/tmp/portage/.ccache (No such file or directory)
> .. which is interesting because my ccache is configured to use the default
> /var/tmp/ccache.

and disabling ccache helps ?






Comment 7


Benjamin Bannier





          2008-06-27 15:05:50 UTC
        

Created attachment 158661 [details]
output: emerge --info




Comment 8


Benjamin Bannier





          2008-06-27 15:06:24 UTC
        

Created attachment 158663 [details]
/var/tmp/portage/media-sound/ardour-2.4.1/temp/environment




Comment 9


Benjamin Bannier





          2008-06-27 15:07:00 UTC
        

Created attachment 158665 [details]
/var/tmp/portage/media-sound/ardour-2.4.1/temp/build.log




Comment 10


Benjamin Bannier





          2008-06-27 15:15:36 UTC
        

Hi,

(In reply to comment #0)
> naughty, naughty on your bug report [..]

sorry for being so brief with initial bug report; I am adding more info.
Created an attachment (id=158661)
 output: emerge --info
Created an attachment (id=158663)
 /var/tmp/portage/media-sound/ardour-2.4.1/temp/environment
Created an attachment (id=158665)
 /var/tmp/portage/media-sound/ardour-2.4.1/temp/build.log

(In reply to comment #2)
> What's the error you're getting? and what's in your /usr/local ? a broken 
> boost install perhaps ?

Nothing really.
# ls /usr/local/* -R
 /usr/local/bin:
   startxgl.sh
 /usr/local/games:
 /usr/local/lib:
 /usr/local/man:
   whatis
 /usr/local/sbin:
 /usr/local/share:
   doc  man
 /usr/local/share/doc:
 /usr/local/share/man:
   whatis
 /usr/local/src:

(In reply to comment #6)
> and disabling ccache helps ?
Not here.

Please let me know if you need more info.

Cheers,

Benjamin




Comment 11


Alexis Ballier






          2008-07-16 10:49:09 UTC
        

sounds like bug #223527




Comment 12


Daniel Santos





          2008-08-04 16:34:00 UTC
        

(In reply to comment #6)
> and disabling ccache helps ?
It did not help for me, same problem with or without ccache.  Also occurs in 2.5, although Benjamin's patch did not fix the problem for me in 2.5.






Comment 13


Alexis Ballier






          2008-08-05 23:26:40 UTC
        

I've bumped scons dep to latest available, according to bug #223527 this should fix the problems. Please reopen if it does not. I'm getting tired of scons randomly breaking stuff with very poor quality releases.




Comment 14


Daniel Santos





          2008-08-07 19:51:47 UTC
        

Still no dice for me.  I do not appear to have the privs to re-open this bug, so please reopen it for me.  Also, I'm tyring this on 2.5.


Checking for C++ header file boost/shared_ptr.hpp... no
Boost header files do not appear to be installed. You also might be running a buggy version of scons. Try scons 0.97 if you can.
 * ERROR: media-sound/ardour-2.5 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2734:  Called die
 * The specific snippet of code:
 *       scons $(ardour_use_enable DEBUG debug) FPU_OPTIMIZATION=${FPU_OPTIMIZATION} DESTDIR="${D}" $(ardour_use_enable NLS nls) $(ardour_use_enable FREESOUND freesound) FFT_ANALYSIS=1 SYSLIBS=1 CFLAGS="${CFLAGS}" LV2=0 PREFIX=/usr || die "scons failed"
 *  The die message:
 *   scons failed
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/media-sound:ardour-2.5:20080807-194030.log'.
 * The ebuild environment file is located at '/tmp/portage/media-sound/ardour-2.5/temp/environment'.

 * Messages for package media-sound/ardour-2.5:

 * ERROR: media-sound/ardour-2.5 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2734:  Called die
 * The specific snippet of code:
 *       scons $(ardour_use_enable DEBUG debug) FPU_OPTIMIZATION=${FPU_OPTIMIZATION} DESTDIR="${D}" $(ardour_use_enable NLS nls) $(ardour_use_enable FREESOUND freesound) FFT_ANALYSIS=1 SYSLIBS=1 CFLAGS="${CFLAGS}" LV2=0 PREFIX=/usr || die "scons failed"
 *  The die message:
 *   scons failed
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/media-sound:ardour-2.5:20080807-194030.log'.
 * The ebuild environment file is located at '/tmp/portage/media-sound/ardour-2.5/temp/environment'.


/root# emerge --info
Portage 2.2_rc6 (default/linux/amd64/2008.0/desktop, gcc-4.3.1, glibc-2.8_p20080602-r0, 2.6.25-gentoo-r6 x86_64)
=================================================================
System uname: Linux-2.6.25-gentoo-r6-x86_64-AMD_Phenom-tm-_9850_Quad-Core_Processor-with-glibc2.2.5
Timestamp of tree: Thu, 07 Aug 2008 19:30:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.5.2-r7
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.62-r1
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8-sse3 -msse4a -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=k8-sse3 -msse4a -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks parallel-fetch preserve-libs sandbox sfperms splitdebug strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://mirror.fslutd.org/linux/distributions/gentoo/ http://gentoo.osuosl.org/ ftp://mirror.fslutd.org/linux/distributions/gentoo/ ftp://gentoo.mirrors.pair.com/ http://gentoo.chem.wisc.edu/gentoo/ http://mirror.mcs.anl.gov/pub/gentoo/ http://mirror.espri.arizona.edu/gentoo/ http://gentoo.mirrors.tds.net/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="en_US af ar as_IN be be_BY bg br bs ca cs cy da de dz el en en_GB en_ZA es es_AR es_ES et eu fa fi fr fy fy_NL ga ga_IE gl gu gu_IN he hi_IN hr hu it ja ka km ko ku lt mk ml_IN mn mr_IN ms nb nb_NO nds ne nl nn nn_NO nr ns or_IN pa pa_IN pl pt pt_BR pt_PT ro ru rw sh sk sl sr ss st sv sv_SE sw sw_TZ ta te te_IN tg th ti ti_ER tr ts uk ur ur_IN ve vi xh zh zh_CN zh_TW zu"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/portage/local/layman/java-overlay /usr/portage/local/layman/zugaina /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 3ds 64bit 7zip X Xaw3d a52 aac aalib acl acpi administrator afs aim aimextras aio akode alsa amd64 amr ao aotuv apache apache2 apm applet ares arts asf async audacious audiofile authdaemond authfile autoipd automount avahi backtrace bash-completion berkdb binfilter bittorrent bl bluetooth bonjour boost branding buttons bzip2 c3p0 cairo calendar cdaudio cdb cdda cddb cdparanoia cdr cdrom cegui cg cgi cjk cli commons-digester console cpudetection cpufreq cpulimit cracklib crypt cscope css cups curl curlwrappers cvs daap dbus dedicated dga directfb divx djbfft dmx dolby-record-switch dom4j double-precision dri dts dv dvd dvdnav dvdr dvdread dxr3 eds emboss emoticon encode enscript esd evo excel exif expat extraicons fam fasttrack fbcon ffmpeg fftw firefox flac flash fmod font-server fontconfig fortran ftp fuse fusion gb gcj gd gdb gdbm geos ggi gif ginac glitz glut gmedia gmp gmtfull gnokii gnutella gnutls gphoto2 gpm graphviz gs gsl gstreamer gtalk gtk gzip hal hddtemp html hwmixer icecast iconv icq id3 idn ieee1394 imagemagick imap imlib inifile insecure-savers irda isdnlog ithreads jack java java5 java6 javascript jbig jce jikes jingle jmx jpeg jpeg2k kde kdexdeltas kdrive kerberos keyring lame lcms ldap libcaca libnotify libsamplerate libvisual libwww lirc live lm_sensors log4j logitech-mouse lua lzo mad maildir math maxoptimization md5sum meanwhile midi mikmod mime ming mjpeg mmap mmkeys mmx mmxext mng modperl modplug motif mouse mozdevelop mozilla mp2 mp3 mp4 mp4live mpeg mpeg2 msn mtp mudflap multicall multilib multislot musepack musicbrainz mysql mysqli nas ncurses net netjack network njb nls nntp nptl nptlonly nsplugin nss nuv nvidia nvtv objc objc++ objc-gc ode odk offensive ogg openal openexr opengl openmp p2p pam pango pch pcntl pcre pda pdf perl php player plotutils png portaudio posix postproc ppds pppd pulseaudio python qq qt3 qt3support qt4 quicktime radio rar readline reflection rrdcgi rtc ruby samba sametime sasl sdl sdl-image sdl-sound seamonkey sensord serpentine session sharedext silc slp smp smtp sndfile snmp soap sockets sound speex spell spl sqlite sqlite3 sse sse2 sse3 ssl startup-notification stream streamripper subversion suexec svg svgz symlink sysfs syslog sysvipc tagwriting tcl tcpd tetex tga theora threads tidy tiff timidity tk tokenizer transcode trayicon truetype tse3 unicode urandom usb userlocales v4l v4l2 vcd vda vhosts videos vim-syntax vim-with-x visualization vorbis vorbis-psy wav wavpack webdav wifi wma wmf wxwindows x264 xanim xattr xcb xcomposite xface xforms xine xinerama xml xmlreader xmlrpc xmlwriter xorg xplanet xpm xprint xscreensaver xsl xv xvid xvmc yaepg yahoo yv12 zeroconf zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_alias authn_dbd authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache dumpio env expires ext_filter file_cache filter headers ident imagemap include info log_config log_forensic logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_US af ar as_IN be be_BY bg br bs ca cs cy da de dz el en en_GB en_ZA es es_AR es_ES et eu fa fi fr fy fy_NL ga ga_IE gl gu gu_IN he hi_IN hr hu it ja ka km ko ku lt mk ml_IN mn mr_IN ms nb nb_NO nds ne nl nn nn_NO nr ns or_IN pa pa_IN pl pt pt_BR pt_PT ro ru rw sh sk sl sr ss st sv sv_SE sw sw_TZ ta te te_IN tg th ti ti_ER tr ts uk ur ur_IN ve vi xh zh zh_CN zh_TW zu" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Also, I have >=dev-libs/icu-3.8 masked due to previous conflicts with another package a few months ago (haven't tired unmasking it lately), so this is what boost, icu & scons look like:

[ebuild   R   ] dev-libs/icu-3.6-r2  USE="-debug" 0 kB
[ebuild   R   ] dev-util/scons-0.98.5  0 kB
[ebuild   R   ] dev-libs/boost-1.35.0-r1  USE="doc expat icu tools -debug -mpi" 0 kB





Comment 15


Daniel Santos





          2008-08-07 19:53:48 UTC
        

Created attachment 162458 [details]
2.5 config.log




Comment 16


Daniel Santos





          2008-08-07 19:55:19 UTC
        

Created attachment 162459 [details]
/tmp/portage/media-sound/ardour-2.5/temp/environment




Comment 17


Daniel Santos





          2008-08-07 19:56:33 UTC
        

Created attachment 162461 [details]
/var/log/portage/media-sound:ardour-2.5:20080807-194006.log




Comment 18


Daniel Santos





          2008-08-07 20:07:47 UTC
        

ah hah! manually running scons as root succeeds and fails if I sudo to portage.  Will investigate further, but I don't know jack about scons, so I'll have to figure that part out :)




Comment 19


Alexis Ballier






          2008-08-07 20:12:48 UTC
        

(In reply to comment #14)
> Still no dice for me.  I do not appear to have the privs to re-open this bug,
> so please reopen it for me.  Also, I'm tyring this on 2.5.

weird, reopening




Comment 20


Daniel Santos





          2008-08-07 21:01:16 UTC
        

Christ! Please re-close, I had a symlink /usr/local/bin/g++ -> /usr/bin/ccache from before screwing my config up, sorry (explains a lot of problems I was having)




Comment 21


Alexis Ballier






          2008-08-07 21:02:54 UTC
        

(In reply to comment #20)
> Christ! Please re-close, I had a symlink /usr/local/bin/g++ -> /usr/bin/ccache
> from before screwing my config up, sorry (explains a lot of problems I was
> having)

haha ;)




Comment 22


Daniel Santos





          2008-08-07 21:18:41 UTC
        

To elaborate, my /etc/passwd had the portage home directory set to /var/tmp/portage, the default PORTAGE_TMPDIR, but I'm using /tmp/portage for my PORTAGE_TMPDIR so /var/tmp/portage doesn't exist.  For whatever reason (maybe because the "ccache" FEATURE wasn't present?), it kept trying to create /var/tmp/portage/.ccache, as seen in my config.log:

ccache: failed to create /var/tmp/portage/.ccache (No such file or directory)

I set my CCACHE_DIR to /var/tmp/ccache because I want it to stick around (my /tmp directory is tempfs), but the damn thing never gets used (initialized, but never used).  So I may have actually discovered some other bug in portage and/or ccache (when the HOME directory for the portage user is invalid and use the FEATUREs "userfetch userpriv usersandbox").  Even running the ardour compile with the ccache FEATURE set, I'm not seeing my /var/tmp/ccache directory being used (maybe something in that ebuild disables it?).  Either way, I'm going to play with it more and see what I can come up with.  I have the home directory for portage set still to a non-existent directory because I want to see what I can learn about this.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

