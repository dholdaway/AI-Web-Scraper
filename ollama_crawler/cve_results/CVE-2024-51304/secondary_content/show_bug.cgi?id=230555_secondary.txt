Title: 230555 – app-text/texlive-core-2007-r13: texmf-update misses german hyphenation
URL: https://bugs.gentoo.org/show_bug.cgi?id=230555

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 230555
app-text/texlive-core-2007-r13: texmf-update misses german hyphenation
Last modified: 2008-07-04 09:47:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 230555 
      - app-text/texlive-core-2007-r13: texmf-update misses german hyphenation


Summary:
app-text/texlive-core-2007-r13: texmf-update misses german hyphenation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-07-02 18:45 UTC by Martin von Gagern





      Modified:
    
2008-07-04 09:47 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



coldwind
tex









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




log resulting in missing hyphenation

              (latex-broken.log,10.15 KB,
                text/plain)

            
2008-07-02 18:47 UTC,

            Martin von Gagern




Details





log resulting in correct hyphenation

              (latex-correct.log,10.65 KB,
                text/plain)

            
2008-07-02 18:49 UTC,

            Martin von Gagern




Details





Diff of logs

              (latex.log.diff,2.60 KB,
                patch)

            
2008-07-02 18:51 UTC,

            Martin von Gagern




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2008-07-02 18:45:45 UTC
        

I got this output

This is pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)
 %&-line parsing enabled.
entering extended mode
(./test.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, loaded.
(/usr/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/usr/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/share/texmf-dist/tex/generic/german/ngerman.sty v2.5e 1998-07-08
ngerman -- \language number for ngerman undefined, default 255 used,
ngerman -- Please read "gerdoc.tex" how to install hyphenation patterns.)
(./test.aux) [1] (./test.aux) )
Output written on test.dvi (1 page, 224 bytes).
Transcript written on test.log.

while compiling this little input

\documentclass{article}
\usepackage{ngerman}
\begin{document}
T"ast
\end{document}

Investigating the issue I found that texmf-update for some reason misses non-local internationalizations. After manually running "fmtutil-sys --all" I get this output instead:

This is pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)
 %&-line parsing enabled.
entering extended mode
(./test.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, german, ngerman, loaded.
(/usr/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/usr/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/share/texmf-dist/tex/generic/german/ngerman.sty v2.5e 1998-07-08)
(./test.aux) [1] (./test.aux) )
Output written on test.dvi (1 page, 224 bytes).
Transcript written on test.log.

Running texmf-update breaks things again. The file /var/lib/texmf/web2c/pdftex/latex.log reflects the presence or absence of german hyphenation patterns in each case. I'll attach those logs in a moment.

I still don't see where the different behaviour comes from. The PATH seems not to be the source of the difference. Other than that, I can think of no cause for this different behaviour.




Comment 1


Martin von Gagern





          2008-07-02 18:47:56 UTC
        

Created attachment 159357 [details]
log resulting in missing hyphenation

This is the contents of /var/lib/texmf/web2c/pdftex/latex.log after running texmf-update lost the hyphenations.




Comment 2


Martin von Gagern





          2008-07-02 18:49:24 UTC
        

Created attachment 159359 [details]
log resulting in correct hyphenation

This is the contents of /var/lib/texmf/web2c/pdftex/latex.log after running
fmtutil-sys --all to restore the hyphenations.




Comment 3


Martin von Gagern





          2008-07-02 18:51:34 UTC
        

Created attachment 159361 [details, diff]
Diff of logs

These are the differences between the two logs. Maybe the reason for the breakage is somewhere in there.




Comment 4


Santiago M. Mola (RETIRED)






          2008-07-02 19:50:30 UTC
        

Martin, is this problem present in -r12?




Comment 5


Alexis Ballier






          2008-07-02 19:54:29 UTC
        

what do you have in /etc/texmf/tex ?
I don't have it here; perhaps there are config files overridding the settings.




Comment 6


Martin von Gagern





          2008-07-02 20:34:49 UTC
        

(In reply to comment #4)
> Martin, is this problem present in -r12?

Yes, I could reproduce this with -r12.

(In reply to comment #5)
> what do you have in /etc/texmf/tex ?

subdirectories amstex, context, cyrplain, generic, lambda, latex, mex, plain and platex, each with a config subdir, each with several config files, mostly *.ini.

> I don't have it here; perhaps there are config files overridding the settings.

I couldn't find any package claiming to own these files. Might be left over from a tetex installation, I'm not sure. Maybe I should delete them, but as this is a live system, I can't do so just now, as I don't know what will break.




Comment 7


Alexis Ballier






          2008-07-02 20:56:41 UTC
        

(In reply to comment #6)

> (In reply to comment #5)
> > what do you have in /etc/texmf/tex ?
> 
> subdirectories amstex, context, cyrplain, generic, lambda, latex, mex, plain
> and platex, each with a config subdir, each with several config files, mostly
> *.ini.
> 
> > I don't have it here; perhaps there are config files overridding the settings.
> 
> I couldn't find any package claiming to own these files. Might be left over
> from a tetex installation, I'm not sure. Maybe I should delete them, but as
> this is a live system, I can't do so just now, as I don't know what will break.

you probably already have them in /usr/share/texmf* ; I think moving them away, running texmf-update to see what happens, and then putting them back can not break anything. You can also try to diff them against the stock ones from texlive.




Comment 8


Martin von Gagern





          2008-07-02 21:53:41 UTC
        

Indeed fixed by removing /etc/texmf/tex

Interesting fact is that in my logs, the correct run was the one referencing /etc while the broken one used /usr. As to the different behaviour of fmtutil-sys inside and outside texmf-update, I still have no clue. The differences for the files present in both directories seem rather minor, include this version number in preload.cfg, but most of the ini files are not present in /usr/share/texmf. /usr/share/texmf/tex/platex/config/pdfplatex.ini is a symlink to /etc/texmf/tex/platex/config/pdfplatex.ini and therefore now dead; that file seems to be orphaned in any case, though.




Comment 9


Alexis Ballier






          2008-07-04 09:47:57 UTC
        

worksforme then









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

