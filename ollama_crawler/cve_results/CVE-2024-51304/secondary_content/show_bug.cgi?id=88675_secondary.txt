Title: 88675 – games-emulation/gens-2.12b won't use SDL
URL: https://bugs.gentoo.org/show_bug.cgi?id=88675

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 88675
games-emulation/gens-2.12b won't use SDL
Last modified: 2007-11-29 03:48:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 88675 
      - games-emulation/gens-2.12b won't use SDL


Summary:
games-emulation/gens-2.12b won't use SDL
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-10 22:02 UTC by Eric Andry





      Modified:
    
2007-11-29 03:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



stian









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




strace executing gens and receiving SDL error

              (gens-sdl-strace.log.gz,160.22 KB,
                application/gzip)

            
2005-04-10 22:04 UTC,

            Eric Andry




Details





Updated ebuild that uses gens-rc3.5-opengl.tar.gz

              (gens-2.12b.ebuild,894 bytes,
                application/octet-stream)

            
2005-04-10 22:06 UTC,

            Eric Andry




Details





My gens-dot-cfg

              (gens.cfg,16 bytes,
                text/plain)

            
2005-04-11 09:14 UTC,

            Eric Andry




Details





My gens-dot-cfg

              (gens.cfg,2.40 KB,
                text/plain)

            
2005-04-11 09:15 UTC,

            Eric Andry




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Eric Andry





          2005-04-10 22:02:54 UTC
        

Gens included in current 2.12b ebuild will not use SDL.  When starting from a terminal window and loading a ROM, I see this error:

$ SDL: Audio timeout - buggy audio driver? (disabled)
audio: Bad file descriptor

The ROM loads without audio

Reproducible: Always
Steps to Reproduce:
1. Use existing 2.12b ebuild from portage: "emerge gens" (currently 2.12b)
2. Start gens from command-line with a user in the 'games' group: gens
2. Use default settings -- meaning don't configure gamepad, etc.
3. Load a ROM

Actual Results:  
$ SDL: Audio timeout - buggy audio driver? (disabled)
audio: Bad file descriptor

The ROM loads with no audio


Expected Results:  
* No warning messages about SDL missing or buggy as described in "Actual
Results" section.
* ROM loads and sound is heard.

* First unemerged libsdl and sdl-mixer to be sure it wasn't an SDL issue.  Also
tried another game that uses SDL and it works fine.

* Attaching a compressed log containing an strace (gens-sdl-strace.log.gz)
starting gens, then opening a ROM, run til sound should be heard, close the ROM,
and finally exiting the program.

Information about packages installed

$ eix -cn libsdl
[ I] media-libs/libsdl (1.2.7-r3): Simple Direct Media Layer

$ eix -cn sdl-mixer
[ I] media-libs/sdl-mixer (1.2.5-r1): Simple Direct Media Layer Mixer Library

[ I] x11-libs/gtk+ (2.6.2 1.2.10-r11): Gimp ToolKit +


* The problem does NOT occur with gens-2.12a that's in portage.

* Tried the special OpenGL versions by modifying both 2.12a and 2.12b ebuilds
and downloading the tarballs from another site where they were available:

http://www.telefonica.net/web2/wahwah69/gens-rc3.5-opengl.tar.gz

* Attaching the ebuild that I modified to download rc3.5 to this bug report.

* 'emerge info':

gundam root # emerge info
Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.4.3-20050110,
glibc-2.3.4.20050125-r1, 2.6.11-gentoo-r6 i686)
=================================================================
System uname: 2.6.11-gentoo-r6 i686 Intel(R) Pentium(R) 4 CPU 2.20GHz
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Mar 23 2005, 08:50:32)]
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632)
[disabled]ccache version 2.3 [enabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=pentium4 -pipe -fforce-addr -fomit-frame-pointer -fweb "
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -pipe -fforce-addr -fomit-frame-pointer -fweb 
-fvisibility-inlines-hidden "
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig buildpkg ccache distlocks fixpackages sandbox
sfperms"
GENTOO_MIRRORS="http://gentoo.chem.wisc.edu/gentoo http://mirrors.tds.net/gentoo
ftp://mirrors.tds.net/gentoo http://mirror.datapipe.net/gentoo
http://mirror.datapipe.net/gentoo http://www.gigaload.org/gentoo.org/
http://gentoo.osuosl.org"
LANG="en_US.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="16bit X Xaw3d a52 aac aalib acpi alsa apache2 avi bash-completion canna cdr
cjk cross crypt cups curl dio directfb divx4linux dvd dvdr dvdread emacs emboss
encode esd exif fbcon flac foomaticdb fortran freetype freewnn gcj gdbm ggi gif
gnome gnustep gphoto2 gpm gstreamer gtk gtk2 hal imagemagick imlib immqt-bc ipv6
ithreads jack java jikes joystick jpeg junit libg++ libwww live lm_sensors
m17n-lib mad matroska memlimit mikmod mime mmx mp3 mpeg nas ncurses network nls
nptl objc ogg oggvorbis openal opengl pam pcmcia pda pdflib perl png pnp
portaudio posix ppds profile pthreads python quicktime radeon readline real
samba sdl skey slang soap sockets source speex spell sse sse2 ssl svg svga tcltk
tcpd threads tiff truetype truetype-fonts trusted type1-fonts unicode usb v4l
vcd videos wifi x86 xanim xine xinerama xml2 xmlrpc xmms xosd xpm xprint xsl xv
xvid zlib video_cards_radeon"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS




Comment 1


Eric Andry





          2005-04-10 22:04:52 UTC
        

Created attachment 55950 [details]
strace executing gens and receiving SDL error

search for SDL and you will see the error message that I'm receiving




Comment 2


Eric Andry





          2005-04-10 22:06:48 UTC
        

Created attachment 55951 [details]
Updated ebuild that uses gens-rc3.5-opengl.tar.gz

I modified the ebuild because the current 2.12b ebuild does not use the OpenGL
version yet.




Comment 3


Mr. Bones. (RETIRED)






          2005-04-11 07:47:43 UTC
        

attach /home/andrye/.gens/gens.cfg as text/plain please.




Comment 4


Eric Andry





          2005-04-11 09:14:41 UTC
        

Created attachment 55998 [details]
My gens-dot-cfg

As requested, here is my .gens.cfg configuration file.




Comment 5


Eric Andry





          2005-04-11 09:15:35 UTC
        

Created attachment 55999 [details]
My gens-dot-cfg

As requested, here is my .gens.cfg configuration file.




Comment 6


Stian Skjelstad





          2007-04-19 13:18:12 UTC
        

The strace output is a bit useless, since the program creates threads with the clone() syscall, and the stracelog only follows the mainthread.




Comment 7


Mr. Bones. (RETIRED)






          2007-11-29 03:48:47 UTC
        

I can't reproduce this.  I guess reopen if you have more information and it's still a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

