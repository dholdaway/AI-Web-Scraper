Title: 106055 – qlop from app-portage/portage-utils looks for /tmp/sandboxpids.tmp, while recent versions of sandbox do not use it anymore
URL: https://bugs.gentoo.org/show_bug.cgi?id=106055

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 106055
qlop from app-portage/portage-utils looks for /tmp/sandboxpids.tmp, while recent versions of sandbox do not use it anymore
Last modified: 2005-10-20 07:04:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 106055 
      - qlop from app-portage/portage-utils looks for /tmp/sandboxpids.tmp, while recent versions of sandbox do not use it anymore


Summary:
qlop from app-portage/portage-utils looks for /tmp/sandboxpids.tmp, while rec...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

solar (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-15 05:42 UTC by Ruben Jenster





      Modified:
    
2005-10-20 07:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jer
vapier









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Patch for SpanKY

              (portage-utils-0.1.6-qlop-sandbox.patch,697 bytes,
                patch)

            
2005-10-17 15:27 UTC,

            Jeroen Roovers (RETIRED)




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ruben Jenster





          2005-09-15 05:42:44 UTC
        

Hi,  
  
The tool 'qlop' from the portage-utils doesn't show up the current merge  
because recent sandbox ebuilds does not use /tmp/sandboxpids.tmp anymore.  
  
Also 'genlop' was affected by this problem. See  
http://bugs.gentoo.org/show_bug.cgi?id=99823  
 
Please fix that. 
 
Regards  
 
Ruben 

Reproducible: Always
Steps to Reproduce:
1.emerge something     
2.run 'qlop -c' 
Actual Results:  
 'lop: Could not open pidfile '/tmp/sandboxpids.tmp': No such file or    
directory'   

Expected Results:  
The current running merge process should show up including time information.




Comment 1


SpanKY






          2005-09-15 17:14:42 UTC
        

yeah i just havent gotten around to rewriting qlop




Comment 2


solar (RETIRED)






          2005-09-19 10:55:08 UTC
        

portage-utils-0.1.3:
 -F, --pidfile <arg> * Read emerge pidfile instead of /tmp/sandboxpids.tmp




Comment 3


Ruben Jenster





          2005-09-19 15:18:01 UTC
        

What do you set as '<arg>' - where do I find that "emerge pidfile"? 
Please give me some information about that. 
 
Regards 
 
Ruben 
 




Comment 4


solar (RETIRED)






          2005-09-20 05:56:25 UTC
        

A while ago there was a security problem with the handling of this pid
file your after. that was bug #96782 After that bug was fixed it
invalidated the entire sandbox pids idea as it uses a random tmpfile for pids
handling. 
What the genlop code does now is an execve() is /bin/ps now 
(but that is not a very good idea either)

I assume what SpanKY wants todo at some point is parse the
/proc/[0-9]*/* file system or dump the option all together.





Comment 5


Jeroen Roovers (RETIRED)






          2005-10-17 15:27:11 UTC
        

Created attachment 70884 [details, diff]
Patch for SpanKY

Not the finished polished double-checked stuff, but basically works for me.




Comment 6


SpanKY






          2005-10-19 17:03:04 UTC
        

thanks, should be fixed in cvs now




Comment 7


solar (RETIRED)






          2005-10-20 07:04:26 UTC
        

SpankY: nice work. Love the #else errf() handler when  __QLOP_CURRENT__ is not
defined.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

