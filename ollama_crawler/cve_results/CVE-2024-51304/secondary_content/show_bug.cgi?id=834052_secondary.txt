Title: 834052 – arm-none-eabi-* compiled with rmprofile fails to compile for blackmagic debugger
URL: https://bugs.gentoo.org/show_bug.cgi?id=834052

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 834052
arm-none-eabi-* compiled with rmprofile fails to compile for blackmagic debugger
Last modified: 2024-08-31 19:39:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 834052 
      - arm-none-eabi-* compiled with rmprofile fails to compile for blackmagic debugger


Summary:
arm-none-eabi-* compiled with rmprofile fails to compile for blackmagic debugger
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Cross compilation support








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-02-25 22:06 UTC by Penguin





      Modified:
    
2024-08-31 19:39 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



penguin
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




failed compilation output

              (compilation_output.txt,24.73 KB,
                text/plain)

            
2022-02-25 22:34 UTC,

            Penguin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Penguin





          2022-02-25 22:06:28 UTC
        

This may or may not be a bug with crossdev. It could just be a configuration issue. I created arm-none-eabi-* toolchain with the instructions found here: 

https://wiki.gentoo.org/wiki/How_to_build_a_toolchain_for_arm_cortex-m_and_cortex-r

The only change to those instructions I made was replacing the word "unknown" with "none" to make the installation compatible with the makefiles I already had.

As for the actual bug, the toolchain fails to compile this project: https://github.com/blackmagic-debug/blackmagic

The compilation output is here: https://dpaste.com/2LWXU22F7

Steps to reproduce:
# first run all instructions from above wiki to install the toolchain, then
git clone https://github.com/blackmagic-debug/blackmagic.git
cd blackmagic
make

I know the issue has something to do with the toolchain because I downloaded the toolchain from the arm website and compiled with that and it worked.I did this with the following command:
CROSS_COMPILE="/path/to/downloaded/arm/toolchain/bin/arm-none-eabi-" make -j20

This is the first time I've submitted a bug here. Please let me know if I can make the submission any better.




Comment 1


Sam James









          2022-02-25 22:22:38 UTC
        

Could you attach the failed log here for posterity etc?

Also, is sys-libs/newlib[nano] installed? (I know you have USE=nano in your instructions, but just checking).




Comment 2


Sam James









          2022-02-25 22:24:18 UTC
        

(In reply to Sam James from comment #1)
> Could you attach the failed log here for posterity etc?
> 
> Also, is sys-libs/newlib[nano] installed? (I know you have USE=nano in your
> instructions, but just checking).

Oh, and what version of newlib?




Comment 3


Penguin





          2022-02-25 22:34:19 UTC
        

Created attachment 765832 [details]
failed compilation output

I've attached a txt file with the failed compilation output. 

Also, my sys-libs/newlib does not have the "nano" use flag set. I will try enabling that.

My cross-arm-none-eabi/newlib is version 4.2.0.20211231. My sys-libs/newlib is version 9999 0.o




Comment 4


Penguin





          2024-08-31 19:39:15 UTC
        

It's been a while, but this bug was resolved at some point. Black magic firmware builds correctly using this toolchain now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

