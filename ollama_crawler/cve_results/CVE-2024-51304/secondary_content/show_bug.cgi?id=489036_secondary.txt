Title: 489036 – app-emulation/open-vm-tools-kmod-2013.09.16.1328054 - Makefile:146: Makefile.normal: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=489036

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 489036
app-emulation/open-vm-tools-kmod-2013.09.16.1328054 - Makefile:146: Makefile.normal: No such file or directory
Last modified: 2016-12-31 02:02:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 489036 
      - app-emulation/open-vm-tools-kmod-2013.09.16.1328054 - Makefile:146: Makefile.normal: No such file or directory


Summary:
app-emulation/open-vm-tools-kmod-2013.09.16.1328054 - Makefile:146: Makefile....
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mike Gilbert








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-10-22 17:05 UTC by Arnim Eijkhoudt





      Modified:
    
2016-12-31 02:02 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jason
vmware+disabled









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (stock-gentoo-sources-emerge-info.txt,14.87 KB,
                text/plain)

            
2013-10-24 12:19 UTC,

            Arnim Eijkhoudt




Details





Environment file

              (environment,122.46 KB,
                text/plain)

            
2013-11-01 19:44 UTC,

            Arnim Eijkhoudt




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Arnim Eijkhoudt





          2013-10-22 17:05:04 UTC
        

Build log attached:

>>> Emerging (1 of 1) app-emulation/open-vm-tools-kmod-2013.09.16.1328054
 * open-vm-tools-2013.09.16-1328054.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                       [ ok ]
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found kernel object directory:
 *     /lib/modules/3.11.6-gentoo/build
 * Found sources for kernel version:
 *     3.11.6-gentoo
 * Checking for suitable kernel configuration options...                                                              [ ok ]
>>> Unpacking source...
>>> Unpacking open-vm-tools-2013.09.16-1328054.tar.gz to /var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work
>>> Source unpacked in /var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work
>>> Preparing source in /var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work/open-vm-tools-2013.09.16-1328054 ...
 * Applying vmhgfs-linux-3.11.patch ...                                                                               [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work/open-vm-tools-2013.09.16-1328054 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work/open-vm-tools-2013.09.16-1328054 ...
 * Preparing vmxnet module
make -j3 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- 'LDFLAGS=-m elf_x86_64' auto-build 
Using standalone build system.
Makefile:146: Makefile.normal: No such file or directory
make: *** No rule to make target `Makefile.normal'.  Stop.
 * ERROR: app-emulation/open-vm-tools-kmod-2013.09.16.1328054::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=app-emulation/open-vm-tools-kmod-2013.09.16.1328054::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=app-emulation/open-vm-tools-kmod-2013.09.16.1328054::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/temp/environment'.
 * Working directory: '/var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work/open-vm-tools-2013.09.16-1328054/modules/linux/vmxnet'
 * S: '/var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/work/open-vm-tools-2013.09.16-1328054'

Reproducible: Always

Steps to Reproduce:
1. emerge open-vm-tools-kmod
2.
3.
Actual Results:  
 * Preparing vmxnet module
make -j3 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- 'LDFLAGS=-m elf_x86_64' auto-build 
Using standalone build system.
Makefile:146: Makefile.normal: No such file or directory
make: *** No rule to make target `Makefile.normal'.  Stop.
 * ERROR: app-emulation/open-vm-tools-kmod-2013.09.16.1328054::gentoo failed (compile phase):
 *   emake failed


Expected Results:  
Should compile normally.




Comment 1


Jeroen Roovers (RETIRED)






          2013-10-24 12:02:11 UTC
        

Please post your `emerge --info' output in a comment.




Comment 2


Arnim Eijkhoudt





          2013-10-24 12:19:10 UTC
        

Created attachment 361788 [details]
emerge --info




Comment 3


Mike Gilbert






          2013-10-31 16:47:08 UTC
        

Does /lib/modules/3.11.6-gentoo/build/Makefile exist?




Comment 4


Arnim Eijkhoudt





          2013-11-01 09:22:45 UTC
        

 ~ # ls -al /lib/modules/3.11.6-gentoo/build/Makefile
-rw-r--r-- 1 root root 48K Oct 22 12:11 /lib/modules/3.11.6-gentoo/build/Makefile

Yes, it does exist.




Comment 5


Mike Gilbert






          2013-11-01 14:34:45 UTC
        

Ok, attach the environment file please. I want to see what LINUXINCLUDE is set to.

 * The ebuild environment file is located at '/var/tmp/portage/app-emulation/open-vm-tools-kmod-2013.09.16.1328054/temp/environment'.




Comment 6


Arnim Eijkhoudt





          2013-11-01 19:44:55 UTC
        

Created attachment 362402 [details]
Environment file

Environment file attached.




Comment 7


Mike Gilbert






          2013-11-02 14:16:20 UTC
        

Well, I'm stumped; I have no idea why that code path is being chosen in the Makefile.




Comment 8


Arnim Eijkhoudt





          2013-11-03 14:26:01 UTC
        

Neither do I, I've done some heavy patching/modifications in the past to get the VM tools kmods working, but with this error I have no idea where to start looking. Where do I go from here? Will this remain open?




Comment 9


Jason Waldhelm





          2013-12-04 18:41:20 UTC
        

I'm able to duplicate this problem.  Any progress or patching ideas?




Comment 10


Arnim Eijkhoudt





          2013-12-04 18:42:15 UTC
        

I actually might have found the problem. This seems to be related to the umask setting. If the kernel is compiled/installed with permissions other than 'umask 0022', these and similar errors pop up.




Comment 11


Jason Waldhelm





          2013-12-04 18:51:16 UTC
        

Isn't umask 022 the default in /etc/profile?




Comment 12


Arnim Eijkhoudt





          2013-12-04 19:17:37 UTC
        

Yes it is, but in several of my systems it's different for security reasons. Perhaps it's something that's also affecting you?




Comment 13


Mike Gilbert






          2013-12-04 19:28:38 UTC
        

Well yes, the portage user must be able to read your kernel sources and build directory; that's so obvious I didn't even consider it. ^_^

I'm marking this as invalid. If you want to file a separate bug to improve the detection of this condition in the kernel eclasses, feel free.




Comment 14


Jason Waldhelm





          2013-12-04 19:34:01 UTC
        

Except that umask 022 is the default in my /etc/profile.  How come even if I chown -R /usr/src/linux-3.11.9 to portage:portage the emerge fails exactly the same way?




Comment 15


Mike Gilbert






          2013-12-04 19:38:19 UTC
        

(In reply to Jason Waldhelm from comment #14)

I have no idea why it isn't working for you. I closed the bug based on feedback from the original reporter.




Comment 16


Jason Waldhelm





          2013-12-04 19:40:28 UTC
        

Except the bug still exists, he hasn't confirmed that's the fix and I have the identical problem.




Comment 17


Mike Gilbert






          2013-12-04 19:44:47 UTC
        

Ah, I misinterpreted comment 10.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

