Title: 150266 – sci-libs/blas-atlas compile failure due to TEXTRELS
URL: https://bugs.gentoo.org/show_bug.cgi?id=150266

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 150266
sci-libs/blas-atlas compile failure due to TEXTRELS
Last modified: 2007-06-04 13:54:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 150266 
      - sci-libs/blas-atlas compile failure due to TEXTRELS


Summary:
sci-libs/blas-atlas compile failure due to TEXTRELS
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Science Related Packages








URL:







Whiteboard:




Keywords:









Duplicates (3):
    

172733 179247 180848

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-10-06 06:31 UTC by ivo welch





      Modified:
    
2007-06-04 13:54 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



aaaaaa111111
amd64
fhellmuth
gentoo-bugs
rafaelmeda









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




proposed patch to fix .text relocations

              (atlas-3.7.17-pic.patch,2.47 KB,
                patch)

            
2006-10-11 08:29 UTC,

            Markus Dittrich (RETIRED)




Details
            | Diff





Complete build log of 3.7.30 TEXTREL fail

              (sci-libs:blas-atlas-3.7.30:20070329-233912.log.gz,258.43 KB,
                application/octet-stream)

            
2007-03-30 12:22 UTC,

            David Pyke




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


ivo welch





          2006-10-06 06:31:40 UTC
        

I have tried all variations of blas-atlas that I can think of, but could not get around some weird errors.  (there are similar errors reported and resolved, but nothing specific that has done it for me.)  I have also reemerged libtool just to be safe.

I have looked at related errors in bugs.gentoo (yes, they exist), but there does not seem to be a clear solution to the problem(s) that I can see.

my latest attempt is blas-atlas-3.7.17 (unmasked from ~amd64, but similar issues occur with the standard blas-atlas.)

/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.6/../../../../x86_64-pc-linux-gnu/bin/ld: .libs/libatlas.la-3.o: relocation R_X86_64_32S against `a local symbol' can not be used when making a shared object; recompile with -fPIC
.libs/libatlas.la-3.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
libtool: install: `libatlas.la' is not a valid libtool archive
Try `libtool --help --mode=install' for more information.
make[1]: *** [libatlas.so] Error 1
make[1]: Leaving directory `/var/tmp/portage/blas-atlas-3.7.17/work/ATLAS/gentoo-build'
make: *** [shared-strip] Error 2

!!! ERROR: sci-libs/blas-atlas-3.7.17 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  blas-atlas-3.7.17.ebuild, line 84:   Called die


Trying it with the 32 bit (interactively specified choices---yikes), the error changes, but not the result:

/usr/x86_64-pc-linux-gnu/bin/ld: Relocatable linking with relocations from format elf32-i386 (.libs/ATL_1dsplit.o) to format elf64-x86-64 (.libs/libatlas.la-1.o) is not supported
libtool: install: `libatlas.la' is not a valid libtool archive
Try `libtool --help --mode=install' for more information.
make[1]: *** [libatlas.so] Error 1
make[1]: Leaving directory `/var/tmp/portage/blas-atlas-3.7.11/work/ATLAS'
make: *** [shared-strip] Error 2

!
Portage 2.1.1-r1 (default-linux/amd64/2006.1, gcc-3.4.6, glibc-2.4-r3, 2.6.18 x86_64)
=================================================================
System uname: 2.6.18 x86_64 Intel(R) Core(TM)2 CPU          6600  @ 2.40GHz
Gentoo Base System version 1.12.5
Last Sync: Thu, 05 Oct 2006 19:00:01 +0000
distcc 2.12.1 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -pipe -O2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=nocona -pipe -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://mirror.datapipe.net/gentoo ftp://ftp.gtlib.cc.gatech.edu/p ub/gentoo ftp://ftp.ussg.iu.edu/pub/linux/gentoo"
LC_ALL="POSIX"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aalib acpi alsa amd64 apache2 arts atlas berkdb bitmap-fonts blas bonobo bzip2 bzlib calendar cdr cli crypt cups curl directfb dlloader dri dv dvd dvdr elibc_glibc emacs encode esd f77 fbcon fortran ftp g77 gcj gdbm ggi gif gnome gphoto2 gpm gtk gtkhtml guile ieee1394 imagemagick imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog java javascript jpeg kde kdeenablefinal kernel_linux ldap libedit libg++ libwww lm_sensors mbox mime motif mozilla mp3 mpeg mval mysql nas ncurses nls nptl nptlonly nsplugin opengl pam pcm pcre perl png postgres ppds pppd python qt readline reflection ruby samba scanner sdl session slang snmp soap spell spl ssl symlink tcltk tcpd tetex tidy truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i810 video_cards_mga video_cards_neomagic video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo xinerama xml xml2 xmms xorg xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Markus Dittrich (RETIRED)






          2006-10-06 14:44:25 UTC
        

There's probably a TEXTREL somewhere. What happens when you 
try with gcc-4.1.1 which is the current stable version for amd64??




Comment 2


ivo welch





          2006-10-07 15:51:13 UTC
        


same problem:

/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: .libs/libatlas.la-3.o: relocation R_X86_64_32S against `a local symbol' can not be used when making a shared object; recompile with -fPIC
.libs/libatlas.la-3.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
libtool: install: `libatlas.la' is not a valid libtool archive
Try `libtool --help --mode=install' for more information.
make[1]: *** [libatlas.so] Error 1
make[1]: Leaving directory `/var/tmp/portage/blas-atlas-3.7.17/work/ATLAS/gentoo-build'
make: *** [shared-strip] Error 2

!!! ERROR: sci-libs/blas-atlas-3.7.17 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  blas-atlas-3.7.17.ebuild, line 84:   Called die




Portage 2.1.1-r1 (default-linux/amd64/2006.1, gcc-4.1.1, glibc-2.4-r3, 2.6.18 x86_64)
=================================================================
System uname: 2.6.18 x86_64 Intel(R) Core(TM)2 CPU          6600  @ 2.40GHz
Gentoo Base System version 1.12.5
Last Sync: Thu, 05 Oct 2006 19:00:01 +0000
distcc 2.12.1 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -pipe -O2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=nocona -pipe -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://mirror.datapipe.net/gentoo ftp://ftp.gtlib.cc.gatech.edu/p ub/gentoo ftp://ftp.ussg.iu.edu/pub/linux/gentoo"
LC_ALL="POSIX"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aalib acpi alsa amd64 apache2 arts atlas berkdb bitmap-fonts blas bonobo bzip2 bzlib calendar cdr cli crypt cups curl directfb dlloader dri dv dvd dvdr elibc_glibc emacs encode esd f77 fbcon fortran ftp g77 gcj gdbm ggi gif gnome gphoto2 gpm gtk gtkhtml guile ieee1394 imagemagick imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog java javascript jpeg kde kdeenablefinal kernel_linux ldap libedit libg++ libwww lm_sensors mbox mime motif mozilla mp3 mpeg mval mysql nas ncurses nls nptl nptlonly nsplugin opengl pam pcm pcre perl png postgres ppds pppd python qt readline reflection ruby samba scanner sdl session slang snmp soap spell spl ssl symlink tcltk tcpd tetex tidy truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i810 video_cards_mga video_cards_neomagic video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo xinerama xml xml2 xmms xorg xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY






Comment 3


Markus Dittrich (RETIRED)






          2006-10-07 15:58:15 UTC
        

Hi Ivo,

Thanks for trying gcc-4.1.1! Is there any way you could capture all of the
compile output and post it somewhere for me to download? Please don't 
post it on bugzilla since it will likely be a fairly large file.

Thanks,
Markus




Comment 4


Markus Dittrich (RETIRED)






          2006-10-11 08:29:58 UTC
        

Created attachment 99370 [details, diff]
proposed patch to fix .text relocations

Hi Ivo,

Could you please try the patch for 3.7.17 and see if it fixes the
.text relocations on your machine. It works fine on my x86 box, but
I might have missed some x86_64 stuff.

Thanks,
Markus




Comment 5


Fernando Henrique Ferraz Pereira da Rosa





          2006-10-18 17:19:11 UTC
        

Same problem here with 3.7.11-r1. 

...

archinfo_x86.c: In function 'PrintUsage':
archinfo_x86.c:106: warning: incompatible implicit declaration of built-in function 'exit'
archinfo_x86.c: In function 'main':
archinfo_x86.c:211: warning: incompatible implicit declaration of built-in function 'exit'
make[2]: *** [atlas_run] Error 20
make[1]: *** [IRunx8664] Error 2
Probing for architecture:
make[2]: *** [atlas_run] Error 20
make[1]: *** [IRunx86Info] Error 2
make: *** [config] Error 255
 * 
 * ATLAS auto-config failed.
 * Please run 'interactive=1 emerge blas-atlas' to configure manually.
 * 

!!! ERROR: sci-libs/blas-atlas-3.7.11-r1 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  blas-atlas-3.7.11-r1.ebuild, line 118:   Called atlas_fail
  blas-atlas-3.7.11-r1.ebuild, line 72:   Called die

!!! ATLAS auto-config failed.
!!! If you need support, post the topmost build error, and the call stack if relevant.


results of emerge info:

Portage 2.1.1 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.14.3-w4l i686)
=================================================================
System uname: 2.6.14.3-w4l i686 AMD Duron(tm) Processor
Gentoo Base System version 1.12.5
Last Sync: Fri, 13 Oct 2006 01:00:08 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.3.5-r3, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="ftp://gentoo.noved.org/ ftp://ftp.ussg.iu.edu/pub/linux/gentoo http://gentoo.noved.org/"
LANG="en_US"
LINGUAS=""
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/home/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X alsa apache2 apm atlas avi bash-completion berkdb bitmap-fonts browserplugin bzip2 cdr cli cpudetection crypt cups dlloader dri dvd dvdr elibc_glibc emboss encode esd font-server foomaticdb fortran g77 gdbm gif gpgme gpm gs gstreamer gtk gtk2 hplip icms imagemagick imlib input_devices_keyboard input_devices_mouse isdnlog java jikes jpeg kernel_linux libg++ libwww mad maildir mikmod mmx mmxext motif mozilla moznocompose moznoirc moznomail mp3 mpeg mysql ncurses nptl nptlonly nsplugin offensive ogg oggvorbis oss pcre perl plotutils png pppd python qt qt3 qt4 quicktime readline real reflection samba sdl session spell spl sse ssl svg tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_fbdev video_cards_nv video_cards_vesa video_cards_vga vorbis win32codecs wmf x86 xml xmms xorg xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS



 Couldn't emerge 3.7.17: wasn't able to unmask it (even editing the ebuild itself and making ~x86 into x86 didn't work). Keep getting: 

!!! All ebuilds that could satisfy "=sci-libs/blas-atlas-3.7.17" have been masked.
!!! One of the following masked packages is required to complete your request:
- sci-libs/blas-atlas-3.7.17 (masked by: package.mask)
# Markus Dittrich <markusle@gentoo.org> (10 Sep 2006)
# masked new snapshot for further testing (see bug #144314)





Comment 6


Rafael Meda





          2006-12-09 17:32:09 UTC
        

I'm having the same problem also. Can't compile and even tried the 3.7.23 version getting the same error though I'm using a P-Centrino instead of a AMD64. This is my first report so my sincere apologies if I'm placing this report in the wrong place or doing anything else wrongly.

!!! ERROR: sci-libs/blas-atlas-3.7.11-r1 failed.
Call stack:
  ebuild.sh, line 1569:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  blas-atlas-3.7.11-r1.ebuild, line 118:   Called atlas_fail
  blas-atlas-3.7.11-r1.ebuild, line 72:   Called die

!!! ATLAS auto-config failed.

emerge --info

Portage 2.1.2_rc3 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.5-r0, 2.6.18-gentoo i686)
=================================================================
System uname: 2.6.18-gentoo i686 Intel(R) Pentium(R) M processor 2.00GHz
Gentoo Base System version 1.12.5
Last Sync: Sat, 09 Dec 2006 22:50:01 +0000
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium-m -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://ds.thn.htu.se/linux/gentoo ftp://ftp.ds.hj.se/pub/Linux/distributions/gentoo/ "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/home/meda/tmp/"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X aac acpi alsa apache2 apm berkdb bitmap-fonts bluetooth cdr cli cracklib crypt cups divx dlloader dri dvd dvdread eds elibc_glibc emacs emboss encode esd ffmpeg foomaticdb fortran gdbm gif gpm gstreamer gtk gtk2 hal iconv imlib input_devices_keyboard input_devices_mouse input_devices_synaptics isdnlog java jpeg kernel_linux libg++ libwww lm_sensors mad mikmod mp3 mpeg ncurses nls nptl nptlonly nsplugin ogg opengl pam pcre pdf perl png ppds pppd python qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd tiff truetype truetype-fonts type1-fonts udev unicode userland_GNU video_cards_i810 vorbis win32codecs xml xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 7


Markus Dittrich (RETIRED)






          2006-12-10 06:37:42 UTC
        

(In reply to comment #6)
> I'm having the same problem also. Can't compile and even tried the 3.7.23
> version getting the same error though I'm using a P-Centrino instead of a
> AMD64. This is my first report so my sincere apologies if I'm placing this
> report in the wrong place or doing anything else wrongly.
> 
> !!! ERROR: sci-libs/blas-atlas-3.7.11-r1 failed.
> Call stack:
>   ebuild.sh, line 1569:   Called dyn_compile
>   ebuild.sh, line 938:   Called src_compile
>   blas-atlas-3.7.11-r1.ebuild, line 118:   Called atlas_fail
>   blas-atlas-3.7.11-r1.ebuild, line 72:   Called die
> 

Thanks for your report! Since you have an x86 box you should not
get the error that was reported in comment #1, i.e., failure due
to text relocations (comment #5 shouldn't have been filed here either).
Please check the other existing blas-atlas-3.7.11 bugs and file a new one 
if your issue is novel (assign it to sci@gentoo.org) so we can separate
different problems. Also, please make sure to post the actual compile
error not just the output of portage (i.e. the stuff above the !!!ERROR part,
where blas-atlas is telling us why it failed).

Thank you very much in advance!

Thanks,
Markus




Comment 8


Markus Dittrich (RETIRED)






          2006-12-10 07:14:48 UTC
        

Hi Ivo,

I think that with the latest release (blas-atlas-3.7.23) we should
have resolved your issues with text relocations on amd64.
I am now able to compile it fine on iaw at brown. Please give it a shot
and let me know if it works for you as well.

Thanks,
Markus




Comment 9


ivo welch





          2006-12-10 10:07:08 UTC
        

(In reply to comment #8)
> Hi Ivo,
> 
> I think that with the latest release (blas-atlas-3.7.23) we should
> have resolved your issues with text relocations on amd64.
> I am now able to compile it fine on iaw at brown. Please give it a shot
> and let me know if it works for you as well.
> 
> Thanks,
> Markus
> 


hi markus:  please forgive me---it's final time and I have 4 referee reports to write.  I won't be able to do this for at least 2 weeks.

/iaw





Comment 10


Markus Dittrich (RETIRED)






          2006-12-10 15:15:27 UTC
        

Hi Ivo,

No problem and please don't worry about it!
This sounds all too familiar ;)
Good luck with getting everything finished!

Best,
Markus




Comment 11


Jakub Moc (RETIRED)






          2007-03-30 06:49:01 UTC
        

*** Bug 172733 has been marked as a duplicate of this bug. ***




Comment 12


David Pyke





          2007-03-30 12:22:10 UTC
        

Created attachment 114945 [details]
Complete build log of 3.7.30 TEXTREL fail

gzipped for your protection




Comment 13


Markus Dittrich (RETIRED)






          2007-03-30 23:29:14 UTC
        

Hi David,

This doesn't really look like blas-atlas fault! Rather, it seems that your libtool
is doing bad things, such as

libtool --mode=compile --tag=F77 gfortran -o caxpy.o -c -m64 /mnt/windows/tmp/portage/sci-libs/blas-atlas-3.7.30/work/ATLAS/gentoo-build/..//interfaces/blas/F77/src/caxpy.f                                       
gfortran -c -m64 /mnt/windows/tmp/portage/sci-libs/blas-atlas-3.7.30/work/ATLAS/gentoo-build/..//interfaces/blas/F77/src/caxpy.f           mv -f caxpy.o .libs/caxpy.o        
gfortran -c -m64 /mnt/windows/tmp/portage/sci-libs/blas-atlas-3.7.30/work/ATLAS/gentoo-build/..//interfaces/blas/F77/src/caxpy.f >/dev/null 2>&1

Hence, your libtool doesn't compile the objects that end up in the shared lib with the -fPIC
flag which of course leads to TEXTRELs. I am not quite sure what causes this right now.
Could you please first try recompiling your libtool and if that doesn't help maybe try
downgrading to the stable version 1.5.22 and see if that helps.

Thanks,
Markus

P.S. In case you need to post more log files, could you please post ones that are
emerged via MAKEOPTS=-j1, otherwise they are tricky to read since things are
out of order. Thanks.






Comment 14


David Pyke





          2007-03-31 13:09:43 UTC
        

Not sure if it was libtool or not, I emerge -e system and now it works.  

Looks like my problem was a false alarm.




Comment 15


Markus Dittrich (RETIRED)






          2007-04-02 12:56:41 UTC
        

Good, thanks for letting us know!




Comment 16


Christian Faulhammer (RETIRED)






          2007-04-06 22:39:10 UTC
        

(In reply to comment #14)
> Looks like my problem was a false alarm.

 If so, I kindly close it.




Comment 17


Jakub Moc (RETIRED)






          2007-05-20 18:39:24 UTC
        

*** Bug 179247 has been marked as a duplicate of this bug. ***




Comment 18


Artemii





          2007-05-21 19:34:10 UTC
        

Thanks! Reemerging libtool solve this problem (i am from 179247 bug)




Comment 19


Jakub Moc (RETIRED)






          2007-06-04 13:54:47 UTC
        

*** Bug 180848 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

