Title: 240544 – kde-base/libkdepim-4.1.2 fails on configure
URL: https://bugs.gentoo.org/show_bug.cgi?id=240544

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 240544
kde-base/libkdepim-4.1.2 fails on configure
Last modified: 2009-02-06 15:39:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 240544 
      - kde-base/libkdepim-4.1.2 fails on configure


Summary:
kde-base/libkdepim-4.1.2 fails on configure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-08 16:19 UTC by Phill





      Modified:
    
2009-02-06 15:39 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



christian_bay
Storklerk









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info,3.23 KB,
                text/plain)

            
2008-10-08 16:24 UTC,

            Phill




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Phill





          2008-10-08 16:19:58 UTC
        

libkdepim fails during the configure phase of an emerge. I have re-emerged libassuan, libgpg-error, kleopatra and libkleo.  No luck

Reproducible: Always

Steps to Reproduce:
1.emerge -av --oneshot libkdepim
2.
3.

Actual Results:  
--  Found flavour 'pth', checking whether it's usable...yes
-- Usable assuan flavours found:  vanilla pthread pth
-- Performing Test HAVE_ASSUAN_FD_T
-- Performing Test HAVE_ASSUAN_FD_T - Success
-- Looking for assuan_inquire_ext
-- Looking for assuan_inquire_ext - found
-- Performing Test HAVE_NEW_STYLE_ASSUAN_INQUIRE_EXT
-- Performing Test HAVE_NEW_STYLE_ASSUAN_INQUIRE_EXT - Success
-- Performing Test HAVE_GPG_ERR_SOURCE_KLEO
terminate called after throwing an instance of 'std::out_of_range'
  what():  basic_string::erase
/var/tmp/portage/kde-base/libkdepim-4.1.2/temp/environment: line 684:  9402 Aborted                 cmake ${cmakeargs} "${S}"
 * 
 * ERROR: kde-base/libkdepim-4.1.2 failed.
 * Call stack:
 * ebuild.sh, line   49:  Called src_configure
 * environment, line 3027:  Called kde4-meta_src_configure
 * environment, line 2388:  Called kde4-base_src_configure
 * environment, line 2123:  Called cmake-utils_src_configureout
 * environment, line  690:  Called die
 * The specific snippet of code:
 * cmake ${cmakeargs} "${S}" || die "Cmake failed";
 * The die message:
 * Cmake failed
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/kde-base/libkdepim-4.1.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/kde-base/libkdepim-4.1.2/temp/environment'.
 * 

>>> Failed to emerge kde-base/libkdepim-4.1.2, Log file:




Comment 1


Phill





          2008-10-08 16:24:09 UTC
        

Created attachment 167628 [details]
emerge --info




Comment 2


Jorge Manuel B. S. Vicetto (RETIRED)






          2008-10-08 17:47:11 UTC
        

I have yet to find out what causes this CMake error, but running emerge again, cleaning recursively /var/tmp/portage/<cat>/<package> and or running "env-update && source /etc/profile" seems to fix this.




Comment 3


Phill





          2008-10-08 18:39:50 UTC
        


> cleaning recursively /var/tmp/portage/<cat>/<package> and or running
> "env-update && source /etc/profile" seems to fix this.

Done,  still happens.  Now it is failing in a different spot. 


-- Found libassuan-config at /usr/bin/libassuan-config
-- Found assuan v1.0.5, checking for flavours...
--  Found flavour 'vanilla', checking whether it's usable...yes
--  Found flavour 'pthread', checking whether it's usable...yes
--  Found flavour 'pth', checking whether it's usable...yes
-- Usable assuan flavours found:  vanilla pthread pth
-- Performing Test HAVE_ASSUAN_FD_T
terminate called after throwing an instance of 'std::out_of_range'
  what():  basic_string::erase
/var/tmp/portage/kde-base/libkdepim-4.1.2/temp/environment: line 684:  8198 Aborted                 cmake ${cmakeargs} "${S}"
 * 
 * ERROR: kde-base/libkdepim-4.1.2 failed.
 * Call stack:
 * ebuild.sh, line   49:  Called src_configure
 * environment, line 3027:  Called kde4-meta_src_configure
 * environment, line 2388:  Called kde4-base_src_configure
 * environment, line 2123:  Called cmake-utils_src_configureout
 * environment, line  690:  Called die
 * The specific snippet of code:
 * cmake ${cmakeargs} "${S}" || die "Cmake failed";


If I "emerge -av --oneshot libgpg-error" the fail occurs at right after 

-- Performing Test HAVE_GPG_ERR_SOURCE_KLEO

then I "emerge -av --onshot libassuan" and the fail occurs right after

-- Performing Test HAVE_ASSUAN_FD_T

I can go back and forth beftween the two "fail-points" be re-emerging the packages above.  To be fair I had the layman kde overlay on this system earlier but I removed it and re-emerged the whole world with -e before putting kde from the tree.






Comment 4


Sune Kloppenborg Jeppesen (RETIRED)






          2008-10-09 17:41:49 UTC
        

#2 fixed it for me.




Comment 5


Phill





          2008-10-09 19:41:27 UTC
        

Got it.  It was some leftover profile stuff in /usr/local/portage/layman/.

rm -rf /usr/local/portage/layman

removed a line pointing to this directory from /etc/make.conf

env-update && source /etc/profile

emerge -av --oneshot kleopatra 

env-update && source /etc/profile

emerge -av --oneshot libkdepim

Success!!

I am closing this, since it is not a bug.






Comment 6


Thomas S. Howard





          2008-10-28 05:21:05 UTC
        

Should still stay closed, but I wanted to add that a stale ccache can cause this to happen as well.




Comment 7


Torsten Kaiser





          2008-11-08 14:27:40 UTC
        

I would tend to reopen this bug, as its still unclear what is the real cause of this.

Happend to me too: ~amd64 in libkdepim.

Remerging dev-util/cmake-2.6.2 did not help.
Remerging dev-libs/libassuan-1.0.5 changed the error (same as in the bug description)
Remerging kde-base/kleopatra-4.1.72 first failed, the second try (after an additional env-update and cleaning /var/tmp/portage) worked
... now libkdepim was back to the first error. (same as Comment #3)

Neither env-update nor cleaning /var/tmp/portage helped.

But after I downgraded to dev-util/cmake-2.6.1 the libkdepim's emerged on first try.

I didn't find any bug in the bugtracker from cmake, but I might have used the wrong search keywords. The only I found, that might be related is: http://public.kitware.com/Bug/view.php?id=6852






Comment 8


Michael Kefeder





          2009-01-07 15:27:21 UTC
        

I am with Torsten on this one. Using cmake 2.6.2 triggers that error, cmake 2.6.1 does not (I copied the 2.6.2-r1 ebuild to install 2.6.1 after reading about this bug here). I am on ~amd64 aswell - so this bug is actually not resolved, and does not work for me.




Comment 9


Christian Bayer





          2009-02-06 11:05:10 UTC
        

same for me, cmake-2.6.2-r1 fails to compile kde-base/kdemaildir-4.2.0:
-- Performing Test HAVE_NEW_STYLE_ASSUAN_INQUIRE_EXT                                                                            
-- Performing Test HAVE_NEW_STYLE_ASSUAN_INQUIRE_EXT - Success                                                                  
-- Performing Test HAVE_GPG_ERR_SOURCE_KLEO                                                                                     
terminate called after throwing an instance of 'std::out_of_range'                                                              
  what():  basic_string::erase                                                                                                  
/var/tmp/portage/kde-base/kdemaildir-4.2.0/temp/environment: line 973:  9436 Aborted                 cmake -C "${TMPDIR}/gentoo_common_config.cmake" ${cmakeargs} "${S}"                                                                                        
 *                                                                                                                              
 * ERROR: kde-base/kdemaildir-4.2.0 failed.              

cleaning the ccache, env-update and . /etc/profile, removing /var/tmp/portage/* did not help either. But as kde-4.2.0 needs >=cmake-2.6.2, i cannot use cmake-2.6.1 without screwing up dependencies. downgrading to cmake-2.6.2 did not help either.




Comment 10


Christian Bayer





          2009-02-06 11:06:06 UTC
        

HA!! re-emerged libassuan, libgpg-error, kleopatra and libkleo. this worked for me!




Comment 11


Christian Bayer





          2009-02-06 15:39:16 UTC
        

until the next package.. ok, similar error again on emerging kde-base/kaddressbook-4.2.0: 

-- Looking for assuan_inquire_ext                                                                                               
-- Looking for assuan_inquire_ext - found                                                                                       
-- Performing Test HAVE_NEW_STYLE_ASSUAN_INQUIRE_EXT                                                                            
terminate called after throwing an instance of 'std::out_of_range'                                                              
  what():  basic_string::erase                                                                                                  
/var/tmp/portage/kde-base/kaddressbook-4.2.0/temp/environment: line 975:  4456 Aborted                 cmake -C "${TMPDIR}/gentoo_common_config.cmake" ${cmakeargs} "${S}"                                                                                      
 *                                                                                                                              
 * ERROR: kde-base/kaddressbook-4.2.0 failed.

tried again all hints, but no avail.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

