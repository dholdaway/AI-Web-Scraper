Title: 109382 – net-tools was not emerged during emerge -e system
URL: https://bugs.gentoo.org/show_bug.cgi?id=109382

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 109382
net-tools was not emerged during emerge -e system
Last modified: 2005-10-29 10:28:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 109382 
      - net-tools was not emerged during emerge -e system


Summary:
net-tools was not emerged during emerge -e system
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-15 10:34 UTC by ben





      Modified:
    
2005-10-29 10:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



releng









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


ben





          2005-10-15 10:34:39 UTC
        

I installed from a stage 1 and after the install was over net-tools was not
installed. I had to re-emerge it. 

Reproducible: Didn't try
Steps to Reproduce:
1.emerge -e system
2.finish the install
3.try to run ifconfig

Actual Results:  
ifconfig could not be found and thus dhcpcd wouldn't work.

Expected Results:  
It should have installed (I am not sure if it did at all) on the emerge -e
system step.

This is just a basicly emerge problem, the fix is easy but I figured I would let
you all know. This happend to someone else on the boards so it's not just me.




Comment 1


SpanKY






          2005-10-15 20:18:20 UTC
        

no real info here (like `emerge info`)

net-tools is part of the 'system' target

/usr/portage/profiles/base/packages:*sys-apps/net-tool




Comment 2


ben





          2005-10-16 09:39:52 UTC
        

I didn't think emerge --info was needed here since the problem happed well
before it would have made any sence to do that. 

Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2,
2.6.13.4 i686)
=================================================================
System uname: 2.6.13.4 i686 Intel(R) Pentium(R) M processor 1.70GHz
Gentoo Base System version 1.6.13
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4m -O3 -fforce-addr -momit-leaf-frame-pointer
-fomit-frame-pointer -ftracer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4m -O3 -fforce-addr -momit-leaf-frame-pointer
-fomit-frame-pointer -ftracer -pipe -fvisibility-inlines-hidden"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apm arts avi berkdb bitmap-fonts cdr crypt cups dts eds
emboss encode fam foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib
ipv6 java jpeg kde libg++ libwww mad mikmod mmap mmx motif mp3 mpeg ncurses nls
nptl ogg oggvorbis opengl oss pam pcmcia pdflib perl png python qt quicktime
readline sdl spell sse sse2 ssl tcpd tiff truetype truetype-fonts type1-fonts
vorbis wifi xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS

Durring the install net-tools did not emerge, neither did hotplug or coldplug. I
know coldplug I do myself but hotplug? I alas don't know what else I am missing
but I am guessing that it will be discovered as time progresses, hopefully not
too much more.




Comment 3


Chris Gianelloni (RETIRED)






          2005-10-16 14:39:25 UTC
        

Well, hotplug is not a part of system.

At any rate, you didn't say which media you used.  I'm not exactly sure why this
was pushed off onto the release team, as you didn't have a problem with the
media itself, your problem was post-bootstrap.




Comment 4


ben





          2005-10-16 19:43:47 UTC
        

By media... I did a stage 1 install. The bootstrapping went though fine. The
problem came with the emerge -e system in which net-tools did not install, or
did not install properly. I am posting this as a bug becasue someone else on the
boards had the same problem and they did exactly the same thing I did and we
both re-emerged net-tools and it worked. So... the problem occured sometime
durring the system install where a package did not install itself. I discovered
this imeaditly after my system install when I could not access the internet and
dhcpcd did not work. Right after my system was up I tried to find ifconfig and
the rest of the software inside of net-tools and I could not, thus net-tools did
not install durring the system install like it should.




Comment 5


Chris Gianelloni (RETIRED)






          2005-10-17 06:19:33 UTC
        

2005.0? 2005.1? hardened?  Exactly *which* stage1 tarball did you use?




Comment 6


Pedro Jose Marron





          2005-10-26 06:16:48 UTC
        

(In reply to comment #5)
> 2005.0? 2005.1? hardened?  Exactly *which* stage1 tarball did you use?

I have to say that I had the same problem ben was describing last night, when I
tried to install Gentoo. 2005.1 and stage2. This is the third computer I install
in the past couple of weeks, so I knew what was supposed to happen.

The problem is that /sbin/ifconfig is not there. Not installed at all, although
an emerge --search net-tools (which is the package where ifconfig is supposed to
be in) was installed. That is the weird part.

So in my opinion, it definitely is a release problem. Or net-tools, one of the two.

I hope this helps resolve some of the confusion and contributes to finding the
bug as soon as possible.

Regards,

Pedro




Comment 7


Attila Vágvölgyi





          2005-10-27 16:54:40 UTC
        

I also ran into the problem. I bet the problem is caused by setting too much USE
flags before reaching stage3.

Last night I installed 2005.1 stage1, and when reached 6.a in the handbook, I
set a lot of USE flags. For example I set afs. It pulled openafs package during
bootstrap! Actually openafs failed to compile before configuring the kernel, so
I had to rebootstrap with a configured kernel. This shows that it is not
indifferent to the success of install, what USE flags are set before reaching
stage3.

The net-tools package was not pulled, so I had to emerge it manually after a
failed net.eth0 startup in the rebooted system. I could make emerge info only
after all of these:

Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r2,
2.6.13-gentoo-r3 i686)
=================================================================
System uname: 2.6.13-gentoo-r3 i686 Intel(R) Pentium(R) 4 CPU 2.40GHz
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=pentium4 -mmmx -msse -msse2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe -march=pentium4 -mmmx -msse -msse2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.nyx.hu/gentoo
http://gd.tuwien.ac.at/opsys/linux/gentoo/
ftp://gd.tuwien.ac.at/opsys/linux/gentoo/ http://gentoo.inf.elte.hu/
ftp://gentoo.inf.elte.hu/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 a52 aac acl afs apache2 avi bash-completion berkdb bitmap-fonts bzip2
calendar canna caps cdb cdr cjk clamav cpdflib crypt eds emboss encode
foomaticdb fortran gdbm gif gpm gstreamer gtk2 imlib ipv6 jpeg libg++ libwww mad
matroska mikmod motif mp3 mpeg ncurses nls ogg oggvorbis opengl oss pam pdflib
perl png python quicktime readline sdl spell ssl tcpd truetype truetype-fonts
type1-fonts udev vorbis xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY





Comment 8


Chris Gianelloni (RETIRED)






          2005-10-28 06:19:02 UTC
        

OK.  Allow me to explain this.  If it is not a problem with the tarballs
themselves, for example, if the stage3 tarball was missing ifconfig, then it
isn't a release problem.  I'm willing to bet that you've done *something* to
cause it.  

At any rate, try from a stage3 tarball instead.  We know that they work, and you
can always customize your USE and CFLAGS after you have a bootable system and
use "emerge -e world" to recompile your packages.  All in all, you end up with
the same compiled binaries on your system, and spend the same amount of time
compiling (less than if you started from stage1), but you have the added benefit
of knowing that a complete base system exists.

I'm not sure exactly what the issue is with your installation, but it isn't the
media causing it.




Comment 9


SpanKY






          2005-10-28 12:25:10 UTC
        

what he said




Comment 10


ben





          2005-10-29 09:10:53 UTC
        

Okay... but instead of having to use a stage 3 tarball... you can literally just
re-emerge net-tools... that gives you everything that you are missing. 




Comment 11


roger55 (RETIRED)






          2005-10-29 10:28:35 UTC
        

This has come up a few times in #gentoo. Every time it was clear by looking   
at /var/log/emerge.log that emerge -e system had failed and the user just went  
on as if it were successful.  
  
If you run into this and emerge -p net-tools shows it is installed but  
ifconfig is missing please provide the output of: emerge -p net-tools, emerge  
info and attach /var/log/emerge.log along with what stage you used.  
  
Roger  









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

