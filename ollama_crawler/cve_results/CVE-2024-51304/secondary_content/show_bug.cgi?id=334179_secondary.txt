Title: 334179 – dev-python/notify-python-0.1.1-r1: building failed due to gtk/gtk.h not found
URL: https://bugs.gentoo.org/show_bug.cgi?id=334179

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 334179
dev-python/notify-python-0.1.1-r1: building failed due to gtk/gtk.h not found
Last modified: 2011-02-20 12:33:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 334179 
      - dev-python/notify-python-0.1.1-r1: building failed due to gtk/gtk.h not found


Summary:
dev-python/notify-python-0.1.1-r1: building failed due to gtk/gtk.h not found
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Tiziano Müller (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-08-24 01:38 UTC by fkhp





      Modified:
    
2011-02-20 12:33 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



cnyegle
de.techno
python
rb6
walter









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




output log

              (1282613722-install-dev-python_notify-python-0.1.1-r1:0::gentoo.out,15.73 KB,
                text/plain)

            
2010-08-24 01:39 UTC,

            fkhp




Details





emerge --info

              (walter-emerge.info.txt,4.41 KB,
                text/plain)

            
2010-09-27 08:35 UTC,

            Walter




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


fkhp





          2010-08-24 01:38:01 UTC
        

x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I.. -DG_LOG_DOMAIN=\"pynotify-python\" -DDATADIR=\"/usr/share\" -DLIBDIR=\"/usr/lib64\" -pthread -I/usr/include/pygtk-2.0 -I/usr/lib64/libffi-3.0.9/include -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/dbus-1.0 -I/usr/lib64/dbus-1.0/include -I/usr/include/python2.6 -mtune=core2 -march=core2 -O2 -msse4.1 -pipe -ftracer -MT pynotify.lo -MD -MP -MF .deps/pynotify.Tpo -c pynotify.c  -fPIC -DPIC -o .libs/pynotify.o
In file included from pynotifymodule.c:2:0:
/usr/include/pygtk-2.0/pygtk/pygtk.h:8:21: fatal error: gtk/gtk.h: No such file or directory
compilation terminated.
make[2]: *** [pynotifymodule.lo] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/paludis/dev-python-notify-python-0.1.1-r1/work/notify-python-0.1.1-2.6/src'
make[1]: Leaving directory `/var/tmp/paludis/dev-python-notify-python-0.1.1-r1/work/notify-python-0.1.1-2.6'
In file included from /usr/include/libnotify/notify.h:28:0,
                 from pynotify.override:4:
/usr/include/libnotify/notification.h:28:21: fatal error: gtk/gtk.h: No such file or directory
compilation terminated.
make[2]: *** [pynotify.lo] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2
/usr/libexec/paludis/utils/emake: emake returned error 2

!!! ERROR in dev-python/notify-python-0.1.1-r1::gentoo:
!!! In python_execute_function at line 3441
!!! Building failed with CPython 2.6 in python_default_function() function




Comment 1


fkhp





          2010-08-24 01:39:47 UTC
        

Created attachment 244321 [details]
output log

# emerge --info notify-python
Portage 2.1.8.3 (default/linux/amd64/10.0, gcc-4.5.1, glibc-2.12.1-r1, 2.6.35-ccs-r3 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.35-ccs-r3-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T9300_@_2.50GHz-with-gentoo-2.0.1
Timestamp of tree: Tue, 24 Aug 2010 00:00:14 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r3, 3.1.2-r4
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.2
sys-apps/sandbox:    2.3-r1
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.4-r1, 4.5.1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.34
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests collision-protect distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.netnitco.net/ "
LANG="zh_CN.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="zh_CN en_US zh en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /var/lib/layman/x11 /var/lib/layman/vmware /var/lib/layman/gentoo-china /var/lib/layman/gentoo-taiwan /var/lib/layman/sunrise /var/lib/layman/gnome /var/lib/layman/mozilla /var/lib/layman/init6"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac accessibility acl acpi alsa amd64 ao apache2 avahi bash-completion berkdb branding bzip2 cairo caps cdr cjk cli consolekit cracklib crypt cups cxx dbus dga djvu dri dts dvd dvdr eds emboss encode evo examples exif fam ffmpeg firefox flac fortran gdbm gdu gif gimp gnome gnome-keyring gphoto2 gpm gstreamer gtk guile i18n iconv icu introspection ipv6 jadetex java jpeg jpeg2k latex lcms ldap libnotify mad midi mikmod mmap mmx mng modules mp3 mp4 mpeg mudflap multilib mysql nas nautilus ncurses networkmanager nfs nls nntp nptl nptlonly nsplugin nvidia ogg opengl openmp pam pango pch pcre pda pdf perl php png policykit ppds pppd pulseaudio python qt3support qt4 readline reflection samba scsi sdl session smp snmp spell spl sqlite sse sse2 sse3 ssl ssse3 startup-notification suid svg sysfs tcpd threads tiff tk truetype unicode usb v4l2 vim-syntax vorbis x264 xattr xcb xml xmp xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="ens1370 hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="zh_CN en_US zh en" QEMU_SOFTMMU_TARGETS="x86_64" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="vmwgfx vmwlegacy nouveau nvidia nv vmware vesa svga" XTABLES_ADDONS="cui gfw zhang ipset" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

dev-python/notify-python-0.1.1-r1 was built with the following:
USE="" ALSA_CARDS="ens1370 hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" INPUT_DEVICES="evdev synaptics" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US zh zh_CN" QEMU_SOFTMMU_TARGETS="x86_64" RUBY_TARGETS="ruby18" VIDEO_CARDS="nouveau nv nvidia (svga) vesa vmware vmwgfx vmwlegacy" XTABLES_ADDONS="account chaos condition delude dhcpmac fuzzy geoip iface ipmark ipp2p ipset ipv4options length2 logmark lscan pknock psd quota2 rawnat steal sysrq tarpit tee" 
CFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -fomit-frame-pointer -pipe -ftracer"
CXXFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -fomit-frame-pointer -pipe -ftracer"
LDFLAGS="-Wl,-O1"




Comment 2


Markos Chandras (RETIRED)






          2010-08-27 23:34:42 UTC
        

Do you have pygtk installed? If not can you please install it and try to rebuild notify-python?




Comment 3


fkhp





          2010-08-28 08:33:17 UTC
        

(In reply to comment #2)
> Do you have pygtk installed? If not can you please install it and try to
> rebuild notify-python?
> 

installed.




Comment 4


Walter





          2010-09-27 08:34:57 UTC
        

Having the same problem here.  It affects installing ibus-pinyin which is really the best Chinese input method available right now.  This is a real annoyance...

I have dev-python/pygtk-2.14.1-r1 installed.
Attempting to upgrade to dev-python/pygtk-2.16.0-r1 fails due to:

checking for PYCAIRO... no
no
not checking for gtk due to missing pycairo
checking for GDK target... (unknown)
configure: WARNING: unable to determine the GDK target system; some functions may not be available
checking for numpy/arrayobject.h... yes
checking whether x86_64-pc-linux-gnu-gcc understands -Wall... yes
checking whether x86_64-pc-linux-gnu-gcc understands -fno-strict-aliasing... yes
checking whether x86_64-pc-linux-gnu-gcc understands -std=c9x... yes
configure: error: conditional "HAVE_GTK_2_16" was never defined.
Usually this means the macro was only invoked conditionally.

I then installed pycairo, then retried upgrading pygtk.  The result was:

/bin/grep: /usr/lib64/libpng12.la: No such file or directory
/bin/sed: can't read /usr/lib64/libpng12.la: No such file or directory
libtool: link: `/usr/lib64/libpng12.la' is not a valid libtool archive
make: *** [pangocairo.la] Error 1

This now looked to me like pygtk was missing both the pycairo and libpng dependencies.  However, libpng was installed.  Looking more closely, I had only these files in /usr/lib64/libpng*

/usr/lib64/libpng12.so.0
/usr/lib64/libpng14.a
/usr/lib64/libpng14.la
/usr/lib64/libpng14.so -> libpng14.so.14.3.0
/usr/lib64/libpng14.so.14 -> libpng14.so.14.3.0
/usr/lib64/libpng14.so.14.3.0
/usr/lib64/libpng.a -> libpng14.a
/usr/lib64/libpng.la -> libpng14.la
/usr/lib64/libpng.so -> libpng14.so

There was no libpng12.la.  So I decided to re-install libpng.  This resulted in a suggestion to run: "revdep-rebuild --library libpng12.so.0".  Guessing this was in gentoolkit from vague memory, I first emerged that, then ran the command.  The command found tonnes of packages (circa 100) that needed to be re-emerged.  This resulted in a number of errors:

!!! Multiple package instances within a single package slot have been pulled
!!! into the dependency graph, resulting in a slot conflict:
emerge: there are no ebuilds to satisfy "kde-base/kdelibs:4.3".
 * revdep-rebuild failed to emerge all packages.
 * you have the following choices:
 * - If emerge failed during the build, fix the problems and re-run revdep-rebuild.
 * - Use /etc/portage/package.keywords to unmask a newer version of the package.
 *   (and remove 5_order.rr to be evaluated again)
 * - Modify the above emerge command and run it manually.
 * - Compile or unmerge unsatisfied packages manually,
 *   remove temporary files, and try again.
 *   (you can edit package/ebuild list first)

At this point I decided I was barking up the wrong tree and looked up .la files with a view towards generating a libpng1.2 .la file.  Apparently .la are created by libtool from object files during the build process, however the libpng1.4 build process does not generate .la for the libpng1.2 library.

Retrying 'emerge -av libpng' at this point resulted in the same error.  I decided to retry after 'ln -s /usr/lib64/libpng14.la /usr/lib64/libpng12.la' (dodgy but it might work).

SURPRISE!  It worked.

I then installed an application based on this (app-i18n/ibus and app-i18n/ibus-pinyin), but app-i18n/ibus failed to build with error:

libtool: relink: x86_64-pc-linux-gnu-gcc -shared  .libs/im_ibus_la-ibusim.o .libs/im_ibus_la-ibusimcontext.o   -L/var/tmp/portage/app-i18n/ibus-1.2.0.20100111/image//usr/lib64 -L/usr/lib64 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lpangocairo-1.0 -lpng12 -lpangoft2-1.0 -lcairo -lpixman-1 -lpng14 -lXrender -lpango-1.0 -lm -lfontconfig -lfreetype -lz -lexpat -libus -lX11 -lxcb -lXau -lXdmcp -lgio-2.0 -lresolv -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0 -ldbus-1  -march=nocona -msse4 -mcx16 -msahf -Wl,-O1 -Wl,--as-needed   -Wl,-soname -Wl,im-ibus.so -o .libs/im-ibus.so
/usr/lib/gcc/x86_64-pc-linux-gnu/4.3.4/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lpng12
collect2: ld returned 1 exit status
libtool: install: error: relink `im-ibus.la' with the above command before installing it
make[3]: *** [install-immoduleLTLIBRARIES] Error 1

So, overall: no dice.  A real gentoo user story.  I ONLY WANNA TYPE CHINESE, DAMMIT.  Help.




Comment 5


Walter





          2010-09-27 08:35:15 UTC
        

Created attachment 248761 [details]
emerge --info




Comment 6


R Bar-On





          2011-01-02 16:43:39 UTC
        

I have a similar problem with many ebuilds.  xulrunner, polkit-gnome to name a couple.  Exactly the same: error: gtk/gtk.h: No such file or directory

Help!





Comment 7


R Bar-On





          2011-01-02 21:10:31 UTC
        

the problem here is with mesa.  7.9 installs an egl.pc file, but 7.8.2-r2 doesn't.  The patch at http://cgit.freedesktop.org/mesa/mesa/patch/?id=ceffd7b9245690dbfef9478fff982cfff37b0611 fixes it with a little modification.




Comment 8


Samuli Suominen (RETIRED)






          2011-01-02 21:16:20 UTC
        

This bug seems to have 2-3 different problems resulting in same:

- libpng upgrade and lack of proper upgrade steps (like revdep-rebuild, the update script libpng came with, lafilefixer, whatever was in postinst message when this was relavent)
- python upgrade and lack of proper upgrade steps (like python-updater)
- and now latest comments are about some mesa problem, open a new bug ->




Comment 9


R Bar-On





          2011-01-04 01:54:56 UTC
        

new bug opened: http://bugs.gentoo.org/show_bug.cgi?id=350500




Comment 10


R Bar-On





          2011-01-04 01:55:37 UTC
        

actually, never mind, meant to post on a different bug, sorry.




Comment 11


yegle





          2011-01-19 05:59:52 UTC
        

Why is this bug marked RESOLVED? I cannot find any useful resolution in this bug report.




Comment 12


dE





          2011-02-20 11:54:06 UTC
        

Someone gonna reopen this? xulrunner and filezilla having the same problem :(




Comment 13


dE





          2011-02-20 12:33:13 UTC
        

Dudes, check out file /usr/lib/pkgconfig/gl.pc. 

The packages listed here should be installed in the system... I don't know why. For me it was x11-proto/dri2proto glproto.

If you wanna know ask the the dudes in this part of the forum - 

http://forums.gentoo.org/viewtopic-p-6585763.html#6585763

Also check bug 342393









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

