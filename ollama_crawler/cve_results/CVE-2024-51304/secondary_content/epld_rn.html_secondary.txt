Title: Cisco Nexus 7000 Series FPGA/EPLD Upgrade Release Notes, Release 4.1 - Cisco
URL: https://www.cisco.com/c/en/us/td/docs/switches/datacenter/sw/4_1/epld/epld_rn.html

Skip to content
Skip to search
Skip to footer






Cisco.com Worldwide
Products and Services
Solutions
Support
Learn
Explore Cisco
How to Buy
Partners Home
Partner Program
Support
Tools
Find a Cisco Partner
Meet our Partners
Become a Cisco Partner








SupportProduct SupportSwitchesCisco Nexus 7000 Series SwitchesRelease Notes



Cisco Nexus 7000 Series FPGA/EPLD Upgrade Release Notes, Release 4.1














Save



Log in to Save Content
    


Download
Print





Available Languages





Download Options



PDF
(304.1 KB)

View with Adobe Reader on a variety of devices







Updated:April 6, 2009




Bias-Free Language



Bias-Free Language
The documentation set for this product strives to use bias-free language. For the purposes of this documentation set, bias-free is defined as language that does not imply discrimination based on age, disability, gender, racial identity, ethnic identity, sexual orientation, socioeconomic status, and intersectionality. Exceptions may be present in the documentation due to language that is hardcoded in the user interfaces of the product software, language used based on RFP documentation, or language that is used by a referenced third-party product. Learn more about how Cisco is using Inclusive Language.














Cisco Nexus 7000 Series FPGA/EPLD Upgrade Release Notes, Release 4.1












Table Of Contents
Cisco Nexus 7000 Series FPGA/EPLD Upgrade Release Notes, Release 4.1
Contents
Introduction
Deciding When to Upgrade EPLDs
Switch Requirements
Hardware Requirements
Supported Switch Operating Systems
New EPLDs Available with Release 4.1
EPLD Images Needed for vPC
Installation Guidelines
Downloading the EPLD images
Preparing the EPLD Images for Installation
Upgrading EPLD Images
Upgrading the EPLD Images for I/O or Standby Supervisor Modules
Upgrading EPLDs for the Active Supervisor Module
Upgrading EPLDs for a Fabric Module
Upgrading EPLDs for a Fan Tray Module
Displaying the EPLD Versions
Displaying EPLD Versions for an I/O or Supervisor Module
Displaying EPLD Versions for a Fabric Module
Displaying EPLD Versions for a Fan Tray Module
Displaying the Available EPLD Versions
Displaying the Status of EPLD Upgrades
Default Settings
Caveats
Open Caveats in Release 4.1(3)
Resolved Caveats in Release 4.1(2)
Resolved Caveats in Release 4.1(3)
Limitations
Current EPLD Versions
Related Documentation
Obtaining Documentation and Submitting a Service Request



 Cisco Nexus 7000 Series FPGA/EPLD Upgrade Release Notes, Release 4.1 


 Part Number: OL-18648-04 A0Release Date: April 3, 2009 

 Table 1 shows the online history change for this document. 

 





 Table 1 Online History Change   





          Part Number 
         


          Revision 
         


          Date 
         


          Description 
         


 OL-18648-01  
 A0  
 12/18/2008  
 Created for Release 4.1(2).  


 B0  
 12/19/2008  
 Indicated that Release 4.1(2) does not include EPLD updates for the Cisco Nexus 7018 fan controller.  


 C0  
 12/27/2008  
 Updated the title for Table 2.  


 OL-18648-02  
 A0  
 2/6/2009  
 Included changes for Release 4.1(3).  


 B0  
 2/9/2009  
 Made I/O module names consistent in Table 2 and Table 3.  


 C0  
 2/20/2009  
 Included reasons for EPLD updates in Table 2.  


 D0  
 3/10/2009  
 Included guidelines for deciding on upgrades.  


 OL-18648-03  
 A0  
 3/17/2009  
 Updated for Release 4.1(4)  


 OL-18648-04  
 A0  
 4/3/2009  
 Updated for Release 4.1(5)  





 
 

 Contents 

 This document includes the following sections: 

 •Introduction 

 •Deciding When to Upgrade EPLDs 

 •Switch Requirements 

 •New EPLDs Available with Release 4.1 

 •Installation Guidelines 

 •Downloading the EPLD images 

 •Preparing the EPLD Images for Installation 

 •Upgrading EPLD Images 

 •Displaying the EPLD Versions 

 •Displaying the Status of EPLD Upgrades 

 •Default Settings 

 •Caveats 

 •Limitations 

 •Current EPLD Versions 

 •Related Documentation 

 •Obtaining Documentation and Submitting a Service Request 
 


 Introduction 

 The Cisco Nexus 7000 Series switches contain several programmable logical devices (PLDs) that provide hardware functionalities in all modules. Cisco provides electronic programmable logical device (EPLD) image upgrades to enhance hardware functionality or to resolve known issues. PLDs include electronic programmable logical devices (EPLDs), field programmable gate arrays (FPGAs), and complex programmable logic devices (CPLDs), but they do not include ASICs. In this document, the term EPLD is used for FPGA and CPLDs. 

 The great advantage of having EPLDs for some module functions is that when you need to upgrade those functions, you just upgrade their software images instead of replacing their hardware. 





 Note EPLD image upgrades for an I/O module disrupt the traffic going through the module because the module must power down briefly during the upgrade. The system performs EPLD upgrades on one module at a time, so at any one time the upgrade disrupts only the traffic going through one module. 


 Cisco Systems does not provide upgrade EPLD images very frequently, and you do not have to upgrade your EPLD images unless they fix the functions for the hardware that you are using in your Cisco Nexus 7000 switch. The EPLD image upgrades are independent from the Cisco NX-OS In Service Software Upgrade (ISSU) process, which upgrades the system and kickstart images with no impact on the network environment. 

 When Cisco makes an EPLD image upgrade available, these release notes announce their availability, and you can download them from http://www.cisco.com. 
 


 Deciding When to Upgrade EPLDs 

 It is not always necessary to upgrade EPLD images; however, when new EPLD images are available, the upgrades are always recommended if your network environment allows for a maintenance period in which some level of traffic disruption is acceptable. If such a disruption is not acceptable at this time, then it is best to postpone the upgrade until a better time. 

 Table 2 provides high-level guidelines to help network administrators determine whether an EPLD upgrade is necessary. 

 





 Table 2 Conditions For Upgrading EPLD Images 





          Condition 
         


          Modules Targeted for Upgrades 
         


 Upgrading the Cisco NX-OS operating system from Release 4.0 to Release 4.1(2)  
 Supervisor modules (N7K-SUP1)   32-port 10-Gbps Ethernet I/O modules (N7K-M132XP-12) (if installed)   Fabric modules (N7K-C7018-FAB1)   48-port 10/100/1000 Ethernet I/O modules (N7K-M148GT-11) (if installed)—this upgrade is not mandatory but can be performed to correct random blinking of LEDs.  


 Moving 32-port 10-Gbps Ethernet I/O modules from a Cisco Nexus 7010 switch to a Cisco Nexus 7018 switch  
 32-port 10-Gbps Ethernet I/O modules (N7K-M132XP-12)  


 Moving 48-port 10/100/1000 Ethernet I/O modules from a Cisco Nexus 7010 switch to a Cisco Nexus 7018 switch  
 48-port 10/100/1000 Ethernet I/O modules (N7K-M148GT-11)  


 Moving the supervisor (N7K-SUP1) modules from a Cisco Nexus 7010 switch to a Cisco Nexus 7018 switch.  
 Supervisor (N7K-SUP1) modules  


 Upgrading the Cisco NX-OS operating system from Release 4.1(2) to Release 4.1(3) on a switch that shipped with Release 4.1(2).  
 32-port 10-Gbps Ethernet I/O modules (N7K-M132XP-12)   Fabric modules for Cisco Nexus 7018 (N7K-C7018-FAB1)  


 Upgrading the Cisco NX-OS operating system from Release 4.1(2) to Release 4.1(3) on a switch that did not ship with Release 4.1(2) and a full EPLD upgrade to Release 4.1(2) was not performed.  
 Supervisor (N7K-SUP1) modules   48-port 10/100/1000 Ethernet I/O modules (N7K-M148GT-11)  


 Using vPC.  
 32-port 10-Gbps Ethernet I/O modules (N7K-M132XP-12)  


 Using Cisco Trusted Security.  
 32-port 10-Gbps Ethernet I/O modules (N7K-M132XP-12)  





 
 


 Switch Requirements 

 This section includes the following topics: 

 •Hardware Requirements 

 •Supported Switch Operating Systems 
 


 Hardware Requirements 

 The Cisco Nexus 7000 Series switch must include the following hardware: 

 •One or two supervisor modules, each with at least 120 MB of available bootflash or slot0 memory 

 •One or more I/O modules 

 •One or more fabric modules 

 •Two fabric fan tray modules 

 •Two system fan tray modules 

 You must be able to access the switch through a console, SSH, or Telnet. 

 You must have administrator privileges to work with the Cisco Nexus 7000 Series switch. 
 


 Supported Switch Operating Systems 

 The Cisco Nexus 7000 Series switch must be running the Cisco NX-OS operating system, which is used to perform the EPLD upgrades. 
 


 New EPLDs Available with Release 4.1 

 Each EPLD image that you can download from http://www.cisco.com is a bundle of EPLD upgrades. To see which EPLD versions were updated for Release 4.1, see Table 3. To see all of the current EPLD versions for each device, see Table 5. 





 Note There are no new EPLD images for Release 4.1(5)—the EPLD images are the same for Release 4.1(3), 4.1(4), and 4.1(5). 


 .





 Table 3 Newly Updated EPLDs for the Cisco NX-OS Release 4.1   





          Cisco NX-OS Release 
         


          Module Type 
         


          EPLD Device 
         


          New EPLD Version 
         


 4.1(2)  
 Supervisor (N7K-SUP1)  
 Power Manager  
 3.7  


 IO  
 3.26  


 Local Bus CPLD  
 3.0  


 32-port 10 Gbps Ethernet I/O (N7K-M132XP-12)  
 Power Manager  
 4.6  


 IO  
 1.13  


 48-port 10/100/1000 Ethernet I/O (N7K-M148GT-11)  
 Power Manager  
 5.4  


 IO  
 2.11  


 48-port 1 Gbps Ethernet I/O (N7K-M148GS-11)  
 Power Manager  
 4.6  


 IO  
 1.3  


 SFP  
 1.4  


 Forwarding Engine  
 1.6  


 Fabric Module (Cisco Nexus 7010)  
 Power Manager  
 2.9  


 Fabric Module (Cisco Nexus 7018) (N7K-C7018-FAB1)  
 Power Manager  
 1.1  


 4.1(3)  
 32-port 10 Gbps Ethernet I/O (N7K-M132XP-12)  
 IO  
 1.14  


 Fabric Module (Cisco Nexus 7018) (N7K-C7018-FAB1)  
 Power Manager  
 1.2  


 4.1(4)  
 N.A.  
 N.A.  
 None  





 





 Note To list the EPLDs running on your switch, use the show version module_number epld command. If any of the versions that you list are older than what is listed in Table 5, it is recommended that you update the EPLDs. 

 

 EPLD Images Needed for vPC 

 The virtual port channel (vPC) feature is available beginning with Cisco NX-OS Release 4.1(3). When you enable vPC on the chassis, you must have EPLD Release 186.3 on the 32-port 10 Gbps Ethernet IO modules (N7K-M132XP-12). 





 Note The EPLD upgrade operation is a disruptive operation. You should execute this operation only at a programmed maintenance time. The system/kickstart ISSU upgrade is a nondisruptive upgrade. 


 Most of the N7K-M132XP-12 modules in the chassis already meet this minimum EPLD requirement, but if you are working with a N7K-M132XP-12 module that was shipped before June 2008, you might need to upgrade the EPLD version. 

 To determine the EPLD version for all N7K-M132XP-12 modules, enter the show version module module_id epld. If the line FE Bridge(x) version displays a version earlier than 186.3 (for example, 186.2), you should schedule an EPLD upgrade to a version that is compatible with the target NX-OS release. For example, if you want to run Cisco NX-OS Release 4.1(3), you should choose Release 4.1(3) EPLDs. 

 The following example shows Release 186.3 on the FE Bridge line, which is the correct EPLD version: 


Nexus-7k(config)# show ver mod 7 epld 
 
EPLD Device Version 
--------------------------------------- 
Power Manager 4.4 
IO 1.10 
Forwarding Engine 1.6 
FE Bridge(1) 186.3 << OK! 
FE Bridge(2) 186.3 << OK! 
Linksec Engine(1) 1.5 
Linksec Engine(2) 1.5 
Linksec Engine(3) 1.5 
Linksec Engine(4) 1.5 
Linksec Engine(5) 1.5 
Linksec Engine(6) 1.5 
Linksec Engine(7) 1.5 
Linksec Engine(8) 1.5


 


 Installation Guidelines 

 You can upgrade (or downgrade) EPLDs using CLI commands on the Cisco Nexus 7000 Series switch. Follow these guidelines when you upgrade or downgrade EPLDs: 

 •Before you upgrade any EPLD images, be sure that you have updated the Cisco NX-OS operating system to the level required for the image. 

 •You can execute an upgrade from the active supervisor module only. All the modules, including the active supervisor module, can be updated individually. 

 •You can individually update each module whether it is online or offline as follows: 

 –If you upgrade EPLD images on an online module, only the EPLD images with version numbers that differ from the new EPLD images are upgraded. 

 –If you upgrade EPLD images on an offline module, all of the EPLD images are upgraded. 

 •On a switch that has two supervisor modules, upgrade the EPLDs for the standby supervisor and then switch the active supervisor to standby mode to upgrade its EPLDs (the supervisor switchover is not disruptive to traffic on Cisco Nexus 7000 switches). On a switch that has only one supervisor module, you can upgrade the active supervisor, but this will disrupt its operations during the upgrade. 

 •If you interrupt an upgrade, you must upgrade the module that is being upgraded again. 

 •The upgrade process disrupts traffic on the targeted module. 

 •Do not insert or remove any modules while an EPLD upgrade is in progress. 
 


 Downloading the EPLD images 

 Before you can prepare the EPLD images for installation, you must download them to the FTP or management server. 

 To download the EPLD images, follow these steps: 


 Step 1 From a browser, go to the following URL: 

 http://www.cisco.com 

 The browser will display the Cisco website. 

 Step 2 From the Products & Services tab, choose Switches. 

 The Switches page opens. 

 Step 3 In the Data Center area, click the arrow next to View Products. 

 The page lists the Data Center products. 

 Step 4 Click Nexus 7000. 

 The Cisco Nexus 7000 Series Switches page opens. 

 Step 5 In the Support area, click Download Software. 

 The Downloads page opens and lists the Data Center switches. 

 Step 6 Choose a Cisco Nexus 7000 Series switch from the list under Data Center Switches > Cisco Nexus 7000 Series Switches. 

 The Log In page opens. 

 Step 7 If you are an existing user, enter your username in the User Name field and your password in the Password field. If you are a new user, click Register Now and provide the required information before returning to the Log In page and logging in with your new username. 

 The Downloads page lists the software types that can be downloaded for the switch you specified. 

 Step 8 Click NX-OS EPLD Updates. 

 The Downloads page lists software releases that you can download. 

 Step 9 Choose Latest Releases > 4.1(3). 

 The Downloads page displays image information, including a link to the downloadable Tar file, to the right of the the releases. 

 Step 10 Click the link for the Tar file. 

 The Downloads page displays a Download button and lists information for the Tar file. 

 Step 11 Click Download. 

 The Supporting Documents page opens to display the rules for downloading the software. 

 Step 12 Read the rules and click Agree. 

 A File Download dialog box opens to ask if you want to open or save the images file. 

 Step 13 Click Save. 

 The Save As dialog box appears. 

 Step 14 Indicate where to save the Tar file and click Save. 

 The Tar file saves to the location that you specified. 



 You are ready to prepare the EPLD images for Installation (see the "Preparing the EPLD Images for Installation" section). 
 


 Preparing the EPLD Images for Installation 

 Before you can update the EPLD images for each of your switch modules, you must determine the Cisco NX-OS version that your switch is using, make sure there is space for the new EPLD images, and download the images. 

 To prepare the EPLD images for installation, follow these steps: 


 Step 1 Log into the switch through the console port, an SSH session, or a Telnet session. 

 Step 2 Verify that the switch is using the expected version of the Cisco NX-OS operating system. The kickstart and system lines indicate the Cisco NX-OS version. This step determines the versions of EPLD images that you must download. 


switch# show version




Cisco Nexus Operating System (NX-OS) Software




TAC support: http://www.cisco.com/tac




Copyright (c) 2002-2008, Cisco Systems, Inc. All rights reserved.




The copyrights to certain works contained in this software are 




owned by other third parties and used and distributed under 




license. Certain components of this software are licensed under 




the GNU General Public License (GPL) version 2.0 or the GNU




Lesser General Public License (LGPL) Version 2.1.. A copy of each




such license is available at




http://www.opensource.org/licenses/gpl-2.0.php and 




http://www.opensource.org/licenses/lgpl-2.1.php 




Software




  BIOS:      version 3.17.0




  loader:    version N/A




  kickstart: version 4.0(2) [gdb]




  system:    version 4.0(2) [gdb]




...







 Step 3 Verify that you have 120 MB of free space on the active or standby supervisor memory devices for the EPLD images that you will be downloading by using the dir bootflash: or dir slot0: commands. By default, these commands display the used and free memory for the active supervisor. If your switch has an additional supervisor (a standby supervisor), use the show module command to find the module number for the other supervisor, use the attach module command to attach to the module number, and then use the dir bootflash: or dir slot0: command to determine the amount of used and free memory. See Example 1 to determine the amount of available bootflash memory, and see Example 2 to determine the amount of available slot0 memory. 


 Example 1 Determining the Amount of Available Bootflash Memory 


switch# dir bootflash:




    4096     Mar 18 17:31:11 2008 bak/




 2429706     May 23 10:57:10 2008 dplug




89154513     May 27 22:04:37 2008 n7-dk9-nk




89151767     May 23 16:06:01 2008 n7-dk9-nk-old




 2429706     May 23 10:53:50 2008 n7000-s1-debug-sh.4.0.2.bin1




22171136     May 23 10:55:40 2008 n7000-s1-kickstart.4.0.2.bin1




    4096     May 23 13:03:37 2008 newer-fs/




    4096     May 28 15:13:30 2008 nk/




     127     Mar 20 16:37:59 2008 setip.sh 








Usage for bootflash://sup-local




572186624 bytes used




306606080 bytes free




878792704 bytes total








switch# show module




Mod  Ports  Module-Type                      Model              Status




---  -----  -------------------------------- ------------------ ------------




2    32     10 Gbps Ethernet Module          N7K-M132XP-12      ok




5    0      Supervisor module-1X             N7K-SUP1           ha-standby




6    0      Supervisor module-1X             N7K-SUP1           active *




...




switch(standby)# dir bootflash:




...




    4096     Mar 18 17:31:11 2008 bak/




 2429706     May 23 10:57:10 2008 dplug




89154513     May 27 22:04:37 2008 n7-dk9-nk




89151767     May 23 16:06:01 2008 n7-dk9-nk-old




 2429706     May 23 10:53:50 2008 n7000-s1-debug-sh.4.0.2.bin1




22171136     May 23 10:55:40 2008 n7000-s1-kickstart.4.0.2.bin1




    4096     May 23 13:03:37 2008 newer-fs/




    4096     May 28 15:13:30 2008 nk/




     127     Mar 20 16:37:59 2008 setip.sh 








Usage for bootflash://sup-local




572186624 bytes used




306606080 bytes free




878792704 bytes total




 Example 2 Determining the Amount of Available Slot0 Memory 


switch# dir slot0:




         25     Apr 28 23:07:28 2008  slot0








Usage for slot:




  642273280 bytes used 




  261824512 bytes free 




  904097792 bytes total








switch# show module




Mod  Ports  Module-Type                      Model              Status




---  -----  -------------------------------- ------------------ ------------




2    32     10 Gbps Ethernet Module          N7K-M132XP-12      ok




5    0      Supervisor module-1X             N7K-SUP1           ha-standby




6    0      Supervisor module-1X             N7K-SUP1           active *




...




switch# dir slot0://sup-standby/




         25     Apr 28 23:07:28 2008  slot0








Usage for slot:




  642273280 bytes used 




  261824512 bytes free 




  904097792 bytes total







 Step 4 If there is not at least 120 MB of memory free for the EPLD files, delete some unneeded files, such as earlier images, so there is enough free memory. 


switch# delete bootflash:n7000-s1-kickstart.4.0.1.bin







 Step 5 Copy the EPLD image file from the FTP or management server to the bootflash or slot0 memory in the active supervisor module. The following example shows how to copy from the FTP server to the bootflash memory. 


switch# copy ftp://10.1.7.2/n7000-s1-epld.4.0.2.img bootflash:n7000-s1-epld.4.0.2.img







 Step 6 Copy the EPLD image to the standby supervisor. 


switch# copy bootflash:n7000-s1-epld.4.0.2.img 
bootflash://sup-standby/n7000-s1-epld.4.0.2.img









 You are ready to upgrade the EPLD images (see the "Upgrading EPLD Images" section). 
 


 Upgrading EPLD Images 

 When you start upgrading the EPLD images for a module, the Cisco NX-OS software tries to list the current and new versions for each EPLD. If the module is installed and online, the software reports both the installed and new versions of each EPLD, and where there is a difference, the software upgrades (or downgrades) to the new version when you confirm that the upgrade should occur. For a module that is installed but offline, the software cannot determine the installed versions of its EPLDs so it upgrades all of the EPLDs for that module when you confirm the upgrade. For a module that is not installed, the software displays an error message and does not upgrade the EPLDs. 

 Example 3 shows how the software reports the current and new EPLD versions for a module that does not need EPLD upgrades. The current and new version numbers for each EPLD are the same. 


 Example 3 EPLD Version Comparison Report—No Upgrade Needed 


EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Power Manager                        5.3         5.3




IO                                   2.10        2.10




Forwarding Engine                    1.6         1.6




Module 1 is upto date







 Example 4 shows how the software reports the current and new EPLD versions for a module that has EPLD images that can be upgraded. According to this report, each of the downloaded Linksec Engine EPLDs has a different version than the same EPLD on the module, so the software will upgrade those EPLDs but will not upgrade the other EPLDs that have the same version numbers. If the new versions have a smaller version number compared to the current version, the software will downgrade the versions. 


 Example 4 EPLD Version Comparison Report—Upgrade Needed 


EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Power Manager                        4.4         4.4




IO                                   1.10        1.10




Forwarding Engine                    1.6         1.6




FE Bridge(1)                         186.3       186.3




FE Bridge(2)                         186.3       186.3




Linksec Engine(1)                    1.5         1.7




Linksec Engine(2)                    1.5         1.7




Linksec Engine(3)                    1.5         1.7




Linksec Engine(4)                    1.5         1.7




Linksec Engine(5)                    1.5         1.7




Linksec Engine(6)                    1.5         1.7




Linksec Engine(7)                    1.5         1.7




Linksec Engine(8)                    1.5         1.7







 The following sections explain how to upgrade the EPLD images for I/O and standby modules, the active supervisor module on switches with single-supervisor modules, fabric modules, and fan tray modules. 

 •Upgrading the EPLD Images for I/O or Standby Supervisor Modules 

 •Upgrading EPLDs for the Active Supervisor Module 

 •Upgrading EPLDs for a Fabric Module 

 •Upgrading EPLDs for a Fan Tray Module 
 


 Upgrading the EPLD Images for I/O or Standby Supervisor Modules 

 You can upgrade the EPLD images for an I/O module or standby supervisor module while the switch is operational. If you need to upgrade EPLD images for a single supervisor module, see the "Upgrading EPLDs for the Active Supervisor Module" section. 






Caution 
Upgrading EPLD images for an online I/O module can disrupt traffic going through that module. 
   


 To upgrade EPLDs for an I/O module or the standby supervisor module, follow these steps: 


 Step 1 Determine the slot number for each module by entering the show module command. 


switch# show module




Mod Ports Module-Type                      Model              Status




--- ----- -------------------------------- ------------------ ------------




1   48    10/100/1000 Mbps Ethernet Module N7K-N148GT-11      ok




3   32    10 Gbps Ethernet Module          N7K-M132XP-12      ok




5   0     Supervisor module-1X             N7K-SUP1           active




6   0     Supervisor module-1X             N7K-SUP1           ha-standby




10  48    10/100/1000 Mbps Ethernet Module N7K-M148GT-11      ok








Mod  Sw             Hw      World-Wide_name(s) (WWN)




---  -------------- ------  -------------------------------------------------




1    4.0(2)         0.503   --




3    4.0(2)         0.601   --




5    4.0(2)         0.900   --




6    4.0(2)         0.802   --




10   4.0(2)         0.902   --








Mod  MAC-Address(es)                         Serial-Num




---  --------------------------------------  ----------




1    00-19-07-6c-c0-6c to 00-19-07-6c-c0-a0  JAB11060144




3    00-1b-54-c1-33-98 to 00-1b-54-c1-33-bc  JAB1152010K




5    00-1b-54-c1-16-18 to 00-1b-54-c1-16-20  JAB114902HF




6    00-19-07-c1-00-b8 to 00-1b-54-c1-00-c0  JAB114402JX




10   00-1b-54-c1-07-88 to 00-1b-54-c1-07-bc  JAB114501RW








* this terminal session




switch#







 Step 2 Install the EPLDs by entering the install module slot_number epld url command. 


switch# install module 6 epld bootflash:n7000-s1-epld.4.0.2.img








EPLD image file , built on Fri May 16 20:36:39 2008








EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Power Manager                        3.4         3.6




IO                                   3.23        3.23




Inband                               1.7         1.7




Local Bus CPLD                       2.1         2.1




CMP CPLD                             6.0         6.0




WARNING: Upgrade process could take upto 30 minutes.








Standby supervisor is being upgraded.




Do you want to continue (y/n) ? 







 Step 3 Begin upgrading the EPLD images by entering Y for yes. 


Do you want to continue (y/n) ? Y







 Step 4 For releases 4.0(2) or earlier, if you updated the power management EPLD image, you must reset the power for the module so that EPLD can take effect (this is not required for release 4.0(3) or later). You can reset the power in one of the following two ways: 

 •To reset the power for a module, physically remove the module and reinstall it. 





 Note A module reload or just pressing the ejector buttons on the module is not sufficient for this reset requirement. 


 •To reset an entire switch, power cycle the switch. 

 To confirm the EPLD upgrade, see the "Displaying EPLD Versions for an I/O or Supervisor Module" section. 






Caution 
Resetting the power disrupts any data traffic going through the affected modules. If you power cycle the entire switch, all data traffic going through the switch at the time of the power cycling is disrupted. This is not necessary for release 4.0(3) or later. 
   






 Note As of release 4.0(3), the switch automatically loads the new power management EPLD after an upgrade, so it is no longer necessary to reset the power for the module or switch. 



 


 Upgrading EPLDs for the Active Supervisor Module 

 When you upgrade EPLDs on a switch with only one supervisor module, data traffic on the switch will be affected when you reload the device after the upgrade. If you are upgrading EPLDs for a switch with two supervisor modules, you can upgrade the standby supervisor while the switch is operational as explained in the "Upgrading the EPLD Images for I/O or Standby Supervisor Modules" section. 

 To upgrade EPLDs for a switch with a single supervisor module, follow these steps: 


 Step 1 Determine the slot number for each module. The active supervisor is in either slot 5 or slot 6. 


switch# show module




Mod Ports Module-Type                      Model              Status




--- ----- -------------------------------- ------------------ ------------




1   48    10/100/1000 Mbps Ethernet Module N7K-N148GT-11      ok




3   32    10 Gbps Ethernet Module          N7K-M132XP-12      ok




5   0     Supervisor module-1X             N7K-SUP1           active




10  48    10/100/1000 Mbps Ethernet Module N7K-M148GT-11      ok




 




Mod  Sw             Hw      World-Wide_name(s) (WWN)




---  -------------- ------  -------------------------------------------------




1    4.0(2)         0.503   --




3    4.0(2)         0.601   --




5    4.0(2)         0.900   --




10   4.0(2)         0.902   --








Mod  MAC-Address(es)                         Serial-Num




---  --------------------------------------  ----------




1    00-19-07-6c-c0-6c to 00-19-07-6c-c0-a0  JAB11060144




3    00-1b-54-c1-33-98 to 00-1b-54-c1-33-bc  JAB1152010K




5    00-1b-54-c1-16-18 to 00-1b-54-c1-16-20  JAB114902HF




10   00-1b-54-c1-07-88 to 00-1b-54-c1-07-bc  JAB114501RW








* this terminal session



 Step 2 Install the EPLDs by entering the install module slot_number epld url command. 


switch# install module 5 epld bootflash:n7000-s1-epld.4.0.2.img








EPLD image file , built on Fri May 16 20:36:39 2008








EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Power Manager                        3.4         3.6




IO                                   3.23        3.23




Inband                               1.7         1.7




Local Bus CPLD                       2.1         2.1




CMP CPLD                             6.0         6.0




WARNING: Upgrade process could take upto 30 minutes.




 




Active Supervisor is being upgraded.




Data traffic on the switch will be affected!!




The switch will reload after the upgrade process.




Do you want to continue (y/n) ? 







 Step 3 Confirm the upgrade by entering Y for yes. 


Do you want to continue (y/n) ? Y







 The Cisco Nexus 7000 Series switch will reload as soon as the upgrade occurs. 

 Step 4 For releases 4.0(2) or earlier, if you updated the power management EPLD image, you must reset the power for the module so that EPLD can take effect (this is not required for release 4.0(3) or later). You can reset the power in one of the following two ways: 

 •To reset the power for a module, physically remove the module and reinstall it. 





 Note A module reload or just pressing the ejector buttons on the module is not sufficient for this reset requirement. 


 •To reset an entire switch, power cycle the switch. 

 To confirm the EPLD upgrade, see the "Displaying EPLD Versions for an I/O or Supervisor Module" section. 






Caution 
Resetting the power disrupts any data traffic going through the affected modules. If you power cycle the entire switch, all data traffic going through the switch at the time of the power cycling is disrupted. This is not necessary for release 4.0(3) or later. 
   






 Note As of release 4.0(3), the switch automatically loads the new power management EPLD after an upgrade, so it is no longer necessary to reset the power for the module or switch. 



 


 Upgrading EPLDs for a Fabric Module 

 You can upgrade EPLDs for a fabric (Xbar) module while the switch is operational as long as at least one other fabric module is operational. 

 To upgrade EPLDs for a fabric module, follow these steps: 


 Step 1 Determine which fabric modules are present on the Cisco Nexus 7000 Series switch. 


switch# show module xbar




Xbar Ports  Module-Type                      Model              Status




---  -----  -------------------------------- ------------------ ------------




1    0      Xbar                             N7K-C7010-FAB-1    ok




2    0      Xbar                             N7K-C7010-FAB-1    ok




3    0      Xbar                             N7K-C7010-FAB-1    ok




 




Xbar Sw              Hw      World-Wide-Name(s) (WWN)




---  --------------  ------  ----------------------------------------------------




1    NA              0.404   --




2    NA              0.405   --




4    NA              0.405   --




 




Xbar MAC-Address(es)                         Serial-Num




-------------------------------------------  ------------------




1    NA                                      JAB114700WL




2    NA                                      JAB115000LU




4    NA                                      JAB115000LJ








* this terminal session







 Step 2 Install the EPLD images for a fabric module by entering the install xbar-module slot_number epld url command. 


switch# install xbar-module 1 epld bootflash:n7000-s1-epld.4.0.2.img








EPLD image file , built on Fri May 16 20:36:39 2008








EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Power Manager                        2.7         2.8 




WARNING: Upgrade process could upto 30 minutes.




Module could be powered down and up.




 




Xbar Module 1 will be powered down now!!




Do you want to continue (y/n) ?  [n] 







 Step 3 Confirm the upgrade by entering Y for yes. 


Do you want to continue (y/n) ?  [n] y







 To confirm the EPLD upgrade, see the "Displaying EPLD Versions for a Fabric Module" section. 


 


 Upgrading EPLDs for a Fan Tray Module 

 You can upgrade EPLDs for fan tray modules while the switch is operational. 

 To upgrade EPLDs for a fan tray module, follow these steps: 


 Step 1 Display fan tray information, such as module numbers and fan tray types. 


switch# show environment fan




 




Fan:




------------------------------------------------------




Fan             Model               Hw          Status




------------------------------------------------------




Fan1(sys_fan1)                      0.0         Ok




Fan2(sys_fan2)                      0.0         Ok




Fan3(fab_fan1)                      0.0         Ok




Fan4(fab_fan2)                      0.0         Ok




Fan_in_PS1      --                  --          Ok




Fan_in_PS2      --                  --          Ok




Fan_in_PS3      --                  --          Ok




Fan Air Filter : Absent




switch#







 Step 2 Upgrade the EPLD images for the fan tray module by entering the install fan-module slot_number epld url command. 


switch# install fan-module 1 epld bootflash:n7000-s1-epld.4.0.2.img








EPLD image file , built on Fri May 16 20:36:39 2008








EPLD                                Curr Ver    New Ver




-------------------------------------------------------




Fan Controller                       0.5         0.7




Fan Controller                       0.5         0.7




WARNING: Upgrade process could upto 30 minutes.




Module could be powered down and up.




 




Programming Fan Module 1 !!




Do you want to continue (y/n) ?  [n] 







 Step 3 Confirm the upgrade by entering Y for yes. 


...




Do you want to continue (y/n) ?  [n] y







 To confirm the EPLD upgrade, see the "Displaying EPLD Versions for a Fan Tray Module" section. 


 


 Displaying the EPLD Versions 

 The following sections describe how to display the EPLD versions on each module in your switch and the available EPLD versions: 

 •Displaying EPLD Versions for an I/O or Supervisor Module 

 •Displaying EPLD Versions for a Fabric Module 

 •Displaying EPLD Versions for a Fan Tray Module 

 •Displaying the Available EPLD Versions 
 


 Displaying EPLD Versions for an I/O or Supervisor Module 

 To display all of the current EPLD versions on a specific I/O or supervisor module, use the show version module slot_number epld command as shown in Example 5. 


 Example 5 Displaying the Current EPLD Versions for a Module 


switch# show version module 2 epld








EPLD Device                     Version




---------------------------------------




Power Manager                    4.2




IO                               1.10




Forwarding Engine                1.6




FE Bridge(1)                     186.2




FE Bridge(2)                     186.2




Linksec Engine(1)                1.2




Linksec Engine(2)                1.2




Linksec Engine(3)                1.2




Linksec Engine(4)                1.2




Linksec Engine(5)                1.2




Linksec Engine(6)                1.2




Linksec Engine(7)                1.2




Linksec Engine(8)                1.2


 


 Displaying EPLD Versions for a Fabric Module 

 To view all current EPLD versions on a fabric module, use the show version xbar slot_number epld command as shown in Example 6. 


 Example 6 Displaying the Current EPLD Versions for a Fabric Module 


switch# show version xbar 1 epld








EPLD Device                     Version




---------------------------------------




Power Manager                    2.7






 


 Displaying EPLD Versions for a Fan Tray Module 

 To view all current EPLD versions on a specific fan tray, use the show version fan slot_number epld command as shown in Example 7. 


 Example 7 Displaying Current EPLD Versions for Fan Tray 1 


switch# show version fan 1 epld




EPLD Device                     Version




---------------------------------------




Fan Controller(BUS A)            2.7




Fan Controller(BUS B)			           2.7


 


 Displaying the Available EPLD Versions 

 To view the available EPLD versions, use the show version epld url command as shown in Example 8. 


 Example 8 Displaying the Available EPLD Versions 


switch# show version epld bootflash:n7000-s1-epld.4.1.3.img








EPLD image file , built on Fri Jan  9 00:40:41 2009




 




 




Module Type                         EPLD Device         Version




---------------------------------------------------------------




Supervisor-1X                       Power Manager           3.7




Supervisor-1X                       IO                      3.26




Supervisor-1X                       Inband                  1.7




Supervisor-1X                       Local Bus CPLD          3.0




Supervisor-1X                       CMP CPLD                6.0




 




10/100/1000 Mbps Eth Module         Power Manager           5.4




10/100/1000 Mbps Eth Module         IO                      2.11




10/100/1000 Mbps Eth Module         Forwarding Engine       1.6




 




10 Gbps Ethernet Module             Power Manager           4.6




10 Gbps Ethernet Module             IO                      1.14




10 Gbps Ethernet Module             Forwarding Engine       1.6




10 Gbps Ethernet Module             FE Bridge               186.3




10 Gbps Ethernet Module             Linksec Engine          1.8




 




1000 Mbps Optical Ethernet Module   Power Manager           4.6




1000 Mbps Optical Ethernet Module   IO                      1.3




1000 Mbps Optical Ethernet Module   Forwarding Engine       1.6




1000 Mbps Optical Ethernet Module   SFP                     1.4




 




Fabric Module                       Power Manager           2.9




 




Fabric Module 2                     Power Manager           1.1




 




Fan(Cisco Nexus 7010)               Fan Controller          0.7




Fan(Cisco Nexus 7010)               Fan Controller          0.7




 




Fan(Cisco Nexus 7018)               Fan Controller          0.2




Fan(Cisco Nexus 7018)               Fan Controller          0.2






 


 Displaying the Status of EPLD Upgrades 

 To display the status of EPLD upgrades on the switch, use the show install epld status command. 

 Example 9 Displaying EPLD Upgrades 


switch# show install epld status








1) Module 2 upgraded on Wed Sep 17 00:27:15 (354639 us)




Status: EPLD Upgrade was Successful








EPLD                               Curr Ver    Old Ver




------------------------------------------------------




Power Manager                       5.4         5.0




IO                                  2.11        2.8




Forwarding Engine                   1.6         1.3


 


 Default Settings 

 Table lists the default hardware settings.




 Table 4 Default Hardware Settings 





          Parameters 
         


          Default 
         


 Power mode  
 Power supply redundancy mode.  





 
 


 Caveats 

 This section includes the following topics: 

 •Open Caveats in Release 4.1(3) 

 •Resolved Caveats in Release 4.1(2) 

 •Resolved Caveats in Release 4.1(3) 
 


 Open Caveats in Release 4.1(3) 

 There are no open caveats for Release 4.1(3). 
 


 Resolved Caveats in Release 4.1(2) 

 This section lists the resolved caveats for Release 4.1(2). 

 •CSCsq28232 

 Symptom: In 18 slot chassis, Supervisor can detect intermittent Power Management Bus, Status Bus and Fabric access errors. 

 Condition: 18 slot chassis. 

 Workaround: None 

 Resolution: 

 –New supervisor module IOFPGA version 3.25 or newer 

 –New supervisor module PMFPGA version 3.7 

 –New 48-port 10/100/1000 Ethernet I/O module IOFPGA version 2.11 

 –New 48-port 10/100/1000 Ethernet I/O module PMFPGA version 5.4 

 –New 32-port 10 Gbps Ethernet I/O module IOFPGA version 1.13 

 –New 32-port 10 Gbps Ethernet I/O module PMFPGA version 4.6 

 •CSCsq97271 

 Symptom: When the Link LED on 48-port 10/100/1000 Ethernet I/O module is turned on, it can intermittently turn off and then back on within a half second. 

 Condition: Link LED is lit. 

 Workaround: None 

 Resolution: Fixed in 48-port 10/100/1000 Ethernet I/O module IOFPGA version 2.11 

 •CSCsr03766 

 Symptom: First byte of NVRAM occasionally becomes corrupted after power cycling the Supervisor. 

 Conditions: Supervisor power cycle. 

 Workaround: Software detects the corrupted byte and writes the correct value. 

 Resolution: Supervisor IO FPGA version 3.19 fixes this issue. 

 •CSCsr42519 

 Symptom: Incorrect MAC statistic counter values. 

 Condition: Occurs when CTS is enabled and close to line-rate traffic. 

 Workaround: None 

 Resolution: Fixed in GE LC IOFPGA version 2.11. 

 •CSCsr44846 

 Symptom: Module did not power down after you opened and closed the ejectors. 

 Condition: Ejectors are opened and immediately closed within two hundred milliseconds. 

 Workaround: None 

 Resolution: Fixed in Supervisor IOFPGA version 3.19, 48-port 10/100/1000 Ethernet IOFPGA version 2.11, and 32-port 10 Gbps Ethernet IOFPGA version 1.14. 

 •CSCsu50821 

 Symptom: Intermittent parity error when reading status from LinkSec Engine FPGA. 

 Condition: Reading status from LinkSec Engine FPGA. 

 Workaround: None 

 Resolution: Fixed in the 32-port 10 Gbps Ethernet I/O module IOFPGA version 1.14 
 


 Resolved Caveats in Release 4.1(3) 

 This section lists the resolved caveats for Release 4.1(3). 

 •CSCsv92355 

 Symptom: When you replace a 32-port 10-Gigabit Ethernet I/O module, temporary packet drops occur with other I/O modules. 

 Conditions: This condition occurs only if you replace the 32-port 10-Gigabit Ethernet I/O module without powering down the I/O module first. 

 Workaround: Power down the 32-port 10-Gigabit Ethernet I/O module before performing an OIR. This can be done using the poweroff module slot_number command. 


switch(config)# poweroff module 4







 Resolution: You must upgrade the IO FPGA EPLD for the 32-port 10-Gbps Ethernet I/O module in addition to installing the Cisco NX-OS software for Release 4.1(3). 

 •CSCsx22079 

 Symptom: SPROM test failure during MFG testing. 

 Conditions: Reading or writing to SPROM. 

 Workaround: None 

 Resolution: Fixed in PMFPGA version 1.2. This image is also bundled in 4.1(3). 
 


 Limitations 

 When EPLDs are upgraded or downgraded, the following guidelines and observations apply: 

 •You cannot upgrade the Local Bus CPLD and CMP CPLD while you are upgrading a supervisor module in the 4.0(1) release only. 

 •You must upgrade each installed module individually. If the module is online, Cisco NX-OS upgrades only the EPLD images that have different current and new versions. If the module is offline, all EPLDs are upgraded, even if their version numbers are the same. 

 •If you interrupt an upgrade, you must upgrade the module again. 

 •You can execute an upgrade or downgrade only from the active supervisor module. On switches with two supervisors, upgrade the standby supervisor and then switch the standby supervisor to active to place the previously active supervisor module in standby mode. Upgrade the EPLDs on the standby supervisor. On switches that have only one supervisor, you must upgrade or downgrade the EPLDs on the active supervisor, which will interfere with data traffic during the upgrade. 

 •Release 4.1(2) does not provide EPLD upgrades for the Cisco Nexus 7018 fan controller. 
 


 Current EPLD Versions 

 Table 5 lists the complete list of EPLD versions. To see which versions are new for Release 4.1, see Table 3. 

 





 Table 5 Complete List of EPLDs Used for the Cisco NX-OS Release 4.1(3)   





          Module Type 
         


          EPLD Device 
         


          EPLD Version 
         


 Supervisor module (N7K-SUP1)  
 Power Manager   IO   Inband   Local Bus CPLD   CMP CPLD  
 3.7   3.26   1.7   3.0   6.0  


 48-port 10/100/1000 Mbps Ethernet I/O module (N7K-M148GT-11)  
 Power Manager   IO   Forwarding Engine  
 5.4   2.11   1.6  


 48-port 1 Gbps Ethernet I/O module (N7K-M148GS-11)  
 Power Manager   IO   SFP   Forwarding Engine  
 4.6   1.3   1.4   1.6  


 32-port 10 Gbps Ethernet I/O module (N7K-M132XP-12)  
 Power Manager   IO   Forwarding Engine   FE Bridge   LinkSec Engine  
 4.6   1.14   1.6   186.3   1.8  


 Fabric module (Cisco Nexus 7010)  
 Power Manager  
 2.9  


 Fabric module (Cisco Nexus 7018) (N7K-C7018-FAB1)  
 Power Manager  
 1.2  


 Fan (Cisco Nexus 7010)  
 Fan Controller  
 0.7  


 Fan (Cisco Nexus 7018)  
 Fan Controller  
 0.21   






 1 Release 4.1(3) does not support EPLD upgrades for the Cisco Nexus 7018 fan controller.  





 
 




 Related Documentation 

 Cisco Nexus 7000 Series documentation is available at the following URL: 

 http://www.cisco.com/en/US/products/ps9402/tsd_products_support_series_home.html 

 The documentation set includes the following documents: 

 •Cisco Nexus 7000 Series Site Preparation Guide 

 •Cisco Nexus 7000 Series Hardware Installation and Reference Guide 

 •Cisco Nexus 7000 Series Regulatory Compliance and Safety Information 

 •Cisco Nexus 7000 Series Connectivity Management Processor Configuration Guide 

 The release notes for upgrading Cisco NX-OS are available at the following URL: 

 http://www.cisco.com/en/US/docs/switches/datacenter/sw/4_1/nx-os/release/notes/41_nx-os_release_note.html 

 The release notes for upgrading DCNM are available at the following URL: 

 http://www.cisco.com/en/US/docs/switches/datacenter/sw/4_1/dcnm/release/notes/dcnm_4_1_relnotes.html 
 


 Obtaining Documentation and Submitting a Service Request 

 For information on obtaining documentation, submitting a service request, and gathering additional information, see the monthly What's New in Cisco Product Documentation, which also lists all new and revised Cisco technical documentation, at: 

 http://www.cisco.com/en/US/docs/general/whatsnew/whatsnew.html 


 Subscribe to the What's New in Cisco Product Documentation as a Really Simple Syndication (RSS) feed and set content to be delivered directly to your desktop using a reader application. The RSS feeds are a free service and Cisco currently supports RSS version 2.0. 



 This document is to be used in conjunction with the documents listed in the "Related Documentation" section. 



 CCDE, CCSI, CCENT, Cisco Eos, Cisco HealthPresence, the Cisco logo, Cisco Lumin, Cisco Nexus, Cisco Nurse Connect, Cisco Stackpower, Cisco StadiumVision, Cisco TelePresence, Cisco WebEx, DCE, and Welcome to the Human Network are trademarks; Changing the Way We Work, Live, Play, and Learn and Cisco Store are service marks; and Access Registrar, Aironet, AsyncOS, Bringing the Meeting To You, Catalyst, CCDA, CCDP, CCIE, CCIP, CCNA, CCNP, CCSP, CCVP, Cisco, the Cisco Certified Internetwork Expert logo, Cisco IOS, Cisco Press, Cisco Systems, Cisco Systems Capital, the Cisco Systems logo, Cisco Unity, Collaboration Without Limitation, EtherFast, EtherSwitch, Event Center, Fast Step, Follow Me Browsing, FormShare, GigaDrive, HomeLink, Internet Quotient, IOS, iPhone, iQuick Study, IronPort, the IronPort logo, LightStream, Linksys, MediaTone, MeetingPlace, MeetingPlace Chime Sound, MGX, Networkers, Networking Academy, Network Registrar, PCNow, PIX, PowerPanels, ProConnect, ScriptShare, SenderBase, SMARTnet, Spectrum Expert, StackWise, The Fastest Way to Increase Your Internet Quotient, TransPath, WebEx, and the WebEx logo are registered trademarks of Cisco Systems, Inc. and/or its affiliates in the United States and certain other countries. 



 All other trademarks mentioned in this document or website are the property of their respective owners. The use of the word partner does not imply a partnership relationship between Cisco and any other company. (0903R) 



 Copyright © 2008-2009 Cisco Systems, Inc. All rights reserved. 


































Was this Document Helpful?

Yes
No



Feedback











Contact Cisco

Open a Support Case
(Requires a Cisco Service Contract)














This Document Applies to These Products

Nexus 7000 Series Switches

