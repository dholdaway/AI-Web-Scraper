Title: 795945 – kde-frameworks/kcmutils-5.82.0 fails kcmoduleinfotest
URL: https://bugs.gentoo.org/show_bug.cgi?id=795945

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 795945
kde-frameworks/kcmutils-5.82.0 fails kcmoduleinfotest
Last modified: 2024-06-24 18:18:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 795945 
      - kde-frameworks/kcmutils-5.82.0 fails kcmoduleinfotest


Summary:
kde-frameworks/kcmutils-5.82.0 fails kcmoduleinfotest
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2021-06-14 12:06 UTC by Paolo Pedroni





      Modified:
    
2024-06-24 18:18 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



mscardovi









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




kcmutils-5.82.0:20210614-113857.log.gz

              (kcmutils-5.82.0:20210614-113857.log.gz,8.70 KB,
                application/gzip)

            
2021-06-14 12:06 UTC,

            Paolo Pedroni




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paolo Pedroni





          2021-06-14 12:06:54 UTC
        

Created attachment 716043 [details]
kcmutils-5.82.0:20210614-113857.log.gz

>>> Test phase: kde-frameworks/kcmutils-5.82.0
 * Scanning for an open DISPLAY to start Xvfb ...
 * Starting Xvfb on $DISPLAY=14 ...
 * Working in BUILD_DIR: "/var/tmp/portage/kde-frameworks/kcmutils-5.82.0/work/kcmutils-5.82.0_build"
ctest -j 12 --test-load 4
Test project /var/tmp/portage/kde-frameworks/kcmutils-5.82.0/work/kcmutils-5.82.0_build
    Start 1: kcmoduleinfotest
    Start 2: module_data_test
1/2 Test #2: module_data_test .................   Passed    0.23 sec
2/2 Test #1: kcmoduleinfotest .................***Failed    0.60 sec

50% tests passed, 1 tests failed out of 2

Total Test time (real) =   0.61 sec

The following tests FAILED:
          1 - kcmoduleinfotest (Failed)
Errors while running CTest
 * ERROR: kde-frameworks/kcmutils-5.82.0::gentoo failed (test phase)

Usual problem with translations:
1/2 Testing: kcmoduleinfotest
1/2 Test: kcmoduleinfotest
Command: "/var/tmp/portage/kde-frameworks/kcmutils-5.82.0/work/kcmutils-5.82.0_build/bin/kcmoduleinfotest"
Directory: /var/tmp/portage/kde-frameworks/kcmutils-5.82.0/work/kcmutils-5.82.0_build/autotests
"kcmoduleinfotest" start time: Jun 14 13:39 CEST
Output:
----------------------------------------------------------
********* Start testing of KCModuleInfoTest *********
Config: Using QtTest library 5.15.2, Qt 5.15.2 (x86_64-little_endian-lp64 shared (dynamic) release build; by GCC 10.3.0), gentoo unknown
PASS   : KCModuleInfoTest::initTestCase()
QWARN  : KCModuleInfoTest::testExternalApp() kf.service.services: The desktop entry file "/usr/share/applications/org.gnupg.pinentry-qt.desktop" has Type= "Application" but no Exec line
QWARN  : KCModuleInfoTest::testExternalApp() kf.service.sycoca: Invalid Service :  "/usr/share/applications/org.gnupg.pinentry-qt.desktop"
PASS   : KCModuleInfoTest::testExternalApp()
PASS   : KCModuleInfoTest::testFakeKCM()
FAIL!  : KCModuleInfoTest::testDesktopFileKCM() Compared values are not the same
   Actual   (info.comment())                                 : "Configura i servizi in background"
   Expected (QStringLiteral("Configure background services")): "Configure background services"
   Loc: [/var/tmp/portage/kde-frameworks/kcmutils-5.82.0/work/kcmutils-5.82.0/autotests/kcmoduleinfotest.cpp(94)]
PASS   : KCModuleInfoTest::testInvalidKCM()
PASS   : KCModuleInfoTest::cleanupTestCase()
Totals: 5 passed, 1 failed, 0 skipped, 0 blacklisted, 367ms
********* Finished testing of KCModuleInfoTest *********
<end of output>
Test time =   0.60 sec
----------------------------------------------------------
Test Failed.
"kcmoduleinfotest" end time: Jun 14 13:39 CEST
"kcmoduleinfotest" time elapsed: 00:00:00
----------------------------------------------------------

The weird thing is that on other 2 PCs, the package compiles and tests fine...

# emerge --info =kde-frameworks/kcmutils-5.82.0
Portage 3.0.18 (python 3.9.5-final-0, default/linux/amd64/17.1/desktop, gcc-10.3.0, glibc-2.33, 5.10.27-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-5.10.27-gentoo-x86_64-AMD_Phenom-tm-_II_X4_965_Processor-with-glibc2.33
KiB Mem:     8138876 total,   2626424 free
KiB Swap:    8351740 total,   7852184 free
Timestamp of repository gentoo: Mon, 14 Jun 2021 06:45:01 +0000
Head commit of repository gentoo: 99514330d078508c9799ab60ee5a622b8763d26f
sh dash 0.5.11.3-r1
ld GNU gold (Gentoo 2.35.2 p1 2.35.2) 1.16
distcc 3.3.3 x86_64-pc-linux-gnu [enabled]
ccache version 4.3 [disabled]
app-shells/bash:          5.1_p8::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.32.1::gentoo
dev-lang/python:          3.9.5_p2::gentoo
dev-lang/rust:            1.51.0-r2::gentoo
dev-util/ccache:          4.3::gentoo
dev-util/cmake:           3.18.5::gentoo
sys-apps/baselayout:      2.7::gentoo
sys-apps/sandbox:         2.24::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r5::gentoo
sys-devel/automake:       1.16.3-r1::gentoo
sys-devel/binutils:       2.35.2::gentoo
sys-devel/gcc:            10.3.0::gentoo
sys-devel/gcc-config:     2.4::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.10::gentoo (virtual/os-headers)
sys-libs/glibc:           2.33::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.europe.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts: 
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 0

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -frecord-gcc-switches -march=amdfam10 -flto=4"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/easy-rsa /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe -frecord-gcc-switches -march=amdfam10 -flto=4"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--keep-going y --with-bdeps y"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe -frecord-gcc-switches -march=amdfam10 -flto=4"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs cgroup compress-build-logs config-protect-if-modified distcc distlocks ebuild-locks ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms split-elog split-log strict test unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe -frecord-gcc-switches -march=amdfam10 -flto=4"
GENTOO_MIRRORS="http://mirror.leaseweb.com/gentoo/ http://mirror.init7.net/gentoo/ https://mirror.init7.net/gentoo/ http://ftp.uni-hannover.de/gentoo/"
LANG="it_IT.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=gnu -Wl,--sort-common -flto=4"
LINGUAS="it it_IT"
MAKEOPTS="-j12 -l4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow X a52 aac aalib acl acpi alsa amd64 ao audiofile bash-completion bluetooth branding brotli bzip2 cairo caps cdda cddb cdparanoia cdr cli crypt css cups curl dbus dga djvu dri dts dvd dvdr emboss encode exif expat fbcon ffmpeg fftw flac fontconfig fortran ftp gd gdbm gif gmp gnutls gpm graphviz gtk gui iconv icu idn ieee1394 imagemagick imlib inotify introspection ipv6 java jbig jemalloc jpeg jpeg2k kde lame lcms libass libglvnd libnotify libsamplerate libtirpc lm_sensors lua lzma lzo mad magic mmap mng mp3 mp4 mpeg mplayer multilib musicbrainz ncurses nls nptl nsplugin offensive ogg openal opengl openmp pam pango pch pcre pdf png policykit postscript ppds pulseaudio qt5 rdesktop readline samba sctp sdl seccomp sndfile speex spell split-usr sqlite ssl startup-notification svg symlink syslog systemd taglib test theora threads tiff truetype udev udisks unicode upower usb vaapi vala vdpau verify-sig vim-syntax vorbis wavpack wayland win32codecs wmf wxwidgets x264 xattr xcb xcomposite xine xinerama xml xpm xscreensaver xv xvid zlib zstd" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel virmidi" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="3dnow 3dnowext mmx mmxext popcnt sse sse2 sse3 sse4a" CURL_SSL="gnutls" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="libinput" KERNEL="linux" L10N="it en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_9" PYTHON_TARGETS="python3_9" RUBY_TARGETS="ruby26" USERLAND="GNU" VIDEO_CARDS="radeon r600" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RUSTFLAGS

=================================================================
                        Package Settings
=================================================================

kde-frameworks/kcmutils-5.82.0::gentoo was built with the following:
USE="-debug -doc -test" ABI_X86="(64)"
FEATURES="binpkg-dostrip cgroup compress-build-logs binpkg-logs userfetch news binpkg-docompress assume-digests sandbox merge-sync network-sandbox sfperms xattr unmerge-orphans unmerge-logs split-log parallel-fetch strict distlocks pid-sandbox qa-unresolved-soname-deps ipc-sandbox multilib-strict distcc protect-owned userpriv split-elog preserve-libs usersandbox config-protect-if-modified usersync ebuild-locks unknown-features-warn"

# emerge -1pqv =kde-frameworks/kcmutils-5.82.0
[ebuild   R   ] kde-frameworks/kcmutils-5.82.0  USE="test* -debug -doc"




Comment 1


Andreas Sturmlechner






          2021-06-24 09:49:26 UTC
        

Yup, same here. Was it a new install w/o an older version of kcmutils yet present?




Comment 2


Andreas Sturmlechner






          2021-06-24 09:50:43 UTC
        

(In reply to Andreas Sturmlechner from comment #1)
> Yup, same here.
Which was really an answer to...

(In reply to Paolo Pedroni from comment #0)
> The weird thing is that on other 2 PCs, the package compiles and tests
> fine...




Comment 3


Paolo Pedroni





          2021-06-24 10:43:20 UTC
        

(In reply to Andreas Sturmlechner from comment #1)
> Yup, same here. Was it a new install w/o an older version of kcmutils yet
> present?

No. It was an 'emerge -1e @world' after upgrading gcc and glibc.




Comment 4


Andreas Sturmlechner






          2024-06-24 18:18:54 UTC
        

Tested fine for me, please re-open when it happens with >=6.3.0.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

