Title: 291898 – sys-apps/portage-2.2_rc48: pygtk is repeatedly emerged
URL: https://bugs.gentoo.org/show_bug.cgi?id=291898

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 291898
sys-apps/portage-2.2_rc48: pygtk is repeatedly emerged
Last modified: 2009-11-07 04:50:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 291898 
      - sys-apps/portage-2.2_rc48: pygtk is repeatedly emerged


Summary:
sys-apps/portage-2.2_rc48: pygtk is repeatedly emerged
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-11-04 19:17 UTC by Todd Lasman





      Modified:
    
2009-11-07 04:50 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



SebastianLuther









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log file for pygtk

              (build.log,137.85 KB,
                text/plain)

            
2009-11-04 21:24 UTC,

            Todd Lasman




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Todd Lasman





          2009-11-04 19:17:20 UTC
        

Using portage 2.2_rc48.  After successfully emerging pygtk, doing emerge -uDN wants to re-emerge that same package over and over.  emerge --sync doesn't change this behavior.

emerge -uD works as expected (that is, it won't re-emerge pygtk)
emerge -uN works as expected
but
emerge -uDN will try to re-emerge the same package (no other packages were installed in the meantime, and no new USE flags were set)

The COUNTER file in the portage database is updated appropriately.

Reproducible: Always

Steps to Reproduce:
1. emerge -uDN world (emerges dev-python/pygtk-2.16.0-r1)
2. emerge -uDN world (emerges dev-python/pygtk-2.16.0-r1 again)

Actual Results:  
dev-python/pygtk-2.16.0-r1 gets re-emerged

Expected Results:  
dev-python/pygtk-2.16.0-r1 shouldn't be reemerged if it was just emerged




Comment 1


Sebastian Luther (few)





          2009-11-04 19:23:25 UTC
        

Please attach "emerge --info dev-python/pygtk", post the output of "emerge -pvq dev-python/pygtk" and attach the build.log. Use FEATURES="keeptemp" to have the build.log not removed.




Comment 2


Todd Lasman





          2009-11-04 21:12:57 UTC
        

emerge --info yields:

Portage 2.2_rc48 (default/linux/x86/10.0, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.31 i686)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.31-i686-Intel-R-_Pentium-R-_4_CPU_3.00GHz-with-gentoo-2.1.6
Timestamp of tree: Tue, 03 Nov 2009 07:00:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.6.4
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 2.1.6
sys-apps/openrc:     0.5.0-r2
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.29
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=native -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps=y"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1 -Wl,--sort-common -Wl,--as-needed"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aac acl alac alsa berkdb bzip2 cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread encode flac fortran gdbm gif gpm hal iconv java jpeg kde lame mad mng modules mp3 mp4 mpeg mudflap ncurses nls nptl nptlonly nsplugin ogg openmp pam pcre pdf perl png pppd python qt3 qt3support readline reflection session spl ssl svg sysfs tcpd tiff truetype unicode v4l2 vorbis wavpack win32codecs x86 xcb xinerama xml xorg xrandr zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon" 
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

=================================================================
                        Package Settings
=================================================================

dev-python/pygtk-2.16.0-r1 was built with the following:
USE="X -doc -examples -test" 

----------------------------------------------------------
emerge -pvq yields:

[ebuild   R   ] dev-python/pygtk-2.16.0-r1  USE="X%* -doc -examples (-test%)" 

----------------------------------------------------------

I can't find a build.log, even with FEATURES="keeptemp" enabled in /etc/make.conf




Comment 3


Sebastian Luther (few)





          2009-11-04 21:19:55 UTC
        

Look in /var/tmp/portage/dev-python/pygtk-2.16.0-r1/temp after the next emerge for the build.log. Also make sure your don't run out of disk space.




Comment 4


Todd Lasman





          2009-11-04 21:24:58 UTC
        

Created attachment 209273 [details]
build.log file for pygtk

build.log sent as an attachment




Comment 5


Zac Medico






          2009-11-05 08:05:20 UTC
        

The problem seems like it's related to the "X" USE flag, which doesn't exist in the latest version of the ebuild (I just ran emerge --sync). I'm not sure why this flag is showing for you.

Did you change anything in particular just before you started experiencing this issue? Some things that might be able trigger something like this are eclass changes, /etc/portage/bashrc, or scripts in /etc/portage/env. Have you done anything like that?

If you remove all of the content of the /var/cache/edb/dep directory does that make any difference?

What is the output of this command?

  portageq metadata / ebuild dev-python/pygtk-2.16.0-r1 IUSE





Comment 6


Todd Lasman





          2009-11-06 04:01:04 UTC
        

I don't recall changing anything in particular.  Specifically, I have no /etc/portage/bashrc, and there is no directory /etc/portage/env.

I removed the contents of /var/cache/edb/dep and the problem persists.

The output of portageq metadata / ebuild dev-python/pygtk-2.16.0-r1 IUSE is:
doc examples X




Comment 7


Zac Medico






          2009-11-06 22:48:13 UTC
        

Do you have anything in /etc/portage/modules?

Please post the content of these two files:

/usr/portage/metadata/cache/dev-python/pygtk-2.16.0-r1
/var/cache/edb/dep/usr/portage/dev-python/pygtk-2.16.0-r1




Comment 8


Todd Lasman





          2009-11-07 01:11:52 UTC
        

Today is the first time in a week that pygtk didn't reemerge!  Not certain what changed, other than emerging any new packages that synced overnight.  Anyway, here is the information you requested:

----------------------------------------------------------

/etc/portage/modules doesn't exist

/usr/portage/metadata/cache/dev-python/pygtk-2.16.0-r1 is:

>=dev-libs/glib-2.8.0 >=x11-libs/pango-1.16.0 >=dev-libs/atk-1.12.0 >=x11-libs/gtk+-2.13.6 >=gnome-base/libglade-2.5.0 >=dev-lang/python-2.4.4-r5 >=dev-python/pycairo-1.0.2 >=dev-python/pygobject-2.15.3 dev-python/numpy doc? ( dev-libs/libxslt >=app-text/docbook-xsl-stylesheets-1.70.1 ) >=dev-util/pkgconfig-0.9 =sys-devel/automake-1.10* >=sys-devel/autoconf-2.61 sys-devel/libtool >=app-shells/bash-3.2 >=app-admin/eselect-python-20090606 test? ( x11-base/xorg-server x11-apps/xhost )
>=dev-libs/glib-2.8.0 >=x11-libs/pango-1.16.0 >=dev-libs/atk-1.12.0 >=x11-libs/gtk+-2.13.6 >=gnome-base/libglade-2.5.0 >=dev-lang/python-2.4.4-r5 >=dev-python/pycairo-1.0.2 >=dev-python/pygobject-2.15.3 dev-python/numpy
2
mirror://gnome/sources/pygtk/2.16/pygtk-2.16.0.tar.bz2

http://www.pygtk.org/
LGPL-2.1
GTK+2 bindings for Python
~alpha ~amd64 ~arm ~hppa ~ia64 ~mips ~ppc ~ppc64 ~sh ~sparc ~x86 ~x86-fbsd ~x86-interix ~amd64-linux ~x86-linux ~ppc-macos ~x86-macos ~sparc-solaris ~x64-solaris ~x86-solaris
alternatives autotools eutils flag-o-matic gnome.org libtool multilib portability python toolchain-funcs virtualx
doc examples test



2

compile configure install postinst postrm prepare test
------------------------------------------------------------------------

I don't have /var/cache/edb/dep/usr/portage/dev-python/pygtk-2.16.0-r1
possibly because for the first time in a week, pygtk didn't reemerge!








Comment 9


Zac Medico






          2009-11-07 04:50:08 UTC
        

Please reopen if you can reproduce it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

