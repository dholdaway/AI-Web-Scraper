Title: 124941 – emerge app-office/openoffice-2.0.2_rc3 and rc4 fails while making '../../../unxlngi4.pro/slo/SalGtkPicker.obj
URL: https://bugs.gentoo.org/show_bug.cgi?id=124941

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 124941
emerge app-office/openoffice-2.0.2_rc3 and rc4 fails while making '../../../unxlngi4.pro/slo/SalGtkPicker.obj
Last modified: 2006-03-05 02:50:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 124941 
      - emerge app-office/openoffice-2.0.2_rc3 and rc4 fails while making '../../../unxlngi4.pro/slo/SalGtkPicker.obj


Summary:
emerge app-office/openoffice-2.0.2_rc3 and rc4 fails while making '../../../u...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Office Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-04 05:52 UTC by Stefan Struhs





      Modified:
    
2006-03-05 02:50 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Emerge-Log of openoffice-2.0.2_rc4

              (4452-openoffice-2.0.2_rc4.log.tar.gz,721.16 KB,
                application/x-gzip)

            
2006-03-04 10:05 UTC,

            Stefan Struhs




Details





Emerge-Log of openoffice-2.0.2_rc4 (2nd)

              (4452-openoffice-2.0.2_rc4.log.tar.gz,721.16 KB,
                application/x-gzip)

            
2006-03-05 01:26 UTC,

            Stefan Struhs




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Struhs





          2006-03-04 05:52:45 UTC
        

Compile/ emerge error:
=========================
Making: ../../../unxlngi4.pro/slo/SalGtkPicker.obj
g++ -Wuninitialized -fmessage-length=0 -c -I.  -I. -I../inc -I../../../inc -I../ ../../unx/inc -I../../../unxlngi4.pro/inc -I. -I/var/tmp/portage/openoffice-2.0. 2_rc3/work/ooo-build-oob680.3.0/build/oob680-m3/solver/680/unxlngi4.pro/inc/stl -I/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/build/oob680-m 3/solver/680/unxlngi4.pro/inc/external -I/var/tmp/portage/openoffice-2.0.2_rc3/w ork/ooo-build-oob680.3.0/build/oob680-m3/solver/680/unxlngi4.pro/inc -I/var/tmp/ portage/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/build/oob680-m3/solenv/un xlngi4/inc -I/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/bui ld/oob680-m3/solenv/inc -I/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-build-o ob680.3.0/build/oob680-m3/res -I/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-b uild-oob680.3.0/build/oob680-m3/solver/680/unxlngi4.pro/inc/stl -I/var/tmp/porta ge/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/build/oob680-m3/solenv/inc/Xp3 1 -I/opt/sun-jdk-1.5.0.06/include -I/opt/sun-jdk-1.5.0.06/include/linux -I/opt/s un-jdk-1.5.0.06/include/native_threads/include -I/usr/include     -I. -I../../.. /res -I. -O1   -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/ atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I /usr/lib/glib-2.0/include  -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/ usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include /glib-2.0 -I/usr/lib/glib-2.0/include -pipe -O2 -march=athlon-xp -mcpu=athlon-xp  -pipe -fno-strict-aliasing -Wno-ctor-dtor-privacy -include preinclude.h -fexcep tions -fno-enforce-eh-specs   -fpic -DLINUX -DUNX -DVCL -DGCC -DC300 -DINTEL -DC VER=C300 -D_USE_NAMESPACE  -DGLIBC=2 -DX86 -D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=400 -D__DMAKE -DUNIX -DCPPU_ENV=gcc3 -DGXX_ INCLUDE_PATH=/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.6/include/g++-v3 -DSUPD=680 -DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0 -DOPTIMIZE -DEXCEPTIONS_ON  -DCUI -DSOLAR_JAVA -DOOB680=OOB680   -DSHAREDLIB -D_DLL_  -DMULTITHREAD  -o ../ ../../unxlngi4.pro/slo/SalGtkPicker.o /var/tmp/portage/openoffice-2.0.2_rc3/work /ooo-build-oob680.3.0/build/oob680-m3/fpicker/source/unx/gnome/SalGtkPicker.cxx
/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/build/oob680-m3/ fpicker/source/unx/gnome/SalGtkPicker.cxx: In static member function `static rtl ::OUString SalGtkPicker::uritounicode(const gchar*)':
/var/tmp/portage/openoffice-2.0.2_rc3/work/ooo-build-oob680.3.0/build/oob680-m3/ fpicker/source/unx/gnome/SalGtkPicker.cxx:83: error: Syntaxfehler before `;' tok en
dmake:  Error code 1, while making '../../../unxlngi4.pro/slo/SalGtkPicker.obj'
'---* tg_merge.mk *---'

ERROR: Error 65280 occurred while making /var/tmp/portage/openoffice-2.0.2_rc3/w ork/ooo-build-oob680.3.0/build/oob680-m3/fpicker/source/unx/gnome
make: *** [stamp/build] Fehler 1

Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(tm) XP 2600+
Gentoo Base System version 1.12.0_pre16
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=athlon-xp -mcpu=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/fax /usr/share/config /var/qmail/control /var/spool/fax/etc"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=athlon-xp -mcpu=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.switch.ch/mirror/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/ http://mir.zyrianes.net/gentoo/"
LANG="de_DE.utf8"
LC_ALL="de_DE.utf8"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/local /usr/local/overlays/gentoo-de /usr/local/overlays/fluidportage/trunk"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 X a52 aac aalib acpi alsa apm arts audiofile avi bash-completion berkdb bitmap-fonts bonobo browserplugin bzip2 bzlib cdparanoia cdr chipcard crypt cups curl divx4linux dvd dvdr dvdread eds emboss enable-hbci enable-java encode esd ethereal evo exif expat fam fdftk firefox flac foomaticdb fortran freetype ftp fuse gcj gdbm gif gimpprint glut gnome gpm gps gstreamer gtk gtk2 gtkhtml guile hal hbci imagemagick imap imlib iodbc ipv6 java javascript jpeg junit lcms libg++ libwww mad mbox mikmod mime mmx mng motif mp3 mpeg mysql ncurses nls odbc ofx ogg oggvorbis openal opengl oss pam pcre pda pdflib perl png postgres ppds python qt quicktime quotes readline ruby samba scanner sdl source speex spell sqlite ssl svg svga tcltk tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb userlocales vorbis win32codecs wmf xine xml xml2 xmms xpm xv xvid zlib linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS




Comment 1


Andreas Proschofsky (RETIRED)






          2006-03-04 06:26:28 UTC
        

Please try RC4. Also use gcc-3.4.x, especially mixing this with sun-jdk-1.5 is definately no good idea. If you do this and it still fail, please reopen the bug




Comment 2


Stefan Struhs





          2006-03-04 09:44:01 UTC
        

(In reply to comment #1)
> Please try RC4. Also use gcc-3.4.x, especially mixing this with sun-jdk-1.5 is
> definately no good idea. If you do this and it still fail, please reopen the
> bug
> 
Tried rc4 > same error message! 
1. Actually gcc-3.4.5 is installed; do I have to configure gentoo to use it?
2. Which JDK shall I use if the JDK 1.5.0.06 causes trouble with OO 2.0.2_rc4? 1.4.2.10-r2?




Comment 3


Stefan Struhs





          2006-03-04 10:05:52 UTC
        

Created attachment 81311 [details]
Emerge-Log of openoffice-2.0.2_rc4




Comment 4


Andreas Proschofsky (RETIRED)






          2006-03-04 12:53:02 UTC
        

(In reply to comment #2)
> Tried rc4 > same error message! 
> 1. Actually gcc-3.4.5 is installed; do I have to configure gentoo to use it?

Yes, use gcc-config for that, gcc-config -l lists the available compiler versions / variants, gcc-config <number> sets it to the selected one. See here for more info

http://www.gentoo.org/doc/en/gcc-upgrading.xml

> 2. Which JDK shall I use if the JDK 1.5.0.06 causes trouble with OO 2.0.2_rc4?
> 1.4.2.10-r2?
> 

Yes, 1.4.2.10-r2 should be fine. A general notice: Mixing stable and unstable (or even worse: hardmasked packages like sun-jdk-1.5) can lead to all sorts of problems, so if you did this with more packages, this could be the problem here...

Just another thing before we dig too deep ;) Does this bug happen at the exact same point (not just the same error number) when you try again, and are you sure your disk didn't fill up?

Oh, and I'm not able to open your log-file, invalid archive...






Comment 5


Stefan Struhs





          2006-03-05 01:26:00 UTC
        

Created attachment 81370 [details]
Emerge-Log of openoffice-2.0.2_rc4 (2nd)




Comment 6


Stefan Struhs





          2006-03-05 02:36:21 UTC
        

Tried gcc 3.4.5 and jdk 1.4.2.10-r2 and compilation worked fine.
Thought that OO 2.0.2-rc4 is unstable and so new that it should work together with JDK 1.5.x, especially both products are from the same company (in-house-compatibility?).
The error was exactly the same at the same place (making SalGtkPicker.obj). I have 2 80 GB hard drives and there is plenty of free space on them (and the the correct partition/directory). Uploaded the log file again and it seem to be broken again; don't know why, because the original archive works fine. The complete log is too large to be uploaded. Here your can see just the error from compilation of 2.0.2_rc4 (please also see text beneath error log):

Making: ../../../unxlngi4.pro/slo/SalGtkPicker.obj
g++ -Wuninitialized -fmessage-length=0 -c -I.  -I. -I../inc -I../../../inc -I../../../unx/inc -I../../../unxlngi4.pro/inc -I. -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solver/680/unxlngi4.pro/inc/stl -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solver/680/unxlngi4.pro/inc/external -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solver/680/unxlngi4.pro/inc -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solenv/unxlngi4/inc -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solenv/inc -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/res -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solver/680/unxlngi4.pro/inc/stl -I/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/solenv/inc/Xp31 -I/opt/sun-jdk-1.5.0.06/include -I/opt/sun-jdk-1.5.0.06/include/linux -I/opt/sun-jdk-1.5.0.06/include/native_threads/include -I/usr/include     -I. -I../../../res -I. -O1   -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include  -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -pipe -O2 -march=athlon-xp -mcpu=athlon-xp -pipe -fno-strict-aliasing -Wno-ctor-dtor-privacy -include preinclude.h -fexceptions -fno-enforce-eh-specs   -fpic -DLINUX -DUNX -DVCL -DGCC -DC300 -DINTEL -DCVER=C300 -D_USE_NAMESPACE  -DGLIBC=2 -DX86 -D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=400 -D__DMAKE -DUNIX -DCPPU_ENV=gcc3 -DGXX_INCLUDE_PATH=/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.6/include/g++-v3 -DSUPD=680 -DPRODUCT -DNDEBUG -DPRODUCT_FULL -DOSL_DEBUG_LEVEL=0 -DOPTIMIZE -DEXCEPTIONS_ON -DCUI -DSOLAR_JAVA -DOOB680=OOB680   -DSHAREDLIB -D_DLL_  -DMULTITHREAD  -o ../../../unxlngi4.pro/slo/SalGtkPicker.o /var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/fpicker/source/unx/gnome/SalGtkPicker.cxx
/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/fpicker/source/unx/gnome/SalGtkPicker.cxx: In static member function `static rtl::OUString SalGtkPicker::uritounicode(const gchar*)':
/var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/fpicker/source/unx/gnome/SalGtkPicker.cxx:83: error: Syntaxfehler before `;' token
dmake:  Error code 1, while making '../../../unxlngi4.pro/slo/SalGtkPicker.obj'
'---* tg_merge.mk *---'

ERROR: Error 65280 occurred while making /var/tmp/portage/openoffice-2.0.2_rc4/work/ooo-build-oob680.5.0/build/oob680-m5/fpicker/source/unx/gnome
make: *** [stamp/build] Fehler 1

It seems to be identical: there is a syntax error in SalGtkPicker.cxx in line 83 before ;, which is 

   g_return_val_if_fail (pIn != NULL, rtl::OUString());

in the function

   rtl::OUString SalGtkPicker::uritounicode(const gchar* pIn)

I've googled for g_return_val_if_fail and found it to be a GLib function; more info is available on http://developer.gnome.org/doc/API/glib/glib-warnings-and-assertions.html#G-RETURN-VAL-IF-FAIL

It 's simly a debugging function.

I am not so familiar with C++, but isn't this a parameter type error? First parameter is imho ok because it will return a boolean value (true, if pIn is pointing to somewhere). What about the second? What is the meaning of rtl::OUString()?

Thanks in advance!

Regards,
Stefan




Comment 7


Andreas Proschofsky (RETIRED)






          2006-03-05 02:50:36 UTC
        

Just a quick pointer: This should not have been related to sun-jdk, most likely this was caused by the old gcc (which upstream doesn't really test anymore)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

