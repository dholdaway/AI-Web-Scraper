Title: 123204 – 'crossdev i386-pc-linux-gnu' fails on i686-pc-linux-gnu host
URL: https://bugs.gentoo.org/show_bug.cgi?id=123204

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 123204
'crossdev i386-pc-linux-gnu' fails on i686-pc-linux-gnu host
Last modified: 2006-02-19 14:25:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 123204 
      - 'crossdev i386-pc-linux-gnu' fails on i686-pc-linux-gnu host


Summary:
'crossdev i386-pc-linux-gnu' fails on i686-pc-linux-gnu host
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-02-17 16:13 UTC by Tom Hendrikx





      Modified:
    
2006-02-19 14:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




cross-i386-pc-gnu-info.log

              (cross-i386-pc-linux-gnu-info.log,2.85 KB,
                text/plain)

            
2006-02-17 16:15 UTC,

            Tom Hendrikx




Details





cross-i386-pc-linux-gnu-gcc-stage1.log

              (cross-i386-pc-linux-gnu-gcc-stage1.log,293.11 KB,
                text/plain)

            
2006-02-17 16:16 UTC,

            Tom Hendrikx




Details





'qlist binutils' output

              (qlist_binutils.log,18.67 KB,
                text/plain)

            
2006-02-18 01:18 UTC,

            Tom Hendrikx




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tom Hendrikx





          2006-02-17 16:13:36 UTC
        

WHile trying to execute 'crossdev i386-pc-linux-gnu' on a machine with CBUILD='i686-pc-linux-gnu', gcc fails to build in stage 1:

In file included from /var/tmp/cross/i386-pc-linux-gnu/portage/gcc-3.4.5/work/gcc-3.4.5/gcc/libgcov.c:37:
/var/tmp/cross/i386-pc-linux-gnu/portage/gcc-3.4.5/work/gcc-3.4.5/gcc/tsystem.h:40:1: warning: this is the location of the previous definition
make[2]: i386-pc-linux-gnu-ar: Command not found
make[2]: *** [libgcc.a] Error 127
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/cross/i386-pc-linux-gnu/portage/gcc-3.4.5/work/build/gcc'
make[1]: *** [libgcc.a] Error 2
rm gcc.pod
make[1]: Leaving directory `/var/tmp/cross/i386-pc-linux-gnu/portage/gcc-3.4.5/work/build/gcc'
make: *** [all-gcc] Error 2

Below is my emerge --info:
tomhendr@elaine ~ $ emerge --info
Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(TM) XP 2000+
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mcpu=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://gentoo.inode.at/ ftp://ftp.twaren.net/Linux/Gentoo/ ftp://130.59.10.35/mirror/gentoo/"
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa audiofile avi berkdb bzip2 cdr crypt cups curl dbus dvd eds emboss encode esd ethereal exif expat fam ffmpeg flac foomaticdb fortran gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml hal howl idn imagemagick imlib ipv6 java jpeg lcms libg++ libwww mad mhash mikmod mng motif mp3 mpeg ncurses nls nptl nsplugin ogg oggvorbis opengl pam pcre pdflib png ppds python quicktime readline samba scanner sdl spell ssl tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis xine xml2 xprint xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS




Comment 1


Tom Hendrikx





          2006-02-17 16:15:17 UTC
        

Created attachment 80044 [details]
cross-i386-pc-gnu-info.log




Comment 2


Tom Hendrikx





          2006-02-17 16:16:00 UTC
        

Created attachment 80045 [details]
cross-i386-pc-linux-gnu-gcc-stage1.log




Comment 3


SpanKY






          2006-02-17 22:03:50 UTC
        

what does `binutils-config -l` show ?  what do you mean you set CBUILD ?  you shouldnt be screwing with that ...




Comment 4


Tom Hendrikx





          2006-02-17 23:30:56 UTC
        

tomhendr@elaine ~ $ binutils-config -l
 [1] i386-pc-linux-gnu-2.16.1

 [2] i686-pc-linux-gnu-2.16.1 *

This seems logical when I run it in the normal environment, but I guess this should be adapted in the crossdev context?


I wasn't screwing with CBUILD. The local machine is a stage1 install from some time ago which I optimized for i686, and the target machine is a fresh stage3 install (thus using i386). I was merely pointing out that If I had followed the same procedure for both hosts, I would not need a cross-development toolchain at all;)




Comment 5


SpanKY






          2006-02-17 23:45:48 UTC
        

> This seems logical when I run it in the normal environment, but I guess this
> should be adapted in the crossdev context?

there is no "crossdev context"

post the output of `qlist binutils` as an attachment ... i guess `i386-pc-linux-gnu-ar` doesnt work in your normal env ?

> I wasn't screwing with CBUILD.

you said you were in your original comment

> I was merely pointing out that If I had followed the same procedure for both
> hosts, I would not need a cross-development toolchain at all;)

so you meant to say 'CHOST', not 'CBUILD'




Comment 6


Tom Hendrikx





          2006-02-18 01:18:50 UTC
        

Created attachment 80069 [details]
'qlist binutils' output




Comment 7


Tom Hendrikx





          2006-02-18 01:22:41 UTC
        

and 'i386-pc-linux-gnu` doesn't exist indeed...




Comment 8


Tom Hendrikx





          2006-02-18 08:19:28 UTC
        

(In reply to comment #7)
> and 'i386-pc-linux-gnu` doesn't exist indeed...
> 

i386-pc-linux-gnu-ar, that is :P




Comment 9


SpanKY






          2006-02-18 15:30:26 UTC
        

try running `binutils-config 1` and see if you get an i386-pc-linux-gnu-ar in your PATH




Comment 10


Tom Hendrikx





          2006-02-19 01:15:43 UTC
        

tomhendr@elaine ~ $ which i386-pc-linux-gnu-ar
/usr/bin/i386-pc-linux-gnu-ar





Comment 11


SpanKY






          2006-02-19 01:46:04 UTC
        

so does that mean it's working now or not ?




Comment 12


Tom Hendrikx





          2006-02-19 03:16:56 UTC
        

I was waiting until it was finished completely, but yes it works :)




Comment 13


SpanKY






          2006-02-19 14:25:58 UTC
        

k









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

