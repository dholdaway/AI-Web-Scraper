Title: 162565 – sys-devel/automake-1.10 and 1.8.5-r3 test failures on hardened systems
URL: https://bugs.gentoo.org/show_bug.cgi?id=162565

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 162565
sys-devel/automake-1.10 and 1.8.5-r3 test failures on hardened systems
Last modified: 2009-12-03 23:27:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 162565 
      - sys-devel/automake-1.10 and 1.8.5-r3 test failures on hardened systems


Summary:
sys-devel/automake-1.10 and 1.8.5-r3 test failures on hardened systems
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-17 19:16 UTC by RonnyPeine





      Modified:
    
2009-12-03 23:27 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



aross
as.gentoo
weihu
zlin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




automake log

              (automake-1.10.2.log,22.21 KB,
                text/plain)

            
2009-12-03 23:27 UTC,

            Attila Stehr




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


RonnyPeine





          2007-01-17 19:16:28 UTC
        

Emerged automake-1.10 but got an error because of a failed test:
txinfo19.test

I'm using a hardened gentoo system on i686-pc-linux-gnu.

Weird is that the test works if invoked manually:
in /var/tmp/portage/automake-1.10/work/automake-1.10/tests with the command
TESTS='txinfo19.test' make -e check

I think the problem could have something to do with rights of the user portage or sandbox specials (I'm using feature userpriv).

Reproducible: Always

Steps to Reproduce:




Comment 1


Wei Hu





          2007-03-16 15:41:00 UTC
        

Almost same here. Except that mine fails on test ccnoco.test.




Comment 2


Tiziano Müller (RETIRED)






          2007-03-20 18:18:33 UTC
        

[...]
XFAIL: auxdir2.test
[...]
XFAIL: cond17.test
[...]
XFAIL: txinfo5.test
[...]
=====================================
3 of 506 tests failed
(24 tests were not run)

... and that's with automake-1.8.5-r3 and "Portage 2.1.2.2 (hardened/amd64/multilib, gcc-3.4.6, glibc-2.3.6-r5, 2.6.19-vs2.2.0-rc15-grsec2.1.10-gentoo x86_64)"




Comment 3


Andrew Ross (RETIRED)






          2007-06-30 11:54:47 UTC
        

I'm seeing the exdir2, man2 and transform tests fail here.

The transform and man2 failures look like legitimate bugs in the tests, which fail because they expect man files to be in ${prefix}/man instead of ${prefix}/share/man . "sed 's:inst/man:inst/share/man:g' {man2,transform}.test" is all that's required to address this.






Comment 4


Bo Ørsted Andresen (RETIRED)






          2007-09-05 07:18:00 UTC
        

(In reply to comment #3)
> I'm seeing the exdir2, man2 and transform tests fail here.
> 
> The transform and man2 failures look like legitimate bugs in the tests,
> which fail because they expect man files to be in ${prefix}/man instead of
> ${prefix}/share/man . "sed 's:inst/man:inst/share/man:g'
> {man2,transform}.test" is all that's required to address this.

Yeah, that sed works for me too. Then only exdir2 fails here too.




Comment 5


SpanKY






          2007-09-08 03:04:35 UTC
        

XFAIL are expected failures

no real information about what tests are failing and more importantly, logs as to why ... and this has turned into a random dumping of reports




Comment 6


Attila Stehr





          2009-12-03 23:16:13 UTC
        


please reopen:

vz377 ~ # grep FAIL /var/log/portage/sys-devel:automake-1.10.2:20091203-191117.log     
XFAIL: auxdir2.test
XFAIL: cond17.test
FAIL: mdate5.test <=========================
XFAIL: txinfo5.test
vz377 ~ # 

Portage 2.1.6.13 (hardened/linux/x86/10.0, gcc-4.3.4, glibc-2.9_p20081201-r2, 2.6.26.8 i686)
=================================================================
System uname: Linux-2.6.26.8-i686-AMD_Athlon-tm-_II_X4_620_Processor-with-gentoo-1.12.13
Timestamp of tree: Thu, 03 Dec 2009 08:00:01 +0000
app-shells/bash:     4.0_p28
dev-lang/python:     2.6.2-r1
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i486-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -pipe"
CHOST="i486-pc-linux-gnu"
CONFIG_PROTECT="/etc /sbin/rc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -mtune=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict stricter test unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 3dnowprefetch acl bzip2 cli cracklib crypt gdbm gmp gpm hardened hpn iconv idn lzma mmx mudflap ncurses nls nptl nptlonly openmp pam pcre pic pth readline reflection skey smp spl sse sse2 sse3 sse4a ssl tcpd threads unicode x86 zlib" ELIBC="glibc" INPUT_DEVICES="keyboard" KERNEL="linux" LINGUAS="de" USERLAND="GNU"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 7


Attila Stehr





          2009-12-03 23:27:57 UTC
        

Created attachment 211933 [details]
automake log









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

