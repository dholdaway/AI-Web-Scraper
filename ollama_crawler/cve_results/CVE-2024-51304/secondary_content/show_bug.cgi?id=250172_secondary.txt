Title: 250172 – gnustep-libs/smbkit: breaks with forced --as-needed
URL: https://bugs.gentoo.org/show_bug.cgi?id=250172

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 250172
gnustep-libs/smbkit: breaks with forced --as-needed
Last modified: 2008-12-17 17:47:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 250172 
      - gnustep-libs/smbkit: breaks with forced --as-needed


Summary:
gnustep-libs/smbkit: breaks with forced --as-needed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       QA
      


Assignee:

Gentoo Gnustep project








URL:



http://www.gentoo.org/proj/en/qa/asne...
        




Whiteboard:




Keywords:








Depends on:







Blocks:




as-needed



 

        Show dependency tree





 





      Reported:
    
2008-12-07 14:40 UTC by Diego Elio Pettenò (RETIRED)





      Modified:
    
2008-12-17 17:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log for gnustep-apps/gwnet

              (gwnet-0.1.0.8.2:20081207-034637.log,21.29 KB,
                text/plain)

            
2008-12-07 14:42 UTC,

            Diego Elio Pettenò (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Diego Elio Pettenò (RETIRED)






          2008-12-07 14:40:25 UTC
        

I'm reporting this bug because the package in summary breaks when forcing --as-needed on through spec files (check out http://blog.flameeyes.eu/2008/11/14/problems-and-mitigation-strategies-for-as-needed for details).

Please note that this bug _might_ apply to -Wl,--as-needed in LDFLAGS as well; in both cases it should be fixed. Also, if this is due to the package in question not respecting user-defined LDFLAGS, you should get to fix that too.

Check the attached build log.

Thanks,
Diego




Comment 1


Diego Elio Pettenò (RETIRED)






          2008-12-07 14:42:36 UTC
        

Created attachment 174559 [details]
Build log for gnustep-apps/gwnet




Comment 2


Bernard Cafarelli






          2008-12-12 14:01:25 UTC
        

/usr/GNUstep/System/Library/Headers/SMBKit/SMBKit.h:29:26: warning: libsmbclient.h: No such file or directory

/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../../i686-pc-linux-gnu/bin/ld: warning: libsmbclient.so.0, needed by /usr/GNUstep/System/Library/Libraries/libSMBKit.so, not found (try using -rpath or -rpath-link)

Something was wrong in the net-fs/samba package, but I wonder how smbkit could compile without both these files on the system. Emerging smbkit and gwnet with forced --as-needed went fine, rebuilding samba with the same specs to test




Comment 3


Bernard Cafarelli






          2008-12-17 17:41:28 UTC
        

Rebuilding samba smbkit gwnet with forced --as-neede went fine (libsmbclient.so and headers are there and smbkit/gwnet found them), something wrong with the tinderbox?




Comment 4


Diego Elio Pettenò (RETIRED)






          2008-12-17 17:47:25 UTC
        

Likely, or some software interaction; marking WORKSFORME as long as I cannot reproduce this and identify the causes.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

