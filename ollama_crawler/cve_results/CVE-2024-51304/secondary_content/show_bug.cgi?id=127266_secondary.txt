Title: 127266 – app-shells/bash-3.0-r12 broken pipe problem
URL: https://bugs.gentoo.org/show_bug.cgi?id=127266

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 127266
app-shells/bash-3.0-r12 broken pipe problem
Last modified: 2006-04-10 22:03:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 127266 
      - app-shells/bash-3.0-r12 broken pipe problem


Summary:
app-shells/bash-3.0-r12 broken pipe problem
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-22 22:52 UTC by Magnus Damm





      Modified:
    
2006-04-10 22:03 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




testcase that sometimes trigger

              (bug.sh,287 bytes,
                application/x-shellscript)

            
2006-03-22 22:53 UTC,

            Magnus Damm




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Magnus Damm





          2006-03-22 22:52:35 UTC
        

app-shells/bash-3.0-r12 _sometimes_ returns "broken pipe" with a certain script.

Failing gentoo box with app-shells/bash-3.0-r12:
damm@cherry ~ $ ./bug.sh
./bug.sh: line 4: 16714 Done                    grep "^||$port||"
     16716                       | cut -c 6-
     16717                       | tr "|" "\n"
     16718 Broken pipe             | while read line; do
    echo line=$line;
done
damm@cherry ~ $ bash --version
GNU bash, version 3.00.16(1)-release (i686-pc-linux-gnu)
Copyright (C) 2004 Free Software Foundation
damm@cherry ~ $

The same script never seems to fail on this debian box:
magnus@tabatha:~$ ./bug.sh
magnus@tabatha:~$ bash --version
GNU bash, version 3.1.11(1)-release (i486-pc-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc.
magnus@tabatha:~$

cherry damm # emerge --info
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.16-rc6 i686)
=================================================================
System uname: 2.6.16-rc6 i686 Intel(R) Pentium(R) 4 CPU 3.20GHz
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/X11/gdm /etc/gconf /etc/init.d /etc/pam.d /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.gentoo.gr.jp http://gentoo.gg3.net/"
LINGUAS="ja en sv"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 canna cdr cjk crypt cups curl dri dvd eds emboss encode esd exif expat fam flac foomaticdb fortran gdbm gif glut gnome gpm gstreamer gtk gtk2 gtkhtml hal howl idn imlib jpeg lcms libg++ libwww mad mikmod mmx mng motif mozilla mp3 mpeg ncurses nls nptl nptlonly ogg oggvorbis opengl oss pam pdflib perl png python quicktime readline ruby sdl slang snmp spell sse sse2 ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis xml2 xmms xv zlib linguas_ja linguas_en linguas_sv userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, MAKEOPTS, PORTDIR_OVERLAY




Comment 1


Magnus Damm





          2006-03-22 22:53:40 UTC
        

Created attachment 82919 [details]
testcase that sometimes trigger




Comment 2


SpanKY






          2006-03-23 06:19:55 UTC
        

try bash-3.0-r14




Comment 3


Magnus Damm





          2006-03-23 18:01:29 UTC
        

Thanks, but it does not help.

I can still trigger the bug with bash-3.0-r14.

Is someone else able to trigger it? Or is it only me?

Maybe this problem is related to some library instead?




Comment 4


SpanKY






          2006-04-10 22:03:10 UTC
        

ok, bash-3.0 reproducibly barfs on your bug.sh for me

however, bash-3.1 works fine, so that's good enough for me ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

