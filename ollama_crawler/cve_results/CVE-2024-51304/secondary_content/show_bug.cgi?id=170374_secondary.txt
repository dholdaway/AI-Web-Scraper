Title: 170374 – sys-apps/baselayout-1.12.9 - checkfs hangs on bad magic number
URL: https://bugs.gentoo.org/show_bug.cgi?id=170374

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 170374
sys-apps/baselayout-1.12.9 - checkfs hangs on bad magic number
Last modified: 2007-03-12 07:15:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 170374 
      - sys-apps/baselayout-1.12.9 - checkfs hangs on bad magic number


Summary:
sys-apps/baselayout-1.12.9 - checkfs hangs on bad magic number
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-03-11 08:02 UTC by Joker_-_





      Modified:
    
2007-03-12 07:15 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joker_-_





          2007-03-11 08:02:11 UTC
        

udev hangs without giving any errors. There is prolly a problem with the kernel drivers but it should give me an error instead of waiting forever imo. The cpu doesnt hangs, I can ctrl+c kill the process but it's not a good idea to do so!

If I wait long enought, I get this message: 
Hangcheck: hangcheck value past margin!

Here is a short description of the computer:
MB: Abit VP6 (Via Apollo pro133x --> vt82cxxxx)
    HighPoint Raid ide controller (not in raid mode --> hpt370)
CPUs: 2x1ghz PIII
RAM: 1gb pc133
sound: sound blaster 128 (esoniq ict5880) --> es1371
Video: ATI Rage 128GL AGP
Lan: 2x SMC 10/100 --> tulip
     1x D-Link DGE 530T (Marvell chipset)

Reproducible: Always

Steps to Reproduce:
1.Boot
2.Wait
3.Cry

Actual Results:  
If I press ctrl-c, i'm getting an error. Tells me that the file system on one of my drives can't be automagically repaired:
fsck.ext3: Bad magic number in super-block while trying to open /dev/hdc [...]

then asks for my password to correct the situation, wich i tryed. I deleted my partition table, made a new one (1 partition for the whole 120gb drive) and then "formatted" it. I still get the same error.

Expected Results:  
Either continue the boot process normally or tell me what the problem is or at least what it is trying to do before hanging...

I am prolly the source of the bug as I might have forgot a driver or something but I'm realy lost. I've been searching for 8 hours by now with the help of people on #gentoo on freenode, can't get trough this. I hope someone can help me to find a way to get a step furter!

If you need any information, just ask.




Comment 1


Jakub Moc (RETIRED)






          2007-03-11 08:08:57 UTC
        

For starters, how about your /etc/fstab and baselayout version?




Comment 2


Joker_-_





          2007-03-11 11:27:47 UTC
        

Here is my fstab (handtyped since I can't get the box connected to the network):

/dev/hda1 /boot ext2 noauto,noatime 1 2
/dev/hda5 / ext3 noatime 0 1
/dev/hda2 none swap sw 0 0
/dev/hdc1 /home ext3 noatime 0 0
/dev/hdb /mnt/cdrom iso9660 noauto 0 0
/dev/fd0 /mnt/floppy auto noauto 0 0
proc /proc proc defaults 0 0
shm /dev/shm tmpfs nodev,nosuid,noexec 0,0


Here is the baselayout version:
gentoo Base System version 1.12.1




Comment 3


Jakub Moc (RETIRED)






          2007-03-11 11:31:34 UTC
        

Well, first of all upgrade to last stable baselayout at least (1.12.9) before reporting related bugs...






Comment 4


Joker_-_





          2007-03-11 11:33:53 UTC
        

By the way, I corrected the filesystem problem. Now if I ctrl+c, I can get to
the console. Looks fine when I'm there, besides the fact that my system time
seems to have 2 timers working at the same time. If I type "date" , enter,
"date", enter, (repeat a few times) I can see that there is 2 timers setting
the time, with 10- minutes difference. lets say I type date, I get 11:00, I
type it again I get 11:10, again, I get 11:00... so on.

So I can't "upgrade"... I might reload with install cd, chroot and upgrade from there?




Comment 5


Joker_-_





          2007-03-11 11:48:13 UTC
        

Well, I did chrooted from the install CD and I have entered emerge -auvDN world. I guess everything will be up to date. Let's hope it'll fixes the problem. thx for your fast reply by the way.




Comment 6


Jakub Moc (RETIRED)






          2007-03-11 11:48:47 UTC
        

As said above, reopen if current stable baselayout doesn't work for you; I fail to see why you "can't upgrade" or how's date related to it.





Comment 7


Joker_-_





          2007-03-11 19:17:06 UTC
        

94 updates later, I,m back with the same exact problem.
My baselayout is now 1.12.9




Comment 8


Jakub Moc (RETIRED)






          2007-03-11 19:19:53 UTC
        

So, is /dev/hdc1 *really* ext3? Do you have sys-fs/e2fsprogs installed (which version)? Does /sbin/fsck.ext3 -> e2fsck symlink exist?





Comment 9


Joker_-_





          2007-03-11 19:24:34 UTC
        

As I said, I corrected the hdc1 problem, and it was my bad (I made a typo). My problem is the very first I reported. it just get in an infinite loop or waits for something it can't find without giving any error message at "Letting udev process events ..." and the [OK] doesnt appear so the problem is inside that part I guess. My hdc1 defenitly is ext4 (I can see it in cfdisk /dev/hdc). e2fsck and fsck.ext3 both works fine.






Comment 10


Jakub Moc (RETIRED)






          2007-03-11 19:29:56 UTC
        

(In reply to comment #9)
> defenitly is ext4 (I can see it in cfdisk /dev/hdc).

ext4? And why do you have 

/dev/hdc1 /home ext3 noatime 0 0

in /etc/fstab? Plus what's your sys-fs/e2fsprogs version? I really ask the questions for a reason, so answer them before reopening this bug over and over again.





Comment 11


Joker_-_





          2007-03-11 19:37:29 UTC
        

First, I want you to know I'm realy sory if I make mistakes and I am not making it for purpose. English isnt my first language (As you prolly noticed) thats why I might not explain myself perfectly. I appreciate your help and your fast reply.

it's ext3, not ext4 (sry bout the typo again) My hard drives seems to load correctly. One of my network cards dont tho.

sysprogs: sys-fs/e2fsprogs-1.39




Comment 12


SpanKY






          2007-03-12 07:07:34 UTC
        

i dont really see anything for us to "fix" ... just looks like a lot of hardware/kernel troubles









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

