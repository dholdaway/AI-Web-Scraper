Title: 98586 – app-text/kaspaliste-0.96 fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=98586

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 98586
app-text/kaspaliste-0.96 fails
Last modified: 2005-07-25 06:29:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 98586 
      - app-text/kaspaliste-0.96 fails


Summary:
app-text/kaspaliste-0.96 fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Printing Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-10 11:32 UTC by Patrizio Bassi





      Modified:
    
2005-07-25 06:29 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kde









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrizio Bassi





          2005-07-10 11:32:09 UTC
        

c++ -DHAVE_CONFIG_H -I. -I. -I../.. -I/usr/kde/3.4/include -I/usr/qt/3/include -I.  -I/usr/include/postgresql -DQT_THREAD_SUPPORT  -D_REENTRANT  -DNDEBUG -DNO_DEBUG -O3 -mtune=pentium3 -march=pentium3 -pipe -fomit-frame-pointer -mmmx -msse -fno-check-new -fexceptions  -c kaspabase.cpp
kaspabase.cpp: In member function `Oid KaspaBase::getNo(Str, Oid)':
kaspabase.cpp:187: error: no matching function for call to `Str::Str(Str)'
str.h:44: note: candidates are: Str::Str(const char*)
str.h:43: note:                 Str::Str(Str&)
kaspabase.cpp:187: error: no matching function for call to `Str::Str(Str)'
str.h:44: note: candidates are: Str::Str(const char*)
str.h:43: note:                 Str::Str(Str&)
make[3]: *** [kaspabase.o] Error 1
make[3]: Leaving directory `/mnt/Dati/Gentoo/tmp/portage/kaspaliste-0.96/work/kaspaliste-0.96/kaspaliste/klib'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/mnt/Dati/Gentoo/tmp/portage/kaspaliste-0.96/work/kaspaliste-0.96/kaspaliste'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/mnt/Dati/Gentoo/tmp/portage/kaspaliste-0.96/work/kaspaliste-0.96'
make: *** [all-recursive-am] Error 2

!!! ERROR: app-text/kaspaliste-0.96 failed.
!!! Function kde_src_compile, Line 164, Exitcode 2
!!! died running emake, kde_src_compile:make
!!! If you need support, post the topmost build error, NOT this status message.



the exec line is the bad one.


Oid KaspaBase::getNo(Str tab, Oid o) {
  exec("select no from "+tab+" where oid="+oid2str(o));
  if(tuples())
    return str2oid(getValue(0, "no"));
  else
    return InvalidOid;
}

my fix, it works:

Str temp=Str("select no from ");
temp+=tab;
temp+=" where oid=";
temp+=oid2str(o);
exec(temp);

please apply.
compiled with gcc 3.4.4




Comment 1


Patrizio Bassi





          2005-07-22 02:23:26 UTC
        

provided patch works, why not applying it? 




Comment 2


Luis Medinas (RETIRED)






          2005-07-24 09:25:29 UTC
        

I have no problem here did you compile kaspaliste with arts USEFLAG ?

paste you emerge info please.




Comment 3


Patrizio Bassi





          2005-07-24 10:48:12 UTC
        

ye i have, but how's related to that? it's a db query....  
   
  emerge info 
Portage 2.0.51.22-r2 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r0, 2.6.13-rc3 
i686) 
================================================================= 
System uname: 2.6.13-rc3 i686 Pentium III (Katmai) 
Gentoo Base System version 1.6.13 
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled] 
ccache version 2.4 [disabled] 
dev-lang/python:     2.3.5-r1, 2.4.1-r1 
sys-apps/sandbox:    1.2.11 
sys-devel/autoconf:  2.13, 2.59-r7 
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6 
sys-devel/binutils:  2.16.1 
sys-devel/libtool:   1.5.18-r1 
virtual/os-headers:  2.6.11-r2 
ACCEPT_KEYWORDS="x86 ~x86" 
AUTOCLEAN="yes" 
CBUILD="i686-pc-linux-gnu" 
CFLAGS="-O3 -mtune=pentium3 -march=pentium3 -pipe -fomit-frame-pointer -mmmx 
-msse" 
CHOST="i686-pc-linux-gnu" 
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/bind /var/qmail/control /var/run/dspam /var/spool/dspam" 
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c /etc/env.d" 
CXXFLAGS="-O3 -mtune=pentium3 -march=pentium3 -pipe -fomit-frame-pointer 
-mmmx -msse" 
DISTDIR="/usr/portage/distfiles" 
FEATURES="autoconfig distlocks fixpackages sandbox sfperms strict" 
GENTOO_MIRRORS="http://gentoo.ngi.it 
http://www.die.unipd.it/pub/Linux/distributions/gentoo-sources/" 
LANG="it_IT@euro" 
LC_ALL="it_IT@euro" 
LINGUAS="it" 
PKGDIR="/usr/portage/packages" 
PORTAGE_TMPDIR="/var/tmp" 
PORTDIR="/usr/portage" 
PORTDIR_OVERLAY="/usr/local/portage" 
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage" 
USE="x86 X X509 Xaw3d a52 aac aalib accessibility acl acpi activefilter adns alsa 
apache2 apm arts audiofile avi bash-completion berkdb bidi bitmap-fonts bonobo 
bootsplash caps cdda cddb cdio cdparanoia cdr chroot clamav client codecs crypt css 
cups curl dba dbus dga dhcp directfb divx4linux djbfft dlloader edl eds emboss encode 
ethereal exif extraengine faac faad fam fbcon ffmpeg fftw flac flash foomaticdb 
foreign-package fortran freetds gcj gd gdbm geometry ggi gif gimp gimpprint gnokii 
gnome gphoto2 gpm graphviz gs gstreamer gtk gtk2 gtkhtml guile iconv idea 
imagemagick imlib innodb irda irmc jack java javascript jikes jit joystick jpeg jpeg2k 
junit justify kde kdeenablefinal kerberos lcd ldap libcaca libclamav libg++ libgda libusb 
libwww lirc live lm_sensors lzo mad mailwrapper matroska md5sum mdb mikmod 
mime mmx mmx2 mmxext mng mono motif mozcalendar mozdevelop mozilla mozsvg 
mozxmlterm mp3 mpeg mpeg2 mpeg4 mplayer mysql mysqli mythtv nagios-dns 
nagios-ntp nagios-ping nagios-ssh ncurses neXt network nls nntp no_wxgtk1 nobsh 
nopie nossp noxalan nptl nptlonly nsplugin oav odbc ogg oggvorbis opengl 
operanom2 oss pam pda pdf pdflib perl png pnp postgres ppds pthreads python 
qemu-fast qhull qt quicktime quotas readline real rrdtool rtc ruby samba scanner sdl 
server session sftplogging slang slp snortsam soap sockets socks5 softmmu softquota 
spamassassin spell sqlite3 sse ssl subject-rewrite svg svga tcltk tcpd tetex tga theora 
tiff truetype truetype-fonts trusted type1-fonts usb userlocales vidix vorbis win32codecs 
wsconvert wxwindows xanim xchatdccserver xine xinerama xml xml2 xmlrpc xmms 
xosd xpm xprint xv xvid xvm xvmc zlib linguas_it userland_GNU kernel_linux 
elibc_glibc" 
Unset:  ASFLAGS, CTARGET, LDFLAGS, MAKEOPTS 
 




Comment 4


Luis Medinas (RETIRED)






          2005-07-24 11:57:32 UTC
        

Works here with both USEFLAGS... "-arts" "arts" try this:

CFLAGS="-march=pentium3 -O2" USE="-arts" emerge kaspaliste please.
Maybe you are using CFLAGS too much agressives.




Comment 5


Patrizio Bassi





          2005-07-24 12:07:11 UTC
        

sorry, i repeat....have you read that code?  
  
how is that arts related? nothing! it's pure C++ code...  
probably flags my be too aggressive, but my fix works. 
 
and my fix is right that same line, translated in more lines. 
cpp compiler does the same job. 
 
no problem with free / delete it's a local var 
 
i don't see any problem applying that simple patch, even with my flags.. 




Comment 6


Luis Medinas (RETIRED)






          2005-07-24 16:12:14 UTC
        

you are absolutly right arts don't have anything to do with this... but i will
not make a patch for this just because it don't work with you. If you want to
create a patch be my guess. IMO it shouldn't be on the ebuild because it can
broke something out there :).

This package was tested in 3 boxes and it installs fine.




Comment 7


Patrizio Bassi





          2005-07-25 00:09:50 UTC
        

ok  
  
if you say: it's tested on 3 boxes, so i works i can say "todo bien"  
  
but if you say: i don't apply the patch because it can break something...i say..."read c++  
code!!!!!!!"  
  
however i merged it on my own...let's see next release.  
  
now i'm closing as worksforme 




Comment 8


Luis Medinas (RETIRED)






          2005-07-25 06:08:45 UTC
        

Patrizio please to the patch and attach it i will take a look at that.




Comment 9


Patrizio Bassi





          2005-07-25 06:29:31 UTC
        

sorry..it was attached  
  
 - exec("select no from "+tab+" where oid="+oid2str(o)); 
 
+ Str temp=Str("select no from ");  
+ temp+=tab;  
+ temp+=" where oid=";  
+ temp+=oid2str(o);  
+ exec(temp);  
 
 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

