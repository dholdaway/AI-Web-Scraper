Title: 146139 – app-arch/rpm-4.4.6: ./configure failed for db3
URL: https://bugs.gentoo.org/show_bug.cgi?id=146139

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 146139
app-arch/rpm-4.4.6: ./configure failed for db3
Last modified: 2006-10-17 07:11:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 146139 
      - app-arch/rpm-4.4.6: ./configure failed for db3


Summary:
app-arch/rpm-4.4.6: ./configure failed for db3
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-03 07:17 UTC by Alexander Skwar





      Modified:
    
2006-10-17 07:11 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



pva









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




config.log

              (config.log,257.70 KB,
                text/plain)

            
2006-09-03 07:18 UTC,

            Alexander Skwar




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexander Skwar





          2006-09-03 07:17:51 UTC
        

I tried to emerge rpm with the following flags:

It fails:

checking for i686-pc-linux-gnu-strip... i686-pc-linux-gnu-strip
checking for i686-pc-linux-gnu-strip... /usr/bin/i686-pc-linux-gnu-strip
checking for a BSD-compatible install... /bin/install -c
checking for i686-pc-linux-gnu-cc... i686-pc-linux-gnu-cc
checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log' for more details.
mv: cannot stat `Makefile': No such file or directory
cat: Makefile.orig: No such file or directory
mv: cannot stat `db.h': No such file or directory
cat: db.h.orig: No such file or directory
make: *** No rule to make target `listobjs'.  Stop.
configure: error: ./configure failed for db3

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /tmp/bauen/portage/rpm-4.4.6/work/rpm-4.4.6/config.log

!!! ERROR: app-arch/rpm-4.4.6 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  rpm-4.4.6.ebuild, line 55:   Called econf '--enable-posixmutexes' '--without-javaglue' '--without-selinux' '--without-python' '--without-apidocs' '--without-perl' '--without-sqlite' '--enable-nls'
  ebuild.sh, line 539:   Called die

!!! econf failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

In config.log (which I'll attach), I find:

config.status:1318: executing depfiles commands
config.status:1318: executing po-directories commands
config.status:1318: executing default commands
configure:46299: === configuring in file (/tmp/bauen/portage/rpm-4.4.6/work/rpm-4.4.6/file)
configure:46402: running /bin/sh ./configure --prefix=/usr  '--host=i686-pc-linux-gnu' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' '--localstatedir=/var/lib' '--enable-posixmutexes' '--without-javaglue' '--without-selinux' '--without-python' '--without-apidocs' '--without-perl' '--without-sqlite' '--enable-nls' '--build=i686-pc-linux-gnu' 'build_alias=i686-pc-linux-gnu' 'host_alias=i686-pc-linux-gnu' 'CXXFLAGS=-O2 -mtune=pentium-m -pipe -fomit-frame-pointer' 'LDFLAGS=-Wl,-O1' 'CFLAGS=-O2 -mtune=pentium-m -pipe -fomit-frame-pointer' --cache-file=/dev/null --srcdir=.
configure:46299: === configuring in db3 (/tmp/bauen/portage/rpm-4.4.6/work/rpm-4.4.6/db3)
configure:46402: running /bin/sh ./configure --prefix=/usr  '--host=i686-pc-linux-gnu' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' '--localstatedir=/var/lib' '--enable-posixmutexes' '--without-javaglue' '--without-selinux' '--without-python' '--without-apidocs' '--without-perl' '--without-sqlite' '--enable-nls' '--build=i686-pc-linux-gnu' 'build_alias=i686-pc-linux-gnu' 'host_alias=i686-pc-linux-gnu' 'CXXFLAGS=-O2 -mtune=pentium-m -pipe -fomit-frame-pointer' 'LDFLAGS=-Wl,-O1' 'CFLAGS=-O2 -mtune=pentium-m -pipe -fomit-frame-pointer' --cache-file=/dev/null --srcdir=.
configure:46407: error: ./configure failed for db3

I've got the following db packages installed:

alexander@blatt ~ $ ls -lad /var/db/pkg/sys-?ibs/*db*
drwxr-xr-x 2 root root 4096  7. May 14:43 /var/db/pkg/sys-libs/db-1.85-r3
drwxr-xr-x 2 root root 4096  3. Sep 15:24 /var/db/pkg/sys-libs/db-3.2.9-r11
drwxr-xr-x 2 root root 4096  6. May 10:28 /var/db/pkg/sys-libs/db-4.2.52_p4
drwxr-xr-x 2 root root 4096  2. Sep 08:32 /var/db/pkg/sys-libs/db-4.3.29-r2
drwxr-xr-x 2 root root 4096  6. May 10:30 /var/db/pkg/sys-libs/gdbm-1.8.3-r2
drwxr-xr-x 2 root root 4096  6. May 16:30 /var/db/pkg/sys-libs/pwdb-0.62

alexander@blatt ~ $ locate -r '/db.h$'
/usr/include/db.h
/usr/include/db1/db.h
/usr/include/db3/db.h
/usr/include/db4.2/db.h
/usr/include/db4.3/db.h
/usr/include/kpathsea/db.h
/usr/include/rpm/db.h
/usr/include/wx-2.6/wx/db.h
/usr/src/linux-2.6.17-suspend2-r4/include/config/ieee1394/oui/db.h




Comment 1


Alexander Skwar





          2006-09-03 07:18:33 UTC
        

Created attachment 95836 [details]
config.log

alexander@blatt ~ $ emerge --info
Portage 2.1.1_rc1-r2 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-suspend2-r4.044.no-kernel-alsa i686)
=================================================================
System uname: 2.6.17-suspend2-r4.044.no-kernel-alsa i686 Intel(R) Celeron(R) M processor  1.50GHz
Gentoo Base System version 1.12.4
Last Sync: Fri, 01 Sep 2006 19:50:01 +0000
ccache version 2.4 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.4-r1, 2.4.3-r3
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=pentium-m -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -mtune=pentium-m -pipe -fomit-frame-pointer"
DISTDIR="/Gentoo/Portage/distfiles"
EMERGE_DEFAULT_OPTS="--alphabetical"
FEATURES="autoconfig buildpkg ccache collision-protect distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="        http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/   http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/    ftp://ftp.tu-clausthal.de/pub/linux/gentoo/     http://distro.ibiblio.org/pub/linux/distributions/gentoo/       ftp://distro.ibiblio.org/pub/linux/distributions/gentoo         http://distfiles.gentoo.org/ "
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/Gentoo/Portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/Gentoo/Portage/build"
PORTDIR="/Gentoo/Portage/tree"
PORTDIR_OVERLAY="/Gentoo/Portage/local-tree/misc"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 GAPING_SECURITY_HOLE X acpi alsa amd apache2 apm arts artswrappersuid async avi bash-completion bdf berkdb bitmap-fonts bluetooth bootsplash cairo caps cardbus ccache cdda cddb cdio cdparanoia cdr cdrom cle266 cli crypt css curlwrappers dbus devmap dillo divx4linux dlloader dri dvd dvdread elibc_glibc emoticon esd exif fam fbcon fbdev firefox fping freetype gdbm gif gnokii gnome gstreamer gtk gtk2 hal hpn icc id3 idn imap imlib imlib2 input_devices_evdev input_devices_keyboard input_devices_mouse insecure-drivers insecure-savers isdnlog javascript jikes jpeg kde kdeenablefinal kdehiddenvisibility kernel_linux libedit libnotify libwww linguas_de linuxthreads-tls logrotate lynxkeymap mad madwifi maildir matroska mbox mmx mmxext mozilla moznoirc mozsvg mp3 mpeg mpeg2 mpeg4 mplayer multicall musicbrainz ncurses netboot network new-login nfs nis nls no-old-linux no-suexec noantlr nobcel nobeanutils nobsf nobsh nocd nocommonslogging nocommonsnet nodrm nogg nogulm nojsch nojython nolog4j nomac nooro nopri norhino noxalan noxerces nozaptel nptl nsplugin offensive ogg opengl openssh pam_console pam_timestamp passfile password patented pccts pcmcia pcre perl perlsuid pic player png pnp pppd qt3 qt4 quicktime rar readline real recode reflection reiserfs sdl sendfile sensord session sftp sms spell spf spl sse sse2 ssl startup-notification stream subp subtitles suid symlink sysfs syslog tiff transcode truetype truetype-fonts trusted type1-fonts udev underscores unichrome unicode unsafe usb userland_GNU utf8 uudeview video_cards_fbdev video_cards_vesa video_cards_vga video_cards_via vim vim-pager vlm vorbis wifi win32codecs wma123 x11vnc xinetd xml xmms xorg xpm xscreensaver xv xvid xvmc zlib"
Unset:  CTARGET, INSTALL_MASK, LC_ALL, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Alexander Skwar





          2006-09-03 07:19:15 UTC
        

(In reply to comment #0)
> I tried to emerge rpm with the following flags:

[ebuild     U ] app-arch/rpm-4.4.6 [4.4.1-r1] USE="-doc nls -perl% -python -sqlite%" 0 kB





Comment 3


Alexander Skwar





          2006-09-03 09:58:50 UTC
        

I now re-emerged the sys-libs/db packages I had and also installed the other db packages which I did not yet have. So, I've got now:

alexander@blatt ~ $ ls -lad /var/db/pkg/sys-l*/db*
drwxr-xr-x 2 root root 4096  3. Sep 16:27 /var/db/pkg/sys-libs/db-1.85-r3
drwxr-xr-x 2 root root 4096  3. Sep 16:31 /var/db/pkg/sys-libs/db-3.2.9-r11
drwxr-xr-x 2 root root 4096  3. Sep 16:43 /var/db/pkg/sys-libs/db-4.0.14-r3
drwxr-xr-x 2 root root 4096  3. Sep 17:03 /var/db/pkg/sys-libs/db-4.1.25_p2
drwxr-xr-x 2 root root 4096  3. Sep 17:19 /var/db/pkg/sys-libs/db-4.2.52_p4-r2
drwxr-xr-x 2 root root 4096  3. Sep 17:36 /var/db/pkg/sys-libs/db-4.3.29-r2

And now rpm compiles.




Comment 4


Stefan Schweizer (RETIRED)






          2006-09-12 17:18:29 UTC
        

so which version exactly is needed? Want to contribute an ebuild patch? :)




Comment 5


Peter Volkov (RETIRED)






          2006-10-17 07:11:24 UTC
        

Alexander: the differencies as I see them are:

you had installed
drwxr-xr-x 2 root root 4096  6. May 10:28 /var/db/pkg/sys-libs/db-4.2.52_p4

you have installed
> drwxr-xr-x 2 root root 4096  3. Sep 16:43 /var/db/pkg/sys-libs/db-4.0.14-r3
> drwxr-xr-x 2 root root 4096  3. Sep 17:03 /var/db/pkg/sys-libs/db-4.1.25_p2
> drwxr-xr-x 2 root root 4096  3. Sep 17:19 /var/db/pkg/sys-libs/db-4.2.52_p4-r2

So what happens if you unmerge db-4.0.14-r3 and db-4.1.25_p2? Can you reproduce the bug? Also I think it is not a problem as I have the following versions of db on my system: 1.85-r3 3.2.9-r11 4.3.29-r2 and I can compile rpm fine.

Please, reopen bug if you can reproduce the problem. Currently I think the best solution is to close the bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

