Title: 890254 – sys-fs/lvm2 lvm use-flag is a system breaker
URL: https://bugs.gentoo.org/show_bug.cgi?id=890254

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 890254
sys-fs/lvm2 lvm use-flag is a system breaker
Last modified: 2023-01-15 15:20:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 890254 
      - sys-fs/lvm2 lvm use-flag is a system breaker


Summary:
sys-fs/lvm2 lvm use-flag is a system breaker
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-01-08 20:02 UTC by Étienne Buira





      Modified:
    
2023-01-15 15:20 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



gentoo
hydrapolic
ionen
jstein
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Étienne Buira





          2023-01-08 20:02:28 UTC
        

Hi,

Beyond the dubious name for this use-flag ('tools' would have been better IMHO), it is off by default, and will break many systems.
Please set it to enabled by default (and renaming might be a good idea).

Regards

Reproducible: Always

Steps to Reproduce:
1. emerge sys-fs/lvm2
Actual Results:  
Those who need lvm service at boot will have their system broken

Expected Results:  
No unintended churn, especially breaking ones.




Comment 1


Ionen Wolkens






          2023-01-08 20:25:06 UTC
        

You are supposed to read your news before updating, and so not break your system in the process:

https://www.gentoo.org/support/news-items/2022-11-19-lvm2-default-USE-flags.html




Comment 2


Jonas Stein






          2023-01-09 02:02:37 UTC
        

The news item should help you here. 
Please open a new ticket with log files if there is something else broken.

This includes
* the complete build.log as attachment and
* a paste of the emerge info 
as described on https://wiki.gentoo.org/wiki/Attach_the_logs_to_the_bug_ticket




Comment 3


Larry the Git Cow






          2023-01-15 15:12:33 UTC
        

The bug has been referenced in the following commit(s):

https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=793e2d209234d2e90ca28f37f5474d619b455f9f

commit 793e2d209234d2e90ca28f37f5474d619b455f9f
Author:     Sam James <sam@gentoo.org>
AuthorDate: 2023-01-15 15:10:34 +0000
Commit:     Sam James <sam@gentoo.org>
CommitDate: 2023-01-15 15:12:24 +0000

    sys-fs/lvm2: add pkg_postinst warning for USE=lvm -> USE=-lvm
    
    I was reluctant to do this because we already published a news item
    (and it's the critical news item mechanism for a reason) but if it saves
    someone some pain, it's worth it, and it's cheap to do.
    
    Show a warning for USE=-lvm -> USE=lvm or for fresh installs with USE=-lvm
    as a one-off.
    
    But warnings are not a substitute for reading news items, so this is mostly
    for the benefit of new users who might be confused about how to get the tools
    they're familiar with.
    
    Bug: https://bugs.gentoo.org/718910
    Bug: https://bugs.gentoo.org/890254
    Signed-off-by: Sam James <sam@gentoo.org>

 ...m2-2.03.17-r1.ebuild => lvm2-2.03.17-r2.ebuild} | 39 ++++++++++++++++------
 1 file changed, 28 insertions(+), 11 deletions(-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

