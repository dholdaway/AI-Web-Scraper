Title: 404485 – app-office/lyx-2.0.2 - German spell checker does not work
URL: https://bugs.gentoo.org/show_bug.cgi?id=404485

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 404485
app-office/lyx-2.0.2 - German spell checker does not work
Last modified: 2012-02-21 13:21:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 404485 
      - app-office/lyx-2.0.2 - German spell checker does not work


Summary:
app-office/lyx-2.0.2 - German spell checker does not work
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-02-19 07:25 UTC by Kai Wüstermann





      Modified:
    
2012-02-21 13:21 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



app-dicts+disabled
cjk
ps
tex









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




de-frami.patch

              (spell.check.patch,550 bytes,
                patch)

            
2012-02-21 13:21 UTC,

            pavel sanda




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kai Wüstermann





          2012-02-19 07:25:17 UTC
        

The German spell checker does not work in lyx-2.0.2. I use app-text/hunspell-1.3.2-r3 with the dictionaries  app-dicts/myspell-de-20080915-r1 and app-dicts/myspell-en-20081002. This works for LibreOffice and firefox.

In lyx I choose hungspell as spell checker. The path to the dictionaries is /usr/share/lyx/dicts which links to /usr/share/myspell.

The English spell checker works in lyx.

Reproducible: Always




Portage 2.1.10.44 (default/linux/amd64/10.0/desktop, gcc-4.5.3, glibc-2.13-r4, 3.1.10-gentoo-r1 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.1.10-gentoo-r1-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q8200_@_2.33GHz-with-gentoo-2.0.3
Timestamp of tree: Fri, 17 Feb 2012 18:15:02 +0000
ccache version 3.1.6 [enabled]
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2-r3, 3.1.4-r3
dev-util/ccache:          3.1.6
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.0.3
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.10.3, 1.11.1
sys-devel/binutils:       2.21.1-r1
sys-devel/gcc:            4.5.3-r1
sys-devel/gcc-config:     1.4.1-r1
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.13-r4
Repositories: gentoo
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA Oracle-BCLA-JavaSE PUEL dlj-1.1 AdobeFlash-10.1 skype-eula"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/latex2html /usr/share/texmf-site/tex/latex/html /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=nocona -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs ccache distlocks ebuild-locks fixlafiles news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="de en"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync1.de.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 amr berkdb bluetooth branding bzip2 cairo cdda cdr cli consolekit cracklib crypt cups cupsddk cxx dbus device-mapper dri dts dvd dvdr dvi emboss encode exif fam ffmpeg firefox flac fortran gdbm gdu gif gimp glitz gnutls gpm gstreamer gtk hddtemp hpijs hunspell iconv ipv6 java jpeg latex lcms libnotify lm_sensors lyx mad midi mmx mng modules mono mp3 mp4 mpeg mtp mudflap multilib nautilus ncurses nls nptl nptlonly nsplugin nvidia odbc ogg opengl openmp pam pango pcre pdf pmu png policykit ppds pppd python qt3support readline scanner sdl session spell sse sse2 ssl startup-notification svg symlink sysfs tcpd theora tiff truetype udev unicode usb vorbis wmf x264 xcb xml xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias auth_digest" CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

app-office/lyx-2.0.2 was built with the following:
USE="X cups hunspell latex (multilib) nls svg -aspell -debug -dia -docbook -dot -enchant -gnumeric -html -luatex -monolithic-build -rcs -rtf -subversion -xetex" LINGUAS="de en -ar -ca -cs -da -el -es -eu -fi -fr -gl -he -hu -ia -id -it -ja -nb -nn -pl -pt -ro -ru -sk -sr -sv -tr -uk -zh_CN -zh_TW"


app-text/hunspell-1.3.2-r3 was built with the following:
USE="(multilib) ncurses nls readline -static-libs" LINGUAS="de en -af -bg -ca -cs -cy -da -el -eo -es -et -fo -fr -ga -gl -he -hr -hu -ia -id -it -ku -lt -lv -mk -ms -nb -nl -nn -pl -pt -ro -ru -sk -sl -sv -sw -tn -uk -zu"


app-dicts/myspell-de-20080915-r1 was built with the following:
USE="(multilib)"


app-dicts/myspell-en-20081002 was built with the following:
USE="(multilib)"

------------------------------------------------------------------

ls /usr/share/myspell 
de_AT_frami.aff  de_DE_frami.aff    en_AU.aff  en_GB.aff      en_NZ.aff  en_ZA.aff       hyph_en_GB.dic   th_de_DE_v2.idx
de_AT_frami.dic  de_DE_frami.dic    en_AU.dic  en_GB.dic      en_NZ.dic  en_ZA.dic       th_de_CH_v2.dat  th_en_US_v2.dat
de_CH_frami.aff  dictionary.lst.de  en_CA.aff  en_GB-oed.aff  en_US.aff  hyph_de_CH.dic  th_de_CH_v2.idx  th_en_US_v2.idx
de_CH_frami.dic  dictionary.lst.en  en_CA.dic  en_GB-oed.dic  en_US.dic  hyph_de_DE.dic  th_de_DE_v2.dat

--------------------------------------------------------------------

cat /usr/share/myspell/dictionary.lst.de 
# Autogenerated by app-dicts/myspell-de-20080915
DICT de DE de_DE_frami
DICT de AT de_AT_frami
DICT de CH de_CH_frami
HYPH de DE hyph_de_DE
HYPH de CH hyph_de_CH
THES de DE th_de_DE_v2
THES de CH th_de_CH_v2

------------------------------------------------------------..

LaTeX source generated by lyx:
%% LyX 2.0.2 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[ngerman]{article}
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage{color}
\usepackage{url}
\usepackage{graphicx}

\makeatletter




Comment 1


pavel sanda





          2012-02-20 13:50:23 UTC
        

i see. the problem is that lyx suppose de_DE filename and de_DE_frami is installed intead. 

now the question is whether it is bug that lyx doesn't know about _frami extension or that myspell-de should make link or install under the name de_DE?




Comment 2


Kai Wüstermann





          2012-02-20 14:19:17 UTC
        

I did in /usr/share/myspell:

ln -s de_DE_frami.dic de_DE.dic
ln -s de_DE_frami.aff de_DE.aff

Now the spell checker works in German too.

For me the bug is resolved. 
Thank you!




Comment 3


pavel sanda





          2012-02-21 13:20:09 UTC
        

for the record, the following dictionaries will have troubles:
en_GB-oed.dic de_??_frami.dic de_??_1901.dic hu_HU_u8.dic ia.dic la.dic ru_RU_ie.dic ru_RU_yo.dic

attaching patch for german frami dictionaries; its not general solution.
either parsing of dictionary.lst.LANG needs to be done or myspell-dictionaries must create soft-links in the form of: xx_YY.dic/aff 

from user point of view softlinks for .dic/aff created in ~/.lyx/dicts/ will help as well.




Comment 4


pavel sanda





          2012-02-21 13:21:40 UTC
        

Created attachment 302695 [details, diff]
de-frami.patch









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

