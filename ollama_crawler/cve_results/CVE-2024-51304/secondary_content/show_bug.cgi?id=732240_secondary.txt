Title: 732240 – sys-boot/mbr-gpt-0.0.1-r1 fails to compile: boot.S:348:6: error: invalid .org offset '440' (at offset '450')
URL: https://bugs.gentoo.org/show_bug.cgi?id=732240

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 732240
sys-boot/mbr-gpt-0.0.1-r1 fails to compile: boot.S:348:6: error: invalid .org offset '440' (at offset '450')
Last modified: 2022-12-05 05:23:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 732240 
      - sys-boot/mbr-gpt-0.0.1-r1 fails to compile: boot.S:348:6: error: invalid .org offset '440' (at offset '450')


Summary:
sys-boot/mbr-gpt-0.0.1-r1 fails to compile: boot.S:348:6: error: invalid .org...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Robin Johnson








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-07-11 19:08 UTC by Agostino Sarubbo





      Modified:
    
2022-12-05 05:23 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



treecleaner









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,7.90 KB,
                text/plain)

            
2020-07-11 19:08 UTC,

            Agostino Sarubbo




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2020-07-11 19:08:29 UTC
        

https://blogs.gentoo.org/ago/2020/07/04/gentoo-tinderbox/

Issue: sys-boot/mbr-gpt fails to compile.
Discovered on: amd64  (internal ref: tinderbox)

NOTE:
This machine uses a clang/LLVM toolchain.
If you think that this issue is strictly related to clang/LLVM please block bug 408963. If you think that this issue isstrictly related to the LLD linker, please block bug 731004.




Comment 1


Agostino Sarubbo






          2020-07-11 19:08:34 UTC
        

Created attachment 648922 [details]
build.log

build log and emerge --info




Comment 2


Mike Gilbert






          2022-01-16 20:03:49 UTC
        

Perhaps we should last rite this unmaintained package?

sys-boot/syslinux provides a GPT-compatible MBR image.




Comment 3


David Seifert






          2022-01-17 09:01:29 UTC
        

(In reply to Mike Gilbert from comment #2)
> Perhaps we should last rite this unmaintained package?
> 
> sys-boot/syslinux provides a GPT-compatible MBR image.

I second this.




Comment 4


Robin Johnson









          2022-12-05 05:23:32 UTC
        

syslinux GPT-MBR doesn't boot on my test box, and mbr-gpt does still.

I also can't reproduce this error at all.

$ CC=clang ebuild mbr-gpt-0.0.1-r2.ebuild clean install
 * mbr-gpt_0.0.1.tar.gz BLAKE2B SHA512 size ;-) ...                                                                                                                          [ ok ]
>>> Unpacking source...
>>> Unpacking mbr-gpt_0.0.1.tar.gz to /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/work
>>> Source unpacked in /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/work
>>> Preparing source in /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/work/mbr-gpt-0.0.1 ...
make -j14 -l12 clean 
rm -f mbr boot.elf *~
>>> Source prepared.
>>> Configuring source in /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/work/mbr-gpt-0.0.1 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/work/mbr-gpt-0.0.1 ...
make -j14 -l12 CC=clang 
clang -Wall -m32 -Wl,--no-dynamic-linker -nostdinc -nostdlib -Wl,-N,-Ttext,0x600 -DRELOC_ADDR=0x600 boot.S -o boot.elf
objcopy -O binary -R .note -R .comment boot.elf mbr
>>> Source compiled.
>>> Test phase [not enabled]: sys-boot/mbr-gpt-0.0.1-r2

>>> Install sys-boot/mbr-gpt-0.0.1-r2 into /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/image
>>> Completed installing sys-boot/mbr-gpt-0.0.1-r2 into /var/tmp/portage-tmpfs/portage/sys-boot/mbr-gpt-0.0.1-r2/image

 * Final size of build directory: 68 KiB
 * Final size of installed tree:  16 KiB

 * QA Notice: RESTRICT=binchecks prevented checks on these ELF files:
 * /usr/lib/mbr-gpt/boot.elf









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

