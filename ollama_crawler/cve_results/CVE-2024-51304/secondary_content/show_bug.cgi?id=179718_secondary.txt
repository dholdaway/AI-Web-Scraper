Title: 179718 – fortran use-flag breaks sys-devel/gcc-4.1.2 for d and mudflap
URL: https://bugs.gentoo.org/show_bug.cgi?id=179718

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179718
fortran use-flag breaks sys-devel/gcc-4.1.2 for d and mudflap
Last modified: 2007-12-09 23:06:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179718 
      - fortran use-flag breaks sys-devel/gcc-4.1.2 for d and mudflap


Summary:
fortran use-flag breaks sys-devel/gcc-4.1.2 for d and mudflap
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-25 06:45 UTC by Claes Mogren





      Modified:
    
2007-12-09 23:06 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge log gcc-4.1.2

              (sys-devel_gcc-4.1.2_20070524-081645.log.gz,101.24 KB,
                application/octet-stream)

            
2007-05-25 06:47 UTC,

            Claes Mogren




Details





emerge log gcc-4.1.2 d

              (sys-devel_gcc-4.1.2_20070524-110146.log.gz,231.89 KB,
                application/octet-stream)

            
2007-05-25 06:48 UTC,

            Claes Mogren




Details





Emerge info

              (emerge.info,3.83 KB,
                text/plain)

            
2007-05-25 06:49 UTC,

            Claes Mogren




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Claes Mogren





          2007-05-25 06:45:22 UTC
        

gcc-4.1.2 does not compile with mudflap or d when fortran is enabled. Besides these three I have doc, gtk and nls enabled in the use flags. I've tested the following combinations: 

1) Builds fine with USE="fortran"  ("doc gtk nls" are enable in all tests)

2) Fails with USE="fortran mudflap"

3) Fails with USE="fortran d"

4) Compiles with USE="-fortran d mudflap"

My problem is that I need fortran for blas-atlas used by octave.

Reproducible: Always

Steps to Reproduce:
1. USE="fortran mudflap" emerge '=sys-devel/gcc-4.1.2'
2. Watch it fail on string-inst.lo (Log attatched)
3. USE="fortran d" emerge '=sys-devel/gcc-4.1.2'
4. Watch it fail on _conjg_c10.lo (Log attatched)
Actual Results:  
Compiles fine when fortran is disabled

Expected Results:  
To be able to have USE="fortran d mudflap" when compiling gcc-4.1.2

The logs are fairly large, so they're gzipped and attached.
(Should this be filed upstream somehow?)




Comment 1


Claes Mogren





          2007-05-25 06:47:58 UTC
        

Created attachment 120246 [details]
emerge log gcc-4.1.2

Failure with fortran and mudflap enabled




Comment 2


Claes Mogren





          2007-05-25 06:48:57 UTC
        

Created attachment 120247 [details]
emerge log gcc-4.1.2 d

Failure with fortran and d




Comment 3


Claes Mogren





          2007-05-25 06:49:55 UTC
        

Created attachment 120248 [details]
Emerge info




Comment 4


Chris Smith





          2007-05-27 22:15:35 UTC
        

I had a similar error with a system that needed many updates, and after I upgraded some other packages and it compiled fine. Sometimes I find that this to be the case as I usually use emwrap.sh to just update the toolchain, when at times more is needed before the toolchain can be properly rebuilt.
Possible suspects (some of the packages I updated):
sys-libs/com_err
dev-libs/mpfr
sys-devel/m4

YMMV

Chris





Comment 5


Mark Loeser (RETIRED)






          2007-12-08 02:25:24 UTC
        

Claes:  I just tried this on a few systems with the USE flags you said cause problems and I did not encounter any.  Are you sure that this fails in the same spot every time?  Looking at the logs it looks really strange since the command works a few lines before, and then randomly it isn't there?




Comment 6


Claes Mogren





          2007-12-09 23:06:00 UTC
        

I'm using gcc-4.2.2, and it compiles just fine with both fortran and mudflap enabled. (Doesn't seem to have a d use-flag)
It did fail at the same place every time back then, but since it works for you, and newer versions of gcc builds fine here too, I guess all is well. Thanks for all your good work! :-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

