Title: 264808 – app-misc/livecd-tools - support disabling the "Updating inittab" Feature
URL: https://bugs.gentoo.org/show_bug.cgi?id=264808

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 264808
app-misc/livecd-tools - support disabling the "Updating inittab" Feature
Last modified: 2024-02-27 19:06:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 264808 
      - app-misc/livecd-tools - support disabling the "Updating inittab" Feature


Summary:
app-misc/livecd-tools - support disabling the "Updating inittab" Feature
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Release Media




Classification:

Unclassified




Component:

LiveCD/DVD/USB

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       enhancement
      


Assignee:

Gentoo Release Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-03 22:24 UTC by Timothy Golden





      Modified:
    
2024-02-27 19:06 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



bkohler
zerochaos









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timothy Golden





          2009-04-03 22:24:07 UTC
        

During CD development for an application I a writting, I would like to start via inittab  When the CD is booted the lines I put in inittab are commented out and replaced with generic lines.  I would like a way easily to disable this feature, either a USE flag, or a kernel argument or setting in a configuration file would be sufficiant.

DVD/CD build following instructions on this webpage. 
http://en.gentoo-wiki.com/wiki/Build_Your_Own_LiveCD_or_LiveDVD

Reproducible: Always

Steps to Reproduce:
1. Create a development chroot using stage3 tarball
2. Update develpment chroot using emerge --update --deep -av world
3. create a subdirectory to hold the CD-rom's root filesystem
4. install needed packages include baselayout 1 and livecd-tools on root filesystem using "USE=/my/cdroot" emerge packages
5. use genkernel to build a kernel
6. copy modules to cd root subdirectory
7. Change /etc/inittab to automaticly start a program as described in my first post
8. using mksquashfs create a squashfs file containing the cd root directory
9. Configure grub to enable things like hardware scanning make sure to include cdboot in the grub command line.
10. using mkisofs create a bootable CD
11. boot CD
12. You will see "updating inittab [OK]" durring boot up
13. Check your /etc/inittab, you will notice all the entries you changed are commented out and new ones have been added, see first post for details. 
Actual Results:  
My desired inittab is 

c1:12345:respawn:/sbin/agetty -nl /usr/bin/appliation_startup.sh 38400 tty1 linux
c2:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty2 linux
c3:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty3 linux
c4:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty4 linux
c5:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty5 linux
c6:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty6 linux

When I boot the CD this is commented out and this is added.
c1:12345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty1 linux
c2:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty2 linux
c3:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty3 linux
c4:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty4 linux
c5:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty5 linux
c6:2345:respawn:/sbin/agetty -nl /bin/bashlogin 38400 tty6 linux

Expected Results:  
The ability to easily enable/disable this feature.

I am currently devoloping using baselayout-1 a workarround has been to edit /bin/rc and comment out the following lines.

                ebegin "Updating inittab"
                livecd_fix_inittab
                eend $?




Comment 1


Andrew Gaffney (RETIRED)






          2009-04-04 19:22:16 UTC
        

Personally, I'd think it would make more sense to poke the baselayout people add a /proc/cmdline flag to not call the function in the first place.




Comment 2


Timothy Golden





          2009-04-04 22:23:41 UTC
        

I already did and I was referred to send the request to the livecd people.  This is the forum posting.

http://forums.gentoo.org/viewtopic-t-751673.html




Comment 3


Andrew Gaffney (RETIRED)






          2009-04-04 23:16:36 UTC
        

I see your point, but I'm not sure yet whether we will actually address this issue. The people that maintain livecd-tools (as well as a number of other tools used for building of release materials) are busy people and have our own priorities.

In the mean time, there's a few things here you can do yourself:

* patch livecd-tools for your own use
* don't use livecd-tools at all
* realize it's intended for use by release engineering to build official gentoo
  release media and stop complaining

It's also possible that you can work around this issue relatively simply by "fixing" the inittab in /etc/conf.d/local.start and telling init to reload.




Comment 4


Timothy Golden





          2009-04-05 23:07:35 UTC
        

I have already used the work around (see first posting) for my application CD.  I never expected it to be a high priority.  Some of the other functions such as hardware detection are important to my application CD not using the tools completely would not work.  

It is just a "Wish List" type item, and on the forums It was recommended that I make the request here.




Comment 5


Rick Farina (Zero_Chaos)






          2015-12-08 04:42:30 UTC
        

this is already optional, just don't start the fixinittab script at boot.  I have fixinittab|del in my spec files for just this reason.




Comment 6


William Hubbs






          2015-12-08 23:31:39 UTC
        

Per @jmbsvicetto:
I am re-opening this bug. We need to look further into the  uses of
fixinittab and determine if we still need it at all. It may be a relic
we can remove from livecd-tools.




Comment 7


Ben Kohler






          2024-02-27 19:06:40 UTC
        

(In reply to William Hubbs from comment #6)
> Per @jmbsvicetto:
> I am re-opening this bug. We need to look further into the  uses of
> fixinittab and determine if we still need it at all. It may be a relic
> we can remove from livecd-tools.

At the very least it's used for tty autologin that we depend on.  It also sets up various types of serial/ilom consoles for other arches.

Re-open if you think there's anything to do here, and give a hint as to what that should be.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

