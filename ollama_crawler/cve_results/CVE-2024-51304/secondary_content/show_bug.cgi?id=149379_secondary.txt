Title: 149379 – [cross-mingw32/runtime] fails at mingwthrd.exp with illegal relocation type 28001 with -march=prescott
URL: https://bugs.gentoo.org/show_bug.cgi?id=149379

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 149379
[cross-mingw32/runtime] fails at mingwthrd.exp with illegal relocation type 28001 with -march=prescott
Last modified: 2010-06-20 03:44:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 149379 
      - [cross-mingw32/runtime] fails at mingwthrd.exp with illegal relocation type 28001 with -march=prescott


Summary:
[cross-mingw32/runtime] fails at mingwthrd.exp with illegal relocation type 2...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

228153

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-09-28 00:27 UTC by Martin von Gagern





      Modified:
    
2010-06-20 03:44 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



EckosGentoo
luksan
n-roeser









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




cross-mingw32-mingw-runtime.log

              (cross-mingw32-mingw-runtime.log,62.66 KB,
                text/plain)

            
2006-09-28 00:31 UTC,

            Martin von Gagern




Details





cross-mingw32-info.log

              (cross-mingw32-info.log,4.32 KB,
                text/plain)

            
2006-09-28 00:32 UTC,

            Martin von Gagern




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2006-09-28 00:27:30 UTC
        

Encountered this when running "FEATURES=nostrip crossdev -t mingw32" trying to work around bug 148437. Error message reads like this:

mingw32-gcc -Wl,--base-file=mingwthrd.base mingwthrd.exp -B./ -mdll  -Wl,--image-base,0x6FBC0000 -Wl,--entry,_DllMainCRTStartup@12 mthr.o mthr_init.o -Lmingwex \
		-o mingwthrd_dummy.exe
/usr/libexec/gcc/mingw32/ld: mingwthrd.exp: warning: illegal symbol index 3670016 in relocs
/usr/libexec/gcc/mingw32/ld: mingwthrd.exp: warning: illegal symbol index 1851850755 in relocs
/usr/libexec/gcc/mingw32/ld: mingwthrd.exp: illegal relocation type 28001 at address 0x4
collect2: ld returned 1 exit status
make: *** [mingwthrd.def] Error 1




Comment 1


Martin von Gagern





          2006-09-28 00:31:51 UTC
        

Created attachment 98290 [details]
cross-mingw32-mingw-runtime.log




Comment 2


Martin von Gagern





          2006-09-28 00:32:32 UTC
        

Created attachment 98291 [details]
cross-mingw32-info.log




Comment 3


SpanKY






          2006-09-28 00:41:36 UTC
        

try it with simpler CFLAGS ... like just -O2




Comment 4


Martin von Gagern





          2006-09-28 01:14:02 UTC
        

(In reply to comment #3)
> try it with simpler CFLAGS ... like just -O2

"CFLAGS=-O2 CXXFLAGS=-O2 FEATURES=nostrip crossdev -t mingw32" works :-)
I'd never have thought -march likely to break such things.
Anyway, thanks a lot.
Probably should do some strip-flags in the ebuild to handle this automatically.




Comment 5


SpanKY






          2006-09-28 01:58:40 UTC
        

it is a bug in the toolchain; stripping flags just ignores the problem




Comment 6


Martin von Gagern





          2007-08-03 07:54:48 UTC
        

(In reply to comment #5)
> it is a bug in the toolchain; stripping flags just ignores the problem

Will this bug be addressed here by the Gentoo toolchain devs, or should I file a new bug somewhere else? If so, where?

If you are not going to fix it in the near future, a nice comment and a flag strip might still be a valid temporary workaround, so people won't have to override the flags every time they update their mingw cross compiler.




Comment 7


Keith R.





          2008-02-27 13:47:50 UTC
        

I get the same error :(




Comment 8


SpanKY






          2008-06-19 00:52:54 UTC
        

*** Bug 228153 has been marked as a duplicate of this bug. ***




Comment 9


Mark Loeser (RETIRED)






          2009-05-03 01:25:38 UTC
        

I don't have a prescott to try.  Could you try again with the newer versions of gcc and such that we have now?




Comment 10


Martin von Gagern





          2009-05-04 08:25:24 UTC
        

(In reply to comment #9)
> I don't have a prescott to try.  Could you try again with the newer versions of
> gcc and such that we have now?

Tried again, couldn't reproduce this any more, so I guess it's fixed. Thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

