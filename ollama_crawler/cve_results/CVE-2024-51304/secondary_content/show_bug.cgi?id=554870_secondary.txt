Title: 554870 – app-admin/mongo-tools-3.0.4-r1 - dobin: bin/* does not exist
URL: https://bugs.gentoo.org/show_bug.cgi?id=554870

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 554870
app-admin/mongo-tools-3.0.4-r1 - dobin: bin/* does not exist
Last modified: 2015-08-06 11:02:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 554870 
      - app-admin/mongo-tools-3.0.4-r1 - dobin: bin/* does not exist


Summary:
app-admin/mongo-tools-3.0.4-r1 - dobin: bin/* does not exist
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Ultrabug








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-07-14 10:17 UTC by Stefan Böhmann





      Modified:
    
2015-08-06 11:02 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



bugs
hydrapolic
jarausch
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,3.17 KB,
                text/x-log)

            
2015-07-14 10:17 UTC,

            Stefan Böhmann




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Böhmann





          2015-07-14 10:17:58 UTC
        

Created attachment 406772 [details]
build.log

>>> Install mongo-tools-3.0.4-r1 into /var/tmp/portage/app-admin/mongo-tools-3.0.4-r1/image/ category app-admin
!!! dobin: bin/* does not exist
 * ERROR: app-admin/mongo-tools-3.0.4-r1::gentoo failed (install phase):
 *   dobin failed


However, without SSL use flag it build fine.
See also: https://bugs.gentoo.org/show_bug.cgi?id=544346


$ emerge -pvq dev-libs/openssl
dev-libs/openssl-1.0.2d  USE="asm tls-heartbeat zlib -bindist -gmp -kerberos -rfc3779 -sctp -static-libs {-test} -vanilla" ABI_X86="(64) -32 (-x32)" CPU_FLAGS_X86="(sse2)" 
dev-db/mongodb-3.0.4 USE="ssl tools -debug -kerberos -mms-agent"




Comment 1


Tomáš Mózes





          2015-07-14 19:15:16 UTC
        

Try to check https://bugs.gentoo.org/show_bug.cgi?id=551694#c9




Comment 2


Helmut Jarausch





          2015-07-22 07:44:10 UTC
        

The problem manifests itself here:
# github.com/spacemonkeygo/openssl
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:74:12: error: 'verify_cb' redeclared as different kind of symbol
 extern int verify_cb(int ok, X509_STORE_CTX* store);
            ^
/tmp/go-build202436168/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:9:13: note: previous declaration of 'verify_cb' was here
 extern char verify_cb[];
             ^
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:82:12: error: 'password_cb' redeclared as different kind of symbol
 extern int password_cb(char *buf, int size, int rwflag, void *password);
            ^
/tmp/go-build202436168/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:6:13: note: previous declaration of 'password_cb' was here
 extern char password_cb[];
             ^

========================

go build -o bin/mongoimport -tags "ssl sasl" mongoimport/main/mongoimport.go
# github.com/spacemonkeygo/openssl
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:74:12: error: 'verify_cb' redeclared as different kind of symbol
 extern int verify_cb(int ok, X509_STORE_CTX* store);
            ^
/tmp/go-build133154063/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:9:13: note: previous declaration of 'verify_cb' was here
 extern char verify_cb[];
             ^
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:82:12: error: 'password_cb' redeclared as different kind of symbol
 extern int password_cb(char *buf, int size, int rwflag, void *password);
            ^
/tmp/go-build133154063/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:6:13: note: previous declaration of 'password_cb' was here
 extern char password_cb[];
             ^




Comment 3


Ultrabug






          2015-08-03 09:50:18 UTC
        

I'm unable to reproduce this bug I'm sorry.

Does it still happen with 3.0.5 tools ?




Comment 4


Stefan Böhmann





          2015-08-05 17:26:52 UTC
        

Strange... I just re-emerge dev-lang/go and now I can emerge mongo-tools-3.0.4 without problems (and with ssl useflag). Also updating to 3.0.5 then causes no problems.

On another machine I got the same problem while upgrading from 3.0.4 to 3.0.5. Re-emerge dev-lang/go also works here.

My workaround is therefore: re-emerge dev-lang/go




Comment 5


Ultrabug






          2015-08-06 11:02:40 UTC
        

(In reply to Stefan Böhmann from comment #4)
> Strange... I just re-emerge dev-lang/go and now I can emerge
> mongo-tools-3.0.4 without problems (and with ssl useflag). Also updating to
> 3.0.5 then causes no problems.
> 
> On another machine I got the same problem while upgrading from 3.0.4 to
> 3.0.5. Re-emerge dev-lang/go also works here.
> 
> My workaround is therefore: re-emerge dev-lang/go

it's strange indeed, since the dep is dev-lang/go:=

so any rebuild of go should rebuild mongo-tools

thx









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

