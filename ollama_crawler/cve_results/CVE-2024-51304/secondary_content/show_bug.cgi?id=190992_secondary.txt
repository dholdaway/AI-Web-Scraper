Title: 190992 – dev-db/mysql-5.0.44-r1 - 105_all_mysql_config_cleanup.patch doesn't apply
URL: https://bugs.gentoo.org/show_bug.cgi?id=190992

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 190992
dev-db/mysql-5.0.44-r1 - 105_all_mysql_config_cleanup.patch doesn't apply
Last modified: 2007-09-01 19:19:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 190992 
      - dev-db/mysql-5.0.44-r1 - 105_all_mysql_config_cleanup.patch doesn't apply


Summary:
dev-db/mysql-5.0.44-r1 - 105_all_mysql_config_cleanup.patch doesn't apply
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-09-01 18:49 UTC by Daniel Walker





      Modified:
    
2007-09-01 19:19 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Walker





          2007-09-01 18:49:01 UTC
        

I get the following failure from "emerge dev-db/mysql"

 * Failed Patch: 105_all_mysql_config_cleanup.patch !
 *  ( /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch )
 * 
 * Include in your bugreport the contents of:
 * 
 *   /var/tmp/portage/dev-db/mysql-5.0.44-r1/temp/105_all_mysql_config_cleanup.patch-5124.out
 * 
 * ERROR: dev-db/mysql-5.0.44-r1 failed.
 * Call stack:
 *   ebuild.sh, line 1654:   Called dyn_unpack
 *   ebuild.sh, line 768:   Called qa_call 'src_unpack'
 *   ebuild.sh, line 44:   Called src_unpack
 *   ebuild.sh, line 1334:   Called mysql_src_unpack
 *   mysql.eclass, line 501:   Called epatch
 *   eutils.eclass, line 304:   Called die
 * 
 * Failed Patch: 105_all_mysql_config_cleanup.patch!
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-db/mysql-5.0.44-r1/temp/build.log'.
 * This ebuild used the following eclasses from overlays:
 *   /usr/local/portage/eclass/toolchain-funcs.eclass
 *   /usr/local/portage/eclass/multilib.eclass
 *   /usr/local/portage/eclass/mysql.eclass
 *   /usr/local/portage/eclass/eutils.eclass
 *   /usr/local/portage/eclass/portability.eclass
 *   /usr/local/portage/eclass/flag-o-matic.eclass
 *   /usr/local/portage/eclass/gnuconfig.eclass
 *   /usr/local/portage/eclass/autotools.eclass
 *   /usr/local/portage/eclass/libtool.eclass
 *   /usr/local/portage/eclass/mysql_fx.eclass
 * This ebuild is from an overlay: '/usr/local/portage/'
 * 


Reproducible: Always

Steps to Reproduce:
1. emerge dev-db/mysql

Actual Results:  
The failure in the description.

Expected Results:  
Sounds properly install mysql.

There is also a fail called /var/tmp/portage/dev-db/mysql-5.0.44-r1/temp/105_all_mysql_config_cleanup.patch-5770.out

which contains,

***** 105_all_mysql_config_cleanup.patch *****

==============================================

PATCH COMMAND:   patch -p0 -g0 -E --no-backup-if-mismatch < /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch

==============================================
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|--- mysql.old/scripts/mysql_config.sh  2007-01-04 22:35:51.000000000 +0100
|+++ mysql.new/scripts/mysql_config.sh  2007-01-04 23:35:31.000000000 +0100
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
==============================================

PATCH COMMAND:   patch -p1 -g0 -E --no-backup-if-mismatch < /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch

==============================================
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|--- mysql.old/scripts/mysql_config.sh  2007-01-04 22:35:51.000000000 +0100
|+++ mysql.new/scripts/mysql_config.sh  2007-01-04 23:35:31.000000000 +0100
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
==============================================

PATCH COMMAND:   patch -p2 -g0 -E --no-backup-if-mismatch < /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch

==============================================
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|--- mysql.old/scripts/mysql_config.sh  2007-01-04 22:35:51.000000000 +0100
|+++ mysql.new/scripts/mysql_config.sh  2007-01-04 23:35:31.000000000 +0100
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
==============================================

PATCH COMMAND:   patch -p3 -g0 -E --no-backup-if-mismatch < /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch

==============================================
missing header for unified diff at line 3 of patch
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|--- mysql.old/scripts/mysql_config.sh  2007-01-04 22:35:51.000000000 +0100
|+++ mysql.new/scripts/mysql_config.sh  2007-01-04 23:35:31.000000000 +0100
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored
==============================================

PATCH COMMAND:   patch -p4 -g0 -E --no-backup-if-mismatch < /var/tmp/portage/dev-db/mysql-5.0.44-r1/work/patch/105_all_mysql_config_cleanup.patch

==============================================
missing header for unified diff at line 3 of patch
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|--- mysql.old/scripts/mysql_config.sh  2007-01-04 22:35:51.000000000 +0100
|+++ mysql.new/scripts/mysql_config.sh  2007-01-04 23:35:31.000000000 +0100
--------------------------
No file to patch.  Skipping patch.
1 out of 1 hunk ignored




Comment 1


Jakub Moc (RETIRED)






          2007-09-01 18:54:12 UTC
        

> * This ebuild is from an overlay: '/usr/local/portage/'

Hmmm? Ebuilds in your overlay are not exactly our problem.




Comment 2


Daniel Walker





          2007-09-01 18:58:12 UTC
        

It's not happening in my overlay ..




Comment 3


Jakub Moc (RETIRED)






          2007-09-01 18:59:32 UTC
        

(In reply to comment #2)
> It's not happening in my overlay ..

Yeah, and this comes from where?

> * This ebuild is from an overlay: '/usr/local/portage/'




Comment 4


Daniel Walker





          2007-09-01 19:01:31 UTC
        

The one in my overlay is identical to the one in /usr/portage .. I copied it to my overlay to fix it .. The same problem exists in both.




Comment 5


Daniel Walker





          2007-09-01 19:02:03 UTC
        

How about we leave the bug open till all the facts are flushed out.




Comment 6


Jakub Moc (RETIRED)






          2007-09-01 19:08:30 UTC
        

(In reply to comment #4)
> The one in my overlay is identical to the one in /usr/portage .. I copied it to
> my overlay to fix it .. The same problem exists in both.

Well no, it doesn't. The ebuild wasn't touched for 5 weeks, noone reported this and it works just fine here.

>>> Unpacking mysql-extras-20070710.tar.bz2 to /var/tmp/portage/dev-db/mysql-5.0.44-r1/work
 * using '035_x86_asm-pic-fixes-4.1.12.patch'
 * >    remove page relocations
 * >    Most part of the original patch has already been accepted by MysQL,
 * >    here is the remaining.
 * >    _many_ thanks to pageexec@freemail.hu
 * using '105_all_mysql_config_cleanup.patch'
 * >    fix bug #156301 mysql_config wrongly retains too much info from CFLAGS
 * using '703_all_test-rpl_rotate_logs-5.0.21.patch'
 * using '704_all_disable_mybug_9735_test.patch'
 * >    disable a test that fail on longtext field lenght, the expected value is
 * >    three times the returned one, look like a multibyte character related
 * >    failure.
 * using '708_all_mysql_client_test-fix-pointer-aliasing-mysqlbug27383.patch'
 * >    Fix for pointer aliasing that breaks mysql_client_test (upstream bug #27393)
 * Applying various patches (bugfixes/updates) ...
 *   035_x86_asm-pic-fixes-4.1.12.patch ...                                                                                             [ ok ]
 *   105_all_mysql_config_cleanup.patch ...                                                                                             [ ok ]
 *   703_all_test-rpl_rotate_logs-5.0.21.patch ...                                                                                      [ ok ]
 *   704_all_disable_mybug_9735_test.patch ...                                                                                          [ ok ]
 *   708_all_mysql_client_test-fix-pointer-aliasing-mysqlbug27383.patch ...                                                             [ ok ]
 * Done with patching





Comment 7


Daniel Walker





          2007-09-01 19:15:04 UTC
        

It looks like emerge is mixing /usr/local/eclass with /usr/portage/ ebuilds.




Comment 8


Jakub Moc (RETIRED)






          2007-09-01 19:19:12 UTC
        

Well as already noted in comment #1 - please remove any and all overlay stuff that's messing with mysql (yeah, including eclasses). 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

