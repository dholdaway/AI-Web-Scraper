Title: 392381 – x11-misc/sw-notify-send-1.2.1 stopped working: "No D-Bus session bus process found"
URL: https://bugs.gentoo.org/show_bug.cgi?id=392381

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 392381
x11-misc/sw-notify-send-1.2.1 stopped working: "No D-Bus session bus process found"
Last modified: 2012-12-22 11:21:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 392381 
      - x11-misc/sw-notify-send-1.2.1 stopped working: "No D-Bus session bus process found"


Summary:
x11-misc/sw-notify-send-1.2.1 stopped working: "No D-Bus session bus process ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Michał Górny








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-11-29 10:37 UTC by Grygoriy I. Fuchedzhy





      Modified:
    
2012-12-22 11:21 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



skrattaren









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




`strace -f sw-notify-send "Test"` output

              (sw-notify_strace.log,61.70 KB,
                text/plain)

            
2012-12-21 14:50 UTC,

            Nikolaj Šujskij




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Grygoriy I. Fuchedzhy





          2011-11-29 10:37:08 UTC
        

Hi.

I'm running stable amd64 system and I had a bunch of upgrades recently. sw-notify-send stopped working for me. Unfortunately I can't figure out if upgrade is the cause.

It throws error:
"No D-Bus session bus process found"

Both system-wide and user dbus processes are running. I installed libnotify and tried notify-send, it works fine.

Thanks.




Comment 1


Jeroen Roovers (RETIRED)






          2011-12-04 03:28:37 UTC
        

Please post your `emerge --info x11-misc/sw-notify-send' output too.




Comment 2


Grygoriy I. Fuchedzhy





          2011-12-04 10:01:35 UTC
        

~ $ emerge --info x11-misc/sw-notify-send
Portage 2.1.10.11 (default/linux/amd64/10.0, gcc-4.5.3, glibc-2.12.2-r0, 2.6.39-gentoo-r3 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.39-gentoo-r3-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T8300_@_2.40GHz-with-gentoo-2.0.3
Timestamp of tree: Fri, 02 Dec 2011 21:30:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:          4.1_p9
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2-r3, 3.1.4-r3
dev-util/cmake:           2.8.4-r1
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.0.3
sys-apps/openrc:          0.9.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.11.1
sys-devel/binutils:       2.21.1-r1
sys-devel/gcc:            4.5.3-r1
sys-devel/gcc-config:     1.4.1-r1
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 2.6.39 (virtual/os-headers)
sys-libs/glibc:           2.12.2
Repositories:

gentoo
    location: /var/portage
    sync: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

sunrise
    location: /var/portage/local/layman/sunrise
    masters: gentoo
    priority: 0

proaudio
    location: /var/portage/local/layman/pro-audio
    masters: gentoo
    priority: 1

x-reprap
    location: /var/portage/local/layman/reprap
    masters: gentoo
    priority: 2

x-overlay
    location: /var/overlay
    masters: gentoo
    priority: 3

pbu-overlay
    location: /home/gry/repos/pbu-overlay
    masters: gentoo
    priority: 4

ABI="amd64"
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 skype-eula Q3AEULA AdobeFlash-10.1"
ACCEPT_PROPERTIES="*"
ALSA_CARDS="hda-intel"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias"
ARCH="amd64"
AUTOCLEAN="yes"
BOOTSTRAP_USE="cxx unicode multilib"
CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump"
CAMERAS="ptp2"
CBUILD="x86_64-pc-linux-gnu"
CD_ROOT="/mnt/storage/games_data"
CFLAGS="-march=native -O2 -pipe"
CFLAGS_x86="-m32"
CHOST="x86_64-pc-linux-gnu"
CHOST_amd64="x86_64-pc-linux-gnu"
CHOST_x86="i686-pc-linux-gnu"
CLEAN_DELAY="5"
COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog"
COLLISION_IGNORE="/lib/modules"
COLORFGBG="15;default"
COLORTERM="rxvt"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/portage /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DCCC_PATH="/usr/lib64/distcc/bin"
DEFAULT_ABI="amd64"
DESKTOP_STARTUP_ID="awesome/urxvtc/2265-208-callisto_TIME137302936"
DISPLAY=":0.0"
DISTCC_LOG=""
DISTCC_VERBOSE=""
DISTDIR="/var/portage/distfiles"
EDITOR="/usr/bin/emacsclient -c -a """
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="--ask --verbose --with-bdeps=y --autounmask-write"
EMERGE_WARNING_DELAY="10"
EPREFIX=""
EROOT="/"
FCFLAGS=""
FEATURES="assume-digests binpkg-logs buildsyspkg distlocks ebuild-locks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 3 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
FETCHCOMMAND_RSYNC="rsync -avP "${URI}" "${DISTDIR}/${FILE}""
FETCHCOMMAND_SFTP="bash -c "x=\${2#sftp://} ; host=\${x%%/*} ; port=\${host##*:} ; host=\${host%:*} ; [[ \${host} = \${port} ]] && port=22 ; exec sftp -P \${port} \"\${host}:/\${x#*/}\" \"\$1\"" sftp "${DISTDIR}/${FILE}" "${URI}""
FETCHCOMMAND_SSH="bash -c "x=\${2#ssh://} ; host=\${x%%/*} ; port=\${host##*:} ; host=\${host%:*} ; [[ \${host} = \${port} ]] && port=22 ; exec rsync --rsh=\"ssh -p\${port}\" -avP \"\${host}:/\${x#*/}\" \"\$1\"" rsync "${DISTDIR}/${FILE}" "${URI}""
FFLAGS=""
FLTK_DOCDIR="/usr/share/doc/fltk-1.3.0/html"
GCC_SPECS=""
GDK_USE_XFT="1"
GENTOO_MIRRORS="ftp://portage.org.ua ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo"
GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx"
GRUB_PLATFORMS=""
HG="/usr/bin/hg"
HISTCONTROL="erasedups"
HISTFILESIZE="20000"
HISTSIZE="100000"
HOME="/home/gry"
INFOPATH="/usr/share/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.21.1/info:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.5.3/info:/usr/share/info/emacs-23"
INPUT_DEVICES="evdev synaptics"
JAVAC="/etc/java-config-2/current-system-vm/bin/javac"
JAVA_HOME="/etc/java-config-2/current-system-vm"
JDK_HOME="/etc/java-config-2/current-system-vm"
KERNEL="linux"
LANG="ru_RU.UTF8"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LC_ALL=""
LC_NUMERIC="C"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LDFLAGS_x86="-m elf_i386"
LESS="-R -M --shift 5 -i"
LESSOPEN="|lesspipe %s"
LIBDIR_amd64="lib64"
LIBDIR_amd64_fbsd="lib64"
LIBDIR_ppc="lib32"
LIBDIR_ppc64="lib64"
LIBDIR_s390="lib32"
LIBDIR_s390x="lib64"
LIBDIR_sparc32="lib32"
LIBDIR_sparc64="lib64"
LIBDIR_x86="lib32"
LIBDIR_x86_fbsd="lib32"
LINGUAS="ru en"
LOGNAME="gry"
LS_COLORS="rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:"
MAIL="/var/mail/gry"
MAKEOPTS="-j4"
MANPATH="/etc/java-config-2/current-system-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.21.1/man:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.5.3/man:/etc/java-config/system-vm/man/"
MULTILIB_ABIS="amd64 x86"
MULTILIB_STRICT_DENY="64-bit.*shared object"
MULTILIB_STRICT_DIRS="/lib32 /lib /usr/lib32 /usr/lib /usr/kde/*/lib32 /usr/kde/*/lib /usr/qt/*/lib32 /usr/qt/*/lib /usr/X11R6/lib32 /usr/X11R6/lib"
MULTILIB_STRICT_EXEMPT="(perl5|gcc|gcc-lib|binutils|eclipse-3|debug|portage|udev)"
NETBEANS="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler soa visualweb webcommon websvccommon xml"
OPENGL_PROFILE="xorg-x11"
PAGER="/usr/bin/less"
PATH="/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/arm-elf/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/avr/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/gcc-bin/4.5.3:/usr/games/bin:/sbin:/usr/sbin:/etc/bin"
PHP_TARGETS="php5-3"
PKGDIR="/var/portage/packages"
PORTAGE_ARCHLIST="ppc sparc64-freebsd ppc-openbsd x86-openbsd ppc64 x86-winnt x86-fbsd ppc-aix alpha arm x86-freebsd s390 amd64 arm-linux x86-macos x64-openbsd ia64-hpux hppa x86-netbsd x86-cygwin amd64-linux ia64-linux x86 sparc-solaris x64-freebsd sparc64-solaris x86-linux x64-macos sparc m68k-mint ia64 mips ppc-macos x86-interix hppa-hpux amd64-fbsd x64-solaris mips-irix m68k sh x86-solaris sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib64/portage/bin"
PORTAGE_COMPRESS_EXCLUDE_SUFFIXES="css gif htm[l]? jp[e]?g js pdf png"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="log warn error"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save_summary echo"
PORTAGE_FETCH_CHECKSUM_TRY_MIRRORS="5"
PORTAGE_FETCH_RESUME_MIN_SIZE="350K"
PORTAGE_GID="250"
PORTAGE_GPG_SIGNING_COMMAND="gpg --sign --clearsign --yes --default-key "${PORTAGE_GPG_KEY}" --homedir "${PORTAGE_GPG_DIR}" "${FILE}""
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_NICENESS="10"
PORTAGE_PYM_PATH="/usr/lib64/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="-1"
PORTAGE_SANDBOX_COMPAT_LEVEL="16"
PORTAGE_SYNC_STALE="30"
PORTAGE_TMPDIR="/tmp"
PORTAGE_VERBOSE="1"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/var/portage"
PORTDIR_OVERLAY="/var/portage/local/layman/sunrise /var/portage/local/layman/pro-audio /var/portage/local/layman/reprap /var/overlay /home/gry/repos/pbu-overlay"
PRELINK_PATH_MASK="/usr/lib64/libfreebl3.so:/usr/lib64/libnssdbm3.so:/usr/lib64/libsoftokn3.so"
PROFILE_ONLY_VARIABLES="ARCH ELIBC KERNEL USERLAND"
PWD="/home/gry"
PYTHONDONTWRITEBYTECODE="1"
RESUMECOMMAND="/usr/bin/wget -c -t 3 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
RESUMECOMMAND_RSYNC="rsync -avP "${URI}" "${DISTDIR}/${FILE}""
RESUMECOMMAND_SSH="bash -c "x=\${2#ssh://} ; host=\${x%%/*} ; port=\${host##*:} ; host=\${host%:*} ; [[ \${host} = \${port} ]] && port=22 ; exec rsync --rsh=\"ssh -p\${port}\" -avP \"\${host}:/\${x#*/}\" \"\$1\"" rsync "${DISTDIR}/${FILE}" "${URI}""
ROOT="/"
ROOTPATH="/opt/bin:/usr/x86_64-pc-linux-gnu/arm-elf/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/avr/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/gcc-bin/4.5.3:/etc/bin"
RPMDIR="/usr/portage/rpm"
RUBYOPT="-rauto_gem"
RUBY_TARGETS="ruby18"
RXVT_SOCKET="/tmp/.urxvtd-gry-:0.0"
SANE_BACKENDS="net"
SANE_CONFIG_DIR="/etc/sane.d"
SHELL="/bin/bash"
SHLVL="1"
SSH_AGENT_PID="2270"
SSH_AUTH_SOCK="/tmp/ssh-BjmyFbpk2269/agent.2269"
SYMLINK_LIB="yes"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
TERM="rxvt-unicode"
USB_DEVFS_PATH="/dev/bus/usb"
USE="X acl alsa amd64 bash-completion berkdb bzip2 cdinstall cli cracklib crypt cups custom-optimization cxx cyrillic dell dri emacs gdbm gpm iconv jpeg laptop mmx modules mudflap multilib ncurses nls nptl nptlonly opengl openmp pam pcre png ppds pppd readline session smp sse sse2 sse3 ssl ssse3 sysfs tcpd tiff truetype unicode usb xft xorg zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru en" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" SANE_BACKENDS="net" USERLAND="GNU" VIDEO_CARDS="radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USER="gry"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CALLIGRA_FEATURES CAMERAS COLLECTD_PLUGINS CROSSCOMPILE_OPTS DRACUT_MODULES DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS GPSD_PROTOCOLS GRUB_PLATFORMS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS NETBEANS_MODULES NGINX_MODULES_HTTP NGINX_MODULES_MAIL OFED_DRIVERS PHP_TARGETS QEMU_SOFTMMU_TARGETS QEMU_USER_TARGETS RUBY_TARGETS SANE_BACKENDS USERLAND VIDEO_CARDS XFCE_PLUGINS XTABLES_ADDONS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:repo:env.d"
VIDEO_CARDS="radeon"
WINDOWID="16777241"
XAUTHORITY="/home/gry/.Xauthority"
XDG_CONFIG_DIRS="/etc/xdg"
XDG_DATA_DIRS="/usr/local/share:/usr/share"
XSESSION="awesome"
XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
_="/usr/bin/emerge"

=================================================================
                        Package Settings
=================================================================

x11-misc/sw-notify-send-1.1 was built with the following:
USE="(multilib)"




Comment 3


Michał Górny









          2011-12-04 14:53:35 UTC
        

How are you using it? I'd apprecaite some 'ps ax | grep dbus-daemon' or similar.




Comment 4


Grygoriy I. Fuchedzhy





          2011-12-04 15:30:00 UTC
        

~ $ ps ax | grep dbus-daemon
 1945 ?        Ss     0:00 /usr/bin/dbus-daemon --system
 2282 ?        Ss     0:02 /usr/bin/dbus-daemon --fork --print-pid 5 --print-address 7 --session
14251 pts/1    S+     0:00 grep --colour=auto dbus-daemon

~ $ sw-notify-send message
No D-Bus session bus process found




Comment 5


Michał Górny









          2011-12-04 15:36:04 UTC
        

(In reply to comment #4)
> ~ $ ps ax | grep dbus-daemon
>  1945 ?        Ss     0:00 /usr/bin/dbus-daemon --system
>  2282 ?        Ss     0:02 /usr/bin/dbus-daemon --fork --print-pid 5
> --print-address 7 --session
> 14251 pts/1    S+     0:00 grep --colour=auto dbus-daemon
> 
> ~ $ sw-notify-send message
> No D-Bus session bus process found

Could you paste /proc/2282/{cmdline,environ} as well (or for the respective dbus-daemon session PID)?




Comment 6


Grygoriy I. Fuchedzhy





          2011-12-04 15:45:59 UTC
        

cmdline:

/usr/bin/dbus-daemon --fork --print-pid 5 --print-address 7 --session

environ:

MANPATH=/etc/java-config-2/current-system-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.21.1/man:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.5.3/man:/etc/java-config/system-vm/man/
SSH_AGENT_PID=2270
TERM=linux
SHELL=/bin/bash
LC_NUMERIC=C
LC_ALL=
ANT_HOME=/usr/share/ant
USER=gry
PRELINK_PATH_MASK=/usr/lib64/libfreebl3.so:/usr/lib64/libnssdbm3.so:/usr/lib64/libsoftokn3.so
GDK_USE_XFT=1
SSH_AUTH_SOCK=/tmp/ssh-BjmyFbpk2269/agent.2269
CXXFLAGS=-Wall
PAGER=/usr/bin/less
CONFIG_PROTECT_MASK=/etc/gentoo-release /etc/sandbox.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/terminfo /etc/ca-certificates.conf /etc/texmf/web2c /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/revdep-rebuild
XDG_CONFIG_DIRS=/etc/xdg
FLTK_DOCDIR=/usr/share/doc/fltk-1.3.0/html
RXVT_SOCKET=/tmp/.urxvtd-gry-:0.0
MAIL=/var/mail/gry
PATH=/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/arm-elf/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/avr/gcc-bin/4.5.3:/usr/x86_64-pc-linux-gnu/gcc-bin/4.5.3:/usr/games/bin:/sbin:/usr/sbin:/etc/bin
HG=/usr/bin/hg
DISTCC_LOG=
PWD=/home/gry
JAVA_HOME=/etc/java-config-2/current-system-vm
JAVAC=/etc/java-config-2/current-system-vm/bin/javac
EDITOR=/usr/bin/emacsclient -c -a ""
LANG=ru_RU.UTF8
DISTCC_VERBOSE=
DCCC_PATH=/usr/lib64/distcc/bin
JDK_HOME=/etc/java-config-2/current-system-vm
HOME=/home/gry
SHLVL=0
CFLAGS=-Wall
LESS=-R -M --shift 5
LOGNAME=gry
GCC_SPECS=
XDG_DATA_DIRS=/usr/local/share:/usr/share
LESSOPEN=|lesspipe %s
INFOPATH=/usr/share/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.21.1/info:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.5.3/info:/usr/share/info/emacs-23
DISPLAY=:0.0
USB_DEVFS_PATH=/dev/bus/usb
RUBYOPT=-rauto_gem
OPENGL_PROFILE=xorg-x11
XSESSION=awesome
SANE_CONFIG_DIR=/etc/sane.d
CONFIG_PROTECT=/usr/share/gnupg/qualified.txt
XAUTHORITY=/home/gry/.Xauthority




Comment 7


Nikolaj Šujskij





          2012-11-01 12:39:14 UTC
        

The same here (on x11-wm/awesome)

tinynotify-send works fine, while sw-notify-send fails.




Comment 8


Michał Górny









          2012-11-01 12:50:37 UTC
        

(In reply to comment #7)
> The same here (on x11-wm/awesome)
> 
> tinynotify-send works fine, while sw-notify-send fails.

What libtinynotify-systemwide version are you using?




Comment 9


Nikolaj Šujskij





          2012-11-01 12:51:46 UTC
        

(In reply to comment #8)
> (In reply to comment #7)
> > The same here (on x11-wm/awesome)
> > 
> > tinynotify-send works fine, while sw-notify-send fails.
> 
> What libtinynotify-systemwide version are you using?

Everything from current ~amd64

x11-libs/libtinynotify-systemwide-0.1




Comment 10


Michał Górny









          2012-11-01 12:57:13 UTC
        

(In reply to comment #9)
> Everything from current ~amd64
> 
> x11-libs/libtinynotify-systemwide-0.1

That's bad since that version had the relevant fixes and works correctly for me. Is this a fresh install or did it break after some kind of upgrade? Could you post any relevant details you could find?




Comment 11


Nikolaj Šujskij





          2012-11-01 13:21:32 UTC
        

(In reply to comment #10)
> (In reply to comment #9)
> > Everything from current ~amd64
> > 
> > x11-libs/libtinynotify-systemwide-0.1
> 
> That's bad since that version had the relevant fixes and works correctly for
> me. Is this a fresh install or did it break after some kind of upgrade?
> Could you post any relevant details you could find?

I think that some update had broken it, but I can't imagine what exactly. At some point uam had stopped to display notifications, but the I had noticed the error only after `uam-pmount`ing.




Comment 12


Nikolaj Šujskij





          2012-11-09 08:46:32 UTC
        

(In reply to comment #0)
> I'm running stable amd64 system

Hm, my stable system still works fine, as far as I remember. I'll try to do a bit of research, it's not fully up-to-date, maybe some info could be dug out.




Comment 13


Nikolaj Šujskij





          2012-12-21 10:36:40 UTC
        

I decided to check whether it's awesome's problem and confirmed the issue with i3 and qtnotifydaemon




Comment 14


Michał Górny









          2012-12-21 11:09:22 UTC
        

(In reply to comment #13)
> I decided to check whether it's awesome's problem and confirmed the issue
> with i3 and qtnotifydaemon

Hmm, could you remind me the version of sw-notify-send and libtinynotify-systemwide you're using? The topic still says '1.1' and I feel like I'm a bit lost here.




Comment 15


Nikolaj Šujskij





          2012-12-21 11:38:20 UTC
        

Everything latest from ~amd64: x11-libs/libtinynotify-systemwide-0.1 and 
x11-misc/sw-notify-send-1.2.1

Maybe it's time to update summary?


[I] x11-libs/libtinynotify
     Available versions:  (~)0.2.1 **9999 {debug doc static-libs}
     Installed versions:  0.2.1(09:58:25 10.01.2012)(-debug -doc -static-libs)
     Homepage:            https://bitbucket.org/mgorny/libtinynotify/
     Description:         A lightweight implementation of Desktop Notification Spec

[I] x11-libs/libtinynotify-cli
     Available versions:  (~)1.2.1 **9999 {doc static-libs}
     Installed versions:  1.2.1(10:00:58 10.01.2012)(-doc -static-libs)
     Homepage:            https://bitbucket.org/mgorny/tinynotify-send/
     Description:         Common CLI routines for tinynotify-send & sw-notify-send

[I] x11-libs/libtinynotify-systemwide
     Available versions:  (~)0.0.2 (~)0.1 **9999 {doc static-libs}
     Installed versions:  0.1(13:49:39 09.10.2012)(-doc -static-libs)
     Homepage:            https://bitbucket.org/mgorny/libtinynotify-systemwide/
     Description:         A system-wide notifications module for libtinynotify

[I] x11-misc/sw-notify-send
     Available versions:  (~)0.1.1 (~)1.2.1 **9999
     Installed versions:  1.2.1(10:02:05 10.01.2012)
     Homepage:            https://bitbucket.org/mgorny/tinynotify-send/
     Description:         A system-wide variant of tinynotify-send

[I] x11-misc/tinynotify-send
     Available versions:  (~)1.2.1 **9999 {symlink}
     Installed versions:  1.2.1(10:02:21 10.01.2012)(-symlink)
     Homepage:            https://bitbucket.org/mgorny/tinynotify-send/
     Description:         A notification sending utility (using libtinynotify)




Comment 16


Michał Górny









          2012-12-21 11:44:09 UTC
        

Hmm, do I understand correctly that the output and environment of yours is similar to the OP one? Anything else you can tell me to help me debug this? I'm getting a bit out of ideas...




Comment 17


Nikolaj Šujskij





          2012-12-21 13:11:59 UTC
        

(In reply to comment #16)
> Hmm, do I understand correctly that the output and environment of yours is
> similar to the OP one? Anything else you can tell me to help me debug this?
> I'm getting a bit out of ideas...

The error output is the same, can't really say for environment. I kind of hoped you'll tell me how to debug the issue, being the author :)

I can compile debug version, or sample file, or do some bash magic to determine why sw-notify-send can't find session.




Comment 18


Michał Górny









          2012-12-21 13:22:35 UTC
        

(In reply to comment #17)
> The error output is the same, can't really say for environment. I kind of
> hoped you'll tell me how to debug the issue, being the author :)
> 
> I can compile debug version, or sample file, or do some bash magic to
> determine why sw-notify-send can't find session.

To be honest, the simplest thing that comes to my mind is 'strace -f'.




Comment 19


Nikolaj Šujskij





          2012-12-21 14:50:22 UTC
        

Created attachment 332926 [details]
`strace -f sw-notify-send "Test"` output

Here it is




Comment 20


Michał Górny









          2012-12-21 21:18:04 UTC
        

I have a suspicion that your D-Bus instance simply doesn't have '--session' in its' command-line arguments.

Could you paste:

  ps ax | grep dbus-daemon

please?




Comment 21


Nikolaj Šujskij





          2012-12-22 05:26:07 UTC
        

 % ps ax | grep dbus-daemon 
 1725 ?        Ss     0:00 /usr/bin/dbus-daemon --system
 3073 ?        Ss     0:00 /usr/bin/dbus-daemon --fork --print-pid 5 --print-address 7 --session
17840 pts/3    S+     0:00 grep --colour dbus-daemon

 % sw-notify-send "awesome" "is getting naughty"
No D-Bus session bus process found




Comment 22


Michał Górny









          2012-12-22 10:05:15 UTC
        

(In reply to comment #21)
>  % ps ax | grep dbus-daemon 
>  1725 ?        Ss     0:00 /usr/bin/dbus-daemon --system
>  3073 ?        Ss     0:00 /usr/bin/dbus-daemon --fork --print-pid 5
> --print-address 7 --session
> 17840 pts/3    S+     0:00 grep --colour dbus-daemon
> 
>  % sw-notify-send "awesome" "is getting naughty"
> No D-Bus session bus process found

Then it's not that.

Next step: /proc/$PID/environ where $PID is pid of dbus-daemon with --session

It is null-separated, so a bit hard to read. You need to find 'DISPLAY', 'XAUTHORITY', 'HOME'.




Comment 23


Nikolaj Šujskij





          2012-12-22 10:10:52 UTC
        

(In reply to comment #22)
> (In reply to comment #21)
> >  % ps ax | grep dbus-daemon 
> >  1725 ?        Ss     0:00 /usr/bin/dbus-daemon --system
> >  3073 ?        Ss     0:00 /usr/bin/dbus-daemon --fork --print-pid 5
> > --print-address 7 --session
> > 17840 pts/3    S+     0:00 grep --colour dbus-daemon
> > 
> >  % sw-notify-send "awesome" "is getting naughty"
> > No D-Bus session bus process found
> 
> Then it's not that.
> 
> Next step: /proc/$PID/environ where $PID is pid of dbus-daemon with --session
> 
> It is null-separated, so a bit hard to read. You need to find 'DISPLAY',
> 'XAUTHORITY', 'HOME'.

DISPLAY=:1
HOME=/home/sterkrig

$XAUTHORITY is absent. Also it's absent in `env` output (run inside X terminal)




Comment 24


Michał Górny









          2012-12-22 10:19:48 UTC
        

(In reply to comment #23)
> DISPLAY=:1
> HOME=/home/sterkrig
> 
> $XAUTHORITY is absent. Also it's absent in `env` output (run inside X
> terminal)

Please try the following from a root console (preferably on a tty):

  sudo -E -u sterkrig DISPLAY=:1 HOME=/home/sterkrig tinynotify-send test test

This mostly resembles the way tinynotify sends system-wide notifications.




Comment 25


Nikolaj Šujskij





          2012-12-22 10:31:22 UTC
        

(In reply to comment #24)
> (In reply to comment #23)
> > DISPLAY=:1
> > HOME=/home/sterkrig
> > 
> > $XAUTHORITY is absent. Also it's absent in `env` output (run inside X
> > terminal)
> 
> Please try the following from a root console (preferably on a tty):
> 
>   sudo -E -u sterkrig DISPLAY=:1 HOME=/home/sterkrig tinynotify-send test
> test
> 
> This mostly resembles the way tinynotify sends system-wide notifications.

I switched to tty2, logged in as root and issued the command (worked silently with no error), then switched back to X session and saw a notification.




Comment 26


Michał Górny









          2012-12-22 10:34:09 UTC
        

(In reply to comment #25)
> (In reply to comment #24)
> > (In reply to comment #23)
> > > DISPLAY=:1
> > > HOME=/home/sterkrig
> > > 
> > > $XAUTHORITY is absent. Also it's absent in `env` output (run inside X
> > > terminal)
> > 
> > Please try the following from a root console (preferably on a tty):
> > 
> >   sudo -E -u sterkrig DISPLAY=:1 HOME=/home/sterkrig tinynotify-send test
> > test
> > 
> > This mostly resembles the way tinynotify sends system-wide notifications.
> 
> I switched to tty2, logged in as root and issued the command (worked
> silently with no error), then switched back to X session and saw a
> notification.

Does 'tinynotify-send -w test test' (without sudo) work directly on that terminal?




Comment 27


Nikolaj Šujskij





          2012-12-22 10:46:52 UTC
        

> Does 'tinynotify-send -w test test' (without sudo) work directly on that terminal?

 Nope, it doesn't work neither from root's tty2, nor from X terminal




Comment 28


Michał Górny









          2012-12-22 11:21:37 UTC
        

So far, sterkrig has been able to fix it through re-emerging libtinynotify-systemwide. If anyone is able to reproduce it, please reopen.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

