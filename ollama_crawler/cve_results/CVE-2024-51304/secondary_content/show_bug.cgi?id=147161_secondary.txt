Title: 147161 – net-im/jabberd-2.0.11 - configure script fails to find Berkeley DB/LDAP
URL: https://bugs.gentoo.org/show_bug.cgi?id=147161

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 147161
net-im/jabberd-2.0.11 - configure script fails to find Berkeley DB/LDAP
Last modified: 2006-10-04 14:02:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 147161 
      - net-im/jabberd-2.0.11 - configure script fails to find Berkeley DB/LDAP


Summary:
net-im/jabberd-2.0.11 - configure script fails to find Berkeley DB/LDAP
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Krzysztof Pawlik (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-11 03:26 UTC by Simon Kirk





      Modified:
    
2006-10-04 14:02 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



humpback
net-im









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




This is the failure to find the right version of DB.

              (db_config_lookup_failure.log,101.24 KB,
                text/plain)

            
2006-09-11 03:30 UTC,

            Simon Kirk




Details





This is the failure to find the right version of OpenLDAP.

              (openldap_config_lookup_failure.log,86.01 KB,
                text/plain)

            
2006-09-11 03:31 UTC,

            Simon Kirk




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simon Kirk





          2006-09-11 03:26:40 UTC
        

Hello. Recently I have added the ldap USE flag as I am trying to unify my logins for my jabber server with our internal Active Directory via LDAP. When I try to emerge jabberd 2.0.11 the configure script now fails while trying to find a version of Berkeley DB >= 4.1.25. This despite the fact I have sys-libs/db-4.2.52_p2-r1 installed:

checking for db.h... yes
checking for db_create in -ldb-4.3... no
checking for db_create in -ldb-4.2... yes
checking for Berkeley DB version >= 4.1.25... no
checking for db_create in -ldb-4.1... no
checking for db_create in -ldb-4... no
checking for db_create in -ldb4... no
checking for db_create in -ldb41... no
checking for db_create in -ldb... yes
checking for Berkeley DB version >= 4.1.25... no
configure: error: Berkeley DB >= 4.1.24 not found

If I try to cheat and do USE="-berkdb" the configure script fails while looking for openldap version >= 2.1.0. This despite the fact have net-nds/openldap-2.3.24-r1 installed.

checking for ldap_init in -lldap... yes
checking for OpenLDAP version >= 2.1.0... no
configure: error: OpenLDAP client libraries >= 2.1.0 not found.

Here is my emerge --info: 

Portage 2.1.1 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r7 i686)
=================================================================
System uname: 2.6.17-gentoo-r7 i686 Intel(R) Pentium(R) 4 CPU 2.66GHz
Gentoo Base System version 1.12.4
Last Sync: Mon, 11 Sep 2006 08:30:08 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks metadata-transfer prelink sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.blueyonder.co.uk http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/"
LINGUAS=""
MAKEOPTS="-j7"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 apache2 apm arts avi berkdb bitmap-fonts bzip2 cgi cli crypt cups dba dlloader dri dvi eds elibc_glibc emboss encode esd expat foomaticdb fortran gd gdbm gif gpm gstreamer gtk2 idn imap imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog ithreads jabber java jpeg kernel_linux lcms ldap ldapsam libg++ libwww mad maildir mailwrapper mhash mikmod mod_irc mod_muc mod_pubsub motif mp3 mpeg mysql mysqli ncurses nls nptl nptlonly ogg opengl oss pam pcre pdf perl php pic png postgres pppd python qt3 qt4 quicktime readline reflection rss samba sasl sdl session snmp spell spl ssl subversion tcpd tetex threads tiff truetype truetype-fonts type1-fonts udev unicode urandom usb userland_GNU vhosts video_cards_apm video_cards_ark video_cards_ati video_cards_chips video_cards_cirrus video_cards_cyrix video_cards_dummy video_cards_fbdev video_cards_glint video_cards_i128 video_cards_i740 video_cards_i810 video_cards_imstt video_cards_mga video_cards_neomagic video_cards_nsc video_cards_nv video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_vga video_cards_via video_cards_vmware video_cards_voodoo vorbis web xml xmms xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Simon Kirk





          2006-09-11 03:28:51 UTC
        

I have attached the config logs from both cases as well.




Comment 2


Simon Kirk





          2006-09-11 03:30:56 UTC
        

Created attachment 96684 [details]
This is the failure to find the right version of DB.




Comment 3


Simon Kirk





          2006-09-11 03:31:44 UTC
        

Created attachment 96685 [details]
This is the failure to find the right version of OpenLDAP.




Comment 4


Simon Kirk





          2006-09-20 05:53:31 UTC
        

This problem has gone away, but only after I did an emerge of the latest openssl (at this time, dev-libs/openssl-0.9.8c-r2), then a revdep-rebuild --library libssl.so.0.9.8, and finally an equery depends openssl, followed by a complete rebuild of all the packages listed there, regardless of whether they had been rebuilt via the revdep-rebuild or not.




Comment 5


Krzysztof Pawlik (RETIRED)






          2006-10-04 14:02:32 UTC
        

I can't reproduce it with 2.0.11-r1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

