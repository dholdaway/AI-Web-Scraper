Title: 83378 – binutils-2.15.92.0.2-r4 ld segv
URL: https://bugs.gentoo.org/show_bug.cgi?id=83378

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 83378
binutils-2.15.92.0.2-r4 ld segv
Last modified: 2005-10-04 20:07:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 83378 
      - binutils-2.15.92.0.2-r4 ld segv


Summary:
binutils-2.15.92.0.2-r4 ld segv
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




86519



 

        Show dependency tree





 





      Reported:
    
2005-02-26 07:35 UTC by Aaron Walker (RETIRED)





      Modified:
    
2005-10-04 20:07 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



lars









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Aaron Walker (RETIRED)






          2005-02-26 07:35:57 UTC
        

cc -o mkcmd -O2 -march=athlon-xp -pipe -DUSE_STDLIB -DUSE_STRINGS -DUSE_UNINSTD_H -DHAVE_STRDUP -DUSE_MALLOC_H -DUSE_MEMCPY=0  -DLINUX  main.o mkcmd.o check.o emit.o key.o list.o parser.o stracc.o option.o scan.o atoc.o mkman.o routine.o type.o mkusage.o 
collect2: ld terminated with signal 11 [Segmentation fault], core dumped
parser.o(.text+0x15f6): In function `Init':
: warning: the use of `mktemp' is dangerous, better use `mkstemp'
/usr/lib/gcc/i686-pc-linux-gnu/3.4.3/../../../../i686-pc-linux-gnu/bin/ld: BFD 2.15.92.0.2 20040927 assertion fail /buildroot/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/elflink.c:6141
make: *** [mkcmd] Error 1

Portage 2.0.51.16 (default-linux/x86/2004.3, gcc-3.4.3, glibc-2.3.4.20050125-r0, 2.6.10 i686)
=================================================================
System uname: 2.6.10 i686 mobile AMD Athlon(tm) XP2500+
Gentoo Base System version 1.5.3
Python:              dev-lang/python-2.4-r2,dev-lang/python-2.3.4-r1 [2.4 (#1, Feb 17 2005, 01:54:39)]
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.4-r2, 2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r4
sys-devel/libtool:   1.5.10-r5
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/local/distfiles"
FEATURES="autoaddcvs autoconfig ccache collision-protect cvs digest distlocks sandbox sfperms sign strict"
GENTOO_MIRRORS="http://zeus/gentoo/ ftp://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ ftp://gentoo.chem.wisc.edu/gentoo/"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/buildroot"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/ka0ttic/overlay"
SYNC="rsync://zeus/gentoo-portage"
USE="x86 3dnow X acpi aim alsa apache2 bash-completion berkdb bzlib cdr crypt cscope dvd esd fam fbcon gdbm gif gtk gtk2 imap imlib jpeg maildir mikmod mmx ncurses nls offensive opengl oss pam pcre pdflib perl png python readline ruby sdl slang sse ssl svga truetype unicode usb xml2 xmms xosd zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LDFLAGS




Comment 1


Erol Zavidic





          2005-02-28 11:40:03 UTC
        

Segfault with CC as well...

gcc -c -I.. -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/.. -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/../../include -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/../../intl -I../../intl  -O2 -march=pentium3 -pipe  /var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/chew.c
gcc: Internal error: Segmentation fault (program as)

Portage 2.0.51-r15 (default-linux/x86/2004.3, gcc-3.4.3, glibc-2.3.4.20050125-r0, 2.6.10-gentoo-r6 i686)
=================================================================
System uname: 2.6.10-gentoo-r6 i686 Mobile Intel(R) Pentium(R) III CPU - M  1200MHz
Gentoo Base System version 1.6.9
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb  8 2005, 17:39:42)]
distcc[28003] (dcc_mkdir) ERROR: mkdir /var/tmp/portage/.distcc/state failed: No such file or directory [disabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r3
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-O3 -march=pentium3 -pipe -mmmx -msse -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=pentium3 -pipe -mmmx -msse -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://ftp.uni-erlangen.de/pub/mirrors/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aalib acpi alsa apache2 arts avi bcmath berkdb bitmap-fonts bonobo bzlib crypt cups curl dga emboss encode esd exif f77 fam font-server foomaticdb fortran gd gdbm gif gnome gphoto2 gpm gstreamer gtk gtk2 imap imlib ipv6 java jpeg junit ldap libg++ libwww lirc mad mhash mikmod mime mmx motif mozilla mpeg mysql ncurses nls nptl oggvorbis opengl pam pda pdflib perl php png python quicktime readline samba sasl sdl spell sse ssl svga tcpd tiff truetype truetype-fonts type1-fonts usb xine xml2 xmms xpm xsl xv xvid zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY





Comment 2


Erol Zavidic





          2005-02-28 12:53:37 UTC
        

Just a small correction - it is the ar that is coredumping. Tried to get the backtrace but no debug info.
Best bt I can offer is:

#85 0x0804b4c0 in ?? ()
#86 0xbffff6c8 in ?? ()
#87 0xb7f44168 in ?? () from /lib/tls/libc.so.6
#88 0xb7ed22ac in close () from /lib/tls/libc.so.6
#89 0xb7e2d523 in __guard_setup () from /lib/tls/libc.so.6
Previous frame inner to this frame (corrupt stack?)




Comment 3


David Hipple





          2005-02-28 12:56:04 UTC
        

I Segfault too

make[1]: Entering directory `/var/tmp/portage/binutils-2.15.92.0.2-r4/work/build/bfd/doc'
gcc -c -I.. -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/.. -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/../../include -I/var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/../../intl -I../../intl  -O2 -march=pentium4 -pipe  /var/tmp/portage/binutils-2.15.92.0.2-r4/work/binutils-2.15.92.0.2/bfd/doc/chew.c
distcc[20129] ERROR: compile /root/.ccache/chew.tmp.fadal.20125.i on localhost failed
gcc: Internal error: Segmentation fault (program as)


Portage 2.0.51-r15 (default-linux/x86/2004.2, gcc-3.4.3, glibc-2.3.4.20050125-r0, 2.6.10-ck5 i686)
=================================================================
System uname: 2.6.10-ck5 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.9
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Feb 21 2005, 23:16:51)]
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.9.4, 1.7.9-r1, 1.5, 1.6.3, 1.4_p6, 1.8.5-r3
sys-devel/binutils:  2.15.92.0.2-r3
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-O3 -march=pentium4 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=pentium4 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distcc distlocks sandbox sfperms"
GENTOO_MIRRORS="ftp://gentoo.risq.qc.ca// http://gentoo.mirrored.ca// ftp://gentoo.mirrored.ca/"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.ca.gentoo.org/gentoo-portage"
USE="x86 S3TC X Xaw3d aalib acpi alsa apm audiofile avi berkdb bitmap-fonts cdparanoia cdr codecs cpdflib crypt cups curl curlwrappers dga divx4linux dri dv dvd dvdread emboss encode escreen esd f77 faac faad fam fbcon fbdev ffmpeg fla flac font-server foomaticdb fortran gcj gdbm gif gimp gimpprint ginac gphoto2 gtk gtk2 idea imagemagick imlib ipv6 java jikes jit jpeg jpeg2k junit kde lesstif libg++ libwww live lzo lzw lzw-tiff mad mime ming mmap mmx mmx2 mng motif mozilla moznocompose moznoirc moznomail mozp3p mozsvg mpeg ncurses network nls no_wxgtk1 noreiserfs nowin nptl nptlonly oggvorbis ooo-kde opengl oss pam pdf pdflib perl pic plotutils png ppds python qhull qt quicktime readline rtc samba sdl serial slang smime sndfile speex spell sse sse2 ssl svg svga tcltk tcpd tga theora threads tidy tiff truetype truetype-fonts type1-fonts unicode usb userlocales uudeview v4l v4l2 wmf wsconvert xanim xine xinerama xml xml2 xmms xosd xpm xscreensaver xv xvid xvmc yv12 zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 4


SpanKY






          2005-02-28 17:00:25 UTC
        

the additional bugs posted here are unrelated, see Bug 83047




Comment 5


SpanKY






          2005-02-28 17:05:50 UTC
        

could you try setting PATCHVER to 1.2 or 1.3 in the binutils-2.15.92.0.2-r4 ebuild and see if that affects anything ?




Comment 6


Alexander Gabert (RETIRED)






          2005-03-13 19:51:48 UTC
        

please try recompiling binutils without march=athlon-xp and tell me in this bug reports whether the segfaults still remain,

thanks,

Alex




Comment 7


SpanKY






          2005-10-04 20:07:04 UTC
        

see if 2.16.1 works









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

