Title: 85943 – sys-fs/udev-030 fails to provide /dev/mapper/* for dm-mod
URL: https://bugs.gentoo.org/show_bug.cgi?id=85943

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 85943
sys-fs/udev-030 fails to provide /dev/mapper/* for dm-mod
Last modified: 2005-09-01 10:14:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 85943 
      - sys-fs/udev-030 fails to provide /dev/mapper/* for dm-mod


Summary:
sys-fs/udev-030 fails to provide /dev/mapper/* for dm-mod
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       major
      


Assignee:

PPC Porters








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-03-19 14:30 UTC by postmodern





      Modified:
    
2005-09-01 10:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


postmodern





          2005-03-19 14:30:01 UTC
        

sys-fs/udev-030 fails to provide /dev/mapper/* for dm-mod. I tried both enabling and disabling RC_DEVICE_TARBALL but /dev/mapper refuses to appear or any of its contents. Furthermore, /dev/loop* fails to appear with RC_DEVICE_TARBALL disabled, which works on all my non-ppc boxes.

Reproducible: Always
Steps to Reproduce:
1. modprobe dm-mod
2. ls /dev/mapper*
3. modprobe loop
4. ls /dev/loop*

Actual Results:  
$ ls /dev/mapper*
ls: /dev/mapper*: No such file or directory
# with RC_DEVICE_TARBALL="no"
$ ls /dev/loop*  
ls: /dev/loop*: No such file or directory


Expected Results:  
/dev/mapper/control
/dev/loop
/dev/loop[0-9]

Gentoo Base System version 1.4.16
Portage 2.0.51.19 (default-linux/ppc/2004.3, gcc-3.4.3, glibc-2.3.4.20041102-r1,
2.6.10-gentoo-r6 ppc)
=================================================================
System uname: 2.6.10-gentoo-r6 ppc 750FX
Python:              dev-lang/python-2.2.3-r6,dev-lang/python-2.3.4-r1 [2.3.4
(#1, Feb 23 2005, 01:42:26)]
dev-lang/python:     2.2.3-r6, 2.3.4-r1
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.8.5-r3, 1.6.3, 1.7.9-r1, 1.4_p6, 1.9.4
sys-devel/binutils:  2.15.90.0.3-r3
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.4.22
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CFLAGS="-mcpu=750 -O3 -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-mcpu=750 -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa berkdb bitmap-fonts crypt dvd emboss esd fam flac font-server
fortran gdbm gif gtk gtk2 imlib jpeg mozilla mp3 ncurses network nls oggvorbis
opengl pam perl png ppc python readline samba speex spell sqlite ssl theora tiff
truetype truetype-fonts type1-fonts unicode xml2 xprint xv zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Joe Jezak (RETIRED)






          2005-03-24 20:59:20 UTC
        

We probably should bump udev-045 to stable to fix this, we're the only arch that hasn't yet.

If any ppc-devs have a problem with bumping to 045, comment on this bug.




Comment 2


postmodern





          2005-03-25 23:03:48 UTC
        

I tested out udev-045 which works on my other non-ppc box but even then it fails to present the files/directories on my ppc box. All packages / config files were updated and RC_DEV_TARBALL was set to "no".




Comment 3


Joe Jezak (RETIRED)






          2005-03-25 23:48:56 UTC
        

Marked udev-045 stable which should fix this problem.  Reopen the bug if there are any further issues.




Comment 4


postmodern





          2005-03-25 23:52:35 UTC
        

see comment #2




Comment 5


Lars Weiler (RETIRED)






          2005-05-07 18:55:12 UTC
        

Can you test a newer version of udev (which is currently testing)?  I don't have any problems with dm-mod on my system.  Every device is created as expected.




Comment 6


postmodern





          2005-05-08 14:44:42 UTC
        

I tested udev-050 and up and all did not create the loop[0-9] or mapper nodes after modprobing them. File System kernel config and /etc/conf.d/rc are identical to my other working archs that use udev-045.




Comment 7


Jakub Moc (RETIRED)






          2005-05-12 20:19:44 UTC
        

Well, why 050? Try 056. ;-)




Comment 8


postmodern





          2005-05-13 03:48:02 UTC
        

Amazingly, 056 also does not work for me.




Comment 9


Joe Jezak (RETIRED)






          2005-06-12 05:56:15 UTC
        

I finally got a chance to test this, and I also am not having a problem with
dm-mod/loop appearing.  Are you sure you have no custom udev rules set that may
be breaking this? I'm not sure what else to suggest.




Comment 10


Joe Jezak (RETIRED)






          2005-09-01 10:14:57 UTC
        

Please reopen if you're still having a problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

