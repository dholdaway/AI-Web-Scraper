Title: 162961 – compiling >=media-libs/libsdl-1.2.9 with CFLAGS="-O2" crashes media-tv/freevo
URL: https://bugs.gentoo.org/show_bug.cgi?id=162961

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 162961
compiling >=media-libs/libsdl-1.2.9 with CFLAGS="-O2" crashes media-tv/freevo
Last modified: 2007-02-20 23:09:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 162961 
      - compiling >=media-libs/libsdl-1.2.9 with CFLAGS="-O2" crashes media-tv/freevo


Summary:
compiling >=media-libs/libsdl-1.2.9 with CFLAGS="-O2" crashes media-tv/freevo
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-20 18:33 UTC by Christian Aistleitner





      Modified:
    
2007-02-20 23:09 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




libsdl-1.2.11-r2

              (libsdl-1.2.11-r2.ebuild,4.82 KB,
                text/plain)

            
2007-01-20 18:39 UTC,

            Christian Aistleitner




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christian Aistleitner





          2007-01-20 18:33:35 UTC
        

After emerging >=media-libs/libsd-1.2.9 with optimation other than 0 in CFLAGS, starting freevo crashes with

Fatal Python error: (pygame parachute) Segmentation Fault

However, the problem is neither freevo nor pygame, but a broken (due to optimization) libsdl. Other pygame programs ran without any problems. Only freevo crashes.

Reproducible: Always

Steps to Reproduce:




Portage 2.1.2-r1 (default-linux/amd64/2006.1, gcc-3.4.6, glibc-2.5-r0, 2.6.19-gentoo-r2 x86_64)
=================================================================
System uname: 2.6.19-gentoo-r2 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.12.9
Timestamp of tree: Sat, 20 Jan 2007 01:30:01 +0000
dev-java/java-config: 1.3.7, 2.0.31-r3
dev-lang/python:     2.3.6, 2.4.4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.19.2-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.inode.at/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo"
LANG="de_AT.UTF-8"
LC_ALL="de_AT.UTF-8"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/download/portage-gisi /download/portage-gentoo-de"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 aac aalib accessibility acl acpi aim alsa amd64 apache2 apm audacious audiofile avi berkdb bitmap-fonts bluetooth bonobo bzip2 cairo cardclient cdb cdr cli conax constcw cpdflib cracklib crypt ctype cups dbus de_tvtoday dga dio divx4linux dlloader doc dri dvb dvd dvdr dvi emacs encode evo exif fam ffmpeg firefox flac foomaticdb freetype ftp gb gdbm gif gimp gimpprint gmp gnome gnutls gpm gstreamer gtk gtk2 gtkhtml iconf iconv icq imagemagick imap imlib irdeto isdnlog jabber java javascript joystick jpeg junit ldap libg++ libnotify lirc lm_sensors mad maildir matrox mcal mikmod mime mng motif mp3 mpeg msn mule mysql mysqli nagra nautilus ncurses nls nocd nptl nptlonly offensive ogg openal opengl oscar pam pcre pda pdf pdflib perl plotutils png posix ppds pppd python quicktime readline recode reflection samba sc sdl seca session setup-plugin shl slang slp sndfile sockets softcsa sound speex spell spl ssl submenu subtitles svg sysvipc tcpd tetex theora tidy tiff truetype truetype-fonts type1-fonts udev unicode update usb v4l v4l2 vfat viaccess vorbis wmf x264 xine xml xml2 xorg xosd xpm xsl xv xvid yaepg yahoo zlib" ALSA_CARDS="emu10k1,bt87x,via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de" LIRC_DEVICES="livedrive_midi" USERLAND="GNU" VIDEO_CARDS="nv nvidia s3 mga vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Christian Aistleitner





          2007-01-20 18:39:59 UTC
        

Created attachment 107567 [details]
libsdl-1.2.11-r2

This ebuild compiles libsdl-1.2.11 while filtering out -O? CFLAGS.
Using this ebuild to compile libsdl, freevo runs without any trouble.




Comment 2


Matteo Azzali (RETIRED)






          2007-01-21 16:57:55 UTC
        

I bet this applies only to amd64, on x86 there isn't this bug at all.....




Comment 3


Tristan Heaven (RETIRED)






          2007-02-02 17:56:58 UTC
        

Comment on attachment 107567 [details]
libsdl-1.2.11-r2

Try upgrading GCC

http://www.gentoo.org/doc/en/gcc-upgrading.xml




Comment 4


SpanKY






          2007-02-20 23:09:10 UTC
        

get back to us if gcc-4.1.1 doesnt work ... works for me on amd64









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

