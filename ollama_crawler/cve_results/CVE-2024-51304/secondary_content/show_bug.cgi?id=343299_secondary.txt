Title: 343299 – =net-libs/xulrunner-1.9.2.12: epatch fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=343299

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 343299
=net-libs/xulrunner-1.9.2.12: epatch fails
Last modified: 2010-10-31 21:08:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 343299 
      - =net-libs/xulrunner-1.9.2.12: epatch fails


Summary:
=net-libs/xulrunner-1.9.2.12: epatch fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-10-29 23:02 UTC by Albert W. Hopkins





      Modified:
    
2010-10-31 21:08 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,3.71 KB,
                text/plain)

            
2010-10-29 23:03 UTC,

            Albert W. Hopkins




Details





build.log

              (build.log,2.56 KB,
                text/plain)

            
2010-10-29 23:04 UTC,

            Albert W. Hopkins




Details





emerge -pqv

              (emerge_pqv_net-libs_xulrunner-1.9.2.12.txt,173 bytes,
                text/plain)

            
2010-10-29 23:04 UTC,

            Albert W. Hopkins




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Albert W. Hopkins





          2010-10-29 23:02:59 UTC
        

* Failed Patch: bug-606109.patch !
 *  ( /portage/net-libs/xulrunner/files/bug-606109.patch )
 * 

$ cat /var/tmp/portage/net-libs/xulrunner-1.9.2.12/temp/bug-606109.patch.out
***** bug-606109.patch *****

============================

PATCH COMMAND:  patch -p0 -g0 -E --no-backup-if-mismatch < '/portage/net-libs/xulrunner/files/bug-606109.patch'

============================
can't find file to patch at input line 9
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|# HG changeset patch
|# User Jory A. Pratt <anarchy@gentoo.org>
|# Parent 74e4421e0a30c6e21b594675e32a8d9d663c309c
|Add missing ifde MOZ_MEDIA
|
|diff --git a/content/base/src/nsContentSink.cpp b/content/base/src/nsContentSink.cpp
|--- a/content/base/src/nsContentSink.cpp
|+++ b/content/base/src/nsContentSink.cpp
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored
============================

PATCH COMMAND:  patch -p1 -g0 -E --no-backup-if-mismatch < '/portage/net-libs/xulrunner/files/bug-606109.patch'

============================
patching file content/base/src/nsContentSink.cpp
Hunk #1 FAILED at 1860.
Hunk #2 FAILED at 1952.
2 out of 2 hunks FAILED -- saving rejects to file content/base/src/nsContentSink.cpp.rej
============================

PATCH COMMAND:  patch -p2 -g0 -E --no-backup-if-mismatch < '/portage/net-libs/xulrunner/files/bug-606109.patch'

============================
can't find file to patch at input line 9
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|# HG changeset patch
|# User Jory A. Pratt <anarchy@gentoo.org>
|# Parent 74e4421e0a30c6e21b594675e32a8d9d663c309c
|Add missing ifde MOZ_MEDIA
|
|diff --git a/content/base/src/nsContentSink.cpp b/content/base/src/nsContentSink.cpp
|--- a/content/base/src/nsContentSink.cpp
|+++ b/content/base/src/nsContentSink.cpp
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored
============================

PATCH COMMAND:  patch -p3 -g0 -E --no-backup-if-mismatch < '/portage/net-libs/xulrunner/files/bug-606109.patch'

============================
can't find file to patch at input line 9
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|# HG changeset patch
|# User Jory A. Pratt <anarchy@gentoo.org>
|# Parent 74e4421e0a30c6e21b594675e32a8d9d663c309c
|Add missing ifde MOZ_MEDIA
|
|diff --git a/content/base/src/nsContentSink.cpp b/content/base/src/nsContentSink.cpp
|--- a/content/base/src/nsContentSink.cpp
|+++ b/content/base/src/nsContentSink.cpp
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored
============================

PATCH COMMAND:  patch -p4 -g0 -E --no-backup-if-mismatch < '/portage/net-libs/xulrunner/files/bug-606109.patch'

============================
can't find file to patch at input line 9
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|# HG changeset patch
|# User Jory A. Pratt <anarchy@gentoo.org>
|# Parent 74e4421e0a30c6e21b594675e32a8d9d663c309c
|Add missing ifde MOZ_MEDIA
|
|diff --git a/content/base/src/nsContentSink.cpp b/content/base/src/nsContentSink.cpp
|--- a/content/base/src/nsContentSink.cpp
|+++ b/content/base/src/nsContentSink.cpp
--------------------------
No file to patch.  Skipping patch.
2 out of 2 hunks ignored




Comment 1


Albert W. Hopkins





          2010-10-29 23:03:46 UTC
        

Created attachment 252523 [details]
emerge --info




Comment 2


Albert W. Hopkins





          2010-10-29 23:04:08 UTC
        

Created attachment 252525 [details]
build.log




Comment 3


Albert W. Hopkins





          2010-10-29 23:04:28 UTC
        

Created attachment 252527 [details]
emerge -pqv




Comment 4


Jory A. Pratt






          2010-10-31 02:38:40 UTC
        

I have tested this twice now and patch has applied fine both times. Please sync up and retest.




Comment 5


Albert W. Hopkins





          2010-10-31 11:09:42 UTC
        

I've tried syncing several times and it still happens.




Comment 6


Jory A. Pratt






          2010-10-31 14:36:13 UTC
        

(In reply to comment #5)
> I've tried syncing several times and it still happens.
> 

I have double checked with a few of my herd members and they are all reporting same results to me. What version of patch do you have installed? Did you completely remove ${PORTSDIR}/net-libs/xulrunner and sync again?




Comment 7


Albert W. Hopkins





          2010-10-31 20:07:26 UTC
        

(In reply to comment #6)
> I have double checked with a few of my herd members and they are all reporting
> same results to me. What version of patch do you have installed? Did you
> completely remove ${PORTSDIR}/net-libs/xulrunner and sync again?

Am using patch-2.6.1.  I did downgrade to patch-2.5.9-r1 but experienced the same issue.  I did remove the xulrunner directory and re-sync.

I am using the portage-2.2 series and I even tried downgrading to 2.1, but still the same issue.

I now have this issue reproducible on two different systems, that synced from two different servers.  I will continue to look into it.  Perhaps an emerge -e world will fix it.






Comment 8


Albert W. Hopkins





          2010-10-31 20:21:06 UTC
        

This is my fault.

I had reported bug #341901.  A patch was proposed.  I tested it by monkey-patching the ebuild via /etc/portage/env... and after it started working I had since forgotten about it.  Well this patch was the same as bug-606109.patch so it was attempting to apply it twice.

Well I have learned a lesson.  Sorry to waste your time.





Comment 9


Jory A. Pratt






          2010-10-31 21:08:48 UTC
        

(In reply to comment #8)
> This is my fault.
> 
> I had reported bug #341901.  A patch was proposed.  I tested it by
> monkey-patching the ebuild via /etc/portage/env... and after it started working
> I had since forgotten about it.  Well this patch was the same as
> bug-606109.patch so it was attempting to apply it twice.
> 
> Well I have learned a lesson.  Sorry to waste your time.
> 
Yeah we use the upstream bug numbers when we place them in the tree, this has actually already landed on firefox-1.9.2.13 but it will not be released for a few weeks hopefully. Sorry for the confusion.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

