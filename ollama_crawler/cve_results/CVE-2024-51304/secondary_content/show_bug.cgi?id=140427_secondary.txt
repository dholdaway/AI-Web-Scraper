Title: 140427 – ipw2200-1.1.3 build fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=140427

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 140427
ipw2200-1.1.3 build fails
Last modified: 2006-07-21 08:39:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 140427 
      - ipw2200-1.1.3 build fails


Summary:
ipw2200-1.1.3 build fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Christian Heim (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

141262

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-07-14 17:15 UTC by David Olson





      Modified:
    
2006-07-21 08:39 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jacques.hullu
mobile+disabled









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,2.58 KB,
                text/plain)

            
2006-07-14 17:20 UTC,

            David Olson




Details





.config

              (config-2.6.16-gentoo-r9,35.56 KB,
                text/plain)

            
2006-07-15 10:10 UTC,

            David Olson




Details





ebuild patch 

              (ipw2200-1.1.3.ebuild.patch,1.01 KB,
                patch)

            
2006-07-16 02:06 UTC,

            Alex Klymov




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Olson





          2006-07-14 17:15:49 UTC
        

I'm using gcc 4.1.0 and glibc 2.4 with kernel 2.6.16-r9.

emerge ipw2200-1.1.3 fails with this error:

 * Preparing ipw2200 module
make -C /usr/src/linux M=/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3 modules
make[1]: Entering directory `/usr/src/linux-2.6.16-gentoo-r9'
  CC [M]  /var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.o
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c: In function 'ipw_wpa_set_auth_algs':
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c:6502: error: 'WLAN_AUTH_LEAP' undeclared (first use in this function)
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c:6502: error: (Each undeclared identifier is reported only once
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c:6502: error: for each function it appears in.)
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c: In function 'ipw_associate_network':
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c:7773: error: 'WLAN_AUTH_LEAP' undeclared (first use in this function)
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c: In function 'ipw_pci_probe':
/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.c:12273: error: 'struct ieee80211_device' has no member named 'is_qos_active'
make[2]: *** [/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3/ipw2200.o] Error 1
make[1]: *** [_module_/var/tmp/portage/ipw2200-1.1.3/work/ipw2200-1.1.3] Error 2make[1]: Leaving directory `/usr/src/linux-2.6.16-gentoo-r9'
make: *** [modules] Error 2

!!! ERROR: net-wireless/ipw2200-1.1.3 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  ipw2200-1.1.3.ebuild, line 72:   Called linux-mod_src_compile
  linux-mod.eclass, line 515:   Called die

!!! Unable to make  KSRC=/usr/src/linux KSRC_OUTPUT=/usr/src/linux IEEE80211_INC=/usr/include all.
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 1


David Olson





          2006-07-14 17:20:52 UTC
        

Created attachment 91744 [details]
emerge --info




Comment 2


Christian Heim (RETIRED)






          2006-07-15 01:57:06 UTC
        

Works for me. Could you please attach your .config ?




Comment 3


David Olson





          2006-07-15 10:10:59 UTC
        

Created attachment 91797 [details]
.config

I should note that this is an upgrade--I've been using the 1.1.2-r1 ebuild without problem.  Perhaps I should upgrade the kernel?




Comment 4


David Olson





          2006-07-15 11:13:32 UTC
        

Kernel upgrade seems to work fine.  It emerged, and is running great.




Comment 5


Christian Heim (RETIRED)






          2006-07-15 13:10:17 UTC
        

So you're issue is fixed then ?




Comment 6


Alex Klymov





          2006-07-16 02:06:26 UTC
        

Created attachment 91865 [details, diff]
ebuild patch 

In my case it was trying to look for ieee80211 kernel modules in a wrong place //lib/modules/`uname -r`/net/ieee80211/ieee80211.ko 
instead of
/lib/modules/`uname -r`/kernel/drivers/net/ieee80211/ieee80211.ko
this patch fixes the problem.




Comment 7


Christian Heim (RETIRED)






          2006-07-16 09:33:14 UTC
        

(In reply to comment #6)
> Created an attachment (id=91865) [edit]
> ebuild patch 
> 
> In my case it was trying to look for ieee80211 kernel modules in a wrong place
> /lib/modules/`uname -r`/net/ieee80211/ieee80211.ko 
> instead of
> /lib/modules/`uname -r`/kernel/drivers/net/ieee80211/ieee80211.ko
> this patch fixes the problem.

It's looking in the right place :) You can't use kernel-side ieee80211 and the ipw2200 from portage. Either use both from portage or use the kernel versions.




Comment 8


jacques hullu





          2006-07-21 08:39:22 UTC
        

*** Bug 141262 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

