Title: 190691 – sys-apps/coreutils - segmentation fault with dd when sending SIGUSR1
URL: https://bugs.gentoo.org/show_bug.cgi?id=190691

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 190691
sys-apps/coreutils - segmentation fault with dd when sending SIGUSR1
Last modified: 2007-10-14 22:13:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 190691 
      - sys-apps/coreutils - segmentation fault with dd when sending SIGUSR1


Summary:
sys-apps/coreutils - segmentation fault with dd when sending SIGUSR1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-29 20:00 UTC by Christian Korff





      Modified:
    
2007-10-14 22:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



esigra









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christian Korff





          2007-08-29 20:00:38 UTC
        

# gdb dd
GNU gdb 6.6
Copyright (C) 2006 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu"...
Using host libthread_db library "/lib/tls/libthread_db.so.1".
(gdb) run if=/dev/zero of=/dev/sdf bs=64k
Starting program: /bin/dd if=/dev/zero of=/dev/sdf bs=64k
warning: shared library handler failed to enable breakpoint

Program received signal SIGUSR1, User defined signal 1.
0x0000000000429192 in write ()
(gdb) bt
#0  0x0000000000429192 in write ()
#1  0x0000000000400b37 in iwrite ()
#2  0x00000000004019ae in dd_copy ()
#3  0x000000000040256b in main ()
#4  0x0000000000406122 in __libc_start_main ()
#5  0x00000000004001fa in _start ()
(gdb) cont
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0x000000000040097c in siginfo_handler ()
(gdb) bt
#0  0x000000000040097c in siginfo_handler ()
#1  0x0000000000000000 in ?? ()

For those who aren't dd experts such as myself I quote dd --help:
Sending a USR1 signal to a running `dd' process makes it
print I/O statistics to standard error and then resume copying.

Since dd needs a lot lot of time, I'd like to user this but it seems to be bugg

# emerge --info
Portage 2.1.2.12 (hardened/amd64/multilib, gcc-3.4.6, glibc-2.3.6-r5, 2.6.20-hardened-r6 x86_64)
=================================================================
System uname: 2.6.20-hardened-r6 x86_64 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System release 1.12.9
Timestamp of tree: Mon, 27 Aug 2007 23:00:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=nocona -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/mpd/conf /usr/NX/etc /usr/NX/home /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php4/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php4/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php4/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=nocona -pipe"
DISTDIR="/usr/src/portage-distfiles"
FEATURES="autoconfig ccache confcache distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms splitdebug strict userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://gentoo.tiscali.nl/ http://gentoo.mneisen.org/ http://mirror.switch.ch/ftp/mirror/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
LANG="de_DE.utf8"
LC_ALL="de_DE.utf8"
LINGUAS="fr de en_GB"
PKGDIR="/usr/local/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/tmp/portage"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="16bit 7zip X a52 aac aalib accessibility acct ace acl acpi activefilter adsl agg aiglx aim akode alsa amd64 amr amuled animgif ao aoss arj arts auth avantgo avi background bash-completion berkdb bluetooth bonjour bzip2 cairo calendar canna cap capi cdda cddb cdparanoia cdr cdrom cgi charconv chardet chipcard chipcard2 chm cjk cracklib crypt cups dmx dri dts dv dvb dvd dvdr dvdread enca esd eurofile fax flac gdbm geoip gif gimpprint gpm gps gtk hardened ipv6 jpeg jpeg2k justify kerberos lame ldap libcaca midi mng mp3 mpeg multilib ncurses nls nptl nptlonly ogg opengl pam perl pic png python readline sdl sse2 ssl svg tcpd tiff unicode urandom usb vorbis wmf xcb xinerama xml xorg xprint xv zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse vmmouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr de en_GB" USERLAND="GNU" VIDEO_CARDS="ati dummy fbdev i810 mach64 nv r128 s3 s3virge sis v4l vesa vga via vmware radeon"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


SpanKY






          2007-10-14 22:13:49 UTC
        

please test with current stable packages









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

