Title: 270255 – net-misc/asterisk-1.2.32 build fails with -postgres: error: libpq-fe.h: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=270255

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 270255
net-misc/asterisk-1.2.32 build fails with -postgres: error: libpq-fe.h: No such file or directory
Last modified: 2009-09-04 13:07:28 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 270255 
      - net-misc/asterisk-1.2.32 build fails with -postgres: error: libpq-fe.h: No such file or directory


Summary:
net-misc/asterisk-1.2.32 build fails with -postgres: error: libpq-fe.h: No su...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Tony Vroon (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-18 08:58 UTC by Leonid Podolny





      Modified:
    
2009-09-04 13:07 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



dabbott
voip+disabled









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,120.55 KB,
                text/plain)

            
2009-05-18 09:01 UTC,

            Leonid Podolny




Details





emerge.info

              (emerge.info,4.96 KB,
                text/plain)

            
2009-05-18 09:02 UTC,

            Leonid Podolny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Leonid Podolny





          2009-05-18 08:58:45 UTC
        

Even though "postgres" USE flag is off, the build tries to include libpq-fe.h and fails.

cdr_pgsql.c:43:22: error: libpq-fe.h: No such file or directory
cdr_pgsql.c:67: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
cdr_pgsql.c:68: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
cdr_pgsql.c: In function ‘pgsql_log’:
cdr_pgsql.c:83: error: ‘conn’ undeclared (first use in this function)
cdr_pgsql.c:83: error: (Each undeclared identifier is reported only once
cdr_pgsql.c:83: error: for each function it appears in.)
cdr_pgsql.c:83: warning: implicit declaration of function ‘PQsetdbLogin’
cdr_pgsql.c:84: warning: implicit declaration of function ‘PQstatus’
cdr_pgsql.c:84: error: ‘CONNECTION_BAD’ undeclared (first use in this function)
cdr_pgsql.c:87: warning: implicit declaration of function ‘PQerrorMessage’
cdr_pgsql.c:87: warning: assignment makes pointer from integer without a cast
cdr_pgsql.c:99: warning: implicit declaration of function ‘PQescapeStringConn’
cdr_pgsql.c:139: error: ‘CONNECTION_OK’ undeclared (first use in this function)
cdr_pgsql.c:143: warning: implicit declaration of function ‘PQreset’
cdr_pgsql.c:148: warning: assignment makes pointer from integer without a cast
cdr_pgsql.c:156: error: ‘result’ undeclared (first use in this function)
cdr_pgsql.c:156: warning: implicit declaration of function ‘PQexec’
cdr_pgsql.c:157: warning: implicit declaration of function ‘PQresultStatus’
cdr_pgsql.c:157: error: ‘PGRES_COMMAND_OK’ undeclared (first use in this function)
cdr_pgsql.c:158: warning: implicit declaration of function ‘PQresultErrorMessage’
cdr_pgsql.c:158: warning: assignment makes pointer from integer without a cast
cdr_pgsql.c:169: warning: assignment makes pointer from integer without a cast
cdr_pgsql.c: In function ‘my_unload_module’:
cdr_pgsql.c:189: error: ‘conn’ undeclared (first use in this function)
cdr_pgsql.c:190: warning: implicit declaration of function ‘PQfinish’
cdr_pgsql.c: In function ‘process_my_load_module’:
cdr_pgsql.c:297: error: ‘conn’ undeclared (first use in this function)
cdr_pgsql.c:298: error: ‘CONNECTION_BAD’ undeclared (first use in this function)
cdr_pgsql.c:302: warning: assignment makes pointer from integer without a cast
make[1]: *** [cdr_pgsql.o] Error 1




Comment 1


Leonid Podolny





          2009-05-18 09:01:00 UTC
        

Created attachment 191631 [details]
build.log




Comment 2


Leonid Podolny





          2009-05-18 09:02:14 UTC
        

Created attachment 191632 [details]
emerge.info




Comment 3


Tony Vroon (RETIRED)






          2009-09-04 13:07:28 UTC
        

I am unable to reproduce this with asterisk-1.2.35; my system configuration:
Portage 2.1.6.13 (default/linux/amd64/2008.0/no-multilib, gcc-4.4.1, glibc-2.10.1-r0, 2.6.31-rc7-00056-g7c0a57d-dirty x86_64)
=================================================================
System uname: Linux-2.6.31-rc7-00056-g7c0a57d-dirty-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T9400_@_2.53GHz-with-gentoo-2.0.1
Timestamp of tree: Unknown
app-shells/bash:     4.0_p28
dev-java/java-config: 1.3.7-r1, 2.1.9
dev-lang/python:     2.4.4-r6, 2.5.4-r2, 2.6.2-r1, 3.1.1
dev-python/pycrypto: 2.0.1-r8
dev-util/cmake:      2.6.4-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.1
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -mtune=native -pipe -D_FORTIFY_SOURCE=2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=native -mtune=native -pipe -D_FORTIFY_SOURCE=2"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms sign strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.virginmedia.com"
LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"
LDFLAGS="-Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/cvs/gentoo-x86"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="cvs://chainsaw@cvs.gentoo.org:/var/cvsroot"
USE="16bit 16bit-indices 7zip S3TC X a52 aac aalib ace acpi adns adplug aesicm aio alac alsa amd64 amr amrnb amrwb animgif aotuv applet archive aspell async asyncns audacious audiofile autoipd avahi bash-completion berkdb binary-drivers binfilter bluetooth bonjour bs2b bzip2 cairo calendar canberra caps cardbus cdaudio cdda cddb cdparanoia cdr cdrkit cdrom chardet chipcard chm cleartype cli consolekit cpio cracklib crypt css cups curl dbus device-mapper dhcp dhcpcd dirac disk-partition diskio divx djvu dmi dns dri drm dtmf dts dv dvd dvdr dvi ecc eds elf enca encode epiphany erandom exif exiv2 expat fam fat fax fbcon fbcondecor ffmpeg fftw flac fortran ftp fuse g15 galago gconf gcrypt gd gdbm gdl gdm gedit gif gimp glib glitz glut gmedia gnome gnome-keyring gnutls gpg gphoto2 gs gsf gsm gstreamer gtk gzip h224 h281 h323 hal hddtemp hdri hfs howl-compat hpn ical icons iconv id3 id3tag idle idn ieee1394 imagemagick imap imlib inkjar inotify ipod ipv6 irda isdnlog ivr jabber java jbig jce john jpeg jpeg2k juju keyring lame laptop lcms ldap libburn libcaca libgcrypt libnotify libsamplerate libsexy libssh2 libwww libyaml lilo logrotate lzma lzo mad magic mail md5sum mdnsresponder-compat mikmod mime mjpeg mmap mmx mmxext mng modplug moonlight mp2 mp3 mp4 mpeg mplayer mudflap musepack music nano-syntax nautilus ncurses nemesi neon network-cron networkmanager nls nptl nptlonly nsplugin nss nut nuv nvidia ogg opencore-amr opengl openmp openssl otr ots pam pango pccts pcmcia pcre pdf perl physfs pidgin pipechan plotutils png pnm policykit posix postscript ppds pppd pulseaudio python qos rar rdesktop readline reflection remote replytolist resolvconf rfc4175 rss rtc samba sbc scenarios schroedinger screenshot scrobbler sdl session sftp shorten sid sip sipim smp sms sndfile snmp soup sourceview sox span speex spell spl sqlite srt srtp srv sse sse2 sse3 ssl ssse3 startup-notification subtitles svg svgz sysfs syslog szip t1lib taglib tagwriting targrey tcpd telnet theora thesaurus threads tiff timidity tk tls tordns totem tracker trayicon truetype tta tts twolame unicode urandom usb v4l2 vcd vnc vorbis vorbis-psy vte vxml wav wavpack webkit wifi wma wmf wmp x264 xcap xcb xcomposite xface xhtml xinerama xml xmp xorg xpm xscreensaver xsettings xslt xulrunner xv xvid xvmc yv12 zeroconf zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="intel"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

If you can make this occur on 1.2.35; please reopen and do not omit emerge --info that time. Thank you.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

