Title: 179046 – apache-2.2.4-r1 fails with "more then one mpm was specified"
URL: https://bugs.gentoo.org/show_bug.cgi?id=179046

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179046
apache-2.2.4-r1 fails with "more then one mpm was specified"
Last modified: 2007-05-19 22:10:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179046 
      - apache-2.2.4-r1 fails with "more then one mpm was specified"


Summary:
apache-2.2.4-r1 fails with "more then one mpm was specified"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Apache Team - Bugzilla Reports








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-18 21:29 UTC by Vladimir G. Ivanovic





      Modified:
    
2007-05-19 22:10 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Output of `emerge --info'

              (emerge.info,12.76 KB,
                text/plain)

            
2007-05-18 21:31 UTC,

            Vladimir G. Ivanovic




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vladimir G. Ivanovic





          2007-05-18 21:29:22 UTC
        

Emerge says:

  [ebuild   R   ] net-www/apache-2.2.4-r1  USE="doc ldap mpm-event ssl threads   
  -debug -mpm-itk% -mpm-peruser -mpm-prefork -mpm-worker -no-suexec (-selinux) 
  -static-modules" 0 kB 

It sure looks to me that only 1 MPM has been specified, but the ebuild errors out with a 

  "You have selected more then one mpm USE-flag. Only one MPM is supported."

message unless I apply the following patch:

*** apache-2.2.4-r1.ebuild.~1~  Fri May 18 01:35:59 2007
--- apache-2.2.4-r1.ebuild      Fri May 18 14:16:29 2007
***************
*** 50,55 ****
--- 50,56 ----
  
        # select our MPM
        MPM_LIST="event itk peruser prefork worker"
+       mpm=""
        for x in ${MPM_LIST} ; do
                if use mpm-${x} ; then
                        if [[ "x${mpm}" == "x" ]] ; then

(Typo:  apache-2.2.4-r1.ebuild, line 60: "then" -> "than")




Comment 1


Vladimir G. Ivanovic





          2007-05-18 21:31:41 UTC
        

Created attachment 119645 [details]
Output of `emerge --info'




Comment 2


Jakub Moc (RETIRED)






          2007-05-19 06:54:00 UTC
        

Well, you have mpm-worker in emerge --info USE, not really sure what are you doing there, it doesn't match the emerge -pv apache output.




Comment 3


Vladimir G. Ivanovic





          2007-05-19 22:10:29 UTC
        

You're right. (By way of explanation, I copied most of my USE flags from someone else, possibly Duncan on the Gentoo AMD64 list.) I've now taken "mpm-worker" out. 

Regardless, I have in /etc/portage/package.use:

  net-www/apache mpm-event -mpm-worker

which jibes with the mpm-* USE flags actually used: mpm-event -mpm-itk -mpm-peruser -mpm-prefork -mpm-worker

FYI: The value of 'mpm' before I cleared it was "event". I have no idea how that came to be set.

I'm going to close this bug as WORKSFORME because the (re-)emerge of apache-2.2.4-r1 I just did works without having to add 'mpm=""'. I dunno...











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

