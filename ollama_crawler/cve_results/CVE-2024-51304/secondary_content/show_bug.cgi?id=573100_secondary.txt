Title: 573100 – gnome-base/gnome-keyring: daemon writes massive amounts of data do disk
URL: https://bugs.gentoo.org/show_bug.cgi?id=573100

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 573100
gnome-base/gnome-keyring: daemon writes massive amounts of data do disk
Last modified: 2019-10-28 00:40:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 573100 
      - gnome-base/gnome-keyring: daemon writes massive amounts of data do disk


Summary:
gnome-base/gnome-keyring: daemon writes massive amounts of data do disk
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-01-27 11:19 UTC by PM





      Modified:
    
2019-10-28 00:40 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


PM





          2016-01-27 11:19:55 UTC
        

Now this is a weird one.

Whenever I boot the system and open google-chrome, gnome-keyring-daemon wakes up and proceeds to write close to 1 GB of data... somewhere. 

# cat /proc/`pidof gnome-keyring-daemon`/io
rchar: 54262659
wchar: 971207633
syscr: 28892
syscw: 41068
read_bytes: 1785856
write_bytes: 973275136
cancelled_write_bytes: 0

This is not very healthy for my SSD.

I can't tell what file it's writing to (any tips?), but free disk space doesn't shrink afterwards, so I guess it's writing some temporary files?

I've never actually used gnome-keyring for anything and don't know anything about it. This started happening (I think) after I got rid of KDE and switched to Cinnamon.




Comment 1


PM





          2016-01-27 11:21:27 UTC
        

Portage 2.2.27 (python 3.4.3-final-0, default/linux/amd64/13.0/desktop, gcc-5.3.0, glibc-2.22-r1, 4.4.0-gentoo-r1 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.4.0-gentoo-r1-x86_64-Intel-R-_Core-TM-_i7-4790K_CPU_@_4.00GHz-with-gentoo-2.2
KiB Mem:    16413788 total,  14236684 free
KiB Swap:    4095996 total,   4095996 free
Timestamp of repository gentoo: Wed, 27 Jan 2016 01:00:01 +0000
sh bash 4.3_p42-r1
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
distcc 3.2rc1 x86_64-pc-linux-gnu [disabled]
app-shells/bash:          4.3_p42-r1::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.22.1::gentoo
dev-lang/python:          2.7.11-r2::gentoo, 3.3.5-r7::gentoo, 3.4.3-r7::gentoo, 3.5.1-r2::gentoo
dev-util/cmake:           3.4.3::gentoo
dev-util/pkgconfig:       0.29::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.20.4::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r1::gentoo
sys-devel/automake:       1.4_p6-r2::gentoo, 1.11.6-r2::gentoo, 1.13.4-r1::gentoo, 1.14.1-r1::gentoo, 1.15-r1::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            5.3.0::gentoo
sys-devel/gcc-config:     1.8::gentoo
sys-devel/libtool:        2.4.6-r1::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.4::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r1::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000

dupa
    location: /usr/local/portage/moje
    masters: gentoo
    priority: 0

multimedia
    location: /var/lib/layman/multimedia
    masters: gentoo
    priority: 50

steam-overlay
    location: /var/lib/layman/steam-overlay
    masters: gentoo
    priority: 50

sunrise
    location: /var/lib/layman/sunrise
    masters: gentoo
    priority: 50

Installed sets: @system
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=native -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0 /usr/share/themes/oxygen-gtk/gtk-3.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.0/ext-active/ /etc/php/cgi-php7.0/ext-active/ /etc/php/cli-php7.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O3 -march=native -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--keep-going --quiet-build=n --autounmask-write"
FCFLAGS="-O3 -march=native -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O3 -march=native -pipe"
GENTOO_MIRRORS="http://gentoo.prz.rzeszow.pl ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo ftp://91.121.189.201/gentoo-distfiles/ ftp://gentoo.imj.fr/pub/gentoo/ ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="pl_PL.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X Xaw3d a52 aac aalib acl acpi adobe-cff aes alsa amd64 amr amrnb amrwb apng async audiofile automount avahi avresample avx avx2 bash-completion berkdb bfq bidi bineditor bluetooth bluray branding bzip2 c++0x cairo cdda cddb cdparanoia chdir clang cli consolekit cracklib crypt css cuda cups curl cxx dbus dirac disk-partition divx djvu dri dts dvd dvdr ebook editor efi emboss emovix enca encode exchange exif faac faad fam fat fdk ffmpeg fftw firefox firefox3 flac fma3 fontconfig fortran fribidi g3dvl gd gdbm geoip gif glamor glitz gmedia gnuplot gold gphoto2 gpm gtk gtkstyle hddtemp iconv id3 id3tag imagemagick inotify iostats ipod jpeg kde4 kdehiddenvisibility kipi kompare kpathsea kqemu ladspa lame laptop lastfm latex lcms libass libcaca libnotify libsamplerate lldb lm_sensors lto lzma lzo mad matroska midi mjpeg mmap mmx mmxext mng modules moodbar mp3 mp3tunes mp4 mpeg mplayer mtp multilib musicbrainz ncurses networkmanager nls notebook nptl nsplugin ntfs nvidia ogg okteta openal opencl opencore-amr opengl openmp optimized-qmake opus pam pango pch pcre pdf plasma png policykit popcnt portage ppds private-headers pulseaudio python3 qt3 qt3support qt4 qthelp raster readline realmedia roe scanner schroedinger sdl seccomp secure-delete semantic-desktop sensord session shaders slang sndfile solver soundtouch sourceview sparse spell sse sse2 sse3 sse4 sse41 sse4_1 sse4a ssl ssse3 startup-notification steamruntime suid svg swat symlink syslog tcpd theora threads tiff truetype udev udisks unicode upnp upower usb vaapi vamp vcd vdpau vorbis wifi wmf wmp wxwidgets wxwindows x264 xattr xcb xcomposite xml xscreensaver xv xvid xvmc zeroconf zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 ssse3 sse4 sse4_2 sse41 sse4_1 sse42 sse4a aes avx avx2 fma3 popcnt" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="pl" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" QEMU_SOFTMMU_TARGETS="x86_64 i386" QEMU_USER_TARGETS="x86_64 i386" RUBY_TARGETS="ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

gnome-base/gnome-keyring-3.18.3::gentoo was built with the following:
USE="caps filecaps pam ssh-agent -debug (-selinux) -test" ABI_X86="64"




Comment 2


PM





          2016-01-27 11:34:34 UTC
        

Ok, I used fatrace: https://www.piware.de/2012/02/fatrace-report-system-wide-file-access-events/

The trace is flooded with this:

gnome-keyring-d(5991): CW /home/piotrek/.local/share/keyrings/Domyślna_baza_kluczy.keyring
gnome-keyring-d(5991): O /home/piotrek/.local/share/keyrings/.temp-3FW4BY
gnome-keyring-d(5991): W /home/piotrek/.local/share/keyrings/.temp-3FW4BY
gnome-keyring-d(5991): CW /home/piotrek/.local/share/keyrings/Domyślna_baza_kluczy.keyring
gnome-keyring-d(5991): O /home/piotrek/.local/share/keyrings/.temp-T855BY
gnome-keyring-d(5991): W /home/piotrek/.local/share/keyrings/.temp-T855BY
gnome-keyring-d(5991): CW /home/piotrek/.local/share/keyrings/Domyślna_baza_kluczy.keyring
gnome-keyring-d(5991): O /home/piotrek/.local/share/keyrings/.temp-IRR5BY
gnome-keyring-d(5991): W /home/piotrek/.local/share/keyrings/.temp-IRR5BY
gnome-keyring-d(5991): CW /home/piotrek/.local/share/keyrings/Domyślna_baza_kluczy.keyring
gnome-keyring-d(5991): O /home/piotrek/.local/share/keyrings/.temp-VJDKBY
gnome-keyring-d(5991): W /home/piotrek/.local/share/keyrings/.temp-VJDKBY
gnome-keyring-d(5991): CW /home/piotrek/.local/share/keyrings/Domyślna_baza_kluczy.keyring




Comment 3


Sven B.





          2016-01-27 12:29:07 UTC
        

If google-chrome is the issue, you could try launching google-chrome with --password-store=basic as a temporary workaround.




Comment 4


Pacho Ramos






          2016-05-29 12:44:42 UTC
        

Are you still hitting this? Well, I am not sure if maybe launching seahorse from a terminal will show something about your keyring

Also, what is your gnome-keyring version




Comment 5


PM





          2016-05-29 13:30:17 UTC
        

I'm still hitting this on google-chrome-50.0.2661.102 and gnome-keyring-3.18.3

Launching seahorse from the console only prints one line:

    seahorse-Message: unsupported key server uri scheme: ldap

and doesn't trigger this bug.




Comment 6


Matt Turner






          2019-10-28 00:40:55 UTC
        

> p50-ethernet ~ # cat /proc/`pidof gnome-keyring-daemon`/io
> rchar: 91500
> wchar: 76552
> syscr: 2241
> syscw: 3788
> read_bytes: 1105920
> write_bytes: 53248
> cancelled_write_bytes: 4096

So I'm not seeing this.

Are you still seeing this problem your system?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

