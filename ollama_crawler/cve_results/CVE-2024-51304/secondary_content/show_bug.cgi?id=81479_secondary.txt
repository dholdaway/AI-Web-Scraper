Title: 81479 – updated xorg.conf breaks tk library
URL: https://bugs.gentoo.org/show_bug.cgi?id=81479

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 81479
updated xorg.conf breaks tk library
Last modified: 2005-05-24 01:13:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 81479 
      - updated xorg.conf breaks tk library


Summary:
updated xorg.conf breaks tk library
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-10 03:24 UTC by Thomas Maguin





      Modified:
    
2005-05-24 01:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tcltk









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Maguin





          2005-02-10 03:24:19 UTC
        

An updated xorg-x11-6.8.0-r4 with updated xorg.conf breaks tk library. Programs like nxtvepg don't work anymore.
new xorg.conf must be modified:
is: RgbPath "/etc/lib/X11/rgb" 
should be: RgbPath "/usr/X11R6/lib/X11/rgb"

Reproducible: Always
Steps to Reproduce:
1. update xorg.conf
2. start nxtvepg
3.

Actual Results:  
program does nit start:

Failed to initialise the Tk library at '/usr/lib/tk8.4' - exiting.
Tk error message: this isn't a Tk applicationunknown color name "Black" 

Expected Results:  
start and work properly.

Portage 2.0.51-r15 (default-linux/x86/2004.3, gcc-3.4.3,
glibc-2.3.4.20041102-r0, 2.6.11-rc3-nitro0 i686)
=================================================================
System uname: 2.6.11-rc3-nitro0 i686 AMD Athlon XP-M
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb  7 2005, 13:28:56)]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r1, 2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=athlon-xp -mtune=athlon-xp -mfpmath=sse -mmmx -ffast-math -O3
-fomit-frame-pointer -funroll-loops -falign-loops=5 -falign-jumps=5 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config
/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown
/usr/kde/3/share/config/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref
/usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -mtune=athlon-xp -mfpmath=sse -mmmx -ffast-math -O3
-fomit-frame-pointer -funroll-loops -falign-loops=5 -falign-jumps=5 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig buildpkg ccache distlocks fixpackages sandbox
sfperms"
GENTOO_MIRRORS="ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/
rsync://ftp.belnet.be/gentoo/ ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo/"
LANG="en_US"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowex X a52 aalib alsa apic apm arts audiofile avi berkdb
bitmap-fonts cdparanoia cdr crypt cups dga divx4linux doc dvd dvdr dvdread
encode esd exif f77 fam flac font-server foomaticdb fortran freetype gdbm gif
gphoto2 gpm gtkgtk2 gtkhtml imagemagick imap imlib ipv6 jack java jpeg junit kde
libg++ libwwwlirc live mad makecheck mikmod mjpeg mmx mmx2 mmxext motif mozilla
mp3 mpeg mysql ncurses network nls nptl nptlonly oggvorbis opengl oss pam pdflib
perl png ppds python qt quicktime readline real rtc samba scanner sdl slang
speex spell ssessl svga tcltk tcpd tetex tiff transcode truetype truetype-fonts
type1-fonts unicode usb v4l v4l2 x86 xml xml2 xmms xv xvid zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL




Comment 1


Thomas Maguin





          2005-02-10 03:26:16 UTC
        

Workaround:
new xorg.conf must be modified:
is: RgbPath "/etc/lib/X11/rgb" 
should be: RgbPath "/usr/X11R6/lib/X11/rgb"




Comment 2


Donnie Berkholz (RETIRED)






          2005-02-10 14:04:39 UTC
        

It doesn't change it to /etc. It changes /usr/X11R6 to /usr. Someone must've done the /etc change themselves, because X doesn't do it.

donnie@garlic ~ $ grep Rgb /usr/portage/x11-base/xorg-x11/xorg-x11-6.*
/usr/portage/x11-base/xorg-x11/xorg-x11-6.8.0-r4.ebuild:                       sed -i 's~^\([ \t]*RgbPath[ \t]\+\)"/usr/X11R6/$(get_libdir)/X11/rgb"~\1"/usr/$(get_libdir)/X11/rgb"~' \
/usr/portage/x11-base/xorg-x11/xorg-x11-6.8.1.901.ebuild:                      sed -i 's~^\([ \t]*RgbPath[ \t]\+\)"/usr/X11R6/$(get_libdir)/X11/rgb"~\1"/usr/$(get_libdir)/X11/rgb"~' \
/usr/portage/x11-base/xorg-x11/xorg-x11-6.8.1.901-r1.ebuild:                   sed -i 's~^\([ \t]*RgbPath[ \t]\+\)"/usr/X11R6/$(get_libdir)/X11/rgb"~\1"/usr/$(get_libdir)/X11/rgb"~' \
/usr/portage/x11-base/xorg-x11/xorg-x11-6.8.1.902.ebuild:                      sed -i 's~^\([ \t]*RgbPath[ \t]\+\)"/usr/X11R6/$(get_libdir)/X11/rgb"~\1"/usr/$(get_libdir)/X11/rgb"~' \




Comment 3


Thomas Maguin





          2005-02-10 14:49:01 UTC
        

The change
is: RgbPath "/usr/lib/X11/rgb" 
should be: RgbPath "/usr/X11R6/lib/X11/rgb"




Comment 4


Donnie Berkholz (RETIRED)






          2005-02-10 15:29:14 UTC
        

readlink -f /usr/X11R6/lib.




Comment 5


Ming Zhao (RETIRED)






          2005-02-10 20:24:58 UTC
        

On my box, `ls /usr/X11R6/lib' gave "lib modules", where "lib" was a symlink to "../lib". I thought the expected bahaviour was that /usr/X11R6/lib should be a symlink to /usr/lib, then everything should be OK.




Comment 6


Donnie Berkholz (RETIRED)






          2005-02-10 22:06:25 UTC
        

Yes, that _should_ be the behavior. Seems you hit a bug somewhere.

Give 6.8.1.904 a try (or wait til tomorrow or so and try 6.8.2).




Comment 7


Jeremy Huddleston (RETIRED)






          2005-02-11 10:29:35 UTC
        

Donnie, that's not the expected behavior... Thomas is saying:

# ls -l /usr/X11R6/lib
lib -> ../lib
modules

Ie, X11R6/lib is still there.  This is probably similar to the problem I had a few weeks ago with some . files existing in lib that didn't get moved.  Thomas, can you please do:

find /usr/X11R6/lib




Comment 8


Thomas Maguin





          2005-02-11 12:01:55 UTC
        

# find /usr/X11R6/lib
/usr/X11R6/lib




Comment 9


Donnie Berkholz (RETIRED)






          2005-02-11 15:22:52 UTC
        

Jeremy, I think you misunderstood my comment. I was agreeing with the second half of comment #5.




Comment 10


Donnie Berkholz (RETIRED)






          2005-05-24 01:13:13 UTC
        

Please reopen if you're still reproducing this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

