Title: 302185 – qt4-build.eclass: configure should not print stderr of configure
URL: https://bugs.gentoo.org/show_bug.cgi?id=302185

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 302185
qt4-build.eclass: configure should not print stderr of configure
Last modified: 2010-01-31 17:28:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 302185 
      - qt4-build.eclass: configure should not print stderr of configure


Summary:
qt4-build.eclass: configure should not print stderr of configure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       trivial
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-01-25 15:37 UTC by Martin Mokrejš





      Modified:
    
2010-01-31 17:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bugzilla









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Mokrejš





          2010-01-25 15:37:36 UTC
        

>>> Emerging (10 of 29) x11-libs/qt-script-4.6.0-r1
 * qt-everywhere-opensource-src-4.6.0.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                                                                                   [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                                                                                           [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                                                                                          [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                                                                                         [ ok ]
 * CPV:  x11-libs/qt-script-4.6.0-r1
 * REPO: gentoo
 * USE:  elibc_glibc iconv kernel_linux userland_GNU x86
>>> Unpacking source...
tar xzpf /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/distdir/qt-everywhere-opensource-src-4.6.0.tar.gz qt-everywhere-opensource-src-4.6.0/configure qt-everywhere-opensource-src-4.6.0/LICENSE.GPL3 qt-everywhere-opensource-src-4.6.0/LICENSE.LGPL qt-everywhere-opensource-src-4.6.0/projects.pro qt-everywhere-opensource-src-4.6.0/src/qbase.pri qt-everywhere-opensource-src-4.6.0/src/qt_targets.pri qt-everywhere-opensource-src-4.6.0/src/qt_install.pri qt-everywhere-opensource-src-4.6.0/bin qt-everywhere-opensource-src-4.6.0/config.tests qt-everywhere-opensource-src-4.6.0/mkspecs qt-everywhere-opensource-src-4.6.0/qmake qt-everywhere-opensource-src-4.6.0/src/script/ qt-everywhere-opensource-src-4.6.0/include/Qt/ qt-everywhere-opensource-src-4.6.0/include/QtCore/ qt-everywhere-opensource-src-4.6.0/include/QtScript/ qt-everywhere-opensource-src-4.6.0/src/corelib/ qt-everywhere-opensource-src-4.6.0/src/3rdparty/javascriptcore/
>>> Source unpacked in /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work
>>> Preparing source in /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work/qt-everywhere-opensource-src-4.6.0 ...
 * Applying qt-4.6-nolibx11.diff ...                                                                                                                                                                                            [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work/qt-everywhere-opensource-src-4.6.0 ...
./configure -no-pch -release -no-separate-debug-info -arch i386 -reduce-relocations -platform linux-g++ -stl -verbose -largefile -confirm-license -prefix /usr -bindir /usr/bin -libdir /usr/lib/qt4 -datadir /usr/share/qt4 -docdir /usr/share/doc/qt-4.6.0 -headerdir /usr/include/qt4 -plugindir /usr/lib/qt4/plugins -sysconfdir /etc/qt4 -translationdir /usr/share/qt4/translations -examplesdir /usr/share/qt4/examples -demosdir /usr/share/qt4/demos -silent -fast -opensource -no-exceptions -nomake examples -nomake demos -iconv -script -no-xkb -no-fontconfig -no-xrender -no-xrandr -no-xfixes -no-xcursor -no-xinerama -no-xshape -no-sm -no-opengl -no-nas-sound -no-dbus -no-cups -no-nis -no-gif -no-libpng -no-libmng -no-libjpeg -no-openssl -system-zlib -no-webkit -no-phonon -no-qt3support -no-xmlpatterns -no-freetype -no-libtiff -no-accessibility -no-fontconfig -no-glib -no-opengl -no-svg -no-gtkstyle -I/usr/include/freetype2
Determining system architecture... (Linux:2.6.32:i686)
    32-bit Intel 80x86 (i386)
    'i386' is supported
System architecture: 'i386'
Symbol visibility control enabled.
Symbolic function binding enabled.
[cut]

The next two are just somehow verbose "configure" outputs, I don't think I should care but maybe somebody wants to redirect stderr to build.log?



POSIX iconv auto-detection... ()
i686-pc-linux-gnu-g++ -c -pipe -O2 -march=pentium3 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb -Wall -W  -I../../../mkspecs/linux-g++ -I. -I/usr/include/freetype2 -o iconv.o iconv.cpp
linking iconv
POSIX iconv enabled.
EGL (EGL/egl.h) auto-detection... ()
i686-pc-linux-gnu-g++ -c -pipe -O2 -march=pentium3 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb -Wall -W  -I../../../mkspecs/linux-g++ -I. -I/usr/include/freetype2 -o egl.o egl.cpp
egl.cpp:42:21: error: EGL/egl.h: No such file or directory
egl.cpp: In function ‘int main(int, char**)’:
egl.cpp:46: error: ‘EGLint’ was not declared in this scope
egl.cpp:46: error: expected ‘;’ before ‘x’
egl.cpp:47: error: ‘EGLDisplay’ was not declared in this scope
egl.cpp:47: error: expected ‘;’ before ‘dpy’
egl.cpp:48: error: ‘EGLContext’ was not declared in this scope
egl.cpp:48: error: expected ‘;’ before ‘ctx’
egl.cpp:49: error: ‘dpy’ was not declared in this scope
egl.cpp:49: error: ‘ctx’ was not declared in this scope
egl.cpp:49: error: ‘eglDestroyContext’ was not declared in this scope
gmake: *** [egl.o] Error 1
EGL (EGL/egl.h) disabled.
EGL (GLES/egl.h) auto-detection... ()
i686-pc-linux-gnu-g++ -c -pipe -O2 -march=pentium3 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb -Wall -W  -I../../../mkspecs/linux-g++ -I. -I/usr/include/freetype2 -o egl4gles1.o egl4gles1.cpp
egl4gles1.cpp:42:22: error: GLES/egl.h: No such file or directory
egl4gles1.cpp: In function ‘int main(int, char**)’:
egl4gles1.cpp:46: error: ‘EGLint’ was not declared in this scope
egl4gles1.cpp:46: error: expected ‘;’ before ‘x’
egl4gles1.cpp:47: error: ‘EGLDisplay’ was not declared in this scope
egl4gles1.cpp:47: error: expected ‘;’ before ‘dpy’
egl4gles1.cpp:48: error: ‘EGLContext’ was not declared in this scope
egl4gles1.cpp:48: error: expected ‘;’ before ‘ctx’
egl4gles1.cpp:49: error: ‘dpy’ was not declared in this scope
egl4gles1.cpp:49: error: ‘ctx’ was not declared in this scope
egl4gles1.cpp:49: error: ‘eglDestroyContext’ was not declared in this scope
gmake: *** [egl4gles1.o] Error 1
EGL (GLES/egl.h) disabled.


But, I think that the message ".qmake.vars: No such file or directory" is maybe suspicious:

Testing size of pointers ... (/var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work/qt-everywhere-opensource-src-4.6.0/mkspecs/linux-g++ yes /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work/qt-everywhere-opensource-src-4.6.0 /var/tmp/portage/x11-libs/qt-script-4.6.0-r1/work/qt-everywhere-opensource-src-4.6.0)
rm -f ptrsizetest.o
rm -f *~ core *.core
g++ -c -pipe -O2 -march=pentium3 -mmmx -msse -msse2 -pipe -fno-strict-aliasing -ggdb -Wall -W  -I../../../mkspecs/linux-g++ -I. -o ptrsizetest.o ptrsizetest.cpp
ptrsizetest.cpp: In function ‘int main(int, char**)’:
ptrsizetest.cpp:59: error: ‘PointerSize’ is not a member of ‘QPointerSizeTest<4>’
gmake: *** [ptrsizetest.o] Error 1
Pointer size: 4

Build type:    linux-g++
Architecture:  i386

qmake vars .......... cat: .qmake.vars: No such file or directory
qmake switches ...... 
Build ............... libs tools docs translations
Configuration .......  silent release shared dll largefile stl mmx 3dnow sse sse2 exceptions_off  minimal-config small-config medium-config large-config full-config reduce_exports reduce_relocations ipv6 clock-gettime clock-monotonic mremap getaddrinfo ipv6ifname getifaddrs inotify no-jpeg no-mng no-png no-gif no-tiff system-freetype system-zlib iconv xsync mitshm alsa multimedia script scripttools release
Debug ............... no
[cut]


Am on ~x86 if it really matters.




Comment 1


Peter Volkov (RETIRED)






          2010-01-27 13:14:04 UTC
        

*** Bug 302402 has been marked as a duplicate of this bug. ***




Comment 2


Davide Pesavento (RETIRED)






          2010-01-31 16:57:53 UTC
        

(In reply to comment #0)
> 
> But, I think that the message ".qmake.vars: No such file or directory" is maybe
> suspicious:
> 
> qmake vars .......... cat: .qmake.vars: No such file or directory

That file is removed by the configure script itself... a little too early maybe, but its absence doesn't cause any problems since its contents are copied in qmake's cache before being removed.

On the other hand, we may want to remove the -verbose flag passed to ./configure by qt4-build.eclass...





Comment 3


Ben de Groot (RETIRED)






          2010-01-31 17:28:39 UTC
        

I don't see any good reason to change this. It works as intended.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

