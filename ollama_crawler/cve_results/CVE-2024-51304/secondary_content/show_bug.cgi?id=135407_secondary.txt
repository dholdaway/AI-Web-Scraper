Title: 135407 – sys-apps/coreutils fails with "Can't locate auto/POSIX/assert.al"
URL: https://bugs.gentoo.org/show_bug.cgi?id=135407

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 135407
sys-apps/coreutils fails with "Can't locate auto/POSIX/assert.al"
Last modified: 2008-01-16 16:16:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 135407 
      - sys-apps/coreutils fails with "Can't locate auto/POSIX/assert.al"


Summary:
sys-apps/coreutils fails with "Can't locate auto/POSIX/assert.al"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-03 10:03 UTC by Andrei F.





      Modified:
    
2008-01-16 16:16 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log of coreutils-6.9-r1

              (build.log-coreutils-6.9-r1,1.44 KB,
                text/plain)

            
2008-01-16 16:16 UTC,

            Garth




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrei F.





          2006-06-03 10:03:38 UTC
        

~arch coreutils (currently coreutils-5.96) fails to install without a normal perl installation while installing from stage1.
the perl package that comes by default with stage1-x86-2006.0.tar.bz2 containes a stripped down version of perl, meaning that not all the modules are being built (see miniperl).
in order to install, coreutils needs some module that comes with perl. I'm sorry, but I cannot reproduce it right now because I'm not willing to start reinstalling from stage1.
emerge -e system says the following:
[ebuild  N    ] sys-apps/coreutils-5.96  USE="-acl -nls -static" 5,008 kB
[ebuild  N    ] dev-lang/perl-5.8.8-r2  USE="berkdb gdbm ithreads -build -debug -doc -perlsuid" 0 kB
If perl would be built before coreutils, everything would be perfect because it would be a normal installation (note the build USE flag)
My suggestion is to make somehow perl to build before coreutils (DEPEND/RDEPEND in coreutils' ebuild)




Comment 1


Jakub Moc (RETIRED)






          2006-06-03 11:04:20 UTC
        

You didn't include any errors, we can't guess. Generally, stage1 install is unsupported, you are on your own there. Don't forget that you need to run emerge --emptytree system, not just emerge system.




Comment 2


Andrew Ross (RETIRED)






          2007-11-13 22:04:39 UTC
        

Since this problem only occurs as part of an unsupported installation method, I'm not reopening the bug.

If sys-apps/coreutils fails in src_compile() with "Can't locate auto/POSIX/assert.al", it is because dev-lang/perl was built with USE=build (probably as part of the stage1 tarball).




Comment 3


Christohper Harrington





          2007-12-07 15:07:14 UTC
        

Can someone explain to me how this isn't a bug? True that it is unsupported, however, there is a clear method for fixing the bug.

I just ran across this myself. I don't expect support, so I found the solution myself, but the solution involves running
emerge -e system (compile 90 some packages, fail on coreutils)
emerge perl
emerge -e system (compile those same 90 packages again)

Don't give me support, please just fix the bug.




Comment 4


Garth





          2008-01-16 16:16:01 UTC
        

Created attachment 141063 [details]
Build log of coreutils-6.9-r1




Comment 5


Garth





          2008-01-16 16:16:46 UTC
        

After doing a recent stage 1 install, I've hit the same problem. I know this isn't supported, but for completeness (and to help other people who may get this problem), I'm going to post: 1- error message, 2- solution, 3- recommendation so people don't have to search bugzilla

1- Error message:
see previously attached build log (I've cut it to the error message)

2- Solution:
During the: emerge -e system
when coreutils fails, run:
emerge perl
emerge --resume

This will prevent the need to rebuild all that was already built.

3- Recommendation (2):
 a- Provide a stage 1 with a perl install that include assert.al (or whatever else is neededfor coreutils to build from)
 b- Modify the FAQ to add a note that state that if coreutils fails due to this, then to run the above solution.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

