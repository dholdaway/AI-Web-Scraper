Title: 348224 – x11-overlay/libpciaccess: ebuild broken due to scanpci's new Makefile
URL: https://bugs.gentoo.org/show_bug.cgi?id=348224

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348224
x11-overlay/libpciaccess: ebuild broken due to scanpci's new Makefile
Last modified: 2010-12-10 13:46:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348224 
      - x11-overlay/libpciaccess: ebuild broken due to scanpci's new Makefile


Summary:
x11-overlay/libpciaccess: ebuild broken due to scanpci's new Makefile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

348225 348226

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2010-12-08 23:39 UTC by Ben Widawsky





      Modified:
    
2010-12-10 13:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




update ebuild to point to new location of scanpci

              (libpciaccess-9999.ebuild.patch,467 bytes,
                patch)

            
2010-12-08 23:45 UTC,

            Ben Widawsky




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ben Widawsky





          2010-12-08 23:39:33 UTC
        

As of commit libpciaccess dcb79a20cba1eaaa83158b80bb538d50b003bd79 scanpci is now in its own directory and therefore install fails

Reproducible: Always

Steps to Reproduce:
1. layman -a x11
2. unmask appropriate packages
3. emerge libpciaccess

Actual Results:  
fatal: Not a git repository (or any of the parent directories): .git
!!! dobin: src/.libs/scanpci does not exist
dobin failed
 * ERROR: x11-libs/libpciaccess-9999 failed:
 *   (no error message)
 *
 * Call stack:
 *     ebuild.sh, line  56:  Called src_install
 *   environment, line 3550:  Called die
 * The specific snippet of code:
 *           dobin src/.libs/scanpci || die;
 *



Here is a patch which fixes the problem:


diff --git a/x11-libs/libpciaccess/libpciaccess-9999.ebuild b/x11-libs/libpciaccess/libpciaccess-9999.ebuild
index f9eaeca..7487a3f 100644
--- a/x11-libs/libpciaccess/libpciaccess-9999.ebuild
+++ b/x11-libs/libpciaccess/libpciaccess-9999.ebuild
@@ -18,6 +18,6 @@ CONFIGURE_OPTIONS="--with-pciids-path=/usr/share/misc"
 src_install() {
        x-modular-r2_src_install
        if ! use minimal; then
-               dobin src/.libs/scanpci || die
+               dobin scanpci/.libs/scanpci || die
        fi
 }




Comment 1


Ben Widawsky





          2010-12-08 23:45:20 UTC
        

Created attachment 256696 [details, diff]
update ebuild to point to new location of scanpci




Comment 2


Ben Widawsky





          2010-12-08 23:55:40 UTC
        

*** Bug 348225 has been marked as a duplicate of this bug. ***




Comment 3


Ben Widawsky





          2010-12-08 23:56:05 UTC
        

*** Bug 348226 has been marked as a duplicate of this bug. ***




Comment 4


Michał Górny









          2010-12-10 13:46:38 UTC
        

Please sync your overlay before complaining. This was fixed two months ago [1].

[1] http://git.overlays.gentoo.org/gitweb/?p=proj/x11.git;a=commit;h=f1162a75dbbdfbebd11d6e8d04e71f32e29fb50f









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

