Title: 387225 – net-im/ejabberd should quit before dev-db/postgresql-server
URL: https://bugs.gentoo.org/show_bug.cgi?id=387225

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 387225
net-im/ejabberd should quit before dev-db/postgresql-server
Last modified: 2011-10-18 14:08:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 387225 
      - net-im/ejabberd should quit before dev-db/postgresql-server


Summary:
net-im/ejabberd should quit before dev-db/postgresql-server
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       enhancement
      


Assignee:

Gentoo Net-im project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-10-15 18:15 UTC by Stefan de Konink





      Modified:
    
2011-10-18 14:08 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bug









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan de Konink





          2011-10-15 18:15:00 UTC
        

Ejabberd could depend on modules such as pgsql, mysql or odbc. It is therefore better if ejabberd would shutdown before -a database- does.

Reproducible: Always




Comment 1


Marcin Mirosław





          2011-10-17 07:43:56 UTC
        

Ejabberd doesn't contains any postgres/mysql flag only has "odbc". Imho valid solution is add "rc_need=postgresql" to /etc/conf.d/ejabberd if your ejabberd uses postgresql. It's rather nothing to do in ebuild.




Comment 2


Stefan de Konink





          2011-10-17 08:13:58 UTC
        

Maybe I should implement the 'native' pgsql and mysql modules eJabberd can use. It actually uses the odbc interface to configure them. But given the odbc flag, shouldn't this rc_need be there anyway?




Comment 3


Marcin Mirosław





          2011-10-17 08:30:42 UTC
        

With odbc you can connect for many databases or databases which are remote. Even if ejabberd will have native foosql driver it will only needs proper libraries to link against them. We can have database on other host, portage doesn't know about local configuration. It's sysadmin role to prepare start dependencies correctly.
If ejabberd could use only one database - foobarsql and it such database would be required by ejjaberd to work then yes, in default conf.d file it should be "rc_need=foobarsql".




Comment 4


Peter Volkov (RETIRED)






          2011-10-18 14:08:36 UTC
        

Yes, it's impossible to provide all db backends in init script, thus it's better to use provided my Marcin configuration suggestion.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

