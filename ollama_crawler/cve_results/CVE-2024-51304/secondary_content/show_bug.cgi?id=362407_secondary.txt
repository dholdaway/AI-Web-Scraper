Title: 362407 – Latest sci-geosciences/googleearth has wrong filesize
URL: https://bugs.gentoo.org/show_bug.cgi?id=362407

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 362407
Latest sci-geosciences/googleearth has wrong filesize
Last modified: 2011-05-24 20:07:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 362407 
      - Latest sci-geosciences/googleearth has wrong filesize


Summary:
Latest sci-geosciences/googleearth has wrong filesize
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Vlastimil Babka (Caster) (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-04-07 08:26 UTC by Paul Hewlett





      Modified:
    
2011-05-24 20:07 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



mjo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul Hewlett





          2011-04-07 08:26:15 UTC
        

Emerging latest googleearth fails because of incorrect filesize.
Current version on my system no longer exists and emerge had advised an upgrade.

Reproducible: Always

Steps to Reproduce:
1.Edit package.keywords to unmask latest googleearth
2.emerge -av googleearth
3.Failure
Actual Results:  
Here I tried to emerge both 6.0.2.2074 and 6.0.1.2032_beta:

>>> Emerging (2 of 2) sci-geosciences/googleearth-6.0.2.2074
>>> Downloading 'http://dl.google.com/earth/client/current/GoogleEarthLinux.bin'
--2011-04-07 09:15:02--  http://dl.google.com/earth/client/current/GoogleEarthLinux.bin
Resolving localhost... 127.0.0.1
Connecting to localhost|127.0.0.1|:8080... connected.
Proxy request sent, awaiting response... 200 OK
Length: 25932414 (25M)
Saving to: `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin'

100%[===============================================================================================>] 25,932,414  --.-K/s   in 0.1s    

2011-04-07 09:15:02 (189 MB/s) - `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin' saved [25932414/25932414]

('Filesize does not match recorded size', 25932414, 33685323)
!!! Fetched file: GoogleEarthLinux-6.0.2.2074.bin VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      25932414
!!! Expected: 33685323
Refetching... File renamed to '/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin._checksum_failure_.opnwSH'

!!! Couldn't download 'GoogleEarthLinux-6.0.2.2074.bin'. Aborting.
 * Fetch failed for 'sci-geosciences/googleearth-6.0.2.2074', Log file:
 *  '/var/log/portage/sci-geosciences:googleearth-6.0.2.2074:20110407-081502.log'
 * Wrong checksum or file size means that Google silently replaced the distfile with a newer version.
 * Note that Gentoo cannot mirror the distfiles due to license reasons, so we have to follow the bump.
 * Please file a version bump bug on http://bugs.gentoo.org (search existing bugs for googleearth first!).
 * By redigesting the file yourself, you will install a different version than the ebuild says, untested!

>>> Failed to emerge sci-geosciences/googleearth-6.0.2.2074, Log file:

>>>  '/var/log/portage/sci-geosciences:googleearth-6.0.2.2074:20110407-081502.log'

 * GNU info directory index is up-to-date.
gould package.keywords # ls -l /usr/portage/sci-geosciences/googleearth/
total 60
-rw-r--r-- 1 root root 15795 Apr  3 11:01 ChangeLog
drwxr-xr-x 2 root root  4096 Dec 29 05:19 files
-rw-r--r-- 1 root root  4275 Jan 31 16:31 googleearth-5.1.3535.3218-r1.ebuild
-rw-r--r-- 1 root root  4989 Jan 31 16:31 googleearth-5.2.1.1588.ebuild
-rw-r--r-- 1 root root  5254 Jan 31 16:05 googleearth-6.0.1.2032_beta.ebuild
-rw-r--r-- 1 root root  5254 Apr  3 11:01 googleearth-6.0.2.2074.ebuild
-rw-r--r-- 1 root root  2742 Apr  3 11:01 Manifest
-rw-r--r-- 1 root root   613 May 22  2010 metadata.xml
gould package.keywords # vi googleearth
gould package.keywords # emerge -av googleearth

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] sci-geosciences/googleearth-6.0.1.2032_beta [5.1.3535.3218-r1] USE="qt-bundled* -mdns-bundled" 32,803 kB

Total: 1 package (1 upgrade), Size of downloads: 32,803 kB

Would you like to merge these packages? [Yes/No] 

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) sci-geosciences/googleearth-6.0.1.2032_beta
>>> Downloading 'http://dl.google.com/earth/client/current/GoogleEarthLinux.bin'
--2011-04-07 09:18:49--  http://dl.google.com/earth/client/current/GoogleEarthLinux.bin
Resolving localhost... 127.0.0.1
Connecting to localhost|127.0.0.1|:8080... connected.
Proxy request sent, awaiting response... 200 OK
Length: 25932414 (25M)
Saving to: `/usr/portage/distfiles/GoogleEarthLinux-6.0.1.2032_beta.bin'

100%[===============================================================================================>] 25,932,414  --.-K/s   in 0.1s    

2011-04-07 09:18:49 (188 MB/s) - `/usr/portage/distfiles/GoogleEarthLinux-6.0.1.2032_beta.bin' saved [25932414/25932414]

('Filesize does not match recorded size', 25932414, 33589497)
!!! Fetched file: GoogleEarthLinux-6.0.1.2032_beta.bin VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      25932414
!!! Expected: 33589497
Refetching... File renamed to '/usr/portage/distfiles/GoogleEarthLinux-6.0.1.2032_beta.bin._checksum_failure_.xnzj06'

!!! Couldn't download 'GoogleEarthLinux-6.0.1.2032_beta.bin'. Aborting.
 * Fetch failed for 'sci-geosciences/googleearth-6.0.1.2032_beta', Log file:
 *  '/var/log/portage/sci-geosciences:googleearth-6.0.1.2032_beta:20110407-081848.log'
 * Wrong checksum or file size means that Google silently replaced the distfile with a newer version.
 * Note that Gentoo cannot mirror the distfiles due to license reasons, so we have to follow the bump.
 * Please file a version bump bug on http://bugs.gentoo.org (search existing bugs for googleearth first!).
 * By redigesting the file yourself, you will install a different version than the ebuild says, untested!

>>> Failed to emerge sci-geosciences/googleearth-6.0.1.2032_beta, Log file:

>>>  '/var/log/portage/sci-geosciences:googleearth-6.0.1.2032_beta:20110407-081848.log'
gould package.keywords # 

Expected Results:  
Fetch from google server succeeds and installs correctly

gould package.keywords # emerge --info
Portage 2.1.9.42 (default/linux/amd64/10.0/desktop/kde, gcc-4.4.5, glibc-2.11.3-r0, 2.6.38-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.38-gentoo-r1-x86_64-Pentium-R-_Dual-Core_CPU_E5300_@_2.60GHz-with-gentoo-1.12.14
Timestamp of tree: Sun, 03 Apr 2011 11:45:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.7.1-r1, 3.1.3-r1
dev-util/ccache:     2.4-r9
dev-util/cmake:      2.8.4
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=core2 -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/openvpn/easy-rsa /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -march=core2 -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs buildpkg ccache distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://mirror.qubenet.net/mirror/gentoo/ http://mirror.leaseweb.com/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://mirror.bytemark.co.uk/gentoo/ http://gentoo.tiscali.nl/"
LANG="en_GB.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_US af_ZA en_ZA st_ZA xh_ZA zu_ZA en_GB"
MAKEOPTS="-j3"
PKGDIR="/var/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.uk.gentoo.org/gentoo-portage"
USE="64bit 7zip X X509 a52 aac ace acl acm acpi activefilter addns addressbook administrator ads aio akode akonadi alac alias alsa amarok amavis amd64 amr amrnb amrr amrwb analogtv apache2 apcupsd api archive ares assistant bash-completion berkdb blender-game bluetooth boost branding btrfs bzip2 cairo caps cdaudio cdda cddb cdio cdparanoia cdr cgi cjk clamav clamd cli cmake consolekit cpudetection cracklib crypt cups curl cvs cvsgraph cxx dbm dbus declarative desktopglobe device-mapper dga disk-partition djvu dlna dovecot-sasl dri dts dv dvb dvd dvdr dvdread dvi emboss emovix emulation encode exif expat extensions extra extraengine extras fam fbcon fbcondecor festival ffmpeg firefox firefox3 flac flask fontconfig foomaticdb fortran freetds fts3 gcj gcrypt gdbm gdu geoip geolocation gif gimp gmail gnomecanvas gnutls gpg gpm gs gsm gstreamer gutenprint handbook haskell httpd hunspell hvm icecast iconv icu idl ilbc image imagemagick imap inotify intel_led ipod ipv6 ipw4965 iscsi jabber jack java java6 javascript jbig jfs jpeg kde kdm kdrive kerberos kernel-helper kernel-patch kexi kig-scripting konqueror kontact kpathsea kqemu ktts kvm kvm-trace lame laptop lash latex latex3 lcms ldap ldb libnotify libsamplerate libwww live lm_sensors loop-aes lua lvm lxc lzma lzo mad maildir md melt memcache mikmod mmx mng modules mp3 mp4 mp4live mpd mpeg mtp mudflap multilib musepack mysql mysqli nagios-dns ncurses netboot network network-cron newt nforce2 nfs nfsv4 nls nptl nptlonly nsplugin nvidia ocaml ocamlduce ocamlopt odk ogg ogg123 ogm okular openexr opengl openmp opensync openvpn oss pae pam pango pcre pdf perl pg-intdatetime phonon php plasma plotutils pmount pmu png policykit posix postfix postgis postgres ppds pppd procmail pulseaudio pygrub python python2 pyx qemu qemu-ifup qt-dbus qt-webkit qt3support qt4 qtdesigner qthelp qtmultimedia quicktime quotas radio ramfs rar raw rdesktop readline realmedia reiser4 reiserfs reports resolvconf rpm rss rtf samba sasl scanner scintilla screen screenshot script scsi sdl semantic-desktop serial server session slp smbclient smbsharemodes smi smp sms sndfile snmp sox spamassassin span speex spell sql sqlite sse sse2 sse3 ssl startup-notification stream subversion svg swat symlink sysfs tcpd templates theora threads threadsafe tiff tk truetype udev uml unicode unison unzip usb utempter utils uuencode v4l2 valgrind vboxwebsrv vde video vim-pager vim-syntax vim-with-x virt-network virtualbox vistafree visualization vnc voice vorbis vorbis-psy wav wavpack webcam webdav webdav-neon webdav-serf webkit webpresence wifi winbind wininst winpopup wireshark wma wmf wmp wordperfect x264 xattr xcb xcomposite xfs xft xine xinerama xml xorg xosd xpm xprint xrandr xrender xscreensaver xsm xulrunner xv xvid xvmc zip zlib zodb" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="cgid authz_host dir mime" CAMERAS="*" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_US af_ZA en_ZA st_ZA xh_ZA zu_ZA en_GB" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="fbdev intel vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

gould package.keywords #




Comment 1


Michael Orlitzky






          2011-04-18 16:16:41 UTC
        

Easily confirmed,

  SRC_URI=http://dl.google.com/earth/client/current/GoogleEarthLinux.bin

is always gonna pull down the latest. There's even a newer version in Portage with the same SRC_URI.




Comment 2


Vlastimil Babka (Caster) (RETIRED)






          2011-04-22 13:04:55 UTC
        

The distfile I download matches the 6.0.2.2074 ebuild. The 6.0.1 version was just removed. I don't know why your download was different (shortened?), possibly a temporary problem on google's servers.




Comment 3


Paul Hewlett





          2011-05-02 11:54:43 UTC
        

(In reply to comment #2)
> The distfile I download matches the 6.0.2.2074 ebuild. The 6.0.1 version was
> just removed. I don't know why your download was different (shortened?),
> possibly a temporary problem on google's servers.

Tried again today after a complete sync and everything now works.




Comment 4


debianuser4





          2011-05-20 12:15:08 UTC
        

I tried tried to install this today and got the same error. I tried deleting the package and redownloading but it didn't help.


>>> Emerging (1 of 1) sci-geosciences/googleearth-6.0.2.2074
>>> Downloading 'http://dl.google.com/earth/client/current/GoogleEarthLinux.bin'
--2011-05-20 05:35:55--  http://dl.google.com/earth/client/current/GoogleEarthLinux.bin
Resolving dl.google.com... 74.125.226.8, 74.125.226.2, 74.125.226.13, ...
Connecting to dl.google.com|74.125.226.8|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 33688483 (32M) [application/octet-stream]
Saving to: `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin'

100%[======================================>] 33,688,483   516K/s   in 64s     

2011-05-20 05:37:00 (514 KB/s) - `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin' saved [33688483/33688483]

('Filesize does not match recorded size', 33688483, 33685323)
!!! Fetched file: GoogleEarthLinux-6.0.2.2074.bin VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      33688483
!!! Expected: 33685323
Refetching... File renamed to '/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin._checksum_failure_.wYpmBY'

!!! Couldn't download 'GoogleEarthLinux-6.0.2.2074.bin'. Aborting.
 * Fetch failed for 'sci-geosciences/googleearth-6.0.2.2074', Log file:
 *  '/var/log/portage/sci-geosciences:googleearth-6.0.2.2074:20110520-093555.log'
 * Wrong checksum or file size means that Google silently replaced the distfile with a newer version.
 * Note that Gentoo cannot mirror the distfiles due to license reasons, so we have to follow the bump.
 * Please file a version bump bug on http://bugs.gentoo.org (search existing bugs for googleearth first!).
 * By redigesting the file yourself, you will install a different version than the ebuild says, untested!

>>> Failed to emerge sci-geosciences/googleearth-6.0.2.2074, Log file:

>>>  '/var/log/portage/sci-geosciences:googleearth-6.0.2.2074:20110520-093555.log'

 * IMPORTANT: 1 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.
---------------
Log:

>>> Downloading 'http://dl.google.com/earth/client/current/GoogleEarthLinux.bin'
--2011-05-20 05:35:55--  http://dl.google.com/earth/client/current/GoogleEarthLinux.bin
Resolving dl.google.com... 74.125.226.8, 74.125.226.2, 74.125.226.13, ...
Connecting to dl.google.com|74.125.226.8|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 33688483 (32M) [application/octet-stream]
Saving to: `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin'

100%[======================================>] 33,688,483   516K/s   in 64s     

2011-05-20 05:37:00 (514 KB/s) - `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin' saved [33688483/33688483]

('Filesize does not match recorded size', 33688483, 33685323)
!!! Fetched file: GoogleEarthLinux-6.0.2.2074.bin VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      33688483
!!! Expected: 33685323
Refetching... File renamed to '/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin._checksum_failure_.wYpmBY'

!!! Couldn't download 'GoogleEarthLinux-6.0.2.2074.bin'. Aborting.
 * Fetch failed for 'sci-geosciences/googleearth-6.0.2.2074', Log file:
 *  '/var/log/portage/sci-geosciences:googleearth-6.0.2.2074:20110520-093555.log'
 * Wrong checksum or file size means that Google silently replaced the distfile with a newer version.
 * Note that Gentoo cannot mirror the distfiles due to license reasons, so we have to follow the bump.
 * Please file a version bump bug on http://bugs.gentoo.org (search existing bugs for googleearth first!).
 * By redigesting the file yourself, you will install a different version than the ebuild says, untested!




Comment 5


Michael Orlitzky






          2011-05-21 16:21:39 UTC
        

I jumped the gun in my first comment. The gentoo mirrors cache distfiles based on the name they're saved as (i.e. the thing after --> in SRC_URI). So, this won't fail every time, but it's still possible that two mirrors could pull down two different copies of GoogleEarthLinux.bin if Google bumps the version frequently.




Comment 6


Kobboi





          2011-05-24 20:07:52 UTC
        

Hitting this one as well

>>> Downloading 'http://dl.google.com/earth/client/current/GoogleEarthLinux.bin'
--2011-05-24 22:05:17--  http://dl.google.com/earth/client/current/GoogleEarthLinux.bin
Resolving dl.google.com... 209.85.227.91, 209.85.227.93, 209.85.227.136, ...
Connecting to dl.google.com|209.85.227.91|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 33688483 (32M) [application/octet-stream]
Saving to: `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin'

100%[===============================================================================================>] 33,688,483  2.47M/s   in 15s     

2011-05-24 22:05:33 (2.11 MB/s) - `/usr/portage/distfiles/GoogleEarthLinux-6.0.2.2074.bin' saved [33688483/33688483]

('Filesize does not match recorded size', 33688483, 33685323)
!!! Fetched file: GoogleEarthLinux-6.0.2.2074.bin VERIFY FAILED!
!!! Reason: Filesize does not match recorded size
!!! Got:      33688483
!!! Expected: 33685323









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

