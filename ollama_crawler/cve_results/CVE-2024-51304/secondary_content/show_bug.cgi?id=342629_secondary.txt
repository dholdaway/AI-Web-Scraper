Title: 342629 – dev-util/scons-2.0.1 unresponsive to SIGINT
URL: https://bugs.gentoo.org/show_bug.cgi?id=342629

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 342629
dev-util/scons-2.0.1 unresponsive to SIGINT
Last modified: 2012-02-01 17:21:20 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 342629 
      - dev-util/scons-2.0.1 unresponsive to SIGINT


Summary:
dev-util/scons-2.0.1 unresponsive to SIGINT
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-10-25 12:37 UTC by Martin von Gagern





      Modified:
    
2012-02-01 17:21 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



floppym
Marc-Antoine









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2010-10-25 12:37:35 UTC
        

I'm experimenting with the mesa source tree and scons, and found that in my setup, the scons online help fails to terminate, and iterrupting it via Ctrl+C doesn't work either. Killing it via SIGTERM (e.g. with "killall python2" from another terminal) does work.

Steps to reproduce:
1. git clone git://anongit.freedesktop.org/git/mesa/mesa
2. cd mesa
3. git checkout mesa-7.9
4. scons -h

Expected result:
1. scons prints some kind of online help
2. the command exits

Actual result:
1. Scons prints only one line: "Reading SConscript files ..."
2. Scons keeps going forever




Comment 1


Martin von Gagern





          2010-10-25 13:27:37 UTC
        

/usr/portage/dev-util/scons/files/scons-1.2.0-popen.patch seems to be to blame: Removing that patch from the ebuild gives program output and termination as expected. And if I'm fast enough, I can even interrupt the build with Ctrl+C and receive a suitable message before the program terminates.

Therefore this is a Gentoo bug, not an upstream bug, imo.

So you should consider dropping that patch, applying it conditionally where absolutely required, or rework the patch so it doesn't have ill side effects like this.




Comment 2


Mike Gilbert






          2012-02-01 02:40:17 UTC
        

Do you still have this problem with scons-2.1.0? I see we are still applying the problematic patch, so I'm guessing it is pretty likely.

Just looking to resolve this bug before requesting stabilization of this version.




Comment 3


Mike Gilbert






          2012-02-01 02:42:39 UTC
        

Also, I can't reproduce the problem using the steps you have outlined, but it could be some kind of race condition.




Comment 4


Martin von Gagern





          2012-02-01 08:14:16 UTC
        

(In reply to comment #3)
> Also, I can't reproduce the problem using the steps you have outlined, but it
> could be some kind of race condition.

Can't reproduce this either. Not even after downgrading to scons 2.0.1. Strange. Feel free to either mark this WORKSFORME or have a closer look at the sources, depending on how much time you have to spare.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

