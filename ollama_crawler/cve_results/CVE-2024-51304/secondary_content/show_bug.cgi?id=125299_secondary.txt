Title: 125299 – Gentoo Linux Installer fails emerging kernel from LiveCD
URL: https://bugs.gentoo.org/show_bug.cgi?id=125299

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125299
Gentoo Linux Installer fails emerging kernel from LiveCD
Last modified: 2006-03-24 13:46:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125299 
      - Gentoo Linux Installer fails emerging kernel from LiveCD


Summary:
Gentoo Linux Installer fails emerging kernel from LiveCD
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Release Media




Classification:

Unclassified




Component:

Installer

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Installer








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-06 14:30 UTC by Peter Pontbriand





      Modified:
    
2006-03-24 13:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/var/log/installer.log.failed

              (installer.log.failed,4.23 KB,
                text/plain)

            
2006-03-07 05:14 UTC,

            Peter Pontbriand




Details





/mnt/gentoo/tmp/compile_output.log

              (compile_output-last30.log,1.60 KB,
                text/plain)

            
2006-03-08 08:34 UTC,

            Peter Pontbriand




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Pontbriand





          2006-03-06 14:30:04 UTC
        

Output:

Exception received:
CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute pkg_setup for sys-kernel/livecd-kernel-2006.0
Please submit a bug report (after searching to make sure it's not a known issue and verifying you didn't do something stupid) with the contents of /var/log/install.log and /tmp/installprofile.xml and the version of the installer you used


Install log:

GLI: March 06 2006 17:09:26 - Starting emerge_kernel
GLI: March 06 2006 17:09:42 - Exception received during 'Emerge kernel sources': CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute pkg_setup for sys-kernel/livecd-kernel-2006.0
GLI: March 06 2006 17:09:42 - Traceback (most recent call last):
GLI: March 06 2006 17:09:42 - File "/opt/installer/GLIClientController.py", line 165, in run
    self._install_steps[self._install_step]['function']()
GLI: March 06 2006 17:09:42 - File "/opt/installer/GLIArchitectureTemplate.py", line 639, in emerge_kernel_sources
    self._portage.copy_pkg_to_chroot(self._portage.get_best_version_vdb("livecd-kernel"))
GLI: March 06 2006 17:09:42 - File "/opt/installer/GLIPortage.py", line 144, in copy_pkg_to_chroot
    raise GLIException("CopyPackageToChrootError", 'fatal', 'copy_pkg_to_chroot', "Could not execute pkg_setup for " + package)
GLI: March 06 2006 17:09:42 - GLIException: CopyPackageToChrootError :FATAL: copy_pkg_to_chroot: Could not execute pkg_setup for sys-kernel/livecd-kernel-2006.0


Install profile:

-
	<gli-profile>
<kernel-build-method>
		genkernel
	</kernel-build-method>
<cron-daemon>
		vixie-cron
	</cron-daemon>
<domainname>
		localdomain
	</domainname>
-
	<portage-snapshot>

		file:///mnt/cdrom/snapshots/portage-20060123.tar.bz2
	
</portage-snapshot>
<kernel-source>
		livecd-kernel
	</kernel-source>
<install-pcmcia-cs>
		False
	</install-pcmcia-cs>
<time-zone>
		America/New_York
	</time-zone>
<install-distcc>
		False
	</install-distcc>
<boot-device>
		/dev/hde
	</boot-device>
<dynamic-stage3>
		True
	</dynamic-stage3>
<kernel-bootsplash>
		True
	</kernel-bootsplash>
<bootloader-mbr>
		True
	</bootloader-mbr>
<hostname>
		localhost
	</hostname>
<bootloader-kernel-args/>
<post-install-script-uri/>
<nisdomainname/>
<install-stage>
		3
	</install-stage>
<ftp-proxy/>
<rsync-proxy/>
<stage-tarball/>
<bootloader>
		grub
	</bootloader>
<root-pass-hash>
		$1$slAt.0Jv$GxysxAdLIlIRDCTq75H6E/
	</root-pass-hash>
<http-proxy/>
<mta/>
<grp-install>
		True
	</grp-install>
<logging-daemon>
		metalog
	</logging-daemon>
<kernel-config/>
<portage-tree-sync>
		snapshot
	</portage-tree-sync>
<kernel-initrd>
		True
	</kernel-initrd>
<install-rp-pppoe>
		False
	</install-rp-pppoe>
<default-gateway interface="eth0">
		192.168.0.1
	</default-gateway>
-
	<install-packages>

		gnome xorg-x11 nmap screen gnupg netcat samba slocate ufed vim logrotate emacs ethereal mozilla-firefox bittorrent openoffice mplayer gaim mozilla-thunderbird rhythmbox xchat gimp
	
</install-packages>
-
	<network-interfaces>
<device broadcast="192.168.0.1" ip="192.168.0.88" netmask="255.255.255.0">
			eth0
		</device>
</network-interfaces>
<network-mounts/>
-
	<partitions>
-
	<device devnode="/dev/hde" disklabel="msdos">
<partition format="False" mb="39" minor="1" mkfsopts="" mountopts="defaults" mountpoint="/boot" origminor="1" resized="False" type="ext2"/>
<partition format="False" mb="494" minor="2" mkfsopts="" mountopts="" mountpoint="" origminor="2" resized="False" type="linux-swap"/>
<partition format="False" mb="155794" minor="3" mkfsopts="" mountopts="defaults" mountpoint="/" origminor="3" resized="False" type="reiserfs"/>
</device>
</partitions>
<services>
		alsasound
	</services>
-
	<users>
<user comment="" groups="users" hash="$1$vqU7CHVD$ExfG3K7S5EIQLhYJ37ZRy1" homedir="/home/sprocket" shell="" uid="">
			sprocket
		</user>
</users>
-
	<etc-files>
-
	<file name="rc.conf">
<entry name="DISPLAYMANAGER">
				gdm
			</entry>
<entry name="XSESSION">
				Gnome
			</entry>
<entry name="EDITOR">
				/bin/nano
			</entry>
</file>
-
	<file name="conf.d/clock">
<entry name="CLOCK">
				local
			</entry>
</file>
-
	<file name="conf.d/keymaps">
<entry name="SET_WINDOWSKEYS">
				Yes
			</entry>
</file>
-
	<file name="make.conf">
<entry name="MAKEOPTS">
				-j2
			</entry>
-
	<entry name="USE">

				 X alsa apache2 apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr cli crypt ctype cups dba eds elibc_glibc emboss encode esd ethereal exif expat fam fastbuild foomaticdb force-cgi-redirect fortran ftp gd gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml guile idn imlib ipv6 jpeg kde kernel_linux lcms libg++ libwww mad memlimit mikmod mng motif mozilla mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png posix python qt quicktime readline samba sdl session simplexml slang soap sockets spell spl ssl tcltk tcpd tiff tokenizer truetype truetype-fonts type1-fonts udev userland_GNU vorbis x86 xml xml2 xmms xsl xv zlib
			
</entry>
<entry name="FEATURES"/>
<entry name="ACCEPT_KEYWORDS"/>
<entry name="CFLAGS">
				-march=i686 -O2 -pipe
			</entry>
</file>
</etc-files>
</gli-profile>




Comment 1


Andrew Gaffney (RETIRED)






          2006-03-06 15:02:35 UTC
        

I'm inclined to blame this on bad memory, overheating, bad hard drive, etc., because I really don't think it's even possible for it to fail at that point under normal circumstances.




Comment 2


Peter Pontbriand





          2006-03-06 15:40:55 UTC
        

(In reply to comment #1)
> I'm inclined to blame this on bad memory, overheating, bad hard drive, etc.,
> because I really don't think it's even possible for it to fail at that point
> under normal circumstances.
> 

The hardware is fine with other operating systems, including older versions of Gentoo Linux. This failure occurs repeatedly too, always the exact same messages at the exact same point in the install. 




Comment 3


Andrew Gaffney (RETIRED)






          2006-03-06 15:51:16 UTC
        

Please update to the latest CVS snapshot by opening a terminal and doing '/opt/installer/misc/updategtkfe'. When the install fails, grab the last ~30 lines from the "Output" tab and paste it here.




Comment 4


Peter Pontbriand





          2006-03-06 19:58:38 UTC
        

(In reply to comment #3)
> Please update to the latest CVS snapshot by opening a terminal and doing
> '/opt/installer/misc/updategtkfe'. When the install fails, grab the last ~30
> lines from the "Output" tab and paste it here.
> 

I can't cut and paste from the "Output" tab since it goes nuts jumping around and scrolling when I try to select text - and nothing stays selected.

However, the last line looks salient, it indicates that it "cannot open shared object file: No such file or directory" for libstdc++.so.6 whilst all the previous lines seem to be normal. 






Comment 5


Andrew Gaffney (RETIRED)






          2006-03-06 20:32:47 UTC
        

You can get the same info that's in the Output tab from the file /tmp/compile_output.log. From what you say, it seems like python is failing with that error. I'm not quite sure why dynamic-stage3 would have completed and then given you that error, especially since it works so well for so many other people. Please reproduce it and paste the exact text (the last ~30 lines) from /tmp/compile_output.log.




Comment 6


Peter Pontbriand





          2006-03-07 05:11:13 UTC
        

There's no such file:

gentoo@livecd ~ $ ls -la /tmp
total 48
drwxrwxrwt   9 root   root    400 Mar  6 22:55 .
drwxrwxrwt  12 root   root    360 Mar  6 16:18 ..
drwxrwxrwt   2 root   root     60 Mar  6 16:20 .ICE-unix
-r--r--r--   1 root   root     11 Mar  6 16:19 .X0-lock
drwxrwxrwt   2 root   root     60 Mar  6 16:19 .X11-unix
srw-------   1 gentoo root      0 Mar  6 16:20 .famCXGECh
srw-------   1 gentoo root      0 Mar  6 16:20 .famMFzkTi
srw-------   1 gentoo root      0 Mar  6 16:20 .famMMTsfC
srw-------   1 gentoo root      0 Mar  6 16:20 .famUvbrWG
srw-------   1 gentoo root      0 Mar  6 16:20 .famwBnJvX
srw-rw-rw-   1 root   root      0 Mar  6 16:19 .gdm_socket
drwxr-xr-x   2 root   root     40 Mar  6 16:17 .initrd
-rw-r--r--   1 root   root    736 Mar  6 22:12 clientconfiguration.xml
drwx------   3 gentoo users    60 Mar  6 16:20 gconfd-gentoo
-rw-r--r--   1 root   root   3687 Mar  6 22:17 installprofile.xml
drwx------   2 gentoo users    60 Mar  6 16:20 keyring-1ZmKCs
srwxr-xr-x   1 gentoo users     0 Mar  6 16:20 mapping-gentoo
drwx------   2 gentoo users   380 Mar  7 08:19 orbit-gentoo
drwx------   2 gentoo users    60 Mar  6 16:20 ssh-clboOD1690
-rw-r--r--   1 root   root  34063 Mar  6 22:55 tarfilelist
gentoo@livecd ~ $






Comment 7


Peter Pontbriand





          2006-03-07 05:14:48 UTC
        

Created attachment 81594 [details]
/var/log/installer.log.failed




Comment 8


Peter Pontbriand





          2006-03-08 05:39:06 UTC
        

Ah well, I knew the installer sounded too good to be true. Back to the "proper" way of installing Gentoo for me. Keep at it guys, it's obviously not quite there yet.




Comment 9


Peter Pontbriand





          2006-03-08 08:34:44 UTC
        

Created attachment 81690 [details]
/mnt/gentoo/tmp/compile_output.log

Found a compile_output.log while doing a manual install - attached.




Comment 10


Andrew Gaffney (RETIRED)






          2006-03-09 05:53:27 UTC
        

That's the last 30 lines from the compile_output.log produced by your failed install?




Comment 11


Peter Pontbriand





          2006-03-09 06:08:17 UTC
        

Yes, just the last thirty lines. The entire file is too big to attach.




Comment 12


Andrew Gaffney (RETIRED)






          2006-03-10 21:51:35 UTC
        

Nobody else (that I know of) has run into this problem, and I can't reproduce it. There's no iffy-ness in the dynamic-stage3 code. It either works or it doesn't. There's not really an in between.




Comment 13


Peter Pontbriand





          2006-03-11 06:43:28 UTC
        

I never said it "partly works" or "partly doesn't work". The fact is, it does not work for me. To label this bug resolved because it works for you is ludicrous. As a professional software developer, I'd never get away with dismissing reported bugs so lightly.

Of course, this is just a graphical installer that's broken, not an important part of Gentoo, but still, this experience of having a bug report dismissed as being in my imagination can't help souring my opinion of Gentoo somewhat.

Cheers.




Comment 14


Jeffrey Forman (RETIRED)






          2006-03-24 13:46:40 UTC
        

Moving to Release Media/Installer.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

