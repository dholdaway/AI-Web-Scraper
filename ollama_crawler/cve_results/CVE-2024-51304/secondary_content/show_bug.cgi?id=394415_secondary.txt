Title: 394415 – sys-apps/portage-2.2.0_alpha80 adds ${EPREFIX} in /etc/dispatch-conf.conf
URL: https://bugs.gentoo.org/show_bug.cgi?id=394415

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 394415
sys-apps/portage-2.2.0_alpha80 adds ${EPREFIX} in /etc/dispatch-conf.conf
Last modified: 2011-12-12 17:52:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 394415 
      - sys-apps/portage-2.2.0_alpha80 adds ${EPREFIX} in /etc/dispatch-conf.conf


Summary:
sys-apps/portage-2.2.0_alpha80 adds ${EPREFIX} in /etc/dispatch-conf.conf
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

394465

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2011-12-12 08:29 UTC by Justin Lecher (RETIRED)





      Modified:
    
2011-12-12 17:52 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



prefix
toralf









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Justin Lecher (RETIRED)






          2011-12-12 08:29:19 UTC
        

--- /etc/dispatch-conf.conf     2011-12-05 12:00:39.406780282 +0100
+++ /etc/._cfg0000_dispatch-conf.conf   2011-12-12 09:24:09.000000000 +0100
@@ -3,7 +3,7 @@
 #
 
 # Directory to archive replaced configs
-archive-dir=/etc/config-archive
+archive-dir=${EPREFIX}/etc/config-archive
 
 # Use rcs for storing files in the archive directory?
 # WARNING: When configured to use rcs, read and execute permissions of


AFAIK the variable EPREFIX doesn't need to be defined globally in a prefixed system. therefor using it here, doesn't make sense. Better using @GENTOO_PORTAGE_EPREFIX@ and eprefixify from prefix eclass.




Comment 1


Fabian Groffen






          2011-12-12 08:43:35 UTC
        

Hehe, EPREFIX is defined in the calling environment (by Portage) now, but I'll let Zac give you the final word on this.

(I don't like it either, but Zac wants to go this way.)




Comment 2


Zac Medico






          2011-12-12 15:01:54 UTC
        

(In reply to comment #1)
> Hehe, EPREFIX is defined in the calling environment (by Portage) now

Right, it's available to make.globals as well now:

http://git.overlays.gentoo.org/gitweb/?p=proj/portage.git;a=commit;h=9805fc263d785a93ea4a8a6571b73a7b53e85bba

And the dispatch-conf.conf parser has support to expand ${EPREFIX} in archive-dir:

http://git.overlays.gentoo.org/gitweb/?p=proj/portage.git;a=commit;h=4b4ad3579e83fc59be55a1304d483fbbbc95f6f4




Comment 3


Justin Lecher (RETIRED)






          2011-12-12 15:15:30 UTC
        

okay, I wasn't aware of this change.




Comment 4


Zac Medico






          2011-12-12 17:52:43 UTC
        

*** Bug 394465 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

