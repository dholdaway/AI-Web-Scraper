Title: 290379 – app-text/jabref-2.6_beta fails to emerge because javassist-2 was not found
URL: https://bugs.gentoo.org/show_bug.cgi?id=290379

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 290379
app-text/jabref-2.6_beta fails to emerge because javassist-2 was not found
Last modified: 2010-02-20 17:24:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 290379 
      - app-text/jabref-2.6_beta fails to emerge because javassist-2 was not found


Summary:
app-text/jabref-2.6_beta fails to emerge because javassist-2 was not found
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Java team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-24 13:15 UTC by Juergen Rose





      Modified:
    
2010-02-20 17:24 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Juergen Rose





          2009-10-24 13:15:25 UTC
        

'emerge jabref' fails with:
...
>>> Emerging (2 of 2) app-text/jabref-2.6_beta
 * JabRef-2.6b-src.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                                                                   [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                                         [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                        [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                       [ ok ]
 * Using: sun-jdk-1.6
>>> Unpacking source...
>>> Unpacking JabRef-2.6b-src.tar.bz2 to /var/tmp/portage/app-text/jabref-2.6_beta/work
>>> Source unpacked in /var/tmp/portage/app-text/jabref-2.6_beta/work
>>> Preparing source in /var/tmp/portage/app-text/jabref-2.6_beta/work/jabref-2.6b ...
 * Applying jabref-2.4-build.xml.patch ...                                                                                                                    [ ok ]
Rewriting build.xml
removed `lib/JempBox-0.2.0.jar'
removed `lib/PDFBox-0.7.3-dev-reduced.jar'
removed `lib/antlr.jar'
removed `lib/forms-1.1.0.jar'
removed `lib/glazedlists-1.7.0_java15.jar'
removed `lib/jarbundler-1.4.jar'
removed `lib/looks-2.2.0.jar'
removed `lib/microba.jar'
removed `lib/mysql-connector-java-5.0.7-bin.jar'
removed `lib/spin.jar'
removed `lib/plugin/JPFCodeGenerator-rt.jar'
removed `lib/plugin/JPFCodeGenerator.jar'
removed `lib/plugin/commons-logging.jar'
removed `lib/plugin/jpf-boot.jar'
removed `lib/plugin/jpf.jar'
removed `lib/plugin/velocity-dep-1.5.jar'
removed `src/java/net/sf/jabref/plugin/core/generated/_JabRefPlugin.java'
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-text/jabref-2.6_beta/work/jabref-2.6b ...
Rewriting attributes
Rewriting ./src/plugins/net.sf.jabref.export.misq/build.xml
Rewriting ./build.xml
>>> Source configured.
>>> Compiling source in /var/tmp/portage/app-text/jabref-2.6_beta/work/jabref-2.6b ...
!!! ERROR: Package javassist-2 was not found!
 * ERROR: app-text/jabref-2.6_beta failed:
 *   java-config --classpath=antlr,spin,glazedlists,jgoodies-looks-2.0,jgoodies-forms,microba,jempbox,pdfbox,commons-logging,jpf-1.5,jpfcodegen failed
 * 
 * Call stack:
 *     ebuild.sh, line   49:  Called src_compile
 *   environment, line 4357:  Called java-pkg_getjars '--with-dependencies' 'antlr,spin,glazedlists,jgoodies-looks-2.0,jgoodies-forms,microba,jempbox,pdfbox,commons-logging,jpf-1.5,jpfcodegen'
 *   environment, line 3108:  Called die
 * The specific snippet of code:
 *       [[ $? != 0 ]] && die "java-config --classpath=${pkgs} failed";
 * 
 * If you need support, post the output of 'emerge --info =app-text/jabref-2.6_beta',
 * the complete build log and the output of 'emerge -pqv =app-text/jabref-2.6_beta'.
!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.6  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.6.0.16"
JAVACFLAGS="-source 1.6 -target 1.6" COMPILER=""
and of course, the output of emerge --info


root@tiger:/root(11)# qlist -Iv javassist
dev-java/javassist-3.7


Reproducible: Always




root@tiger:/root(13)# emerge --info
Portage 2.1.7.1 (default/linux/x86/10.0/desktop, gcc-4.4.2, glibc-2.10.1-r0, 2.6.30.4 i686)
=================================================================
System uname: Linux-2.6.30.4-i686-Intel-R-_Pentium-R-_4_CPU_1.60GHz-with-gentoo-2.0.1
Timestamp of tree: Sat, 24 Oct 2009 05:00:02 +0000
distcc 3.1 i686-pc-linux-gnu [disabled]
app-shells/bash:     4.0_p33
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.6.3, 3.1.1-r1
dev-python/pycrypto: 2.0.1-r8
dev-util/cmake:      2.6.3-r1
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.5.2-r1
sys-apps/sandbox:    2.1
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.20
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
FFLAGS="-O2 -march=pentium4 -fomit-frame-pointer"
GENTOO_MIRRORS="ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ "
LDFLAGS="-Wl,-O1"
LINGUAS="de fr"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/java-overlay /usr/local/portage/layman/zugaina /usr/local/portage/layman/science /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X Xaw3d a52 aac acl acpi administrator afs alsa amrr ao aotuv apache2 asf aspell atlas auctex audacious audiofile automount bash-completion beagle berkdb bjam blas bluetooth bonobo boo boost branding bzip2 c++ cairo cdda cddb cdf cdio cdparanoia cdr cgi chm cli consolekit corba cracklib cran crypt cups curl cxx daap dbus device-mapper dga dia divx djvu dlloader dmi doc dri ds3490 dts dv dvb dvd dvdr dvi dxr3 dynagraph eds effects elf emacs emboss encode epiphany esd evo examples exif expat extra extras fam fame ffmpeg fftw firefox fits flac fltk foomaticdb fortran fpx fuse galago gd gdal gdbm geos gif gimp gimpprint ginac glade glitz gml gmp gnokii gnome gnome-keyring gnuplot gnutls gphoto2 gpm graphics graphviz gs gsl gsm gstreamer gtk guile hal hardened harness hddtemp hdf hdf5 hlapi http httpd iconv icq icu id3 ide imagemagick imap innodb ipv6 irda irmc isdnlog ithreads jabber java java5 java6 jbig john jpeg jpeg2k kde kde4 kerberos kexi keyring ladspa lame lapack latex lcms ldap libffi libgda libnotify libsamplerate lirc lm_sensors lua lzo lzw mad maildir math matroska mikmod mmx mmxext mng mod modules mono motif mozdevelop mozilla mozsvg mozxmlterm mp3 mp4 mp4live mpeg mpeg2 mplayer mtp mudflap musicbrainz mysql mysqli nautilus ncurses neXt netcdf netpbm network networkmanager nfs nls nntp nptl nptlonly nsplugin ntfs numarray numeric obex objc ocaml octave odbc ogdi ogg ole openexr opengl openmp pam pcre pda pdf perl pipechan plotutils plugins png podcast policykit posix postgres postscript ppds pppd preview-latex proj projectx pstricks pulseaudio python qhull qt3support qt4 quicktime readline reflection reiserfs rhythmbox rle rpc rrdcgi rrdtool samba sasl science sdl server session slang slp smp sndfile snmp soup sox speex spell spl sql sqlite sse sse2 ssl startup-notification stlport subtitles subversion suexec svg sysfs t1lib tcl tcpd tex theora threads thunar thunderbird tidy tiff tk truetype unicode usb userlocales utempter v4l2 vorbis wav webdav webdav-serf webkit win32codecs wmf wxwidgets x264 x86 xattr xcb xemacs xext xine xml xmlreader xmlrpc xorg xpm xulrunner xv xvid xvmc zlib zvbi" ALSA_CARDS="via82xx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse                " KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de fr" NETBEANS_MODULES="ide websvccommon nb harness apisupport groovy gsf j2ee java xml" USERLAND="GNU" VIDEO_CARDS="mga vesa via openchrome" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Petteri Räty (RETIRED)






          2009-10-24 13:22:43 UTC
        

What's the output of java-check-environment?




Comment 2


Juergen Rose





          2009-10-24 13:58:23 UTC
        

After installing manually (emerge -v1 =javassist-2*) 'java-check-environment' shows:
root@tiger:/root(15)# java-check-environment
* === Java Environment Checker ===
* The purpose of this script is to check the sanity of your Java Environment.
* We have significantly changed and improved the way Java is handled in many
* respects.
* Please refer to our upgrade guide for details:
* http://www.gentoo.org/proj/en/java/java-upgrade.xml

* Checking fastjar...                                                                                                                                         [ ok ]

* Checking vm_environment_files...                                                                                                                            [ ok ]

* Checking user_settings...
* Running as root. Don't need to check user settings.                                                                                                         [ ok ]

* Checking generation_1_system_vm...                                                                                                                          [ ok ]

* Checking java_config_1...                                                                                                                                   [ ok ]

* Checking global_classpath...                                                                                                                                [ ok ]

* Checking virtual_provides...                                                                                                                                [ ok ]

* Checking overlays_eclasses...
* Java eclasses found in the following overlay(s):
* /usr/local/portage/layman/java-overlay

* This may or not be desired. Make sure you don't use any obsolete overlays.
* Especially any overlays (migration etc) from www.gentooexperimental.org/svn/java/
* Overlays (except axxo-overlay and gcj-overlay that are deprecated)
* from http://overlays.gentoo.org/proj/java/ should be fine
* If you experience any problems, remove it from your PORTDIR_OVERLAY and try again
                                                                                                                                                              [ ok ]

* Checking package_env...
!!! ERROR: Package commons-beanutils-1.6 was not found!
* Broken dependencies for dev-java/commons-digester-1.8.1
* Please try emerge -uD1 =dev-java/commons-digester-1.8.1
!!! ERROR: Package jsr101 was not found!
* Broken dependencies for dev-java/jax-rpc-1.1.3.01-r1
* Please try emerge -uD1 =dev-java/jax-rpc-1.1.3.01-r1
!!! ERROR: Package jgoodies-looks-1.2 was not found!
* Broken dependencies for dev-java/jcalendar-1.3.2
* Please try emerge -uD1 =dev-java/jcalendar-1.3.2
!!! ERROR: Package lucene-1 was not found!
* Broken dependencies for dev-java/prefuse-20071021_beta
* Please try emerge -uD1 =dev-java/prefuse-20071021_beta                                                                                                      [ !! ]

* Some problems were found. Please follow the instructions above, and rerun java-check-environment

I did 'root@tiger:/root(16)# emerge -uD1 =dev-java/commons-digester-1.8.1 =dev-java/jax-rpc-1.1.3.01-r1 =dev-java/jcalendar-1.3.2 =dev-java/prefuse-20071021_beta'

The second 'java-check-environment' said:
...
Java environment is sane.

Then I could also emerge jabref-2.6_beta. Thank you.





Comment 3


Juergen Rose





          2010-02-19 17:22:40 UTC
        

I got again the problem. May be the reason was, that 'emerge -p --depclean' suggested to remove java-assist-2. Now only dev-java/javassist-3.7 is installed.

On the affected system java-check-environment
complains about:
!!! ERROR: Package javassist-2 was not found!
 * Broken dependencies for dev-java/aspectwerkz-2.0
 * Please try emerge -uD1 =dev-java/aspectwerkz-2.0
!!! ERROR: Package backport-util-concurrent was not found!
 * Broken dependencies for dev-util/pmd-3.9
 * Please try emerge -uD1 =dev-util/pmd-3.9                                                                                                                       [ !! ]
On some other system is alsp only javassist-3.7 installed and neither 
java-check-environment nor jabref complain about it. What to do?








Comment 4


Juergen Rose





          2010-02-20 13:19:30 UTC
        

After reemerging aspectwerkz and jabref neither java-check-environment nor jabref complains about missing javassist-2.





Comment 5


Vlastimil Babka (Caster) (RETIRED)






          2010-02-20 17:24:31 UTC
        

(In reply to comment #3)
> I got again the problem. May be the reason was, that 'emerge -p --depclean'
> suggested to remove java-assist-2. Now only dev-java/javassist-3.7 is
> installed.
> 
> On the affected system java-check-environment
> complains about:
> !!! ERROR: Package javassist-2 was not found!
>  * Broken dependencies for dev-java/aspectwerkz-2.0
>  * Please try emerge -uD1 =dev-java/aspectwerkz-2.0
> !!! ERROR: Package backport-util-concurrent was not found!
>  * Broken dependencies for dev-util/pmd-3.9
>  * Please try emerge -uD1 =dev-util/pmd-3.9                                    
>                                                                               

This can happen if some deps were removed in the tree but a package was installed before that, so the dep is still recorded there. We should revbump when doing that, but sometimes it happens. Sorry.
 
>   [ !! ]
> On some other system is alsp only javassist-3.7 installed and neither 
> java-check-environment nor jabref complain about it. What to do?
 
Do what java-check-environment suggests in these cases. Looks like it helped, closing the bug. Sorry again.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

