Title: 470270 – media-gfx/gthumb - segfault on startup
URL: https://bugs.gentoo.org/show_bug.cgi?id=470270

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 470270
media-gfx/gthumb - segfault on startup
Last modified: 2014-01-12 14:42:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 470270 
      - media-gfx/gthumb - segfault on startup


Summary:
media-gfx/gthumb - segfault on startup
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-05-18 15:28 UTC by James Le Cuirot





      Modified:
    
2014-01-12 14:42 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


James Le Cuirot






          2013-05-18 15:28:36 UTC
        

I used gthumb for a long time but somewhere along the line, it started segfaulting on startup. Unfortunately I can't recall what changed. I hadn't updated my system in a good few months and I figured a world update would flush the problem out. It didn't. I'm mainly trying 3.0.2 but I've also tried the new 3.2.2 release with the same result.

gdb usually gives a backtrace involving libdbus but occasionally I get one involving glib instead. Even the libdbus backtraces seem fairly random though. I know there are other active threads so it could be some kind of concurrency issue.

What's interesting is if I kill all traces of D-Bus first (twm session, system and user D-Bus daemons killed) then it works. I also tried with a completely new user and it still died so it's not something specific to my account.

Here's a couple of backtraces and my emerge --info.


#0  _dbus_watch_invalidate (watch=0x0) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-watch.c:171
#1  0x00007ffff07f975e in free_watches (transport=transport@entry=0x95bca0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport-socket.c:83
#2  0x00007ffff07f980d in socket_disconnect (transport=0x95bca0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport-socket.c:987
#3  0x00007ffff07f86aa in _dbus_transport_disconnect (transport=0x95bca0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport.c:509
#4  _dbus_transport_disconnect (transport=0x95bca0) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport.c:500
#5  0x00007ffff07f92fd in _dbus_transport_queue_messages (transport=0x95bca0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport.c:1165
#6  0x00007ffff07e3294 in _dbus_connection_get_dispatch_status_unlocked (connection=0x95c3a0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:4211
#7  0x00007ffff07e3ebc in dbus_connection_get_dispatch_status (connection=0x95c3a0)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:4342
#8  0x00007fffe9bcf203 in ?? () from /usr/lib64/libdbus-glib-1.so.2
#9  0x00007ffff5414f18 in g_main_context_prepare (context=context@entry=0x76cae0, priority=priority@entry=0x7fffffffdbb8) at gmain.c:2986
#10 0x00007ffff54155ab in g_main_context_iterate (context=context@entry=0x76cae0, block=block@entry=1, dispatch=dispatch@entry=1, 
    self=<optimized out>) at gmain.c:3270
#11 0x00007ffff54157a4 in g_main_context_iteration (context=0x76cae0, context@entry=0x0, may_block=may_block@entry=1) at gmain.c:3351
#12 0x00007ffff5c0554c in g_application_run (application=0x701030, argc=argc@entry=1, argv=argv@entry=0x7fffffffdd88) at gapplication.c:1624
#13 0x00000000004378ed in main (argc=1, argv=0x7fffffffdd88) at main.c:592


#0  0x00007ffff07ea453 in _dbus_header_get_byte_order (header=header@entry=0x95e928)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-marshal-header.c:178
#1  0x00007ffff07eadf4 in _dbus_header_get_field_basic (header=header@entry=0x95e928, field=field@entry=5, type=type@entry=117, 
    value=value@entry=0x7fffd07ae73c) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-marshal-header.c:1370
#2  0x00007ffff07ef0cc in dbus_message_get_reply_serial (message=message@entry=0x95e920)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-message.c:1091
#3  0x00007ffff07e350c in _dbus_connection_queue_received_message_link (connection=0x95c340, link=link@entry=0x95b948)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:522
#4  0x00007ffff07f92b2 in _dbus_transport_queue_messages (transport=transport@entry=0x95bc40)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport.c:1157
#5  0x00007ffff07fa1ca in do_reading (transport=<optimized out>)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport-socket.c:851
#6  do_reading (transport=0x95bc40) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport-socket.c:695
#7  0x00007ffff07fac24 in socket_do_iteration (transport=0x95bc40, flags=<optimized out>, timeout_milliseconds=<optimized out>)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport-socket.c:1162
#8  0x00007ffff07f8f4f in _dbus_transport_do_iteration (transport=0x95bc40, flags=flags@entry=6, 
    timeout_milliseconds=timeout_milliseconds@entry=25000) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-transport.c:976
#9  0x00007ffff07e5a2c in _dbus_connection_do_iteration_unlocked (connection=connection@entry=0x95c340, pending=pending@entry=0x7fffc8005c20, 
    flags=flags@entry=6, timeout_milliseconds=timeout_milliseconds@entry=25000)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:1234
#10 0x00007ffff07e7217 in _dbus_connection_block_pending_call (pending=0x7fffc8005c20)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:2415
#11 0x00007ffff07f33e5 in dbus_pending_call_block (pending=<optimized out>)
    at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-pending-call.c:748
#12 0x00007ffff07e626b in dbus_connection_send_with_reply_and_block (connection=0x95c340, message=0x749240, timeout_milliseconds=-1, 
    error=0x7fffd07aea80) at /var/tmp/portage/sys-apps/dbus-1.6.10/work/dbus-1.6.10/dbus/dbus-connection.c:3530
#13 0x00007fffe9e0c1b5 in gconf_engine_notify_remove () from /usr/lib64/libgconf-2.so.4
#14 0x00007fffe9e08e03 in gconf_client_remove_dir () from /usr/lib64/libgconf-2.so.4
#15 0x00007fffeacd4283 in ?? () from /usr/lib64/gio/modules/libgsettingsgconfbackend.so
#16 0x00007ffff5c17f3d in g_settings_finalize (object=0x7fffc8002f20) at gsettings.c:593
#17 0x00007ffff5705b98 in g_object_unref (_object=0x7fffc8002f20) at gobject.c:3024
#18 0x00007fffe2723609 in comments__read_metadata_ready_cb (file_list=0x1184780, attributes=<optimized out>) at main.c:109
#19 comments__read_metadata_ready_cb (file_list=0x1184780, attributes=<optimized out>) at main.c:81
#20 0x00007ffff5406e74 in g_hook_list_marshal (hook_list=0x952e20, may_recurse=may_recurse@entry=1, 
    marshaller=marshaller@entry=0x47d710 <invoke_marshaller_2>, data=data@entry=0x7fffc8005550) at ghook.c:676
#21 0x000000000047dcd4 in gth_hook_invoke (name=name@entry=0x4c1448 "read-metadata-ready", first_data=<optimized out>) at gth-hook.c:269
#22 0x0000000000492738 in _g_query_metadata_async_thread (result=0x1199e30, object=<optimized out>, cancellable=0x10cced0)
    at gth-metadata-provider.c:193
#23 0x00007ffff5bd5d3e in run_in_thread (job=<optimized out>, c=0x10cced0, _data=0xea44a0) at gsimpleasyncresult.c:869
#24 0x00007ffff5bc2a06 in io_job_thread (data=0x10f1cc0, user_data=<optimized out>) at gioscheduler.c:162
#25 0x00007ffff5439712 in g_thread_pool_thread_proxy (data=<optimized out>) at gthreadpool.c:309
#26 0x00007ffff5438ef5 in g_thread_proxy (data=0x942680) at gthread.c:797
#27 0x00007ffff4b9bf3a in start_thread () from /lib64/libpthread.so.0
#28 0x00007ffff48d5c3d in clone () from /lib64/libc.so.6


Portage 2.1.11.63 (default/linux/amd64/13.0, gcc-4.7.3, glibc-2.17, 3.9.0-gentoo x86_64)
=================================================================
System uname: Linux-3.9.0-gentoo-x86_64-Intel-R-_Core-TM-_i7_CPU_K_875_@_2.93GHz-with-gentoo-2.2
KiB Mem:     4038920 total,   1469896 free
KiB Swap:    5242876 total,   5242876 free
Timestamp of tree: Wed, 15 May 2013 18:15:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
distcc 3.1 x86_64-pc-linux-gnu [disabled]
ccache version 3.1.9 [disabled]
app-shells/bash:          4.2_p45
dev-java/java-config:     2.2.0::java-overlay
dev-lang/python:          2.7.4
dev-util/ccache:          3.1.9
dev-util/cmake:           2.8.10.2-r2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13::<unknown repository>, 2.69
sys-devel/automake:       1.9.6-r3, 1.11.6, 1.12.6, 1.13.1
sys-devel/binutils:       2.23.1
sys-devel/gcc:            3.4.6-r2, 4.7.3
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo symphony Mythtv-Ebuilds java-overlay
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=corei7 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--ask-enter-invalid --quiet-build=n"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gentoo.virginmedia.com ftp://mirror.qubenet.net/mirror/gentoo http://gentoo.osuosl.org"
INSTALL_MASK="/etc/asterisk /usr/lib64/distcc/bin"
LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /var/lib/layman/MythTV/Gentoo /var/lib/layman/java-overlay"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="S3TC X X509 a52 aac aacplus aalib acpi aften aim alaw allegro amd64 amr asf async audiofile autoipd barcode bash-completion berkdb blender-game bluetooth bmp bogofilter boost branding bzip2 cairo cdda cddb cdio cdparanoia cdr cdrom cdsound cegui cgi chardet cleartype cli community console consolekit cracklib crypt cscope css ctype cups curl cxx dbus dc1394 device-mapper devil dhcp directfb dri dts dv dvb dvd dvdnav dvdr emf emoticon enca encode equalizer exceptions exif faac faad fam fastcgi fat fbcon ffmpeg fftw filter firefox firefox3 flac fluidsynth fmod fontconfig frei0r ftp fuse g3dvl g722 g729 gallium gbm gd gdbm gdu geos gif gimp git gkrellm gles1 gles2 glut gmp gnutls gphoto2 gpm grammar gsl gsm gstreamer gtk gtkstyle gudev hash hddtemp hires-icons hog http hwdb icon iconv icq icu id3 id3tag ieee1394 ilbc image imagemagick imap imlib inkjar ithreads j2me jabber java6 javascript jfs joystick jpeg json kdrive keymap kvm ladspa lame libffi libkms libnotify libsamplerate libsecret libsoxr libv4l2 libvisual lights lighttpd lirc live lj llvm lm_sensors lvm lzo m17n-lib mad maildir matroska mbox mbrola md5sum mdnsresponder-compat melt midi mikmod minizip mmap mmx mmxext mod modplug modules mp3 mp4 mpeg mplayer mpx msn mudflap multilib musepack music mvl mysql mysqli ncurses network nfs nfsidmap nfsv3 nfsv4 nocd nptl nsplugin ntfs ntfsprogs offensive ogg openal opengl openmp openssl openvg openxml opus pam pcre pdf pg-intdatetime phonehome png pnm policykit posix postgres ppds pulseaudio qmax qt3support qt4 quicktime rar readline reiserfs rtaudio rtc rtmp rtsp samba sasl scanner scrobbler sdl sdl-image sdl-sound sdlaudio secure-delete session sha512 simplexml skins slang smp sndfile soap sockets socks5 sound soundex sounds soundtouch sox speex spell sse sse2 sse3 sse4 sse41 sse4_1 sse4a ssl ssse3 startup-notification stemmer stream subversion svg sysvipc taglib textures tga theora thesaurus threads thumbnail thunar tiff timidity tordns transparent-proxy truetype udev udisks uk_rt ulaw unicode unzip upnp usb userlocales v4l vcd vdpau vhosts videos vispatch vnc vorbis vpx wav web webgl webkit webm webp wifi win32 win64 wma wmf x264 xattr xcb xcomposite xext xface xft xml xmms2 xosd xpm xprint xrandr xsl xv xvid xvmc zip zlib zsh-completion" ABI_X86="64 32" ALSA_CARDS="intel-hda" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en en_GB" LIRC_DEVICES="devinput" NGINX_MODULES_HTTP="access auth_basic autoindex fastcgi geoip gzip proxy rewrite ssi" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-3" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64 arm" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="radeon r600" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Pacho Ramos






          2013-08-29 12:37:33 UTC
        

Please try with fully updated system and gthumb-3.2.3




Comment 2


James Le Cuirot






          2014-01-12 14:42:26 UTC
        

I was not able to do a big update for a while due to moving house and overheating problems. I now have though and the problem has gone. Who knows why. :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

