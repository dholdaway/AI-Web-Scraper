Title: 388687 – net-wireless/wpa_supplicant-0.7.3-r5 fails to build when libnl:3 is installed
URL: https://bugs.gentoo.org/show_bug.cgi?id=388687

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 388687
net-wireless/wpa_supplicant-0.7.3-r5 fails to build when libnl:3 is installed
Last modified: 2011-11-01 00:52:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 388687 
      - net-wireless/wpa_supplicant-0.7.3-r5 fails to build when libnl:3 is installed


Summary:
net-wireless/wpa_supplicant-0.7.3-r5 fails to build when libnl:3 is installed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Bjarke Istrup Pedersen (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-10-27 19:37 UTC by Michał Górny





      Modified:
    
2011-11-01 00:52 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



alexxy
mobile+disabled
wtt6









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The build log

              (20111027-193333.log,8.47 KB,
                text/plain)

            
2011-10-27 19:37 UTC,

            Michał Górny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michał Górny









          2011-10-27 19:37:48 UTC
        

Created attachment 291037 [details]
The build log

When libnl:3 is installed, wpa_supplicant fails to build. The same issue occurs even when libnl:1.1 is installed as well. In order to build it, I have to completely remove libnl:3 which is at least weird.




Comment 1


Marek Vojtko





          2011-10-27 23:52:31 UTC
        

Same here, the emerge fails with

../src/drivers/driver_nl80211.c:22:31: fatal error: netlink/genl/genl.h: No such file or director




Comment 2


Bjarke Istrup Pedersen (RETIRED)






          2011-10-28 07:43:46 UTC
        

Could you try and do an emerge --sync and confirm that the line regarding CONFIG_LIBNL20 is commented out in the ebuild?

I've changed the ebuild so it no longer sets the LIBNL20 setting in the compile config file, so i should compile against libnl-1.1 .




Comment 3


Bjarke Istrup Pedersen (RETIRED)






          2011-10-28 07:55:57 UTC
        

Here is the info from my machine where it works:
Installed versions of dev-libs/libnl: 1.1-r2 3.2.1

Output of compiling:
eagle ~ # ebuild /usr/portage/net-wireless/wpa_supplicant/wpa_supplicant-0.7.3-r5.ebuild compile
 * wpa_supplicant-0.7.3.tar.gz RMD160 SHA1 SHA256 size ;-) ...           [ ok ]
 * checking ebuild checksums ;-) ...                                     [ ok ]
 * checking auxfile checksums ;-) ...                                    [ ok ]
 * checking miscfile checksums ;-) ...                                   [ ok ]
>>> Unpacking source...
>>> Unpacking wpa_supplicant-0.7.3.tar.gz to /var/tmp/portage/net-wireless/wpa_supplicant-0.7.3-r5/work
>>> Source unpacked in /var/tmp/portage/net-wireless/wpa_supplicant-0.7.3-r5/work
>>> Preparing source in /var/tmp/portage/net-wireless/wpa_supplicant-0.7.3-r5/work/wpa_supplicant-0.7.3/wpa_supplicant ...
 * Applying wpa_supplicant-0.7.3-dbus_path_fix.patch ...                 [ ok ]
 * Applying do-not-call-dbus-functions-with-NULL-path.patch ...          [ ok ]
 * Applying wpa_supplicant-0.7.3-dbus-api-changes.patch ...              [ ok ]
 * Applying wpa_supplicant-0.7.3-dbus-WPAIE-fix.patch ...                [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/net-wireless/wpa_supplicant-0.7.3-r5/work/wpa_supplicant-0.7.3/wpa_supplicant ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/net-wireless/wpa_supplicant-0.7.3-r5/work/wpa_supplicant-0.7.3/wpa_supplicant ...
 * Building wpa_supplicant
make -j6 -s
  CC  eap_register.c
  CC  ../src/utils/common.c
  CC  ../src/utils/wpa_debug.c
  CC  notify.c
  CC  ../src/utils/wpabuf.c
  CC  ../src/utils/os_unix.c
  CC  bss.c
  CC  ../src/utils/eloop.c
  CC  ../src/rsn_supp/preauth.c
  CC  config_file.c
  CC  ../src/rsn_supp/pmksa_cache.c
  CC  ../src/common/wpa_common.c
  CC  ../src/rsn_supp/wpa_ie.c
  CC  ../src/eap_peer/eap_tls.c
  CC  config.c
  CC  ../src/eap_common/eap_peap_common.c
  CC  ../src/rsn_supp/wpa.c
  CC  ../src/eap_peer/eap_md5.c
  CC  ../src/rsn_supp/peerkey.c
  CC  ../src/eap_peer/mschapv2.c
  CC  ../src/eap_peer/eap_gtc.c
  CC  ../src/eap_peer/eap_otp.c
  CC  ../src/eap_peer/eap_peap.c
  CC  ../src/eap_peer/eap_mschapv2.c
  CC  ../src/eap_common/eap_psk_common.c
  CC  ../src/eap_peer/eap_leap.c
  CC  ../src/eap_common/eap_pax_common.c
  CC  ../src/eap_peer/eap_ttls.c
  CC  ../src/eap_peer/eap_pax.c
  CC  ../src/eap_peer/eap_psk.c
  CC  ../src/eap_common/chap.c
  CC  ../src/eap_peer/eap_methods.c
  CC  ../src/crypto/ms_funcs.c
  CC  ../src/crypto/aes-unwrap.c
  CC  ../src/eapol_supp/eapol_supp_sm.c
  CC  ../src/crypto/aes-ctr.c
  CC  ../src/crypto/aes-eax.c
  CC  ../src/eap_peer/eap_tls_common.c
  CC  ../src/crypto/crypto_openssl.c
  CC  ../src/crypto/aes-encblock.c
  CC  ../src/crypto/md5.c
  CC  ../src/crypto/aes-omac1.c
  CC  ../src/eap_peer/eap.c
  CC  ../src/utils/base64.c
  CC  ../src/eap_common/eap_common.c
  CC  ../src/crypto/tls_openssl.c
  CC  ../src/common/ieee802_11_common.c
  CC  ctrl_iface_unix.c
  CC  sme.c
  CC  ../src/crypto/sha1.c
  CC  ../src/crypto/sha1-tlsprf.c
  CC  ../src/crypto/sha1-pbkdf2.c
  CC  blacklist.c
  CC  main.c
  CC  wpas_glue.c
  CC  scan.c
  CC  ctrl_iface.c
  CC  ../src/drivers/driver_atmel.c
  CC  events.c
  CC  ../src/drivers/driver_ndiswrapper.c
  CC  ../src/drivers/driver_ipw.c
  CC  ../src/drivers/driver_hostap.c
  CC  wpa_supplicant.c
  CC  ../src/drivers/driver_wired.c
  CC  ../src/utils/radiotap.c
  CC  ../src/drivers/netlink.c
  CC  ../src/drivers/linux_ioctl.c
  CC  ../src/drivers/drivers.c
  CC  ../src/drivers/driver_ralink.c
  CC  wpa_passphrase.c
  CC  ../src/l2_packet/l2_packet_linux.c
  CC  ../src/common/wpa_ctrl.c
  CC  ../src/drivers/driver_wext.c
  CC  wpa_cli.c
  CC  ../src/drivers/driver_nl80211.c
>>> Source compiled.

So it compiles fine here, so I'm suspecting that you haven't got the newest ebuild from the tree.

If you emerge --sync, does the problem persist?




Comment 4


Marek Vojtko





          2011-10-28 13:16:53 UTC
        

emerge --sync and emerging again seems to have solved the problem. Thank you.




Comment 5


Bjarke Istrup Pedersen (RETIRED)






          2011-10-28 13:54:05 UTC
        

Great, closing bug :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

