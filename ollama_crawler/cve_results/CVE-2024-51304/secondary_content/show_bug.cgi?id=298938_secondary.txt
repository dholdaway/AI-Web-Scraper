Title: 298938 – >=perl-core/Module-Build-0.36 causes  Failing Signature/MANIFEST tests
URL: https://bugs.gentoo.org/show_bug.cgi?id=298938

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 298938
>=perl-core/Module-Build-0.36 causes  Failing Signature/MANIFEST tests
Last modified: 2010-04-24 15:35:49 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 298938 
      - >=perl-core/Module-Build-0.36 causes  Failing Signature/MANIFEST tests


Summary:
>=perl-core/Module-Build-0.36 causes  Failing Signature/MANIFEST tests
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-12-30 05:20 UTC by Kent Fredric (IRC: kent\n) (RETIRED)





      Modified:
    
2010-04-24 15:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kent Fredric (IRC: kent\n) (RETIRED)






          2009-12-30 05:20:41 UTC
        

Module::Build 0.36 introduced a new ( Generated ) file, 'MYMETA.yml' which is emitted into the build directory during src_compile. 

Modules developed prior to the advent of 0.36 will have no consideration for this fact, and some modules ( ie: Term-ProgressBar ) contain MANIFEST/Signature tests that rely on comparing the directory state with the file system, and upon finding this new file, fail the test ( ie: http://www.nntp.perl.org/group/perl.cpan.testers/2009/10/msg5660339.html )

The solution to this upstream is not entirely obvious to me yet, I believe it requires individual module authors adapting their releases to work with the latest Module::Build.

In the meantime, my recommendation is to rm the signature/manifest .t files and avoid that specific check.

It would be nice to have a method in the eclass that handles this so the modification work for maintainers is minimised, ie:

src_unpack(){ 
   perl-module_src_unpack;
   module_build_rm_manifest "t/0-signature.t"
}

where module_build_rm_manifest calls has_version to check for module_build versions installed, and upon seeing 0.36 or higher, removes the specified files. 

I believe were going to incur this problem multiple times in future for people running FEATURES="test" and if we do we can block on this metabug




Comment 1


Torsten Veller (RETIRED)






          2010-01-02 14:50:57 UTC
        

I've removed the signature test from dev-perl/Term-ProgessBar.




Comment 2


Torsten Veller (RETIRED)






          2010-04-24 15:35:49 UTC
        

I remember i tested all Module-Build packages and there were no further problems.

I close this bug now

Thanks









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

