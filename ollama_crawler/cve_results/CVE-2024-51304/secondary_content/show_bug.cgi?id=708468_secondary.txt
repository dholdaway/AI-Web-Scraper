Title: 708468 – sci-chemistry/autodock_vina-1.1.2 with dev-libs/boost-1.72.0-r1 - In file included from ../../../src/lib/current_weights.cpp:23: /usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
URL: https://bugs.gentoo.org/show_bug.cgi?id=708468

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 708468
sci-chemistry/autodock_vina-1.1.2 with dev-libs/boost-1.72.0-r1 - In file included from ../../../src/lib/current_weights.cpp:23: /usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
Last modified: 2020-02-08 11:22:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 708468 
      - sci-chemistry/autodock_vina-1.1.2 with dev-libs/boost-1.72.0-r1 - In file included from ../../../src/lib/current_weights.cpp:23: /usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied


Summary:
sci-chemistry/autodock_vina-1.1.2 with dev-libs/boost-1.72.0-r1 - In file inc...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

David Seifert








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-02-06 13:04 UTC by urcindalo





      Modified:
    
2020-02-08 11:22 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:


675952





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


urcindalo





          2020-02-06 13:04:17 UTC
        

Following the boost update from last week, a rebuild of autodock_vina is necessary according to revdep-rebuild.
However, emerging stable (and only) autodock_vina-1.1.2 in the tree fails this way:
=====
[ebuild   R    ] sci-chemistry/autodock_vina-1.1.2::gentoo  USE="-debug" 0 KiB

Total: 1 package (1 reinstall), Size of downloads: 0 KiB

Would you like to merge these packages? [Yes/No] Y

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) sci-chemistry/autodock_vina-1.1.2::gentoo
 * autodock_vina_1_1_2.tgz BLAKE2B SHA512 size ;-) ...                                                                                                           [ ok ]
>>> Unpacking source...
>>> Unpacking autodock_vina_1_1_2.tgz to /var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work
>>> Source unpacked in /var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work
>>> Preparing source in /var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work/autodock_vina_1_1_2/build/linux/release ...
 * Applying 1.1.2-gentoo.patch ...                                                                                                                               [ ok ]
 * Applying autodock_vina-1.1.2-boost-filesystem.patch ...                                                                                                       [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work/autodock_vina_1_1_2/build/linux/release ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work/autodock_vina_1_1_2/build/linux/release ...
make -j5 BASE=/usr/ GPP=x86_64-pc-linux-gnu-g++ C_OPTIONS=-DNDEBUG 
x86_64-pc-linux-gnu-g++ -pthread -ansi -Wno-long-long -DNDEBUG -I/usr//include -march=native -O2 -pipe -DBOOST_FILESYSTEM_VERSION=3 -I ../../../src/lib -o main.o -c ../../../src/main/main.cpp 
x86_64-pc-linux-gnu-g++ -pthread -ansi -Wno-long-long -DNDEBUG -I/usr//include -march=native -O2 -pipe -DBOOST_FILESYSTEM_VERSION=3 -o cache.o -c ../../../src/lib/cache.cpp 
x86_64-pc-linux-gnu-g++ -pthread -ansi -Wno-long-long -DNDEBUG -I/usr//include -march=native -O2 -pipe -DBOOST_FILESYSTEM_VERSION=3 -o coords.o -c ../../../src/lib/coords.cpp 
x86_64-pc-linux-gnu-g++ -pthread -ansi -Wno-long-long -DNDEBUG -I/usr//include -march=native -O2 -pipe -DBOOST_FILESYSTEM_VERSION=3 -o current_weights.o -c ../../../src/lib/current_weights.cpp 
x86_64-pc-linux-gnu-g++ -pthread -ansi -Wno-long-long -DNDEBUG -I/usr//include -march=native -O2 -pipe -DBOOST_FILESYSTEM_VERSION=3 -o everything.o -c ../../../src/lib/everything.cpp 
In file included from ../../../src/lib/random.h:26,
                 from ../../../src/lib/quaternion.h:30,
                 from ../../../src/lib/conf.h:28,
                 from ../../../src/lib/tree.h:26,
                 from ../../../src/lib/model.h:29,
                 from ../../../src/lib/terms.h:27,
                 from ../../../src/lib/current_weights.h:26,
                 from ../../../src/lib/current_weights.cpp:23:
/usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
   37 | #include <boost/random/discard_block.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ../../../src/lib/random.h:26,
                 from ../../../src/lib/quaternion.h:30,
                 from ../../../src/lib/conf.h:28,
                 from ../../../src/lib/tree.h:26,
                 from ../../../src/lib/model.h:29,
                 from ../../../src/lib/cache.h:29,
                 from ../../../src/lib/cache.cpp:41:
/usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
   37 | #include <boost/random/discard_block.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
compilation terminated.
In file included from ../../../src/lib/random.h:26,
                 from ../../../src/lib/quaternion.h:30,
                 from ../../../src/lib/conf.h:28,
                 from ../../../src/lib/coords.h:26,
                 from ../../../src/lib/coords.cpp:23:
/usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
   37 | #include <boost/random/discard_block.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
In file included from ../../../src/lib/random.h:26,
                 from ../../../src/lib/quaternion.h:30,
                 from ../../../src/lib/conf.h:28,
                 from ../../../src/lib/tree.h:26,
                 from ../../../src/lib/model.h:29,
                 from ../../../src/lib/terms.h:27,
                 from ../../../src/lib/everything.h:26,
                 from ../../../src/lib/everything.cpp:23:
/usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
   37 | #include <boost/random/discard_block.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
make: *** [../../makefile_common:18: cache.o] Error 1
make: *** Waiting for unfinished jobs....
make: *** [../../makefile_common:18: coords.o] Error 1
make: *** [../../makefile_common:18: current_weights.o] Error 1
make: *** [../../makefile_common:18: everything.o] Error 1
In file included from ../../../src/lib/random.h:26,
                 from ../../../src/lib/quaternion.h:30,
                 from ../../../src/lib/conf.h:28,
                 from ../../../src/lib/tree.h:26,
                 from ../../../src/lib/model.h:29,
                 from ../../../src/lib/parse_pdbqt.h:26,
                 from ../../../src/main/main.cpp:33:
/usr/include/boost/random.hpp:37:10: fatal error: /usr/include/boost/random/discard_block.hpp: Permission denied
   37 | #include <boost/random/discard_block.hpp>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
make: *** [../../makefile_common:24: main.o] Error 1
 * ERROR: sci-chemistry/autodock_vina-1.1.2::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=sci-chemistry/autodock_vina-1.1.2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=sci-chemistry/autodock_vina-1.1.2::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/temp/environment'.
 * Working directory: '/var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work/autodock_vina_1_1_2/build/linux/release'
 * S: '/var/tmp/portage/sci-chemistry/autodock_vina-1.1.2/work/autodock_vina_1_1_2/build/linux/release'

>>> Failed to emerge sci-chemistry/autodock_vina-1.1.2, Log file:
=====




Comment 1


Jeroen Roovers (RETIRED)






          2020-02-07 08:14:27 UTC
        

/usr/include/boost/random.hpp should have been installed with read access enabled.

Please post your `emerge --info' output in a comment.




Comment 2


urcindalo





          2020-02-07 10:06:41 UTC
        

(In reply to Jeroen Roovers from comment #1)
> /usr/include/boost/random.hpp should have been installed with read access
> enabled.
> 
> Please post your `emerge --info' output in a comment.

Here you are:
=====

$ emerge --info
Portage 2.3.84 (python 3.6.9-final-0, default/linux/amd64/17.1/desktop/plasma/systemd, gcc-9.2.0, glibc-2.29-r7, 4.19.97-gentoo x86_64)
=================================================================
System uname: Linux-4.19.97-gentoo-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q8300_@_2.50GHz-with-gentoo-2.6
KiB Mem:     4034528 total,    301356 free
KiB Swap:    6291452 total,   6189932 free
Timestamp of repository gentoo: Wed, 05 Feb 2020 07:00:01 +0000
Head commit of repository gentoo: 7a6aa981925ddf9c8db748ced0d889894e18309e
Head commit of repository flatpak-overlay: 5a60266f5803ac62b58994da0020d101fe424dd7

sh bash 4.4_p23-r1
ld GNU ld (Gentoo 2.32 p2) 2.32.0
app-shells/bash:          4.4_p23-r1::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.30.1::gentoo
dev-lang/python:          2.7.17::gentoo, 3.6.9::gentoo, 3.7.5-r1::gentoo
dev-util/cmake:           3.14.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.11.6-r3::gentoo, 1.13.4-r2::gentoo, 1.16.1-r1::gentoo
sys-devel/binutils:       2.32-r1::gentoo
sys-devel/gcc:            9.2.0-r2::gentoo
sys-devel/gcc-config:     2.1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.19::gentoo (virtual/os-headers)
sys-libs/glibc:           2.29-r7::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 
    sync-rsync-verify-max-age: 24
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1

local
    location: /usr/portage/local
    masters: gentoo
    priority: 0

4nykey
    location: /var/lib/layman/4nykey
    sync-type: laymansync
    sync-uri: https://github.com/4nykey/4nykey.git
    masters: gentoo
    priority: 50

dilfridge
    location: /var/lib/layman/dilfridge
    sync-type: laymansync
    sync-uri: https://anongit.gentoo.org/git/dev/dilfridge.git
    masters: gentoo
    priority: 50

flatpak-overlay
    location: /var/lib/layman/flatpak-overlay
    sync-type: git
    sync-uri: https://github.com/fosero/flatpak-overlay.git
    masters: gentoo
    priority: 50

torbrowser
    location: /var/lib/layman/torbrowser
    sync-type: laymansync
    sync-uri: https://github.com/MeisterP/torbrowser-overlay.git
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--with-bdeps y"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
INSTALL_MASK="/usr/share/locale -/usr/share/locale/es -/usr/share/locale/es_ES -/usr/share/locale/en_US -/usr/share/locale/en /usr/share/gcc-data/x86_64-pc-linux-gnu/*/locale -/usr/share/gcc-data/x86_64-pc-linux-gnu/*/locale/es /usr/share/man/de /usr/share/man/el /usr/share/man/fr /usr/share/man/hu /usr/share/man/ja /usr/share/man/jp /usr/share/man/sk /usr/share/man/zh_TW"
LANG="es_ES.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="es_ES es en_US en"
MAKEOPTS="-j5"
PKGDIR="/home/ramiro/usr/local/portage/pkgdir-backup/"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac aalib accessibility acl acpi activities additions adns ads alsa amd64 apbs apm apng archive arpack attica audiofile auth authfile autoipd autoreplace autotrace bash-completion bcmath bdf berkdb binary-drivers blas branding bzip2 cairo caps cdda cddb cdparanoia cdr cdrom cg chm chroot clamav cli compat contactnotes context crypt css ctype cups curl curlwrappers custom-optimization cxx dbus declarative designer-plugin desktopglobe detex dga dia directfb djvu dri dts dvd dvdr dvi dvipdfm emboss emf emovix enca encode exif expoblending extensions extra fastcgi fat fbcon ffmpeg fftw flac flatfile flickr fltk fontconfig foomaticdb fortran fpx ftp fuse gallium gd gdbm geoip geolocation gif gimp git glew gmp gphoto2 gpm gps gpssync grammar graphics graphviz grub gsl gstreamer gtk gzip hddtemp hdri history hpcups hpijs humanities icedtea7 iconv icu id3tag idn ieee1394 imagemagick imap imlib inifile inkjar ipv6 jack jadetex java java6 javafx javascript jbig jce jfs jpeg jpeg2k json justify kde kipi kwallet ladspa lame lapack latex lcms ldap lensfun libcaca libnotify libsecret libssh2 libtirpc libwww live llvm-shared-libs lm-sensors lm_sensors logrotate lqr lua lzo m17n-lib mad maildir math matroska mbox md5sum mdb mediawiki memlimit metis milter mime mjpeg mmap mmxext mng mobi modplug mono motif mozilla mp3 mp4 mpeg mplayer msms msn mtp multilib multiuser musepack music musicbrainz nas ncurses neXt net netboot network network-cron networking networkmanager new-login nis nls npp nptl nsplugin ntfs ntfsprogs numpy ofx ogg omega openal openbabel openexr opengl openmax openmp opensslcrypt openvg osc ots pam pango panorama parse-clocks pcntl pcre pdf phonon plasma plotutils plugins png policykit portaudio posix postproc postscript povray ppds profile pstricks publishers qalculate qml qt5 quicktime qwt rar raw rdesktop readline redeyes reiserfs resolvconf rss rtc rtf rtsp ruby samba sasl scanner science sdk sdl sdl-image seccomp semantic-desktop sensord shout simplexml skey skins slang slp smp snmp soap sockets socks5 solver source sox speex spell split-usr sse3 sse4 sse41 sse4_1 ssl ssse3 startup-notification subtitles subversion svg swat sync-plugin-portage syslog systemd sysvipc szip t1lib taglib tbb tcl tcpd tex4ht tga theora thesaurus threads thumbnail thunderbird tidy tiff tk truetype twolame udev udisks unicode upower usb userlocales v4l vaapi vcd vcdx vdpau vlm vmd vnc vorbis wavpack wayland wayland-compositor wddx webdav webstart widgets winbind winpopup wmf wxwidgets x264 xa xanim xattr xcb xcomposite xetex xface xforms xfs xft xindy xine xls xml xmlreader xmlrpc xmlwriter xmp xorgmodule xplanet xpm xsl xv xvid xvmc zip zlib zoran" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 sse3 sse4_1 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev" KERNEL="linux" L10N="es-ES es en-US en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-2" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_6" PYTHON_TARGETS="python2_7 python3_6" RUBY_TARGETS="ruby24 ruby25" SANE_BACKENDS="epson2 hp samsung" USERLAND="GNU" VIDEO_CARDS="nouveau" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


David Seifert






          2020-02-08 10:37:19 UTC
        

Build absolutely fine for me, you must have changed permissions in some non-standard way.




Comment 4


Andreas Sturmlechner






          2020-02-08 10:39:05 UTC
        

Please don't CC random projects.




Comment 5


urcindalo





          2020-02-08 11:08:14 UTC
        

(In reply to David Seifert from comment #3)
> Build absolutely fine for me, you must have changed permissions in some
> non-standard way.


I never tinker with system files or permissions. I'm just a regular end user.
Whats more, I even rebuilt boost, just in case, when I first met this issue, to no avail.

Anyway, I just checked out the permissions for the affected file and saw this:
=====
$ ls -la /usr/include/boost/random/discard_block.hpp
-rw------- 1 root root 7991 feb  1 18:02 /usr/include/boost/random/discard_block.hpp
=====

However, the remaining file permissions in that folder, all of them coming from a regular boost emerge, are:
=====
...
-rw-r--r-- 1 root root  6528 feb  1 18:02 cauchy_distribution.hpp
-rw-r--r-- 1 root root  6322 feb  1 18:02 chi_squared_distribution.hpp
drwxr-xr-x 2 root root  4096 feb  1 18:04 detail
-rw------- 1 root root  7991 feb  1 18:02 discard_block.hpp
-rw-r--r-- 1 root root 21137 feb  1 18:02 discrete_distribution.hpp
-rw-r--r-- 1 root root 20895 feb  1 18:02 exponential_distribution.hpp
...
=====

I really don't know where the difference for discard_block.hpp might come from, but I just did a "chmod a+r /usr/include/boost/random/discard_block.hpp" and, indeed, the problem has gone and autodock_vina re-emerged fine.

I'm just re-emerging boost, again. I'll post the permissions for discard_block.hpp later on.




Comment 6


urcindalo





          2020-02-08 11:22:46 UTC
        

> I'm just re-emerging boost, again. I'll post the permissions for
> discard_block.hpp later on.

Said and done. The new permissions are as expected (a+r), so I honestly can't understand where the previous mess might come from, or since when.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

