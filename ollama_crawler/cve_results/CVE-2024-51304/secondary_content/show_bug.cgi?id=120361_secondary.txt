Title: 120361 – eclean-dist version 0.4.1 does nothing
URL: https://bugs.gentoo.org/show_bug.cgi?id=120361

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 120361
eclean-dist version 0.4.1 does nothing
Last modified: 2016-06-23 20:27:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 120361 
      - eclean-dist version 0.4.1 does nothing


Summary:
eclean-dist version 0.4.1 does nothing
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Tools

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage Tools Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-25 19:04 UTC by Stuart W. Finlayson





      Modified:
    
2016-06-23 20:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stuart W. Finlayson





          2006-01-25 19:04:47 UTC
        

eclean-dist does not work for me.  Here's my distfiles:

wolverine ~ # ls -lutr /usr/portage/distfiles/
total 231899
drwxrwsr-x  2 root portage       48 Jan  8 00:04 .locks/
-rw-rw-r--  1 root portage     7234 Jan  9 09:01 svgalib_helper-1.9.17-mplayer.tar.bz2
-rw-rw-r--  1 root portage   234242 Jan  9 09:01 font-arial-iso-8859-1.tar.bz2
-rw-rw-r--  1 root portage   222208 Jan  9 09:01 font-arial-iso-8859-2.tar.bz2
-rw-rw-r--  1 root portage   249705 Jan  9 09:01 font-arial-cp1250.tar.bz2
-rw-rw-r--  1 root portage     1204 Jan 12 12:47 searchcomplete-1.1.tar.bz2
-rw-rw-r--  1 root portage    15426 Jan 12 12:49 minibufexpl-6.3.2.tar.bz2
-rw-rw-r--  1 root portage     4476 Jan 12 13:13 cecutil-7.tar.bz2
-rw-rw-r--  1 root portage    26726 Jan 12 13:13 align-32.tar.bz2
-rw-rw-r--  1 root portage     6021 Jan 12 13:13 autoalign-5.tar.bz2
-rw-rw-r--  1 root portage    15884 Jan 13 02:25 memtester-4.0.3.tar.gz
-rw-rw-r--  1 root portage   232172 Jan 13 11:15 psmisc-21.9.tar.gz
-rw-rw-r--  1 root portage    38938 Jan 14 16:58 gnuconfig-20051223.tar.bz2
-rw-rw-r--  1 root portage   141596 Jan 14 17:00 DateManip-5.44.tar.gz
-rw-rw-r--  1 root portage    54162 Jan 15 17:06 cdb-0.75.tar.gz
-rw-rw-r--  1 root portage    18985 Jan 15 17:06 python-cdb-0.32.tar.gz
-rw-rw-r--  1 root portage    99009 Jan 17 15:50 sysvinit-2.86.tar.gz
-rw-rw-r--  1 root portage     4139 Jan 17 15:50 sysvinit-2.86-kexec.patch
-rw-rw-r--  1 root portage 39172170 Jan 17 16:02 linux-2.6.14.tar.bz2
-rw-rw-r--  1 root portage  8725221 Jan 17 16:02 NVIDIA-Linux-x86-1.0-6629-pkg1.run
-rw-rw-r--  1 root portage    82962 Jan 17 22:08 gentoolkit-0.2.1.tar.gz
drwxrws---  2 root portage       48 Jan 17 22:08 cvs-src/
-rw-rw-r--  1 root portage   376924 Jan 19 15:29 cdrecord-prodvd-2.01.01-i686-pc-linux-gnu
-rw-rw-r--  1 root portage   346848 Jan 19 15:36 cdrecord-prodvd-2.01.01b03-i686-pc-linux-gnu
-rw-rw-r--  1 root portage   159580 Jan 19 17:15 rc-scripts-1.6.14.tar.bz2
-rw-rw-r--  1 root portage    19738 Jan 19 17:16 genlop-0.30.5.tar.gz
-rw-rw-r--  1 root portage    31953 Jan 19 17:16 logrotate-3.7.1.tar.bz2
-rw-rw-r--  1 root portage   234784 Jan 21 02:16 portage-2.0.54.tar.bz2
-rw-rw-r--  1 root portage 16877867 Jan 21 02:18 kdelibs-3.4.3.tar.bz2
-rw-rw-r--  1 root portage   345525 Jan 21 02:50 libol-0.3.17.tar.gz
-rw-rw-r--  1 root portage  2238224 Jan 21 23:17 BitTorrent-4.2.2.tar.gz
-rw-rw-r--  1 root portage   969993 Jan 21 23:18 pkg-config-0.20.tar.gz
-rw-rw-r--  1 root portage  3418784 Jan 21 23:19 libxml2-2.6.23.tar.bz2
-rw-rw-r--  1 root portage  2593263 Jan 21 23:23 glib-2.8.5.tar.bz2
-rw-rw-r--  1 root portage   222080 Jan 21 23:24 udev-079.tar.bz2
-rw-rw-r--  1 root portage 14016570 Jan 21 23:25 gimp-2.2.8.tar.bz2
-rw-rw-r--  1 root portage 39832836 Jan 23 05:06 linux-2.6.15.tar.bz2
-rw-rw-r--  1 root portage   175417 Jan 23 05:06 genpatches-2.6.15-3.extras.tar.bz2
-rw-rw-r--  1 root portage    16532 Jan 23 05:06 genpatches-2.6.15-3.base.tar.bz2
-rw-rw-r--  1 root portage   765341 Jan 23 05:07 syslog-ng-1.6.9.tar.gz
-rw-rw-r--  1 root portage   142535 Jan 23 07:30 genpatches-2.6.14-6.extras.tar.bz2
-rw-rw-r--  1 root portage    43416 Jan 23 07:30 genpatches-2.6.14-6.base.tar.bz2
-rw-rw-r--  1 root portage 12004641 Jan 23 17:19 NVIDIA-Linux-x86-1.0-8178-pkg1.run
-rw-rw-r--  1 root portage  1370907 Jan 25 06:00 util-linux-2.12r.tar.bz2
-rw-rw-r--  1 root portage   167804 Jan 25 06:00 loop-AES-v3.1b.tar.bz2
-rw-rw-r--  1 root portage  4270776 Jan 25 06:01 coreutils-5.2.1.tar.bz2
-rw-rw-r--  1 root portage    66693 Jan 25 06:01 coreutils-5.2.1-patches-1.0.tar.bz2
-rw-rw-r--  1 root portage 11745933 Jan 25 06:04 tetex-src-2.0.2.tar.gz
-rw-rw-r--  1 root portage 52424280 Jan 25 06:05 tetex-texmf-2.0.2.tar.gz
-rw-rw-r--  1 root portage 22909537 Jan 25 06:05 tetex-texmfsrc-2.0.2.tar.gz
-rw-rw-r--  1 root portage     1704 Jan 25 06:05 tetex-2.0.2-gentoo.tar.gz

Now, I enter the command:

wolverine ~ # eclean-dist -p -t1h
 * Building file list for distfiles cleaning...
 * Your distfiles directory was already clean.
wolverine ~ #

My emerge --info:

Portage 2.0.54 (default-linux/x86/2005.1, gcc-3.4.4, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/bind /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://gentoo.seren.com/gentoo http://open-systems.ufl.edu/mirrors/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 X aalib alsa apm arts audiofile avi bash-completion bitmap-fonts bzip2 bzlib cdr crypt curl dvd dvdr eds emboss encode esd ethereal exif expat fam ffmpeg flac fortran gif glut gmp gpm idn imlib ipv6 java jpeg kde kdeenablefinal lcms libwww mad mikmod mmx mmx2 mng motif mp3 mpeg ncurses network nptl nptlonly ogg oggvorbis opengl oss pam pcre pdflib perl png python qt quicktime readline rtc sdl slang spell sse sse2 ssl svga tcpd tetex tiff truetype truetype-fonts type1-fonts udev vorbis xine xml2 xmms xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Paul Varner (RETIRED)






          2006-01-25 19:40:01 UTC
        

I need more information.  What packages are not installed that still have files in your distfiles directory?

The command that you gave tells eclean to not delete any files that are less than 1 hour old and to delete any files that do not belong to any installed packages.

The purpose of eclean is to clean up files that don't belong to an installed package. eclean by default does not delete files in the distfiles directory that belong to any version of an installed package. If you specify the --destructive (-d) switch it will only keep the files for the installed version of the package.

If you desire to delete all files just based by age, you are better off emerging app-admin/tmpwatch and running something like:

tmpwatch --atime --mtime --ctime --verbose 168 /usr/portage/distfiles




Comment 2


Stuart W. Finlayson





          2006-01-25 23:49:53 UTC
        

Duh, purely my misunderstanding of the man page.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

