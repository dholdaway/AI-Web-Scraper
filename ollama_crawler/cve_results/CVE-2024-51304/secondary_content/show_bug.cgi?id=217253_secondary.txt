Title: 217253 – gnome-extra/nautilus-cd-burner-2.22.1 causes nautilus to reload when selecting icons
URL: https://bugs.gentoo.org/show_bug.cgi?id=217253

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 217253
gnome-extra/nautilus-cd-burner-2.22.1 causes nautilus to reload when selecting icons
Last modified: 2008-10-30 11:06:12 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 217253 
      - gnome-extra/nautilus-cd-burner-2.22.1 causes nautilus to reload when selecting icons


Summary:
gnome-extra/nautilus-cd-burner-2.22.1 causes nautilus to reload when selectin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




gnome2.22-tracker



 

        Show dependency tree





 





      Reported:
    
2008-04-11 06:24 UTC by Iain Buchanan





      Modified:
    
2008-10-30 11:06 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



magowiz
Nylan
virdiq









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Iain Buchanan





          2008-04-11 06:24:54 UTC
        

After the gnome upgrade from 2.22.0 to 2.22.1 recently, nautilus would reload every time I right left or middle clicked on a file on my desktop or in a folder.  Nautilus dies and starts again (closing all open windows, momentarily blanking the desktop, etc).

I can select icons ﻿and pop up the menu with the keyboard, and it works
fine.  I can also right click on a non-icon space, no worries.

Nautilus isn't crashing, because gdb shows nothing but "Program exited
with code 0177" (no segfaults etc), so it's reloading for some reason.

Next I tried an strace.  The last few lines I see before the crash is:

stat64("/usr/bin/nautilus", {st_mode=S_IFREG|0755,
st_size=1175916, ...}) = 0
writev(2, [{"/usr/bin/nautilus", 17}, {": ", 2}, {"symbol lookup error",
19}, {": ", 2}, {"/usr/lib/nautilus/extensions-2.0"..., 62}, {": ", 2},
{"undefined symbol: nautilus_file_"..., 46}, {"", 0}, {"", 0}, {"\n",
1}], 10/usr/bin/nautilus: symbol lookup
error: /usr/lib/nautilus/extensions-2.0/libnautilus-burn-extension.so:
undefined symbol: nautilus_file_info_get_mount
) = 151
exit_group(127)                         = ?

hm, libnautilus-burn-extension.so is owned by nautilus-cd-burner.
Recompiling that doesn't help.  Nor does recompiling nautilus, nor did a revdep-rebuild.

I then downgraded to nautilus-cd-burner-2.22.0 and restarted nautilus, and voila! Fixed!

$ emerge --info
Portage 2.1.5_rc2 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.7-r2, 2.6.24-tuxonice-r1 i686)
=================================================================
System uname: 2.6.24-tuxonice-r1 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Timestamp of tree: Wed, 09 Apr 2008 23:04:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.5
dev-lang/python:     2.4.4-r4, 2.5.1-r5
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.12
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.24
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -pipe "
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=pentium4 -pipe "
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://mirror.internode.on.net/pub/gentoo/ http://ftp.swin.edu.au/gentoo/ ftp://gg3.net/pub/linux/gentoo/ ftp://ftp.ussg.iu.edu/pub/linux/gentoo"
LANG="en_AU.UTF-8"
LC_ALL="en_AU.UTF-8"
LDFLAGS=""
LINGUAS="en_AU en en_GB en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/synce /usr/local/portage /usr/local/portage-synce-overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aac acl acpi aiglx alsa arts avahi berkdb cairo cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread eds emboss encode esd evo fam ffmpeg firefox fortran gdbm gif gnome gpm gstreamer gtk gtk2 hal iconv ipv6 isdnlog jpeg kerberos ldap libnotify mad midi mikmod mp3 mpeg mudflap ncurses nls nptl nptlonly ogg opengl openmp pam pcre pdf perl png pppd python qt3support quicktime readline reflection samba sdl session smb spell spl ssl svg tcpd tiff truetype unicode vorbis win32codecs x86 xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_AU en en_GB en_US" USERLAND="GNU" VIDEO_CARDS="ati radeon vesa fbdev fglrx"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


virdiq





          2008-04-11 13:57:46 UTC
        

I can't reproduce this and I'm using an up-to-date ~amd64 with Gnome 2.22.1 (including nautilus-cd-burner-2.22.1)

Maybe it is a library in the background which is causing the problems (glib, gio, whatever)? Maybe you should try recompiling all Gnome-related packages?




Comment 2


Iain Buchanan





          2008-04-12 11:51:00 UTC
        

(In reply to comment #1)
> I can't reproduce this and I'm using an up-to-date ~amd64 with Gnome 2.22.1
> (including nautilus-cd-burner-2.22.1)
>
> Maybe it is a library in the background which is causing the problems (glib,
> gio, whatever)?

Why does downgrading (or for that matter removing) nautilus-cd-burner fix it then?

> Maybe you should try recompiling all Gnome-related packages?

Sheesh, just give me a day or two :)  





Comment 3


Iain Buchanan





          2008-04-12 15:28:26 UTC
        

OK, I emerged everything I had installed from gnome-base and gnome-extra like this:

sudo emerge -va1 `eix --only-names -I -C gnome`

then I did glib.  Not sure what gio is.  The problem still happens with nautilus-cd-burner-2.22.1 but not 2.22.0 as before.  Should I recompile anything else?  Thanks for the help.




Comment 4


Nylan





          2008-04-26 13:22:13 UTC
        

I'm having exactly the same problem.
Downgrading to nautilus-cd-burner-2.22.0 solves the problem.


(In reply to comment #3)
> OK, I emerged everything I had installed from gnome-base and gnome-extra like
> this:
> 
> sudo emerge -va1 `eix --only-names -I -C gnome`
> 
> then I did glib.  Not sure what gio is.  The problem still happens with
> nautilus-cd-burner-2.22.1 but not 2.22.0 as before.  Should I recompile
> anything else?  Thanks for the help.
> 






Comment 5


Marcello Magaldi





          2008-05-03 07:27:29 UTC
        

(In reply to comment #4)
> I'm having exactly the same problem.
> Downgrading to nautilus-cd-burner-2.22.0 solves the problem.
> 

should =nautilus-cd-burner-2.22.1 be hardmasked then ?






Comment 6


Rémi Cardona (RETIRED)






          2008-05-14 12:44:00 UTC
        

Could you attach the output of "readelf -a /usr/lib/nautilus/extensions-2.0/libnautilus-burn-extension.so" for both nautilus-cd-burner versions?

Also, could you try unsetting LDFLAGS completely (and not just having it empty)?

Thanks




Comment 7


Iain Buchanan





          2008-05-15 00:35:23 UTC
        

I upgraded the gnome meta ebuild to 2.22.1 on May 10.  This required unmasking nautilus-cd-burnder-2.22.1, and since then, I haven't had the nautilus problem.  Don't know why or what did it...




Comment 8


Rémi Cardona (RETIRED)






          2008-05-15 08:50:00 UTC
        

Closing... Don't hesitate to reopen with the requested info should the issue ever pop up again.

Thanks




Comment 9


Iain Buchanan





          2008-05-15 11:50:35 UTC
        

What about the other poster... Nylan?  Still having the problem, or fixed with a portage sync and update?

Thanks.




Comment 10


Marc





          2008-10-30 10:06:59 UTC
        

> Closing... Don't hesitate to reopen with the requested info should the issue
> ever pop up again.
> 
> Thanks
> 

I'm also having exactly the same problem, albeit with different versions.
gnome-base/nautilus-2.22.5.1
gnome-extra/nautilus-cd-burner-2.22.1(In reply to comment #8)






Comment 11


Marc





          2008-10-30 11:06:12 UTC
        

fixed by sync & re-emerging file-roller









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

