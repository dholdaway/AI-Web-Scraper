Title: 511082 – x11-misc/vym - freezes before started
URL: https://bugs.gentoo.org/show_bug.cgi?id=511082

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 511082
x11-misc/vym - freezes before started
Last modified: 2017-07-12 05:27:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 511082 
      - x11-misc/vym - freezes before started


Summary:
x11-misc/vym - freezes before started
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Desktop Misc. Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-05-23 08:02 UTC by Karl Lindén





      Modified:
    
2017-07-12 05:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The build log

              (build.log,153.41 KB,
                text/plain)

            
2014-05-23 08:02 UTC,

            Karl Lindén




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Karl Lindén





          2014-05-23 08:02:01 UTC
        

Created attachment 377480 [details]
The build log

When starting x11-misc/vym using the command line with the command "vym" the process freezes and does nothing, like this:
$ vym
<nothing happens...>

Steps to reproduce: run the "vym" binary
Reproducible: Always

To investigate the problem I ran vym in gdb. Ofcourse I had to interrupt the program when it froze, to get any output. Here is the output:
$ gdb --args vym
GNU gdb (Gentoo 7.6.2 p1) 7.6.2
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.gentoo.org/>...
Reading symbols from /usr/bin/vym...Reading symbols from /usr/lib64/debug/usr/bin/vym.debug...done.
done.
(gdb) run
Starting program: /usr/bin/vym 
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
^C
Program received signal SIGINT, Interrupt.
syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38
38	../sysdeps/unix/sysv/linux/x86_64/syscall.S: No such file or directory.
(gdb) backtrace
#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38
#1  0x00007ffff79089f4 in _q_futex (timeout=0x0, val=2, op=0, addr=0x7ff780, addr2=<optimized out>, val2=<optimized out>) at thread/qmutex_unix.cpp:99
#2  QMutexPrivate::wait (this=this@entry=0x7ff780, timeout=timeout@entry=-1) at thread/qmutex_unix.cpp:113
#3  0x00007ffff7904be5 in QMutex::lockInternal (this=this@entry=0x7fe970) at thread/qmutex.cpp:450
#4  0x00007ffff79c68b3 in lockInline (this=0x7fe970) at ../../include/QtCore/../../src/corelib/thread/qmutex.h:190
#5  lockInline (this=0x7fe970) at io/qsettings.cpp:1132
#6  QMutexLocker (m=0x7fe970, this=0x7fffffffd4a0) at ../../include/QtCore/../../src/corelib/thread/qmutex.h:109
#7  getPath (format=format@entry=QSettings::NativeFormat, scope=scope@entry=QSettings::UserScope) at io/qsettings.cpp:1137
#8  0x00007ffff79c9b22 in QConfFileSettingsPrivate::QConfFileSettingsPrivate (this=0x801370, format=QSettings::NativeFormat, scope=QSettings::UserScope, 
    organization=..., application=...) at io/qsettings.cpp:1171
#9  0x00007ffff79ca048 in QSettingsPrivate::create (format=format@entry=QSettings::NativeFormat, scope=QSettings::UserScope, organization=..., application=...)
    at io/qsettings.cpp:369
#10 0x00007ffff79ca1fb in QSettings::QSettings (this=0x7fffffffd690, scope=<optimized out>, organization=..., application=..., parent=0x0) at io/qsettings.cpp:2676
#11 0x00007ffff79edcad in QFactoryLoader::update (this=this@entry=0x7fffe0) at plugin/qfactoryloader.cpp:226
#12 0x00007ffff79ee049 in QFactoryLoader::QFactoryLoader (this=0x7fffe0, iid=0x7ffff7aecee0 "com.trolltech.Qt.QTextCodecFactoryInterface", suffix=..., 
    cs=Qt::CaseSensitive) at plugin/qfactoryloader.cpp:121
#13 0x00007ffff7a3834d in loader () at codecs/qtextcodec.cpp:110
#14 0x00007ffff7a39162 in createForName (name=...) at codecs/qtextcodec.cpp:158
#15 QTextCodec::codecForName (name=...) at codecs/qtextcodec.cpp:1062
#16 0x00007ffff7a39603 in codecForName (name=<optimized out>) at codecs/qtextcodec.h:67
#17 setupLocaleMapper () at codecs/qtextcodec.cpp:601
#18 0x00007ffff7a3a6c9 in QTextCodec::codecForLocale () at codecs/qtextcodec.cpp:1239
#19 0x00007ffff7950ba4 in QString::fromLocal8Bit (str=0x7ff7e8 "/home/kalle", size=11, size@entry=-1) at tools/qstring.cpp:3965
#20 0x00007ffff79902f5 in locale_decode (f=...) at io/qfile.cpp:84
#21 0x00007ffff799078a in QFile::decodeName (localFileName=...) at io/qfile.cpp:538
#22 0x00007ffff79ded56 in QFileSystemEngine::homePath () at io/qfilesystemengine_unix.cpp:625
#23 0x00007ffff79828f9 in QDir::homePath () at io/qdir.cpp:1884
#24 0x00007ffff79c644f in initDefaultPaths (locker=locker@entry=0x7fffffffda50) at io/qsettings.cpp:1076
#25 0x00007ffff79c68e6 in getPath (format=format@entry=QSettings::NativeFormat, scope=scope@entry=QSettings::UserScope) at io/qsettings.cpp:1140
#26 0x00007ffff79c9b22 in QConfFileSettingsPrivate::QConfFileSettingsPrivate (this=0x7ff590, format=QSettings::NativeFormat, scope=QSettings::UserScope, 
    organization=..., application=...) at io/qsettings.cpp:1171
#27 0x00007ffff79ca048 in QSettingsPrivate::create (format=format@entry=QSettings::NativeFormat, scope=scope@entry=QSettings::UserScope, organization=..., 
    application=...) at io/qsettings.cpp:369
#28 0x00007ffff79ca253 in QSettings::QSettings (this=0x7f2420 <settings>, organization=..., application=..., parent=0x0) at io/qsettings.cpp:2650
#29 0x000000000050b4e1 in Settings::Settings (this=0x7f2420 <settings>, organization=..., application=...)
    at /var/tmp/portage/x11-misc/vym-2.3.22/work/vym-2.3.22/settings.cpp:164
#30 0x000000000045cdfd in __static_initialization_and_destruction_0 (__initialize_p=<optimized out>, __priority=<optimized out>)
    at /var/tmp/portage/x11-misc/vym-2.3.22/work/vym-2.3.22/main.cpp:83
#31 _GLOBAL__sub_I_vymName () at /var/tmp/portage/x11-misc/vym-2.3.22/work/vym-2.3.22/main.cpp:381
#32 0x0000000000579e8d in __libc_csu_init (argc=argc@entry=1, argv=argv@entry=0x7fffffffdd78, envp=0x7fffffffdd88) at elf-init.c:83
#33 0x00007ffff5868b85 in __libc_start_main (main=0x45cf10 <main(int, char**)>, argc=1, ubp_av=0x7fffffffdd78, init=0x579e30 <__libc_csu_init>, fini=<optimized out>, 
    rtld_fini=<optimized out>, stack_end=0x7fffffffdd68) at libc-start.c:217
#34 0x000000000045fd91 in _start ()
(gdb) kill
Kill the program being debugged? (y or n) y
(gdb) quit




Comment 1


Karl Lindén





          2014-05-23 08:02:54 UTC
        

$ emerge --info "x11-misc/vym"
Portage 2.2.8-r1 (default/linux/amd64/13.0, gcc-4.7.3, glibc-2.17, 3.12.13-gentoo x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-3.12.13-gentoo-x86_64-Intel-R-_Core-TM-_i3-2350M_CPU_@_2.30GHz-with-gentoo-2.2
KiB Mem:     3958388 total,    867992 free
KiB Swap:    1048572 total,   1048572 free
Timestamp of tree: Fri, 16 May 2014 18:00:01 +0000
ld GNU ld (GNU Binutils) 2.23.2
app-shells/bash:          4.2_p45
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.5-r3, 3.3.3
dev-util/cmake:           2.8.12.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.2
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo lilrc proaudio
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -fomit-frame-pointer -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=core2 -O2 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://ftp.df.lth.se/pub/gentoo/ rsync://ftp.df.lth.se/pub/gentoo/"
LANG="sv_SE.iso88591"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/kalle/lilrc-overlay /home/kalle/proaudio"
SYNC="rsync://192.168.1.69/gentoo-portage/"
USE="X acl alsa amd64 bluetooth bzip2 cairo cdda cli consolekit crypt cups cxx dri dvd exif flac fortran gnutls gtk gtkstyle gudev jpeg libkms libnotify mmx modules mp3 mpeg multilib networkmanager nls nptl ogg opengl openmp openrc openssl pam pdf png policykit readline session smp sse sse2 sse4 sse4_1 ssl ssse3 svg tcpd theora thunar tiff udev udisks unicode vorbis xinerama xorg zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CURL_SSL="gnutls" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en en_GB sv sv_SE" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="i965 intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

x11-misc/vym-2.3.22 was built with the following:
USE="-dbus" LINGUAS="sv -cs_CZ -de_DE -es -fr -ia -it -pt_BR -ru -zh_CN -zh_TW"
CFLAGS="-march=core2 -O2 -fomit-frame-pointer -pipe -ggdb"
CXXFLAGS="-march=core2 -O2 -fomit-frame-pointer -pipe -ggdb"




Comment 2


Jeroen Roovers (RETIRED)






          2014-05-23 13:27:28 UTC
        

I can't reproduce that. Can you tell us more about the environment in which you run vym?




Comment 3


Karl Lindén





          2014-05-23 16:58:25 UTC
        

I don't know what information might be relevant, but here goes...

I'm running stable amd64, but vym is unmasked for the keyword ~amd64 as vym is not yet stable. I am using the XFCE desktop environment.

Here are some information:
$ equery depgraph x11-misc/vym
 * Searching for vym in x11-misc ...

 * dependency graph for x11-misc/vym-2.3.22
 `--  x11-misc/vym-2.3.22  ~amd64 
   `--  dev-qt/qtgui-4.8.5-r1  (dev-qt/qtgui) amd64  [qt3support]
   `--  dev-qt/qtsvg-4.8.5  (dev-qt/qtsvg) amd64 
   `--  dev-qt/qtdbus-4.8.5  (dev-qt/qtdbus) amd64 
   `--  sys-devel/make-3.82-r4  (sys-devel/make) amd64 
   `--  dev-util/cmake-2.8.12.2  (>=dev-util/cmake-2.8.9) amd64 
   `--  sys-apps/findutils-4.4.2-r1  (>=sys-apps/findutils-4.4.0) amd64 
   `--  app-arch/zip-3.0-r1  (app-arch/zip) amd64 
[ x11-misc/vym-2.3.22 stats: packages (8), max depth (1) ]

$ rc-status --all
Runlevel: boot
 hwclock                                                           [  started  ]
 loopback                                                          [  started  ]
 fsck                                                              [  started  ]
 root                                                              [  started  ]
 mtab                                                              [  started  ]
 swap                                                              [  started  ]
 localmount                                                        [  started  ]
 sysctl                                                            [  started  ]
 bootmisc                                                          [  started  ]
 urandom                                                           [  started  ]
 termencoding                                                      [  started  ]
 keymaps                                                           [  started  ]
 alsasound                                                         [  started  ]
 swapfiles                                                         [  started  ]
 tmpfiles.setup                                                    [  started  ]
 hostname                                                          [  started  ]
 procfs                                                            [  started  ]
Runlevel: shutdown
 savecache                                                         [  stopped  ]
 killprocs                                                         [  stopped  ]
 mount-ro                                                          [  stopped  ]
Runlevel: sysinit
 udev-mount                                                        [  started  ]
 tmpfiles.dev                                                      [  started  ]
 dmesg                                                             [  started  ]
 sysfs                                                             [  started  ]
 devfs                                                             [  started  ]
 udev                                                              [  started  ]
Runlevel: default
 dbus                                                              [  started  ]
 bluetooth                                                         [  started  ]
 NetworkManager                                                    [  started  ]
 ntpd                                                              [  started  ]
 local                                                             [  started  ]
Dynamic Runlevel: hotplugged
Dynamic Runlevel: needed
 xdm-setup                                                         [  started  ]
Dynamic Runlevel: manual

I can share even more information, but what more information is needed? (And how can I retrieve it?)




Comment 4


Jeroen Roovers (RETIRED)






          2014-05-23 18:05:13 UTC
        

(In reply to Karl Lindén from comment #3)
> I am using the XFCE desktop environment.

I guess that might be important.




Comment 5


Harri Nieminen (Moiman)





          2017-03-10 13:32:45 UTC
        

Does this still persists? Can you try 2.6.0?




Comment 6


Karl Lindén





          2017-07-12 05:27:53 UTC
        

I cannot reproduce this anymore.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

