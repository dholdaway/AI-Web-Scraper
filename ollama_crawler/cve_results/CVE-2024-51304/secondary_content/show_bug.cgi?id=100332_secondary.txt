Title: 100332 – scrips doesn't start or behaves in a strange way with kernel parameters
URL: https://bugs.gentoo.org/show_bug.cgi?id=100332

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 100332
scrips doesn't start or behaves in a strange way with kernel parameters
Last modified: 2005-08-02 00:23:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 100332 
      - scrips doesn't start or behaves in a strange way with kernel parameters


Summary:
scrips doesn't start or behaves in a strange way with kernel parameters
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Michal Januszewski (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

100446

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-07-26 01:46 UTC by Francesco





      Modified:
    
2005-08-02 00:23 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



base-system
patroclo7









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Francesco





          2005-07-26 01:46:05 UTC
        

I got that with some parameters passed to kernel line init scripts do not 
behave correctly. Don't know if it's a baselayout fault or bash or whatever 
else. 
If CONSOLE=/dev/tty1 is set as new kernels require dcron init script is run 
but no dcron process exist (so dcron stop doesn't work, and dcron daemon too 
of course). Another really strange thing is with 
splash=silent,fadein,theme:gechi set fetchmail script edited with some other 
need (I simply added postfix freepopsd and amavisd to fetchmail init script) 
it ask me a password as told in 
http://forums.gentoo.org/viewtopic-p-2601987.html#2601987 
 
I used till today this boot line: 
 
kernel (hd0,1)/boot/vmlinuz root=/dev/hda5 acpi_irq_balance acpi_irq_isa=3,12 
#splash=silent,fadein,theme:gechi 
video=vesafb:ywrap,pmipal,mtrr,1600x1200-16,vtotal=64 
#quiet CONSOLE=/dev/tty1 
 
where now I have commented all those parameters to solve this trange 
behaviour. 
 
Hope to have a solution or someone else with similar problems to understand 
why! 
I tried recompiling bash with less hard CFLAGS but with no luck. Even using 
older baselayout made no difference (1.11.12).




Comment 1


SpanKY






          2005-07-26 06:44:37 UTC
        

no kernel requires you to set CONSOLE




Comment 2


Francesco





          2005-07-26 07:00:41 UTC
        

Taken right from splashutils ebuild:   
 
ewarn "It is required that you add 'quiet CONSOLE=/dev/tty1' to your kernel"   
ewarn "command line parameters."   
echo ""   
einfo "After these modifications, the relevant part of the kernel command"   
einfo "line might look like:"   
einfo "  splash=silent,fadein,theme:emergence quiet CONSOLE=/dev/tty1"   
   
So... kernel 2.6.12 needs it to use fbsplash. sorry I forgot to tell about  
fbsplash.  




Comment 3


SpanKY






          2005-07-26 10:54:30 UTC
        

i blame the misbehavior on fbsplash then

feel free to toss back spock ;)




Comment 4


Michal Januszewski (RETIRED)






          2005-07-27 06:36:52 UTC
        

The misbehaviour is not in fbsplash, it's in the initscripts/daemons, as
explained here:
http://dev.gentoo.org/~spock/projects/gensplash/troubleshooting.php#ctty and,
for example, in bug #86550. Sure, removing CONSOLE=/dev/tty1 from the kernel
command line will make the problem go away, but IMO it's like evading solving
the real problem by saying "if it doesn't work, don't use it".




Comment 5


SpanKY






          2005-07-27 08:48:56 UTC
        

*** Bug 100446 has been marked as a duplicate of this bug. ***




Comment 6


SpanKY






          2005-07-27 08:53:02 UTC
        

thanks for the explanation

now we just need to file bugs for specific apps ... i'll take care of Bug 86562
now that i know why it's needed




Comment 7


Martin Schlemmer (RETIRED)






          2005-08-02 00:23:54 UTC
        

Not sure if this will fix it, but I want to remember changing:

-----
splash=silent,fadein,theme:gechi
-----

to:

-----
splash=silent,fadein,theme:gechi,tty:11
-----

worked for me when I played with fbsplash.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

