Title: 516960 – quake4-bin-1.4.2-r1 try to install x11-drivers/nvidia-drivers-337.25 package even I don't have Nvidia HW
URL: https://bugs.gentoo.org/show_bug.cgi?id=516960

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 516960
quake4-bin-1.4.2-r1 try to install x11-drivers/nvidia-drivers-337.25 package even I don't have Nvidia HW
Last modified: 2014-08-06 13:37:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 516960 
      - quake4-bin-1.4.2-r1 try to install x11-drivers/nvidia-drivers-337.25 package even I don't have Nvidia HW


Summary:
quake4-bin-1.4.2-r1 try to install x11-drivers/nvidia-drivers-337.25 package ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-07-12 15:20 UTC by Jiří Moravec





      Modified:
    
2014-08-06 13:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bkohler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Partial solution for described problem.

              (quake4-bin-1.4.2-r1.ebuild-nvidia.patch,784 bytes,
                patch)

            
2014-07-12 15:22 UTC,

            Jiří Moravec




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jiří Moravec





          2014-07-12 15:20:15 UTC
        

With quake4-bin-1.4.2-r1 release, emerge try to install x11-drivers/nvidia-drivers-337.25 even I don't have Nvidia hardware. And to more fun, nvidia-drivers installation failed, because I have unsupported kernel version! :-))

So it is necessary extend current ebuild by conditionals like:
-x11-drivers/nvidia-drivers
+video_cards_nvidia? ( x11-drivers/nvidia-drivers )

Reproducible: Always

Steps to Reproduce:
1. emerge =games-fps/quake4-bin-1.4.2-r1 on 3.15+ kernel and radeon hw
2.
3.
Actual Results:  
Try to install x11-drivers/nvidia-drivers package.

Expected Results:  
No nvidia drivers offered for installation.




Comment 1


Jiří Moravec





          2014-07-12 15:22:46 UTC
        

Created attachment 380628 [details, diff]
Partial solution for described problem.




Comment 2


Ben Kohler






          2014-08-06 13:37:40 UTC
        

You just need to meet the proper version & USE dep for >=media-libs/libtxc_dxtn-1.0.1-r1[abi_x86_32(-)].  If you apply your patch but still don't meet the needs for libtxc_dxtn, it's just going to force ati-drivers.

Specifically here you don't have ABI_X86=32 enabled for libtxc_dxtn, that flag is actually masked for stable users.  See one of our support venues for how to unmask and enable this flag.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

