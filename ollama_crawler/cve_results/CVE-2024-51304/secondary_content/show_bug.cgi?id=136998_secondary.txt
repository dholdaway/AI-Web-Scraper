Title: 136998 – emerge perl runs out of memory - installperl not successful
URL: https://bugs.gentoo.org/show_bug.cgi?id=136998

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 136998
emerge perl runs out of memory - installperl not successful
Last modified: 2008-02-27 17:54:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 136998 
      - emerge perl runs out of memory - installperl not successful


Summary:
emerge perl runs out of memory - installperl not successful
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-16 09:31 UTC by Bernd Schlegel





      Modified:
    
2008-02-27 17:54 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bernd









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Bernd Schlegel





          2006-06-16 09:31:07 UTC
        

Starting with a new install on an Athlon 1200 system, the first emerge -ua world stops at installation of a new perl version. The system runs out of memory while performing the installperl command. The compilation itself is always successful.


--------------------------------------------------------------------------------------------------------
Making Errno (nonxs)
make[2]: Entering directory `/var/tmp/portage/perl-5.8.8-r2/work/perl-5.8.8/ext/Errno'
make[2]: Leaving directory `/var/tmp/portage/perl-5.8.8-r2/work/perl-5.8.8/ext/Errno'
make[2]: Entering directory `/var/tmp/portage/perl-5.8.8-r2/work/perl-5.8.8/ext/Errno'
make[2]: Leaving directory `/var/tmp/portage/perl-5.8.8-r2/work/perl-5.8.8/ext/Errno'
make[1]: [extras.make] Error 1 (ignored)

Everything is up to date. Type 'make test' to run test suite.
if [ -n "" ]; \
then \
cd utils; make compile; \
cd ../x2p; make compile; \
cd ../pod; make compile; \
else :; \
fi
./perl installperl --destdir=/var/tmp/portage/perl-5.8.8-r2/image/
make[1]: *** [install.perl] Killed
make[1]: Leaving directory `/var/tmp/portage/perl-5.8.8-r2/work/perl-5.8.8'
make: *** [install] Error 2

!!! ERROR: dev-lang/perl-5.8.8-r2 failed.
Call stack:
ebuild.sh, line 1539: Called dyn_install
ebuild.sh, line 1013: Called src_install
perl-5.8.8-r2.ebuild, line 295: Called die

!!! Unable to make install
!!! If you need support, post the topmost build error, and the call stack if relevant.

merlin ~ # emerge --info
Portage 2.1 (default-linux/x86/2006.0, gcc-3.4.4, glibc-2.3.5-r2, 2.6.16-gentoo-r9 i686)
=================================================================
System uname: 2.6.16-gentoo-r9 i686 AMD Athlon(tm) processor
Gentoo Base System version 1.6.14
dev-lang/python: 2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache: [Not Present]
dev-util/confcache: [Not Present]
sys-apps/sandbox: 1.2.12
sys-devel/autoconf: 2.13, 2.59-r6
sys-devel/automake: 1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils: 2.16.1
sys-devel/gcc-config: 1.3.12-r6
sys-devel/libtool: 1.5.22
virtual/os-headers: 2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-O2 -march=athlon -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts cdr cli crypt cups dri dvd eds emboss encode esd foomaticdb fortran gdbm gif gpm gstreamer gtk2 imlib ipv6 isdnlog jpeg kde libg++ libwww mad mikmod motif mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd python qt quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml xmms xorg xv zlib elibc_glibc kernel_linux userland_GNU"
Unset: CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2006-06-16 09:35:26 UTC
        

So, you expect us to ship you some RAM, or... ??? :=)




Comment 2


Bernd Schlegel





          2006-06-16 09:46:51 UTC
        

no, really not :-) I think, 512MB RAM and 1GByte of swap should be enough.

I don't really know, what's the reason. Everything is fine with all the emerge processes. When the final installdir command is in progress, you can watch with top free memory is going down, until all the swap is used, and then the process stops.





Comment 3


Michael Cummings (RETIRED)






          2006-06-16 10:11:06 UTC
        

df -h and mtab info please




Comment 4


Bernd Schlegel





          2006-06-16 10:42:27 UTC
        

merlin ~ # df -h
Dateisystem          Gr




Comment 5


Bernd Schlegel





          2006-06-16 10:42:27 UTC
        

merlin ~ # df -h
Dateisystem          Größe Benut  Verf Ben% Eingehängt auf
/dev/hda3              19G  1,7G   17G   9% /
udev                  252M  104K  251M   1% /dev
/dev/hda1              38M  2,6M   34M   8% /boot
none                  252M     0  252M   0% /dev/shm

mtab:
/dev/hda3 / reiserfs rw 0 0
proc /proc proc rw 0 0
sysfs /sys sysfs rw 0 0
udev /dev tmpfs rw,nosuid 0 0
devpts /dev/pts devpts rw 0 0
/dev/hda1 /boot ext2 rw,noatime 0 0
none /dev/shm tmpfs rw 0 0
usbfs /proc/bus/usb usbfs rw,devmode=0664,devgid=85 0 0





Comment 6


Michael Cummings (RETIRED)






          2006-06-16 14:14:03 UTC
        

worth a shot. You're not the first person to report this problem - but the solutions in each case have been unique (in one case the user needed to start the install over, in another it was locale settings stomping in, bad memory, etc.). I'll keep researching as best I can.




Comment 7


Bernd Schlegel





          2006-06-16 14:31:15 UTC
        

(In reply to comment #5)
> worth a shot. You're not the first person to report this problem - but the
> solutions in each case have been unique (in one case the user needed to start
> the install over, in another it was locale settings stomping in, bad memory,
> etc.). I'll keep researching as best I can.
> 

don't think it's a simple solution. To your solutions:
1. It's my third try with this computer, starting each with an empty harddisk. The problem didn't occur on another system. There is also a strange python problem (math error occurs. I had to replace the _SQRT(2.0) with it's value in random.py)
2. The problem occured on a fresh install, just with the first emerge -ua world on the system. So it seems, that it is not a locale problem.
3. Just tested the memory already more then three hours with memtest86. No errors at all.
4. The computer is running under windows xp without any problem :-(. I still have three different Gentoo-server-systems running. No problems at all (ok, hardware is newer). Only on my home-system ... :-(

Any more hints? Is there any loop in installperl, that might cause the problem? 




Comment 8


Jakub Moc (RETIRED)






          2008-02-27 17:54:50 UTC
        

Closing a dead bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

