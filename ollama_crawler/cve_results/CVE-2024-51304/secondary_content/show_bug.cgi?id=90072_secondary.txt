Title: 90072 – mount.cifs incorrectly parses parameters from fstab (Linux "users" >> Samba "user")
URL: https://bugs.gentoo.org/show_bug.cgi?id=90072

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90072
mount.cifs incorrectly parses parameters from fstab (Linux "users" >> Samba "user")
Last modified: 2005-04-28 06:49:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90072 
      - mount.cifs incorrectly parses parameters from fstab (Linux "users" >> Samba "user")


Summary:
mount.cifs incorrectly parses parameters from fstab (Linux "users" >> Samba "...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's SAMBA Team








URL:



http://lists.samba.org/archive/samba-...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-22 14:07 UTC by Michal Kulczycki





      Modified:
    
2005-04-28 06:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michal Kulczycki





          2005-04-22 14:07:47 UTC
        

CIFS shares defined in fstab can be mounted only by root, because of silly algorithm parsing parameters passed to mount.cifs. The algo supposedly assumes that any string that begins with "user" should contain a valid CIFS username. But since Linux and Samba specific parameters are mixed in fstab, this assumption makes it impossible to defrine a user-mountable CIFS entry.

This is described in much better English here: http://lists.samba.org/archive/samba-technical/2004-December/038384.html

There is even a patch ready: http://lists.samba.org/archive/samba-technical/attachments/20041210/163101e3/mount.cifs.c.bin

This bug is about 5 mounts old, so maybe it is already resolved in samba > 3.0.10

Reproducible: Always
Steps to Reproduce:
1. add a share to fstab , eg.  
  //someserver/someshare  /mnt/someshare cifs noauto,users,cred=/home/user/.smbcreds
2. mount /mnt/someshare
Actual Results:  
"username specified with no parameter"

Expected Results:  
silently mount a share. 

Irrelevant, but here you are:

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.4.20041102-r1, 2.6.11-gentoo-r5 i686)
=================================================================
System uname: 2.6.11-gentoo-r5 i686 AMD Duron(TM)Processor
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#2, Mar 30 2005, 19:31:00)]
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.4_p6, 1.6.3, 1.9.4, 1.7.9-r1, 1.8.5-r3, 1.5
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=athlon-xp -O2 -fomit-frame-pointer -s -pipe -DNDEBUG
-DG_DISABLE_ASSERT"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -fomit-frame-pointer -s -pipe -DNDEBUG
-DG_DISABLE_ASSERT"
DISTDIR="/store/anonftp/gentoo/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://212.219.56.131/sites/www.ibiblio.org/gentoo/
http://pandemonium.tiscali.de/pub/gentoo/ ftp://gentoo.itdnet.net/gentoo/
http://ftp.rhnet.is/pub/gentoo/ http://gentoo.mirrors.pair.com/"
LINGUAS="pl en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex 3dnowext X alsa apm arts avi berkdb bitmap-fonts cdr
crypt cups curl dvd emboss fam firebird foomaticdb fortran gdbm gif gnome gpm
gstreamer gtk gtk2 hal imagemagick imlib java jpeg kde kdeenablefinal libg++
libwww mad mikmod mmx mmxext motif moznomail mp3 mpeg ncurses nls nptl ogg
oggvorbis opengl pam pdflib perl pic png python qt quicktime readlinesamba sdl
slang spell sse ssl svga tcpd tiff truetype truetype-fonts type1-fonts unicode
vorbis wmf xml xml2 xprint xv zlib linguas_pl linguas_en"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS




Comment 1


Christian Andreetta (RETIRED)






          2005-04-28 06:49:31 UTC
        

3.0.14a is not affected...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

