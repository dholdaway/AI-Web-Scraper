Title: 285250 – media-sound/pulseaudio-0.9.15-r2 tests require running sshd and IPv6 support in kernel
URL: https://bugs.gentoo.org/show_bug.cgi?id=285250

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 285250
media-sound/pulseaudio-0.9.15-r2 tests require running sshd and IPv6 support in kernel
Last modified: 2009-09-17 17:25:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 285250 
      - media-sound/pulseaudio-0.9.15-r2 tests require running sshd and IPv6 support in kernel


Summary:
media-sound/pulseaudio-0.9.15-r2 tests require running sshd and IPv6 support ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-09-16 20:55 UTC by David Leverton





      Modified:
    
2009-09-17 17:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Leverton





          2009-09-16 20:55:21 UTC
        

Offending fragments of code, in pulseaudio-0.9.15/src/tests/ipacl-test.c:

    fd = socket(PF_INET, SOCK_STREAM, 0);
    assert(fd >= 0);

    sa.sin_family = AF_INET;
    sa.sin_port = htons(22);
    sa.sin_addr.s_addr = inet_addr("127.0.0.1");

    r = connect(fd, (struct sockaddr*) &sa, sizeof(sa));
    assert(r >= 0);

and

#ifdef HAVE_IPV6
    fd = socket(PF_INET6, SOCK_STREAM, 0);
    assert(fd >= 0);

    memset(&sa6, 0, sizeof(sa6));
    sa6.sin6_family = AF_INET6;
    sa6.sin6_port = htons(22);
    pa_assert_se(inet_pton(AF_INET6, "::1", &sa6.sin6_addr) == 1);

    r = connect(fd, (struct sockaddr*) &sa6, sizeof(sa6));
    assert(r >= 0);

(IPv6 is always enabled by the pulseaudio ebuild as far as I can see)

Probably easiest to just disable this test, the same way as mix-test and resampler-test are already.

I haven't tried 0.9.17, but looking at the code, it appears as if the IPv6 issue has been fixed, but it still requires sshd.




Comment 1


Diego Elio Pettenò (RETIRED)






          2009-09-17 08:01:56 UTC
        

Not going to backport the ipv6 fixes for now.





Comment 2


David Leverton





          2009-09-17 17:25:55 UTC
        

Then why not disable the test?  The fact is that the stable version fails tests under what I would assume to be a fairly common configuration.  And that's before considering the sshd-related failure.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

