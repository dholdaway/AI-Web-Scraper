Title: 368285 – kde-base/kdm-4.6.3 - start-stop-daemon: did not create a valid pid in `/var/run/kdm.pid`
URL: https://bugs.gentoo.org/show_bug.cgi?id=368285

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 368285
kde-base/kdm-4.6.3 - start-stop-daemon: did not create a valid pid in `/var/run/kdm.pid`
Last modified: 2012-01-15 20:48:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 368285 
      - kde-base/kdm-4.6.3 - start-stop-daemon: did not create a valid pid in `/var/run/kdm.pid`


Summary:
kde-base/kdm-4.6.3 - start-stop-daemon: did not create a valid pid in `/var/r...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-05-21 19:02 UTC by Vasyl





      Modified:
    
2012-01-15 20:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



senalba









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vasyl





          2011-05-21 19:02:22 UTC
        

I have migrated to baselayout-2 и openrc. I did all steps from manual from news.

However, I got several problems
1.
[code]
*Setting up kdm...
*start-stop-daemon: did not create a valid pid in `/var/run/kdm.pid`
* ERROR: could not start the Display Manager
[/code]

[code]
* Starting ConsoleKit daemon ...
 * start-stop-daemon: did not create a valid pid in `/var/run/ConsoleKit/pid' [ !! ]
 * ERROR: consolekit failed to start
[/code]


[url=http://paste.pocoo.org/show/386491/]/etc/rc.conf[/url]

[b]NB[/b]: I have
[code]
rc_parallel="NO"
[/code]

Although KDE starts I can not run more than one application.
[code]                  lvm | boot                                          
                  xdm |      default                                     
                 dbus |      default                                  
                 fsck | boot                                          
                 mtab | boot                                          
                 root | boot                                          
                 swap | boot                                          
                 udev |                                 sysinit       
              keymaps | boot                                          
                acpid |      default                                  
                devfs |                                 sysinit       
                cupsd |      default                                  
                dmesg |                                 sysinit       
                local |      default          nonetwork               
            savecache |              shutdown                         
         avahi-daemon |      default                                  
           consolekit |      default                                  
           localmount | boot                                          
          consolefont | boot                                          
              modules | boot                                          
             hostname | boot                                          
             mount-ro |              shutdown                         
               net.lo | boot                                          
               procfs | boot                                          
             netmount |      default                                  
               sysctl | boot                                          
              urandom | boot                                          
         termencoding | boot                                          
       udev-postmount |      default                                  
              hwclock | boot                                          
         cpufrequtils | boot                                          
             bootmisc | boot                                          
        device-mapper | boot                                          
              preload |      default                                  
            killprocs |              shutdown                         


# emerge --info
WARNING: One or more repositories have missing repo_name entries:

	/usr/local/portage/profiles/repo_name

NOTE: Each repo_name entry should be a plain text file containing a
unique name for the repository on the first line.


app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.6.6-r2, 2.7.1-r1, 3.1.3-r1
dev-util/cmake:      2.8.4-r1
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.2-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.5.2
sys-devel/gcc-config: 1.4.1-r1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
sys-kernel/linux-headers: 2.6.36.1
sys-libs/glibc:      2.11.3
virtual/os-headers:  0
Repositories: gentoo x-portage
Installed sets: @kde/kdebase, @system
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=atom -mtune=atom -fomit-frame-pointer -fexcess-precision=fast"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=atom -mtune=atom -fomit-frame-pointer -fexcess-precision=fast"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--verbose"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS=" ftp://mirror.yandex.ru/gentoo-distfiles"
LANG="ru_RU.UTF-8"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="ru uk en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
Portage 2.2.0_alpha30 (default/linux/x86/10.0/desktop/kde, gcc-4.5.2, libc-0-r0, 2.6.37-gentoo-r4 i686)
=================================================================
System uname: Linux-2.6.37-gentoo-r4-i686-Intel-R-_Atom-TM-_CPU_N270_@_1.60GHz-with-gentoo-2.0.2
Timestamp of tree: Tue, 10 May 2011 11:15:01 +0000
USE="X a52 aac acl acpi alsa avahi berkdb bluetooth branding bzip2 cairo cdr cli consolekit cracklib crypt cups cxx dbus djvu dri dri2 dts dvd dvdr emboss encode eselect evdev exif fam firefox flac fortran gdbm gdu gif gpm iconv intel ipod ipv6 java jpeg jpeg2k kde latex latex3 lcms ldap libnotify mad midi mmx mmxext mng modules mp3 mp4 mpeg mudflap mysql ncurses networkmanager nls nptl nptlonly ogg opengl openmp pam pango pcre pdf perl plasma plasmoids png policykit ppds pppd ps python python3 qt3support qt4 readline samba sdl session smp spell sse2 ssh ssl ssse3 startup-notification svg symlink synaptics sysfs tcpd tex tiff truetype udev unicode usb utf8 v4l2 vorbis webkit x264 x86 xcb xcomposite xml xorg xulrunner xv xvid zeroconf zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru uk en" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="intel vesa v4f" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS
[/code]

P.S  Also I updated KDE to 4.6.3

Reproducible: Always

Steps to Reproduce:
1.Boot system
2.
3.




Comment 1


Alex Legler (RETIRED)








          2011-05-21 19:53:23 UTC
        

Please read the instructions and file your bugs in the 'Gentoo Linux' category next time.




Comment 2


Vasyl





          2011-05-21 19:59:31 UTC
        

(In reply to comment #1)
> Please read the instructions and file your bugs in the 'Gentoo Linux' category
> next time.

I thought I marked Product: Gentoo Linux.
Sorry, I will try my best next time




Comment 3


Thomas Kahle (RETIRED)






          2011-05-22 09:12:47 UTC
        

Please don't add the x86 alias yourself.  We do arch-testing, bug fixing is for maintainers.




Comment 4


Jeroen Roovers (RETIRED)






          2011-05-23 22:38:15 UTC
        

Please post the output of `emerge -vpq kde-base/kdm' too.




Comment 5


Vasyl





          2011-05-25 20:53:07 UTC
        

(In reply to comment #4)
> Please post the output of `emerge -vpq kde-base/kdm' too.

# emerge -vpq kde-base/kdm
[ebuild   R   ] kde-base/kdm-4.6.3  USE="(consolekit) handbook pam (-aqua) -debug (-kdeenablefinal) (-kdeprefix) -kerberos"


Sorry for delay.




Comment 6


Peter Albrecht





          2011-05-29 20:02:44 UTC
        

I may have found the reason, why:

In "/etc/rc.conf" set "rc_start_wait = 100"
=> start-stop-daemon: did not create a valid pid in `/var/run/ConsoleKit/pid'

Commenting this line out:
=> no more false error-messages

Setting "rc_start_wait = 500"
=> also no more false error-messages

I have tried only consolekit so far, but I think it might help with kdm also. ;)




Comment 7


Vasyl





          2011-05-29 20:23:01 UTC
        

(In reply to comment #6)
> I may have found the reason, why:
> 
> In "/etc/rc.conf" set "rc_start_wait = 100"
> => start-stop-daemon: did not create a valid pid in `/var/run/ConsoleKit/pid'
> 
> Commenting this line out:
> => no more false error-messages
> 
> Setting "rc_start_wait = 500"
> => also no more false error-messages
> 
> I have tried only consolekit so far, but I think it might help with kdm also.
> ;)

That helps to avoid ERROR messages!

However, KDE works inappropriate... 
I have two KDM processes. And I can not run programs...
I got message 
"KDEInit can not start  "/usr/bin/ksysguard".: Unable to create  new processes. System may reach maximum possible number of processes possible or the maximum number of processes that you are allowed to use has been reached"




Comment 8


Andreas K. Hüttel







          2011-08-08 21:08:15 UTC
        

This looks openrc-related...




Comment 9


Andreas K. Hüttel







          2011-09-03 20:02:48 UTC
        

What's your current kde version, and do you still have this problem?




Comment 10


SpanKY






          2011-09-17 05:24:26 UTC
        

it's working for me with kde-base/kdm-4.6.3 and sys-apps/openrc-0.9.3

# cat /var/run/kdm.pid 
4164
# ls -l /proc/4164/exe 
lrwxrwxrwx 1 root root 0 Sep 17 01:23 /proc/4164/exe -> /usr/bin/kdm




Comment 11


Christian Ruppert (idl0r)






          2011-09-18 14:44:42 UTC
        

rc_start_wait is not set by default. If you enable/set it then you have to deal with the consequences.

Removing openrc from CC...




Comment 12


Johannes Huber (RETIRED)






          2011-10-10 23:48:48 UTC
        

Works for me with kde-base/kdm-4.7.2 and sys-apps/openrc-0.9.3-r1




Comment 13


Andreas K. Hüttel







          2011-11-12 15:58:20 UTC
        

OK by consent of the last posts resolving as WORKSFORME, missing feedback.

If you still have this problem with latest kde-4.7.3 please reopen.




Comment 14


Peter Albrecht





          2012-01-15 20:48:43 UTC
        

Sorry for having posted a "wrong solution". I don't want to violate this closed bug too much, but I want to excuse and share my experience:

(In reference to comment #6)
> ...
> In "/etc/rc.conf" set "rc_start_wait = 100"
> => start-stop-daemon: did not create a valid pid in `/var/run/ConsoleKit/pid'
> 
> Commenting this line out:
> => no more false error-messages
> 
> Setting "rc_start_wait = 500"
> => also no more false error-messages

I've been using a wait-time of 500 for half a year now. But since my last "emerge world" I get those false warnings again. => 500 still seems to be too little.

Or as Christian Ruppert (idl0r) said in comment #11:
> rc_start_wait is not set by default. If you enable/set it then you have to deal with the consequences.

=> I commented "rc_start_wait" out and everything works fine again. So my advice (reason for this post): The option "rc_start_wait" looked usefull at first glance, but caused only trouble to me. So keep it off.

Maybe a warning about "possible false error messages" should be added to the comments for "rc_start_wait" in "rc.conf".









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

