Title: 189104 – sys-libs/glibc-2.6.1 doesn't build w/ paludis
URL: https://bugs.gentoo.org/show_bug.cgi?id=189104

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 189104
sys-libs/glibc-2.6.1 doesn't build w/ paludis
Last modified: 2007-08-16 19:20:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 189104 
      - sys-libs/glibc-2.6.1 doesn't build w/ paludis


Summary:
sys-libs/glibc-2.6.1 doesn't build w/ paludis
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-16 12:54 UTC by Dirk Heinrichs





      Modified:
    
2007-08-16 19:20 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dirk.heinrichs









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dirk Heinrichs





          2007-08-16 12:54:49 UTC
        

When I updating glibc from 2.6 to 2.6.1 I get the following error during build

test ! -x /gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig || LC_ALL=C LANGUAGE=C \
          /gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig -r /gentoo/build/sys-libs/glibc-2.6.1/image/ \
                                       /lib /usr/lib
/gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig: Can't open configuration file /etc/ld.so.conf: No such file or directory
make[1]: Leaving directory `/gentoo/build/sys-libs/glibc-2.6.1/work/glibc-2.6.1'

Of course, /etc/ld.so.conf does exist. I'm using paludis if that matters, but OTOH the update to glibc 2.6 worked just fine with it.

Reproducible: Always

Steps to Reproduce:
1. paludis -i world
2.
3.

Actual Results:  
See above.

Expected Results:  
glibc should be updated.




Comment 1


Jakub Moc (RETIRED)






          2007-08-16 13:05:52 UTC
        

(In reply to comment #0)
> Can't open configuration file /etc/ld.so.conf: No such file or directory

That's not why it fails, you didn't post the lines below.

> I'm using paludis if that matters

So post paludis --info or what's it called there.




Comment 2


Dirk Heinrichs





          2007-08-16 14:14:45 UTC
        

(In reply to comment #1)
> (In reply to comment #0)
> > Can't open configuration file /etc/ld.so.conf: No such file or directory
> 
> That's not why it fails, you didn't post the lines below.

OK. Here they are:

rm -f /gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/symlink.list
test ! -x /gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig || LC_ALL=C LANGUAGE=C \
          /gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig -r /gentoo/build/sys-libs/glibc-2.6.1/image/ \
                                       /lib /usr/lib
/gentoo/build/sys-libs/glibc-2.6.1/work/build-default-i686-pc-linux-gnu-nptl/elf/ldconfig: Can't open configuration file /etc/ld.so.conf: No such file or directory
make[1]: Leaving directory `/gentoo/build/sys-libs/glibc-2.6.1/work/glibc-2.6.1'
/usr/libexec/paludis/utils/prepallstrip: line 20: ebuild_notice: command not found

!!! ERROR in sys-libs/glibc-2.6.1:
!!! In eblit-run at line 1494
!!! (no message provided)

!!! Call stack:
!!!    * eblit-run (/gentoo/build/sys-libs/glibc-2.6.1/temp/loadsaveenv:1494)
!!!    * src_install (/gentoo/build/sys-libs/glibc-2.6.1/temp/loadsaveenv:4551)
!!!    * ebuild_f_install (/usr/libexec/paludis/src_install.bash:48)
!!!    * ebuild_main (/usr/libexec/paludis/ebuild.bash:363)
!!!    * main (/usr/libexec/paludis/ebuild.bash:381)

die trap: exiting with error.

Install error:
  * In program paludis -i world:
  * When performing install action from command line:
  * When executing install task:
  * When installing 'sys-libs/glibc-2.6.1':
  * Install error: Install failed for 'sys-libs/glibc-2.6.1::gentoo'

> > I'm using paludis if that matters
> 
> So post paludis --info or what's it called there.

paludis 0.24.5

Built by paludisbuild@louisa on 2007-07-11T08:05:32+0200
CXX:         i686-pc-linux-gnu-g++ 4.1.2 (Gentoo 4.1.2)
CXXFLAGS:    -O2 -march=pentium4 -fomit-frame-pointer -pipe
LDFLAGS:
DATADIR:     /usr/share
LIBDIR:      /usr/lib
LIBEXECDIR:  /usr/libexec
SYSCONFDIR:  /etc
stdlib:      GNU libstdc++ 20070214
libebt:      1.3.0
libwrapiter: 1.2.0
sandbox:     enabled

Repository virtuals:
    Configuration information:
        format:                virtuals

Repository installed_virtuals:
    Configuration information:
        format:                installed_virtuals

Repository gentoo:
    Configuration information:
        buildroot:             /gentoo/build
        cache:                 /gentoo/overlays/portage/metadata/cache
        distdir:               /gentoo/distfiles
        eclassdirs:            /gentoo/overlays/portage/eclass
        format:                ebuild
        location:              /gentoo/overlays/portage
        names_cache:           /gentoo/overlays/portage/.cache/names
        newsdir:               /gentoo/overlays/portage/metadata/news
        pkgdir:                /gentoo/overlays/portage/packages
        profiles:              /gentoo/overlays/portage/profiles/default-linux/x86/2007.0
        securitydir:           /gentoo/overlays/portage/metadata/glsa
        setsdir:               /gentoo/overlays/portage/sets
        sync:                  tar+http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/snapshots/portage-latest.tar.bz2
        sync_options:          --strip-components=1 --rsync-option=--filter=H_**/files/digest-*
        write_cache:           /var/cache/paludis/metadata

    Package information:
        app-admin/eselect-compiler: (none)
        dev-java/java-config:  (none)
        dev-lang/python:       2.4.4-r4
        dev-python/pycrypto:   2.0.1-r6
        dev-util/ccache:       (none)
        dev-util/confcache:    (none)
        sys-apps/sandbox:      1.2.18.1
        sys-devel/autoconf:    2.13, 2.61-r1
        sys-devel/automake:    1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
        sys-devel/binutils:    2.17-r1
        sys-devel/gcc-config:  1.3.16
        sys-devel/libtool:     1.5.24
        virtual/os-headers:    2.6.22-r2

    Variable information:
        ACCEPT_KEYWORDS:
        AUTOCLEAN:
        CBUILD:                i686-pc-linux-gnu
        CFLAGS:                -O2 -march=pentium4 -fomit-frame-pointer -pipe
        CHOST:                 i686-pc-linux-gnu
        CONFIG_PROTECT:
        CONFIG_PROTECT_MASK:
        CTARGET:
        CXXFLAGS:              -O2 -march=pentium4 -fomit-frame-pointer -pipe
        DISTDIR:               /gentoo/distfiles
        FEATURES:
        GENTOO_MIRRORS:
        INSTALL_MASK:
        LANG:
        LC_ALL:
        LDFLAGS:
        LINGUAS:
        MAKEOPTS:              -j2
        PKGDIR:
        PORTAGE_COMPRESS:
        PORTAGE_COMPRESS_FLAGS:
        PORTAGE_RSYNC_EXTRA_OPTS:
        PORTAGE_RSYNC_OPTS:
        PORTAGE_TMPDIR:        /gentoo/build
        PORTDIR:               /gentoo/overlays/portage
        PORTDIR_OVERLAY:
        SYNC:
        USE:

Since this doesn't include USE flags, here's the relevant part of paludis -ip world:

* sys-libs/glibc-2.6.1 {:2.2} [U 2.6] -debug -glibc-compat20 glibc-omitfp (-hardened) (-multilib) nls -profile (-selinux)





Comment 3


Jakub Moc (RETIRED)






          2007-08-16 14:21:59 UTC
        

(In reply to comment #2)
> /usr/libexec/paludis/utils/prepallstrip: line 20: ebuild_notice: command not
> found

Great; get paludis fixed. Meanwhile attach complete compile log here, will be more useful than pondering why did paludis eat the errors.





Comment 4


Dirk Heinrichs





          2007-08-16 19:17:28 UTC
        

(In reply to comment #3)

> Great; get paludis fixed.

Done. There was an update in the tree today which solved the problem.
glibc is updated now.




Comment 5


Jakub Moc (RETIRED)






          2007-08-16 19:20:20 UTC
        

So... lets resolve this properly than.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

