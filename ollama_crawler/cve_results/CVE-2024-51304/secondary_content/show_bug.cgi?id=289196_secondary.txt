Title: 289196 – sys-apps/kexec-tools: /etc/init.d/kexec problem while determining valid initrd image
URL: https://bugs.gentoo.org/show_bug.cgi?id=289196

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 289196
sys-apps/kexec-tools: /etc/init.d/kexec problem while determining valid initrd image
Last modified: 2010-11-29 20:37:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 289196 
      - sys-apps/kexec-tools: /etc/init.d/kexec problem while determining valid initrd image


Summary:
sys-apps/kexec-tools: /etc/init.d/kexec problem while determining valid initr...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Kernel Miscellaneous








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-15 12:09 UTC by Greg Dziegielewski





      Modified:
    
2010-11-29 20:37 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




patch that fixes the problem

              (kexec.init.patch,473 bytes,
                patch)

            
2009-10-15 12:13 UTC,

            Greg Dziegielewski




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Greg Dziegielewski





          2009-10-15 12:09:14 UTC
        

/etc/init.d/kexec/ do not check for custom initrd in the ${BOOTPART}

Reproducible: Always

Steps to Reproduce:
1. rename initrd file to some non standard name (e.g.: "initramfs" - the default name of initrd from genkernel
2. check the ${initrdopt} in load_image() function while /etc/init.d/kexec start


Actual Results:  
${initrdopt} is empty.

Expected Results:  
${initrdopt} should contain "--initrd=/boot/initramfs"




Comment 1


Greg Dziegielewski





          2009-10-15 12:13:09 UTC
        

Created attachment 207202 [details, diff]
patch that fixes the problem




Comment 2


Greg Dziegielewski





          2009-10-15 12:15:34 UTC
        

(In reply to comment #0)
> /etc/init.d/kexec/ do not check for custom initrd in the ${BOOTPART}
Uhm.. of course i meant: /etc/init.d/kexec




Comment 3


Wormo (RETIRED)






          2009-10-21 06:53:39 UTC
        

Thanks for posting your fix, assigning to maintainers.




Comment 4


Tim Harder






          2010-11-29 20:37:11 UTC
        

Closing as worksforme since the current init script should work fine.

You should set INITRD="/boot/initramfs-file-name" instead of INITRD="initramfs-file-name" in /etc/conf.d/kexec.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

