Title: 367077 – --usepkg should consider VIDEO_CARDS
URL: https://bugs.gentoo.org/show_bug.cgi?id=367077

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 367077
--usepkg should consider VIDEO_CARDS
Last modified: 2011-05-13 18:48:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 367077 
      - --usepkg should consider VIDEO_CARDS


Summary:
--usepkg should consider VIDEO_CARDS
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Unclassified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-05-13 10:31 UTC by Fab





      Modified:
    
2011-05-13 18:48 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fab





          2011-05-13 10:31:59 UTC
        

I'm using a build farm to create tbz2 packages that I unpack on anothers systems. On the build system, VIDEO_CARDS is set to "nvidia nouveau".
The tbz2 package for media-gfx/imagemagick is then built with VIDEO_CARDS="nvidia".

On the local network, on another system, VIDEO_CARDS is set to "sis".
On this system I'm trying to install xfce4-meta from tbz2 prebuilt packages.
Here is the result :

>
> # emerge -avk xfce4-meta
>
> [...] cut off 34 binaries packages
>
> [binary  N    ] xfce-base/xfce4-meta-4.8  USE="session svg -minimal"
> [ebuild  N    ] x11-drivers/nvidia-drivers-260.19.36  USE="acpi gtk -custom-cflags (-multilib)" 0 kB
> [ebuild  N    ] media-video/nvidia-settings-260.19.29  0 kB
> [binary  N    ] media-gfx/imagemagick-6.6.5.6  USE="X bzip2 corefonts cxx jpeg lcms openmp perl png svg tiff truetype xml zlib -autotrace -djvu -fftw -fontconfig -fpx -graphviz -gs -hdri -jbig -jpeg2k -lqr -openexr -q32 -q8 -raw -static-libs -wmf" VIDEO_CARDS="nvidia"

You can notice that emerge wants to install imagemagick from the binary package with VIDEO_CARDS="nvidia". It should wants to build the package itself.

I'm using stable portage 2.1.9.42. Thanks.

PS: on a system with FEATURES="buildpkg" is there a way to define a set of packages which tell to emerge to never build binary packages for this set ?

Reproducible: Always




Comment 1


Zac Medico






          2011-05-13 17:36:46 UTC
        

You can use the --bingpkg-respect-use option for this (or --newuse which is less specific). If you want this as the default behavior, set EMERGE_DEFAULT_OPTS="--bingpkg-respect-use" in /etc/make.conf.




Comment 2


Fab





          2011-05-13 18:48:42 UTC
        

Ok, it works with it. Another new option that I didn't know. I thought that it was the default that the -k option involved that binary packages would be merged only if their configuration was the same as the system. Sorry for disturbing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

