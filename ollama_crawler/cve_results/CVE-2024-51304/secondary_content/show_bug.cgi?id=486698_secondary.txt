Title: 486698 – app-emulation/virtualbox-modules.4.2.18 ERROR: Kernel configuration is invalid.
URL: https://bugs.gentoo.org/show_bug.cgi?id=486698

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 486698
app-emulation/virtualbox-modules.4.2.18 ERROR: Kernel configuration is invalid.
Last modified: 2013-10-03 13:48:08 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 486698 
      - app-emulation/virtualbox-modules.4.2.18 ERROR: Kernel configuration is invalid.


Summary:
app-emulation/virtualbox-modules.4.2.18 ERROR: Kernel configuration is invalid.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-10-01 19:03 UTC by andros





      Modified:
    
2013-10-03 13:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bkohler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (file_486698.txt,3.66 KB,
                text/plain)

            
2013-10-01 19:08 UTC,

            andros




Details





make.conf

              (make.conf,5.02 KB,
                text/plain)

            
2013-10-01 19:11 UTC,

            andros




Details





emerge --info

              (file_486698.txt,7.96 KB,
                text/plain)

            
2013-10-01 19:11 UTC,

            andros




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


andros





          2013-10-01 19:03:42 UTC
        

I have recently updated my Kernel to unstable gentoo-sources
I seem to be that since than I couldn't install virtualbox, it crashes with:

"  ERROR: Kernel configuration is invalid.
         include/generated/autoconf.h or include/config/auto.conf are missing.
         Run 'make oldconfig && make prepare' on kernel src to fix it.
"
I have tried to fix this as suggested, but both files are in are there anyways.



Reproducible: Always

Steps to Reproduce:
1. Install gentoo kernel 3.11
2. try to emerge virtualbox modules

Actual Results:  
Stops on build process.

Expected Results:  
Build the modules




Comment 1


andros





          2013-10-01 19:08:22 UTC
        

Created attachment 359928 [details]
Build log




Comment 2


andros





          2013-10-01 19:11:09 UTC
        

Created attachment 359930 [details]
make.conf




Comment 3


andros





          2013-10-01 19:11:45 UTC
        

Created attachment 359932 [details]
emerge --info




Comment 4


Ben Kohler






          2013-10-01 19:17:04 UTC
        

Looks like you have permission problems on /usr/src/linux-3.11.2, new stable portage enables 'userpriv' by default so the sources need to be readable by the portage user.  Either fix the permissions, or disable userpriv.




Comment 5


andros





          2013-10-03 08:31:06 UTC
        

I have set owner root:portage to the entire /usr/src directory.
Now virtualbox-modules merges. But is this the right way to do that?

Also another error emerges if I try to build the rest of my modules zsf-kmod and spl:
"Cannot find UTS_RELEASE definition."




Comment 6


Ben Kohler






          2013-10-03 13:48:08 UTC
        

The easiest way to keep things working is to keep default permissions on kernel sources-- they should be world readable (root:root 644 on files, root:root 755 on dirs).  If you need to restrict permissions on them (I'm not sure why users READING them would be a problem) then you should adjust permissions to be readable by portage or disable userpriv on all kernel module packages.

If you're still having trouble on those other modules, please open a new bug.

Thanks!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

