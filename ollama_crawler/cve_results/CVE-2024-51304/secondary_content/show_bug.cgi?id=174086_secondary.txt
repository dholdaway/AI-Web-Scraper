Title: 174086 – revdep-rebuild should have some option to use package SLOTs
URL: https://bugs.gentoo.org/show_bug.cgi?id=174086

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 174086
revdep-rebuild should have some option to use package SLOTs
Last modified: 2007-08-15 12:50:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 174086 
      - revdep-rebuild should have some option to use package SLOTs


Summary:
revdep-rebuild should have some option to use package SLOTs
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-04-10 20:28 UTC by Arfrever Frehtes Taifersar Arahesis (RETIRED)





      Modified:
    
2007-08-15 12:50 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



DuPol









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2007-04-10 20:28:47 UTC
        

revdep-rebuild should have some option to use package SLOTs. I suggest -x | --package-slots.




Comment 1


Jakub Moc (RETIRED)






          2007-04-10 21:19:16 UTC
        

And it should do exactly what?




Comment 2


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2007-04-10 22:16:41 UTC
        

Expected results:
$ revdep-rebuild --help
Usage: /usr/bin/revdep-rebuild [OPTIONS] [--] [EMERGE_OPTIONS]

Broken reverse dependency rebuilder.

  -X, --package-names  Emerge based on package names, not exact versions
  -x, --package-slots  Emerge based on package slots
      --library NAME   Emerge existing packages that use the library with NAME
...

(In reply to comment #1)
> And it should do exactly what?
> 
For example user has package A-1.0:1 and A-2.0:2. User synchronized the tree and A-1.1:1 was added to the tree. User updated some A-1.0 dependency which broke some library belonging to A-1.0. Running `revdep-rebuild` would reemerge A-1.0 and running `revdep-rebuild -X` would reemerge A-2.0. There should be option allowing to reemerge broken slots of packages. In this case A-1.1:1 should be emerged.




Comment 3


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2007-04-10 22:16:59 UTC
        

Reopening.




Comment 4


Paul Varner (RETIRED)






          2007-04-11 01:18:21 UTC
        

revdep-rebuild -X should already respect slots.  I haven't ported it over to the new slot syntax yet, but that was one of the first things that I fixed when I came on as a developer.

Please reopen with the temporary files attached and the actual output from revdep-rebuild, if it does not do so.




Comment 5


Dustin Polke





          2007-08-15 12:00:39 UTC
        

IMO, this issue isn't solved and I request to re-open this bug.

I just had the same problem after upgrading to expat-2.0.1.
This upgrade broke quite some packages. In bug #41124 comment #183, it is proposed to run revdep-rebuild -X, which I did. But after rebuilding all packages, apache was still broken, so I reran revdep-rebuild -X, which rebuilt apr-util-1.2.8 but not apr-util-0.9.12-r1, to which the broken libaprutil-0.so.0.9.12 belongs.
Took me a while to realize what was going on. I manually re-emerge the packages and now it is working again. Unfortunately, I do not have the temporary revdep files anymore and I do not have the time to downgrade to expat-1.95.8 and build apr-util against it again to reproduce.

I am using gentoolkit-0.2.3-r1

solaris dustin # emerge --info
Portage 2.1.2.11 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.5-r4, 2.6.21-gentoo-r4 i686)
=================================================================
System uname: 2.6.21-gentoo-r4 i686 mobile AMD Athlon(tm) XP 1500+
Gentoo Base System release 1.12.9
Timestamp of tree: Wed, 15 Aug 2007 07:20:01 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe -m3dnow -msse -mmmx"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon-xp -O2 -pipe -m3dnow -msse -mmmx"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict test userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/ ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ ftp://gd.tuwien.ac.at/opsys/linux/gentoo/ ftp://gentoo.inode.at/source/"
LINGUAS="en de"
MAKEOPTS="-j3"
PKGDIR="/home/ftp/binpkg/"
PORTAGE_COMPRESS=""
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=500"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/science /usr/local/portage/layman/webapps-experimental /usr/local/portage/modified /usr/local/portage/own"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X Xaw3d a52 aac aalib acpi alsa amr amrnb amrr amrwb apache2 apm asf async audacious audiofile bash-completion bindist bl branding bzip2 cardbus cjk cli cpudetection cracklib crypt ctype cups dbus dga divx dri dvd dvdread eds encode evo exif expat extensions fam fbcon ffmpeg flac foomaticdb force-cgi-redirect fortran ftp gd gdbm gedit gif gimp gimpprint glibc-omitfp gmedia gs gsm gtk gtkhtml guile hal icq idn imagemagick imap imlib iproute2 jack java javascript jikes jpeg jpeg2k kerberos lcms ldap libcaca libwww live lm_sensors logrotate lzo mad madwifi memlimit midi mikmod mime mmx mmxext mng motif mp2 mp3 mp4 mpeg musepack mysql ncurses nls nntp nptl nptlonly nsplugin ogg opengl pam pam_timestamp pch pcmcia pcre pda pdf perl php plotutils png posix postgres print python qt3support qt4 quicktime readline real realmedia ruby rubytests samba sasl sdl server session simplexml slang smbkrb5passwd sndfile soap sockets speex spell spl sse ssl suhosin svg svga swat syslog tcpd test tetex tga theora tiff truetype unicode usb userlocales vcd vidix vim-syntax vim-with-x vorbis wifi win32codecs winbind wma wmf wmp x264 x86 xanim xine xinetd xml xorg xpm xsl xulrunner xv xvid xvmc zlib" ALSA_CARDS="via82xx via82xx-modem mpu401" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LINGUAS="en de" USERLAND="GNU" VIDEO_CARDS="savage"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS_FLAGS









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

