Title: 114150 – xorg-x11-6.8.2-r6 crashes with signal 11 when using *any* opengl command when configured to use nvidia proprietary drivers (7xxx series, NOT 6xxx) + vga pci card
URL: https://bugs.gentoo.org/show_bug.cgi?id=114150

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 114150
xorg-x11-6.8.2-r6 crashes with signal 11 when using *any* opengl command when configured to use nvidia proprietary drivers (7xxx series, NOT 6xxx) + vga pci card
Last modified: 2006-11-10 17:28:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 114150 
      - xorg-x11-6.8.2-r6 crashes with signal 11 when using *any* opengl command when configured to use nvidia proprietary drivers (7xxx series, NOT 6xxx) + vga pci card


Summary:
xorg-x11-6.8.2-r6 crashes with signal 11 when using *any* opengl command when...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       critical
      


Assignee:

X11 External Driver Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-01 07:26 UTC by Joseph Pingenot





      Modified:
    
2006-11-10 17:28 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Xorg log of a Real, Live Sig11!

              (Xorg.0.log.old,63.11 KB,
                text/plain)

            
2005-12-01 07:28 UTC,

            Joseph Pingenot




Details





Xorg config file

              (xorg.conf,10.83 KB,
                text/plain)

            
2005-12-01 07:29 UTC,

            Joseph Pingenot




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joseph Pingenot





          2005-12-01 07:26:36 UTC
        

The xorg-x11 server dies spectacuarly when using any opengl (I test with
glxinfo, though tmk any opengl will do it, including xscreensaver/xlock w/o
actual opengl screensavers going) under the following conditions:

1) Using a VGA card (probably; in this case, it's 04:0e.0 VGA compatible
controller: Rendition Verite V2000/V2100/V2200 (rev 06)
2) in combination with 01:00.0 VGA compatible controller: nVidia Corporation
NV25GL [Quadro4 700 XGL] (rev a3).
3) Using at least a set of 7xxx-series nvidia drivers (the 6xxx series work
fine!); tested on 7676 and 7667.  Works fine with 6629.

Expect horrible sig11 death if you try this combination and any opengl!

NOTES:
  1) depth of the vga display is irrelevant (set it to 24 to test, same as the
other screens)
  2) headedness does not matter (tried it without the 2nd [DVI] head)

Reproducible: Always
Steps to Reproduce:
1. Find a crappy ancient PCI card
2. Configure it to run as another head
3. Use any OpenGL
4. Watch horrible sig11 death

Actual Results:  
X died.

Expected Results:  
A rockin' X setup (though the rockin-ness of any X setup including such an
ancient card is seriously questionable)

Will upload important files shortly.

#emerge --info
Gentoo Base System version 1.6.13
Portage 2.0.51.22-r3 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.1
4.3 i686)
=================================================================
System uname: 2.6.14.3 i686 Intel(R) Xeon(TM) CPU 2.40GHz
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe -fschedule-insns2 -fexpensive-optimizations -f
omit-frame-pointer -falign-functions -mmmx -msse -msse2 -mfpmath=sse -ftracer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share
/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kd
e/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/default
s/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips
/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config
/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O2 -pipe -fschedule-insns2 -fexpensive-optimizations 
-fomit-frame-pointer -falign-functions -mmmx -msse -msse2 -mfpmath=sse -ftracer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://csociety-ftp.ecn.purdue.edu/pub/gentoo/ http://gentoo.che
m.wisc.edu/gentoo/ http://cudlug.cudenver.edu/gentoo/ http://mirror.clarkson.edu
/pub/distributions/gentoo/ http://mirrors.acm.cs.rpi.edu/gentoo/ http://open-sys
tems.ufl.edu/mirrors/gentoo http://chod.cwru.edu/gentoo http://gentoo.cs.lewisu.
edu/gentoo/ http://prometheus.cs.wmich.edu/gentoo"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X Xaw3d a52 aac aalib accessibility acl acpi aim alsa apache2 arts atla
s audiofile avi bash-completion bcmath berkdb bidi bitmap-fonts bluetooth bonobo
 bzip2 bzlib calendar caps cdb cdparanoia cdr cjk cpdflib crypt cscope ctype cup
s curl curlwrappers dbm dedicated dga dio directfb divx4linux doc dv dvb dvd dvd
r dvdread eds emacs emacs-w3 emboss encode esd ethereal evo exif expat fam fbcon
 ffmpeg fftw flac flash flatfile font-server foomaticdb fortran freetds ftp gb g
cj gd gdbm ggi gif ginac glut gmp gnome gnutls gphoto2 gpm gstreamer gtk gtk2 gt
khtml guile hal howl hyperwave-api iconv icq idn ieee1394 imagemagick imap imlib
 inifile innodb ipv6 jabber jack java javascript jikes joystick jpeg junit kde k
deenablefinal kerberos krb4 ladcca lcms ldap leim lesstif libcaca libg++ libgda 
libwww lirc lm_sensors mad maildir matroska mbox mcal memlimit mgnosearch mhash 
mikmod mime ming mmap mmx mmxext mng mono motif mozilla mp3 mpeg msn mule mysql 
mysqli nas ncurses neXt netboot netcdf nls nptl odbc offensive ofx ogg oggvorbis
 openal opengl osc oscar oss pam pcntl pcre pda pdflib perl php plotutils png pn
p portauido posix postgres ppds prelude python qt quicktime readline recode samb
a sasl scanner sdl shared sharedmem simplexml skey slang slp smartcard sndfile s
nmp soap sockets socks5 sox speex spell spl sqlite sse sse2 ssl svg svga sysfs s
ysvipc szip tcltk tcpd tetex theora threads tidy tiff tokenizer truetype truetyp
e-fonts type1-fonts udev unicode usb v4l vcd videos vorbis wddx wifi win32codecs
 wmf wxwindows xface xine xinerama xml xml2 xmlrpc xmms xosd xpm xprint xsl xv x
vid yahoo yaz zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Joseph Pingenot





          2005-12-01 07:28:09 UTC
        

Created attachment 73888 [details]
Xorg log of a Real, Live Sig11!




Comment 2


Joseph Pingenot





          2005-12-01 07:29:40 UTC
        

Created attachment 73889 [details]
Xorg config file




Comment 3


Joshua Baergen (RETIRED)






          2005-12-04 09:30:52 UTC
        

I haven't seen this issue at all on several machines with -r6 installed that
have both ATI and nVidia cards.

Your CFLAGS could be the culprit. -mfpmath=sse has been known to cause problems
in general, and if the rest of those flags aren't in any O-level then they could
also cause problems.  Some of these are known to break specifically on gcc 3.3

Simple re-merging xorg-x11 with different CFLAGS (esp. mfpmath) will not
suffice, since mfpmath as both sse and 387 (default) is even worse.  The entire
system would have to be rebuilt.

I do recommend trying to re-install your previous version of X and seeing if
that solves the problem.  If it does, it could still mean one of your CFLAGS
isn't playing nice with one of the included patches.




Comment 4


Jakub Moc (RETIRED)






          2006-11-10 17:28:35 UTC
        

If you can reproduce w/ up-to-date nvidia-drivers, xorg-server and *sane* C[XX]FLAGS, then file a new bug.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

