Title: 651566 – sys-process/htop with lxde-base/lxterminal with =sys-libs/ncurses-6.1-r2 - broken output
URL: https://bugs.gentoo.org/show_bug.cgi?id=651566

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 651566
sys-process/htop with lxde-base/lxterminal with =sys-libs/ncurses-6.1-r2 - broken output
Last modified: 2019-05-24 13:40:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 651566 
      - sys-process/htop with lxde-base/lxterminal with =sys-libs/ncurses-6.1-r2 - broken output


Summary:
sys-process/htop with lxde-base/lxterminal with =sys-libs/ncurses-6.1-r2 - br...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Christian Ruppert (idl0r)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




ncurses-6.1



 

        Show dependency tree





 





      Reported:
    
2018-03-26 12:38 UTC by tt_1





      Modified:
    
2019-05-24 13:40 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



polynomial-c









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




screenshot at runtime

              (broken-htop.png,99.49 KB,
                image/png)

            
2018-03-26 12:38 UTC,

            tt_1




Details





output of emerge --info

              (emerge.info,4.92 KB,
                text/plain)

            
2018-03-26 12:39 UTC,

            tt_1




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


tt_1





          2018-03-26 12:38:21 UTC
        

Created attachment 525474 [details]
screenshot at runtime

I recently updated from ncurses-6.0-r1 to ncurses-6.1-r1 for testing it, and while it broke one package (lynx) at compile time, it kind of broke the output of sys-process/htop

This happens on arm with lxterminal, amd64 with either gnome-terminal, or xfce4-terminal is not affected. Can test lxterminal with amd64 upon request, same goes for testing current unstable htop-2.1.0 against ncurses-6.1-r1. 

Might be related to this: https://github.com/hishamhm/htop/issues/695




Comment 1


tt_1





          2018-03-26 12:39:29 UTC
        

Created attachment 525476 [details]
output of emerge --info




Comment 2


Lars Wendler (Polynomial-C) (RETIRED)






          2018-03-26 13:05:45 UTC
        

What version of the htop package do you have installed?

In case it's not sys-process/htop-2.1.0-r1, please try that version and report back your results.




Comment 3


tt_1





          2018-03-26 15:36:16 UTC
        

This affects all versions of htop with all versions of lxterm, which are in tree. Did a runtime test on all of them, it shows this broken output for cpu load, memory load and system load with all of them. 

Only solution at the moment is to downgrade ncurses. Also took the new ncurses-6.1-r2 ebuild for testing this.




Comment 4


tt_1





          2018-04-02 11:39:19 UTC
        

This is likely related to lxterminal only, if I login via ssh (host terminal is gnome-terminal) into the affected system, there are no problems with htop.




Comment 5


Jeroen Roovers (RETIRED)






          2018-04-11 17:32:58 UTC
        

Not just kde-apps/konsole, then?




Comment 6


Lars Wendler (Polynomial-C) (RETIRED)






          2018-04-11 17:39:22 UTC
        

(In reply to Jeroen Roovers from comment #5)
> Not just kde-apps/konsole, then?

No or otherwise I'd have seen that on the day I bumped ncurses. I use kde-apps/konsole exclusively.




Comment 7


Ortwin Glueck





          2018-08-13 09:58:22 UTC
        

should be fixed with current stable kde-apps/konsole-18.04.3




Comment 8


tt_1





          2018-10-15 08:12:24 UTC
        

this can be fixed by dropping TERM=vte to your .bashrc

I'll open a pullrequest which adds an elog message to lxterminal, giving users a hint and thus a chance to act accordingly.




Comment 9


tt_1





          2019-05-24 13:40:16 UTC
        

this is fixed with lxterminal-0.3.2









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

