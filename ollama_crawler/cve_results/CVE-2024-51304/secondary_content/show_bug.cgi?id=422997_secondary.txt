Title: 422997 – sys-kernel/dracut-019 doesn't add lvm files in hostmode
URL: https://bugs.gentoo.org/show_bug.cgi?id=422997

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 422997
sys-kernel/dracut-019 doesn't add lvm files in hostmode
Last modified: 2012-07-25 11:55:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 422997 
      - sys-kernel/dracut-019 doesn't add lvm files in hostmode


Summary:
sys-kernel/dracut-019 doesn't add lvm files in hostmode
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Amadeusz Żołnowski (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-06-22 17:46 UTC by Alexander Vershilov (RETIRED)





      Modified:
    
2012-07-25 11:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



nikoli









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




dracut log

              (log,54.75 KB,
                text/plain)

            
2012-06-22 17:49 UTC,

            Alexander Vershilov (RETIRED)




Details





lsinitrd for hostonly mode

              (log,54.75 KB,
                text/plain)

            
2012-06-24 18:44 UTC,

            Alexander Vershilov (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexander Vershilov (RETIRED)






          2012-06-22 17:46:07 UTC
        

sys-kernel/dracut-019 doesn't add lvm scripts in hostmode

Reproducible: Always

Steps to Reproduce:
1. dracut -f -L=6  --fstab -a 'lvm' '/var/tmp/image' '3.4.3-gentoo' 

Actual Results:  
sysresccd / # lsinitrd /var/tmp/image | grep lvm
sysresccd / # 

Expected Results:  
sysresccd / # dracut -f -L=6  --fstab -a 'lvm' '/var/tmp/image2' '3.4.3-gentoo' &> log
sysresccd / # lsinitrd /var/tmp/image2 | grep lvm
drwxr-xr-x   2 root     root            0 Jun 22 17:52 etc/lvm
-rw-r--r--   1 root     root        34463 Jun 22 17:52 etc/lvm/lvm.conf
...




Comment 1


Alexander Vershilov (RETIRED)






          2012-06-22 17:49:33 UTC
        

Created attachment 315985 [details]
dracut log




Comment 2


Amadeusz Żołnowski (RETIRED)






          2012-06-24 05:44:31 UTC
        

Please post the result of lsinitrd, too.  As far as I see in your log, dracut installs lvm and actually it is not hostonly mode, but generic.  You haven't specified -H/--hostonly.




Comment 3


Alexander Vershilov (RETIRED)






          2012-06-24 18:44:06 UTC
        

Created attachment 316179 [details]
lsinitrd for hostonly mode

dracut -f -L=3 -M -H -m 'dash i18n kernel-modules resume rootfs-block terminfo udev-rules base' -a 'lvm' '/var/tmp/image' '3.4.3-gentoo'




Comment 4


Amadeusz Żołnowski (RETIRED)






          2012-06-24 19:11:55 UTC
        

I see that LVM is included:

I: *** Including module: lvm ***
D: Installing /lib64/libreadline.so.6.2
D: Installing /lib64/libncurses.so.5.9
D: Installing /sbin/lvm
D: Installing /usr/lib/dracut/modules.d/90lvm/64-lvm.rules
D: Installing /etc/lvm/lvm.conf
D: Installing /lib/udev/rules.d/11-dm-lvm.rules




Comment 5


Amadeusz Żołnowski (RETIRED)






          2012-07-25 11:55:50 UTC
        

I don't see the described problem in attached logs.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

