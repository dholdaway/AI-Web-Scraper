Title: 353823 – app-misc/dvtm-0.6 - Additional USE flags
URL: https://bugs.gentoo.org/show_bug.cgi?id=353823

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 353823
app-misc/dvtm-0.6 - Additional USE flags
Last modified: 2012-01-05 22:43:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 353823 
      - app-misc/dvtm-0.6 - Additional USE flags


Summary:
app-misc/dvtm-0.6 - Additional USE flags
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       enhancement
      


Assignee:

Chí-Thanh Christopher Nguyễn








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-06 08:33 UTC by Richard Anderson





      Modified:
    
2012-01-05 22:43 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Ebuild with added USE flags

              (dvtm-0.6.ebuild,1.87 KB,
                text/plain)

            
2011-02-06 08:35 UTC,

            Richard Anderson




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Richard Anderson





          2011-02-06 08:33:56 UTC
        

dvtm ships with the ability to enable/disable certain features at compile time.  These are:
 - The ability to perfrorm some functions based on mouse input,
 - The ability to accept input via a fifo to be displayed in the statusbar of dvtm's interface
 - The ability to accept commands via a (different) fifo.

A user compiling dvtm without Portage would normally configure these options by editing config.mk before running make.  The ebuilds for dvtm currently in the tree do not allow for configuring these compile-time options.  Portage simply installs dvtm using the default configuration provided in the source tarball which is to enable the status bar fifo and the mouse input and disable the command fifo.

An obvious solution would be to add USE flags to allow Gentoo users to enable/disable these features as they wish.




Comment 1


Richard Anderson





          2011-02-06 08:35:59 UTC
        

Created attachment 261635 [details]
Ebuild with added USE flags




Comment 2


Chí-Thanh Christopher Nguyễn






          2012-01-01 13:35:53 UTC
        

If I am not mistaken, these build options can be controlled via USE="savedconfig". Are the functions popular enough to make them USE flags?




Comment 3


Richard Anderson





          2012-01-02 02:05:57 UTC
        

Unless I'm missing something, there's no way to enable or disable these features via USE="savedconfig".  The default config file which is saved by USE="savedconfig" (which is not the same as the config.mk file) has preprocessor directives which disable statusbar-specific, mouse-specific, and/or command-fifo-specific sections of the default saved config file in the case that the applicable feature is disabled in config.mk.  (For instance, there is a preprocessor directive which removes the section of the default saved config file defining which commands may be invoked via the command fifo in the case that the command fifo is disabled via config.mk.)  However, I don't believe there is any way to enable or disable these features themselves via USE="savedconfig".

If I *am* missing something, I'd love to be corrected.

As for how popular these functions are, I couldn't really tell you.  I'm only one user of dvtm, not every user of dvtm.  However, the reasons why I use dvtm as my terminal multiplexor over tmux or screen are 1) it's much more minimal than either tmux or screen, 2) it's easier to script than either screen or tmux (though it can't be scripted at all if the command fifo is disabled), and 3) it can be made even more minimal by disabling at compile time features that you don't need.  If I can't selectively enable or disable these features at compile time, I suppose I still have the first of the three reasons to use it over screen and tmux, but it would drastically cripple the program compared to how I currently use it.

I currently use the modified ebuild which is attached to this thread in a local overlay on all of the machines I administrate.  I also use USE="savedconfig" and see no way to enable or disable these features via the saved config file.  I personally disable the status bar and mouse interaction use flags on this modified ebuild (because I don't have a use for either, so to me they're just bloat) and enable the command fifo use flag for scripting.  This is exactly the opposite of how the ebuild currently in the official portage tree configures dvtm.  It installs dvtm with the command fifo disabled, and both the status bar and the mouse interaction enabled.  The status bar and mouse functionality can probably reasonably be left enabled and just not used by those who have no use for it, but, using the current official portage tree ebuild, there is no way to enable the command fifo functionality in dvtm.  (Again, unless I'm missing something.)

If this change to the ebuild doesn't make it into the official portage tree (probably for dvtm-0.7, since it's the latest version) I'll continue using my modified ebuild in my local overlay for the forseeable future.  Obviously, I'd prefer this change get into the official portage tree.  It would make system configuration for my boxes a bit simpler.  But I can live with it as it is.

One possible compromise for those interested in using the command fifo would be to modify the current official portage tree ebuild to *always* enable the command fifo in config.mk and leave the other two options enabled.  Users who don't need one or more of these options could simply refrain from using them.  Users interested in using the command fifo would then have the option of using the command fifo, which they currently do not without a custom ebuild such as the one attached to this thread.  This would result in some "bloat" for users who don't need one or more of these features, but that is what would make it a compromise.

Thanks for reviewing this.  If I can do anything else to help with this bug, please let me know.

And, a happy new year to you.  :)




Comment 4


Richard Anderson





          2012-01-05 21:04:18 UTC
        

Please disregard my last post.  It appears that dvtm-0.7 works differently than dvtm-0.6.  In dvtm-0.6, there was no way to enable/disable those features in the default config.  In dvtm-0.7, it appears that the command fifo is enabled and cannot be disabled (but is not included in the dvtm man page which is probably an issue for upstream), the status fifo is enabled and cannot be disabled, and the mouse functionality can be disabled in the saved config file (with USE="savedconfig").

I believe it would make the most sense at this point to close this ticket.

Sorry for the confusion with my last post in this ticket.  I should have investigated dvtm-0.7 further before writing that.

Thanks for taking the time to review this bug.




Comment 5


Chí-Thanh Christopher Nguyễn






          2012-01-05 22:43:42 UTC
        

(In reply to comment #4)
> Thanks for taking the time to review this bug.
Well it took me quite some time ;)

I'll mark this bug as RESOLVED, feel free to reopen or report a new one when savedconfig does not do what you want.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

