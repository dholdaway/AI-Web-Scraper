Title: 187328 – net-misc/dhcpcd-3.1.x wrong MAC address reported
URL: https://bugs.gentoo.org/show_bug.cgi?id=187328

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 187328
net-misc/dhcpcd-3.1.x wrong MAC address reported
Last modified: 2007-08-14 09:38:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 187328 
      - net-misc/dhcpcd-3.1.x wrong MAC address reported


Summary:
net-misc/dhcpcd-3.1.x wrong MAC address reported
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Roy Marples (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-01 06:46 UTC by Rickard Närström





      Modified:
    
2007-08-14 09:38 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



robbat2









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rickard Närström





          2007-08-01 06:46:19 UTC
        

When using dhcpcd-3.1 (at least 3.1.2 and 3.1.3 is affected, 3.0.x is unaffected) wrong MAC address is reported to dhcp server.

The MAC address the dhcp server tells me I'm using  is "65746830000100010E411C9400110941" -- which is not even a valid MAC address (it is too long).

dhcp server is D-Link DI-624+ firmware 2.09

This problem makes static dhcp fail, and I get a IP in the pool not reserved for any host, which in tern makes port forwarding fail as it forwards ports to the wrong IP.

----
paludis 0.24.5

Built by paludisbuild@workstation on 2007-07-29T20:30:49+0200
CXX:         x86_64-pc-linux-gnu-g++ 4.2.0 (Gentoo 4.2.0 p1.4)
CXXFLAGS:    -O2 -fomit-frame-pointer -march=k8 -pipe
LDFLAGS:     -Wl,-O1 -Wl,--as-needed
DATADIR:     /usr/share
LIBDIR:      /usr/lib64
LIBEXECDIR:  /usr/libexec
SYSCONFDIR:  /etc
stdlib:      GNU libstdc++ 20070514
libebt:      1.3.0
libwrapiter: 1.2.0
sandbox:     enabled

Repository virtuals:
    Configuration information:
        format:                virtuals

Repository installed_virtuals:
    Configuration information:
        format:                installed_virtuals

Repository gentoo:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /var/paludis/repositories/gentoo/metadata/cache
        distdir:               /var/paludis/distfiles
        eclassdirs:            /var/paludis/repositories/gentoo/eclass
        format:                ebuild
        location:              /var/paludis/repositories/gentoo
        names_cache:           /var/paludis/repositories/gentoo/.cache/names
        newsdir:               /var/paludis/repositories/gentoo/metadata/news
        pkgdir:                /var/paludis/repositories/gentoo/packages
        profiles:              /var/paludis/repositories/gentoo/profiles/default-linux/amd64/2007.0/desktop
        securitydir:           /var/paludis/repositories/gentoo/metadata/glsa
        setsdir:               /var/paludis/repositories/gentoo/sets
        sync:                  rsync://rsync.europe.gentoo.org/gentoo-portage/
        sync_options:
        write_cache:           /var/empty

    Package information:
        app-admin/eselect-compiler: (none)
        dev-java/java-config:  1.3.7, 2.0.33-r1
        dev-lang/python:       2.4.4-r4
        dev-python/pycrypto:   2.0.1-r6
        dev-util/ccache:       (none)
        dev-util/confcache:    (none)
        sys-apps/sandbox:      1.2.18.1
        sys-devel/autoconf:    2.13, 2.61-r1
        sys-devel/automake:    1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
        sys-devel/binutils:    2.17-r1
        sys-devel/gcc-config:  1.3.16
        sys-devel/libtool:     1.5.24
        virtual/os-headers:    2.6.22-r2

    Variable information:
        ACCEPT_KEYWORDS:
        AUTOCLEAN:
        CBUILD:                x86_64-pc-linux-gnu
        CFLAGS:                -Os -fomit-frame-pointer -march=k8 -pipe
        CHOST:                 x86_64-pc-linux-gnu
        CONFIG_PROTECT:
        CONFIG_PROTECT_MASK:
        CTARGET:
        CXXFLAGS:              -Os -fomit-frame-pointer -march=k8 -pipe
        DISTDIR:               /var/paludis/distfiles
        FEATURES:
        GENTOO_MIRRORS:
        INSTALL_MASK:
        LANG:
        LC_ALL:                C
        LDFLAGS:               -Wl,-O1 -Wl,--as-needed
        LINGUAS:
        MAKEOPTS:
        PKGDIR:
        PORTAGE_COMPRESS:
        PORTAGE_COMPRESS_FLAGS:
        PORTAGE_RSYNC_EXTRA_OPTS:
        PORTAGE_RSYNC_OPTS:
        PORTAGE_TMPDIR:        /var/tmp/paludis
        PORTDIR:               /var/paludis/repositories/gentoo
        PORTDIR_OVERLAY:
        SYNC:
        USE:

Repository installed:
    Configuration information:
        buildroot:             /var/tmp/paludis
        format:                vdb
        location:              /var/db/pkg
        names_cache:           /var/db/pkg/.cache/names
        provides_cache:        /var/db/pkg/.cache/provides
        root:                  /
        world:                 /var/db/pkg/world

Repository ricce_n-local:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /var/empty
        distdir:               /var/paludis/distfiles
        eclassdirs:            /var/paludis/repositories/gentoo/eclass /var/paludis/repositories/local/eclass
        format:                ebuild
        location:              /var/paludis/repositories/local
        master_repository:     gentoo
        names_cache:           /var/empty
        newsdir:               /var/paludis/repositories/local/metadata/news
        pkgdir:                /var/paludis/repositories/gentoo/packages
        profiles:              /var/paludis/repositories/gentoo/profiles/default-linux/amd64/2007.0/desktop
        securitydir:           /var/paludis/repositories/local/metadata/glsa
        setsdir:               /var/paludis/repositories/local/sets
        sync:
        sync_options:
        write_cache:           /var/empty
----




Comment 1


Roy Marples (RETIRED)






          2007-08-01 08:44:08 UTC
        

dhcpcd-3.1 uses Node-specific Client Identifiers
http://www.rfc-archive.org/getrfc.php?rfc=4361




Comment 2


Robin Johnson









          2007-08-14 08:52:48 UTC
        

This breaks stuff for me as well.

My DHCP server provides only 6 octets for the hw address, and as such does not match the newer identifiers. Could you at least provide an option to NOT send the longer identifiers that are painful with older servers?




Comment 3


Roy Marples (RETIRED)






          2007-08-14 09:38:34 UTC
        

Update the server to a RFC compliant one then.

In the meantime, you can use -I ''










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

