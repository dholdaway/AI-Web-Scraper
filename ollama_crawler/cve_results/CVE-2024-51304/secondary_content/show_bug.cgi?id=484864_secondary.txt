Title: 484864 – sys-libs/gdbm : does not respect AR
URL: https://bugs.gentoo.org/show_bug.cgi?id=484864

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 484864
sys-libs/gdbm : does not respect AR
Last modified: 2014-05-06 13:06:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 484864 
      - sys-libs/gdbm : does not respect AR


Summary:
sys-libs/gdbm : does not respect AR
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       QA
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




tc-directly



 

        Show dependency tree





 





      Reported:
    
2013-09-14 07:51 UTC by Agostino Sarubbo





      Modified:
    
2014-05-06 13:06 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




sys-libs:gdbm-1.11:20140506-130311.log

              (sys-libs:gdbm-1.11:20140506-130311.log,69.32 KB,
                text/plain)

            
2014-05-06 13:05 UTC,

            Tony Vroon (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Agostino Sarubbo






          2013-09-14 07:51:23 UTC
        

You receive this bug because this package does not respect my system's AR (x86_64-pc-linux-gnu-ar) and calls directly /usr/bin/ar
The possible solutions to fix this issue are:
1)Fix the buildsystem, if you can;
2)inherit toolchain-funcs and use tc-export AR
3)inherit toolchain-funcs and use emake AR="$(tc-getAR)"


From the build log:

ar cru .libs/libgdbm.a  gdbmopen.o gdbmdelete.o gdbmfetch.o gdbmstore.o gdbmclose.o gdbmreorg.o gdbmseq.o gdbmsync.o gdbmerrno.o gdbmexists.o gdbmfdesc.o gdbmsetopt.o 
bucket.o falloc.o findkey.o global.o hash.o update.o version.o




Comment 1


Tony Vroon (RETIRED)






          2014-05-06 13:05:41 UTC
        

Created attachment 376478 [details]
sys-libs:gdbm-1.11:20140506-130311.log

This is not the case for me on:
[ebuild   R    ] sys-libs/gdbm-1.11  USE="berkdb nls static-libs -exporter" ABI_X86="(64) -32 (-x32)" 0 kB

Portage 2.2.10 (default/linux/amd64/13.0/developer, gcc-4.8.2, glibc-2.19, 3.15.0-rc3-00121-gb7270cc x86_64)
=================================================================
System uname: Linux-3.15.0-rc3-00121-gb7270cc-x86_64-Intel-R-_Core-TM-_i7-4702MQ_CPU_@_2.20GHz-with-gentoo-2.2
KiB Mem:    16292628 total,   8832496 free
KiB Swap:          0 total,         0 free
Timestamp of tree: Tue, 06 May 2014 12:00:01 +0000
ld GNU ld (GNU Binutils) 2.24
app-shells/bash:          4.2_p47
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.6-r1
dev-util/cmake:           2.8.12.2
dev-util/pkgconfig:       0.28-r1
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.9.6-r3, 1.11.6, 1.12.6, 1.13.4, 1.14.1
sys-devel/binutils:       2.24-r2
sys-devel/gcc:            4.5.4, 4.6.3, 4.7.3-r1, 4.8.2
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           4.0-r1
sys-kernel/linux-headers: 3.14 (virtual/os-headers)
sys-libs/glibc:           2.19
Repositories: gentoo
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA dlj-1.1 sun-bcla-java-vm AdobeFlash-10.1 AdobeFlash-10.3 AdobeFlash-11.x skype-eula skype-4.0.0.7-copyright Oracle-BCLA-JavaSE google-chrome PUEL"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -march=native"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs collision-protect config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms sign splitdebug strict test-fail-continue unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://mirror.bytemark.co.uk/gentoo/ ftp://mirror.qubenet.net/mirror/gentoo"
LANG="en_GB.utf8"
LC_ALL="en_GB.UTF-8"
LDFLAGS="-Wl,-O1,--as-needed,--hash-style=gnu"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac aacplus aalib acl acpi alsa amd64 amr apng archive autoipd avahi avx bash-completion berkdb binfilter bluetooth branding bs2b bzip2 cairo caps cdda cdparanoia cdr cli consolekit cracklib crypt cups curl cxx dbus device-mapper dhcp dhcpcd dirac djvu dri dts dvd dvdr dvi egl emboss encode evo exif extras faac fat fbcon ffmpeg fftw firefox fits flac flite fontconfig fortran fpx freerdp ftdi fuse g3dvl gbm gcj gcrypt gd gdbm geoloc gif gimp gjs gles gnome-keyring gnutls google gpg gphoto2 gpm graphite graphviz gs gsm gstreamer gtk gtk3 health hwdb iconv icu idn introspection iphone iproute2 ipv6 javascript jbig jce jemalloc jpeg jpeg2k lame lcms ldap libass libcaca libcanberra libkms libnl libnotify libsamplerate libssh2 llvm llvm-gcc lto lzma lzo mad map mbim md5sum minizip mmx mmxext mng modemmanager modplug modules mp3 mp4 mpeg mpg123 mudflap multilib natspec ncat ncurses ndiff network network-cron networkmanager nls nping nptl nsplugin ntp odf ofono ogg openconnect openexr opengl openmp openvpn opus osmesa pam pango pcre pdf pkcs11 png pnm policykit ppds pth pulseaudio qt-static qt3support raw rdp readline realtime rle rtmp samba schroedinger sdl secure-delete session smartcard smime smp sna sndfile snmp speex spell sse sse2 ssh ssl ssse3 startup-notification svg t1lib theora threads thumbnail thunar tiff timezone truetype udev udisks unicode upnp upower urandom usb v4l v4l2 vala vorbis vpx vte wavpack webkit winbind wmf wps wxwidgets x264 xcb xfce xinerama xml xmp xpm xps xrandr xv xvfb xvid xvmc zeroconf zlib" ABI_X86="64" ALSA_CARDS="hda-intel" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="canon ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" RUBY_TARGETS="ruby20" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 2


Tony Vroon (RETIRED)






          2014-05-06 13:06:26 UTC
        

This appears to have been addressed upstream. As no package version or build log is attached, I can go no further then to say "no fault found" for version 1.11.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

