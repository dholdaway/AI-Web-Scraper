Title: 814287 – dev-lang/perl-5.34.0-r2: 'undef' undeclared here (not a function)
URL: https://bugs.gentoo.org/show_bug.cgi?id=814287

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 814287
dev-lang/perl-5.34.0-r2: 'undef' undeclared here (not a function)
Last modified: 2021-09-22 02:51:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 814287 
      - dev-lang/perl-5.34.0-r2: 'undef' undeclared here (not a function)


Summary:
dev-lang/perl-5.34.0-r2: 'undef' undeclared here (not a function)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-09-22 01:38 UTC by mChaotix





      Modified:
    
2021-09-22 02:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge build.log

              (build.log.xz,10.39 KB,
                application/x-xz)

            
2021-09-22 01:38 UTC,

            mChaotix




Details





emerge --info output

              (info.txt,15.03 KB,
                text/plain)

            
2021-09-22 01:38 UTC,

            mChaotix




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


mChaotix





          2021-09-22 01:38:01 UTC
        

Created attachment 740628 [details]
emerge build.log

I'm trying install git to change my `emerge --sync` method from rsync to git, when I emerge git and compiling dependencies perl, I got compilation error: 'undef' undeclared here (not a function) in file config.h at position 3822:25




Comment 1


mChaotix





          2021-09-22 01:38:46 UTC
        

Created attachment 740631 [details]
emerge --info output




Comment 2


Sam James









          2021-09-22 02:02:47 UTC
        

1. Please try with -O2 instead of -O3.

2. Please run perl-cleaner --all and depclean:

> * This version of perl may partially support modules previously
> * installed in any of the following paths:
> *  /usr/lib64/perl5/vendor_perl/5.32/
> *  /usr/lib64/perl5/5.32/
> * This is a temporary measure and you should aim to cleanup these paths
> * via world updates and perl-cleaner

3. What on earth is going on here!?

>gconvert NOT found.
>gcvt() found.
>Configure: line 10426:  2019 Illegal instruction     $run ./try
>sprintf() found.
>Configure: line 10426:  2026 Illegal instruction     $run ./try
>*** WHOA THERE!!! ***
>None of ( gconvert gcvt sprintf)  seemed to work properly.  I'll use sprintf.

There's a bunch more of these.

Have you changed CPUs or systems recently with the same install? Is your CPU definitely znver2-compatible?




Comment 3


mChaotix





          2021-09-22 02:24:21 UTC
        

(In reply to Sam James from comment #2)
> 1. Please try with -O2 instead of -O3.
> 

I'll try it later

> 2. Please run perl-cleaner --all and depclean:
> 
> > * This version of perl may partially support modules previously
> > * installed in any of the following paths:
> > *  /usr/lib64/perl5/vendor_perl/5.32/
> > *  /usr/lib64/perl5/5.32/
> > * This is a temporary measure and you should aim to cleanup these paths
> > * via world updates and perl-cleaner
> 
> 3. What on earth is going on here!?
> 
> >gconvert NOT found.
> >gcvt() found.
> >Configure: line 10426:  2019 Illegal instruction     $run ./try
> >sprintf() found.
> >Configure: line 10426:  2026 Illegal instruction     $run ./try
> >*** WHOA THERE!!! ***
> >None of ( gconvert gcvt sprintf)  seemed to work properly.  I'll use sprintf.
> 
> There's a bunch more of these.
> 
> Have you changed CPUs or systems recently with the same install? Is your CPU
> definitely znver2-compatible?
Not, 
(In reply to Sam James from comment #2)
> 1. Please try with -O2 instead of -O3.
> 
> 2. Please run perl-cleaner --all and depclean:
> 
> > * This version of perl may partially support modules previously
> > * installed in any of the following paths:
> > *  /usr/lib64/perl5/vendor_perl/5.32/
> > *  /usr/lib64/perl5/5.32/
> > * This is a temporary measure and you should aim to cleanup these paths
> > * via world updates and perl-cleaner
> 

I'll try it later

> 3. What on earth is going on here!?
> 
> >gconvert NOT found.
> >gcvt() found.
> >Configure: line 10426:  2019 Illegal instruction     $run ./try
> >sprintf() found.
> >Configure: line 10426:  2026 Illegal instruction     $run ./try
> >*** WHOA THERE!!! ***
> >None of ( gconvert gcvt sprintf)  seemed to work properly.  I'll use sprintf.
> 
> There's a bunch more of these.
> 
> Have you changed CPUs or systems recently with the same install? Is your CPU
> definitely znver2-compatible?
Not, But I definitely sure my CPU is znver2-compatible




Comment 4


mChaotix





          2021-09-22 02:41:05 UTC
        

I just modified my COMMON_FLAGS -march to native, and optimize-level to 2, everything is back to normal, thanks your help, sam




Comment 5


Sam James









          2021-09-22 02:46:30 UTC
        

(In reply to mChaotix from comment #4)
> I just modified my COMMON_FLAGS -march to native, and optimize-level to 2,
> everything is back to normal, thanks your help, sam

No problem! Glad you're sorted :)




Comment 6


Sam James









          2021-09-22 02:46:53 UTC
        

(In reply to Sam James from comment #5)
> (In reply to mChaotix from comment #4)
> > I just modified my COMMON_FLAGS -march to native, and optimize-level to 2,
> > everything is back to normal, thanks your help, sam
> 
> No problem! Glad you're sorted :)

Oh, you might want to rebuild everything on your system: emerge -aev @world, given other programs could be broken which you don't know about yet.




Comment 7


mChaotix





          2021-09-22 02:51:39 UTC
        

(In reply to Sam James from comment #6)
> (In reply to Sam James from comment #5)
> > (In reply to mChaotix from comment #4)
> > > I just modified my COMMON_FLAGS -march to native, and optimize-level to 2,
> > > everything is back to normal, thanks your help, sam
> > 
> > No problem! Glad you're sorted :)
> 
> Oh, you might want to rebuild everything on your system: emerge -aev @world,
> given other programs could be broken which you don't know about yet.

OK, I'll do that, thanks for your help again. :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

