Title: 164038 – kde-base/libkcal-3.5.6: tests fail
URL: https://bugs.gentoo.org/show_bug.cgi?id=164038

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 164038
kde-base/libkcal-3.5.6: tests fail
Last modified: 2007-04-11 23:56:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 164038 
      - kde-base/libkcal-3.5.6: tests fail


Summary:
kde-base/libkcal-3.5.6: tests fail
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-27 11:21 UTC by Miroslav Šulc





      Modified:
    
2007-04-11 23:56 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



Happy.Cerberus









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,11.26 KB,
                text/plain)

            
2007-01-27 11:22 UTC,

            Miroslav Šulc




Details





working system

              (emerge.info,3.19 KB,
                text/plain)

            
2007-02-22 17:03 UTC,

            Simon Siemonsma




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Miroslav Šulc






          2007-01-27 11:21:55 UTC
        

...
i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../.. -I../../libkcal -I../.. -I../../libkdepim -I/usr/kde/3.5/include -I/usr/qt/3/include -I.   -DQT_THREAD_SUPPORT  -D_REENTRANT -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES=1  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -O2 -march=pentium4m -pipe -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION  -c -o testrecurrencetype.o testrecurrencetype.cpp
/bin/sh ../../libtool --silent --tag=CXX --mode=link i686-pc-linux-gnu-g++  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -O2 -march=pentium4m -pipe -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION    -o testrecurrencetype -L/usr/kde/3.5/lib -L/usr/qt/3/lib -L/usr/lib    -R /usr/kde/3.5/lib -R /usr/kde/3.5/lib -R /usr/qt/3/lib -R /usr/lib testrecurrencetype.o ../libkcal.la
i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../.. -I../../libkcal -I../.. -I../../libkdepim -I/usr/kde/3.5/include -I/usr/qt/3/include -I.   -DQT_THREAD_SUPPORT  -D_REENTRANT -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES=1  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -O2 -march=pentium4m -pipe -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION  -c -o testvcalexport.o testvcalexport.cpp
/bin/sh ../../libtool --silent --tag=CXX --mode=link i686-pc-linux-gnu-g++  -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -DNDEBUG -DNO_DEBUG -O2 -O2 -march=pentium4m -pipe -Wformat-security -Wmissing-format-attribute -Wno-non-virtual-dtor -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION    -o testvcalexport -L/usr/kde/3.5/lib -L/usr/qt/3/lib -L/usr/lib    -R /usr/kde/3.5/lib -R /usr/kde/3.5/lib -R /usr/qt/3/lib -R /usr/lib testvcalexport.o ../libkcal.la
make[3]: Leaving directory `/var/tmp/portage/kde-base/libkcal-3.5.6/work/libkcal-3.5.6/libkcal/tests'
make  check-local
make[3]: Entering directory `/var/tmp/portage/kde-base/libkcal-3.5.6/work/libkcal-3.5.6/libkcal/tests'
rm -f FAILED; \
        for i in `find ./data/RecurrenceRule/ -name "*.ics"`; do \
          perl ./runtestcase.pl testrecurrence "next" $i; \
        done; \
        for i in `find ./data/RecurrenceRule/ -name "*.ics"`; do \
          perl ./runtestcase.pl testrecurprevious "prev" $i; \
        done; \
        for i in `find ./data/RecurrenceRule/ -name "*.ics"`; do \
          perl ./runtestcase.pl testrecurson "recurson" $i; \
        done; \
        for i in `find ./data/Compat/ -name "*.ics"`; do \
          perl ./runtestcase.pl readandwrite "ical" $i; \
        done; \
        for i in `find ./data/vCalendar/ -name "*.ics"`; do \
                perl ./runtestcase.pl testvcalexport "vcal" $i; \
        done;
Checking './data/Compat/KOrganizer_3.1.ics.ical.out':
  Line 29: Expected      : RRULE:FREQ=MONTHLY;UNTIL=20050101;BYMONTHDAY=11
  Line 29: Actual output : RRULE:FREQ=MONTHLY;UNTIL=20050101T000000Z;BYMONTHDAY=11
  Line 111: Expected      : RRULE:FREQ=DAILY;UNTIL=20031210
  Line 111: Actual output : RRULE:FREQ=DAILY;UNTIL=20031210T000000Z

  FAILED: 2 errors found.
for i in `find ./data/vCalendar/ -name "*.vcs"`; do \
                perl ./runtestcase.pl readandwrite "ical" $i; \
        done;
[ ! -e FAILED ]
make[3]: *** [check-local] Error 1
make[3]: Leaving directory `/var/tmp/portage/kde-base/libkcal-3.5.6/work/libkcal-3.5.6/libkcal/tests'
make[2]: *** [check-am] Error 2
make[2]: Leaving directory `/var/tmp/portage/kde-base/libkcal-3.5.6/work/libkcal-3.5.6/libkcal/tests'
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kde-base/libkcal-3.5.6/work/libkcal-3.5.6/libkcal'
make: *** [check-recursive] Error 1

!!! ERROR: kde-base/libkcal-3.5.6 failed.
Call stack:
  ebuild.sh, line 1611:   Called dyn_test
  ebuild.sh, line 1023:   Called qa_call 'src_test'
  environment, line 4928:   Called src_test
  ebuild.sh, line 650:   Called die

!!! Make check failed. See above for details.
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/tmp/portage/kde-base/libkcal-3.5.6/temp/build.log'.

KWrited - Listening on Device /dev/ttyp0




Comment 1


Miroslav Šulc






          2007-01-27 11:22:45 UTC
        

Created attachment 108271 [details]
emerge --info

emerge --info




Comment 2


Simon Toth





          2007-02-09 04:15:52 UTC
        

Same problem here (using paludis)

My paludis --info:

paludis 1.18.0

Built by root@localhost on 2007-02-08T02:16:12+0100
CXX:         /usr/lib/ccache/bin/g++ 4.1.1 (Gentoo 4.1.1-r3)
CXXFLAGS:    -O3 -march=pentium4m -pipe
LDFLAGS:     
DATADIR:     /usr/share
LIBDIR:      /usr/lib
LIBEXECDIR:  /usr/libexec
SYSCONFDIR:  /etc
stdlib:      GNU libstdc++ 20060524
libebt:      1.3.0
libwrapiter: 1.0.0
sandbox:     enabled

Repository virtuals:
    Configuration information:
        format:                virtuals

Repository installed_virtuals:
    Configuration information:
        format:                installed_virtuals

Repository gentoo:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /usr/portage/metadata/cache
        distdir:               /usr/portage/distfiles
        eclassdirs:            /usr/portage/eclass
        format:                ebuild
        location:              /usr/portage
        names_cache:           /var/empty
        newsdir:               /usr/portage/metadata/news
        pkgdir:                /var/empty
        profiles:              /usr/portage/profiles/default-linux/x86/2006.0
        root:                  /
        securitydir:           /usr/portage/metadata/glsa
        setsdir:               /usr/portage/sets
        sync:                  rsync://rsync.gentoo.org/gentoo-portage
        sync_options:          
        write_cache:           /var/empty

    Package information:
        app-admin/eselect-compiler: (none)
        dev-java/java-config:  1.3.7, 2.0.31-r3
        dev-lang/python:       2.4.4
        dev-python/pycrypto:   2.0.1-r5
        dev-util/ccache:       2.4-r6
        dev-util/confcache:    (none)
        sys-apps/sandbox:      1.2.18.1
        sys-devel/autoconf:    2.13, 2.61
        sys-devel/automake:    1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
        sys-devel/binutils:    2.17
        sys-devel/gcc-config:  1.3.14
        sys-devel/libtool:     1.5.22
        virtual/os-headers:    2.6.20

    Variable information:
        ACCEPT_KEYWORDS:       
        AUTOCLEAN:             
        CBUILD:                i686-pc-linux-gnu
        CFLAGS:                -O3 -march=pentium4m -pipe
        CHOST:                 i686-pc-linux-gnu
        CONFIG_PROTECT:        /usr/share/X11/xkb /usr/kde/3.5/share/config /usr/kde/3.5/env /usr/kde/3.5/shutdown /usr/share/config /usr/NX/etc /usr/NX/home /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/xdvi/
        CONFIG_PROTECT_MASK:   /etc/java-config/vms/ /etc/env.d/java/ /etc/gconf /etc/terminfo /etc/revdep-rebuild /etc/splash
        CTARGET:               
        CXXFLAGS:              -O3 -march=pentium4m -pipe
        DISTDIR:               /usr/portage/distfiles
        FEATURES:              
        GENTOO_MIRRORS:        
        INSTALL_MASK:          
        LANG:                  
        LC_ALL:                
        LDFLAGS:               
        LINGUAS:               
        MAKEOPTS:              -j2
        PKGDIR:                
        PORTAGE_RSYNC_EXTRA_OPTS: 
        PORTAGE_RSYNC_OPTS:    
        PORTAGE_TMPDIR:        /var/tmp/paludis
        PORTDIR:               /usr/portage
        PORTDIR_OVERLAY:       
        SYNC:                  
        USE:                   

Repository installed:
    Configuration information:
        buildroot:             /var/tmp/paludis
        format:                vdb
        location:              /var/db/pkg
        names_cache:           /var/empty
        provides_cache:        /var/empty
        root:                  /
        world:                 /var/db/pkg/world

Repository paludis-extras:
    Configuration information:
        buildroot:             /var/tmp/paludis
        cache:                 /var/empty
        distdir:               /usr/portage/distfiles
        eclassdirs:            /usr/portage/eclass
        format:                ebuild
        location:              /usr/local/overlays/paludis-extras
        names_cache:           /var/empty
        newsdir:               /usr/local/overlays/paludis-extras/metadata/news
        pkgdir:                /var/empty
        profiles:              /usr/portage/profiles/default-linux/x86/2006.0
        root:                  /
        securitydir:           /usr/local/overlays/paludis-extras/metadata/glsa
        setsdir:               /usr/local/overlays/paludis-extras/sets
        sync:                  rsync://drzile.dyndns.org/paludis-extras
        sync_options:          
        write_cache:           /var/empty




Comment 3


Simon Siemonsma





          2007-02-22 16:33:21 UTC
        

I'm not able to reproduce the reported bug on an AMD64 system with:
-no use of overlays
-~amd64 used for just a few packages like kde (the default is amd64)
-using split kde-ebuild.
-conservatively configured CFLAGS, FEATURES etc.

Simon Siemonsma




Comment 4


Simon Siemonsma





          2007-02-22 17:03:08 UTC
        

Created attachment 110993 [details]
working system

I attach the emerge --info from a working system.
You can have a detailed look at the differences.
To me a few things stood out immeditately:
-you use 2006.0
-you use an old gcc and glibc.
-further you use an bleeding edge system.

Can you confirm it the problem disappears or stays after upgrading to the newest versions and after upgrading gcc glibc and a recompile of your system.

See also http://www.gentoo.org/doc/en/gcc-upgrading.xml

Simon Siemonsma




Comment 5


Carsten Lohrke (RETIRED)






          2007-04-11 23:56:11 UTC
        

Upstream tests are crappy, disabled them in -r1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

