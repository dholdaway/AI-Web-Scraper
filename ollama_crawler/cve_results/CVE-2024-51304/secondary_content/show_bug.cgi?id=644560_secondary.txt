Title: 644560 – kde-apps/ktp-call-ui-17.12.1 fails to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=644560

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 644560
kde-apps/ktp-call-ui-17.12.1 fails to emerge
Last modified: 2019-01-25 00:12:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 644560 
      - kde-apps/ktp-call-ui-17.12.1 fails to emerge


Summary:
kde-apps/ktp-call-ui-17.12.1 fails to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-01-14 15:41 UTC by Fabio Coatti





      Modified:
    
2019-01-25 00:12 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



dschridde+gentoobugs
endymion+gentoo
nrndda









See Also:


644538





Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,172.51 KB,
                text/x-log)

            
2018-01-14 16:27 UTC,

            Fabio Coatti




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fabio Coatti





          2018-01-14 15:41:29 UTC
        

Trying to emerge ktp-call-ui I get this issue:
1/src/ktp_call_ui_debug.cpp
make[2]: *** No rule to make target '/usr/lib/libtelepathy-farstream.so', needed by 'src/ktp-call-ui'.  Stop.
make[2]: *** Waiting for unfinished jobs....

And so the compilation does not end properly:
cd /var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/src && /usr/bin/x86_64-pc-linux-gnu-g++ -DKCOREADDONS_LIB -DQT_CORE_LIB -DQT_DBUS_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_NO_DEBUG -DQT_NO_KEYWORDS -DQT_QML_LIB -DQT_QUICK_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/src -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1/src -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/src/ktp-call-ui_autogen/include -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/libktpcall -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1/libktpcall -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/libqtf -I/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1/libqtf -I/usr/include/Qt5GStreamer -isystem /usr/include/qt5 -isystem /usr/include/qt5/QtCore -isystem /usr/lib64/qt5/mkspecs/linux-g++ -isystem /usr/include/qt5/QtQuick -isystem /usr/include/qt5/QtQml -isystem /usr/include/qt5/QtNetwork -isystem /usr/include/qt5/QtGui -isystem /usr/include/telepathy-qt5 -isystem /usr/include/KF5/KWallet -isystem /usr/include/KF5 -isystem /usr/include/qt5/QtDBus -isystem /usr/include/qt5/QtXml -isystem /usr/include/KF5/KDeclarative -isystem /usr/include/KF5/KConfigCore -isystem /usr/include/KF5/KPackage -isystem /usr/include/KF5/KCoreAddons -isystem /usr/include/KF5/KI18n -isystem /usr/include/KF5/KIconThemes -isystem /usr/include/qt5/QtWidgets -isystem /usr/include/KF5/KNotifications -isystem /usr/include/KF5/KXmlGui -isystem /usr/include/KF5/KConfigWidgets -isystem /usr/include/KF5/KCodecs -isystem /usr/include/KF5/KWidgetsAddons -isystem /usr/include/KF5/KConfigGui -isystem /usr/include/KF5/KAuth   -DQT_NO_DEBUG -DNDEBUG -O2 -fpie -fpic -pipe -march=native -fstack-protector-strong -flto=4 -fuse-linker-plugin -std=c++0x -fno-operator-names -Wall -Wextra -Wcast-align -Wchar-subscripts -Wformat-security -Wno-long-long -Wpointer-arith -Wundef -Wnon-virtual-dtor -Woverloaded-virtual -Werror=return-type -Wvla -Wdate-time -fexceptions -std=c++0x -fvisibility=hidden -fvisibility-inlines-hidden   -fPIC -std=gnu++11 -o CMakeFiles/ktp-call-ui.dir/ktp-call-ui_autogen/mocs_compilation.cpp.o -c /var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build/src/ktp-call-ui_autogen/mocs_compilation.cpp
make[2]: Leaving directory '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build'
make[1]: *** [CMakeFiles/Makefile2:528: src/CMakeFiles/ktp-call-ui.dir/all] Error 2
make[1]: Leaving directory '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build'
make: *** [Makefile:141: all] Error 2
 * ERROR: kde-apps/ktp-call-ui-17.12.1::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=kde-apps/ktp-call-ui-17.12.1::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=kde-apps/ktp-call-ui-17.12.1::gentoo'`.
 * The complete build log is located at '/var/log/portage/kde-apps:ktp-call-ui-17.12.1:20180114-153512.log'.
 * For convenience, a symlink to the build log is located at '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/temp/environment'.
 * Working directory: '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1_build'
 * S: '/var/tmp/portage/kde-apps/ktp-call-ui-17.12.1/work/ktp-call-ui-17.12.1'




Reproducible: Always




Portage 2.3.19 (python 3.4.6-final-0, default/linux/amd64/17.1/desktop/plasma/systemd, gcc-7.2.0, glibc-2.26-r5, 4.14.13-cova x86_64)
=================================================================
System uname: Linux-4.14.13-cova-x86_64-Intel-R-_Core-TM-_i7-6820HQ_CPU_@_2.70GHz-with-gentoo-2.4.1
KiB Mem:    65293336 total,  57178192 free
KiB Swap:    8388604 total,   8388604 free
Timestamp of repository gentoo: Sun, 14 Jan 2018 15:00:01 +0000
Head commit of repository gentoo: 148460a9a171f6dab9e358b39d4db9daa024ff5d
sh bash 4.4_p12
ld GNU ld (Gentoo 2.29.1 p2) 2.29.1
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.26.1-r1::gentoo
dev-lang/python:          2.7.14-r1::gentoo, 3.4.6-r1::gentoo, 3.5.4-r1::gentoo, 3.6.4::gentoo
dev-util/cmake:           3.10.1::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.11::gentoo
sys-apps/sandbox:         2.12::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.11.6-r2::gentoo, 1.15.1-r1::gentoo
sys-devel/binutils:       2.29.1-r1::gentoo
sys-devel/gcc:            6.4.0::gentoo, 7.2.0-r1::gentoo
sys-devel/gcc-config:     1.9.1::gentoo
sys-devel/libtool:        2.4.6-r4::gentoo
sys-devel/make:           4.2.1-r1::gentoo
sys-kernel/linux-headers: 4.14::gentoo (virtual/os-headers)
sys-libs/glibc:           2.26-r5::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 

kde
    location: /var/lib/layman/kde
    sync-type: laymansync
    sync-uri: https://github.com/gentoo/kde.git
    masters: gentoo
    priority: 50

pypi
    location: /var/lib/layman/pypi
    sync-type: laymansync
    sync-uri: gs-pypi pypi
    masters: gentoo
    priority: 50

torbrowser
    location: /var/lib/layman/torbrowser
    sync-type: laymansync
    sync-uri: https://github.com/MeisterP/torbrowser-overlay.git
    masters: gentoo
    priority: 50

local
    location: /usr/overlay
    masters: gentoo
    priority: 51

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -fpie -fpic -pipe -march=native -fstack-protector-strong -flto=4 -fuse-linker-plugin"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/easy-rsa /usr/share/gnupg/qualified.txt /usr/share/sddm/scripts/Xsetup"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -fpie -fpic -pipe -march=native -fstack-protector-strong -flto=4 -fuse-linker-plugin"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs clean-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -O2 -fpie -fpic -pipe -march=native -fstack-protector-strong -flto=4 -fuse-linker-plugin"
LINGUAS="en it de"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow 3dnowext 3dnowprefetch X \ a52 aac aalib acl acpi activities aim alsa amd64 apng appstream ares asf ati audio audiofile avahi bash-completion berkdb bidi bl bluetooth branding bri bzip2 cairo caps cdda cdr cjk cli crypt cups curl cxx dba dbus declarative device-mapper dga divx divx4linux dri dts dv dvb dvd dvdr dvdread eap-sim edl egl emboss encode ethereal evdev exif expat faad fam fame fbcon ffmpeg fftw firefox flac force-cgi-redirect fortran ftp gallium garmin gd gdbm gif gimp glamor gmedia gmp gnutls gphoto2 gpm gps gsm gtk h264 h323 iconv icq icu idn ifp ilbc imagemagick imap innodb ipod iproute2 ipv6 ithreads jabber java javascript joystick jpeg kde kipi kontact kvm kwallet lastfm lcms ldap libnotify libvirtd live lm_sensors lua lvm lxc lzma lzo mad maildir matroska mbox mdnsresponder-compat mhash mime mjpeg mmap mmx mmxext mng modules mozdevelop mozilla mp3 mp4 mpeg msn mtp multilib mysql ncurses network networkmanager new-hpcups nfsv4 njb nls nptl nptlonly nsplugin offensive ofx ogg oggvorbis ogm openal openexr opengl openmp oscar pam pango parted pcap pcre pdf phonon php plasma plotutils png policykit ppds pulseaudio qemu qml qt3support qt5 readline real rtc ruby samba sasl sdl seccomp semantic-desktop semantic-destkop sha512 sip slang slp smartcard sndfile snmp sox speex spell srt sse sse2 ssh ssl ssse3 startup-notification svg symlink systemd tcltk tcpd telepathy theora threads tiff tk touchpad tremor truetype udev udisks unicode upower usb utempter v4l v4l2 vaapi vcd vde vdpaum vhosts video videos vim-syntax virt-network virtualbox vorbis vulkan wav wayland webkit widgets wifi wmf wmp wps wxwidgets wxwindows x264 xanim xattr xcb xcomposite xface xft xine xinerama xml xosd xpm xscreensaver xsl xv xvid zeroconf zlib zpm" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput" KERNEL="linux" L10N="en it de" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5" PYTHON_SINGLE_TARGET="python3_4" PYTHON_TARGETS="python2_7 python3_4 python3_5 python3_6" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby22 ruby23 ruby24 ruby25" USERLAND="GNU" VIDEO_CARDS="i965 intel nvidia v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Andreas Sturmlechner






          2018-01-14 15:47:15 UTC
        

Please attach full build.log




Comment 2


Fabio Coatti





          2018-01-14 16:25:38 UTC
        

Right, forgot it




Comment 3


Fabio Coatti





          2018-01-14 16:27:01 UTC
        

Created attachment 514788 [details]
build.log




Comment 4


Jeremy Stent





          2018-01-14 19:40:42 UTC
        

This also happened for me.  I am on the 17.1 profile (which seems to have gone missing), so the libtelepathy-farstream.so library is in /usr/lib64, not /usr/lib.  I do not know enough about where the build file looks up paths to correct this properly, but if I edit the "ktp-call-ui-17.12.1_build/src/CMakeFiles/ktp-call-ui.dir/build.make" file and change "lib" to "lib64" for that library, then I can finish the compile.




Comment 5


Andreas Sturmlechner






          2018-01-14 23:32:27 UTC
        

This seems to be 17.1 profile related indeed. Did you already rebuild net-libs/telepathy-farstream?

(In reply to Jeremy Stent from comment #4)
> I am on the 17.1 profile (which seems to have gone missing)
You would notice if it was really missing. It is just not visible anymore because too many users switched without reading the news, with fatal outcome.




Comment 6


Fabio Coatti





          2018-01-15 07:46:18 UTC
        

(In reply to Andreas Sturmlechner from comment #5)
> This seems to be 17.1 profile related indeed. Did you already rebuild
> net-libs/telepathy-farstream?
> 
> (In reply to Jeremy Stent from comment #4)
> > I am on the 17.1 profile (which seems to have gone missing)
> You would notice if it was really missing. It is just not visible anymore
> because too many users switched without reading the news, with fatal outcome.

I tried to rebuild farstream as first thing after reading Jeremy comment, but this didn't helped, at least in my case. I switched profile following the instructions in news and everithing else worked (at least so far :) ).
This seems to be the only issue that I've got.




Comment 7


Dennis Schridde





          2018-01-15 20:33:53 UTC
        

I also did the conversion by the book and am now in the same situation as the OP.




Comment 8


Joel Berendzen





          2018-02-07 16:33:52 UTC
        

(In reply to Dennis Schridde from comment #7)
> I also did the conversion by the book and am now in the same situation as
> the OP.

Same here.  Putting symlinks into /usr/lib for libtelepathy-farstream* and libtelepathy-glib* also lets the compile finish.




Comment 9


Fabio Coatti





          2018-03-09 09:55:42 UTC
        

Any news on this topic? Also ktp-call-ui-17.12.3 fails in the same way. Workarounds are ok, but shouldn't this managed in some sensible way?




Comment 10


Michael Palimaka (kensington)






          2018-03-10 02:08:20 UTC
        

(In reply to Fabio Coatti from comment #9)
> Any news on this topic? Also ktp-call-ui-17.12.3 fails in the same way.
> Workarounds are ok, but shouldn't this managed in some sensible way?

This is probably caused by bug #644538. AFAIK nobody in kde@ is testing these experimental 17.1 profiles yet.




Comment 11


Михаил





          2018-08-01 10:03:21 UTC
        

ktp-call-ui-17.12.3 fails.




Comment 12


Михаил





          2018-08-01 10:04:53 UTC
        

(In reply to Михаил from comment #11)
> ktp-call-ui-17.12.3 fails.

kde-apps/ktp-call-ui-18.04.3 fails too.




Comment 13


Andreas Sturmlechner






          2018-12-23 01:16:53 UTC
        

I can't actually reproduce this issue on my 17.1 profile testbox.




Comment 14


Andreas Sturmlechner






          2019-01-25 00:12:15 UTC
        

Please re-open if this is still happening for you on current ~arch.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

