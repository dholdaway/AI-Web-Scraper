Title: 551694 – app-admin/mongo-tools-3.0.3 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=551694

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 551694
app-admin/mongo-tools-3.0.3 fails to compile
Last modified: 2015-06-29 10:46:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 551694 
      - app-admin/mongo-tools-3.0.3 fails to compile


Summary:
app-admin/mongo-tools-3.0.3 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Ultrabug








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-06-10 18:22 UTC by Helmut Jarausch





      Modified:
    
2015-06-29 10:46 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



bugs
hydrapolic
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Helmut Jarausch





          2015-06-10 18:22:21 UTC
        

The package fails to compile with

 * Package:    app-admin/mongo-tools-3.0.3
 * Repository: gentoo
 * Maintainer: ultrabug@gentoo.org bugs@bergstroem.nu,proxy-maint@gentoo.org
 * USE:        abi_x86_64 amd64 elibc_glibc kernel_linux ssl userland_GNU
 * FEATURES:   preserve-libs sandbox splitdebug userpriv usersandbox
>>> cfg-update-1.8.2-r1: Checksum index is up-to-date ...
>>> Unpacking source...
>>> Unpacking mongo-tools-3.0.3.tar.gz to /var/tmp/portage/app-admin/mongo-tools-3.0.3/work
>>> Source unpacked in /var/tmp/portage/app-admin/mongo-tools-3.0.3/work
>>> Preparing source in /var/tmp/portage/app-admin/mongo-tools-3.0.3/work/mongo-tools-r3.0.3 ...
 * Applying mongo-tools-3.0.0-build.patch ...
 [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-admin/mongo-tools-3.0.3/work/mongo-tools-r3.0.3 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/app-admin/mongo-tools-3.0.3/work/mongo-tools-r3.0.3 ...
Building bsondump...
# github.com/spacemonkeygo/openssl
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:74:12: error: 'verify_cb' redeclared as different kind of symbol
 extern int verify_cb(int ok, X509_STORE_CTX* store);
            ^
/var/tmp/portage/app-admin/mongo-tools-3.0.3/temp/go-build182452962/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:9:13: note: previous declaration of 'verify_cb' was here
 extern char verify_cb[];
             ^
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:82:12: error: 'password_cb' redeclared as different kind of symbol
 extern int password_cb(char *buf, int size, int rwflag, void *password);
            ^
/var/tmp/portage/app-admin/mongo-tools-3.0.3/temp/go-build182452962/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:6:13: note: previous declaration of 'password_cb' was here
 extern char password_cb[];
             ^
>>> Source compiled.


emerge --info app-admin/mongo-tools
Portage 2.2.20 (python 3.4.3-final-0, default/linux/amd64/13.0/desktop, gcc-5.1.0, glibc-2.20-r2, 4.1.0-rc7 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.1.0-rc7-x86_64-AMD_Phenom-tm-_II_X4_940_Processor-with-gentoo-2.2
KiB Mem:     7906012 total,   1301084 free
KiB Swap:    2097148 total,   2023464 free
Timestamp of repository gentoo: Wed, 10 Jun 2015 06:45:01 +0000
sh bash 4.3_p39
ld GNU ld (Gentoo 2.25 p1.2) 2.25
ccache version 3.2.2 [disabled]
app-shells/bash:          4.3_p39::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2-r1::gentoo
dev-lang/python:          2.7.10::gentoo, 3.4.3::gentoo
dev-util/ccache:          3.2.2::gentoo
dev-util/cmake:           3.2.3::gentoo
dev-util/pkgconfig:       0.28-r3::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.16.4::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r1::gentoo
sys-devel/automake:       1.9.6-r4::gentoo, 1.10.3-r1::gentoo, 1.11.6-r1::gentoo, 1.12.6::gentoo, 1.13.4::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25-r1::gentoo
sys-devel/gcc:            4.8.4::gentoo, 4.9.2::gentoo, 5.1.0::local, 6.0.0_alpha20150419::toolchain
sys-devel/gcc-config:     1.8::gentoo
sys-devel/libtool:        2.4.6-r1::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.0::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync15.de.gentoo.org/gentoo-portage
    priority: -1000

local
    location: /usr/local/portage
    masters: gentoo
    priority: 0

java
    location: /usr/local/portage/layman/java
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/java.git
    masters: gentoo
    priority: 50

lisp
    location: /usr/local/portage/layman/lisp
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/lisp.git
    masters: gentoo
    priority: 50

qt
    location: /usr/local/portage/layman/qt
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/qt.git
    masters: gentoo
    priority: 50

science
    location: /usr/local/portage/layman/science
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/sci.git
    masters: gentoo
    priority: 50

sunrise
    location: /usr/local/portage/layman/sunrise
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/sunrise-reviewed.git
    masters: gentoo
    priority: 50

toolchain
    location: /usr/local/portage/layman/toolchain
    sync-type: laymansync
    sync-uri: git://git.overlays.gentoo.org/proj/toolchain.git
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=native -O2 -msse3 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/stunnel/stunnel.conf /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-mtune=native -O2 -msse3 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildpkg config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo "
LANG="en_US.iso88591"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow 3dnowext 3dnowprefetch X a52 aac acl acpi alsa amd64 avahi berkdb branding bzip2 cairo cdda cdr cli consolekit cracklib crypt cups cxx dbus dri dts dvd dvdr emboss encode exif fam ffmpeg fftw firefox flac fortran fuse gdbm gfortran gif gimp glamor gpm gtk gtk3 iconv ipv6 jpeg lapack lcms libnotify mad mmx mmxext mng modules mp3 mp4 mpeg multilib ncurses nls nptl nptlonly ogg opengl openmp pam pango pcre pdf png policykit ppds python qt qt3support qt4 qt5 readline sdl session smp spell sqlite sqlite3 sse sse2 sse3 sse4a ssl startup-notification svg systemd tcl tcpd threads tiff tk truetype udev udisks unicode upower usb vorbis wxwidgets x264 xcb xml xulrunner xv xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="3dnow mmx 3dnowext mmxext popcnt sse sse2 sse3 sse4a" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc multiboot" INPUT_DEVICES="keyboard mouse evdev wacom" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en de" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python3_4" RUBY_TARGETS="ruby22" USERLAND="GNU" VIDEO_CARDS="radeon radeonsi" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

app-admin/mongo-tools-3.0.2::gentoo was built with the following:
USE="ssl -sasl" ABI_X86="64"




Comment 1


Tomáš Mózes





          2015-06-11 04:48:54 UTC
        

Please post the output of:
emerge -pvq openssl




Comment 2


Helmut Jarausch





          2015-06-17 08:34:34 UTC
        

The same is true with version 3.0.4




Comment 3


Tomáš Mózes





          2015-06-17 10:15:36 UTC
        

(In reply to Helmut Jarausch from comment #2)
> The same is true with version 3.0.4

Would be nice of you to specify the OpenSSL version you use (and flags), else we don't know how to reproduce this ;)




Comment 4


Helmut Jarausch





          2015-06-17 11:52:26 UTC
        

(In reply to Tomas Mozes from comment #3)
> (In reply to Helmut Jarausch from comment #2)
> > The same is true with version 3.0.4
> 
> Would be nice of you to specify the OpenSSL version you use (and flags),
> else we don't know how to reproduce this ;)

eix -e openssl
[I] dev-libs/openssl
     Available versions:  
     (0.9.8) 0.9.8z_p5-r1^d 0.9.8z_p6^d{tbz2} 0.9.8z_p7^d{tbz2}
     (0)    (~)1.0.0r^d 1.0.1l-r1^d 1.0.1m^d (~)1.0.1n^d 1.0.1o^d (~)1.0.2-r3^d (~)1.0.2a^d{tbz2} (~)1.0.2b^d{tbz2} (~)1.0.2c^d{tbz2}
       {+asm bindist gmp kerberos rfc3779 sctp static-libs test +tls-heartbeat vanilla zlib ABI_MIPS="n32 n64 o32" ABI_PPC="32 64" ABI_S390="32 64" ABI_X86="32 64 x32" CPU_FLAGS_X86="sse2"}
     Installed versions:  0.9.8z_p7(0.9.8)^d{tbz2}(10:23:03 AM 06/12/2015)(gmp zlib -bindist -kerberos -test ABI_MIPS="-n32 -n64 -o32" ABI_PPC="-32 -64" ABI_S390="-32 -64" ABI_X86="32 64 -x32" CPU_FLAGS_X86="sse2") 1.0.2c^d{tbz2}(04:13:34 PM 06/13/2015)(asm gmp rfc3779 static-libs tls-heartbeat zlib -bindist -kerberos -sctp -test -vanilla ABI_MIPS="-n32 -n64 -o32" ABI_PPC="-32 -64" ABI_S390="-32 -64" ABI_X86="32 64 -x32" CPU_FLAGS_X86="sse2")
     Homepage:            http://www.openssl.org/
     Description:         full-strength general purpose cryptography library (including SSL and TLS)


emerge -vp app-admin/mongo-tools
[ebuild     U  ] app-admin/mongo-tools-3.0.4::gentoo [3.0.2::gentoo] USE="ssl -sasl" 0 KiB




Comment 5


Tomáš Mózes





          2015-06-17 12:41:39 UTC
        

Works on ~amd64. And please, next time post the output of command there were requested ;) Eix output is great on your local computer, but looks cryptic on this page :-(

# USE="ssl" emerge -av1 mongo-tools

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] app-admin/mongo-tools-3.0.4::gentoo  USE="ssl* -sasl" 0 KiB

Total: 1 package (1 reinstall), Size of downloads: 0 KiB

Would you like to merge these packages? [Yes/No] y

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) app-admin/mongo-tools-3.0.4::gentoo
 * mongo-tools-3.0.4.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                         [ ok ]
>>> Unpacking source...
>>> Unpacking mongo-tools-3.0.4.tar.gz to /var/tmp/portage/app-admin/mongo-tools-3.0.4/work
>>> Source unpacked in /var/tmp/portage/app-admin/mongo-tools-3.0.4/work
>>> Preparing source in /var/tmp/portage/app-admin/mongo-tools-3.0.4/work/mongo-tools-r3.0.4 ...
 * Applying mongo-tools-3.0.0-build.patch ...                                                                                                                            [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-admin/mongo-tools-3.0.4/work/mongo-tools-r3.0.4 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/app-admin/mongo-tools-3.0.4/work/mongo-tools-r3.0.4 ...
Building bsondump...
Building mongostat...
Building mongofiles...
Building mongoexport...
Building mongoimport...
Building mongorestore...
Building mongodump...
Building mongotop...
Building mongooplog...
>>> Source compiled.
>>> Test phase [not enabled]: app-admin/mongo-tools-3.0.4

>>> Install mongo-tools-3.0.4 into /var/tmp/portage/app-admin/mongo-tools-3.0.4/image/ category app-admin
>>> Completed installing mongo-tools-3.0.4 into /var/tmp/portage/app-admin/mongo-tools-3.0.4/image/

strip: x86_64-pc-linux-gnu-strip --strip-unneeded -R .comment -R .GCC.command.line -R .note.gnu.gold-version
   usr/bin/mongodump
   usr/bin/bsondump
   usr/bin/mongofiles
   usr/bin/mongoexport
   usr/bin/mongoimport
   usr/bin/mongooplog
   usr/bin/mongorestore
   usr/bin/mongostat
   usr/bin/mongotop

>>> Installing (1 of 1) app-admin/mongo-tools-3.0.4::gentoo
 * checking 9 files for package collisions
>>> Merging app-admin/mongo-tools-3.0.4 to /
--- /usr/
--- /usr/bin/
>>> /usr/bin/mongotop
>>> /usr/bin/mongostat
>>> /usr/bin/mongorestore
>>> /usr/bin/mongooplog
>>> /usr/bin/mongoimport
>>> /usr/bin/mongofiles
>>> /usr/bin/mongoexport
>>> /usr/bin/mongodump
>>> /usr/bin/bsondump

>>> Safely unmerging already-installed instance...
No package files given... Grabbing a set.
--- replaced obj /usr/bin/mongotop
--- replaced obj /usr/bin/mongostat
--- replaced obj /usr/bin/mongorestore
--- replaced obj /usr/bin/mongooplog
--- replaced obj /usr/bin/mongoimport
--- replaced obj /usr/bin/mongofiles
--- replaced obj /usr/bin/mongoexport
--- replaced obj /usr/bin/mongodump
--- replaced obj /usr/bin/bsondump
--- replaced dir /usr/bin
--- replaced dir /usr
>>> Regenerating /etc/ld.so.cache...
>>> Original instance of package unmerged safely.
>>> app-admin/mongo-tools-3.0.4 merged.

 * Messages for package app-admin/mongo-tools-3.0.4:

 * Package:    app-admin/mongo-tools-3.0.4
 * Repository: gentoo
 * Maintainer: ultrabug@gentoo.org bugs@bergstroem.nu,proxy-maint@gentoo.org
 * USE:        abi_x86_64 amd64 elibc_glibc kernel_linux ssl userland_GNU
 * FEATURES:   preserve-libs sandbox userpriv usersandbox
 * Applying mongo-tools-3.0.0-build.patch ...
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.

 * GNU info directory index is up-to-date.
 
# emerge -pvq openssl
[ebuild   R   ] dev-libs/openssl-1.0.2c  USE="asm tls-heartbeat zlib -bindist -gmp -kerberos -rfc3779 -sctp -static-libs {-test} -vanilla" ABI_X86="32 (64) (-x32)" CPU_FLAGS_X86="(sse2)" 

# emerge --info
Portage 2.2.20 (python 2.7.10-final-0, default/linux/amd64/13.0/desktop, gcc-4.9.2, glibc-2.20-r2, 3.18.10-gentoo x86_64)
=================================================================
System uname: Linux-3.18.10-gentoo-x86_64-Intel-R-_Core-TM-_i5-3570_CPU_@_3.40GHz-with-gentoo-2.2
KiB Mem:    15908180 total,  12116808 free
KiB Swap:          0 total,         0 free
Timestamp of repository gentoo: Wed, 17 Jun 2015 01:45:01 +0000
sh bash 4.3_p39
ld GNU ld (Gentoo 2.25 p1.2) 2.25
app-shells/bash:          4.3_p39::gentoo
dev-java/java-config:     2.2.0::gentoo
dev-lang/perl:            5.20.2-r1::gentoo
dev-lang/python:          2.7.10::gentoo, 3.2.5-r6::gentoo, 3.3.5-r1::gentoo, 3.4.3::gentoo
dev-util/cmake:           3.2.2::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.16.4::gentoo
sys-apps/sandbox:         2.6-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r1::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.13.4::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25-r1::gentoo
sys-devel/gcc:            4.9.2::gentoo
sys-devel/gcc-config:     1.8::gentoo
sys-devel/libtool:        2.4.6-r1::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 3.18::gentoo (virtual/os-headers)
sys-libs/glibc:           2.20-r2::gentoo

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/apache2-php5.6/ext-active/ /etc/php/apache2-php7.0/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cgi-php7.0/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/php/cli-php7.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-mtune=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://tux.rainside.sk/gentoo/"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac acl acpi alsa amd64 berkdb branding bzip2 cairo cdda cdr cli consolekit cracklib crypt cups cxx dbus dri dts dvd dvdr emboss encode exif fam firefox flac fortran gdbm gif glamor gpm gtk iconv jpeg lcms ldap libnotify mad mmx mmxext mng modules mp3 mp4 mpeg multilib ncurses nptl ogg opengl openmp pam pango pcre pdf png policykit ppds qt3support qt4 readline sdl session sse sse2 ssl startup-notification svg tcpd tiff truetype udev udisks unicode upower usb vorbis wxwidgets x264 xattr xcb xml xv xvid zlib" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core authz_host dir mime unixd socache_shmcb log_config rewrite vhost_alias log_forensic proxy proxy_fcgi info status deflate filter auth_digest authn_file authz_user actions alias auth_basic authn_alias authn_anon env expires headers mime_magic negotiation reqtimeout setenvif unique_id version cgi" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="canon" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 xen" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-0 php5-6 php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3 python3_4" QEMU_SOFTMMU_TARGETS="x86_64 i386" QEMU_USER_TARGETS="x86_64 i386" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="intel i915" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 6


Ian Delaney (RETIRED)






          2015-06-24 08:15:21 UTC
        

Without any replication this is heading towards WORKSFORME or INVALID




Comment 7


Ultrabug






          2015-06-25 10:05:17 UTC
        

Can't reproduce either, tried multiple machines... I suggest you open a bug upstream I'm sorry.




Comment 8


Helmut Jarausch





          2015-06-26 15:13:56 UTC
        

(In reply to Ultrabug from comment #7)
> Can't reproduce either, tried multiple machines... I suggest you open a bug
> upstream I'm sorry.

Still, I'd appreciate some help from you.
I even don't know if it is a GO bug or a bug in this package.

To reproduce
==========

1) I have dev-lang/go-1.4.2 installed here
2) I have dev-libs/openssl-1.0.2c installed here

After unpacking mongo-tools-3.0.4.tar.gz into a local directory,
I proceed according to the README.md file contained in that package, i.e.

3) . ./set_gopath.sh
4) go build -o bin/mongoimport mongoimport/main/mongoimport.go 
   which doesn't report any errors

5) go build -o bin/mongoimport -tags ssl mongoimport/main/mongoimport.go

which throws the following messages
# github.com/spacemonkeygo/openssl
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:74:12: error: 'verify_cb' redeclared as different kind of symbol
 extern int verify_cb(int ok, X509_STORE_CTX* store);
            ^
/tmp/go-build202436168/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:9:13: note: previous declaration of 'verify_cb' was here
 extern char verify_cb[];
             ^
In file included from $WORK/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:12:0:
vendor/src/github.com/spacemonkeygo/openssl/ctx.go:82:12: error: 'password_cb' redeclared as different kind of symbol
 extern int password_cb(char *buf, int size, int rwflag, void *password);
            ^
/tmp/go-build202436168/github.com/spacemonkeygo/openssl/_obj/_cgo_main.c:6:13: note: previous declaration of 'password_cb' was here
 extern char password_cb[];
             ^

The definitions of verify_cb (once a function and then an array)
is definitely not compatible.
The same is true for password_cb

Since I have no experience programming in GO, I can't debug this myself.
Even the temporary folder /tmp/go-build202436168 doesn't exist anymore after the
command has failed.

Thanks,
Helmut




Comment 9


Helmut Jarausch





          2015-06-29 09:06:12 UTC
        

Solved!

I removed dev-lang/go and all dependend packages from a my system.
Then I emerged these again.

That solved the problem.




Comment 10


Tomáš Mózes





          2015-06-29 10:46:18 UTC
        

Glad you made it working ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

