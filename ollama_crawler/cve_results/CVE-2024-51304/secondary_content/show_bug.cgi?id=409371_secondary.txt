Title: 409371 – lxc-0.7.5-r3 fails with 3.2 kernel - namespace problems - updating ebuild?
URL: https://bugs.gentoo.org/show_bug.cgi?id=409371

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 409371
lxc-0.7.5-r3 fails with 3.2 kernel - namespace problems - updating ebuild?
Last modified: 2012-05-12 19:17:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 409371 
      - lxc-0.7.5-r3 fails with 3.2 kernel - namespace problems - updating ebuild?


Summary:
lxc-0.7.5-r3 fails with 3.2 kernel - namespace problems - updating ebuild?
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Diego Elio Pettenò (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-03-22 20:17 UTC by lucapost





      Modified:
    
2012-05-12 19:17 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


lucapost





          2012-03-22 20:17:20 UTC
        

app-emulation/lxc-0.7.5-r3
sys-kernel/gentoo-sources-3.2.1-r2

> CONFIG=/usr/src/linux/.config lxc-checkconfig
--- Namespaces ---
Namespaces: enabled
Utsname namespace: enabled                                                                                            
Ipc namespace: enabled                                                                                                
Pid namespace: enabled                                                                                                
User namespace: enabled                                                                                               
Network namespace: enabled                                                                                            
Multiple /dev/pts instances: enabled                                                                                  
                                                                                                                      
--- Control groups ---
Cgroup: enabled
Cgroup namespace: required                                                                                            
Cgroup device: enabled                                                                                                
Cgroup sched: enabled                                                                                                 
Cgroup cpu account: enabled                                                                                           
Cgroup memory controller: enabled                                                                                     
Cgroup cpuset: enabled                                                                                                
                                                                                                                      
--- Misc ---
Veth pair device: enabled
Macvlan: enabled                                                                                                      
Vlan: enabled                                                                                                         
File capabilities: enabled                                                                                            
                                                                                                                      
Note : Before booting a new kernel, you can check its configuration
usage : CONFIG=/path/to/config /usr/sbin/lxc-checkconfig

grep NAMESPACE /usr/src/linux/.config
CONFIG_NAMESPACES=y

the complete .config here: http://ompldr.org/vZDN5bw/config

ed error: 
> lxc-start -f sirio.conf -n sirio 
lxc-start: failed to create vethpsuWgg-vethiycZFb : Operation not supported
lxc-start: failed to create netdev
lxc-start: failed to create the network
lxc-start: failed to spawn 'sirio'
lxc-start: No such file or directory - failed to remove cgroup '/sys/fs/cgroup/cpuset/sirio'

I think that lxc-0.7.5-r3 doesn't support 3.2 kernel.

Same users get similar problem: http://comments.gmane.org/gmane.linux.kernel.containers.lxc.general/3169

There is an update of lxc here: http://lxc.sourceforge.net/download/lxc/ 
No ebuild for this is portage.

Thanks, 
LP





Reproducible: Always




Comment 1


Diego Elio Pettenò (RETIRED)






          2012-03-22 21:03:20 UTC
        

Something feels wrong on your system, as it works just fine here. Care to post your emerge -pv lxc and your .config?




Comment 2


lucapost





          2012-03-23 00:16:59 UTC
        

no problem with CGROUP_DEVICES! :D
sorry for troubble.




Comment 3


Diego Elio Pettenò (RETIRED)






          2012-05-12 19:17:53 UTC
        

Added an extra check for CGROUP_DEVICE to be on the safe side.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

