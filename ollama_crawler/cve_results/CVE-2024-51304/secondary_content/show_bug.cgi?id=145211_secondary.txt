Title: 145211 – emerge gentoolkit failed to remove .pyc and .pyo files
URL: https://bugs.gentoo.org/show_bug.cgi?id=145211

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145211
emerge gentoolkit failed to remove .pyc and .pyo files
Last modified: 2006-08-26 23:11:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145211 
      - emerge gentoolkit failed to remove .pyc and .pyo files


Summary:
emerge gentoolkit failed to remove .pyc and .pyo files
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-26 19:07 UTC by John Lee





      Modified:
    
2006-08-26 23:11 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John Lee





          2006-08-26 19:07:16 UTC
        

Seems a recent emerge (a few days ago) upgraded gentoolkit (to 0.2.2) and removed old .py files, but failed to remove old .pyc and .pyo files.  Hence:

john[0]# equery depends libungif
[ Searching for packages depending on libungif... ]
Traceback (most recent call last):
  File "/usr/bin/equery", line 1639, in ?
    cmd.perform(local_opts)
  File "/usr/bin/equery", line 1058, in perform
    deps = pkg.get_runtime_deps() + pkg.get_compiletime_deps() + pkg.get_postmerge_deps()
AttributeError: Package instance has no attribute 'get_postmerge_deps'
john[0]#

The following cured it:

rm /usr/lib/gentoolkit/pym/gentoolkit/gentoolkit.pyc
rm /usr/lib/gentoolkit/pym/gentoolkit/gentoolkit.pyo


Some background info:

mechanize[0]$ emerge -s gentoolkit
Searching...
[ Results for search key : gentoolkit ]
[ Applications found : 2 ]

*  app-portage/gentoolkit
      Latest version available: 0.2.2
      Latest version installed: 0.2.2
      Size of files: 84 kB
      Homepage:      http://www.gentoo.org/proj/en/portage/tools/index.xml
      Description:   Collection of administration scripts for Gentoo
      License:       GPL-2

*  app-portage/gentoolkit-dev
      Latest version available: 0.2.5
      Latest version installed: [ Not Installed ]
      Size of files: 44 kB
      Homepage:      http://www.gentoo.org/~karltk/projects/gentoolkit/
      Description:   Collection of developer scripts for Gentoo
      License:       GPL-2


python[0]# equery --version
equery(0.1.4) - Gentoo Package Query Tool
Author(s): Karl Trygve Kalleberg


python[0]# emerge --info
Portage 2.1-r1 (default-linux/x86/2006.0, gcc-3.3.2, glibc-2.3.2-r9, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(TM) XP 1700+
Gentoo Base System version 1.6.14
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.1.3-r1, 2.2.3-r5, 2.3.4-r1, 2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.4
sys-devel/binutils:  2.14.90.0.8-r3
sys-devel/gcc-config: 1.3.4
sys-devel/libtool:   1.4.3-r4, 1.5.10-r4
virtual/os-headers:  2.4.21-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.2/share/config /usr/lib/X11/xkb /usr/lib/fax /usr/share/config /var/spool/fax/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.blueyonder.co.uk http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/"
LC_ALL="en_GB.utf-8"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts cdr cli crypt cups dlloader dri dvd dvdr eds emacs emacs-w3 emboss encode esd foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg kde libg++ libwww mad mikmod motif mozilla mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd python qt qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev usb vorbis xml xmms xorg xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-08-26 23:11:34 UTC
        

<snip>
pkg_preinst() {
        # FIXME: Remove from future ebuilds after gentoolkit-0.2.2 is stable
        rm -f ${ROOT}/usr/lib/gentoolkit/pym/gentoolkit.py[co] ${ROOT}/usr/lib/gentoolkit/pym/gentoolkit/*.py[co]
}
</snip>










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

