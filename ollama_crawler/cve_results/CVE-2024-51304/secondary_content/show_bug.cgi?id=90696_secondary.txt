Title: 90696 – glibc-2.3.5 fails-> "lib32/libsandbox.so: undefined symbol: __dlsym"
URL: https://bugs.gentoo.org/show_bug.cgi?id=90696

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90696
glibc-2.3.5 fails-> "lib32/libsandbox.so: undefined symbol: __dlsym"
Last modified: 2005-07-16 22:28:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90696 
      - glibc-2.3.5 fails-> "lib32/libsandbox.so: undefined symbol: __dlsym"


Summary:
glibc-2.3.5 fails-> "lib32/libsandbox.so: undefined symbol: __dlsym"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        All
      







Importance:
      
High
       major
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-28 03:51 UTC by Sebastian Spaeth





      Modified:
    
2005-07-16 22:28 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



amd64
azarah
eradicator









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sebastian Spaeth





          2005-04-28 03:51:23 UTC
        

On my amd64 (pure 64 bit installation), glibc fails as follows:

x86_64-pc-linux-gnu-nptl/timezone/zic -d /var/tmp/portage/glibc-2.3.5/image//usr/share/zoneinfo -L /dev/null -y ./yearistype africa
/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-nptl/timezone/zic: symbol lookup error: /usr/lib32/libsandbox.so: undefined symbol: __dlsym
make[2]: *** [/var/tmp/portage/glibc-2.3.5/image//usr/share/zoneinfo/Africa/Algiers] Error 127
make[2]: Leaving directory `/var/tmp/portage/glibc-2.3.5/work/glibc-2.3.5/timezone'
make[1]: *** [timezone/subdir_install] Error 2
make[1]: Leaving directory `/var/tmp/portage/glibc-2.3.5/work/glibc-2.3.5'
make: *** [install] Error 2

!!! ERROR: sys-libs/glibc-2.3.5 failed.



-------------------------------------------------------------------------
emerge info->
Portage 2.0.51.20-r5 (default-linux/amd64/2005.0, gcc-3.4.3-20050110, glibc-2.3.4.20050125-r1, 2.6.11-gentoo-r5 x86_64)
=================================================================
System uname: 2.6.11-gentoo-r5 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.6.10
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.1-r3
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.11
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -ffast-math -mfpmath=sse -ftracer -fomit-frame-pointer -funswitch-loops -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sandox strict userpriv"
GENTOO_MIRRORS="ftp://sunsite.cnlab-switch.ch/mirror/gentoo http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="de_DE.utf8"
LC_ALL="de_DE.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 X acpi alsa avi berkdb bitmap-fonts bonobo cdr crypt cups curl dvdread fam font-server foomaticdb fortran gd gdbm gif gimpprint gnome gphoto2 gstreamer gtk gtk2 gtkhtml guile hal hbci imagemagick imlib jack java jp2 jpeg junit leim libwww lzw lzw-tiff mad mozilla mp3 ncurses nls nomotif nptl nptlonly offensive ogg opengl pam pda perl png python readline rtc scanner slang speex spell ssl tcpd tetex truetype truetype-fonts type1-fonts unicode usb userlocales vorbis wmf xml xml2 xmms xpm xprint xrandr xv zlib video_cards_radeon"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS




Comment 1


Jeremy Huddleston (RETIRED)






          2005-04-29 10:27:30 UTC
        

btw, default-linux/amd64/2005.0 is not "pure 64bit".  If you want a 32bit free system, use 2005.0/no-multilib...

Can you please try rebuilding sys-apps/sandbox?  What version of sandbox are you using?




Comment 2


Sebastian Spaeth





          2005-04-30 05:11:52 UTC
        

I re-emerged sandbox already. No change. still not working.

emerge info was already provided :)
sys-apps/sandbox:    1.2.1-r3

Thanks for the no-multilib tip. I'll try that soon...




Comment 3


Martin Schlemmer (RETIRED)






          2005-04-30 06:29:59 UTC
        

Can you please try sandbox-1.2.3?





Comment 4


Sebastian Spaeth





          2005-04-30 08:33:50 UTC
        

sys-apps/sandbox-1.2.3 is installed now. Exact same error as reported above when emerging glibc.





Comment 5


Martin Schlemmer (RETIRED)






          2005-04-30 13:13:59 UTC
        

I am assuming that is the 64bit glibc building .. should it then be using the 32bit sandbox lib?  Jeremy, ideas?





Comment 6


Jeremy Huddleston (RETIRED)






          2005-05-01 00:29:52 UTC
        

yes, when executing 32bit programs, it uses the 32bit libsandbox... so this is probably when compiling the 32bit glibc...

I really wish I could see the line above the top of your log. You need to atleast show the whole command that causes the failure...




Comment 7


Sebastian Spaeth





          2005-05-01 21:58:21 UTC
        

Sorry, I tried the no-multilib profile (after this bug occurred on a "normal" box), noticed that I still need multilib to run openoffice, and tried to go back. Have a hell of a time right now and can't do reliable and sane tests now. I'll let this bug suspend for a while and report back, once the machine is back in a sane state. Sorry for the delay...




Comment 8


Martin Schlemmer (RETIRED)






          2005-05-03 04:12:52 UTC
        

Jeremy, its not maybe because the full path is not used to open libc, etc?  With the new tests, the issues involved with that may be of the past (can't remember the exact issues)?





Comment 9


Jeremy Huddleston (RETIRED)






          2005-05-03 11:48:10 UTC
        

Not using the full path uses the ld.so.cache, and it's grabbing the one in /usr/lib32/libsandbox.so which is where sys-apps/sandbox installs itself to...

The thing is... I don't have that symbol in my 32bit libsandbox, so I'm a bit confused how he's got it.

 $ readelf -s /usr/lib32/libsandbox.so | grep dl
    17: 00000000   170 FUNC    GLOBAL DEFAULT  UND dlvsym@GLIBC_2.1 (4)
    24: 00000000   158 FUNC    GLOBAL DEFAULT  UND dlsym@GLIBC_2.0 (5)
    56: 00000000   618 FUNC    GLOBAL DEFAULT  UND dlerror@GLIBC_2.0 (5)





Comment 10


Jeremy Huddleston (RETIRED)






          2005-07-14 03:08:31 UTC
        

Sebastian, are you still suffering from this?




Comment 11


Sebastian Spaeth





          2005-07-16 07:40:08 UTC
        

I have sandbox 1.2.11 installed now and glibc 2.3.5 worked fine at a later stage
(don't know exactly when though). Feel free to close from my point of view




Comment 12


SpanKY






          2005-07-16 22:28:34 UTC
        

k ...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

