Title: 210408 – sys-process/psmisc-22.6 - crosscompiling fails due to rpl_malloc junk
URL: https://bugs.gentoo.org/show_bug.cgi?id=210408

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 210408
sys-process/psmisc-22.6 - crosscompiling fails due to rpl_malloc junk
Last modified: 2008-05-10 08:51:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 210408 
      - sys-process/psmisc-22.6 - crosscompiling fails due to rpl_malloc junk


Summary:
sys-process/psmisc-22.6 - crosscompiling fails due to rpl_malloc junk
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

ARM
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-02-16 21:28 UTC by Alexander Weber





      Modified:
    
2008-05-10 08:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



embedded









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexander Weber





          2008-02-16 21:28:36 UTC
        

Cross-Compiling of sys-process/psmisc failed.
Host is x86
Target is armv5te-linwizard-linux-gnueabi (crossdev)

Error is:

make[2]: Entering directory `/var/tmp/portage/sys-process/psmisc-22.6/work/psmisc-22.6/src'
export LC_ALL=C ; \
		armv5te-linwizard-linux-gnueabi-gcc -E -dM signames.c |\
		tr -s '\t ' ' ' | sort -n -k 3 | sed \
	's:#define SIG\([A-Z]\+[0-9]*\) \([0-9]\+\) *\(\|/\*.*\)$:{\ \2,"\1" },:p;d' | \
		  grep -v '[0-9][0-9][0-9]' >signames.h || \
		  { rm -f signames.h; exit 1; }
grep '^{ 1,"HUP" },$' signames.h >/dev/null || \
		  { rm -f signames.h; exit 1; }
make  all-am
make[3]: Entering directory `/var/tmp/portage/sys-process/psmisc-22.6/work/psmisc-22.6/src'
armv5te-linwizard-linux-gnueabi-gcc -DHAVE_CONFIG_H -I. -I..    -Wall -DLOCALEDIR=\"/usr/share/locale\"    -Os -pipe -MT fuser.o -MD -MP -MF .deps/fuser.Tpo -c -o fuser.o fuser.c
mv -f .deps/fuser.Tpo .deps/fuser.Po
armv5te-linwizard-linux-gnueabi-gcc -DHAVE_CONFIG_H -I. -I..    -Wall -DLOCALEDIR=\"/usr/share/locale\"    -Os -pipe -MT signals.o -MD -MP -MF .deps/signals.Tpo -c -o signals.o signals.c
mv -f .deps/signals.Tpo .deps/signals.Po
armv5te-linwizard-linux-gnueabi-gcc -Wall -DLOCALEDIR=\"/usr/share/locale\"    -Os -pipe   -o fuser fuser.o signals.o  
fuser.o: In function `add_ip_conn':
fuser.c:(.text+0x1c): undefined reference to `rpl_malloc'
fuser.o: In function `add_device':
fuser.c:(.text+0x6c): undefined reference to `rpl_malloc'
fuser.o: In function `add_inode':
fuser.c:(.text+0x174): undefined reference to `rpl_malloc'
fuser.o: In function `add_mount_device':
fuser.c:(.text+0x250): undefined reference to `rpl_malloc'
fuser.o: In function `fill_unix_cache':
fuser.c:(.text+0x3c4): undefined reference to `rpl_malloc'
fuser.o:fuser.c:(.text+0x744): more undefined references to `rpl_malloc' follow
collect2: ld gab 1 als Ende-Status zurück
make[3]: *** [fuser] Fehler 1
make[3]: Leaving directory `/var/tmp/portage/sys-process/psmisc-22.6/work/psmisc-22.6/src'
make[2]: *** [all] Fehler 2
make[2]: Leaving directory `/var/tmp/portage/sys-process/psmisc-22.6/work/psmisc-22.6/src'
make[1]: *** [all-recursive] Fehler 1
make[1]: Leaving directory `/var/tmp/portage/sys-process/psmisc-22.6/work/psmisc-22.6'
make: *** [all] Fehler 2

emerge --info for Build
Portage 2.1.4.4 (default-linux/arm/2007.0, gcc-4.2.2, glibc-2.6.1-r0, 2.6.23-tuxonice-r6 i686)
=================================================================
System uname: 2.6.23-tuxonice-r6 i686 AMD Athlon(tm) XP 2600+
Timestamp of tree: Sat, 16 Feb 2008 11:00:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.4.4-r6
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="arm"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-Os -pipe"
CHOST="armv5te-linwizard-linux-gnueabi"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-Os -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="de_DE.UTF-8"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/armv5te-linwizard-linux-gnueabi/usr/portage /usr/local/overlays/myoverlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="arm kdrive minimal multicall tslib zlib" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Reproducible: Always

Steps to Reproduce:
1. emerge psmisc with 
cat /home/anwender/Projects/linwizard/lw-emerge.sh 
#!/bin/bash
SYSROOT=/usr/armv5te-linwizard-linux-gnueabi
CBUILD=$(portageq envvar CHOST)
PORTAGE_CONFIGROOT="$SYSROOT"
ROOT="$SYSROOT"
export SYSROOT CBUILD PORTAGE_CONFIGROOT ROOT

emerge --oneshot psmisc

2. build failed




Comment 1


SpanKY






          2008-05-10 08:51:50 UTC
        

review the documentation:
http://www.gentoo.org/proj/en/base/embedded/handbook/?part=1&chap=5#doc_chap3

you should be forcing the autoconf tests









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

