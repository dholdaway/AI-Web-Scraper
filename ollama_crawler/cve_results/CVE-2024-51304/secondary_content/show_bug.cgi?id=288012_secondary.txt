Title: 288012 – X Crashes with segmentation fault - radeon / randr problem?
URL: https://bugs.gentoo.org/show_bug.cgi?id=288012

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 288012
X Crashes with segmentation fault - radeon / randr problem?
Last modified: 2009-10-07 07:46:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 288012 
      - X Crashes with segmentation fault - radeon / randr problem?


Summary:
X Crashes with segmentation fault - radeon / randr problem?
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       major
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-07 06:56 UTC by PetaMem R&D





      Modified:
    
2009-10-07 07:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


PetaMem R&D





          2009-10-07 06:56:04 UTC
        

Had to reboot my notebook after longer time (using hibernate-ram, so maybe I stumble across this later than it really should have hit me)

X doesn't start up. Upon inspection I see this:

(II) RADEON(0): crtc(0) Clock: mode 161630, PLL 161620
(II) RADEON(0): crtc(0) PLL  : refdiv 12, fbdiv 0x1AF(431), pdiv 6
Set CRTC 0 PLL success
Set CRTC Timing success
Set CRTC 0 Overscan success
Not using RMX
scaler 0 setup success
Set CRTC 0 Source success
crtc 0 YUV disable setup success
Output digital setup success
Output LCD1 enable success
Enable CRTC 0 success
Unblank CRTC 0 success
Output CRT1 disable success
Blank CRTC 1 success
Disable CRTC 1 success
(II) RADEON(0): RandR 1.2 enabled, ignore the following RandR disabled message.

Backtrace:
0: /usr/bin/X(xorg_backtrace+0x26) [0x4e89e6]
1: /usr/bin/X(xf86SigHandler+0x6f) [0x48357f]
2: /lib/libc.so.6 [0x7f9dda9b56d0]
3: /usr/bin/X(DGAAvailable+0x3e) [0x47621e]
4: /usr/bin/X(xf86DiDGAInit+0x30) [0x4a93e0]
5: /usr/bin/X(xf86CrtcScreenInit+0x10d) [0x4a3ddd]
6: /usr/lib64/xorg/modules/drivers//radeon_drv.so(RADEONScreenInit+0x19bd) [0x7f9dd91ab4fd]
7: /usr/bin/X(AddScreen+0x1bf) [0x42fe1f]
8: /usr/bin/X(InitOutput+0x76e) [0x468cde]
9: /usr/bin/X(main+0x1fe) [0x43051e]
10: /lib/libc.so.6(__libc_start_main+0xe6) [0x7f9dda9a1a26]
11: /usr/bin/X [0x42fb79]

Fatal server error:
Caught signal 11.  Server aborting


Please consult the The X.Org Foundation support


Interestingly, I have libXrandr 1.3.2 installed not 1.2 as radeon claims. Also re-emerging either the radeon driver nor randr didn|t change anything




Comment 1


PetaMem R&D





          2009-10-07 06:56:53 UTC
        

# emerge --info
Portage 2.1.6.13 (default/linux/amd64/2008.0, gcc-4.4.1, glibc-2.10.1-r0, 2.6.31-tuxonice x86_64)
=================================================================
System uname: Linux-2.6.31-tuxonice-x86_64-Intel-R-_Core-TM-2_CPU_T7200_@_2.00GHz-with-gentoo-2.0.1
Timestamp of tree: Sun, 04 Oct 2009 21:00:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [enabled]
app-shells/bash:     4.0_p33
dev-java/java-config: 1.3.7-r1, 2.1.9-r1
dev-lang/python:     2.6.3, 3.1.1-r1
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.1
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distcc distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="de en_GB"
MAKEOPTS="-j13"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit 7zip X Xaw3d a52 aac aalib accessibility ace acpi alsa amd64 apache2 audio audiofile bash-completion bdf bitmap-fonts bluetooth bzip2 cairo cdparanoia cdr cdrom cg cgi chardet cjk colordiff consolekit css cups curl cxx dbus dga divx dri dvd dvdnav dvdr dvi emacs encode enscript epydoc examples exif fat fbcon fbsplash ffmpeg firefox flash fontconfig ftp gd gif gimp gimpprint glib gnutls hal handbook hdaps hddtemp ibmacpi idn ieee1394 imagemagick ipv6 ipw3945 ithreads java javascript joystick jpeg jpeg2k json kde lame laptop lcms lm_sensors log4j logrotate lua mime mmx mozdevelop mozdom mp2 mp3 mp4 mp4live mpeg mpeg2 mplayer multilib mysql mysqli nls nptl nsplugin ogg opengl openssh pam pango pcf pdf perl php png ppds pulseaudio python qt3support qt4 quicktime radeon rar realmedia rtc screen smp sound sql sqlite sse sse2 ssl ssse3 subversion svg svgz syslog tgif threads tidy tiff truetype truetype-fonts type1 type1-fonts unicode unzip usb vcd vhosts video vnc vncviewer vorbis webdav webkit wifi wma wmf x11vnc xcb xml xorg xsl xslt xterm xv xvidxcb zip" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="worker" ELIBC="glibc" INPUT_DEVICES="mouse keyboard synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en_GB" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


PetaMem R&D





          2009-10-07 07:02:12 UTC
        

(In reply to comment #0)

> Interestingly, I have libXrandr 1.3.2 installed not 1.2 as radeon claims. Also
> re-emerging either the radeon driver nor randr didn|t change anything

Sorry, 1.3.0 - nevertheless a mismatch with what the radeon driver claims.

Additional info:

xorg-server 1.6.4 with hal disabled






Comment 3


PetaMem R&D





          2009-10-07 07:46:05 UTC
        

(In reply to comment #1)

now I see this:

> 2.6.31-tuxonice x86_64)

and this:

> virtual/os-headers:  2.6.30-r1

and actually there is no virtual/os-headers, just sys-kernel/linux-headers-2.6.30-r1

and he tries to install that even after removal. Hmm.

Understandable, as almost ever rebuild fails without them. Sigh. Although I do have them under /usr/src/linux/include/linux ... ok a symlink here and there helps with this...

Should - for the first time in history - the tuxonice guys have been faster than the vanilla herd? :-)

Ok. Rebuilt xorg and all drivers with the symlinks pointing to 2.6.31 includes aaaaand...

It works!

(II) RADEON(0): RandR 1.2 enabled, ignore the following RandR disabled message.
(WW) RADEON(0): Option "BIOSHotkeys" is not used
(WW) RADEON(0): Option "VendorName" is not used
(WW) RADEON(0): Option "ModelName" is not used
(--) RandR disabled
(II) Initializing built-in extension Generic Event Extension
(II) Initializing built-in extension SHAPE
(II) Initializing built-in extension MIT-SHM
(II) Initializing built-in extension XInputExtension
(II) Initializing built-in extension XTEST

etc. etc.

I've changed the resolution to "WORKSFORME", probably this will get obsolete with a linux-headers update. SOmeone should test/verify/reproduce nevertheless.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

