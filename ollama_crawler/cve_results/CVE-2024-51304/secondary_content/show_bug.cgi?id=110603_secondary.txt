Title: 110603 – jade runes endlessly while merging docbook-sgml-utils. consuming 100% cpu
URL: https://bugs.gentoo.org/show_bug.cgi?id=110603

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 110603
jade runes endlessly while merging docbook-sgml-utils. consuming 100% cpu
Last modified: 2006-07-03 15:31:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 110603 
      - jade runes endlessly while merging docbook-sgml-utils. consuming 100% cpu


Summary:
jade runes endlessly while merging docbook-sgml-utils. consuming 100% cpu
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Text-Markup Team (OBSOLETE)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-27 01:40 UTC by Stefan Schulz





      Modified:
    
2006-07-03 15:31 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Schulz





          2005-10-27 01:40:29 UTC
        

When merging docbook-sgml-utils (and other ebuilds using jade), the jade program
never finishes executing, utilizing 100% of all available CPUs forever (or at
least, for over 10 hours)

Reproducible: Always
Steps to Reproduce:
1. emerge docbook-sgml-utils
2. wait frustrated

Actual Results:  
make[2]: Entering directory
`/var/tmp/portage/docbook-sgml-utils-0.6.14/work/docbook-utils-0.6.14/doc/HTML'
SGML_CATALOG_FILES=/etc/sgml/catalog \
SGML_SEARCH_PATH=../..:../../doc:.. \
        jade -t sgml -i html -d ../../docbook-utils.dsl\#html \
                -V '%use-id-as-filename%' ../../doc/docbook-utils.sgml
SGML_CATALOG_FILES=/etc/sgml/catalog \
SGML_SEARCH_PATH=../..:../../doc:.. \
        jade -t sgml -i html -d ../../docbook-utils.dsl\#html \
                -V '%use-id-as-filename%' ../../doc/docbook-utils.sgml
SGML_CATALOG_FILES=/etc/sgml/catalog \
SGML_SEARCH_PATH=../..:../../doc:.. \
        jade -t sgml -i html -d ../../docbook-utils.dsl\#html \
                -V '%use-id-as-filename%' ../../doc/docbook-utils.sgml


And nothing more, for hours and hours and hours

Expected Results:  
Compile gets past this step

Portage 2.0.51.22-r3 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2,
2.6.11.7TNSysRqPatch i686)
=================================================================
System uname: 2.6.11.7TNSysRqPatch i686 AMD Athlon(tm) MP 2000+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-mp -m3dnow -msse -mmmx -fomit-frame-pointer -Os -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-mp -m3dnow -msse -mmmx -fomit-frame-pointer -Os -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo
http://ftp.uni-erlangen.de/pub/mirrors/gentoo
ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo
ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ "
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage"
USE="x86 3dnow X alsa avi berkdb bitmap-fonts cdr crypt curl eds emboss encode
fam fortran gdbm gif gnome gstreamer gtk gtk2 imagemagick imlib imlib2 innodb
ipv6 java jpeg junit latex libg++ libwww mad mikmod mmx motif mozilla mp3 mpeg
mplayer ncurses network nls no-old-linux noreiserfs offensive ogg oggvorbis
opengl oss pam pdflib perl png posix python quicktime radeon readline rtc sdl
shared sharedmem sockets spell ssl tcltk tcpd tetex tiff truetype truetype-fonts
type1-fonts udev vorbis xml xml2 xmms xv zlib video_cards_radeon userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY

kaladas ~ # java-config -v
java version "1.4.2_09"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_09-b05)
Java HotSpot(TM) Client VM (build 1.4.2_09-b05, mixed mode)

kaladas ~ # jade --version
jade:I: "openjade" version "1.3.2"
jade:I: "OpenSP" version "1.5.1"




Comment 1


husky





          2005-12-19 14:22:52 UTC
        

Same here.

=============================================================================
Portage 2.1_pre1 (default-linux/ppc/2005.1/ppc/G4, gcc-3.4.5, glibc-2.3.4.20040916-r0,glibc-2.3.6-r1, 2.6.14-suspend2-r7 ppc)

USE="aalib apache2 acl acpi altivec apm avi bonobo bzlib cdr crypt cups dga dvb dvd encode ethereal evo esd exif flash ftp gd gif gimpprint gnome gphoto2 gpm gtk2 gtkhtml imap imlib ipv6 jpeg ldap matroska mime mng ming mbox motif -mozilla mpeg ncurses oggvorbis opengl oss pam png pmu ppc qt readline rtc samba sdl spell ssl svg tcltk tcpd tidy theora tiff truetype usb wmf X xinerama xosd xml xml2 xmms xv xvid zlib -fam -java -kde"

CFLAGS="-O2 -pipe -mcpu=G4 -mtune=G4 -maltivec -mabi=altivec -mpowerpc-gfxopt -fsigned-char -mstring -mmultiple"

jade:I: "openjade" version "1.3.2"
jade:I: "OpenSP" version "1.5.1"
=============================================================================

Strace:

SGML_CATALOG_FILES=/etc/sgml/catalog SGML_SEARCH_PATH=../..:../../doc:.. strace jade -t sgml -i html -d ../../docbook-utils.dsl\#html -V '%use-id-as-filename%' ../../doc/docbook-utils.sgml

[......]
read(3, "", 131072)                     = 0
close(3)                                = 0
munmap(0x30138000, 528384)              = 0
open("/usr/share/sgml/docbook/xml-simple-dtd-1.0/catalog", O_RDONLY) = 3
fstat64(3, {st_mode=S_IFREG|0644, st_size=428, ...}) = 0
mmap(NULL, 528384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x30138000
read(3, "OVERRIDE YES\n\nDTDDECL \"-//OASIS/"..., 131072) = 428
read(3, "", 131072)                     = 0
close(3)                                = 0
munmap(0x30138000, 528384)              = 0
brk(0x103b4000)                         = 0x103b4000

And there it sits. I tried playing with /etc/sgml/catalog but seems it has no effect, jade goes infinite after the parsing, regardless of its contents.

Re-emerging openjade helps, and after that it works as expected.




Comment 2


Leonardo Boshell (RETIRED)






          2006-07-03 15:31:10 UTC
        

Does this still happen with the latest opensp?

The last sentence in comment #1 suggests this is probably a local problem, so closing for now. Please re-open if you have more information about this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

