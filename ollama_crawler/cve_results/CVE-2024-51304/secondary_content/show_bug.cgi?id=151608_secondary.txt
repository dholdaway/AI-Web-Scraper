Title: 151608 – Cross compiling with crossdev doesn't resolve dependencies properly ?
URL: https://bugs.gentoo.org/show_bug.cgi?id=151608

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 151608
Cross compiling with crossdev doesn't resolve dependencies properly ?
Last modified: 2010-09-22 22:00:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 151608 
      - Cross compiling with crossdev doesn't resolve dependencies properly ?


Summary:
Cross compiling with crossdev doesn't resolve dependencies properly ?
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-16 09:45 UTC by Gerry





      Modified:
    
2010-09-22 22:00 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



generatorglukoff









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Gerry





          2006-10-16 09:45:15 UTC
        

I set up a cross-compile environment on amd64 for i686, using this: http://www.gentoo.org/proj/en/base/embedded/cross-development.xml

Using the xmerge wrapper script from there to emerge packages.

However, xmerge doesn't seem to always resolve dependencies properly.  For example, emerging arts stopped with an error about missing Xext.  Emerging Xext depended on a lot of stuff, so part of it seems to be working, at least, but while installing libX11, the emerge stopped several times again complaining about missing header files.  After finding out which packages provided these headers (using 'equery b' in the build system) and installing those (xf86bigfontproto, bigreqsproto, etc), X11 emerged fine (well, after working around bug #151589).  But looking at the libX11-1.0.3 emerge file, I can see that it does depend directly on these packages, so emerge should have been able to figure this out.  This is just an example, other packages also show this problem.  (If I were to guess, I'd say it looks like emerge gets confused by the fact that these packages *are* installed on the build system and then seems to think they're available for the cross-environment as well ?)

emerge --info and xmerge --info in next comment.




Comment 1


Gerry





          2006-10-16 09:46:25 UTC
        

# emerge --info
Portage 2.1.1-r1 (default-linux/amd64/2006.1/desktop, gcc-4.1.1, glibc-2.4-r3, 2.6.17-gentoo-r8 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r8 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4200+
Gentoo Base System version 1.12.5
Last Sync: Mon, 16 Oct 2006 00:30:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="ftp://trumpetti.atm.tut.fi/gentoo/ http://mirror.gentoo.no/"
LANG="nb_NO.UTF-8"
LC_ALL="nb_NO.UTF-8"
LINGUAS="no nb no_NO nb_NO"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/initng-portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 16bit 7zip S3TC X Xaw3d a52 aac aalib acl acpi alsa ao aotuv apache2 applet arts artworkextra asf audiofile bash-completion berkdb bitmap-fonts browserplugin bzip2 cairo capslib ccache cdparanoia cdr cli crypt css ctype cups curl cvs dbus dlloader dri dvd dvdr dvdread eds elf elibc_glibc emboss emul-linux-x86 encode esd exif expat fam fame fat ffmpeg firefox flac flash fortran gcj gd gdb gdbm gif gimp glitz glut glx gmp gnome gpm graphviz gstreamer gtk gtk2 gtkhtml guile gzip h323 hal i8x0 icecast idn ieee1394 imagemagick imap imlib imlib2 initng_plugins_also initng_plugins_bash_launcher initng_plugins_chdir initng_plugins_chroot initng_plugins_conflict initng_plugins_cpout initng_plugins_critical initng_plugins_cron initng_plugins_daemon initng_plugins_dev initng_plugins_dllaunch initng_plugins_envparser initng_plugins_find initng_plugins_fstat initng_plugins_history initng_plugins_idleprobe initng_plugins_initctl initng_plugins_interactive initng_plugins_iparser initng_plugins_last initng_plugins_limit initng_plugins_logfile initng_plugins_netprobe initng_plugins_ngc4 initng_plugins_pause initng_plugins_pidfile initng_plugins_provide initng_plugins_reload initng_plugins_renice initng_plugins_rlparser initng_plugins_simple_launcher initng_plugins_stcmd initng_plugins_stdout initng_plugins_suid initng_plugins_syncron initng_plugins_syslog initng_plugins_unneeded input_devices_joystick input_devices_keyboard input_devices_mouse intl ipv6 jabber jack jack-tmpfs java javascript joystick jpeg kde kdeenablefinal kdehiddenvisibility kernel_linux kqemu lame lcms ldap libcaca libg++ linguas_nb linguas_nb_NO linguas_no linguas_no_NO linuxthreads-tls logitech-mouse lua lzo mad matroska md5sum mhash mikmod ming mjpeg mmap mng mod modplug mono mozilla moznocompose moznoirc moznomail moznoroaming mp3 mp4 mp4live mpeg mpeg2 mplayer mpm-prefork musepack music musicbrainz ncurses nforce2 nls no nptl nptlonly nsplugin ntfs nvidia nvram objc ocaml ogg oggvorbis openal opengl openssh openssl oss pam paste64 pcre pdf perl php physfs png pnp povray ppds pppd python qemu-fast qt3 qt4 quicktime rar readline reflection samba scanner sdk sdl sdl-sound session sharedext sharedmem sid slang smp sms speex spell spl sse-filters ssl startup-notification stencil-buffer subtitles subversion svg sysfs tcpd tga theora thesaurus threads tiff timidity transcode truetype truetype-fonts type1 type1-fonts udev unicode usb userland_GNU vcd video_cards_fbdev video_cards_nv video_cards_nvidia video_cards_vesa videos vorbis wma wma123 wxwindows x264 xanim xine xml xml2 xmms xorg xpm xrandr xscreensaver xv xvid yv12 zip zlib"Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS

# xmerge --info
Portage 2.1.1-r1 (default-linux/x86/no-nptl/2.4, gcc-4.1.1, unavailable, 2.6.17-gentoo-r8 x86_64)
=================================================================
System uname: 2.6.17-gentoo-r8 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4200+
Gentoo Base System version 1.12.5
Last Sync: Mon, 16 Oct 2006 00:30:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://trumpetti.atm.tut.fi/gentoo/ http://mirror.gentoo.no/"
LANG="nb_NO.UTF-8"
LC_ALL="nb_NO.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa aotuv apm arts berkdb bitmap-fonts cli crypt cups dlloader dri eds elibc_glibc emboss encode esd fbcon foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib input_devices_joystick input_devices_keyboard input_devices_mouse ipv6 isdnlog jpeg kde kdeenablefinal kernel_linux libg++ libwww mad mikmod minimal motif mp3 mpeg ncurses nls ogg opengl oss pam pcre perl png pppd python qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts unicode userland_GNU video_cards_none vorbis x86 xml xmms xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 2


SpanKY






          2006-10-16 13:34:11 UTC
        

has nothing to do with crossdev really

this is an on going development with portage

in the meantime, you will prob have to do some manual merging




Comment 3


Gerry





          2006-10-16 13:52:38 UTC
        

Sure, I can do it manually for now, but I don't understand why you marked this "RESOLVED WORKSFORME" when you actually acknowledged that the bug is valid and exists ?  I get the feeling that this means it's just going to get ignored.  Shouldn't the bug be left open ?





Comment 4


SpanKY






          2006-10-16 14:31:15 UTC
        

because it's a work in progress and trying to track it here has no value

there are plenty of other portage bugs which track specific issues which sum up to the final result




Comment 5


Gerry





          2006-10-17 07:28:02 UTC
        

No value ?  I disagree.  No value for the bugfixers, perhaps, but for me and others running into this bug, it would make us aware of any progress on this and let us know if/when the bug is fixed.  If people search for this bug now and finds this, they'll see "RESOLVED WORKSFORME" and erroneously think the bug is fixed or doesn't exist, maybe ending up posting a duplicate in stead.  Not only is this bug not fixed, but I doubt it'd work for you either if you tried (since you said it's a known problem), so that state is just plain wrong.

Since you say multiple other bugs sum up to this one, I think the right way to have handled this would be to mark this bug as VERIFIED, and then enter the bugs that sum up to this into the "bug depends on.." list.  That way it'd not be any extra work for the bug fixers, and also be nice and informative for the rest of us.





Comment 6


Michał Górny









          2010-09-22 17:10:15 UTC
        

*** Bug 327339 has been marked as a duplicate of this bug. ***




Comment 7


Michał Górny









          2010-09-22 17:11:57 UTC
        

Reopening due to fresh bugreport showing that the reason might be 'emerge wrapper with --root-deps=rdeps included as default'.




Comment 8


SpanKY






          2010-09-22 22:00:00 UTC
        

except for the part where --root-deps=rdeps didnt exist in 2006









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

