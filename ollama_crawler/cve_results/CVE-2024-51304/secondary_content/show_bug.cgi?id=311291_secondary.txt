Title: 311291 – =dev-libs/openssl-0.9.8n fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=311291

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 311291
=dev-libs/openssl-0.9.8n fails to compile
Last modified: 2010-03-31 09:35:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 311291 
      - =dev-libs/openssl-0.9.8n fails to compile


Summary:
=dev-libs/openssl-0.9.8n fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

All
        OS X
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-03-25 11:08 UTC by nietonfir





      Modified:
    
2010-03-31 09:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log of failed openssl-0.9.8n emerge

              (build.log,72.26 KB,
                text/plain)

            
2010-03-25 11:09 UTC,

            nietonfir




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


nietonfir





          2010-03-25 11:08:41 UTC
        

Latest 'soon-to-be-stable'[*] openssl fails to compile with:
FATAL:/Users/zafi/Gentoo/usr/lib/binutils/x86_64-apple-darwin10/3.2/x86_64/as: I don't understand '-' flag!
make[1]: *** [cryptlib.o] Fehler 1


[*] http://bugs.gentoo.org/show_bug.cgi?id=308011

Emerge.info:
------
Portage 2.2.00.15842-prefix (prefix/darwin/macos/10.6/x64, gcc-4.2.1, unavailable, 10.2.0 i386)
=================================================================
                        System Settings
=================================================================
System uname: Darwin-10.2.0-i386-64bit
Timestamp of tree: Thu, 25 Mar 2010 08:36:39 +0000
distcc 2.18.5-Apple.1 i386-apple-darwin10.0 (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.6.4-r1
dev-util/cmake:      2.8.1
sys-devel/autoconf:  2.13, 2.63-r01.1
sys-devel/automake:  1.10.2-r00.1, 1.11.1
sys-devel/gcc-config: 1.4.1-r00.2
sys-devel/libtool:   2.2.6b
ACCEPT_KEYWORDS="~x64-macos"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-apple-darwin10"
CFLAGS="-O2 -pipe -fomit-frame-pointer -march=nocona"
CHOST="x86_64-apple-darwin10"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -pipe -fomit-frame-pointer -march=nocona"
DISTDIR="/Users/zafi/Gentoo/usr/portage/distfiles"
FEATURES="assume-digests collision-protect distlocks fixpackages news nostrip parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="de_AT.UTF-8"
LDFLAGS=""
LINGUAS="en de"
MAKEOPTS="-j3"
PKGDIR="/Users/zafi/Gentoo/usr/portage/packages"
PORTAGE_CONFIGROOT="/Users/zafi/Gentoo/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/Users/zafi/Gentoo/var/tmp"
PORTDIR="/Users/zafi/Gentoo/usr/portage"
PORTDIR_OVERLAY="/Users/zafi/Gentoo/usr/local/portage/main-overlay"
SYNC="rsync://rsync.prefix.freens.org/gentoo-portage-prefix"
USE="aqua bash-completion coreaudio cracklib cxx mmx mmxext modules ncurses nls objc objc++ prefix readline sse sse2 ssl unicode x64-macos zlib" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="Darwin" INPUT_DEVICES="keyboard mouse" KERNEL="Darwin" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en de" RUBY_TARGETS="ruby18" USERLAND="GNU" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


emerge.verbose:
-----
[ebuild     U ] dev-libs/openssl-0.9.8n [0.9.8l-r2] USE="sse2 zlib -bindist -gmp -kerberos -test"




Comment 1


nietonfir





          2010-03-25 11:09:42 UTC
        

Created attachment 225209 [details]
build.log of failed openssl-0.9.8n emerge

build.log too long to paste it inside a comment, attached instead.




Comment 2


nietonfir





          2010-03-25 11:11:31 UTC
        

This is rather important because apache-2.2.15 requires >openssl-0.9.8m and as mentioned in [*], some serious security issues have been fixed.


[*] http://bugs.gentoo.org/show_bug.cgi?id=308011




Comment 3


Ramon





          2010-03-29 21:48:56 UTC
        

confirmed, I have the same issue

I tested with an openssl-0.9.8n with the openssl-0.9.7e-gentoo.patch commented out, given the comment in the openssl-0.9.8l-r2 ebuild

Failure:

making all in crypto...
make[1]: Entering directory `/Volumes/Shared/prefix-64/var/tmp/portage/dev-libs/openssl-0.9.8n/work/openssl-0.9.8n/crypto'
( echo "#ifndef MK1MF_BUILD"; \
        echo '  /* auto-generated by crypto/Makefile for crypto/cversion.c */'; \
        echo '  #define CFLAGS "x86_64-apple-darwin10-gcc -fPIC -fno-common -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -arch x86_64 -DL_ENDIAN -DMD32_REG_T=int -Wall -O2 -pipe -march=nocona -fno-strict-aliasing -Wa,--noexecstack"'; \
        echo '  #define PLATFORM "darwin64-x86_64-cc"'; \
        echo "  #define DATE \"`LC_ALL=C LC_TIME=C date`\""; \
        echo '#endif' ) >buildinf.h
x86_64-apple-darwin10-gcc -I. -I.. -I../include -fPIC -fno-common -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -arch x86_64 -DL_ENDIAN -DMD32_REG_T=int -Wall -O2 -pipe -march=nocona -fno-strict-aliasing -Wa,--noexecstack   -c -o cryptlib.o cryptlib.c
cc1: error: unrecognized command line option "-arch"
FATAL:/Volumes/Shared/prefix-64/usr/lib/binutils/x86_64-apple-darwin10/3.2/x86_64/as: I don't understand '-' flag!
make[1]: *** [cryptlib.o] Error 1
make[1]: Leaving directory `/Volumes/Shared/prefix-64/var/tmp/portage/dev-libs/openssl-0.9.8n/work/openssl-0.9.8n/crypto'
make: *** [build_crypto] Error 1
 * ERROR: dev-libs/openssl-0.9.8n failed:
 *   make all failed




Comment 4


Ramon





          2010-03-29 21:49:52 UTC
        

Portage 2.2.00.15842-prefix (prefix/darwin/macos/10.6/x64, gcc-4.2.1, unavailable, 10.2.0 i386)
=================================================================
System uname: Darwin-10.2.0-i386-64bit
Timestamp of tree: Mon, 29 Mar 2010 20:36:58 +0000
distcc 2.18.5-Apple.1 i386-apple-darwin10.0 (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     4.0_p37
dev-lang/python:     2.6.4
dev-python/pycrypto: 2.1.0
dev-util/cmake:      2.8.0-r2
sys-devel/autoconf:  2.63-r01.1
sys-devel/automake:  1.10.2-r00.1, 1.11.1
sys-devel/gcc-config: 1.4.1-r00.2
sys-devel/libtool:   2.2.6b
ACCEPT_KEYWORDS="~x64-macos"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-apple-darwin10"
CFLAGS="-O2 -pipe -march=nocona"
CHOST="x86_64-apple-darwin10"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS=""
DISTDIR="/Volumes/Shared/prefix-64/usr/portage/distfiles"
FEATURES="assume-digests collision-protect distlocks fixpackages metadata-transfer news nostrip parallel-fetch preserve-libs protect-owned sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS=""
PKGDIR="/Volumes/Shared/prefix-64/usr/portage/packages"
PORTAGE_CONFIGROOT="/Volumes/Shared/prefix-64/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/Volumes/Shared/prefix-64/var/tmp"
PORTDIR="/Volumes/Shared/prefix-64/usr/portage"
PORTDIR_OVERLAY="/Users/ramonvanalteren/sourcecode/gentoo/personal /Users/ramonvanalteren/sourcecode/gentoo/bzr-gentoo-overlay/sandbox"
SYNC="rsync://rsync.prefix.freens.org/gentoo-portage-prefix"
USE="aqua bash-completion bzip2 coreaudio cracklib cxx iconv ipv6 mmx mmxext modules ncurses nls objc objc++ pcre prefix python readline sse sse2 ssl unicode vim-syntax x64-macos zlib" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="Darwin" INPUT_DEVICES="keyboard mouse" KERNEL="Darwin" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" RUBY_TARGETS="ruby18" USERLAND="GNU" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 5


Fabian Groffen






          2010-03-30 06:50:51 UTC
        

I just synced and put it in the tree.  I don't think it will resolve the issue, but since the ebuild changes are non-trivial, it's nicer when we all talk about the same code.




Comment 6


Fabian Groffen






          2010-03-30 18:08:08 UTC
        

hmmm, it compiles without problems here...




Comment 7


nietonfir





          2010-03-31 09:31:01 UTC
        

(In reply to comment #6)
> hmmm, it compiles without problems here...
> 

Indeed, it does! Now that's really weird, but thx anyway. ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

