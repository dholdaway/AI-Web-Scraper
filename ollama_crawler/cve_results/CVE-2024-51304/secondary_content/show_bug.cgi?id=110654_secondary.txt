Title: 110654 – mozilla-thunderbird-bin-1.0.7 won't start as non root user
URL: https://bugs.gentoo.org/show_bug.cgi?id=110654

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 110654
mozilla-thunderbird-bin-1.0.7 won't start as non root user
Last modified: 2006-07-30 17:18:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 110654 
      - mozilla-thunderbird-bin-1.0.7 won't start as non root user


Summary:
mozilla-thunderbird-bin-1.0.7 won't start as non root user
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-27 15:28 UTC by Rodrigo Severo





      Modified:
    
2006-07-30 17:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Run against existing .thunderbird directory

              (tbird-with-profile.txt,3.71 KB,
                text/plain)

            
2005-10-27 18:42 UTC,

            antiher0




Details





The strace file with the segmentation fault (strace -ff -tt -v -o...)

              (thunderbird.2075.gz,55.44 KB,
                application/octet-stream)

            
2005-11-29 05:42 UTC,

            Rodrigo Severo




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rodrigo Severo





          2005-10-27 15:28:25 UTC
        

If I try to open thunderbird (from mozilla-thunderbird-bin-1.0.7) as a non root
user I get a segmentation fault.

If I try as root, it works fine.

Reproducible: Always
Steps to Reproduce:
1. try to open thunderbird as non root user
2.
3.

Actual Results:  
I get the following segmentation fault:

rodrigo@fellini ~ $ thunderbird
No running windows found

(thunderbird-bin:11257): Gdk-WARNING **: gdk_property_get(): length value has
wrapped in calculation (did you pass G_MAXLONG?)
/usr/libexec/mozilla-launcher: line 116: 11257 Segmentation fault      "$mozbin"
"$@"
thunderbird-bin exited with non-zero status (139)


Expected Results:  
Opened successfully.

fellini rodrigo # emerge info
Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r3,
2.6.11-win4lin i686)
=================================================================
System uname: 2.6.11-win4lin i686 AMD Athlon(tm) XP 2500+
Gentoo Base System version 1.6.13
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=i686 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=i686 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg distcc distlocks fixpackages sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.ccccom.com http://gentoo.mirror.sdv.fr
http://distro.ibiblio.org/pub/Linux/distributions/gentoo/
http://gentoo.mirrors.pair.com/ http://gentoo.osuosl.org/"
LANG="pt_BR"
MAKEOPTS="-j9"
PKGDIR="/var/packages/"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/portage-fabrica"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X a52 aac aalib alsa apm arts audiofile avi bitmap-fonts bzip2 bzlib
cddb cdparanoia cdr crypt cups curl dga dts dvd edl eds emboss encode faac faad
fam fame ffmpeg flac foomaticdb fortran gd gdbm gif gimpprint gmp gpm gstreamer
gtk2 imagemagick imlib jbig jpeg jpeg2k kde kdeenablefinal lcms ldap libcaca
libg++ libwww live lzo mad matroska md5sum mikmod mjpeg mng motif mp3 mpeg mysql
ncurses nls ogg oggvorbis opengl oss pam pdflib perl png postgres ppds python qt
quicktime readline real ruby samba scanner sdl speex spell ssl svg svga tcpd tga
theora tiff truetype truetype-fonts type1-fonts udev unicode vcd vorbis
win32codecs wmf xine xinerama xml2 xmms xv xvid xvmc zlib userland_GNU
kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LC_ALL, LDFLAGS, LINGUAS




Comment 1


antiher0





          2005-10-27 18:42:58 UTC
        

Created attachment 71596 [details]
Run against existing .thunderbird directory




Comment 2


antiher0





          2005-10-27 18:44:23 UTC
        

Comment on attachment 71596 [details]
Run against existing .thunderbird directory

Sorry, wrong bug




Comment 3


Jory A. Pratt





          2005-10-27 19:05:55 UTC
        

please check permissions on $HOME/.thunderbird/* seems to me you have started it
using sudo or root through su. If this is the case as root chown -R
username:users /home/username to fix permissions on your entire user dir.




Comment 4


Rodrigo Severo





          2005-10-28 03:48:11 UTC
        

Answering Comment #3: the problem isn't this. Just for certainty, I executed the
chmod you suggested but nothing changed.

I fixed the problem. Analysing a strace of thunderbird I saw that it had
problems accessing some nscd files/directories. I started nscd and did the
chmods nscd init script asked me to. After that thunderbird worked fine.

As far as my personal problem matters, this bug can be closed. I am not closing
it myself just in case someone wants to further investigate the reason that the
unavailability of nscd affected thunderbird from mozilla-thunderbird-bin but not
thunderbird from mozilla-thunderbird.




Comment 5


Rodrigo Severo





          2005-11-29 05:42:00 UTC
        

Created attachment 73794 [details]
The strace file with the segmentation fault (strace -ff -tt -v -o...)

I said this bug could be closed. Well, I take it back :)

Thunderbird isn't starting again with the same symptons: it works as root but
not as a regular user.

Just for the sake of completude, I rechecked the permissions on
$HOME/.thunderbird/*. Everything is fine.

I made a strace of thunderbird as I did last time I had this problem. It was
through strace I found out the thunderbird was having problems with nscd.

Well, now the problems are elsewhere. Apparently it's having problems with a
getrlimit call:

11:31:37.765024 getrlimit(RLIMIT_NOFILE, {rlim_cur=1024, rlim_max=1024}) = 0
11:31:37.765208 --- SIGSEGV (Segmentation fault) @ 0 (0) ---
11:31:37.765284 rt_sigaction(SIGSEGV, NULL, {0xb7978dd0, [], 0}, 8) = 0

The above lines are taken from the strace log I sent. What's happening? How can
I fix this?




Comment 6


Stuart Longland (RETIRED)






          2006-07-30 06:43:49 UTC
        

Is this issue still present?  Have you tried upgrading Thunderbird to 1.5.0.5 (released today)?

I'm trying to clean up old bugs at the moment.  If you're still having problems, please advise... otherwise I'll resolve this bug.

Thanks,
Stuart Longland




Comment 7


Rodrigo Severo





          2006-07-30 10:28:46 UTC
        

(In reply to comment #6)
> Is this issue still present?

I really can't say. I'm not even using Thunderbird anymore.

>  Have you tried upgrading Thunderbird to 1.5.0.5
> (released today)?

No.

> I'm trying to clean up old bugs at the moment.  If you're still having
> problems, please advise... otherwise I'll resolve this bug.

As far as I'm concerned, this bug can be closed.




Comment 8


Stuart Longland (RETIRED)






          2006-07-30 17:18:32 UTC
        

Okay... I'll resolve it WORKSFORME... if anyone strikes trouble, feel free to re-open the bug and I'll look into it.

Appologies for the delay getting to this bug. (The mozilla herd has gone through quite a bit of termoil lately and things are only just settling down.)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

