Title: 348759 – www-plugins/lightspark-0.4.5 fails to build with sys-devel/llvm-2.8-r1
URL: https://bugs.gentoo.org/show_bug.cgi?id=348759

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348759
www-plugins/lightspark-0.4.5 fails to build with sys-devel/llvm-2.8-r1
Last modified: 2010-12-15 15:23:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348759 
      - www-plugins/lightspark-0.4.5 fails to build with sys-devel/llvm-2.8-r1


Summary:
www-plugins/lightspark-0.4.5 fails to build with sys-devel/llvm-2.8-r1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Chí-Thanh Christopher Nguyễn








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-12-15 02:48 UTC by Andrew Savchenko





      Modified:
    
2010-12-15 15:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,11.75 KB,
                text/plain)

            
2010-12-15 02:50 UTC,

            Andrew Savchenko




Details





environment

              (environment,114.12 KB,
                text/plain)

            
2010-12-15 02:50 UTC,

            Andrew Savchenko




Details





emerge --info

              (emerge-info,7.69 KB,
                text/plain)

            
2010-12-15 02:50 UTC,

            Andrew Savchenko




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew Savchenko






          2010-12-15 02:48:28 UTC
        

Hello,

lightspark-0.4.5 fails to compile with llvm-2.8-r1 and gcc-4.5-r1 on ~x86:

[  5%] Building CXX object CMakeFiles/spark.dir/frame.cpp.o
In file included from /usr/include/llvm/Support/Allocator.h:17:0,
                 from /usr/include/llvm/ADT/StringMap.h:18,
                 from /usr/include/llvm/PassRegistry.h:20,
                 from /usr/include/llvm/PassSupport.h:25,
                 from /usr/include/llvm/Pass.h:366,
                 from /usr/include/llvm/PassManager.h:20,
                 from /var/tmp/portage/www-plugins/lightspark-0.4.5/work/lightspark-0.4.5/scripting/abc.h:27,
                 from /var/tmp/portage/www-plugins/lightspark-0.4.5/work/lightspark-0.4.5/frame.cpp:20:
/usr/include/llvm/Support/AlignOf.h:57:24: error: expected unqualified-id before ‘alignof’

I tried with FEATURES="-distcc -ccache" MAKEOPTS="-j1", but result is the same.




Comment 1


Andrew Savchenko






          2010-12-15 02:50:02 UTC
        

Created attachment 257195 [details]
build.log




Comment 2


Andrew Savchenko






          2010-12-15 02:50:20 UTC
        

Created attachment 257197 [details]
environment




Comment 3


Andrew Savchenko






          2010-12-15 02:50:39 UTC
        

Created attachment 257198 [details]
emerge --info




Comment 4


Andrew Savchenko






          2010-12-15 03:07:11 UTC
        

It seems to be a known issue in llvm that is claimed to be fixed upstream:
http://markmail.org/message/4d7vcdsamfvu45lz




Comment 5


Andrew Savchenko






          2010-12-15 03:15:58 UTC
        

I can't build llvm-9999 to test this, because of failed llvm-2.7-nodoctargz.patch.





Comment 6


Chí-Thanh Christopher Nguyễn






          2010-12-15 10:31:15 UTC
        

From your emerge --info:
Timestamp of tree: Sun, 12 Dec 2010 20:00:01 +0000
From ChangeLog:
+# $Header: /var/cvsroot/gentoo-x86/www-plugins/lightspark/ChangeLog,v 1.21 2010/12/12 21:21:38 chithanh Exp $
+
+  12 Dec 2010; Chí-Thanh Christopher Nguyễn <chithanh@gentoo.org>
+  lightspark-0.4.5.ebuild, +files/lightspark-0.4.5-llvm-2.8-gcc-4.5.patch:
+  Work around llvm-2.8 issue with gcc-4.5, bug #348552

Please reopen if the issue still exists after running emerge --sync.




Comment 7


Andrew Savchenko






          2010-12-15 15:23:44 UTC
        

Yes, my portage tree was somewhat outdated.
Problem is solved.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

