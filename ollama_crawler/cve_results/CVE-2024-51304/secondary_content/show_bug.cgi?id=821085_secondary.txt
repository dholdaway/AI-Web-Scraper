Title: 821085 – app-i18n/ibus-1.5.25 - emojier.c: error: expected identifier or ( before while
URL: https://bugs.gentoo.org/show_bug.cgi?id=821085

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 821085
app-i18n/ibus-1.5.25 - emojier.c: error: expected identifier or ( before while
Last modified: 2022-04-14 20:43:11 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 821085 
      - app-i18n/ibus-1.5.25 - emojier.c: error: expected identifier or ( before while


Summary:
app-i18n/ibus-1.5.25 - emojier.c: error: expected identifier or ( before while
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

CJK Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-10-31 12:29 UTC by Toralf Förster





      Modified:
    
2022-04-14 20:43 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.12 KB,
                text/plain)

            
2021-10-31 12:29 UTC,

            Toralf Förster




Details





app-i18n:ibus-1.5.25:20211031-111447.log

              (app-i18n:ibus-1.5.25:20211031-111447.log,400.22 KB,
                text/plain)

            
2021-10-31 12:29 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,103.28 KB,
                text/plain)

            
2021-10-31 12:29 UTC,

            Toralf Förster




Details





environment

              (environment,137.22 KB,
                text/plain)

            
2021-10-31 12:29 UTC,

            Toralf Förster




Details





etc.portage.tar.bz2

              (etc.portage.tar.bz2,11.50 KB,
                application/x-bzip)

            
2021-10-31 12:30 UTC,

            Toralf Förster




Details





logs.tar.bz2

              (logs.tar.bz2,14.43 KB,
                application/x-bzip)

            
2021-10-31 12:30 UTC,

            Toralf Förster




Details





temp.tar.bz2

              (temp.tar.bz2,52.68 KB,
                application/x-bzip)

            
2021-10-31 12:30 UTC,

            Toralf Förster




Details





fix-emojier.patch

              (01-fix-emojier.patch,790 bytes,
                patch)

            
2021-12-22 06:58 UTC,

            Yixun Lan




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2021-10-31 12:29:53 UTC
        

      |             ^~~~~~~~~~~~~~~~~
emojier.c: At top level:
emojier.c:9097:17: error: expected identifier or ‘(’ before ‘while’
 9097 |                 while (((gpointer*) array)[length]) {
      |                 ^~~~~
emojier.c:9100:9: error: expected identifier or ‘(’ before ‘}’ token
 9100 |         }

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1_desktop_systemd-j4-20211030-053943

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-11.2.0 *
clang version 13.0.0
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/13/bin
/usr/lib/llvm/13
13.0.0
Python 3.9.7
Available Ruby profiles:
  [1]   ruby26 (with Rubygems)
  [2]   ruby27 (with Rubygems)
  [3]   ruby30 (with Rubygems) *
Available Rust versions:
  [1]   rust-1.56.0 *
The Glorious Glasgow Haskell Compilation System, version 8.10.4
php cli:

  HEAD of ::gentoo
commit 72f6877267795a912efcbf79676e5a00135e28d4
Author: Repository mirror & CI <repomirrorci@gentoo.org>
Date:   Sun Oct 31 09:51:30 2021 +0000

    2021-10-31 09:51:29 UTC

emerge -qpvO app-i18n/ibus
[ebuild   R   ] app-i18n/ibus-1.5.25  USE="X emoji gtk gtk2 introspection nls python unicode -kde -test -vala -wayland" PYTHON_TARGETS="python3_9 -python3_8 -python3_10%"




Comment 1


Toralf Förster






          2021-10-31 12:29:54 UTC
        

Created attachment 747684 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2021-10-31 12:29:56 UTC
        

Created attachment 747687 [details]
app-i18n:ibus-1.5.25:20211031-111447.log




Comment 3


Toralf Förster






          2021-10-31 12:29:57 UTC
        

Created attachment 747690 [details]
emerge-history.txt




Comment 4


Toralf Förster






          2021-10-31 12:29:59 UTC
        

Created attachment 747693 [details]
environment




Comment 5


Toralf Förster






          2021-10-31 12:30:00 UTC
        

Created attachment 747696 [details]
etc.portage.tar.bz2




Comment 6


Toralf Förster






          2021-10-31 12:30:02 UTC
        

Created attachment 747699 [details]
logs.tar.bz2




Comment 7


Toralf Förster






          2021-10-31 12:30:03 UTC
        

Created attachment 747702 [details]
temp.tar.bz2




Comment 8


Yixun Lan







          2021-12-22 06:58:37 UTC
        

Created attachment 759995 [details, diff]
fix-emojier.patch

hi Toralf, I'm unable to reproduce this error, possibly triggered by certain cflag?

btw, could you try the attached patch? see if it fix the problem




Comment 9


Matt Turner






          2022-04-14 20:43:11 UTC
        

Both emojier.c files are generated from vala, so they're probably dependent on the vala version used.

From the build log:

> checking for valac... /usr/bin/valac-0.50

I cannot reproduce the failure with ibus 1.5.25-r1 or 1.5.26 when forcing vala to 0.50.

I don't think this is worth spending more time investigating given that no one else has seen this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

