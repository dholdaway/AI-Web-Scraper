Title: 87836 – beep-media-player SIGSEGV Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=87836

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 87836
beep-media-player SIGSEGV Segmentation fault
Last modified: 2005-06-29 12:56:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 87836 
      - beep-media-player SIGSEGV Segmentation fault


Summary:
beep-media-player SIGSEGV Segmentation fault
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       major
      


Assignee:

Tony Vroon (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-03 13:38 UTC by David Grant





      Modified:
    
2005-06-29 12:56 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



sadam31300
sound









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




bmp.strace

              (bmp.strace,375.62 KB,
                text/plain)

            
2005-04-03 13:39 UTC,

            David Grant




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Grant





          2005-04-03 13:38:10 UTC
        

-(/home/david:$)-> emerge info
Portage 2.0.51.19 (default-linux/x86/2004.3, gcc-3.3.5, glibc-2.3.4.20041102-r1, 2.6.11-gentoo-r4 i686)
=================================================================
System uname: 2.6.11-gentoo-r4 i686 AMD Athlon(tm) XP 2500+
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.1.3-r1,dev-lang/python-2.2.3-r6,dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb  7 2005, 16:26:57)]
ccache version 2.3 [enabled]
dev-lang/python:     2.1.3-r1, 2.2.3-r6, 2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -m3dnow -msse -mfpmath=sse -mmmx"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O3 -pipe -fomit-frame-pointer -m3dnow -msse -mfpmath=sse -mmmx"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="ftp://gentoo.ccccom.com ftp://ftp.ussg.iu.edu/pub/linux/gentoo ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo http://gentoo.mirrors.pair.com/ http://gentoo.osuosl.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex 4kstacks X Xaw3d aalib acpi alsa anthy apache2 apm artworkextra async atlas avi bash-completion berkdb bigger-fonts bitmap-fonts bonobo bzip2 cdparanoia cdr crypt cscope cups curl directfb divx4linux dvd dvdr emacs emboss encode fam fbcon fftw flac foomaticdb fortran gd gdbm geoip gif gimp gimpprint gnome gnuplot gpm gstreamer gtk gtk2 gtkhtml guile imagemagick imap imlib imlib2 ipv6 java javascript jikes joystick jpeg jpeg2k junit kde kdeenablefinal kdexdeltas latex ldap lesstif libg++ libwww mad maildir matroska migemo mmx mmx2 monkey mono mozcalendar mozdevelop mozilla mozp3p mozsvg mp3 mpeg mpi msn msoffice mysql nas ncurses net nethack network nls nntp no-old-linux noplugin nptl nptlonly nvidia oav odbc offensive ofx oggvorbis opengl operanom2 oss pam pda pdflib perl php pic plotutils png postgres ppds python qt quicktime quotes readline real ruby samba scanner sdl server slang smtp spell sqlite sse ssl svg svga symlink tcltk tcpd tetex theora threads tiff truetype truetype-fonts type1 type1-fonts usb v4l v4l2 vhosts wmf wxwindows xbase xml xml2 xmms xprint xv xvid zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS




Comment 1


David Grant





          2005-04-03 13:39:32 UTC
        

Created attachment 55229 [details]
bmp.strace

Here's the strace. Not sure if that helps at all. This is a very nasty bug. Has
gotten so me attention the bmp homepage:
http://www.sosdg.org/~larne/w/BMP_Homepage but none of their solutions or those
in the gentoo forums fix the problem.




Comment 2


Tony Vroon (RETIRED)






          2005-04-04 00:15:59 UTC
        

This is generally an ALSA problem. Could you try to locally package.mask alsa-lib-1.0.8 so your system will downgrade to 1.0.7?
The local package.mask is in /etc/portage, if it's not there yet, create it. Format is the same as /usr/portage/profiles/package.mask

This has fixed the problem for most, if not all stable users. (An alternate fix is to run ~x86 beep-media-player -r5, but this depends on alsa-lib-1.0.9-rc2 and means you'll have to upgrade to development-sources. I recommend downgrading ALSA instead of upgrading it).




Comment 3


David Grant





          2005-04-04 00:25:35 UTC
        

I'll give this a try in a little bit. For the record, I have tried all the suggestions on the gentoo forums thread and none of them worked.




Comment 4


David Grant





          2005-04-04 13:10:20 UTC
        

Tony, neither solution seems to work. The upgrade or the downgrade.




Comment 5


Tony Vroon (RETIRED)






          2005-04-04 14:06:18 UTC
        

Thanks for testing that, that at least rules out the most common problem.

I'd like to rule out CFLAGS, I see a few -m overrides that I don't trust.
Could you try with CFLAGS="-march=athlon-xp -O2 -fomit-frame-pointer -pipe"




Comment 6


David Grant





          2005-04-04 22:37:58 UTC
        

CFLAGS="-march=athlon-xp -O2 -fomit-frame-pointer -pipe" emerge beep-media-player

I did the above, but I still get the segfault. :-( Do I need to re-emerge alsa?




Comment 7


Tony Vroon (RETIRED)






          2005-04-05 04:32:05 UTC
        

If you have OSS emulation support, you could try without the ALSA output plugin with USE="-alsa oss" emerge beep-media-player
(It will still use ALSA, but through a different access layer, perhaps that keeps it from falling over)




Comment 8


David Grant





          2005-04-05 08:58:15 UTC
        

I tried that and it still doesn't work. :-(

Know any other audio players? :-)




Comment 9


Anonymous





          2005-05-31 01:30:43 UTC
        

Is this fixed already?




Comment 10


Anonymous





          2005-05-31 01:37:05 UTC
        

Is this fixed already?




Comment 11


Tony Vroon (RETIRED)






          2005-06-11 09:16:08 UTC
        

Please let me know if this issue still occurs (*without* the bmp-crossfade
plugin which is another issue) by reopening the bug.




Comment 12


Bruno Laturner Lemes





          2005-06-28 23:37:59 UTC
        

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.4.20041102-r1, 2.6.10-gentoo-r6 i686)
=================================================================
System uname: 2.6.10-gentoo-r6 i686 Intel(R) Pentium(R) 4 CPU 1.60GHz
Gentoo Base System version 1.6.12
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Apr 28 2005, 02:06:06)]
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=pentium4 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config
/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown
/usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo http://mirrors.tds.net/gentoo
http://www.las.ic.unicamp.br/pub/gentoo/ ftp://ftp.jaist.ac.jp/pub/os/Linux/Gentoo/"
LANG="pt_BR.UTF-8"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X a52 aac acl acpi aim alsa apache2 apm avi bash-completion berkdb
bitmap-fonts bmp bonobo bzip2 cdparanoia cdr cjk crypt curl divx4linux dvd dvdr
dvdread emboss encode fam ffmpeg flac font-server foomaticdb fortran ftp gd gdbm
gif gnome gpm gstreamer gtk gtk2 gtkhtml hal icq imagemagick imlib ipv6 java
joystick jpeg junit kerberos ldap libg++ libwww lua mad matroska mikmod mmx mmx2
motif moznocompose moznoirc moznomail mozsvg mp3 mpeg msn mysql mysqli ncurses
nis nls nptl nptlonly nvidia offensive ogg oggvorbis opengl oss pam pdflib perl
php png python quicktime readline samba sblive sdl slang spell sse sse2 ssl
subtitles subversion svg svga tcltk tcpd threads tidy tiff transcode truetype
truetype-fonts type1-fonts unicode usb vhosts vorbis win32codecs wmf wxwindows
xine xinerama xml xml2 xmms xosd xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS, LINGUAS

-----------

[ebuild   R   ] media-sound/beep-media-player-0.9.7-r4  +alsa -debug -esd +gnome
+mmx +mp3 +nls +oggvorbis -old-eq +oss 0 kB

-----------

Same problem here, SIGSEGV. I'm using the build-in kernel compiled ALSA. All x86
system. No other bmp plug-ins other than the default are installed

Workarounds:
-Use the OSS plugin instead of the ALSA one. (clean way)
-emerge xmms-alsa, copy/paste libALSA.* from /usr/lib/xmms/Output to
/usr/lib/bmp/Output (really dirty way, and you wont be able to use the
Preferences of the plugin)


New ALSA versions are breaking everyones programs, aren't they? Maybe I should
put a new kernel version to run, or maybe do that and modularize ALSA intead of
have it built in. Any suggestions?




Comment 13


Tony Vroon (RETIRED)






          2005-06-29 12:56:47 UTC
        

(In reply to comment #12)
> New ALSA versions are breaking everyones programs, aren't they? Any suggestions?

Please consider running ~x86 beep-media-player and ~x86 alsa-*
I can't mark beep-media-player-r6 stable until alsa-lib-1.0.9 goes stable. Sorry
about that.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

