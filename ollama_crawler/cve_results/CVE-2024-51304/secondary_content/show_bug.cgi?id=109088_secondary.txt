Title: 109088 – emerge kdebase-3.4.2-r1 fails with undefined type error.
URL: https://bugs.gentoo.org/show_bug.cgi?id=109088

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 109088
emerge kdebase-3.4.2-r1 fails with undefined type error.
Last modified: 2006-02-27 07:37:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 109088 
      - emerge kdebase-3.4.2-r1 fails with undefined type error.


Summary:
emerge kdebase-3.4.2-r1 fails with undefined type error.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-10-12 22:18 UTC by Aakash





      Modified:
    
2006-02-27 07:37 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Compilation Error.

              (compileError.txt,5.04 KB,
                text/plain)

            
2005-10-12 22:21 UTC,

            Aakash




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Aakash





          2005-10-12 22:18:16 UTC
        

The following error occurs during emerge of kde (actually during the emerge of
the  subsequent dependency - kdebase-3.4.2-r1):

kcookiespoliciesdlg_ui.cpp:125: error: invalid use of undefined type `struct
KListViewSearchLine'

The comprehensive listing of the compile error/s is attached as a file.

This bug may be related to bug 79222 which has been marked "RESOLVED".

Reproducible: Always
Steps to Reproduce:
1. emerge kde
2.
3.

Actual Results:  
A compile error (see attachment: compileError.txt) occurs.

Expected Results:  
successful build should occur.

Portage 2.0.53_rc5 (default-linux/amd64/2005.0, gcc-3.4.4, glibc-2.3.5-r2,
2.6.11-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.11-gentoo-r6 x86_64 AMD Athlon(tm) 64 FX-53 Processor
Gentoo Base System version 1.12.0_pre8
dev-lang/python:     2.3.4, 2.4.2
sys-apps/sandbox:    1.2.13
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/tomcat /usr/kde/2/share/config
/usr/kde/3.2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config
/usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb
/usr/lib64/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo
http://mirror.datapipe.net/gentoo ftp://gentoo.ccccom.com
http://194.83.57.15/sites/www.ibiblio.org/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/home/achopra/Portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa amd64 apache2 arts avi berkdb bitmap-fonts bonobo cdr crypt cups
curl eds emboss encode esd fam flac foomaticdb fortran gd gdbm gif gnome gphoto2
gpm gstreamer gtk gtk2 gtkhtml guile imlib ipv6 java jpeg junit kde ldap libwww
lzw lzw-tiff mad mikmod mozilla mp3 mpeg mysql ncurses nls nptl nptlonly ogg
opengl pam pdflib perl png python qt quicktime readline samba sdl slang spell
ssl tcpd tiff truetype-fonts type1-fonts usb userlocales vorbis xine xml xml2
xmms xpm xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Aakash





          2005-10-12 22:21:41 UTC
        

Created attachment 70530 [details]
Compilation Error.




Comment 2


Gregorio Guidi (RETIRED)






          2005-10-13 05:17:32 UTC
        

Which version of Qt do you have? 
Can you try recompiling kdelibs? This can be related to bug 81066. (see 
https://bugs.kde.org/show_bug.cgi?id=94803) 
 




Comment 3


Aakash





          2005-10-14 03:19:15 UTC
        

Here are the things I've tried before filing this bug:

* emerged qt followed by emerge kde - this results in the same exact issue.
* emerge unmerge all things kde (or so I think), including kdelibs, and then
emerge kde - this also results in the same issue. 

Currently I have:
*  x11-libs/qt
      Latest version available: 3.3.4-r8
      Latest version installed: 3.3.4-r8

For a sanity check, per your suggestion, I re-emerged kdelibs, and then tried to
emerge kde again but I get the same exact error.

Regarding https://bugs.kde.org/show_bug.cgi?id=94803) are you suggesting I
modify the code (as the kde bug description does), and use a portage overlay to
build?




Comment 4


Aakash





          2005-10-17 21:03:38 UTC
        

Same issue occurs with kdebase-3.4.3: 
kcookiesmanagementdlg_ui.cpp: In constructor
`KCookiesManagementDlgUI::KCookiesManagementDlgUI(QWidget*, const char*, uint)':
kcookiesmanagementdlg_ui.cpp:77: error: invalid use of undefined type `struct
KListViewSearchLine'
kcookiesmanagementdlg_ui.h:25: error: forward declaration of `struct
KListViewSearchLine'
kcookiesmanagementdlg_ui.cpp:78: error: no matching function for call to
`QHBoxLayout::addWidget(KListViewSearchLine*&)'
/usr/qt/3/include/qlayout.h:386: note: candidates are: void
QBoxLayout::addWidget(QWidget*, int, int)





Comment 5


Frederik Schmid





          2005-12-12 04:08:11 UTC
        

kdebase-3.4.3-r1 doesn't seem to fix this either...

kcookiesmanagementdlg_ui.cpp: In constructor
`KCookiesManagementDlgUI::KCookiesManagementDlgUI(QWidget*, const char*, uint)':
kcookiesmanagementdlg_ui.cpp:77: error: invalid use of undefined type `struct
KListViewSearchLine'






Comment 6


Frederik Schmid





          2005-12-18 11:50:13 UTC
        

Alright, finally got kdebase-3.4.3-r1 to compile. Apparently kde-widgets support was somehow missing from qt...

I think adding the path /usr/kde/3.4/lib/kde3/plugins/ to "Library Paths" in qtconfig solved the problem, not entirely sure though

I used this as a reference - http://bugs.kde.org/show_bug.cgi?id=94803




Comment 7


Caleb Tennis (RETIRED)






          2006-02-27 07:37:39 UTC
        

My guess is that it's a parallel make error.  I can't re-create it, though.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

