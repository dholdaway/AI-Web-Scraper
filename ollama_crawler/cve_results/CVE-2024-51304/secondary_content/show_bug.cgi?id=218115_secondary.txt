Title: 218115 – media-sound/bmpx-0.40.14 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=218115

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 218115
media-sound/bmpx-0.40.14 fails to compile
Last modified: 2008-04-19 11:27:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 218115 
      - media-sound/bmpx-0.40.14 fails to compile


Summary:
media-sound/bmpx-0.40.14 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:



N/A




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-04-17 13:40 UTC by Robert Bradbury





      Modified:
    
2008-04-19 11:27 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



betelgeuse









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Copy of error compiling database.cc

              (bmpx.err,3.66 KB,
                text/plain)

            
2008-04-17 13:43 UTC,

            Robert Bradbury




Details





emerge --info output

              (emerge.info,3.55 KB,
                text/plain)

            
2008-04-17 14:19 UTC,

            Robert Bradbury




Details





Fix attempt

              (bmpx-0.40.14-sqlite.patch,395 bytes,
                patch)

            
2008-04-17 14:38 UTC,

            Samuli Suominen (RETIRED)




Details
            | Diff





bmpx-0.40.14.ebuild

              (bmpx-0.40.14.ebuild,2.17 KB,
                text/plain)

            
2008-04-17 14:46 UTC,

            Samuli Suominen (RETIRED)




Details





Fix attempt #2

              (bmpx-0.40.14-sqlite.patch,374 bytes,
                patch)

            
2008-04-17 14:49 UTC,

            Samuli Suominen (RETIRED)




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robert Bradbury





          2008-04-17 13:40:34 UTC
        

The database.cc function in the current release of bmpx is missing a declaration for "sqlite3_prepare_v2" (used on line 521).

This error occurs in the .../work/bmpx-0.40.14/src directory.

Reproducible: Always

Steps to Reproduce:
1. Attempt to emerge 0.40.14 release of bmpx.
Actual Results:  
Fails to build package.

Expected Results:  
Package should build.

USE flags are:
USE="hal -debug -doc -modplug -networkmanager -sid -startup-notification"




Comment 1


Robert Bradbury





          2008-04-17 13:43:25 UTC
        

Created attachment 150054 [details]
Copy of error compiling database.cc




Comment 2


Samuli Suominen (RETIRED)






          2008-04-17 13:45:51 UTC
        

emerge --info, and sqlite version?




Comment 3


Samuli Suominen (RETIRED)






          2008-04-17 14:08:40 UTC
        

#bmp, Freenode

16:05 < QuiRK-> hmm, sqlite3_prepare_v2 has been introduced in sqlite 3.3.11 and later
16:06 < QuiRK-> but i think i have bumped sqlite requirements to 3.4

And ebuild deps also >=sqlite-3.4

Something doesn't match here..




Comment 4


Jeroen Roovers (RETIRED)






          2008-04-17 14:09:44 UTC
        

Looks like a gcc-4.3 problem.

Provide your emerge --info, please. And a more complete build log too, please.




Comment 5


Robert Bradbury





          2008-04-17 14:19:38 UTC
        

Created attachment 150064 [details]
emerge --info output

Versions on sqlite indicates that:
  /dev-db/sqlite-2.8.16-r4
and
  /dev-db/sqlite-3.5.6
are installed.

3.4.1 and 3.5.3 seem to be available in the portage tree.

It is worth noting that there are still a number of "current" packages (php, apr-util, sof, sqlite-ruby-2.2.3-r1, balsa and qt-4.3.2-r1) which appear to depend on the old sqlite-2.8.16-r4.




Comment 6


Samuli Suominen (RETIRED)






          2008-04-17 14:22:31 UTC
        

(In reply to comment #4)
> Looks like a gcc-4.3 problem.
> 
> Provide your emerge --info, please. And a more complete build log too, please.
> 

Not sure, builds fine with gcc-4.3 here.

16:10 < milosz> yeah no idea other than what QuiRK said
16:13 < QuiRK-> and i have also checked sqlite3_prepare_v2 has not been removed
from sqlite 3.5

Does it help if you remove sqlite 2 temporarily? It might be picking up the wrong version, i.e. bad slotting




Comment 7


Samuli Suominen (RETIRED)






          2008-04-17 14:38:49 UTC
        

Created attachment 150066 [details, diff]
Fix attempt

Try this




Comment 8


Samuli Suominen (RETIRED)






          2008-04-17 14:46:21 UTC
        

Created attachment 150068 [details]
bmpx-0.40.14.ebuild

Ebuild using the fix attempt..




Comment 9


Samuli Suominen (RETIRED)






          2008-04-17 14:49:11 UTC
        

Created attachment 150069 [details, diff]
Fix attempt #2




Comment 10


Samuli Suominen (RETIRED)






          2008-04-17 14:53:08 UTC
        

Well let me know if any of above worked, might want to also try upgrading to sqlite-3.5.6 which works for me. Actually, it might be the first thing to try. :/




Comment 11


Samuli Suominen (RETIRED)






          2008-04-17 15:02:00 UTC
        

(In reply to comment #10)
> Well let me know if any of above worked, might want to also try upgrading to
> sqlite-3.5.6 which works for me. Actually, it might be the first thing to try.
> :/
> 

Nevermind, you are using 3.5.6. Both 3.5.3 and 3.5.6 works here, odd. I should be really hitting the same error.




Comment 12


Robert Bradbury





          2008-04-17 16:07:48 UTC
        

I did not attempt any of the provided fixes.
I did unmerge sqlite-2.8.16-r4.  After that bmpx would emerge properly.
It is necessary to re-emerge sqlite-2.8.16-r4 for sqlite-ruby-2.2.3.

It is not clear whether the previously mentioned packages, other than sqlite-ruby actually depend upon sqlite-2.8.16 as they did not show up as being broken when a revdep -r was run (sqlite-ruby did show up as broken).

So there may be some kind of a slotting problem.




Comment 13


Samuli Suominen (RETIRED)






          2008-04-17 16:47:33 UTC
        

Petteri, Can you have a look at this? Thanks.




Comment 14


Robert Bradbury





          2008-04-17 17:56:01 UTC
        

I did not attempt any of the provided fixes.
I did unmerge sqlite-2.8.16-r4.  After that bmpx would emerge properly.
It is necessary to re-emerge sqlite-2.8.16-r4 for sqlite-ruby-2.2.3.

It is not clear whether the previously mentioned packages, other than
sqlite-ruby actually depend upon sqlite-2.8.16 as they did not show up as being
broken when a revdep -r was run (sqlite-ruby did show up as broken).

So there may be some kind of a slotting problem.





Comment 15


Samuli Suominen (RETIRED)






          2008-04-19 11:27:06 UTC
        

(In reply to comment #14)
> I did not attempt any of the provided fixes.
> I did unmerge sqlite-2.8.16-r4.  After that bmpx would emerge properly.
> It is necessary to re-emerge sqlite-2.8.16-r4 for sqlite-ruby-2.2.3.
> 
> It is not clear whether the previously mentioned packages, other than
> sqlite-ruby actually depend upon sqlite-2.8.16 as they did not show up as being
> broken when a revdep -r was run (sqlite-ruby did show up as broken).
> 
> So there may be some kind of a slotting problem.
> 

I'm closing this as WORKSFORME. I tried just about everything to reproduce this, with both sqlite's installed (also with different versions in each slot). Since it works for you too, now..

Please reopen, if duplicate is received or you can provide more information on howto reproduce.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

