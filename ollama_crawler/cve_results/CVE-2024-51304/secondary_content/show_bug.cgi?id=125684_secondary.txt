Title: 125684 – sources 2.6.15-gentoo-r7 need fPIC
URL: https://bugs.gentoo.org/show_bug.cgi?id=125684

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125684
sources 2.6.15-gentoo-r7 need fPIC
Last modified: 2006-07-20 01:13:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125684 
      - sources 2.6.15-gentoo-r7 need fPIC


Summary:
sources 2.6.15-gentoo-r7 need fPIC
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-10 02:28 UTC by infobox.oleg





      Modified:
    
2006-07-20 01:13 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




.config to kernel (make menuconfig ARCH=um)

              (config,14.22 KB,
                text/plain)

            
2006-03-10 02:31 UTC,

            infobox.oleg




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


infobox.oleg





          2006-03-10 02:28:06 UTC
        

Portage 2.1_pre5-r4 (default-linux/amd64/2005.1, gcc-3.4.5, glibc-2.3.6-r2, 2.6.12-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.6.14
ccache version 2.4 [disabled]
dev-lang/python:     2.3.5-r2, 2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=athlon64 -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=athlon64"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://ftp.easynet.nl/mirror/gentoo/ http://mirror.gentoo.no/ http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl acpi amd64 apache2 apm audiofile avi bash-completion bcmath berkdb bitmap-fonts bzip2 caps cdb crypt cups curl curlwrappers dba dbm dbx dedicated dio doc dri eds emboss encode exif expat fam fastcgi foomaticdb ftp gd gdbm gif gnutls gpm gstreamer gtk2 hal hardened iconv imlib innodb ipv6 jabber jpeg ldap libwww lzw lzw-tiff m17n-lib mad maildir mhash mmap mp3 mpeg msession mysql ncurses nis nls nptl ogg oss pam pcntl pcre pdflib php pic png posix postgres python qt quicktime readline sasl sdl session snmp sockets socks5 spl ssl svg sysvipc tcpd threads tiff truetype-fonts type1-fonts unicode usb userlocales vhosts xml xml2 xpm zlib zliob elibc_glibc kernel_linux userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Command: make linux ARCH=um

Error:
  ...
  CC      arch/um/sys-x86_64/syscalls.o
  CC      arch/um/sys-x86_64/sysrq.o
  SYMLINK arch/um/sys-x86_64/thunk.S
  AS      arch/um/sys-x86_64/thunk.o
  AR      arch/um/sys-x86_64/lib.a
  GEN     .version
  CHK     include/linux/compile.h
  UPD     include/linux/compile.h
  CC      init/version.o
  LD      init/built-in.o
  LD      .tmp_vmlinux1
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.5/../../../../x86_64-pc-linux-gnu/bin/ld: arch/um/drivers/built-in.o: relocation R_X86_64_32S against `a local symbol' can not be used when making a shared object; recompile with -fPIC
arch/um/drivers/built-in.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
  KSYM    .tmp_kallsyms1.S
nm: '.tmp_vmlinux1': No such file
No valid symbol.
make: *** [.tmp_kallsyms1.S] Error 1



The funny thing is, in chrooted environment to fresh gentoo "install" it compiles just fine:

Portage 2.0.54 (default-linux/amd64/2006.0, gcc-3.4.4, glibc-2.3.5-r2, 2.6.12-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.6.14
dev-lang/python:     2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa avi berkdb bitmap-fonts bzip2 crypt cups dri eds emboss encode expat foomaticdb fortran gif gnome gpm gstreamer gtk gtk2 imlib ipv6 jpeg kde lzw lzw-tiff mp3 mpeg ncurses nls nptl opengl pam pdflib perl png python qt quicktime readline sdl spell ssl tcpd tiff truetype-fonts type1-fonts udev usb userlocales xpm xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTDIR_OVERLAY




Comment 1


infobox.oleg





          2006-03-10 02:31:32 UTC
        

Created attachment 81827 [details]
.config to kernel (make menuconfig ARCH=um)

With this config compile failed.




Comment 2


Luis Medinas (RETIRED)






          2006-03-10 09:36:45 UTC
        

i tested here and it's fine 

Portage 2.1_pre5-r4 (default-linux/amd64/2006.0, gcc-4.1.0, glibc-2.3.6-r3, 2.6.15-gentoo-r7 x86_64)
=================================================================
System uname: 2.6.15-gentoo-r7 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.91.0.3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig cvs distlocks multilib-strict sandbox sfperms sign strict"
GENTOO_MIRRORS="ftp://ftp.ua.pt/pub/gentoo/ ftp://mirrors1.netvisao.pt/gentoo/ http://darkstar.ist.utl.pt/gentoo http://distfiles.gentoo.org"
LINGUAS="pt en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/gnome"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="amd64 16bit X alsa apache1 artworkextra atm avi beagle berkdb bitmap-fonts bonobo browserplugin bzip2 cairo cdparanoia cdr cdrom chroot cpudetection crypt cups dbus divx4linux dri dvd dvdr dvdread eds emboss emul-linux-x86 encode expat fbsplash font-server foomaticdb fortran freetype gif gimpprint gmail gmailtimestamps gnome gnome-print gnuplot gpm gstreamer gtk gtk2 hal iconv imlib imlib2 ipv6 irc jpeg kde lame logitech-mouse lzw lzw-tiff maildir mbox mono moznoirc moznomail mozsha1 mozxmlterm mp3 mpeg mplayer msn ncurses net nls nptl nvidia objc octave offensive opengl openssh openssl pam pdflib perl physfs png pnp ppds print python qt quicktime rar readline real rhythmbox sdl spell ssl startup-notification subtitles tcpd tiff toolbar truetype truetype-fonts type1-fonts usb userlocales videos vim xfs xpm xrandr xscreensaver xv xvid zlib elibc_glibc kernel_linux linguas_pt linguas_en userland_GNU"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LC_ALL, LDFLAGS





Comment 3


Simon Stelling (RETIRED)






          2006-06-22 13:52:23 UTC
        

can you still reproduce this with a current kernel?




Comment 4


Simon Stelling (RETIRED)






          2006-07-20 01:13:32 UTC
        

apparently not









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

