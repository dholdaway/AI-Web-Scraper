Title: 180977 – sys-devel/gcc-4.1.2 fails to update from gcc-4.1.1
URL: https://bugs.gentoo.org/show_bug.cgi?id=180977

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 180977
sys-devel/gcc-4.1.2 fails to update from gcc-4.1.1
Last modified: 2007-06-18 03:03:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 180977 
      - sys-devel/gcc-4.1.2 fails to update from gcc-4.1.1


Summary:
sys-devel/gcc-4.1.2 fails to update from gcc-4.1.1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-05 15:56 UTC by Martin Calko





      Modified:
    
2007-06-18 03:03 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



anant
cmartin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Calko





          2007-06-05 15:56:30 UTC
        

+++ This bug was initially created as a clone of Bug #170268 +++

End of update sys-devel/gcc-4.1.2 returned:
...
libbackend.a(modulo-sched.o):modulo-sched.c:(.text+0xf3e): more undefined references to `__gcov_one_value_profiler' follow
collect2: ld returned 1 exit status
make[2]: *** [cc1d] Error 1
make[2]: Leaving directory `/var/tmp/portage/gcc-4.1.2/work/build/gcc'
make[1]: *** [stageprofile_build] Error 2
make[1]: Leaving directory `/var/tmp/portage/gcc-4.1.2/work/build/gcc'
make: *** [profiledbootstrap] Error 2

!!! ERROR: sys-devel/gcc-4.1.2 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  ebuild.sh, line 1252:   Called toolchain_src_compile
  toolchain.eclass, line 26:   Called gcc_src_compile
  toolchain.eclass, line 1550:   Called gcc_do_make
  toolchain.eclass, line 1424:   Called die

!!! emake failed with profiledbootstrap
!!! If you need support, post the topmost build error, and the call stack if relevant.

Before all the errors and warning messages this was the last command executed:

c++   -march=athlon64 -O2 -pipe -fprofile-generate -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Wmissing-format-attribute     -DHAVE_CONFIG_H -I. -I. -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/. -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/../include -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/../libcpp/include     -I. -I. -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/. -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/../include -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/../libcpp/include  -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/d -I/var/tmp/portage/gcc-4.1.2/work/gcc-4.1.2/gcc/d/dmd -Id -D_GNU_SOURCE=1 -D_DH=1 -DD_NO_TRAMPOLINES=1 -DELFOBJ=1 -DD_GCC_VER=41 -Wno-missing-braces -fmessage-length=0  -o cc1d \
                d/id.gen.o d/impcnvtab.gen.o attribs.o cppdefault.o d/access.dmd.o d/array.dmd.o d/attrib.dmd.o d/cast.dmd.o d/class.dmd.o d/cond.dmd.o d/constfold.dmd.o d/dchar.dmd.o d/declaration.dmd.o d/delegatize.dmd.o d/doc.dmd.o d/dsymbol.dmd.o d/dump.dmd.o d/entity.dmd.o d/enum.dmd.o d/expression.dmd.o d/func.dmd.o d/gnuc.dmd.o d/hdrgen.dmd.o d/html.dmd.o d/identifier.dmd.o d/import.dmd.o d/init.dmd.o d/inline.dmd.o d/interpret.dmd.o d/lexer.dmd.o d/lstring.dmd.o d/macro.dmd.o d/mangle.dmd.o d/mem.dmd.o d/mtype.dmd.o d/module.dmd.o d/opover.dmd.o d/optimize.dmd.o d/parse.dmd.o d/root.dmd.o d/scope.dmd.o d/statement.dmd.o d/staticassert.dmd.o d/stringtable.dmd.o d/struct.dmd.o d/template.dmd.o d/todt.dmd.o d/toobj.dmd.o d/typinf.dmd.o d/unialpha.dmd.o d/utf.dmd.o d/version.dmd.o d/d-lang.glue.o d/d-decls.glue.o d/d-codegen.glue.o d/d-objfile.glue.o d/d-irstate.glue.o d/d-glue.glue.o d/d-convert.glue.o d/gcc-mars.glue.o d/d-todt.glue.o d/d-gcc-real.glue.o d/d-gt.cglue.o d/d-builtins.cglue.o d/d-misc.cglue.o d/d-builtins2.glue.o d/symbol.glue.o d/asmstmt.glue.o d/dt.glue.o  main.o  libbackend.a ../libcpp/libcpp.a ../libcpp/libcpp.a   ../libiberty/libiberty.a
d/d-builtins.cglue.o: In function `handle_vector_size_attribute':
d-builtins.c:(.text+0x207cf): undefined reference to `__gcov_one_value_profiler'
d-builtins.c:(.text+0x207e3): undefined reference to `__gcov_pow2_profiler'
d-builtins.c:(.text+0x20815): undefined reference to `__gcov_interval_profiler'
/bin/sh /var/tmp/portage/sys-devel/gcc-4.1.2/work/gcc-4.1.2/gcc/../move-if-change tmp-attrtab.c insn-attrtab.c
insn-attrtab.c is unchanged
echo timestamp > s-attrtab
stage1/xgcc -Bstage1/ -B/usr/i686-pc-linux-gnu/bin/   -O2 -march=athlon-xp -pipe -fprofile-generate -DIN_GCC   -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes -pedantic -Wno-long-long -Wno-variadic-macros -Wold-style-definition -Wmissing-format-attribute     -DHAVE_CONFIG_H -I. -I. -I/var/tmp/portage/sys-devel/gcc-4.1.2/work/gcc-4.1.2/gcc -I/var/tmp/portage/sys-devel/gcc-4.1.2/work/gcc-4.1.2/gcc/. -I/var/tmp/portage/sys-devel/gcc-4.1.2/work/gcc-4.1.2/gcc/../include -I/var/tmp/portage/sys-devel/gcc-4.1.2/work/gcc-4.1.2/gcc/../libcpp/include     -c insn-attrtab.c \
          -o insn-attrtab.o
{standard input}: Assembler messages:
{standard input}:33424: Warning: end of file not at end of a line; newline inserted
xgcc: Internal error: Killed (program cc1)
Please submit a full bug report.
See <URL:http://bugs.gentoo.org/> for instructions.
make[2]: *** [insn-attrtab.o] Error 1
make[2]: Leaving directory `/var/tmp/portage/sys-devel/gcc-4.1.2/work/build/gcc'
make[1]: *** [stageprofile_build] Error 2
make[1]: Leaving directory `/var/tmp/portage/sys-devel/gcc-4.1.2/work/build/gcc'
make: *** [profiledbootstrap] Error 2

!!! ERROR: sys-devel/gcc-4.1.2 failed.
Call stack:
  ebuild.sh, line 1615:   Called dyn_compile
  ebuild.sh, line 972:   Called qa_call 'src_compile'
  ebuild.sh, line 44:   Called src_compile
  ebuild.sh, line 1305:   Called toolchain_src_compile
  toolchain.eclass, line 26:   Called gcc_src_compile
  toolchain.eclass, line 1541:   Called gcc_do_make
  toolchain.eclass, line 1415:   Called die

!!! emake failed with profiledbootstrap
!!! If you need support, post the topmost build error, and the call stack if relevant.
!!! A complete build log is located at '/var/log/portage/sys-devel:gcc-4.1.2:20070605-145503.log'.
...




Comment 1


Martin Calko





          2007-06-05 15:57:06 UTC
        

Here is the USE flags I have in /etc/make.conf:
USE="acl acpi apache2 apm bash-completion bcmath berkdb bzip2 caps crypt ctype cups curl curlwrappers dba dri encode ethereal foomaticdb ftp gd gpm gtk2 hal hardened iconv imlib inifile innodb ipv6 java javascipt ldap libwww lm_sensors maildir mailbox mbox mhash milter mmap mmx mpi mysql ncurses nptl nptlonly pam pcntl pcre perl php posix radius readline samba session sharedext slp sockets source sse ssl svga sysvipc tcpd threads unicode usb xml2 zlib 3dnow"

Reproducible: Always

Steps to Reproduce:
emerge -u sys-devel/gcc  (updates gcc-4.1.1 to gcc-4.1.2)

Output of emerge --info
Portage 2.1.2.7 (default-linux/x86/2007.0, gcc-4.1.1, glibc-2.5-r3, 2.6.20-gentoo-r8 i686)
=================================================================
System uname: 2.6.20-gentoo-r8 i686 AMD Athlon(TM) XP 2400+
Gentoo Base System release 1.12.9
Timestamp of tree: Tue, 05 Jun 2007 00:00:08 +0000
dev-java/java-config: 1.3.7, 2.0.31-r5
dev-lang/python:     2.3.5-r3, 2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.linux.cz/pub/linux/gentoo http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo http://src.gentoo.pl http://gentoo.ynet.sk/pub"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow acl acpi apache2 apm bash-completion bcmath berkdb bitmap-fonts bzip2 caps cli cracklib crypt ctype cups curl curlwrappers dba dri encode ethereal foomaticdb fortran ftp gd gdbm gpm gtk2 hal hardened iconv imlib inifile innodb ipv6 isdnlog java javascipt ldap libg++ libwww lm_sensors mailbox maildir mbox mhash midi milter mmap mmx mpi mudflap mysql ncurses nls nptl nptlonly openmp pam pcntl pcre perl php posix pppd python radius readline reflection samba session sharedext slp sockets source spl sse ssl svga sysvipc tcpd threads truetype-fonts type1-fonts unicode usb x86 xml2 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 i810 imstt mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 2


Jakub Moc (RETIRED)






          2007-06-05 18:53:54 UTC
        

Well, for starters you should stop using USE=hardened on a non-hardened profile and recompile your toolchain without that flag.




Comment 3


Martin Calko





          2007-06-06 04:16:05 UTC
        

OK. Can you say me how? Except that I should remove "hardened" parameter from make.conf ...




Comment 4


Martin Calko





          2007-06-06 04:53:00 UTC
        

I tried to remove "hardened" word from make.conf and re-emerge gcc. It failed in the same point as before.






Comment 5


SpanKY






          2007-06-18 03:03:36 UTC
        

you will need to re-emerge the gcc version you currently have installed (gcc-4.1.1) with USE=-hardened and then try to emerge gcc-4.1.2









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

