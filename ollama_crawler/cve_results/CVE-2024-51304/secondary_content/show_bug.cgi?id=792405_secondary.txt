Title: 792405 – sys-cluster/openmpi-4.0.5 - /.../thread_usage.h:152: undefined reference to opal_uses_threads
URL: https://bugs.gentoo.org/show_bug.cgi?id=792405

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 792405
sys-cluster/openmpi-4.0.5 - /.../thread_usage.h:152: undefined reference to opal_uses_threads
Last modified: 2022-05-06 01:11:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 792405 
      - sys-cluster/openmpi-4.0.5 - /.../thread_usage.h:152: undefined reference to opal_uses_threads


Summary:
sys-cluster/openmpi-4.0.5 - /.../thread_usage.h:152: undefined reference to o...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Cluster Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




slibtool



 

        Show dependency tree





 





      Reported:
    
2021-05-27 07:24 UTC by Toralf Förster





      Modified:
    
2022-05-06 01:11 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ionen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.85 KB,
                text/plain)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,348.62 KB,
                text/plain)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





environment

              (environment,156.65 KB,
                text/plain)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





etc.portage.tar.bz2

              (etc.portage.tar.bz2,14.99 KB,
                application/x-bzip)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





logs.tar.bz2

              (logs.tar.bz2,206.20 KB,
                application/x-bzip)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





sys-cluster:openmpi-4.0.5:20210527-005911.log.bz2

              (sys-cluster:openmpi-4.0.5:20210527-005911.log.bz2,83.71 KB,
                application/x-bzip)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





temp.tar.bz2

              (temp.tar.bz2,200.83 KB,
                application/x-bzip)

            
2021-05-27 07:24 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2021-05-27 07:24:09 UTC
        

/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: orterun.o: in function `opal_thread_add_fetch_32':
/var/tmp/portage/sys-cluster/openmpi-4.0.5/work/openmpi-4.0.5/opal/threads/thread_usage.h:152: undefined reference to `opal_uses_threads'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/sys-cluster/openmpi-4.0.5/work/openmpi-4.0.5/opal/threads/thread_usage.h:152: undefined reference to `opal_uses_threads'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: orterun.o: in function `orterun':
/var/tmp/portage/sys-cluster/openmpi-4.0.5/work/openmpi-4.0.5/orte/tools/orterun/orterun.c:136: undefined reference to `orte_submit_init'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../x86_64-pc-linux-gnu/bin/ld: /var/tmp/portage/sys-cluster/openmpi-4.0.5/work/openmpi-4.0.5/orte/tools/orterun/orterun.c:149: undefined reference to `orte_cmd_options'

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1_no_multilib-j2-20210521-120015

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-11.1.0 *
clang version 12.0.0
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/12/bin
/usr/lib/llvm/12
12.0.0
Python 3.8.10
Available Ruby profiles:
  [1]   ruby26 (with Rubygems)
  [2]   ruby30 (with Rubygems) *
Available Rust versions:
  [1]   rust-bin-1.52.1
  [2]   rust-1.52.1 *
The following VMs are available for generation-2:
*)	AdoptOpenJDK 8.292_p10 [openjdk-bin-8]
Available Java Virtual Machines:
  [1]   openjdk-bin-8  system-vm

The Glorious Glasgow Haskell Compilation System, version 8.10.4
  [1]   php7.3
  [2]   php7.4
  [3]   php8.0 *

  timestamp(s) of HEAD at this tinderbox image:
/var/db/repos/gentoo	Wed May 26 23:35:09 UTC 2021

emerge -qpvO sys-cluster/openmpi
[ebuild     U ] sys-cluster/openmpi-4.0.5 [2.1.6] USE="fortran ipv6 -cma -cuda -cxx -heterogeneous -java -romio (-mpi-threads%) (-numa%) (-threads%)" OPENMPI_FABRICS="-knem -ofed -psm" OPENMPI_OFED_FEATURES="-control-hdr-padding -dynamic-sl -rdmacm -udcm" OPENMPI_RM="-pbs -slurm"




Comment 1


Toralf Förster






          2021-05-27 07:24:10 UTC
        

Created attachment 711528 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2021-05-27 07:24:12 UTC
        

Created attachment 711531 [details]
emerge-history.txt




Comment 3


Toralf Förster






          2021-05-27 07:24:14 UTC
        

Created attachment 711534 [details]
environment




Comment 4


Toralf Förster






          2021-05-27 07:24:15 UTC
        

Created attachment 711540 [details]
etc.portage.tar.bz2




Comment 5


Toralf Förster






          2021-05-27 07:24:17 UTC
        

Created attachment 711543 [details]
logs.tar.bz2




Comment 6


Toralf Förster






          2021-05-27 07:24:19 UTC
        

Created attachment 711546 [details]
sys-cluster:openmpi-4.0.5:20210527-005911.log.bz2




Comment 7


Toralf Förster






          2021-05-27 07:24:20 UTC
        

Created attachment 711549 [details]
temp.tar.bz2




Comment 8


Ionen Wolkens






          2021-05-27 21:14:13 UTC
        

>>> sys-cluster/openmpi-2.1.6

seems it's trying to use the system's older libmpi that doesn't define these




Comment 9


orbea





          2022-05-06 01:11:26 UTC
        

Works with sys-cluster/openmpi-4.1.2.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

