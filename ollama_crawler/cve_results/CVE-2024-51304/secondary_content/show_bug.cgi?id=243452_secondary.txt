Title: 243452 – media-sound/moc-2.5.0_alpha3-r2 doesn't work with libtool-2.2.x
URL: https://bugs.gentoo.org/show_bug.cgi?id=243452

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 243452
media-sound/moc-2.5.0_alpha3-r2 doesn't work with libtool-2.2.x
Last modified: 2008-12-19 16:23:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 243452 
      - media-sound/moc-2.5.0_alpha3-r2 doesn't work with libtool-2.2.x


Summary:
media-sound/moc-2.5.0_alpha3-r2 doesn't work with libtool-2.2.x
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




libtool-2.2



 

        Show dependency tree





 





      Reported:
    
2008-10-23 18:40 UTC by Erik Hahn





      Modified:
    
2008-12-19 16:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Erik Hahn





          2008-10-23 18:40:37 UTC
        

media-sound/moc-2.5.0_alpha3-r2 doesn't work with libtool 2.2.x. The dependencies don't state this.

Reproducible: Always

Steps to Reproduce:
1.Install moc
2.Upgrade libtool to 2.2.x
3.Start moc

Actual Results:  
~ % mocp
mocp: error while loading shared libraries: libltdl.so.3: cannot open shared object file: No such file or directory

Expected Results:  
moc starts normally




Comment 1


Rafał Mużyło





          2008-10-23 22:41:08 UTC
        

Looks invalid to me.
Somebody forgot to run revdep-rebuild.




Comment 2


Thomas Sachau






          2008-10-24 13:00:31 UTC
        

You need to run revdep-rebuild. Comment/Reopen, if it still happens after completed revdep-rebuild.




Comment 3


Erik Hahn





          2008-10-27 17:38:48 UTC
        

This happens when I try to compile moc agains libtool 2.2.6a:

gcc -DHAVE_CONFIG_H -I.  -DSYSTEM_THEMES_DIR=\"/usr/share/moc/themes\" -DPLUGIN_DIR=\"/usr/lib/moc/decoder_plugins\"   -pthread -march=native -pipe -Os -fomit-frame-pointer -fno-ident -w -Wall -W -I/usr/include/alsa    -MT io_curl.o -MD -MP -MF .deps/io_curl.Tpo -c -o io_curl.o io_curl.c
mv -f .deps/io_curl.Tpo .deps/io_curl.Po
/bin/bash ./libtool --tag=CC   --mode=link gcc  -pthread -march=native -pipe -Os -fomit-frame-pointer -fno-ident -w -Wall -W -I/usr/include/alsa    -lm -lasound    -lcurl -lssl -lcrypto -lssl -lcrypto -ldl -lz -lncursesw  -Wl,--as-needed -Wl,-O1 -Wl,-z,-combreloc -export-dynamic -o mocp log.o protocol.o server.o main.o common.o playlist.o fifo_buf.o out_buf.o audio.o decoder.o interface.o interface_elements.o menu.o files.o options.o player.o playlist_file.o themes.o keys.o io.o compat.o audio_conversion.o rbtree.o tags_cache.o utf8.o softmixer.o oss.o alsa.o io_curl.o -lltdl -lm -ldl 
libtool: link: gcc -pthread -march=native -pipe -Os -fomit-frame-pointer -fno-ident -w -Wall -W -I/usr/include/alsa -Wl,--as-needed -Wl,-O1 -Wl,-z -Wl,-combreloc -o mocp log.o protocol.o server.o main.o common.o playlist.o fifo_buf.o out_buf.o audio.o decoder.o interface.o interface_elements.o menu.o files.o options.o player.o playlist_file.o themes.o keys.o io.o compat.o audio_conversion.o rbtree.o tags_cache.o utf8.o softmixer.o oss.o alsa.o io_curl.o -Wl,--export-dynamic  /usr/lib/libasound.so -lpthread -lrt /usr/lib/libcurl.so -lssl -lcrypto -lz -lncursesw /usr/lib/libltdl.so -lm -ldl -pthread
/usr/lib/libltdl.so: undefined reference to `lt_libltdl_LTX_preloaded_symbols'
collect2: ld returned 1 exit status
make[2]: *** [mocp] Error 1
make[2]: Leaving directory `/var/tmp/paludis/media-sound-moc-2.5.0_alpha3-r2/work/moc-2.5.0-alpha3'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/paludis/media-sound-moc-2.5.0_alpha3-r2/work/moc-2.5.0-alpha3'
make: *** [all] Error 2
/usr/libexec/paludis/utils/emake: emake returned error 2




Comment 4


Peter Alfredsen (RETIRED)






          2008-10-27 19:31:51 UTC
        

(In reply to comment #3)
> This happens when I try to compile moc agains libtool 2.2.6a:

Did you run:
revdep-rebuild -i
?
If yes, please attach emerge --info and output of emerge -pv moc







Comment 5


Rafał Mużyło





          2008-10-28 13:39:36 UTC
        

This project should consider getting websvn or something, but anyway...

revdep-rebuild won't help. Project is using internal copy of libltdl,
both ltdl.h and ltdl.c.
Both are listed in Makefile.am.




Comment 6


Peter Alfredsen (RETIRED)






          2008-10-28 14:19:05 UTC
        

(In reply to comment #5)
> This project should consider getting websvn or something, but anyway...
> 
> revdep-rebuild won't help. Project is using internal copy of libltdl,
> both ltdl.h and ltdl.c.
> Both are listed in Makefile.am.
> 
Nope, we patch that away with libtool-22.patch. And it works for me (TM).




Comment 7


Alexis Ballier






          2008-12-19 16:23:27 UTC
        

(In reply to comment #6)
> (In reply to comment #5)
> > This project should consider getting websvn or something, but anyway...
> > 
> > revdep-rebuild won't help. Project is using internal copy of libltdl,
> > both ltdl.h and ltdl.c.
> > Both are listed in Makefile.am.
> > 
> Nope, we patch that away with libtool-22.patch. And it works for me (TM).
> 

works for me too
try rebuilding libtool, your libltdl.so seems broken; also try with empty ldflags and reopen if none of these fix your issue; if some do fix it, please note it here also and reopen if there is something that can be fixed










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

