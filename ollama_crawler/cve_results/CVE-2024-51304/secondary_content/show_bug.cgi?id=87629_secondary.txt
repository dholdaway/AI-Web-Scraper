Title: 87629 – USE flag layout-from-conf-file should affect windowmaker, and doesn't.
URL: https://bugs.gentoo.org/show_bug.cgi?id=87629

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 87629
USE flag layout-from-conf-file should affect windowmaker, and doesn't.
Last modified: 2005-04-06 22:49:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 87629 
      - USE flag layout-from-conf-file should affect windowmaker, and doesn't.


Summary:
USE flag layout-from-conf-file should affect windowmaker, and doesn't.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Armando Di Cianno (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-01 21:21 UTC by Philip H. Smith





      Modified:
    
2005-04-06 22:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Philip H. Smith





          2005-04-01 21:21:38 UTC
        

I want to move windowmaker's config directory (normally ~/GNUstep) to something like ~/.GNUstep.  I set the layout-from-conf-file use flag, affecting gnustep-make (which windowmaker needs), and defined /etc/conf.d/gnustep.env as

GNUSTEP_SYSTEM_ROOT=/usr/GNUstep/System
GNUSTEP_LOCAL_ROOT=/usr/GNUstep/Local
GNUSTEP_NETWORK_ROOT=/usr/GNUstep/Network
GNUSTEP_USER_ROOT='~/.GNUstep'

as recommended.  Yet windowmaker still wants the config directory as ~/GNUstep.  Why?  Both wmaker.inst assume this location, as well as windowmaker itself (i.e. it creates it itself when I delete (or move) it and run windowmaker without wmaker.inst)

I know it pays some attention to /etc/conf.d/gnustep.env, since the default pixmap paths & the like list ~/.GNUstep as entries...

Reproducible: Always
Steps to Reproduce:
1. Set use flag layout-from-conf-file
2. Define /etc/conf.d/gnustep.env as above, changing default user root.
3. Emerge windowmaker (making sure gnustep-make gets recompiled if necessary.)
4. As normal user, run wmaker.inst or just windowmaker

Actual Results:  
~/.GNUstep is not created or searched for, and ~/GNUstep is created/searched
instead.

Expected Results:  
Used /etc/conf.d/gnustep.env to find the right directory.

This seems pretty straight-forward, but here's emerge info anyway.

Portage 2.0.51.19 (default-linux/x86/2004.3, gcc-3.3.5, glibc-2.3.4.20041102-r1,
2.6.11-gentoo-r4 i686)
=================================================================
System uname: 2.6.11-gentoo-r4 i686 AMD Athlon(tm) XP 2100+
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Mar 29 2005, 00:42:51)]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r1
sys-devel/libtool:   1.5.10-r4
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -mcpu=athlon -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=athlon -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS=" ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo
http://gentoo.osuosl.org/ http://adelie.polymtl.ca/
ftp://cs.ubishops.ca/pub/gentoo ftp://gentoo.risq.qc.ca/ "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowex 3dnowext X Xaw3d a52 aac aalib acpi alsa apm avi
bash-completion berkdb bitmap-fonts bootsplash bzip2 bzlib cdparanoia cdr crypt
cups curl dga directfb divx4linux djbfft doc dvd ecc emacs encode fam fb fbcon
font-server foomaticdb gcj gdbm gif gnome gnustep gtk gtk2 guile idea imlib ipv6
java javascript jce joystick jpeg kde layout-from-conf-file libcaca libg++
libwww mad maildir mailwrapper md5sum mikmod mime mmx mmx2 motif mozsvg
mozxmlterm mp3 mpeg ncurses nls nocd nodrm nomotif non-flattened nosendmail nptl
nptlonly nvidia objc offensive ogg oggvorbis opengl pam pdflib perl pic png
posix profile python qt quicktime readline remote sdl sndfile source spell sse
ssl svg svga symlink tcpd tetex theora tiff truetype-fonts type1-fonts unicode
v4l v4l2 wifi xml2 xmms xv xvid xvmc zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY

In addition, I use the /etc/portage/package.* files.  They are:

package.keywords:
~gnustep-base/gnustep-back-art-0.9.4 ~x86
media-video/nvidia-kernel ~x86
media-video/nvidia-glx ~x86
media-video/nvidia-settings ~x86
x11-wm/windowmaker ~x86

package.use:
=x11-libs/gtk+-2.6.2 -doc
sys-fs/ntfsprogs -gnome
gnome-base/gnome-vfs -ipv6
dev-java/blackdown-jdk mozilla
net-im/centericq aim gg icq irc jabber lj msn rss yahoo
net-irc/bitchx -gtk

Thanks guys.




Comment 1


Armando Di Cianno (RETIRED)






          2005-04-04 09:54:54 UTC
        

if you have:
  GNUSTEP_SYSTEM_ROOT=/usr/GNUstep/System
then add a line like
  . /usr/GNUstep/System/Library/Makefiles/GNUstep.sh
(yes, "dot" "space" "/usr/GNUstep/System/Library/Makefiles/GNUstep.sh")
to your ~/.bashrc; then source the .bashrc (or log in and out), and re-run wmaker.inst

Please let me know if this does it (It sounds like that's the only step missing).  




Comment 2


Armando Di Cianno (RETIRED)






          2005-04-04 09:55:08 UTC
        

assigned




Comment 3


Armando Di Cianno (RETIRED)






          2005-04-06 22:45:54 UTC
        

... can i assume this fixed your problem?




Comment 4


Philip H. Smith





          2005-04-06 22:49:25 UTC
        

Sorry, afk a few days.
Yup, that fixed it.  Now maybe if that trick could sneak into the docs somewhere a little more obvious..
Thanks!










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

