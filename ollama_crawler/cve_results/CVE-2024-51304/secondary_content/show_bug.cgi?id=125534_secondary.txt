Title: 125534 – SIGSEVs in net-misc/d4x-2.5.6
URL: https://bugs.gentoo.org/show_bug.cgi?id=125534

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 125534
SIGSEVs in net-misc/d4x-2.5.6
Last modified: 2006-03-18 09:05:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 125534 
      - SIGSEVs in net-misc/d4x-2.5.6


Summary:
SIGSEVs in net-misc/d4x-2.5.6
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Desktop Misc. Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-03-08 14:30 UTC by Krzysztof Chojnowski





      Modified:
    
2006-03-18 09:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Krzysztof Chojnowski





          2006-03-08 14:30:32 UTC
        

d4x crashes when I add few files using Firefox FlashGot plugin. I didn't see this when I was downloading only one file. It's crashing everytime i use "download all" option from Flashgot and downloading more than about 5 files. After downloading 2-3 files comes crash.
I have '-03' in my CFLAGS, so i changed it to '-02' and reemerge d4x, but didn't help. I also find that when I use "download all" option dx4 isn't downloading files to dir which I choose, but to current_dir/http:/something.com/file , but probably I misconfigured something. I have no idea if this have any ralation with those crashes.

And some backtraces:
most of it looks like this:
(gdb) bt
#0  0xb77e4819 in __gnu_cxx::__exchange_and_add ()
   from /usr/lib/gcc/i686-pc-linux-gnu/3.4.5/libstdc++.so.6
#1  0x08075feb in ~OldSocket (this=0x83292c0) at basic_string.h:219
#2  0x080767d6 in _destroy_ (s=0x83292c0) at sm.cc:29
#3  0x08077c5c in std::for_each<__gnu_cxx::__normal_iterator<d4x::OldSocket**, std::vector<d4x::OldSocket*, std::allocator<d4x::OldSocket*> > >, void (*)(d4x::OldSocket*)> (__first=
      {_M_current = 0x8317ee8}, __f=0x80767c0 <_destroy_>) at stl_iterator.h:614
#4  0x08077a29 in d4x::SocketsHistory::kill_old (this=0x815d198) at stl_vector.h:330
#5  0x080bfa52 in time_for_refresh (a=0x0) at list.cc:1844
#6  0x080bfb0b in time_for_logs_refresh (a=0xffffffff) at list.cc:1866
#7  0xb7eaadcf in g_main_context_wakeup () from /usr/lib/libglib-2.0.so.0
#8  0xb767cbc6 in gettimeofday () from /lib/tls/libc.so.6
#9  0xb7f0e258 in ?? () from /usr/lib/libglib-2.0.so.0
#10 0xb7f0e7f0 in ?? () from /usr/lib/libglib-2.0.so.0
#11 0x00000001 in ?? ()
#12 0xb7ecafa8 in g_static_private_get () from /usr/lib/libglib-2.0.so.0
#13 0x0830a170 in ?? ()
#14 0xb7f0e258 in ?? () from /usr/lib/libglib-2.0.so.0
#15 0x00000000 in ?? ()

but ones i got this:
(gdb) bt
#0  0xb766390a in strcmp () from /lib/tls/libc.so.6
#1  0x0805712e in d4x::URL::operator== (this=0x83d2b40, _u=@0x83e95f0) at basic_string.h:1458
#2  0x08075e58 in _cmp_with_url_ (info=0x69797277, s=0x69797277) at sm.cc:52
#3  0x08077ee1 in std::find_if<__gnu_cxx::__normal_iterator<d4x::OldSocket**, std::vector<d4x::OldSocket*, std::allocator<d4x::OldSocket*> > >, std::binder1st<std::pointer_to_binary_function<d4x::URL*, d4x::OldSocket*, bool> > > (__first={_M_current = 0x83e9bd0}, __pred=
      {<std::unary_function<d4x::OldSocket*,bool>> = {<No data fields>}, op = {<std::binary_function<d4x::URL*,d4x::OldSocket*,bool>> = {<No data fields>}, _M_ptr = 0x8075e40 <_cmp_with_url_>}, value = 0x83d2b40}) at stl_function.h:519
#4  0x08077b2d in d4x::SocketsHistory::find (this=0x815bf58, info=@0x69797277)
    at stl_iterator_base_types.h:165
#5  0x080861a6 in tDownload::download_http (this=0x83d2af8) at dlist.cc:1324
#6  0x08088177 in download_last (nothing=0x83d2af8) at main.cc:1864
#7  0xb7f0e420 in start_thread () from /lib/tls/libpthread.so.0
#8  0xb76b39fe in clone () from /lib/tls/libc.so.6

$ emerge --info
Portage 2.1_pre5-r4 (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(tm) processor
Gentoo Base System version 1.12.0_pre16
ccache version 2.4 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-tbird -O3 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=athlon-tbird -O3 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LC_ALL="pl_PL"
LINGUAS="pl"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow X aac acpi alsa apache2 avi bash-completion berkdb bitmap-fonts crypt cscope ctype dbus eds encode ffmpeg flac gdbm geoip gif gmp gnutls gpm gstreamer gtk gtk2 iconv imlib jabber javascript jpeg libwww lm_sensors logrotate mad mikmod mime mmx mp3 mpeg ncurses nls nptl nsplugin ogg opengl pam pdf pdflib perl png python qt quicktime readline sdl sndfile sox spell ssl svg tcpd tetex threads tiff truetype truetype-fonts type1-fonts udev unicode vorbis win32codecs xml xml2 xosd xpm xsl xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_pl userland_GNU video_cards_nv video_cards_nvidia video_cards_vesa video_cards_vga"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LANG, LDFLAGS

$ emerge -pv d4x
[ebuild   R   ] net-misc/d4x-2.5.6  USE="nls -esd -gnome -kde -oss" 0 kB




Comment 1


Krzysztof Pawlik (RETIRED)






          2006-03-18 09:05:47 UTC
        

I can't reproduce it. Please try rebuilding toolchain without -O3.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

