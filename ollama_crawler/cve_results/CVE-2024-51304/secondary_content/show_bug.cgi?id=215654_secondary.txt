Title: 215654 – net-analyzer/ntop-3.3 fails to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=215654

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 215654
net-analyzer/ntop-3.3 fails to emerge
Last modified: 2009-04-10 23:20:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 215654 
      - net-analyzer/ntop-3.3 fails to emerge


Summary:
net-analyzer/ntop-3.3 fails to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alin Năstac (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

218280

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2008-03-31 23:09 UTC by Raouf Bencheraiet





      Modified:
    
2009-04-10 23:20 UTC
      (History)
    




          CC List:
        

7 
          users
          
            (show)
          



aslvrstn
flameeyes
mojatt
netmon
pesa
tommy
tzopik









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,43.11 KB,
                text/plain)

            
2008-03-31 23:10 UTC,

            Raouf Bencheraiet




Details





The ebuild environment

              (environment,95.40 KB,
                text/plain)

            
2008-03-31 23:11 UTC,

            Raouf Bencheraiet




Details





ntop-9999.ebuild

              (ntop-9999.ebuild,3.22 KB,
                patch)

            
2008-07-07 21:22 UTC,

            tzopik




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Raouf Bencheraiet





          2008-03-31 23:09:07 UTC
        

emerge ntop fail  complainning about some redefined/redeclared variables/macros in /usr/include/netinet/in.h, seen the same thing I think with rp-pppoe after upgrading kernel/kernel headers to 2.6.24

Reproducible: Always

Steps to Reproduce:
1. emerge ntop
Actual Results:  
 * 
 * ERROR: net-analyzer/ntop-3.3 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2490:  Called die
 * The specific snippet of code:
 *       emake || die "compile problem"
 *  The die message:
 *   compile problem
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/net-analyzer/ntop-3.3/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-analyzer/ntop-3.3/temp/environment'.
 * 


Expected Results:  
to compile and install :)

Portage 2.1.4.4 (default-linux/x86/2007.0/desktop, gcc-4.1.1, glibc-2.7-r2, 2.6.24-gentoo-r3 i686)
=================================================================
System uname: 2.6.24-gentoo-r3 i686 Intel(R) Celeron(R) CPU 2.00GHz
Timestamp of tree: Mon, 31 Mar 2008 10:30:04 +0000
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.3-r4, 2.5.1-r5
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.12
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.61-r1
sys-devel/automake:  1.4_p6, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.24
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -mcpu=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl acpi alsa apache2 arts automount berkdb cairo caps cdr cli cracklib crypt cups curl dbus dvd dvdr dvdread eds emboss encode esd evo fam fortran gd gdbm gif gnutls gpm gstreamer hal iconv innodb ipv6 isdnlog jpeg kerberos ldap mad mbox mhash midi mikmod mp3 mpeg mudflap mysql ncurses nls nptl nptlonly ntpl ntplonly ogg openmp oss pam pcre pdf perl php png posix pppd prelude python qt3support quicktime radius readline reflection samba sdl session spell spl ssl svg swat tcpd threads tiff truetype udev unicode vhosts vorbis win32codecs winbind x86 xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 i810 imstt mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa vga via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Raouf Bencheraiet





          2008-03-31 23:10:51 UTC
        

Created attachment 147928 [details]
build log




Comment 2


Raouf Bencheraiet





          2008-03-31 23:11:35 UTC
        

Created attachment 147929 [details]
The ebuild environment




Comment 3


mojatt





          2008-04-03 20:59:39 UTC
        

I know this isn't a permanent solution but if you'd like to get this compiled now simply rename the /usr/include/linux/in.h file.  Of course I'd recommend renaming it back once you've compiled ntop! :)




Comment 4


Raouf Bencheraiet





          2008-04-06 21:54:18 UTC
        

thnx  mojatt
did that i compiled well but didn't have the chance to test it out 




Comment 5


Alin Năstac (RETIRED)






          2008-07-04 20:20:55 UTC
        

*** Bug 218280 has been marked as a duplicate of this bug. ***




Comment 6


Alin Năstac (RETIRED)






          2008-07-04 23:46:10 UTC
        

I've became the maintainer of ntop. Reassigned its bugs to me.




Comment 7


Alin Năstac (RETIRED)






          2008-07-04 23:50:47 UTC
        

I couldn't reproduce this bug. 
Please check if ntop-3.3.6 still doesn't work for you.




Comment 8


Thomas Sachau






          2008-07-06 13:48:26 UTC
        

ntop-3.3.6 works for me, only get the following QA warning:

QA Notice: Automake "maintainer mode" detected




Comment 9


tzopik





          2008-07-07 21:22:38 UTC
        

Created attachment 159828 [details, diff]
ntop-9999.ebuild

i make this ebuild [ntop-9999.ebuild], that build ntop from the svn dev or a relased version.

if the name is ntop-x.x-p9999.ebuild or ntop-*9999*.ebuild the sources came from svn. if the name is ntop-x.x.x.ebuild the sources is ntop-x.x.x.tar.bz

i use the ntop-9999.ebuild and make links for this. ex:
ntop-3.3.6_p9999.ebuild -> ntop-9999.ebuild (this build the svn, but update when  new ebuild, >ntop-3.3.6.ebuild, is relased in portage).

in src_unpack() i use "./autogen.sh --noconfig" this disable many warnings like:

 * QA Notice: Automake "maintainer mode" detected:
 *
 *      cd . && /bin/sh ./missing --run echo
 *       cd . && /bin/sh ./missing --run echo --gnu
 *      cd . && /bin/sh ./missing --run echo
 *      cd . && /bin/sh ./missing --run echo
 *      cd . && /bin/sh ./missing --run echo




Comment 10


tzopik





          2008-07-07 21:47:47 UTC
        

sorry for my english in last post


i get this from emerge =ntop-3.3.6 (linked to ntop-9999.ebuild), no warnings
-----------------------------------------------------------
>>> Original instance of package unmerged safely.
 * You need to set a password first by running
 * ntop --set-admin-password
>>> net-analyzer/ntop-3.3.6 merged.
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.
-----------------------------------------------------------

an this from emerge =ntop-3.3.6_p9999
-----------------------------------------------------------
 * Messages for package net-analyzer/ntop-3.3.6_p9999:

 * subversion update start -->
 *      repository: https://svn.ntop.org/svn/ntop/trunk/ntop
 *    working copy: /usr/portage/distfiles/svn-src/ntop/ntop
 * Applying ntop-gentoo.patch ...
 * You need to set a password first by running
 * ntop --set-admin-password

 * GNU info directory index is up-to-date.
-----------------------------------------------------------

i think is better 

I think it is better to use the script '. / autogen.sh - noconfig' that use the 'eautoreconf'.
'eautoreconf' generates some warnings that do not know how to solve. Ex: 'QA Notice'

there are also some outdated use flags in portage version of the ebuild, as the 'zlib' that is not configurable in ntop.






Comment 11


Alin Năstac (RETIRED)






          2008-07-11 16:19:49 UTC
        

I updated automake and autoconf to the latest ~amd64 versions, but still I don't see any QA notice. What exactly should I use for that?

I wanna use autotools.eclass, not the autogen.sh script.




Comment 12


tzopik





          2008-07-11 18:02:33 UTC
        

(In reply to comment #11)
> I updated automake and autoconf to the latest ~amd64 versions, but still I
> don't see any QA notice. What exactly should I use for that?
> 
i use:

sys-devel/automake
1.4_p6 1.5 1.6.3 1.7.9-r1 1.8.5-r3 1.9.6-r2 (~)1.10.1-r1

sys-devel/automake-wrapper
3-r1

sys-devel/autoconf
2.13 (~)2.62-r1

sys-devel/autoconf-wrapper
(~)5

in my system i have ACCEPT_KEYWORDS="~x86" in /etc/make.conf

> I wanna use autotools.eclass, not the autogen.sh script.
> 

if i use the ntop ebuild's from portage, with 'eautoreconf'
when i run ebuild install, i get many 'QA Notice' like:

 * QA Notice: Automake "maintainer mode" detected:
 *
 *      cd . && /bin/sh ./missing --run echo
 *       cd . && /bin/sh ./missing --run echo --gnu
 *      cd . && /bin/sh ./missing --run echo
 *      cd . && /bin/sh ./missing --run echo
 *      cd . && /bin/sh ./missing --run echo

i try to resolve this, but whit out success!
the ebuild install point me to http://www.gentoo.org/proj/en/qa/autofailure.xml for fix this! i read but not understand.





Comment 13


Alin Năstac (RETIRED)






          2008-07-11 18:45:16 UTC
        

Diego, please help me to reproduce this problem. I cannot reproduce it with the latest ~amd64 autoconf and automake.




Comment 14


Davide Pesavento (RETIRED)






          2008-10-05 13:49:10 UTC
        

You may be interested in
http://blog.flameeyes.eu/2008/06/13/maintaner-mode




Comment 15


Alin Năstac (RETIRED)






          2008-10-05 22:34:08 UTC
        

I asked Diego to help me because I don't see any QA notices.




Comment 16


Alin Năstac (RETIRED)






          2009-04-10 23:20:06 UTC
        

No one seems interested in helping me reproducing this. Besides, I've just asked for stabilization of ntop-3.3.9.

Closed as WORKSFORME. 











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

