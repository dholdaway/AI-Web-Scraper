Title: 115810 – merging udev fills whole disk with file /lib/udev/devices/zero while using selinux
URL: https://bugs.gentoo.org/show_bug.cgi?id=115810

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 115810
merging udev fills whole disk with file /lib/udev/devices/zero while using selinux
Last modified: 2006-04-07 17:35:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 115810 
      - merging udev fills whole disk with file /lib/udev/devices/zero while using selinux


Summary:
merging udev fills whole disk with file /lib/udev/devices/zero while using se...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Greg Kroah-Hartman (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

128799

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-12-16 14:29 UTC by Piotr Jaroszyński (RETIRED)





      Modified:
    
2006-04-07 17:35 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



nicola.rauseo
selinux









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge info

              (emerge_info,1.74 KB,
                text/plain)

            
2005-12-16 14:31 UTC,

            Piotr Jaroszyński (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Piotr Jaroszyński (RETIRED)






          2005-12-16 14:29:16 UTC
        

>>> Merging sys-fs/udev-077-r5 to /
(...)
>>> /lib/udev/raid-devfs.sh
--- /lib/udev/devices/
!!! /lib/udev/devices/null
!!! Failed to move /var/tmp/portage/udev-077-r5/image/lib/udev/devices/zero to /lib/udev/devices/zero
!!! [Errno 28] No space left on device

In my case after that /lib/udev/devices/zero has something about 900 MB and my / is filled completly.




Comment 1


Piotr Jaroszyński (RETIRED)






          2005-12-16 14:31:23 UTC
        

Created attachment 74901 [details]
emerge info




Comment 2


Greg Kroah-Hartman (RETIRED)






          2005-12-16 16:07:05 UTC
        

Heh, that's pretty funny.

But strange, it works fine for me here.  And I haven't heard any other complaints.

Perhaps a portage issue?




Comment 3


Greg Kroah-Hartman (RETIRED)






          2005-12-16 16:28:53 UTC
        

Oh, and can you provide the output of:
 ls -l /var/tmp/portage/udev-077-r5/image/lib/udev/devices/

please?




Comment 4


Piotr Jaroszyński (RETIRED)






          2005-12-16 16:34:52 UTC
        

On my second box it works fine too and the only big difference is that i use selinux on that one with this error.

New details:
upto udev-077-r3 everything is ok.
r3 and r4 fail with this strange error.




Comment 5


Piotr Jaroszyński (RETIRED)






          2005-12-16 16:35:51 UTC
        

and the output you asked for:

$ ls -l /var/tmp/portage/udev-077-r5/image/lib/udev/devices/
total 12K
crw-------  1 root tty  5, 1 Oct 22  2000 console
crw-rw-rw-  1 root root 1, 3 Oct 22  2000 null
crw-rw-rw-  1 root root 1, 5 Oct 22  2000 zero





Comment 6


Piotr Jaroszyński (RETIRED)






          2005-12-16 16:46:22 UTC
        

disabling selinux flag solves the problem.




Comment 7


Greg Kroah-Hartman (RETIRED)






          2005-12-16 17:11:54 UTC
        

Disabling the flag when you build udev?  Why would that change anything? 
Does portage do something differently then?




Comment 8


Piotr Jaroszyński (RETIRED)






          2005-12-16 17:46:07 UTC
        

Yes i meant:
USE=-selinux emerge -av =udev-077-r5

I've once more tried to compile udev-077-r5 with selinux flag enabled and this time(after successfuly emerging r5 without selinux flag) it succeed. I was really shocked and tried to reproduce earlier error but with no luck.

If you want to, I can attach previous emerge logs, but I don't know whether it is any point in doing so.




Comment 9


Jeffrey Forman (RETIRED)






          2005-12-17 06:16:33 UTC
        

Quick change of platform in bugzilla. Sorry about the email.




Comment 10


Greg Kroah-Hartman (RETIRED)






          2005-12-19 10:44:06 UTC
        

Marking closed, as it isn't reproducable.




Comment 11


Greg Kroah-Hartman (RETIRED)






          2006-04-05 13:26:27 UTC
        

*** Bug 128799 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

