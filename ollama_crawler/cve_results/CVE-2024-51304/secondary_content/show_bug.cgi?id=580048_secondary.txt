Title: 580048 – sci-geosciences/grass-7.0.3 compiling errors
URL: https://bugs.gentoo.org/show_bug.cgi?id=580048

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 580048
sci-geosciences/grass-7.0.3 compiling errors
Last modified: 2016-04-25 05:59:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 580048 
      - sci-geosciences/grass-7.0.3 compiling errors


Summary:
sci-geosciences/grass-7.0.3 compiling errors
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sam Jorna (wraeth) (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-04-15 08:09 UTC by Ervin Peters





      Modified:
    
2016-04-25 05:59 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sci-geosciences









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




grass-7.0.3 build log after updated gdal to 2.0.2 [~]

              (build.log.bz2,96.16 KB,
                application/x-bzip2)

            
2016-04-15 19:03 UTC,

            Ervin Peters




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ervin Peters





          2016-04-15 08:09:30 UTC
        

While trying to install qgis-2.8 grass-7.0.3 throws compiling errors.

----------8<---------------
snow ~ # emerge -av qgis

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ~] sci-geosciences/grass-7.0.3:0/7.0.3::gentoo  USE="X cxx geos mysql nls opengl openmp png postgres readline sqlite threads tiff truetype -blas -debug -fftw -lapack -liblas -netcdf -odbc -opencl" PYTHON_TARGETS="python2_7" 0 KiB
[ebuild  N    ~] sci-geosciences/qgis-2.12.2::gentoo  USE="grass postgres python -examples -gsl -mapserver {-test}" PYTHON_TARGETS="python2_7" 0 KiB

Total: 2 packages (2 new), Size of downloads: 0 KiB
----------8<---------------

The tail from the console:

--------------------8<-----------------------

GRASS GIS 7.0.3 r00000 compilation log
--------------------------------------------------
Started compilation: Fr 15. Apr 09:10:41 CEST 2016
--
Errors in:
/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/display/d.grid
/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/display/d.path
[...]
/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/temporal/t.vect.observe.strds
/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/temporal/t.vect.univar
--
In case of errors please change into the directory with error and run 'make'.
If you get multiple errors, you need to deal with them in the order they
appear in the error log. If you get an error building a library, you will
also get errors from anything which uses the library.
--
Finished compilation: Fr 15. Apr 09:15:37 CEST 2016
Makefile:57: die Regel für Ziel „default“ scheiterte
make: *** [default] Fehler 1
 * ERROR: sci-geosciences/grass-7.0.3::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=sci-geosciences/grass-7.0.3::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=sci-geosciences/grass-7.0.3::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/sci-geosciences/grass-7.0.3/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sci-geosciences/grass-7.0.3/temp/environment'.
 * Working directory: '/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3'
 * S: '/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3'

>>> Failed to emerge sci-geosciences/grass-7.0.3, Log file:

>>>  '/var/tmp/portage/sci-geosciences/grass-7.0.3/temp/build.log'

--------------------8<-----------------------

digging throuh the build log shows:

--------------------8<-----------------------

test -d OBJ.x86_64-pc-linux-gnu || mkdir -p OBJ.x86_64-pc-linux-gnu
x86_64-pc-linux-gnu-gcc  -march=core2 -mtune=generic -O2 -pipe   -I/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/include -I/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/include    -DPACKAGE=\""grassmods"\"   -I/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/include -I/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/include -DRELDIR=\"display/d.histogram\" -o OBJ.x86_64-pc-linux-gnu/pie.o -c pie.c
/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: warning: libjvm.so, needed by /usr/lib64/libgdal.so.1, not found (try using -rpath or -rpath-link)
/usr/lib64/libgdal.so.1: undefined reference to `JNI_CreateJavaVM@SUNWprivate_1.1'
/usr/lib64/libgdal.so.1: undefined reference to `JNI_GetCreatedJavaVMs@SUNWprivate_1.1'
collect2: Fehler: ld gab 1 als Ende-Status zurück
../../include/Make/Module.make:16: die Regel für Ziel „/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/bin/d.grid“ scheiterte
make[3]: *** [/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/dist.x86_64-pc-linux-gnu/bin/d.grid] Fehler 1
make[3]: Verzeichnis „/var/tmp/portage/sci-geosciences/grass-7.0.3/work/grass-7.0.3/display/d.grid“ wird verlassen
--------------------8<-----------------------

snow ~ # emerge --info
Portage 2.2.26 (python 2.7.10-final-0, default/linux/amd64/13.0/desktop/gnome/systemd, gcc-4.9.3, glibc-2.22-r4, 4.1.15-gentoo-r1 x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.1.15-gentoo-r1-x86_64-Intel-R-_Core-TM-_i3_CPU_540_@_3.07GHz-with-gentoo-2.2
KiB Mem:     3718192 total,    341684 free
KiB Swap:    8393924 total,   7523400 free
Timestamp of repository gentoo: Thu, 14 Apr 2016 18:45:01 +0000
sh bash 4.3_p42-r1
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
app-shells/bash:          4.3_p42-r1::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.20.2::gentoo
dev-lang/python:          2.7.10-r1::gentoo, 3.4.3-r1::gentoo
dev-util/cmake:           3.3.1-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.19.1::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.10.3-r1::gentoo, 1.11.6-r1::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.3::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.3::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r4::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://woodstok.ervnet.local/gentoo-portage
    priority: -1000

snow
    location: /usr/local/portage
    masters: gentoo
    priority: -10

printer-drivers
    location: /var/lib/layman/printer-drivers
    masters: gentoo
    priority: 0

flow
    location: /var/lib/layman/flow
    masters: gentoo
    priority: 1

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -mtune=generic -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.6/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -mtune=generic -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo http://www.ibiblio.org/pub/Linux/distributions/gentoo ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo"
LANG="de_DE.utf8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
USE="3ds 64bit X Xaw3d a52 aac accessibility ace acl acpi addns aften aim alsa amd64 amr animgif apache2 apng applet archive asf aspell assistant audio auto-completion auto-hinter banshee bash-completion bazaar bdf berkdb blender bogofilter branding builder bzip2 cairo cdda cdparanoia cdr charset chipcard chm cjk cli colord context contrib corefonts cracklib crypt css cups curl curlwrappers cvs cvsgraph cxx d darcs dbi dbus deprecated detex devhelp dia discouraged djvu dmx doc dolbyinrec dri drm dts dv dvb dvd dvdnav dvdr dvi dynamicplugin eds emboss emf enca encode escreen evo exif extensions extra extra-algorithms extras fam fastcgi fat fax fbcon ffmpeg firefox flac flash fontconfig fontforge fonts foomaticdb fortran fping fpx ftp fuse g3dvl games gcj gd gdbm geoip geos gif gimp git gkrellm glade glamor gles gles1 gnome gnome-keyring gnome-online-accounts gnome-print gpac gphoto2 gpm gps graphics graphviz grass grub gstreamer gtk gtk2-perl gtkhtml gudev gzip h224 h281 h323 hbci hdri hfs high-ints html humanities ibam icons iconv icq icu id3 ieee1394 imagemagick imap infinality inkjar introspection iodbc ipv6 irc ithreads jadetex java javascript jbig joystick jpeg jpeg2k kerberos kpathsea lame lasi latex lcdfilter lcms ldap libnotify libsecret libssh2 libv4l2 libwww liemikuutio live livebuffer lm_sensors logrotate lqr lto lua luatex lzo mad mapnik mdb mdnsresponder-compat menuorg mercurial metric midi mikmod mime minizip mjpeg mmx mmxext mng mod modules mozdom mp3 mp4 mpeg mpi mplayer msn mssql multilib music mysql mysqli nautilus ncurses network network-cron nfs nfsv3 nfsv4 nls nmap nntp nocd nptl nsplugin ntfs ntfsprogs ntlm odk offensive ofx ogg ogm omega openexr opengl openmp openstreetmap openvg openxml oscar osdmenu pam pango pcf pch pcre pda pdf perl perl-geoipupdate pg-intdatetime pgf pixmaps player plotutils plugins pmu png pnm policykit posix postgres ppds psf pstricks publishers pulseaudio pvr python qt3support qt4 quicktime rar raw rdesktop readline real regex reiserfs romio rtsp samba sasl scanner science screen scripts sdl seamonkey seccomp sensord server session sftp shorten simplexml sip sipim slp smartcard smbclient smbsharemodes smp snmp soap sockets sound soup source sourcecaps sourceview spell sql sqlite sqlite3 sse sse2 ssl startup-notification stream subtitles subversion svg svgz sylpheed syslog systemd szip tcpd templates tex tex4ht tga theora thesaurus thin-splines threads thumbnail thunderbird tidy tiff timidity tk tools tracker transcode truetype type3 udev udisks unicode unzip upower usb utils uxa v4l valgrind vcd vdpau vdr vhosts vorbis wav webkit wifi win32 winbind wineappdb wma wmf wxwidgets x264 xanim xattr xbase xcap xcb xcf xcomposite xetex xfs xft xml xmlrpc xorgmodule xpm xscreensaver xsl xslt xterm xv xvid xvmc yaepg yahoo youtube zip zlib" ABI_X86="64" ALSA_CARDS="HDA-INTEL" APACHE2_MODULES="actions access_compat alias auth_basic auth_digest authn_anon authn_core authn_dbd authn_dbm authn_file authz_core authz_dbm authz_dbd authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif slotmem_shm so socache_shmcb speling status unique_id userdir usertrack vhost_alias asis cgi cgid" APACHE2_MPMS="worker" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="evdev keyboard mouse aiptek hyperpen" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="de en es fr en_GB ru" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" RUBY_TARGETS="ruby20 ruby21" USERLAND="GNU" VIDEO_CARDS="intel vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

----------------------8<--------

snow ~ # emerge -pv gdal

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] sci-libs/gdal-1.11.1-r3::gentoo  USE="aux_xml curl doc geos gif java jpeg jpeg2k mdb mysql pdf perl png postgres python sqlite threads -armadillo -debug -fits -gml -hdf5 -netcdf -odbc -ogdi -opencl (-ruby) -spatialite -xls" PYTHON_TARGETS="python2_7 python3_4 -python3_3" 0 KiB

Total: 1 package (1 reinstall), Size of downloads: 0 KiB
----------------------8<--------

What to do?




Comment 1


Amy Liffey






          2016-04-15 15:53:52 UTC
        

Can you please submit full build.log?

Thanks




Comment 2


Ervin Peters





          2016-04-15 19:03:50 UTC
        

Created attachment 430674 [details]
grass-7.0.3 build log after updated gdal to 2.0.2 [~]

...same as with stable gdal 1.11.1-r3




Comment 3


Ervin Peters





          2016-04-24 18:05:21 UTC
        

It is an issue with java lib path configuration...

I did the following:
---------------8<-----------------
snow ~ # locate libjvm.so
/opt/icedtea-bin-7.2.6.5/jre/lib/amd64/server/libjvm.so
/usr/lib32/gcj-4.9.3-15/libjvm.so
/usr/lib64/gcj-4.9.3-15/libjvm.so
snow ~ # ln -s /opt/icedtea-bin-7.2.6.5/jre/lib/amd64/server/libjvm.so /usr/lib64/libjvm.so
---------------8<-----------------

and grass compiles fine

I have no idea how to fix that on ebuild level.

ervin




Comment 4


Ervin Peters





          2016-04-25 05:59:16 UTC
        

additionally:

snow ~ # equery b libjvm.so
 * Searching for libjvm.so ... 
dev-java/icedtea-bin-7.2.6.5 (/opt/icedtea-bin-7.2.6.5/jre/lib/amd64/server/libjvm.so)
dev-java/oracle-jdk-bin-1.8.0.92 (/opt/oracle-jdk-bin-1.8.0.92/jre/lib/amd64/server/libjvm.so)
sys-devel/gcc-4.9.3 (/usr/lib32/gcj-4.9.3-15/libjvm.so)
sys-devel/gcc-4.9.3 (/usr/lib64/gcj-4.9.3-15/libjvm.so)

symlinking the gcc libjvm.so doesn't work.

It seems to me that ibgdal requires specific jre.

ervin









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

