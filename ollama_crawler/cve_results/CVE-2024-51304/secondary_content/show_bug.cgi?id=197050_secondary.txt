Title: 197050 – sys-apps/hal not setting HALD_UNAME_S
URL: https://bugs.gentoo.org/show_bug.cgi?id=197050

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 197050
sys-apps/hal not setting HALD_UNAME_S
Last modified: 2010-07-27 13:46:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 197050 
      - sys-apps/hal not setting HALD_UNAME_S


Summary:
sys-apps/hal not setting HALD_UNAME_S
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-10-25 16:04 UTC by Robert Davis





      Modified:
    
2010-07-27 13:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robert Davis





          2007-10-25 16:04:52 UTC
        

Trying to get gnome-power-manager to suspend or hibernate my desktop.  HAL can't parse $HALD_UNAME_S in /usr/lib/hal/scripts/hal-system-power-suspend.  If I manually run the script from linux or export the variable suspend works.  From looking around it looks like hald-runner is supposed to set it but not sure.

Reproducible: Always




Comment 1


Robert Davis





          2007-10-26 13:49:44 UTC
        

BTW:

It is:  sys-apps/hal-0.5.9.1-r2

emerge --info:
Portage 2.1.3.15 (default-linux/x86/2007.0/desktop, gcc-4.2.2, glibc-2.6.1-r0, 2.6.22-gentoo-r9 i686)
=================================================================
System uname: 2.6.22-gentoo-r9 i686 Intel(R) Core(TM)2 CPU 6320 @ 1.86GHz
Timestamp of tree: Mon, 22 Oct 2007 15:50:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.2-r1
dev-lang/python:     2.4.4-r4, 2.5.1-r2
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.10-r5
sys-apps/sandbox:    1.2.18.1-r1
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=prescott -O3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=prescott -O3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.utf8"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage/"
USE="X aac accessibility acl acpi alsa anthy apache2 berkdb bitmap-fonts c++ cairo cdr cjk cli client cracklib crypt ctype cups curl dbus dri dts dvd dvdr dvdread eds emboss encode esd evo exif fam ffmpeg firefox flac fortran freetds gdbm gif gimp glade gnome gpm gstreamer gstreamer010 gtk gtk2 hal howl iconv isdnlog java jpeg kerberos kqemu ldap libgda libnotify lm_sensors mad matroska midi mikmod mmx mmxext mono mozilla moznocompose moznoirc moznomail mozsvg mp3 mpeg msn mssql mudflap mysql ncurses nls nptl nptlonly nsplugin nvidia ogg opengl openmp oss pam pcre pdf perl png pppd python qt3support quicktime readline reflection samba sdl session simplexml sox spell spl sse sse2 ssl ssse3 svg tcpd theora tiff truetype truetype-fonts type1-fonts unicode usb vorbis win32codecs x264 x86 xml xorg xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" CAMERAS="canon" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="vga i810"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 2


Steev Klimaszewski (RETIRED)






          2007-10-26 23:44:00 UTC
        

Unfortunately, no one in the Gentopia herd (except *maybe* compnerd) has a machine that can do suspend/resume so we can't really test anything - patches are welcome and accepted.




Comment 3


Robert Davis





          2007-10-29 00:17:40 UTC
        

ok.  Will look further.  Took a peek at hald-runner.c source and it is supposed to export the environment variables.  I built a test program for uname() and it worked fine.  Just didn't know if something in Gentoo might be keeping a daemon from exporting a env. variable.




Comment 4


Robert Davis





          2008-03-02 19:34:59 UTC
        

Forgot I had this one open.  Ended up that re-emerging hal fixed the problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

