Title: 925424 – www-client/chromium-121.0.6167.184 ebuild failed (arm64) Raspberry Pi 4 Model B Rev 1.4
URL: https://bugs.gentoo.org/show_bug.cgi?id=925424

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 925424
www-client/chromium-121.0.6167.184 ebuild failed (arm64) Raspberry Pi 4 Model B Rev 1.4
Last modified: 2024-03-18 15:24:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 925424 
      - www-client/chromium-121.0.6167.184 ebuild failed (arm64) Raspberry Pi 4 Model B Rev 1.4


Summary:
www-client/chromium-121.0.6167.184 ebuild failed (arm64) Raspberry Pi 4 Model...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

ARM64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-02-24 15:58 UTC by Andrew Cameron





      Modified:
    
2024-03-18 15:24 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



apcameron
ionen
kangie









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (build.log.gz,193.65 KB,
                application/gzip)

            
2024-02-24 15:58 UTC,

            Andrew Cameron




Details





pqv log

              (pqv,627 bytes,
                text/plain)

            
2024-02-24 15:59 UTC,

            Andrew Cameron




Details





Info log

              (info,6.44 KB,
                text/plain)

            
2024-02-24 15:59 UTC,

            Andrew Cameron




Details





Environment

              (environment,207.21 KB,
                text/plain)

            
2024-02-24 16:00 UTC,

            Andrew Cameron




Details





New Build Log

              (build.log.gz,947.41 KB,
                application/gzip)

            
2024-02-29 22:56 UTC,

            Andrew Cameron




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrew Cameron





          2024-02-24 15:58:10 UTC
        

../../third_party/libaom/source/libaom/av1/common/arm/compound_convolve_neon_dotprod.c:40:19: error: always_inline function 'vdotq_s32' requires target feature 'dotprod', but would be inlined into function 'convolve4_4_2d_h' that is compiled without support for 'dotprod'
../../third_party/libaom/source/libaom/av1/common/arm/compound_convolve_neon_dotprod.c:67:12: error: always_inline function 'vdotq_s32' requires target feature 'dotprod', but would be inlined into function 'convolve8_8_2d_h' that is compiled without support for 'dotprod'
...




Comment 1


Andrew Cameron





          2024-02-24 15:58:54 UTC
        

Created attachment 885878 [details]
Build log




Comment 2


Andrew Cameron





          2024-02-24 15:59:19 UTC
        

Created attachment 885879 [details]
pqv log




Comment 3


Andrew Cameron





          2024-02-24 15:59:39 UTC
        

Created attachment 885880 [details]
Info log




Comment 4


Andrew Cameron





          2024-02-24 16:00:06 UTC
        

Created attachment 885881 [details]
Environment




Comment 5


Ionen Wolkens






          2024-02-28 13:03:40 UTC
        

(mentioned on irc, but just to have it on the bug too)

This is likely another runtime-detection feature usage bit, and to build it it explicitly pass -march=armv8.2-a+dotprod (which is fine in this context, even if your cpu does not support this) -- but then the user's -march=armv8-a+crc is passed *after* and overrides that resulting in a build failure.

In qtwebengine:6 been using a patch (chromium/01-flags.patch) to invert this to allow chromium to override flags (except the ones we don't want like -O<level>), including e.g. -mno-avx followed by -mavx which removes the need to filter these.

As a workaround for now, you could simply abstain from passing -march on this package, I assume it will build fine save for being a bit less optimized.




Comment 6


Andrew Cameron





          2024-02-29 15:07:39 UTC
        

I am busy emerging chromium with the work around you suggested. It may take a few days to complete before I can report back.




Comment 7


Andrew Cameron





          2024-02-29 22:56:23 UTC
        

Created attachment 886404 [details]
New Build Log

I tried to build it without the -march defined.
It went further but failed wit a new error.
I have include the new build log




Comment 8


Andrew Cameron





          2024-03-18 14:07:59 UTC
        

The latest build of chromium emerged successfully









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

