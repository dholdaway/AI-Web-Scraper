Title: 178446 – net-misc/openvpn-2.1_rc4 doesn't compile with ssl
URL: https://bugs.gentoo.org/show_bug.cgi?id=178446

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 178446
net-misc/openvpn-2.1_rc4 doesn't compile with ssl
Last modified: 2007-05-19 10:04:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 178446 
      - net-misc/openvpn-2.1_rc4 doesn't compile with ssl


Summary:
net-misc/openvpn-2.1_rc4 doesn't compile with ssl
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Roy Marples (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

178447

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-05-13 22:29 UTC by Matthias Guggenmos





      Modified:
    
2007-05-19 10:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthias Guggenmos





          2007-05-13 22:29:32 UTC
        

Compiling openvpn with ssl results in a compile error. Effects all openvpn versions available in portage. When removing ssl use flag it compiles through.

Reproducible: Always

Steps to Reproduce:
1.USE="ssl" emerge openvpn
2.
3.

Actual Results:  
i686-pc-linux-gnu-gcc  -O2 -mtune=i686 -fomit-frame-pointer -D_REENTRANT -pthread   -o openvpn  base64.o buffer.o crypto.o error.o event.o fdmisc.o forward.o fragment.o gremlin.o helper.o lladdr.o init.o interval.o list.o lzo.o manage.o mbuf.o misc.o mroute.o mss.o mtcp.o mtu.o mudp.o multi.o ntlm.o occ.o pkcs11.o pkcs11-helper.o openvpn.o options.o otime.o packet_id.o perf.o ping.o plugin.o pool.o proto.o proxy.o ps.o push.o reliable.o route.o schedule.o session_id.o shaper.o sig.o socket.o socks.o ssl.o status.o thread.o tun.o   -static -lssl -lcrypto -llzo2
misc.o: In function `get_group':
misc.c:(.text+0x164a): warning: Using 'getgrnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
misc.o: In function `get_user':
misc.c:(.text+0x175a): warning: Using 'getpwnam' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
socket.o: In function `getaddr':
socket.c:(.text+0x195c): warning: Using 'gethostbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(b_sock.o): In function `BIO_get_port':
: warning: Using 'getservbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func':
: undefined reference to `dlsym'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func':
: undefined reference to `dlerror'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_var':
: undefined reference to `dlsym'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_var':
: undefined reference to `dlerror'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_unload':
: undefined reference to `dlclose'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
: undefined reference to `dlopen'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
: undefined reference to `dlclose'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
: undefined reference to `dlerror'
collect2: ld gab 1 als Ende-Status zurück
make[1]: *** [openvpn] Fehler 1
make[1]: Leaving directory `/var/tmp/portage/net-misc/openvpn-2.1_rc4/work/openvpn-2.1_rc4'
make: *** [all] Fehler 2



$: emerge --info
Portage 2.1.2.7 (default-linux/x86/2006.1, gcc-4.1.1, glibc-2.5-r2, 2.6.20-gentoo-r8 i686)
=================================================================
System uname: 2.6.20-gentoo-r8 i686 Intel(R) Pentium(R) M processor 1300MHz
Gentoo Base System release 1.12.9
Timestamp of tree: Sun, 13 May 2007 09:00:10 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31-r5
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -mtune=i686 -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo/ ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ ftp://ftp.rz.tu-bs.de/pub/mirror/ftp.gentoo.org/gentoo-distfiles/"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/myoverlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa apache2 arts berkdb bitmap-fonts bluetooth cdr cli cracklib crypt cups dbus dri dvd encode fortran gif gphoto2 gpm hal iconv imap ipv6 irmc isdnlog jpeg kde kdehiddenvisibility lame libg++ mad midi mp3 mpeg ncurses nls nptl nptlonly nsplugin offensive ogg opengl pam pcre pdf perl png ppds pppd python qt3 quicktime readline real reflection samba sdl session spl ssl tcpd truetype truetype-fonts type1-fonts unicode usb vorbis win32codecs x86 xcomposite xml xorg xvid zlib" ALSA_CARDS="ac97" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="radeon fglrx"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2007-05-14 08:45:23 UTC
        

*** Bug 178447 has been marked as a duplicate of this bug. ***




Comment 2


Jakub Moc (RETIRED)






          2007-05-14 08:48:10 UTC
        

Don't file ebuild bugs under Gentoo Bugzilla product. What's so horribly unclear about this description?

<snip>
Bugzilla: Only bugs regarding the Gentoo Bugzilla *website* (bugs.gentoo.org) belong here. *Bugs related to ebuilds belong in 'Gentoo Linux'*
</snip>





Comment 3


Jakub Moc (RETIRED)






          2007-05-14 08:49:32 UTC
        

Compiles just fine here; re-emerge dev-libs/openssl as it's clearly messed-up.




Comment 4


Matthias Guggenmos





          2007-05-14 09:55:19 UTC
        

> re-emerge dev-libs/openssl as it's clearly messed-up.

already tried that (with 0.9.8d and 0.9.8e), doesn't help.
I also uninstalled both openssl and openvpn and reinstalled it, tried different USE flags for openssl, etc. .
The error is quite common, when you google for it. The answer is almost everytime "add -ldl to the LDFLAGS". So I tried to set the environment variable LDFLAGS="-ldl", but no effect (as it probably gets overwritten).

> Don't file ebuild bugs under Gentoo Bugzilla product. What's so horribly
> unclear about this description?

Sorry for that.




Comment 5


Matthias Guggenmos





          2007-05-19 10:04:13 UTC
        

Well, I obviously found a way to add -ldl to the openssl build process, because now I sucessfully compiled openvpn _with ssl_. As I wrote the -ldl statement in various places in the openssl ebuild and in environment variables (while not really having an idea of what I'm doing), I can't tell what exactly did the trick.
Various poeple seem to have identical problems with programs depending on openssl, i.e.
http://www.opensubscriber.com/message/openssl-users@openssl.org/2080442.html









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

