Title: 494178 – kwin desktop effects rendering corrupted and producing kernel radeon errors
URL: https://bugs.gentoo.org/show_bug.cgi?id=494178

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 494178
kwin desktop effects rendering corrupted and producing kernel radeon errors
Last modified: 2014-01-31 12:28:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 494178 
      - kwin desktop effects rendering corrupted and producing kernel radeon errors


Summary:
kwin desktop effects rendering corrupted and producing kernel radeon errors
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Hardened

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

The Gentoo Linux Hardened Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-12-13 17:59 UTC by Manuel Ullmann





      Modified:
    
2014-01-31 12:28 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Radeon errors of kernel log during activation of kwin desktop effects

              (radeon.log,90.71 KB,
                text/plain)

            
2013-12-13 17:59 UTC,

            Manuel Ullmann




Details





Corrupted window decorations during kwin desktop effects

              (kwin-corrupted.png,240.46 KB,
                image/png)

            
2013-12-13 18:05 UTC,

            Manuel Ullmann




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Manuel Ullmann





          2013-12-13 17:59:52 UTC
        

Created attachment 365250 [details]
Radeon errors of kernel log during activation of kwin desktop effects

The kwin desktop effects are not rendering correctly in hardened. Had no issues until I reinstalled Gentoo with hardened/selinux profile. Selinux is in permissive mode and I pax softmode does not resolve the issue. There is nothing pax specific logged.

I had this issue from the beginning. However it somehow was gone for one user. The other user was not in group video. So I thought this might be the reason until I updated to KDE-4.11. Now it is there again.

Reproducable: always.

Actual Results:

Texture corruption of kwin desktop effects and logged radeon errors.

Expected Results:

Kwin desktop effects rendering properly. No radeon errors logged.

Additional Information:

e17 had similar radeon errors, but the textures itself did not look corrupted. I thought, unstability of enlightenment would be the reason and switched back to e16, which has not yet such effects. I'll attach the kernel log messages of radeon. Yes, I know, that most messages are logged twice. Maybe a misconfiguration of syslog-ng, but I checked syslog-ng.conf and don't see the reason for it.

glxgears does not cause any radeon errors in kernel log.

emerge --info:

Portage 2.2.7 (hardened/linux/amd64/selinux, gcc-4.7.3, glibc-2.16.0, 3.2.51-hardened-r2 x86_64)
=================================================================
System uname: Linux-3.2.51-hardened-r2-x86_64-AMD_Turion-tm-X2_Ultra_DualCore_Mobile_ZM-84-with-gentoo-2.2
KiB Mem:     3736844 total,    559776 free
KiB Swap:    4300796 total,   4293136 free
Timestamp of tree: Fri, 13 Dec 2013 16:15:01 +0000
ld GNU ld (GNU Binutils) 2.23.2
ccache version 3.1.9 [enabled]
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.7.5-r3, 3.3.2-r2
dev-util/ccache:          3.1.9
dev-util/cmake:           2.8.11.2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.13.4
sys-devel/binutils:       2.23.2
sys-devel/gcc:            4.7.3-r1
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r4
sys-kernel/linux-headers: 3.9 (virtual/os-headers)
sys-libs/glibc:           2.16.0
Repositories: gentoo poly-c x-portage
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=native"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /usr/bin/startx"
CXXFLAGS="-O2 -pipe -march=native"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs ccache config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox selinux sesandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/poly-c /usr/local/portage"
SYNC="rsync://rsync.de.gentoo.org/gentoo-portage/"
USE="3dnow 3dnowext X aac aacplus acl acpi alsa amd64 berkdb bzip2 cdda cdio cdr cli cracklib crypt cxx dbus dri dvd dvdr faac ffmpeg flac gallium gdbm gpm gstreamer gtk gudev hardened hwdb iconv ipv6 justify kde kipi mmx mmxext modules mp3 mudflap multilib ncurses nls nptl nsplugin ogg open_perms opengl openmp pam pax_kernel pcre png qt3support qt4 readline selinux session smp spell sse sse2 ssl tcpd threads truetype udev unicode urandom vcd vorbis x264 xv xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" DRACUT_MODULES="crypt lvm dm selinux" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="synaptics evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="de" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_3" QEMU_SOFTMMU_TARGETS="x86_64 i386" QEMU_USER_TARGETS="x86_64 i386" RUBY_TARGETS="ruby19 ruby18" USERLAND="GNU" VIDEO_CARDS="radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Manuel Ullmann





          2013-12-13 18:05:42 UTC
        

Created attachment 365252 [details]
Corrupted window decorations during kwin desktop effects

I should have mentioned, that the corruptions mostly effects window decorations. But it effects also effects like zooming in and out of windows. Most effects are simply skipped.




Comment 2


Manuel Ullmann





          2013-12-15 21:52:16 UTC
        

Forgot the Steps to Reproduce:
1. Start KDE with activated desktop effects (kwin) or press Alt+Shift+F12 to activate them as soon as KDE started.




Comment 3


Manuel Ullmann





          2013-12-18 18:03:55 UTC
        

The following is multiple times printed to .xsession-errors during activation of kwin desktop effects:
radeon: The kernel rejected CS, see dmesg for more information.

for dmesg, see attachment 1 [details].




Comment 4


Manuel Ullmann





          2014-01-11 17:35:48 UTC
        

The Xrender backend is working fine. Only OpenGL backends are affected.




Comment 5


Manuel Ullmann





          2014-01-31 12:28:05 UTC
        

This bug is fixed with hardened-sources-3.11.7. Marking this bug as resolved.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

