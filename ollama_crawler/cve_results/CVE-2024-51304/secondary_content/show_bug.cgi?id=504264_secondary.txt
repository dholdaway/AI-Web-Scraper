Title: 504264 – media-plugins/quodlibet-plugins-3.0.2 - new USE flags and dependencies
URL: https://bugs.gentoo.org/show_bug.cgi?id=504264

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 504264
media-plugins/quodlibet-plugins-3.0.2 - new USE flags and dependencies
Last modified: 2014-03-12 20:51:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 504264 
      - media-plugins/quodlibet-plugins-3.0.2 - new USE flags and dependencies


Summary:
media-plugins/quodlibet-plugins-3.0.2 - new USE flags and dependencies
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:

EBUILD







Depends on:







Blocks:









 





      Reported:
    
2014-03-11 22:22 UTC by Julian W.





      Modified:
    
2014-03-12 20:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



berserker-troll









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




quodlibet-plugins-3.0.2.ebuild

              (quodlibet-plugins-3.0.2.ebuild,893 bytes,
                text/plain)

            
2014-03-11 22:24 UTC,

            Julian W.




Details





metadata.xml

              (metadata.xml,678 bytes,
                text/xml)

            
2014-03-11 22:26 UTC,

            Julian W.




Details





Show
              Obsolete (2)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Julian W.





          2014-03-11 22:22:53 UTC
        

Some plugins in this package need additional dependencies, so I've added some of those along with some USE flag to the ebuild in my local overlay and thought I'd share it for what it's worth.

Please keep in mind that
- my experience with ebuilds is low, I'd appreciate it if someone could double-check this
- hence, this is rather "quick and dirty" and not at all perfect or complete; I only added dependencies that were lacking on my system, and also it still installs all of the plugins regardless of USE flags
- I couldn't find the right package for the "Fingerprint" addon, which needs gst-chromaprint (any idea?)
- it still enhances the existing ebuild and work fine for me

Reproducible: Always




Comment 1


Julian W.





          2014-03-11 22:24:55 UTC
        

Created attachment 372434 [details]
quodlibet-plugins-3.0.2.ebuild




Comment 2


Julian W.





          2014-03-11 22:26:17 UTC
        

Created attachment 372436 [details]
metadata.xml




Comment 3


Jeroen Roovers (RETIRED)






          2014-03-12 15:25:56 UTC
        

Comment on attachment 372434 [details]
quodlibet-plugins-3.0.2.ebuild

--- quodlibet-plugins-3.0.2.ebuild      2014-02-06 12:13:10.000000000 +0100
+++ -   2014-03-12 16:25:45.585993348 +0100
@@ -13,9 +13,13 @@
 LICENSE="GPL-2"
 SLOT="0"
 KEYWORDS="~amd64 ~ppc ~ppc64 ~x86"
-IUSE=""
+IUSE="cddb inotify kakasi musicbrainz"
 
-RDEPEND=">=media-sound/quodlibet-${PV}"
+RDEPEND=">=media-sound/quodlibet-${PV}
+       cddb? ( dev-python/cddb-py )
+       inotify? ( dev-python/pyinotify )
+       kakasi? ( app-i18n/kakasi )
+       musicbrainz? ( dev-python/python-musicbrainz )"
 DEPEND=""
 
 src_prepare() {




Comment 4


Jeroen Roovers (RETIRED)






          2014-03-12 15:26:38 UTC
        

Comment on attachment 372436 [details]
metadata.xml

--- metadata.xml        2012-04-02 06:00:51.000000000 +0200
+++ -   2014-03-12 16:26:27.137131507 +0100
@@ -5,4 +5,10 @@
        <upstream>
                <remote-id type="google-code">quodlibet</remote-id>
        </upstream>
+       <use>
+               <flag name='cddb'>Pull in <pkg>dev-python/cddb-py</pkg> for the CDDB Lookup plugin</flag>
+               <flag name='inotify'>Pull in <pkg>dev-python/pyinotify</pkg> for the Automatic Library Update plugin</flag>
+               <flag name='kakasi'>Pull in <pkg>app-i18n/kakasi</pkg> for the Kana/Kanji Simple Inverter plugin</flag>
+               <flag name='musicbrainz'>Pull in <pkg>dev-python/python-musicbrainz</pkg> for the Musicbrainz Lookup plugin</flag>
+       </use>
 </pkgmetadata>




Comment 5


Samuli Suominen (RETIRED)






          2014-03-12 15:41:27 UTC
        

I've purposely maintained quodlibet-plugins without USE flags because when you go into the GUI's menu 'Music > Plugins' and click the 'Show Errors' button, it gives you a informative message what you need to use the plug-in

Plugins come and go, and in the past this has been one of the reasons why quodlibet has been dragging behind in Portage in the past

Likewise won't start listing ever second gst-plugins- dependency and USE flags for them




Comment 6


Julian W.





          2014-03-12 20:51:29 UTC
        

I see your point regarding maintainability, but I still don't like the idea of emerging all those dependencies manually and then let them to rot in your world file forever.

How about a single USE flag to "pull in all required dependencies"?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

