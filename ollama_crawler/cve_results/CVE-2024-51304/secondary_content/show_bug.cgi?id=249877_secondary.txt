Title: 249877 – emerge app-crypt/qca-2.0.1-r1 fails with "Unknown replace function: escape_expand"
URL: https://bugs.gentoo.org/show_bug.cgi?id=249877

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 249877
emerge app-crypt/qca-2.0.1-r1 fails with "Unknown replace function: escape_expand"
Last modified: 2009-04-11 00:01:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 249877 
      - emerge app-crypt/qca-2.0.1-r1 fails with "Unknown replace function: escape_expand"


Summary:
emerge app-crypt/qca-2.0.1-r1 fails with "Unknown replace function: escape_ex...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Crypto team [DISABLED]








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-04 23:54 UTC by Johannes Hirte





      Modified:
    
2009-04-11 00:01 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



kde
qt









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Johannes Hirte





          2008-12-04 23:54:11 UTC
        

>>> Emerging (1 of 1) app-crypt/qca-2.0.1-r1
 * qca-2.0.1.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                                                [ ok ]
 * checking ebuild checksums ;-) ...                                                                                                [ ok ]
 * checking auxfile checksums ;-) ...                                                                                               [ ok ]
 * checking miscfile checksums ;-) ...                                                                                              [ ok ]
>>> Unpacking source...                                                                                                                   
>>> Unpacking qca-2.0.1.tar.bz2 to /home/tmp/portage/app-crypt/qca-2.0.1-r1/work                                                          
 * Applying qca-2.0.1-pcfilespath.patch ...                                                                                          [ ok ]
>>> Source unpacked.                                                                                                                       
>>> Compiling source in /home/tmp/portage/app-crypt/qca-2.0.1-r1/work/qca-2.0.1 ...                                                        
 * Processing qmake qca.pro ...                                                                                                      [ ok ]
Configuring Qt Cryptographic Architecture (QCA) ...                                                                                        
Verifying Qt 4 build environment ... yacc.prf:27: Unknown replace function: escape_expand                                                  
yacc.prf:27: Unknown replace function: escape_expand                                                                                       
yacc.prf:27: Unknown replace function: escape_expand                                                                                       
yacc.prf:27: Unknown replace function: escape_expand                                                                                       
yacc.prf:38: Unknown replace function: escape_expand                                                                                       
lex.prf:19: Unknown replace function: escape_expand                                                                                        
lex.prf:19: Unknown replace function: escape_expand                                                                                        
lex.prf:19: Unknown replace function: escape_expand                                                                                        
./configure: line 2050: .qconftemp/conf: Datei oder Verzeichnis nicht gefunden                                                             
fail                                                                                                                                       

Reason: Unexpected error launching 'conf'

 * 
 * ERROR: app-crypt/qca-2.0.1-r1 failed.
 * Call stack:                          
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2638:  Called die        
 * The specific snippet of code:
 *       ./configure --prefix=/usr --qtdir=/usr --includedir="/usr/include/qca2" --libdir="/usr/${_libdir}/qca2" --no-separate-debug-info --disable-tests ${myconf} || die "configure failed";
 *  The die message:
 *   configure failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/home/tmp/portage/app-crypt/qca-2.0.1-r1/temp/build.log'.
 * The ebuild environment file is located at '/home/tmp/portage/app-crypt/qca-2.0.1-r1/temp/environment'.
 *

>>> Failed to emerge app-crypt/qca-2.0.1-r1, Log file:

>>>  '/home/tmp/portage/app-crypt/qca-2.0.1-r1/temp/build.log'


app-crypt/qca-2.0.0-r2 fails with the same error

Reproducible: Always

Steps to Reproduce:
1. emerge app-crypt/qca




Comment 1


Patrick Lauer






          2008-12-05 22:03:35 UTC
        

Looks like a yacc issue to me?




Comment 2


Johannes Hirte





          2008-12-09 14:30:57 UTC
        

(In reply to comment #1)
> Looks like a yacc issue to me?
> 

escape_expand is something used inside qt. The problem is somewhere in the configure script:

c -DHAVE_MODULES -DQT_NO_DEBUG -DQT_CORE_LIB -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/QtCore -I. -I. -o conf4.o conf4.cpp
gmake: c: Kommando nicht gefunden
gmake: [conf4.o] Fehler 127 (ignoriert)
o conf conf4.o     -lQtCore
gmake: o: Kommando nicht gefunden
gmake: [conf] Fehler 127 (ignoriert

This is the output in conf.log




Comment 3


Johannes Hirte





          2008-12-09 15:08:32 UTC
        

Ok, I've found the bug. The configure script calls /usr/bin/qmake4 which is from Qt version 4.1.3. It seems that this wasn't deleted when upgrading Qt. After removing /usr/bin/qmake4, /usr/bin/qmake from Qt version 4.4.2 is used and qca compiles fine.
So it's not a qca-bug but a portage-bug I think.




Comment 4


Arfrever Frehtes Taifersar Arahesis (RETIRED)






          2009-04-11 00:01:18 UTC
        

(In reply to comment #3)
> Ok, I've found the bug. The configure script calls /usr/bin/qmake4 which is
> from Qt version 4.1.3. It seems that this wasn't deleted when upgrading Qt.
> After removing /usr/bin/qmake4, /usr/bin/qmake from Qt version 4.4.2 is used
> and qca compiles fine.
> So it's not a qca-bug but a portage-bug I think.

I can't reproduce it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

