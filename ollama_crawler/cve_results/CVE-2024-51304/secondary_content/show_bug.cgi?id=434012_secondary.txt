Title: 434012 – sys-libs/glibc-2.15-r2 fails to build on x86 xen VM using full virtualisation when building e_logl.S
URL: https://bugs.gentoo.org/show_bug.cgi?id=434012

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 434012
sys-libs/glibc-2.15-r2 fails to build on x86 xen VM using full virtualisation when building e_logl.S
Last modified: 2012-09-13 07:32:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 434012 
      - sys-libs/glibc-2.15-r2 fails to build on x86 xen VM using full virtualisation when building e_logl.S


Summary:
sys-libs/glibc-2.15-r2 fails to build on x86 xen VM using full virtualisation...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-09-05 10:36 UTC by Simon





      Modified:
    
2012-09-13 07:32 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (build.log.bz2,111.77 KB,
                application/x-bzip2)

            
2012-09-05 10:38 UTC,

            Simon




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simon





          2012-09-05 10:36:03 UTC
        

Build of glibc-2.15-r2 fails with the following errors:

/work/build-default-i686-pc-linux-gnu-nptl/math/e_logl.o.dt -MT /var/tmp/portage/sys-libs/glibc-2.15-r2/work/build-default-i686-pc-linux-gnu-nptl/math/e_logl.o 
../sysdeps/i386/i686/fpu/e_logl.S: Assembler messages:
../sysdeps/i386/i686/fpu/e_logl.S:49: Error: suffix or operands invalid for `fcomip'
../sysdeps/i386/i686/fpu/e_logl.S:75: Error: suffix or operands invalid for `fcomip'
make[2]: *** [/var/tmp/portage/sys-libs/glibc-2.15-r2/work/build-default-i686-pc-linux-gnu-nptl/math/e_logl.o] Error 1
make[2]: Leaving directory `/var/tmp/portage/sys-libs/glibc-2.15-r2/work/glibc-2.15/math'
make[1]: *** [math/others] Error 2
make[1]: Leaving directory `/var/tmp/portage/sys-libs/glibc-2.15-r2/work/glibc-2.15'
make: *** [all] Error 2
emake failed


Reproducible: Always

Steps to Reproduce:
emerge glibc
Actual Results:  
build failed with error detailed above. 

Expected Results:  
Sucessful build of glibc. 

cat /proc/cpuinfo 
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 26
model name      : Intel(R) Xeon(R) CPU           E5504  @ 2.00GHz
stepping        : 5
cpu MHz         : 2000.305
cache size      : 4096 KB
physical id     : 0
siblings        : 1
core id         : 0
cpu cores       : 1
apicid          : 0
initial apicid  : 0
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 4
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush mmx fxsr sse sse2 ht nx lm constant_tsc pni ssse3 cx16 sse4_1 sse4_2 popcnt hypervisor lahf_lm
bogomips        : 4000.61
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management:

<snip>




Comment 1


Simon





          2012-09-05 10:38:20 UTC
        

Created attachment 322980 [details]
Build log




Comment 2


Simon





          2012-09-05 10:40:18 UTC
        

emerge glibc --info
Portage 2.1.11.9 (hardened/linux/x86, gcc-4.4.5-vanilla, glibc-2.9_p20081201-r2, 2.6.37-gentoo-r4 i686)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.37-gentoo-r4-i686-Intel-R-_Xeon-R-_CPU_E5504_@_2.00GHz-with-gentoo-2.1
Timestamp of tree: Wed, 05 Sep 2012 08:00:01 +0000
app-shells/bash:          3.2_p39
dev-java/java-config:     2.1.8-r1
dev-lang/python:          2.4.4-r13, 2.5.2-r7, 2.6.2-r1
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.27
sys-apps/baselayout:      2.1-r1
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.68
sys-devel/automake:       1.10.2, 1.11.1
sys-devel/binutils:       2.18-r3
sys-devel/gcc:            4.1.2, 4.3.2-r3, 4.4.5
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.81
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.9_p20081201-r2
Repositories: gentoo dakon
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/openvpn/easy-rsa /var/bind /var/qmail/alias /var/qmail/control /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i686 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-march=i686 -O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles news parallel-fetch parse-eapi-ebuild-head protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS="-march=i686 -O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/dakon"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl apache2 authcram berkdb bzip2 cli cracklib crypt cups cxx dri fam gd gdbm gpm hardened iconv ipv6 ithreads jpeg ldap modules mudflap mysql ncurses nls nptl openmp pam pax_kernel pcre php pic png pppd readline session ssl tcpd threads unicode urandom vhosts x86 xml zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="auth_basic auth_digest authn_file authn_alias authn_dbd authn_dbm dav dav_fs dav_lock deflate filter authz_host dir mime alias cgid log_config" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" PYTHON_TARGETS="python3_2 python2_7" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="apm ark chips cirrus cyrix dummy fbdev glint i128 i740 intel mach64 mga neomagic nsc nv r128 radeon rendition s3 s3virge savage siliconmotion sis sisusb tdfx tga trident tseng v4l vesa via vmware nouveau" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON

=================================================================
                        Package Settings
=================================================================

sys-libs/glibc-2.9_p20081201-r2 was built with the following:
USE="nls -debug -gd -glibc-omitfp -hardened (-multilib) -profile (-selinux) -vanilla"
CFLAGS="-march=i686 -pipe -O2 -fno-strict-aliasing"
CXXFLAGS="-march=i686 -pipe -O2 -fno-strict-aliasing"
LDFLAGS="-Wl,-O1"




Comment 3


SpanKY






          2012-09-06 19:53:30 UTC
        

try to update your binutils first




Comment 4


Simon





          2012-09-09 08:27:49 UTC
        

(In reply to comment #3)
> try to update your binutils first

I tried that and it worked, glibc now emerged correctly. Thanks!




Comment 5


SpanKY






          2012-09-13 07:32:26 UTC
        

for glibc-2.16, i've raised the min binutils version to 2.20









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

