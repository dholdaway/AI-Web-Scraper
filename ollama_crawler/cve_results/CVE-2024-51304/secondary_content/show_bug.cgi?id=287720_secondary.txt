Title: 287720 – texlive-latex -- /usr/bin/fmtutil Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=287720

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 287720
texlive-latex -- /usr/bin/fmtutil Segmentation fault
Last modified: 2009-11-18 11:32:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 287720 
      - texlive-latex -- /usr/bin/fmtutil Segmentation fault


Summary:
texlive-latex -- /usr/bin/fmtutil Segmentation fault
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alexis Ballier








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-05 07:26 UTC by mikeym





      Modified:
    
2009-11-18 11:32 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



erlv5241
tex









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --oneshot -av texlive-latex

              (out1.txt,22.55 KB,
                text/plain)

            
2009-10-05 22:03 UTC,

            mikeym




Details





emerge --info

              (out2.txt,3.45 KB,
                text/plain)

            
2009-10-05 22:04 UTC,

            mikeym




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


mikeym





          2009-10-05 07:26:29 UTC
        

fmtutil is failing to build formats

fmtutil: /var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-var/web2c/pdftex/pdflatex.fmt installed.
fmtutil: running `luatex -ini   -jobname=lualatex -progname=lualatex lualatex.ini' ...
/usr/bin/fmtutil: line 316: 18647 Segmentation fault      ${1+"$@"}
Error: `luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini' failed
fmtutil: running `luatex -ini   -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' ...
/usr/bin/fmtutil: line 316: 18656 Segmentation fault      ${1+"$@"}
Error: `luatex -ini  -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' failed

###############################################################################
fmtutil: Error! Not all formats have been built successfully.
Visit the log files in directory
  /var/tmp/portage/dev-texlive/texlive-latex-2008-r2/work/texmf-var/web2c
for details.
###############################################################################

This is a summary of all `failed' messages and warnings:
`luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini' failed
`luatex -ini  -jobname=pdflualatex -progname=pdflualatex pdflualatex.ini' failed
 * 
 * ERROR: dev-texlive/texlive-latex-2008-r2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2237:  Called texlive-module_src_compile
 *             environment, line 2685:  Called die
 * The specific snippet of code:
 *               VARTEXFONTS="${T}/fonts" TEXMFHOME="${S}/texmf:${S}/texmf-dist:${S}/texmf-var" env -u TEXINPUTS fmtutil --cnffile "${i}" --fmtdir "${S}/texmf-var/web2c" --all || die "failed to build format ${i}";
 *  The die message:
 *   failed to build format texmf/fmtutil/format.latex.cnf
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/environment'.
 * 

>>> Failed to emerge dev-texlive/texlive-latex-2008-r2, Log file:

>>>  '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/build.log'

 * Messages for package dev-texlive/texlive-latex-2008-r2:

 * 
 * ERROR: dev-texlive/texlive-latex-2008-r2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2237:  Called texlive-module_src_compile
 *             environment, line 2685:  Called die
 * The specific snippet of code:
 *               VARTEXFONTS="${T}/fonts" TEXMFHOME="${S}/texmf:${S}/texmf-dist:${S}/texmf-var" env -u TEXINPUTS fmtutil --cnffile "${i}" --fmtdir "${S}/texmf-var/web2c" --all || die "failed to build format ${i}";
 *  The die message:
 *   failed to build format texmf/fmtutil/format.latex.cnf
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-texlive/texlive-latex-2008-r2/temp/environment'.
 * 

 * GNU info directory index is up-to-date.

 * IMPORTANT: 83 config files in '/etc' need updating.
 * See the CONFIGURATION FILES section of the emerge
 * man page to learn how to update config files.

Problem persists after following Texlive update guide.




Comment 1


Alex Legler (RETIRED)








          2009-10-05 14:43:46 UTC
        

Post emerge --info and a full build log. What has this to do with HAL?




Comment 2


mikeym





          2009-10-05 22:03:54 UTC
        

Created attachment 206191 [details]
emerge --oneshot -av texlive-latex




Comment 3


mikeym





          2009-10-05 22:04:50 UTC
        

Created attachment 206193 [details]
emerge --info




Comment 4


mikeym





          2009-10-05 22:07:20 UTC
        

Here are the files you requested. I'm not sure about the hal thing. I thought that hal was failing on trying to emerge texlive-latex when I was running a revdep-rebuild but I've built hal by hand now with no problems.

texlive-latex however still fails




Comment 5


mikeym





          2009-10-07 06:13:15 UTC
        

This is a serious problem as it's causing me to be unable to run revdep-update or install many packages such as gnash.




Comment 6


mikeym





          2009-10-07 21:30:20 UTC
        

I traced this to a problem with luatex so downgraded this and reinstalled everyhting 




Comment 7


Alexis Ballier






          2009-10-12 21:50:37 UTC
        

try this as a user in an empty dir:

luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini

and attach the log there.
luatex seems to segfault, if that happens to be true, please visit http://www.gentoo.org/proj/en/qa/backtraces.xml and attach a backtrace.




Comment 8


Alexis Ballier






          2009-11-12 18:50:18 UTC
        

(In reply to comment #7)
> try this as a user in an empty dir:
> 
> luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini
> 
> and attach the log there.
> luatex seems to segfault, if that happens to be true, please visit
> http://www.gentoo.org/proj/en/qa/backtraces.xml and attach a backtrace.
> 

get back to us




Comment 9


Ling Kun





          2009-11-18 11:32:35 UTC
        

I got the same problem ,and when  I ran the command the output seems all right :
 # luatex -ini  -jobname=lualatex -progname=lualatex lualatex.ini
This is LuaTeX, Version beta-0.44.0-2009111818 (INITEX)
(/usr/share/texmf-dist/tex/latex/latexconfig/lualatex.ini
(/usr/share/texmf/tex/generic/config/pdftexconfig.tex
! Undefined control sequence.
l.3 \pdfoutput
              =1
? ^C! Interruption.
<to be read again> 
                   =
l.3 \pdfoutput=
               1

--------------------------------------------------------------------
# emerge --info
Portage 2.1.6.13 (default/linux/x86/10.0/desktop, gcc-4.4.2, glibc-2.9_p20081201-r2, 2.6.31-gentoo-r6-Lingkun i686)
=================================================================
System uname: Linux-2.6.31-gentoo-r6-Lingkun-i686-Intel-R-_Pentium-R-_Dual_CPU_T2390_@_1.86GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 18 Nov 2009 02:30:23 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p28
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.6.2-r1
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.8.0
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.5.2-r2
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=prescott -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=prescott -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp.heanet.ie/pub/gentoo/"
LDFLAGS="-Wl,-O1"
LINGUAS=" en zh_CN zh"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/gentoo-china /usr/local/portage/layman/qting-edge"
SYNC="rsync://134.68.220.73/gentoo-portage"
USE="X a52 aac acl acpi alsa avahi bash-completion berkdb bindist branding bzip2 cairo canon cdr cjk cleartype cli consolekit cracklib cups dbus djvu dmx dri dts dvd dvdr eds emboss encode evo faac fam firefox flac fontconfig gdbm gif gnome gpm gstreamer gtk hal iconv ipod ipv6 jack java jpeg jpeg2k kde laptop latex ldap libnotify mad mikmod mmx modules mp3 mp4 mpeg mudflap nautilus ncurses nls nptl nptlonly ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3 qt3support qt4 quicktime readline reflection samba sdl session spell spl sse sse2 ssl startup-notification svg sysfs tcpd tex thunar tiff truetype unicode usb vim-syntax vorbis webkit win32codecs wma x264 x86 xinerama xml xorg xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS=" en zh_CN zh" USERLAND="GNU" VIDEO_CARDS="intel vesa"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS
----------------------------------------------------------------------------
 # emerge -av dev-texlive/texlive-latex

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] dev-texlive/texlive-latex-2008-r1  USE="-doc -source" 0 kB

Thanks for you guys!













Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

