Title: 433954 – Revdep-rebuild keeps wanting to rebuild the same 5 packages
URL: https://bugs.gentoo.org/show_bug.cgi?id=433954

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 433954
Revdep-rebuild keeps wanting to rebuild the same 5 packages
Last modified: 2012-09-07 20:57:38 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 433954 
      - Revdep-rebuild keeps wanting to rebuild the same 5 packages


Summary:
Revdep-rebuild keeps wanting to rebuild the same 5 packages
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Tools

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage Tools Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-09-04 19:12 UTC by Stuart Luppescu





      Modified:
    
2012-09-07 20:57 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Log of revdep-rebuild --keep-temp  --pretend

              (rvdprb.log,6.28 KB,
                text/plain)

            
2012-09-06 19:32 UTC,

            Stuart Luppescu




Details





all files in /var/cache/revdep-rebuild tarred and bzip2'ed

              (revdep-rebuild-files.tar.bz2,51.99 KB,
                application/octet-stream)

            
2012-09-06 19:35 UTC,

            Stuart Luppescu




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stuart Luppescu





          2012-09-04 19:12:21 UTC
        

No matter how many times I rebuild the packages revdep-rebuild keeps saying they are missing dependencies and wants to rebuild them again. Here are the packages:
[ebuild   R    ] app-emulation/emul-linux-x86-baselibs-20120520  USE="-development" 0 kB
[ebuild   R    ] app-emulation/emul-linux-x86-gtklibs-20120520  USE="-development" 0 kB
[ebuild   R   ~] www-client/firefox-15.0  USE="alsa dbus ipc jit libnotify minimal startup-notification webm -bindist -custom-cflags -custom-optimization -debug -gstreamer -pgo (-selinux) -system-sqlite -wifi" LINGUAS="ja -af -ak -ar -as -ast -be -bg -bn_BD -bn_IN -br -bs -ca -cs -csb -cy -da -de -el -en_GB -en_ZA -eo -es_AR -es_CL -es_ES -es_MX -et -eu -fa -fi -fr -fy_NL -ga_IE -gd -gl -gu_IN -he -hi_IN -hr -hu -hy_AM -id -is -it -kk -km -kn -ko -ku -lg -lt -lv -mai -mk -ml -mr -nb_NO -nl -nn_NO -nso -or -pa_IN -pl -pt_BR -pt_PT -rm -ro -ru -si -sk -sl -son -sq -sr -sv_SE -ta -ta_LK -te -th -tr -uk -vi -zh_CN -zh_TW -zu" 0 kB
[ebuild   R    ] mail-client/thunderbird-10.0.6  USE="alsa crypt dbus ipc libnotify lightning minimal startup-notification webm -bindist -custom-cflags -custom-optimization -debug -gconf -mozdom (-selinux) -system-sqlite -wifi" LINGUAS="ja -ar -ast -be -bg -bn_BD -br -ca -cs -da -de -el -en_GB -es_AR -es_ES -et -eu -fi -fr -fy_NL -ga_IE -gd -gl -he -hu -id -is -it -ko -lt -nb_NO -nl -nn_NO -pa_IN -pl -pt_BR -pt_PT -rm -ro -ru -si -sk -sl -sq -sr -sv_SE -ta_LK -tr -uk -vi -zh_CN -zh_TW" 0 kB
[ebuild   R    ] app-emulation/virtualbox-extpack-oracle-4.1.18  0 kB

The reasons for the problems don't make sense. For example,
* broken /usr/lib64/firefox/components/libmozgnome.so (requires libmozalloc.so
libxpcom.so)
Then  ldd /usr/lib64/firefox/components/libmozgnome.so gives
        libxpcom.so => not found
        libmozalloc.so => not found
but
  ->> locate libxpcom
/usr/lib64/firefox/libxpcom.so
/usr/lib64/thunderbird/libxpcom.so
  ->> locate libmozalloc
/usr/lib64/firefox/libmozalloc.so
/usr/lib64/thunderbird/libmozalloc.so

ldconfig, lafilefixer, python-updater do not fix this.

Also (don't know if this is related or not, but) it get a lot of permissions errors in 3_errors.rr, such as

ldd: warning: you do not have execution permission for `/usr/lib64/virtualbox/components/VBoxC.so'
ldd: warning: you do not have execution permission for `/usr/lib64/virtualbox/components/VBoxSVCM.so'
ldd: warning: you do not have execution permission for `/usr/lib64/virtualbox/components/VBoxXPCOMIPCC.so'

Reproducible: Always

Steps to Reproduce:
1. run revdep-rebuild
2. run it again and again and again
3.
Actual Results:  
It still tells me I need to rebuild those five packages

Expected Results:  
It should tell me dynamic linking is consistent

  ->> emerge --info
Portage 2.1.11.9 (default/linux/amd64/10.0/desktop, gcc-4.5.4, glibc-2.15-r2, 3.4.9-gentoo x86_64)
=================================================================
System uname: Linux-3.4.9-gentoo-x86_64-Intel-R-_Core-TM-_i7-2640M_CPU_@_2.80GHz-with-gentoo-2.1
Timestamp of tree: Tue, 04 Sep 2012 07:45:01 +0000
app-shells/bash:          4.2_p37
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.3-r2, 3.2.3
dev-util/cmake:           2.8.8-r3
dev-util/pkgconfig:       0.27
sys-apps/baselayout:      2.1-r1
sys-apps/openrc:          0.9.8.4
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.9.6-r3, 1.10.3, 1.11.6
sys-devel/binutils:       2.22-r1
sys-devel/gcc:            4.5.4
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.4-r2 (virtual/os-headers)
sys-libs/glibc:           2.15-r2
Repositories: gentoo
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS=" -march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf                 /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /e                tc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS=" -march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--keep-going --autounmask=n --with-bdeps=y"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles news paral                lel-fetch parse-eapi-ebuild-head protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unm                erge-orphans userfetch"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://mirror.mcs.anl.gov/pub/gentoo/ http://gentoo.cites.uiuc.edu/pub/gentoo/ "
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en ja"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delet                e --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="3dnow X Xaw3d a52 aac acl acpi alsa amd64 apm arts atlas audiofile avi berkdb blas bluetooth branding browserplugin bzip2 cairo canna cdda cdr cjk cli consolekit cracklib crypt cups curl cxx dbus dmix dri dts dvd dvdr emacs emboss encode esd exif f77 faad fam firefox flac fortran freewnn gdbm gif glib glitz gnome gnome-keyring gnutls gpg gpm gtk gtk2 iconv imlib immqt-bc ipv6 jack java jpeg kde lapack lcms ldap leim libg++                 libnotify libwww live mad mikmod mmx mng modules mozsvg mp3 mp4 mpeg mudflap multilib musepack ncurses nls nptl nptlonly nsplugin ogg opengl openmp oss pam pango pcre pdf pdflib perl png policykit ppds pppd python qt                 qt3support qt4 qtmt quicktime readline sdl semantic-desktop session slang spell sse sse2 ssl startup-notifi                cation svg tcpd tiff truetype udev udisks uim unicode upower usb userlocales vorbis wma wxwidgets x264 x86_64 xcb xfs xml xml2 xrandr xulrunner xv xvid zlib" ALSA_CARDS="snd-hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw                 multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" EL                IBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx                " INPUT_DEVICES="evdev mouse keyboard synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGU                AS="en ja" PHP_TARGETS="php5-3" PYTHON_TARGETS="python3_2 python2_7" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="intel i915 i965 vesa fbdev vga" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4option                s ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos                 account"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Paul Varner (RETIRED)






          2012-09-06 18:38:40 UTC
        

Please run "revdep-rebuild --keep-temp --pretend"

When it is finished, paste the output here and attach the files from /var/cache/revdep-rebuild to the bug.




Comment 2


Stuart Luppescu





          2012-09-06 19:32:36 UTC
        

Created attachment 323102 [details]
Log of revdep-rebuild --keep-temp  --pretend




Comment 3


Stuart Luppescu





          2012-09-06 19:35:23 UTC
        

Created attachment 323104 [details]
all files in /var/cache/revdep-rebuild tarred and bzip2'ed




Comment 4


Stuart Luppescu





          2012-09-06 19:36:15 UTC
        

Here you go. Thanks for your help.




Comment 5


Paul Varner (RETIRED)






          2012-09-06 20:10:58 UTC
        

Let's get rid of the binary packages first, place the following line in your /etc/make.conf file:

SEARCH_DIRS_MASK="/lib32 /usr/lib32 /usr/lib64/virtualbox/ExtensionPacks"

Secondly, verify that /var/cache/revdep-rebuild/2_ldpath.rr still exists and what does the following command show:

env LD_LIBRARY_PATH=$(<"/var/cache/revdep-rebuild/2_ldpath.rr") ldd /usr/lib64/firefox/components/libdbusservice.so




Comment 6


Stuart Luppescu





          2012-09-06 20:57:02 UTC
        

I added that line to make.conf. Should I try rerunning revdep-rebuild?

Here is the output from ldd:
env LD_LIBRARY_PATH=$(<"/var/cache/revdep-rebuild/2_ldpath.rr") ldd /usr/lib64/firefox/components/libdbusservice.so
        linux-vdso.so.1 (0x00007fff37fff000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fbc9ea0f000)
        libxpcom.so => not found
        libmozalloc.so => not found
        libnspr4.so => /usr/lib64/libnspr4.so (0x00007fbc9e7cf000)
        libdbus-glib-1.so.2 => /usr/lib64/libdbus-glib-1.so.2 (0x00007fbc9e5a5000)
        libdbus-1.so.3 => /usr/lib64/libdbus-1.so.3 (0x00007fbc9e367000)
        libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libstdc++.so.6 (0x00007fbc9e063000)
        libc.so.6 => /lib64/libc.so.6 (0x00007fbc9dcb8000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fbc9ee5f000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007fbc9dab4000)
        libgio-2.0.so.0 => /usr/lib64/libgio-2.0.so.0 (0x00007fbc9d771000)
        libgobject-2.0.so.0 => /usr/lib64/libgobject-2.0.so.0 (0x00007fbc9d51e000)
        libgmodule-2.0.so.0 => /usr/lib64/libgmodule-2.0.so.0 (0x00007fbc9d31a000)
        libgthread-2.0.so.0 => /usr/lib64/libgthread-2.0.so.0 (0x00007fbc9d115000)
        librt.so.1 => /lib64/librt.so.1 (0x00007fbc9cf0b000)
        libglib-2.0.so.0 => /usr/lib64/libglib-2.0.so.0 (0x00007fbc9cbe7000)
        libm.so.6 => /lib64/libm.so.6 (0x00007fbc9c8f7000)
        libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libgcc_s.so.1 (0x00007fbc9c6e0000)
        libz.so.1 => /lib64/libz.so.1 (0x00007fbc9c4ca000)
        libresolv.so.2 => /lib64/libresolv.so.2 (0x00007fbc9c2b3000)
        libffi.so.6 => /usr/lib64/libffi.so.6 (0x00007fbc9c0aa000)




Comment 7


Stuart Luppescu





          2012-09-06 21:19:49 UTC
        

Adding the SEARCH_DIRS_MASK




Comment 8


Stuart Luppescu





          2012-09-06 21:21:35 UTC
        

(In reply to comment #7)
> Adding the SEARCH_DIRS_MASK

(Sorry about that)

Adding that line left only firefox and thunderbird to be rebuilt. I'll see what happens after I rebuild them.




Comment 9


Paul Varner (RETIRED)






          2012-09-06 21:44:43 UTC
        

If that doesn't fix firefox and thunderbird, rerun the revdep-rebuild --keep-temp --pretend command and the ldd command and post the output of the ldd command again.




Comment 10


Stuart Luppescu





          2012-09-06 22:28:50 UTC
        

I was hopeful, but unfortunately it didn't work.

env LD_LIBRARY_PATH=$(<"/var/cache/revdep-rebuild/2_ldpath.rr") ldd /usr/lib64/firefox/components/libdbusservice.so
        linux-vdso.so.1 (0x00007fff2c5ff000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fedf2550000)
        libxpcom.so => not found
        libmozalloc.so => not found
        libnspr4.so => /usr/lib64/libnspr4.so (0x00007fedf2310000)
        libdbus-glib-1.so.2 => /usr/lib64/libdbus-glib-1.so.2 (0x00007fedf20e6000)
        libdbus-1.so.3 => /usr/lib64/libdbus-1.so.3 (0x00007fedf1ea8000)
        libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libstdc++.so.6 (0x00007fedf1ba4000)
        libc.so.6 => /lib64/libc.so.6 (0x00007fedf17f9000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fedf29a1000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007fedf15f5000)
        libgio-2.0.so.0 => /usr/lib64/libgio-2.0.so.0 (0x00007fedf12b2000)
        libgobject-2.0.so.0 => /usr/lib64/libgobject-2.0.so.0 (0x00007fedf105f000)
        libgmodule-2.0.so.0 => /usr/lib64/libgmodule-2.0.so.0 (0x00007fedf0e5b000)
        libgthread-2.0.so.0 => /usr/lib64/libgthread-2.0.so.0 (0x00007fedf0c56000)
        librt.so.1 => /lib64/librt.so.1 (0x00007fedf0a4c000)
        libglib-2.0.so.0 => /usr/lib64/libglib-2.0.so.0 (0x00007fedf0728000)
        libm.so.6 => /lib64/libm.so.6 (0x00007fedf0438000)
        libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libgcc_s.so.1 (0x00007fedf0221000)
        libz.so.1 => /lib64/libz.so.1 (0x00007fedf000b000)
        libresolv.so.2 => /lib64/libresolv.so.2 (0x00007fedefdf4000)
        libffi.so.6 => /usr/lib64/libffi.so.6 (0x00007fedefbeb000)




Comment 11


Stuart Luppescu





          2012-09-06 22:38:43 UTC
        

Here's the output from revdep-rebuild:

 * Configuring search environment for revdep-rebuild

 * Checking reverse dependencies
 * Packages containing binaries and libraries broken by a package update
 * will be emerged.

 * Collecting system binaries and libraries
 * Generated new 1_files.rr
 * Collecting complete LD_LIBRARY_PATH
 * Generated new 2_ldpath.rr
 * Checking dynamic linking consistency
 *   broken /usr/lib64/firefox/components/libbrowsercomps.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/firefox/components/libdbusservice.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/firefox/components/libmozgnome.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/firefox/libxpcom.so (requires libxul.so)
 *   broken /usr/lib64/firefox/libxul.so (requires libmozalloc.so
libmozsqlite3.so)
 *   broken /usr/lib64/firefox/plugin-container (requires libxul.so)
 *   broken /usr/lib64/thunderbird/components/libdbusservice.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/thunderbird/components/libmozgnome.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/thunderbird/extensions/{847b3a00-7ab1-11d4-8f02-006008948af5}/platform/Linux_x86_64-gcc3/components/libenigmime-x86_64-gcc3.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/thunderbird/extensions/{847b3a00-7ab1-11d4-8f02-006008948af5}/platform/Linux_x86_64-gcc3/components/libipc-x86_64-gcc3.so (requires libmozalloc.so
libxpcom.so)
 *   broken /usr/lib64/thunderbird/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103}/components/libcalbasecomps.so (requires libmozalloc.so
libxpcom.so
libxul.so)
 *   broken /usr/lib64/thunderbird/libprldap60.so (requires libldap60.so)
 *   broken /usr/lib64/thunderbird/libxpcom.so (requires libxul.so)
 *   broken /usr/lib64/thunderbird/libxul.so (requires libldap60.so
libmozalloc.so
libmozsqlite3.so
libprldap60.so)
 *   broken /usr/lib64/thunderbird/plugin-container (requires libmozalloc.so
libxul.so)
 * Generated new 3_broken.rr
 * Assigning files to packages
 *   /usr/lib64/firefox/components/libbrowsercomps.so -> www-client/firefox
 *   /usr/lib64/firefox/components/libdbusservice.so -> www-client/firefox
 *   /usr/lib64/firefox/components/libmozgnome.so -> www-client/firefox
 *   /usr/lib64/firefox/libxpcom.so -> www-client/firefox
 *   /usr/lib64/firefox/libxul.so -> www-client/firefox
 *   /usr/lib64/firefox/plugin-container -> www-client/firefox
 *   /usr/lib64/thunderbird/components/libdbusservice.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/components/libmozgnome.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/extensions/{847b3a00-7ab1-11d4-8f02-006008948af5}/platform/Linux_x86_64-gcc3/components/libenigmime-x86_64-gcc3.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/extensions/{847b3a00-7ab1-11d4-8f02-006008948af5}/platform/Linux_x86_64-gcc3/components/libipc-x86_64-gcc3.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103}/components/libcalbasecomps.so -> mail-client/thunderbird
*   /usr/lib64/thunderbird/libprldap60.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/libxpcom.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/libxul.so -> mail-client/thunderbird
 *   /usr/lib64/thunderbird/plugin-container -> mail-client/thunderbird
 * Generated new 4_raw.rr and 4_owners.rr
 * Cleaning list of packages to rebuild
 * Generated new 4_pkgs.rr
 * Assigning packages to ebuilds
 * Generated new 4_ebuilds.rr
 * Evaluating package order
 * Generated new 5_order.rr
 * All prepared. Starting rebuild
emerge --complete-graph=y --oneshot --keep-going --autounmask=n --with-bdeps=y --pretend mail-client/thunderbird:0 www-client/firefox:0

These are the packages that would be merged, in order:

Calculating dependencies  .... done!
[ebuild   R   ~] www-client/firefox-15.0 
[ebuild   R    ] mail-client/thunderbird-10.0.6 
 * Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.




Comment 12


Paul Varner (RETIRED)






          2012-09-07 14:56:47 UTC
        

Okay, we need to figure out what is going on with ldd. Since it is reporting that the libraries are missing.  What does the following return:

env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" ldd /usr/lib64/firefox/components/libdbusservice.so




Comment 13


Stuart Luppescu





          2012-09-07 16:27:13 UTC
        

(In reply to comment #12)
> Okay, we need to figure out what is going on with ldd. Since it is reporting
> that the libraries are missing.  What does the following return:
> 
> env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" ldd
> /usr/lib64/firefox/components/libdbusservice.so

Here you go. Thanks again for keeping on this.

env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" ldd /usr/lib64/firefox/components/libdbusservice.so
        linux-vdso.so.1 (0x00007fff825ff000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f87aac80000)
        libxpcom.so => not found
        libmozalloc.so => not found
        libnspr4.so => /usr/lib64/libnspr4.so (0x00007f87aaa40000)
        libdbus-glib-1.so.2 => /usr/lib64/libdbus-glib-1.so.2 (0x00007f87aa816000)
        libdbus-1.so.3 => /usr/lib64/libdbus-1.so.3 (0x00007f87aa5d8000)
        libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libstdc++.so.6 (0x00007f87aa2d4000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f87a9f29000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f87ab0d1000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007f87a9d25000)
        libgio-2.0.so.0 => /usr/lib64/libgio-2.0.so.0 (0x00007f87a99e2000)
        libgobject-2.0.so.0 => /usr/lib64/libgobject-2.0.so.0 (0x00007f87a978f000)
        libgmodule-2.0.so.0 => /usr/lib64/libgmodule-2.0.so.0 (0x00007f87a958b000)
        libgthread-2.0.so.0 => /usr/lib64/libgthread-2.0.so.0 (0x00007f87a9386000)
        librt.so.1 => /lib64/librt.so.1 (0x00007f87a917c000)
        libglib-2.0.so.0 => /usr/lib64/libglib-2.0.so.0 (0x00007f87a8e58000)
        libm.so.6 => /lib64/libm.so.6 (0x00007f87a8b68000)
        libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libgcc_s.so.1 (0x00007f87a8951000)
        libz.so.1 => /lib64/libz.so.1 (0x00007f87a873b000)
        libresolv.so.2 => /lib64/libresolv.so.2 (0x00007f87a8524000)
        libffi.so.6 => /usr/lib64/libffi.so.6 (0x00007f87a831b000)

This is really peculiar because those libraries are totally there:

 ->> ll /usr/lib64/firefox/libxpcom.so 
-rwxr-xr-x 1 root root 18624 Sep  7 10:41 /usr/lib64/firefox/libxpcom.so
 ->> ll /usr/lib64/firefox/libmozalloc.so 
-rwxr-xr-x 1 root root 10216 Sep  7 10:41 /usr/lib64/firefox/libmozalloc.so




Comment 14


Paul Varner (RETIRED)






          2012-09-07 17:49:55 UTC
        

Let's make sure we are calling the correct ldd.

Does "which ldd" return /usr/bin/ldd and if you run

env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" /usr/bin/ldd /usr/lib64/firefox/components/libdbusservice.so

do you get the same results?




Comment 15


Stuart Luppescu





          2012-09-07 17:54:54 UTC
        

(In reply to comment #14)
> Let's make sure we are calling the correct ldd.
> 
> Does "which ldd" return /usr/bin/ldd and if you run

Yes.
 
> env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" /usr/bin/ldd
> /usr/lib64/firefox/components/libdbusservice.so
> 
> do you get the same results?

Yes.




Comment 16


Paul Varner (RETIRED)






          2012-09-07 18:19:10 UTC
        

Okay, let's try running the linker directly:

env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox" /lib64/ld-linux-x86-64.so.2 --list /usr/lib64/firefox/components/libdbusservice.so

Also what does env | fgrep "LD_" return?




Comment 17


Stuart Luppescu





          2012-09-07 18:29:27 UTC
        

(In reply to comment #16)
> Okay, let's try running the linker directly:
> 
> env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/firefox"
> /lib64/ld-linux-x86-64.so.2 --list
> /usr/lib64/firefox/components/libdbusservice.so

Interesting:

env LD_LIBRARY_PATH="/lib64:/usr/lib64:/usr/lib64/fi                                              refox" /lib64/ld-linux-x86-64.so.2 --list /usr/lib64/firefox/components/libdbusservice.s                                              o
        linux-vdso.so.1 (0x00007fff6acc3000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f4f9b73d000)
        libxpcom.so => /usr/lib64/firefox/libxpcom.so (0x00007f4f9b537000)
        libmozalloc.so => /usr/lib64/firefox/libmozalloc.so (0x00007f4f9b334000)
        libnspr4.so => /usr/lib64/libnspr4.so (0x00007f4f9b0f5000)
        libdbus-glib-1.so.2 => /usr/lib64/libdbus-glib-1.so.2 (0x00007f4f9aecb000)
        libdbus-1.so.3 => /usr/lib64/libdbus-1.so.3 (0x00007f4f9ac8d000)
        libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.5.4/libstdc++.so.6 (0x00007                                              f4f9a95b000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f4f9a5b0000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f4f9bb60000)
        libxul.so => /usr/lib64/firefox/libxul.so (0x00007f4f983f3000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007f4f981ef000)

(further listing omitted)

> Also what does env | fgrep "LD_" return?

 env | fgrep "LD_"
LD_LIBRARY_PATH=/usr/lib/rvplayer

Oh, I see. That line is in my .bashrc, left over from something long, long ago, that I don't even remember. I removed it and now it reports my dynamic linking is consistent. 

Thanks very much for the help, and sorry for my stupidly leaving that line in .bashrc.




Comment 18


Paul Varner (RETIRED)






          2012-09-07 20:57:38 UTC
        

No problem, glad that we could figure it out.  Marking bug as resolved.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

