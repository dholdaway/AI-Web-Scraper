Title: 149237 – hamachi-0.9.9.9_p20-r2 occasionally hangs when stopping daemon
URL: https://bugs.gentoo.org/show_bug.cgi?id=149237

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 149237
hamachi-0.9.9.9_p20-r2 occasionally hangs when stopping daemon
Last modified: 2007-07-31 14:11:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 149237 
      - hamachi-0.9.9.9_p20-r2 occasionally hangs when stopping daemon


Summary:
hamachi-0.9.9.9_p20-r2 occasionally hangs when stopping daemon
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Caleb Tennis (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-26 15:48 UTC by Michael Ploujnikov





      Modified:
    
2007-07-31 14:11 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



waikurosu









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Ploujnikov





          2006-09-26 15:48:53 UTC
        

I have noticed, on multiple occasions (but not every shutdown/reboot), that during a shutdown, Hamachi's init script does not terminate and it just hangs there after printing:
 * Stopping hamachi ... 
This of course hangs my shutdown/reboot procedure.
I checked hamachi's log and I set start-stop-daemon to be verbose but that didn't help me get any info at all as to what is going on during the "stopping" phase and why it is hanging.

I also tried `while true; do /etc/init.d/hamachi restart; done` while the system was running, but so far haven't even been able to re-produce the problem.




Comment 1


Caleb Tennis (RETIRED)






          2006-09-27 03:30:05 UTC
        

do you have anything actively talking over hamachi when it's trying ot shutdown?  I'm wondering if the daemon won't shutdown as long as traffic is flowing.




Comment 2


Michael Ploujnikov





          2006-09-27 09:31:00 UTC
        

Nothing that I'm aware of is using the hamachi network when I'm shutting down.
I tried constantly pinging a host on my hamachi network while I was running `/etc/init.d/hamachi restart` and the init script successfully stopped and started the service. I also tried restarting hamachi with some VNC traffic and got the same results.




Comment 3


Michael Kedzierski





          2006-10-11 17:52:13 UTC
        

Hi, I am also experiencing the same problem, it happened the first time I tried to restart after having installed hamachi. I haven't performed a second shutdown yet, so I'm uncertain as to whether this happens intermittently or not.

I'll have a poke around at it though.




Comment 4


Caleb Tennis (RETIRED)






          2006-11-03 07:53:27 UTC
        

Maybe we need to send it a different signal to stop from start-stop-daemon?

Does it help if we add a "-s 2" or "-s 1" to the start-stop-daemon line that stops the service?




Comment 5


Caleb Tennis (RETIRED)






          2006-11-03 07:55:24 UTC
        

der, ignore that.

I'm curious though, is it hanging on the logout command or the stop command in the stop portion?




Comment 6


Michael Ploujnikov





          2006-11-03 09:10:45 UTC
        

After adding print statements 
to /etc/init.d/hamachi, before

/usr/bin/hamachi -c $CONFDIR logout &>${LOG}

and

/usr/bin/hamachi -c $CONFDIR stop &>${LOG}

lines

and executing

/etc/init.d/hamachi stop

it appears that it hangs during the stopping stage.

This also shows that I was able to re-produce the hang without initiating a system shutdown.

On a separate note:
I have a hunch that this has something to do with the state of the network(s) that my hamachi client is connected to. I didn't test this at all, but it seems like this hang only happens after I re-connect another client on one of my private networks.




Comment 7


Caleb Tennis (RETIRED)






          2007-07-31 14:11:45 UTC
        

never been able to reproduce.  closing as a worksforme.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

