Title: 175589 – media-gfx/inkscape-0.45.1 can't compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=175589

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 175589
media-gfx/inkscape-0.45.1 can't compile
Last modified: 2007-12-28 21:49:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 175589 
      - media-gfx/inkscape-0.45.1 can't compile


Summary:
media-gfx/inkscape-0.45.1 can't compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Graphics Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-04-22 16:58 UTC by Comsultia, Ltd.





      Modified:
    
2007-12-28 21:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



j.hartig









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Comsultia, Ltd.





          2007-04-22 16:58:18 UTC
        

Compile failure in any combination of USE flags

Reproducible: Always

Steps to Reproduce:
1. emerge inkscape

Actual Results:  
if i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I..   -I/usr/include/freetype2    -I/usr/include/freetype2   -DPOTRACE=\"potrace\" -pthread -I/usr/include/gdkmm-2.4 -I/usr/lib/gdkmm-2.4/include -I/usr/include/glibmm-2.4 -I/usr/lib/glibmm-2.4/include -I/usr/include/pangomm-1.4 -I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include -I/usr/include/sigc++-2.0 -I/usr/lib/sigc++-2.0/include -I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include -I/usr/include/pango-1.0 -I/usr/include/cairo -I/usr/include/gtkmm-2.4 -I/usr/lib/gtkmm-2.4/include -I/usr/include/atkmm-1.6 -I/usr/include/atk-1.0 -I/usr/include/libxml2 -I/usr/include/gtkspell-2.0 -I/usr/include/libpng12   -I../cxxtest    -Wall -Wformat-security -W -Wpointer-arith -Wcast-align -Wsign-compare -Woverloaded-virtual -Wswitch  -Wno-unused-parameter -O2 -march=pentium4 -msse -msse2 -mmmx -fomit-frame-pointer -MT extension/system.o -MD -MP -MF "extension/.deps/system.Tpo" \
  -c -o extension/system.o `test -f 'extension/system.cpp' || echo './'`extension/system.cpp; \
then mv -f "extension/.deps/system.Tpo" "extension/.deps/system.Po"; \
else rm -f "extension/.deps/system.Tpo"; exit 1; \
fi
extension/paramenum.cpp: In member function ‘virtual Gtk::Widget* Inkscape::Extension::ParamComboBox::get_widget(SPDocument*, Inkscape::XML::Node*)’:
extension/paramenum.cpp:195: error: ‘class Inkscape::Extension::ParamComboBoxEntry’ has no member named ‘set_active_text’
make[2]: *** [extension/paramenum.o] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.45.1/work/inkscape-0.45.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.45.1/work/inkscape-0.45.1'
make: *** [all] Error 2

!!! ERROR: media-gfx/inkscape-0.45.1 failed.
Call stack:
  ebuild.sh, line 1614:   Called dyn_compile
  ebuild.sh, line 971:   Called qa_call 'src_compile'
  environment, line 1743:   Called src_compile
  ebuild.sh, line 1304:   Called gnome2_src_compile
  gnome2.eclass, line 71:   Called die



Portage 2.1.2-r9 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r4, 2.6.19-ck2-r3 i686)
=================================================================
System uname: 2.6.19-ck2-r3 i686 Intel(R) Celeron(R) CPU 2.40GHz
Gentoo Base System version 1.12.4
Timestamp of tree: Wed, 11 Apr 2007 17:30:09 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5-r2, 2.4.2
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium4 -msse -msse2 -mmmx -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /home/mythtv/ /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=pentium4 -msse -msse2 -mmmx -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache digest distlocks metadata-transfer prelink sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="sk_SK.utf8"
LDFLAGS="-Wl,-O1,--enable-new-dtags,--sort-common,-s"
LINGUAS="en sk cz cs ru de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/gentoo-de /usr/portage/local/layman/kolab2 /usr/portage/local/layman/ebuild-exchange /usr/portage/local/layman/fluidportage /usr/portage/local/layman/gentopia /usr/portage/local/layman/xeffects /usr/portage/local/layman/php-experimental /usr/portage/local/layman/php-testing /usr/portage/local/layman/sunrise"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac aalib acl acpi aiglx alsa apm arts asf async audiofile avantgo berkdb bitmap-fonts bluetooth bootsplash bzip2 cairo cdparanoa cdr chardet chroot cli cracklib crypt curl dba dbus divix4linux divx4linux dmi dri dts dv dvb dvd dvdr dvdread eds emboss encode esd exif extensions fame fastcgi fax fbcon festival ffmpeg firefox flac flash foomaticdb fortran gd gdbm geoip gif glitz gnutls gpm gstreamer gtk gtk2 hal iconv icq imagemagick imap imlib innodb isdnlog java javascript jpeg jpeg2k kde kdeenablefinal kdexdeltas libg++ libwww lm_sensors lzo mad maildir matroska mbox midi mikmod mime mjpeg mmx mmx2 modplug mono motif mozsvg mp3 mpeg munin-squid musepack musicbrainz mysql mythtv ncurses net network nls nptl nptlonly nvidia oci8 odbc odk ogg oggvorbis openal opengl pam pcre pda pdf perl png posix povray pppd qt qt3 qt4 quicktime readline reflection rtc samba scenarios sdl session silc sndfile soap speex spell spl sql sqlite sse sse2 ssl subversion svg swat syslog tcpd theora threads tiff timidity transcode truetype truetype-fonts type1-fonts udev unicode usb v4l v4l2 vcd vhosts vidix vorbis wifi win32codecs winbind wma x86 xcomposite xine xinerama xml xml2 xorg xrandr xv xvid xvmc zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en sk cz cs ru de" USERLAND="GNU" VIDEO_CARDS="nvidia i810 nv vesa vga fbdev v4l"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jay Knight





          2007-04-25 22:35:54 UTC
        

Won't compile for me either, but fails with a different error: 

i686-pc-linux-gnu-g++  -Wall -Wformat-security -W -Wpointer-arith -Wcast-align -Wsign-compare -Woverloaded-virtual -Wswitch  -Wno-unused-parameter -march=prescott -O2 -pipe -fomit-frame-pointer   -o inkscape --export-dynamic  main.o  libinkpre.a application/libinkapp.a ui/dialog/libuidialog.a dialogs/libspdialogs.a jabber_whiteboard/libjabber_whiteboard.a pedro/libpedro.a trace/libtrace.a svg/libspsvg.a widgets/libspwidgets.a display/libspdisplay.a helper/libspchelp.a libcroco/libcroco.a libnrtype/libnrtype.a libnr/libnr.a libavoid/libavoid.a livarot/libvarot.a ui/view/libuiview.a ui/libui.a ui/widget/libuiwidget.a graphlayout/libgraphlayout.a removeoverlap/libremoveoverlap.a libcola/libcola.a libvpsc/libvpsc.a extension/libextension.a extension/implementation/libimplementation.a extension/internal/libinternal.a extension/internal/libwpg/libwpg.a extension/script/libscript.a dom/libdom.a xml/libspxml.a util/libinkutil.a io/libio.a  libinkpost.a debug/libinkdebug.a -pthread -lgtkmm-2.4 -lgdkmm-2.4 -latkmm-1.6 -lpangomm-1.4 -lglibmm-2.4 -lxslt -lz -lxml2 -lsigc-2.0 -lgtkspell -lenchant -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lm -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-2.0 -ldl -lgthread-2.0 -lrt -lglib-2.0 -lpng12   -lpng -lz -lpopt   -lXft -lXrender -lfontconfig -lfreetype -lz -lX11   -lpangoft2-1.0 -lpango-1.0 -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0   -lfreetype -lz      -lgc
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld: warning: libstdc++.so.5, needed by /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libgtkmm-2.4.so, may conflict with libstdc++.so.6
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libglibmm-2.4.so: undefined reference to `sigc::internal::signal_impl::erase(std::_List_iterator<sigc::slot_base, sigc::slot_base&, sigc::slot_base*>)'
/usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libglibmm-2.4.so: undefined reference to `sigc::internal::signal_impl::insert(std::_List_iterator<sigc::slot_base, sigc::slot_base&, sigc::slot_base*>, sigc::slot_base const&)'
collect2: ld returned 1 exit status
make[2]: *** [inkscape] Error 1
make[2]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.45.1/work/inkscape-0.45.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/media-gfx/inkscape-0.45.1/work/inkscape-0.45.1'
make: *** [all] Error 2

!!! ERROR: media-gfx/inkscape-0.45.1 failed.
Call stack:
  ebuild.sh, line 1614:   Called dyn_compile
  ebuild.sh, line 971:   Called qa_call 'src_compile'
  environment, line 1713:   Called src_compile
  ebuild.sh, line 1304:   Called gnome2_src_compile
  gnome2.eclass, line 71:   Called die


Portage 2.1.2.2 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.5-r0, 2.6.18-gentoo-r3 i686)
=================================================================
System uname: 2.6.18-gentoo-r3 i686 Intel(R) Pentium(R) 4 CPU 2.80GHz
Gentoo Base System release 1.12.9
Timestamp of tree: Wed, 25 Apr 2007 18:00:10 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31-r5
dev-lang/python:     2.3.5-r3, 2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.15-r1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/php/apache1-php5/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.datapipe.net/gentoo ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo http://gentoo.mirrors.easynews.com/linux/gentoo/ http://open-systems.ufl.edu/mirrors/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/haskell"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa apache2 bash-completion berkdb bitmap-fonts bootsplash cairo cdr cli cracklib crypt cups dbus dri dvd dvdr eds emboss encode fam firefox flac fortran gdbm gif gpm gstreamer gtk hal iconv isdnlog jack java jpeg krb4 ldap libg++ mad midi mikmod mozsvg mp3 mpeg ncurses nls nptl nptlonly ogg opengl pam pcre perl png posix ppds pppd python qt3 qt4 quicktime readline reflection sdl session spell spl ssl symlink tcpd truetype truetype-fonts type1-fonts unicode vim-with-x vorbis win32codecs x86 xinerama xml xorg xv zlib" ALSA_CARDS="azx" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="i810 matrox mga vesa fbdev"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Petteri Räty (RETIRED)






          2007-04-26 08:26:17 UTC
        

(In reply to comment #1)

> /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld:
> warning: libstdc++.so.5, needed by
> /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libgtkmm-2.4.so, may conflict
> with libstdc++.so.6

This would suggest that you did not upgrade your GCC properly
http://www.gentoo.org/doc/en/gcc-upgrading.xml

You most likely should run revdep-rebuild --library libstdc++.so.5




Comment 3


Petteri Räty (RETIRED)






          2007-04-26 08:28:08 UTC
        

(In reply to comment #0)
> CFLAGS="-O2 -march=pentium4 -msse -msse2 -mmmx -fomit-frame-pointer"

Using -msse -msse2 and -mmmx is pointless as -march turns on all of these that your processor supports.




Comment 4


Sunchild





          2007-04-29 21:11:21 UTC
        

(In reply to comment #2)
> (In reply to comment #1)
> 
> > /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../../i686-pc-linux-gnu/bin/ld:
> > warning: libstdc++.so.5, needed by
> > /usr/lib/gcc/i686-pc-linux-gnu/4.1.1/../../../libgtkmm-2.4.so, may conflict
> > with libstdc++.so.6
> 
> This would suggest that you did not upgrade your GCC properly
> http://www.gentoo.org/doc/en/gcc-upgrading.xml
> 
> You most likely should run revdep-rebuild --library libstdc++.so.5

This fixed the problem mentioned in comment #1 for me.






Comment 5


Comsultia, Ltd.





          2007-05-06 17:42:48 UTC
        

requires >=gtkmm-2.10.2 with accesibility USE flag




Comment 6


Jakub Moc (RETIRED)






          2007-12-28 21:49:31 UTC
        

This has become a collection of random issues, plus compiles just fine here.

Closing.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

