Title: 181809 – Rhythmbox freezes after end of first track; rb_player_open never completes
URL: https://bugs.gentoo.org/show_bug.cgi?id=181809

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 181809
Rhythmbox freezes after end of first track; rb_player_open never completes
Last modified: 2007-06-14 16:52:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 181809 
      - Rhythmbox freezes after end of first track; rb_player_open never completes


Summary:
Rhythmbox freezes after end of first track; rb_player_open never completes
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:



http://bugzilla.gnome.org/show_bug.cg...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-12 18:15 UTC by Philip Withnall





      Modified:
    
2007-06-14 16:52 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bugzilla









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ltrace of Rhythmbox while it's not playing the second track

              (ltrace-1.log,4.56 KB,
                text/plain)

            
2007-06-12 18:16 UTC,

            Philip Withnall




Details





ltrace of Rhythmbox as it freezes

              (ltrace-2.log,81.55 KB,
                text/plain)

            
2007-06-12 18:17 UTC,

            Philip Withnall




Details





Terminal output from "rhythmbox -d"

              (debug.log,88.24 KB,
                text/plain)

            
2007-06-12 18:18 UTC,

            Philip Withnall




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Philip Withnall





          2007-06-12 18:15:27 UTC
        

Rhythmbox plays music fine, and works wonderfully until the end of the first track, when it will choose the next track to play, reset the timer to 0, and then sit there and do nothing. Running an ltrace in this state shows that it still thinks it's playing (see first attachment). At this point it hasn't frozen, but isn't working properly. If I then press any button (for example, "Next"), the interface will freeze during the call to rb_player_open (see second attachment), and nothing can be done to recover it.

This is all done with Rhythmbox with the "debug" USE flag, running it from the console with "rhythmbox -d", and the output's attached as the third attachment. I started by playing "Eruption", then "Abduction" was the second song (which didn't play), and it looks like it got as far as selecting "The Tower" as the third song before freezing.

Reproducible: Always

Steps to Reproduce:
1. Run Rhythmbox
2. Start something playing
3. Wait until the first song ends, and playback stops
4. Press any button in Rhythmbox
5. Freeze!




I'm running ~amd64, and here's "emerge --search --verbose" about the pertinent packages.

*  media-sound/rhythmbox
      Latest version available: 0.10.1
      Latest version installed: 0.10.1
      Size of files: 3,328 kB
      Homepage:      http://www.rhythmbox.org/
      Description:   Music management and playback software for GNOME
      License:       GPL-2

*  media-libs/gstreamer
      Latest version available: 0.10.12
      Latest version installed: 0.10.12
      Size of files: 1,798 kB
      Homepage:      http://gstreamer.sourceforge.net
      Description:   Streaming media framework
      License:       LGPL-2

*  x11-libs/gtk+
      Latest version available: 2.10.12
      Latest version installed: 2.10.12
      Size of files: 14,782 kB
      Homepage:      http://www.gtk.org/
      Description:   Gimp ToolKit +
      License:       LGPL-2




Comment 1


Philip Withnall





          2007-06-12 18:16:43 UTC
        

Created attachment 121833 [details]
ltrace of Rhythmbox while it's not playing the second track

This is from while it's not playing the second track (when it's supposed to be), but before I make it freeze.




Comment 2


Philip Withnall





          2007-06-12 18:17:22 UTC
        

Created attachment 121835 [details]
ltrace of Rhythmbox as it freezes

This is an ltrace of Rhythmbox running as I press a button and it freezes.




Comment 3


Philip Withnall





          2007-06-12 18:18:23 UTC
        

Created attachment 121837 [details]
Terminal output from "rhythmbox -d"

This is terminal output from Rhythmbox while it's not playing the second track, through to when it freezes (and stops outputting anything to the terminal).




Comment 4


Philip Withnall





          2007-06-12 18:20:53 UTC
        

Here's my emerge info:

emerge --info
Portage 2.1.2.9 (default-linux/amd64/2007.0, gcc-4.1.2, glibc-2.5-r3, 2.6.21-gentoo-r2 x86_64)
=================================================================
System uname: 2.6.21-gentoo-r2 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System release 1.12.10
Timestamp of tree: Tue, 12 Jun 2007 16:20:01 +0000
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms splitdebug strict"
GENTOO_MIRRORS="http://gentoo.virginmedia.com/ ftp://gentoo.virginmedia.com/sites/gentoo http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/ ftp://ftp.mirrorservice.org/sites/www.ibiblio.org/gentoo/ "
LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"
LINGUAS="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi aim alsa amd64 apache2 artworkextra avahi bash-completion berkdb bitmap-fonts bonobo bzip2 cairo cddb cdparanoia cdr cli cracklib crypt cups dbus doc dri dv dvd dvdr dvdread eds encode esd exif firefox flac fortran ftp galago gd gdbm gif gnome gphoto2 gpm graphviz gstreamer gtk gtkhtml hal hardened iconv ieee1394 ipv6 isdnlog jabber javascript jpeg jpeg2k keyring libg++ libnotify mad matroska midi mime mmx mng mono mp3 mpeg msn mudflap mysql mysqli ncurses nls nocd nptl nptlonly nsplugin offensive ogg opengl openmp pam pango pcre pdf perl php png pppd python quicktime readline reflection samba session spell spl sqlite3 sse sse2 ssl svg tcpd theora tiff truetype truetype-fonts type1-fonts unicode usb videos vorbis xcomposite xml xorg xulrunner zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" CAMERAS="minolta directory ptp2 template" ELIBC="glibc" INPUT_DEVICES="mouse keyboard evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="nvidia nv"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

This means that Rhythmbox is compiled with the following USE flags:
media-sound/rhythmbox-0.10.1  USE="avahi dbus debug doc flac hal keyring libnotify mad python vorbis -daap -howl -ipod -lirc -musicbrainz -tagwriting"




Comment 5


Rémi Cardona (RETIRED)






          2007-06-12 18:26:55 UTC
        

Can you reproduce this bug with older versions of rhythmbox? current svn trunk? Anyway, thanks for all the very precise info but I think you'll have better luck by filing a bug upstream. Please post the url here.

Thanks




Comment 6


Philip Withnall





          2007-06-12 18:40:18 UTC
        

(In reply to comment #5)
> Can you reproduce this bug with older versions of rhythmbox? current svn trunk?
> Anyway, thanks for all the very precise info but I think you'll have better
> luck by filing a bug upstream. Please post the url here.
> 
> Thanks
> 

I've tried with 0.10.0, but no further back, as this problem started when I upgraded to GNOME 2.18, and I was already on Rhythmbox 0.10.0 before that (and it was working fine). The fact that it started after I upgraded makes me think it's some sort of problem with a library such as GTK+ or GStreamer, but I've got no evidence to support that. :-(

I haven't been able to get Rhythmbox trunk to compile for me, as it seems to be using SVN GLib for configuration, but then my system-wide GLib for building and linking. SVN has GSequence support, but my system-wide one doesn't, meaning Rhythmbox fails during compilation.

Upstream bug filed here: http://bugzilla.gnome.org/show_bug.cgi?id=446828

Thanks for the quick response. :-)




Comment 7


Gilles Dartiguelongue (RETIRED)






          2007-06-12 18:56:17 UTC
        

strange issue, this release is a bug fix only release from 0.10.0. Upstream will probably be interested in this. If you want a quicker resolution you might try to catch devs on #rhythmbox on gnome irc network. They are quite responsive with users able to give such feedback.




Comment 8


Philip Withnall





          2007-06-12 22:16:34 UTC
        

(In reply to comment #7)
> strange issue, this release is a bug fix only release from 0.10.0. Upstream
> will probably be interested in this. If you want a quicker resolution you might
> try to catch devs on #rhythmbox on gnome irc network. They are quite responsive
> with users able to give such feedback.
> 

I couldn't catch anybody tonight, but I'll try again soon. Thanks.




Comment 9


Philip Withnall





          2007-06-14 16:52:15 UTC
        

Interestingly, today's update of GTK+ from 2.10.12 to 2.10.13 appears to have fixed the issue, and Rhythmbox now works fine. I've got no idea how this could've happened, unless either there was some specific bug in 2.10.12, or there was some problem with the compilation (which magically didn't cause everything else to fail).

Anyway, issue resolved.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

