Title: 141674 – Several glib/gtk+ dependent binaries hang using glibc-2.3.6's pthreads
URL: https://bugs.gentoo.org/show_bug.cgi?id=141674

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 141674
Several glib/gtk+ dependent binaries hang using glibc-2.3.6's pthreads
Last modified: 2007-03-13 06:37:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 141674 
      - Several glib/gtk+ dependent binaries hang using glibc-2.3.6's pthreads


Summary:
Several glib/gtk+ dependent binaries hang using glibc-2.3.6's pthreads
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

HPPA
        Linux
      







Importance:
      
High
       major
      


Assignee:

HPPA Porters








URL:







Whiteboard:




Keywords:








Depends on:




168131



Blocks:




162770 163611



 

        Show dependency tree





 





      Reported:
    
2006-07-25 01:23 UTC by Jeroen Roovers (RETIRED)





      Modified:
    
2007-03-13 06:37 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



toolchain









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Strace output for media-gfx/gimp-2.2.12

              (gimp.strace,670.11 KB,
                text/plain)

            
2006-07-25 01:53 UTC,

            Jeroen Roovers (RETIRED)




Details





gdb backtrace of sylpheed-claws

              (sylpheed-claws.gdb3,4.43 KB,
                text/plain)

            
2006-08-01 02:47 UTC,

            Jeroen Roovers (RETIRED)




Details





sylpheed-claws.gdb5-WORKSFORME

              (sylpheed-claws.gdb5-WORKSFORME,3.04 KB,
                text/plain)

            
2006-08-12 07:15 UTC,

            Jeroen Roovers (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jeroen Roovers (RETIRED)






          2006-07-25 01:23:30 UTC
        

Afflicted packages:
 mail-client/sylpheed-claws
 mail-client/evolution
 media-gfx/gimp

As first noted in bug #135886, mail-client/sylpheed-claws suffers a bug where, after switching to a thread, control is never properly returned to the parent process.

The common factor between these packages seems to be x11-libs/gtk+ or one of its dependencies, notably dev-libs/glib.




Comment 1


Jeroen Roovers (RETIRED)






          2006-07-25 01:53:11 UTC
        

Created attachment 92696 [details]
Strace output for media-gfx/gimp-2.2.12

# strace -f -o gimp.strace gimp




Comment 2


Jeroen Roovers (RETIRED)






          2006-07-25 02:04:08 UTC
        

At over 1.6 megabytes, the strace output from mail-client/evolution-2.6.2-r1:

http://dev.gentoo.org/~jer/evolution.strace




Comment 3


Jeroen Roovers (RETIRED)






          2006-07-25 16:48:19 UTC
        

jeroen@elmer ~ $ gdb evolution
GNU gdb 6.4
Copyright 2005 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "hppa2.0-unknown-linux-gnu"...Using host libthread_db library "/lib/libthread_db.so.1".

(gdb) run
Starting program: /usr/bin/evolution
[Thread debugging using libthread_db enabled]
[New Thread 16384 (LWP 15048)]

(evolution-2.6:15048): GnomeUI-WARNING **: While connecting to session manager:
Could not open network socket.
/home/jeroen/.kde/share/config/gtkrc-2.0:22: error: unexpected identifier `nan', expected number (float)
CalDAV Eplugin starting up ...
[New Thread 32769 (LWP 15052)]
[New Thread 16386 (LWP 15053)]
[Thread 16386 (LWP 15053) exited]
[New Thread 32770 (LWP 15054)]
[New Thread 49155 (LWP 15055)]
[New Thread 65540 (LWP 15056)]
[Thread 65540 (LWP 15056) exited]
[New Thread 81924 (LWP 15058)]
[New Thread 98309 (LWP 15059)]
[New Thread 114694 (LWP 15060)]
Unknown RESP-CODE encountered: MYRIGHTS

Program received signal SIGINT, Interrupt.
[Switching to Thread 114694 (LWP 15060)]
0x41da7df4 in nanosleep () from /lib/libpthread.so.0
(gdb) backtrace full
#0  0x41da7df4 in nanosleep () from /lib/libpthread.so.0
No symbol table info available.
#1  0x41da7de0 in nanosleep () from /lib/libpthread.so.0
No symbol table info available.
Previous frame identical to this frame (corrupt stack?)




Comment 4


foser (RETIRED)






          2006-07-31 14:51:06 UTC
        

Unable to reproduce on x86, glib/gtk however is notoriously bad at threading. I think this should go upstream but with a more complete backtrace of a lockup if possible and preferrably a reproducable testcase.




Comment 5


Jeroen Roovers (RETIRED)






          2006-08-01 02:47:57 UTC
        

Created attachment 93193 [details]
gdb backtrace of sylpheed-claws




Comment 6


Jeroen Roovers (RETIRED)






          2006-08-12 07:09:52 UTC
        

I have now tested sylpheed-claws-2.0.0 in a chroot with sys-libs/glibc-2.3.4.20040808-r1 and there the problem does NOT occur. This lays the blame squarely on glibc/pthreads. I'll upgrade to sylpheed-claws-2.4.0 and see if that works as well so I can at least resolve bug #135886.




Comment 7


Jeroen Roovers (RETIRED)






          2006-08-12 07:15:19 UTC
        

Created attachment 94049 [details]
sylpheed-claws.gdb5-WORKSFORME

This one didn't experience any problems.




Comment 8


Jeroen Roovers (RETIRED)






          2007-02-23 14:10:04 UTC
        

Block mail-client/claws-mail and mail-client/sylpheed stabilisation bugs: they won't properly work until we have glibc-2.5.

Relieve gnome@gentoo.org of bug duty.




Comment 9


SpanKY






          2007-03-13 06:37:39 UTC
        

these versions of glibc are no longer supported ... if glibc-2.5 shows issues, open a new bug report









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

