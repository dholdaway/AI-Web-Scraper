Title: 910752 – media-libs/gstreamer-1.20.5: unable to play streams with XDG_CURRENT_DESKTOP set to KDE
URL: https://bugs.gentoo.org/show_bug.cgi?id=910752

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 910752
media-libs/gstreamer-1.20.5: unable to play streams with XDG_CURRENT_DESKTOP set to KDE
Last modified: 2023-08-05 16:18:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 910752 
      - media-libs/gstreamer-1.20.5: unable to play streams with XDG_CURRENT_DESKTOP set to KDE


Summary:
media-libs/gstreamer-1.20.5: unable to play streams with XDG_CURRENT_DESKTOP ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

GStreamer package maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-07-23 18:56 UTC by Robert Spillner





      Modified:
    
2023-08-05 16:18 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robert Spillner





          2023-07-23 18:56:19 UTC
        

I don't know if this is the right place to file this or if this is even a (gstreamer) bug.

Strawberry suddenly stopped playing my web-radio channels with some gstreamer-error. This could be reproduced in a terminal (inside a wayland plasma session).

Yet this WORKS outside of KDE (e. g. in framebuffer console). So I narrowed it down to the environment variable XDG_CURRENT_DESKTOP. If the value of this variable is "KDE" the stream will not be played. For any other string (including e. g. lowercase "kde") gst-play-1.0 works as expected.

I. e. : 
 > XDG_CURRENT_DESKTOP="" gst-play-1.0 
actually works as expected.

Reproducible: Always

Steps to Reproduce:
1. LANG="C" gst-play-1.0 https://wdr-wdr5-live.icecastssl.wdr.de/wdr/wdr5/live/mp3/128/stream.mp3
Actual Results:  
Press 'k' to see a list of keyboard shortcuts.
Now playing https://wdr-wdr5-live.icecastssl.wdr.de/wdr/wdr5/live/mp3/128/stream.mp3
Prerolling...
(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_uri_get_scheme: assertion 'uri != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_uri_get_scheme: assertion 'uri != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_str_has_prefix: assertion 'str != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_uri_get_scheme: assertion 'uri != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_str_has_prefix: assertion 'str != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_uri_get_scheme: assertion 'uri != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_str_has_prefix: assertion 'str != NULL' failed

(gst-play-1.0:6922): GLib-CRITICAL **: 18:38:08.905: g_uri_to_string: assertion 'uri != NULL' failed
ERROR Internal data stream error. for https://wdr-wdr5-live.icecastssl.wdr.de/wdr/wdr5/live/mp3/128/stream.mp3
ERROR debug information: ../gstreamer-1.22.3/libs/gst/base/gstbasesrc.c(3132): gst_base_src_loop (): /GstPlayBin:playbin/GstURIDecodeBin:uridecodebin0/GstSoupHTTPSrc:source:
streaming stopped, reason error (-5)
Reached end of play list.

Expected Results:  
Web radio is playing

Portage 3.0.49 (python 3.11.4-final-0, default/linux/amd64/17.1/desktop/plasma, gcc-12, glibc-2.37-r3, 6.1.38-gentoo x86_64)
=================================================================
System uname: Linux-6.1.38-gentoo-x86_64-Intel-R-_Core-TM-_i7-7700K_CPU_@_4.20GHz-with-glibc2.37
KiB Mem:    32837660 total,  18235008 free
KiB Swap:    6293500 total,   6293500 free
Timestamp of repository gentoo: Thu, 20 Jul 2023 06:46:51 +0000
Head commit of repository gentoo: 93098f8b20d37a7fd96890917c0069bf9c899348

Timestamp of repository guru: Wed, 19 Jul 2023 09:01:52 +0000
Head commit of repository guru: fa128d00dd5d111b263f6a2f6adf07f6d797f653

Timestamp of repository robert7k: Wed, 19 Jul 2023 16:16:46 +0000
Head commit of repository robert7k: b416afd3e716c7bf1713f6f1d016dc041672027a

sh bash 5.1_p16-r6
ld GNU ld (Gentoo 2.40 p5) 2.40.0
distcc 3.4 x86_64-pc-linux-gnu [disabled]
app-misc/pax-utils:        1.3.5::gentoo
app-shells/bash:           5.1_p16-r6::gentoo
dev-java/java-config:      2.3.1-r1::gentoo
dev-lang/perl:             5.36.1-r3::gentoo
dev-lang/python:           3.10.12::gentoo, 3.11.4::gentoo
dev-lang/rust-bin:         1.69.0-r1::gentoo
dev-util/cmake:            3.26.4-r1::gentoo
dev-util/meson:            1.1.1::gentoo
sys-apps/baselayout:       2.13-r1::gentoo
sys-apps/openrc:           0.47.1::gentoo
sys-apps/sandbox:          2.37::gentoo
sys-devel/autoconf:        2.71-r6::gentoo
sys-devel/automake:        1.16.5-r1::gentoo
sys-devel/binutils:        2.40-r5::gentoo
sys-devel/binutils-config: 5.5::gentoo
sys-devel/clang:           16.0.6::gentoo
sys-devel/gcc:             12.3.1_p20230526::gentoo
sys-devel/gcc-config:      2.11::gentoo
sys-devel/libtool:         2.4.7-r1::gentoo
sys-devel/lld:             16.0.6::gentoo
sys-devel/llvm:            16.0.6::gentoo
sys-devel/make:            4.4.1-r1::gentoo
sys-kernel/linux-headers:  6.1::gentoo (virtual/os-headers)
sys-libs/glibc:            2.37-r3::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo.git
    priority: -1000
    volatile: True

guru
    location: /var/db/repos/guru
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/guru.git
    masters: gentoo
    volatile: False

robert
    location: /var/db/repos/robert
    masters: gentoo
    volatile: False

robert7k
    location: /var/db/repos/robert7k
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/robert7k.git
    masters: gentoo
    volatile: False

Binary Repositories:

gentoo-binpkg
    priority: 9999
    sync-uri: https://gentoo.osuosl.org/experimental/amd64/binpkg/default/linux/17.1/x86-64

Installed sets: @system
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE @FSF-APPROVED intel-ucode"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-flto=8 -march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0 /var/qmail/alias /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-flto=8 -march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GDK_PIXBUF_MODULE_FILE GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR XDG_STATE_HOME"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs buildpkg-live config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://ftp.halifax.rwth-aachen.de/gentoo"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LEX="flex"
LINGUAS="de de_DE en-GB en"
MAKEOPTS="-j8"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
SHELL="/bin/bash"
USE="X a52 aac acl acpi activities alsa amd64 branding bzip2 cairo cdda cdr cjk cli crypt cups dbus declarative dri dts dvb dvd dvdr dvdread elogind emacs encode exif flac fortran gdbm gif gpm gtk gui iconv icu ipv6 jpeg kde kwallet lcms libnotify libtirpc mad mmx mng mp3 mp4 mpeg multilib ncurses nls nptl ogg opengl openmp pam pango pcre pdf pipewire plasma png policykit ppds pulseaudio qml qt5 readline screencast sdl seccomp semantic-desktop sound spell split-usr sse sse2 sse3 ssl startup-notification svg test-rust tiff truetype udev udisks unicode upower usb vdpau vorbis vulkan wayland widgets wxwidgets x264 xattr xcb xft xml xv xvid zlib" ABI_X86="64 32" ADA_TARGET="gnat_2021" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 fma3 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3 f16c" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="libinput evdev" KERNEL="linux" L10N="de de_DE en-GB en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php8-1" POSTGRES_TARGETS="postgres12 postgres13" PYTHON_SINGLE_TARGET="python3_11" PYTHON_TARGETS="python3_11" QEMU_SOFTMMU_TARGETS="x86_64 arm" QEMU_USER_TARGETS="x86_64 arm" RUBY_TARGETS="ruby31" SANE_BACKENDS="net" VIDEO_CARDS="amdgpu radeonsi" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EMERGE_DEFAULT_OPTS, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LC_ALL, LD, LFLAGS, LIBTOOL, MAKE, MAKEFLAGS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RANLIB, READELF, RUSTFLAGS, SIZE, STRINGS, STRIP, YACC, YFLAGS




Comment 1


Robert Spillner





          2023-08-05 16:18:44 UTC
        

After deleting all my KDE related configuration files and directorys in .local/share and .config after carefully separating these from non-KDE related files, I generated a new KDE-profile for my user.
Now the problem is gone. I don't know what caused it, probably never will, and its relationship to the environment variable XDG_CURRENT_DESKTOP but I mark this as resolved. I guess it's a singular problem somewhere in my configuration files.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

