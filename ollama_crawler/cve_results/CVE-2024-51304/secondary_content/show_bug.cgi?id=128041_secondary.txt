Title: 128041 – media-libs/faad2-2.0-r11 - failed to build - missing header file? (libmp4)
URL: https://bugs.gentoo.org/show_bug.cgi?id=128041

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 128041
media-libs/faad2-2.0-r11 - failed to build - missing header file? (libmp4)
Last modified: 2006-08-17 00:14:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 128041 
      - media-libs/faad2-2.0-r11 - failed to build - missing header file? (libmp4)


Summary:
media-libs/faad2-2.0-r11 - failed to build - missing header file? (libmp4)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

133360 144179

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-03-29 16:03 UTC by Mark Knecht





      Modified:
    
2006-08-17 00:14 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



conferee
decibels.2862
groepaz
matteo-ml
sgreadly









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mark Knecht





          2006-03-29 16:03:52 UTC
        

revdep-rebuild -p produced the following set of things to be emerged. The emerge fails in the faad2 step. I tried emerging faad2 with the -xmms flag and it passes, but I think I need xmms support eventually.

gandalf ~ # emerge --oneshot -pv =media-plugins/gst-plugins-flac-0.8.10 =media-plugins/mythmusic-0.18.1 =media-video/avidemux-2.0.42-r1 =media-video/ffmpeg-0.4.9_p20060302

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] media-plugins/gst-plugins-flac-0.8.10  0 kB
[ebuild   R   ] media-plugins/mythmusic-0.18.1  -aac -debug -fftw +mmx +opengl +sdl 0 kB
[ebuild  N    ] media-libs/faad2-2.0-r11  +xmms 0 kB
[ebuild   R   ] media-video/avidemux-2.0.42-r1  -a52 +aac +alsa (-altivec) -arts +encode +mad +nls +oss +sdl +truetype +vorbis +xv +xvid 3,744 kB
[ebuild   R   ] media-video/ffmpeg-0.4.9_p20060302  -a52 +aac (-altivec) -amr -debug -doc -dts +encode -ieee1394 +imlib +mmx -network +ogg +oss +sdl -test -theora +threads +truetype +v4l +vorbis -x264 +xvid +zlib 0 kB

Total size of downloads: 3,744 kB
gandalf ~ #

<SNIP>
make[3]: Entering directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins/xmms'
Making all in src
make[4]: Entering directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins/xmms/src'
if /bin/sh ../../../libtool --tag=CC --mode=compile i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../../..    `xmms-config --cflags` -Wall `gtk-config --cflags` -DHAVE_GLIB_H=1 -I../../../include -O3 -march=athlon-xp -funroll-loops -fprefetch-loop-arrays -pipe -MT libmp4_la-libmp4.lo -MD -MP -MF ".deps/libmp4_la-libmp4.Tpo" -c -o libmp4_la-libmp4.lo `test -f 'libmp4.c' || echo './'`libmp4.c; \
then mv -f ".deps/libmp4_la-libmp4.Tpo" ".deps/libmp4_la-libmp4.Plo"; else rm -f ".deps/libmp4_la-libmp4.Tpo"; exit 1; fi
mkdir .libs
 i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../../.. -I/usr/include/xmms -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include -Wall -I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include -DHAVE_GLIB_H=1 -I../../../include -O3 -march=athlon-xp -funroll-loops -fprefetch-loop-arrays -pipe -MT libmp4_la-libmp4.lo -MD -MP -MF .deps/libmp4_la-libmp4.Tpo -c libmp4.c  -fPIC -DPIC -o .libs/libmp4_la-libmp4.o
libmp4.c:12:17: mp4.h: No such file or directory
libmp4.c:26: error: syntax error before "file"
libmp4.c:41: error: syntax error before "file"
libmp4.c: In function `mp4_init':
libmp4.c:92: warning: implicit declaration of function `memset'
libmp4.c: In function `mp4_isFile':
libmp4.c:120: warning: implicit declaration of function `strrchr'
libmp4.c:123: warning: implicit declaration of function `strcasecmp'
libmp4.c: In function `mp4Decode':
libmp4.c:183: error: `MP4FileHandle' undeclared (first use in this function)
libmp4.c:183: error: (Each undeclared identifier is reported only once
libmp4.c:183: error: for each function it appears in.)
libmp4.c:183: error: syntax error before "mp4file"
libmp4.c:188: error: `mp4file' undeclared (first use in this function)
libmp4.c:188: warning: implicit declaration of function `MP4Read'
libmp4.c:190: warning: implicit declaration of function `MP4Close'
libmp4.c:214: error: `MP4Duration' undeclared (first use in this function)
libmp4.c:214: error: syntax error before "duration"
libmp4.c:216: error: `MP4SampleId' undeclared (first use in this function)
libmp4.c:216: error: syntax error before "numSamples"
libmp4.c:220: warning: implicit declaration of function `MP4GetTrackESConfiguration'
libmp4.c:229: warning: passing arg 4 of `faacDecInit2' from incompatible pointer type
libmp4.c:247: error: `duration' undeclared (first use in this function)
libmp4.c:247: warning: implicit declaration of function `MP4GetTrackDuration'
libmp4.c:248: warning: implicit declaration of function `MP4ConvertFromTrackDuration'
libmp4.c:249: error: `MP4_MSECS_TIME_SCALE' undeclared (first use in this function)
libmp4.c:250: error: `numSamples' undeclared (first use in this function)
libmp4.c:250: warning: implicit declaration of function `MP4GetTrackNumberOfSamples'
libmp4.c:254: warning: int format, gulong arg (arg 3)
libmp4.c:262: warning: implicit declaration of function `MP4ConvertToTrackDuration'
libmp4.c:266: error: `sampleID' undeclared (first use in this function)
libmp4.c:266: warning: implicit declaration of function `MP4GetSampleIdFromTime'
libmp4.c:281: warning: implicit declaration of function `MP4ReadSample'
libmp4.c:213: warning: unused variable `avgBitrate'
libmp4.c:335: error: `FILE' undeclared (first use in this function)
libmp4.c:335: error: `file' undeclared (first use in this function)
libmp4.c:348: warning: implicit declaration of function `fopen'
libmp4.c:349: warning: char format, void arg (arg 2)
libmp4.c:356: warning: implicit declaration of function `fclose'
libmp4.c:372: warning: implicit declaration of function `fread'
libmp4.c:385: warning: implicit declaration of function `strncmp'
libmp4.c:388: warning: implicit declaration of function `fseek'
libmp4.c:388: error: `SEEK_SET' undeclared (first use in this function)
libmp4.c:407: warning: passing arg 4 of `faacDecInit' from incompatible pointer type
libmp4.c:445: warning: implicit declaration of function `memmove'
libmp4.c:466: warning: passing arg 4 of `faacDecInit' from incompatible pointer type
make[4]: *** [libmp4_la-libmp4.lo] Error 1
make[4]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins/xmms/src'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins/xmms'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2'
make: *** [all] Error 2

!!! ERROR: media-libs/faad2-2.0-r11 failed.
!!! Function src_compile, Line 45, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.

gandalf ~ #

gandalf ~ # emerge --info
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r3, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 AMD Athlon(tm) XP 2500+
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.2.3-r5, 2.3.5, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=athlon-xp -funroll-loops -fprefetch-loop-arrays -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=athlon-xp -funroll-loops -fprefetch-loop-arrays -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X Xi aalib alsa apache2 audiofile avi berkdb bitmap-fonts bzip2 cdparanoia cdr cjk cpudetection crypt cups curl dri dvd dvdr dvdread eds emboss encode exif expat fam ffmpeg flac fluidsynth foomaticdb fortran gd gdbm gif gimp gimpprint glut gnome gpm gstreamer gtk gtk2 gtkhtml guile i8x0 idn imagemagick imlib ipv6 jack jack-caps jack-tmpfs java jpeg kde ladcca ladspa lcms libg++ libwww lirc mad mikmod mjpeg mmx mmxext mng motif mozilla mp3 mpeg mysql mythtv ncurses nls nptl nptlonly nvidia ogg oggvorbis opengl oss pam pcre pdflib perl png ppds python qt quicktime readline real samba scanner sdl slang sndfile spell sse ssl svga tcltk tcpd threads tiff transcode truetype truetype-fonts type1-fonts udev usb v4l v4l2 vorbis win32codecs xine xml xml2 xmms xscreensaver xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTDIR_OVERLAY

gandalf ~ #




Comment 1


Diego Elio Pettenò (RETIRED)






          2006-03-29 16:18:20 UTC
        

Which version of libmp4v2 you have installed?





Comment 2


Ville Mällinen





          2006-03-30 10:14:47 UTC
        

(In reply to comment #1)
> Which version of libmp4v2 you have installed?
> 

I got exactly same problem. I got 1.4.1 version of libmp4v2 installed.




Comment 3


Mark Knecht





          2006-03-30 10:26:53 UTC
        

Apparently the only one available at this time:

mark@gandalf ~ $ eix libmp4v2
* media-libs/libmp4v2
     Available versions:  1.4.1
     Installed:           1.4.1
     Homepage:            http://www.mpeg4ip.net/
     Description:         libmp4v2 extracted from mpeg4ip


Found 1 matches
mark@gandalf ~ $




Comment 4


Decibels





          2006-03-31 07:09:34 UTC
        

I'm having the same problem on amd64 with faad2. Try revdep-rebuild and it
says it is broken for a lot of things, but then finishes saying all done.
So it doesn't emerge it, when try to myself it fails same place as yours
but last part is different:

<snip>
make[2]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2/plugins'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/faad2-2.0-r11/work/faad2'
make: *** [all] Error 2

!!! ERROR: media-libs/faad2-2.0-r11 failed.
Call stack:
  ebuild.sh, line 1573:   Called dyn_compile
  ebuild.sh, line 982:   Called src_compile

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.





Comment 5


Sergey Shkoliarenko





          2006-04-02 05:15:51 UTC
        

I have the same problem that Mark Knecht have.
emerge --info
Portage 2.1_pre7-r2 (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.4-r0, 2.6.14-gentoo-r5 i686)
=================================================================
System uname: 2.6.14-gentoo-r5 i686 AMD Athlon(tm) XP 2000+
Gentoo Base System version 1.12.0_pre16
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=athlon-xp -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -mtune=athlon-xp -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.vip/ ftp://10.0.47.100/pub/soft/linux/gentoo/ http://gd.tuwien.ac.at/opsys/linux/gentoo/ http://gentoo.mirror.icd.hu/ http://pandemonium.tiscali.de/pub/gentoo/ http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://gentoo.inode.at/ http://gentoo.zie.pg.gda.pl http://gentoo.eliteitminds.com http://ftp.snt.utwente.nl/pub/os/linux/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.linux.ee/pub/gentoo/distfiles/ http://ftp.du.se/pub/os/gentoo http://ftp.heanet.ie/pub/gentoo/"
LANG="ru_RU.ISO8859-5"
LINGUAS="ru uk"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://10.0.0.10/portage/"
USE="x86 3dnow X aac acl alsa apache2 apm arts avi berkdb bitmap-fonts cdr cli css ctype cups dba dri dvd dvdr eds emboss encode esd expat fastbuild foomaticdb force-cgi-redirect fortran ftp gd gdbm gif gnome gpm gstreamer gtk gtk2 imlib jpeg kde kdeenablefinal libg++ libwww mad memlimit mikmod mmx motif mp3 mpeg ncurses nls nptl nptlonly ogg opengl oss pam pcre pdflib perl png posix python qt quicktime readline sdl session simplexml soap sockets spell spl sse ssl tcpd tokenizer truetype truetype-fonts type1-fonts udev vorbis win32codecs xml xmms xsl xv zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_ru linguas_uk userland_GNU video_cards_radeon video_cards_fglrx video_cards_ati"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LC_ALL, LDFLAGS, MAKEOPTS





Comment 6


Jaroslaw Kalinowski





          2006-04-04 05:56:46 UTC
        

I have also encountered this problem. In my case 'equery f media-libs/libmp4v2' claimed that there should be a file /usr/include/mp4.h but it was missing, actually. Re-emerging media-libs/libmp4v2 solved the compilation problem with faad.




Comment 7


Sergey Shkoliarenko





          2006-04-09 16:47:14 UTC
        

hm. I've updated some packages and faad2 compilation was successful.
WORKSFORME :)




Comment 8


Diego Elio Pettenò (RETIRED)






          2006-04-18 11:22:46 UTC
        

This is a side problem due to the collision between faad2 and libmp4v2 and the xmms plugin.
If you had this problem, simply re-emerge libmp4v2.





Comment 9


Mark Knecht





          2006-04-18 16:27:00 UTC
        

Eventually I think this is what I tried. I no longer have this problem on my machines. I saw it on 3 machines eventually but they all seem fine now.

Thanks




Comment 10


Jakub Moc (RETIRED)






          2006-05-15 01:54:32 UTC
        

*** Bug 133360 has been marked as a duplicate of this bug. ***




Comment 11


Jakub Moc (RETIRED)






          2006-08-17 00:14:24 UTC
        

*** Bug 144179 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

