Title: 445562 – www-apps/nanoc should depend on dev-lang/ruby[yaml]
URL: https://bugs.gentoo.org/show_bug.cgi?id=445562

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 445562
www-apps/nanoc should depend on dev-lang/ruby[yaml]
Last modified: 2013-10-29 06:54:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 445562 
      - www-apps/nanoc should depend on dev-lang/ruby[yaml]


Summary:
www-apps/nanoc should depend on dev-lang/ruby[yaml]
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Ruby Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-12-02 05:10 UTC by avx





      Modified:
    
2013-10-29 06:54 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


avx





          2012-12-02 05:10:11 UTC
        

Running nanoc with Ruby, which has been merged with USE=-yaml results in nanoc complaining like this

--snip--
nanoc -l cs testing                                                                                                                                                  █
/usr/lib64/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
      create  config.yaml
      create  Rules
      create  content/index.html
      create  content/stylesheet.css
      create  layouts/default.html
Created a blank nanoc site at 'testing'. Enjoy!
--snap--

Therefor the ebuild should require dev-lang/ruby to be build with USE=yaml or at least issue some ewarn. (BTW, nanoc is @3.4.2 while portage is at 3.4.0)

Reproducible: Always

Steps to Reproduce:
1. USE=-yaml (or defined elsewhere) ruby nanoc
2. nanoc
3.
Actual Results:  
Warning as shown above




Comment 1


avx





          2012-12-02 18:57:08 UTC
        

Damn, just found it should of course read 'www-apps/nanoc' in title, sorry.




Comment 2


Hans de Graaff







          2012-12-05 07:09:20 UTC
        

I'm wondering if we should not fix this by making yaml mandatory in dev-lang/ruby, since there will be many packages that depend on yaml being present and it really makes no sense to me to have a complicated virtual just for that.

@ruby: any feedback from your side? I'm not sure why we added the yaml USE flag in the first place?




Comment 3


Hans de Graaff







          2013-10-29 06:46:13 UTC
        

I've just tested this with ruby-1.9.3_p448-r1 and nanoc 3.6.4 and I could not reproduce this issue. Do you still see this?




Comment 4


Hans de Graaff







          2013-10-29 06:54:32 UTC
        

I spoke too soon. I can reproduce this, but it is also clear that this is a harmless warning. In this specific case the 'syck' engine is still being used and YAML support should work as expected, but you get the warning because 'syck' is not explicitly requested.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

