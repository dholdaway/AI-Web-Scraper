Title: 241450 – texlive-2008 and pdflatex
URL: https://bugs.gentoo.org/show_bug.cgi?id=241450

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 241450
texlive-2008 and pdflatex
Last modified: 2008-10-12 10:27:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 241450 
      - texlive-2008 and pdflatex


Summary:
texlive-2008 and pdflatex
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-11 21:46 UTC by Stefano





      Modified:
    
2008-10-12 10:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefano





          2008-10-11 21:46:40 UTC
        

Hi,

I have been trying to find out why updating from texlive-core 2007 to 2008, pdflatex disappeared from my system :)

Reproducible: Always

Steps to Reproduce:




Comment 1


Stefano





          2008-10-11 22:11:07 UTC
        

Gets better. Kile, after testing, complains that even latex and pdftex (which are available, at least from what appears from the command line) do not work properly...




Comment 2


Stefano





          2008-10-11 22:57:10 UTC
        

Just to add some data.

Whenever I run "latex" I now get:
This is pdfTeXk, Version 3.1415926-1.40.9 (Web2C 7.5.7)
 %&-line parsing enabled.
---! //var/lib/texmf/web2c/pdftex/latex.fmt doesn't match pdftex.pool
(Fatal format file error; I'm stymied)

I suppose the following command can give interesting output:
$ texconfig conf
=========================== version information ==========================

==================== binaries found by searching $PATH ===================
PATH=/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin/3.4.6:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/kde/3.5/bin:/usr/qt/3/bin:/opt/vmware/workstation/bin
kpsewhich: /usr/bin/kpsewhich
updmap: /usr/bin/updmap
fmtutil: /usr/bin/fmtutil
texconfig: /usr/bin/texconfig
tex: /usr/bin/tex
pdftex: /usr/bin/pdftex
mktexpk: /usr/bin/mktexpk
dvips: /usr/bin/dvips
dvipdfm: /usr/bin/dvipdfm

=========================== active config files ==========================
//etc/texmf/dvips/config/config.ps
//etc/texmf/web2c/fmtutil.cnf
//etc/texmf/web2c/updmap.cfg
/usr/share/texmf/dvipdfm/config/config
/usr/share/texmf/web2c/mktex.cnf
/usr/share/texmf/web2c/texmf.cnf
/usr/share/texmf/xdvi/XDvi
pdftexconfig.tex: not found

============================= font map files =============================
psfonts.map: //var/lib/texmf/fonts/map/dvips/updmap/psfonts.map
pdftex.map: //var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map
ps2pk.map: //var/lib/texmf/fonts/map/dvips/updmap/ps2pk.map
dvipdfm.map: //var/lib/texmf/fonts/map/dvipdfm/updmap/dvipdfm.map

=========================== kpathsea variables ===========================
TEXMFMAIN=/usr/share/texmf
TEXMFDIST=/usr/share/texmf-dist
TEXMFLOCAL=/usr/local/share/texmf
TEXMFSYSVAR=//var/lib/texmf
TEXMFSYSCONFIG=//etc/texmf
TEXMFVAR=/home/raistlin/.texlive2008/texmf-var
TEXMFCONFIG=/home/raistlin/.texlive2008/texmf-config
TEXMFHOME=/home/raistlin/texmf
VARTEXFONTS=//var/cache/fonts
TEXMF={/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}
SYSTEXMF=//var/lib/texmf:/usr/share/texmf:/usr/local/share/texmf:/usr/share/texmf-site:/usr/share/texmf-dist
TEXMFDBS={!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist,!!/usr/share/texmf-doc}
WEB2C={/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/web2c
TEXPSHEADERS=.:{/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/{dvips,fonts/{enc,type1,type42,type3}}//
TEXCONFIG={/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/dvips//
ENCFONTS=.:{/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/fonts/enc//
TEXFONTMAPS=.:{/home/raistlin/.texlive2008/texmf-config,/home/raistlin/.texlive2008/texmf-var,/home/raistlin/texmf,!!//etc/texmf,!!//var/lib/texmf,!!/usr/share/texmf,!!/usr/local/share/texmf,!!/usr/share/texmf-site,!!/usr/share/texmf-dist}/fonts/map/{kpsewhich,pdftex,dvips,}//

==== kpathsea variables from environment only (ok if no output here) ====


And as usual:
$ emerge --info
Portage 2.1.4.5 (default/linux/x86/2008.0/desktop, gcc-3.4.6, glibc-2.6.1-r0, 2.6.25-gentoo-r7 i686)
=================================================================
System uname: 2.6.25-gentoo-r7 i686 Genuine Intel(R) CPU T2500 @ 2.00GHz
Timestamp of tree: Sat, 11 Oct 2008 14:15:04 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=pentium-m -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.switch.ch/ftp/mirror/gentoo/ http://gentoo.mirror.solnet.ch http://gentoo.intergenia.de ftp://ftp.solnet.ch/mirror/Gentoo"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X acl acpi alsa aqua_theme arts async avantgo bash-completion berkdb bindist bluetooth branding bzip2 cairo cardbus cdparanoia cdr cli cpudetection cracklib crypt css cups curlwrappers dell dga dhcp directfb djbfft dri dvb dvd dvdr dvdread emboss encode evo fat fbcon fbsplash fftw firefox foomaticdb fortran fpx ftp gdbm gif gnutls gphoto2 gpm gs gtk gzip hal hpn iconv icq idea imagemagick imap ipod ipv6 irda isdnlog jabber java javascript jikes john jpeg jpeg2k kde kdepim lapack libnotify mbox messages midi mikmod mime mmap mmx mmxext mozilla mp3 mpeg mplayer msn mudflap mysqli nagios-dns ncurses nls nocd nptl nptlonly ntfs ntlm nvidia octave ogg opengl oscar pam pcapnav pcmcia pcntl pcre pda pdf perl pmu png posix ppds pppd python qt3 qt3support qt4 quicktime radius rdesktop readline real reflection replytolist samba sasl scanner sdl session sharedmem silc slp sms sockets sox spell spl sse sse2 ssl startup-notification svga sysfs sysvipc tcpd tetex threads tiff truetype type1 unicode usb userlocales v4l v4l2 vcd vorbis wifi win32codecs winbind x86 xcomposite xine xml xmlrpc xorg xvid yahoo zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 3


Stefano





          2008-10-11 22:58:36 UTC
        

Following a seemingly similar comment in a forum, I tried to run:
fmtutil-sys --all

And the final lines of the command log are as follows:

###############################################################################
fmtutil: Error! Not all formats have been built successfully.
Visit the log files in directory
  //var/lib/texmf/web2c
for details.
###############################################################################

This is a summary of all `failed' messages and warnings:
`pdftex -ini  -jobname=latex -progname=latex -translate-file=cp227.tcx *latex.ini' failed
`pdftex -ini  -jobname=xmltex -progname=xmltex &latex xmltex.ini' failed
`pdftex -ini  -jobname=pdfxmltex -progname=pdfxmltex &pdflatex pdfxmltex.ini' failed





Comment 4


Stefano





          2008-10-12 09:42:34 UTC
        

It possibly has to do with the fact that 
- dev-tex/luatex-0.30.0 (masked by: EAPI 2)
- dev-tex/luatex-0.29.0 (masked by: ~x86 keyword)

So I had to manually unmask luatex-0.29.0 to get through the update.




Comment 5


Simon Zilliken





          2008-10-12 10:05:22 UTC
        

(In reply to comment #0)
> I have been trying to find out why updating from texlive-core 2007 to 2008,
> pdflatex disappeared from my system :)

pdflatex belongs to texlive-latex, which is not pulled in by texlive-core. I'd recommend installing the app-text/texlive metapackage, that pulls in the latex-packages as well. Just keep the useflags minimal if you need to save space.

No idea why you still have the latex symlink, though, as that also is not part of texlive-core.





Comment 6


Stefano





          2008-10-12 10:09:53 UTC
        

(In reply to comment #5)

> pdflatex belongs to texlive-latex, which is not pulled in by texlive-core. I'd
> recommend installing the app-text/texlive metapackage, that pulls in the
> latex-packages as well. Just keep the useflags minimal if you need to save
> space.

Already did:

$ sudo emerge -pv texlive

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] app-text/texlive-2007-r3  USE="X extra graphics png pstricks publishers science xml -cjk -context -cyrillic -doc -games -humanities -jadetex -music -omega -tex4ht -xetex" LINGUAS="-af -ar -bg -bn -bo -cs -cy -da -de -el -en -en_GB -eo -es -et -fi -fr -he -hi -hr -hsb -hu -hy -id -is -it -ja -ko -la -ml -mn -nl -no -pl -pt -ro -ru -sk -sl -sr -sv -ta -th -tr -uk -vi -zh" 0 kB

Total: 1 package (1 reinstall), Size of downloads: 0 kB





Comment 7


Stefano





          2008-10-12 10:16:58 UTC
        

Ah, here's the culprit:
$ sudo emerge -pv texlive-latex

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] dev-texlive/texlive-latex-2007  USE="-doc" 0 kB

Total: 1 package (1 reinstall), Size of downloads: 0 kB

~x86 and x86 masking for texlive packages should be coordinated a little better, probably...






Comment 8


Stefano





          2008-10-12 10:27:19 UTC
        

OK, I figured out why portage pulled in two ~x86 packages among the x86 install I ordinarily use. My bad :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

