Title: 249592 – [ICE/3.4] C++ inheritance disambiguation causes gcc segfault
URL: https://bugs.gentoo.org/show_bug.cgi?id=249592

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 249592
[ICE/3.4] C++ inheritance disambiguation causes gcc segfault
Last modified: 2008-12-07 20:30:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 249592 
      - [ICE/3.4] C++ inheritance disambiguation causes gcc segfault


Summary:
[ICE/3.4] C++ inheritance disambiguation causes gcc segfault
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-02 09:41 UTC by Brian J.





      Modified:
    
2008-12-07 20:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Precompiled source that causes this bug.

              (bug249592.cc,95.49 KB,
                text/plain)

            
2008-12-02 09:43 UTC,

            Brian J.




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Brian J.





          2008-12-02 09:41:44 UTC
        

I have a somewhat complicated inheritance tree, and this is causing a segfault when compiling it with gcc.  See attachment for my precompiled source.

Reproducible: Always

Steps to Reproduce:
gcc -c -I ../shared/include -I ../shared/util -I ../drums -I ../shared/util/_val -I ../shared/util/_val/.. -D_CPP=1 -o objs/util_script.o ../shared/util/util_script.cc -v

(I know the filenames mean nothing to you, but thought it best to leave my command line unaltered.)
Actual Results:  
Output from gcc:

Reading specs from /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/specs
Configured with: /var/tmp/portage/sys-devel/gcc-3.4.6-r2/work/gcc-3.4.6/configure --prefix=/usr --bindir=/usr/i686-pc-linux-gnu/gcc-bin/3.4.6 --includedir=/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include --datadir=/usr/share/gcc-data/i686-pc-linux-gnu/3.4.6 --mandir=/usr/share/gcc-data/i686-pc-linux-gnu/3.4.6/man --infodir=/usr/share/gcc-data/i686-pc-linux-gnu/3.4.6/info --with-gxx-include-dir=/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3 --host=i686-pc-linux-gnu --build=i686-pc-linux-gnu --disable-altivec --enable-nls --without-included-gettext --with-system-zlib --disable-checking --disable-werror --enable-secureplt --disable-libunwind-exceptions --disable-multilib --disable-libgcj --enable-languages=c,c++,f77 --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu
Thread model: posix
gcc version 3.4.6 (Gentoo 3.4.6-r2, ssp-3.4.6-1.0, pie-8.7.10)
 /usr/libexec/gcc/i686-pc-linux-gnu/3.4.6/cc1plus -quiet -v -I ../shared/include -I ../shared/util -I ../drums -I ../shared/util/_val -I ../shared/util/_val/.. -D_GNU_SOURCE -D_CPP=1 ../shared/util/util_script.cc -quiet -dumpbase util_script.cc -mtune=pentiumpro -auxbase-strip objs/util_script.o -version -o /tmp/ccKKJP9r.s
ignoring nonexistent directory "/usr/local/include"
ignoring nonexistent directory "/usr/lib/gcc/i686-pc-linux-gnu/3.4.6/../../../../i686-pc-linux-gnu/include"
ignoring duplicate directory "../shared/util/_val/.."
#include "..." search starts here:
#include <...> search starts here:
 ../shared/include
 ../shared/util
 ../drums
 ../shared/util/_val
 /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3
 /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/i686-pc-linux-gnu
 /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include/g++-v3/backward
 /usr/lib/gcc/i686-pc-linux-gnu/3.4.6/include
 /usr/include
End of search list.
GNU C++ version 3.4.6 (Gentoo 3.4.6-r2, ssp-3.4.6-1.0, pie-8.7.10) (i686-pc-linux-gnu)
        compiled by GNU C version 3.4.6 (Gentoo 3.4.6-r2, ssp-3.4.6-1.0, pie-8.7.10).
GGC heuristics: --param ggc-min-expand=64 --param ggc-min-heapsize=64240
../shared/util/util_script.cc: In member function `virtual bool ScriptRoutine::writeToFile(FILE*, unsigned int, HierConfig*) const':
../shared/util/util_script.cc:155: internal compiler error: Segmentation fault
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugs.gentoo.org/> for instructions.
Preprocessed source stored into /tmp/ccoTxGHA.out file, please attach this to your bugreport.

Expected Results:  
No segfault from gcc.




Comment 1


Brian J.





          2008-12-02 09:43:32 UTC
        

Created attachment 174055 [details]
Precompiled source that causes this bug.




Comment 2


SpanKY






          2008-12-07 20:30:48 UTC
        

this works with gcc-4.1.2 and newer ... it's merely a segfault in the warning output, so it isnt like it cant compile valid code









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

