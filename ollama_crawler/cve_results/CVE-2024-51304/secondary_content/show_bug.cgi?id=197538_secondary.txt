Title: 197538 – app-forensics/aide-0.13.1 compile failure
URL: https://bugs.gentoo.org/show_bug.cgi?id=197538

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 197538
app-forensics/aide-0.13.1 compile failure
Last modified: 2007-11-01 16:23:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 197538 
      - app-forensics/aide-0.13.1 compile failure


Summary:
app-forensics/aide-0.13.1 compile failure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

MATSUU Takuto (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-10-30 16:44 UTC by Thomas Beutin





      Modified:
    
2007-11-01 16:23 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



forensics+obsolete









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ebuild

              (aide-0.13.1-r1.ebuild,3.93 KB,
                text/plain)

            
2007-11-01 09:35 UTC,

            Thomas Beutin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Beutin





          2007-10-30 16:44:15 UTC
        

i686-pc-linux-gnu-gcc -O3 -march=pentium4 -funroll-loops -pipe -fforce-addr -fomit-frame-pointer -frerun-cse-after-loop -frerun-loop-opt -falign-functions=4    -O3 -march=pentium4 -funroll-loops -pipe -fforce-addr -fomit-frame-pointer -frerun-cse-after-loop -frerun-loop-opt -falign-functions=4   -lcurl   -lcurl  -o aide conf_yacc.o conf_lex2.o getopt.o getopt1.o gnu_regex.o error.o md.o db.o commandconf.o db_file.o db_disk.o db_lex2.o db_sql.o gen_list.o list.o do_md.o base64.o symboltable.o compare_db.o be.o util.o snprintf.o fopen.o aide.o -lm  -lmhash     -lpq -lcrypt -lz 
db_sql.o: In function `db_get_sql':
db_sql.c:(.text+0xcb4): undefined reference to `gcry_md_get_algo_dlen'
db_sql.c:(.text+0xce6): undefined reference to `gcry_md_get_algo_dlen'
db_sql.c:(.text+0xd19): undefined reference to `gcry_md_get_algo_dlen'
db_sql.c:(.text+0xd4c): undefined reference to `gcry_md_get_algo_dlen'
collect2: ld returned 1 exit status
make[2]: *** [aide] Error 1
make[2]: Leaving directory `/var/tmp/portage/app-forensics/aide-0.13.1/work/aide-0.13.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/app-forensics/aide-0.13.1/work/aide-0.13.1'
make: *** [all] Error 2
 * 
 * ERROR: app-forensics/aide-0.13.1 failed.
 * Call stack:
 *            ebuild.sh, line 1695:  Called dyn_compile
 *            ebuild.sh, line 1033:  Called qa_call 'src_compile'
 *            ebuild.sh, line   44:  Called src_compile
 *   aide-0.13.1.ebuild, line   83:  Called die
 * The specific snippet of code:
 *      emake -j1 || die
 *  The die message:
 *   (no error message)
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/app-forensics/aide-0.13.1/temp/build.log'.
 * 


Reproducible: Always




# emerge --info
Portage 2.1.3.16 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.22-suspend2-r2 i686)
=================================================================
System uname: 2.6.22-suspend2-r2 i686 Intel(R) Pentium(R) 4 CPU 2.60GHz
Timestamp of tree: Tue, 30 Oct 2007 06:30:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p17
dev-java/java-config: 1.3.7, 2.1.2-r1
dev-lang/python:     2.3.6-r3, 2.4.4-r6, 2.5.1-r3
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.9-r2
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.22-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i386"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/fax /usr/share/X11/xkb /usr/share/config /var/spool/fax/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=i386"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_IE@euro"
LC_ALL="en_IE@euro"
LINGUAS="de en fr es pt it"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://portage/gentoo-portage"
USE="X a52 aac aalib acpi alsa apache2 arts audiofile avi bash-completion bcmath beagle berkdb bitmap-fonts bluetooth bootsplash bzip2 cairo caps cdda cddb cdparanoia cdr cdrom cgi clamav cli cpudetection cracklib crypt cups curl curlwrappers dba dbus dga divx4linux dri dv dvb dvd dvdr dvdread eds emboss encode esd evo exif expat fam fastcgi ffmpeg fftw firefox flac flatfile font-server foomaticdb fortran ftp gd gdbm gif gimp gmp gnome gphoto2 gstreamer gstreams gtk gtk2 hal iconv ieee1394 imagemagick imap imlib inifile ipv6 isdnlog jack java jbig jikes jpeg jpeg2k kde lcms ldap libwww logrotate logwatch mad matroska mhash midi mikmod mjpeg mmap mmx mng mono motif mp3 mpeg mplayer mudflap musepack musicbrainz mysql mysqli ncurses netpbm nls nptl nptlonly nsplugin oav ogg oggvorbis opengl openmp oss pam pcntl pcre pda pdf perl pic plotutils png portaudio posix postgres ppds pppd python qt qt3support qt4 quicktime readline real reflection ruby samba sasl scanner sdl session sharedext shorten simplexml slp smpgsql sndfile snmp soap sockets sox speex spell spl sqlite sse sse2 ssl subtitles svg svga syslog sysvipc tcltk tcpd tetex theora threads tiff tokenizer truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vcd vhosts virus-scan vorbis wddx win32codecs wmf wxwindows x86 xface xine xinerama xml xml2xmms xmlrpc xorg xpm xprint xsl xslt xv xvid yaz zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en fr es pt it" USERLAND="GNU" VIDEO_CARDS="vga vesa fbdev nv nvidia v4l"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


MATSUU Takuto (RETIRED)






          2007-11-01 00:42:31 UTC
        

ok, its not possible to set mhash and postgres USE flags at the same time.
please remove either mhash or postgres USE flag and remerge.

I'll add messages to ebuild.




Comment 2


Thomas Beutin





          2007-11-01 09:22:50 UTC
        

Ok, now it compiles fine. Thank You!

But it would be nice to have something similar to the check for multiple databases requested in the bacula-2.2.5-r1.ebuild (pkg_setup(), starting from line 71) to avoid this compile problem.




Comment 3


Thomas Beutin





          2007-11-01 09:35:09 UTC
        

Created attachment 134870 [details]
ebuild

proposed ebuild to check for USE flag incompatibility




Comment 4


MATSUU Takuto (RETIRED)






          2007-11-01 16:23:55 UTC
        

added pkg_config. thanks.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

