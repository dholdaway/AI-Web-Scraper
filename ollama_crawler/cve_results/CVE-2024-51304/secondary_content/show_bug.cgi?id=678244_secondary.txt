Title: 678244 – dev-python/fonttools-3.24.2: fails 74 tests on ppc64
URL: https://bugs.gentoo.org/show_bug.cgi?id=678244

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 678244
dev-python/fonttools-3.24.2: fails 74 tests on ppc64
Last modified: 2019-12-11 19:23:34 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 678244 
      - dev-python/fonttools-3.24.2: fails 74 tests on ppc64


Summary:
dev-python/fonttools-3.24.2: fails 74 tests on ppc64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

PPC64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Fonts Team








URL:



https://github.com/fonttools/fonttool...
        




Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2019-02-17 19:10 UTC by ernsteiswuerfel





      Modified:
    
2019-12-11 19:23 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



eike
paolo.pedroni
python









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (fonttools-3.24.2:20190217-190133.log,347.36 KB,
                text/plain)

            
2019-02-17 19:10 UTC,

            ernsteiswuerfel




Details





emerge --info

              (file_678244.txt,6.08 KB,
                text/plain)

            
2019-02-17 19:11 UTC,

            ernsteiswuerfel




Details





fonttools-3.24.2\:20190218-155831.log.gz

              (fonttools-3.24.2:20190218-155831.log.gz,39.48 KB,
                application/gzip)

            
2019-02-18 16:03 UTC,

            Paolo Pedroni




Details





build.log (3.44.0, ppc64)

              (fonttools-3.44.0:20190914-225656.log,90.50 KB,
                text/plain)

            
2019-09-14 23:06 UTC,

            ernsteiswuerfel




Details





build.log (4.0.1, ppc64)

              (fonttools-4.0.1:20190914-225754.log,388.22 KB,
                text/plain)

            
2019-09-14 23:06 UTC,

            ernsteiswuerfel




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


ernsteiswuerfel






          2019-02-17 19:10:53 UTC
        

Created attachment 565666 [details]
build.log

[...]
=================== 74 failed, 2276 passed, 119 skipped, 1 xfailed in 31.99 seconds ====================
 * ERROR: dev-python/fonttools-3.24.2::gentoo failed (test phase):




Comment 1


ernsteiswuerfel






          2019-02-17 19:11:35 UTC
        

Created attachment 565668 [details]
emerge --info




Comment 2


Paolo Pedroni





          2019-02-18 16:03:31 UTC
        

Created attachment 565720 [details]
fonttools-3.24.2\:20190218-155831.log.gz

Same errors on amd64, more or less (72 failures)




Comment 3


Rolf Eike Beer






          2019-02-18 20:12:45 UTC
        

sparc has only 2 failures, but this is a subset of the ppc64 set:

=============================================================================================================================== FAILURES ===============================================================================================================================
________________________________________________________________________________________________________ test_xml_from_binary[graphite/graphite_tests.ttf-Silf] ________________________________________________________________________________________________________

testfile = 'graphite/graphite_tests.ttf', tableTag = 'Silf'

    def test_xml_from_binary(testfile, tableTag):
        """Check XML from decompiled object."""
        _skip_if_requirement_missing(testfile)
    
        xml_expected = read_expected_ttx(testfile, tableTag)
    
        with open_font(testfile) as font:
            xml_from_binary = dump_ttx(font, tableTag)
    
>       assert xml_expected == xml_from_binary
E       assert '<?xml versio...>\n\n</ttFont>\n' == '<?xml version...>\n\n</ttFont>\n'
E         Skipping 1899 identical leading characters in diff, use -v to show
E         - ow _i="0">1 1 2</row>
E         ?            ---
E         + ow _i="0">256 256 512</row>
E         ?           +++++++++
E         -             <row _i="1">0 3 0</row>
E         ?                           ^...
E         
E         ...Full output truncated (63 lines hidden), use '-vv' to show

Tests/ttLib/tables/tables_test.py:297: AssertionError
________________________________________________________________________________________________________ test_xml_from_binary[graphite/graphite_tests.ttf-Glat] ________________________________________________________________________________________________________

testfile = 'graphite/graphite_tests.ttf', tableTag = 'Glat'

    def test_xml_from_binary(testfile, tableTag):
        """Check XML from decompiled object."""
        _skip_if_requirement_missing(testfile)
    
        xml_expected = read_expected_ttx(testfile, tableTag)
    
        with open_font(testfile) as font:
            xml_from_binary = dump_ttx(font, tableTag)
    
>       assert xml_expected == xml_from_binary
E       assert '<?xml versio...>\n\n</ttFont>\n' == '<?xml version...>\n\n</ttFont>\n'
E         Skipping 161 identical leading characters in diff, use -v to show
E           def">
E         -       <attribute index="1" value="3"/>
E         -       <attribute index="2" value="30"/>
E               </glyph>
E               <glyph name="space">
E         -       <attribute index="1" value="3"/>...
E         
E         ...Full output truncated (19 lines hidden), use '-vv' to show

Tests/ttLib/tables/tables_test.py:297: AssertionError
======================================================================================================================= short test summary info ========================================================================================================================
FAIL Tests/ttLib/tables/tables_test.py::test_xml_from_binary[graphite/graphite_tests.ttf-Silf]
FAIL Tests/ttLib/tables/tables_test.py::test_xml_from_binary[graphite/graphite_tests.ttf-Glat]




Comment 4


Matt Turner






          2019-09-14 19:04:39 UTC
        

Please give 3.44.0 and 4.0.1 a try. (see bug 678244 for keywording req).




Comment 5


Matt Turner






          2019-09-14 20:17:16 UTC
        

(In reply to Matt Turner from comment #4)
> Please give 3.44.0 and 4.0.1 a try. (see bug 678244 for keywording req).

Oops, meant bug 694372.




Comment 6


ernsteiswuerfel






          2019-09-14 23:03:22 UTC
        

(In reply to Matt Turner from comment #4)
> Please give 3.44.0 and 4.0.1 a try. (see bug 678244 for keywording req).
Looks much better at least.

fonttools-3.44.0:
[...]
FAILED Tests/misc/plistlib_test.py
FAILED Tests/ufoLib/GLIF1_test.py
FAILED Tests/ufoLib/GLIF2_test.py
FAILED Tests/ufoLib/UFO1_test.py
FAILED Tests/ufoLib/UFO2_test.py
FAILED Tests/ufoLib/UFO3_test.py
FAILED Tests/ufoLib/UFOConversion_test.py
FAILED Tests/ufoLib/UFOZ_test.py
FAILED Tests/ufoLib/filenames_test.py
FAILED Tests/ufoLib/glifLib_test.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 10 errors during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
================================ 25 skipped, 10 error in 14.85 seconds =================================

fonttools-4.0.1:
[...]
FAILED Tests/t1Lib/t1Lib_test.py::ReadWriteTest::test_read_with_path - TypeError: argument must be st...
============== 1 failed, 3277 passed, 10 skipped, 2 xfailed, 1 warnings in 63.35 seconds ===============




Comment 7


ernsteiswuerfel






          2019-09-14 23:06:17 UTC
        

Created attachment 589852 [details]
build.log (3.44.0, ppc64)




Comment 8


ernsteiswuerfel






          2019-09-14 23:06:47 UTC
        

Created attachment 589854 [details]
build.log (4.0.1, ppc64)




Comment 9


Matt Turner






          2019-12-11 19:23:34 UTC
        

Tests pass for me on both 3.44.0 and 4.0.1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

