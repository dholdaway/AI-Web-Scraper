Title: 188623 – Append WARN: postinst messages to emerge output
URL: https://bugs.gentoo.org/show_bug.cgi?id=188623

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 188623
Append WARN: postinst messages to emerge output
Last modified: 2007-08-15 19:33:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 188623 
      - Append WARN: postinst messages to emerge output


Summary:
Append WARN: postinst messages to emerge output
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Enhancement/Feature Requests

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       enhancement
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

189016

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-08-12 18:45 UTC by Sam





      Modified:
    
2007-08-15 19:33 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dhp_gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Sam





          2007-08-12 18:45:25 UTC
        

If a user emerges packages, the ebuild maintainers regularly like to inform users. This was always done with ewarn and einfo, but doing mass-merges (well.. multiple merges in one go) created problems. Which were fixed with elog.
The thing is, that sometimes the user has to perform actions pretty much straight away. (Such as revdep-rebuilds, see comments on bug #41124) At the moment the user isn't properly informed of this. Even if elog is used, the user won't know about it until the log is viewed.
I suggest that these messages should be displayed to the user in a more direct way. A possibility might be to do so in a similar manner as etc-updates are displayed at the end of the emerge output.

I believe that the warn: postinst messages are most important, but am really not in a position to actually tell.




Comment 1


Jakub Moc (RETIRED)






          2007-08-12 19:10:56 UTC
        

Already done, PORTAGE_ELOG_SYSTEM="echo" - upgrade your portage to 2.1.3.4 if you want this. 




Comment 2


Jakub Moc (RETIRED)






          2007-08-15 16:14:49 UTC
        

*** Bug 189016 has been marked as a duplicate of this bug. ***




Comment 3


DEMAINE Benoît-Pierre, aka DoubleHP





          2007-08-15 19:28:05 UTC
        

(In reply to comment #1)
> Already done, PORTAGE_ELOG_SYSTEM="echo" - upgrade your portage to 2.1.3.4 if
> you want this. 

I am not to re-install a Gentoo just to check this, but, please make sure the default behaviour of the default profile during a fresh install sets this. That is the most improtant point for me.

any way, I set up what you suggested:
PORTAGE_ELOG_SYSTEM="save echo"

and got nothing on screen:

>>> Regenerating /etc/ld.so.cache...
>>> Original instance of package unmerged safely.
>>> Regenerating /etc/ld.so.cache...
>>> doublehp/rpl2-4.0.0_pre1 merged.

>>> No packages selected for removal by clean
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.
 * GNU info directory index is up-to-date.
root@moon_gen_2:/opt/doublehp/usr/portage/doublehp/rpl2#

While several Warnings have been reported by enotice .




Comment 4


Sam





          2007-08-15 19:33:58 UTC
        

Have you read the make.conf.example? It explains quite thoroughly what's to be done to make elog work properly. portage-2.1.3.4 made elog behave exactly as intended as explained in this bug, and approximately as in your bug.

You can test by doing the following:
- look in {PORTDIR} for an ebuild which posts some elog message (warn, info, qa -- depending on your config)
- (re)install the package
- check to see if output is appended at the bottom of emerge.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

