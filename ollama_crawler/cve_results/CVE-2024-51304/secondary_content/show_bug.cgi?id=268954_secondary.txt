Title: 268954 – x11-base/xorg-server-1.5.3-r5 fails to start with no media-fonts/font-misc-misc installed
URL: https://bugs.gentoo.org/show_bug.cgi?id=268954

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 268954
x11-base/xorg-server-1.5.3-r5 fails to start with no media-fonts/font-misc-misc installed
Last modified: 2009-08-17 21:14:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 268954 
      - x11-base/xorg-server-1.5.3-r5 fails to start with no media-fonts/font-misc-misc installed


Summary:
x11-base/xorg-server-1.5.3-r5 fails to start with no media-fonts/font-misc-mi...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo X packagers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-07 17:34 UTC by Kilian





      Modified:
    
2009-08-17 21:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Xorg.0.log without media-fonts/font-misc-misc installed

              (Xorg.0.log,15.22 KB,
                text/plain)

            
2009-05-12 17:22 UTC,

            Kilian




Details





Output of "emerge libXfont -pv" without media-fonts/font-misc-misc installed

              (emerge_libXfont_-pv.log,234 bytes,
                text/plain)

            
2009-05-12 17:23 UTC,

            Kilian




Details





Output of "ldd /usr/bin/Xorg"

              (ldd.txt,1.10 KB,
                text/plain)

            
2009-05-12 21:16 UTC,

            Kilian




Details





Output of "readelf -a /usr/lib/libXfont.so.1"

              (readelf.txt,234.15 KB,
                text/plain)

            
2009-05-12 21:17 UTC,

            Kilian




Details





x11-base/xorg-server-1.5.3-r5 build.log

              (build.log,1.81 MB,
                text/plain)

            
2009-05-12 23:09 UTC,

            Kilian




Details





x11-libs/libXfont-1.3.4 build.log

              (build.log,205.01 KB,
                text/plain)

            
2009-05-12 23:10 UTC,

            Kilian




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kilian





          2009-05-07 17:34:57 UTC
        

On my amd64 machine, x11-base/xorg-server-1.5.3-r5 fails to start with no media-fonts/font-misc-misc installed.
After installing media-fonts/font-misc-misc there are no problems.
I think that this is no duplicate to bug 224953 since x11-base/xorg-server-1.5.3-r5 has no dependencie to media-fonts/font-misc-misc at all (as far as I can see)

The last two lines in my /var/log/Xorg.0.log are:

Fatal server error:
could not open default font 'fixed'

So, adding media-fonts/font-misc-misc to the deps in x11-base/xorg-server-1.5.3-r5 should fix this one.

Reproducible: Always

Steps to Reproduce:
1. Install x11-base/xorg-server-1.5.3-r5 without media-fonts/font-misc-misc beeing installed
2. Start the x-server via the xdm init script
3. Drink some Tea.

Actual Results:  
xorg-server doesn't start

Expected Results:  
xorg-server should start




Comment 1


Rémi Cardona (RETIRED)






          2009-05-12 09:04:17 UTC
        

Please attach your Xorg.0.log and the output of "emerge libXfont -pv".

Thanks




Comment 2


Kilian





          2009-05-12 17:22:03 UTC
        

Created attachment 191050 [details]
Xorg.0.log without media-fonts/font-misc-misc installed




Comment 3


Kilian





          2009-05-12 17:23:03 UTC
        

Created attachment 191051 [details]
Output of "emerge libXfont -pv" without media-fonts/font-misc-misc installed




Comment 4


Rémi Cardona (RETIRED)






          2009-05-12 20:33:37 UTC
        

An ugly version of the "fixed" font should be built into libXfont and thus used by the server (that's the "built-ins" line in your log's FontPath entry).

Somehow, the server is not picking it up...

Let's see, could you attach the output of "ldd /usr/bin/Xorg" and the output of "readelf -a /usr/lib/libXfont.so.1" ?

Thanks




Comment 5


Kilian





          2009-05-12 21:16:53 UTC
        

Created attachment 191069 [details]
Output of "ldd /usr/bin/Xorg"




Comment 6


Kilian





          2009-05-12 21:17:51 UTC
        

Created attachment 191071 [details]
Output of "readelf -a /usr/lib/libXfont.so.1"

Here you go :-)




Comment 7


Rémi Cardona (RETIRED)






          2009-05-12 22:16:58 UTC
        

Hum, just out of curiosity since I'm running out of options, could you try the following : 

FEATURES="keeptemp" emerge -1 --nodeps libXfont xorg-server

And attach both build.log files here?

Thanks




Comment 8


Kilian





          2009-05-12 23:09:02 UTC
        

Created attachment 191077 [details]
x11-base/xorg-server-1.5.3-r5 build.log




Comment 9


Kilian





          2009-05-12 23:10:23 UTC
        

Created attachment 191079 [details]
x11-libs/libXfont-1.3.4 build.log

Voila.




Comment 10


Rémi Cardona (RETIRED)






          2009-05-13 11:08:27 UTC
        

Btw, did the rebuild help in any way?

Thanks




Comment 11


Kilian





          2009-05-13 15:11:23 UTC
        

No, it didn't
By the way, thx for taking care of this :-)




Comment 12


Rémi Cardona (RETIRED)






          2009-08-17 21:14:26 UTC
        

I've checked on many stable and unstable boxes and this particular Xorg/libXfont feature works perfectly fine on all of them.

I can't understand why this is happening. The only thing that comes to mind is a broken toolchain (gcc, binutils, ...)

Sorry, I'm out of ideas here.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

