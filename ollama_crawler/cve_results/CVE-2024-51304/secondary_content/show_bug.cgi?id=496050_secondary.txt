Title: 496050 – net-dns/bind-9.9.4_p1 with sys-devel/gcc-4.9-20131222 CFLAGS=-O2 -ggdb - /usr/sbin/named: Abort in assertion_failed (file=0xc <Address 0xc out of bounds>, line=-143514064, type=4766072, cond=0x7f17f7722638 "") at ./main.c:218
URL: https://bugs.gentoo.org/show_bug.cgi?id=496050

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 496050
net-dns/bind-9.9.4_p1 with sys-devel/gcc-4.9-20131222 CFLAGS=-O2 -ggdb - /usr/sbin/named: Abort in assertion_failed (file=0xc <Address 0xc out of bounds>, line=-143514064, type=4766072, cond=0x7f17f7722638 "") at ./main.c:218
Last modified: 2014-11-08 18:49:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 496050 
      - net-dns/bind-9.9.4_p1 with sys-devel/gcc-4.9-20131222 CFLAGS=-O2 -ggdb - /usr/sbin/named: Abort in assertion_failed (file=0xc <Address 0xc out of bounds>, line=-143514064, type=4766072, cond=0x7f17f7722638 "") at ./main.c:218


Summary:
net-dns/bind-9.9.4_p1 with sys-devel/gcc-4.9-20131222 CFLAGS=-O2 -ggdb - /usr...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Christian Ruppert (idl0r)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




gcc-4.9



 

        Show dependency tree





 





      Reported:
    
2013-12-26 06:30 UTC by David Kredba





      Modified:
    
2014-11-08 18:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tdalman









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




bt full -O2 -ggdb

              (bind1.txt,14.02 KB,
                text/plain)

            
2013-12-26 06:49 UTC,

            David Kredba




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David Kredba





          2013-12-26 06:30:09 UTC
        

When -O2 is removed form CFLAGS it is stable with -ggdb -flto.
When -flto is removed it is stable with -O2 -ggdb.
Could you please tell me if is this miscompilation? Or bind problem? I will open a case in related bugzilla.


gdb /usr/sbin/named /var/bind/core
GNU gdb (Gentoo 7.6.2 p1) 7.6.2
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.gentoo.org/>...
Reading symbols from /usr/sbin/named...done.
[New LWP 26095]
[New LWP 26096]
[New LWP 26097]
[New LWP 26094]

warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Core was generated by `/usr/sbin/named -c /etc/bind/named.conf -u named -n 1
-d 5 -f'.
Program terminated with signal 6, Aborted.
#0  0x00007f4a76e6ed44 in __GI_raise (sig=sig@entry=6) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56
56      ../nptl/sysdeps/unix/sysv/linux/raise.c: Directory or file does not exist.
(gdb) bt full
#0  0x00007f4a76e6ed44 in __GI_raise (sig=sig@entry=6) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56
        resultvar = 0
        pid = 26094
        selftid = 26095
#1  0x00007f4a76e700a8 in __GI_abort () at abort.c:90
        save_stage = 2
        act = {__sigaction_handler = {sa_handler = 0x7f4a7370c638,
sa_sigaction = 0x7f4a7370c638}, sa_mask = {__val = {139957816415680, 0,
139957814953725, 5, 0, 0,
              139957798968568, 139957741078176, 12, 139957816415696,
139957814980261, 0, 0, 26239328, 0, 0}}, sa_flags = 0, sa_restorer = 0x0}
        sigs = {__val = {32, 0 <repeats 15 times>}}
#2  0x0000000000450696 in assertion_failed.lto_priv.211 (file=0xc <Address 0xc
out of bounds>, line=2012108240, type=1936770616, cond=0x7f4a7370c630 "") at
./main.c:218
        tracebuf = {0x450509 <assertion_failed.lto_priv.211+73>,
0x7f4a77eb7b0a <isc_assertion_failed+10>, 0x7f4a77eb07cb <isc___mem_put+1579>,
          0x7f4a77bf1194 <dns_rdataslab_fromrdataset+372>, 0x7f4a77c9be53
<addrdataset.lto_priv.581+131>, 0x7f4a77c8a544 <addoptout+1364>,
0x7f4a77c8a664 <dns_ncache_add+20>,
          0x7f4a77cfa930 <ncache_adderesult+128>, 0x7f4a77cfee5e
<resquery_response.lto_priv.282+5838>, 0x7f4a77ea12f3 <run.lto_priv.40+691>,
0x7f4a77785f71 <start_thread+209>,
          0x7f4a76f2731d <clone+109>, 0x7f4a76f2731d <clone+109>, 0x0, 0x1,
0x7f4a71dddbc8, 0x7f4a7370d500, 0x7f4a77c56a63 <cache_find.lto_priv.572+2515>,
0x7f4a71dd7c48,
          0x3000000018, 0x7f4a7370cd80, 0x7f4a7370ccc0, 0xff, 0x7f4a00000000,
0x7f4a7370cbe0, 0x0, 0x7f4a6c14c0c0, 0x7f4a000000ff, 0x0, 0x300ff002e, 0x0,
0x7f4a7370da01,
          0xff00007370c7a8, 0x0, 0x7f4a00000000, 0x52bbc7df000000ff,
0x7f4a71de14e0, 0x300000000, 0x7f4a7370cd70, 0x7f4a7370cd60, 0x46d036,
0x46d034, 0x7f4a7370df70,
          0x7f4a76e80274 <_IO_vfprintf_internal+788>, 0x400000000,
0x600000000, 0x7f4a444e536e, 0x7f4a7370c8f0, 0x100000006, 0x7f4a00000002,
0x7f4a71de1327, 0x7f4a7370c8c0,
          0xffffffffffffffff, 0x7f4a77d7b06d <check_match+93>, 0x1, 0x6,
0xbbcef15f, 0x0, 0x17, 0x7f4a77d7b7a7 <do_lookup_x+1559>, 0x7f4a00000000,
0x2ef3bc5,
          0xffffffff0000001f, 0x7f4a7370c960, 0x7f4a7370c860, 0x7f4a7370c950,
0x7f4a77e837a8, 0xfffffff6, 0x0, 0x0, 0x7f4a77ee6000, 0x7f4a77e8cc46,
0x7f4a77e8cb58,
          0x7f4a77e882c8, 0x500000000, 0x10000000d, 0x7f4a7370cc2f,
0x7f4a77ee6358, 0x7f4a7370c9f0, 0x0, 0x7f4a7370ca18, 0x7f4a77ee6000, 0x0,
          0x7f4a77d7bc20 <_dl_lookup_symbol_x+336>, 0x0, 0x0, 0x5, 0x0, 0x1,
0x7f4a77ee6000, 0x7f4a7370cc2f, 0x0, 0x7f4a77ee6358, 0x7f4a7370c960,
0x100000000, 0x7f4a7370c950,
          0xbbcef15f, 0x7f4a77e8cc46, 0xc88b04, 0x0, 0x7f4a77e882c8,
0x7f4a77ee6000, 0x7f4a6c664e50, 0x485830 <categories+16>, 0x485770
<modules+16>, 0x0, 0x7f4a7370cae0,
          0x46916c <ns_client_log+188>, 0x30ffffffff, 0x7f4a7370caa0,
0x7f4a7370c9c0, 0x7f4a7370ca00, 0x190818f, 0x7f4a77ee4310
<_GLOBAL_OFFSET_TABLE_+72>, 0x7f4a7370cfd0, 0x0,
          0x0, 0x7f4a71dcb010, 0x0, 0x7f4a77d806fd <_dl_fixup+237>, 0x5, 0x0,
0x1906190, 0x7f4a77e882c8, 0x0, 0x7f4a6c045910, 0x7f4a7370cfd0,
          0x7f4a77d86ea5 <_dl_runtime_resolve+53>}
        i = 12
        nframes = 12
        logsuffix = 0x7f4a77ee55c0 <isc_categories> "C\r\355wJ\177"
        fname = 0x0
#3  0x00007f4a77eb7b0a in isc_assertion_failed () from /usr/lib64/libisc.so.95
No symbol table info available.
#4  0x00007f4a77eb07cb in isc___mem_put () from /usr/lib64/libisc.so.95
No symbol table info available.
#5  0x00007f4a77bf1194 in dns_rdataslab_fromrdataset () from
/usr/lib64/libdns.so.100
No symbol table info available.
#6  0x00007f4a77c9be53 in addrdataset.lto_priv.581 () from
/usr/lib64/libdns.so.100
No symbol table info available.
#7  0x00007f4a77c8a544 in addoptout () from /usr/lib64/libdns.so.100
No symbol table info available.
#8  0x00007f4a77c8a664 in dns_ncache_add () from /usr/lib64/libdns.so.100
No symbol table info available.
#9  0x00007f4a77cfa930 in ncache_adderesult () from /usr/lib64/libdns.so.100
No symbol table info available.
#10 0x00007f4a77cfee5e in resquery_response.lto_priv.282 () from
/usr/lib64/libdns.so.100
No symbol table info available.
#11 0x00007f4a77ea12f3 in run.lto_priv.40 () from /usr/lib64/libisc.so.95
No symbol table info available.
#12 0x00007f4a77785f71 in start_thread (arg=0x7f4a7370f700) at
pthread_create.c:308
        __res = <optimized out>
        pd = 0x7f4a7370f700
        now = <optimized out>
        unwind_buf = {cancel_jmp_buf = {{jmp_buf = {139957741090560,
-535941038373541769, 4096, 139957816868872, 0, 139957741090560,
439965827499878519, 439974558628898935},
              mask_was_saved = 0}}, priv = {pad = {0x0, 0x0, 0x0, 0x0}, data =
{prev = 0x0, cleanup = 0x0, canceltype = 0}}}
        not_first_call = <optimized out>
        robust = <optimized out>
        pagesize_m1 = <optimized out>
        sp = <optimized out>
        freesize = <optimized out>
        __PRETTY_FUNCTION__ = "start_thread"
#13 0x00007f4a76f2731d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:113
No locals.

(gdb) where
#0  0x00007f4a76e6ed44 in __GI_raise (sig=sig@entry=6) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56
#1  0x00007f4a76e700a8 in __GI_abort () at abort.c:90
#2  0x0000000000450696 in assertion_failed.lto_priv.211 (file=0xc <Address 0xc
out of bounds>, line=2012108240, type=1936770616, cond=0x7f4a7370c630 "") at
./main.c:218
#3  0x00007f4a77eb7b0a in isc_assertion_failed () from /usr/lib64/libisc.so.95
#4  0x00007f4a77eb07cb in isc___mem_put () from /usr/lib64/libisc.so.95
#5  0x00007f4a77bf1194 in dns_rdataslab_fromrdataset () from
/usr/lib64/libdns.so.100
#6  0x00007f4a77c9be53 in addrdataset.lto_priv.581 () from
/usr/lib64/libdns.so.100
#7  0x00007f4a77c8a544 in addoptout () from /usr/lib64/libdns.so.100
#8  0x00007f4a77c8a664 in dns_ncache_add () from /usr/lib64/libdns.so.100
#9  0x00007f4a77cfa930 in ncache_adderesult () from /usr/lib64/libdns.so.100
#10 0x00007f4a77cfee5e in resquery_response.lto_priv.282 () from
/usr/lib64/libdns.so.100
#11 0x00007f4a77ea12f3 in run.lto_priv.40 () from /usr/lib64/libisc.so.95
#12 0x00007f4a77785f71 in start_thread (arg=0x7f4a7370f700) at
pthread_create.c:308
#13 0x00007f4a76f2731d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:113


Reproducible: Always

Steps to Reproduce:
1.Use gcc-4.9-20131222 snapshot with lto enabled
2.Compile bind with -flto -O2 -ggdb
3.Attach gdb to pid or run named in foreground to get backtrace
Actual Results:  
Program terminated with signal 6, Aborted.

Expected Results:  
Runs without aborting itself.

Portage 2.2.7 (default/linux/amd64/13.0/desktop/kde, gcc-4.9.0-alpha20131222, glibc-2.17, 3.12.6-gentoo x86_64)
=================================================================
System uname: Linux-3.12.6-gentoo-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9550_@_2.83GHz-with-gentoo-2.2
KiB Mem:     8170356 total,   1100788 free
KiB Swap:    8396796 total,   8396796 free
Timestamp of tree: Wed, 25 Dec 2013 13:30:01 +0000
ld GNU gold (GNU Binutils 2.24) 1.11
app-shells/bash:          4.2_p45
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.6, 3.2.5-r3, 3.3.3
dev-util/cmake:           2.8.12.1-r2
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.12.6, 1.14.1
sys-devel/binutils:       2.24
sys-devel/gcc:            4.8.2, 4.9.0_alpha20131222
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           4.0-r1
sys-kernel/linux-headers: 3.12 (virtual/os-headers)
sys-libs/glibc:           2.17
Repositories: gentoo
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -ggdb -pipe -march=native -mtune=native -mno-sse4.2 -mno-sse4a -mno-avx -mno-3dnow -flto=4"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -ggdb -pipe -march=native -mtune=native -mno-sse4.2 -mno-sse4a -mno-avx -mno-3dnow -flto=4"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--quiet-build=n"
FCFLAGS="-O2 -pipe"                                                                                                                                                               
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news nostrip parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch usersandbox usersync xattr"                                                                                
FFLAGS="-O2 -ggdb -pipe -march=native -mtune=native -mno-sse4.2 -mno-sse4a -mno-avx -mno-3dnow -flto=4"                                                                           
GENTOO_MIRRORS="ftp://gentoo.mirror.web4u.cz/"                                                                                                                                    
LANG="cs_CZ.UTF-8"                                                                                                                                                                
LDFLAGS="-Wl,--as-needed -Wl,-O1 -Wl,-flto -O2 -ggdb -pipe -march=native -mtune=native -mno-sse4.2 -mno-sse4a -mno-avx -mno-3dnow -flto=4"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_COMPRESS="echo"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
USE="X a52 aac acl acpi alsa amd64 berkdb blas bluetooth branding bzip2 cairo caps cdda cddb cdparanoia cdr cli consolekit cracklib crypt cups cvs cxx dbus declarative djvu dri dts dv dvb dvd dvdr emboss encode exif fam ffmpeg fftw firefox flac fontconfig fortran ftp gd gdbm geoip gif gmp gnuplot gpm gps graphviz gsl gsm gstreamer gtk hdf5 iconv icu idn ieee1394 imagemagick imlib ipv6 ithreads javascript jbig jpeg jpeg2k kde kipi ladspa lame lapack lcms ldap libass libnotify libsamplerate lzma lzo mad matroska mms mmx mmxext mng modplug modules mp3 mp4 mpeg mplayer msn mtp mudflap multilib musepack musicbrainz ncurses netcdf nls nptl ocaml ocamlopt odbc ogg openexr opengl openmp pam pango pcre pdf perl phonon plasma plotutils png policykit postscript ppds pulseaudio python qt3support qt4 quicktime rdesktop readline ruby samba scanner sdl semantic-desktop session slang smp sndfile sox speex spell sse sse2 ssl ssse3 startup-notification svg szip tcpd theora threads tidy tiff truetype udev udisks unicode upower usb v4l vcd vdpau vnc vorbis wavpack wmf wxwidgets x264 xattr xcb xcomposite xft xine xinerama xml xosd xpm xscreensaver xv xvid xvmc zlib" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2 adc65 agfa_cl20 aox ax203 barbie canon casio_qv clicksmart310 digigr8 digita dimagev dimera3500 directory enigma13 fuji gsmart300 hp215 iclick jamcam jd11 jl2005a jl2005c kodak_dc120 kodak_dc210 kodak_dc240 kodak_dc3200 kodak_ez200 konica konica_qm150 largan lg_gsm mars mustek panasonic_coolshot panasonic_dc1000 panasonic_dc1580 panasonic_l859 pccam300 pccam600 pentax polaroid_pdc320 polaroid_pdc640 polaroid_pdc700 ricoh ricoh_g3 samsung sierra sipix_blink2 sipix_web2 smal sonix sony_dscf1 sony_dscf55 soundvision spca50x sq905 st2205 stv0674 stv0680 sx330z topfield toshiba_pdrm11 tp6801" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" FFTOOLS="aviocat cws2fws ffescape ffeval fourcc2pixfmt graph2dot ismindex pktdumper qt-faststart trasher ffhash" GPSD_PROTOCOLS="aivdm ashtech earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 navcom nmea ntrip oceanserver oncore rtcm104v2 rtcm104v3 sirf superstar2 tnt tripmate tsip ubx fury geostar nmea2000" GRUB_PLATFORMS="pc" INPUT_DEVICES="evdev keyboard mouse joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer scripting-beanshell scripting-javascript nlpsolver" LINGUAS="cs en" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_2 python3_3" QEMU_SOFTMMU_TARGETS="x86_64 arm i386" QEMU_USER_TARGETS="arm i386 x86_64" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="nouveau" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
USE_PYTHON="2.7 3.2 3.3"
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, SYNC




Comment 1


David Kredba





          2013-12-26 06:49:02 UTC
        

Created attachment 366214 [details]
bt full -O2 -ggdb




Comment 2


David Kredba





          2013-12-26 06:49:41 UTC
        

New fact. It is not stable with -O2 -ggdb too, -flto is not problem. It is stable only when compiled with gcc-4.8.2 or without optimization at -O2.

This is from gcc-4.9-20131222 with -O2 -ggdb:

(gdb) where
#0  0x00007f17fb685d44 in __GI_raise (sig=sig@entry=6) at
../nptl/sysdeps/unix/sysv/linux/raise.c:56
#1  0x00007f17fb6870a8 in __GI_abort () at abort.c:90
#2  0x00000000004317f8 in assertion_failed (file=0xc <Address 0xc out of
bounds>, line=-143514064, type=4766072, cond=0x7f17f7722638 "") at
./main.c:218
#3  0x00007f17fc69d6da in isc_assertion_failed (file=<optimized out>,
line=<optimized out>, type=<optimized out>, cond=<optimized out>) at
assertions.c:57
#4  0x00007f17fc6ae02b in isc___mem_put (ctx0=0x7f17f0045910, ptr=0x0,
size=139740912431056, file=0x0, line=0) at mem.c:1323
#5  0x00007f17fc49f984 in dns_rdataslab_fromrdataset (rdataset=0x7f17f7722fd0,
mctx=0x7f17f0045910, region=0x7f17f7722b90, reservelen=<optimized out>) at
rdataslab.c:334
#6  0x00007f17fc44f073 in addrdataset (db=0x7f17f4c59010, node=0x3ba6,
version=0x0, now=1388039897, rdataset=0x7f17f7722fd0, options=0,
addedrdataset=0x7f17f41d3240)
    at rbtdb.c:6464
#7  0x00007f17fc434f94 in addoptout (message=0x3ba4,
message@entry=0x7f17eeaeb1d8, cache=0x3ba6, node=0x6, covers=65535, now=0,
maxttl=0, optout=isc_boolean_false, 
    secure=isc_boolean_false, addedrdataset=0x7f17f41d3240) at ncache.c:270
#8  0x00007f17fc4350f4 in dns_ncache_add
(message=message@entry=0x7f17eeaeb1d8, cache=<optimized out>, node=<optimized
out>, covers=<optimized out>, now=<optimized out>, 
    maxttl=<optimized out>, addedrdataset=0x7f17f41d3240) at ncache.c:105
#9  0x00007f17fc4a6890 in ncache_adderesult (message=0x7f17eeaeb1d8,
cache=<optimized out>, node=<optimized out>, covers=<optimized out>,
now=<optimized out>, 
    maxttl=<optimized out>, optout=isc_boolean_false,
secure=isc_boolean_false, ardataset=0x7f17f41d3240, eresultp=0x7f17f7724600)
at resolver.c:5001
#10 0x00007f17fc4b227e in ncache_message (now=<optimized out>,
covers=<optimized out>, addrinfo=<optimized out>, fctx=<optimized out>) at
resolver.c:5167
#11 resquery_response (task=0x3ba4, event=0x3ba6) at resolver.c:7388
#12 0x00007f17fc6be0f3 in dispatch (manager=0x7f17fc75d010) at task.c:1116
#13 run (uap=0x7f17fc75d010) at task.c:1286
#14 0x00007f17fbf9cf71 in start_thread (arg=0x7f17f7725700) at
pthread_create.c:308
#15 0x00007f17fb73e31d in clone () at
../sysdeps/unix/sysv/linux/x86_64/clone.S:113

Bt full attached.




Comment 3


David Kredba





          2014-02-01 17:07:16 UTC
        

It seems that net-dns/bind-9.9.5-r1 is running fine with gcc 4.9 trunk revision 207224.




Comment 4


David Kredba





          2014-02-27 09:22:26 UTC
        

And it is again not with gcc-4.9.0 from the data February 19th 2014.




Comment 5


Tolga Dalman





          2014-04-13 05:45:17 UTC
        

So you are saying this bug is no longer present in GCC trunk and we can assume that this issue is the result of the development pre-release used ? If that's the case, this bug should be closed as fixed.




Comment 6


David Kredba





          2014-04-17 16:14:06 UTC
        

It was temporarily back and now with almost RC of gcc-4.9.0 it seems to be fine again even with -flto.




Comment 7


David Kredba





          2014-04-18 15:53:09 UTC
        

It is still there :-( (after used it a little more):

Apr 18 17:44:43 srv5 named[2552]: mem.c:1321: REQUIRE(ptr != ((void *)0)) failed, back trace
Apr 18 17:44:43 srv5 named[2552]: #0 0x44f719 in ??
Apr 18 17:44:43 srv5 named[2552]: #1 0x7f5940280f0a in ??
Apr 18 17:44:43 srv5 named[2552]: #2 0x7f594028040b in ??
Apr 18 17:44:43 srv5 named[2552]: #3 0x7f5940b5cb14 in ??
Apr 18 17:44:43 srv5 named[2552]: #4 0x7f5940c1d30a in ??
Apr 18 17:44:43 srv5 named[2552]: #5 0x7f5940c4c5e4 in ??
Apr 18 17:44:43 srv5 named[2552]: #6 0x7f5940c4c704 in ??
Apr 18 17:44:43 srv5 named[2552]: #7 0x7f5940c404f0 in ??
Apr 18 17:44:43 srv5 named[2552]: #8 0x7f5940c421dd in ??
Apr 18 17:44:43 srv5 named[2552]: #9 0x7f5940266ec8 in ??
Apr 18 17:44:43 srv5 named[2552]: #10 0x7f593fe344c3 in ??
Apr 18 17:44:43 srv5 named[2552]: #11 0x7f59411b6aed in ??
Apr 18 17:44:43 srv5 named[2552]: exiting (due to assertion failure)




Comment 8


David Kredba





          2014-11-08 18:48:35 UTC
        

I will close this one. ~arch net-dns/bind is rock stable with any later gcc-4.9.1 snapshots and gcc-4.9.2 + gcc 4.9.3 snapshots so the bug is gone.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

