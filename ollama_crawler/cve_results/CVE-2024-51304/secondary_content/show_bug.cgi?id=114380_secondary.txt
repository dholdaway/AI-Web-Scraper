Title: 114380 – sci-misc/qcad-2.0.4.0-r1 fails to build with sys-devel/gcc-3.4.4-r1
URL: https://bugs.gentoo.org/show_bug.cgi?id=114380

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 114380
sci-misc/qcad-2.0.4.0-r1 fails to build with sys-devel/gcc-3.4.4-r1
Last modified: 2005-12-10 22:51:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 114380 
      - sci-misc/qcad-2.0.4.0-r1 fails to build with sys-devel/gcc-3.4.4-r1


Summary:
sci-misc/qcad-2.0.4.0-r1 fails to build with sys-devel/gcc-3.4.4-r1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Please assign to toolchain








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-12-03 12:09 UTC by Jeroen Roovers (RETIRED)





      Modified:
    
2005-12-10 22:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



centic









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




6174-qcad-2.0.4.0-r1.log

              (6174-qcad-2.0.4.0-r1.log,764.71 KB,
                text/plain)

            
2005-12-03 12:10 UTC,

            Jeroen Roovers (RETIRED)




Details





emerge info

              (emerge.info-epia,2.69 KB,
                text/plain)

            
2005-12-03 12:11 UTC,

            Jeroen Roovers (RETIRED)




Details





qcad-gcc-merge.log

              (qcad-gcc-merge.log,1.77 KB,
                text/plain)

            
2005-12-03 17:43 UTC,

            Jeroen Roovers (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jeroen Roovers (RETIRED)






          2005-12-03 12:09:56 UTC
        

I can't really tell what the problem is, but GCC chokes horribly in the process.
 765K of build log output to follow...
I can say I never had this with GCC 3.3.6 building the very same version of 
qcad.




Comment 1


Jeroen Roovers (RETIRED)






          2005-12-03 12:10:53 UTC
        

Created attachment 74003 [details]
6174-qcad-2.0.4.0-r1.log




Comment 2


Jeroen Roovers (RETIRED)






          2005-12-03 12:11:29 UTC
        

Created attachment 74004 [details]
emerge info




Comment 3


Jeroen Roovers (RETIRED)






          2005-12-03 12:18:07 UTC
        

Something crashed so hard, in fact, that the top process (being emerge) or any 
child process never got around to printing a newline, so the last line of the 
first attachment displayed 





Comment 4


Jeroen Roovers (RETIRED)






          2005-12-03 12:19:38 UTC
        


(In reply to comment #3)

> first attachment displayed 

... the shell prompt attached to the end of the output in attachment #74003 [details].





Comment 5


Jeroen Roovers (RETIRED)






          2005-12-03 13:26:48 UTC
        

Same happens with the unstable version sci-misc/qcad-2.0.4.0-r2:

dl_dxf.cpp:(.text+0x13f19): undefined reference to `std::basic_string<char, std
::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage'
dl_dxf.cpp:(.text+0x14005): undefined reference to `std::basic_string<char, std
::char_traits<char>, std::allocator<char> >::_Rep::_S_empty_rep_storage'
../../dxflib/lib/libdxf.a(dl_dxf.o):dl_dxf.cpp:(.text+0x14018): more undefined 
references to `std::basic_string<char, std::char_traits<char>, std::allocator<
char> >::_Rep::_S_empty_rep_storage' follow
../../dxflib/lib/libdxf.a(dl_dxf.o): In function `DL_Dxf::addLayer(DL_
CreationInterface*)':
dl_dxf.cpp:(.text+0x14epia ~ #

Looks like GCC crashes while printer error messages.





Comment 6


SpanKY






          2005-12-03 14:07:48 UTC
        

not really

see Bug 104705




Comment 7


SpanKY






          2005-12-03 16:13:43 UTC
        

emerges fine for me on 3.4.4

maybe you need to rebuild your system against gcc-3.4.4 first




Comment 8


Jeroen Roovers (RETIRED)






          2005-12-03 17:22:36 UTC
        


(In reply to comment #7)
> maybe you need to rebuild your system against gcc-3.4.4 first

That's what I did two weeks ago.





Comment 9


Jeroen Roovers (RETIRED)






          2005-12-03 17:43:28 UTC
        

Created attachment 74030 [details]
qcad-gcc-merge.log

I tried an additional build of -r2 just now. That failed as well, so I will try
to use CFLAGS="-march=i686" to see if this has to do with the (relatively new)
optimisations for VIA C3-2 (Nehemiah and so on).

Side note: The build from Tue Nov 15 21:53:42 2005 does segfault when I try to
insert a part from qcad-parts. :-\




Comment 10


Jeroen Roovers (RETIRED)






          2005-12-04 08:12:49 UTC
        


(In reply to comment #9)
> I tried an additional build of -r2 just now. That failed as well, so I will 
try
> to use CFLAGS="-march=i686" to see if this has to do with the (relatively new)
> optimisations for VIA C3-2 (Nehemiah and so on).

Same problem.





Comment 11


Mark Loeser (RETIRED)






          2005-12-08 18:37:14 UTC
        

Merged fine here as well.  Its strange that its having a linking issue with
libstdc++.  Is /usr/lib/libstdc++.so present?  Maybe try switching to another
gcc profile and switching back?  Could be a gcc-config bug.




Comment 12


Mark Loeser (RETIRED)






          2005-12-10 22:51:16 UTC
        

I'd recommend the following: reinstall gcc-3.4.4, gcc-config {3.4.4 version} &&
source /etc/profile && ldconfig && emerge -e system && emerge -e world.  If
anything fails in the emerge -e world, just emerge --resume --skipfirst past it
and come back to it later.  Then try reproducing the issue here.  If its still a
problem, reopen the bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

