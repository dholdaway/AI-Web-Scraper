Title: 92578 – configure problem with mod_php-4.3.11-r2 on ppc
URL: https://bugs.gentoo.org/show_bug.cgi?id=92578

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 92578
configure problem with mod_php-4.3.11-r2 on ppc
Last modified: 2005-09-28 21:27:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 92578 
      - configure problem with mod_php-4.3.11-r2 on ppc


Summary:
configure problem with mod_php-4.3.11-r2 on ppc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

PPC
        Linux
      







Importance:
      
High
       major
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-14 04:31 UTC by Tom Martin





      Modified:
    
2005-09-28 21:27 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



chtekk
crypto+disabled
ppc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




config.log

              (config.log,93.28 KB,
                text/plain)

            
2005-05-14 04:34 UTC,

            Tom Martin




Details





config.log

              (config.log,58.20 KB,
                text/plain)

            
2005-05-19 00:02 UTC,

            Tom Martin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tom Martin





          2005-05-14 04:31:51 UTC
        

I try to emerge mod_php but configure hangs at severall points.
I startet to take out some features, but did't suceed, because next would be compiling without mysql and im installing mod_php for phpmyadmin. So that's no good idea.



Reproducible: Always
Steps to Reproduce:
1.USE="-imap -xml -xml2 -crypt" emerge -v mod_php
2.
3.

Actual Results:  
checking for mysql_close in -lmysqlclient... no
checking for mysql_error in -lmysqlclient... no
configure: error: mysql configure failed. Please check config.log for more
information.

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/mod_php-4.3.11-r2/work/php-4.3.11/config.log

!!! ERROR: dev-php/mod_php-4.3.11-r2 failed.
!!! Function econf, Line 485, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.



Portage 2.0.51.19 (!/var/portage/overlays/kurobox/profiles/kurobox,
gcc-3.4.3-20050110, glibc-2.3.4.20041102-r1, 2.4.17_mvl21 ppc)
=================================================================
System uname: 2.4.17_mvl21 ppc 82xx
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, May 13 2005, 13:49:16)]
distcc 2.16 powerpc-unknown-linux-gnu (protocols 1 and 2) (default port 3632)
[disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.8.5-r3, 1.7.9-r1, 1.6.3, 1.4_p6, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r8
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.4.17
ACCEPT_KEYWORDS="ppc"
AUTOCLEAN="yes"
CFLAGS="-O2 -mcpu=603e -fno-strict-aliasing -pipe"
CHOST="powerpc-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=603e -fno-strict-aliasing -pipe"
DISTDIR="/var/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/   
http://gentoo.eliteitminds.com  ftp://gentoo.inode.at/source/  
http://distfiles.gentoo.org    
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="de_DE@euro"
LC_ALL="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j1"
PKGDIR="/var/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/var/portage/tree"
PORTDIR_OVERLAY="/var/portage/overlays/kurobox"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="ppc X a52 aac aalib accounting alsa apache2 apm audiofile bash-completion
berkdb bitmap-fonts bluetooth cdparanoia cdr cjk crypt cups curl dba dhcp dvdr
encode expat ffmpeg flac ftp gd gdbm gif gkrellm gnome gpm gs gtk gtk2 http
httpd icecast imagemagick imap imlib java jpeg kde kuro ldap libwww lzo lzw mad
mailwrapper mbox milter motif mp3 mpeg mpeg4 mplayer mysql ncurses nfs nls ogg
oggvorbis openssh pam pdflib perl php png ppds python qt quicktime readline
samba sasl slang sndfile snmp spell ssl stream tcltk tcpd tiff transcode
truetype truetype-fonts type1-fonts unicode usb v4l vorbis webdav wifi xml xml2
xmms xprint xvid zlib linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LDFLAGS




Comment 1


Tom Martin





          2005-05-14 04:34:49 UTC
        

Created attachment 58858 [details]
config.log




Comment 2


Robin Johnson









          2005-05-17 11:45:59 UTC
        

revdep-rebuild!


/usr/lib/gcc/powerpc-unknown-linux-gnu/3.4.3-20050110/../../../../powerpc-unknown-linux-gnu/bin/ld:
warning: libsasl2.so.2, needed by /usr/lib/libldap.so, not found (try using
-rpath or -rpath-link)




Comment 3


Tom Martin





          2005-05-18 07:45:24 UTC
        

Sorry, forgot about that. 
While searching through the buglist i thought this would be the solution to my
problem as well, so i already tried a 'revdep-rebuild'

here is the output:

Checking reverse dependencies...
Packages containing binaries and libraries broken by any package update,
will be recompiled.

Collecting system binaries and libraries... done.
  (/root/.revdep-rebuild.1_files)

Collecting complete LD_LIBRARY_PATH... done.
  (/root/.revdep-rebuild.2_ldpath)

Checking dynamic linking consistency...
 done.
  (/root/.revdep-rebuild.3_rebuild)

Assigning files to ebuilds... Nothing to rebuild

Evaluating package order... done.
  (/root/.revdep-rebuild.5_order)

Dynamic linking on your system is consistent... All done.


But that didn't help. The problem still exists.





Comment 4


Robin Johnson









          2005-05-18 10:18:06 UTC
        

well look in the config.log and emerge all of the relevant packages that are 
complaining that libsasl2 went away (openldap at least, there might be others 
that show up after that).




Comment 5


Tom Martin





          2005-05-19 00:02:37 UTC
        

Created attachment 59256 [details]
config.log

I re-emerged the whole system with "emerge -uvD world" and then tried mod_php
again. The config.log changed but still it fails to configure mod_php.
Any ideas?




Comment 6


Robin Johnson









          2005-05-19 00:26:28 UTC
        

where is the error output from this new run? I need it in addition to the 
config.log that you attached.




Comment 7


Tom Martin





          2005-05-19 05:30:03 UTC
        

checking for IMAP support... yes
checking for IMAP Kerberos support... no
checking for IMAP SSL support... yes
checking for pam_start in -lpam... yes
checking for crypt in -lcrypt... yes
checking for OpenSSL version... >= 0.9.6
checking for CRYPTO_free in -lcrypto... (cached) yes
checking for SSL_CTX_set_ssl_version in -lssl... (cached) yes
checking whether IMAP works... no
configure: error: build test failed. Please check the config.log for details.

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/mod_php-4.3.11/work/php-4.3.11/config.log

!!! ERROR: dev-php/mod_php-4.3.11 failed.
!!! Function econf, Line 485, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.






Comment 8


Robin Johnson









          2005-05-19 10:01:16 UTC
        

try emerge c-client again




Comment 9


Tom Martin





          2005-05-19 12:11:48 UTC
        

emerge c-client worked without any problems but mod_php stays the same.

error-message:
checking for pam_start in -lpam... yes
checking for crypt in -lcrypt... yes
checking for OpenSSL version... >= 0.9.6
checking for CRYPTO_free in -lcrypto... (cached) yes
checking for SSL_CTX_set_ssl_version in -lssl... (cached) yes
checking whether IMAP works... no
configure: error: build test failed. Please check the config.log for details.

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/mod_php-4.3.11/work/php-4.3.11/config.log

!!! ERROR: dev-php/mod_php-4.3.11 failed.
!!! Function econf, Line 485, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.


do you need config.log as well?






Comment 10


Robin Johnson









          2005-05-19 12:29:26 UTC
        

please do this as a test:
put the data below into a file 'conftest.c'
and run this command:
gcc -o conftest -O2 -mcpu=603e -fno-strict-aliasing -pipe  -L/usr/lib 
-L/usr/X11R6/lib -ltiff -L/usr/lib -Wl,-rpath,/usr/X11R6/lib -L/usr/X11R6/lib
conftest.c -lc-client   -lssl -lcrypto -lcrypt -lpam -lt1 -lfreetype -lX11 -lXpm
-lpng -lz -ljpeg -lexslt -lxml2 -lxslt -lz -ldb-4.1 -ldb-4.1 -lndbm -lgdbm
-lcrack -lbz2 -lz -lssl -lcrypto -lresolv -lm  -lxmlparse -lxmltok -lxml2 -lz -lm
and put up all of the output that you get.

//=== contents of conftest.c ====
    void mm_log(void){}
    void mm_dlog(void){}
    void mm_flags(void){}
    void mm_fatal(void){}
    void mm_critical(void){}
    void mm_nocritical(void){}
    void mm_notify(void){}
    void mm_login(void){}
    void mm_diskerror(void){}
    void mm_status(void){}
    void mm_lsub(void){}
    void mm_list(void){}
    void mm_exists(void){}
    void mm_searched(void){}
    void mm_expunged(void){}
    char mail_newbody();
    int main() {
      mail_newbody();
      return 0;
    }






Comment 11


Tom Martin





          2005-05-19 12:48:30 UTC
        

this is what i get:

/usr/lib/libc-client.a(osdep.o)(.text+0xa1c8): In function `ssl_onceonlyinit':
: warning: the use of `tmpnam' is dangerous, better use `mkstemp'

and a compile file named 'conftest'




Comment 12


Robin Johnson









          2005-05-19 16:26:11 UTC
        

thanks for access to your box Tom.
Here's it traced a lot further:
/root/conftest: error while loading shared libraries: libgcrypt.so.11: cannot
enable executable stack as shared object requires: Error 14                    
     

I take it your box there is one of the Kuroboxes as seen on /. ?




Comment 13


Tom Martin





          2005-05-19 23:36:04 UTC
        

thanks for tracking down the error.

yes, it is a kurobox. but what do you mean with 'as seen on /.'
and what does this errormessage mean.




Comment 14


Robin Johnson









          2005-05-20 01:24:25 UTC
        

/. = slashdot news

the error doesn't make sense to me either, that's why I added the crypto herd 
to this bug.




Comment 15


Jakub Moc (RETIRED)






          2005-08-25 11:27:36 UTC
        

crypto herd, any ideas here?




Comment 16


Joe Jezak (RETIRED)






          2005-09-28 21:27:45 UTC
        

I can't replicate this, can you please reopen the bug if it's still a problem? 
Please try with glibc-2.3.5 also before repopening.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

