Title: 606574 – dev-python/pytest-pep8 installation. Incorrect entry_points.txt file
URL: https://bugs.gentoo.org/show_bug.cgi?id=606574

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 606574
dev-python/pytest-pep8 installation. Incorrect entry_points.txt file
Last modified: 2017-02-22 20:51:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 606574 
      - dev-python/pytest-pep8 installation. Incorrect entry_points.txt file


Summary:
dev-python/pytest-pep8 installation. Incorrect entry_points.txt file
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-01-20 07:59 UTC by Ildar Gafurov





      Modified:
    
2017-02-22 20:51 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



gaf
hencb
jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Incorrect (origin) file

              (origin_entry_points.txt,36 bytes,
                text/plain)

            
2017-01-20 07:59 UTC,

            Ildar Gafurov




Details





Correct file, that solves the issue

              (correct_entry_points.txt,74 bytes,
                text/plain)

            
2017-01-20 08:02 UTC,

            Ildar Gafurov




Details





emerge-info.txt

              (emerge-info.txt,5.99 KB,
                text/plain)

            
2017-02-20 13:59 UTC,

            Toralf Förster




Details





dev-python:pytest-pep8-1.0.6:20170220-123450.log

              (dev-python:pytest-pep8-1.0.6:20170220-123450.log,7.27 KB,
                text/plain)

            
2017-02-20 13:59 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,210.43 KB,
                text/plain)

            
2017-02-20 13:59 UTC,

            Toralf Förster




Details





environment

              (environment,104.53 KB,
                text/plain)

            
2017-02-20 13:59 UTC,

            Toralf Förster




Details





etc.portage.tbz2

              (etc.portage.tbz2,12.50 KB,
                application/x-bzip)

            
2017-02-20 13:59 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ildar Gafurov





          2017-01-20 07:59:53 UTC
        

Created attachment 460690 [details]
Incorrect (origin) file

There is an error in current ebuild or original package (pytest-pep8-1.0.6.ebuild is made on the 30th of Novermber 2016) - py.test doesn't load this module (I've tested pytest 3.0.3 and 3.0.5). The error is in entry_points.txt file, it doesn't
have pytest11 section at all.




Comment 1


Ildar Gafurov





          2017-01-20 08:02:44 UTC
        

Created attachment 460692 [details]
Correct file, that solves the issue

This is correct file, that allow pytest_pep8 plugin to be loaded. With this file everything works fine.




Comment 2


Toralf Förster






          2017-02-20 13:59:01 UTC
        

same at a tinderbox image




Comment 3


Toralf Förster






          2017-02-20 13:59:04 UTC
        

Created attachment 464424 [details]
emerge-info.txt




Comment 4


Toralf Förster






          2017-02-20 13:59:07 UTC
        

Created attachment 464426 [details]
dev-python:pytest-pep8-1.0.6:20170220-123450.log




Comment 5


Toralf Förster






          2017-02-20 13:59:11 UTC
        

Created attachment 464428 [details]
emerge-history.txt




Comment 6


Toralf Förster






          2017-02-20 13:59:14 UTC
        

Created attachment 464430 [details]
environment




Comment 7


Toralf Förster






          2017-02-20 13:59:17 UTC
        

Created attachment 464432 [details]
etc.portage.tbz2




Comment 8


Oleh





          2017-02-22 16:30:07 UTC
        

this is stopper for www-servers/tornado installation, which has this package in dependencies merge list.




Comment 9


Oleh





          2017-02-22 16:57:53 UTC
        

so, MANIFEST.in using graft for doc and test_pep8.py but there are no such dirs in pytest-pep8 sources

-graft doc
-graft test_pep8.py
allows it to build.




Comment 10


Mike Gilbert






          2017-02-22 20:33:50 UTC
        

(In reply to Toralf Förster from comment #2)
> same at a tinderbox image

This is a different bug.




Comment 11


Mike Gilbert






          2017-02-22 20:43:49 UTC
        

I am unable to reproduce the problem originally reported in comment 0. entry_points.txt looks like this:

[pytest11]
pep8 = pytest_pep8




Comment 12


Mike Gilbert






          2017-02-22 20:51:18 UTC
        

https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=91aecde960dc3bff1c2610fe726d760bf411d21d

commit 91aecde960dc3bff1c2610fe726d760bf411d21d
Author: Mike Gilbert <floppym@gentoo.org>
Date:   Wed Feb 22 15:48:21 2017 -0500

    dev-python/pytest-pep8: remove invalid entries from MANIFEST.in

    Also RDEPEND on setuptools for entry_points support.

    Bug: https://bugs.gentoo.org/606574#c2

 dev-python/pytest-pep8/files/1.0.6-MANIFEST.patch | 9 +++++++++
 dev-python/pytest-pep8/pytest-pep8-1.0.6.ebuild   | 5 +++++
 2 files changed, 14 insertions(+)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

