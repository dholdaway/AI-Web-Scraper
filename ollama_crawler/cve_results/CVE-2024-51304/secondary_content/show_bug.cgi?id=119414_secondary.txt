Title: 119414 – dev-php/mod_php-4.4.0-r9 failed to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=119414

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 119414
dev-php/mod_php-4.4.0-r9 failed to emerge
Last modified: 2006-01-19 02:16:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 119414 
      - dev-php/mod_php-4.4.0-r9 failed to emerge


Summary:
dev-php/mod_php-4.4.0-r9 failed to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-18 05:28 UTC by Kristaps Kaupe





      Modified:
    
2006-01-19 02:16 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kristaps Kaupe





          2006-01-18 05:28:04 UTC
        

I have practically fresh 2005.1-r1 Gentoo system. 

Emerge output:
--------------
./configure --prefix=/usr --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --with-apxs2=/usr/sbin/apxs2 --disable-cli --without-pear --without-db3 --without-db4 --without-db2 --without-ndbm --with-mcrypt=/usr --with-mhash=/usr --without-interbase --without-ming --without-swf --without-sybase --with-gdbm=/usr --without-fdftk --without-java --without-mcal --without-unixODBC --without-pgsql --without-snmp --without-gmp --without-mssql --without-crack --without-pdflib --without-gd --with-png=/usr --with-png-dir=/usr --with-jpeg=/usr --with-jpeg-dir=/usr --enable-exif --without-tiff --with-mysql=/usr --with-mysql-sock=/var/run/mysqld/mysqld.sock --with-freetype-dir=/usr --with-ttf=/usr --with-t1lib=/usr --with-gettext --with-pspell=/usr --with-openssl=/usr --without-imap --without-ldap --with-dom=/usr --with-dom-xslt=/usr --with-dom-exslt=/usr --without-kerberos --with-pam --disable-memory-limit --enable-ipv6 --without-yaz --disable-debug --without-curl --enable-dbx --with-zlib=/usr --with-zlib-dir=/usr --with-sablot=/usr --enable-xslt --with-xslt-sablot --with-xmlrpc --enable-wddx --with-xml --enable-mbstring=all --enable-mbregex --with-bz2=/usr --with-cdb --enable-pcntl --enable-bcmath --enable-calendar --enable-dbase --enable-filepro --enable-ftp --with-mime-magic=/usr/share/misc/file/magic.mime --enable-sockets --enable-sysvsem --enable-sysvshm --enable-sysvmsg --with-iconv --enable-shmop --enable-dio --enable-yp --without-ncurses --without-readline --enable-inline-optimization --enable-track-vars --enable-trans-sid --enable-versioning --with-config-file-path=/etc/php/apache2-php4 --libdir=/usr/lib/php --without-pear --build=i686-pc-linux-gnu
creating cache ./config.cache
checking host system type... i686-pc-linux-gnu
Updated main/php_version.h
checking for gcc... gcc
checking whether the C compiler (gcc -Os -march=i686 -pipe -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -pthread  -L/usr/lib) works... no
configure: error: installation or configuration problem: C compiler cannot create executables.

!!! Please attach the config.log to your bug report:
!!! /var/tmp/portage/mod_php-4.4.0-r9/work/php-4.4.0/config.log

!!! ERROR: dev-php/mod_php-4.4.0-r9 failed.
!!! Function econf, Line 495, Exitcode 0
!!! econf failed
!!! If you need support, post the topmost build error, NOT this status message.


/var/tmp/portage/mod_php-4.4.0-r9/work/php-4.4.0/config.log:
------------------------------------------------------------
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

configure:1656: checking host system type
configure:1756: checking for gcc
configure:1869: checking whether the C compiler (gcc -Os -march=i686 -pipe -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -pthre
ad  -L/usr/lib) works
configure:1885: gcc -o conftest -Os -march=i686 -pipe -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -pthread   -L/usr/lib conft
est.c  -lxmlparse -lxmltok 1>&5
/usr/lib/libxmlparse.so: undefined reference to `floor'
collect2: ld returned 1 exit status
configure: failed program was:

#line 1880 "configure"
#include "confdefs.h"

main(){return(0);}


/etc/make.conf:
---------------
CFLAGS="-Os -march=i686 -pipe"
CHOST="i686-pc-linux-gnu"
CXXFLAGS="${CFLAGS}"
MAKEOPTS="-j2"

USE="-X -berkdb apache2 mysql"


/etc/portage/package.use:
-------------------------
dev-db/mysql -ssl static
dev-php/mod_php hardenedphp
dev-php/php hardenedphp




Comment 1


Jakub Moc (RETIRED)






          2006-01-18 05:32:00 UTC
        

Run revdep-rebuild and re-emerge net-libs/libwww.




Comment 2


Kristaps Kaupe





          2006-01-18 08:38:58 UTC
        

That didn't help. Configure outputs the same error "installation or configuration problem: C compiler cannot create executables."
Note, that I have such error only on emerging mod_php, other packages builds without any errors.




Comment 3


Jakub Moc (RETIRED)






          2006-01-18 09:06:34 UTC
        

You have clearly screwed up linking, this is not a php bug, sorry. 

> /usr/lib/libxmlparse.so: undefined reference to `floor'

# equery b /usr/lib/libxmlparse.so
[ Searching for file(s) /usr/lib/libxmlparse.so in *... ]
net-libs/libwww-5.4.0-r4 (/usr/lib/libxmlparse.so -> libxmlparse.so.0.1.0)

Also, if you upgraded mysql, then you need to run revdep-rebuild --library='libmysqlclient.so.12' or libmysqlclient.so.14, depending on your previous mysql version. 





Comment 4


Kristaps Kaupe





          2006-01-19 02:16:52 UTC
        

I didn't upgrade mysql. I installed mysql on a fresh Gentoo system. After installation emerges (those from handbook) I did just two emerges - "emerge vim" and "emerge mysql mod_php".









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

