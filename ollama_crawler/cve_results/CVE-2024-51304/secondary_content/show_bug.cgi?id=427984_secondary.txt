Title: 427984 – UTF-8 Characters in Hostname Don't Properly Display in Some X Applications (SLiM/Xfce)
URL: https://bugs.gentoo.org/show_bug.cgi?id=427984

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 427984
UTF-8 Characters in Hostname Don't Properly Display in Some X Applications (SLiM/Xfce)
Last modified: 2012-08-01 00:43:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 427984 
      - UTF-8 Characters in Hostname Don't Properly Display in Some X Applications (SLiM/Xfce)


Summary:
UTF-8 Characters in Hostname Don't Properly Display in Some X Applications (S...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-07-25 03:44 UTC by Justin





      Modified:
    
2012-08-01 00:43 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jer
yngwin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




ç gets replaced by Ã§

              (Weird_behavior.png,5.98 KB,
                application/png)

            
2012-07-25 03:44 UTC,

            Justin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Justin





          2012-07-25 03:44:45 UTC
        

Created attachment 319180 [details]
ç gets replaced by Ã§

Xfce and SLiM (the only ones I've noticed so far, there may be others) do not properly display UTF-8 characters when the characters are in the hostname. Whenever I have a section of text that displays the system's hostname (SLiM login screen, Firefox, urxvta, Thunar) the UTF-8 characters get replaced with two other characters.
In my example I have a c-cedilla in the hostname but the X text that displays the hostname replaces my ç with an Ã§. Oddly every other UTF-8 related character on the system is fine, even on the regular non-X terminal, so it seems to only be the hostname itself that's wonky.
Specifically, my title bar should read

root@teçt:/ (on teçt)

but instead it reads

root@teçt:/ (on teÃ§t)

I've attached a screenshot in case that helps.




Comment 1


Ben de Groot (RETIRED)






          2012-07-25 04:31:28 UTC
        

The Ã§ would suggest this happens in a non-unicode locale environment.




Comment 2


Justin





          2012-07-25 05:06:06 UTC
        

Yup, but oddly there's a ç displayed perfectly earlier in the title bar in my screenshot.

Not sure if this helps, but here's cat /etc/env.d/02locale:
LANG="en_US.UTF-8"
LC_COLLATE="C"
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL=""




Comment 3


Jeroen Roovers (RETIRED)






          2012-07-27 14:03:33 UTC
        

Does the problem also occur when you login on a tty as your normal user and then run startx (because maybe the problem is in slim).




Comment 4


Justin





          2012-07-28 03:22:11 UTC
        

The problem does still occur when logging in from the console.




Comment 5


Jeroen Roovers (RETIRED)






          2012-07-29 16:10:07 UTC
        

I don't see any argument that hostnames /should/ support Unicode in the first place. As far as I can tell, IDN (punycode) was invented specifically to get around the problems in using non-ASCII characters in hostnames.

If you rename your host to "xn--tet-3la", does it then display as expected in slim/xfce?




Comment 6


Justin





          2012-07-31 16:31:24 UTC
        

Unicode in the hostname seems to generally work on the system itself but if it's not "supported" then that's fine.

Setting the hostname to "xn--tet-3la" does indeed show up correctly.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

