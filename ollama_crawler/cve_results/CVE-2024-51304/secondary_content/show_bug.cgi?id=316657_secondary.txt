Title: 316657 – chromium >5.0.307.11 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=316657

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 316657
chromium >5.0.307.11 fails to compile
Last modified: 2010-05-01 11:19:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 316657 
      - chromium >5.0.307.11 fails to compile


Summary:
chromium >5.0.307.11 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Bernard Cafarelli








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-04-22 12:33 UTC by Peter Opert





      Modified:
    
2010-05-01 11:19 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



hwoarang
phajdan.jr









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log.tar.bz2,149.17 KB,
                application/octet-stream)

            
2010-04-22 12:46 UTC,

            Peter Opert




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Peter Opert





          2010-04-22 12:33:24 UTC
        

all versions greater than chromium-5.0.307.11 fail to compile.

Reproducible: Always

Steps to Reproduce:
1. emerge -av www-client/chromium
2.
3.

Actual Results:  
make: *** [out/Release/chrome] Error 1
 * ERROR: www-client/chromium-5.0.342.9 failed:
 *   compilation failed
 * 
 * Call stack:
 *     ebuild.sh, line  54:  Called src_compile
 *   environment, line 2731:  Called die
 * The specific snippet of code:
 *       emake -r V=1 chrome chrome_sandbox BUILDTYPE=Release rootdir="${S}" CC=$(tc-getCC) CXX=$(tc-getCXX) AR=$(tc-getAR) RANLIB=$(tc-getRANLIB) || die "compilation failed"


Expected Results:  
clean compile

chromium-5.0.307.11 compiled without issue.
This is a brand new installation so I'm still running mostly all the base layout from a recent stage3.




Comment 1


Peter Opert





          2010-04-22 12:34:12 UTC
        

Portage 2.1.7.17 (default/linux/amd64/10.0/desktop, gcc-4.3.4, glibc-2.10.1-r1, 2.6.31-gentoo-r10 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.31-gentoo-r10-x86_64-Dual_Core_AMD_Opteron-tm-_Processor_185-with-gentoo-1.12.13
Timestamp of tree: Tue, 13 Apr 2010 15:15:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.4-r1
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.9.6-r3, 1.10.3
sys-devel/binutils:  2.18-r3
sys-devel/gcc:       4.3.4
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=opteron -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo"
CXXFLAGS="-march=opteron -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests ccache distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans"
GENTOO_MIRRORS="http://mirror.csclub.uwaterloo.ca/gentoo-distfiles/ http://gentoo.netnitco.net http://gentoo.osuosl.org/ http://gentoo.mirrors.tds.net/gentoo http://distro.ibiblio.org/pub/linux/distributions/gentoo/"
LANG="C"
LDFLAGS="-Wl,-O1"
LINGUAS="en en_US"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/desktop-effects /usr/local/portage"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="32bit 3dnow 64bit X a52 aac accessibility acl acpi aim alsa amd64 aotuv audiofile automount background bash-completion bdf berkdb bittorrent bluetooth bonobo branding browserplugin buttons bzip2 cairo cdda cddb cdio cdparanoia cdr cdrom chroot clamav cli consolekit cpudetection cracklib crypt css cups curl curlwrappers cxx dba dbus deprecated discouraged disk-partition divx dri dts dv dvd dvdr ecc edl emboss emerald emul-linux-x86 encode escreen etwin exif fam fame fbcon fbcondecor ffmpeg firefox flac flash font-server fontconfig fortran fpx ftp garmin gcdmaster gcj gd gdbm gif gimp git glitz gmail gmailtimestamps gmedia gnome gnome-keyring gnome-print gnomecd gpm gtalk gtk gtkhtml guile hal hddtemp iconv icq id3 id3tag idea idn ieee1394 imagemagick imap imlib insecure-savers irc ithreads jabber java java-external javascript jce jit joystick jpeg jpeg2k krb4 lame lcd lcms ldap libclamav libnotify live lm_sensors logitech-mouse logrotate lvm lzo mad masquerade matroska matrox md5sum mikmod mjpeg mmx mng modules mono moonlight moznocompose moznoirc moznomail mozsvg mozxmlterm mp3 mp4 mpeg mplayer msn mudflap multilib musepack nautilus ncurses network networking nls nolvm1 nomac nptl nptlonly nsplugin nvidia oav objc offensive ofx ogg oggvorbis on-the-fly-crypt openexr opengl openmp pam pango pccts pcre pdf perl pidgin png portaudio ppds pppd python qt3support qt4 quotes rdesktop readline realmedia reflection regex rtc samba sdl sensord session sftplogging shorten skins smp sndfile speex spell spl sse sse2 sse3 ssl startup-notification stream subversion svg svgz sysfs syslog tcl tcltk tcpd tga theora threads tiff timidity tk toolbar truetype twolame type1 unicode unsupported usb userlocales v4l v4l2 vcd vcdx vim vim-syntax vim-with-x vnc vorbis vram wavpack winbind wma wmf wmp wxwindows x264 xanim xcb xinerama xinetd xml xml2 xmlrpc xorg xpm xprint xscreensaver xulrunner xv xvid yahoo yv12 zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="*" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="canon fuji nikon" ELIBC="glibc" FOO2ZJS_DEVICES="hp2600n" INPUT_DEVICES="evdev keyboard mouse vmmouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nv nvidia vesa vmware" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 2


Peter Opert





          2010-04-22 12:46:20 UTC
        

Created attachment 228751 [details]
build.log




Comment 3


Peter Opert





          2010-04-22 12:49:15 UTC
        

# emerge -pqv =www-client/chromium-5.0.342.9
[ebuild     U ] www-client/chromium-5.0.342.9 [5.0.307.11] USE="ffmpeg plugins-symlink -bindist%" 





Comment 4


Markos Chandras (RETIRED)






          2010-04-25 19:19:44 UTC
        

I can confirm this bug 




Comment 5


Paweł Hajdan, Jr. (RETIRED)






          2010-04-28 07:08:46 UTC
        

The failure looks just so weird...

Could you try running with ccache disabled? This is the only difference in your setup that I can see.




Comment 6


Peter Opert





          2010-04-28 13:40:18 UTC
        

You're a champ.

FEATURES="-ccache" emerge -av chromium

Compiled without any further issue. Should the ebuild be modified to either disable ccache or to clear the cached code prior to build?




Comment 7


Paweł Hajdan, Jr. (RETIRED)






          2010-04-28 15:25:21 UTC
        

(In reply to comment #6)
> FEATURES="-ccache" emerge -av chromium
> Compiled without any further issue. Should the ebuild be modified to either
> disable ccache or to clear the cached code prior to build?

Great. Could you make a backup of your ccache cache directory, and see if the failure is reproducible with that directory? Also, it would be interesting to see whether the failure is reproducible with an empty cache directory.

Bonus points for pinpointing which file in the cache causes the problem, and what are its contents.




Comment 8


Peter Opert





          2010-04-29 03:05:09 UTC
        

I'm not a ccache pro by any means so might not be the guy to assist in tracking down the point of failure. I am making a backup of the portage ccache dir and will attempt to reproduce the error compiling manually.

I have cleared portage ccache (CCACHE_DIR="/var/tmp/ccache" ccache -C) and remerged without further issue however so I'm willing to mark this as Resolved WONTFIX.




Comment 9


Paweł Hajdan, Jr. (RETIRED)






          2010-05-01 11:19:01 UTC
        

Closing, it seems to be a ccache cache corruption.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

