Title: 210198 – xen-sources-2.6.20-r6 dom0 kernel panic during boot on Intel Core 2 and Xeon
URL: https://bugs.gentoo.org/show_bug.cgi?id=210198

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 210198
xen-sources-2.6.20-r6 dom0 kernel panic during boot on Intel Core 2 and Xeon
Last modified: 2011-03-26 11:39:59 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 210198 
      - xen-sources-2.6.20-r6 dom0 kernel panic during boot on Intel Core 2 and Xeon


Summary:
xen-sources-2.6.20-r6 dom0 kernel panic during boot on Intel Core 2 and Xeon
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Xen Devs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-02-14 22:32 UTC by Frank Stanek





      Modified:
    
2011-03-26 11:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




kernel config

              (config,38.29 KB,
                text/plain)

            
2008-02-14 22:39 UTC,

            Frank Stanek




Details





lspci output

              (lspci.txt,10.78 KB,
                text/plain)

            
2008-02-14 22:40 UTC,

            Frank Stanek




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Frank Stanek





          2008-02-14 22:32:28 UTC
        

The specified kernel panics early during boot with xen-3.2.0 (also xen-3.1.3). The only output I was able to get is this:

[<ffffffff8021a48c>] bust_spinlocks+0x1c/0x50
[<ffffffff80233728>] panic+0x88/0x170
[<ffffffff8023452e>] printk+0x4e/0x60
[<ffffffff80236c81>] do_exit+0x71/0x8d0
[<ffffffff8035daf5>] do_unblank_screen+0x25/0x130
[<ffffffff8020b6b0>] kernel_math_error+0x0/0xb0
[<ffffffff8020c810>] do_general_protection+0x130/0x150
[<ffffffff805f3680>] hardware_enable+0x0/0x90
[<ffffffff804978d7>] error_exit+0x0/0x79
[<ffffffff805f3680>] hardware_enable+0x0/0x90
[<ffffffff805f3706>] hardware_enable+0x86/0x90
[<ffffffff80213f83>] smp_call_function_interrupt+0x53/0x90
[<ffffffff80257ffe>] handle_IRQ_event+0x4e/0xa0
[<ffffffff80259c3c>] handle_level_irq+0xbc/0x130
[<ffffffff8020cf13>] do_IRQ+0x73/0xf0
[<ffffffff8038a17f>] evtchn_do_upcall+0xdf/0x150
[<ffffffff8020a8ce>] do_hypervisor_callback+0x1e/0x30
<EOI>  [<ffffffff802063aa>] hypercall_page+0x3aa/0x1000
[<ffffffff802063aa>] hypercall_page+0x3aa/0x1000
[<ffffffff80246906>] rcu_pending+0x26/0x60
[<ffffffff8020e4c1>] raw_safe_halt+0xa1/0xc0
[<ffffffff80208e19>] xen_idle+0x49/0x90
[<ffffffff80208c23>] cpu_idle+0x63/0x90


I have ruled out faulty SATA/PATA and USB drivers, not compiling them into the kernel does not help. However xen-sources-2.6.18-r8 boots fine with the exact same configuration and only stops much later due to missing SATA/PATA drivers.

Two other persons have reported a similar problem in the Gentoo forums:
http://forums.gentoo.org/viewtopic-t-661064.html


I will attach my .config and the output of lspci for reference. Please advise if and how I can provide any more information.

Reproducible: Always




/proc/cpuinfo:
model name	: Intel(R) Core(TM)2 Quad CPU    Q6600  @ 2.40GHz

The mainboard is an Intel DQ35MP with Q35 chipset.




Comment 1


Frank Stanek





          2008-02-14 22:39:17 UTC
        

Created attachment 143543 [details]
kernel config

This is the configuration I used for xen-sources-2.6.20-r6. It's an almost exact copy of my non-xen config.




Comment 2


Frank Stanek





          2008-02-14 22:40:28 UTC
        

Created attachment 143545 [details]
lspci output

Output of lspci -v




Comment 3


Alexey Shvetsov







          2011-03-26 11:39:59 UTC
        

Xen 4.1 in tree. Please test with it and reopen if it doesnt work









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

