Title: 297085 – Qt 4.5.3 is switching to a bigger font randomly
URL: https://bugs.gentoo.org/show_bug.cgi?id=297085

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 297085
Qt 4.5.3 is switching to a bigger font randomly
Last modified: 2010-01-15 17:27:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 297085 
      - Qt 4.5.3 is switching to a bigger font randomly


Summary:
Qt 4.5.3 is switching to a bigger font randomly
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-12-15 19:29 UTC by Michal Špondr





      Modified:
    
2010-01-15 17:27 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



profalbert









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




This is the normal font size I had before

              (qt-normal.png,82.05 KB,
                image/png)

            
2009-12-15 19:30 UTC,

            Michal Špondr




Details





This is the big font size that occurs sometimes

              (qt-big.png,93.70 KB,
                image/png)

            
2009-12-15 19:31 UTC,

            Michal Špondr




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michal Špondr





          2009-12-15 19:29:40 UTC
        

I have problem using Qt applications like Psi, last.fm player etc. Sometimes the application starts with big fonts. It seems to be random. I can't get the normal font size unless I restart X-server.

Reproducible: Sometimes

Steps to Reproduce:
1. Run Psi
2. Run it again and again, unless it has another font size
3.

Actual Results:  
Qt applications has bigger font size sometimes

Expected Results:  
Qt applications should have the same font size all the time

Portage 2.1.6.13 (default/linux/amd64/10.0, gcc-4.3.4, glibc-2.9_p20081201-r2, 2.6.31-gentoo-r6 x86_64)
=================================================================
System uname: Linux-2.6.31-gentoo-r6-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T7250_@_2.00GHz-with-gentoo-1.12.13
Timestamp of tree: Tue, 15 Dec 2009 18:15:01 +0000
app-shells/bash:     4.0_p35
dev-java/java-config: 2.1.9-r1
dev-lang/python:     2.6.4
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=core2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe -march=core2"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="cs_CZ.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="cs"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X alsa amd64 ao audiofile bindist bluetooth bzip2 cairo cdda cddb cli cracklib crypt cups cxx dbus dri dvd dvdr flac gdbm geoip gif glut gnome gnutls gpm gstreamer gtk2 hal iconv imagemagick ipv6 jpeg jpeg2k lm_sensors mikmod mmap mmx modules mp3 mplayer mudflap multilib ncurses nls nptl nptlonly ogg openal opengl openmp pam pcre pdf plotutils png pppd qt3support qt4 quicktime readline reflection sdl session sharedmem smartcard spl sqlite sse sse2 ssl ssse3 sysfs tcpd threads trayicon truetype type1 unicode vim-syntax vorbis wifi xinerama xorg xulrunner zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="cs" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Michal Špondr





          2009-12-15 19:30:41 UTC
        

Created attachment 213129 [details]
This is the normal font size I had before




Comment 2


Michal Špondr





          2009-12-15 19:31:13 UTC
        

Created attachment 213131 [details]
This is the big font size that occurs sometimes




Comment 3


Markos Chandras (RETIRED)






          2009-12-16 04:08:31 UTC
        

Even though there is no clear way to reproduce it, I am assigning this bug to Qt herd




Comment 4


Christoph Gritschenberger





          2010-01-10 10:54:15 UTC
        

I'm using gnome but have kde's sytemsettings installed (along with some other kde-stuff). I observed that I can fix this bug by setting force dpi in systemsettings->Appearance->Fonts->Force Fonts DPI to 96 dpi.

Then all newly started qt-apps appear with 96-dpi fonts. After setting this to "Disabled" the fonts are huge again. Also, if I restart leaving the setting to 96 dpi, it (sometimes) does not get reapplied properly, so I (sometimes) have the huge fonts again after restart, until I go to systemsettings and reapply the 96 dpi.

hope this helps in some way




Comment 5


Christoph Gritschenberger





          2010-01-10 10:59:39 UTC
        

Some additional information

$ xdpyinfo | grep resolution
  resolution:    129x133 dots per inch

I also set gnomes font dpi to 96. So 96 looks "normal" to me now.

I have a laptop with a 15,4" 16:10 screen, and run a resolution of 1680x1050.




Comment 6


Michal Špondr





          2010-01-10 19:43:53 UTC
        

I was using 100 dpi resolution, switched to the recommended 96 dpi (in Gnome Settings) and now it works well.
Thank you.




Comment 7


Christoph Gritschenberger





          2010-01-11 12:04:24 UTC
        

(In reply to comment #6)
> I was using 100 dpi resolution, switched to the recommended 96 dpi (in Gnome
> Settings) and now it works well.
> Thank you.
> 
That didn't work for me.

I observed this bug on 2 laptops now. Some conditions that might affect be related to reproducing the issue:
* having a high-resolution-screen (1680x1050)
* use the proprietery nvidia driver
* using autogenerated xorg.conf by nvidia-xconfig

In the end, it must be related to xdpyinfo returning "129x133 dots per inch", I think because that's about the resolution the fontsize applies to.




Comment 8


Christoph Gritschenberger





          2010-01-11 13:02:51 UTC
        

So forcing dpi-resolution through xorg.conf

Section "Screen"
    ...
    Option	"DPI" "96x93"
    ...
EndSection

xdpyinfo returns that resolution than.
The question is where does the 133x129-value come from? And why does only qt use it?




Comment 9


Michal Špondr





          2010-01-11 13:59:30 UTC
        

xdpyinfo also returned "129x133 dots per inch" to me. I have also the same resolution 1680x1050 and nvidia-drivers.




Comment 10


Michal Špondr





          2010-01-15 17:27:52 UTC
        

Hmm, so Gnome-settings changed it successfully before, but now I have the same problem even with 96 dpi in Gnome enabled.

$ xdpyinfo |grep resolution
  resolution:    129x133 dots per inch










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

