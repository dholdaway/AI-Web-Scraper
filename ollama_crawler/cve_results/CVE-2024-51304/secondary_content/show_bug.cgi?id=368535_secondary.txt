Title: 368535 – dev-libs/glib-2.28.6: gdbus-serialization test fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=368535

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 368535
dev-libs/glib-2.28.6: gdbus-serialization test fails
Last modified: 2011-06-21 07:14:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 368535 
      - dev-libs/glib-2.28.6: gdbus-serialization test fails


Summary:
dev-libs/glib-2.28.6: gdbus-serialization test fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-05-24 08:17 UTC by Mehrunes Dagon





      Modified:
    
2011-06-21 07:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




3 files promised in post no. 1

              (Mehrunes_Dagon_glib_3files.7z,24.66 KB,
                application/x-7zip-compressed)

            
2011-05-24 08:19 UTC,

            Mehrunes Dagon




Details





glib-2.28.8 fails, too. Could this be due to the fact that my /tmp is of type tmpfs?

              (glib-2.28.8.Mehrunes.failed.emerge.log,289.76 KB,
                text/plain)

            
2011-06-18 09:31 UTC,

            Mehrunes Dagon




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mehrunes Dagon





          2011-05-24 08:17:38 UTC
        

testsuite fails when emerge'ing glib-2.28.6

Reproducible: Always

Steps to Reproduce:
1. USE=test emerge =dev-libs/glib-2.28.6
2.
3.
Actual Results:  
testsuite fails, emerge log says:

PASS: gapplication
TEST: gdbus-serialization... (pid=24756)
  /gdbus/message-serialize-basic:                                      **
ERROR:gdbus-serialization.c:600:check_serialization: assertion failed (s == expected_dbus_1_output): ("value 0:   string: `this is a string'\nvalue 1:   object_path: `/this/is/a/path'\nvalue 2:   signature: `sad'\nvalue 3:   byte: 0x2a\nvalue 4:   bool: true\nvalue 5:   int16: -42\nvalue 6:   uint16: 60000\nvalue 7:   int32: -44\nvalue 8:   uint32: 100000\nvalue 9:   int64: -34359738368\nvalue 10:   uint64: 18446744073709551615\nvalue 11:   double: 0.000000\n" == "value 0:   string: `this is a string'\nvalue 1:   object_path: `/this/is/a/path'\nvalue 2:   signature: `sad'\nvalue 3:   byte: 0x2a\nvalue 4:   bool: true\nvalue 5:   int16: -42\nvalue 6:   uint16: 60000\nvalue 7:   int32: -44\nvalue 8:   uint32: 100000\nvalue 9:   int64: -34359738368\nvalue 10:   uint64: 18446744073709551615\nvalue 11:   double: 42.500000\n")
FAIL
GTester: last random seed: R02S36998fe438f8e8de9c07429157c726fb
/bin/sh: line 1: 22001 Terminated              MALLOC_CHECK_=2 MALLOC_PERTURB_=$((${RANDOM:-256} % 256)) ../../glib/gtester --verbose io-stream actions memory-input-stream memory-output-stream readwrite g-file g-file-info converter-stream data-input-stream data-output-stream g-icon buffered-input-stream buffered-output-stream sleepy-stream filter-streams volumemonitor simple-async-result srvtarget contexts gsettings gschema-compile async-close-output-stream gdbus-addresses network-address gdbus-message socket pollable gdbus-connection gdbus-connection-slow gdbus-names gdbus-proxy gdbus-proxy-well-known-name gdbus-introspection gdbus-threading gdbus-export gdbus-error gdbus-peer gdbus-exit-on-close gdbus-non-socket gdbus-bz627724 appinfo contenttype file live-g-file desktop-app-info unix-fd unix-streams gapplication gdbus-serialization
make[4]: *** [test-nonrecursive] Error 143

Expected Results:  
no error running test

I will post output of 'emerge {-pqv,--info} =dev-libs/glib-2.28.6' and emerge log soon




Comment 1


Mehrunes Dagon





          2011-05-24 08:19:42 UTC
        

Created attachment 274459 [details]
3 files promised in post no. 1

Since bugzilla disallows me to post more than 1 file, I pack all required files together




Comment 2


Gilles Dartiguelongue (RETIRED)






          2011-05-24 20:56:26 UTC
        

Just attach the files one by one. And when attaching compressed archives, please attach using widely available compression formats, gz, bzip2 or lzma/xz.




Comment 3


Jeroen Roovers (RETIRED)






          2011-05-26 19:18:11 UTC
        

(In reply to comment #1)
> Created attachment 274459 [details]
> 3 files promised in post no. 1
> 
> Since bugzilla disallows me to post more than 1 file, I pack all required files
> together

Er, it doesn't disallow that.




Comment 4


Pacho Ramos






          2011-06-04 13:56:29 UTC
        

Are you able to reproduce this with 2.28.7?




Comment 5


Pacho Ramos






          2011-06-06 15:59:52 UTC
        

Cannot reproduce with 2.28.8 neither




Comment 6


Mehrunes Dagon





          2011-06-18 09:31:44 UTC
        

Created attachment 277469 [details]
glib-2.28.8 fails, too. Could this be due to the fact that my /tmp is of type tmpfs?

Sorry for long pause.

Concerning attaching more than 1 file, if bugzilla is all right, then it is a problem with my icecat browser

emerge --info glib follows

Portage 2.1.9.42 (default/linux/amd64/10.0/desktop, gcc-4.3.4, glibc-2.11.2-r3, 2.6.36-gentoo-r5 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.36-gentoo-r5-x86_64-AMD_Phenom-tm-_II_X4_940_Processor-with-gentoo-1.12.11.1
Timestamp of tree: Fri, 17 Jun 2011 23:00:01 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.10
dev-lang/python:     2.4.6, 2.5.4-r4, 2.6.6-r1::sage-on-gentoo, 2.7.1-r1::sage-on-gentoo
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.5, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11.1
sys-devel/binutils:  2.18-r3, 2.20.1-r1
sys-devel/gcc:       3.4.6-r2, 4.1.2, 4.3.2-r3, 4.3.4, 4.4.3-r2, 4.4.5, 4.5.2
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
sys-kernel/linux-headers: 2.6.30-r1
sys-libs/glibc:      2.11.2-r3
virtual/os-headers:  2.6.30-r1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=native -pipe"
DISTDIR="/usr/distfiles"
FEATURES="assume-digests binpkg-logs collision-protect distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict test unknown-features-warn unmerge-logs unmerge-orphans"
FFLAGS=""
GENTOO_MIRRORS="http://mirror.netcologne.de/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo rsync://mirror.netcologne.de/gentoo/ ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.netcologne.de/gentoo/"
LANG="en_GB.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en_GB"
MAKEOPTS="--jobs --load-average=12"
PKGDIR="/usr/portage/packages"
PORTAGE_COMPRESS="lzma"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp/"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise /usr/local/portage/layman/sage-on-gentoo /usr/local/portage/layman/oss-overlay /usr/local/portage/layman/pythonhead /usr/local/portage/layman/science /usr/local/portage/general.overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 7zip X a52 aac aalib acpi airplay alsa amd64 ao asf bdf berkdb branding bzip2 cairo cdda cdr cli crypt cue custom-cflags cxx dbus djbfft dri dts dvd dvdr emboss encode exif fam ffmpeg firefox flac fortran gdbm gdu gif gpm gtk iconv ipp jpeg kpathsea latex lcms libcaca libnotify lzma mac mad mkl mmap mmx mng modules mp3 mp4 mpeg mudflap multilib musepack ncurses nophonehome nptl nptlonly ofa ogg opengl openmp pam pango pcre pdf perl png ppds pppd python qt3support qt4 readline sdl session sndfile speex spell sse sse2 ssl startup-notification static-libs svg sysfs tcpd theora threads tiff truetype udev umfpack unicode usb utf vcd vdpau vocoder vorbis wavpack webdav-neon webdav-serf x264 xcb xml xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="braindump flow karbon kexi kpresenter krita tables words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia nouveau" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

dev-libs/glib-2.24.2 was built with the following:
USE="fam (multilib) test -debug -doc (-selinux) -xattr"
CFLAGS="-O3 -march=native -pipe"
CXXFLAGS="-O3 -march=native -pipe"




Comment 7


Pacho Ramos






          2011-06-18 11:31:21 UTC
        

Or maybe it's due you using in the past "-O3" instead of "-O2" on your system as I can see in emerge --info... maybe "emerge -e world" with "safe" flags could help :-/




Comment 8


Mehrunes Dagon





          2011-06-21 03:41:16 UTC
        

(In reply to comment #7)
> Or maybe it's due you using in the past "-O3" instead of "-O2" on your system
> as I can see in emerge --info... maybe "emerge -e world" with "safe" flags
> could help :-/

on the good old days, before gcc developers went crazy, -O3 was perfectly safe

'emerge -e world' might bring lots of unpleasant surpsrises, break things that work for me now and increase count of bugs reported by me. I don't repair what is not broken. Sorry, no global updates.




Comment 9


Gilles Dartiguelongue (RETIRED)






          2011-06-21 07:14:26 UTC
        

gnome team (as well as gnome usptream) does not support any optimization level above -O2.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

