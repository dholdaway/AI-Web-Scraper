Title: 828782 – >=x11-drivers/nvidia-drivers-495.44: Random OpenGL freeze causes KWin to disable compositing
URL: https://bugs.gentoo.org/show_bug.cgi?id=828782

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 828782
>=x11-drivers/nvidia-drivers-495.44: Random OpenGL freeze causes KWin to disable compositing
Last modified: 2022-01-12 03:11:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 828782 
      - >=x11-drivers/nvidia-drivers-495.44: Random OpenGL freeze causes KWin to disable compositing


Summary:
>=x11-drivers/nvidia-drivers-495.44: Random OpenGL freeze causes KWin to disa...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Ionen Wolkens








URL:



https://bugs.kde.org/show_bug.cgi?id=...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-12-10 12:15 UTC by Samuel Bernardo





      Modified:
    
2022-01-12 03:11 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



soap









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Samuel Bernardo





          2021-12-10 12:15:59 UTC
        

Created bug on bugs.kde.org:
https://bugs.kde.org/show_bug.cgi?id=446779




Comment 1


Andreas Sturmlechner






          2021-12-10 12:21:24 UTC
        

First suspect as always: nvidia-drivers. Did you try other versions? Did it happen with previous driver version?




Comment 2


Samuel Bernardo





          2021-12-11 01:35:30 UTC
        

Only detected this behavior with latest nvidia-drivers, but since there was also an update for kwin, I'm in doubt of the origin of this issue.




Comment 3


Samuel Bernardo





          2021-12-11 01:40:08 UTC
        

This happens randomly and normally when I login immediately after the boot.
Haven't checked yet the downgrade to previous driver version. I can't go back to stable version because I need to use nvidia-cuda-toolkit that depends on nvidia-drivers latest version.




Comment 4


Andreas Sturmlechner






          2021-12-11 09:28:41 UTC
        

Doubtful in a .4 release, plus no such issues reported by users other than those with Nvidia inside, but confirmed by other Nvidia users upstream.




Comment 5


Andreas Sturmlechner






          2021-12-11 11:34:53 UTC
        

Quote from upstream bug:
> I can confirm this issue with a GTX 1070. This only happens with the latest
> "new feature branch" nvidia driver (495.44). With the current "production
> branch" version (470.86), it never fails.




Comment 6


Ionen Wolkens






          2021-12-11 12:55:53 UTC
        

(In reply to Samuel Bernardo from comment #3)
> This happens randomly and normally when I login immediately after the boot.
> Haven't checked yet the downgrade to previous driver version. I can't go
> back to stable version because I need to use nvidia-cuda-toolkit that
> depends on nvidia-drivers latest version.
Latest nvidia-cuda-toolkit no longer depends on 495.xx, if affected you should be able to use stable 470.xx just fine.




Comment 7


Eric F. GARIOUD





          2021-12-11 12:56:25 UTC
        

When this happens, could you please find in kwinrc the value given to OpenGLIsUnsafe.
My knowledge is certainly outdated but as I can remember, the setting of OpenGLIsUnsafe to false follows a decision taken after a given timeout.
Could then well be that, with latest NVIDIA drivers, the timeout is set a bit too low.




Comment 8


Andreas Sturmlechner






          2021-12-16 13:53:32 UTC
        

Feel free to re-add kde proj whenever there is something we can actually do.




Comment 9


Samuel Bernardo





          2022-01-04 13:32:10 UTC
        

(In reply to Eric F. GARIOUD from comment #7)
> When this happens, could you please find in kwinrc the value given to
> OpenGLIsUnsafe.
> My knowledge is certainly outdated but as I can remember, the setting of
> OpenGLIsUnsafe to false follows a decision taken after a given timeout.
> Could then well be that, with latest NVIDIA drivers, the timeout is set a
> bit too low.

Very interesting, will try that next time.
But since I upgraded nvidia-drivers to 495.46-r10 the crash didn't happen again, at least until now.




Comment 10


Ionen Wolkens






          2022-01-12 03:10:23 UTC
        

Is this still happening with nvidia-drivers-510.39.01?

Not that I think there's anything I can do about this either.




Comment 11


Ionen Wolkens






          2022-01-12 03:11:41 UTC
        

(In reply to Samuel Bernardo from comment #9)
> But since I upgraded nvidia-drivers to 495.46-r10 the crash didn't happen
> again, at least until now.

Well, then again given this I guess it's already solved?

Personally wasn't able to reproduce.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

