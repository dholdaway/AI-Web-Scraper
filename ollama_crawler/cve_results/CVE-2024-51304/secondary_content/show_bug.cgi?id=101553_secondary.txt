Title: 101553 – Unable to link wine-20050725 on amd64
URL: https://bugs.gentoo.org/show_bug.cgi?id=101553

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 101553
Unable to link wine-20050725 on amd64
Last modified: 2006-01-23 05:20:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 101553 
      - Unable to link wine-20050725 on amd64


Summary:
Unable to link wine-20050725 on amd64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

109347

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-08-06 08:19 UTC by Aris Basic





      Modified:
    
2006-01-23 05:20 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



laplandersan
wine









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Aris Basic





          2005-08-06 08:19:54 UTC
        

wine gets compiled with -m32 however it just tries to link against 64bit libz
instead with 32bit libz.


...
x86_64-pc-linux-gnu-gcc -c -I. -I. -I../include -I../include
-I/usr/include/freetype2 -DLEX_OUTPUT_ROOT="\"lex.yy\""  -Wall -pipe
-mpreferred-stack-boundary=2 -fno-strict-aliasing -gstabs+ -Wpointer-arith  -O2
-march=athlon64 -pipe -m32 -D__i386__ -o sfnt2fnt.o sfnt2fnt.c
x86_64-pc-linux-gnu-gcc -O2 -march=athlon64 -pipe -m32 -D__i386__ -o sfnt2fnt
sfnt2fnt.o -L../libs/unicode -lwine_unicode -L../libs/port -lwine_port
-lfreetype -lz
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/../../../../x86_64-pc-linux-gnu/bin/ld:
skipping incompatible /lib/libz.so when searching for /lib/libz.so
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/../../../../x86_64-pc-linux-gnu/bin/ld:
cannot find /lib/libz.so
collect2: ld returned 1 exit status
make[1]: *** [sfnt2fnt] Error 1
make[1]: Leaving directory `/var/tmp/portage/wine-20050725/work/wine-20050725/tools'
make: *** [tools] Error 2

!!! ERROR: app-emulation/wine-20050725 failed.
!!! Function src_compile, Line 112, Exitcode 2
!!! depend
!!! If you need support, post the topmost build error, NOT this status message.


Reproducible: Always
Steps to Reproduce:
ACCEPT_KEYWORDS="~amd64" emerge wine




Comment 1


Jakub Moc (RETIRED)






          2005-08-06 08:22:58 UTC
        



*** This bug has been marked as a duplicate of 100180 ***




Comment 2


Aris Basic





          2005-08-06 08:32:48 UTC
        

why isnt that change in this ebuild ?
wine-20050725 ?






Comment 3


Jakub Moc (RETIRED)






          2005-08-06 08:47:54 UTC
        

(In reply to comment #2)
> why isnt that change in this ebuild ?
> wine-20050725 ?
> 
> 

emerge sync before reporting bugs.

*** This bug has been marked as a duplicate of 100180 ***




Comment 4


Aris Basic





          2005-08-06 10:34:52 UTC
        

thank you for reminding me (not like i havnt done it before reporting a bug) but 
that did not help.




Comment 5


Aris Basic





          2005-08-06 10:39:01 UTC
        

btw im trying to compile it with gcc 3.4.4 (maybe that makes the difference)




Comment 6


SpanKY






          2005-08-06 13:13:57 UTC
        

settle down

regardless, you've still neglected to post `emerge info`




Comment 7


Aris Basic





          2005-08-06 13:20:54 UTC
        

Portage 2.0.51.22-r2 (default-linux/amd64/2004.3, gcc-3.4.4, glibc-2.3.5-r1,
2.6.11-gentoo-r4 x86_64)
=================================================================
System uname: 2.6.11-gentoo-r4 x86_64 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System version 1.6.13
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.3
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=athlon64 -fomit-frame-pointer -momit-leaf-frame-pointer -fweb
-frename-registers -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/tomcat5 /usr//lib/mozilla/defaults/pref
/usr/kde/2/share/config /usr/kde/3.2/share/config /usr/kde/3.3/env
/usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -march=athlon64 -fomit-frame-pointer -momit-leaf-frame-pointer
-fweb -frename-registers -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://open-systems.ufl.edu/mirrors/gentoo
http://mirror.tucdemonic.org/gentoo/ ftp://mirrors.tds.net/gentoo
http://adelie.polymtl.ca/"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac aalib acl acpi adns alsa apache2 avi bash-completion berkdb
bitmap-fonts bonobo cdda cdparanoia cdr crypt cups curl daap dvd dvdr dvdread
eds encode esd faad fam ffmpeg flac foomaticdb fortran freetype gcj gd gdbm gif
gimpprint gmail gmailtimestamps gnome gnutls gstreamer gtk gtk2 gtkhtml guile
hal icq imagemagick imap imlib ipv6 java joystick jp2k jpeg jpeg2k junit kde
kdeenablefinal libwww lzw lzw-tiff mad matroska mikmod mime mng mod motif
mozdevelop mozilla mozsvg mozxmlterm mp3 mpeg mplayer msn multilib musicbrainz
ncurses net network nls no_wxgtk1 nptl nptlonly nvidia odbc ogg oggvorbis opengl
oscar pam pdflib perl png postgres python qt quicktime rar readline rtc ruby
samba sasl scanner screen sdl slang speex spell sqlite ssl stream subtitles svg
tcltk tcpd tetex theora threads tiff truetype truetype-fonts type1-fonts unicode
usb userlocales v4l vcd vlm vorbis vorbisi wmf xanim xine xinerama xml xml2 xmms
xpm xprint xv xvid xvmc yahoo zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS





Comment 8


SpanKY






          2005-08-06 13:37:00 UTC
        

what does `grep lib32 /etc/ld.so.conf` show ?

how about `ls -ld /lib32 /usr/lib32`




Comment 9


Aris Basic





          2005-08-06 14:13:32 UTC
        

-=[root@amon-ra]=->grep lib32 /etc/ld.so.conf
/usr/lib32/opengl/nvidia/lib
/lib32
/usr/lib32
/usr/local/lib32
/usr/qt/3/lib32
/usr/kde/3.4/lib32


-=[root@amon-ra]=->ls -ld /lib32 /usr/lib32
lrwxrwxrwx  1 root root 18 Jul 18 18:16 /lib32 -> emul/linux/x86/lib
lrwxrwxrwx  1 root root 25 Jul 18 18:16 /usr/lib32 -> ../emul/linux/x86/usr/lib


/lib32 contains libz.so (32bit version)

if you need more info i have no problem providing it




Comment 10


splite





          2005-09-09 08:08:24 UTC
        

Check /usr/lib32/libz.so.  It may contain "GROUP ( /lib/libz.so )" instead of
the correct "GROUP ( /lib32/libz.so )".




Comment 11


SpanKY






          2005-10-03 15:35:29 UTC
        

does wine-20050930 work ?




Comment 12


SpanKY






          2005-10-13 18:53:53 UTC
        

everyone with this problem is using an amd64 2004.3 profile right ?




Comment 13


SpanKY






          2005-10-15 16:10:28 UTC
        

*** Bug 109347 has been marked as a duplicate of this bug. ***




Comment 14


Max Loparev





          2005-10-16 01:47:31 UTC
        

SpanKY I repeat, I CAN BUILD wine-20050725 WITHOUT ANY PROBLEM, but I can't
build wine-20050930. Now please read summary of this bug and clarify to me why
do you think my bug report is duplication of this bug report?




Comment 15


SpanKY






          2005-10-16 03:43:56 UTC
        

why dont you learn to chill tfo

i can re-open it and dupe it of Bug 108052 if you like, either way your issue is
fixed in cvs already




Comment 16


Max Loparev





          2005-10-16 04:07:05 UTC
        

(In reply to comment #15)
> i can re-open it and dupe it of Bug 108052 if you like, either way your issue is
> fixed in cvs already
it would be great if you did this from the start. For now, it doesn't matter
because bug you pointed contains solution for my problem.

Sorry, can't teach myself to search in closed bugs :)





Comment 17


Simon Stelling (RETIRED)






          2006-01-23 05:20:54 UTC
        

if anybody is still experiencing this problem with wine-0.9.5-r1 (or 0.9.6) and a 2005.x profile feel free to reopen









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

