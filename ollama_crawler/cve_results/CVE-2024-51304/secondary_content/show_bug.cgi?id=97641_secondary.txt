Title: 97641 – Can't get pear working under mod_php 4.3.11
URL: https://bugs.gentoo.org/show_bug.cgi?id=97641

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 97641
Can't get pear working under mod_php 4.3.11
Last modified: 2005-07-02 00:37:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 97641 
      - Can't get pear working under mod_php 4.3.11


Summary:
Can't get pear working under mod_php 4.3.11
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-01 11:34 UTC by Denny Schierz





      Modified:
    
2005-07-02 00:37 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Denny Schierz





          2005-07-01 11:34:53 UTC
        

since the last update from pear/apache/mod_php etc, the pear installation for
mod_php is broken: Copy from my mails:

<-------- Mail 1 -------->

i really have problems to get pear running again, after an emerge -Du
world, on my apache2 mod_php 4.3.11 system.

horde says, that i have no pear installed	

Configuration:
==============
PEAR executables directory     bin_dir         /usr/bin
PEAR documentation directory   doc_dir         /usr/lib/php/
PHP extension directory
ext_dir         /usr/lib/php/extensions/no-debug-non-zts-20020429
PEAR directory                 php_dir         /usr/lib/php/
PEAR Installer cache directory cache_dir       /tmp/pear/cache
PEAR data directory            data_dir        /usr/lib/php/
PHP CLI/CGI binary             php_bin         /usr/bin/php
PEAR test directory            test_dir        /usr/lib/php/
Cache TimeToLive               cache_ttl       3600
Preferred Package State        preferred_state stable
Unix file mask                 umask           22
Debug Log Level                verbose         1
HTTP Proxy Server Address      http_proxy      <not set>
PEAR server                    master_server   pear.php.net
PEAR password (for             password        <not set>
maintainers)
Signature Handling Program     sig_bin         /usr/bin/gpg
Signature Key Directory        sig_keydir      /etc/pearkeys
Signature Key Id               sig_keyid       <not set>
Package Signature Type         sig_type        gpg
PEAR username (for             username        <not set>
maintainers)

php 4.3.11 has found my pear installation, but mod_php does not. I
tested nearly everything. I made also packages from my working system
and overwritten my broken system. But nothing  :-(  So it seems, that it
is not only a php problem.

http://cst-systemhaus.de/horde/test.php

<-------- Mail 2 -------->

Wendall Cada schrieb:

>> Make include_path is set in php.ini to /usr/lib/php. For mod_php, this
>> will be /etc/php/apache2-php4/php.ini


its allready done, in all (!) php.ini's:

include_path = ".:/usr/lib/php"

>> There was a problem a while back with one of the portage libs where all
>> the pear files were placed in /usr/lib/php/php which effectively broke
>> everything. If this appears to be the case for you, emerge sync and
>> remerge mod_php. I have also suffered from the ebuild
>> removing /usr/lib/php/PEAR.php If this file is missing, you'll need to
>> grab a copy from pear.php.net.

ls  /usr/lib/php/

Archive      Cache.php  DB.php    File.php  Log       Net
    PEAR      System      VFS.php     adodb  docs         test
Archive_Tar  Console    Date      HTML      Log.php   Net_NNTP
    PEAR.php  System.php  XML         build  pearcmd.php  tests
Auth         Crypt      Date.php  HTTP      Mail
Net_UserAgent_Detect  Pager     Text        XML_Parser  data   php
Cache        DB         File      HTTP.php  Mail.php  OS
    SOAP      VFS         XML_RPC     doc    phplot

i had this problem too, with /usr/lib/php/php. i killed my
/etc/pear.conf and setup a new one, from my working syste. I remerged
mod_php more than ten times.

<--------- END --------->

i allready did "pear upgrad-all". the cli version from php, doesn't hav problems
with pear, only mod_php.

Reproducible: Always
Steps to Reproduce:
1.
2.
3.



Expected Results:  
that mod_php find pear

Portage 2.0.51.19 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.4.20041102-r1, 2.4.28-grsec-2.1.0 i686)
=================================================================
System uname: 2.4.28-grsec-2.1.0 i686 Intel(R) Celeron(R) CPU 2.00GHz
Gentoo Base System version 1.6.12
Python:              dev-lang/python-2.2.3-r5,dev-lang/python-2.3.5 [2.3.5 (#1,
May  2 2005, 01:52:55)]
dev-lang/python:     2.2.3-r5, 2.3.5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.5, 1.8.5-r3, 1.7.9-r1, 1.6.3, 1.4_p6, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O3 -march=pentium4 -funroll-loops -fprefetch-loop-arrays -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/bind /var/qmail/control /var/spool/jabber/"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=pentium4 -funroll-loops -fprefetch-loop-arrays -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://backup/gentoo/
ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 PEAR apache2 berkdb bitmap-fonts crypt curl emboss foomaticdb fortran
gd gd-external gdbm gif gtk2 imagemagick imap innodb jpeg libwww mad maildir
mcal mp3 mysql ncurses nls nptl ntplonly pam pam-mysql pdflib pear perl php png
python readline sasl sdl session slang snmp sse ssl tcpd tiff truetype
truetype-fonts type1-fonts vhost xml xml2 zlib userland_GNU kernel_linux
elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Denny Schierz





          2005-07-02 00:37:43 UTC
        

After a very long night, i found a solution (workaround). All my vhosts has a open_base_dir restriction 
in there configs. I had to add /usr/lib/php:

php_admin_value open_basedir "/usr/lib/php: ..."

Now, horde finds PEAR, but why? It was never (!) needed before.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

