Title: 258503 – mail-mta/postfix-2.4.10 2.5.5 2.5.6 fail to emerge due to "missing" libssl.so
URL: https://bugs.gentoo.org/show_bug.cgi?id=258503

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 258503
mail-mta/postfix-2.4.10 2.5.5 2.5.6 fail to emerge due to "missing" libssl.so
Last modified: 2009-02-13 21:58:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 258503 
      - mail-mta/postfix-2.4.10 2.5.5 2.5.6 fail to emerge due to "missing" libssl.so


Summary:
mail-mta/postfix-2.4.10 2.5.5 2.5.6 fail to emerge due to "missing" libssl.so
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-02-10 21:15 UTC by azure





      Modified:
    
2009-02-13 21:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



loki_val









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


azure





          2009-02-10 21:15:35 UTC
        

>>> Source compiled.
>>> Test phase [not enabled]: mail-mta/postfix-2.5.6

>>> Install postfix-2.5.6 into /var/tmp/portage/mail-mta/postfix-2.5.6/image/ category mail-mta
bin/postconf: error while loading shared libraries: libssl.so.0.9.7: cannot open shared object file: No such file or directory

...[same shit many times]....

postfix-install: Error: "" should be "no" or an absolute path name.
 * 
 * ERROR: mail-mta/postfix-2.5.6 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_install
 *             environment, line 2805:  Called die
 * The specific snippet of code:
 *       /bin/sh postfix-install -non-interactive install_root="${D}" config_directory="/usr/share/doc/${PF}/defaults" readme_directory="/usr/share/doc/${PF}/readme" || die "postfix-install failed";

ldd /var/tmp/portage/mail-mta/postfix-2.5.6/work/postfix-2.5.6/bin/postconf 
	........skipped..........
	libssl.so.0.9.8 => /usr/lib/libssl.so.0.9.8 (0xb7a5c000)
	libcrypto.so.0.9.8 => /usr/lib/libcrypto.so.0.9.8 (0xb790f000)
	libssl.so.0.9.7 => not found
	libcrypto.so.0.9.7 => not found
	........skipped...........

either it is build with USE='ssl' or USE='-ssl', result the same: postconf is linked against unexisting library (_AND_ existing too)
Something's really wrong with it

Reproducible: Always

Steps to Reproduce:
1. emerge it


Actual Results:  
postinst cirquit failed, postconf (part of postfix) is linked against unexisting libssl.so.0.9.7, and emerge fails :(

Expected Results:  
:)

# pkg-config --modversion openssl
0.9.8j




Comment 1


Peter Alfredsen (RETIRED)






          2009-02-10 21:52:59 UTC
        

Please make sure this is not something from /usr/local or somewhere else that gets linked in by accident:
find /usr -name 'libssl.so.0.9.7'





Comment 2


Peter Alfredsen (RETIRED)






          2009-02-12 00:09:05 UTC
        

Re-open when appropriate





Comment 3


azure





          2009-02-12 19:30:47 UTC
        

I made a symlink of neede library that points to existing (latest version of libssl) to make postfix emerge. It was a temporary measure to make it work, and it helped.
Now I followed your instructions:
$ find /usr -name 'libssl.so.0.9.7'
/usr/lib/libssl.so.0.9.7
$ ls -l /usr/lib/libssl.so.0.9.7 
lrwxrwxrwx 1 root root 24 2009-02-10 08:46 /usr/lib/libssl.so.0.9.7 -> /usr/lib/libssl.so.0.9.8

So, there is NO any other libssl exept of 0.9.8, but postfix is linked against 0.9.7 AND 0.9.8
It is so weird, I just don't understand how can it be?




Comment 4


Peter Alfredsen (RETIRED)






          2009-02-12 22:33:07 UTC
        

I can tell you this: They must exist somewhere on your system or they would not have been linked in.




Comment 5


azure





          2009-02-13 21:58:05 UTC
        

(In reply to comment #4)
> I can tell you this: They must exist somewhere on your system or they would not
> have been linked in.
> 

I'm 100% sure, there was no such file or symlink anywhere before emerging postfix and there was no such file or symlink after emerge fail. the symlink was made by me to make it emerge somehow.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

