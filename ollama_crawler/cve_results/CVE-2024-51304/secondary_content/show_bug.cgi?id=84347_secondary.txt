Title: 84347 – Identify and resolve any issues gstreamer and plugins has with hardened
URL: https://bugs.gentoo.org/show_bug.cgi?id=84347

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 84347
Identify and resolve any issues gstreamer and plugins has with hardened
Last modified: 2007-03-14 01:34:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 84347 
      - Identify and resolve any issues gstreamer and plugins has with hardened


Summary:
Identify and resolve any issues gstreamer and plugins has with hardened
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        All
      







Importance:
      
High
       normal
      


Assignee:

GStreamer package maintainers








URL:







Whiteboard:




Keywords:

Tracker







Depends on:







Blocks:









 





      Reported:
    
2005-03-06 15:08 UTC by Zaheer Abbas Merali (RETIRED)





      Modified:
    
2007-03-14 01:34 UTC
      (History)
    




          CC List:
        

8 
          users
          
            (show)
          



asl
basic
castan.o
gad.kadosh
gentoo-a7x
iamtheweakestlink
ikelos
nordom









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Zaheer Abbas Merali (RETIRED)






          2005-03-06 15:08:57 UTC
        

There seems to be issues with hardened and gstreamer.  This is a tracker bug.




Comment 1


gad.kadosh





          2005-03-13 21:45:17 UTC
        

I have issues with some gstreamer plugins when I compile them with hardened gcc. Changing the gcc-config to vanilla specs gcc and recompiling the problematic plugin fixes the problem. The problems that I encountered were with: gst-plugins-alsa, gst-plugins-xvideo. I probably haven't tested many other plugins though.

This was discussed already in bug: #70631 and solutions were suggested by the hardened herd...




Comment 2


gad.kadosh





          2005-03-13 22:28:45 UTC
        

another plugin has a problem: goom, which is part of the gst-plugins package.




Comment 3


Zaheer Abbas Merali (RETIRED)






          2005-03-14 14:13:34 UTC
        

After going through with a user on irc, I found the following:

plugins that are fully self contained work fine in hardened
plugins that link to other gst libs (eg alsa) have problems resolving symbols even though ldd shows that the relevant libs are linked




Comment 4


gad.kadosh





          2005-03-31 12:46:14 UTC
        

If this is indeed taken care of in the next gstreamer branch, maybe it is possible in the meanwhile to have the ebuilds disable hardened and use vanilla specs for the broken plugins? through a hardened USE flag... 




Comment 5


Mike Auty (RETIRED)






          2005-05-21 02:24:30 UTC
        

I've suffered exactly the same symptoms as specified in Bug 81512.  Having
ensured that I've removed and re-prelinked without the /usr/lib/gstreamer
directory, I can only assume it's because I've got hardened enabled now.

The error message states that the registry is broken (but a recreation of the
registry doesn't help) or that the /usr/lib/gstreamer/libgst<blah> isn't there
(which upon checking it always is).

Hopefully this is the right place to locate the exact problem and perhaps get a
patch upstream.  I'm happy to test out as many different experimental builds as
people can produce and return any debugging results that may be required to try
and fix this.  I've included my emerge info in case it's of any use.  I hope we
can get this fixed soon...

Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.4.3-20050110,
glibc-2.3.5-r0, 2.6.12-rc2 i686)
=================================================================
System uname: 2.6.12-rc2 i686 AMD Athlon(tm) 64 Processor 3400+
Gentoo Base System version 1.6.12
ccache version 2.4 [disabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.8
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16
sys-devel/libtool:   1.5.18
virtual/os-headers:  2.6.11
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlays/personal"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X aalib acl acpi adns alsa avi bash-completion berkdb
bitmap-fonts cairo ccache cdr cjk client crypt cups dlloader dvd dvdr eds emboss
encode fam flac foomaticdb fortran gd gdbm gif glitz gnome gnutls gstreamer gtk
gtk2 gtkhtml hal hardened imagemagick imap imlib java jpeg junit libg++ libwww
mad mikmod mime mmx mmxext motif mozilla mozsvg mp3 mpeg ncurses nls nptl
nptlonly nvidia ogg oggvorbis opengl pam pdflib perl pic pie png postgres python
quicktime readline real sdl server snmp spell sse sse2 ssl svg svga tcpd theora
tiff truetype truetype-fonts type1-fonts unicode vorbis win32codecs xine xml2
xrandr xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS





Comment 6


José Alexandre Antunes Faria





          2005-06-12 04:19:47 UTC
        

I agree, the ebuilds on hardened should change the profile as there is no direct
way for a guy to know what have to be compiled with what profiles. Because the
problem can show in a very indirect way.




Comment 7


Mike Auty (RETIRED)






          2005-07-02 15:26:27 UTC
        

Ok, well, it's been a while, and I've just seen version 0.8.10 plugins come and
go, and I was wondering what was happening with this bug?  It appears it still
has yet to be fixed upstream in the branch, and I was wondering if anyone here
has the know-how/expertise to figure out what's causing it to go wrong?

Most noticably I haven't been able to find an official gstreamer bug for it, so
could someone please point me to it, or if it doesn't exist could someone from
the gstreamer herd please report it to them?  Also, since another version has
gone by and it's still affecting people (most noticably the gnome volume applet
breaks badly) is there any chance that the ebuild could be modified to drop back
to the vanilla specs, or simply filter out the offending flags if that's all it is?

Any help to get this thing solved would be appreciated.  Thanks very much,

Mike  5:)




Comment 8


Carl Hudkins





          2005-08-22 12:06:20 UTC
        

I just built gstreamer and gst-plugins, 0.8.10, and I can confirm that using the
hardened gcc profile (even with CFLAGS="" LDFLAGS="" as suggested in the forums)
I could not get a working "adder".  Then I did this:

gcc-config -f powerpc-unknown-linux-gnu-3.4.4-vanilla && emerge -v --oneshot
gstreamer gst-plugins && gcc-config -f powerpc-unknown-linux-gnu-3.4.4

(Rebuilt the other plugins also, while troubleshooting amarok.)

I have now confirmed that gstreamer will work; it will even produce sound.




Comment 9


Jakub Moc (RETIRED)






          2007-03-14 01:34:10 UTC
        

Stale dead bug.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

