Title: 264287 – dev-tex/mplib: possible circular dependency
URL: https://bugs.gentoo.org/show_bug.cgi?id=264287

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 264287
dev-tex/mplib: possible circular dependency
Last modified: 2009-04-05 16:47:47 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 264287 
      - dev-tex/mplib: possible circular dependency


Summary:
dev-tex/mplib: possible circular dependency
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

TeX project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-03-30 13:31 UTC by Rafał Mużyło





      Modified:
    
2009-04-05 16:47 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



quantum_22









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rafał Mużyło





          2009-03-30 13:31:18 UTC
        

It's not my bug, so I will not be able to provide any info.
This bug is created as a result of this thread:
http://forums.gentoo.org/viewtopic-t-748898-start-0-postdays-0-postorder-asc-highlight-mplib.html
mplib's docs confirm, that it does need a local copy of ctangle.
I wonder how it got triggered, I upgraded to texlive, while
it was still masked - to trigger this, a fresh install is probably needed.




Comment 1


Diederik Huys





          2009-03-31 20:37:04 UTC
        

Hello, the error was posted by me on the forum ;-)

Since mplib is also part of the problem, I'll tried to compile it manually:

.....

config.status: executing depfiles commands
make -j3 KPSESRCDIR=/usr/include/kpathsea KPSELIB=-lkpathsea -j1
make  all-am
make[1]: Entering directory `/var/tmp/portage/dev-tex/mplib-1.110/work/mplib-beta-1.110/src/texk/web2c/mpdir'
/bin/sh ./libtool --tag=CC   --mode=compile x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I.    -I. -I../.. -I/usr/include/kpathsea/.. -I/usr/include/kpathsea -march=athlon-fx -O2 -pipe -fomit-frame-pointer -MT avl.lo -MD -MP -MF .deps/avl.Tpo -c -o avl.lo avl.c
mkdir .libs
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../.. -I/usr/include/kpathsea/.. -I/usr/include/kpathsea -march=athlon-fx -O2 -pipe -fomit-frame-pointer -MT avl.lo -MD -MP -MF .deps/avl.Tpo -c avl.c  -fPIC -DPIC -o .libs/avl.o
 x86_64-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I../.. -I/usr/include/kpathsea/.. -I/usr/include/kpathsea -march=athlon-fx -O2 -pipe -fomit-frame-pointer -MT avl.lo -MD -MP -MF .deps/avl.Tpo -c avl.c -o avl.o >/dev/null 2>&1
mv -f .deps/avl.Tpo .deps/avl.Plo
ctangle psout.w psout.c
make[1]: ctangle: Command not found
make[1]: *** [psout.c] Error 127
make[1]: Leaving directory `/var/tmp/portage/dev-tex/mplib-1.110/work/mplib-beta-1.110/src/texk/web2c/mpdir'
make: *** [all] Error 2
 *
 * ERROR: dev-tex/mplib-1.110 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 1112:  Called die
 * The specific snippet of code:
 *       emake KPSESRCDIR=/usr/include/kpathsea KPSELIB=-lkpathsea -j1 || die "failed to build mplib"
 *  The die message:
 *   failed to build mplib
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-tex/mplib-1.110/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-tex/mplib-1.110/temp/environment'.
 *

>>> Failed to emerge dev-tex/mplib-1.110, Log file:

>>>  '/var/tmp/portage/dev-tex/mplib-1.110/temp/build.log'

 * Messages for package dev-tex/mplib-1.110:

 *
 * ERROR: dev-tex/mplib-1.110 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 1112:  Called die
 * The specific snippet of code:
 *       emake KPSESRCDIR=/usr/include/kpathsea KPSELIB=-lkpathsea -j1 || die "failed to build mplib"
 *  The die message:
 *   failed to build mplib
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-tex/mplib-1.110/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-tex/mplib-1.110/temp/environment'.
 *





Comment 2


Alexis Ballier






          2009-04-04 14:56:35 UTC
        

I fail to see what's wrong here:

texlive pdepends on luatex
luatex depends on mplib
mplib depends on tex-base
tex-base depends on tl-core


the correct merge order shall be:

tl-core
tex-base
mplib
luatex


The forum post linked here doesn't list tex-base as emerge -pv texlive but lists tl-core which cant be correct. If you have broken your system by putting tex-base in package.provided or emerging -O1 it then you're on your own and portage has no real way to know what to do. Please reopen if you think this analysis is wrong and with the output of emerge -pv texlive and emerge -pv tex-base.




Comment 3


Diederik Huys





          2009-04-05 16:47:47 UTC
        

Problem solved!! I found package.provided still contained app-text/tetex-11.84-r3. This was from the days when texlive was still beta.











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

