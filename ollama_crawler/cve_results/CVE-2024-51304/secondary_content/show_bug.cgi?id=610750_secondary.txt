Title: 610750 – media-libs/xine-lib-1.2.6-r2 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=610750

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 610750
media-libs/xine-lib-1.2.6-r2 fails to build
Last modified: 2018-01-07 18:21:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 610750 
      - media-libs/xine-lib-1.2.6-r2 fails to build


Summary:
media-libs/xine-lib-1.2.6-r2 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-02-23 23:42 UTC by Nico Baggus





      Modified:
    
2018-01-07 18:21 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



phi









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (build.log,400.55 KB,
                text/x-log)

            
2017-02-23 23:42 UTC,

            Nico Baggus




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Nico Baggus





          2017-02-23 23:42:23 UTC
        

Created attachment 464938 [details]
Build log

frame.cc:1344:9: warning: ‘AVStream::codec’ is deprecated (declared at /usr/include/libavformat/avformat.h:893) [-Wdeprecated-declarations]
frame.cc:1344:27: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
    vst->codec->codec_id = CODEC_ID_DVVIDEO;
                           ^
frame.cc:1345:9: warning: ‘AVStream::codec’ is deprecated (declared at /usr/include/libavformat/avformat.h:893) [-Wdeprecated-declarations]
    vst->codec->bit_rate = 25000000;
         ^
frame.cc:1345:9: warning: ‘AVStream::codec’ is deprecated (declared at /usr/include/libavformat/avformat.h:893) [-Wdeprecated-declarations]
frame.cc:1347:42: warning: ‘AVStream::codec’ is deprecated (declared at /usr/include/libavformat/avformat.h:893) [-Wdeprecated-declarations]
    AVCodecContext *avcodecEncoder = vst->codec;
                                          ^
frame.cc:1347:42: warning: ‘AVStream::codec’ is deprecated (declared at /usr/include/libavformat/avformat.h:893) [-Wdeprecated-declarations]
frame.cc:1369:38: error: ‘PIX_FMT_YUV420P’ was not declared in this scope
    avcodecEncoder->pix_fmt = isPAL ? PIX_FMT_YUV420P : PIX_FMT_YUV411P;
                                      ^
frame.cc:1369:56: error: ‘PIX_FMT_YUV411P’ was not declared in this scope
    avcodecEncoder->pix_fmt = isPAL ? PIX_FMT_YUV420P : PIX_FMT_YUV411P;
                                                        ^
frame.cc:1374:5: warning: ‘int avpicture_get_size(AVPixelFormat, int, int)’ is deprecated (declared at /usr/include/libavcodec/avcodec.h:5468) [-Wdeprecated-declarations]
     avpicture_get_size( avcodecEncoder->pix_fmt, avcodecEncoder->width, avcodecEncoder->height ) );
     ^
frame.cc:1374:96: warning: ‘int avpicture_get_size(AVPixelFormat, int, int)’ is deprecated (declared at /usr/include/libavcodec/avcodec.h:5468) [-Wdeprecated-declarations]
     avpicture_get_size( avcodecEncoder->pix_fmt, avcodecEncoder->width, avcodecEncoder->height ) );


================== info
Portage 2.3.3 (python 2.7.12-final-0, default/linux/amd64/13.0/desktop/plasma, gcc-4.9.4, glibc-2.23-r3, 4.4.39-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.4.39-gentoo-x86_64-AMD_A6-7310_APU_with_AMD_Radeon_R4_Graphics-with-gentoo-2.3
KiB Mem:     7096212 total,    257736 free
KiB Swap:    4194300 total,   2562008 free
Timestamp of repository gentoo: Thu, 23 Feb 2017 22:30:01 +0000
sh bash 4.3_p48-r1
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
distcc 3.2rc1 x86_64-pc-linux-gnu [disabled]
ccache version 3.2.4 [disabled]
app-shells/bash:          4.3_p48-r1::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.22.3_rc4::gentoo
dev-lang/python:          2.7.12::gentoo, 3.4.5::gentoo
dev-util/ccache:          3.2.4::gentoo
dev-util/cmake:           3.7.2::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.3::gentoo
sys-apps/openrc:          0.23.2::gentoo
sys-apps/sandbox:         2.10-r3::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.11.6-r1::gentoo, 1.12.6::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.9.4::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1::gentoo
sys-kernel/linux-headers: 4.4::gentoo (virtual/os-headers)
sys-libs/glibc:           2.23-r3::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: --exclude ChangeLog --delete-excluded

local
    location: /usr/local/portage
    masters: gentoo

noci
    location: /usr/local/portage-noci
    sync-type: rsync
    sync-uri: rsync://core.noci.local/portage-noci
    masters: gentoo
    sync-rsync-extra-opts: --exclude ChangeLog --delete-excluded

x-portage
    location: /usr/local/portage
    masters: gentoo
    priority: 0

gamerlay
    location: /var/lib/layman/gamerlay
    masters: gentoo
    priority: 50

java
    location: /var/lib/layman/java
    masters: gentoo
    priority: 50

ruby
    location: /var/lib/layman/ruby
    masters: gentoo
    priority: 50

sunrise
    location: /var/lib/layman/sunrise
    masters: gentoo
    priority: 50

zugaina
    location: /var/lib/layman/zugaina
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA PUEL sun-bcla-java-vm dlj-1.1 skype-eula googleearth AdobeFlash-10 AdobeFlash-10.1 OPERA-12"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -mno-tls-direct-seg-refs"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/stunnel/stunnel.conf /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.6/ext-active/ /etc/php/apache2-php7.0/ext-active/ /etc/php/cgi-php5.6/ext-active/ /etc/php/cgi-php7.0/ext-active/ /etc/php/cli-php5.6/ext-active/ /etc/php/cli-php7.0/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -mno-tls-direct-seg-refs"
DISTDIR="/var/tmp/portdist"
EMERGE_DEFAULT_OPTS="--autounmask-write --quiet --keep-going --with-bdeps=y "
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="ftp://mirror.leaseweb.com/gentoo/ http://mirror.netcologne.de/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.netcologne.de/gentoo/ rsync://mirror.netcologne.de/gentoo/"
INSTALL_MASK="/lib/systemd /usr/lib/systemd /etc/systemd"
LANG="en_US.utf8"
LDFLAGS="-Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_EXTRA_OPTS="--exclude ChangeLog --delete-excluded"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="3dnow 3dnowext 3dnowprefetch X X509 a52 aac aalib accessibility acl acpi activefilter ads aio akode akonadi alsa amd64 ao ati audiofile audit automount avahi bash-completion berkdb bl bluetooth bookmarks branding bzip2 cairo caps cdda cddb cdparanoia cdr cgi chm cli clvm cman consolekit cracklib crypt cscope css cups curl cxx dbus declarative dga directfb djvu dri dts dv dvb dvd dvdr eap-tls emboss encode esd exif exiscan exiscan-acl expat fam fame fastcgi fax fbcon ffmpeg firefox flac fortran fpx frxp gd gdbm ggi gif gimp glamor glib gmp gphoto2 gpm graphviz gs gsm gstreamer guile hal handbook howl-compat html http httpd ical icecast iconv id3 id3tag idn ieee1394 ilbc imap imlib ipv6 irda ithreads jabber java javascript jbig jingle joystick jpeg jpeg2k justify kde kdeprefix kerberos kipi kqemu lame laptop lcms ldap libcaca libnotify libsamplerate live lm_sensors lmtp loop-aes lua lzma lzo mad mailwrapper matroska mbrola md5sum mdnsresponder-compat memcache mhash mikmod mjpeg mmap mmx mmxext mng modules motif mp2 mp3 mp4 mpeg mplayer multilib musepack musicbrainz mysql nagios-dns nagios-game nagios-ntp nagios-ping nagios-ssh nas ncurses netboot network networkmanager nls nptl nsplugin obex ocamlopt odbc odk ogg openal openexr opengl openmp oscar pam pango pcre pda pdf phonon php pic plasma plotutils png pnm policykit postscript ppds pth pulseaudio qml qt qt3support qt5 quicktime quotas radius rar rdesktop readline real rle rrdtool rtc ruby sasl scanner sdl seccomp semantic-desktop server session skey slang sndfile snmp span speex spell spf sqlite sqlite3 srs srtp sse sse2 sse3 sse4 sse4_1 sse4_2 sse4a ssl ssse3 startup-notification subversion svg swat symlink sysfs syslog tcpd theora threads tiff tools truetype tta udev udisks unicode ups urandom usb utempter v4l v4l2 vcd vde vdpau vim-syntax vnc vorbis wavpack webdav widgets wifi win32codecs winbind wma wmf wxwidgets x264 xanim xattr xcb xcomposite xfs xine xinerama xml xmlreader xmlrpc xmlwriter xosd xpm xscreensaver xv xvid xvmc yaz yv12 zeroconf zip zlib zrtp" ABI_X86="64" ALSA_CARDS="hda-intel usb-audio" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2 canon casio" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx fma3 fma4 mmx mmxext popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop 3dnowprefetch" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="pc efi-64" INPUT_DEVICES="evdev keyboard mouse synaptics joystick aiptek wacom" KERNEL="linux" L10N="nl-NL en-US en-GB nl en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="nlpsolver pdfimport scripting-beanshell scripting=javascript wiki-publisher presenter-console presenter-minimizer" LINGUAS="en_GB en_US nl_NL en nl" NGINX_MODULES_HTTP="ssi replace sub scgi rewrite referrer proxy perl memcached gzip gzip_static geo geoip fastcgi dav charset browser auth_basic access addition ajp auth_pam auth_request autoindex dav_ext echo empty_gif fancyindex flv gunzip headers_more image_filter limit_conn limit_req lua map metrics mp4 naxsi push_stream random_index referer slice uwsgi xslt stub_status" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7 python3_4" QEMU_SOFTMMU_TARGETS="arm i386 alpha x86_64" QEMU_USER_TARGETS="alpha i386 x86_64 arm armeb" RUBY_TARGETS="ruby21" SANE_BACKENDS="net v4l hpaio" USERLAND="GNU" VIDEO_CARDS="amdgpu radeon vesa vga fbdev" XTABLES_ADDONS="account gradm ipp2p ipv4options length2 lscan pknock psd quota2"
Unset:  CC, CPPFLAGS, CTARGET, CXX, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, USE_PYTHON




Comment 1


Nico Baggus





          2017-02-23 23:45:34 UTC
        

my guess is ffmpeg update is the cause of this caused 
(@preserved-rebuild lists these)




Comment 2


Nico Baggus





          2017-02-23 23:48:52 UTC
        


# cat /var/lib/portage/preserved_libs_registry 
{
    "media-video/ffmpeg:0": [
        "media-video/ffmpeg-3.2.4", 
        "16746", 
        [
            "/usr/lib64/libavcodec.so.56.60.100", 
            "/usr/lib64/libavformat.so.56.40.101", 
            "/usr/lib64/libavutil.so.54.31.100", 
            "/usr/lib64/libswresample.so.1.2.101", 
            "/usr/lib64/libswscale.so.3.1.101", 
            "/usr/lib64/libavcodec.so.56", 
            "/usr/lib64/libavutil.so.54", 
            "/usr/lib64/libswresample.so.1", 
            "/usr/lib64/libavformat.so.56", 
            "/usr/lib64/libswscale.so.3"
        ]
    ]
}

unmerge / remerge clear the preserved registry, but still doesn't build




Comment 3


Petri Hintukainen





          2017-02-26 17:10:22 UTC
        

Fixed in upstream
changeset:   12769:5f4d4d6c3a6c
date:        Mon Dec 12 19:35:05 2016 +0100
summary:     Uniform ffmpeg compatibility macros.

Fix is also in 1.2.8 release.




Comment 4


Nico Baggus





          2017-03-07 20:47:18 UTC
        

This Xine is from 2014... and since then superseded.

Current version = 1.2.8 (updated Feb 2017)
see: https://sourceforge.net/projects/xine/




Comment 5


Nico Baggus





          2017-03-07 20:48:42 UTC
        

oh about producing an ebuild for it.
I produced some in the past that never were effectively used,
i doubt if i should commit time in it.




Comment 6


Nico Baggus





          2018-01-07 18:21:33 UTC
        

media-libs/xine-lib
     Available versions:  (1) 1.2.6-r2 1.2.8 **1.2.9999
       {+X a52 aac aalib +alsa altivec bluray +css directfb dts dvb dxr3 fbcon flac fusionsound gtk imagemagick ipv6 jack jpeg libav libcaca mad +mmap mng modplug musepack nls opengl oss pulseaudio samba sdl speex theora truetype v4l vaapi vcd vdpau vdr vidix +vis vorbis vpx wavpack +xcb xinerama +xv xvmc}
     Homepage:            http://xine.sourceforge.net/
     Description:         Core libraries for Xine movie player



Already in stable Gentoo, so no need for this issue..
Except for maybe the new web location...
github in stead of sf.net









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

