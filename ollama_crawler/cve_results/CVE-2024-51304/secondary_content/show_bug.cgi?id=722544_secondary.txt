Title: 722544 – media-gfx/gimp-2.10.14 crashed with a fatal error: fatal error: Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=722544

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 722544
media-gfx/gimp-2.10.14 crashed with a fatal error: fatal error: Segmentation fault
Last modified: 2020-06-03 16:29:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 722544 
      - media-gfx/gimp-2.10.14 crashed with a fatal error: fatal error: Segmentation fault


Summary:
media-gfx/gimp-2.10.14 crashed with a fatal error: fatal error: Segmentation ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sergey Torokhov








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-05-11 20:32 UTC by Samuel Bernardo





      Modified:
    
2020-06-03 16:29 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jstein
proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Samuel Bernardo





          2020-05-11 20:32:17 UTC
        

Opening gimp after installing xsane with all use flags activated.
HPLIP popups a message mentioning that is looking for device... and then appears message about gimp crash.

```
GNU Image Manipulation Program version 2.10.14
git-describe: GIMP_2_10_12-511-ga4f55d6c7e
C compiler:
	Using built-in specs.
	COLLECT_GCC=/usr/bin/x86_64-pc-linux-gnu-gcc
	COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/8.3.0/lto-wrapper
	Target: x86_64-pc-linux-gnu
	Configured with: /var/tmp/portage/sys-devel/gcc-8.3.0-r1/work/gcc-8.3.0/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/8.3.0 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/8.3.0 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/8.3.0/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/8.3.0/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include/g++-v8 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/8.3.0/python --enable-languages=c,c++,go,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 8.3.0-r1 p1.1' --disable-esp --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --with-multilib-list=m32,m64 --disable-altivec --disable-fixed-point --enable-targets=all --enable-libgomp --disable-libmudflap --disable-libssp --disable-libmpx --disable-systemtap --enable-vtable-verify --enable-lto --without-isl --enable-default-pie --enable-default-ssp
	Thread model: posix
	gcc version 8.3.0 (Gentoo 8.3.0-r1 p1.1) 

using babl version 0.1.74 (compiled against version 0.1.74)
using GEGL version 0.4.22 (compiled against version 0.4.20)
using GLib version 2.64.2 (compiled against version 2.60.7)
using GdkPixbuf version 2.40.0 (compiled against version 2.40.0)
using GTK+ version 2.24.32 (compiled against version 2.24.32)
using Pango version 1.42.4 (compiled against version 1.42.4)
using Fontconfig version 2.13.0 (compiled against version 2.13.0)
using Cairo version 1.16.0 (compiled against version 1.16.0)

```
> fatal error: Segmentation fault

Stack trace:
```

# Stack traces obtained from PID 1592483 - Thread 1592483 #

[New LWP 1592498]
[New LWP 1592499]
[New LWP 1592500]
[New LWP 1592501]
[New LWP 1592502]
[New LWP 1592503]
[New LWP 1592504]
[New LWP 1592505]
[New LWP 1592506]
[New LWP 1592507]
[New LWP 1592508]
[New LWP 1592509]
[New LWP 1592510]
[New LWP 1592514]
[New LWP 1592515]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007ff7a62f1164 in read () from /lib64/libpthread.so.0
  Id   Target Id                                            Frame 
* 1    Thread 0x7ff7a4ccfd40 (LWP 1592483) "gimp-2.10"      0x00007ff7a62f1164 in read () from /lib64/libpthread.so.0
  2    Thread 0x7ff7a45ea700 (LWP 1592498) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  3    Thread 0x7ff7a3de9700 (LWP 1592499) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  4    Thread 0x7ff7a35e8700 (LWP 1592500) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  5    Thread 0x7ff7a2de7700 (LWP 1592501) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  6    Thread 0x7ff7a25e6700 (LWP 1592502) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  7    Thread 0x7ff7a1de5700 (LWP 1592503) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  8    Thread 0x7ff7a15e4700 (LWP 1592504) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  9    Thread 0x7ff7a0de3700 (LWP 1592505) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  10   Thread 0x7ff793fff700 (LWP 1592506) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  11   Thread 0x7ff7937fe700 (LWP 1592507) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  12   Thread 0x7ff792ffd700 (LWP 1592508) "worker"         0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  13   Thread 0x7ff7923e6700 (LWP 1592509) "gmain"          0x00007ff7a620d9a9 in poll () from /lib64/libc.so.6
  14   Thread 0x7ff791be5700 (LWP 1592510) "gdbus"          0x00007ff7a620d9a9 in poll () from /lib64/libc.so.6
  15   Thread 0x7ff765b1c700 (LWP 1592514) "async"          0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6
  16   Thread 0x7ff76531b700 (LWP 1592515) "pool-gimp-2.10" 0x00007ff7a6212ca9 in syscall () from /lib64/libc.so.6

Thread 16 (Thread 0x7ff76531b700 (LWP 1592515)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d657f in g_cond_wait_until () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a645b581 in g_async_queue_pop_intern_unlocked () at /usr/lib64/libglib-2.0.so.0
#3  0x00007ff7a645bb41 in g_async_queue_timeout_pop () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a64b3bd1 in g_thread_pool_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#5  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#6  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#7  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 15 (Thread 0x7ff765b1c700 (LWP 1592514)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00005557ab6c463c in gimp_parallel_run_async_thread_func ()
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 14 (Thread 0x7ff791be5700 (LWP 1592510)):
#0  0x00007ff7a620d9a9 in poll () at /lib64/libc.so.6
#1  0x00007ff7a648a256 in g_main_context_iterate.isra () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a648a5ba in g_main_loop_run () at /usr/lib64/libglib-2.0.so.0
#3  0x00007ff7a6860b46 in gdbus_shared_thread_func () at /usr/lib64/libgio-2.0.so.0
#4  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#5  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#6  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 13 (Thread 0x7ff7923e6700 (LWP 1592509)):
#0  0x00007ff7a620d9a9 in poll () at /lib64/libc.so.6
#1  0x00007ff7a648a256 in g_main_context_iterate.isra () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a648a37c in g_main_context_iteration () at /usr/lib64/libglib-2.0.so.0
#3  0x00007ff7a648a3c1 in glib_worker_main () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#5  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#6  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 12 (Thread 0x7ff792ffd700 (LWP 1592508)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 11 (Thread 0x7ff7937fe700 (LWP 1592507)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 10 (Thread 0x7ff793fff700 (LWP 1592506)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 9 (Thread 0x7ff7a0de3700 (LWP 1592505)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 8 (Thread 0x7ff7a15e4700 (LWP 1592504)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 7 (Thread 0x7ff7a1de5700 (LWP 1592503)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 6 (Thread 0x7ff7a25e6700 (LWP 1592502)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 5 (Thread 0x7ff7a2de7700 (LWP 1592501)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 4 (Thread 0x7ff7a35e8700 (LWP 1592500)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 3 (Thread 0x7ff7a3de9700 (LWP 1592499)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 2 (Thread 0x7ff7a45ea700 (LWP 1592498)):
#0  0x00007ff7a6212ca9 in syscall () at /lib64/libc.so.6
#1  0x00007ff7a64d647f in g_cond_wait () at /usr/lib64/libglib-2.0.so.0
#2  0x00007ff7a6947bc3 in gegl_parallel_distribute_thread_func () at /usr/lib64/libgegl-0.4.so.0
#3  0x00007ff7a64b32cd in g_thread_proxy () at /usr/lib64/libglib-2.0.so.0
#4  0x00007ff7a62e6ee0 in start_thread () at /lib64/libpthread.so.0
#5  0x00007ff7a62180ef in clone () at /lib64/libc.so.6

Thread 1 (Thread 0x7ff7a4ccfd40 (LWP 1592483)):
#0  0x00007ff7a62f1164 in read () at /lib64/libpthread.so.0
#1  0x00007ff7a6dd00f4 in gimp_stack_trace_print () at /usr/lib64/libgimpbase-2.0.so.0
#2  0x00005557ab3f2811 in gimp_eek ()
#3  0x00005557ab3f2c48 in  ()
#4  0x00005557ab3f3397 in gimp_sigfatal_handler ()
#5  0x00007ff7a62f2350 in <signal handler called> () at /lib64/libpthread.so.0
#6  0x00005557ab76e4db in gimp_param_spec_layer_id ()
#7  0x00005557ab68ba8d in gimp_pdb_compat_param_spec ()
#8  0x00005557ab698390 in gimp_plug_in_handle_message ()
#9  0x00005557ab6a67c1 in gimp_plug_in_manager_call_query ()
#10 0x00005557ab69e818 in gimp_plug_in_manager_restore ()
#11 0x00005557ab6bc07d in gimp_real_restore ()
#12 0x00007ff7a6572ecd in g_closure_invoke () at /usr/lib64/libgobject-2.0.so.0
#13 0x00007ff7a65856f2 in signal_emit_unlocked_R () at /usr/lib64/libgobject-2.0.so.0
#14 0x00007ff7a65902b5 in g_signal_emit_valist () at /usr/lib64/libgobject-2.0.so.0
#15 0x00007ff7a6590ce7 in g_signal_emit () at /usr/lib64/libgobject-2.0.so.0
#16 0x00005557ab6bb5fd in gimp_restore ()
#17 0x00005557ab3f218b in app_run ()
#18 0x00005557ab3f1956 in main ()
[Inferior 1 (process 1592483) detached]

```




Comment 1


Samuel Bernardo





          2020-05-11 20:40:31 UTC
        

maybe hplip is not related because second time I try to open gimp it happens the same without appearing any message.




Comment 2


Samuel Bernardo





          2020-05-11 20:50:03 UTC
        

It is not related to xsane... After compiling again xsane with nls and png use flags, gimp continues with same error.
I already recompile gimp and the problem still the same.




Comment 3


Jonas Stein






          2020-05-11 22:05:31 UTC
        

Thank you for the report.
There are often precursors for segfaults in the warnings.

We need to have all information at hand before ticket assignment. That is why I ask you to 
* attach the logs and 
* paste the emerge info 
as described on https://wiki.gentoo.org/wiki/Attach_the_logs_to_the_bug_ticket

Is it fixed with media-gfx/gimp-2.10.18-r1?

Please reopen this ticket (Status:UNCONFIRMED) afterwards.




Comment 4


Samuel Bernardo





          2020-05-12 10:49:07 UTC
        

(In reply to Jonas Stein from comment #3)
> Thank you for the report.
> There are often precursors for segfaults in the warnings.
> 
> We need to have all information at hand before ticket assignment. That is
> why I ask you to 
> * attach the logs and 
> * paste the emerge info 
> as described on
> https://wiki.gentoo.org/wiki/Attach_the_logs_to_the_bug_ticket
> 
> Is it fixed with media-gfx/gimp-2.10.18-r1?
> 
> Please reopen this ticket (Status:UNCONFIRMED) afterwards.

Hi Jonas

This is not related to an emerge, but a runtime error.
I follow the instructions in gimp application for bug report, where for my surprise it says to report here the bug.
The gimp bug report window describes the procedure and to past the whole log in the comment.

I will try the recent version that is masked, but maybe there is some configuration error in current stable version if is not expected to report gimp runtime bugs in Gentoo bug tracker.

Thanks




Comment 5


Samuel Bernardo





          2020-05-18 12:00:30 UTC
        

Keyword unmask recent version compile with success but when starting it keeps allocating memory in start process without entering the interface (only appears the window grey background).




Comment 6


Samuel Bernardo





          2020-05-18 20:15:25 UTC
        

(In reply to Samuel Bernardo from comment #5)
> Keyword unmask recent version compile with success but when starting it
> keeps allocating memory in start process without entering the interface
> (only appears the window grey background).

Also with current stable version same happens now.
xsane is installed with gimp flag disabled.

I recompiled gimp without ccache activated. I also clean up the configurations directory in .config/GIMP/2.10.




Comment 7


Samuel Bernardo





          2020-06-03 16:29:29 UTC
        

gimp-2.10.18 is working now without the runtime segfault.

Don't know what was the important difference in libraries. I'm still using gcc-8.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

