Title: 99455 – emerge of tcl-8.4.11 fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=99455

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 99455
emerge of tcl-8.4.11 fails
Last modified: 2006-09-10 14:12:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 99455 
      - emerge of tcl-8.4.11 fails


Summary:
emerge of tcl-8.4.11 fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

TCL/TK Project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-18 12:28 UTC by Marize Pommot-Maia





      Modified:
    
2006-09-10 14:12 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sekretarz









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marize Pommot-Maia





          2005-07-18 12:28:54 UTC
        

Update tcl from 8.4.9 to 8.4.11, emerge reports the
following failure:
Code:

gcc -pipe -c -march=pentium3 -O3 -pipe -fomit-frame-pointer -Wall
-Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I.
-DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long
-DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1
-DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1
-DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1
-DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1
-DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1
-DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1
-DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1
-DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\" 
-DTCL_LIBRARY=\"/usr/lib/tcl8.4\" \
-DTCL_PACKAGE_PATH="\"/usr/lib\"" \
        ./tclUnixInit.c
gcc: long: No such file or directory <<<<--------
gcc -pipe -c -march=pentium3 -O3 -pipe -fomit-frame-pointer -Wall
-Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I.
-DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long
-DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1
-DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1
-DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1
-DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1
-DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1
-DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1
-DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1
-DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\"  ./tclUnixThrd.c
gcc -pipe -c -march=pentium3 -O3 -pipe -fomit-frame-pointer -Wall
-Wno-implicit-int -fno-strict-aliasing -fPIC -I./../generic -I.
-DPEEK_XCLOSEIM=1 -D_LARGEFILE64_SOURCE=1 -DTCL_WIDE_INT_TYPE=long\ long
-DHAVE_STRUCT_STAT64=1 -DHAVE_OPEN64=1 -DHAVE_LSEEK64=1 -DHAVE_TYPE_OFF64_T=1
-DHAVE_GETCWD=1 -DHAVE_OPENDIR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1
-DHAVE_STRTOLL=1 -DHAVE_STRTOULL=1 -DHAVE_TMPNAM=1 -DHAVE_WAITPID=1
-DHAVE_LIMITS_H=1 -DHAVE_UNISTD_H=1 -DHAVE_SYS_PARAM_H=1 -DUSE_TERMIOS=1
-DHAVE_SYS_TIME_H=1 -DTIME_WITH_SYS_TIME=1 -DHAVE_TM_ZONE=1 -DHAVE_GMTIME_R=1
-DHAVE_LOCALTIME_R=1 -DHAVE_TM_GMTOFF=1 -DHAVE_TIMEZONE_VAR=1
-DHAVE_ST_BLKSIZE=1 -DSTDC_HEADERS=1 -DHAVE_SIGNED_CHAR=1 -DHAVE_LANGINFO=1
-DHAVE_SYS_IOCTL_H=1         -DTCL_SHLIB_EXT=\".so\"  ./tclUnixNotfy.c
make: *** [tclUnixInit.o] Error 1
make: *** Waiting for unfinished jobs....

!!! ERROR: dev-lang/tcl-8.4.11 failed.
!!! Function src_compile, Line 49, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.


I have omitted all the information prior to reaching the compilation of
"tclUnixInit.c" since all seems to be fine.

Please, note the error message from gcc!!! I took a look at the Makefile and
found no instruction to deal with any file named "long".



Reproducible: Always
Steps to Reproduce:
1. rm /usr/portage/distfiles/tcl8.4.11-src.tar.gz
2. emerge sync
3. emerge -uv tcl

Actual Results:  
Same as described above.

Expected Results:  
Finish successfully.

1) If I go to the portage directory and type "make" the process ends with no
problems.

2) Move the tarball to my personal working directory, unzip+untar, change to the
"unix"
     directory and type configure followed by make.  No complaints.  If finishes
without a
     hitch.

3) emerge info
Gentoo Base System version 1.6.12
Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r0,
2.6.12-gentoo-r5 i686)
=================================================================
System uname: 2.6.12-gentoo-r5 i686 Pentium III (Coppermine)
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r1
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O3 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config
/usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/texmf/web2c
/etc/env.d"
CXXFLAGS="-march=pentium3 -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig candy distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://mirrors.tds.net/gentoo 	ftp://gentoo.mirrors.pair.com/
http://gentoo.mirrors.pair.com/  http://gentoo.seren.com/gentoo 
ftp://ftp.ussg.iu.edu/pub/linux/gentoo ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo
 http://gentoo.oregonstate.edu/   http://gentoo.osuosl.org/   
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/local/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.us.gentoo.org/gentoo-portage"
USE="x86 3dnow X Xaw3d aalib alsa apache2 apm arts avi bcmath berkdb
bitmap-fonts cdr crypt cups curl directfb dvd emacs emboss encode esd exif fam
flac foomaticdb fortran gd gdbm gif gimpprint gpm gtk gtk2 imagemagick imlib
java jpeg junit kde libg++ libwww mad mikmod mime mmx motif mp3 mpeg nas ncurses
nls odbc ogg oggvorbis opengl oss pam pcmcia pdflib perl php plotutils png pnp
postgres ppds python qt quicktime radeon rage128 readline ruby scanner sdl
session slang spell spl ssl svga tcltk tcpd tetex tidy tiff truetype
truetype-fonts type1-fonts unicode usb vorbis xine xml xml2 xmms xpm xv xvid
zlib video_cards_rage128 userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Karol Wojtaszek (RETIRED)






          2006-01-12 03:53:06 UTC
        

Can you try to emerge tcl in this way: `MAKEOPTS="-j1" emerge tcl`




Comment 2


Nathan





          2006-03-20 15:50:26 UTC
        

FYI, I've been using 8.4.11 on x86 for about six months now, without a hitch.  I'm using the 'thread' USE-flag, and there's bad memory leaks in <= 8.4.9 that appear to be at least mostly fixed in 8.4.11.




Comment 3


Marize Pommot-Maia





          2006-03-20 18:14:31 UTC
        

(In reply to comment #2)
> FYI, I've been using 8.4.11 on x86 for about six months now, without a hitch. 
> I'm using the 'thread' USE-flag, and there's bad memory leaks in <= 8.4.9 that
> appear to be at least mostly fixed in 8.4.11.
> 

I am no longer able to check the suggested steps since that computer had a horrendous disk crash and I had to re-install everything from scratch.  Currently I'm using tcl-8.4.12 both on a ~x86 and on a ~amd64. Anyway, thanks for the input.




Comment 4


Jakub Moc (RETIRED)






          2006-09-10 14:12:57 UTC
        

Not reproducable by the user, closing.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

