Title: 140101 – media-tv/v4l-dv-hg-0.1-r2: reemerging although no changes found...
URL: https://bugs.gentoo.org/show_bug.cgi?id=140101

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 140101
media-tv/v4l-dv-hg-0.1-r2: reemerging although no changes found...
Last modified: 2006-11-19 10:23:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 140101 
      - media-tv/v4l-dv-hg-0.1-r2: reemerging although no changes found...


Summary:
media-tv/v4l-dv-hg-0.1-r2: reemerging although no changes found...
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Other
      







Importance:
      
High
       normal
      


Assignee:

Matthias Schwarzott








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-12 05:16 UTC by Daniel





      Modified:
    
2006-11-19 10:23 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



agriffis
media-tv









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel





          2006-07-12 05:16:19 UTC
        

Hi,

although there were no changes found (in v4l-dvb-hg-source-tree) I need to re(-emerge/compile) v4l-dvb-hg because I changed the kernel version from gentoo-r9 to gentoo-r12. I reemerged v4l-dvb-hg just yesterday, and today emerged the newest kernel-version (don't ask why ;-) ) so I needed to recompile the v4l-dvb-hg to match the new kernel-version...

Easy steps to reproduce the problem:
0.) only needed if your kernel-version is up to date: emerge an older kernel verion e.g. gentoo-r9
1.) emerge v4l-dvb-hg
2.) emerge new kernel sources (compile the kernel)
3.) emerge v4l-dvb-hg (again)
       ==> error!

My workaround: rm -r /usr/portage/distfiles/hg-src/v4l-dvb-*

Possible solution: Perhabs the ebuild should also check the kernel-version for changes (but I don't know exactly how to keep track of kernel version changes in a persistent way between different ebuild-runs...)

Cheers Daniel

>>> Emerging (2 of 4) media-tv/v4l-dvb-hg-0.1-r2 to /
>>> checking ebuild checksums ;-)
>>> checking auxfile checksums ;-)
>>> checking miscfile checksums ;-)
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     2.6.16-gentoo-r12
>>> Unpacking source...
 * hg pull -u http://linuxtv.org/hg/v4l-dvb ...
pulling from http://linuxtv.org/hg/v4l-dvb
searching for changes
no changes found                                                                                   [ !! ]

!!! ERROR: media-tv/v4l-dvb-hg-0.1-r2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_unpack
  ebuild.sh, line 711:   Called src_unpack
  v4l-dvb-hg-0.1-r2.ebuild, line 47:   Called mercurial_src_unpack
  mercurial.eclass, line 73:   Called mercurial_fetch
  mercurial.eclass, line 60:   Called die




Comment 1


Matthias Schwarzott






          2006-07-12 05:57:51 UTC
        

The modules have to be recompiled for every kernel. That is a thing I can not change.
The message "No changes found" is from the hg-util.

The die command is issued somewhere inside mercurial.eclass.

Was there another error message after the calltrace?

@agriffis:
Can you please add messages to all calls of "die".
Else debugging is so hard.




Comment 2


Daniel





          2006-07-12 07:18:09 UTC
        

(In reply to comment #1)
> The modules have to be recompiled for every kernel. That is a thing I can not
> change.
hehe that's clear, thanks! ;-)
And that's exacly what I wanted to do: after emerging a new kernel I tried to recompile/reemerge the (unchanged) v4l-dvb-hg again (to make modules binary compatible with the new kernel ;-)), but hg said: "no changes... error... abort." details above.

> The message "No changes found" is from the hg-util.
> The die command is issued somewhere inside mercurial.eclass.
> Was there another error message after the calltrace?
ok now I understand, so it's highly probable a problem within hg. Sorry!





Comment 3


Aron Griffis (RETIRED)






          2006-07-17 09:44:34 UTC
        

Daniel, what version of mercurial do you have installed?  I'm trying to replicate this, but it seems to work fine for me.




Comment 4


Daniel





          2006-07-27 09:42:13 UTC
        

Sorry for my "slow response":

How do I get the version number? I don't know "mercurial" at all - sorry!

Thanks a lot!

Daniel




Comment 5


Jonas Jonsson





          2006-08-06 13:05:48 UTC
        

(In reply to comment #3)
> Daniel, what version of mercurial do you have installed?  I'm trying to
> replicate this, but it seems to work fine for me.
> 

Have have the same problem using dev-util/mercurial-0.8

mythbox distfiles # emerge v4l-dvb-hg
Calculating dependencies... done!
>>> Emerging (1 of 1) media-tv/v4l-dvb-hg-0.1-r2 to /
>>> checking ebuild checksums ;-)
>>> checking auxfile checksums ;-)
>>> checking miscfile checksums ;-)
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     2.6.17-suspend2-r3
>>> Unpacking source...
 * hg pull -u http://linuxtv.org/hg/v4l-dvb ...
pulling from http://linuxtv.org/hg/v4l-dvb
searching for changes
no changes found                                                                                                                                        [ !! ]

!!! ERROR: media-tv/v4l-dvb-hg-0.1-r2 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_unpack
  ebuild.sh, line 711:   Called src_unpack
  v4l-dvb-hg-0.1-r2.ebuild, line 47:   Called mercurial_src_unpack
  mercurial.eclass, line 73:   Called mercurial_fetch
  mercurial.eclass, line 60:   Called die

!!! (no error message)
!!! If you need support, post the topmost build error, and the call stack if relevant.




Comment 6


Matthias Schwarzott






          2006-08-06 14:42:08 UTC
        

Perhaps it helps to delete /usr/portage/hg-src/v4l-dvb-hg, don't know if hg can cope with modified repositories under the same name (v4l-dvb hg-repo was recreated some weeks ago).




Comment 7


Matthias Schwarzott






          2006-11-19 10:04:32 UTC
        

does this bug still exist?





Comment 8


Daniel





          2006-11-19 10:12:06 UTC
        

(In reply to comment #7)
> does this bug still exist?
> 

no, not for me and my systems. Last updates (emerges) worked fine.

Thanks!




Comment 9


Matthias Schwarzott






          2006-11-19 10:23:58 UTC
        

Reopen if problem occurs another time.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

