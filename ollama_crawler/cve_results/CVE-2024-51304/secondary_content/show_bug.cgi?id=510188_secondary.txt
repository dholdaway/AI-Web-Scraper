Title: 510188 – [rion overlay] sys-libs/rts_bpp-1.1 - .../work/rts_bpp/rtsx.c:259:2: error: unknown field ‘proc_info’ specified in initializer
URL: https://bugs.gentoo.org/show_bug.cgi?id=510188

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 510188
[rion overlay] sys-libs/rts_bpp-1.1 - .../work/rts_bpp/rtsx.c:259:2: error: unknown field ‘proc_info’ specified in initializer
Last modified: 2014-05-23 05:25:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 510188 
      - [rion overlay] sys-libs/rts_bpp-1.1 - .../work/rts_bpp/rtsx.c:259:2: error: unknown field ‘proc_info’ specified in initializer


Summary:
[rion overlay] sys-libs/rts_bpp-1.1 - .../work/rts_bpp/rtsx.c:259:2: error: u...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Sergey Ilinykh








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-05-12 19:42 UTC by tman





      Modified:
    
2014-05-23 05:25 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/var/tmp/portage/sys-libs/rts_bpp-1.1/temp/build.log

              (build.log,3.24 KB,
                text/x-log)

            
2014-05-12 19:43 UTC,

            tman




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


tman





          2014-05-12 19:42:29 UTC
        

i have a: 04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)


and it seems to be i have to install sys-libs/rts_bpp to get it working.

https://forums.gentoo.org/viewtopic-t-922794-start-0.html

unfortunatelly this package does not exist in portage and the ebuild in rion-overlay does not work:

Resolving bugs.launchpad.net... 91.189.89.224, 91.189.89.225
Connecting to bugs.launchpad.net|91.189.89.224|:443... connected.
HTTP request sent, awaiting response... 302 Moved Temporarily
Location: https://launchpadlibrarian.net/99698080/rts_bpp.tar.bz2 [following]
--2014-05-12 21:38:28--  https://launchpadlibrarian.net/99698080/rts_bpp.tar.bz2
Resolving launchpadlibrarian.net... 91.189.89.229, 91.189.89.228
Connecting to launchpadlibrarian.net|91.189.89.229|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 75141 (73K) [application/x-tar]
Saving to: ‘/mnt/portage/distfiles/rts_bpp-1.1.tar.bz2’

100%[======================================>] 75.141      --.-K/s   in 0,1s    

2014-05-12 21:38:28 (560 KB/s) - ‘/mnt/portage/distfiles/rts_bpp-1.1.tar.bz2’ saved [75141/75141]

 * rts_bpp-1.1.tar.bz2 SHA256 SHA512 WHIRLPOOL size ;-) ...                                                     [ ok ]
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found kernel object directory:
 *     /lib/modules/3.14.3-gentoo/build
 * Found sources for kernel version:
 *     3.14.3-gentoo
>>> Unpacking source...
>>> Unpacking rts_bpp-1.1.tar.bz2 to /var/tmp/portage/sys-libs/rts_bpp-1.1/work
>>> Source unpacked in /var/tmp/portage/sys-libs/rts_bpp-1.1/work
>>> Preparing source in /var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp ...
ln: failed to create symbolic link ‘Module.symvers’: File exists
 * Preparing rts_bpp module
make -j9 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- 'LDFLAGS=-m elf_x86_64' 
cp -f ./define.release ./define.h
make -C /lib/modules/3.14.3-gentoo/build/ SUBDIRS=/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp modules
make[1]: warning: jobserver unavailable: using -j1.  Add '+' to parent make rule.
make[1]: Entering directory '/usr/src/linux-3.14.3-gentoo'
  CC [M]  /var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.o
/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.c:259:2: error: unknown field ‘proc_info’ specified in initializer
  .proc_info =   proc_info,
  ^
/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.c:259:2: warning: initialization from incompatible pointer type [enabled by default]
/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.c:259:2: warning: (near initialization for ‘rtsx_host_template.proc_dir’) [enabled by default]
scripts/Makefile.build:308: recipe for target '/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.o' failed
make[2]: *** [/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp/rtsx.o] Error 1
Makefile:1274: recipe for target '_module_/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp' failed
make[1]: *** [_module_/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp] Error 2
make[1]: Leaving directory '/usr/src/linux-3.14.3-gentoo'
Makefile:35: recipe for target 'default' failed
make: *** [default] Error 2
 * ERROR: sys-libs/rts_bpp-1.1::rion failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=sys-libs/rts_bpp-1.1::rion'`,
 * the complete build log and the output of `emerge -pqv '=sys-libs/rts_bpp-1.1::rion'`.
 * The complete build log is located at '/var/tmp/portage/sys-libs/rts_bpp-1.1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/sys-libs/rts_bpp-1.1/temp/environment'.
 * Working directory: '/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp'
 * S: '/var/tmp/portage/sys-libs/rts_bpp-1.1/work/rts_bpp'

>>> Failed to emerge sys-libs/rts_bpp-1.1, Log file:


Reproducible: Always




Portage 2.2.10 (default/linux/amd64/13.0/desktop, gcc-4.8.2, glibc-2.19, 3.14.3-gentoo x86_64)
=================================================================
System uname: Linux-3.14.3-gentoo-x86_64-Intel-R-_Core-TM-_i7-3740QM_CPU_@_2.70GHz-with-gentoo-2.2
KiB Mem:    24693996 total,  23090644 free
KiB Swap:   25598972 total,  25598972 free
Timestamp of tree: Mon, 12 May 2014 17:00:01 +0000
ld GNU ld (GNU Binutils) 2.24
app-shells/bash:          4.2_p47
dev-java/java-config:     2.2.0
dev-lang/python:          2.7.6-r1, 3.2.5-r4, 3.3.5, 3.4.0
dev-util/cmake:           2.8.12.2-r1
dev-util/pkgconfig:       0.28-r1
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.14.1
sys-devel/binutils:       2.24-r2
sys-devel/gcc:            4.8.2
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           4.0-r1
sys-kernel/linux-headers: 3.14 (virtual/os-headers)
sys-libs/glibc:           2.19
Repositories: gentoo bitcoin steam-overlay bumblebee rion lokal
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.5/ext-active/ /etc/php/cgi-php5.5/ext-active/ /etc/php/cli-php5.5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=corei7 -O2 -pipe"
DISTDIR="/mnt/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="de_DE.UTF-8"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/mnt/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/mnt/portage"




Comment 1


tman





          2014-05-12 19:43:53 UTC
        

Created attachment 376800 [details]
/var/tmp/portage/sys-libs/rts_bpp-1.1/temp/build.log




Comment 2


Sergey Ilinykh





          2014-05-13 01:36:19 UTC
        

tman, did you try standard in-kernel driver?




Comment 3


tman





          2014-05-13 05:55:21 UTC
        

(In reply to Rion from comment #2)
> tman, did you try standard in-kernel driver?

what do u mean with standard?

i tried all ways also your ebuild but it dont get compile.




Comment 4


Sergey Ilinykh





          2014-05-13 05:59:23 UTC
        

I mean rtsx driver. which is in kernel since 3.10. at least I heard it works fine with readers for which rts_bpp was required earlier.




Comment 5


tman





          2014-05-13 09:47:25 UTC
        

(In reply to Rion from comment #4)
> I mean rtsx driver. which is in kernel since 3.10. at least I heard it works
> fine with readers for which rts_bpp was required earlier.

there is indeed are driver with the name: 

  │                                                                                                                │  
  │ Symbol: RTS5208 [=m]                                                                                           │  
  │ Type  : tristate                                                                                               │  
  │ Prompt: Realtek PCI-E Card Reader RTS5208/5288 support                                                         │  
  │   Location:                                                                                                    │  
  │     -> Device Drivers                                                                                          │  
  │ (3)   -> Staging drivers (STAGING [=y])                                                                        │  
  │   Defined at drivers/staging/rts5208/Kconfig:1                                                                 │  
  │   Depends on: STAGING [=y] && PCI [=y] && SCSI [=y]                                                            │  


but it seems to not work:

04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)

its still unisgned class.

  │




Comment 6


Sergey Ilinykh





          2014-05-13 09:50:51 UTC
        

try to load all rtsx modules (at least 3 afaik) and see what happen




Comment 7


tman





          2014-05-13 11:09:04 UTC
        

this module is now included and loaded but :


00:1f.3 SMBus: Intel Corporation 7 Series/C210 Series Chipset Family SMBus Controller (rev 04)
01:00.0 VGA compatible controller: NVIDIA Corporation GK107M [GeForce GTX 660M] (rev ff)
03:00.0 Network controller: Qualcomm Atheros AR9462 Wireless Network Adapter (rev 01)
04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)


conslusion this wont work.




Comment 8


Sergey Ilinykh





          2014-05-13 11:10:51 UTC
        

better show dmesg what happens when you insert a card




Comment 9


Sergey Ilinykh





          2014-05-13 11:11:20 UTC
        

of course all modules should be loaded. check with lsmod




Comment 10


tman





          2014-05-13 11:27:10 UTC
        

i have made it automatically load on boot.

unfortunatell i dont have a card for testing it yet.

but should it not have an other output then this:


04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)???

unsassignet class is no indikator for missing support of this driver?




Comment 11


tman





          2014-05-13 11:51:01 UTC
        

modprobe: FATAL: Module rts5208 is builtin

also same result:

03:00.0 Network controller: Qualcomm Atheros AR9462 Wireless Network Adapter (rev 01)
04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)




Comment 12


tman





          2014-05-13 23:56:17 UTC
        

https://bugzilla.kernel.org/show_bug.cgi?id=57061


well this the kernel.org bugzilla.




Comment 13


Sergey Ilinykh





          2014-05-14 01:22:48 UTC
        

I'll check it




Comment 14


tman





          2014-05-20 22:48:12 UTC
        

there is any news according this problem?




Comment 15


Sergey Ilinykh





          2014-05-21 06:28:20 UTC
        

had no spare time yet.
may be in few hours.




Comment 16


Sergey Ilinykh





          2014-05-21 18:48:39 UTC
        

ok, I checked in-kernel rtsx driver and it works fine for me.
the same device as yours.
kernel 

most probably you forgot to enable something in kernel.

try next options:
MMC_REALTEK_PCI
MFD_RTSX_PCI
MEMSTICK_REALTEK_PCI

when I insert card into card reader:
# dmesg -c
[  125.487112] mmc0: new SD card at address 1741
[  125.514826] mmcblk0: mmc0:1741 SD01G 982 MiB
[  125.516071]  mmcblk0: p1

# lsmod | grep rts
rtsx_pci_sdmmc          9415  0
mmc_core               80497  2 mmc_block,rtsx_pci_sdmmc
rtsx_pci_ms             5074  0
rtsx_pci               26207  2 rtsx_pci_ms,rtsx_pci_sdmmc
mfd_core                3113  1 rtsx_pci

# uname -r
3.14.4-gentoo




Comment 17


tman





          2014-05-22 17:14:52 UTC
        

i have no clue what going wrong but the module wont load. are your using systemd?




Comment 18


Sergey Ilinykh





          2014-05-22 17:18:44 UTC
        

openrc. I compiled all three as modules. all of them loaded automatically.




Comment 19


tman





          2014-05-22 23:30:04 UTC
        

(In reply to Rion from comment #18)
> openrc. I compiled all three as modules. all of them loaded automatically.

CONFIG_MMC_REALTEK_PCI=y
CONFIG_MFD_RTSX_PCI=y
CONFIG_MEMSTICK_REALTEK_PCI=y


are all set.


do you really have the same hardware?

04:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)




Comment 20


Sergey Ilinykh





          2014-05-23 01:53:27 UTC
        

03:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289 (rev 01)




Comment 21


tman





          2014-05-23 03:33:17 UTC
        

(In reply to Rion from comment #20)
> 03:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289
> (rev 01)

 still wonder why here not work. i have systemd, but all other stuff works but this hardware.

do u have any , what i should else do?




Comment 22


tman





          2014-05-23 03:37:23 UTC
        

(In reply to tman from comment #21)
> (In reply to Rion from comment #20)
> > 03:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. Device 5289
> > (rev 01)
> 
>  still wonder why here not work. i have systemd, but all other stuff works
> but this hardware.
> 
> do u have any , what i should else do?

lsmod | grep rts 

also show here nothing, so seems to be no one mudule is loading. but why, if i have all compiled in the kernel




Comment 23


Sergey Ilinykh





          2014-05-23 05:25:45 UTC
        

try to compile as modules. then you will have the same configuration as me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

