Title: 126739 – equery depends fails with AttributeError: Package instance has no attribute 'get_postmerge_deps'
URL: https://bugs.gentoo.org/show_bug.cgi?id=126739

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 126739
equery depends fails with AttributeError: Package instance has no attribute 'get_postmerge_deps'
Last modified: 2006-07-31 21:00:52 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 126739 
      - equery depends fails with AttributeError: Package instance has no attribute 'get_postmerge_deps'


Summary:
equery depends fails with AttributeError: Package instance has no attribute '...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Tools

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage Tools Team








URL:







Whiteboard:




Keywords:









Duplicates (2):
    

140704 141733

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-03-18 15:59 UTC by Konstantin Sobolev





      Modified:
    
2006-07-31 21:00 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



gentoo.bugzilla
matalo
nbenitezl









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Konstantin Sobolev





          2006-03-18 15:59:20 UTC
        

root@kos ~ $ equery depends emacs-cvs

[ Searching for packages depending on emacs-cvs... ]
Traceback (most recent call last):
File "/usr/bin/equery", line 1639, in ?
cmd.perform(local_opts)
File "/usr/bin/equery", line 1058, in perform
deps = pkg.get_runtime_deps() + pkg.get_compiletime_deps() + pkg.get_postmerge_deps()
AttributeError: Package instance has no attribute 'get_postmerge_deps'

root@kos ~ $ qpkg -I -v gentoolkit
app-portage/gentoolkit-0.2.2_pre3 *
root@kos ~ $ qpkg -I -v portage
sys-apps/portage-2.1_pre6-r3 *

root@kos ~ $ emerge --info
Portage 2.1_pre6-r3 (default-linux/amd64/2005.0, gcc-3.4.5, glibc-2.4-r0, 2.6.15-archck4 x86_64)
=================================================================
System uname: 2.6.15-archck4 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4200+
Gentoo Base System version 1.12.0_pre16
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.4.2-r1
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -mtune=k8 -O2 -fweb -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-march=k8 -mtune=k8 -O2 -fweb -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distcc distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://hess.local/gentoo ftp://fallout.local/gentoo ftp://longobard.local/gentoo ftp://ignatich.local/gentoo http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="ru_RU.KOI8-R"
LINGUAS="en ru"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/wd/portage-tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://10.1.1.146/gentoo-portage"
USE="amd64 7zip X Xaw3d a52 aac aalib alsa artswrappersuid async audiofile automount avi bitmap-fonts bittorrent bluetooth browserplugin bzip2 c++ cairo canvas cap cdparanoia crypt css cups dga dmx dnd dri dts dvd dvdr dvdread dynagraph edl emboss encode erandom extensions extras fbcon ffmpeg finger flac foomaticdb fortran ftp fuse gif gimp gimpprint gkrellm glitz gnutls gopher gpgme gpm graphviz gs gtk gtk2 guile hal iconv icq idn imagemagick imap imlib innodb irc ithreads jabber javascript jpeg kde kipi lcd live lm_sensors logitech-mouse logrotate lua lzo lzw lzw-tiff mad maildir matroska mbox mime mmap mozdevelop mozilla moznocompose moznoirc moznomail mozsvg mp3 mpeg mpeg2 mpeg4 musepack nas ncurses nethack network nls nntp no-old-linux nogg nptl nptlonly nvidia oav ogg oggvorbis opengl oss pam pam_console parse-clocks pda pdf pdflib perl png pnp python qt quicktime rdesktop readline real rss rtc ruby samba sdl silc smime socks5 spell ssl stroke tcpd theora threads tiff timidity truetype truetype-fonts type1 type1-fonts usb utf8 uudeview v4l v4l2 vcd vim-with-x visualization vorbis wv x264 xanim xcomposite xface xfs xgetdefault xinetd xosd xpm xprint xrandr xscreensaver xv xvid xvmc zlib zvbi elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_en linguas_ru userland_GNU video_cards_nv video_cards_nvidia video_cards_vesa video_cards_vga"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, LC_ALL, LDFLAGS




Comment 1


Mikhail Petrov





          2006-04-20 09:29:59 UTC
        

equery d cairo
[ Searching for packages depending on cairo... ]
Traceback (most recent call last):
  File "/usr/bin/equery", line 1639, in ?
    cmd.perform(local_opts)
  File "/usr/bin/equery", line 1058, in perform
    deps = pkg.get_runtime_deps() + pkg.get_compiletime_deps() + pkg.get_postmerge_deps()
AttributeError: Package instance has no attribute 'get_postmerge_deps'

emerge --info
Portage 2.1_pre7-r5 (default-linux/x86/2006.0, gcc-3.3.4, glibc-2.3.4.20050125-r1, 2.6.14-gentoo-r1 i686)
=================================================================
System uname: 2.6.14-gentoo-r1 i686 AMD Athlon(tm) XP 1700+
Gentoo Base System version 1.6.10
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.1-r2
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distro.ibiblio.org/pub/linux/distributions/gentoo/ http://gentoo.mirror.solnet.ch http://gentoo.inode.at/"
LANG="ru_RU.KOI8-R"
LINGUAS="ru"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/xgl-coffee"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apm arts avi bash-completion bitmap-fonts cairo cdparanoia cdr clamav cli crypt ctype cups curl curlwrappers dba divx4linux dri dvd eds emboss encode esd ethereal evo expat fastbuild fbcon flac flash foomaticdb force-cgi-redirect fortran freetype ftp gcj gd gdbm gif glitz gnome gphoto2 gpm gstreamer gtk gtk2 iconv icq imagemagick imap imlib isdnlog java javascript jikes jpeg kde kdexdeltas lcms libg++ libwww lm_sensors mad maildir memlimit mikmod mime ming motif mp3 mpeg msn ncurses nls nptl nvidia ogg oggvorbis opengl oss pam pcre pdflib perl png posix ppds pppd python qt quicktime readline sdl session simplexml soap sockets spamassassin spell spl ssl svg svga tcpd tokenizer truetype truetype-fonts type1-fonts udev usb vcd vorbis xface xine xml xmms xprint xsl xv zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_ru userland_GNU video_cards_nvidia video_cards_vesa video_cards_fbdev"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS





Comment 2


Mikhail Petrov





          2006-04-20 09:31:30 UTC
        

equery d cairo
[ Searching for packages depending on cairo... ]
Traceback (most recent call last):
  File "/usr/bin/equery", line 1639, in ?
    cmd.perform(local_opts)
  File "/usr/bin/equery", line 1058, in perform
    deps = pkg.get_runtime_deps() + pkg.get_compiletime_deps() + pkg.get_postmerge_deps()
AttributeError: Package instance has no attribute 'get_postmerge_deps'

emerge --info
Portage 2.1_pre7-r5 (default-linux/x86/2006.0, gcc-3.3.4, glibc-2.3.4.20050125-r1, 2.6.14-gentoo-r1 i686)
=================================================================
System uname: 2.6.14-gentoo-r1 i686 AMD Athlon(tm) XP 1700+
Gentoo Base System version 1.6.10
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.1-r2
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16.1-r2
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distro.ibiblio.org/pub/linux/distributions/gentoo/ http://gentoo.mirror.solnet.ch http://gentoo.inode.at/"
LANG="ru_RU.KOI8-R"
LINGUAS="ru"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/xgl-coffee"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X acpi alsa apm arts avi bash-completion bitmap-fonts cairo cdparanoia cdr clamav cli crypt ctype cups curl curlwrappers dba divx4linux dri dvd eds emboss encode esd ethereal evo expat fastbuild fbcon flac flash foomaticdb force-cgi-redirect fortran freetype ftp gcj gd gdbm gif glitz gnome gphoto2 gpm gstreamer gtk gtk2 iconv icq imagemagick imap imlib isdnlog java javascript jikes jpeg kde kdexdeltas lcms libg++ libwww lm_sensors mad maildir memlimit mikmod mime ming motif mp3 mpeg msn ncurses nls nptl nvidia ogg oggvorbis opengl oss pam pcre pdflib perl png posix ppds pppd python qt quicktime readline sdl session simplexml soap sockets spamassassin spell spl ssl svg svga tcpd tokenizer truetype truetype-fonts type1-fonts udev usb vcd vorbis xface xine xml xmms xprint xsl xv zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_ru userland_GNU video_cards_nvidia video_cards_vesa video_cards_fbdev"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS




Comment 3


Florian Baur





          2006-07-11 14:42:06 UTC
        

I have the same problem, I can't check dependencies for any package. I'll also post my emerge --info, maybe it helps:

Portage 2.1.1_pre2-r6 (default-linux/x86/2006.0, gcc-4.1.1/vanilla, glibc-2.4-r3, 2.6.17-gentoo-r2 i686)
=================================================================
System uname: 2.6.17-gentoo-r2 i686 AMD Duron(tm) Processor
Gentoo Base System version 1.12.1
ccache version 2.4 [enabled]
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -ftree-vectorize -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer -ftree-vectorize -pipe -fvisibility-inlines-hidden -fno-enforce-eh-specs  -ffriend-injection"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="//cut this part - long and irrelevant//"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--exclude-from=/etc/portage/rsync_excludes"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X aac acpi alsa apache2 apm arts asm avi bitmap-fonts bzip2 canna cdr cjk cli crypt cups divx4linux dlloader dri dvd dvdr emboss encode ffmpeg firefox flac foomaticdb fortran gif glibc-omitfp gpm gstreamer gtk2 hal icq imlib isdnlog jpeg kde kdeenablefinal kdehiddenvisibility kdexdeltas libg++ libwww logitech-mouse mad matroska mikmod mmx motif mozilla mp3 mpeg ncurses nls nptl nptlonly nsplugin nvidia ogg opengl pam pcre pdflib pic png pppd qt qt3 quicktime readline real reflection sdl session spl sse ssl tcpd tetex threads tiff toolbar truetype truetype-fonts type1-fonts udev unicode usb vcd vorbis win32codecs x264 xml xmms xorg xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse kernel_linux linguas_de userland_GNU video_cards_nv video_cards_nvidia video_cards_vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL




Comment 4


Florian Baur





          2006-07-11 14:53:50 UTC
        

I did an "emerge gentoolkit" and now everything works well. I think it can have to do with the upgrade from Python 2.3 to 2.4 I did in the meantime. I ran python-updater but it looks like the update somehow broke equery anyway.




Comment 5


Jakub Moc (RETIRED)






          2006-07-16 14:52:27 UTC
        

*** Bug 140704 has been marked as a duplicate of this bug. ***




Comment 6


Paul Varner (RETIRED)






          2006-07-16 15:42:23 UTC
        

If you are seeing the bug, please try the following:

emerge --unmerge gentoolkit
rm -rf /usr/lib/gentoolkit
emerge gentoolkit

I believe this is being caused by an update that did not remove all compiled python objects from previous versions.




Comment 7


Konstantin Sobolev





          2006-07-16 16:25:53 UTC
        

Yes, it helps. Thanks.




Comment 8


Paul Varner (RETIRED)






          2006-07-25 13:27:54 UTC
        

*** Bug 141733 has been marked as a duplicate of this bug. ***




Comment 9


Paul Varner (RETIRED)






          2006-07-31 21:00:52 UTC
        

Resolving, since I cannot duplicate even with installing the previous versions of gentoolkit and updating through portage.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

