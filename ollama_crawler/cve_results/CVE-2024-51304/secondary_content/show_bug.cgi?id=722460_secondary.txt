Title: 722460 – net-misc/freerdp-2.9999 does not build
URL: https://bugs.gentoo.org/show_bug.cgi?id=722460

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 722460
net-misc/freerdp-2.9999 does not build
Last modified: 2020-05-13 12:23:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 722460 
      - net-misc/freerdp-2.9999 does not build


Summary:
net-misc/freerdp-2.9999 does not build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mike Gilbert








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-05-11 12:38 UTC by Joakim Tjernlund





      Modified:
    
2020-05-13 12:23 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joakim Tjernlund





          2020-05-11 12:38:11 UTC
        

Working in BUILD_DIR: "/var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build"
cmake -C /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/gentoo_common_config.cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DBUILD_TESTING=OFF -DCHANNEL_URBDRC=ON -DWITH_ALSA=ON -DWITH_CCACHE=OFF -DWITH_CLIENT=ON -DWITH_CUPS=ON -DWITH_DEBUG_ALL=OFF -DWITH_MANPAGES=OFF -DWITH_FFMPEG=ON -DWITH_SWSCALE=ON -DWITH_CAIRO=OFF -DWITH_DSP_FFMPEG=ON -DWITH_GSTREAMER_1_0=ON -DWITH_JPEG=ON -DWITH_NEON=OFF -DWITH_OPENH264=ON -DWITH_PULSE=ON -DWITH_SERVER=ON -DWITH_PCSC=OFF -DWITH_LIBSYSTEMD=OFF -DWITH_X11=ON -DWITH_XINERAMA=ON -DWITH_XV=ON -DWITH_WAYLAND=ON -DCMAKE_BUILD_TYPE=Gentoo -DCMAKE_TOOLCHAIN_FILE=/var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/gentoo_toolchain.cmake  /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999
loading initial cache file /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/gentoo_common_config.cmake
-- The C compiler identification is GNU 8.4.0
-- The CXX compiler identification is GNU 8.4.0
-- Check for working C compiler: /usr/bin/x86_64-pc-linux-gnu-gcc
-- Check for working C compiler: /usr/bin/x86_64-pc-linux-gnu-gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/x86_64-pc-linux-gnu-g++
-- Check for working CXX compiler: /usr/bin/x86_64-pc-linux-gnu-g++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found PkgConfig: x86_64-pc-linux-gnu-pkg-config (found version "0.29.2") 
FREERDP_VERSION=2.1.0
CMake Error at /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/CMakeFiles/git-data/grabRef.cmake:36 (file):
  file failed to open for reading (No such file or directory):

    /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/CMakeFiles/git-data/head-ref
Call Stack (most recent call first):
  cmake/GetGitRevisionDescription.cmake:71 (include)
  cmake/GetGitRevisionDescription.cmake:113 (get_git_head_revision)
  cmake/GetGitRevisionDescription.cmake:133 (git_describe)
  CMakeLists.txt:151 (git_get_exact_tag)


CMake Error at /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/CMakeFiles/git-data/grabRef.cmake:36 (file):
  file failed to open for reading (No such file or directory):

    /var/tmp/portage/net-misc/freerdp-2.9999/work/freerdp-2.9999_build/CMakeFiles/git-data/head-ref
Call Stack (most recent call first):
  cmake/GetGitRevisionDescription.cmake:71 (include)
  cmake/GetGitRevisionDescription.cmake:85 (get_git_head_revision)
  CMakeLists.txt:154 (git_rev_parse)


-- Git Revision n/a
-- Looking for __x86_64__

.....

Build type      Gentoo
Install path    /usr
Compiler flags:
C               -O2 -pipe -fPIC -Wall -Wno-unused-result -Wno-unused-but-set-variable -Wno-deprecated-declarations -fvisibility=hidden -Wimplicit-function-declaration -Wredundant-decls -g -DWINPR_DLL
C++             -O2 -pipe -Wno-deprecated-declarations -g
Linker flags:
Executable      -Wl,-O1 -Wl,--as-needed
Module          -Wl,-O1 -Wl,--as-needed
Shared          -Wl,-O1 -Wl,--as-needed

-- Configuring incomplete, errors occurred!




Comment 1


Joakim Tjernlund





          2020-05-11 12:43:27 UTC
        

Upstream this is our bug
https://github.com/FreeRDP/FreeRDP/issues/6167




Comment 2


Mike Gilbert






          2020-05-13 02:56:20 UTC
        

I am unable to reproduce this.

The live ebuild is not meant for everyone; please supply patches if you find a bug.




Comment 3


Joakim Tjernlund





          2020-05-13 12:23:16 UTC
        

(In reply to Mike Gilbert from comment #2)
> I am unable to reproduce this.
> 
> The live ebuild is not meant for everyone; please supply patches if you find
> a bug.

hmm, I found a difference here. In the matching that failed I had packed-refs:
cd FreeRDP_FreeRDP.git/
gentoo64 FreeRDP_FreeRDP.git # ls -l
total 28
drwxrwxr-x  6 portage portage  131 May  8 14:22 ./
drwxrwxr-x 28 portage portage 4096 May  7 01:48 ../
-rw-rw-r--  1 portage portage   66 Dec 16  2016 config
-rw-rw-r--  1 portage portage   73 Dec 16  2016 description
-rw-rw-r--  1 portage portage  100 May 13 14:16 FETCH_HEAD
-rw-rw-r--  1 portage portage   22 Apr 10 17:02 HEAD
drwxrwxr-x  2 portage portage 4096 Dec 16  2016 hooks/
drwxrwxr-x  2 portage portage   31 May  8 14:22 info/
drwxrwxr-x  4 portage portage   28 May  8 14:22 objects/
-rw-rw-r--  1 portage portage 2113 May  8 14:21 packed-refs
drwxrwxr-x  5 portage portage   42 Dec 16  2016 refs/
gentoo64 FreeRDP_FreeRDP.git # pwd
/usr/portage/distfiles/git3-src/FreeRDP_FreeRDP.git
gentoo64 FreeRDP_FreeRDP.git # m packed-refs
# pack-refs with: peeled fully-peeled sorted 
03fa903116fe4837522a5855a2fa07132b0b7379 refs/git-r3/HEAD
973731824bddfd52cda24344f93f9da6f79ea6d4 refs/git-r3/net-misc/freerdp/0/__old__
11b9b1ca6be433f1da5bbf5e152d554d3eb67ac6 refs/heads/stable-2.0
7a0613b8dd9ff81dfb1a3781f81ca548ee15437a refs/tags/1.0-beta1
42735c4690cc0918b4d8421c9e8ad0b95e6bcb2c refs/tags/1.0-beta2
08c1043753635ab60ee9931b0b7ece28079c2d2c refs/tags/1.0-beta3
e411f1cab892f86045bc9554e55d9de84a53c60f refs/tags/1.0-beta4
a3df68a3a3907aed9c2a612131fbe069e5f4e4f5 refs/tags/1.0-beta5
cd43ba1eda03c8988d6761e1bfef3bff75314c87 refs/tags/1.0.0
^41558e4bd6982d508914a4f7b8278615aef1ad9e
8e627212a0b6a3ca83384b1049d81fe91fba25db refs/tags/1.0.1
780d451afad21a22d2af6bd030ee71311856f038 refs/tags/1.1.0-beta+2013071101
1be90abcb9440b6f14b3fca4d7b462d9b3ce6432 refs/tags/1.1.0-beta1
c01a93445096d3717e7a5c0008e2a57dd49b496b refs/tags/1.1.0-beta1+android2
b9bbbf2edc475b81d4b4855324cb1f132631edaf refs/tags/1.1.0-beta1+android3
ea443ace40fe7c5a219893aa1c07421de26fd490 refs/tags/1.1.0-beta1+android4
6d31c503b500c205e121aa10138cbce4a578f150 refs/tags/1.1.0-beta1+android5
a80517089aa52a69810ef3df9107020dfe5c5594 refs/tags/1.1.0-beta1+ios1
b9bbbf2edc475b81d4b4855324cb1f132631edaf refs/tags/1.1.0-beta1+ios2
349dff84f386877e919ebdfc6b536cd48b3c194e refs/tags/1.1.0-beta1+ios3
6d31c503b500c205e121aa10138cbce4a578f150 refs/tags/1.1.0-beta1+ios4
9e14f5e1644e7c6b01eb4d3371018b03105dd9c2 refs/tags/1.2.0-beta1+android7
f5ff6e1bd819a347aa532c1ef1a9cf0c67387507 refs/tags/1.2.0-beta1+android9
5ab2bed8749747b8e4b2ed431fd102bc726be684 refs/tags/2.0.0
f77b4a57dcc373e0cad9285800acb905fcbce048 refs/tags/2.0.0-beta1+android10
86fcb35f4273bf11410f962572e65644c6fe9ae3 refs/tags/2.0.0-beta1+android11
1648deb435ad52206f7aa2afe4b4dff71d9329bc refs/tags/2.0.0-rc0
84f8161897534d9263ffebe43092827d40fc7ffb refs/tags/2.0.0-rc1
7a7b180277a9c04809bf07a54882d7c33eeeb9f9 refs/tags/2.0.0-rc2
a4f147683db7aa99a6075aeaf7c698bc6ba84d11 refs/tags/2.0.0-rc3
e21b72c95f857817b4b32b5ef5406355c005a9e8 refs/tags/2.0.0-rc4
11b9b1ca6be433f1da5bbf5e152d554d3eb67ac6 refs/tags/2.1.0

If I rm that file, it builds









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

