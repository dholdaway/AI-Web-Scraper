Title: 104907 – dev-lang/R fails to build with USE=blas due to -fPIC bug
URL: https://bugs.gentoo.org/show_bug.cgi?id=104907

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 104907
dev-lang/R fails to build with USE=blas due to -fPIC bug
Last modified: 2006-01-15 05:16:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 104907 
      - dev-lang/R fails to build with USE=blas due to -fPIC bug


Summary:
dev-lang/R fails to build with USE=blas due to -fPIC bug
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Science Related Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-09-05 09:20 UTC by Mike Doty (RETIRED)





      Modified:
    
2006-01-15 05:16 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kugelfang









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mike Doty (RETIRED)






          2005-09-05 09:20:36 UTC
        

x86_64-pc-linux-gnu-gcc -shared -L/usr/local/lib  -o libR.so  Rembedded.lo
CConverters.lo CommandLineArgs.lo Rdynload.lo Renviron.lo RNG.lo apply.lo
arithmetic.lo apse.lo array.lo attrib.lo base.lo bind.lo builtin.lo character.lo
coerce.lo colors.lo complex.lo connections.lo context.lo cov.lo cum.lo dcf.lo
datetime.lo debug.lo deparse.lo deriv.lo dotcode.lo dounzip.lo dstruct.lo
duplicate.lo engine.lo envir.lo errors.lo eval.lo format.lo fourier.lo
gevents.lo gram.lo gram-ex.lo graphics.lo identical.lo internet.lo iosupport.lo
lapack.lo list.lo logic.lo main.lo mapply.lo match.lo memory.lo model.lo
names.lo objects.lo optim.lo optimize.lo options.lo par.lo paste.lo pcre.lo
platform.lo plot.lo plot3d.lo plotmath.lo print.lo printarray.lo printvector.lo
printutils.lo qsort.lo random.lo regex.lo registration.lo relop.lo saveload.lo
scan.lo seq.lo serialize.lo size.lo sort.lo source.lo split.lo sprintf.lo
startup.lo subassign.lo subscript.lo subset.lo summary.lo sysutils.lo unique.lo
util.lo version.lo vfonts.lo xxxpr.lo `ls ../appl/*.lo ../nmath/*.lo
../unix/*.lo  2>/dev/null` -lf77blas -latlas -lg2c -lm -lgcc_s 
../extra/zlib/libz.a ../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a  
-lreadline  -ldl -lm
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/../../../../x86_64-pc-linux-gnu/bin/ld:
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/../../../../lib64/libf77blas.a(dgemm.o):
relocation R_X86_64_32 against `a local symbol' can not be used when making a
shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/../../../../lib64/libf77blas.a: could not
read symbols: Bad value
collect2: ld returned 1 exit status
make[3]: *** [libR.so] Error 1
make[3]: Leaving directory `/var/tmp/portage/R-2.1.1/work/R-2.1.1/src/main'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/var/tmp/portage/R-2.1.1/work/R-2.1.1/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/var/tmp/portage/R-2.1.1/work/R-2.1.1/src'
make: *** [R] Error 1

Reproducible: Always
Steps to Reproduce:
1. USE=blas emerge R
2.
3.
Actual Results:  
build failed

Expected Results:  
built sucessfully

Portage 2.0.51.22-r2 (default-linux/amd64/2005.1, gcc-3.4.4, glibc-2.3.5-r1,
2.6.12-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5, 2.4.1-r1
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=k8 -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe -march=k8 -fomit-frame-pointer -mmmx -msse -msse2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.ccccom.com"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa bitmap-fonts crypt emacs fortran ithreads jpeg mapeditor mp3
multislot nptl nvidia offensive oggvorbis opengl pam perl python ssl tcl tcltk
threads tiff tk xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS

blas is provided by acml-2.5.0




Comment 1


Danny van Dyk (RETIRED)






          2005-11-15 13:29:53 UTC
        

Mike: Say, can you reproduce this? I totally forgot about this one and can't get
this error to pop up :-/




Comment 2


Marcus D. Hanwell (RETIRED)






          2006-01-15 05:16:03 UTC
        

Any more info on this one? Closing for now as WORKSFORME, please reopen if you are still having this problem. 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

