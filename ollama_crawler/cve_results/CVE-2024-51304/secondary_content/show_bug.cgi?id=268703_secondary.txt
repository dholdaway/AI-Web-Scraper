Title: 268703 – sys-apps/groff-1.20.1-r1 fails to build due to missing stdc++ dependancy
URL: https://bugs.gentoo.org/show_bug.cgi?id=268703

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 268703
sys-apps/groff-1.20.1-r1 fails to build due to missing stdc++ dependancy
Last modified: 2009-05-05 09:19:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 268703 
      - sys-apps/groff-1.20.1-r1 fails to build due to missing stdc++ dependancy


Summary:
sys-apps/groff-1.20.1-r1 fails to build due to missing stdc++ dependancy
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-05-05 09:07 UTC by Alex Bennee





      Modified:
    
2009-05-05 09:19 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



loki_val
SebastianLuther









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Updated ebuild fixing the dependancies

              (groff-1.20.1-r2.ebuild,1.96 KB,
                text/plain)

            
2009-05-05 09:08 UTC,

            Alex Bennee




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alex Bennee





          2009-05-05 09:07:19 UTC
        

After running a emerge --depclean I noticed my man pages where no longer working.

Obviously libstdc++ had been cleaned away in the process as emerge didn't know what packages used it. Curiously a revdep-rebuild also failed to notice that groff needs rebuilding. Attempting to rebuild groff failed in configure due to missing libstdc++.


Reproducible: Always

Steps to Reproduce:
1. Remove all packages that require libstd++
2. emerge --depclean
3. man <anything>

Actual Results:  

danny distfiles # man find
/usr/bin/gtbl: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory
groff: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory
danny distfiles # ldd /usr/bin/gt
gtbl                        gtf                         gtk-query-immodules-2.0     gtk-window-decorator        gtkdoc-fixxref              gtkdoc-mkman                gtkdoc-scan                 gtkdocize
gtester                     gtk-builder-convert         gtk-query-immodules-2.0-32  gtkdoc-check                gtkdoc-mkdb                 gtkdoc-mktmpl               gtkdoc-scangobj             gtkhtml-editor-test
gtester-report              gtk-demo                    gtk-update-icon-cache       gtkdoc-depscan              gtkdoc-mkhtml               gtkdoc-rebase               gtkdoc-scanobj
danny distfiles # ldd /usr/bin/gtbl
        linux-vdso.so.1 =>  (0x00007fffc75fe000)
        libstdc++.so.6 => not found
        libm.so.6 => /lib/libm.so.6 (0x00007fa4bf159000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fa4bef4b000)
        libc.so.6 => /lib/libc.so.6 (0x00007fa4bec03000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fa4bf3da000)


Expected Results:  
A nicely formatted man page




Comment 1


Alex Bennee





          2009-05-05 09:08:58 UTC
        

Created attachment 190394 [details]
Updated ebuild fixing the dependancies

I added RDEPEND as well as the developer handbook 1.e says: "RDEPEND should be set explicitly even if it's the same as DEPEND because in the future it defaulting to DEPEND is planned to be removed from Portage."




Comment 2


Sebastian Luther (few)





          2009-05-05 09:16:07 UTC
        

I guess you updated gcc and removed the old version without using gcc-config. (See http://www.gentoo.org/doc/en/gcc-upgrading.xml)




Comment 3


Peter Alfredsen (RETIRED)






          2009-05-05 09:19:53 UTC
        

Works for me :-)

pa@loki ~/gentoo-cvs/gentoo-x86/sys-power/acpid $ ldd /usr/bin/gtbl 
	linux-vdso.so.1 =>  (0x00007fff11dff000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.3.3/libstdc++.so.6 (0x00007fe9098a8000)
	libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fe909691000)
	libc.so.6 => /lib/libc.so.6 (0x00007fe90933e000)
	libm.so.6 => /lib/libm.so.6 (0x00007fe9090bc000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fe909bb4000)










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

