Title: 159666 – net-dns/avahi-0.6.16 breaks system
URL: https://bugs.gentoo.org/show_bug.cgi?id=159666

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 159666
net-dns/avahi-0.6.16 breaks system
Last modified: 2007-03-05 22:04:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 159666 
      - net-dns/avahi-0.6.16 breaks system


Summary:
net-dns/avahi-0.6.16 breaks system
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Sven Wegener








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-01 18:40 UTC by Simonas Leleiva





      Modified:
    
2007-03-05 22:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simonas Leleiva





          2007-01-01 18:40:40 UTC
        

gnome-session stopped working, by not finding /usr/lib/libavahi-client.so.3
Re-emerging did not help (it still requires libavahi-common)

Temporary solution:

ln -s /usr/lib/libavahi-common.so.3 /usr/lib/libavahi-client.so
ln -s /usr/lib/libavahi-common.la /usr/lib/libavahi-client.la

(the latter is later required by gnome-vfs, which requires re-emerge to bind against new references of avahi, as breaks on from emerging gnome-ghtml)

Portage 2.1.2_rc4-r4 (default-linux/x86/2006.1/desktop, gcc-4.1.1, glibc-2.5-r0, 2.6.18-suspend2-newra i686)
=================================================================
System uname: 2.6.18-suspend2-newra i686 Intel(R) Pentium(R) M processor 2.00GHz
Gentoo Base System version 1.12.8
Last Sync: Mon, 01 Jan 2007 10:30:01 +0000
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.3.6, 2.4.4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.19
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/splash /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=pentium-m -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="lt_LT.utf8"
LC_ALL="lt_LT.utf8"
LINGUAS="lt"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/xeffects"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aiglx alsa avahi berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dbus divx dlloader dri dvd dvdr eds emboss encode esd fam firefox fortran gdbm gif gmedia gnome gpm gstreamer gtk gtk2 hal iconv isdnlog jpeg ldap libg++ mad mikmod mp3 mpeg ncurses nls nptl nptlonly ogg opengl oss pam pcre pdf perl png ppds pppd python quicktime readline real realmedia reflection sdl session slang spell spl ssl tcpd tetex truetype truetype-fonts type1-fonts udev unicode v4l v4l2 vorbis win32codecs wmp x86 xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse synaptics" KERNEL="linux" LINGUAS="lt" USERLAND="GNU" VIDEO_CARDS="i810 vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Simonas Leleiva





          2007-01-01 18:43:22 UTC
        

(In reply to comment #0)
> gnome-session stopped working, by not finding /usr/lib/libavahi-client.so.3
> Re-emerging did not help (it still requires libavahi-common)

correction:
(it still requires libavahi-client.so.3)





Comment 2


Jakub Moc (RETIRED)






          2007-01-02 01:55:06 UTC
        

How about that you run revdep-rebuild (as you should have done in the first place) and see whether it gets fixed?





Comment 3


Simonas Leleiva





          2007-01-02 06:17:17 UTC
        

I sure did. Nothing was broken against this. Only liblber - which got fixed after I re-emerged openldapi.
Just looks like that .so.3 and .la were removed and now we have to do it by hands. Not an elegant way, though.




Comment 4


Nathan Caldwell





          2007-01-02 13:07:19 UTC
        

I couldn't reproduce this. The symlinks are installed fine for me on upgrade to avahi 0.6.16
wu-ming ~ # equery files avahi
[ Searching for packages matching avahi... ]
* Contents of net-dns/avahi-0.6.16:
/etc
/etc/avahi
/etc/avahi/avahi-daemon.conf
/etc/avahi/avahi-dnsconfd.action
[...snip...]
/usr/lib64
/usr/lib64/libavahi-client.a
/usr/lib64/libavahi-client.la
/usr/lib64/libavahi-client.so -> libavahi-client.so.3.2.1
/usr/lib64/libavahi-client.so.3 -> libavahi-client.so.3.2.1
/usr/lib64/libavahi-client.so.3.2.1
/usr/lib64/libavahi-common.a
/usr/lib64/libavahi-common.la
/usr/lib64/libavahi-common.so -> libavahi-common.so.3.4.3
/usr/lib64/libavahi-common.so.3 -> libavahi-common.so.3.4.3
/usr/lib64/libavahi-common.so.3.4.3





Comment 5


Sven Wegener






          2007-01-02 13:26:56 UTC
        

Same here, I didn't get any linking errors or removed files.




Comment 6


avi





          2007-01-20 18:06:51 UTC
        

i'm getting the same error the "Temporary solution" only works for all gnome apps but gdesklets says "/usr/lib/libgnomevfs-2.so.0: undefined symbol: avahi_service_browser_new"


Portage 2.1.1-r2 (default-linux/amd64/2006.1/desktop, gcc-4.1.1, glibc-2.4-r4, 2.6.18-gentoo-r6 x86_64)
=================================================================
System uname: 2.6.18-gentoo-r6 x86_64 AMD Sempron(tm) Processor 2800+
Gentoo Base System version 1.12.6
Last Sync: Sat, 20 Jan 2007 09:59:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.31-r3
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -msse3 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=athlon64 -msse3 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://mirror.hamakor.org.il/pub/mirrors/gentoo/"
LANG="he_il"
LINGUAS="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X alsa alsa_cards_via82xx alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol avahi berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dlloader dri dvd dvdr eds elibc_glibc emboss encode esd examples fam firefox fortran gdbm gif gnome gpm gstreamer gtk gtk2 ha1 hal hddtemp iconv input_devices_keyboard input_devices_mouse ipv6 isdnlog jpeg kernel_linux lcd_devices_bayrad lcd_devices_cfontz lcd_devices_cfontz633 lcd_devices_glk lcd_devices_hd44780 lcd_devices_lb216 lcd_devices_lcdm001 lcd_devices_mtxorb lcd_devices_ncurses lcd_devices_text ldap libg++ linguas_en_GB mad mikmod mp3 mpeg ncurses netboot nls nptl nptlonly nsplugin nvidia ogg opengl oss pam pcre perl png ppds pppd python quicktime readline reflection sdl sensord session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev unicode userland_GNU video_cards_nvidia vorbis xml xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY






Comment 7


avi





          2007-01-21 12:13:45 UTC
        

Ok now it's works fine, i just reemerge it with the dbus use flag and now the symlinks are installed.

Gentoo prgrmr # equery files avahi

[ Searching for packages matching avahi... ]
* Contents of net-dns/avahi-0.6.16-r1:
/etc
/etc/avahi
...
/usr/lib64/libavahi-client.a
/usr/lib64/libavahi-client.la
/usr/lib64/libavahi-client.so -> libavahi-client.so.3.2.1
/usr/lib64/libavahi-client.so.3 -> libavahi-client.so.3.2.1
/usr/lib64/libavahi-client.so.3.2.1
/usr/lib64/libavahi-common.a
/usr/lib64/libavahi-common.la
/usr/lib64/libavahi-common.so -> libavahi-common.so.3.4.3
/usr/lib64/libavahi-common.so.3 -> libavahi-common.so.3.4.3
/usr/lib64/libavahi-common.so.3.4.3
...





Comment 8


Sven Wegener






          2007-03-05 22:04:44 UTC
        

closing, reporter reports bug as not reproducible/solved.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

