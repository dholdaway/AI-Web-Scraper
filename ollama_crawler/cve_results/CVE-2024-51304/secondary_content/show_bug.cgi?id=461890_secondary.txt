Title: 461890 – dev-util/cmake-2.8.9 fails to emerge under OS X
URL: https://bugs.gentoo.org/show_bug.cgi?id=461890

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 461890
dev-util/cmake-2.8.9 fails to emerge under OS X
Last modified: 2013-03-31 09:46:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 461890 
      - dev-util/cmake-2.8.9 fails to emerge under OS X


Summary:
dev-util/cmake-2.8.9 fails to emerge under OS X
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

All
        OS X
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-03-16 04:28 UTC by MATSUI Tetsushi





      Modified:
    
2013-03-31 09:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




log

              (dev-util:cmake-2.8.9:20130316-011637.log,121.74 KB,
                text/plain)

            
2013-03-16 04:30 UTC,

            MATSUI Tetsushi




Details





patch to gcc-apple

              (gcc-apple-4.2.1-allow_stack_execute.patch,656 bytes,
                patch)

            
2013-03-16 04:31 UTC,

            MATSUI Tetsushi




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


MATSUI Tetsushi





          2013-03-16 04:28:30 UTC
        

dev-util/cmake-2.8.9 fails to emerge with an error of ld saying
"-allow_stack_execute option can only be used when linking a main executable".

I found on the web
http://gcc.gnu.org/ml/gcc-patches/2010-06/msg00533.html
a patch to some version of gcc to prevent passing the erroneous option
when  -dynamiclib or -bundle are specified.
I'm not very sure that this is the correct fix,
but patching similarly to gcc-apple solves the problem.




Comment 1


MATSUI Tetsushi





          2013-03-16 04:30:30 UTC
        

Created attachment 342210 [details]
log




Comment 2


MATSUI Tetsushi





          2013-03-16 04:31:48 UTC
        

Created attachment 342212 [details, diff]
patch to gcc-apple




Comment 3


Fabian Groffen






          2013-03-24 11:38:10 UTC
        

which OSX is this?  I can just recompile cmake here fine (10.7/Lion)




Comment 4


MATSUI Tetsushi





          2013-03-24 13:50:31 UTC
        

(In reply to comment #3)
> which OSX is this?  I can just recompile cmake here fine (10.7/Lion)

I'm still using 10.6.




Comment 5


Fabian Groffen






          2013-03-24 15:21:41 UTC
        

ok, then I'll have to try my 10.5




Comment 6


Fabian Groffen






          2013-03-24 15:51:12 UTC
        

odd, on my 10.5 it compiles fine too




Comment 7


MATSUI Tetsushi





          2013-03-25 00:51:27 UTC
        

Hmm, after re-emerge of gcc-apple, since I patched it,
I cannot reproduce the error, I have to admit.
So, closing this as WORKSFORME is fine now. Thank you.




Comment 8


MATSUI Tetsushi





          2013-03-25 06:45:20 UTC
        

FYI, I have another machine on which the error is still reproducible
(though I have to erase this installation in a few days).
If you would like to know some additional information, I will provide you.




Comment 9


Fabian Groffen






          2013-03-31 09:46:35 UTC
        

If you have more info that could lead to clues here, please reopen.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

