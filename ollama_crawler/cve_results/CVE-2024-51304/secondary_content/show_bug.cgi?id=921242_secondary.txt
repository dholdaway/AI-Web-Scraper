Title: 921242 – Gentoo web services: High latency and crashes
URL: https://bugs.gentoo.org/show_bug.cgi?id=921242

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 921242
Gentoo web services: High latency and crashes
Last modified: 2024-03-11 12:55:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 921242 
      - Gentoo web services: High latency and crashes


Summary:
Gentoo web services: High latency and crashes
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Websites




Classification:

Unclassified




Component:

Packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Packages Website








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-01-03 03:01 UTC by sanomiad





      Modified:
    
2024-03-11 12:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



zagazaw2004









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


sanomiad





          2024-01-03 03:01:42 UTC
        

Hello, 

I am encountering issues with latency and crashes while attempting to utilize https://packages.gentoo.org and https://gitweb.gentoo.org.

I used the following web applications to test the above URLs:

-> https://tools.pingdom.com
-> https://pagespeed.web.dev
-> https://www.webpagetest.org

I use Brave and Librewolf.


Peace,




Comment 1


John Helmert III









          2024-01-03 06:49:19 UTC
        

Can you reproduce latency issues with something like `curl -vIL` or even `traceroute`? What does "crashes" mean here?




Comment 2


sanomiad





          2024-01-04 03:10:06 UTC
        

(In reply to John Helmert III from comment #1)
> Can you reproduce latency issues with something like `curl -vIL` or even
> `traceroute`? What does "crashes" mean here?

Crash: the web pages stop functioning properly and experience a meltdown.

The URLs in question seem to be working better than yesterday, but here are the outputs of the suggested commands:

$ curl -vIL https://gitweb.gentoo.org
                                                                                                                                                               
*   Trying 151.101.129.91:443...
* Connected to gitweb.gentoo.org (151.101.129.91) port 443
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* TLSv1.3 (IN), TLS handshake, Server hello (2):
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
* TLSv1.3 (IN), TLS handshake, Certificate (11):
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
* TLSv1.3 (IN), TLS handshake, Finished (20):
* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
* TLSv1.3 (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=gitweb.gentoo.org
*  start date: Nov 13 16:20:21 2023 GMT
*  expire date: Feb 11 16:20:20 2024 GMT
*  subjectAltName: host "gitweb.gentoo.org" matched cert's "gitweb.gentoo.org"
*  issuer: C=US; O=Let's Encrypt; CN=R3
*  SSL certificate verify ok.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://gitweb.gentoo.org/
* [HTTP/2] [1] [:method: HEAD]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: gitweb.gentoo.org]
* [HTTP/2] [1] [:path: /]
* [HTTP/2] [1] [user-agent: curl/8.4.0]
* [HTTP/2] [1] [accept: */*]
> HEAD / HTTP/2
> Host: gitweb.gentoo.org
> User-Agent: curl/8.4.0
> Accept: */*
> 
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* old SSL session ID is stale, removing
< HTTP/2 200 
HTTP/2 200 
< server: nginx
server: nginx
< content-type: text/html; charset=UTF-8
content-type: text/html; charset=UTF-8
< last-modified: Thu, 04 Jan 2024 02:59:05 GMT
last-modified: Thu, 04 Jan 2024 02:59:05 GMT
< expires: Thu, 04 Jan 2024 03:14:05 GMT
expires: Thu, 04 Jan 2024 03:14:05 GMT
< content-security-policy: default-src 'self' https://assets.gentoo.org; img-src *; media-src *; style-src 'self' https://assets.gentoo.org 'unsafe-inline'
content-security-policy: default-src 'self' https://assets.gentoo.org; img-src *; media-src *; style-src 'self' https://assets.gentoo.org 'unsafe-inline'
< accept-ranges: bytes
accept-ranges: bytes
< date: Thu, 04 Jan 2024 02:59:06 GMT
date: Thu, 04 Jan 2024 02:59:06 GMT
< via: 1.1 varnish
via: 1.1 varnish
< age: 0
age: 0
< x-served-by: cache-iah1720100-IAH
x-served-by: cache-iah1720100-IAH
< x-cache: MISS
x-cache: MISS
< x-cache-hits: 0
x-cache-hits: 0
< x-timer: S1704337145.145747,VS0,VE1346
x-timer: S1704337145.145747,VS0,VE1346
< vary: Accept-Encoding
vary: Accept-Encoding
< strict-transport-security: max-age=300
strict-transport-security: max-age=300
< alt-svc: h3=":443";ma=86400,h3-29=":443";ma=86400,h3-27=":443";ma=86400
alt-svc: h3=":443";ma=86400,h3-29=":443";ma=86400,h3-27=":443";ma=86400
< content-length: 290947
content-length: 290947

< 
* Connection #0 to host gitweb.gentoo.org left intact

-----------------------------------------------------------------------------------------------------------------------------------

$ curl -vIL https://packages.gentoo.org                                                                                                                                                                       

*   Trying 151.101.129.91:443...
* Connected to packages.gentoo.org (151.101.129.91) port 443
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/certs/ca-certificates.crt
*  CApath: /etc/ssl/certs
* TLSv1.3 (IN), TLS handshake, Server hello (2):
* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
* TLSv1.3 (IN), TLS handshake, Certificate (11):
* TLSv1.3 (IN), TLS handshake, CERT verify (15):
* TLSv1.3 (IN), TLS handshake, Finished (20):
* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
* TLSv1.3 (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=packages.gentoo.org
*  start date: Nov 13 16:20:16 2023 GMT
*  expire date: Feb 11 16:20:15 2024 GMT
*  subjectAltName: host "packages.gentoo.org" matched cert's "packages.gentoo.org"
*  issuer: C=US; O=Let's Encrypt; CN=R3
*  SSL certificate verify ok.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://packages.gentoo.org/
* [HTTP/2] [1] [:method: HEAD]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: packages.gentoo.org]
* [HTTP/2] [1] [:path: /]
* [HTTP/2] [1] [user-agent: curl/8.4.0]
* [HTTP/2] [1] [accept: */*]
> HEAD / HTTP/2
> Host: packages.gentoo.org
> User-Agent: curl/8.4.0
> Accept: */*
> 
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
* old SSL session ID is stale, removing
< HTTP/2 200 
HTTP/2 200 
< server: nginx
server: nginx
< content-type: text/html; charset=utf-8
content-type: text/html; charset=utf-8
< cache-control: max-age=300
cache-control: max-age=300
< strict-transport-security: max-age=31536000
strict-transport-security: max-age=31536000
< x-frame-options: DENY
x-frame-options: DENY
< access-control-allow-origin: https://bugs.gentoo.org
access-control-allow-origin: https://bugs.gentoo.org
< content-security-policy: frame-ancestors 'none'
content-security-policy: frame-ancestors 'none'
< access-control-allow-methods: GET
access-control-allow-methods: GET
< accept-ranges: bytes
accept-ranges: bytes
< date: Thu, 04 Jan 2024 03:08:50 GMT
date: Thu, 04 Jan 2024 03:08:50 GMT
< via: 1.1 varnish
via: 1.1 varnish
< age: 0
age: 0
< x-served-by: cache-iah17269-IAH
x-served-by: cache-iah17269-IAH
< x-cache: MISS
x-cache: MISS
< x-cache-hits: 0
x-cache-hits: 0
< x-timer: S1704337730.989532,VS0,VE802
x-timer: S1704337730.989532,VS0,VE802
< vary: Accept-Encoding
vary: Accept-Encoding
< alt-svc: h3=":443";ma=86400,h3-29=":443";ma=86400,h3-27=":443";ma=86400
alt-svc: h3=":443";ma=86400,h3-29=":443";ma=86400,h3-27=":443";ma=86400
< content-length: 75540
content-length: 75540

< 
* Connection #0 to host packages.gentoo.org left intact




Comment 3


Robin Johnson









          2024-01-07 01:17:33 UTC
        

There are no errors in that Curl output.

"Crash: the web pages stop functioning properly and experience a meltdown."
What is crashing? Brave?

Do you have other browsers or SSL libraries you can test with?

Do you have another system (e.g. Android phone) you can similarly test the sites with? (to rule out a fault on your system specifically).

Both of those websites are served via a CDN for performance, so, how about comparing them to the origin services that the CDN fronts:
https://gitweb-cdn-origin.gentoo.org/
https://packages-cdn-origin.gentoo.org/

If the CDN URLs causes Brave to crash and the origin URLs don't cause a crash, then please let the Brave developers know about the crash.

Basically on your end, you have to identify the variables that cause the crash, enough so that somebody else can reproduce the problem, or you can remove the source of the problem yourself.




Comment 4


sanomiad





          2024-01-24 19:00:00 UTC
        

(In reply to Robin Johnson from comment #3)
> There are no errors in that Curl output.
> 
> "Crash: the web pages stop functioning properly and experience a meltdown."
> What is crashing? Brave?
> 
> Do you have other browsers or SSL libraries you can test with?
> 
> Do you have another system (e.g. Android phone) you can similarly test the
> sites with? (to rule out a fault on your system specifically).
> 
> Both of those websites are served via a CDN for performance, so, how about
> comparing them to the origin services that the CDN fronts:
> https://gitweb-cdn-origin.gentoo.org/
> https://packages-cdn-origin.gentoo.org/
> 
> If the CDN URLs causes Brave to crash and the origin URLs don't cause a
> crash, then please let the Brave developers know about the crash.
> 
> Basically on your end, you have to identify the variables that cause the
> crash, enough so that somebody else can reproduce the problem, or you can
> remove the source of the problem yourself.

Despite not encountering crashes anymore, the latency feels like a game of hide-and-seek. Occasionally, both Brave & LibreWolf respond promptly, but at other times, there is a noticeable delay. Honestly, it's challenging to pinpoint the exact cause of this issue and keep track of it. I haven't come across anyone else facing the same problem, so I guess I'll just have to live with it.

At your leisure, you can wrap up this bug. 

Thank you,









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

