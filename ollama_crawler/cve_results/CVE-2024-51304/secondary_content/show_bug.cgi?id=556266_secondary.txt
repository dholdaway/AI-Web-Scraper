Title: 556266 – net-misc/tigervnc: add epatch_user
URL: https://bugs.gentoo.org/show_bug.cgi?id=556266

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 556266
net-misc/tigervnc: add epatch_user
Last modified: 2015-09-18 21:43:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 556266 
      - net-misc/tigervnc: add epatch_user


Summary:
net-misc/tigervnc: add epatch_user
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       enhancement
      


Assignee:

Raúl Porcel (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-07-29 20:23 UTC by Fedja Beader





      Modified:
    
2015-09-18 21:43 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



fedja









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




=tigervnc-1.3.1-r4 replace change directory with pushd/popd

              (pushd.patch,1.34 KB,
                patch)

            
2015-09-16 23:54 UTC,

            Fedja Beader




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Fedja Beader





          2015-07-29 20:23:05 UTC
        

I am trying to patch tigervnc with this: https://github.com/TigerVNC/tigervnc/issues/2 as it is incredibly useful for AwesomeWM.

I am patching e.g. 
/tmp/portage/net-misc/tigervnc-1.3.1-r4/work/tigervnc-1.3.1/vncviewer/DesktopWindow.cxx
but after src_prepare, the current working directory is set to
/tmp/portage/net-misc/tigervnc-1.3.1-r4/work/tigervnc-1.3.1/unix/xserver
and Portage does not allow me to use relative addressing in .patch files (../../vncviewer/DesktopWindow.cxx):


    if use server ; then
        cd unix/xserver
        epatch "${WORKDIR}"/patches/0999_server_xserver-1.14-rebased.patch
        eautoreconf
    fi

perhaps it should use pushd/popd or some variation of that?

Reproducible: Always




Comment 1


Fedja Beader





          2015-09-16 23:54:45 UTC
        

Created attachment 412084 [details, diff]
=tigervnc-1.3.1-r4 replace change directory with pushd/popd

Since this bug report is collecting bit dust and I am sure that there is never an appropriate spot for epatch_user, I am submitting this patch that makes my patches patch.




Comment 2


Fedja Beader





          2015-09-18 21:43:29 UTC
        

I just had a thought about doing pushd "$S" and popd in my /etc/portage/bashrc epatch_user hack ... and guess what? It works.

Thus as far as I am concerned, this bug can be closed.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

