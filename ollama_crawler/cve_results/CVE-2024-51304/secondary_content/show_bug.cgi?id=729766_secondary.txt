Title: 729766 – dev-util/intel-graphics-compiler-1.0.4111 keeps rebuilding on world update
URL: https://bugs.gentoo.org/show_bug.cgi?id=729766

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 729766
dev-util/intel-graphics-compiler-1.0.4111 keeps rebuilding on world update
Last modified: 2020-06-30 14:12:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 729766 
      - dev-util/intel-graphics-compiler-1.0.4111 keeps rebuilding on world update


Summary:
dev-util/intel-graphics-compiler-1.0.4111 keeps rebuilding on world update
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Marek Szuba (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-06-26 20:05 UTC by Constantin Baranov





      Modified:
    
2020-06-30 14:12 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Constantin Baranov





          2020-06-26 20:05:35 UTC
        

Commenting out the COMMON variable in the ebuild 'fixes' the issue. Apparently, it's too much of slots magic in the dependencies. I did not figure out what exactly is wrong there.

Reproducible: Always

Steps to Reproduce:
1. Have a stable amd64 system
2. emerge intel-neo, pulling from ~amd64 what is needed, including intel-graphics-compiler
3. emerge -auD @world
Actual Results:  
intel-graphics-compiler wants to rebuild

Expected Results:  
Nothing needs to rebuild at step 3.

Portage 2.3.99 (python 3.7.7-final-0, default/linux/amd64/17.1/desktop/plasma/systemd, gcc-9.3.0, glibc-2.30-r8, 5.4.48-gentoo x86_64)
=================================================================
System uname: Linux-5.4.48-gentoo-x86_64-Intel-R-_Core-TM-_i7-7700K_CPU_@_4.20GHz-with-gentoo-2.6
KiB Mem:    65803628 total,  28490384 free
KiB Swap:   67108860 total,  67108860 free
Timestamp of repository gentoo: Fri, 26 Jun 2020 18:00:01 +0000
Head commit of repository gentoo: e49a20996ec389f3babfb2f2bcc6983638c448ca
Head commit of repository const: 8e5fcb05b389bb487a01ab62b2c80cd103808cc6

sh bash 5.0_p17
ld GNU ld (Gentoo 2.33.1 p2) 2.33.1
app-shells/bash:          5.0_p17::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.30.3::gentoo
dev-lang/python:          2.7.18::gentoo, 3.7.7-r2::gentoo
dev-util/cmake:           3.16.5::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/sandbox:         2.18::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.16.1-r1::gentoo
sys-devel/binutils:       2.33.1-r1::gentoo
sys-devel/gcc:            9.3.0::gentoo
sys-devel/gcc-config:     2.2.1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 5.4-r1::gentoo (virtual/os-headers)
sys-libs/glibc:           2.30-r8::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 
    sync-rsync-verify-jobs: 1
    sync-rsync-vcs-ignore: true
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-max-age: 24

const
    location: /opt/portage
    sync-type: git
    sync-uri: https://github.com/const86/portage.git
    masters: gentoo

local
    location: /usr/local/portage
    masters: gentoo

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="@FREE"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe -g"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -march=native -pipe -g"
DISTDIR="/data/distfiles"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs candy cgroup compressdebug config-protect-if-modified distlocks downgrade-backup ebuild-locks fixlafiles installsources ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersync xattr"
FFLAGS="-O2 -march=native -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--gc-sections,--sort-common -g"
MAKEOPTS="-j8 -O"
PKGDIR="/var/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X a52 aac acl acpi activities alsa amd64 branding bzip2 cairo caps cdda cdr cli colord crypt cups curl dbus declarative djvu dri dts dv dvd dvdr emacs emboss encode exif fam ffmpeg fftw flac fontconfig gif git gmp gnome-keyring gtk hscolour iconv icu idn inotify ipv6 jbig jpeg jpeg2k kde kipi kwallet lame lcms libass libnotify libsamplerate libtirpc linguas_en linguas_en_US linguas_ru lm-sensors lm_sensors lzma lzo mad matroska mms mng modplug mp3 mp4 mpeg multilib musepack ncurses networkmanager nptl ogg openexr opengl openmp pam pango pch pcntl pcre pdf phonon plasma png policykit ppds pulseaudio qml qt5 raw readline sdl seccomp semantic-desktop slp smp speex spell split-usr sqlite sqlite3 ssl startup-notification svg systemd taglib theora threads tiff timidity truetype udev udisks unicode upnp upower usb v4l vaapi vdpau vorbis wavpack webp widgets wmf x264 xattr xcb xft xml xmp xpm xscreensaver xulrunner xv xvid zlib" ABI_X86="32 64" ADA_TARGET="gnat_2018" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 fma3 mmx mmxext mpx popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3" CURL_SSL="openssl" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="evdev" KERNEL="linux" L10N="en ru" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-2" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_7" PYTHON_TARGETS="python2_7 python3_7" QEMU_SOFTMMU_TARGETS="x86_64" RUBY_TARGETS="ruby25" USERLAND="GNU" VIDEO_CARDS="i915 i965 intel iris nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Marek Szuba (RETIRED)







          2020-06-27 18:39:57 UTC
        

I cannot reproduce this on my end, and I have tried on three different systems.

Could you specify exactly what exactly it is that you pull from ~amd64?




Comment 2


Constantin Baranov





          2020-06-29 06:17:05 UTC
        

(In reply to Marek Szuba from comment #1)
> Could you specify exactly what exactly it is that you pull from ~amd64?

=sys-firmware/edk2-ovmf-999999 **
dev-libs/intel-neo
dev-libs/opencl-clang
dev-util/clinfo
dev-util/intel-graphics-compiler
dev-util/intel-ocl-sdk
dev-util/spirv-llvm-translator
kde-misc/colord-kde
media-gfx/argyllcms
media-gfx/displaycal
media-libs/gmmlib
net-im/skypeforlinux
x11-apps/igt-gpu-tools




Comment 3


Constantin Baranov





          2020-06-30 07:46:56 UTC
        

As LLVM 10 got in stable, I do not see this bug anymore. Maybe it is masked by the fact that LLVM 10 is the highest slot in the tree, or maybe it is fixed somehow.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

