Title: 134563 – Depgraph creation failed.
URL: https://bugs.gentoo.org/show_bug.cgi?id=134563

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 134563
Depgraph creation failed.
Last modified: 2006-05-28 04:14:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 134563 
      - Depgraph creation failed.


Summary:
Depgraph creation failed.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-27 12:48 UTC by Samuel Penn





      Modified:
    
2006-05-28 04:14 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Samuel Penn





          2006-05-27 12:48:05 UTC
        

Sometimes a package seems to get the dependencies wrong, and ends up having a dependency on a masked package. When this happens, "emerge -p world" breaks, and the only way to fix it seems to be to add the masked packages into package.keywords. e.g.:


sam@fenris ~ $ emerge -p world

These are the packages that I would merge, in order:

Calculating world dependencies \
!!! All ebuilds that could satisfy ">=perl-core/Test-Harness-2.56" have been masked.
!!! One of the following masked packages is required to complete your request:
- perl-core/Test-Harness-2.56 (masked by: ~amd64 keyword)

For more information, see MASKED PACKAGES section in the emerge man page or
refer to the Gentoo Handbook.

!!! Problem resolving dependencies for x11-wm/fvwm
!!! Depgraph creation failed.


It would be nice if, instead of failing to list anything, the offending packages were removed from the list (and an error given). I don't have any keywords defined against the fvwm package, so it's not a case of running unstable packages, but I'm now being 'forced' to mark some packages as unstable just to get a list of what needs upgrading.


emerge --info output:

Portage 2.0.54-r2 (default-linux/amd64/2005.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.15-gentoo-r7 x86_64)
=================================================================
System uname: 2.6.15-gentoo-r7 x86_64 AMD Athlon(tm) 64 Processor 3200+
Gentoo Base System version 1.6.14
dev-lang/python:     2.3.4-r1, 2.4.2
dev-python/pycrypto: 2.0-r1
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/X11/xkb /usr/lib64/mozilla/defaults/pref /usr/share/config"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://212.219.56.152/sites/www.ibiblio.org/gentoo/ ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://194.117.143.72 ftp://213.186.33.38/gentoo-distfiles/ http://212.219.56.142/sites/www.ibiblio.org/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://wotan.glendale/gentoo-portage"
USE="amd64 X aac aalib alsa audiofile avi berkdb bitmap-fonts bootstrap bzip2 cdparanoia cli crypt cups curl dri dvd dvdread eds emboss encode esd exif expat fam ffmpeg flac foomaticdb fortran gd gif gimpprint glut gmp gpm gstreamer gtk gtk2 idn imagemagick imap imlib ipv6 isdnlog jabber java jpeg junit kde lcms ldap lua lzw lzw-tiff mad mapeditor mjpeg mng motif mozcalendar mozilla mozsvg mp3 mpeg mysql ncurses nls nntp nsplugin ogg oggvorbis openal opengl oss pam pcre pdf pdflib perl png pppd python qt quicktime rdesktop readline reflection samba sdl session spell spl ssl subversion svg tcltk tcpd theora tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis wmf xcomposite xine xinerama xml xml2 xmms xorg xpm xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  CTARGET, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTAGE_RSYNC_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-05-27 16:20:39 UTC
        

emerge --sync





Comment 2


Samuel Penn





          2006-05-28 04:07:41 UTC
        

That's not the point. emerge shouldn't break because of a mistake in one package. It should still be able to show dependencies for unrelated packages.




Comment 3


Jakub Moc (RETIRED)






          2006-05-28 04:14:02 UTC
        

(In reply to comment #2)
> That's not the point. emerge shouldn't break because of a mistake in one
> package. It should still be able to show dependencies for unrelated packages.

Feel free to submit a patch that finds "unrelated" packages. Emerge doesn't break, emerge does the correct thing. Guessing is not a good way to produce dependencies...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

