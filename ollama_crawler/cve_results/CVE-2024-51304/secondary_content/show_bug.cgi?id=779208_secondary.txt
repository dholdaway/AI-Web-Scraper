Title: 779208 – dev-python/pygobject-3.40.0: tests timeout with py3.8
URL: https://bugs.gentoo.org/show_bug.cgi?id=779208

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 779208
dev-python/pygobject-3.40.0: tests timeout with py3.8
Last modified: 2021-04-18 07:20:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 779208 
      - dev-python/pygobject-3.40.0: tests timeout with py3.8


Summary:
dev-python/pygobject-3.40.0: tests timeout with py3.8
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-03-30 07:24 UTC by Michał Górny





      Modified:
    
2021-04-18 07:20 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jarausch
python









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




testlog.txt (py3.8)

              (testlog.txt,24.42 KB,
                text/plain)

            
2021-03-30 07:24 UTC,

            Michał Górny




Details





/var/log/portage/dev-python:pygobject-3.40.0:20210330-071708.log

              (dev-python:pygobject-3.40.0:20210330-071708.log,250.63 KB,
                text/plain)

            
2021-03-30 07:24 UTC,

            Michał Górny




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michał Górny









          2021-03-30 07:24:12 UTC
        

Created attachment 696177 [details]
testlog.txt (py3.8)

(noticed while trying to bump it to 3.40.1 that exhibits the same problem)

The package's tests pass with py3.7 but seem to hang and timeout on py3.8.  This doesn't seem to be load-related -- I've tried with ~idle machine, py3.7 finishes in ~20 s, and the timeout is much longer than that.

The hang is in:

../pygobject-3.40.0/tests/test_mainloop.py .

(apparently the second test there)




Comment 1


Michał Górny









          2021-03-30 07:24:46 UTC
        

Created attachment 696180 [details]
/var/log/portage/dev-python:pygobject-3.40.0:20210330-071708.log




Comment 2


Michał Górny









          2021-03-30 07:25:03 UTC
        

Portage 3.0.17 (python 3.9.2-final-0, default/linux/amd64/17.1/desktop, gcc-10.2.0, glibc-2.32-r8, 5.11.10-gentoo-dist x86_64)
=================================================================
System uname: Linux-5.11.10-gentoo-dist-x86_64-AMD_Ryzen_5_3600_6-Core_Processor-with-glibc2.32
KiB Mem:    32898560 total,  22587508 free
KiB Swap:          0 total,         0 free
Head commit of repository gentoo: 70cc8855a97cb8a2193312399190a42fd72a779a

sh bash 5.1_p4
ld GNU ld (Gentoo 2.35.2 p1) 2.35.2
distcc 3.3.3 x86_64-pc-linux-gnu [disabled]
ccache version 4.2 [enabled]
app-shells/bash:          5.1_p4::gentoo
dev-java/java-config:     2.3.1::gentoo
dev-lang/perl:            5.32.1::gentoo
dev-lang/python:          2.7.18_p7::gentoo, 3.6.13::gentoo, 3.7.10::gentoo, 3.8.8::gentoo, 3.9.2::gentoo, 3.10.0_alpha6-r1::gentoo
dev-util/ccache:          4.2::gentoo
dev-util/cmake:           3.20.0::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.7-r1::gentoo
sys-apps/sandbox:         2.22::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.71::gentoo
sys-devel/automake:       1.15.1-r2::gentoo, 1.16.3-r1::gentoo
sys-devel/binutils:       2.35.2::gentoo
sys-devel/gcc:            9.3.0-r2::gentoo, 10.2.0-r5::gentoo
sys-devel/gcc-config:     2.4::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.3::gentoo
sys-kernel/linux-headers: 5.11::gentoo (virtual/os-headers)
sys-libs/glibc:           2.32-r8::gentoo
Repositories:

gentoo
    location: /home/mgorny/git/gentoo
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo.git
    priority: -1000
    sync-git-verify-commit-signature: true

python
    location: /home/mgorny/git/python
    masters: gentoo

Installed sets: @mg_depends_cb_agent
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CC="x86_64-pc-linux-gnu-gcc-10.2.0"
CFLAGS="-march=znver2 --param l1-cache-size=32 --param l1-cache-line-size=64 -O2 -pipe -frecord-gcc-switches"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/qmail/alias /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXX="x86_64-pc-linux-gnu-g++-10.2.0"
CXXFLAGS="-march=znver2 --param l1-cache-size=32 --param l1-cache-line-size=64 -O2 -pipe -frecord-gcc-switches"
DISTDIR="/tmp/dist"
EMERGE_DEFAULT_OPTS="--with-bdeps y --ask --keep-going --quiet-build=n --dynamic-deps=n --autounmask=n"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-march=znver2 --param l1-cache-size=32 --param l1-cache-line-size=64 -O2 -pipe -frecord-gcc-switches"
FEATURES="assume-digests binpkg-logs binpkg-multi-instance buildpkg ccache cgroup collision-protect config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync mount-sandbox multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms sign strict strict-keepdir test unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
FFLAGS="-march=znver2 --param l1-cache-size=32 --param l1-cache-line-size=64 -O2 -pipe -frecord-gcc-switches"
GENTOO_MIRRORS=""
INSTALL_MASK="/test /usr/share/locale -/usr/share/locale/pl"
LANG="pl_PL.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--defsym=__gentoo_check_ldflags__=0"
MAKEOPTS="-j12"
PKGDIR="/var/cache/binpkg"
PORTAGE_BINHOST=" 	https://dev.gentoo.org/~mgorny/binpkg/amd64/pypy 	https://dev.gentoo.org/~mgorny/binpkg/amd64/kernel"
PORTAGE_COMPRESS="lzip"
PORTAGE_COMPRESS_FLAGS="-9"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --times --compress --force --whole-file --delete --stats --timeout=45 --exclude=/distfiles --exclude=/packages --exclude=/local --exclude=CVS --exclude=/metadata/cache --omit-dir-times"
PORTAGE_TMPDIR="/tmp"
USE="3dnow 3dnowext X a52 aac acl adns aio alsa amd64 ayatana bash-completion bluetooth branding btrfs bzip2 cairo caps cdda cdr cli crypt cups curl dbus dist-kernel djvu dri dts dvb dvd dvdr egl emboss exif fftw flac fontconfig fortran gd gif glamor gmp gnuplot gnutls gphoto2 gstreamer gtk gui iconv icu idn ipv6 jpeg jpeg2k kate latex lcms libass libatomic libglvnd liblockfile libnotify libproxy libsamplerate libsecret libtiger libtirpc linguas_pl lz4 lzma lzo mad mmap mmxext mng mp3 mp4 mpeg mtp multilib ncurses nls nptl ogg openal opengl openmp openvg opus osmesa pam pango pch pcre pcre-jit pdf plotutils png policykit postscript ppds pulseaudio qt3support qt5 readline sctp sdl seccomp slang smp sndfile speex spell split-usr sse3 ssl startup-notification svg systemd t1lib tcpd test threads tiff truetype udev udisks unicode upower usb v4l2 vaapi verify-sig vhosts vim-syntax vorbis vulkan wavpack wayland webp wmf wxwidgets x264 xattr xcb xft xml xpm xv xvid xvmc zeroconf zlib zstd" ABI_X86="64 32" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel emu10k1 mpu401 pcsp virmidi" APACHE2_MODULES="socache_shmcb unixd actions alias deflate filter mime mime_magic negotiation rewrite" CALLIGRA_FEATURES="karbon sheets words" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2 aes avx avx2 f16c fma3 pclmul popcnt sha sse3 sse4_1 sse4_2 sse4a ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput" KERNEL="linux" L10N="pl" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LIRC_DEVICES="serial" LLVM_TARGETS="*" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" NGINX_MODULES_HTTP="gzip limit_conn limit_req rewrite spdy uwsgi" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-3 php7-4" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_8" PYTHON_TARGETS="python3_8 *" QEMU_SOFTMMU_TARGETS="aarch64 arm i386 mips mips64 mips64el mipsel ppc ppc64 ppc64abi32 x86_64" QEMU_USER_TARGETS="aarch64 arm ppc ppc64" RUBY_TARGETS="ruby26 *" SANE_BACKENDS="artec_eplus48u test" USERLAND="GNU" VIDEO_CARDS="amdgpu radeon radeonsi r600" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, LC_ALL, LINGUAS, PORTAGE_BUNZIP2_COMMAND, PORTAGE_RSYNC_EXTRA_OPTS




Comment 3


Matt Turner






          2021-04-18 03:08:49 UTC
        

Huh, interesting. I don't have Python 3.8 immediately available, but the test passes for me with 3.9 in 14.50s. Does 3.9 time out for you?




Comment 4


Michał Górny









          2021-04-18 07:20:29 UTC
        

I can't reproduce it anymore with 3.40.0, neither 3.40.1.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

