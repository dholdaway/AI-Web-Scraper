Title: 525590 – app-crypt/qca-ossl-2.0.0_beta3 configure hangs at verifying Qt 4 build environment
URL: https://bugs.gentoo.org/show_bug.cgi?id=525590

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 525590
app-crypt/qca-ossl-2.0.0_beta3 configure hangs at verifying Qt 4 build environment
Last modified: 2014-10-19 00:04:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 525590 
      - app-crypt/qca-ossl-2.0.0_beta3 configure hangs at verifying Qt 4 build environment


Summary:
app-crypt/qca-ossl-2.0.0_beta3 configure hangs at verifying Qt 4 build enviro...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-10-16 19:06 UTC by far jump





      Modified:
    
2014-10-19 00:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



crypto+disabled
qt









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,4.45 KB,
                text/plain)

            
2014-10-16 19:06 UTC,

            far jump




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


far jump





          2014-10-16 19:06:38 UTC
        

Created attachment 386778 [details]
emerge --info

Brand new install of gentoo kernel 3.14.14.  everything worked perfect.  emerged standard apps we use: ruby, postgresql, pg elogv, lm_sensors nfs-utils, etc...  zero problems.  Did emerge -DNu world just to make sure everything was up to date - once again zero problems. The last step is to install KDE:
emerge kde-meta xorg-server xdm
when it gets to qca-ossl-2.0.0_beta3_r2 it shows:

Configuring qca-ossl ...
Verifying Qt 4 build environment

It is hangs ...




Comment 1


far jump





          2014-10-17 14:08:50 UTC
        

I used --skipfirst to get past qca-ossl
emerge --skipfirst kde-meta xorg-server xdm
as you know kde-meta has ~ 380 packages.  All but 5 emerged w/o problems.  I am now left with:
>emerge -pv kde-meta

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] app-crypt/qca-ossl-2.0.0_beta3-r2:2  USE="-debug" 0 kB
[ebuild  N     ] kde-base/kdeplasma-addons-4.12.5:4/4.12  USE="exif semantic-desktop (-aqua) -attica -debug -desktopglobe -fcitx -ibus -json -oauth -qalculate -qwt -scim" 0 kB
[ebuild  N     ] kde-base/kopete-4.12.5:4/4.12  USE="addbookmarks autoreplace contactnotes handbook highlight history nowlistening pipes privacy ssl statistics texteffect translator urlpicpreview xmpp (-aqua) -debug -gadu -groupwise -jingle -latex -meanwhile -msn -oscar (-otr) -skype -sms -testbed -v4l -webpresence -winpopup -yahoo -zeroconf" 0 kB
[ebuild  N     ] kde-base/kdenetwork-meta-4.12.5:4  USE="(-aqua) -ppp" 0 kB
[ebuild  N     ] kde-base/kde-meta-4.12.5:4  USE="nls semantic-desktop -accessibility (-aqua) -sdk" 0 kB

Total: 5 packages (5 new), Size of downloads: 0 kB

when I run emerge kde-meta
Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 5) app-crypt/qca-ossl-2.0.0_beta3-r2
 * qca-ossl-2.0.0-beta3.tar.bz2 SHA256 SHA512 WHIRLPOOL size ;-) ...                                                             [ ok ]
>>> Unpacking source...
>>> Unpacking qca-ossl-2.0.0-beta3.tar.bz2 to /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work
>>> Source unpacked in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work
>>> Preparing source in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3 ...
 * Applying qca-ossl-openssl-1.0.0.patch ...                                                                                     [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3 ...
Configuring qca-ossl ...
Verifying Qt 4 build environment ... 


It has be sitting there for 12 hours ....




Comment 2


Davide Pesavento (RETIRED)






          2014-10-18 01:36:05 UTC
        

Can you add --verbose to the configure command line in qca-ossl-2.0.0_beta3-r2.ebuild? Like this... (note the \ at the end of the line)

===================================================================
RCS file: /var/cvsroot/gentoo-x86/app-crypt/qca-ossl/qca-ossl-2.0.0_beta3-r2.ebuild,v
retrieving revision 1.9
diff -u -r1.9 qca-ossl-2.0.0_beta3-r2.ebuild
--- qca-ossl-2.0.0_beta3-r2.ebuild	14 Jun 2012 07:01:37 -0000	1.9
+++ qca-ossl-2.0.0_beta3-r2.ebuild	18 Oct 2014 01:27:33 -0000
@@ -32,6 +32,7 @@

 	# cannot use econf because of non-standard configure script
 	./configure --qtdir="${EPREFIX}"/usr --no-separate-debug-info \
+		--verbose \
 		$(use debug && echo "--debug" || echo "--release") || die

 	eqmake4
===================================================================

Then run:

$ FEATURES=digest emerge -1 qca-ossl

and when it fails, paste or attach the output here. Thanks.




Comment 3


far jump





          2014-10-18 02:02:21 UTC
        

 * 
 * The FEATURES=digest setting can prevent corruption from being noticed.
 * The `repoman manifest` command is the preferred way to generate
 * manifests and it is capable of doing an entire repository or category at
 * once.
 * 
Calculating dependencies... done!
>>> Creating Manifest for /usr/portage/app-crypt/qca-ossl

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) app-crypt/qca-ossl-2.0.0_beta3-r2
 * qca-ossl-2.0.0-beta3.tar.bz2 SHA256 SHA512 WHIRLPOOL size ;-) ...                                                  [ ok ]
>>> Unpacking source...
>>> Unpacking qca-ossl-2.0.0-beta3.tar.bz2 to /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work
>>> Source unpacked in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work
>>> Preparing source in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3 ...
 * Applying qca-ossl-openssl-1.0.0.patch ...                                                                          [ ok ]
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3 ...
Configuring qca-ossl ...

EX_QTDIR=/usr
QC_STATIC=
QC_RELEASE=Y
QC_DEBUG=
QC_DEBUG_AND_RELEASE=
QC_NO_SEPARATE_DEBUG_INFO=Y
QC_SEPARATE_DEBUG_INFO=
QC_UNIVERSAL=
QC_MAC_SDK=
QC_PLUGINS_PATH=
QC_WITH_QCA=
QC_WITH_OPENSSL_INC=
QC_WITH_OPENSSL_LIB=

Verifying Qt 4 build environment ... 
qmake found in /usr/bin/qmake


From here it just hangs.....




Comment 4


Davide Pesavento (RETIRED)






          2014-10-18 02:28:14 UTC
        

Please attach also /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3/conf.log




Comment 5


far jump





          2014-10-18 03:21:38 UTC
        

>cat /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3/conf.log

cat: /var/tmp/portage/app-crypt/qca-ossl-2.0.0_beta3-r2/work/qca-ossl-2.0.0-beta3/conf.log: No such file or directory




Comment 6


far jump





          2014-10-18 11:05:45 UTC
        

In an attempt to get the requested log file, I again executed:
$ FEATURES=digest emerge -1 qca-ossl

This time it compiled w/o delay.  I assure you NOTHING was done to this system between this and the previous attempt.

kde-meta finished emerging and the desktop is running as expected.

?? what is going on ??




Comment 7


Davide Pesavento (RETIRED)






          2014-10-18 13:20:37 UTC
        

Given that conf.log didn't exist yet, it was probably qmake hanging for some reason while processing ${S}/.qconftemp/conf4.pro

Unfortunately there's no way to debug it now.




Comment 8


far jump





          2014-10-19 00:04:29 UTC
        

It is possible that the src_configure in this build is sensitive to the clock skew? I noticed that when compiling the kernel it complained about possible build being incomplete due to clock skew -- some files were dated in the future.

When qca-ossl finally emerged it complained alot about the clock skew and files being dated 200 seconds in the future.

(the clock was off about 24 hours during the build, I was training a new Tech on gentoo install and this was his first hands on attempt.  I think he set the date incorrectly).

This was the only anomaly I noticed from all the other gentoo systems we built lately.

thanks for you help









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

