Title: 722858 – media-gfx/krita-4.2.9 crashes at start
URL: https://bugs.gentoo.org/show_bug.cgi?id=722858

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 722858
media-gfx/krita-4.2.9 crashes at start
Last modified: 2020-05-22 10:54:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 722858 
      - media-gfx/krita-4.2.9 crashes at start


Summary:
media-gfx/krita-4.2.9 crashes at start
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       major
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-05-13 14:35 UTC by gletonai





      Modified:
    
2020-05-22 10:54 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



amd64
gletonai
jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.gz

              (build.log.gz,487.07 KB,
                application/gzip)

            
2020-05-16 11:36 UTC,

            gletonai




Details





emerge --info media-gfx/krita

              (file_722858.txt,15.17 KB,
                text/plain)

            
2020-05-16 11:38 UTC,

            gletonai




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


gletonai





          2020-05-13 14:35:04 UTC
        

Every time I start krita I get segmentation fault.


Reproducible: Always

Steps to Reproduce:
1. emerge krita
2. start krita
3. see what happens
Actual Results:  
KDE crash handler will show:

Application: krita (krita), signal: Segmentation fault
Using host libthread_db library "/lib64/libthread_db.so.1".
[KCrash Handler]
#6  std::__atomic_base<int>::load (__m=std::memory_order_relaxed, this=0x565500000000) at /usr/lib/gcc/x86_64-pc-linux-gnu/9.3.0/include/g++-v9/bits/atomic_base.h:413
#7  QAtomicOps<int>::loadRelaxed<int> (_q_value=...) at /usr/include/qt5/QtCore/qatomic_cxx11.h:239
#8  QBasicAtomicInteger<int>::loadRelaxed (this=0x565500000000) at /usr/include/qt5/QtCore/qbasicatomic.h:107
#9  QtPrivate::RefCount::ref (this=0x565500000000) at /usr/include/qt5/QtCore/qrefcount.h:55
#10 0x0000565540ddaef2 in QString::QString (other=..., this=0x7ffc5cd8e2f0) at /usr/include/qt5/QtCore/qstring.h:1051
#11 main (argc=<optimized out>, argv=0x7ffc5cd8e4a8) at /var/tmp/portage/media-gfx/krita-4.2.9/work/krita-4.2.9/krita/main.cc:319
[Inferior 1 (process 17022) detached]



Portage 2.3.99 (python 3.7.7-final-0, default/linux/amd64/17.1, gcc-9.3.0, glibc-2.30-r8, 5.4.38-gentoo-x86_64 x86_64)
=================================================================
System uname: Linux-5.4.38-gentoo-x86_64-x86_64-AMD_FX-tm-6100_Six-Core_Processor-with-gentoo-2.6
KiB Mem:    16394052 total,   4405180 free
KiB Swap:   67108860 total,  67107824 free
Timestamp of repository gentoo: Wed, 13 May 2020 14:00:01 +0000
Head commit of repository gentoo: 3946b7b9e5f07022f945623b6dac78583c85d554
Timestamp of repository cg: Tue, 12 May 2020 15:05:04 +0000
Head commit of repository cg: 26c6b1c08e6e55515353ccf1ba8e4b18e4ce3cf3

Timestamp of repository dotnet: Mon, 20 Apr 2020 14:35:11 +0000
Head commit of repository dotnet: d690cd146a69acd3028c190ed089ca186c9c5c0f

Timestamp of repository java: Wed, 06 May 2020 22:35:00 +0000
Head commit of repository java: d2b832dbf99d6829a6f0c93266a9274c876103ce

Timestamp of repository kde: Tue, 12 May 2020 20:05:09 +0000
Head commit of repository kde: ec905182c0defa39062b612b71ba72b1488eabae

Timestamp of repository qt: Mon, 11 May 2020 22:05:38 +0000
Head commit of repository qt: 0c20c1e2c516f35c9866b417f4250c40abdc4f16

Timestamp of repository science: Wed, 13 May 2020 06:35:20 +0000
Head commit of repository science: 6da0f07867a0ac6cf5065c7224b731fe67b34cb6

Timestamp of repository steam-overlay: Fri, 01 May 2020 10:40:34 +0000
Head commit of repository steam-overlay: d9f36ed6e2975246eda02ea00c1697fe5f58ee92

sh bash 5.0_p17
ld GNU ld (Gentoo 2.33.1 p2) 2.33.1
distcc 3.3.3 x86_64-pc-linux-gnu [enabled]
app-shells/bash:          5.0_p17::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.30.1::gentoo
dev-lang/python:          2.7.18::gentoo, 3.6.10-r2::gentoo, 3.7.7-r2::gentoo, 3.8.2-r2::gentoo
dev-util/cmake:           3.16.5::gentoo
sys-apps/baselayout:      2.6-r1::gentoo
sys-apps/openrc:          0.42.1::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13-r1::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.16.1-r1::gentoo
sys-devel/binutils:       2.33.1-r1::gentoo
sys-devel/gcc:            8.4.0::gentoo, 9.3.0::gentoo
sys-devel/gcc-config:     2.2.1::gentoo
sys-devel/libtool:        2.4.6-r6::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 5.4::gentoo (virtual/os-headers)
sys-libs/glibc:           2.30-r8::gentoo
Repositories:

gentoo
    location: /var/db/repos/gentoo
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts: 
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-max-age: 24

bakusaiga
    location: /var/db/repos/bakusaiga
    masters: gentoo
    priority: -1

cg
    location: /var/db/repos/cg
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/cg.git
    masters: gentoo

dotnet
    location: /var/db/repos/dotnet
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/dotnet.git
    masters: gentoo

java
    location: /var/db/repos/java
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/java.git
    masters: gentoo

kde
    location: /var/db/repos/kde
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/kde.git
    masters: gentoo

qt
    location: /var/db/repos/qt
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/qt.git
    masters: gentoo

science
    location: /var/db/repos/science
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/science.git
    masters: gentoo

steam-overlay
    location: /var/db/repos/steam-overlay
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/steam-overlay.git
    masters: gentoo

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe -fstack-protector-strong -march=bdver1 -mmmx -msse -msse2 -msse3 -mssse3 -msse4a -mcx16 -msahf -maes -mpclmul -mpopcnt -mabm -mlwp -mfma4 -mxop -mavx -msse4.2 -msse4.1 -mlzcnt -mprfchw -mfxsr -mxsave --param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048 -mtune=bdver1"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php7.4/ext-active/ /etc/php/cgi-php7.4/ext-active/ /etc/php/cli-php7.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -pipe -fstack-protector-strong -march=bdver1 -mmmx -msse -msse2 -msse3 -mssse3 -msse4a -mcx16 -msahf -maes -mpclmul -mpopcnt -mabm -mlwp -mfma4 -mxop -mavx -msse4.2 -msse4.1 -mlzcnt -mprfchw -mfxsr -mxsave --param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048 -mtune=bdver1"
DISTDIR="/var/cache/portage/distfiles"
EMERGE_DEFAULT_OPTS="--jobs --load-average=6"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY GOBIN PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe -fstack-protector-strong -march=bdver1 -mmmx -msse -msse2 -msse3 -mssse3 -msse4a -mcx16 -msahf -maes -mpclmul -mpopcnt -mabm -mlwp -mfma4 -mxop -mavx -msse4.2 -msse4.1 -mlzcnt -mprfchw -mfxsr -mxsave --param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048 -mtune=bdver1"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs candy cgroup compress-build-logs config-protect-if-modified distcc distlocks ebuild-locks fakeroot fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news nostrip parallel-fetch parallel-install pid-sandbox protect-owned qa-unresolved-soname-deps sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe -fstack-protector-strong -march=bdver1 -mmmx -msse -msse2 -msse3 -mssse3 -msse4a -mcx16 -msahf -maes -mpclmul -mpopcnt -mabm -mlwp -mfma4 -mxop -mavx -msse4.2 -msse4.1 -mlzcnt -mprfchw -mfxsr -mxsave --param l1-cache-size=16 --param l1-cache-line-size=64 --param l2-cache-size=2048 -mtune=bdver1"
GENTOO_MIRRORS="rsync://ftp.halifax.rwth-aachen.de/gentoo/"
LANG="C.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en hu"
MAKEOPTS="-j6 -l6"
PKGDIR="/var/cache/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="10bit 12bit 3d 7z X a52 aac aacs accountsservice ace acl acpi adns aes aften all_sfx alsa alsa-plugin amd64 amr amrenc android androiddump apache2 apng app appstream archive arj armadillo autotools autotrace avx awt bash-completion bazaar bdplus berkdb bittorrent blas bluetooth bluray boost braw brotli bs2b bzip2 c++0x cacert cairo caps cdda cddb cdinstall cdio cdr celt cg cgi chm chromaprint chromium cilk ciscodump cjk clamdtop clang cleartype cli cmake codec2 collada color-management colorio compressed-lumas contrast contrib contribcvv contribdnn contribhdf contribsfm contribxfeatures2d corefonts cron crypt cryptsetup cuda cue cups curl custom-cflags custom-optimization cvs cycles daap darcs dav1d dbus dcaenc deb debugger demosaic designer devtools dia djvu docbook dos dot dri drm dts dv dvb dvd ebook ebur128 eclipse efi elogind enchant encode eps epub equalizer evdev exif exiv2 ext4 extra extra-ciphers extras faac faad fam fat fax fbcon fdk ffmpeg ffmpegthumbnailer fftw field3d finger fits flac flash fluidsynth fma4 fontconfig fontforge fortran fpm fpx freeimage freesound frei0r ftp fuse gamepad gbm gcj gcrypt gd gdal gdbm gdk-pixbuf gegl geo geoclue geoip geolocation geonames geos gflags gif gimp git gl gl2ps glew glog glsl gltf glut gme gmp gnome-keyring gnome-online-accounts gnumeric go google googledrive gopher gpg gphoto2 gpm gps graph graphite graphviz grub gsm gstreamer gtk gtk3 gtkstyle gui haptic harfbuzz hddtemp hdf5 hdri heif hex hidpi hostip html htmlthumbs http http2 hunspell hwaccel ibus iconv icu ide idn ieee1394 imagemagick imaging imlib infinality inkjar introspection ipp ipv6 java javafx javascript jbig jce jemalloc joystick jpeg jpeg2k json jumbo-build kate kde kdenlive kernel keybinder keyscrub kipi kms kvazaar ladspa lame lapack lastfm latency_timing latex layers lcms leaps_timezone legacy-systray lensfun libaom libass libcanberra libdrm libguess libilbc libinput libkms libmpv libnotify libreoffice librtmp libsamplerate libsoxr libssh libtar libtiger libtirpc libv4l libvisual libxml2 lights live llibtesseract llvm lm-sensors lqr luajit lv2 lvm lz4 lzma lzo mad manual math matroska md5sum media mediawiki melt mem-scramble mercurial metadata-analysis-api midi mikmod minizip mjpeg mmap mms mmx mmxext mng mobi mod modeling modplug mono mount mp3 mpeg mpris mpv mtp multilib multimedia musepack mysql mysqli nas ncurses nettle network new-login nfsdcld nfsv41 nim nls nntp nominatim nptl nsplugin nss ntp nut nvcontrol nvenc nvidia nvtt objc objc++ ocr odbc odf odk offensive ogg okteta openal opencl opencv opendx openexr opengl openh264 openimageio openmax openmp openssl opensubdiv openvdb openvdb-compression opus osd osmesa ovftool pam panels paraview pcap pclmul pcre pcre16 pdf pdfimport pdo php pidgin pipelight plasma player playlist playtools plotutils plugins png pnm policykit popcnt postproc postscript ppapi printsupport prison profiler projectm ptex pulseaudio pvr pwquality python q32 q64 q8 qalculate qml qt3support qt5 qtav qthelp qtmedia quicktime rar raw rcs rdp readline realtime recorder redcode reencrypt rendering rle romio rpm rtc rtf rtmp rtsp rubberband rust s3tc samba sbc sbsms scanner schroedinger scim script scripts scripttools sctp sdl sdl-image sdl2 seccomp secure-delete semantic-desktop sensors sftp shenandoah sid skins slp smart smi smp smpeg snappy sndfile sofalizer source-highlight sox spatialite speex speexdsp spell split-usr sqlite srt sse sse2 sse3 sse4_1 sse4_2 sse4a ssh sshdump ssl ssse3 stars startup-notification steamfonts steamgames_bioshock_infinite steamgames_defenders_quest steamgames_dirt_rally steamgames_dirt_showdown steamgames_dont_starve steamgames_dwarfs steamgames_hammerwatch steamgames_ironclad_tactics steamgames_journey_down steamgames_narcissu steamgames_painkiller steamgames_portal steamgames_shadow_mordor steamgames_shatter steamgames_source_engine steamgames_te120 steamgames_tf2 steamgames_trine2 steamgames_voidexpanse steamgames_witcher2 streaming subversion svc svg syslog system-cairo system-ffmpeg system-harfbuzz system-icu system-jpeg system-jsoncpp system-libevent system-libvpx system-snappy system-sqlite szip taglib tagsoup tbb tcpd tesseract textures tfshark tga themes theora threads thumbnail tiff timezone tinfo tokyocabinet toolame tools trayicon tremor truetype twolame type1 udev udf udisks umfpack unicode upnp upnp-av upower urandom usb utempter utils uvm v4l vaapi vamp vc vcd vcdx vdpau vdr vector-icons vf-dlopen video vidstab views visio vkd3d vlc vmware_guest_freebsd vmware_guest_linux vmware_guest_windows vnc vorbis vpx vulkan wavpack web webcam webchannel webkit webp webrtc-aec websockets widevine widgets winbind wma-fixed wmf wnck wpg wxwidgets x11extras x264 x265 xattr xcb xcomposite xetex xft xkb xla xml xmlreader xmlwriter xmp xop xpm xpresent xscreensaver xv xvid xvmc xxhash yuv4mpeg zeroconf zeromq zip zlib zvbi" ABI_X86="64" ADA_TARGET="gnat_2018" ALSA_CARDS="hda-intel usb-audio" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="author braindump flow karbon kexi krita plan sheets stage words gemini" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx fma4 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 xop" CURL_SSL="nss" ELIBC="glibc" FFTOOLS="aviocat cws2fws ffescape ffeval ffhash fourcc2pixfmt graph2dot ismindex pktdumper qt-faststart sidxindex trasher" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi-64 pc" INPUT_DEVICES="evdev joystick wacom libinput" KERNEL="linux" L10N="en hu" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="nlpsolver pdfimport scripting-javascript wiki-publisher" LLVM_TARGETS="BPF NVPTX X86" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php7-2" POSTGRES_TARGETS="postgres10 postgres11" PYTHON_SINGLE_TARGET="python3_6" PYTHON_TARGETS="python2_7 python3_7 python3_6" RUBY_TARGETS="ruby24 ruby25" SANE_BACKENDS="pixma" USERLAND="GNU" VIDEO_CARDS="nvidia modesetting" XFCE_PLUGINS="logout menu brightness clock trash" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, INSTALL_MASK, LC_ALL, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jonas Stein






          2020-05-13 23:34:13 UTC
        

Thank you for the report. 
I suggest to recompile with all dependencies.

We need to have all information at hand before ticket assignment. That is why I ask you to 
* attach the logs and 
* paste the emerge info 
as described on https://wiki.gentoo.org/wiki/Attach_the_logs_to_the_bug_ticket
Please reopen this ticket (Status:UNCONFIRMED) afterwards.

This minimizes the number of callbacks and increases the efficiency of the maintainer.




Comment 2


gletonai





          2020-05-16 11:36:26 UTC
        

Created attachment 639618 [details]
build.log.gz




Comment 3


gletonai





          2020-05-16 11:38:13 UTC
        

Created attachment 639624 [details]
emerge --info media-gfx/krita




Comment 4


gletonai





          2020-05-19 08:04:08 UTC
        

Recompiling deps from QT and KDE did not help




Comment 5


gletonai





          2020-05-22 10:52:05 UTC
        

Fixed by recent world update.
Probably one in:
qt*5.14.2
kde*5.18.5
fixed it.




Comment 6


Andreas Sturmlechner






          2020-05-22 10:54:09 UTC
        

Thanks for checking back.

(In reply to gletonai from comment #5)
> Probably one in:
> qt*5.14.2
If yes, probably a locally inconsistent installation of Qt.

(In reply to gletonai from comment #5)
> kde*5.18.5
Definitely not that.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

