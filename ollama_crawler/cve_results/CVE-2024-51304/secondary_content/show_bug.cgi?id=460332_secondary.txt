Title: 460332 – app-emulation/wine-1.5.25: repeats eclass-defined USE flags in IUSE (PMS issue)
URL: https://bugs.gentoo.org/show_bug.cgi?id=460332

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 460332
app-emulation/wine-1.5.25: repeats eclass-defined USE flags in IUSE (PMS issue)
Last modified: 2013-03-10 12:00:53 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 460332 
      - app-emulation/wine-1.5.25: repeats eclass-defined USE flags in IUSE (PMS issue)


Summary:
app-emulation/wine-1.5.25: repeats eclass-defined USE flags in IUSE (PMS issue)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       QA
      


Assignee:

Wine Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-03-04 21:42 UTC by Michał Górny





      Modified:
    
2013-03-10 12:00 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michał Górny









          2013-03-04 21:42:03 UTC
        

The new wine ebuild lists abi_x86_* flags with IUSE defaults in IUSE. The same flags are listed in IUSE in the multilib-build eclass.

Although portage seems to handle it, I think it's a bit of UB in PMS. I'd suspect some other package manager may refuse to handle it, or even have the flag listed twice somewhere...

I think it'd be better to use profiles/base/package.use to set defaults here.




Comment 1


Alexandre Rostovtsev (RETIRED)






          2013-03-05 03:58:04 UTC
        

According to PMS, "+flag" handling in IUSE is *always* undefined behavior that could vary with package manager implementation:

> In EAPIs shown in table 7.1 as supporting IUSE defaults, any use flag name in IUSE may be prefixed by at most one of a plus or a minus sign. If such a prefix is present, the package manager *may use it as a suggestion* as to the default value of the use flag if no other configuration overrides it.

Note: "may use it as a suggestion", not "must", not "should".

So unless I am missing something, +flag" handling in IUSE is *always* undefined behavior that in theory could vary with package manager implementation :)




Comment 2


Michał Górny









          2013-03-05 06:21:30 UTC
        

I'm more afraid of the same flags being repeated twice. I think PMS doesn't allow that and it can lead to weird errors.




Comment 3


SpanKY






          2013-03-10 12:00:53 UTC
        

(In reply to comment #0)

package-specific defaults belong in packages

(In reply to comment #2)

plenty of eclasses & ebuilds duplicate IUSE, so this is already being done and isn't a problem.

probably few (if any) have different IUSE default behavior.  if portage isn't processing that right, then file a bug for it to do the right thing (ebuild overrides eclass).









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

