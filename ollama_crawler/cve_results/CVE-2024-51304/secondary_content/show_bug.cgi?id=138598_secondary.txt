Title: 138598 – net.eth0 start attempted too early
URL: https://bugs.gentoo.org/show_bug.cgi?id=138598

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 138598
net.eth0 start attempted too early
Last modified: 2006-07-08 12:20:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 138598 
      - net.eth0 start attempted too early


Summary:
net.eth0 start attempted too early
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Roy Marples (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-30 10:09 UTC by Jan Hrabe





      Modified:
    
2006-07-08 12:20 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jan Hrabe





          2006-06-30 10:09:03 UTC
        

It seems that the baselayout 1.11.15-r3 changed the network initialization order.  An error message (red color of the * emulated by ***) now appears during the boot:

 * Configuring kernel parameters ...                                    [ ok ]
 * Updating environment ...                                             [ ok ]
 * Cleaning /var/lock, /var/run ...                                     [ ok ]
 * Cleaning /tmp directory ...                                          [ ok ]
 * Device initiated services: net.eth0
 * Loading ALSA modules ...
 *   Loading: snd-card-0 ...                                            [ ok ]
 * Restoring Mixer Levels ...                                           [ ok ]
 * Loading key mappings ...                                             [ ok ]
 * Setting terminal encoding to ASCII ...                               [ ok ]
 * Setting user font ...                                                [ ok ]
*** net.eth0: cannot start until the runlevel boot has completed
 * Starting lo
 *   Bringing up lo ...                                                 [ ok ]
 * Initializing random number generator ...                             [ ok ]
INIT: Entering runlevel: 3
 * Starting metalog ...                                                 [ ok ]
 * Starting eth0
 *   Bringing up eth0
 *     10.76.253.20                                                     [ ok ]
 * Adding routes
 *     default gw 10.76.253.2 ...                                       [ ok ]
 * samba -> start: smbd ...                                             [ ok ]
 * samba -> start: nmbd ...                                             [ ok ]

This error is not fatal.  Nonetheless, it wasn't there before and my configuration hasn't changed otherwise.  I therefore suspect the baselayout update.

Thanks,
Jan




Comment 1


SpanKY






          2006-06-30 17:19:14 UTC
        

disable your cold/hot plug stuff and it should work fine




Comment 2


Roy Marples (RETIRED)






          2006-07-01 07:05:49 UTC
        

or upgrade to baselayout-1.12 where you can start net.eth0 in the boot runlevel.




Comment 3


Jan Hrabe





          2006-07-04 07:11:29 UTC
        

(In reply to comment #1)
> disable your cold/hot plug stuff and it should work fine
> 

I don't have any coldplug script but I did disable the hotplug one.
The problem is still present though.  Network script is in the default 
level where it belongs, as far as I can tell, but something else is 
attempting to bring it up during the boot level.  Here is the listing 
of "rc-config list" output:

erbelix ~ # rc-config list
Available init scripts
  alsasound                 boot
  apache2                   default
  bootmisc                  boot
  checkfs                   boot
  checkroot                 boot
  clock                     boot
  consolefont               boot
  crypto-loop
  cupsd                     default
  domainname                default
  esound
  famd
  gpm                       default
  hdparm
  hostname                  boot
  hotplug
  keymaps                   boot
  lisa
  local                     default nonetwork
  localmount                boot
  modules                   boot
  mysql                     default
  net.eth0                  default
  net.lo                    boot
  netmount                  default
  nscd
  ntp-client
  ntpd                      default
  numlock
  portmap
  pwcheck
  reslisa
  rmnologin                 boot
  rsyncd
  samba                     default  
  saslauthd
  serial                    boot
  sshd                      default
  syslog-ng                 default
  urandom                   boot
  vixie-cron                default
  vmware                    default
  xdm                       default




Comment 4


Jan Hrabe





          2006-07-08 12:20:01 UTC
        

The solution seems to be editing the /etc/conf.d/rc file and setting

RC_COLDPLUG="yes"
RC_PLUG_SERVICES="!net.*"

Not sure if this is documented somewhere or why the original default settings
produce the reported problem.  In any case, there are no apperent ill
side-efects to this so perhaps it should be the default setting.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

