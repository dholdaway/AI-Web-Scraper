Title: 304223 – mozilla-firefox-3.6-r2 doesn't work with system SQLite
URL: https://bugs.gentoo.org/show_bug.cgi?id=304223

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 304223
mozilla-firefox-3.6-r2 doesn't work with system SQLite
Last modified: 2010-02-14 13:20:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 304223 
      - mozilla-firefox-3.6-r2 doesn't work with system SQLite


Summary:
mozilla-firefox-3.6-r2 doesn't work with system SQLite
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-02-10 06:27 UTC by Kevin Bowling





      Modified:
    
2010-02-14 13:20 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Kevin Bowling





          2010-02-10 06:27:09 UTC
        

Firefox-3.6-r2 doesn't work from the latest mozilla-overlay system-sqlite by default.  thunderbird-3.0.1 does work however.

kev-ws-aurora mozilla # emerge -pv sqlite xulrunner mozilla-firefox

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] dev-db/sqlite-3.6.22-r2  USE="extensions fts3 readline secure-delete threadsafe -debug -doc -icu -soundex -tcl -test" 0 kB [1]
[ebuild   R   ] net-libs/xulrunner-1.9.2-r2  USE="alsa dbus -custom-optimization -debug -gnome -java -libnotify -startup-notification -wifi" 0 kB [1]
[ebuild   R   ] www-client/mozilla-firefox-3.6-r2  USE="alsa dbus -bindist -custom-optimization -gnome -java -libnotify -startup-notification -wifi" LINGUAS="en -af -ar -as -be -bg -bn -bn_BD -bn_IN -ca -cs -cy -da -de -el -en_GB -en_US -eo -es -es_AR -es_CL -es_ES -es_MX -et -eu -fa -fi -fr -fy -fy_NL -ga -ga_IE -gl -gu -gu_IN -he -hi -hi_IN -hr -hu -id -is -it -ja -ka -kk -kn -ko -ku -lt -lv -mk -ml -mr -nb -nb_NO -nl -nn -nn_NO -oc -or -pa -pa_IN -pl -pt -pt_BR -pt_PT -rm -ro -ru -si -sk -sl -sq -sr -sv -sv_SE -ta -ta_LK -te -th -tr -uk -vi -zh_CN -zh_TW" 0 kB [1]

Total: 3 packages (3 reinstalls), Size of downloads: 0 kB
Portage tree and overlays:
 [0] /usr/portage
 [1] /var/lib/layman/mozilla


Reproducible: Always

Actual Results:  
Builds fine but does not run.
dialog : "Title: SQLite Version Error Message: The application has been updated, but your version of SQLite is too old and the application cannot run."


kev-ws-aurora mozilla # emerge --info
Portage 2.2_rc62 (default/linux/amd64/10.0, gcc-4.4.3, glibc-2.11-r1, 2.6.32-gentoo-r4 x86_64)                                                                                    
=================================================================                        
System uname: Linux-2.6.32-gentoo-r4-x86_64-Intel-R-_Xeon-R-_CPU_W3570_@_3.20GHz-with-gentoo-2.0.1                                                                                
Timestamp of tree: Wed, 10 Feb 2010 06:00:21 +0000                                       
app-shells/bash:     4.0_p37                                                             
dev-java/java-config: 2.1.10                                                             
dev-lang/python:     2.6.4-r1, 3.1.1-r1                                                  
dev-python/pycrypto: 2.1.0                                                               
dev-util/cmake:      2.8.0-r2                                                            
sys-apps/baselayout: 2.0.1                                                               
sys-apps/openrc:     0.6.0-r1                                                            
sys-apps/sandbox:    2.2                                                                 
sys-devel/autoconf:  2.13, 2.65                                                          
sys-devel/automake:  1.8.5-r3, 1.9.6-r2, 1.10.3, 1.11.1                                  
sys-devel/binutils:  2.20                                                                
sys-devel/gcc:       4.4.3                                                               
sys-devel/gcc-config: 1.4.1                                                              
sys-devel/libtool:   2.2.6b                                                              
virtual/os-headers:  2.6.30-r1                                                           
ACCEPT_KEYWORDS="amd64 ~amd64"                                                           
ACCEPT_LICENSE="*"                                                                       
CBUILD="x86_64-pc-linux-gnu"                                                             
CFLAGS="-march=native -O2 -pipe"                                                         
CHOST="x86_64-pc-linux-gnu"                                                              
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/lib/hsqldb"               
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo" 
CXXFLAGS="-march=native -O2 -pipe"                                                       
DISTDIR="/usr/portage/distfiles"                                                         
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"                     
GENTOO_MIRRORS="http://distfiles.gentoo.org"                                             
LDFLAGS="-Wl,-O1"                                                                        
LINGUAS="en"                                                                             
MAKEOPTS="-j7"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/kde /var/lib/layman/mozilla /var/lib/layman/qting-edge /usr/local/portage/kev009-overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi aim alsa amarok amarok2 amazon amd64 apm aspell assistant audioscrobbler berkdb blender blender-game branding bzip2 cairo cdda cddb cdr chm cleartype cli consolekit corefonts cracklib crypt cue cups cxx daap dbus dhcpcd dri dvd dvdr encode exif extensions ffmpeg firefox firefox3 foomaticdb fortran gdbm gif git glib glibc-omitfp gpm gs hal hunspell iconv icq id3 id3tag inotify ipv6 jabber java6 jpeg kde kvm lame lastfm lcms lightning lm_sensors logitech-mouse logrotate mad mmx mng modules mp3 mp4 mpeg mpi mpi-threads mplayer msn mudflap multilib multimedia musicbrainz mysql mysqli ncurses nfs nfsv3 nfsv4 nls nntp nptl nptlonly nsplugin nvidia opengl openmp pam pango pcre pdf perl phonon plasma plotutils pm-utils pmu png policykit postscript pppd pptp python qt3 qt3support qt4 quicktime rar readline reflection rss samba scrobbler semantic-desktop session smp social-desktop spell spl sql sqlite sqlite3 sse sse2 sse3 sse4 sse4a ssl subversion svg sysfs tcpd theora tiff tk truetype type3 unicode wav webkit wma x264 xcb xcomposite xinerama xorg xulrunner xvid xvmc zip zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Kevin Bowling





          2010-02-10 07:08:26 UTC
        

Somehow, emerge -C sqlite xulrunner mozilla-firefox and then remerging fixed this.  Note that simply remerging w/o the -C had no affect.




Comment 2


Jory A. Pratt






          2010-02-10 22:53:49 UTC
        

I have retested all the work and all was fine even after upgrade, this was also tested by others as I stated last night and worked fine on there systems. Reopen if you can provide a little more insight as to how to recreate on a regular basis.




Comment 3


keenblade





          2010-02-13 11:52:05 UTC
        

(In reply to comment #1)
> Somehow, emerge -C sqlite xulrunner mozilla-firefox and then remerging fixed
> this.  Note that simply remerging w/o the -C had no affect.
> 
Thanks that worked for me, too. I was having the same problem. I noticed the slotted xulrunner-1.8.1.19 got uninstalled and did not come back after your solution. Only xulrunner-1.9.2-r2 exist now. Maybe old one was the problem.




Comment 4


Jon Gerdes





          2010-02-13 22:19:34 UTC
        

I already had FF 3.6-r1.  -r2 was broken on updating.  I found this bug and took the following actions.  I only had one copy of xulrunner but 2 versions of sqlite.

I am posting this from FF:

# emerge -pv sqlite xulrunner mozilla-firefox

[ebuild   R   ] dev-db/sqlite-3.6.22-r2  USE="extensions fts3 readline secure-delete threadsafe -debug -doc -icu -soundex -tcl -test" 0 kB
[ebuild   R   ] net-libs/xulrunner-1.9.2-r2  USE="alsa custom-optimization dbus java startup-notification wifi -debug -gnome -libnotify" 0 kB
[ebuild   R   ] www-client/mozilla-firefox-3.6-r2  USE="alsa custom-optimization dbus java startup-notification wifi -bindist -gnome -libnotify" LINGUAS="en_GB -af -ar -as -be -bg -bn -bn_BD -bn_IN -ca -cs -cy -da -de -el -en -en_US -eo -es -es_AR -es_CL -es_ES -es_MX -et -eu -fa -fi -fr -fy -fy_NL -ga -ga_IE -gl -gu -gu_IN -he -hi -hi_IN -hr -hu -id -is -it -ja -ka -kk -kn -ko -ku -lt -lv -mk -ml -mr -nb -nb_NO -nl -nn -nn_NO -oc -or -pa -pa_IN -pl -pt -pt_BR -pt_PT -rm -ro -ru -si -sk -sl -sq -sr -sv -sv_SE -ta -ta_LK -te -th -tr -uk -vi -zh_CN -zh_TW" 0 kB

# emerge -C sqlite xulrunner mozilla-firefox

 dev-db/sqlite
    selected: 2.8.16-r4 3.6.22-r2
   protected: none
     omitted: none

 net-libs/xulrunner
    selected: 1.9.2-r2
   protected: none
     omitted: none

 www-client/mozilla-firefox
    selected: 3.6-r2
   protected: none
     omitted: none

# emerge -va mozilla-firefox

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N    ] dev-db/sqlite-3.6.22-r2  USE="extensions fts3 readline secure-delete threadsafe -debug -doc -icu -soundex -tcl -test" 0 kB
[ebuild  N    ] net-libs/xulrunner-1.9.2-r2  USE="alsa custom-optimization dbus java startup-notification wifi -debug -gnome -libnotify" 0 kB
[ebuild  N    ] www-client/mozilla-firefox-3.6-r2  USE="alsa custom-optimization dbus java startup-notification wifi -bindist -gnome -libnotify" LINGUAS="en_GB -af -ar -as -be -bg -bn -bn_BD -bn_IN -ca -cs -cy -da -de -el -en -en_US -eo -es -es_AR -es_CL -es_ES -es_MX -et -eu -fa -fi -fr -fy -fy_NL -ga -ga_IE -gl -gu -gu_IN -he -hi -hi_IN -hr -hu -id -is -it -ja -ka -kk -kn -ko -ku -lt -lv -mk -ml -mr -nb -nb_NO -nl -nn -nn_NO -oc -or -pa -pa_IN -pl -pt -pt_BR -pt_PT -rm -ro -ru -si -sk -sl -sq -sr -sv -sv_SE -ta -ta_LK -te -th -tr -uk -vi -zh_CN -zh_TW" 0 kB

--------------------------------------------------
Portage 2.2_rc62 (default/linux/amd64/10.0, gcc-4.4.3, glibc-2.11-r1, 2.6.33-rc7 x86_64)
=================================================================                       
System uname: Linux-2.6.33-rc7-x86_64-Intel-R-_Core-TM-2_Duo_CPU_P8600_@_2.40GHz-with-gentoo-2.0.1
Timestamp of tree: Sat, 13 Feb 2010 17:30:01 +0000                                                
app-shells/bash:     4.0_p37                                                                      
dev-java/java-config: 2.1.10                                                                      
dev-lang/python:     2.5.4-r4, 2.6.4-r1, 3.1.1-r1                                                 
dev-util/cmake:      2.8.0-r2                                                                     
sys-apps/baselayout: 2.0.1                                                                        
sys-apps/openrc:     0.6.0-r1                                                                     
sys-apps/sandbox:    2.2                                                                          
sys-devel/autoconf:  2.13, 2.65                                                                   
sys-devel/automake:  1.8.5-r3, 1.9.6-r2, 1.10.3, 1.11.1                                           
sys-devel/binutils:  2.20                                                                         
sys-devel/gcc:       4.4.3                                                                        
sys-devel/gcc-config: 1.4.1                                                                       
sys-devel/libtool:   2.2.6b                                                                       
virtual/os-headers:  2.6.32                                                                       
ACCEPT_KEYWORDS="amd64 ~amd64"                                                                    
ACCEPT_LICENSE="*"                                                                                
CBUILD="x86_64-pc-linux-gnu"                                                                      
CFLAGS="-march=core2 -mtune=core2 -O2 -mssse3 -msse4.1 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /usr/share/config /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=core2 -mtune=core2 -O2 -mssse3 -msse4.1 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/sunrise"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit X Xaw3d a52 aac acl acpi activefilter additions admin administrator ads agent alsa amarok amarok2 amd64 apache2 asf augeas bash-completion bcmath berkdb bluetooth boost branding bzip2 cairo calendar caps cdda cddb cdr cdrom cgi chipcard chipcard2 chm cisco clamav clamd clamdtop cleartype cli client config-file consolekit cracklib crypt ctype cups curl custom-optimization customlog cxx daap dba dbus dell dga dhcp divx dmi dns dnsdb dragonplayer dri dv dvb dvd dvdr dvdread eap-tls edirectory embedded enca encode epson exif exim exiscan exiscan-acl expat extensions fam fbcon fbcondecor ffmpeg fftw filter firefox flac flash flexresp2 foomaticdb fortran frontend ftp fts3 fuse gd gdbm geoip geolocation gimp glitz gnutls gpm graphviz groupwise h224 h281 h323 hal hbci html htmlhandbook http-forms http-server iconv ieee1394 imagemagick imap inkjar iodbc ipod iproute2 ipv6 irda irmc jabber java java5 javacomm javamail javascript jbig jboss jce jmx jni john joystick jpeg jpeg2k jpgraph jta jumpplay kcal kde kdehiddenvisibility kdepim kerberos kexi kipi kvm latex lcd lcms ldap lm_sensors log4j logrotate lzo mad maildir math mcal mdb mdnsresponder-compat mime ming mjpeg mmkeys mmx mmxext mng modules mono mozsvg mp3 mp3tunes mp4 mp4live mpd mpeg mpeg2 mplayer msdfs mtp mudflap multilib multipath multiuser musepack musicbrainz mysql mysqli nas ncurses nls no-helper nptl nptlonly nsplugin ntfs nxclient oav office ofx ogg on-the-fly-crypt openexr opengl openmp ospfapi overlays pam passwordsave pcap pcre pda pdf perl php pic pipechan plasma plotutils png postgresql ppds pppd python qemu qt3 qt3support qt4 quicktime quotes rdesktop readline realmedia realms redeyes reflection reiserfs ruby ruby-bindings samba sasl scanner screen sdl secure-delete semantic-desktop session sip sipim slp smp sni snmp soap spf spl sql sqlite srt sse sse2 sse3 sse4a ssl ssse3 startup-notification subversion suexec svg svgz swat sysfs syslog tcpd templates theora tiff tools truetype udev uk_bleb uk_rt underscores unicode usb v4l v4l2 vboxbfe vcd visualization vorbis watchdog wav wavpack webdav webkit wifi winbind winetools winpopup wma wmf wmp wps wxwindows xanim xattr xcb xinerama xml xmlreader xmlrpc xmlwriter xorg xosd xpm xscreensaver xulrunner xv xvid xvmc xvnc yv12 zeo zip zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd                  authn_dbm authn_default authn_file authnz_ldap authz_dbm                  authz_default authz_groupfile authz_host authz_owner                  authz_user autoindex cache cgi cgid dav dav_fs dav_lock                  dbd deflate dir disk_cache env expires ext_filter file_cache                  filter headers ident imagemap include info ldap log_config                  logio mem_cache mime mime_magic negotiation proxy proxy_ajp                  proxy_balancer proxy_connect proxy_http rewrite setenvif so                  speling ssl status suexec unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS






Comment 5


Jon Gerdes





          2010-02-14 01:06:37 UTC
        

I have Apache with PHP on this machine.  I noticed that PHP was broken since I'd removed and re installed sqlite.  I re emerged php and it pulled in sqlite 2.8.16-r4 - that fixed Apache.

I re emerged FF - all OK

I re emerged xulrunner - all OK

Conclusion: Something was broken in the past and has been fixed.




Comment 6


about.gentoobugs





          2010-02-14 13:20:05 UTC
        

I also see this problem.

Solved by deleting /usr/lib/xulrunner-1.9.2/libsqlite3.so that somehow gets carried over from earlier installations. @preserved-rebuild features missbehaving?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

