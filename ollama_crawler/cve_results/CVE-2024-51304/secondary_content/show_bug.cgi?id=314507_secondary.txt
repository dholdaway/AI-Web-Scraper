Title: 314507 – Failed to load module "mouse": Xserver rejects mouse and keyboard input drivers.
URL: https://bugs.gentoo.org/show_bug.cgi?id=314507

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 314507
Failed to load module "mouse": Xserver rejects mouse and keyboard input drivers.
Last modified: 2010-04-10 13:04:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 314507 
      - Failed to load module "mouse": Xserver rejects mouse and keyboard input drivers.


Summary:
Failed to load module "mouse": Xserver rejects mouse and keyboard input drivers.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-04-10 12:07 UTC by 98613243





      Modified:
    
2010-04-10 13:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



98613243
billie









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


98613243





          2010-04-10 12:07:55 UTC
        

after a recent update (emerge to latest version), my XServer is unable to handle keyboard or mouse. it is necessary to login to this machine from another one (since Xserver wont even allow to switch back to some text console) and then, in /var/log/Xorg.0.log, you'll see:

(II) Loading /usr/lib/xorg/modules/input/mouse_drv.so
(II) Module mouse: vendor="X.Org Foundation"
        compiled for 1.6.5, module version = 1.5.0
        Module class: X.Org XInput Driver
        ABI class: X.Org XInput driver, version 4.0
(EE) module ABI major version (4) doesn't match the server's version (7)
(II) UnloadModule: "mouse"
(II) Unloading /usr/lib/xorg/modules/input/mouse_drv.so
(EE) Failed to load module "mouse" (module requirement mismatch, 0)
(EE) No input driver matching `mouse'
(II) LoadModule: "kbd"
(II) Loading /usr/lib/xorg/modules/input/kbd_drv.so
(II) Module kbd: vendor="X.Org Foundation"
        compiled for 1.6.5, module version = 1.4.0
        Module class: X.Org XInput Driver
        ABI class: X.Org XInput driver, version 4.0
(EE) module ABI major version (4) doesn't match the server's version (7)
(II) UnloadModule: "kbd"
(II) Unloading /usr/lib/xorg/modules/input/kbd_drv.so
(EE) Failed to load module "kbd" (module requirement mismatch, 0)
(EE) No input driver matching `kbd'


now, the Xserver is the latest stable "1.7.6":

#equery belongs /usr/bin/Xorg 
[ Searching for file(s) /usr/bin/Xorg in *... ]
x11-base/xorg-server-1.7.6 (/usr/bin/Xorg)

#eix -I x11-base/xorg-server
[I] x11-base/xorg-server
     Available versions:  [M]1.5.3-r6 1.6.5-r1 1.7.6 {3dfx debug dmx hal input_devices_acecad input_devices_aiptek input_devices_citron input_devices_elographics input_devices_evdev input_devices_fpit input_devices_hyperpen input_devices_joystick input_devices_keyboard input_devices_mouse input_devices_mutouch input_devices_penmount input_devices_synaptics input_devices_tslib input_devices_virtualbox input_devices_vmmouse input_devices_void input_devices_wacom ipv6 kdrive minimal nptl sdl tslib video_cards_apm video_cards_ark video_cards_ast video_cards_chips video_cards_cirrus video_cards_dummy video_cards_epson video_cards_fbdev video_cards_geode video_cards_glint video_cards_i128 video_cards_i740 video_cards_impact video_cards_intel video_cards_mach64 video_cards_mga video_cards_neomagic video_cards_newport video_cards_nv video_cards_nvidia video_cards_r128 video_cards_radeon video_cards_radeonhd video_cards_rendition video_cards_s3 video_cards_s3virge video_cards_savage video_cards_siliconmotion video_cards_sis video_cards_sisusb video_cards_sunbw2 video_cards_suncg14 video_cards_suncg3 video_cards_suncg6 video_cards_sunffb video_cards_sunleo video_cards_suntcx video_cards_tdfx video_cards_tga video_cards_trident video_cards_tseng video_cards_v4l video_cards_vesa video_cards_via video_cards_virtualbox video_cards_vmware video_cards_voodoo video_cards_xgi xorg}
     Installed versions:  1.7.6(16:13:12 04/09/10)(nptl xorg -debug -dmx -hal -ipv6 -kdrive -minimal -sdl -tslib)
     Homepage:            http://xorg.freedesktop.org/
     Description:         X.Org X servers


dated just from yesterday:

#ls -l /usr/bin/Xorg 
-rws--x--x 1 root root 1691500 Apr  9 16:13 /usr/bin/Xorg

while in contrast, the input drivers:

#grep modules /etc/X11/xorg.conf
        ModulePath   "/usr/lib/xorg/modules"

#ls -l --full-time /usr/lib/xorg/modules/input/*
-rwxr-xr-x 1 root root 36416 2010-03-04 14:41:16.000000000 +0100 /usr/lib/xorg/modules/input/evdev_drv.so
-rwxr-xr-x 1 root root 21992 2009-12-11 16:23:43.000000000 +0100 /usr/lib/xorg/modules/input/kbd_drv.so
-rwxr-xr-x 1 root root 44084 2009-12-11 16:25:14.000000000 +0100 /usr/lib/xorg/modules/input/mouse_drv.so

have not been updated sine 11. dec 2009 *and*

#equery belongs /usr/lib/xorg/modules/input/mouse_drv.so
[ Searching for file(s) /usr/lib/xorg/modules/input/mouse_drv.so in *... ]
x11-drivers/xf86-input-mouse-1.5.0 (/usr/lib/xorg/modules/input/mouse_drv.so)
#eix -I x11-drivers/xf86-input-mouse
[I] x11-drivers/xf86-input-mouse
     Available versions:  1.5.0 {debug}
     Installed versions:  1.5.0(16:25:16 12/11/09)(-debug)
     Homepage:            http://xorg.freedesktop.org/
     Description:         X.Org driver for mouse input devices

this is the latest release available.

now what - the only way to fix this seem to download the latest drivers from xorg, since gentoo doesnt provide them.

please fix this,
thanks,
98613243




Comment 1


98613243





          2010-04-10 12:16:51 UTC
        

what the heck?!

I just went to

http://xorg.freedesktop.org/releases/individual/driver/

to download the latest keyboard and mouse drivers - but the latest drivers Xorg can offer are those already installed by gentoo anyway. It seems that Xorg is incompatible to itself?! I'm afraid I have to hack the major vesion of that input drivers and see if they still work -- or else I'd have to wait until Xorg can provide some consistent software :(





Comment 2


Daniel Pielmeier






          2010-04-10 12:27:01 UTC
        

elog from x11-base/xorg-server-1.7.6 - 09.04.2010

WARN: postinst
You must rebuild all drivers if upgrading from xorg-server 1.6
or earlier, because the ABI changed. If you cannot start X because
of module version mismatch errors, this is your problem.
You can generate a list of all installed packages in the x11-drivers
category using this command:
emerge portage-utils; qlist -I -C x11-drivers/





Comment 3


98613243





          2010-04-10 12:32:15 UTC
        

ok, here's a fix: as "config.in.h" from e.g. they keyboard-driver does "#include "xorg-server.h", I was curious if it is sufficient to simply recomplie the input modules, and in fact, this helped.

so I unmerged x11-drivers/xf86-input-keyboard x11-drivers/xf86-input-mouse and reemerged them afterwards, now the Xserver works as before.

still, I wonder why the input modules are not automatically re-emergeed after the X-Server is upated. is there some kind of forgotten dependency between Xserve and its input modules?




Comment 4


98613243





          2010-04-10 12:39:45 UTC
        

Hi Daniel,

thanks for the hint - just got a "Mid Air Collision detected" when submitting my latest reply ;-)

I wonder if it's possible that gentoo can detect if it's upgrading from < 1.6 to >= 1.6 and to a re-emerge of corresponding X11-modules automatically?

cheers,
98613243




Comment 5


Daniel Pielmeier






          2010-04-10 13:04:00 UTC
        

You have to recompile your input modules everytime the x-server is updated. I think if the gentoo maintainers of the xorg are aware of an automatic method or think this is a good idea there would be already such functionality.

If you search bugzilla "(EE) module ABI major version" you will find similar bugs like this and they were all closed as invalid because manually updating the input modules after server update is the the way to go.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

