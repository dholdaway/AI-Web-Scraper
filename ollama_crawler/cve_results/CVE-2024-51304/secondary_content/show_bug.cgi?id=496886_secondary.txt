Title: 496886 – =mail-filter/opendkim-2.8.4 fails to comapile with USE=memcached
URL: https://bugs.gentoo.org/show_bug.cgi?id=496886

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 496886
=mail-filter/opendkim-2.8.4 fails to comapile with USE=memcached
Last modified: 2015-03-10 01:29:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 496886 
      - =mail-filter/opendkim-2.8.4 fails to comapile with USE=memcached


Summary:
=mail-filter/opendkim-2.8.4 fails to comapile with USE=memcached
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Net-Mail Packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-01-03 13:36 UTC by Marc Schiffbauer





      Modified:
    
2015-03-10 01:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (file_496886.txt,4.53 KB,
                text/plain)

            
2014-01-03 13:36 UTC,

            Marc Schiffbauer




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marc Schiffbauer






          2014-01-03 13:36:44 UTC
        

Created attachment 366846 [details]
emerge --info

[...]
x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..  -I./../libopendkim       -I/usr/include -I/usr/include -I./../libvbr  -I./../libdkimrep     -I/usr/include -DCONFIG_BASE=\"/etc\" -pthread      -O2 -pipe -c -o opendkim-test.o `test -f 'test.c' || echo './'`test.c
x86_64-pc-linux-gnu-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..  -I./../libopendkim       -I/usr/include -I/usr/include -I./../libvbr  -I./../libdkimrep     -I/usr/include -DCONFIG_BASE=\"/etc\" -pthread      -O2 -pipe -c -o opendkim-util.o `test -f 'util.c' || echo './'`util.c
/bin/sh ../libtool  --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc -std=gnu99      -O2 -pipe        -Wl,-O1 -Wl,--as-needed -o opendkim-genzone opendkim_genzone-config.o opendkim_genzone-opendkim-db.o opendkim_genzone-opendkim-genzone.o opendkim_genzone-opendkim-lua.o opendkim_genzone-util.o ../libopendkim/libopendkim.la -lssl -lcrypto     -lopendbx  -ldl  -lmemcached -lmemcachedutil  -L/usr/lib -lldap -llber     -lbsd 
libtool: link: x86_64-pc-linux-gnu-gcc -std=gnu99 -O2 -pipe -Wl,-O1 -o .libs/opendkim-genzone opendkim_genzone-config.o opendkim_genzone-opendkim-db.o opendkim_genzone-opendkim-genzone.o opendkim_genzone-opendkim-lua.o opendkim_genzone-util.o  -Wl,--as-needed ../libopendkim/.libs/libopendkim.so /usr/lib64/libopendbx.so -ldl -lmemcached -lmemcachedutil -L/usr/lib /usr/lib64/libldap.so -L/usr/lib64 -lssl -lcrypto /usr/lib64/liblber.so -lresolv -lbsd
/bin/sh ../libtool  --tag=CC   --mode=link x86_64-pc-linux-gnu-gcc -std=gnu99    -O2 -pipe  -Wl,-O1 -Wl,--as-needed -o opendkim-testadsp opendkim_testadsp-opendkim-testadsp.o ../libopendkim/libopendkim.la -lssl -lcrypto  -lresolv   -lbsd 
/usr/lib/libmemcached.so: undefined reference to `pthread_once'
collect2: error: ld returned 1 exit status
make[3]: *** [opendkim-genzone] Error 1
make[3]: *** Waiting for unfinished jobs....
libtool: link: x86_64-pc-linux-gnu-gcc -std=gnu99 -O2 -pipe -Wl,-O1 -o .libs/opendkim-testadsp opendkim_testadsp-opendkim-testadsp.o  -Wl,--as-needed ../libopendkim/.libs/libopendkim.so -lssl -lcrypto -lresolv -lbsd
make[3]: Leaving directory `/var/tmp/portage/mail-filter/opendkim-2.8.4/work/opendkim-2.8.4/opendkim'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/mail-filter/opendkim-2.8.4/work/opendkim-2.8.4/opendkim'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/mail-filter/opendkim-2.8.4/work/opendkim-2.8.4'
make: *** [all] Error 2
 * ERROR: mail-filter/opendkim-2.8.4::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=mail-filter/opendkim-2.8.4::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=mail-filter/opendkim-2.8.4::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/mail-filter/opendkim-2.8.4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/mail-filter/opendkim-2.8.4/temp/environment'.
 * Working directory: '/var/tmp/portage/mail-filter/opendkim-2.8.4/work/opendkim-2.8.4'
 * S: '/var/tmp/portage/mail-filter/opendkim-2.8.4/work/opendkim-2.8.4'

>>> Failed to emerge mail-filter/opendkim-2.8.4, Log file:

>>>  '/var/tmp/portage/mail-filter/opendkim-2.8.4/temp/build.log'
 * 
 * The following package has failed to build or install:
 * 
 *  (mail-filter/opendkim-2.8.4::gentoo, ebuild scheduled for merge), Log file:
 *   '/var/tmp/portage/mail-filter/opendkim-2.8.4/temp/build.log'
 *




Comment 1


Eray Aslan






          2014-03-19 09:57:08 UTC
        

Cant reproduce the failure.  Please let me know if you are still having problems.  The following seems similar btw:

https://bugzilla.redhat.com/show_bug.cgi?id=1037707




Comment 2


Marc Schiffbauer






          2014-03-21 22:17:06 UTC
        

Its still broken on stable.

Installed versions here:

dev-libs/libmemcached-1.0.14
sys-devel/gcc-4.7.3-r1
sys-devel/libtool-2.4.2

rebuilding libmemcached did not help.




Comment 3


Marc Schiffbauer






          2015-03-10 01:29:42 UTC
        

Seems to work now. Closing.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

