Title: 175508 – /etc/init.d/distccd should use --exec and not --startas
URL: https://bugs.gentoo.org/show_bug.cgi?id=175508

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 175508
/etc/init.d/distccd should use --exec and not --startas
Last modified: 2007-07-29 14:26:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 175508 
      - /etc/init.d/distccd should use --exec and not --startas


Summary:
/etc/init.d/distccd should use --exec and not --startas
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Lisa Seelye (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-04-21 22:38 UTC by Xake





      Modified:
    
2007-07-29 14:26 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Xake





          2007-04-21 22:38:24 UTC
        

The current initscript for distccd is not compatible with baselayout-2 and fails to start. A simple change from --startas to --exec in the script seems to work for me.




Comment 1


Xake





          2007-05-24 16:03:25 UTC
        

Ping?
Still an issue for me...




Comment 2


Lisa Seelye (RETIRED)






          2007-07-29 14:13:52 UTC
        

Please provide emerge --info output as well as any error messages.




Comment 3


Xake





          2007-07-29 14:26:32 UTC
        

This is strange. As I was going to reproduce to get the errormessage (I have had this problem on at least 3 diffrent machines) it just works on them. Could be related to baselayout-2.0.0_beta4.
Closes as WORKSFORME.

On a side not: can you please add the diff to the init script?
It will remove the following message during boot:
 * Starting distccd ...
distccd[13380] (dcc_should_be_inetd) stdin is a tty; assuming --daemon mode        


--- distccd.old 2007-07-29 16:23:56.000000000 +0200
+++ distccd     2007-07-29 16:24:03.000000000 +0200
@@ -15,7 +15,7 @@
        PATH="$(gcc-config --get-bin-path):${PATH}" \
        /sbin/start-stop-daemon --start --quiet --startas ${DISTCCD_EXEC} \
        --pidfile ${DISTCCD_PIDFILE} -- \
-       --pid-file ${DISTCCD_PIDFILE} -N ${DISTCCD_NICE} --user distcc \
+       --pid-file ${DISTCCD_PIDFILE} -N ${DISTCCD_NICE} --user distcc --daemon \
        ${DISTCCD_OPTS}
 
        eend $?










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

