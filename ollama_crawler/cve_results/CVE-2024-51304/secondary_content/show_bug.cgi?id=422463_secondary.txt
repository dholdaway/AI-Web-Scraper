Title: 422463 – dev-perl/XML-Parser-2.410.0 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=422463

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 422463
dev-perl/XML-Parser-2.410.0 fails to build
Last modified: 2012-09-10 18:55:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 422463 
      - dev-perl/XML-Parser-2.410.0 fails to build


Summary:
dev-perl/XML-Parser-2.410.0 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-06-19 20:09 UTC by Matthew Schultz





      Modified:
    
2012-09-10 18:55 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,2.21 KB,
                text/plain)

            
2012-06-19 20:10 UTC,

            Matthew Schultz




Details





environment

              (environment,78.75 KB,
                text/plain)

            
2012-06-19 20:10 UTC,

            Matthew Schultz




Details





file_diff

              (file_diff.txt,75.32 KB,
                text/plain)

            
2012-06-20 05:31 UTC,

            Matthew Schultz




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthew Schultz





          2012-06-19 20:09:24 UTC
        

emerge -av XML-Parser

These are the packages that would be merged, in order:

Calculating dependencies                                                                                                                                                                                         ... done!
[ebuild     U  ] dev-perl/XML-Parser-2.410.0 [2.36-r1] 0 kB

Total: 1 package (1 upgrade), Size of downloads: 0 kB

Would you like to merge these packages? [Yes/No] 
>>> Verifying ebuild manifests

>>> Emerging (1 of 1) dev-perl/XML-Parser-2.410.0
 * XML-Parser-2.41.tar.gz RMD160 SHA1 SHA256 size ;-) ...                                                                                                                                                   [ ok ]
>>> Unpacking source...
>>> Unpacking XML-Parser-2.41.tar.gz to /var/tmp/portage/dev-perl/XML-Parser-2.410.0/work
>>> Source unpacked in /var/tmp/portage/dev-perl/XML-Parser-2.410.0/work
>>> Preparing source in /var/tmp/portage/dev-perl/XML-Parser-2.410.0/work/XML-Parser-2.41 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/dev-perl/XML-Parser-2.410.0/work/XML-Parser-2.41 ...
 * Using ExtUtils::MakeMaker
 * perl Makefile.PL PREFIX=/usr INSTALLDIRS=vendor INSTALLMAN3DIR=none DESTDIR=/var/tmp/portage/dev-perl/XML-Parser-2.410.0/image/ EXPATLIBPATH='/usr/lib64' EXPATINCPATH='/usr/include'
File/Temp.pm did not return a true value at inc/Devel/CheckLib.pm line 13.
BEGIN failed--compilation aborted at inc/Devel/CheckLib.pm line 13.
Compilation failed in require at Makefile.PL line 5.
BEGIN failed--compilation aborted at Makefile.PL line 5.
 * ERROR: dev-perl/XML-Parser-2.410.0 failed (configure phase):
 *   Unable to build!
 * 
 * Call stack:
 *     ebuild.sh, line   85:  Called src_configure
 *   environment, line 2219:  Called perl-module_src_configure
 *   environment, line 1944:  Called perl-module_src_prep
 *   environment, line 2016:  Called die
 * The specific snippet of code:
 *               perl Makefile.PL "$@" <<< "${pm_echovar}" || die "Unable to build!";
 * 
 * If you need support, post the output of 'emerge --info =dev-perl/XML-Parser-2.410.0',
 * the complete build log and the output of 'emerge -pqv =dev-perl/XML-Parser-2.410.0'.
 * The complete build log is located at '/var/tmp/portage/dev-perl/XML-Parser-2.410.0/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-perl/XML-Parser-2.410.0/temp/environment'.
 * S: '/var/tmp/portage/dev-perl/XML-Parser-2.410.0/work/XML-Parser-2.41'


Reproducible: Always




Comment 1


Matthew Schultz





          2012-06-19 20:10:28 UTC
        

Created attachment 315799 [details]
build.log




Comment 2


Matthew Schultz





          2012-06-19 20:10:47 UTC
        

Created attachment 315801 [details]
environment




Comment 3


Matthew Schultz





          2012-06-19 20:14:38 UTC
        

I already tried reemerging perl, expat and ExtUtils-MakeMaker as well as revdep-rebuild just to try to get XML-Parser to emerge but nothing works.

emerge --info
Portage 2.1.10.49 (default/linux/amd64/10.0, gcc-4.5.3, glibc-2.14.1-r3, 3.3.1-gentoo x86_64)
=================================================================
System uname: Linux-3.3.1-gentoo-x86_64-Intel-R-_Core-TM-2_CPU_T7200_@_2.00GHz-with-gentoo-2.1
Timestamp of tree: Thu, 31 May 2012 14:35:01 +0000
app-shells/bash:          4.2_p20
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.7.2-r3, 3.2.2
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.1-r1
sys-apps/openrc:          0.9.9.3
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.10.3, 1.11.1
sys-devel/binutils:       2.21.1-r1
sys-devel/gcc:            4.5.3-r2
sys-devel/gcc-config:     1.5-r2
sys-devel/libtool:        2.4-r1
sys-devel/make:           3.82-r1
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.14.1-r3
Repositories: gentoo sunrise x-portage
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks ebuild-locks fixlafiles news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://portage.home http://gentoo.cites.uiuc.edu/pub/gentoo/ http://gentoo.mirrors.easynews.com/linux/gentoo/ http://mirror.phy.olemiss.edu/mirror/gentoo"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en ru"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/sunrise /usr/local/portage"
SYNC="rsync://server.home/gentoo-portage"
USE="X a52 aac acl acpi adns alsa amd64 apache2 audiofile avi bcmath bdf berkdb bluetooth bzip2 cairo calendar caps cdda cdr chardet cjk clamav cli consolekit cracklib crypt css ctype cups curl curlwrappers cxx dbus declarative device-mapper dga directfb dri dts dvb dvd dvdread emu-linux-x86 enca encode exif fbcon ffmpeg flac foomaticdb fortran ftp fts3 gd gdbm gif gmp gnutls gpm gsm gtk gtk2 gzip hash hbci iconv idn ieee1394 imagemagick imap imlib innodb ipv6 ithreads java java6 javascript jpeg jpeg2k json kde kipi lcms libcaca libnotify lirc lm_sensors logrotate lzma lzo mad matroska mcal mhash mime mjpeg mmx mmxext mng modules mp3 mp4 mpeg mplayer msession mudflap multilib mysql mysqli mythtv ncurses network nls nptl nptlonly nsplugin nss nvidia offensive ofx ogg openal opengl openmp osc oss pam pcntl pcre pdf pdo pear perl php png policykit posix ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection rtc samba sasl sdl seamonkey semantic-desktop session simplexml soap sockets spell spl sql sqlite sse sse2 ssl ssse3 subversion suhosin svg syslog tcpd theora threads thumbnail tidy tiff tokenizer transcode truetype udev udisks unicode usb utempter v4l v4l2 vcd vorbis vpx wddx webkit wifi wxwindows x264 xcb xcomposite xforms xine xinerama xml xorg xpm xsl xv xvid xvmc zip zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev keyboard mouse synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="en ru" PHP_TARGETS="php5-3" PYTHON_TARGETS="python3_2 python2_7" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="nvidia nv vesa fbdev v4l qxl" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 4


Torsten Veller (RETIRED)






          2012-06-20 03:41:27 UTC
        

File::Temp seems to be broken. Please add the output of:

perl -MFile::Temp -lwe 'print $INC{"File/Temp.pm"}'
perl -lwe 'for (@INC) { print if -e "$_/File/Temp.pm" }'
perl -V




Comment 5


Matthew Schultz





          2012-06-20 03:51:27 UTC
        

perl -MFile::Temp -lwe 'print $INC{"File/Temp.pm"}'
File/Temp.pm did not return a true value.
BEGIN failed--compilation aborted.

perl -lwe 'for (@INC) { print if -e "$_/File/Temp.pm" }'
/usr/lib64/perl5/vendor_perl/5.12.2
/usr/lib64/perl5/5.12.4

perl -V
Summary of my perl5 (revision 5 version 12 subversion 4) configuration:
   
  Platform:
    osname=linux, osvers=3.3.1-gentoo, archname=x86_64-linux-thread-multi
    uname='linux arwen 3.3.1-gentoo #1 smp preempt sat apr 7 23:27:27 cdt 2012 x86_64 intel(r) core(tm)2 cpu t7200 @ 2.00ghz genuineintel gnulinux '
    config_args='-des -Duseshrplib -Darchname=x86_64-linux-thread -Dcc=x86_64-pc-linux-gnu-gcc -Doptimize=-march=core2 -O2 -pipe -fomit-frame-pointer -Dldflags=-Wl,-O1 -Wl,--as-needed -Dprefix=/usr -Dsiteprefix=/usr -Dvendorprefix=/usr -Dscriptdir=/usr/bin -Dprivlib=/usr/lib64/perl5/5.12.4 -Darchlib=/usr/lib64/perl5/5.12.4/x86_64-linux-thread-multi -Dsitelib=/usr/lib64/perl5/site_perl/5.12.4 -Dsitearch=/usr/lib64/perl5/site_perl/5.12.4/x86_64-linux-thread-multi -Dvendorlib=/usr/lib64/perl5/vendor_perl/5.12.4 -Dvendorarch=/usr/lib64/perl5/vendor_perl/5.12.4/x86_64-linux-thread-multi -Dman1dir=/usr/share/man/man1 -Dman3dir=/usr/share/man/man3 -Dsiteman1dir=/usr/share/man/man1 -Dsiteman3dir=/usr/share/man/man3 -Dvendorman1dir=/usr/share/man/man1 -Dvendorman3dir=/usr/share/man/man3 -Dman1ext=1 -Dman3ext=3pm -Dlibperl=libperl.so.5.12.4 -Dlocincpth=  -Duselargefiles -Dd_semctl_semun -Dcf_by=Gentoo -Dmyhostname=localhost -Dperladmin=root@localhost -Dinstallusrbinperl=n -Ud_csh -Uusenm -Di_ndbm -Di_gdbm -Di_db -Dusethreads -DDEBUGGING=none -Dinc_version_list=5.12.3/x86_64-linux-thread-multi 5.12.3 5.12.2/x86_64-linux-thread-multi 5.12.2 5.12.1/x86_64-linux-thread-multi 5.12.1 5.12.0/x86_64-linux-thread-multi 5.12.0  -Dlibpth=/usr/local/lib64 /lib64 /usr/lib64'
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc='x86_64-pc-linux-gnu-gcc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',
    optimize='-march=core2 -O2 -pipe -fomit-frame-pointer',
    cppflags='-D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe'
    ccversion='', gccversion='4.5.3', gccosandvers=''
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld='x86_64-pc-linux-gnu-gcc', ldflags ='-Wl,-O1 -Wl,--as-needed'
    libpth=/usr/local/lib64 /lib64 /usr/lib64
    libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lpthread -lc -lgdbm_compat
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lpthread -lc
    libc=/lib/libc-2.14.1.so, so=so, useshrplib=true, libperl=libperl.so.5.12.4
    gnulibc_version='2.14.1'
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'
    cccdlflags='-fPIC', lddlflags='-shared -march=core2 -O2 -pipe -fomit-frame-pointer -Wl,-O1 -Wl,--as-needed'


Characteristics of this binary (from libperl): 
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_PERL_ATOF USE_REENTRANT_API
  Locally applied patches:
        0001-gentoo_MakeMaker-RUNPATH.diff
        0002-gentoo_config_over.diff
        0003-gentoo_cpan_definstalldirs.diff
        0004-gentoo_cpanplus_definstalldirs.diff
        0005-gentoo_create-libperl-soname.diff
        0006-gentoo_MakeMaker-delete_packlist.diff
        0007-fixes_8d66b3f9_h2hp_fix.diff
        0008-fixes_f178b03b_h2ph_using_deprecated_goto.diff
        0009-gentoo_mod-paths.diff
        0010-gentoo_enc2xs.diff
        0011-gentoo_IO-Compress_AutoLoader_dropped_from_Compress-Zlib.diff
        0012-gentoo_drop-fstack-protector.diff
  Built under linux
  Compiled at Jun 19 2012 10:34:02
  @INC:
    /etc/perl
    /usr/lib64/perl5/site_perl/5.12.4/x86_64-linux-thread-multi
    /usr/lib64/perl5/site_perl/5.12.4
    /usr/lib64/perl5/vendor_perl/5.12.4/x86_64-linux-thread-multi
    /usr/lib64/perl5/vendor_perl/5.12.4
    /usr/lib64/perl5/site_perl
    /usr/lib64/perl5/vendor_perl/5.12.3
    /usr/lib64/perl5/vendor_perl/5.12.2/x86_64-linux-thread-multi
    /usr/lib64/perl5/vendor_perl/5.12.2
    /usr/lib64/perl5/vendor_perl
    /usr/lib64/perl5/5.12.4/x86_64-linux-thread-multi
    /usr/lib64/perl5/5.12.4
    /usr/local/lib/site_perl
    .




Comment 6


Torsten Veller (RETIRED)






          2012-06-20 04:06:47 UTC
        

Can you please diff the files? (I assume the file is installed from perl-core/File-Temp.)

cd /tmp; tar xzf /usr/portage/distfiles/File-Temp-0.22.tar.gz ; diff -u File-Temp-0.22/Temp.pm /usr/lib64/perl5/vendor_perl/5.12.2/File/Temp.pm


You can uninstall perl-core/File-Temp to solve the problem.
perl-core/File-Temp is not needed as the same version is also provided by your perl version.




Comment 7


Matthew Schultz





          2012-06-20 05:29:27 UTC
        

emerge -s File-Temp
Searching...    
[ Results for search key : File-Temp ]
[ Applications found : 3 ]

*  dev-perl/File-Tempdir
      Latest version available: 0.20.0
      Latest version installed: [ Not Installed ]
      Size of files: 1 kB
      Homepage:      http://search.cpan.org/dist/File-Tempdir/
      Description:   This module provide an object interface to tempdir() from File::Temp
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-core/File-Temp
      Latest version available: 0.220.0
      Latest version installed: [ Not Installed ]
      Size of files: 37 kB
      Homepage:      http://search.cpan.org/dist/File-Temp/
      Description:   File::Temp can be used to create and open temporary files in a safe way.
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  virtual/perl-File-Temp
      Latest version available: 0.220.0-r2
      Latest version installed: 0.220.0-r1
      Size of files: 0 kB
      Homepage:      
      Description:   Virtual for File-Temp
      License: 



I don't have that installed but I have the virtual one installed.  Should I uninstall that one?




Comment 8


Matthew Schultz





          2012-06-20 05:31:23 UTC
        

Created attachment 315819 [details]
file_diff




Comment 9


Torsten Veller (RETIRED)






          2012-06-20 13:12:57 UTC
        

/usr/lib64/perl5/vendor_perl/5.12.2/File/Temp.pm is an empty file and you should remove it. As you don't have perl-core/File-Temp installed, I don't know where it came from or why it's empty.

No, you should not uninstall the virtual.




Comment 10


Matthew Schultz





          2012-06-20 13:46:34 UTC
        

(In reply to comment #9)
> /usr/lib64/perl5/vendor_perl/5.12.2/File/Temp.pm is an empty file and you
> should remove it. As you don't have perl-core/File-Temp installed, I don't
> know where it came from or why it's empty.
> 
> No, you should not uninstall the virtual.

Thanks.  I removed that file and now XML-Parser merges.  I'm also not sure how that empty file got there either.




Comment 11


Torsten Veller (RETIRED)






          2012-09-10 18:55:51 UTC
        

Closing. Problem solved. Cause unknown.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

