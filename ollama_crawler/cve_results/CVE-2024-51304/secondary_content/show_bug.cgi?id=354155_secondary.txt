Title: 354155 – running KDE 4.6 without HAL leads to "Maximum number of clients reached"
URL: https://bugs.gentoo.org/show_bug.cgi?id=354155

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 354155
running KDE 4.6 without HAL leads to "Maximum number of clients reached"
Last modified: 2011-09-18 19:46:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 354155 
      - running KDE 4.6 without HAL leads to "Maximum number of clients reached"


Summary:
running KDE 4.6 without HAL leads to "Maximum number of clients reached"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-08 20:43 UTC by Aiwendil





      Modified:
    
2011-09-18 19:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge.info,6.38 KB,
                text/plain)

            
2011-02-27 19:02 UTC,

            Aiwendil




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Aiwendil





          2011-02-08 20:43:09 UTC
        

without HAL installed KDE seems to claim more and more xserver clients so that after some time it's not possible to start any new windows/programs. Trying to start any new graphical program results in a "Maximum number of clients reached" error.

Reproducible: Always

Steps to Reproduce:
1. unemerge HAL
2. emerge KDE
3. run KDE

Actual Results:  
KDE works...for some time...but about an hour later I get the "Maximum number of clients reached" error when trying to start any new program

Expected Results:  
KDE works for longer than an hour.

After running a few times in this error I started "xrestop -b" right from the start after logging in KDE.  There I get a lot of these:
59 - <unknown> ( PID:  ?   ):
        res_base      : ox600000
        res_mask      : ox1fffff
        windows       : 0
        GCs           : 1
        fonts         : 0
        pixmaps       : 0
        pictures      : 0
        glyphsets     : 0
        colormaps     : 0
        passive grabs : 0
        cursors       : 0
        unknowns      : 0
        pixmap bytes  : 0
        other bytes   : ~24
        total bytes   : ~24

And I can watch getting one more about every minute. So after two hours I reach the 255 xserver limit for clients. After reinstalling HAL and restarting KDE all worked fine. Sorry, no idea how to track down which program causes this...




Comment 1


Andreas K. Hüttel







          2011-02-26 20:39:57 UTC
        

Sorry, cant reproduce here. Please attach the output of emerge --info




Comment 2


Aiwendil





          2011-02-27 19:02:57 UTC
        

Created attachment 264085 [details]
emerge --info




Comment 3


Aiwendil





          2011-02-27 19:10:40 UTC
        

Sorry, I knew I forgot something...

At the start I was completely clueless what could have caused this problem at all (okay, in fact I'm still clueless) but searching the web a bit I found this: http://forum.kde.org/viewtopic.php?f=22&t=39413

After reading it I tried to emerge HAL again and it solved the problem for me...can't say why or what went wrong. 




Comment 4


Aiwendil





          2011-02-27 19:38:49 UTC
        

Okay...and another few "sorries"  ;) First for not really having a clue how this bugtracker works and if I can edit my previous comments...and second for almost having forgotten this after getting it to work with HAL again.

But just tried again and still have the same problem without HAL. Not even need to uninstall HAL..a "/etc/init.d/hald stop" and then a "/etc/init.d/xdm restart" already leads to the same problem for me. So I renamed my ".kde4" directory and started with a fresh configuration...and even then I can watch with "xrestop -b" getting a new "<unknown> ( PID:  ?   )"  claiming 1 GC about every minute. So doesn't look like it's the fault of one of the usual programs I have running right from the start.

I don't really have much of a clue about the xserver...and without a PID I can't figure out what program causes this...so open for suggestions. ,)




Comment 5


Theo Chatzimichos (RETIRED)








          2011-03-05 11:05:29 UTC
        

i don't think it is a kde issue




Comment 6


Samuli Suominen (RETIRED)






          2011-09-18 09:58:26 UTC
        

No idea why this was moved to freedesktop-bugs@ but moving back to kde@ as none involved packages are even in Portage anymore. 

sys-apps/hal has been removed.




Comment 7


Andreas K. Hüttel







          2011-09-18 10:10:48 UTC
        

No idea what to do with this, but hal is gone and people seem to do mostly just fine...




Comment 8


Aiwendil





          2011-09-18 19:46:26 UTC
        

Sorry...forgot this bug. I did a --emptytree rebuild some time ago and during that got rid of hal. Afterwards I didn't get the problem anymore. But I also didn't use the same KDE version at that point...so really no clue what caused it and even less how I got rid of it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

