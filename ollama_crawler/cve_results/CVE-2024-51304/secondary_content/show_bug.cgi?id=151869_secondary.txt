Title: 151869 – openoffice 2.0.4 fails to compile on amd64 with gcc-4.1.1-r1
URL: https://bugs.gentoo.org/show_bug.cgi?id=151869

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 151869
openoffice 2.0.4 fails to compile on amd64 with gcc-4.1.1-r1
Last modified: 2009-08-12 08:48:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 151869 
      - openoffice 2.0.4 fails to compile on amd64 with gcc-4.1.1-r1


Summary:
openoffice 2.0.4 fails to compile on amd64 with gcc-4.1.1-r1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:









Duplicates (6):
    

183506 189049 193591 195664 253132 275778

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-10-18 13:15 UTC by devsk





      Modified:
    
2009-08-12 08:48 UTC
      (History)
    




          CC List:
        

6 
          users
          
            (show)
          



asturm
davide.giannotti
frednet
keef
polynomial-c
rum









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


devsk





          2006-10-18 13:15:18 UTC
        

../unxlngx6.pro/slo/image.o: In function `SbiImage::Load(SvStream&, unsigned int&)':
image.cxx:(.text+0x7b9): undefined reference to `PCodeBuffConvertor<unsigned short, unsigned int>::convert()'
image.cxx:(.text+0x7c3): undefined reference to `PCodeBuffConvertor<unsigned short, unsigned int>::convert()'
../unxlngx6.pro/slo/image.o: In function `SbiImage::Save(SvStream&, unsigned int)':
image.cxx:(.text+0x1674): undefined reference to `PCodeBuffConvertor<unsigned int, unsigned short>::convert()'
image.cxx:(.text+0x167e): undefined reference to `PCodeBuffConvertor<unsigned int, unsigned short>::convert()'
collect2: ld returned 1 exit status
dmake:  Error code 1, while making '../unxlngx6.pro/lib/libsb680lx.so'
'---* tg_merge.mk *---'

ERROR: Error 65280 occurred while making /var/tmp/portage/openoffice-2.0.4/work/ooo/build/OOO_2_0_4/basic/util
make: *** [stamp/build] Error 1

!!! ERROR: app-office/openoffice-2.0.4 failed.
Call stack:
  ebuild.sh, line 1546:   Called dyn_compile
  ebuild.sh, line 937:   Called src_compile
  openoffice-2.0.4.ebuild, line 271:   Called die

!!! Build failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

!!! When you file a bug report, please include the following information:
GENTOO_VM=sun-jdk-1.5  CLASSPATH="" JAVA_HOME="/opt/sun-jdk-1.5.0.08"
JAVACFLAGS="-source 1.4 -target 1.4" COMPILER=""
and of course, the output of emerge --info

emerge --info:

$ emerge --info
Portage 2.1.1 (default-linux/amd64/2006.0, gcc-4.1.1, glibc-2.4-r4, 2.6.17-reiser4-r7 x86_64)
=================================================================
System uname: 2.6.17-reiser4-r7 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 3800+
Gentoo Base System version 1.12.5
Last Sync: Wed, 18 Oct 2006 15:00:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.4 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -msse2 -msse3 -fforce-addr -finline-functions -pipe -fomit-frame-pointer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/splash /etc/terminfo"
CXXFLAGS="-O2 -march=k8 -msse2 -msse3 -fforce-addr -finline-functions -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer nodoc parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.ucsb.edu/pub/mirrors/linux/gentoo/ http://gentoo.ccccom.com http://mirrors.tds.net/gentoo ftp://mirrors.tds.net/gentoo ftp://gentoo.mirrors.pair.com/"
LDFLAGS="-Wl,-O1 -Wl,--enable-new-dtags"
LINGUAS="en"
MAKEOPTS="-j4"
PKGDIR="/mnt/soft-raid-vms/x64-pkgs"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac acpi aim alsa arts audiofile bash-completion berkdb bitmap-fonts bzip2 cairo cdparanoia cdr cli composite cracklib crypt cscope css cups curl dar64 dbus dga directfb divx djbfft dlloader dri dv dvb dvd dvdr dvdread elibc_glibc emboss encode erandom esd evo exif expat ext-png ext-zlib faac faad fam fame fbcon fbsplash ffmpeg firefox flac foomaticdb freetype fuse gb gd gif gimp gimpprint glut gnome gnutls gphoto2 gpm gstreamer gtk gtk+ gtk2 hal hpn ieee1394 imagemagick imap imlib input_devices_evdev input_devices_keyboard input_devices_mouse input_devices_vmmouse ipv6 isdnlog java javascript jikes jpeg jpeg2k kde kdeenablefinal kdehiddenvisibility kernel_linux kqemu lcms ldap leim libcaca linguas_en lm_sensors logitech-mouse logrotate lzo lzw lzw-tiff mad matroska mjpeg mmap mmx2 mng mozsvg mp3 mp4 mpeg mplayer msn multislot musicbrainz nautilus ncurses nocd nodrm nomalloccheck nopie nossp nptl nptlonly nsplugin nut nvidia ogg openexr opengl oss pam pcre pda pdf perl pic png ppds pppd pwdb python qt qt3 qt4 quicktime rdesktop readline reflection rplay rtc samba sdl sensord server session slp smp sndfile spell spl sse3 ssl stencil-buffer stroke svg sysfs tcl tcpd theora tiff tk truetype truetype-fonts type1-fonts urandom usb userland_GNU userlocales v41 video_cards_fbdev video_cards_nv video_cards_nvidia video_cards_vesa video_cards_vga video_cards_vmware vim vnc vorbis wmf wmp x264 xanim xcomposite xft xine xinerama xml2 xmms xorg xpm xprint xv xvid xvmc yv12 zeroconf zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Jakub Moc (RETIRED)






          2006-10-18 13:52:44 UTC
        

Remove -fforce-addr -finline-functions from your C[XX]FLAGS and try again.





Comment 2


devsk





          2006-10-18 16:20:42 UTC
        

(In reply to comment #1)
> Remove -fforce-addr -finline-functions from your C[XX]FLAGS and try again.
> 

fforce-addr is removed by the ebuild. -finline-functions should also be removed by the ebuild because its the one which inlines the functions and hence causes undefined symbols in other parts of the build.

best would be to sed replace "-finline-functions"  with "-finline-functions -fkeep-inline-functions", so that if functions are inlined, they still are kept around in the object for other modules to link against later.




Comment 3


Jakub Moc (RETIRED)






          2006-10-18 16:21:59 UTC
        

Feel free to burn yourself, the ebuild explicitely tells you to use *sane* flags, if you want to rice, you're on your own.





Comment 4


devsk





          2006-10-18 16:28:24 UTC
        

(In reply to comment #3)
> Feel free to burn yourself, the ebuild explicitely tells you to use *sane*
> flags, if you want to rice, you're on your own.
> 

why do you get burnt so easily and start flaming people? Jakub, what did I do to get such a reply from you? -finline-functions makes so much sense with -O2. Its not about ricing. Its a perfectly *sane* flag.

You are such a freak!! Get some sleep and maybe a girl friend!




Comment 5


Jakub Moc (RETIRED)






          2007-06-28 10:47:10 UTC
        

*** Bug 183506 has been marked as a duplicate of this bug. ***




Comment 6


Jakub Moc (RETIRED)






          2007-08-16 05:21:49 UTC
        

*** Bug 189049 has been marked as a duplicate of this bug. ***




Comment 7


Jakub Moc (RETIRED)






          2007-09-24 08:03:05 UTC
        

*** Bug 193591 has been marked as a duplicate of this bug. ***




Comment 8


Jakub Moc (RETIRED)






          2007-10-13 07:37:45 UTC
        

*** Bug 195664 has been marked as a duplicate of this bug. ***




Comment 9


Lars Wendler (Polynomial-C) (RETIRED)






          2007-12-07 19:38:51 UTC
        

Well at least an ewarn would be nice to have. Something like

if has_flagq -finline-functions ; then
    ewarn "You have -finline-functions in your C(XX)FLAGS which is known to"
    ewarn "break compilation of openoffice. (see https://bugs.gentoo.org/151869)"
fi




Comment 10


Lars Wendler (Polynomial-C) (RETIRED)






          2008-12-31 20:50:28 UTC
        

*** Bug 253132 has been marked as a duplicate of this bug. ***




Comment 11


Andreas Sturmlechner






          2009-08-12 08:48:14 UTC
        

*** Bug 275778 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

