Title: 92764 – unzip tries to compile for arch i386, while one amd64
URL: https://bugs.gentoo.org/show_bug.cgi?id=92764

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 92764
unzip tries to compile for arch i386, while one amd64
Last modified: 2009-11-06 04:13:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 92764 
      - unzip tries to compile for arch i386, while one amd64


Summary:
unzip tries to compile for arch i386, while one amd64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

213909

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-05-15 21:57 UTC by relic





      Modified:
    
2009-11-06 04:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



haavardw









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


relic





          2005-05-15 21:57:12 UTC
        

When emerging unzip it breaks on amd64. See paste below. Everything is setup
richt as far as I can see. make.conf, keywords etc.

boson root # emerge unzip
Calculating dependencies ...done!
>>> emerge (1 of 1) app-arch/unzip-5.50-r2 to /
>>> md5 files   ;-) unzip-5.50-r2.ebuild
>>> md5 files   ;-) unzip-5.52.ebuild
>>> md5 files   ;-) ChangeLog
>>> md5 files   ;-) files/digest-unzip-5.52
>>> md5 files   ;-) files/digest-unzip-5.50-r2
>>> md5 files   ;-) files/unzip-5.50-dotdot.patch
>>> md5 src_uri ;-) unzip550.tar.gz
>>> Unpacking source...
>>> Unpacking unzip550.tar.gz to /var/tmp/portage/unzip-5.50-r2/work
 * Applying unzip-5.50-dotdot.patch ...                                                                                                                          [ ok ]>>> Source unpacked.
NOTE:  use linux_noasm target for non-Intel Linux compiles.
make unzips CC=x86_64-pc-linux-gnu-gcc LD=x86_64-pc-linux-gnu-gcc AS=gcc\
 CF=" -march=athlon64 -O2 -pipe -Wall -I. -DASM_CRC "\
 AF="-Di386 " CRC32=crc_gcc
make[1]: Entering directory `/var/tmp/portage/unzip-5.50-r2/work/unzip-5.50'
x86_64-pc-linux-gnu-gcc -c -march=athlon64 -O2 -pipe -Wall -I. -DASM_CRC  unzip.c
gcc -Di386  -x assembler-with-cpp -c -o crc_gcc.o crc_i386.S
crc_i386.S: Assembler messages:
crc_i386.S:138: Error: suffix or operands invalid for `push'
crc_i386.S:139: Error: suffix or operands invalid for `push'
crc_i386.S:140: Error: suffix or operands invalid for `push'
crc_i386.S:141: Error: suffix or operands invalid for `push'
crc_i386.S:142: Error: suffix or operands invalid for `push'
crc_i386.S:143: Error: suffix or operands invalid for `push'
crc_i386.S:220: Error: suffix or operands invalid for `pop'
crc_i386.S:221: Error: suffix or operands invalid for `pop'
crc_i386.S:222: Error: suffix or operands invalid for `pop'
crc_i386.S:223: Error: suffix or operands invalid for `pop'
crc_i386.S:224: Error: suffix or operands invalid for `pop'
crc_i386.S:225: Error: suffix or operands invalid for `pop'
make[1]: *** [crc_gcc.o] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: Leaving directory `/var/tmp/portage/unzip-5.50-r2/work/unzip-5.50'
make: *** [linux] Error 2

!!! ERROR: app-arch/unzip-5.50-r2 failed.
!!! Function src_compile, Line 35, Exitcode 2
!!! emake failed
!!! If you need support, post the topmost build error, NOT this status message.


----------------

Also see this thread on the forum, I'am not alone:
http://forums.gentoo.org/viewtopic-t-333110-highlight-.html

I can't emerge gnome because of this, docbook seems to be packed in zip.


Reproducible: Always
Steps to Reproduce:
emerge unzip on a amd64

Actual Results:  
compilation breaks

Expected Results:  
unzip emerged and installed so it can be used to unpack pkgs.
Don't know why unzip is used as this is not free, but oke.

I'll mark this major, it blocks the installation of packages.




Comment 1


Jeffrey Forman (RETIRED)






          2005-06-10 12:47:29 UTC
        

this really is not a bugzilla bug, reassigning.




Comment 2


Daniel Gryniewicz (RETIRED)






          2005-06-16 14:19:57 UTC
        

Unzip is installed fine here: [ebuild   R   ] app-arch/unzip-5.52  1,113 kB 

Could you include emerge info, please?




Comment 3


Olliver Schinagl





          2005-07-04 21:28:29 UTC
        

same problem here.

Portage 2.0.51.22-r1 (default-linux/amd64/2005.0, gcc-3.4.4, glibc-2.3.5-r0,
2.6.12-gentoo-r3 x86_64)
=================================================================
System uname: 2.6.12-gentoo-r3 x86_64 AMD Athlon(tm) 64 Processor 2800+
Gentoo Base System version 1.6.12
dev-lang/python:     2.3.4-r1, 2.4.1-r1
sys-apps/sandbox:    1.2.10
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=k8 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=k8 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict userpriv usersandbox"
GENTOO_MIRRORS="http://open-systems.ufl.edu/mirrors/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X acpi aim alsa apm audiofile avi bcmath bindist bitmap-fonts bzlib
cairo calendar cdr cross crypt ctype cups curl curlwrappers dga dio dvb dvd
encode exif fastcgi fbcon fftw font-server foomatic fortran ftp gd gif gnutls
gphoto2 gstreamer gtk gtk2 icq imap imlib imlib2 ipv6 jabber jp2 jpeg kerberos
lesstif libwww lirc lzo lzw lzw-tiff maildir memlimit mhash mikmod mime mmap mng
motif mozilla mp3 ncurses nocd nothemes odbc oggvorbis openal opengl oscar pam
png posix ppds quicktime readline sdl shared sharedmem simplexml slang snmp
sockets speex spell ssl svg tcpd theora tidy tiff tokenizer truetype
truetype-fonts type1-fonts unicode usb userlocales videos x86 xinerama xml2 xmms
xosd xpm xrandr xv xvid yahoo zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY






Comment 4


Olliver Schinagl





          2005-07-04 21:30:51 UTC
        

However after removing the 'x86' from the USE flags that krept in there, it all
works now.




Comment 5


Simon Stelling (RETIRED)






          2005-08-08 05:49:32 UTC
        

works fine here too.. relic, you probably have x86 in your use flags. remove it
(if it's really there), and if it still not works, please reopen with your
emerge --info




Comment 6


Jakub Moc (RETIRED)






          2008-03-19 10:28:43 UTC
        

*** Bug 213909 has been marked as a duplicate of this bug. ***




Comment 7


Robin Johnson









          2009-11-06 04:13:21 UTC
        

*** Bug 213909 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

