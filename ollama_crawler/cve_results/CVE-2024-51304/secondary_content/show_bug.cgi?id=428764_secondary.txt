Title: 428764 – bootstrap: dev-lang/perl-5.16.0 fails to build on FreeBSD 9.1-BETA1
URL: https://bugs.gentoo.org/show_bug.cgi?id=428764

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 428764
bootstrap: dev-lang/perl-5.16.0 fails to build on FreeBSD 9.1-BETA1
Last modified: 2012-08-11 07:45:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 428764 
      - bootstrap: dev-lang/perl-5.16.0 fails to build on FreeBSD 9.1-BETA1


Summary:
bootstrap: dev-lang/perl-5.16.0 fails to build on FreeBSD 9.1-BETA1
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

AMD64
        FreeBSD
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:

Bug, REGRESSION







Depends on:







Blocks:









 





      Reported:
    
2012-07-31 07:35 UTC by Richard Yao (RETIRED)





      Modified:
    
2012-08-11 07:45 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




dev-lang/perl-5.16.0 build.log

              (build.log,8.99 KB,
                text/plain)

            
2012-07-31 07:35 UTC,

            Richard Yao (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Richard Yao (RETIRED)






          2012-07-31 07:35:10 UTC
        

Created attachment 319818 [details]
dev-lang/perl-5.16.0 build.log

dev-lang/perl-5.16.0 fails to build because of the following:

-----------------------------------------------------------
Checking your choice of C compiler and flags for coherency...
I've tried to compile and run the following simple program:

#include <stdio.h>
int main() { printf("Ok\n"); return(0); }

I used the command:

        gcc -o try -O -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -I/root/gentoo/usr/include -Wl,-E try.c -lgdbm -lm -lcrypt -lutil -lc
         ./try

and I got the following output:

/usr/bin/ld: cannot find -lgdbm
I can't compile the test program.
You have a BIG problem.  Shall I abort Configure [y]  
Ok.  Stopping Configure.
-----------------------------------------------------------

It might be possible to remove the dependency by removing -lgdbm. However, this assumes that CTARGET and CBUILD are the same, which breaks cross compilation. It would be best to remove this check altogether.




Comment 1


Richard Yao (RETIRED)






          2012-07-31 07:40:00 UTC
        

Installing sys-libs/gdbm does not fix this. I assume that is because LDFLAGS are not being passed.




Comment 2


Richard Yao (RETIRED)






          2012-07-31 08:11:42 UTC
        

I observed this issue when trying to get the bootstrap process working on FreeBSD 9.1-BETA1. I initially thought that this was a more general problem. Then I encountered additional issues with headers after bypassing the gdbm issue.




Comment 3


Fabian Groffen






          2012-08-06 18:40:47 UTC
        

I cannot reproduce this on vanilla i386 and x86_64 FreeBSD 9.1-BETA1.  Following the Solaris bootstrap instructions here.




Comment 4


Fabian Groffen






          2012-08-11 07:45:54 UTC
        

I can perform stage{1,2,3} flawlessly on a vanilla FreeBSD 9.1-BETA1









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

