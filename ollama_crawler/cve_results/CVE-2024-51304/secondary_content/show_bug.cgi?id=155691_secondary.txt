Title: 155691 – [fPIC] media-video/vlc-0.8.6_beta2 doesn't compile on AMD64
URL: https://bugs.gentoo.org/show_bug.cgi?id=155691

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 155691
[fPIC] media-video/vlc-0.8.6_beta2 doesn't compile on AMD64
Last modified: 2006-12-02 07:52:56 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 155691 
      - [fPIC] media-video/vlc-0.8.6_beta2 doesn't compile on AMD64


Summary:
[fPIC] media-video/vlc-0.8.6_beta2 doesn't compile on AMD64
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Diego Elio Pettenò (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-11-19 09:31 UTC by Patrick Rutka





      Modified:
    
2006-12-02 07:52 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



amd64
voyageur









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Patrick Rutka





          2006-11-19 09:31:46 UTC
        

/bin/sh ../../../libtool --mode=install /bin/install -c  'libaccess_mms_plugin.la' '/var/tmp/portage/media-video/vlc-0.8.6_beta2/image//usr/lib64/vlc/access/libaccess_mms_plugin.la'
libtool: install: warning: relinking `libaccess_mms_plugin.la'
(cd /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms; /bin/sh ../../../libtool  --tag=CC --mode=relink x86_64-pc-linux-gnu-gcc -D_FILE_OFFSET_BITS=64 -D__USE_UNIX98 -D_LARGEFILE64_SOURCE -D_REENTRANT -D_THREAD_SAFE -D_GNU_SOURCE -DLOCALEDIR="/usr/share/locale" -DDATA_PATH="/usr/share/vlc" -DPLUGIN_PATH="/usr/lib64/vlc" -O3 -ffast-math -funroll-loops -mtune=athlon64 -fomit-frame-pointer -D__VLC__ -D__PLUGIN__ -DMODULE_NAME=access_mms -DMODULE_NAME_IS_access_mms -Wsign-compare -Wall -O3 -march=k8 -pipe -fomit-frame-pointer -frename-registers -fweb -ftree-vectorize -ftree-vect-loop-version -ftracer -pipe -L/usr/lib64 -shared -lpthread -rpath /usr/lib64/vlc/access -avoid-version -module -shrext .so -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s -o libaccess_mms_plugin.la libaccess_mms_plugin_la-mms.lo libaccess_mms_plugin_la-mmsh.lo libaccess_mms_plugin_la-mmstu.lo libaccess_mms_plugin_la-buffer.lo libaccess_mms_plugin_la-asf.lo ../../../src/libvlc.la -inst-prefix-dir /var/tmp/portage/media-video/vlc-0.8.6_beta2/image/)
x86_64-pc-linux-gnu-gcc -shared  .libs/libaccess_mms_plugin_la-mms.o .libs/libaccess_mms_plugin_la-mmsh.o .libs/libaccess_mms_plugin_la-mmstu.o .libs/libaccess_mms_plugin_la-buffer.o .libs/libaccess_mms_plugin_la-asf.o  -L/usr/lib64 -lpthread -L/var/tmp/portage/media-video/vlc-0.8.6_beta2/image//usr/lib64 -lvlc -L/usr/lib/live/UsageEnvironment -L/usr/lib/live/groupsock -L/usr/lib/live/BasicUsageEnvironment -L/usr/lib/live/liveMedia  -mtune=athlon64 -march=k8 -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -Wl,-soname -Wl,libaccess_mms_plugin.so -o .libs/libaccess_mms_plugin.so
/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib64/libvlc.a(libvlc_a-item-ext.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/lib64/libvlc.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
libtool: install: error: relink `libaccess_mms_plugin.la' with the above command before installing it
make[9]: *** [install-libvlcLTLIBRARIES] Erreur 1
make[9]: quittant le r




Comment 1


Patrick Rutka





          2006-11-19 09:31:46 UTC
        

/bin/sh ../../../libtool --mode=install /bin/install -c  'libaccess_mms_plugin.la' '/var/tmp/portage/media-video/vlc-0.8.6_beta2/image//usr/lib64/vlc/access/libaccess_mms_plugin.la'
libtool: install: warning: relinking `libaccess_mms_plugin.la'
(cd /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms; /bin/sh ../../../libtool  --tag=CC --mode=relink x86_64-pc-linux-gnu-gcc -D_FILE_OFFSET_BITS=64 -D__USE_UNIX98 -D_LARGEFILE64_SOURCE -D_REENTRANT -D_THREAD_SAFE -D_GNU_SOURCE -DLOCALEDIR="/usr/share/locale" -DDATA_PATH="/usr/share/vlc" -DPLUGIN_PATH="/usr/lib64/vlc" -O3 -ffast-math -funroll-loops -mtune=athlon64 -fomit-frame-pointer -D__VLC__ -D__PLUGIN__ -DMODULE_NAME=access_mms -DMODULE_NAME_IS_access_mms -Wsign-compare -Wall -O3 -march=k8 -pipe -fomit-frame-pointer -frename-registers -fweb -ftree-vectorize -ftree-vect-loop-version -ftracer -pipe -L/usr/lib64 -shared -lpthread -rpath /usr/lib64/vlc/access -avoid-version -module -shrext .so -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s -o libaccess_mms_plugin.la libaccess_mms_plugin_la-mms.lo libaccess_mms_plugin_la-mmsh.lo libaccess_mms_plugin_la-mmstu.lo libaccess_mms_plugin_la-buffer.lo libaccess_mms_plugin_la-asf.lo ../../../src/libvlc.la -inst-prefix-dir /var/tmp/portage/media-video/vlc-0.8.6_beta2/image/)
x86_64-pc-linux-gnu-gcc -shared  .libs/libaccess_mms_plugin_la-mms.o .libs/libaccess_mms_plugin_la-mmsh.o .libs/libaccess_mms_plugin_la-mmstu.o .libs/libaccess_mms_plugin_la-buffer.o .libs/libaccess_mms_plugin_la-asf.o  -L/usr/lib64 -lpthread -L/var/tmp/portage/media-video/vlc-0.8.6_beta2/image//usr/lib64 -lvlc -L/usr/lib/live/UsageEnvironment -L/usr/lib/live/groupsock -L/usr/lib/live/BasicUsageEnvironment -L/usr/lib/live/liveMedia  -mtune=athlon64 -march=k8 -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -Wl,-soname -Wl,libaccess_mms_plugin.so -o .libs/libaccess_mms_plugin.so
/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/lib64/libvlc.a(libvlc_a-item-ext.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/lib64/libvlc.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
libtool: install: error: relink `libaccess_mms_plugin.la' with the above command before installing it
make[9]: *** [install-libvlcLTLIBRARIES] Erreur 1
make[9]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms »
make[8]: *** [install-exec-local] Erreur 2
make[8]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms »
make[7]: *** [install-am] Erreur 2
make[7]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms »
make[6]: *** [install-recursive] Erreur 1
make[6]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms »
make[5]: *** [install] Erreur 2
make[5]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access/mms »
make[4]: *** [install-recursive] Erreur 1
make[4]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access »
make[3]: *** [install] Erreur 2
make[3]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules/access »
make[2]: *** [install-recursive] Erreur 1
make[2]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a/modules »
make[1]: *** [install-recursive] Erreur 1
make[1]: quittant le répertoire « /var/tmp/portage/media-video/vlc-0.8.6_beta2/work/vlc-0.8.6-test2a »
make: *** [install] Erreur 2

!!! ERROR: media-video/vlc-0.8.6_beta2 failed.
Call stack:
  ebuild.sh, line 1568:   Called dyn_install
  ebuild.sh, line 1022:   Called src_install
  vlc-0.8.6_beta2.ebuild, line 244:   Called die

!!! make install failed
!!! If you need support, post the topmost build error, and the call stack if relevant.

And emerge --info

Portage 2.1.2_rc2 (default-linux/amd64/2006.1/desktop, gcc-4.1.1, glibc-2.5-r0, 2.6.18-gentoo x86_64)
=================================================================
System uname: 2.6.18-gentoo x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.6
Last Sync: Sun, 19 Nov 2006 12:30:02 +0000
ccache version 2.4 [disabled]
dev-java/java-config: 1.3.7, 2.0.30
dev-lang/python:     2.3.5, 2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O3 -march=k8 -pipe -fomit-frame-pointer -frename-registers -fweb -ftree-vectorize -ftree-vect-loop-version -ftracer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="fr_FR@euro"
LC_ALL="fr_FR@euro"
LDFLAGS="-Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s"
LINGUAS="fr"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/local/portage/xgl-coffee"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X a52 aac aalib accessibility acpi akode alsa apache2 arts async audiofile avahi bash-completion berkdb bitmap-fonts bzip2 cairo canvas cdda cddb cdio cdparanoia cdr cli cracklib crypt css cups curl dbus dlloader dpms dri dts dv dvd dvdr dvdread eds elibc_glibc emboss encode exif expat exscalibar extrafilters fam fame ffmpeg firefox flac fontconfig foomaticdb fortran freetype gcj gdbm gif glitz gnutls gphoto2 gpm gstreamer gtk2 hal httpd iconv ieee1394 imagemagick imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog java jpeg kde kdeenablefinal kdehiddenvisibility kernel_linux kipi lcms ldap libcaca libg++ linguas_fr lirc lirc_devices_leadtek_0010 live lm_sensors logitech-mouse lzo mad matroska mbrola mikmod mjepg mng mono mozdevelop mozsvg mp3 mpeg mplayer mtp musepack musicbrainz ncurses network nls nptl nptlonly nvidia ogg oggvorbis openal openexr opengl pam pcre pdf perl png povray ppds pppd python qt qt3 qt4 quicktime rdesktop readline reflection rtc samba sblive scanner sdl sensord session skins slp speex spell spl ssl stream svg syslog taglib tcpd theora threads tidy tiff truetype truetype-fonts type1-fonts udev unicode usb userland_GNU v4l v4l2 vcd video_cards_nv video_cards_nvidia video_cards_v4l visualization vlm vorbis winbind wmf wxwindows x264 xcomposite xine xinerama xml xml2 xorg xosd xpm xscreensaver xv xvid xvmc zeroconf zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Diego Elio Pettenò (RETIRED)






          2006-11-19 10:33:32 UTC
        

Remove installed version and reinstall.





Comment 3


Diego Elio Pettenò (RETIRED)






          2006-11-30 15:59:09 UTC
        

Can't do much more than this, I hope rc1 will be better.





Comment 4


Bernard Cafarelli






          2006-12-01 01:59:28 UTC
        

rc1 emerged here, without having to remove installed vlc first. So it looks like it is indeed fixed




Comment 5


Patrick Rutka





          2006-12-02 07:52:56 UTC
        

RC1 vorks ok









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

