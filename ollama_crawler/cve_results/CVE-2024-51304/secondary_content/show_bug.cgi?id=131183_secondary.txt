Title: 131183 – acidrip-0.14 cannot find mplayer
URL: https://bugs.gentoo.org/show_bug.cgi?id=131183

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 131183
acidrip-0.14 cannot find mplayer
Last modified: 2010-09-26 15:01:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 131183 
      - acidrip-0.14 cannot find mplayer


Summary:
acidrip-0.14 cannot find mplayer
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Media-video project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-04-24 22:45 UTC by alohasurfing





      Modified:
    
2010-09-26 15:01 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



bangert
dbishop
notellin









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


alohasurfing





          2006-04-24 22:45:40 UTC
        

When trying to emerge acidrip-0.14 I'm getting this message at compile:

Running additional test to be sure acidrip will work
test for lsdvd: found
test for MPlayer: Not Found!

***************
AcidRip is based around the MPlayer video player. it has not been found on
your current path. Install it from http://mplayerhq/hu see INSTALL.html or
INSTALL for installation instructions.
***************


Well I have mplayer installed and in these paths for it:

/usr/bin/gmplayer
/usr/bin/mencoder
/usr/bin/mplayer




Comment 1


alohasurfing





          2006-04-24 23:52:48 UTC
        

Here are my USE=

USE="3dnow 3dnowext a52 aac dvd dvdr dvdread fame lame mmx mmxext mp4 mplayer
     nptlonly nvidia oggvorbis real sse threads video_cards_nvidia win32codecs
     xvmc -aalib -apache2 -apm -arts -audiofile -avi -berkdb -bitmap-fonts
     -bzip2 -cdr -cli -crypt -cups -curl -dri -eds -emboss -esd -exif -expat
     -foomaticdb -fortran -gdbm -gnome -gpm -gstreamer -gtk -gtk2 -imlib -ipv6
     -isdnlog -java -kde -lcms -libg++ -libwww -mad -mikmod -mng -motif
     -ncurses -nls -pcre -pdflib -perl -pppd -qt -sdl -session -spell -spl
     -tcpd -udev -xml -xml2 -xmms -zlib"





Comment 2


alohasurfing





          2006-04-25 18:46:28 UTC
        

One thing I want to add, I know sometimes a devloper codes for a certain version
on a dependancy, so I'm not sure if this is the reason here with AcidRip not detecting Mplayer.

But I tested Mplayer it does rip, BUT when encoding a DVD, the "Cache status" and the "Encoding status" show no information. They remain totaly blank.

So the reason I reported the bug was, I figured even if Acidrip was built for a older version of Mplayer that the Gentoo build would of been created to fix any issues.

Right now the only thing I see is, no detection at compile time, and the "Cache status" and the "Encoding status" show no information. They remain totaly blank, when doing a rip.




Comment 3


Deny Wilson





          2006-06-11 09:22:48 UTC
        

The error is caused by a sed substitute in the emerge.  It changes the following line:
print "test for MPlayer: "; die "Not Found!\n\n***************\n" .
  "AcidRip is based around the MPlayer video player. it has not been found on\n"
 .
  "your current path. Install it from http://mplayerhq/hu see INSTALL.html or\n"
 .
  "INSTALL for installation instructions.\n" .
  "***************\n\n" if ( system "mplayer 2&>1 > /dev/null" ); print "found\n
";

The part it changes is the if statement, from:
if ( system "mplayer 2&>1 > /dev/null" );

To:
if ( system "which mplayer 2&>1 > /dev/null" );

Now, using a which is generally a good way to test for something existing in a path, but, in this case, it doesn't work.  The original if statement returns 0, while the version from the emerge returns 256.  

Change the emerge from this:
src_unpack() {
        unpack ${A}
        cd ${S}
        sed -i 's:system "mplayer 2:system "which mplayer 2:' ${S}/Makefile.PL
}

To this: 
src_unpack() {
        unpack ${A}
        cd ${S}
}

And the package should then work fine.




Comment 4


Alexander Skwar





          2006-06-30 01:04:44 UTC
        

That's no longer an issue in 0.14-r1. I suggest to close this bug.




Comment 5


Guy





          2006-07-01 08:42:23 UTC
        

(In reply to comment #4)
> That's no longer an issue in 0.14-r1. I suggest to close this bug.
> 

Sorry, I'm afraid I can't verify that:

Running additional test to be sure acidrip will work
test for lsdvd: found
test for MPlayer: Not Found!

***************
AcidRip is based around the MPlayer video player. it has not been found on
your current path. Install it from http://mplayerhq/hu see INSTALL.html or
INSTALL for installation instructions.
***************


!!! ERROR: media-video/acidrip-0.14-r1 failed.
Call stack:
  ebuild.sh, line 1545:   Called dyn_compile
  ebuild.sh, line 940:   Called src_compile
  ebuild.sh, line 1254:   Called perl-app_src_compile
  perl-app.eclass, line 45:   Called perl-app_src_prep
  perl-app.eclass, line 34:   Called die

!!! Unable to build! (are you using USE="build"?)
!!! If you need support, post the topmost build error, and the call stack if relevant.






Comment 6


Thilo Bangert (RETIRED) (RETIRED)






          2006-07-26 05:00:16 UTC
        

jupp - got the same thing here...

the reason was, that mplayer was there, but it didnt run
marsupilami script # mplayer
mplayer: error while loading shared libraries: libmp4v2.so.0: cannot open shared object file: No such file or directory

emerging libmp4v2 solved the problem.

odd - as mplayer was installed (actually downgraded) during the merge of acidrip...




Comment 7


Steve Dibb (RETIRED)






          2006-10-27 12:35:23 UTC
        

(In reply to comment #6)
> jupp - got the same thing here...
> 
> the reason was, that mplayer was there, but it didnt run
> marsupilami script # mplayer
> mplayer: error while loading shared libraries: libmp4v2.so.0: cannot open
> shared object file: No such file or directory
> 
> emerging libmp4v2 solved the problem.
> 
> odd - as mplayer was installed (actually downgraded) during the merge of
> acidrip...
> 

worksforme ... reopen if still an issue, and post output of emerge -p mplayer and acidrip




Comment 8


Kete Tefid





          2010-06-09 13:12:58 UTC
        

> worksforme ... reopen if still an issue, and post output of emerge -p mplayer
> and acidrip
> 
It's broken again: both versions are.
>> Emerging (4 of 4) media-video/acidrip-0.14-r2
 * acidrip-0.14.tar.gz RMD160 SHA1 SHA256 size ;-) ...                   [ ok ]
 * CPV:  media-video/acidrip-0.14-r2
 * REPO: gentoo
 * USE:  amd64 elibc_glibc encode kernel_linux multilib userland_GNU
>>> Unpacking source...
>>> Unpacking acidrip-0.14.tar.gz to /var/tmp/portage/media-video/acidrip-0.14-r2/work
 * Applying acidrip-mplayer.patch ...                                     [ ok ]
>>> Source unpacked in /var/tmp/portage/media-video/acidrip-0.14-r2/work
>>> Preparing source in /var/tmp/portage/media-video/acidrip-0.14-r2/work/acidrip-0.14 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/media-video/acidrip-0.14-r2/work/acidrip-0.14 ...
 * Using ExtUtils::MakeMaker
 * perl Makefile.PL PREFIX=/usr INSTALLDIRS=vendor INSTALLMAN3DIR=none DESTDIR=/var/tmp/portage/media-video/acidrip-0.14-r2/image/
Checking if your kit is complete...
Looks good
Writing Makefile for AcidRip

Running additional test to be sure acidrip will work
test for lsdvd: found
test for MPlayer: sh: line 1: 20300 Segmentation fault      mplayer 2 &>1 > /dev/null
Not Found!

***************
AcidRip is based around the MPlayer video player. it has not been found on
your current path. Install it from http://mplayerhq/hu see INSTALL.html or
INSTALL for installation instructions.
***************



emerge --info:
Portage 2.1.8.3 (default/linux/amd64/10.0, gcc-4.4.3, glibc-2.10.1-r1, 2.6.32-tuxonice-r5 x86_64)
=================================================================
System uname: Linux-2.6.32-tuxonice-r5-x86_64-AMD_Athlon-tm-_7850_Dual-Core_Processor-with-gentoo-1.12.13
Timestamp of tree: Thu, 03 Jun 2010 13:30:01 +0000
distcc 3.1 x86_64-pc-linux-gnu [disabled]
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p37
dev-java/java-config: 2.1.10
dev-lang/python:     2.6.5-r2, 3.1.2-r3
dev-util/ccache:     2.4-r7
dev-util/cmake:      2.6.4-r3
sys-apps/baselayout: 1.12.13
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.65
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc:       4.4.3-r2
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6b
virtual/os-headers:  2.6.30-r1
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA PUEL sun-bcla-java-vm skype-eula dlj-1.1 RTCW-ETEULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=amdfam10 -pipe -fomit-frame-pointer -funroll-loops -fprefetch-loop-arrays"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=amdfam10 -pipe -fomit-frame-pointer -funroll-loops -fprefetch-loop-arrays"
DISTDIR="/mnt/e/distfiles/"
FEATURES="assume-digests buildpkg ccache distlocks fixpackages news parallel-fetch protect-owned sandbox sfperms unmerge-logs userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-z,now,--as-needed,-O1,--hash-style=gnu,--sort-common"
LINGUAS="en ar fa"
MAKEOPTS="-j3"
PKGDIR="/mnt/e/GentooPackages/"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext 3gp X a52 aac aalib acc acl acpi acpid alsa amd64 amr apache2 applet archive ares asf audacious autoipd automount avahi avi beagle berkdb bidi bluetooth bmp bonjour bookmarks browserplugin bttv bzip2 cairo cd cdda cddax cddb cdio cdparanoia cdr cli consolekit cpudetection cracklib crypt cups cxx dbus dhcpcd dia directfb divx4linux djvu dmix docbook dot dts dv dvb dvd dvdnav dvdr dxr3 encode esd evdev excel extras fa faac faad farsi fasttrack fbcon fbcondecor fbsplash ffmpeg firefox flac flash flashplayer fltk fontconfig fortran fortran95 freetype fuse galago gdbm gif gmp gnome gnome-keyring gnutella gnutls gpm gstreamer gtk gtk2 h323 hal html httpd iconv id3tag imagemagick ioplug iplayer ipv6 java java6 javascript jpeg jpeg2k jpg lame latex lcms libnotify lirc live m4a mad matroska mid mjpeg mmx mmxext modules mov mozilla mp3 mp4 mpeg mpg mudflap multilib mysql nautilus ncurses network networkmanager new-login nfs nls nptl nptlonly nsplugin nvidia ogg oggvorbis ogm openal opencore-amr openft opengl openmp oss pam pcre pdf perl persian php pipechan plug png pnm policykit pppd projectm proxy ps python quicktime ra ram rar rcs readline reflection rm rtf samba sdl session sip slp smp socks socks5 spell spl sqlite sse sse2 ssl stream svg svn symlink sysfs taglib tcpd theora tiff tk truetype udev unicode unrar usb v4l vcd vcdinfo vcdx vdpau vlm vorbis wav wavpack wma wmf wmv wxwindows x264 xanim xattr xcb xine xml xmms xorg xpm xulrunner xv xvid xvmc yahoo youtube zeroconf zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="stv0680" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en ar fa" LIRC_DEVICES="pctv" RUBY_TARGETS="ruby18" SANE_BACKENDS="gt68xx" USERLAND="GNU" VIDEO_CARDS="nvidia vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

Sorry for an extremely newbie-ish question: How can I reopen a bug?
Have I done that now?






Comment 9


Kete Tefid





          2010-06-12 18:44:34 UTC
        

(In reply to comment #7)
> (In reply to comment #6)
> > jupp - got the same thing here...
> > 
> > the reason was, that mplayer was there, but it didnt run
> > marsupilami script # mplayer
> > mplayer: error while loading shared libraries: libmp4v2.so.0: cannot open
> > shared object file: No such file or directory
> > 
> > emerging libmp4v2 solved the problem.
> > 
> > odd - as mplayer was installed (actually downgraded) during the merge of
> > acidrip...
> > 
> 
> worksforme ... reopen if still an issue, and post output of emerge -p mplayer
> and acidrip
> 
Any comment on this bug?





Comment 10


Don Bishop





          2010-09-26 15:01:09 UTC
        

For those that have this problem, this can be a very frustrating bug.  I have
several gentoo machines, and the mainstream ebuild works fine on all of them
except the one I want it to work on!  It's the same machine I reported on
above. I have gone to extraordinary measures to figure out what is different
between these various machines, but I cannot find the issue: deleted all
directories and files associated with acidrip, elogs, temp directories, you
name it.  I have changed use flags, done emerge -e world more times than you
can count, and I can even get a successful return from the Makefile.PL script
that performs the test -- it only fails when run from the ebuild environment.

ANYWAY...The sed patch proposed by Hack_leberry Finn works perfectly.  I was
hoping that the maintainer would fix the ebuild officially, but so far, no joy.

Until then, anyone wanting to work around this may choose to do what I finally
did:  Create a portage overlay, and put your own acidrip-0.14-r3.ebuild in
there.  It's pretty easy:

1. Edit your /etc/make.conf file and uncomment this line:
       PORTDIR_OVERLAY=/usr/local/portage
2. mkdir -p /usr/local/portage/media-video/acidrip/files
3. cd /usr/portage/media-video/acidrip
4. cp /usr/portage/media-video/acidrip/files/acidrip-mplayer.patch files/
5. cp /usr/portage/media-video/acidrip/acidrip-0.14-r2.ebuild \
./acidrip-0.14-r3.ebuild
6. edit your newly created acidrip-0.14-r3.ebuild: Add the line
       sed -i '58,62d' ${S}/Makefile.PL
   -- just after the epatch "${FILESDIR}/${PN}-mplayer.patch" line
   (this is essentially Hack_leberry Finn's fix, see bug 299173)
7. ebuild acidrip-0.14-r3.ebuild digest
8. emerge -uvDN acidrip

You will likely get a message from portage mentioning that it will use [1]
/usr/local/portage -- which is what you want

It should emerge just fine.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

