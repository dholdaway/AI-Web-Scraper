Title: 325291 – sys-fs/udisks-1.0.1 don't compil against sys-fs/lvm2-2.02.67-r2
URL: https://bugs.gentoo.org/show_bug.cgi?id=325291

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 325291
sys-fs/udisks-1.0.1 don't compil against sys-fs/lvm2-2.02.67-r2
Last modified: 2010-06-24 13:22:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 325291 
      - sys-fs/udisks-1.0.1 don't compil against sys-fs/lvm2-2.02.67-r2


Summary:
sys-fs/udisks-1.0.1 don't compil against sys-fs/lvm2-2.02.67-r2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-06-24 05:55 UTC by Grégoire Favre





      Modified:
    
2010-06-24 13:22 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Grégoire Favre





          2010-06-24 05:55:06 UTC
        

I have emerged sys-fs/lvm2-2.02.67-r2 a few times and I can't compil udisks :
  CCLD   udisks-probe-ata-smart
udisks-lvm-pv-export.c: In function ‘find_vg_for_pv_uuid’:
udisks-lvm-pv-export.c:53: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c: In function ‘print_vg’:
udisks-lvm-pv-export.c:86: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c:87: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c:125: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c:182: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c:183: warning: assignment discards qualifiers from pointer target type
udisks-lvm-pv-export.c: In function ‘print_pv’:
udisks-lvm-pv-export.c:217: warning: assignment discards qualifiers from pointer target type
  CCLD   udisks-probe-sas-expander
  CCLD   udisks-lvm-pv-export
  CCLD   udisks-dm-export
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xe84): undefined reference to `udev_new'
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xe98): undefined reference to `udev_queue_new'
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xeac): undefined reference to `udev_queue_get_udev_is_active'
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xebb): undefined reference to `udev_queue_unref'
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xec3): undefined reference to `udev_unref'
/lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':
(.text+0xfc4): undefined reference to `udev_unref'
collect2: ld returned 1 exit status
make[4]: *** [udisks-dm-export] Error 1


Reproducible: Always




Portage 2.2_rc67 (default/linux/amd64/10.0, gcc-4.4.4, glibc-2.11.2-r0, 2.6.34-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.34-gentoo-r1-x86_64-Intel-R-_Core-TM-2_CPU_6600_@_2.40GHz-with-gentoo-2.0.1
Timestamp of tree: Thu, 24 Jun 2010 04:45:01 +0000
app-shells/bash:     4.1_p7
dev-java/java-config: 2.1.11
dev-lang/python:     2.6.5-r2, 3.1.2-r3
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.6.1-r1
sys-apps/sandbox:    2.2
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.7.9-r2, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.4-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
virtual/os-headers:  2.6.34
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* @FSF-APPROVED @OSI-APPROVED PUEL @EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/X11/xkb /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-O2 -march=native -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests distlocks fixpackages news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.switch.ch/mirror/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/ ftp://ftp.free.fr/mirrors/ftp.gentoo.org/"
LANG="en_GB.UTF-8"
LC_ALL="en_GB.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en en_GB"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/maintainer /usr/portage/local/layman/gechi /usr/portage/local/layman/sunrise /usr/portage/local/layman/sajinet /usr/portage/local/layman/thelinux /usr/portage/local/layman/multimedia /usr/portage/local/layman/qting-edge /usr/portage/local/layman/wirelay /usr/portage/local/layman/jokey /usr/local/portage"
SYNC="rsync://rsync.ch.gentoo.org/gentoo-portage"
USE="3dnowext 64bit 7zip X Xaw3d a52 aac aalib accessibility acl acpi additions aften aim aio alsa amd amd64 amr amrnb amrwb animation-rtl ansi aotuv ass async atm auctex audacious audiofile bash-completion berkdb bidi binary-drivers bl blas buffysize buttons bzip2 bzlib cairo caps cdda cddb cdio cdparanoia cdr chm chroot cli clisp console context cracklib crypt cryptoworks cscope css csv ctype cups curl curlwrappers cxx daap dar64 dga dhcp dhcpcd dirac divx djbfft djvu dri dts dv dvb dvd dvdnav dvdr dvdread dvi ecc emerald encode escreen exif expat extensions extra fam fame fasttrack fat fbcon ffmpeg fftw firefox firefox3 flac fltk fontconfig foomaticdb fortran fping fpx freetext ftp fts3 g15 gadu games gcj gd gdal gdbm general geos ggi gif gimp gimpprint ginac glibc-omitfp glitz glsa glut glx gmedia gmp gmtfull gmthigh gmtsuppl gmttria gnutella gnutls gopher gpg gpgme gpm grammar graphics graphite graphviz grass gs gtalk gtk gtk2 guile h323 hardcoded-tables hdf5 howl-compat httpd humanities iconv icq id3 id3tag idn ieee1394 imagemagick imlib inquisitio ipv6 irc ithreads jabber jack jack-tmpfs java java5 java6 javascript jbig jikes jpeg jpeg2k kerberos kig-scripting kpathsea kvm lame laptop latex lcd lcms libcaca libedit libnotify libsamplerate libtommath libvisual libwww live lj lm_sensors lnbsharing logitech-mouse logrotate lzo lzw mad matroska mbox md5sum mikmod mime mimencode mjpeg mmx mmxext mng mod modules mono motif moznocompose moznoirc moznomail moznoroaming mozsvg mozxmlterm mp140 mp160 mp2 mp3 mp4 mp4live mpeg mpeg2 mplayer msn msnextras mudflap multilib musepack music mysql nautilus ncurses nethack netpbm network networking nfs nls nntp normalizemime nptl nptlonly nsplugin nvidia nvtv offensive ogdi ogg oggvorbis ole omega on-the-fly-crypt openexr opengl openmp openssl oscar otr pam pcre pdf perl player plotutils png pnm posix pppd preview-latex pstricks psyrdo psytrellis publishers python python3 pyzor qa qhull qt3support quicktime rar readline realmedia recode reflection regex reiser4 reiserfs rss rtc rtsp sasl schroedinger science screen sdl session shl shout sid silc slang slp smime sms sndfile soundtouch sox speex spell spl sqlite srt sse sse-filters sse2 ssl ssse3 stream subtitles svg svgz sysfs szip tcl tcltk tcpd tetex theora thesaurus threads threadsafe tiff tk tomsfastmath tools transcode truetype tv_check tv_combiner twolame type1 uk_bleb uk_rt unicode usb userlocales utf8 uudeview v4l v4l2 vamp vcd vcdimager vde vdpau vdr vim vim-pager vim-syntax vim-with-x visibility vlm vorbis vpx wavpack webdav wma wma123 wmf wmp wordperfect wv wxgtk1 wxwindows x264 xanim xattr xcb xetex xext xforms xfs xinerama xinetd xml xml2 xmlrpc xorg xpm xterm-color xv xvid xvmc yahoo zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias apache2_modules_proxy apache2_modules_proxy_ajp apache2_modules_proxy_balancer apache2_modules_proxy_connect apache2_modules_proxy_ftp apache2_modules_proxy_http auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="canon" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="g15" LINGUAS="en en_GB" QEMU_SOFTMMU_TARGETS="i386 x86_64" QEMU_USER_TARGETS="i386 x86_64" RUBY_TARGETS="ruby18" SANE_BACKENDS="pixma" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Samuli Suominen (RETIRED)






          2010-06-24 07:38:07 UTC
        

(In reply to comment #0)
> /lib64/libdevmapper.a(libdm-common.o): In function `_check_udev_is_running':

Why do you have libdevmapper.a in /lib64? lvm2 doesn't install it there.

sys-fs/lvm2-2.02.67-r2 (/usr/lib64/libdevmapper.a)

$ ls -l /lib64/libdevmapper.a
ls: cannot access /lib64/libdevmapper.a: No such file or directory





Comment 2


Samuli Suominen (RETIRED)






          2010-06-24 09:02:05 UTC
        

There shouldn't be any .a files (or symlinks) in /lib64, they should all be in /usr/lib64.
You can use portage-utils (qfile -v command) to find out owners of those .a files. If any of these are installed by Portage (owned by some ebuild), reopen the bug.
That said, closing as WORKSFORME ->




Comment 3


Grégoire Favre





          2010-06-24 13:22:07 UTC
        

Thanks, and sorry for the wrong repport, it's certainly my fault, I remember one day not being able to boot my gentoo because of missing lvm2 support (the files were all installed into /usr/lib) and I shall have done this error with the bootcd.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

