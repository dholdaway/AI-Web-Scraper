Title: 149863 – printconf dies
URL: https://bugs.gentoo.org/show_bug.cgi?id=149863

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 149863
printconf dies
Last modified: 2006-10-19 12:47:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 149863 
      - printconf dies


Summary:
printconf dies
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Printing

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Printing Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-02 09:06 UTC by Hamish Marson





      Modified:
    
2006-10-19 12:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Hamish Marson





          2006-10-02 09:06:44 UTC
        

printconf dies when foomatic-combo-xml exits with an error concerning a double free from glibc. 

damned cups # printconf
*** glibc detected *** /usr/bin/foomatic-combo-xml: double free or corruption (!prev): 0x0000000000634ed0 ***
======= Backtrace: =========
/lib/libc.so.6[0x2acf434c441d]
/lib/libc.so.6(__libc_free+0x6c)[0x2acf434c5a1c]
/usr/bin/foomatic-combo-xml[0x404f98]
/lib/libc.so.6(__libc_start_main+0xf4)[0x2acf43478134]
/usr/bin/foomatic-combo-xml[0x400c19]
======= Memory map: ========
00400000-00407000 r-xp 00000000 03:42 165422                             /usr/bin/foomatic-combo-xml
00506000-00507000 rw-p 00006000 03:42 165422                             /usr/bin/foomatic-combo-xml
00507000-00639000 rw-p 00507000 00:00 0                                  [heap]
2acf4333f000-2acf4335a000 r-xp 00000000 03:41 24915                      /lib/ld-2.4.so
2acf4335a000-2acf4335c000 rw-p 2acf4335a000 00:00 0 
2acf43388000-2acf43389000 rw-p 2acf43388000 00:00 0 
2acf43459000-2acf4345a000 r--p 0001a000 03:41 24915                      /lib/ld-2.4.so
2acf4345a000-2acf4345b000 rw-p 0001b000 03:41 24915                      /lib/ld-2.4.so
2acf4345b000-2acf4357c000 r-xp 00000000 03:41 24928                      /lib/libc-2.4.so
2acf4357c000-2acf4367c000 ---p 00121000 03:41 24928                      /lib/libc-2.4.so
2acf4367c000-2acf4367f000 r--p 00121000 03:41 24928                      /lib/libc-2.4.so
2acf4367f000-2acf43681000 rw-p 00124000 03:41 24928                      /lib/libc-2.4.so
2acf43681000-2acf43687000 rw-p 2acf43681000 00:00 0 
2acf43700000-2acf43721000 rw-p 2acf43700000 00:00 0 
2acf43721000-2acf43800000 ---p 2acf43721000 00:00 0 
2acf43800000-2acf4380c000 r-xp 00000000 03:41 31377                      /lib/libgcc_s.so.1
2acf4380c000-2acf4390c000 ---p 0000c000 03:41 31377                      /lib/libgcc_s.so.1
2acf4390c000-2acf4390d000 rw-p 0000c000 03:41 31377                      /lib/libgcc_s.so.1
7fff67654000-7fff6776b000 rw-p 7fff67654000 00:00 0                      [stack]
ffffffffff600000-ffffffffffe00000 ---p 00000000 00:00 0                  [vdso]
Unable to read printer database.  Please ensure the "foomatic-db" package is installed properly.


damned portage # emerge --info
Portage 2.1.1 (default-linux/amd64/2005.0, gcc-4.1.1, glibc-2.4-r4, 2.6.17.1 x86_64)
=================================================================
System uname: 2.6.17.1 x86_64 AMD Athlon(tm) 64 X2 Dual Core Processor 4200+
Gentoo Base System version 1.12.0
Last Sync: Sun, 01 Oct 2006 18:00:01 +0000
ccache version 2.4 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.2.11-r1
dev-lang/python:     2.3.4-r1, 2.4.3-r3
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.13-r2
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r3
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -Os -pipe -frename-registers -fweb -freorder-blocks -freorder-blocks-and-partition -combine -funit-at-a-time -ftree-pre -fgcse-sm -fgcse-las -fgcse-after-reload -fmerge-all-constants"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /var/bind"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/terminfo"
CXXFLAGS="-march=k8 -Os -pipe -frename-registers -fweb -freorder-blocks -funit-at-a-time -ftree-pre -fgcse-sm -fgcse-las -fgcse-after-reload -fmerge-all-constants"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg ccache distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS=""
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 3dnowex X acpi acpi4linux alsa arts avi berkdb bitmap-fonts bluetooth cairo cdda cddb clamav crypt css cups directfb divx4linux dri dv dvb dvd dvdr dvdread elibc_glibc emacs ethereal exif fb fbcon fbdev ffmpeg font-
server foomaticdb freetype ggi gif gimp gimpprint gkrellm glut gnuplot gphoto2 gps gtk ieee1394 input_devices_evdev input_devices_keyboard input_devices_mouse ipcs irmc jack java jpeg jpeg2k kde kdepim kernel_linux koffice-plu
gin lcd libclamav lirc lm_sensors lzo lzw mad maildir mapeditor mjpeg mmx2 mp3 mpeg mpeg4 mysql mythtv nptl nptlonly ogg oggvorbis opengl oss perl png povray ppds qt rrdtool samba scanner screenshot snmp speedo sse3 ssl sysfs 
threads tiff transcode truetype truetype-fonts type1 type1-fonts usb userland_GNU v4l vcd vcdimager video_cards_ati vorbis wifi xine xinerama xprint xscreensaver xv xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS

damned portage #




Comment 1


Hamish Marson





          2006-10-06 11:35:11 UTC
        

Update:

Looks to be a problem with foomatic-combo-xml handling the number of .xml files for printers. If I remove enough printer definitions from /usr/share/foomatic/db/source/driver then it runs OK.






Comment 2


Stefan Schweizer (RETIRED)






          2006-10-19 12:47:25 UTC
        

since it works for you I am not going to dig into this any further. Feel free to discuss it with upstream tho









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

