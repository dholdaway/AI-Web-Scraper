Title: 179954 – Audacity 1.3.2-r1 with wxGTK 2.6.3.3 does not work, results in relocation error when attempting to start Audacity
URL: https://bugs.gentoo.org/show_bug.cgi?id=179954

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 179954
Audacity 1.3.2-r1 with wxGTK 2.6.3.3 does not work, results in relocation error when attempting to start Audacity
Last modified: 2009-01-11 06:58:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 179954 
      - Audacity 1.3.2-r1 with wxGTK 2.6.3.3 does not work, results in relocation error when attempting to start Audacity


Summary:
Audacity 1.3.2-r1 with wxGTK 2.6.3.3 does not work, results in relocation err...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo wxWidgets project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-05-27 02:47 UTC by der_teufelengel





      Modified:
    
2009-01-11 06:58 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



richard.snow
richard









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


der_teufelengel





          2007-05-27 02:47:45 UTC
        

Audacity 1.3.2-r1 with wxGTK 2.6.3.3 does not work.  This combination results in the following condition:

Audacity fails to start, returning the following error message:

audacity: relocation error: audacity: symbol _ZTI12wxEvtHandler, version WXU_2.6 not defined in file libwx_gtk2u_core-2.6.so.0 with link time reference

Reproducible: Always

Steps to Reproduce:
1. emerge wxGTK 2.6.3.3 
2. emerge Audacity 1.3.2-r1
3. Attempt to start Audacity

If using the combination of Audacity 1.3.2-r1 with wxGTK 2.6.3.3, Audacity fails to start, returning the following error message:

audacity: relocation error: audacity: symbol _ZTI12wxEvtHandler, version WXU_2.6 not defined in file libwx_gtk2u_core-2.6.so.0 with link time reference

Actual Results:  
Audacity fails to start, returning the following error message:

audacity: relocation error: audacity: symbol _ZTI12wxEvtHandler, version WXU_2.6 not defined in file libwx_gtk2u_core-2.6.so.0 with link time reference

Expected Results:  
Audacity should have started normally.

Both Audacity and wxGTK were compiled using every sane combination of relevant USE flags.  The issue is not USE-flag dependent.

Unmasking and using Audacity 1.3.3 resolves the issue.

Additional information is available in this thread on the Gentoo Multimedia forum:

http://forums.gentoo.org/viewtopic-t-559979-highlight-.html




Comment 1


Jakub Moc (RETIRED)






          2007-05-27 07:11:12 UTC
        

Would work a lot better if you compiled wxGTK without stuff like -fvisibility-inlines-hidden in your C[XX]FLAGS. :P


*** This bug has been marked as a duplicate of bug 127020 ***




Comment 2


der_teufelengel





          2007-05-27 23:53:23 UTC
        

(In reply to comment #1)
> Would work a lot better if you compiled wxGTK without stuff like
> -fvisibility-inlines-hidden in your C[XX]FLAGS. :P

Uh...  Yeah.  Only I *didn't* compile wxGTK with -fvisibility-inlines-hidden in your C[XX]FLAGS.  The ONLY C[XX]FLAGS specified were -O2 -fno-strict-aliasing -march=k8 -pipe:

x11-libs/wxGTK-2.6.3.3 was built with the following:
CFLAGS="-O2 -fno-strict-aliasing -march=k8 -pipe"
CXXFLAGS="-O2 -fno-strict-aliasing -march=k8 -pipe"



(If this was a joke, please excuse me.  It's been a long day!)





Comment 3


der_teufelengel





          2007-05-27 23:59:17 UTC
        

Waitaminute!--this is NOT a duplicate of Bug 127020!

Bug 127020 was apparently caused by compiling wxGTK with the -fvisibility-inlines-hidden CXXFLAG.

I did not compile wxGTK using -fvisibility-inlines-hidden.

I'll say no more on the subject, though.  I've done my bit.




Comment 4


Mart Raudsepp






          2007-06-08 02:58:48 UTC
        

Reopening then to try to reproduce this myself or get some additional information to help in fixing this...
I'll probably have lots of other things in my backlog to take care of first though, as I understood you got it working now with a newer audacity version (though an application or its version shouldn't matter - all wx apps should fail in the same condition and merge order relative to wxGTK) and other things can take priority over this.

*peers at Jakub and steals a beer from him :P*




Comment 5


Mart Raudsepp






          2007-06-08 03:00:03 UTC
        

Note to self and others on wx herd: The forum link has more valuable information which unfortunately is not summarized nor cited here.




Comment 6


Jakub Moc (RETIRED)






          2007-06-08 06:44:06 UTC
        

(In reply to comment #4)
> *peers at Jakub and steals a beer from him :P*

Eeeew! I'll hunt you at nite! :P

(In reply to comment #5)
> Note to self and others on wx herd: The forum link has more valuable
> information which unfortunately is not summarized nor cited here.

Referring to forums.g.o. for relevant info is a horrible habit indeed. :/
 






Comment 7


takken





          2007-07-23 18:56:59 UTC
        

My Audacity also broke after a recent update to 1.3.2-r1. It does start, but whenever you hit the 'play' button, Audacity segfaults. I tried revdep-rebuild, re-emerging wxGTK and Audacity, I did *not* use the visibility-inlines-hidden flag, even tried re-building Audacity with minimal compiler flags (-O2 -pipe), but nothing helps. All other ALSA and OSS apps work flawlessly. 

Upgrading to unstable Audacity 1.3.3 fixed the problem.


emerge --info:

Portage 2.1.2.7 (default-linux/x86/2007.0/desktop, gcc-4.1.1, glibc-2.5-r2, 2.6.20-suspend2-r6 i686)
=================================================================
System uname: 2.6.20-suspend2-r6 i686 Mobile AMD Sempron(tm) Processor 3400+
Gentoo Base System release 1.12.9
Timestamp of tree: Sat, 16 Jun 2007 12:00:02 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
dev-lang/python:     2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=athlon64 -msse3 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS=""
DISTDIR="/usr/portage/distfiles"
FEATURES="distcc distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo http://pandemonium.tiscali.de/pub/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/ http://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.scarlet-internet.nl/pub/gentoo http://gentoo.tiscali.nl/ http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo/ ftp://ftp.mirrorservice.org/sites/www.ibiblio.org/gentoo/ "
LINGUAS="nl"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X a52 aac acl acpi alsa arts asf berkdb bitmap-fonts cairo cdparanoia cdr cli cracklib crypt cups dbus dri dts dv dvd dvdr dvdread eds emboss encode evo fam ffmpeg firefox flac fortran gdbm gif gimpprint gnome gpm gstreamer gtk hal iconv ipv6 isdnlog jpeg kde kdeenablefinal kdehiddenvisibility kerberos ldap libg++ mad matroska midi mikmod mmx mmx2 mmxext mp3 mpeg mudflap ncurses no_wxgtk1 nodrm nptl nptlonly nvidia ogg opengl openmp pam pcmcia pcre pdf perl png pppd python qt3 qt3support qt4 quicktime readline real reflection rtc sdl session sox spell spl sqlite sse sse2 ssl svg tcpd theora tiff truetype truetype-fonts type1-fonts unicode vorbis win32codecs x86 xine xml xorg xscreensaver xv xvid xvmc zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="nl" USERLAND="GNU" VIDEO_CARDS="nv nvidia vga vesa"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY





Comment 8


Richard Snow





          2007-11-02 05:15:38 UTC
        

If you disable libFlac (at least in the CVS version I tried) you don't get the relocation error.  Also the CVS version plays back at the correct speed on amd64 while the stable version does not.




Comment 9


Raúl Porcel (RETIRED)






          2008-01-28 15:42:28 UTC
        

Move stuff to new alias




Comment 10


Raúl Porcel (RETIRED)






          2008-01-31 10:34:50 UTC
        

Re-reassigning, sorry for the bugspam




Comment 11


Richard Ash





          2009-01-10 23:04:26 UTC
        

ebuild for this no longer in portage, could we close this one off in the absence of anyone still having the problem?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

