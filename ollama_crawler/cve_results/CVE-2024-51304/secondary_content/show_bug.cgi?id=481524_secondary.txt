Title: 481524 – www-client/uzbl-2012.05.14 - uzbl-tabbed: scrolling does not work
URL: https://bugs.gentoo.org/show_bug.cgi?id=481524

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 481524
www-client/uzbl-2012.05.14 - uzbl-tabbed: scrolling does not work
Last modified: 2014-10-13 08:36:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 481524 
      - www-client/uzbl-2012.05.14 - uzbl-tabbed: scrolling does not work


Summary:
www-client/uzbl-2012.05.14 - uzbl-tabbed: scrolling does not work
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

tharvik








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-08-18 09:11 UTC by Vladimir





      Modified:
    
2014-10-13 08:36 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



proxy-maint









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




uzbl ebuild fixing python, sandbox and using next branch

              (uzbl-2012.05.14.ebuild,3.05 KB,
                text/plain)

            
2014-06-06 10:59 UTC,

            tharvik




Details





Show events of scrolling in uzbl-tabbed

              (uzbl-verbose-scroll.patch,457 bytes,
                patch)

            
2014-07-11 17:11 UTC,

            tharvik




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Vladimir





          2013-08-18 09:11:29 UTC
        

Hello!
  I upgraded my system recently and noticed that scrolling stopped working in uzbl-tabbed program. The following packages related to uzbl had been upgraded *before* I noticed this issue:

dev-libs/glib-2.36.3-r2
x11-libs/gtk+-3.8.2
net-libs/libsoup-2.42.2

It should be noted though that scrolling does work in uzbl-browser, which does not use PyGTK, if I'm not mistaken.

Reproducible: Always




Comment 1


Vladimir





          2014-03-17 17:11:25 UTC
        

I am sorry. Is there any hope this will be fixed in the foreseeable future?




Comment 2


tharvik





          2014-06-02 16:54:16 UTC
        

I am sorry, I can not reproduce, as the given version are not in the tree anymore; is it still the case with stable glib, gtk+ and libsoup?




Comment 3


Vladimir





          2014-06-04 19:07:20 UTC
        

(In reply to tharvik from comment #2)
> I am sorry, I can not reproduce, as the given version are not in the tree
> anymore; is it still the case with stable glib, gtk+ and libsoup?
I have just tested it with 

dev-libs/glib-2.40.0:2
x11-libs/gtk+-3.12.2:3
net-libs/libsoup-2.46.0:2.4

and the problem is still there.




Comment 4


tharvik





          2014-06-04 21:14:49 UTC
        

(In reply to Vladimir from comment #3)
> I have just tested it with 
> 
> dev-libs/glib-2.40.0:2
> x11-libs/gtk+-3.12.2:3
> net-libs/libsoup-2.46.0:2.4
> 
> and the problem is still there.

Still unable to reproduce; give more information, like build.log, emerge --info, emerge -pqv.

To test it, I launch "uzbl-tabbed uzbl.org" which for me have a scroll bar; by the way, what do you mean: unable to  scroll using mouse? hjkl? insert mode + directional keys?

Do you see any warning or errors in the terminal?
Did you tried with a clean config taken from /usr/share/uzbl/examples/config/config?




Comment 5


Vladimir





          2014-06-04 21:46:05 UTC
        

(In reply to tharvik from comment #4)
> (In reply to Vladimir from comment #3)
> > I have just tested it with 
> > 
> > dev-libs/glib-2.40.0:2
> > x11-libs/gtk+-3.12.2:3
> > net-libs/libsoup-2.46.0:2.4
> > 
> > and the problem is still there.
> 
> by the way, what do you mean: unable to  scroll using mouse? hjkl? insert
> mode + directional keys?
  Yes, a fair point. By "scrolling" I initially meant "mouse wheel scrolling". The scrollbar itself is present and I can use it without problems. The problem is with mouse wheel scrolling only.

> Still unable to reproduce; give more information, like build.log, emerge
> --info, emerge -pqv.
> 

emerge --info
Portage 2.2.10 (default/linux/amd64/13.0, gcc-4.8.2, glibc-2.19, 3.14.4-gentoo x86_64)
=================================================================
System uname: Linux-3.14.4-gentoo-x86_64-Mobile_AMD_Sempron-tm-_Processor_3800+-with-gentoo-2.2
KiB Mem:     1988308 total,    319700 free
KiB Swap:    1052220 total,    936436 free
Timestamp of tree: Tue, 03 Jun 2014 17:45:01 +0000
ld GNU ld (GNU Binutils) 2.22
app-shells/bash:          4.2_p47
dev-lang/python:          2.7.6-r1, 3.3.5, 3.4.0
dev-util/cmake:           2.8.12.2-r1
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.12.4
sys-apps/sandbox:         2.6-r1
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.11.6, 1.14.1
sys-devel/binutils:       2.24-r3
sys-devel/gcc:            4.8.2
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2-r1
sys-devel/make:           4.0-r1
sys-kernel/linux-headers: 3.14 (virtual/os-headers)
sys-libs/glibc:           2.19
Repositories: gentoo sage-on-gentoo local
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA skype-eula"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=k8 -O2 -pipe"
DISTDIR="/home/Install/GNU-Linux/distfiles/"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://gd.tuwien.ac.at/opsys/linux/gentoo/"
LANG="uk_UA.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j2"
PKGDIR="/home/Install/GNU-Linux/binpkg/"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/sage-on-gentoo /usr/local/overlays"
SYNC="rsync://distfiles.gentoo.org/gentoo-portage/"
USE="3dnow 3dnowext 64bit 7zip X a52 aac aalib acpi alsa amd64 amrnb amrwb apm ass bash-completion bzip2 cairo cli consolekit cracklib crypt ctype curl cxx dbus dga djvu dri dts dvd encode exif expat faad fbcon fbcondecor festival ffmpeg fftw flac freetds fuse gd gdbm geoip gif git glut gmp gnuplot gnutls gsl gstreamer gtk gtk3 hddtemp iconv idn imagemagick imlib irc jabber jbig jpeg lame laptop latex libcaca libnotify libsamplerate lm_sensors lzo mad matroska mmap mmx mmxext mng modplug modules multilib nas ncurses nforce2 nls nptl nvidia ogg openal opencore-amr opengl openmp opus pam pdf plotutils pmu png policykit postscript python qt3support qt4 readline real rtc samba sasl sdl session shorten skins slang sndfile sockets speex spell sse sse2 ssl startup-notification svg syslog systray taglib tcl tcpd theora threads timidity truetype udev unicode usb vorbis wavpack webkit wmf x264 xattr xcb xcomposite xinerama xml xosd xpm xvid zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="keyboard mouse evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="ru uk" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-5" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python3_3 python2_7" QEMU_SOFTMMU_TARGETS="i386 x86_64" RUBY_TARGETS="ruby19 ruby20" USERLAND="GNU" VIDEO_CARDS="vesa nouveau" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON



emerge -pqv uzbl
[ebuild   R   ] www-client/uzbl-2012.05.14  USE="browser gtk3 tabbed -helpers -vim-syntax" 

> 
> Do you see any warning or errors in the terminal?
> Did you tried with a clean config taken from
> /usr/share/uzbl/examples/config/config?
I have just tried with this config -- the same result.
There are no special errors in the terminal. Just the regular ones which I see for any GTK application. I think, they are related to my GTK theme in some way.




Comment 6


tharvik





          2014-06-05 08:59:58 UTC
        

(In reply to Vladimir from comment #5)
> (In reply to tharvik from comment #4)
> > (In reply to Vladimir from comment #3)
> > > I have just tested it with 
> > > 
> > > dev-libs/glib-2.40.0:2
> > > x11-libs/gtk+-3.12.2:3
> > > net-libs/libsoup-2.46.0:2.4
> > > 
> > > and the problem is still there.
> > 
> > by the way, what do you mean: unable to  scroll using mouse? hjkl? insert
> > mode + directional keys?
>   Yes, a fair point. By "scrolling" I initially meant "mouse wheel
> scrolling". The scrollbar itself is present and I can use it without
> problems. The problem is with mouse wheel scrolling only.
Still unable to confirm; scrolling is Button4/5, you can try to add to config:
> @bind <Button4> = sh 'echo up'
> @bind <Button5> = sh 'echo down'
and see if you see anything in the terminal; if yes, you can bind to
> scroll vertical -20
> scroll vertical 20
else, that mean that uzbl-core does not receive the events and it is likely to be a gtk+ problem (as mouse scrolling is at gtk+ level)

> emerge -pqv uzbl
> [ebuild   R   ] www-client/uzbl-2012.05.14  USE="browser gtk3 tabbed
> -helpers -vim-syntax" 
Maybe try to activate helpers USE to install missing dependency




Comment 7


Vladimir





          2014-06-05 17:55:01 UTC
        

(In reply to tharvik from comment #6)
> Still unable to confirm; scrolling is Button4/5, you can try to add to
> config:
> > @bind <Button4> = sh 'echo up'
> > @bind <Button5> = sh 'echo down'
> and see if you see anything in the terminal; if yes, you can bind to
> > scroll vertical -20
> > scroll vertical 20
> else, that mean that uzbl-core does not receive the events and it is likely
> to be a gtk+ problem (as mouse scrolling is at gtk+ level)
> 
I tried adding these lines, but nothing changed, and nothing showed up in the terminal.

> > emerge -pqv uzbl
> > [ebuild   R   ] www-client/uzbl-2012.05.14  USE="browser gtk3 tabbed
> > -helpers -vim-syntax" 
> Maybe try to activate helpers USE to install missing dependency
I also tried to turn the 'helpers' USE-flag on, but it did not help as well.

By the way, I just wanted to clarify if the points I made in the very first post helped in this issue or not. Namely, that "...the scrolling does work in uzbl-browser, which does not use PyGTK, if I'm not mistaken".




Comment 8


tharvik





          2014-06-06 10:59:10 UTC
        

Created attachment 378376 [details]
uzbl ebuild fixing python, sandbox and using next branch

(In reply to Vladimir from comment #7)
> By the way, I just wanted to clarify if the points I made in the very first
> post helped in this issue or not. Namely, that "...the scrolling does work
> in uzbl-browser, which does not use PyGTK, if I'm not mistaken".
Not really; is there any program using pygtk having the same issue?

If it helps you, here are the USE I build with (uzbl's USE are the same as yours)
[ebuild   R   ] net-libs/libsoup-2.46.0  USE="introspection ssl -debug -samba {-test}" 
[ebuild   R   ] dev-python/pygtk-2.24.0-r4  USE="-doc -examples {-test}" PYTHON_TARGETS="python2_7 (-python2_6)" 
[ebuild   R   ] x11-libs/gtk+-3.12.2  USE="X cups introspection vim-syntax (-aqua) -cloudprint -colord -debug -examples {-test} -wayland -xinerama" 
[ebuild   R   ]  dev-libs/glib-2.40.0  USE="(mime) -debug (-fam) (-selinux) -static-libs -systemtap {-test} -utils -xattr" ABI_X86="(64) -32 (-x32)" PYTHON_TARGETS="python2_7 (-python2_6)" 

You can try the given ebuild to see if it changes anything (both 2012.05.14 and 9999 version), you may have to update your config.




Comment 9


Vladimir





          2014-06-09 12:43:06 UTC
        

(In reply to tharvik from comment #8)
> Created attachment 378376 [details]
> uzbl ebuild fixing python, sandbox and using next branch
> 
> (In reply to Vladimir from comment #7)
> > By the way, I just wanted to clarify if the points I made in the very first
> > post helped in this issue or not. Namely, that "...the scrolling does work
> > in uzbl-browser, which does not use PyGTK, if I'm not mistaken".
> Not really; is there any program using pygtk having the same issue?
> 
I have a couple of PyGTK programs, but I do not experience any problems with them. I am not sure about the exact widgets (whether the same types of widgets are used in different programs or not) though.
Also I do not quite understand how do the pygtk-2.24.0-r4 and gtk+-3.12.2 are used at the same time.

> If it helps you, here are the USE I build with (uzbl's USE are the same as
> yours)
> [ebuild   R   ] net-libs/libsoup-2.46.0  USE="introspection ssl -debug
> -samba {-test}" 
> [ebuild   R   ] dev-python/pygtk-2.24.0-r4  USE="-doc -examples {-test}"
> PYTHON_TARGETS="python2_7 (-python2_6)" 
> [ebuild   R   ] x11-libs/gtk+-3.12.2  USE="X cups introspection vim-syntax
> (-aqua) -cloudprint -colord -debug -examples {-test} -wayland -xinerama" 
> [ebuild   R   ]  dev-libs/glib-2.40.0  USE="(mime) -debug (-fam) (-selinux)
> -static-libs -systemtap {-test} -utils -xattr" ABI_X86="(64) -32 (-x32)"
> PYTHON_TARGETS="python2_7 (-python2_6)" 
> 
> You can try the given ebuild to see if it changes anything (both 2012.05.14
> and 9999 version), you may have to update your config.
I have the same USE-flag set and also tried both 2012.05.14 and 9999 versions with your .ebuild, but it still does not work.




Comment 10


tharvik





          2014-06-11 14:36:34 UTC
        

(In reply to Vladimir from comment #9)
> (In reply to tharvik from comment #8)
> > Created attachment 378376 [details]
> > uzbl ebuild fixing python, sandbox and using next branch
> > 
> > (In reply to Vladimir from comment #7)
> > > By the way, I just wanted to clarify if the points I made in the very first
> > > post helped in this issue or not. Namely, that "...the scrolling does work
> > > in uzbl-browser, which does not use PyGTK, if I'm not mistaken".
> > Not really; is there any program using pygtk having the same issue?
> > 
> I have a couple of PyGTK programs, but I do not experience any problems with
> them. I am not sure about the exact widgets (whether the same types of
> widgets are used in different programs or not) though.
It use gtk.Notebook — a tabbed notebook container.

> Also I do not quite understand how do the pygtk-2.24.0-r4 and gtk+-3.12.2
> are used at the same time.
pygtk use only gtk2; the USE is for webkit; maybe try to disable it to see if there is any change.

There is a few issues at the top the uzbl-tabbed file which may be your case:
> - when a new tab is opened when using gtk tabs the tab button itself
>   grabs focus from its child for a few seconds.
> - when switch_to_new_tabs is not selected the notebook page is
>   maintained but the new window grabs focus (try as I might to stop it).




Comment 11


tharvik





          2014-07-07 09:32:11 UTC
        

There is a new ebuild in the tree, does it by any chance fix the issue?




Comment 12


Vladimir





          2014-07-09 08:12:00 UTC
        

(In reply to tharvik from comment #11)
> There is a new ebuild in the tree, does it by any chance fix the issue?
I have just tried it, and it did not fix anything. uzbl-tabbed has no mouse scrolling, and uzbl-browser has. Just as before.




Comment 13


tharvik





          2014-07-11 17:11:38 UTC
        

Created attachment 380574 [details, diff]
Show events of scrolling in uzbl-tabbed

(In reply to Vladimir from comment #12)
> (In reply to tharvik from comment #11)
> > There is a new ebuild in the tree, does it by any chance fix the issue?
> I have just tried it, and it did not fix anything. uzbl-tabbed has no mouse
> scrolling, and uzbl-browser has. Just as before.
Tried 2012.05.14-r1 and 9999?

If you can try the given patch with uzbl-tabbed, it will output "scroll vert" or "scroll horiz" upon new scroll events; if not, I do not know anymore how to help, maybe not an uzbl issue, rather a PyGTK one.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

