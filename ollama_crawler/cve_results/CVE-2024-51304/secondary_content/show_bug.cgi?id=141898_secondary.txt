Title: 141898 – >=app-editors/gedit-2.14.x cannot overwrite files on a samba share
URL: https://bugs.gentoo.org/show_bug.cgi?id=141898

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 141898
>=app-editors/gedit-2.14.x cannot overwrite files on a samba share
Last modified: 2009-06-15 20:06:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 141898 
      - >=app-editors/gedit-2.14.x cannot overwrite files on a samba share


Summary:
>=app-editors/gedit-2.14.x cannot overwrite files on a samba share
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:



http://bugzilla.gnome.org/show_bug.cg...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-27 09:19 UTC by Evert





      Modified:
    
2009-06-15 20:06 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



vostorga









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Evert





          2006-07-27 09:19:39 UTC
        

When I edit an existing file on a samba share using gedit, the file cannot be overwritten. I get the message:

Could not save the file /mnt/net/server73/data/AB/blabla.txt.

Also after this message appears, the menu items File -> Save and "Save As..." are both disabled (grayed out).

If, before trying to save the file, I rename or delete the file on the samba share, saving the file is no problem. Also "Save As..." using a non-existing filename works too. Furthermore, vim has no problem overwriting files on the share.

So basically, saving a new file on a samba share using gedit is no problem, but is the file already exists, gedit has a problem saving the file and disables both Save and "Save As...".

I use samba-3.0.22-r3 and have the share mounted like this:

//server73/data$ on /mnt/net/server73/data type cifs (rw,mand)



Portage 2.1-r1 (default-linux/x86/2006.0, gcc-3.4.6, glibc-2.3.6-r4, 2.6.16.19 i686)
=================================================================
System uname: 2.6.16.19 i686 Intel(R) Pentium(R) 4 CPU 2.80GHz
Gentoo Base System version 1.6.15
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i386-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -pipe"
CHOST="i386-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-O2 -mtune=i686 -pipe"
DISTDIR="/data/linux/gentoo/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/data/linux/gentoo/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/compile"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts avi berkdb bitmap-fonts cli crypt cups dlloader dri eds emboss encode esd foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 imlib ipv6 isdnlog jpeg kde ldap libg++ libwww mad mikmod mng motif mp3 mpeg ncurses nls nptl ogg opengl oss pam pcre pdflib perl png pppd python qt qt3 qt4 quicktime readline reflection samba sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev vorbis xml xmms xorg xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Evert





          2006-10-11 06:40:54 UTC
        

Almost 3 months later, situation still the same and not even one reaction! Is this one left in the forgotten corner?




Comment 2


Mart Raudsepp






          2007-01-09 08:09:55 UTC
        

Many of us don't have the means to test things in combination with a samba server :(
Anyhow, does this problem still exist, and if it does, could you try grabbing gnome-vfs-2.17 from the gnome-experimental overlay and see if that helps? There is a samba fix in there that hasn't been backported to 2.16 yet, but not sure if it could help with this particular problem




Comment 3


Evert





          2007-01-10 08:26:18 UTC
        

The problem still exists, but the system is still at gnome-2.14 and CHOST i386. It's my system at work so I'll do this major upgrade (world and CHOST) in a chroot environment since I don't want to break the system.




Comment 4


Evert





          2007-01-19 17:47:43 UTC
        

Major update done, CHOST="i686-pc-linux-gnu" now and I'm completely up2date!
So, where can I find this experimental overlay?




Comment 5


Daniel Gryniewicz (RETIRED)






          2007-01-19 21:40:59 UTC
        

http://overlays.gentoo.org/proj/gnome/wiki




Comment 6


Rémi Cardona (RETIRED)






          2007-03-04 23:49:20 UTC
        

Evert, can you still reproduce this bug with either gedit 2.16 or 2.18? If not, please close this bug.

Thanks :)




Comment 7


Evert





          2007-03-06 19:41:15 UTC
        

I just upgraded to gnome-base/gnome-vfs-2.17.91 and app-editors/gedit-2.17.6 from the portage overlay and the problem is still there...

btw, I can't find any gedit-2.18 in the portage overlay, gedit-2.17.6 is the only one there!




Comment 8


Jakub Moc (RETIRED)






          2007-07-08 13:47:45 UTC
        

Upstream bug: http://bugzilla.gnome.org/show_bug.cgi?id=336738




Comment 9


Rémi Cardona (RETIRED)






          2008-03-22 14:42:39 UTC
        

Evert, ping? Still an issue? Part of this bug has been fixed in the kernel a while ago. Do you still have that problem?

Thanks




Comment 10


Evert





          2008-03-25 10:46:39 UTC
        

Hi Rémi!
Yes, I still have this problem (app-editors/gedit-2.20.4-r1, kernel 2.6.24.2)




Comment 11


Mart Raudsepp






          2008-03-26 00:08:31 UTC
        

It works for me at work, where I have the same versions. However there is some kind of a glitch. I believe it was that at first try it doesn't open the file, but trying again it does (close gedit, open again, or something) - perhaps the connection is initiated and cached by gnome-vfs by then and it fails before, or something. I'll have to check the behaviour exactly again. However I've edited files remotely fine and saved them directly to samba. So basically a WORKSFORME, but I can try poking holes into it later.
However, with GNOME-2.22 the samba connection will be handles by gvfs instead of gnome-vfs. Might have better luck in your case too with that (or worse)




Comment 12


Evert





          2008-03-27 16:55:06 UTC
        

Well, a worksforyou doesn't mean a worksforme. With vi, this is a worksforme too, but we're talking about gedit here.
I also tested your scenario:

gedit test.txt (new file)
add some text
press the Save button
result: it gets saved because the file doesn't exist yet
close gedit
gedit text.txt (existing file)
add or change some text
press the Save button
result: (-) Could not save the file /path/to/test.txt. (x) Cancel

Now I want to save the file anyway so I switch to a terminal window and delete the file using "rm /path/to/text.txt".
I switch back to gedit
press the Save button
result: it gets saved because the file didn't exist anymore

So basically, gedit is not able to overwrite a file on the samba share over here. If you wish, I can add a screenshot...

Maybe usefull to add: the mount command shows the share is mounted using "cifs (rw,mand)"




Comment 13


Víctor Ostorga (RETIRED)






          2009-06-15 17:55:49 UTC
        

I can't reproduce the issue with gedit-2.24.3 and kernel 2.6.28-gentoo-r5 , can you confirm it is fixed?




Comment 14


Evert





          2009-06-15 18:27:17 UTC
        

I don't have access to this windows share anymore so I can't confirm this anymore...




Comment 15


Rémi Cardona (RETIRED)






          2009-06-15 20:06:39 UTC
        

Alright, thanks for the heads up. Let's consider this bug fixed until someone proves me wrong :)

Cheers









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

