Title: 236043 – emerge --config =dev-db/postgresql-server-8.1.13 fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=236043

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 236043
emerge --config =dev-db/postgresql-server-8.1.13 fails
Last modified: 2008-08-31 17:34:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 236043 
      - emerge --config =dev-db/postgresql-server-8.1.13 fails


Summary:
emerge --config =dev-db/postgresql-server-8.1.13 fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PgSQL Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-08-28 16:32 UTC by Balint Dobai-Pataky





      Modified:
    
2008-08-31 17:34 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Balint Dobai-Pataky





          2008-08-28 16:32:25 UTC
        

#  emerge --config =dev-db/postgresql-server-8.1.13


Configuring pkg...

 * You can pass options to initdb by setting the PG_INITDB_OPTS variable.
 * More information can be found here:
 *     http://www.postgresql.org/docs/8.1/static/creating-cluster.html
 *     http://www.postgresql.org/docs/8.1/static/app-initdb.html
 * Simply add the options you would have added to initdb to the PG_INITDB_OPTS variable.
 * 
 * You can change the directory where the database cluster is being created by setting
 * the PGDATA variable.
 * 
 * PG_INITDB_OPTS is currently set to:
 *     ""
 * and the database cluster will be created in:
 *     "/var/lib/postgresql/data/"
 * Are you ready to continue? (Y/n)

 * Checking system parameters...
 * Checking whether your system supports at least 128 connections...
 * Passed.
 * Creating the data directory ...
 * Initializing the database ...
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale C.

fixing permissions on existing directory /var/lib/postgresql/data ... ok
creating directory /var/lib/postgresql/data/global ... ok
creating directory /var/lib/postgresql/data/pg_xlog ... ok
creating directory /var/lib/postgresql/data/pg_xlog/archive_status ... ok
creating directory /var/lib/postgresql/data/pg_clog ... ok
creating directory /var/lib/postgresql/data/pg_subtrans ... ok
creating directory /var/lib/postgresql/data/pg_twophase ... ok
creating directory /var/lib/postgresql/data/pg_multixact/members ... ok
creating directory /var/lib/postgresql/data/pg_multixact/offsets ... ok
creating directory /var/lib/postgresql/data/base ... ok
creating directory /var/lib/postgresql/data/base/1 ... ok
creating directory /var/lib/postgresql/data/pg_tblspc ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 1000
creating configuration files ... ok
creating template1 database in /var/lib/postgresql/data/base/1 ... ok
initializing pg_authid ... ok
enabling unlimited row size for system tables ... ok
initializing dependencies ... sh: line 1:  2537 Illegal instruction     "/usr/lib/postgresql-8.1/bin/postgres" -F -O -c search_path=pg_catalog -c exit_on_error=true template1 > /dev/null
child process exited with exit code 132
initdb: removing contents of data directory "/var/lib/postgresql/data"
 * 
 * You can use the '//etc/init.d/postgresql-8.1' script to run PostgreSQL instead of 'pg_ctl'.
 * 
 * You didn't install the database cluster in the standard location, please make sure that you set
 * PGDATA="/var/lib/postgresql/data/" in the appropriate conf.d file (probably /etc/conf.d/postgresql-8.1)




Comment 1


Balint Dobai-Pataky





          2008-08-28 16:34:11 UTC
        

tried dev-db/postgresql-8.0.15
dev-db/postgresql-7.4.19
dev-db/postgresql-8.1.11
they exit at the same place.
i think they don't find the postgresql.conf pg_ident.conf pg_hba.conf files




Comment 2


Balint Dobai-Pataky





          2008-08-28 16:37:52 UTC
        

/etc/conf.d/postgresql-8.1 comes with PGDATA="/var/lib/postgresql/8.1/data"
changind that to PGDATA="/var/lib/postgresql/data" does not do the trick.




Comment 3


Balint Dobai-Pataky





          2008-08-28 16:44:47 UTC
        

# su - postgres
~ $ initdb
produces the same result, but 
~ $ /usr/lib/postgresql-8.1/bin/postgres -F -O -c search_path=pg_catalog -c exit_on_error=true template1
/usr/lib/postgresql-8.1/bin/postgres cannot access the server configuration file "/var/lib/postgresql/data/postgresql.conf": No such file or directory





Comment 4


Balint Dobai-Pataky





          2008-08-31 17:34:21 UTC
        

had to emerge with
USE="readline xml"
for the --config to work










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

