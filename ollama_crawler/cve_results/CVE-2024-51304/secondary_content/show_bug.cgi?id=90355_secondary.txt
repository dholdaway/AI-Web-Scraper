Title: 90355 – libsandbox.so: undefined symbol: __dlvsym
URL: https://bugs.gentoo.org/show_bug.cgi?id=90355

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90355
libsandbox.so: undefined symbol: __dlvsym
Last modified: 2005-04-25 10:34:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90355 
      - libsandbox.so: undefined symbol: __dlvsym


Summary:
libsandbox.so: undefined symbol: __dlvsym
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Sandbox

  (show other bugs)



Hardware:

IA64
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-25 05:00 UTC by Henrik Grubbström





      Modified:
    
2005-04-25 10:34 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



ia64









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Henrik Grubbström





          2005-04-25 05:00:12 UTC
        

I just emerged sys-apps/sandbox-1.2.1-r2, and attempting to emerge anything now results in:

/bin/bash: symbol lookup error: /usr/lib/libsandbox.so: undefined symbol: __dlvsym


Reproducible: Always
Steps to Reproduce:
1. emerge fresh sandbox and portage.
2. watch emerge start failing due to libsandbox.


Actual Results:  
# emerge -uD portage
Calculating dependencies ...done!
>>> emerge (1 of 2) sys-apps/diffutils-2.8.7-r1 to /
>>> md5 files   ;-) diffutils-2.8.7.ebuild
>>> md5 files   ;-) diffutils-2.8.4-r4.ebuild
>>> md5 files   ;-) diffutils-2.8.7-r1.ebuild
>>> md5 files   ;-) files/diffutils-2.8.4-Makefile-fix-typeo.patch
>>> md5 files   ;-) files/diffutils-2.8.4-sdiff-no-waitpid.patch
>>> md5 files   ;-) files/diffutils-2.8.4-no-manpage.patch
>>> md5 files   ;-) files/diffutils-2.8.4-tabsize-dumps-core.diff
>>> md5 files   ;-) files/digest-diffutils-2.8.4-r4
>>> md5 files   ;-) files/digest-diffutils-2.8.7
>>> md5 files   ;-) files/digest-diffutils-2.8.7-r1
>>> md5 src_uri ;-) diffutils-2.8.7.tar.gz
>>> md5 src_uri ;-) diffutils-2.8.7-i18n.patch.bz2
/bin/bash: symbol lookup error: /usr/lib/libsandbox.so: undefined symbol: _dlvsym


Expected Results:  
It should have emerged without failing.

# emerge info
Portage 2.0.51.20 (default-linux/ia64/2004.3, gcc-3.4.3-20050110,
glibc-2.3.5-r0,glibc-2.3.4.20041102-r1, 2.6.8-gentoo-r3 ia64)
=================================================================
System uname: 2.6.8-gentoo-r3 ia64 
Gentoo Base System version 1.6.10
ccache version 2.3 [disabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.14.90.0.8-r2, 2.15.92.0.2-r1
sys-devel/libtool:   1.5.14
Traceback (most recent call last):
  File "/usr/bin/emerge", line 2750, in ?
    pkgs = ", ".join(sorted_versions(pkgs))
  File "/usr/bin/emerge", line 124, in sorted_versions
    if portage.vercmp(ret[x], ver) >= 0:
  File "/usr/lib/portage/pym/portage.py", line 3241, in vercmp
    cmp1=relparse(val1[x])
  File "/usr/lib/portage/pym/portage.py", line 2904, in relparse
    number=string.atof(myver)  
  File "/usr/lib/python2.3/string.py", line 205, in atof
    return _float(s)
ValueError: invalid literal for float(): r1




Comment 1


Jason Stubbs (RETIRED)






          2005-04-25 05:18:51 UTC
        

Can you update portage to -r4, using --nodeps if necessary, and the run emerge --info again please?




Comment 2


Jason Stubbs (RETIRED)






          2005-04-25 05:21:05 UTC
        

Also, portage should disable the sandbox when updating itself but, if it doesn't, deleting /usr/bin/sandbox will get it running again.




Comment 3


Henrik Grubbström





          2005-04-25 05:25:49 UTC
        

# emerge -uD --nodeps portage
Calculating dependencies ...done!
>>> emerge (1 of 1) sys-apps/portage-2.0.51.20-r4 to /
>>> md5 files   ;-) portage-2.0.51.19.ebuild
>>> md5 files   ;-) portage-2.0.51.20-r4.ebuild
>>> md5 files   ;-) portage-2.0.51-r15.ebuild
>>> md5 files   ;-) portage-2.0.51.18.ebuild
>>> md5 files   ;-) files/README.RESCUE
>>> md5 files   ;-) files/digest-portage-2.0.51.19
>>> md5 files   ;-) files/repoman-fixes.patch
>>> md5 files   ;-) files/gcc-2.95-libsandbox.patch
>>> md5 files   ;-) files/dispatch-conf-fixes.patch
>>> md5 files   ;-) files/digest-portage-2.0.51.20-r4
>>> md5 files   ;-) files/digest-portage-2.0.51-r15
>>> md5 files   ;-) files/emerge-fixes.patch
>>> md5 files   ;-) files/portage-fixes.patch
>>> md5 files   ;-) files/digest-portage-2.0.51.18
>>> md5 src_uri ;-) portage-2.0.51.20.tar.bz2
/bin/bash: symbol lookup error: /usr/lib/libsandbox.so: undefined symbol: __dlvsym
# rm /usr/lib/libsandbox.so
# emerge -uD --nodeps portage
Calculating dependencies ...done!
>>> emerge (1 of 1) sys-apps/portage-2.0.51.20-r4 to /
>>> md5 files   ;-) portage-2.0.51.19.ebuild
>>> md5 files   ;-) portage-2.0.51.20-r4.ebuild
>>> md5 files   ;-) portage-2.0.51-r15.ebuild
>>> md5 files   ;-) portage-2.0.51.18.ebuild
>>> md5 files   ;-) files/README.RESCUE
>>> md5 files   ;-) files/digest-portage-2.0.51.19
>>> md5 files   ;-) files/repoman-fixes.patch
>>> md5 files   ;-) files/gcc-2.95-libsandbox.patch
>>> md5 files   ;-) files/dispatch-conf-fixes.patch
>>> md5 files   ;-) files/digest-portage-2.0.51.20-r4
>>> md5 files   ;-) files/digest-portage-2.0.51-r15
>>> md5 files   ;-) files/emerge-fixes.patch
>>> md5 files   ;-) files/portage-fixes.patch
>>> md5 files   ;-) files/digest-portage-2.0.51.18
>>> md5 src_uri ;-) portage-2.0.51.20.tar.bz2
Could not open the sandbox library at '(null)/libsandbox.so'.





Comment 4


Henrik Grubbström





          2005-04-25 05:27:21 UTC
        

Oops, removing /usr/bin/sandbox did indeed get it running again.




Comment 5


Henrik Grubbström





          2005-04-25 05:30:31 UTC
        

# emerge info
!!! Problem with sandbox binary. Disabling...

Portage 2.0.51.20-r4 (default-linux/ia64/2004.3, gcc-3.4.3-20050110, glibc-2.3.5-r0, 2.6.8-gentoo-r3 ia64)
=================================================================
System uname: 2.6.8-gentoo-r3 ia64 
Gentoo Base System version 1.6.10
ccache version 2.3 [disabled]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.14.90.0.8-r2, 2.15.92.0.2-r1
sys-devel/libtool:   1.5.14
virtual/os-headers:  2.6.8.1-r1, 2.6.8.1-r2
ACCEPT_KEYWORDS="ia64"
AUTOCLEAN="yes"
CBUILD="ia64-unknown-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="ia64-unknown-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sfperms strict"
GENTOO_MIRRORS="http://mirror.pudas.net/gentoo rsync://trumpetti.atm.tut.fi/gentoo/ http://gentoo.linux.no/ ftp://gentoo.linux.no/pub/gentoo/"
LC_ALL="C"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage_overlay"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="ia64 X acpi berkdb bitmap-fonts bzlib canna cjk crypt cups emacs encode foomaticdb fortran freetds gdbm gif gmp gnutls gpm gtk gtk2 imlib ipv6 jpeg ldap libg++ libwww maildir mbox mhash mikmod mime motif mozilla mule mysql mysqli ncurses nis nls nptl odbc offensive ogg oggvorbis opengl oss pam pcre pdflib perl pic pie png posix python qt quicktime readline recode samba sdl spell sqlite ssl tcltk tcpd tiff truetype truetype-fonts type1-fonts unicode vorbis xml2 xmms xpm xv zlib"
Unset:  ASFLAGS, CTARGET, LANG, LDFLAGS, LINGUAS






Comment 6


Jason Stubbs (RETIRED)






          2005-04-25 08:42:18 UTC
        

No ideas here..




Comment 7


Henrik Grubbström





          2005-04-25 08:58:12 UTC
        

Seems likely to be related to problems when my libc was updated earlier in the week. I'll try a fresh emerge of libc, and see if it works better.





Comment 8


SpanKY






          2005-04-25 09:00:51 UTC
        

odd ... works on ia64 for me :/

whats with the multiple glibcs listed in `emerge info` ?

i'm using just glibc-2.3.5 ...




Comment 9


Henrik Grubbström





          2005-04-25 10:11:56 UTC
        

Re-emerging libc followed by sandbox seems to have rendered a working system.




Comment 10


SpanKY






          2005-04-25 10:34:51 UTC
        

sounds good ;)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

