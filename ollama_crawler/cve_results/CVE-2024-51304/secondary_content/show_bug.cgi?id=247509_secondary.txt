Title: 247509 – games-strategy/ufo-ai fails to build w/ glibc 2.8 and gcc 4.1 (WTF?)
URL: https://bugs.gentoo.org/show_bug.cgi?id=247509

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 247509
games-strategy/ufo-ai fails to build w/ glibc 2.8 and gcc 4.1 (WTF?)
Last modified: 2010-06-20 19:32:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 247509 
      - games-strategy/ufo-ai fails to build w/ glibc 2.8 and gcc 4.1 (WTF?)


Summary:
games-strategy/ufo-ai fails to build w/ glibc 2.8 and gcc 4.1 (WTF?)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-11-18 21:57 UTC by Diego Elio Pettenò (RETIRED)





      Modified:
    
2010-06-20 19:32 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



chtof62
esigra
jaak
quazgar









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log

              (games-strategy:ufo-ai-2.2.1:20081118-210139.log,14.04 KB,
                text/plain)

            
2008-11-18 21:57 UTC,

            Diego Elio Pettenò (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Diego Elio Pettenò (RETIRED)






          2008-11-18 21:57:31 UTC
        

Portage 2.2_rc14 (default/linux/x86/2008.0, gcc-4.1.2-asneeded, glibc-2.8_p20080602-r0, 2.6.27-gentoo-r2 i686)
=================================================================
System uname: Linux-2.6.27-gentoo-r2-i686-Quad-Core_AMD_Opteron-tm-_Processor_2350-with-glibc2.0
Timestamp of tree: Fri, 14 Nov 2008 00:37:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7, 2.1.6-r1
dev-lang/python:     2.4.4-r15, 2.5.2-r8
dev-python/pycrypto: 2.0.1-r6
dev-util/ccache:     2.4-r8
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.3.0-r1
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.19
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb /var/qmail/alias /var/qmail/control /var/spool/torque"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage-distfiles"
FEATURES="distlocks parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo"
INSTALL_MASK=" 	/usr/share/doc 	/usr/share/man 	/usr/share/info"
LDFLAGS="-Wl,-O1"
MAKEOPTS="-j14"
PKGDIR="/usr/portage-packages"
PORTAGE_COMPRESS=""
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="acl berkdb bzip2 cli cracklib crypt cups dri fortran gdbm gpm iconv ipv6 isdnlog midi mudflap ncurses nls nptl nptlonly openmp pam pcre perl pppd python readline reflection session spl ssl sysfs tcpd unicode x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="fbdev glint i810 intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa vga via vmware voodoo"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, LANG, LC_ALL, LINGUAS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Diego Elio Pettenò (RETIRED)






          2008-11-18 21:57:52 UTC
        

Created attachment 172309 [details]
Build log




Comment 2


Christophe LEFEBVRE





          2008-11-19 18:57:54 UTC
        

According http://ufoai.ninex.info/forum/index.php?topic=2891.0, a user has the same problem with gcc-4.1.2 and it can compile successfully with gcc-4.3.1...
But as far as I am concerned, I can compile successfully ufo-ai with gcc-4.1.2 !!...
I have maybe a beginning of explaination : "__dprintf_chk" is provided via dprintf (I think) by /usr/include/bits/stdio.h (thanks to glibc-2.6.1 on my system) and you are using glibc-2.8_p20080602-r0...
Diego, can you check you have dprintf in /usr/include/bits/stdio.h ?
In onther words, for now, I think there is maybe a problem with glibc-2.8 (I don't want to install now glibc-2.8 to validate this bug on my computer because it needs a lot of time...).




Comment 3


Diego Elio Pettenò (RETIRED)






          2008-11-19 19:13:33 UTC
        

Christophe you're on the right track.

dprintf() is indeed present in stdio.h on glibc 2.8 but it's under an __USE_GNU conditional, which means it ś also included in the _GNU_SOURCE cleanup of glibc 2.8.





Comment 4


SpanKY






          2009-01-14 04:26:35 UTC
        

ufo-ai-2.2.1 builds fine for me w/gcc-4.3.2 and glibc-2.9




Comment 5


Jaak Ristioja





          2009-02-23 08:58:49 UTC
        

The lines 189-190 of /usr/include/bits/stdio2.h are the cause for all gi.dprintf() calls to be preprocessed into gi.__dprintf_chk() calls:

#   define dprintf(fd, ...) \
  __dprintf_chk (fd, __USE_FORTIFY_LEVEL - 1, __VA_ARGS__)




Comment 6


Samuli Suominen (RETIRED)






          2010-03-20 19:27:13 UTC
        

(In reply to comment #4)
> ufo-ai-2.2.1 builds fine for me w/gcc-4.3.2 and glibc-2.9
> 

and fine for me w/ gcc-4.4.3 and glibc-2.11

was there something here that actually needed to be done? surely gcc-4.1 is now "unsupported" in a sense that gcc-4.3.4 is stable









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

