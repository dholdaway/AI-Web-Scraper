Title: 207662 – media-libs/speex-1.2beta3 doesn't compile (configure error)
URL: https://bugs.gentoo.org/show_bug.cgi?id=207662

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 207662
media-libs/speex-1.2beta3 doesn't compile (configure error)
Last modified: 2008-01-29 05:34:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 207662 
      - media-libs/speex-1.2beta3 doesn't compile (configure error)


Summary:
media-libs/speex-1.2beta3 doesn't compile (configure error)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo Sound Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-01-27 11:02 UTC by nusch





      Modified:
    
2008-01-29 05:34 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge autDN world output

              (emerge_speex,10.17 KB,
                text/plain)

            
2008-01-27 11:02 UTC,

            nusch




Details





build.log

              (build.log,9.39 KB,
                text/plain)

            
2008-01-27 11:03 UTC,

            nusch




Details





config.log

              (config.log,36.92 KB,
                text/plain)

            
2008-01-27 11:06 UTC,

            nusch




Details





emege --info

              (emerge.info,6.52 KB,
                text/plain)

            
2008-01-27 11:15 UTC,

            nusch




Details





compiled libwinmm.so

              (libwinmm.so.bz2,288.91 KB,
                application/octet-stream)

            
2008-01-28 22:06 UTC,

            nusch




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


nusch





          2008-01-27 11:02:00 UTC
        

It's show error after 'checking size of short'

Reproducible: Always

Steps to Reproduce:
1.emerge speex




Comment 1


nusch





          2008-01-27 11:02:46 UTC
        

Created attachment 141870 [details]
emerge autDN world output




Comment 2


nusch





          2008-01-27 11:03:38 UTC
        

Created attachment 141871 [details]
build.log




Comment 3


nusch





          2008-01-27 11:06:25 UTC
        

Created attachment 141872 [details]
config.log




Comment 4


nusch





          2008-01-27 11:09:04 UTC
        

I don't understand why gentoo tries to install this package, I have recently disabled speex USE flag, It doesn't exist in world file and as shown in emerge speex output it isn't dependency of any other package..




Comment 5


Jakub Moc (RETIRED)






          2008-01-27 11:11:22 UTC
        

> ./configure: line 21733: 25108 Segmentation fault      ./conftest$ac_exeext

Getting segfaults on configure doesn't look exactly like speex problem. Post your emerge --info as well.




Comment 6


nusch





          2008-01-27 11:15:48 UTC
        

Created attachment 141873 [details]
emege --info




Comment 7


nusch





          2008-01-27 11:16:54 UTC
        

(In reply to comment #5)
> > ./configure: line 21733: 25108 Segmentation fault      ./conftest$ac_exeext
> 
> Getting segfaults on configure doesn't look exactly like speex problem. Post
> your emerge --info as well.
> 

last night I've compiled over 60 packages and the problem exist only in speex, it's always reproducible in the same moment.




Comment 8


nusch





          2008-01-27 11:37:09 UTC
        

Why speex depends e.g mplayer, despite mplayer is recompiled without speex USE flag?

nuschbox ~ # equery depends speex
[ Searching for packages depending on speex... ]
kde-base/kdenetwork-3.5.7 (jingle? >=media-libs/speex-1.1.6)
media-libs/akode-2.0.1-r1 (speex? media-libs/speex)
media-libs/xine-lib-1.1.9.1 (speex? media-libs/speex)
media-sound/timidity++-2.13.2-r5 (speex? >=media-libs/speex-1.1.5)
media-sound/vorbis-tools-1.1.1-r5 (speex? media-libs/speex)
media-video/mplayer-1.0_rc2_p24929-r1 (speex? >=media-libs/speex-1.1.7)

eix mplayer
[...]
[I] media-video/mplayer
     Available versions:  1.0_rc1_p20070824 1.0_rc2_p24929-r1 ~1.0_rc2_p24929-r2 ~1.0_rc2_p24929-r3 {3dnow 3dnowext X a52 aac aalib alsa altivec amrnb amrwb arts bidi bindist bl cddb cdio cdparanoia cpudetection custom-cflags debug dga directfb doc dts dv dvb dvd enca encode esd fbcon ftp ggi gif gtk iconv ipv6 ivtv jack joystick jpeg kernel_linux ladspa libcaca lirc live livecd lzo mad md5sum mmx mmxext mp2 mp3 musepack nas nemesi openal opengl oss png pnm pulseaudio pvr quicktime radio rar real rtc samba sdl speex srt sse sse2 ssse3 svga teletext tga theora tivo truetype unicode v4l v4l2 video_cards_i810 video_cards_mga video_cards_nvidia video_cards_s3virge video_cards_tdfx video_cards_vesa vidix vorbis win32codecs x264 xanim xinerama xv xvid xvmc zoran}
     Installed versions:  1.0_rc2_p24929-r1(03:39:17 27 I 2008)(X a52 aac aalib alsa arts cdparanoia directfb dv dvb dvd encode esd fbcon ftp gif gtk iconv ipv6 jpeg kernel_linux libcaca lirc mad md5sum mmx mmxext mp2 mp3 musepack nas opengl oss png pnm quicktime radio rar real samba sdl sse sse2 svga tivo truetype unicode v4l2 vorbis win32codecs x264 xinerama xv xvid xvmc zoran -3dnow -3dnowext -altivec -amrnb -amrwb -bidi -bindist -bl -cddb -cdio -cpudetection -custom-cflags -debug -dga -doc -dts -enca -ggi -jack -joystick -ladspa -live -livecd -lzo -nemesi -openal -pulseaudio -rtc -speex -srt -ssse3 -teletext -tga -theora -v4l -video_cards_mga -video_cards_s3virge -video_cards_tdfx -video_cards_vesa -vidix -xanim)
     Homepage:            http://www.mplayerhq.hu/
     Description:         Media Player for Linux





Comment 9


Jakub Moc (RETIRED)






          2008-01-27 17:05:29 UTC
        

(In reply to comment #8)
> Why speex depends e.g mplayer, despite mplayer is recompiled without speex USE
> flag?

Please stop flooding this bug with unrelated support questions. http://www.gentoo.org/main/en/support.xml




Comment 10


Alexis Ballier






          2008-01-28 21:41:25 UTC
        

hmm weird, I get this here:
configure:20926: checking for main in -lwinmm
configure:20955: x86_64-pc-linux-gnu-gcc -o conftest -march=athlon64 -O2 -pipe -g -ggdb -D_FILE_OFFSET_BITS=64  -Wl,--as-needed conftest.c -lwinmm  -lm  >&5
/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lwinmm
collect2: ld returned 1 exit status


could try to find what gives you libwinmm.so ? (like with locate) and then tell us what's the package providing it ?




Comment 11


nusch





          2008-01-28 22:04:54 UTC
        

(In reply to comment #10)
> hmm weird, I get this here:
> configure:20926: checking for main in -lwinmm
> configure:20955: x86_64-pc-linux-gnu-gcc -o conftest -march=athlon64 -O2 -pipe
> -g -ggdb -D_FILE_OFFSET_BITS=64  -Wl,--as-needed conftest.c -lwinmm  -lm  >&5
> /usr/lib/gcc/x86_64-pc-linux-gnu/4.2.2/../../../../x86_64-pc-linux-gnu/bin/ld:
> cannot find -lwinmm
> collect2: ld returned 1 exit status
> 
> 
> could try to find what gives you libwinmm.so ? (like with locate) and then tell
> us what's the package providing it ?
> 
nuschbox media # locate libwinmm.so
/usr/local/lib/libwinmm.so
/home/nusch/.WineCVS/sources/cvscedega/winex/dlls/libwinmm.so
/home/nusch/.WineCVS/sources/cvscedega/winex/dlls/winmm/libwinmm.so







Comment 12


nusch





          2008-01-28 22:06:36 UTC
        

Created attachment 142057 [details]
compiled libwinmm.so

compiled libwinmm, but don't now if it'll run on your athlon64




Comment 13


Alexis Ballier






          2008-01-28 22:44:11 UTC
        

(In reply to comment #11)
> /usr/local/lib/libwinmm.so


hmm no it wont run like that on my machine because it needs other wine libs ;)

anyway this seems to be from an old manual wine install. There is not much we can do there. Please remove it or make sure it's not in your lib search path because it is probably broken.
Here wine provides: /usr/lib32/wine/winmm.dll.so





Comment 14


nusch





          2008-01-28 22:54:29 UTC
        

(In reply to comment #13)
> (In reply to comment #11)
> > /usr/local/lib/libwinmm.so
> 
> 
> hmm no it wont run like that on my machine because it needs other wine libs ;)
> 
> anyway this seems to be from an old manual wine install. There is not much we
> can do there. Please remove it or make sure it's not in your lib search path
> because it is probably broken.
> Here wine provides: /usr/lib32/wine/winmm.dll.so
> 
did
mv /usr/local/lib/libwinmm.so /usr/local/lib/libwinmm.so.bak
and run ./configure from portage temp dir, it passed without any problem. Thanks.
I won't install speex any more because removed all depending packages,but I'm wondering from 60 ebuilds 3 days ago and 27 yesterday, only speex has problem with it. What wine do with length of short ? Is speex run as win libraries?




Comment 15


Alexis Ballier






          2008-01-29 05:34:07 UTC
        

(In reply to comment #14)
> (In reply to comment #13)
> > (In reply to comment #11)
> > > /usr/local/lib/libwinmm.so
> > 
> > 
> > hmm no it wont run like that on my machine because it needs other wine libs ;)
> > 
> > anyway this seems to be from an old manual wine install. There is not much we
> > can do there. Please remove it or make sure it's not in your lib search path
> > because it is probably broken.
> > Here wine provides: /usr/lib32/wine/winmm.dll.so
> > 
> did
> mv /usr/local/lib/libwinmm.so /usr/local/lib/libwinmm.so.bak
> and run ./configure from portage temp dir, it passed without any problem.
> Thanks.
> I won't install speex any more because removed all depending packages,but I'm
> wondering from 60 ebuilds 3 days ago and 27 yesterday, only speex has problem
> with it. What wine do with length of short ? Is speex run as win libraries?
> 

I dont know, I think that's some compatibility for building on windows but as it found the libwinmm.so on your linux it tried to work with that, and then it failed badlay :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

