Title: 210883 – sys-apps/baselayout-2.0.0_rc6-r1 glibc pointer error when RC_PARALLEL="yes"
URL: https://bugs.gentoo.org/show_bug.cgi?id=210883

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 210883
sys-apps/baselayout-2.0.0_rc6-r1 glibc pointer error when RC_PARALLEL="yes"
Last modified: 2008-02-23 18:20:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 210883 
      - sys-apps/baselayout-2.0.0_rc6-r1 glibc pointer error when RC_PARALLEL="yes"


Summary:
sys-apps/baselayout-2.0.0_rc6-r1 glibc pointer error when RC_PARALLEL="yes"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-02-20 14:34 UTC by Timothy Stotts





      Modified:
    
2008-02-23 18:20 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



roy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,5.02 KB,
                text/plain)

            
2008-02-20 14:35 UTC,

            Timothy Stotts




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Timothy Stotts





          2008-02-20 14:34:19 UTC
        

When setting RC_PARALLEL="yes", /sbin/runscript encounters a point exception that prevents execution of any of the /etc/init.d/* scripts.

/var/log/rc.log shows pointer messages similar to the following:
*** glibc detected *** /sbin/runscript: free(): invalid pointer: 0x08060b10 ***
*** glibc detected *** /sbin/runscript: free(): invalid pointer: 0x08060b20 ***
*** glibc detected *** /sbin/runscript: free(): invalid pointer: 0x08060b10 ***



Reproducible: Always

Steps to Reproduce:
1. Edit /etc/conf.d/rc
2. Change RC_PARALLEL="no" to RC_PARALLEL="yes"
3. Reboot

Actual Results:  
/sbin/runscript fails to run any init.d scripts properly, and thus the system boots only with / mounted read-only


Expected Results:  
Proper bootup with some parallelization of init.d script execution.

/etc/conf.d/rc settings:

RC_PARALLEL="no"
RC_INTERACTIVE="yes"
RC_VERBOSE="no"
RC_QUIET="no"
RC_DEPEND_STRICT="yes"
RC_HOTPLUG="yes"
RC_COLDPLUG="yes"
RC_PLUG_SERVICES="!*"
RC_FORCE_AUTO="no"
RC_LOGGER="yes"
RC_TTY_NUMBER=12
RC_DOWN_INTERFACE="yes"
RC_DOWN_HARDDISK="yes"
RC_DEVICES="udev"
RC_DEVICE_TARBALL="no"
RC_DMESG_LEVEL="1"




Comment 1


Timothy Stotts





          2008-02-20 14:35:40 UTC
        

Created attachment 144100 [details]
emerge --info




Comment 2


Timothy Stotts





          2008-02-20 14:38:06 UTC
        

This also happens when baselayout is compiled with CFLAGS='-O2 -pipe -march=i686', so it does not appear to be a CFLAGS issue.

This machine is SMP. (Technically, it is CMP -- dual core, but baselayout would not know the difference.)





Comment 3


Roy Marples





          2008-02-20 15:11:34 UTC
        

This should aleady be fixed in OpenRC




Comment 4


Timothy Stotts





          2008-02-20 15:25:18 UTC
        

(In reply to comment #3)
> This should aleady be fixed in OpenRC
> 

Care to elaborate?  I am new to using baselayout-2 and found very little documentation on-line.

OpenRC (to be renamed?) is like a cross between init-ng and baselayout-1, and will replace baselayout-2 as official gentoo rc eventually?





Comment 5


Timothy Stotts





          2008-02-23 18:20:18 UTC
        

I have switched to baselayout-2 with openrc-9999 from the uberlord dev. overlay.
Thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

