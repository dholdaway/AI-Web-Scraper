Title: 94544 – glibc-2.2.5-r10: emerge fails with linux-headers-2.6
URL: https://bugs.gentoo.org/show_bug.cgi?id=94544

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 94544
glibc-2.2.5-r10: emerge fails with linux-headers-2.6
Last modified: 2006-04-21 22:55:35 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 94544 
      - glibc-2.2.5-r10: emerge fails with linux-headers-2.6


Summary:
glibc-2.2.5-r10: emerge fails with linux-headers-2.6
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Tim Yamin (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-30 12:29 UTC by Michael Schachtebeck





      Modified:
    
2006-04-21 22:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



vapier









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Schachtebeck





          2005-05-30 12:29:34 UTC
        

When emerging glibc-2.2.5-r10, the following error occurs:



In file included from /usr/include/linux/bitops.h:4,
                 from /usr/include/asm/cpufeature.h:10,
                 from /usr/include/asm/processor.h:18,
                 from /usr/include/linux/prefetch.h:15,
                 from /usr/include/linux/list.h:5,
                 from /usr/include/linux/sysctl.h:23,
                 from ../sysdeps/unix/sysv/linux/sys/sysctl.h:28,
                 from ../include/sys/sysctl.h:2,
                 from ../sysdeps/unix/sysv/linux/dl-osinfo.h:21,
                 from ../sysdeps/unix/sysv/linux/init-first.c:33:
/usr/include/asm/bitops.h:362: conflicting types for `__ffs'
../include/string.h:43: previous declaration of `__ffs'
make[2]: ***
[/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5/buildhere/csu/init-first.o]
Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5/csu'
make[1]: *** [csu/subdir_lib] Error 2
make[1]: Leaving directory `/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5'
make: *** [all] Error 2

!!! ERROR: sys-libs/glibc-2.2.5-r10 failed.
!!! Function src_compile, Line 73, Exitcode 2
!!! make failed
!!! If you need support, post the topmost build error, NOT this status message.

Reproducible: Always
Steps to Reproduce:




Portage 2.0.51.19 (default-linux/x86/gcc2, gcc-2.95.3,
glibc-2.2.5-r2,glibc-2.2.5-r9, 2.6.11-gentoo-r9 i686)
=================================================================
System uname: 2.6.11-gentoo-r9 i686 AMD-K7(tm) Processor
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.5,dev-lang/python-2.2.3-r5 [2.3.5 (#1,
Apr 28 2005, 09:40:55)]
dev-lang/python:     2.3.5, 2.2.3-r5
sys-apps/sandbox:    [Not Present]
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.8.5-r3, 1.5, 1.6.3, 1.7.9-r1, 1.4_p6, 1.9.5
sys-devel/binutils:  2.11.92.0.12.3-r2, 2.15.92.0.2-r7
sys-devel/libtool:   1.5.16
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=i686 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/
http://ftp.uni-erlangen.de/pub/mirrors/gentoo
http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/
http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
http://pandemonium.tiscali.de/pub/gentoo/
ftp://ftp.tu-clausthal.de/pub/linux/gentoo/
ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo
ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/
ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo
ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo
ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo
ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo
ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/
ftp://ftp.gentoo.mesh-solutions.com/gentoo/
ftp://pandemonium.tiscali.de/pub/gentoo/"
LANG="en_US"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/usr/TMP/"
PORTDIR="/usr/portage"
SYNC="rsync://10.10.10.169/gentoo-portage"
USE="x86 3dnow alsa apache2 apm berkdb bitmap-fonts crypt cscope emboss
font-server foomaticdb fortran gd gif gnome gtk2 hardenedphp imlib jpeg libg++
libwww mad mikmod mmx motif mp3 mysql ncurses nls oss pam perl png postgres
python readline samba slang spell sse ssl tcpd truetype-fonts type1-fonts xml2
zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CBUILD, CTARGET, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


SpanKY






          2005-05-30 17:42:21 UTC
        

this is because of linux-headers-2.6 not because of gcc-2

if you upgrade to linux-headers-2.6.11-r1 does it work ?




Comment 2


Michael Schachtebeck





          2005-05-30 23:31:22 UTC
        

> if you upgrade to linux-headers-2.6.11-r1 does it work ?

I upgraded to linux-headers-2.6.11-r1, now it fails with a different error:

In file included from /usr/include/linux/bitops.h:77,
                 from /usr/include/asm/cpufeature.h:10,
                 from /usr/include/asm/processor.h:18,
                 from /usr/include/linux/prefetch.h:15,
                 from /usr/include/linux/list.h:5,
                 from /usr/include/linux/sysctl.h:23,
                 from ../sysdeps/unix/sysv/linux/sys/sysctl.h:28,
                 from ../include/sys/sysctl.h:2,
                 from ../sysdeps/unix/sysv/linux/dl-osinfo.h:21,
                 from ../sysdeps/unix/sysv/linux/init-first.c:33:
/usr/include/asm/bitops.h:370: conflicting types for `__ffs'
../include/string.h:43: previous declaration of `__ffs'
make[2]: ***
[/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5/buildhere/csu/init-first.o]
Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5/csu'
make[1]: *** [csu/subdir_lib] Error 2
make[1]: Leaving directory `/usr/TMP/portage/glibc-2.2.5-r10/work/glibc-2.2.5'
make: *** [all] Error 2




Comment 3


Michael Schachtebeck





          2005-05-30 23:32:49 UTC
        

> I upgraded to linux-headers-2.6.11-r1, now it fails with a different error:

Sorry, it's not a different error, only the first line number is different, the
error seems to be the same.




Comment 4


Tim Yamin (RETIRED)






          2005-06-11 12:11:48 UTC
        

vapier: This is going to be a problem since we need to get glibc to #define
__have_ffs or something during the build stage - newer glibcs don't have __ffs
in at all so we don't hit this.




Comment 5


SpanKY






          2005-06-11 12:49:36 UTC
        

what files specifically would you want updated to define __have_ffs ?  i have no
problem patching them in ...




Comment 6


SpanKY






          2006-04-21 22:55:35 UTC
        

2.6 headers in general are just a pain with gcc2 and not worth the effort so i've just updated the profile to force 2.4 headers









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

