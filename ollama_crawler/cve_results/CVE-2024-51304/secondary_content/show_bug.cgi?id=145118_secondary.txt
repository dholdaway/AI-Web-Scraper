Title: 145118 – Udev-Guide should mention to create /dev/tty1 for gensplash/splashutils users
URL: https://bugs.gentoo.org/show_bug.cgi?id=145118

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145118
Udev-Guide should mention to create /dev/tty1 for gensplash/splashutils users
Last modified: 2006-08-29 11:51:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145118 
      - Udev-Guide should mention to create /dev/tty1 for gensplash/splashutils users


Summary:
Udev-Guide should mention to create /dev/tty1 for gensplash/splashutils users
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

[OLD] Docs on www.gentoo.org




Classification:

Unclassified




Component:

Other documents

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      with
      1 
            vote
    (vote)
  



Assignee:

Docs Team








URL:



http://www.gentoo.org/doc/en/udev-gui...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-25 14:48 UTC by Daniel Pielmeier





      Modified:
    
2006-08-29 11:51 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



confabulate
diox









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Daniel Pielmeier






          2006-08-25 14:48:27 UTC
        

Hello,

I followed the udev guide, set RC_DEVICE_TARBALL to "no", deleted /lib/udev-state/devices.tar.bz2 and removed everything except /dev/console and /dev/null by using the gentoo live-cd.

After rebooting the silent mode for gensplash/splashutils refused to work.
So i decided to re-emerge splashutils. But this is not necessary. After 
installing, the ebuild checks for missing devices, which was in my case 
/dev/tty1.

Here is the output from the ebuild:

> It appears that the /dev/tty1 character device doesn't exist on
> the root filesystem. This will prevent the silent mode from working
> properly. You can fix the problem by doing:
>
> mount --bind / /lib/splash/tmp
> mknod /lib/splash/tmp/dev/tty1 c 4 1
> umount /lib/splash/tmp

So the solution is just to create a device node for /dev/tty1.
Should this also be mentioned in the udev guide to avoid confusion, because not everybody will find out the solution for this problem.

Regards,
Daniel




Comment 1


Dimitry Bradt (RETIRED)






          2006-08-25 15:17:58 UTC
        

Hmm, You may have misconfigured something, because normally you don't need to do that.. At least i didn't. 

Proposing "Worksforme"
grtz
diox




Comment 2


Daniel Pielmeier






          2006-08-25 15:24:56 UTC
        

(In reply to comment #1)
> Hmm, You may have misconfigured something, because normally you don't need to
> do that.. At least i didn't. 
> 
> Proposing "Worksforme"
> grtz
> diox
> 

When the system is up and running i have /dev/tty1.


When i do the test from the guide

mkdir test
mount --bind / test
cd test/dev
ls

i got console null and tty1




Comment 3


MickKi





          2006-08-27 03:31:13 UTC
        

Isn't udev supposed to create all devices necessary?  If you run udevstart after you boot do you have a tty1, or is it still missing?

What I have noticed is that on one machine the fb image is shown on the console as soon as F2 becomes available in the boot process, despite the fact that I have *not* set up splash in rc-update.  On another machine I must set up splash as a boot script and even then it will not come up (it says: setting framebuffer console images) until after net.eth0 has been initiated - towards the end of the boot process.  I wonder if this is related to your comment about a /dev/tty1 being there all the time as opposed to waiting for it to be created by udev?
-- 
Regards,
Mick




Comment 4


Daniel Pielmeier






          2006-08-27 03:47:14 UTC
        

> Isn't udev supposed to create all devices necessary?  If you run udevstart
> after you boot do you have a tty1, or is it still missing?

as i have posted before, when the system is up i have /dev/tty1, so i suppose it has been created by udev.

I think there i a need for the static device because all the splash things are happening before udev creates this devices.

The problem i have when using splash is that the silent mode does not allow me to switch to verbose mode and when the system is up it stucks. I just see the verbose screen, no switch to gdm for log in into X is done as normal.




Comment 5


nm (RETIRED)






          2006-08-29 11:03:57 UTC
        

You seem to have come up with a solution that worked for your system, but only because you b0rked it by deleting all those files -- nowhere does the udev guide say that mass deletion of entries in /dev is necessary, or that anything else must be removed (besides devfs, of course).

The guide -- and the whole point of udev itself -- is designed so that you don't have to work with any kind of static devices, as those get to be very unmanageable, as you've proven.

I've never had these kinds of problems when I switched to udev, and I can't reproduce your errors when switching from RC_DEVICE_TARBALL=yes/no.

Never had this odd problem with gensplash, like most users, so it's safe to say that you might have been doing too much playing around in /dev. ;)

If it's still a problem for you, try getting support from other users on the forums: http://forums.gentoo.org




Comment 6


Daniel Pielmeier






          2006-08-29 11:51:42 UTC
        

(In reply to comment #5)
> You seem to have come up with a solution that worked for your system, but only
> because you b0rked it by deleting all those files -- nowhere does the udev
> guide say that mass deletion of entries in /dev is necessary, or that anything
> else must be removed (besides devfs, of course).

I have deleted this files becaue having 5200 Devices in /dev irritates me a bit. Especially now after deleting this files i have only 800 and everything works fine instead ofn the /dev/tty1 problem, which i managed by creating a static one.
 
> Never had this odd problem with gensplash, like most users, so it's safe to
> say that you might have been doing too much playing around in /dev. ;)
> 
> If it's still a problem for you, try getting support from other users on the
> forums: http://forums.gentoo.org

I have discussed this already on the forum, see http://article.gmane.org/gmane.linux.gentoo.user/168473 where others also think it should be mentioned.

For me this solved already, i just filed this bug for helping others to avoid problems. So feel free to close this bug!











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

