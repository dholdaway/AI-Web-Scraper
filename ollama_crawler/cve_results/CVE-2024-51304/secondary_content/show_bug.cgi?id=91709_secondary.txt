Title: 91709 – libusb-0.1.10a portage access violation
URL: https://bugs.gentoo.org/show_bug.cgi?id=91709

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 91709
libusb-0.1.10a portage access violation
Last modified: 2005-06-25 05:02:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 91709 
      - libusb-0.1.10a portage access violation


Summary:
libusb-0.1.10a portage access violation
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Alastair Tse (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-05-06 09:18 UTC by Simon Detheridge





      Modified:
    
2005-06-25 05:02 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



gentoo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simon Detheridge





          2005-05-06 09:18:16 UTC
        

On my system when merging libusb-0.1.10a, there is a portage access violation. It occurs when the ebuild is calling libtoolize. 

The problem can be fixed by changing the line in the ebuild from 'libtoolize --force' to 'libtoolize --copy --force'

It manifests itself as follows:

>>> emerge (1 of 6) dev-libs/libusb-0.1.10a to /
>>> md5 files   ;-) libusb-0.1.10a.ebuild
>>> md5 files   ;-) libusb-0.1.7-r1.ebuild
>>> md5 files   ;-) libusb-0.1.8.ebuild
>>> md5 files   ;-) files/digest-libusb-0.1.10a
>>> md5 files   ;-) files/digest-libusb-0.1.7-r1
>>> md5 files   ;-) files/libusb-0.1.8-amd64-fPIC.patch
>>> md5 files   ;-) files/digest-libusb-0.1.8
>>> md5 src_uri ;-) libusb-0.1.10a.tar.gz
>>> Unpacking source...
>>> Unpacking libusb-0.1.10a.tar.gz to /var/tmp/portage/libusb-0.1.10a/work
>>> Source unpacked.
 * econf: updating libusb-0.1.10a/config.sub with /usr/share/gnuconfig/config.sub
ACCESS DENIED   open_wr:   /var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub
cp: cannot create regular file `/var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub': Permission denied
./configure --prefix=/usr --host=i686-pc-linux-gnu --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --build=i686-pc-linux-gnu --enable-build-docs --disable-debug

<snip>

Making all in doc
make[2]: Entering directory `/var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/doc'
rm -rf html
mkdir html
jade -t sgml -d ./website.dsl\#html ./manual.sgml
make[2]: Leaving directory `/var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/doc'
make[1]: Leaving directory `/var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a'
--------------------------- ACCESS VIOLATION SUMMARY ---------------------------
LOG FILE = "/tmp/sandbox-dev-libs_-_libusb-0.1.10a-23719.log"

open_wr:   /var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub (symlink to /usr/share/libtool/config.sub)
--------------------------------------------------------------------------------

Reproducible: Always
Steps to Reproduce:
1. emerge libusb

Actual Results:  
Libusb fails to emerge with the above access violation.

Expected Results:  
Libusb should successfully emerge.

Here is my emerge info:

Portage 2.0.51.20-r5 (default-linux/x86/2004.2/gcc34/2.6, gcc-3.4.1,
glibc-2.3.4.20050125-r1, 2.6.11-mm4 i686)
=================================================================
System uname: 2.6.11-mm4 i686 AMD Athlon(tm) XP 2700+
Gentoo Base System version 1.5.3
ccache version 2.3 [enabled]
dev-lang/python:     2.3.4
sys-apps/sandbox:    1.2.1-r2
sys-devel/autoconf:  2.59-r4
sys-devel/automake:  1.8.5-r1
sys-devel/binutils:  2.14.90.0.8-r1
sys-devel/libtool:   1.5.2-r5
virtual/os-headers:  2.6.7-r4
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O3 -march=athlon-xp -m3dnow -msse -mfpmath=sse,387 -mmmx
-maccumulate-outgoing-args -ftracer -pipe -fforce-addr -falign-functions=4
-fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/X11R6/lib/X11/xkb /usr/kde/2/share/config
/usr/kde/3.3/share/config:/usr/kde/3.3/env:/usr/kde/3.3/shutdown
/usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown
/usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/config
/usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/
/usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/
/usr/share/texmf/xdvi/ /var/axis-c/etc /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O3 -march=athlon-xp -m3dnow -msse -mfpmath=sse,387 -mmmx
-maccumulate-outgoing-args -ftracer -pipe -fforce-addr -falign-functions=4
-fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks nostrip sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.mirror.sdv.fr
ftp://ftp.snt.utwente.nl/pub/os/linux/gentoo http://mir.zyrianes.net/gentoo/
ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ "
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://ugly/gentoo-portage/"
USE="3dnow X accessibility acpi aim alsa apache2 apm arts audiofile avi berkdb
bitmap-fonts bluetooth bonobo bzlib calendar cdr cpdflib crypt cscope ctype cups
curl dga dio divx4linux doc dvb dvd dvdr eds emacs emacs-w3 emboss encode esd
ethereal exif fam fftw flac flash font-server foomaticdb fortran ftp gd
gd-external gdbm gif gnome gpm gstreamer gtk gtk2 gtkhtml guile iconv icq
imagemagick imap imlib innodb ipv6 jabber jack java jikes jpeg junit kde ladcca
ldap leim libg++ libwww lirc mad maildir mailwrapper mcal mhash mikmod milter
mime ming mmap mmx mng motif mozilla mp3 mpeg mpi msn mysql mysqli nas ncurses
nls nptl offensive ogg oggvorbis openal opengl oss pam pcre pda pdflib perl php
pic plotutils png pnp posix postgres python qt quicktime readline recode ruby
samba sdl session sharedmem slang snmp soap sockets speex spell spl sse ssl svg
svga sysvipc szip tcltk tcpd tetex threads tidy tiff tokenizer truetype
truetype-fonts trusted type1-fonts unicode usb vhosts videos vorbis wmf
wxwindows x86 xine xinerama xml xml2 xmlrpc xmms xosd xpm xsl xv xvid yahoo zeo
zlib ~x86 userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


Alastair Tse (RETIRED)






          2005-05-08 15:19:41 UTC
        

i can't reproduce this on portage 2.0.51.19 or 2.0.51.21 




Comment 2


Kitson P. Kelly





          2005-05-14 14:44:07 UTC
        

Getting the same thing on portage 2.0.51.21-r1:

Calculating dependencies ...done!
>>> emerge (1 of 22) dev-libs/libusb-0.1.10a to /
>>> md5 files   ;-) libusb-0.1.10a.ebuild
>>> md5 files   ;-) libusb-0.1.7-r1.ebuild
>>> md5 files   ;-) libusb-0.1.8.ebuild
>>> md5 files   ;-) files/digest-libusb-0.1.10a
>>> md5 files   ;-) files/digest-libusb-0.1.7-r1
>>> md5 files   ;-) files/digest-libusb-0.1.8
>>> md5 files   ;-) files/libusb-0.1.8-amd64-fPIC.patch
>>> md5 src_uri ;-) libusb-0.1.10a.tar.gz
>>> Unpacking source...
>>> Unpacking libusb-0.1.10a.tar.gz to /var/tmp/portage/libusb-0.1.10a/work
>>> Source unpacked.
 * econf: updating libusb-0.1.10a/config.sub with /usr/share/gnuconfig/config.sub
ACCESS DENIED   open_wr:   /var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub
cp: cannot create regular file `/var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub': Permission denied

--snip--

--------------------------- ACCESS VIOLATION SUMMARY ---------------------------LOG FILE = "/tmp/sandbox-dev-libs_-_libusb-0.1.10a-15063.log"

open_wr:   /var/tmp/portage/libusb-0.1.10a/work/libusb-0.1.10a/config.sub (symlink to /usr/share/libtool/config.sub)
--------------------------------------------------------------------------------

# emerge info
Portage 2.0.51.21-r1 (default-linux/x86/2005.0, gcc-3.4.3-20050110, glibc-2.3.4.20050125-r0, 2.6.11-gentoo-r8 i686)
=================================================================
System uname: 2.6.11-gentoo-r8 i686 Intel(R) Pentium(R) 4 CPU 2.00GHz
Gentoo Base System version 1.6.9
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.1-r2
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r4
sys-devel/libtool:   1.5.10-r5
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O3 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=pentium4 -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://gentoo.netnitco.net/pub/mirrors/gentoo/source/ ftp://gentoo.ccccom.com http://pandemonium.tiscali.de/pub/gentoo/"
LANG="en_US.utf8"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aac acpi aim alsa apache2 apm arts avi berkdb bitmap-fonts bmp bzlib cddb cdparanoia cdr crypt cups curl curlwrappers dba dbm derkdb directfb divx4linux dts dv dvd dvdr dvdread eds emboss encode esd fam flac flash flatfile foomaticdb footmaticdb fortran gd gdbm geoip gif gnome gphoto2 gpm grstreamer gstreamer gtk gtk2 gtkhtml hal howl icq ieee1394 imagemagick imlib inifile jabber java javascript jikes jpeg junit kde kdeenablefinal latex libg++ libwww lm_sensors mad math mikmod mime mmx mmx2 mng mozilla mozsvg mp3 mpeg msn mysql nas ncurses nls nomotif nvidia oci8 offensive ogg oggvorbis opengl oracle oss pam pcre pdflib perl php png pnp ppds python qt quicktime rdesktop readline real samba sane scanner sdl session slang sndfile soap sockets sox speex spell sse sse2 ssl svg svga tcpd tetex tidy tiff tokenizer truetype truetype-fonts type1-fonts unicode usb v4l v4l2 vhosts vorbis wmf xml xml2 xmms xscreensaver xv yahoo zaptel zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 3


Alastair Tse (RETIRED)






          2005-05-17 05:16:21 UTC
        

seems to indicate that for some reason therei sa symlink to /usr/share/gnuconfig in the tarball, but that 
doesn't exist.

can you run: emerge -v libusb 2>&1 |tee /tmp/libusb.log 

and then attach /tmp/libusb.log to this bug?




Comment 4


Simon Detheridge





          2005-05-17 06:18:57 UTC
        

no, I can't. I've since upgraded my entire toolchain whilst migrating my profile
from 2004.3, to 2005.0. (emerge -u system, gcc, et al.) Since then I can no
longer replicate the problem.




Comment 5


Alastair Tse (RETIRED)






          2005-06-25 05:02:02 UTC
        

well, closing this until someone else sees it so we can debug it.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

