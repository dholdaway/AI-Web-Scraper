Title: 343261 – app-emulation/xen-tools-4.0.0 XendOptions.py failure
URL: https://bugs.gentoo.org/show_bug.cgi?id=343261

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 343261
app-emulation/xen-tools-4.0.0 XendOptions.py failure
Last modified: 2011-03-26 11:39:48 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 343261 
      - app-emulation/xen-tools-4.0.0 XendOptions.py failure


Summary:
app-emulation/xen-tools-4.0.0 XendOptions.py failure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Xen Devs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-10-29 15:16 UTC by Joerg Neikes





      Modified:
    
2011-03-26 11:39 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




patch for gentoo

              (xen-tools-4.0.0-XendOptions.patch,2.20 KB,
                text/plain)

            
2010-10-29 15:17 UTC,

            Joerg Neikes




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joerg Neikes





          2010-10-29 15:16:41 UTC
        

xend 4.0.0 service buggy

Reproducible: Always

Steps to Reproduce:
1. install xen-tools-4.0.0
2. start xend /etc/init.d/xend
3. look in /var/log/xen/xend.log

Actual Results:  
[2010-10-30 00:37:39 24407] INFO (SrvDaemon:332) Xend Daemon started
[2010-10-30 00:37:39 24407] INFO (SrvDaemon:336) Xend changeset: unavailable.
[2010-10-30 00:37:40 24407] DEBUG (XendDomainInfo:149) XendDomainInfo.recreate({'max_vcpu_id': 7, 'cpu_time': 272764266859L, 'ssidref': 0, 'hvm': 0, 'shutdown_reason': 0, 'dying': 0, 'online_vcpus': 8, 'domid': 0, 'paused': 0, 'crashed': 0, 'running': 1, 'maxmem_kb': 4294967292L, 'shutdown': 0, 'mem_kb': 519936L, 'handle': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 'blocked': 0, 'name': 'Domain-0'})
[2010-10-30 00:37:40 24407] INFO (XendDomainInfo:167) Recreating domain 0, UUID 00000000-0000-0000-0000-000000000000. at /local/domain/0
[2010-10-30 00:37:40 24407] DEBUG (XendDomain:464) Adding Domain: 0
[2010-10-30 00:37:40 24407] DEBUG (XendDomainInfo:1891) XendDomainInfo.handleShutdownWatch
[2010-10-30 00:37:40 24407] DEBUG (XendDomain:398) number of vcpus to use is 0
[2010-10-30 00:37:40 24407] INFO (SrvServer:177) unix path=/var/lib/xend/xend-socket
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: VBD.set_device not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: VBD.set_type not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: session.get_all_records not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: event.get_record not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: event.get_all not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: VIF.set_device not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: VIF.set_MAC not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: VIF.set_MTU not found
[2010-10-30 00:37:40 24407] WARNING (XendAPI:705) API call: debug.get_all not found
[2010-10-30 00:37:40 24407] ERROR (SrvDaemon:349) Exception starting xend ('NoneType' object has no attribute 'rfind')
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/xen/xend/server/SrvDaemon.py", line 341, in run
    servers = SrvServer.create()
  File "/usr/lib/python2.6/site-packages/xen/xend/server/SrvServer.py", line 253, in create
    _loadConfig(servers, root, False)
  File "/usr/lib/python2.6/site-packages/xen/xend/server/SrvServer.py", line 233, in _loadConfig
    ssl_key_file = xoptions.get_xend_tcp_xmlrpc_server_ssl_key_file()
  File "/usr/lib/python2.6/site-packages/xen/xend/XendOptions.py", line 210, in get_xend_tcp_xmlrpc_server_ssl_key_file
    if os.path.dirname(file) == "":
  File "/usr/lib/python2.6/posixpath.py", line 119, in dirname
    i = p.rfind('/') + 1
AttributeError: 'NoneType' object has no attribute 'rfind'
[2010-10-30 00:37:44 24406] INFO (SrvDaemon:227) Xend stopped due to signal 15.

Expected Results:  
[2010-10-30 01:03:33 6005] INFO (SrvDaemon:332) Xend Daemon started
[2010-10-30 01:03:33 6005] INFO (SrvDaemon:336) Xend changeset: unavailable.
[2010-10-30 01:03:33 6005] DEBUG (XendDomainInfo:149) XendDomainInfo.recreate({'max_vcpu_id': 7, 'cpu_time': 445031435210L, 'ssidref': 0, 'hvm': 0, 'shutdown_reason': 0, 'dying': 0, 'online_vcpus': 8, 'domid': 0, 'paused': 0, 'crashed': 0, 'running': 1, 'maxmem_kb': 4294967292L, 'shutdown': 0, 'mem_kb': 519936L, 'handle': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 'blocked': 0, 'name': 'Domain-0'})
[2010-10-30 01:03:33 6005] INFO (XendDomainInfo:167) Recreating domain 0, UUID 00000000-0000-0000-0000-000000000000. at /local/domain/0
[2010-10-30 01:03:34 6005] DEBUG (XendDomainInfo:1891) XendDomainInfo.handleShutdownWatch
[2010-10-30 01:03:34 6005] DEBUG (XendDomain:464) Adding Domain: 0
[2010-10-30 01:03:34 6005] DEBUG (XendDomain:398) number of vcpus to use is 0
[2010-10-30 01:03:34 6005] INFO (SrvServer:177) unix path=/var/lib/xend/xend-socket
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: VBD.set_device not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: VBD.set_type not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: session.get_all_records not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: event.get_record not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: event.get_all not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: VIF.set_device not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: VIF.set_MAC not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: VIF.set_MTU not found
[2010-10-30 01:03:34 6005] WARNING (XendAPI:705) API call: debug.get_all not found
[2010-10-30 01:03:34 6005] INFO (XMLRPCServer:156) Opening Unix domain socket XML-RPC server on /var/run/xend/xen-api.sock; authentication has been disabled for this server.
[2010-10-30 01:03:34 6005] INFO (XMLRPCServer:134) Opening TCP XML-RPC server on localhost:8006.
[2010-10-30 01:03:34 6005] INFO (XMLRPCServer:156) Opening Unix domain socket XML-RPC server on /var/run/xend/xmlrpc.sock.




Comment 1


Joerg Neikes





          2010-10-29 15:17:57 UTC
        

Created attachment 252497 [details]
patch for gentoo

fixed like in debian

http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=587090




Comment 2


Wormo (RETIRED)






          2010-11-05 19:39:03 UTC
        

Thanks for submitting your fix! Assigning it to xen team.




Comment 3


Alexey Shvetsov







          2011-03-26 11:39:48 UTC
        

Xen 4.1 in tree. Please test with it and reopen if it doesnt work









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

