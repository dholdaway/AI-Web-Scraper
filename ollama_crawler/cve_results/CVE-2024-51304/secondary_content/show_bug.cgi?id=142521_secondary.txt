Title: 142521 – postfix-2.3.2 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=142521

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 142521
postfix-2.3.2 fails to build
Last modified: 2007-01-15 11:39:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 142521 
      - postfix-2.3.2 fails to build


Summary:
postfix-2.3.2 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Server

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-02 03:48 UTC by Alexander Jenisch





      Modified:
    
2007-01-15 11:39 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



amd64









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexander Jenisch





          2006-08-02 03:48:02 UTC
        

x86_64-pc-linux-gnu-gcc -DHAS_PCRE -DHAS_LDAP -DHAS_MYSQL -I/usr/include/mysql -DUSE_TLS -DUSE_SASL_AUTH -DUSE_CYRUS_SASL -I/usr/include/sasl -DDEF_DAEMON_DIR=\"/usr/lib/postfix\" -DDEF_MANPAGE_DIR=\"/usr/share/man\" -DDEF_README_DIR=\"/usr/share/doc/postfix-2.3.2/readme\" -DDEF_HTML_DIR=\"/usr/share/doc/postfix-2.3.2/html\"  -march=athlon64 -O2 -pipe -ftracer -I. -I../../include -DLINUX2 -o smtp-sink smtp-sink.o ../../lib/libglobal.a ../../lib/libutil.a -Wl,-z,now -L/usr/lib -lpcre -lcrypt -lpthread -lpam -lldap -llber -lmysqlclient -lm -lz -lssl -lcrypto -lsasl2 -ldb -lnsl -lresolv
../../lib/libutil.a(vstream.o): In function `vstream_fdopen':
vstream.c:(.text+0x64d): undefined reference to `timed_read'
../../lib/libutil.a(vstream.o):(.data+0x48): undefined reference to `timed_read'
../../lib/libutil.a(vstream.o):(.data+0x170): undefined reference to `timed_read'
../../lib/libutil.a(vstream.o):(.data+0x298): undefined reference to `timed_read'
/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: BFD 2.17 internal error, aborting at /var/tmp/portage/binutils-2.17/work/binutils-2.17/bfd/elflink.c line 6527 in elf_link_output_extsym

/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld: Please report this bug.

collect2: ld returned 1 exit status
make: *** [smtp-sink] Error 1
make: *** [update] Error 1

!!! ERROR: mail-mta/postfix-2.3.2 failed.
Call stack:
  ebuild.sh, line 1543:   Called dyn_compile
  ebuild.sh, line 938:   Called src_compile
  postfix-2.3.2.ebuild, line 265:   Called die

!!! compile problem
!!! If you need support, post the topmost build error, and the call stack if relevant.

root@enti $ emerge --info
Portage 2.1.1_pre4-r1 (default-linux/amd64/2005.1, gcc-4.1.1/amd64-vanilla, glibc-2.4-r3, 2.6.17.5 x86_64)
=================================================================
System uname: 2.6.17.5 x86_64 AMD Athlon(tm) 64 Processor 3500+
Gentoo Base System version 1.12.2
ccache version 2.4 [enabled]
app-admin/eselect-compiler: 2.0.0_rc2-r1
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.17
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -ftracer"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=athlon64 -O2 -pipe -ftracer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache cvs distlocks fixpackages metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LC_ALL="en_US.utf8"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="amd64 X Xaw3d aac acpi alsa apache2 async audiofile automount avi bash-completion berkdb bitmap-fonts browserplugin bzip2 cairo cdda cli crypt ctype cups curl cvs dga dir divx4linux dlloader doc dri dts dvd dvdread eds emboss encode ethereal fam ffmpeg flac foomaticdb fortran freetype ftp gd gdbm gif glitz gphoto2 gpm gstreamer gtk gtk2 hal icq imagemagick imap imlib ipv6 isdnlog ithreads java javascript jpeg jpeg2k kde kdeenablefinal ldap libwww lm_sensors logitech-mouse lzw lzw-tiff mad maildir matroska mikmod mime mmap mng mp3 mpeg musicbrainz mysql ncurses nls nptl nptlonly nsplugin nvidia offensive ogg oggvorbis openal opengl oss pam pascal pcre pdf pdflib perl php png posix pppd python qt qt3 qt4 quicktime rdesktop readline reflection rtc ruby samba sasl sdl server session slp sndfile sockets spamassassin spell spl sql ssl stream subversion svg swat syslog tcltk tcpd tetex theora threads tiff truetype truetype-fonts type1-fonts unicode usb videos visualization vorbis webdav wxwindows xft xine xml xorg xosd xpm xv xvid zeroconf zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU video_cards_nvidia"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Tuan Van (RETIRED)






          2006-08-02 08:57:12 UTC
        

please provide `emerge postfix -vp`




Comment 2


Alexander Jenisch





          2006-08-02 15:28:51 UTC
        

root@enti $ emerge postfix -vp

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild     U ] mail-mta/postfix-2.3.2 [2.3.0] USE="ipv6 ldap mysql pam sasl ssl -cdb -dovecot-sasl -hardened -mailwrapper -mbox -nis -postgres -vda%" 0 kB




Comment 3


Tuan Van (RETIRED)






          2006-08-03 14:32:20 UTC
        

I can't reproduce this with the same toolchain/USE-flag on x86. Simce I don't have access to an AMD64 box, CCing amd64 to check this out.




Comment 4


Simon Stelling (RETIRED)






          2006-10-06 06:17:07 UTC
        

not getting this on amd64 either. libutil.a is provided by glibc, and the error message

/usr/lib/gcc/x86_64-pc-linux-gnu/4.1.1/../../../../x86_64-pc-linux-gnu/bin/ld:
BFD 2.17 internal error, aborting at
/var/tmp/portage/binutils-2.17/work/binutils-2.17/bfd/elflink.c line 6527 in
elf_link_output_extsym

tells me this is not a postfix issue but your toolchain is somehow fubared.




Comment 5


Simon Stelling (RETIRED)






          2007-01-14 05:03:46 UTC
        

Are you still able to reproduce this with a current toolchain?




Comment 6


Alexander Jenisch





          2007-01-15 11:39:10 UTC
        

hmm... haven't seen this error in ages, so it seems to work for me now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

