Title: 247572 – >=gnome-extra/gnome-power-manager-2.22 needs media-libs/libcanberra with gtk support
URL: https://bugs.gentoo.org/show_bug.cgi?id=247572

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 247572
>=gnome-extra/gnome-power-manager-2.22 needs media-libs/libcanberra with gtk support
Last modified: 2009-03-20 13:16:31 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 247572 
      - >=gnome-extra/gnome-power-manager-2.22 needs media-libs/libcanberra with gtk support


Summary:
>=gnome-extra/gnome-power-manager-2.22 needs media-libs/libcanberra with gtk ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-11-19 12:28 UTC by Ioannis Galanommatis





      Modified:
    
2009-03-20 13:16 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




output of emerge --info

              (emerge-info.txt,9.28 KB,
                text/plain)

            
2008-11-22 12:13 UTC,

            Ioannis Galanommatis




Details





output of readelf -d /usr/bin/gnome-power-manager

              (readelf.txt,6.83 KB,
                text/plain)

            
2008-11-22 12:14 UTC,

            Ioannis Galanommatis




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ioannis Galanommatis





          2008-11-19 12:28:37 UTC
        

If gnome-power-manager is run and libcanberra was compiled without gtk use flag, it crashes. Emerging libcanberra with gtk use flag fixes the problem.

This dependancy should be enforced by ebuild.


Reproducible: Always

Steps to Reproduce:
1. Compile libcanberra without gtk use flag
2. Compile and run gnome-power-manager
3. It will now crash

Actual Results:  
gnome-power-manager is allowed to be emerged without checking the gtk use flag of libcanberrra


Expected Results:  
gnome-power-manager should not be allowed to compile until user compiles libcanberra with gtk flag

gnome-power-manager 2.22.1
libcanberra 0.10
portage 2.2_rc14




Comment 1


Gilles Dartiguelongue (RETIRED)






          2008-11-19 13:42:51 UTC
        

I fail to see how 2.22 could use libcanberra since it releases started to appear after 2.22.

Please provide emerge --info and readelf -d /usr/bin/gnome-power-manager (or maybe /usr/libexec/gnome-power-manager)




Comment 2


Gilles Dartiguelongue (RETIRED)






          2008-11-21 22:05:32 UTC
        

please get back to us.




Comment 3


Ioannis Galanommatis





          2008-11-22 12:13:15 UTC
        

Created attachment 172835 [details]
output of emerge --info




Comment 4


Ioannis Galanommatis





          2008-11-22 12:14:24 UTC
        

Created attachment 172839 [details]
output of readelf -d /usr/bin/gnome-power-manager




Comment 5


Ioannis Galanommatis





          2008-11-22 12:21:37 UTC
        

(In reply to comment #4)
> Created an attachment (id=172839) [edit]
> output of readelf -d /usr/bin/gnome-power-manager
> 

this output might not be accurate. I took it afterwards on kde4.
Interestingly, gnome-power-manager did not complain about libcanberra while
I was on kde4. I wonder if I am missing something. On gnome it crashed saying
that a library file was not found! I will try to reproduce the crash again and
I'll post the new readelf output.




Comment 6


Gilles Dartiguelongue (RETIRED)






          2009-03-20 13:15:31 UTC
        

Ok so according to these info, g-p-m is actually not linking to libcanberra. Reading the code further, there is no call to libcanberra whatsoever in there. However it is using gstreamer to play some sounds but it's already dependending on that properly.




Comment 7


Gilles Dartiguelongue (RETIRED)






          2009-03-20 13:16:31 UTC
        

closing worksforme. Please reopen if you make it crash again with some strace or gdb backtrace attached. Thanks for reporting.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

