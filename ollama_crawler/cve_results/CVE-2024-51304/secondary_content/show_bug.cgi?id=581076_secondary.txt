Title: 581076 – dev-python/numba-0.25: *** Error in `/usr/bin/python2.7': free(): invalid pointer: 0x00007f7b832da200 ***
URL: https://bugs.gentoo.org/show_bug.cgi?id=581076

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 581076
dev-python/numba-0.25: *** Error in `/usr/bin/python2.7': free(): invalid pointer: 0x00007f7b832da200 ***
Last modified: 2016-10-28 17:18:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 581076 
      - dev-python/numba-0.25: *** Error in `/usr/bin/python2.7': free(): invalid pointer: 0x00007f7b832da200 ***


Summary:
dev-python/numba-0.25: *** Error in `/usr/bin/python2.7': free(): invalid poi...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Python Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




571282



 

        Show dependency tree





 





      Reported:
    
2016-04-24 15:56 UTC by Christopher Dianthus





      Modified:
    
2016-10-28 17:18 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



ch.dianthus
mlen









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info + backtrack information

              (emerge,24.99 KB,
                text/plain)

            
2016-04-24 15:56 UTC,

            Christopher Dianthus




Details





updated emerge --info, more simple test script and backtrack info without wrapped lines

              (info.log,28.52 KB,
                text/plain)

            
2016-04-27 18:54 UTC,

            Christopher Dianthus




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Christopher Dianthus





          2016-04-24 15:56:59 UTC
        

Created attachment 431826 [details]
emerge --info + backtrack information

Hi,

I have a weird problem with the up-to date numba-0.25. It's compiled from the portage tree with 

The installation was apparently flawless. However, when I try to run scripts from the numba/examples directory, the following error appears

[...]:~/numba/examples> ./example.py 
*** Error in `/usr/bin/python2.7': free(): invalid pointer: 0x00007f1c74af4200 ***
[...]

[...]:~/numba/examples>python2.7 ./example.py 
*** Error in `python2.7': free(): invalid pointer: 0x00007ffa7730a200 ***
[...]

My machine is AMD Phenom II based. I have attached the emerge --info, as well as the rest of error information dumped.

numba portage

# required by numba (argument)
dev-python/numba ~amd64
# required by dev-python/llvmlite-0.10.0::gentoo
# required by dev-python/numba-0.25.0::gentoo
# required by numba (argument)
sys-devel/llvm ~amd64
# required by dev-python/numba-0.25.0::gentoo
# required by numba (argument)
dev-python/llvmlite ~amd64

I installed numba from portage, since none of PyPy or a direct install from the github tree does not work with the up-to date package. I have checked these two methods under OpenSuse 42.1, still any progress.

Many thanks for your interest and help.

Dianthus




Comment 1


Alex Xu (Hello71)





          2016-04-27 14:39:06 UTC
        

why is the backtrace hard wrapped?




Comment 2


Christopher Dianthus





          2016-04-27 18:54:40 UTC
        

Created attachment 432316 [details]
updated emerge --info, more simple test script and backtrack info without wrapped lines

A new test data after recompiling gcc to 4.9.3 and the following packages:

sys-devel/llvm-3.7.1-r1:0/3.7.1
dev-python/llvmlite-0.10.0:0
dev-lang/python-2.7.10-r1:2.7
dev-python/numba-0.25.0:0

Yet the same weird error occurs...




Comment 3


Christopher Dianthus





          2016-04-27 19:00:58 UTC
        

(In reply to Alex Xu (Hello71) from comment #1)
> why is the backtrace hard wrapped?

Sorry, it's my fault. I updated the file and data.

The same type of error occurs in my second machine 

[X]:~>emerge --info
Portage 2.2.26 (python 2.7.10-final-0, default/linux/amd64/13.0/no-multilib, gcc-4.9.3, glibc-2.22-r4, 3.7.10-gentoo-r1 x86_64)
=================================================================
System uname: Linux-3.7.10-gentoo-r1-x86_64-AMD_Opteron-TM-_Processor_6272-with-gentoo-2.2
KiB Mem:    16413836 total,  10889404 free
KiB Swap:          0 total,         0 free

with a newer architecture and an ancient kernel, thought the numba-related packages are the same. I have also tested it with gcc 4.8.5.




Comment 4


Mateusz Lenik





          2016-05-11 18:14:24 UTC
        

Possibly related issue: https://bugs.gentoo.org/show_bug.cgi?id=582770




Comment 5


Pacho Ramos






          2016-10-24 12:49:24 UTC
        

are you still suffering this?




Comment 6


Christopher Dianthus





          2016-10-25 20:11:53 UTC
        

(In reply to Pacho Ramos from comment #5)
> are you still suffering this?

No, the bug has vanished, though I still do not why.

My current system setup is (I hope all system/world packages are up to date):

[X]:~/Codes/numba/examples>emerge --info
Portage 2.3.0 (python 2.7.10-final-0, default/linux/amd64/13.0/desktop, gcc-4.9.3, glibc-2.22-r4, 4.4.21-gentoo x86_64)
=================================================================
System uname: Linux-4.4.21-gentoo-x86_64-AMD_Phenom-tm-_II_X4_945_Processor-with-gentoo-2.2
Timestamp of repository gentoo: Tue, 25 Oct 2016 19:00:01 +0000
sh bash 4.3_p48
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:          4.3_p48::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.22.2::gentoo
dev-lang/python:          2.7.10-r1::gentoo, 3.2.5-r6::gentoo, 3.3.5-r1::gentoo, 3.4.3-r1::gentoo
dev-util/cmake:           3.5.2-r1::gentoo
dev-util/pkgconfig:       0.28-r2::gentoo
sys-apps/baselayout:      2.2::gentoo
sys-apps/openrc:          0.21.7::gentoo
sys-apps/sandbox:         2.10-r1::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69::gentoo
sys-devel/automake:       1.6.3-r2::gentoo, 1.7.9-r3::gentoo, 1.8.5-r5::gentoo, 1.9.6-r4::gentoo, 1.10.3::gentoo, 1.11.6-r1::gentoo, 1.12.6::gentoo, 1.13.4::gentoo, 1.14.1::gentoo, 1.15::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo
sys-devel/gcc:            4.8.5::gentoo, 4.9.3::gentoo, 5.3.0::gentoo
sys-devel/gcc-config:     1.7.3::gentoo
sys-devel/libtool:        2.4.6::gentoo
sys-devel/make:           4.1-r1::gentoo
sys-kernel/linux-headers: 4.3::gentoo (virtual/os-headers)
sys-libs/glibc:           2.22-r4::gentoo

with the numba package installed with pip2.7 and Python 2.7.10.

numba-0.27.0-py2.7

I have now the two remaining critical packages from portage 

*  dev-python/llvmlite
      Latest version available: 0.12.1
      Latest version installed: 0.12.1

*  sys-devel/llvm
      Latest version available: 3.7.1-r3
      Latest version installed: 3.7.1-r3

[X]:~/Codes/numba/examples>./bubblesort.py 
== Test Pure-Python ==
[0 1 2 3 4 5 6 7]
== Test Numba == 
[0 1 2 3 4 5 6 7]
Python 0.374043297768
Numba 0.0008385181427

[X]:~/Codes/numba/examples>./sum.py 
Result from python is -24.1440614733 in 3.33595275879 (msec)
Result from compiled is -24.1440614733 in 0.0178813934326 (msec)
Speed up is 186.56
Speedup 446.076570941 x

This is really great, thank you so much. I am sorry to answer so late, since after a few attempts  to run the codes, finally I gave up and looked for cython and alternatives. Now I see that numba may work as well. We are back in the game :)

So the bug may be closed.

Best wishes,
Dianthus









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

