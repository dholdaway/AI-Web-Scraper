Title: 530172 – sys-devel/gcc-4.8.3 - src_compile(): /bin/sh: line 1: 27287 Bus error build/genautomata .../work/gcc-4.8.3/gcc/config/i386/i386.md insn-conditions.md > tmp-automata.c
URL: https://bugs.gentoo.org/show_bug.cgi?id=530172

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 530172
sys-devel/gcc-4.8.3 - src_compile(): /bin/sh: line 1: 27287 Bus error build/genautomata .../work/gcc-4.8.3/gcc/config/i386/i386.md insn-conditions.md > tmp-automata.c
Last modified: 2014-12-13 16:35:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 530172 
      - sys-devel/gcc-4.8.3 - src_compile(): /bin/sh: line 1: 27287 Bus error build/genautomata .../work/gcc-4.8.3/gcc/config/i386/i386.md insn-conditions.md > tmp-automata.c


Summary:
sys-devel/gcc-4.8.3 - src_compile(): /bin/sh: line 1: 27287 Bus error build/g...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-11-23 13:10 UTC by mike





      Modified:
    
2014-12-13 16:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,4.26 KB,
                text/plain)

            
2014-11-23 13:10 UTC,

            mike




Details





build log

              (file_530172.txt,267.99 KB,
                text/plain)

            
2014-11-23 13:20 UTC,

            mike




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


mike





          2014-11-23 13:10:48 UTC
        

Created attachment 390104 [details]
emerge --info

Emerging sys-devel/gcc-4.8.3 (from 4.6.3) fails to compile with the following message:

/bin/sh: line 1: 27287 Bus error               build/genautomata /var/tmp/portage/sys-devel/gcc-4.8.3/wor$
Makefile:3589: recipe for target 's-automata' failed
make[3]: *** [s-automata] Error 135
make[3]: *** Waiting for unfinished jobs....
/bin/sh /var/tmp/portage/sys-devel/gcc-4.8.3/work/gcc-4.8.3/gcc/../move-if-change tmp-emit.c insn-emit.c
echo timestamp > s-emit
rm gcc.pod
make[3]: Leaving directory '/var/tmp/portage/sys-devel/gcc-4.8.3/work/build/gcc'
Makefile:4152: recipe for target 'all-stage1-gcc' failed
make[2]: *** [all-stage1-gcc] Error 2
make[2]: Leaving directory '/var/tmp/portage/sys-devel/gcc-4.8.3/work/build'
Makefile:16150: recipe for target 'stage1-bubble' failed
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory '/var/tmp/portage/sys-devel/gcc-4.8.3/work/build'
Makefile:16465: recipe for target 'bootstrap-lean' failed
make: *** [bootstrap-lean] Error 2




Comment 1


mike





          2014-11-23 13:14:10 UTC
        

Adding the build log via "Add an attachment" failed with no reason: Pushing submit didn't have any effect...




Comment 2


mike





          2014-11-23 13:20:50 UTC
        

Created attachment 390106 [details]
build log




Comment 3


Anthony Basile






          2014-11-23 22:34:56 UTC
        

Wierd.  You usually get a SIGBUS if you have unaligned memory trapped (this is off on x86 by default).  Or when a page in fails.  I'd guess that you're running out of memory, but it looks like you have enough.  Does dmesg show an OOM?  Is the error reproduceable?




Comment 4


mike





          2014-11-24 00:12:45 UTC
        

Several repeated compilings lead to the same result. Additional changes were: more swap, more hdd-memory, setting "-multilib", but same result.




Comment 5


Anthony Basile






          2014-11-26 13:22:50 UTC
        

(In reply to mike from comment #4)
> Several repeated compilings lead to the same result. Additional changes
> were: more swap, more hdd-memory, setting "-multilib", but same result.

I've tried to reproduce this but cannot.  The only thing I didn't try and may try today, is to use -mno-avx.  If I've understood theose registers correctly, they extend the SIMD registers from 128 to 256 bits wide.  I can't help but suspect that this might not be causing some alignment error.

Can I understadn why you added -mn-avx?




Comment 6


mike





          2014-11-26 17:49:05 UTC
        

This configuration was used on a Thinkpad x200s which let me compile prior gcc-versions there (there have been some problems with the sandy bridge). I've switched to an HP Elitebook2530p. Since then I've left the config as it was. Perhaps I should mention that the system is installed on an USB-stick, but I see no reason why this should trigger this bug (I'm using a second drive for /var/tmp/portage and there is enough space left on the stick).




Comment 7


mike





          2014-12-13 11:36:41 UTC
        

Finally solved, Solution: switched to hardened profile "hardened/linux/x86" and recompiled gcc 4.8.3. I don't want this profile but seems to be the only way to get it working.




Comment 8


Anthony Basile






          2014-12-13 13:05:55 UTC
        

I was never able to get a handle on this one.  I wouldn't say its fixed.  We really don't know what was wrong in the first place.




Comment 9


mike





          2014-12-13 16:35:46 UTC
        

(In reply to Anthony Basile from comment #8)
> I was never able to get a handle on this one.  I wouldn't say its fixed.  We
> really don't know what was wrong in the first place.

ok alright.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

