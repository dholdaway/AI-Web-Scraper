Title: 282612 – gnome-extra/nm-applet-0.8 fails to start due to policy problem
URL: https://bugs.gentoo.org/show_bug.cgi?id=282612

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 282612
gnome-extra/nm-applet-0.8 fails to start due to policy problem
Last modified: 2010-07-07 21:28:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 282612 
      - gnome-extra/nm-applet-0.8 fails to start due to policy problem


Summary:
gnome-extra/nm-applet-0.8 fails to start due to policy problem
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Robert Piasek (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

308743

      (view as bug list)
    


Depends on:







Blocks:




321593



 

        Show dependency tree





 





      Reported:
    
2009-08-24 20:34 UTC by Matthew Turnbull





      Modified:
    
2010-07-07 21:28 UTC
      (History)
    




          CC List:
        

8 
          users
          
            (show)
          



bjt23
cbm
dagger
maciag.artur
pacho
steev
sven.koehler
tomka









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Modified ebuild that applies the patch to the policy file

              (nm-applet-0.7.1_p20090824.ebuild,1.47 KB,
                text/plain)

            
2009-09-01 11:08 UTC,

            Christian Speckner




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matthew Turnbull





          2009-08-24 20:34:29 UTC
        

When I try to start nm-applet-0.7.1_p20090824, I get this error:

(nm-applet:26994): GLib-WARNING **: GError set over the top of a previous GError or uninitialized memory.
This indicates a bug in someone's code. You must ensure an error is NULL before it's set.
The overwriting error message was: Connection ":1.28" is not allowed to own the service "org.freedesktop.NetworkManagerUserSettings" due to security policies in the configuration file

** (nm-applet:26994): WARNING **: <WARN>  request_name(): Could not acquire the NetworkManagerUserSettings service.
  Message: '`DV\u00083'

*** glibc detected *** nm-applet: free(): invalid pointer: 0x085645b0 ***


I have not made any changes to the policies that were installed. If I start it as root, then it works without problem.

Reproducible: Always




Comment 1


Robert Piasek (RETIRED)






          2009-08-25 09:20:11 UTC
        

have you etc-update'ed the policy file? Did you reload/restart dbus after installation?






Comment 2


MZ





          2009-08-25 09:36:06 UTC
        

adding into /etc/dbus-1/system.d/nm-applet.conf

<policy group="plugdev">
            <allow own="org.freedesktop.NetworkManagerUserSettings"/>
            <allow send_destination="org.freedesktop.NetworkManagerUserSettings"/>
            <allow send_interface="org.freedesktop.NetworkManagerUserSettings"/>
            <deny send_interface="org.freedesktop.NetworkManagerSetting.Secrets"/>
</policy>

this help me.




Comment 3


Matthew Turnbull





          2009-08-25 13:59:23 UTC
        

copying the at_console policy group as a plugdev group worked.

I think the problem is that nm-applet-0.7.1_p20090824 doesn't include any of the patches that the previous 0.7.1 ebuilds did. Those patches included changes to the policy files that added the plugdev policy group.




Comment 4


Sven





          2009-08-31 18:57:02 UTC
        

(In reply to comment #3)
> copying the at_console policy group as a plugdev group worked.
> 
> I think the problem is that nm-applet-0.7.1_p20090824 doesn't include any of
> the patches that the previous 0.7.1 ebuilds did. Those patches included changes
> to the policy files that added the plugdev policy group.

Which file do I have to change?






Comment 5


Christian Speckner





          2009-09-01 11:08:22 UTC
        

Created attachment 202859 [details]
Modified ebuild that applies the patch to the policy file

I can confirm this bug as well as the solution. I've attached a modified ebuild that applies the existing patch to the policy file; with this, nm-applet works fine for me.




Comment 6


Sven





          2009-09-01 11:44:15 UTC
        

(In reply to comment #5)
> Created an attachment (id=202859) [edit]
> Modified ebuild that applies the patch to the policy file
> 
> I can confirm this bug as well as the solution. I've attached a modified ebuild
> that applies the existing patch to the policy file; with this, nm-applet works
> fine for me.

That fixed the problem for me.





Comment 7


Stijn Tintel





          2009-09-02 19:42:13 UTC
        

(In reply to comment #6)
> (In reply to comment #5)
> > Created an attachment (id=202859) [edit]
> > Modified ebuild that applies the patch to the policy file
> > 
> > I can confirm this bug as well as the solution. I've attached a modified ebuild
> > that applies the existing patch to the policy file; with this, nm-applet works
> > fine for me.
> 
> That fixed the problem for me.
> 

+1




Comment 8


Sérgio Durigan Júnior





          2009-09-10 21:45:10 UTC
        

(In reply to comment #7)
> (In reply to comment #6)
> > (In reply to comment #5)
> > > Created an attachment (id=202859) [edit]
> > > Modified ebuild that applies the patch to the policy file
> > > 
> > > I can confirm this bug as well as the solution. I've attached a modified ebuild
> > > that applies the existing patch to the policy file; with this, nm-applet works
> > > fine for me.
> > 
> > That fixed the problem for me.
> > 
> 
> +1
> 

+1




Comment 9


Robert Piasek (RETIRED)






          2009-09-12 20:25:38 UTC
        

It's fixed now. Thanks for reporting!





Comment 10


Pacho Ramos






          2010-03-23 20:36:44 UTC
        

*** Bug 308743 has been marked as a duplicate of this bug. ***




Comment 11


Pacho Ramos






          2010-03-23 20:37:22 UTC
        

(In reply to comment #10)
> *** Bug 308743 has been marked as a duplicate of this bug. ***
> 

Seems that the problem have reappeared for some people with 0.8




Comment 12


Brian Tarricone





          2010-04-08 07:19:05 UTC
        

Yes, I'm seeing it here with 0.8 as well.




Comment 13


Matthias Krebs





          2010-05-26 14:42:46 UTC
        

nm-applet depends on a running consolekit-session (ck-launch-session). without it i see the same error.




Comment 14


Thomas Kahle (RETIRED)






          2010-06-14 11:36:47 UTC
        

(In reply to comment #13)
> nm-applet depends on a running consolekit-session (ck-launch-session). without
> it i see the same error.

I can confirm this issue in 0.8 with a running consolekit-session and properly restarted dbus.






Comment 15


Nirbheek Chauhan (RETIRED)






          2010-07-07 21:28:14 UTC
        

This issue only occurs if you're using gdm/kdm with USE=-consolekit, or if you're using startx and don't start your DE as `ck-launch-session gnome-session` etc. A pkg_postinst message was recently added to sys-auth/polkit detailing this.

Closing WORKSFORME.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

