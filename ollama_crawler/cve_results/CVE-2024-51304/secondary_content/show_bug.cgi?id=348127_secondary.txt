Title: 348127 – app-emulation/xen-tools-4.0.1 fails start domU witch pygrub.
URL: https://bugs.gentoo.org/show_bug.cgi?id=348127

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 348127
app-emulation/xen-tools-4.0.1 fails start domU witch pygrub.
Last modified: 2011-03-26 11:41:01 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 348127 
      - app-emulation/xen-tools-4.0.1 fails start domU witch pygrub.


Summary:
app-emulation/xen-tools-4.0.1 fails start domU witch pygrub.
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Xen Devs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-12-08 09:51 UTC by Andreis Vinogradovs ( slepnoga )





      Modified:
    
2011-03-26 11:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andreis Vinogradovs ( slepnoga )





          2010-12-08 09:51:04 UTC
        

Produce error: Error: (1, 'Internal error', 'xc_dom_do_gunzip: inflate failed (rc=-5)\n')
Step to reproduce:
1) install xen
2) create centos domU (http://wiki.centos.org/HowTos/Xen/InstallingCentOSDomU)
3) start in witch command xm start <config_file>
Result: fail witch error:
Error: (1, 'Internal error', 'xc_dom_do_gunzip: inflate failed___(rc=-5)\n')_____________________________________________________________

pygrub trace:
[2010-12-08 11:42:23 18992] DEBUG (XendBootloader:113) Launching bootloader as ['/usr/bin/pygrub', '--output=/var/run/xend/boot/xenbl.24321', '-q', '/var/lib/xen/centos-dev.img'].
[2010-12-08 11:42:29 18001] DEBUG (XendDomainInfo:2845) _initDomain:shadow_memory=0x0, memory_static_max=0x40000000, memory_static_min=0x0.
[2010-12-08 11:42:30 18001] INFO (image:182) buildDomain os=linux dom=12 vcpus=1[2010-12-08 11:42:30 18001] DEBUG (image:721) domid          = 12
[2010-12-08 11:42:30 18001] DEBUG (image:722) memsize        = 1024
[2010-12-08 11:42:30 18001] DEBUG (image:723) image          = /var/run/xend/boot/boot_kernel.64dOnt
[2010-12-08 11:42:30 18001] DEBUG (image:724) store_evtchn   = 1
[2010-12-08 11:42:30 18001] DEBUG (image:725) console_evtchn = 2
[2010-12-08 11:42:30 18001] DEBUG (image:726) cmdline        = ro root=/dev/VolGroup00/LogVol00 console=xvc0
[2010-12-08 11:42:30 18001] DEBUG (image:727) ramdisk        = /var/run/xend/boot/boot_ramdisk.ffMEnd
[2010-12-08 11:42:30 18001] DEBUG (image:728) vcpus          = 1
[2010-12-08 11:42:30 18001] DEBUG (image:729) features       =
[2010-12-08 11:42:30 18001] DEBUG (image:730) flags          = 0
[2010-12-08 11:42:30 18001] DEBUG (image:731) superpages     = 0
[2010-12-08 11:42:30 18001] ERROR (XendDomainInfo:2909) XendDomainInfo.initDomain: exception occurred
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 2880, in _initDomain
    channel_details = self.image.createImage()
  File "/usr/lib64/python2.6/site-packages/xen/xend/image.py", line 165, in createImage
    return self.createDomain()
  File "/usr/lib64/python2.6/site-packages/xen/xend/image.py", line 184, in createDomain
    result = self.buildDomain()
  File "/usr/lib64/python2.6/site-packages/xen/xend/image.py", line 1069, in buildDomain
    rc = LinuxImageHandler.buildDomain(self)
  File "/usr/lib64/python2.6/site-packages/xen/xend/image.py", line 745, in buildDomain
    superpages     = self.superpages)
Error: (1, 'Internal error', 'xc_dom_do_gunzip: inflate failed (rc=-5)\n')
[2010-12-08 11:42:30 18001] ERROR (XendDomainInfo:483) VM start failed
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 469, in start
    XendTask.log_progress(31, 60, self._initDomain)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendTask.py", line 209, in log_progress
    retval = func(*args, **kwds)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 2912, in _initDomain
    raise VmError(str(exn))
VmError: (1, 'Internal error', 'xc_dom_do_gunzip: inflate failed (rc=-5)\n')
[2010-12-08 11:42:30 18001] DEBUG (XendDomainInfo:3053) XendDomainInfo.destroy:
domid=12
[2010-12-08 11:42:30 18001] DEBUG (XendDomainInfo:2411) Destroying device model
[2010-12-08 11:42:30 18001] DEBUG (XendDomainInfo:2418) Releasing devices
[2010-12-08 11:42:30 18001] ERROR (XendDomainInfo:106) Domain construction failed
Traceback (most recent call last):
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 104, in create
    vm.start()
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 469, in start
    XendTask.log_progress(31, 60, self._initDomain)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendTask.py", line 209, in log_progress
    retval = func(*args, **kwds)
  File "/usr/lib64/python2.6/site-packages/xen/xend/XendDomainInfo.py", line 2912, in _initDomain
    raise VmError(str(exn))
VmError: (1, 'Internal error', 'xc_dom_do_gunzip: inflate failed (rc=-5)\n')




Comment 1


Jeroen Roovers (RETIRED)






          2010-12-09 21:07:00 UTC
        

Please post your `emerge --info' output in a comment.




Comment 2


Andreis Vinogradovs ( slepnoga )





          2010-12-12 13:09:11 UTC
        

(In reply to comment #1)
> Please post your `emerge --info' output in a comment.
> 

slep@mini ~ $ emerge  --info
Portage 2.2.0_alpha7 (default/linux/amd64/10.0/desktop/kde, gcc-4.5.1, glibc-2.12.1-r3, 2.6.35-gentoo-r13-1.04 x86_64)
=================================================================
System uname: Linux-2.6.35-gentoo-r13-1.04-x86_64-Intel-R-_Atom-TM-_CPU_330_@_1.60GHz-with-gentoo-2.0.1
Timestamp of tree: Sat, 11 Dec 2010 08:15:01 +0000
ccache version 3.1.3 [enabled]
app-shells/bash:     4.1_p9
dev-lang/python:     2.6.6-r1, 2.7.1, 3.1.3
dev-util/ccache:     3.1.3
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 2.0.1-r1
sys-apps/openrc:     0.6.8
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.68
sys-devel/automake:  1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1, 2.21
sys-devel/gcc:       4.5.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.4-r1
sys-devel/make:      3.82
virtual/os-headers:  2.6.34 (sys-kernel/linux-headers)
Repositories: gentoo kde sunrise alexxy rion my-dev
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=native -fomit-frame-pointer -mfpmath=sse+387 -mpc80 -msse3"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -march=native -fomit-frame-pointer -mfpmath=sse+387 -mpc80 -msse3"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs buildpkg ccache distlocks fixlafiles fixpackages metadata-transfer news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync"
GENTOO_MIRRORS="http://gentoo.tups.lv/source "
LANG="ru_RU.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--sort-common -Wl,--hash-style=gnu"
LINGUAS="ru"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_COMPRESS="lzma"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/kde /var/lib/layman/sunrise /var/lib/layman/alexxy /home/slep/rion /home/slep/slepnoga/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac aalib acl acpi akonadi alsa amd64 avahi bash-completion berkdb bl bluetooth branding bzip2 cairo caps cdda cdio cdparanoia cdr cli clucene consolekit cracklib crypt cue cups cxx dbus device-mapper dga djvu dri dts dvd dvdr emboss enca encode exif fam fbcon ffmpeg firefox flac fontconfig fortran ftp gdbm ggi gif gnutls gpm gstreamer hal handbook ical iconv icu idn imagemagick imlib inotify ipv6 jbig jpeg jpeg2k kde kerberos kvm ladspa lame lcms ldap libnotify libsamplerate lm_sensors log4j lzma lzo mad mikmod mmap mmx mmxext mng modplug modules mp3 mp4 mpeg mtp mudflap multilib multislot mysql ncurses nls nptl nptlonly nsplugin ogg opengl optimized-qmake pam pango pch pcre pdf perl phonon pipe png pnm policykit ppds pppd python qt3support qt4 radio raster readline rhelpatch rle samba sasl sdl semantic-desktop session sftp skype slp sms sndfile spell spice sql sqlite sse sse2 sse3 ssl ssse3 startup-notification strigi suexec svg symlink sysfs syslog taglib tcpd theora threads tiff truetype unicode usb vaapi vhosts vim-syntax vorbis wav wavpack webkit winetriks x264 xattr xcb xinetd xml xmlpatterns xorg xulrunner xv xvid xvmc zeroconf zip zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev" KERNEL="linux" LINGUAS="ru" PHP_TARGETS="php5-2" QEMU_SOFTMMU_TARGETS="x86_64" QEMU_USER_TARGETS="x86_64" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="intel" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 3


Alexey Shvetsov







          2011-03-26 11:41:01 UTC
        

Xen 4.1 in tree. Please test with it and reopen if it doesnt work









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

