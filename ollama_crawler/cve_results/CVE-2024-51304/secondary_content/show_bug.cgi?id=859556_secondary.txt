Title: 859556 – net-libs/pjproject-2.12.1-r1 fails to build with USE=ssl
URL: https://bugs.gentoo.org/show_bug.cgi?id=859556

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 859556
net-libs/pjproject-2.12.1-r1 fails to build with USE=ssl
Last modified: 2022-10-10 15:56:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 859556 
      - net-libs/pjproject-2.12.1-r1 fails to build with USE=ssl


Summary:
net-libs/pjproject-2.12.1-r1 fails to build with USE=ssl
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Jaco Kroon








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-07-20 14:44 UTC by Attila Tóth





      Modified:
    
2022-10-10 15:56 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



proxy-maint
rentorbuy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Attila Tóth





          2022-07-20 14:44:20 UTC
        

output/pjlib-test-x86_64-pc-linux-gnu/main.o  output/pjlib-test-x86_64-pc-linux-gnu/activesock.o  output/pjlib-test-x86_64-pc-linux-gnu/atomic.o  output/pjlib-test-x86_64-pc-linux-gnu/echo_clt.o  output/pjlib-test-x86_64-pc-linux-gnu/errno.o  output/pjlib-test-x86_64-pc-linux-gnu/exception.o  output/pjlib-test-x86_64-pc-linux-gnu/fifobuf.o  output/pjlib-test-x86_64-pc-linux-gnu/file.o  output/pjlib-test-x86_64-pc-linux-gnu/hash_test.o  output/pjlib-test-x86_64-pc-linux-gnu/ioq_perf.o  output/pjlib-test-x86_64-pc-linux-gnu/ioq_udp.o  output/pjlib-test-x86_64-pc-linux-gnu/ioq_unreg.o  output/pjlib-test-x86_64-pc-linux-gnu/ioq_tcp.o  output/pjlib-test-x86_64-pc-linux-gnu/list.o  output/pjlib-test-x86_64-pc-linux-gnu/mutex.o  output/pjlib-test-x86_64-pc-linux-gnu/os.o  output/pjlib-test-x86_64-pc-linux-gnu/pool.o  output/pjlib-test-x86_64-pc-linux-gnu/pool_perf.o  output/pjlib-test-x86_64-pc-linux-gnu/rand.o  output/pjlib-test-x86_64-pc-linux-gnu/rbtree.o  output/pjlib-test-x86_64-pc-linux-gnu/select.o  output/pjlib-test-x86_64-pc-linux-gnu/sleep.o  output/pjlib-test-x86_64-pc-linux-gnu/sock.o  output/pjlib-test-x86_64-pc-linux-gnu/sock_perf.o  output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o  output/pjlib-test-x86_64-pc-linux-gnu/string.o  output/pjlib-test-x86_64-pc-linux-gnu/test.o  output/pjlib-test-x86_64-pc-linux-gnu/thread.o  output/pjlib-test-x86_64-pc-linux-gnu/timer.o  output/pjlib-test-x86_64-pc-linux-gnu/timestamp.o  output/pjlib-test-x86_64-pc-linux-gnu/udp_echo_srv_sync.o  output/pjlib-test-x86_64-pc-linux-gnu/udp_echo_srv_ioqueue.o  output/pjlib-test-x86_64-pc-linux-gnu/util.o -lpj  -Wl,-O1 -Wl,--as-needed -lbcg729 -lopus -lssl -lcrypto -lvpx -luuid -lm -lrt -lpthread  -lasound -L/usr/lib64 -lSDL2  -lavdevice -lavformat -lavcodec -lswscale -lavutil  -lv4l2 -lopencore-amrnb -lopencore-amrwb -lvo-amrwbenc   -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjlib/lib -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjlib-util/lib -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjnath/lib -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjmedia/lib -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjsip/lib -L/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/third_party/lib -L/usr/lib64 -lSDL2 -lavdevice -lavformat -lavcodec -lswscale -lavutil  -lv4l2   -lvpx -L/usr/lib64 -lSDL2 -lavdevice -lavformat -lavcodec -lswscale -lavutil  -lv4l2   -lvpx -Wl,-O1 -Wl,--as-needed -Wl,-O1 -Wl,--as-needed
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `get_cipher_list':
ssl_sock.c:(.text+0x3a): undefined reference to `pj_ssl_cipher_get_availables'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x87): undefined reference to `pj_ssl_cipher_name'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `ssl_on_data_sent':
ssl_sock.c:(.text+0x161): undefined reference to `pj_ssl_sock_get_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1d5): undefined reference to `pj_ssl_sock_send'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x22e): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `ssl_on_data_read':
ssl_sock.c:(.text+0x2b3): undefined reference to `pj_ssl_sock_get_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x2e8): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x3fe): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x46d): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x4cb): undefined reference to `pj_ssl_sock_send'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `dump_ssl_info.part.0':
ssl_sock.c:(.text+0x81b): undefined reference to `pj_ssl_cert_info_dump'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `dump_ssl_info':
ssl_sock.c:(.text+0x93e): undefined reference to `pj_ssl_cipher_name'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `ssl_on_connect_complete':
ssl_sock.c:(.text+0x9db): undefined reference to `pj_ssl_sock_get_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x9f7): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xa7b): undefined reference to `pj_ssl_sock_start_read2'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xae3): undefined reference to `pj_ssl_sock_send'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xb26): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `echo_test':
ssl_sock.c:(.text+0xcc2): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xe82): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xf1a): undefined reference to `pj_ssl_cert_load_from_files'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xf37): undefined reference to `pj_ssl_sock_set_certificate'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xf61): undefined reference to `pj_ssl_sock_start_accept'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0xf7e): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x10a3): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1103): undefined reference to `pj_ssl_cert_load_from_files'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1120): undefined reference to `pj_ssl_sock_set_certificate'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x114f): undefined reference to `pj_ssl_sock_start_connect'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1269): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `ssl_on_accept_complete':
ssl_sock.c:(.text+0x12de): undefined reference to `pj_ssl_sock_get_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x12f2): undefined reference to `pj_ssl_sock_get_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x135c): undefined reference to `pj_ssl_sock_set_user_data'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1367): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x13c7): undefined reference to `pj_ssl_sock_start_read2'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x142d): undefined reference to `pj_ssl_sock_send'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1481): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `perf_test.constprop.0':
ssl_sock.c:(.text+0x15a9): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x16ab): undefined reference to `pj_ssl_cert_load_from_files'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x17bb): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x17d8): undefined reference to `pj_ssl_sock_set_certificate'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x17fd): undefined reference to `pj_ssl_sock_start_accept'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1822): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x19c9): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x19f2): undefined reference to `pj_ssl_sock_start_connect'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1a21): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1bcb): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x1c1a): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `server_non_ssl.constprop.0':
ssl_sock.c:(.text+0x2098): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x20ef): undefined reference to `pj_ssl_sock_start_connect'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x2171): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `client_non_ssl.constprop.0':
ssl_sock.c:(.text+0x22b5): undefined reference to `pj_ssl_sock_close'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x23c4): undefined reference to `pj_ssl_cert_load_from_files'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x247d): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x249a): undefined reference to `pj_ssl_sock_set_certificate'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x24f5): undefined reference to `pj_ssl_sock_start_accept'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x2512): undefined reference to `pj_ssl_sock_get_info'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: output/pjlib-test-x86_64-pc-linux-gnu/ssl_sock.o: in function `https_client_test.constprop.0.isra.0':
ssl_sock.c:(.text+0x289a): undefined reference to `pj_ssl_sock_create'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x291b): undefined reference to `pj_ssl_sock_start_connect'
/usr/lib/gcc/x86_64-pc-linux-gnu/11.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: ssl_sock.c:(.text+0x29e1): undefined reference to `pj_ssl_sock_close'
collect2: error: ld returned 1 exit status
make[2]: *** [/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/build/rules.mak:125: ../bin/pjlib-test-x86_64-pc-linux-gnu] Error 1
make[2]: Leaving directory '/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjlib/build'
make[1]: *** [Makefile:113: pjlib-test-x86_64-pc-linux-gnu] Error 2
make[1]: Leaving directory '/var/tmp/portage/net-libs/pjproject-2.12.1-r1/work/pjproject-2.12.1/pjlib/build'
make: *** [Makefile:14: all] Error 1

Reproducible: Always




Comment 1


Sam James









          2022-07-20 21:30:29 UTC
        

Please do include the full build.log and emerge --info.




Comment 2


Jaco Kroon





          2022-07-21 08:08:29 UTC
        

Works for me.  Your openssl version?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

