Title: 226651 – libgfortran in sys-devel/gcc-4.3.1 failed: emake failed with profiledbootstrap
URL: https://bugs.gentoo.org/show_bug.cgi?id=226651

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 226651
libgfortran in sys-devel/gcc-4.3.1 failed: emake failed with profiledbootstrap
Last modified: 2010-01-28 09:31:14 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 226651 
      - libgfortran in sys-devel/gcc-4.3.1 failed: emake failed with profiledbootstrap


Summary:
libgfortran in sys-devel/gcc-4.3.1 failed: emake failed with profiledbootstrap
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GCC Porting

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

302440

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2008-06-14 14:07 UTC by Hongjiu Zhang





      Modified:
    
2010-01-28 09:31 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



lonicerae









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.tar.bz2

              (build.log.tar.bz2,115.15 KB,
                application/x-bzip)

            
2008-06-14 14:09 UTC,

            Hongjiu Zhang




Details





build.log.bz2

              (build.log.bz2,115.09 KB,
                application/x-bzip2)

            
2008-06-17 16:39 UTC,

            Jeroen Roovers (RETIRED)




Details





wanted selected_int_kind.inc

              (selected_int_kind.inc,82 bytes,
                text/plain)

            
2009-05-26 03:33 UTC,

            Hongjiu Zhang




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Hongjiu Zhang





          2008-06-14 14:07:45 UTC
        

Part of build.log:
libtool: compile:  /var/tmp/portage/sys-devel/gcc-4.3.1/work/build/./gcc/gfortran -B/var/tmp/portage/sys-devel/gcc-4.3.1/work/build/./gcc/ -B/usr/i686-pc-linux-gnu/bin/ -B/usr/i686-pc-linux-gnu/lib/ -isystem /usr/i686-pc-linux-gnu/include -isystem /usr/i686-pc-linux-gnu/sys-include -I . -Wall -fno-repack-arrays -fno-underscoring -fallow-leading-underscore -g -O2 -c /var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90  -fPIC -o .libs/selected_int_kind.o
/var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90:35.5:

  do i = 1, c
    1
Error: Syntax error in array constructor at (1)
/var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90:36.27:

    if (r <= int_infos (i) % range) then
                          1
Error: Syntax error in IF-expression at (1)
/var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90:37.6:

      _gfortran_selected_int_kind = int_infos (i) % kind
     1
Error: Unclassifiable statement at (1)
/var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90:39.7:

    end if
      1
Error: Expecting END FUNCTION statement at (1)
/var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/intrinsics/selected_int_kind.f90:40.5:

  end do
    1
Error: Expecting END FUNCTION statement at (1)
make[3]: *** [selected_int_kind.lo] Error 1
make[3]: Leaving directory `/var/tmp/portage/sys-devel/gcc-4.3.1/work/build/i686-pc-linux-gnu/libgfortran'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/var/tmp/portage/sys-devel/gcc-4.3.1/work/build/i686-pc-linux-gnu/libgfortran'
make[1]: *** [all-target-libgfortran] Error 2
make[1]: Leaving directory `/var/tmp/portage/sys-devel/gcc-4.3.1/work/build'
make: *** [profiledbootstrap] Error 2
  [31;01m* [0m 
  [31;01m* [0m ERROR: sys-devel/gcc-4.3.1 failed.
  [31;01m* [0m Call stack:
  [31;01m* [0m               ebuild.sh, line   49:  Called src_compile
  [31;01m* [0m             environment, line 4534:  Called toolchain_src_compile
  [31;01m* [0m             environment, line 5003:  Called gcc_src_compile
  [31;01m* [0m             environment, line 2898:  Called gcc_do_make
  [31;01m* [0m             environment, line 2728:  Called die
  [31;01m* [0m The specific snippet of code:
  [31;01m* [0m       emake LDFLAGS="${LDFLAGS}" STAGE1_CFLAGS="${STAGE1_CFLAGS}" LIBPATH="${LIBPATH}" BOOT_CFLAGS="${BOOT_CFLAGS}" ${GCC_MAKE_TARGET} || die "emake failed with ${GCC_MAKE_TARGET}";
  [31;01m* [0m  The die message:
  [31;01m* [0m   emake failed with profiledbootstrap
  [31;01m* [0m 
  [31;01m* [0m If you need support, post the topmost build error, and the call stack if relevant.
  [31;01m* [0m A complete build log is located at '/var/tmp/portage/sys-devel/gcc-4.3.1/temp/build.log'.
  [31;01m* [0m The ebuild environment file is located at '/var/tmp/portage/sys-devel/gcc-4.3.1/temp/environment'.
  [31;01m* [0m 

emerge --info:
Portage 2.1.5.5 (default/linux/x86/2008.0/desktop, gcc-4.3.1, glibc-2.8_p20080602-r0, 2.6.24-16-generic i686)
=================================================================
System uname: 2.6.24-16-generic i686 Genuine Intel(R) CPU T2050 @ 1.60GHz
Timestamp of tree: Sat, 14 Jun 2008 03:46:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r4
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.2.5
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.62
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.4
virtual/os-headers:  2.6.25-r4
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=native -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -march=native -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks parallel-fetch sandbox sfperms strict userfetch"
GENTOO_MIRRORS="ftp://gentoo.anheng.com.cn/gentoo"
LANG="zh_CN.UTF-8"
LDFLAGS=""
LINGUAS="en_US en *"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/overlay"
SYNC="rsync://rsync.au.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa bash-completion berkdb bluetooth branding bzip2 cairo cdr cjk cli cracklib crypt cups cvs dbus dri dvd dvdr dvdread eds emacs emboss encode esd evo firefox flac fortran gcj gdbm gif git gnome gpm gstreamer gtk hal iconv ipv6 isdnlog java jpeg kerberos latex ldap libnotify mad midi mikmod mmx mmxext mp3 mpeg mudflap ncurses nls nptl nptlonly nsplugin ogg opengl openmp pam pcre pdf perl png ppds pppd python quicktime readline reflection samba sdl session spell spl sse sse2 ssl startup-notification subversion svg tcpd tiff truetype unicode v4l v4l2 vorbis win32codecs wxwindows x86 xml xorg xv zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_US en *" USERLAND="GNU" VIDEO_CARDS="i810"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

I found some bugs about "emake failed with profiledbootstrap", but they happened while upgrading. I emerged gcc-4.3.1. And this happened while I was emerging -e system following "gcc upgrading". I am wondering whether this is a duplicate of those bugs. I post part of build.log here. Thanks for your help.

btw, porting in gcc-4.3.1 is really a hard work for all distributions, maybe especially Gentoo. Thanks in advance for all your works!




Comment 1


Hongjiu Zhang





          2008-06-14 14:09:47 UTC
        

Created attachment 156749 [details]
build.log.tar.bz2




Comment 2


Jeroen Roovers (RETIRED)






          2008-06-17 16:39:10 UTC
        

Created attachment 157313 [details]
build.log.bz2

bzip2 good, tar bad :)




Comment 3


zsw





          2008-06-19 04:48:31 UTC
        

same problem





Comment 4


SpanKY






          2008-06-22 15:15:35 UTC
        

google says this error comes up when the generation step failed and so the resulting file is corrupt

post the "selected_int_kind.inc" file as an attachment, and try running this command to see if you get any errors:

/bin/sh /var/tmp/portage/sys-devel/gcc-4.3.1/work/gcc-4.3.1/libgfortran/mk-sik-inc.sh '/var/tmp/portage/sys-devel/gcc-4.3.1/work/build/./gcc/gfortran -B/var/t
mp/portage/sys-devel/gcc-4.3.1/work/build/./gcc/ -B/usr/i686-pc-linux-gnu/bin/ -B/usr/i686-pc-linux-gnu/lib/ -isystem /usr/i686-pc-linux-gnu/include -isystem
/usr/i686-pc-linux-gnu/sys-include -I . -Wall -fno-repack-arrays -fno-underscoring -g -O2' > selected_int_kind.inc




Comment 5


Hongjiu Zhang





          2008-08-09 10:55:57 UTC
        

I could not reproduce this bug. I am changing resolution to INVALID. Thanks.




Comment 6


Hongjiu Zhang





          2009-05-26 03:32:12 UTC
        

Bug reproduced. Now in gcc-4.3.3-r2. Following SpanKY's direction.




Comment 7


Hongjiu Zhang





          2009-05-26 03:33:03 UTC
        

Created attachment 192461 [details]
wanted selected_int_kind.inc




Comment 8


Hongjiu Zhang





          2009-05-26 03:34:11 UTC
        

Completely same emerge --info and get the same error in the build.log (s/gcc-4.3.1/gcc-4.3.3-r2)




Comment 9


Mark Loeser (RETIRED)






          2009-07-26 19:46:24 UTC
        

I can't reproduce this, and it seems you have problems reproducing it as well.  I'd recommend running memtest to check your RAM.




Comment 10


Peter Volkov (RETIRED)






          2010-01-27 12:14:08 UTC
        

*** Bug 302440 has been marked as a duplicate of this bug. ***




Comment 11


Hongjiu Zhang





          2010-01-28 07:00:39 UTC
        

May I ask a stupid question? Can this be caused by some source files not written in UTF-8 locale? If it is so, how can I write a script to check which locale is the file written in? Maybe I can iconv it to UTF-8 and then build after that?
    In fact, this is not the only package affected by this problem. Formerly I reported a bug about dev-lang/ghc (#292217). Since my knowledge is still limited to "locale is the way of storing text characters in a file", I can only guess in this way.
    Thanks for any response.




Comment 12


SpanKY






          2010-01-28 09:31:14 UTC
        

usually it isnt encoding issues but collation issues, but anything is possible.  typically the files only contain ASCII sequences though and the 7bit encoding should be portable in all unicode sequences by design.

the problem here is that people cant seem to reproduce it reliably.  it works fine on my system when using a chinese unicode locale for example.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

