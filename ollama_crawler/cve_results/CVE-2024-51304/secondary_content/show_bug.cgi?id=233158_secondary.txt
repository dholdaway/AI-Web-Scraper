Title: 233158 – net-analyzer/wireshark fails to build without gtk
URL: https://bugs.gentoo.org/show_bug.cgi?id=233158

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 233158
net-analyzer/wireshark fails to build without gtk
Last modified: 2008-09-10 05:59:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 233158 
      - net-analyzer/wireshark fails to build without gtk


Summary:
net-analyzer/wireshark fails to build without gtk
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Netmon project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-07-28 13:32 UTC by Caleb Tennis (RETIRED)





      Modified:
    
2008-09-10 05:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Caleb Tennis (RETIRED)






          2008-07-28 13:32:06 UTC
        

emerging wireshark (USE=-gtk), I get this:

06:36:39 (1.57 MB/s) - `/data/distfiles/wireshark-1.0.2.tar.bz2' saved [13064896/13064896]

 * checking ebuild checksums ;-) ...                                                                                                                       [ ok ]
 * checking auxfile checksums ;-) ...                                                                                                                      [ ok ]
 * checking miscfile checksums ;-) ...                                                                                                                     [ ok ]
 * checking wireshark-1.0.2.tar.bz2 ;-) ...                                                                                                                [ ok ]
 * USE=-gtk will mean no gui called wireshark will be created and
 * only command line utils are available
 * Adding group 'wireshark' to your system ...
 *  - Groupid: next available
>>> Unpacking source...
>>> Unpacking wireshark-1.0.2.tar.bz2 to /var/tmp/portage/net-analyzer/wireshark-1.0.2/work
 * Applying wireshark-0.99.7-asneeded.patch ...                                                                                                            [ ok ]
 * Applying wireshark-0.99.8-as-needed.patch ...                                                                                                           [ ok ]
 * Applying wireshark-except-double-free.diff ...                                                                                                          [ ok ]
 * Running eautoreconf in '/var/tmp/portage/net-analyzer/wireshark-1.0.2/work/wireshark-1.0.2' ...
 * Running aclocal ...                                                                                                                                     [ ok ]
 * Running libtoolize --copy --force --automake ...                                                                                                        [ ok ]
 * Running aclocal ...                                                                                                                                     [ ok ]
 * Running autoconf ...                                                                                                                                    [ !! ]

 * Failed Running autoconf !
 * 
 * Include in your bugreport the contents of:
 * 
 *   /var/tmp/portage/net-analyzer/wireshark-1.0.2/temp/autoconf-8928.out

 * 
 * ERROR: net-analyzer/wireshark-1.0.2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_unpack
 *             environment, line 2914:  Called eautoreconf
 *             environment, line  930:  Called eautoconf
 *             environment, line  873:  Called autotools_run_tool 'src_unpack'
 *             environment, line  403:  Called die
 * The specific snippet of code:
 *           die "Failed Running $1 !";
 *  The die message:
 *   Failed Running autoconf !
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/net-analyzer/wireshark-1.0.2/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-analyzer/wireshark-1.0.2/temp/environment'.
 * 


Reading that error file, it has this in it:

configure.in:558: error: possibly undefined macro: AM_PATH_GTK_2_0
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
configure.in:561: error: possibly undefined macro: AM_PATH_GTK




Comment 1


Cédric Krier






          2008-08-03 16:22:26 UTC
        

Fix in cvs




Comment 2


Caleb Tennis (RETIRED)






          2008-08-07 11:25:08 UTC
        

I'm still getting the same error when emerging wireshark with this patch

>>> Emerging (1 of 1) net-analyzer/wireshark-1.0.2 to /
 * wireshark-1.0.2.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                         [ ok ]
 * gtk-2.0-for-wireshark.m4.bz2 RMD160 SHA1 SHA256 size ;-) ...                                    [ ok ]
 * checking ebuild checksums ;-) ...                                                               [ ok ]
 * checking auxfile checksums ;-) ...                                                              [ ok ]
 * checking miscfile checksums ;-) ...                                                             [ ok ]
 * checking wireshark-1.0.2.tar.bz2 ;-) ...                                                        [ ok ]
 * checking gtk-2.0-for-wireshark.m4.bz2 ;-) ...                                                   [ ok ]
 * USE=-gtk will mean no gui called wireshark will be created and
 * only command line utils are available
>>> Unpacking source...
>>> Unpacking wireshark-1.0.2.tar.bz2 to /var/tmp/portage/net-analyzer/wireshark-1.0.2/work
>>> Unpacking gtk-2.0-for-wireshark.m4.bz2 to /var/tmp/portage/net-analyzer/wireshark-1.0.2/work
 * Applying wireshark-0.99.7-asneeded.patch ...                                                    [ ok ]
 * Applying wireshark-0.99.8-as-needed.patch ...                                                   [ ok ]
 * Applying wireshark-except-double-free.diff ...                                                  [ ok ]
 * Running eautoreconf in '/var/tmp/portage/net-analyzer/wireshark-1.0.2/work/wireshark-1.0.2' ...
 * Running aclocal -I . ...                                                                        [ ok ]
 * Running libtoolize --copy --force --automake ...                                                [ ok ]
 * Running aclocal -I . ...                                                                        [ ok ]
 * Running autoconf ...                                                                            [ !! ]

 * Failed Running autoconf !
 * 
 * Include in your bugreport the contents of:
 * 
 *





Comment 3


Peter Volkov (RETIRED)






          2008-09-10 05:59:58 UTC
        

Caleb, please, check autotools.eclass version you use. It should expand ACLOAL_AMFLAGS and get correct directory for -I from there:
aclocal_opts=$(sed -n '/^ACLOCAL_AMFLAGS[[:space:]]*=/s:[^=]*=::p' ${amflags_file})aclocal_opts=$(sed -n '/^ACLOCAL_AMFLAGS[[:space:]]*=/s:[^=]*=::p' ${amflags_file})

Seems that you use *very* old eclass.

Caleb I've reverted your fix as it's not necessary. Long time ago I've  convinced upstream to include required *.m4 files and now they are in aclocal-fallback directory. So actually everything should work...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

