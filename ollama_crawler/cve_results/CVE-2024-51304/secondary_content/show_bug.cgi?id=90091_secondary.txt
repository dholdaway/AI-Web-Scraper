Title: 90091 – glibc-2.3.5 fails to build-x86-x86_64-pc-linux-gnu-linuxthreads with unresolved symbols in libpthread.so
URL: https://bugs.gentoo.org/show_bug.cgi?id=90091

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90091
glibc-2.3.5 fails to build-x86-x86_64-pc-linux-gnu-linuxthreads with unresolved symbols in libpthread.so
Last modified: 2005-12-11 09:04:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90091 
      - glibc-2.3.5 fails to build-x86-x86_64-pc-linux-gnu-linuxthreads with unresolved symbols in libpthread.so


Summary:
glibc-2.3.5 fails to build-x86-x86_64-pc-linux-gnu-linuxthreads with unresolv...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       major
      


Assignee:

AMD64 Project








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

96608

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2005-04-22 19:20 UTC by Ron Sommers





      Modified:
    
2005-12-11 09:04 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



eradicator
hvjunk









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ron Sommers





          2005-04-22 19:20:54 UTC
        

Emerging glibc 2.3.5 fails to build on my AMD64 nptl & threads system.

Reproducible: Always
Steps to Reproduce:
1.emerge -u glibc
2.fails
3.utter "oh crap"

Actual Results:  
x86_64-pc-linux-gnu-gcc -nostdlib -nostartfiles 
-o /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nscd/nscd_nischeck  
-Wl,-dynamic-linker=/lib/ld-linux.so.2 -Wl,-O1  -Wl,-z,combreloc -Wl,-z,relro 
-Wl,-z,now /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/csu/crt1.o /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/csu/crti.o 
`x86_64-pc-linux-gnu-gcc 
--print-file-name=crtbegin.o` /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nscd/nscd_nischeck.o /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nis/libnsl.so  
-Wl,-rpath-link=/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/math:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/elf:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/dlfcn:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nss:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nis:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/rt:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/resolv:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/crypt:/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/linuxthreads /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/libc.so.6 /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/libc_nonshared.a 
-lgcc -lgcc_eh  `x86_64-pc-linux-gnu-gcc 
--print-file-name=crtend.o` /var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/csu/crtn.o 
/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/linuxthreads/libpthread.so: 
undefined reference to `errno@GLIBC_PRIVATE' 
/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/linuxthreads/libpthread.so: 
undefined reference to `__libc_dl_error_tsd@GLIBC_PRIVATE' 
/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/linuxthreads/libpthread.so: 
undefined reference to `__resp@GLIBC_PRIVATE' 
/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/linuxthreads/libpthread.so: 
undefined reference to `h_errno@GLIBC_PRIVATE' 
collect2: ld returned 1 exit status 
make[2]: *** 
[/var/tmp/portage/glibc-2.3.5/work/build-x86-x86_64-pc-linux-gnu-linuxthreads/nscd/nscd] 
Error 1 
make[2]: *** Waiting for unfinished jobs.... 
make[2]: Leaving directory `/var/tmp/portage/glibc-2.3.5/work/glibc-2.3.5/nscd' 
make[1]: *** [nscd/others] Error 2 
make[1]: Leaving directory `/var/tmp/portage/glibc-2.3.5/work/glibc-2.3.5' 
make: *** [all] Error 2 
 

Expected Results:  
Built 

Portage 2.0.51.19 (default-linux/amd64/2005.0, gcc-3.4.3-20050110, 
glibc-2.3.4.20050125-r1, 2.6.11-gentoo-r6 x86_64) 
================================================================= 
System uname: 2.6.11-gentoo-r6 x86_64 AMD Athlon(tm) 64 Processor 3000+ 
Gentoo Base System version 1.6.11 
Python:              dev-lang/python-2.3.5 [2.3.5 (#1, Mar  6 2005, 11:51:56)] 
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) 
[disabled] 
ccache version 2.4 [enabled] 
dev-lang/python:     2.3.5 
sys-devel/autoconf:  2.13, 2.59-r6 
sys-devel/automake:  1.5, 1.8.5-r3, 1.4_p6, 1.6.3, 1.7.9-r1, 1.9.5 
sys-devel/binutils:  2.15.92.0.2-r8 
sys-devel/libtool:   1.5.14 
virtual/os-headers:  2.6.11 
ACCEPT_KEYWORDS="amd64 ~amd64" 
AUTOCLEAN="yes" 
CFLAGS="-O2 -march=athlon64 -pipe" 
CHOST="x86_64-pc-linux-gnu" 
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control" 
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d" 
CXXFLAGS="-O2 -march=athlon64 -pipe" 
DISTDIR="/usr/portage/distfiles" 
FEATURES="autoaddcvs autoconfig ccache distlocks strict" 
GENTOO_MIRRORS="ftp://gentoo.ccccom.com http://gentoo.netnitco.net 
ftp://130.207.108.134/pub/gentoo http://gentoo.ccccom.com 
http://gentoo.osuosl.org/ ftp://mirrors1.netvisao.pt/gentoo/ 
http://ftp.snt.utwente.nl/pub/os/linux/gentoo ftp://mirror.nutsmaas.nl/gentoo/ 
http://mirror.phy.olemiss.edu/mirror/gentoo 
http://open-systems.ufl.edu/mirrors/gentoo" 
LDFLAGS="-Wl,-O1" 
MAKEOPTS="-j2" 
PKGDIR="/usr/portage/packages" 
PORTAGE_TMPDIR="/var/tmp" 
PORTDIR="/usr/portage" 
PORTDIR_OVERLAY="/usr/local/portage" 
SYNC="rsync://rsync.gentoo.org/gentoo-portage" 
USE="S3TC X X509 Xaw3d a52 aac aalib accessibility acl acpi acpi4linux ada aim 
alsa amd64 apache2 arts artworkextra audiofile avi bash-completion berkdb 
bitmap-fonts blender-game bonobo bzip2 bzlib cairo calendar caps cddb 
cdparanoia cdr cdrom cgi chipcard chroot crypt css cups curl curlwrappers dba 
dbase dbx dedicated devfs26 dga dhcp dio dnd dts dv dvd dvdr dvdread ecc 
emoticon encode esd exif ext-png ext-zlib extensions faac faad fam fame fastcgi 
fbcon fbdev festival ffmpeg fftw fla flac flatfile flood fltk fluidsynth fmod 
font-server foomaticdb foreign-sysvinit fortran freetype ftp gb gd gd-external 
gdbm ggi gif gimp gimpprint gkrellm glade glgd glitz glut gmail gmp gnome 
gnomedb gnuplot gphoto2 gpm graphviz gs gsl gstreamer gtk gtk2 gtkhtml guile 
hal hardenedphp haskell hbci iconv icq idea ieee1394 image imagemagick imap 
imlib imlib2 immqt-bc innodb ipv6 jabber jack jack-tmpfs java joystick jp2 jpeg 
jpeg2k junit kde ladcca ladspa ldap libclamav libgd libgda libwww lm_sensors 
logitech-mouse lzo lzw lzw-tiff mad mbox mcal mha mikmod mime ming mixer mjpeg 
mmap mng monkey motif mozaccess mozcalendar mozdevelop mozilla mozp3p mozsvg 
mozxmlterm mp3 mpeg mpeg4 mpi mplayer msdav msn mupad-noscilab mysql mythtv nas 
native ncurses netbeans network nls noantlr nobcel nobeanutils nobsh 
nocommonslogging nocommonsnet nojdepend nojsch nojython nolog4j nooro noregexp 
norhino noxalan noxerces nptl nvidia nviz odbc ofx ogg openal openexr opengl 
opie oss pam pascal pcre pda pdf pdflib perl php pic plotutils png pnp postgres 
ppds private pthreads python qt quicktime quotas quotes rdesktop readline rtc 
ruby samba scanner sdl session shared sharedmem slang smartcard smime sndfile 
snmp soap sockets speex spell sql sqlite ssl subversion svg tcltk tcpd tetex 
tga theora threads thumbnail tidy tiff timidity tokenizer transcode truetype 
truetype-fonts type1-fonts unicode usb userlocales utf8 v4l v4l2 vcd vcdimager 
vim-with-x vnc vorbis webdav wifi wxwindows xanim xchatdccserver xforms xine 
xinerama xml xml-rpc xml2 xmms xosd xpm xrandr xv xvid xvmc yahoo yv12 zeroconf 
zlib zvbi" 
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LINGUAS




Comment 1


Ron Sommers





          2005-04-23 21:37:08 UTC
        

Well another bogus bug same problem I was having with wine. I had a bothced set of emul-x86 files in 
/emul/linux/x86/usr/lib/

Funny how they never were a problem before. Maybe the new emul-2.1 files missed uninstalling them. I will list them for posterity

Mcrt1.o            libbsd.a          libnsl.a
Scrt1.o            libc.a            libpthread.a
crt1.o             libc.so           libpthread.so
crti.o             libc_nonshared.a  libpthread_nonshared.a
crtn.o             libcrypt.a        libresolv.a
gcrt1.o            libdl.a           librpcsvc.a
libBrokenLocale.a  libg.a            librt.a
libGL.la           libieee.a         libutil.a
libanl.a           libm.a            libz.so
libbsd-compat.a    libmcheck.a       misc <---- folder

These files were left over from something. Cause all my emul has been updated and my gcc glibc has been rebuilt since 03/06/2005.

And I'm on 2005.0 amd64 rebuilt from the ground up.





Comment 2


Simon Stelling (RETIRED)






          2005-07-12 06:18:00 UTC
        

*** Bug 96608 has been marked as a duplicate of this bug. ***




Comment 3


Simon Stelling (RETIRED)






          2005-07-12 06:18:25 UTC
        

reopening because of bug 96608




Comment 4


Simon Stelling (RETIRED)






          2005-09-08 09:27:14 UTC
        

any idea what could cause/fix this?




Comment 5


Simon Stelling (RETIRED)






          2005-11-07 11:55:35 UTC
        

this bug is quite old, perhaps it has gone away with 2.3.5-r2?




Comment 6


Simon Stelling (RETIRED)






          2005-12-11 09:04:55 UTC
        

no answer for over a month, assuming the problem has gone









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

