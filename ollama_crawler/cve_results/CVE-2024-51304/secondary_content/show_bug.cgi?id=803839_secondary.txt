Title: 803839 – gui-wm/sway (wlroots) not compatible with media-libs/mesa-21.2.0_rc2
URL: https://bugs.gentoo.org/show_bug.cgi?id=803839

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 803839
gui-wm/sway (wlroots) not compatible with media-libs/mesa-21.2.0_rc2
Last modified: 2021-07-30 15:38:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 803839 
      - gui-wm/sway (wlroots) not compatible with media-libs/mesa-21.2.0_rc2


Summary:
gui-wm/sway (wlroots) not compatible with media-libs/mesa-21.2.0_rc2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Aaron Bauman (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2021-07-24 13:55 UTC by Cedric Sodhi





      Modified:
    
2021-07-30 15:38 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



ajak
bkohler
manday
prometheanfire
speedjack95









See Also:


803860





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Cedric Sodhi





          2021-07-24 13:55:53 UTC
        

The latest mesa-21.2.0_rc2 and any version of (at least) sway/wlroots (as far as I can tell) seem to be incompatible in some way that makes rendering extremely slow and laggy. No such issues with mesa-21.0.3.




Comment 1


Cedric Sodhi





          2021-07-25 17:42:36 UTC
        

Is the new title reflecting some sort of "who's to blame" analysis? How so? Just curious.




Comment 2


Cedric Sodhi





          2021-07-25 17:47:22 UTC
        

As by #803860 , this is an intel, too (forgot to mention that)!




Comment 3


Ben Kohler






          2021-07-26 18:30:50 UTC
        

Please share your emerge --info output.

In defense of CK, I would say it's somewhat of a convention to first list the broken user-facing package, then the version of supporting lib known to break it.  Don't take personal offense by it.




Comment 4


Joe Kappus





          2021-07-28 19:36:45 UTC
        

This is not a sway bug, but a mesa bug.

The renderer is falling back to llvmpipe (software rendering) because intel blacklisted gen8 and newer GPU's from using the i965 driver in the new mesa RC's. 

You will need to add iris to your VIDEO_CARDS and rebuild mesa and it should work as it did previously (probably better now as the iris driver is supposed to be a ton faster).




Comment 5


Cedric Sodhi





          2021-07-30 11:49:14 UTC
        

Yes, thank you, VIDEO_CARDS="intel i965 iris" does the trick, I was waiting for iris to work for a long time, now it surprised me like this! :) Feel free to close NOTABUG as far as I'm concerned?




Comment 6


Ben Kohler






          2021-07-30 15:38:27 UTC
        

I do think we need to do something to help either raise awareness about switching to iris, or help set some better defaults on mesa... but probably outside the scope of this bug report.

Glad you're up and running!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

