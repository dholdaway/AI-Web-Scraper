Title: 207560 – sys-apps/coreutils-6.10* fails to build due to unresolved clock_gettime
URL: https://bugs.gentoo.org/show_bug.cgi?id=207560

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 207560
sys-apps/coreutils-6.10* fails to build due to unresolved clock_gettime
Last modified: 2009-05-19 19:51:02 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 207560 
      - sys-apps/coreutils-6.10* fails to build due to unresolved clock_gettime


Summary:
sys-apps/coreutils-6.10* fails to build due to unresolved clock_gettime
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-01-26 15:08 UTC by J.C. Wren





      Modified:
    
2009-05-19 19:51 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



alexxy
ansla80
bugs+gentoo
ppinchis1
tpfaff









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Build log for coreutils

              (coreutils.txt,137.19 KB,
                text/plain)

            
2008-02-10 13:00 UTC,

            J.C. Wren




Details





gzip'ed config.log

              (config.log.gz,67.41 KB,
                application/octet-stream)

            
2008-03-21 12:15 UTC,

            J.C. Wren




Details





Link tac with clock_gettime library

              (coreutils-6.10-tac-clock-gettime.patch,469 bytes,
                patch)

            
2008-05-15 14:50 UTC,

            Thomas Pfaff




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


J.C. Wren





          2008-01-26 15:08:33 UTC
        

i686-pc-linux-gnu-gcc -std=gnu99  -march=c3-2 -msse -mmmx -mfpmath=sse -Os -pipe -fomit-frame-pointer  -Wl,--as-needed -o tail tail.o ../lib/libcoreutils.a  ../lib/libcoreutils.a
../lib/libcoreutils.a(gethrxtime.o): In function `gethrxtime':
gethrxtime.c:(.text+0xc): undefined reference to `clock_gettime'
../lib/libcoreutils.a(gettime.o): In function `gettime':
gettime.c:(.text+0xc): undefined reference to `clock_gettime'
collect2: ld returned 1 exit status
make[2]: *** [tac] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/portage/sys-apps/coreutils-6.10-r1/work/coreutils-6.10/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/var/tmp/portage/sys-apps/coreutils-6.10-r1/work/coreutils-6.10/src'
make: *** [all-recursive] Error 1


# emerge --info
Portage 2.1.4 (default-linux/x86/2007.0, gcc-4.2.2, glibc-2.7-r1, 2.6.23-gentoo-r5 i686)
=================================================================
System uname: 2.6.23-gentoo-r5 i686 VIA Nehemiah
Timestamp of tree: Sat, 26 Jan 2008 05:46:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
app-shells/bash:     3.2_p33
dev-lang/python:     2.5.1-r5
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.61-r1
sys-devel/automake:  1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.24
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86 ~x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=c3-2 -msse -mmmx -mfpmath=sse -Os -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=c3-2 -msse -mmmx -mfpmath=sse -Os -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.gtlib.cc.gatech.edu/pub/gentoo http://gentoo.mirrors.pair.com/ http://mirror.espri.arizona.edu/gentoo/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://portage.private.com/gentoo-portage"
USE="acl apache2 berkdb bitmap-fonts cle266 cli cmov cracklib crypt de dri dvd dvdread fortran fpu fuse fxsr gdbm gpm httpd iconv isdnlog midi mmx msr mtrr mudflap ncurses nls nptl nptlonly openmp pam pcre perl pge php pppd python readline reflection server session spl sse ssl tcl tcpd truetype-fonts tsc type1-fonts unichrome unicode usb v4l x86 xorg xv xvmc zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" USERLAND="GNU" VIDEO_CARDS="via"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


SpanKY






          2008-02-09 20:55:49 UTC
        

post the entire build log as an attachment




Comment 2


J.C. Wren





          2008-02-10 13:00:06 UTC
        

Created attachment 143107 [details]
Build log for coreutils

Result from 'emerge coreutils'




Comment 3


SpanKY






          2008-02-23 04:16:17 UTC
        

sorry, please also post the config.log file as an attachment




Comment 4


J.C. Wren





          2008-03-21 01:42:00 UTC
        

The config.log file is 1314Kb, too large for an attachment.  I've uploaded it to http://jcwren.com/bugzilla/config.log




Comment 5


SpanKY






          2008-03-21 05:03:16 UTC
        

so use compression




Comment 6


J.C. Wren





          2008-03-21 12:15:02 UTC
        

Created attachment 146761 [details]
gzip'ed config.log




Comment 7


J.C. Wren





          2008-04-15 23:17:49 UTC
        

sys-apps/coreutils-6.10-r2 has the same issue.




Comment 8


SpanKY






          2008-04-16 03:41:01 UTC
        

the nanosleep test is going wrong on your system




Comment 9


Paul Osmialowski





          2008-04-16 18:02:43 UTC
        

The same problem with my gentoo on sparc. I've masked this version in /etc/portage/package.mask as I see you don't have any solution for this issue.




Comment 10


peter





          2008-04-25 08:08:40 UTC
        

This bug is caused by the new posix rules of the compiler.

I managed to emerge perfectly coreutils 6.10 with the command:

   export LDFLAGS=" -lrt " && emerge coreutils

However the developers should change the code to include the -lrt switch of gcc. 




Comment 11


J.C. Wren





          2008-04-25 14:42:31 UTC
        

Thanks! That fixed it for me.  I'd like to know how you figured out the "-lrt" option.




Comment 12


peter





          2008-04-25 17:03:09 UTC
        

"undefined reference to `clock_gettime' " is typical for the -lrt switch  problems.

Google has several examples of similar cases.





Comment 13


SpanKY






          2008-04-25 22:41:19 UTC
        

if you read the configure script, you'll see that there are actual tests for clock_time and -lrt.  i already indicated where the configure script is misdetecting things on the system in question.




Comment 14


peter





          2008-04-26 02:00:51 UTC
        

I've just installed a brand new gentoo system from scratch (stage3-profile 2008-b1)...

I've emerged over 150 packages, and coreutils was the ONLY one misdetecting any gcc switches...

So obviously it is something rotten, with the configuration script...




Comment 15


SpanKY






          2008-04-26 02:14:10 UTC
        

gcc has nothing to do with it, nor any gcc switches




Comment 16


peter





          2008-04-26 02:49:56 UTC
        

Is anybody fixing this thing....or we are just trying to pass the buck and put the blame and something else????

This bug is real, it is not just imaginary. It happened to quite a few people.

Looks like all other packages haven't got -lrt problems, so why only this one has?

Wherever we like it or not, somebody has to make this package to add automatically the -lrt switch. 




Comment 17


SpanKY






          2008-04-26 03:23:57 UTC
        

either research the real issue and propose a fix, or sit there *quietly* and wait for one




Comment 18


J.C. Wren





          2008-04-26 03:29:35 UTC
        

vapier, it's a good thing your attitude isn't representative of the majority of the developers.  Otherwise, I'd think we find that Gentoo would be a far less popular distribution.




Comment 19


SpanKY






          2008-04-26 04:49:43 UTC
        

which part was unacceptable ?  if you cant contribute to a bug, then dont sit there and do nothing but complain that volunteer developers havent been fixing it for you.




Comment 20


peter





          2008-04-26 05:21:28 UTC
        

I fully agree with Wren. Some posters here have no manners, are rude and abusive.

Yes, Gentoo does not need that kind of as&&oles!!!!

Sit "quietly" and wait for his majesty???? This guy has nerves!!!

I spent countless hours to unscrew what some inept and incompetent developers screwed-up. I resolved the problem and I gave you the solution. 

All is left is for somebody to implement it!

But if all developpers are like this SpanKY character, I honestly don't need his/hers contribution.  

SpanKY really needs a good spank!





Comment 21


Peter Volkov (RETIRED)






          2008-04-26 08:14:12 UTC
        

peter, J.C. Wren, please, don't make a chat from bugzilla.

1. peter, suggested by you just indicates the place where the problem is but is not a solution. Until correct solution (in form of patch or commit) will be found this bug will not be fixed.
2. nerves does not justify emotional posts to bugzilla. Answer from vapier have nothing to do with attitude and manners - this is just another technical thing: time is limited so if we spend it on reading emotional mails with zero information which could help to fix the bug, then we do not manage to spend the same time to fix the bugs... So like vapier said, at this point if you want to help, just wait. Thank you for understanding.




Comment 22


Thomas Pfaff





          2008-05-15 14:50:31 UTC
        

Created attachment 153225 [details, diff]
Link tac with clock_gettime library

I have the same problem on an AMD Geode LX 800, my CFLAGS are
"-Os -fomit-frame-pointer -march=k6-2 -pipe".

In order to fix this i have created a patch for Makefile.am to get tac build with librt. I have build coreutils successfully with this patch on the Geode and a P4.

I can only guess why librt is sometimes needed, might be -Os related. But i can not check this at the moment, rebuilding world on the Geode takes far too long.




Comment 23


David Sperling





          2008-05-26 02:28:40 UTC
        

I'm getting this on both intel PentiumD and via c7 machines.  Both are running as diskless NFS workstations(not sure if this is related).

./lib/libcoreutils.a  ../lib/libcoreutils.a
i686-pc-linux-gnu-gcc -std=gnu99  -march=prescott -O2 -pipe -fomit-frame-pointer  -Wl,--as-needed -o tsort tsort.o ../lib/libcoreutils.a  ../lib/libcoreutils.a
i686-pc-linux-gnu-gcc -std=gnu99  -march=prescott -O2 -pipe -fomit-frame-pointer  -Wl,--as-needed -o unexpand unexpand.o ../lib/libcoreutils.a  ../lib/libcoreutils.a
i686-pc-linux-gnu-gcc -std=gnu99  -march=prescott -O2 -pipe -fomit-frame-pointer  -Wl,--as-needed -o uniq uniq.o ../lib/libcoreutils.a  ../lib/libcoreutils.a
../lib/libcoreutils.a(gethrxtime.o): In function `gethrxtime':
gethrxtime.c:(.text+0x3a): undefined reference to `clock_gettime'
../lib/libcoreutils.a(gettime.o): In function `gettime':
gettime.c:(.text+0x36): undefined reference to `clock_gettime'
collect2: ld returned 1 exit status
i686-pc-linux-gnu-gcc -std=gnu99  -march=prescott -O2 -pipe -fomit-frame-pointer  -Wl,--as-needed -o wc wc.o ../lib/libcoreutils.a  ../lib/libcoreutils.a
make[2]: *** [tac] Error 1
make[2]: *** Waiting for unfinished jobs....
make[2]: Leaving directory `/var/tmp/portage/sys-apps/coreutils-6.10-r2/work/coreutils-6.10/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/var/tmp/portage/sys-apps/coreutils-6.10-r2/work/coreutils-6.10/src'
make: *** [all-recursive] Error 1
 *
 * ERROR: sys-apps/coreutils-6.10-r2 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2839:  Called die
 * The specific snippet of code:
 *       emake || die "emake"
 *  The die message:
 *   emake
 *



mammoth david #  emerge --info
Portage 2.1.4.4 (hardened/x86/2.6, gcc-3.4.6, glibc-2.6.1-r0, 2.6.24-gentoo-r4 i686)
=================================================================
System uname: 2.6.24-gentoo-r4 i686 Intel(R) Pentium(R) D CPU 3.20GHz
Timestamp of tree: Sun, 25 May 2008 17:03:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/qmail/alias /var/qmail/control /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=prescott -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
LINGUAS="ja en"
MAKEOPTS="-j7"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://possum.hakodateit.com/gentoo-portage"
USE="anthy berkdb cjk cracklib crypt hal hardened immqt-bc kde midi nls nptl nptlonly pam pic qt3 qt3support qt4 readline ssl tcpd unicode urandom x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="alias auth_basic authn_file authz_host cgi dir log_config mime authz_user authz_groupfile include" ELIBC="glibc" INPUT_DEVICES="mouse keyboard" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ja en" USERLAND="GNU" VIDEO_CARDS="v4l vesa vga fbdev i810"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY



raccoon david # emerge --info
Portage 2.1.4.4 (hardened/x86/2.6, gcc-3.4.6, glibc-2.6.1-r0, 2.6.23-gentoo-r6 i686)
=================================================================
System uname: 2.6.23-gentoo-r6 i686 VIA Esther processor 1500MHz
Timestamp of tree: Sat, 24 May 2008 17:00:01 +0000
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=i686 -mmmx -msse -msse2 -msse3 -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=i686 -mmmx -msse -msse2 -msse3 -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.channelx.biz/ http://ftp.iij.ad.jp/pub/linux/gentoo/ ftp://ftp.jaist.ac.jp/pub/Linux/Gentoo/ http://gentoo.gg3.net/ http://ftp.jaist.ac.jp/pub/Linux/Gentoo/"
LINGUAS="ja en"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://possum.hakodateit.com/gentoo-portage"
USE="X alsa apache2 berkdb cracklib crypt dbus dri hal hardened midi mmx nls nptl nptlonly pam pic readline sse ssl startup-notification tcpd unicode urandom x86 xorg xscreensaver zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="alias auth_basic authn_file authz_host cgi dir log_config mime authz_user authz_groupfile include rewrite" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ja en" USERLAND="GNU" VIDEO_CARDS="via"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 24


peter





          2008-05-26 05:29:37 UTC
        

Mine was an NFS diskless station also.

I didn't think this bug might be related to NFS...but maybe it is.




Comment 25


Thomas Pfaff





          2008-05-26 09:24:34 UTC
        

Same here : root file system is NFS mounted

Therefore i do think that this is NFS related, otherwise it would happen more frequently.

For the sake of completeness my emerge --info

Portage 2.1.4.4 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.24.7 i586)
=================================================================
System uname: 2.6.24.7 i586 Geode(TM) Integrated Processor by AMD PCS
Timestamp of tree: Mon, 26 May 2008 01:45:01 +0000
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.61-r1
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i586-pc-linux-gnu"
CFLAGS="-Os -fomit-frame-pointer -march=k6-2 -pipe"
CHOST="i586-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-Os -fomit-frame-pointer -march=k6-2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.ISO-8859-1"
LINGUAS="en"
MAKEOPTS="-j1"
PKGDIR="/usr/portage-binpackages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/src/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acpi berkdb cairo cdr cli cracklib crypt dvd dvdr dvdread eds emboss encode esd evo fbcon firefox gdbm gif gpm iconv isdnlog java jpeg lcms logrotate mad midi mikmod mmx mp3 ncurses nptl nptlonly ogg openmp oss pam pcre pdf perl png pppd python qt3 qt3support quicktime readline reflection session spell spl ssl svg tcpd tiff truetype unicode usb userlocales vorbis win32codecs x86 xinetd xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard ps2mouse mouse void" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="vga fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS





Comment 26


J.C. Wren





          2008-05-26 10:57:29 UTC
        

Same here, NFS mounted filesystems, booted via TFTP.




Comment 27


Alexey Shvetsov







          2008-05-29 18:45:38 UTC
        

(In reply to comment #26)
> Same here, NFS mounted filesystems, booted via TFTP.
> 
I cant reproduce this bug on arm with nfs mounted root





Comment 28


Stefan Behte (RETIRED)







          2008-06-01 17:06:29 UTC
        

export LDFLAGS=" -lrt " && emerge '=sys-apps/coreutils-6.10-r2'
works here, too.
I'm also on NFS. The system is dualboot PXE/HDD with the same Gentoo config on both (USE-FLags, CFLAGS etc.) and I only seldom update the PXE one, I did not stumble upon this error when updating the HDD boot (I frequently update that one).





Comment 29


Thomas Pfaff





          2008-06-03 15:13:57 UTC
        

I recently tried to build coreutils 6.11 on my NFS mounted machine and succeeded.
I checked the Makefile and noticed that tac is linked with $(LIB_CLOCK_GETTIME) on 6.11.

Therefore i do think that my patch for 6.10 is correct.

Anyway this problem will go away sooner or later when 6.11 is stable.





Comment 30


Daniel Gryniewicz (RETIRED)






          2009-01-30 19:10:21 UTC
        

It looks like nanosleep doesn't need -lrt, at least on recent glibc, so libs_nanosleep won't be enough, and some things (tail in my case) need LIB_CLOCK_GETTIME.  This is working in 6.11.




Comment 31


Raúl Porcel (RETIRED)






          2009-03-22 14:59:22 UTC
        

I also hit this bug, Mike, can we get the patch applied or coreutils-6.11 stable, please?

Thanks




Comment 32


Raúl Porcel (RETIRED)






          2009-03-22 15:05:58 UTC
        

Oh, and this fails on all revisions.

Whats even worse, it fails for the same reason on a NFS root and when cross-compiling, the latter is not NFS.




Comment 33


SpanKY






          2009-03-22 22:24:04 UTC
        

we dont want 6.11 stable.  7.1 should go stable.




Comment 34


Raúl Porcel (RETIRED)






          2009-04-18 17:35:46 UTC
        

This can be probably closed now that coreutils-7.1 is stable




Comment 35


Philippe Coulonges





          2009-05-19 19:51:02 UTC
        

Just for info, I run into the same error while compiling libdrm-2.4.11

The -lrt option worked fine for me.

No other package presented the problem.

And I'm not on NFS










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

