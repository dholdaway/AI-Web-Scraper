Title: 243330 – dev-python/pymsn-0.3.3 fails to compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=243330

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 243330
dev-python/pymsn-0.3.3 fails to compile
Last modified: 2008-10-25 10:11:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 243330 
      - dev-python/pymsn-0.3.3 fails to compile


Summary:
dev-python/pymsn-0.3.3 fails to compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-23 03:12 UTC by synthil





      Modified:
    
2008-10-25 10:11 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


synthil





          2008-10-23 03:12:25 UTC
        

dev-python/pymsn-0.3.3 fails to emerge under normal circumstances. A general compilation error occurs, saying it cannot find a file within /var/tmp/portage/.... For example, it will say it cannot find the file Crypto.mash. 

Unless you unmerge the packages (stated below with atoms), emerge them again and them emerge pymsn, then pymsn will fail to compile. Pymsn is essential for MSN support in the GNOME IM Client, Empathy. From what I can tell, Pymsn must be build against the below packages in /var/tmp/portage/... , regardless of whether or not they have already been installed. Once you have done this, Pymsn, and thus Empathy, can be installed normally. 

dev-python/pygobject-2.14.2
dev-python/pygtk-2.12.1-r2
dev-python/pycrypto-2.0.1-r6

Reproducible: Always

Steps to Reproduce:
1. Emerge pygtk, pygobject and pycrypto
2. Alternatively, emerge just one of pygtk, pygobject or pycrypto
3. Input the following command as root: 'rm -rf /var/tmp/portage/*' (bear in mind the contents of /var/tmp/portage are subject to _frequent_ change, as any 'ls' of /var/tmp/portage/ will tell you, hence why this command _must_ be executed to reproduce the results)
4. Emerge pymsn
Actual Results:  
Various errors due to a lack of file(s) existing in /var/tmp/... , depending on whether or not /var/tmp/portage/* had no contents. 

Expected Results:  
Well, I guess the software should build against what is already installed. What if a user who doesn't know better tries to install Empathy, with Pymsn as a dependancy of Telepathy MSN support, and realises they can't since, unknown to them, either pygtk, pygobject or pycrypto have already been installed and the contents of /var/tmp/... have been scrubbed? I've never come across this, clearly there is some sort of bug in the build script. 

I am running a custom kernel, however this was a problem using the generic gentoo-sources kernel, on a different computer. In both circumstances, I was using an AMD64/x86-64 architecture. I used python2.4 and python2.5, both produced the same error, even when revdep-rebuild and python-updater were used before a clean re-emerge of pymsn.  Emerge --info results are below:


Portage 2.1.4.5 (default/linux/amd64/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.26.6-rt11 x86_64)
=================================================================
System uname: 2.6.26.6-rt11 x86_64 Intel(R) Core(TM)2 Duo CPU T7500 @ 2.20GHz
Timestamp of tree: Wed, 22 Oct 2008 13:05:01 +0000
app-shells/bash:     3.2_p33
dev-lang/python:     2.4.4-r13, 2.5.2-r7
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1-r1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe -mno-align-stringops -maccumulate-outgoing-args -mfpmath=sse -mmmx -msse -msse2 -msse3 -m3dnow"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=nocona -O2 -pipe -mno-align-stringops -maccumulate-outgoing-args -mfpmath=sse -mmmx -msse -msse2 -msse3 -m3dnow"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache collision-protect distlocks metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://mirror.bytemark.co.uk/gentoo/ ftp://mirror.bytemark.co.uk/gentoo/ "
LDFLAGS="-Wl,-O1"
LINGUAS="en_GB en_US pl af nb_NO"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X Xaw3d a52 aac aalib acl acpi alsa amd64 ao apm audiofile berkdb bzip2 cairo cdda cli corefonts cpudetection cracklib crypt cscope css curl custom-cflags dbus dga disk-partition dri dvd dvdr encode exif fbcon ffmpeg firefox flac fluidsynth fontconfig fortran ftp gcj gd gdbm gif gimp glut gmp gnome gnutls gphoto2 gpm gs gsl gstreamer gtk gtkhtml hal hddtemp hdri iconv ieee1394 imlib ipv6 isdnlog jack javascript jbig jpeg jpeg2k ladspa lame laptop lash latex lcms libcaca lm_sensors lua lzma mad maps midi mmx mng mono mp3 mpeg msn mudflap multilib ncurses nls nptl nptlonly offensive ofx ogg openal openexr opengl openmp pam pcre pdf perl php plotutils png posix pppd python q32 qt3 qt4 quicktime raw readline reflection reiser4 reiserfs ruby sdl session smartcard smp spl sse sse2 ssl ssse3 svg sysfs tcpd theora tiff timidity truetype unicode usb vim-syntax vim-with-x vorbis wavpack wifi wxwindows x264 xattr xcb xcomposite xml xorg xpm xscreensaver xsl xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="adc65 agfa_cl20 aox barbie canon casio_qv clicksmart310 digigr8 digita dimagev dimera3500 directory enigma13 fuji gsmart300 hp215 iclick jamcam jd11 kodak_dc120 kodak_dc210 kodak_dc240 kodak_dc3200 kodak_ez200 konica konica_qm150 largan lg_gsm mars mustek panasonic_coolshot panasonic_dc1000 panasonic_dc1580 panasonic_l859 pccam300 pccam600 polaroid_pdc320 polaroid_pdc640 polaroid_pdc700 ptp2 ricoh ricoh_g3 samsung sierra sipix_blink sipix_blink2 sipix_web2 smal sonix sony_dscf1 sony_dscf55 soundvision spca50x sq905 stv0674 stv0680 sx330z template toshiba_pdrm11" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB en_US pl af nb_NO" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Mike Auty (RETIRED)






          2008-10-23 10:57:41 UTC
        

Hi synthil, I haven't been able to recreate this I'm afraid.  A completely empty /var/tmp/portage still allowed pymsn-0.3.3 to install fine.

Could you please attach the build.log file from the failed emerge attempt, so that we can see the exact error message, and figure out what's going wrong and why it's failing?

Just reopen the bug when you attach the logs, thanks...  5:)




Comment 2


synthil





          2008-10-23 12:56:16 UTC
        

(In reply to comment #1)
> Hi synthil, I haven't been able to recreate this I'm afraid.  A completely
> empty /var/tmp/portage still allowed pymsn-0.3.3 to install fine.
> 
> Could you please attach the build.log file from the failed emerge attempt, so
> that we can see the exact error message, and figure out what's going wrong and
> why it's failing?
> 
> Just reopen the bug when you attach the logs, thanks...  5:)
> 

Hi,

It looks like my steps to reproduce it failed, too. However, since this affected me on two different computers, it is safe to say that, while it can be resolved, it could still affect people at certain times. In that case, I'd advise anyone having problems emerging pymsn, to unmerge pygtk, pygobject and pycrandypto, then emerge them again, and then emerge pymsn immediately afterwards.

Cheers for reproducing it, though. I don't know whether or not to close it, though? 




Comment 3


synthil





          2008-10-23 17:41:27 UTC
        

Re-opened, please read response below. 




Comment 4


Mike Auty (RETIRED)






          2008-10-25 10:11:09 UTC
        

Hiya Synthil, since we haven't been able to recreate it, and so we haven't been able to figure out what the problem actually was, it's not ever going to be something we can fix.  If we leave the bug open, it'll stay open forever that way.  Instead, we'll mark it as WORKSFORME, and if people do a complete search of the bugs they should still find it and your solution, which may help them with their problem.  It also will allow any bug-wranglers to link back to it if they come across a similar problem.  I hope this is an acceptable resolution.  If you ever do manage to recreate the problem, do reopen this (and attach the logs if you can get them) and we'll look into it further...  5:)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

