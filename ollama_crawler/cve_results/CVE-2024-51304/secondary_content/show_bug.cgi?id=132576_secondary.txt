Title: 132576 – php with USE="-java" on console drops warning about missing java library
URL: https://bugs.gentoo.org/show_bug.cgi?id=132576

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 132576
php with USE="-java" on console drops warning about missing java library
Last modified: 2006-05-07 09:15:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 132576 
      - php with USE="-java" on console drops warning about missing java library


Summary:
php with USE="-java" on console drops warning about missing java library
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-07 08:44 UTC by Tobias Leupold





      Modified:
    
2006-05-07 09:15 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tobias Leupold





          2006-05-07 08:44:31 UTC
        

I use php-4.4.2-r2. It was compiled with the following USE flags:

/etc/portage/package.use
=dev-lang/php-4* -* cli cgi apache2 ctype expat force-cgi-redirect ftp gd iconv ipv6 memlimit mysql berkdb nls pcre pic posix session sockets ssl tokenizer truetype xml xsl zlib
dev-db/mysql latin1

When I do something like php < test.php, I get

PHP Warning:  Unknown(): Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20020429/java.so' - /usr/lib/php/extensions/no-debug-non-zts-20020429/java.so: cannot open shared object file: No such file or directory in Unknown on line 0

although I compiled php without Java support. So, I think php shouldn't look for Java libraries, should it?

Here's my energe --info:

Portage 2203-svn (default-linux/x86/2006.0, gcc-3.4.5, glibc-2.3.6-r3, 2.6.15.1 i686)
=================================================================
System uname: 2.6.15.1 i686 AMD Athlon(tm) XP 1800+
Gentoo Base System version 1.6.14
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.3.5-r2, 2.4.2
dev-python/pycrypto: [Not Present]
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://pandemonium.tiscali.de/pub/gentoo/"
LANG="de_DE@euro"
LINGUAS="de"
MAKEOPTS="-j2"
PKGDIR="/usr/Binaerpakete"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage-overlays/local"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aalib alsa apache2 apm arts audiofile avi bash-completion berkdb bitmap-fonts bzip2 cdb cdr cli crypt cups curl dri dvd dvdr eds emboss encode exif expat fam ffmpeg flac foomaticdb fortran gd gdbm gif glut gmp gpm gstreamer gtk gtk2 idn imagemagick imlib ipv6 isdnlog java jpeg kde lcms ldap libg++ libwww lirc mad mikmod mmx mmxext mng motif mp3 mpeg mysql ncurses nls nptl ogg opengl pam pcre pdflib perl php png ppds pppd python qt quicktime readline recode reflection samba scanner sdl session slang spell spl sqlite sse ssl svga tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts udev usb v4l v4l2 vorbis wmf xine xml xml2 xmms xorg xv xvid zlib linguas_de userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTAGE_RSYNC_OPTS




Comment 1


Luca Longinotti (RETIRED)






          2006-05-07 08:52:36 UTC
        

You probably emerged it with Java support once, and the configuration file that tells it to load the java extension remained in /etc, since Portage cannot delete files from /etc, as it's protected. To fix this, do:

rm -f /etc/php/*-php4/ext-active/java.ini && rm -f /etc/php/*-php4/ext-active/java-internal.ini

And the problem will go away.
Best regards, CHTEKK.




Comment 2


Tobias Leupold





          2006-05-07 09:07:13 UTC
        

It doesn't:

erhome tobias # rm -f /etc/php/*-php4/ext-active/java.ini
erhome tobias # rm -f /etc/php/*-php4/ext-active/java-internal.ini
erhome tobias # :q
exit
tobias@erhome ~ $ cd /srv/www/Testserver
tobias@erhome Testserver $ php < test.php
PHP Warning:  Unknown(): Unable to load dynamic library '/usr/lib/php/extensions/no-debug-non-zts-20020429/java.so' - /usr/lib/php/extensions/no-debug-non-zts-20020429/java.so: cannot open shared object file: No such file or directory in Unknown on line 0






Comment 3


Jakub Moc (RETIRED)






          2006-05-07 09:08:13 UTC
        

grep -Rni java.so /etc/php; remove all references in there. 




Comment 4


Tobias Leupold





          2006-05-07 09:15:19 UTC
        

This worked! Thanks a lot :-)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

