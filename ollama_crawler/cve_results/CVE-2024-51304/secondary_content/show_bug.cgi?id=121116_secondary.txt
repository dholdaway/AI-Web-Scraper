Title: 121116 – cannot mount usb flash memory unless I am root when using hal
URL: https://bugs.gentoo.org/show_bug.cgi?id=121116

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 121116
cannot mount usb flash memory unless I am root when using hal
Last modified: 2007-01-30 16:10:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 121116 
      - cannot mount usb flash memory unless I am root when using hal


Summary:
cannot mount usb flash memory unless I am root when using hal
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Project Gentopia








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-31 17:55 UTC by binarybubba





      Modified:
    
2007-01-30 16:10 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


binarybubba





          2006-01-31 17:55:23 UTC
        

When attempting to mount my usb flash memory while in gnome and using the gnome applet.  I get the following error "mount: can't find /dev/sdb1 in /etc/fstab or /etc/mtab".

This occured after my latest emerge upgrade.  In that upgrade I had to do the following things.  1:  Remove a hal program because it was blocking a newer version and 2: Recompile my kernel because some of the programs (I think it was the hal program) required a newer version kernel.

I can mount the usb flash memory as root both in command window and in gnome.

BTW I think this is the same bug attempted to be reported in 120789.



Gentoo Base System version 1.6.14
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.3.6, glibc-2.3.5-r2, 2.6.15-gentoo-r1 i686)
=================================================================
System uname: 2.6.15-gentoo-r1 i686 Pentium III (Coppermine)
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium3 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=pentium3 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr crypt cups curl eds emboss encode esd exif expat fam flac foomaticdb fortran gdbm gif glut gnome gphoto2 gpm gstreamer gtk gtk2 gtkhtml hal idn imagemagick imlib ipv6 jpeg kde lcms libg++ libwww mad mhash mikmod mng motif mozilla mp3 mpeg mysql ncurses nls ogg oggvorbis opengl oss pam pcre pdflib perl png python qt quicktime readline recode sdl spell ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis xml xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS, PORTDIR_OVERLAY




Comment 1


SpanKY






          2006-01-31 20:17:03 UTC
        

what do you have in /etc/fstab ?




Comment 2


binarybubba





          2006-01-31 20:45:47 UTC
        

fstab is pretty much following the gentoo installation instructions.

# <fs>          	<mountpoint>    <type>  	<opts>      		<dump/pass>
/dev/hda3		/boot		ext2		defaults,noatime	1 2	
/dev/hda5		/		ext3		noatime			0 1
/dev/hda6		/home		ext3		noatime			0 2
/dev/hda7		/usr		ext3		noatime			0 2
/dev/hda8		/var		ext3		noatime			0 2
/dev/hda2		none		swap		sw				0 0

/dev/cdroms/cdrom0	/mnt/cdrom	auto		noauto,user		0 0
/dev/fd0		/mnt/floppy	auto		noauto			0 0

# NOTE: The next line is critical for boot!
none			/proc		proc		defaults		0 0

none			/dev/shm	tmpfs		nodev,nosuid,noexec	0 0

/dev/hdd                /media/cdrecorder       auto    user,exec,noauto,managed 0 0
/dev/hdc                /media/cdrom            auto    user,exec,noauto,managed 0 0






Comment 3


Greg Kroah-Hartman (RETIRED)






          2006-02-02 13:59:12 UTC
        

Can you use the latest hal and kernel please?  What program did you emerge
that wanted you to downgrade hal?




Comment 4


Greg Kroah-Hartman (RETIRED)






          2006-02-02 13:59:43 UTC
        

And what version of udev are you using?




Comment 5


binarybubba





          2006-02-02 21:13:21 UTC
        

I am sorry I was confused about having to remove hal.

The versions I am currently running are:
kernel-2.6.15-gentoo-r1
hal-05.5.1-r3
udev-079-r1

I just went back through my emerge.log to try to figure out some history on this problem.

I know for sure the flash memory worked in gnome on Dec 26, but I did several upgrade world since then but I am not sure I used the flash memory until around Jan 30.

On Jan 22 I did an emerge --sync and upgraded to portage 2.0.54
Then I had a blocker and had to unmerge sys-fs/cryptsetup.
Next, in the upgrade world I upgraded to udev-079-r1.

The world upgrade died because hal-05.5.1-r3 needed a higer version kernel.
I then upgraded the kernel from 2.6.11-gentoo-r6 to 2.6.15-gentoo-r1.  Later,
I finished the  world upgrade and it installed hal-05.5.1-r3.

As I reviewed the emerge log I noticed there may be another reason I am developing this problem.  On Jan 22 one of the upgrades replaced gnomevfs-0.8.10 with gnomevfs-0.8.11. 





Comment 6


binarybubba





          2006-02-05 07:11:08 UTC
        

I "fixed" this problem today ... well I now have a system that works but I don't think it is quite "right", but it does get the job done.

I added the following two lines to my fstab

/dev/sdb1	/mnt/usb_dr1		auto	user,noauto		0 0 
/dev/sdc1	/mnt/usb_dr2		auto	user,noauto		0 0

I can now mount and unmount in gnome as a non-root user.  The only non-pretty thing is I see in the gnome window both the usb_dr1 and the actual device name even though both are linked.  Ditto for the usb_dr2.   Doesn't bother me but it ain't a real pretty solution.

Not sure if this should be marked Fixed.. so I will leave that decision to someone wiser.







Comment 7


Doug Goldstein (RETIRED)






          2006-11-12 21:50:35 UTC
        

Is your user in the "plugdev" group? I bet it's not.




Comment 8


Doug Goldstein (RETIRED)






          2007-01-30 16:10:43 UTC
        

You need to be in the plugdev group. No answer on this bug. Re-open if you are in the plugdev group and it's still bad for you.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

