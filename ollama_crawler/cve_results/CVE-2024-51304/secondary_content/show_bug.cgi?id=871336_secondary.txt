Title: 871336 – ERROR: app-portage/eix-0.36.5::gentoo_prefix failed (compile phase)
URL: https://bugs.gentoo.org/show_bug.cgi?id=871336

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 871336
ERROR: app-portage/eix-0.36.5::gentoo_prefix failed (compile phase)
Last modified: 2022-09-18 18:49:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 871336 
      - ERROR: app-portage/eix-0.36.5::gentoo_prefix failed (compile phase)


Summary:
ERROR: app-portage/eix-0.36.5::gentoo_prefix failed (compile phase)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo/Alt




Classification:

Unclassified




Component:

Prefix Support

  (show other bugs)



Hardware:

ARM64
        OS X
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Prefix








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-09-18 12:42 UTC by Askar Bektassov





      Modified:
    
2022-09-18 18:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:


871324





Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Askar Bektassov





          2022-09-18 12:42:23 UTC
        

emerge fails due to a linker error

Reproducible: Always

Steps to Reproduce:
1. emerge eix
Actual Results:  
arm64-apple-darwin21-g++ -DSYSCONFDIR=\"/Users/askarbektassov/Gentoo/etc\" -DLOCALEDIR=\"/Users/askarbektassov/Gentoo/usr/share/locale\"   -O2 -pipe  -Wl,-dead_strip_dylibs -o eix various/drop_permissions.o eixTk/compare.o eixTk/formated.o eixTk/stringutils.o eixTk/ansicolor.o eixTk/argsreader.o eixTk/parseerror.o eixTk/regexp.o eixTk/sysutils.o eixTk/filenames.o eixTk/utils.o eixTk/varsreader.o database/io.o database/io_header.o database/header.o database/header_portage.o database/io_portage.o database/package_reader.o portage/conf/portagesettings.o portage/conf/cascadingprofile.o eixTk/stringlist.o portage/mask.o portage/mask_list.o portage/depend.o portage/basicversion.o portage/eapi.o portage/extendedversion.o portage/extendedversion_bin.o portage/instversion.o portage/package.o portage/package_best.o portage/packagesets.o portage/vardbpkg.o portage/packagetree.o portage/keywords.o portage/overlay_bin.o portage/overlay.o portage/set_stability.o portage/version.o eixrc/eixrc.o eixrc/global.o eixrc/globals.o eixrc/eixrc_portage.o eixTk/outputstring.o eixTk/stringlist_output.o portage/version_output.o output/formatstring.o output/formatstring-print.o eix.o various/cli.o output/eix-proto.o output/print-proto.o output/print-xml.o search/levenshtein.o search/algorithms.o search/matchtree.o search/packagetest.o search/packagetest_default.o search/nowarn.o eixTk/ansicolor_print.o eix-diff.o eix-update.o eixTk/percentage.o eixTk/statusline.o cache/cachetable.o cache/common/assign_reader.o cache/common/ebuild_exec.o cache/common/flat_reader.o cache/common/selectors.o cache/base.o cache/eixcache/eixcache.o cache/metadata/metadata.o cache/parse/parse.o cache/sqlite/sqlite.o eixTk/md5.o masked-packages.o versionsort.o eix-header.o eix-drop-permissions.o main/main_all_tools.o cache/cache_map.o            -lintl -Wl,-framework -Wl,CoreFoundation
0  0x1004b81a0  __assert_rtn + 140
1  0x10033fa8c  mach_o::relocatable::Parser<arm64>::parse(mach_o::relocatable::ParserOptions const&) + 4536
2  0x100311d38  mach_o::relocatable::Parser<arm64>::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 148
3  0x10037a4ac  ld::tool::InputFiles::makeFile(Options::FileInfo const&, bool) + 1468
4  0x10037d360  ___ZN2ld4tool10InputFilesC2ER7Options_block_invoke + 56
5  0x19f2f01f4  _dispatch_client_callout2 + 20
6  0x19f304f8c  _dispatch_apply_invoke_and_wait + 224
7  0x19f30426c  _dispatch_apply_with_attr_f + 1152
8  0x19f30447c  dispatch_apply + 108
9  0x10037d1f4  ld::tool::InputFiles::InputFiles(Options&) + 616
10  0x1002ff6c0  main + 552
A linker snapshot was created at:
	/tmp/eix-2022-09-18-114113.ld-snapshot
ld: Assertion failed: (_file->_atomsArrayCount == computedAtomCount && "more atoms allocated than expected"), function parse, file macho_relocatable_file.cpp, line 2061.
collect2: error: ld returned 1 exit status

Expected Results:  
successful emerge




Comment 1


Askar Bektassov





          2022-09-18 13:25:38 UTC
        

The problem seems to be the recent update of command line tools for Xcode 14 (released on 12 September 2022). Downgrade to Xcode 13.4 (released in May 2022) seems to fix the issue.




Comment 2


Fabian Groffen






          2022-09-18 18:12:27 UTC
        

yeah, it seems to cause issues, how did you downgrade




Comment 3


Askar Bektassov





          2022-09-18 18:49:43 UTC
        

(In reply to Fabian Groffen from comment #2)
> yeah, it seems to cause issues, how did you downgrade

https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_for_Xcode_13.4/Command_Line_Tools_for_Xcode_13.4.dmg

To access you need developer account (free). I have a local copy, let me know if you need it.

More versions can be found here https://developer.apple.com/download/all/?q=xcode









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

