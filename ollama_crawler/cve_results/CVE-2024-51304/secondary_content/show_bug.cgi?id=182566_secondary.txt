Title: 182566 – perl-core/DB_File-1.815 does not build - issue with config.in and Berkley DB
URL: https://bugs.gentoo.org/show_bug.cgi?id=182566

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 182566
perl-core/DB_File-1.815 does not build - issue with config.in and Berkley DB
Last modified: 2009-11-04 22:30:07 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 182566 
      - perl-core/DB_File-1.815 does not build - issue with config.in and Berkley DB


Summary:
perl-core/DB_File-1.815 does not build - issue with config.in and Berkley DB
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-19 10:42 UTC by is





      Modified:
    
2009-11-04 22:30 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


is





          2007-06-19 10:42:37 UTC
        

emerge dies with the following error:

x86_64-pc-linux-gnu-gcc -c  -I/usr/local/BerkeleyDB/include -fno-strict-aliasing -pipe -Wdeclaration-after-statement -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -march=k8 -O2 -pipe -fomit-frame-pointer   -DVERSION=\"1.815\" -DXS_VERSION=\"1.815\" -fPIC "-I/usr/lib64/perl5/5.8.8/x86_64-linux/CORE"  -D_NOT_CORE  -DmDB_Prefix_t=size_t -DmDB_Hash_t=u_int32_t   version.c
distcc[19439] ERROR: compile (null) on localhost failed
version.c:30:16: error: db.h: No such file or directory
distcc[19438] ERROR: compile version.c on localhost failed
make: *** [version.o] Error 1

Looking at config.in there is obviously something wrong:
INCLUDE = /usr/local/BerkeleyDB/include
should be something like /usr/include/db4.5

Changing config.in solves the issue partly, additionally
DBNAME = -ldb-4.5 ,
or whatever the version is, has to be set.

To my understanding the ebuild should handle that.



Reproducible: Always

Steps to Reproduce:
1. emerge DB_File
2.
3.

Actual Results:  




emerge --info 
Portage 2.1.3_rc4 (default-linux/amd64/2006.1/desktop, gcc-4.1.2, glibc-2.5-r3, 2.6.20-gentoo x86_64)
=================================================================
System uname: 2.6.20-gentoo x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System release 1.12.10
Timestamp of tree: Tue, 19 Jun 2007 07:50:01 +0000
distcc 2.18.3 x86_64-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.33-r1
dev-lang/python:     2.3.6-r2, 2.4.4-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r7
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r2, 2.17
sys-devel/gcc-config: 1.3.16
sys-devel/libtool:   1.5.23b
virtual/os-headers:  2.6.21
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe "
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/php/apache1-php5/ext-active/ /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=k8 -O2 -pipe "
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distcc distlocks metadata-transfer sandbox sfperms strict unmerge-orphans userpriv usersandbox"
GENTOO_MIRRORS="http://gd.tuwien.ac.at/opsys/linux/gentoo/ http://gentoo.inode.at/ http://gd.tuwien.ac.at/opsys/linux/gentoo/ ftp://gentoo.inode.at/source/"
LANG="en_US.ISO-8859-1"
LINGUAS="de en pt es"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --filter=H_**/files/digest-*"
PORTAGE_TMPDIR="/data/var/tmp/portage"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X alsa amd64 apache2 arts berkdb bitmap-fonts cairo cdr cli cracklib crypt cups dbus dri dvd dvdr dvdread eds emboss encode esd fam firefox foomaticdb fortran gdbm gif gimp gnome gpm gstreamer gtk gtk2 hal iconv imagemagick imlib ipv6 isdnlog java jpeg libg++ mad matrox midi mikmod mp3 mpeg mudflap multislot ncurses nls nocd nptl nptlonly oggvorbis opengl openmp oss pam pcre pdf perl php png postgres ppds pppd psotgres python quicktime readline reflection sdl session spell spl ssl svg tcpd tetex tiff truetype truetype-fonts type1-fonts unicode usb userlocales vorbis x xml xorg xv zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route share shm softvol" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en pt es" USERLAND="GNU" VIDEO_CARDS="matrox"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


David Abbott (RETIRED)






          2009-11-04 22:30:07 UTC
        

Should be fixed in 1.820. Please reopen bug if 1.820 still shows the same errors.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

