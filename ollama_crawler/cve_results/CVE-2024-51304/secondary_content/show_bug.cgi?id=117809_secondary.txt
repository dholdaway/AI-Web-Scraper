Title: 117809 – popt doesnt include GNU stack ELF markings
URL: https://bugs.gentoo.org/show_bug.cgi?id=117809

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 117809
popt doesnt include GNU stack ELF markings
Last modified: 2006-01-07 19:02:41 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 117809 
      - popt doesnt include GNU stack ELF markings


Summary:
popt doesnt include GNU stack ELF markings
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-04 17:55 UTC by Alexandru Toma





      Modified:
    
2006-01-07 19:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




USE=static LDFLAGS=-v emerge rsync >& log

              (log,22.55 KB,
                text/plain)

            
2006-01-05 15:26 UTC,

            Alexandru Toma




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Alexandru Toma





          2006-01-04 17:55:09 UTC
        

QA Notice: the following files contain executable stacks
 Files with executable stacks will not work properly (or at all!)
 on some architectures/operating systems.  A bug should be filed
 at http://bugs.gentoo.org/ to make sure the file is fixed.
RWX --- --- usr/bin/rsync




Comment 1


SpanKY






          2006-01-05 06:47:17 UTC
        

you neglected to provide *any* information about your system and it works just dandy for me




Comment 2


Alexandru Toma





          2006-01-05 07:10:33 UTC
        

Portage 2.0.53 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r2, 2.6.13-gentoo-r3 i686)
=================================================================
System uname: 2.6.13-gentoo-r3 i686 AMD Athlon(tm) XP 1800+
Gentoo Base System version 1.4.16
dev-lang/python:     2.3.4-r1, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig collision-protect distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.roedu.net/pub/mirrors/gentoo.org http://gentoo.osuosl.org"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync2.ro.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aalib alsa apm audiofile avi bitmap-fonts bzip2 cdr crypt cups curl dts eds emboss encode expat fam ffmpeg flac foomaticdb fortran gd geoip gif glut gpm gstreamer gtk2 guile idn imagemagick imlib imlib2 jikes jpeg lcms libcaca libwww lua lzo mad matroska mhash mikmod mmx mmxext mng motif mp3 mpeg ncurses network nls no_wxgtk1 ogg oggvorbis openal opengl pam pcre png python quicktime readline rtc ruby sdl slang spell sse ssl tcpd tga theora tiff truetype truetype-fonts type1-fonts udev unicode usb vorbis wmf xchatdccserver xml2 xprint xv xvid zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, MAKEOPTS


As far as I can tell, rsync seems to work just fine... I never said it didn't. I just followed the instructions in the QA Notice and filed a bug report.




Comment 3


SpanKY






          2006-01-05 08:01:30 UTC
        

when i said "works" i meant "my rsync is not built with executable stacks"

run this:
# emerge '>=pax-utils-0.1.6'
# rm -r /var/tmp/portage/rsync-*
# FEATURES=keepwork emerge rsync
# scanelf -Rqe /var/tmp/portage/rsync*

and post the output here




Comment 4


Alexandru Toma





          2006-01-05 09:20:40 UTC
        

First of all, I had to ACCEPT_KEYWORDS=~x86 emerge '>=pax-utils-0.1.6' in order to emerge pax-utils-0.1.6.
The other steps were identical.

I assume you don't want the output from the emerges, so the output from the last step is:
cloud distfiles # scanelf -Rqe /var/tmp/portage/rsync*
RWX --- ---  /var/tmp/portage/rsync-2.6.0-r6/work/rsync-2.6.0/rsync




Comment 5


SpanKY






          2006-01-05 10:07:28 UTC
        

what does `emerge rsync -pv` show ?




Comment 6


Alexandru Toma





          2006-01-05 10:13:15 UTC
        

cloud portage # emerge rsync -pv

*** 'rsync' will now install the package rsync.
*** To sync the tree, please use '--sync' instead.


These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] net-misc/rsync-2.6.0-r6  -acl -build -livecd +static -xinetd 0 kB 

Total size of downloads: 0 kB

It seems it's because of the static USE flag. I don't get any QA Notice with -static




Comment 7


SpanKY






          2006-01-05 11:06:03 UTC
        

run this:
# emerge portage-utils
# scanelf -qe `qlist popt`




Comment 8


Alexandru Toma





          2006-01-05 11:16:08 UTC
        

cloud distfiles # scanelf -qe `qlist popt`

I get no result when running that.




Comment 9


SpanKY






          2006-01-05 11:29:06 UTC
        

well emerge rsync with USE=-static and see if it has exec stacks




Comment 10


Alexandru Toma





          2006-01-05 11:44:36 UTC
        

As I said in comment #6 :

"...I don't get any QA Notice with -static"

When you asked me the output of emerge rsync -pv and I saw that I had +static in there I thought it might have been the reason so I immediately tried with -static ;)




Comment 11


SpanKY






          2006-01-05 14:42:02 UTC
        

sorry, missed that

what it means is that one of the libs rsync links with is broken, not rsync itself

run `USE=static LDFLAGS=-v emerge rsync >& log` and post the log as an attachment so we can be sure what libs it links against




Comment 12


Alexandru Toma





          2006-01-05 15:26:42 UTC
        

Created attachment 76282 [details]
USE=static LDFLAGS=-v emerge rsync >& log




Comment 13


SpanKY






          2006-01-05 17:14:09 UTC
        

run this then:
cd ~
for x in popt resolv gcc gcc_eh c ; do
    mkdir $x
    cd $x
    l=`gcc -print-file-name=lib${x}.a`
    ar x ${l}
    echo ${l}
    scanelf -qeR .
    cd ..
done
scanelf -qe \
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../crt1.o \
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../crti.o \
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/crtbeginT.o \
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/crtend.o \
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../crtn.o




Comment 14


Alexandru Toma





          2006-01-06 00:55:07 UTC
        

/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../libpopt.a
!WX --- ---  ./popthelp.o
!WX --- ---  ./poptconfig.o
!WX --- ---  ./findme.o
!WX --- ---  ./popt.o
!WX --- ---  ./poptparse.o
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../libresolv.a
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/libgcc.a
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/libgcc_eh.a
/usr/lib/gcc/i686-pc-linux-gnu/3.4.4/../../../libc.a




Comment 15


SpanKY






          2006-01-06 20:51:18 UTC
        

re-emerge popt and then rsync

as you can see, your popt is broken




Comment 16


Alexandru Toma





          2006-01-07 02:58:41 UTC
        

That fixed it. Thank you for your help.

You can close this bug with any resolution you see fit.




Comment 17


SpanKY






          2006-01-07 19:02:41 UTC
        

sounds good









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

