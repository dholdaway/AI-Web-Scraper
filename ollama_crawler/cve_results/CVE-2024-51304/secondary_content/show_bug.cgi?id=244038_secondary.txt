Title: 244038 – dev-util/sel: CC variable not respected
URL: https://bugs.gentoo.org/show_bug.cgi?id=244038

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 244038
dev-util/sel: CC variable not respected
Last modified: 2011-04-20 12:48:18 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 244038 
      - dev-util/sel: CC variable not respected


Summary:
dev-util/sel: CC variable not respected
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Wolfram Schlich (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




tc-directly



 

        Show dependency tree





 





      Reported:
    
2008-10-24 19:16 UTC by Diego Elio Pettenò (RETIRED)





      Modified:
    
2011-04-20 12:48 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Patch to sel-0.08.4.ebuild to add a CC=$(tc-getCC) as suggested in comment #0

              (sel.ebuild.patch,653 bytes,
                patch)

            
2009-02-14 22:30 UTC,

            Kevin Pyle




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Diego Elio Pettenò (RETIRED)






          2008-10-24 19:16:08 UTC
        

I'm filing this bug (from a template, mind you) because the ebuild I'm reporting it against failed to build once I removed my /usr/bin/{gcc,cc,c++,c99} binaries. This means that the ebuild is relying on gcc or cc as compiler, while it should use "$(tc-getCC)" so that user choices are respected, and cross-compiling works as intended.

This usually comes down to one of these tasks:

- use emake CC="$(tc-getCC)" for building, to ovewrite make's CC variable (defaults to "cc", some upstream rewrites it);
- the above plus replacing explicit "gcc" (or similar) calls with $(CC) so that the variable is actually respected;
- tc-export CC in src_compile before eventual econf.

For C++, you'd have to replace CC with CXX everywhere above, of course.

If your package is a special case on this, please let me know.

Thanks,
Diego




Comment 1


Kevin Pyle





          2009-02-14 22:30:16 UTC
        

Created attachment 182072 [details, diff]
Patch to sel-0.08.4.ebuild to add a CC=$(tc-getCC) as suggested in comment #0

This is a minimal fix to the reported problem, by changing the make call to include CC="$(tc-getCC)".  The ebuild could do with some minor cleanup, such as using an in-place sed when rewriting the Makefile and sel.c, but those are not required to fix this issue, so I have left those as they were.

This package appears to be dead upstream, and the HOMEPAGE returns a 404.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

