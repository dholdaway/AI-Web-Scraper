Title: 148245 – media-video/dvdstyler - calls ppmtoy4m without correct parameters
URL: https://bugs.gentoo.org/show_bug.cgi?id=148245

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 148245
media-video/dvdstyler - calls ppmtoy4m without correct parameters
Last modified: 2008-04-01 05:59:25 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 148245 
      - media-video/dvdstyler - calls ppmtoy4m without correct parameters


Summary:
media-video/dvdstyler - calls ppmtoy4m without correct parameters
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Daniel Black (RETIRED)








URL:



http://home.arcor.de/chrhoffmann/Prob...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-19 14:16 UTC by E. Scaglione





      Modified:
    
2008-04-01 05:59 UTC
      (History)
    




          CC List:
        

3 
          users
          
            (show)
          



grimm26
media-video
moloh









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


E. Scaglione





          2006-09-19 14:16:31 UTC
        

using dvdstyler and mjpegtools >1.7 to create a dvd with a backgroung image or images is not possible because ppmtoy4m gives a message about some unknown headers and dvdstyler crashes thereafter. I cannot copy the message. I found on this page a solution http://home.arcor.de/chrhoffmann/Problem_DVDstyler.html
(the second proposed at the end of the page). 

in configuration->settings->core add the parameter -S 420mpeg2 to ppmtoy4m

jpegtopnm "$FILE_IN" | ppmtoy4m -n 1 -I t -L $FRAME_RATE -S 420mpeg2| mpeg2enc -f 8 -b $BITRATE -o "$FILE_OUT" $VIDEO_NORM

Without this I cannot create some dvd.
I don't know if I had the problem because I was using an old config file with a new version of the program (I installed it 4 years ago and since then updated), but maybe the ebuild should test for this problem or warn the user.

versions I am using:

[ Results for search key : dvdstyler ]
[ Applications found : 1 ]

*  media-video/dvdstyler
      Latest version available: 1.4
      Latest version installed: 1.4
      Size of files: 699 kB
      Homepage:      http://dvdstyler.sourceforge.net
      Description:   DVD filesystem Builder
      License:       GPL-2


Searching...
[ Results for search key : mjpegtools ]
[ Applications found : 1 ]

*  media-video/mjpegtools
      Latest version available: 1.8.0-r1
      Latest version installed: 1.8.0-r1
      Size of files: 1,445 kB
      Homepage:      http://mjpeg.sourceforge.net/
      Description:   Tools for MJPEG video
      License:       as-is




Comment 1


Michal Kurgan (RETIRED)






          2006-09-20 20:52:24 UTC
        

Confirmed, but i use self compiled dvdstyler-1.5_beta5...

After little research:
 * http://www.mail-archive.com/mjpeg-users@lists.sourceforge.net/msg06941.html

There is a hint about libjpeg-mmx, recompiled media-video/mjpegtools with USE="-mmx", but problem persists, after unmerge of media-libs/jpeg-mmx and next compilation of media-video/mjpegtools it works (so there is problem with ebuild that uses libjpeg-mmx even with USE="-mmx" selected). After that (and other dependencies fixes with libquicktime) dvdstyler start to work...

So i assume that problem is with libjpeg-mmx library.

PS. I tried to run commands used by dvdstyler externally and found that use of jpeg2yuv ends with Segmentation Fault.





Comment 2


Florian Manschwetus





          2006-10-09 01:40:41 UTC
        

i can confirm this segfault, same problem here, some solution or work around?, because i need to free my disk and i'm unable to create the prepared dvd's.




Comment 3


Florian Manschwetus





          2006-10-09 01:41:54 UTC
        

The exact command used here is:

jpeg2yuv -n 1 -I t -L 1 -f 25 -j '/tmp/test/menu1-0.mpg_bg.jpg' | mpeg2enc -f 8 -b 9000 -o '/tmp/test/menu1-0.mpg_bg.m2v' 




Comment 4


Matthias Schwarzott






          2006-11-20 05:04:52 UTC
        

What is the state of this bug now that jpeg-mmx is dead and buried?





Comment 5


Matthias Schwarzott






          2006-11-20 05:23:30 UTC
        

I was a bit fast. Has nothing todo with jpeg-mmx.

The parameter "-S 420mpeg2" is always needed with mjpegtools-1.8, as else the picture-format ppmtoy4m outputs and mpeg2enc wants to read differ.

From http://www.mail-archive.com/mjpeg-users%40lists.sourceforge.net/msg06336.html:

In v1.8+, ppmtoy4m produces a 4:4:4 stream by default, since this
 involves the minimal amount of processing and since its internal
 subsampling algorithm is not very good.
mpeg2enc, however, wants some form of 4:2:0 input.  

So, either something like y4mscaler needs to be used between the two
 to do good subsampling, or the "-S" option (with a suitable parameter)
 needs to be supplied to ppmtoy4m to do mediocre subsampling.





Comment 6


Daniel Black (RETIRED)






          2007-06-21 10:40:04 UTC
        

is this fixed with dvdstyler-1.5?
1.4 is on the punting path due to wxGTK-2.4 depreciation and removal (bug #145032)




Comment 7


Daniel Black (RETIRED)






          2008-04-01 05:59:25 UTC
        

assumed to work in later version. reopen if this isn't the case.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

