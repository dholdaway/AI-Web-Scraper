Title: 113461 – vnc-4.0-r1: server dies after I disconnect
URL: https://bugs.gentoo.org/show_bug.cgi?id=113461

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 113461
vnc-4.0-r1: server dies after I disconnect
Last modified: 2005-12-13 09:13:58 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 113461 
      - vnc-4.0-r1: server dies after I disconnect


Summary:
vnc-4.0-r1: server dies after I disconnect
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-11-24 05:58 UTC by Stephen Donovan





      Modified:
    
2005-12-13 09:13 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



aliz









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stephen Donovan





          2005-11-24 05:58:14 UTC
        

I use ssh to connect to my Gentoo box, the first connection after a reboot, I
launch vncserver and leave it run until the box reboots. I have the box
firewalled off so only ssh traffic reaches it. After I upgraded to vnc-4.0-r1, I
found that after I disconnect my client that the server dies. This is all that
is found in the log.

Tue Nov 22 23:13:05 2005
 VNCSConnST:  Server default pixel format depth 16 (16bpp) little-endian rgb565
 VNCSConnST:  Client pixel format depth 8 (8bpp) rgb max 3,3,3 shift 4,2,0
 VNCSConnST:  Client pixel format depth 16 (16bpp) little-endian rgb565
X connection to :1.0 broken (explicit kill or server shutdown).
X connection to :1.0 broken (explicit kill or server shutdown).
xterm:  fatal IO error 32 (Broken pipe) or KillClient on X server ":1.0" 

Moving back to vnc-3.3.7 fixed the problem

Reproducible: Always
Steps to Reproduce:
1.SSH to the box, start vncserver
2.Remotely connect and disconnect from vncserver
3.verify that vncserver is dead

Actual Results:  
The VNC server was no longer running and to restart it on display 1, I needed to
delete files from /tmp, indicating to me that the server died unexpectantly.

Expected Results:  
The vncserver should have remained running until it was either shutdown by me or
I rebooted the box.

octo ~ # emerge info
Portage 2.0.51.22-r3 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.5-r2, 2.6.1
                                                                           
2-gentoo-r9 i686)
=================================================================
System uname: 2.6.12-gentoo-r9 i686 VIA C3 Ezra
Gentoo Base System version 1.6.13
distcc 2.18.3 i586-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled
                                                                            ]
dev-lang/python:     2.3.5-r2, 2.4.2
sys-apps/sandbox:    1.2.10
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.20
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i586-pc-linux-gnu"
CFLAGS="-Os -march=i586 -fomit-frame-pointer -m3dnow"
CHOST="i586-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env
/usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config
/usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config
/var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/splash /etc/terminfo /etc/env.d"
CXXFLAGS="-Os -march=i586 -fomit-frame-pointer -m3dnow"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distcc distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org
http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr crypt cups
curl eds emboss encode esd ethereal exif expat fam foomaticdb fortran gd gdbm
gif glut gmp gnome gpm gstreamer gtk gtk2 howl imlib ipv6 jpeg lcms ldap libg++
libwww mad mhash mikmod mng motif mozilla mp3 mpeg ncurses nls ogg oggvorbis
opengl oss pam pcre pdflib perl png python quicktime readline sdl slang spell
ssl tcpd tiff truetype truetype-fonts type1-fonts udev usb vorbis xml2 xmms xv
zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS, PORTDIR_OVERLAY




Comment 1


Stephen Donovan





          2005-12-13 09:13:58 UTC
        

I recently performed a emerge -e system and emerge -e world as part of the
migration to gcc 3.4.4. I rechecked vnc 4.0-r1 and it now behaves as expected
with out the server shutting down.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

