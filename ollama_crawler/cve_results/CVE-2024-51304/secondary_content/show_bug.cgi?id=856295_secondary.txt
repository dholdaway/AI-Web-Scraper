Title: 856295 – libselinux-3.4 gives "Regex version mismatch" warning/error when running setfiles orrestorecon
URL: https://bugs.gentoo.org/show_bug.cgi?id=856295

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 856295
libselinux-3.4 gives "Regex version mismatch" warning/error when running setfiles orrestorecon
Last modified: 2022-07-04 15:45:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 856295 
      - libselinux-3.4 gives "Regex version mismatch" warning/error when running setfiles orrestorecon


Summary:
libselinux-3.4 gives "Regex version mismatch" warning/error when running setf...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

SELinux

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

SE Linux Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-07-03 18:51 UTC by rjgleits





      Modified:
    
2022-07-04 15:45 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



sam









See Also:


844982

837986





Package list:







Runtime testing required:

---























      Attachments
    




emerge --info output

              (emerge.info.20220703,6.59 KB,
                text/plain)

            
2022-07-03 18:51 UTC,

            rjgleits




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


rjgleits





          2022-07-03 18:51:32 UTC
        

Created attachment 789992 [details]
emerge --info output

Hi,

The problem mentioned in the summary appeared to be solved recently in libselinux-3.2, but with the phaseout of python3.9, upgrading to libselinux-3.4 is required. The full message is:
restorecon: Regex version mismatch, expected: 10.40 2022-04-14 actual: 10.39 2021-10-29
I conclude that the problem is there because in the rebuild to python 3.10 usage, the problem first returned after libselinux-3.4 was installed. From looking at the log files, it looks like pcre2 was an option in 3.3, and was set by default to "n". This use option was eliminated in 3.4 and by default 
"use pcre" is "y". Yes, the problem is likely in libpcre2, but I have only pcre2 10.40 installed. , and rebuilding has no effect. There must be some remnant of the previous version somewhere, but I haven't been able to find it. So I thought I should ask the experts about it.
I read the bug report 844982 and tried rebuilding libselinux. It did NOT solve the problem.  

Best Wishes,

Bob Gleitsmann




Comment 1


rjgleits





          2022-07-04 15:43:39 UTC
        

This problem was apparently somewhere in the selinux policy. I am using the git gentoo policy built as targeted. After making sure that the local copy of the git repo was up-to-date. I rebuilt the complete policy. The problem went away as soon as the targeted policy was rebuilt and installed. I can't say what made the difference, I wasn't expecting it to affect this issue. 
I'll accept this as a win and the bug can be considered closed.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

