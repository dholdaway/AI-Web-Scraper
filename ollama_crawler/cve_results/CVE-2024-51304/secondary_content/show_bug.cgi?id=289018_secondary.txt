Title: 289018 – app-text/acroread-9.1.3: look for libgtkembedmoz.so in xulrunner dir
URL: https://bugs.gentoo.org/show_bug.cgi?id=289018

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 289018
app-text/acroread-9.1.3: look for libgtkembedmoz.so in xulrunner dir
Last modified: 2012-02-01 07:53:59 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 289018 
      - app-text/acroread-9.1.3: look for libgtkembedmoz.so in xulrunner dir


Summary:
app-text/acroread-9.1.3: look for libgtkembedmoz.so in xulrunner dir
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       trivial
      


Assignee:

Printing Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-14 08:53 UTC by Martin von Gagern





      Modified:
    
2012-02-01 07:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Proposed patch

              (acroread-9.1.3.ebuild.patch,2.13 KB,
                patch)

            
2009-10-14 09:03 UTC,

            Martin von Gagern




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin von Gagern





          2009-10-14 08:53:26 UTC
        

On x86 there is this mechanism to find a suitable libgtkembedmoz.so:

  for lib in /opt/seamonkey /usr/lib/seamonkey /usr/lib/mozilla-firefox ; do
    if [[ -f ${lib}/libgtkembedmoz.so ]] ; then

I do have seamonkey installed, so it works all right for me. If I hadn't, though, I'd be in trouble, as I have no such library in /usr/lib/mozilla-firefox or any other firefox-specific directory, but instead have a version in /usr/lib/xulrunner/libgtkembedmoz.so.

I'm using the following packages:
www-client/seamonkey-1.1.18          (which provides libgtkembedmoz.so)
www-client/mozilla-firefox-3.5.3     (without libgtkembedmoz.so)
www-client/mozilla-firefox-bin-3.5.3 (without libgtkembedmoz.so)
net-libs/xulrunner-1.8.1.19          (which provides libgtkembedmoz.so)
net-libs/xulrunner-1.9.1.3           (without libgtkembedmoz.so)

So I suggest the following improvements to the acroread ebuild:
1. Search in /usr/lib/xulrunner and /opt/xulrunner (for xulrunner-bin) as well
2. Maybe report if no libgtkembedmoz.so was found at all, as this might indicate trouble

I don't know about amd64, which of these versions are 32bit and which are 64bit, but I would assume that if the RDEPEND is correct, then /opt/xulrunner for xulrunner-bin should be searched for the amd64 case as well.




Comment 1


Martin von Gagern





          2009-10-14 09:03:15 UTC
        

Created attachment 207062 [details, diff]
Proposed patch

Something along these lines. I've kept the library finding code in the src_install function and not introduced a separate function.




Comment 2


Andreas K. Hüttel







          2012-01-31 22:02:08 UTC
        

Is this still relevant?




Comment 3


Martin von Gagern





          2012-02-01 07:53:59 UTC
        

(In reply to comment #2)
> Is this still relevant?

I guess not, otherwise someone else would have encountered this by now, as there are many people without seamonkey. My guess is that the build will use the gtkmozembed pkgconfig file if that is available, and only falls back on this environment variable if not. So maybe this never really was a problem. Sorry.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

