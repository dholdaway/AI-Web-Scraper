Title: 163153 – kwin crashes when certain images displayed with imagemagick
URL: https://bugs.gentoo.org/show_bug.cgi?id=163153

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 163153
kwin crashes when certain images displayed with imagemagick
Last modified: 2009-02-20 23:41:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 163153 
      - kwin crashes when certain images displayed with imagemagick


Summary:
kwin crashes when certain images displayed with imagemagick
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-01-22 01:46 UTC by Mark Purtill





      Modified:
    
2009-02-20 23:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Image causing the crash

              (blue.png,407 bytes,
                text/plain)

            
2007-01-22 01:48 UTC,

            Mark Purtill




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mark Purtill





          2007-01-22 01:46:47 UTC
        

Whenever I display certain images using display (from imagemagick-6.3.0.5), kwin (from kwin-3.5.5-r2) crashes.  I'll attach a sample image.

Here is the traceback:

Using host libthread_db library "/lib/libthread_db.so.1".
[Thread debugging using libthread_db enabled]
[New Thread -1234655568 (LWP 8154)]
[KCrash handler]
#9  XSetTile (dpy=0x0, gc=0x0, tile=18874402) at SetTile.c:40
#10 0xb6df550a in QPainter::drawTiledPixmap (this=0xbfaeccf8, x=0, y=0, w=0, 
    h=22, pixmap=@0x809dcb8, sx=0, sy=0) at qpainter_x11.cpp:2858
#11 0xb758b30b in Default::KDEDefaultClient::paintEvent (this=0x8235a98)
    at kdedefault.cpp:997
#12 0xb6434190 in KCommonDecoration::eventFilter (this=0x8235a98, 
    o=0x823a528, e=0xbfaed460) at kcommondecoration.cpp:830
#13 0xb6eb5613 in QObject::activate_filters (this=0x823a528, e=0xbfaed460)
    at qobject.cpp:903
#14 0xb6eb56b4 in QObject::event (this=0x823a528, e=0xbfaed460)
    at qobject.cpp:735
#15 0xb6ef6d96 in QWidget::event (this=0x823a528, e=0xbfaed460)
    at qwidget.cpp:4659
#16 0xb6e418eb in QApplication::internalNotify (this=0xbfaed9c0, 
    receiver=0x823a528, e=0xbfaed460) at qapplication.cpp:2635
#17 0xb6e444ba in QApplication::notify (this=0xbfaed9c0, receiver=0x823a528, 
    e=0xbfaed460) at qapplication.cpp:2523
#18 0xb76d836b in KApplication::notify (this=0xbfaed9c0, receiver=0x823a528, 
    event=0xbfaed460) at kapplication.cpp:550
#19 0xb6dcbb5b in QApplication::sendSpontaneousEvent (receiver=0x823a528, 
    event=0xbfaed460) at qapplication.h:499
#20 0xb6db8c82 in QETWidget::translatePaintEvent (this=0x823a528, 
    event=0xbfaed7f8) at qapplication_x11.cpp:5644
#21 0xb6dc8c12 in QApplication::x11ProcessEvent (this=0xbfaed9c0, 
    event=0xbfaed7f8) at qapplication_x11.cpp:3495
#22 0xb6de1616 in QEventLoop::processEvents (this=0x8198010, flags=4)
    at qeventloop_x11.cpp:192
#23 0xb6e5f905 in QEventLoop::enterLoop (this=0x8198010) at qeventloop.cpp:198
#24 0xb6e5f726 in QEventLoop::exec (this=0x8198010) at qeventloop.cpp:145
#25 0xb6e435af in QApplication::exec (this=0xbfaed9c0)
    at qapplication.cpp:2758
#26 0xb649e4bf in kdemain (argc=3, argv=0x81a1168) at main.cpp:285
#27 0xb7591754 in kdeinitmain (argc=3, argv=0x81a1168) at kwin_dummy.cpp:3
#28 0x0804f5c5 in launch (argc=3, _name=0x818712c "kwin", 
    args=<value optimized out>, cwd=0x0, envc=0, envs=0x8187176 "", 
    reset_env=false, tty=0x0, avoid_loops=false, startup_id_str=0x80532ba "0")
    at kinit.cpp:673
#29 0x080502b7 in handle_launcher_request (sock=10) at kinit.cpp:1240
#30 0x08050811 in handle_requests (waitForPid=0) at kinit.cpp:1443
#31 0x0805108b in main (argc=5, argv=) at kinit.cpp:1909

% emerge --info
Portage 2.1.1-r2 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r4, 2.6.18-gentoo-r6 i686)
=================================================================
System uname: 2.6.18-gentoo-r6 i686 AMD Athlon(tm) XP 1900+
Gentoo Base System version 1.12.6
Last Sync: Sun, 21 Jan 2007 19:50:01 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.16.1-r3, 2.17, 2.17.50.0.9
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-ggdb -O2"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-ggdb -O2"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks fixpackages metadata-transfer nosplit sandbox sfperms strict userpriv"
GENTOO_MIRRORS="ftp://213.186.33.38/gentoo-distfiles/ ftp://ftp.sh.cvut.cz/MIRRORS/gentoo/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://mirror.pacific.net.au/linux/Gentoo ftp://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo/ http://gentoo.osuosl.org/ "
LINGUAS="en ja"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=300"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/xemacs"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X Xaw3d aac aalib alsa alsa_cards_via82xx alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol apm arts berkdb bindist bitmap-fonts bzip2 canna cdr cjk cli cracklib crypt cups debug dlloader doc dri dvd elibc_glibc emboss encode esd firefox foomaticdb fortran freetype freewnn gdbm gif gnome gpm gstreamer gtk gtk2 iconv imagemagick imlib input_devices_joystick input_devices_keyboard input_devices_mouse ipv6 isdnlog java joystick jpeg kde kdexdeltas kernel_linux lcd_devices_bayrad lcd_devices_cfontz lcd_devices_cfontz633 lcd_devices_glk lcd_devices_hd44780 lcd_devices_lb216 lcd_devices_lcdm001 lcd_devices_mtxorb lcd_devices_ncurses lcd_devices_text libg++ libwww linguas_en linguas_ja lm_sensors mad maildir mbox mikmod mmx mmxext mng mozsvg mp3 mpeg mule ncurses nls nodrm nptl nptlonly ogg opengl oss pam pcre perl pic png pppd python qt qt3 qt4 quicktime readline reflection ruby scanner sdl session spell spl sse ssl tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts udev unicode usb userland_GNU video_cards_fbdev video_cards_mga video_cards_vesa vorbis wmf xine xinerama xml xorg xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, MAKEOPTS




Comment 1


Mark Purtill





          2007-01-22 01:48:23 UTC
        

Created attachment 107746 [details]
Image causing the crash

I got this image from a firefox theme.  It is not the only image causing the crash, but it has the advantage of being small.




Comment 2


Charlie Shepherd (RETIRED)






          2007-01-22 06:52:19 UTC
        

What libpng version do you have?




Comment 3


Mark Purtill





          2007-01-24 05:07:12 UTC
        

I just upgraded to libpng-1.2.15, and that didn't fix the problem.  The old version was 1.2.14.  (Of course, I ran revdep-rebuild after upgrading, which did nothing.)




Comment 4


Mark Purtill





          2007-01-28 18:59:37 UTC
        

I just upgraded to kwin-3.5.6, and this bug still occurs.  The traceback looks the same, as far as I can tell.




Comment 5


Wulf Krueger (RETIRED)






          2007-06-17 12:24:49 UTC
        

The attached picture of a little blue ball doesn't crash anything for me in 3.5.7. (Haven't tested any earlier version, though.) Could you please try if this is fixed for you in 3.5.7?




Comment 6


Mark Purtill





          2007-06-21 06:10:37 UTC
        

I upgraded all of kde, but I get basically the same crash with kwin 3.5.7.  Please let me know anything I can do to help track this down.




Comment 7


Jorge Manuel B. S. Vicetto (RETIRED)






          2007-07-18 02:09:40 UTC
        

The attached picture also works well here with kde-3.5.7.

Please include your emerge --info if it changed from your original report.




Comment 8


Carsten Lohrke (RETIRED)






          2007-07-25 19:19:24 UTC
        

Neither reproducible with 3.5.6 nor 3.5.7 here.




Comment 9


Mark Purtill





          2009-02-20 23:41:33 UTC
        

In case anyone else runs into this, it seems the problem was caused by some sort of corruption in my KDE theme, which I'd customized.  Changing it back to one of the defaults resolved the problem.  (I thought I'd posted this information before, but it seems not.)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

