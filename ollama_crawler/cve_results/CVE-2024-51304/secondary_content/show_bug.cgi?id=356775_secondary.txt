Title: 356775 – media-tv/xbmc-10.0 crystalhd not working after python change (and packages not rebuilt)
URL: https://bugs.gentoo.org/show_bug.cgi?id=356775

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 356775
media-tv/xbmc-10.0 crystalhd not working after python change (and packages not rebuilt)
Last modified: 2011-03-09 22:31:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 356775 
      - media-tv/xbmc-10.0 crystalhd not working after python change (and packages not rebuilt)


Summary:
media-tv/xbmc-10.0 crystalhd not working after python change (and packages no...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Xbox project








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-02-28 00:36 UTC by h2sammo





      Modified:
    
2011-03-09 22:31 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log.bz2

              (build.log.bz2,78.97 KB,
                application/octet-stream)

            
2011-03-03 22:48 UTC,

            SpanKY




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


h2sammo





          2011-02-28 00:36:56 UTC
        

Posted: Sun Feb 27, 2011 12:04 pm    Post subject: XBMC NO crystalhd option at System -> Video -> Playbac	   
I recompiled the package several times and now I do not see the hardware acceleration tickmark anylonger. I have crystalhd module enabled. Any ideas why? 
Code:

localhost linux # lsmod 
Module                  Size  Used by 
crystalhd              63014  0 
snd_pcm_oss            27471  0 
snd_mixer_oss          10167  1 snd_pcm_oss 
nvidia               9359259  40 
snd_hda_codec_atihdmi     1787  1 
snd_hda_codec_realtek   196128  1 
snd_hda_intel          16995  3 
snd_hda_codec          55655  3 snd_hda_codec_atihdmi,snd_hda_codec_realtek,snd_hda_intel 
snd_pcm                52076  4 snd_pcm_oss,snd_hda_intel,snd_hda_codec 
snd_timer              13054  2 snd_pcm 
hid_logitech            4428  0 
snd                    37749  11 snd_pcm_oss,snd_mixer_oss,snd_hda_codec_realtek,snd_hda_intel,snd_hda_codec,snd_pcm,snd_timer 
hid_apple               3510  0 
usbhid                 13285  0 
soundcore               4230  1 snd 
snd_page_alloc          5489  2 snd_hda_intel,snd_pcm


dmesg lines of interest: 
Code:
Broadcom 70012 Decoder 0000:02:00.0: PCI INT A disabled 
Loading crystalhd v3.8.0 
crystalhd 0000:02:00.0: Starting Device:0x1612 
crystalhd 0000:02:00.0: PCI INT A -> GSI 16 (level, low) -> IRQ 16 
crystalhd 0000:02:00.0: MSI request failed.. 
crystalhd 0000:02:00.0: setting latency timer to 64


lscpi -k 
Code:
02:00.0 Multimedia controller: Broadcom Corporation Device 1612 (rev 01) 
        Subsystem: Broadcom Corporation Device 2612 
        Kernel driver in use: crystalhd 
        Kernel modules: crystalhd

The only USE flags enabled are alsa and hal btw.

I have used this setup with xbmc and crystalhd nicely with the stable and 9999 build for about 1 year now. This is a recent event and I cannot figure out why it happens.

Reproducible: Always

Steps to Reproduce:
1.recompile existing xbmc-10.0 or xbmc-9999
2.keep only alsa and hal USE flags
3.go to video - settings - playback - NO crystalhd hardware acceleration option to tick
4. follow dmesg to make sure crystalhd has been loaded and lscpi -k to make sure the decoder card has been noticed.

Actual Results:  
go to video - settings - playback - NO crystalhd hardware acceleration option to tick

Expected Results:  
go to video - settings - playback - crystalhd hardware acceleration option to tick should be there and i should be able to use the decoder to accelerate 1080p videos




Comment 1


Jeroen Roovers (RETIRED)






          2011-02-28 20:08:32 UTC
        

Please paste your `emerge --info =media-tv/xbmc-10.0' output in a comment.




Comment 2


h2sammo





          2011-02-28 22:02:25 UTC
        

localhost appletv # emerge --info =media-tv/xbmc-10.0                  
Portage 2.1.9.25 (default/linux/x86/10.0/desktop, gcc-4.4.5, glibc-2.11.2-r3, 2.6.36-gentoo-r5v03 i686)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.36-gentoo-r5v03-i686-Genuine_Intel-R-_processor_1.00GHz-with-gentoo-1.12.14
Timestamp of tree: Mon, 28 Feb 2011 17:30:01 +0000
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.6.6-r2, 3.1.3-r1
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="*"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium-m -O2 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=pentium-m -O2 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa berkdb bluetooth branding bzip2 cairo cli consolekit cracklib crypt cxx dbus dri dts dvd dvdr emboss encode exif fam firefox flac fortran gdbm gdu gif gpm gtk hal iconv ipv6 java jpeg lcms ldap libnotify lirc mad mikmod mmx mng modules mp3 mp4 mpeg mudflap ncurses nls nptl nptlonly nsplugin nvidia ogg opengl openmp pam pango pcre pdf perl png policykit ppds pppd python qt3support qt4 readline sdl session spell ssl startup-notification svg sysfs tcpd tiff truetype udev unicode usb vorbis x264 x86 xcb xml xorg xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" LIRC_DEVICES="macmini" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

media-tv/xbmc-10.0 was built with the following:
USE="alsa hal (-altivec) -avahi -css -debug -joystick -midi -profile -pulseaudio -rtmp -sse -sse2 -vaapi -vdpau -webserver -xrandr"





Comment 3


SpanKY






          2011-03-01 02:43:02 UTC
        

post the full build log as an attachment




Comment 4


h2sammo





          2011-03-01 14:00:22 UTC
        

(In reply to comment #3)
> post the full build log as an attachment
> 

there is nothing inside /var/tmp/portage/media-tv/xbmc-10.0/temp/build.log . do i have to enable anything for logs of successful packages to be recorded?





Comment 5


SpanKY






          2011-03-01 18:42:24 UTC
        

if you dont have PORT_LOGDIR enabled, then make the log yourself

emerge ... >& log




Comment 6


h2sammo





          2011-03-03 13:27:24 UTC
        

file too large for attachment here so i omploaded: http://ompldr.org/vN240NA. Thats the full build. thank you





Comment 7


SpanKY






          2011-03-03 22:48:49 UTC
        

Created attachment 264631 [details]
build.log.bz2

so just use compression




Comment 8


h2sammo





          2011-03-03 23:20:01 UTC
        

(In reply to comment #7)
> Created an attachment (id=264631) [details]
> build.log.bz2
> 
> so just use compression
> 

right :)
im learning




Comment 9


h2sammo





          2011-03-08 18:57:14 UTC
        

have i attached all the necessary stuff? 
i looked through the build myself and i see crystalhd library has been detected. any ideas why i dont see the enable crystalhd option?




Comment 10


h2sammo





          2011-03-09 22:18:50 UTC
        

not sure if i can close my own bug but problem is now fixed. turns out gentoo downgraded python from 2.7 to 2.6 and i had not run python-updater. one i have done this, boost and xbmc re-emerged and now i get the crystalhd enabling option and very nice acceleration. check out bug 344877 for latest crystalhd driver under linux.

thank you all




Comment 11


SpanKY






          2011-03-09 22:31:10 UTC
        

thanks for the update.  reporters should be able to close their own bugs.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

