Title: 211974 – dev-lang/perl-5.8.8-r4 compile fails on x86 when upgrading from -r2
URL: https://bugs.gentoo.org/show_bug.cgi?id=211974

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 211974
dev-lang/perl-5.8.8-r4 compile fails on x86 when upgrading from -r2
Last modified: 2008-05-30 12:57:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 211974 
      - dev-lang/perl-5.8.8-r4 compile fails on x86 when upgrading from -r2


Summary:
dev-lang/perl-5.8.8-r4 compile fails on x86 when upgrading from -r2
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-03-01 14:06 UTC by Thomas Anderson (tanderson) (RETIRED)





      Modified:
    
2008-05-30 12:57 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Anderson (tanderson) (RETIRED)






          2008-03-01 14:06:06 UTC
        

The compile fails with this error:

../../miniperl "-I../../lib" "-I../../lib" ../../lib/ExtUtils/xsubpp  -typemap ../../lib/ExtUtils/typemap  IO.xs > IO.xsc && mv IO.xsc IO.c
i686-pc-linux-gnu-gcc -c   -fno-strict-aliasing -pipe -Wdeclaration-after-statement -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -march=i686 -pipe   -DVERSION=\"1.22\" -DXS_VERSION=\"1.22\" -fPIC "-I../.."   IO.c
IO.xs: In function 'XS_IO__Poll__poll':
IO.xs:238: error: invalid application of 'sizeof' to incomplete type 'struct pollfd'
IO.xs:242: error: invalid use of undefined type 'struct pollfd'
IO.xs:242: error: dereferencing pointer to incomplete type
IO.xs:244: error: invalid use of undefined type 'struct pollfd'
IO.xs:244: error: dereferencing pointer to incomplete type
IO.xs:246: error: invalid use of undefined type 'struct pollfd'
IO.xs:246: error: dereferencing pointer to incomplete type
IO.xs:250: error: invalid use of undefined type 'struct pollfd'
IO.xs:250: error: dereferencing pointer to incomplete type
IO.xs:251: error: invalid use of undefined type 'struct pollfd'
IO.xs:251: error: dereferencing pointer to incomplete type
make[1]: *** [IO.o] Error 1
make[1]: Leaving directory `/var/tmp/paludis/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/IO'
make: *** [lib/auto/IO/IO.so] Error 2

I'm using paludis so please let me know if you want `paludis --info`(which is quite extensive.
Thanks.

Reproducible: Always




Comment 1


Jakub Moc (RETIRED)






          2008-03-01 14:25:13 UTC
        

(In reply to comment #0)
> I'm using paludis so please let me know if you want `paludis --info`(which is
> quite extensive.

Sounds like a plan... :)




Comment 2


Thomas Anderson (tanderson) (RETIRED)






          2008-03-01 14:54:29 UTC
        

paludis 0.26.0_alpha9
Paludis build information:
    Compiler:
        CXX:                   i686-pc-linux-gnu-g++ 4.1.2 (Gentoo 4.1.2)
        CXXFLAGS:              -O2 -march=i686 -pipe
        LDFLAGS:               
        DATE:                  2008-02-09T17:25:23-0500

    Libraries:
        C++ Library:           GNU libstdc++ 20070214

    Reduced Privs:
        reduced_uid:           106
        reduced_uid->name:     paludisbuild
        reduced_uid->dir:      /dev/null
        reduced_gid:           447
        reduced_gid->name:     paludisbuild

    Paths:
        DATADIR:               /usr/share
        LIBDIR:                /usr/lib
        LIBEXECDIR:            /usr/libexec
        SYSCONFDIR:            /etc
        PYTHONINSTALLDIR:      /usr/lib/python2.4/site-packages
        RUBYINSTALLDIR:        /usr/lib/ruby/site_ruby/1.8/i686-linux

Repository virtuals:
    format:                    virtuals

Repository installed-virtuals:
    format:                    installed_virtuals
    root:                      /

Repository gentoo:
    format:                    ebuild
    location:                  /usr/portage
    append_repository_name_to_write_cache: true
    binary_destination:        false
    binary_keywords:           
    binary_uri_prefix:         
    builddir:                  /var/tmp/paludis
    cache:                     /usr/portage/metadata/cache
    distdir:                   /usr/portage/distfiles
    eapi_when_unknown:         0
    eapi_when_unspecified:     0
    eclassdirs:                /usr/portage/eclass
    ignore_deprecated_profiles: false
    layout:                    traditional
    names_cache:               /usr/portage/.cache/names
    newsdir:                   /usr/portage/metadata/news
    profile_eapi:              0
    profiles:                  /usr/portage/profiles/default-linux/x86/2007.0/desktop
    securitydir:               /usr/portage/metadata/glsa
    setsdir:                   /usr/portage/sets
    sync:                      rsync://192.168.1.10/gentoo-portage
    sync_options:              
    use_manifest:              use
    write_cache:               /var/cache/paludis/metadata

    Package information:
        app-admin/eselect-compiler: (none)
        app-shells/bash:       3.2_p17-r1
        dev-java/java-config:  1.3.7 2.1.4
        dev-lang/python:       2.4.4-r6
        dev-python/pycrypto:   2.0.1-r6
        dev-util/ccache:       (none)
        dev-util/confcache:    (none)
        sys-apps/baselayout:   1.12.11.1
        sys-apps/sandbox:      1.2.18.1-r2
        sys-devel/autoconf:    2.13 2.61-r1
        sys-devel/automake:    1.10 1.4_p6 1.5 1.6.3 1.7.9-r1 1.8.5-r3 1.9.6-r2
        sys-devel/binutils:    2.18-r1
        sys-devel/gcc-config:  1.4.0-r4
        sys-devel/libtool:     1.5.26
        virtual/os-headers:    2.6.23-r3 (for sys-kernel/linux-headers::installed)

Repository installed:
    format:                    vdb
    location:                  /var/db/pkg
    builddir:                  /var/tmp/paludis
    names_cache:               /var/db/pkg/.cache/names
    provides_cache:            /var/db/pkg/.cache/provides
    root:                      /
    world:                     /var/db/pkg/world

Repository overlay:
    format:                    ebuild
    location:                  /overlay
    append_repository_name_to_write_cache: true
    binary_destination:        false
    binary_keywords:           
    binary_uri_prefix:         
    builddir:                  /var/tmp/paludis
    cache:                     /var/empty
    distdir:                   /usr/portage/distfiles
    eapi_when_unknown:         0
    eapi_when_unspecified:     0
    eclassdirs:                /usr/portage/eclass /overlay/eclass
    ignore_deprecated_profiles: false
    layout:                    traditional
    master_repository:         gentoo
    names_cache:               /overlay/.cache/names
    newsdir:                   /overlay/metadata/news
    profile_eapi:              0
    profiles:                  /usr/portage/profiles/default-linux/x86/2007.0/desktop
    securitydir:               /overlay/metadata/glsa
    setsdir:                   /overlay/sets
    sync:                      
    sync_options:              
    use_manifest:              use
    write_cache:               /var/cache/paludis/metadata


No packages were specified on the command line, so detailed information is not
available (Paludis can display detailed information for both installed and
installable packages).





Comment 3


Thomas Anderson (tanderson) (RETIRED)






          2008-03-01 15:16:34 UTC
        

Upgrading various other things fixed. Probably caused by an out-of-date system.




Comment 4


K. Graney





          2008-05-30 12:57:19 UTC
        

(In reply to comment #3)
> Upgrading various other things fixed. Probably caused by an out-of-date system.
> 

Which packages required updating?   I'm still having this issue building perl.  Build errors are the same (IO.xs).  I am on x86_64.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

