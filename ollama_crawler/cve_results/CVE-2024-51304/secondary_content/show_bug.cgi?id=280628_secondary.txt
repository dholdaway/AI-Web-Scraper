Title: 280628 – kdepimlibs 4.3.0 fails to compile (missing includes?)
URL: https://bugs.gentoo.org/show_bug.cgi?id=280628

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 280628
kdepimlibs 4.3.0 fails to compile (missing includes?)
Last modified: 2009-12-02 11:53:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 280628 
      - kdepimlibs 4.3.0 fails to compile (missing includes?)


Summary:
kdepimlibs 4.3.0 fails to compile (missing includes?)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-08-07 06:42 UTC by Marek Zachara





      Modified:
    
2009-12-02 11:53 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marek Zachara





          2009-08-07 06:42:47 UTC
        

I have had this problem for some time - kdepimlibs (starting with 4.2.98, but current 4.3.0 seem to be affected as well fail to compile with information about missing symbols (like AKONADI_CMD_ITEMDELETE)

Reproducible: Always

Steps to Reproduce:
1. emerge kdepimlibs
2.
3.

Actual Results:  
I cant get the actuall log error now, as i got it fixed (patch attached below)


Seems for some reason my build failed due to original order of includes. Chaniging the order/source of includes in 3 files of kdepimlibs/akonadi fixed it for me. I dont know if its issue with my machine (but no idea why my setup might differ from others), but maybe this will help someone else as well. So if you get error message during compile of akonadi/itemdeletejob.cpp about unknown symbol "AKONADI_CMD_ITEMDELETE", try use the patch below. If more people are affected, maybe it would be worth including it in the portage or reporting it upstream. P.S this seem to be related to includes from app-office/akonadi-server package which i have installed as version 1.2.0


*** orig/itemdeletejob.cpp      Tue Jun  9 18:07:16 2009
--- patched/itemdeletejob.cpp   Wed Aug  5 10:44:08 2009     
***************
*** 25,33 ****
  #include "job_p.h"
  #include "protocolhelper_p.h"

  #include <akonadi/private/imapparser_p.h>
  #include <akonadi/private/imapset_p.h>
- #include <akonadi/private/protocol_p.h>

  #include <KLocale>

--- 25,33 ----
  #include "job_p.h"
  #include "protocolhelper_p.h"

+ #include "protocol_p.h"
  #include <akonadi/private/imapparser_p.h>
  #include <akonadi/private/imapset_p.h>

  #include <KLocale>

diff -cr orig/monitor_p.cpp patched/monitor_p.cpp
*** orig/monitor_p.cpp  Wed May 27 21:53:06 2009
--- patched/monitor_p.cpp       Wed Aug  5 10:46:13 2009
***************
*** 19,30 ****

  // @cond PRIVATE

  #include "monitor_p.h"

  #include "collectionfetchjob.h"
  #include "collectionstatistics.h"
  #include "itemfetchjob.h"
- #include "notificationmessage_p.h"
  #include "session.h"

  #include <kdebug.h>
--- 19,30 ----

  // @cond PRIVATE

+ #include "notificationmessage_p.h"
  #include "monitor_p.h"

  #include "collectionfetchjob.h"
  #include "collectionstatistics.h"
  #include "itemfetchjob.h"
  #include "session.h"

  #include <kdebug.h>
diff -cr orig/protocolhelper.cpp patched/protocolhelper.cpp
*** orig/protocolhelper.cpp     Wed Jun 17 22:05:52 2009
--- patched/protocolhelper.cpp  Wed Aug  5 10:45:38 2009
***************
*** 23,29 ****
  #include "collectionstatistics.h"
  #include "exception.h"
  #include <akonadi/private/imapparser_p.h>
! #include <akonadi/private/protocol_p.h>

  #include <QtCore/QVarLengthArray>

--- 23,29 ----
  #include "collectionstatistics.h"
  #include "exception.h"
  #include <akonadi/private/imapparser_p.h>
! #include "protocol_p.h"

  #include <QtCore/QVarLengthArray>




Comment 1


Samuli Suominen (RETIRED)






          2009-10-11 14:20:55 UTC
        

4.3.0 isn't in Portage anymore, please reopen if this is still a issue with >= 4.3.1.




Comment 2


Marek Zachara





          2009-10-13 11:32:06 UTC
        

Well, it still does the same thing for me - need to use my patch to compile kdepimlibs 4.3.2. However i have another gentoo installation on laptop (also amd64) and kdepimlibs compiles well. So i guess my problems are due to the history of emerging (order of installed packages). I have noticed a few (but not many) other people reporting the same problem at different webistes - so i guess they might be in similar situation - the bug is a 'phase of a moon' type and only demonstrates under very unusual circumstances. I'm reopening as requested, but i understend this issue might not be important enough to investigate, so i will not object closing it...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

