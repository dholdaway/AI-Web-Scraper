Title: 139739 – net-im/twinkle-0.8 doesn't compile
URL: https://bugs.gentoo.org/show_bug.cgi?id=139739

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 139739
net-im/twinkle-0.8 doesn't compile
Last modified: 2006-07-19 05:54:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 139739 
      - net-im/twinkle-0.8 doesn't compile


Summary:
net-im/twinkle-0.8 doesn't compile
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Daniel Black (RETIRED)








URL:



http://www.twinklephone.com/




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-09 02:19 UTC by Gabriel Pannwitz





      Modified:
    
2006-07-19 05:54 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge log

              (4939-twinkle-0.8.log,86.26 KB,
                text/plain)

            
2006-07-09 02:35 UTC,

            Gabriel Pannwitz




Details





emerge log

              (4940-twinkle-0.8.log,86.16 KB,
                text/plain)

            
2006-07-09 03:04 UTC,

            Gabriel Pannwitz




Details





config.log

              (config.log,79.73 KB,
                text/plain)

            
2006-07-10 08:55 UTC,

            Gabriel Pannwitz




Details





emerge log

              (4948-twinkle-0.8.log,115.22 KB,
                text/plain)

            
2006-07-11 07:26 UTC,

            Gabriel Pannwitz




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Gabriel Pannwitz





          2006-07-09 02:19:25 UTC
        

ACCEPT_KEYWORDS="~x86" emerge twinkle
fails with the following error


make[3]: *** [.obj/address_finder.o] Error 1
make[3]: *** Waiting for unfinished jobs....
Session management error: Authentication Rejected, reason : None of the authentication protocols specified are supported and host-based authentication failed
make[3]: Leaving directory `/var/tmp/portage/twinkle-0.8/work/twinkle-0.8/src/gui'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/twinkle-0.8/work/twinkle-0.8/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/var/tmp/portage/twinkle-0.8/work/twinkle-0.8/src'
make: *** [all-recursive] Error 1

!!! ERROR: net-im/twinkle-0.8 failed.
Call stack:
  ebuild.sh, line 1539:   Called dyn_compile
  ebuild.sh, line 939:   Called src_compile
  twinkle-0.8.ebuild, line 39:   Called die

!!! Error: emake failed!
!!! If you need support, post the topmost build error, and the call stack if relevant.

********************************************************************************

# emerge --info
Portage 2.1-r1 (default-linux/x86/2005.1, gcc-3.3.6, glibc-2.3.6-r4, 2.6.17-gentoo-r2 i686)
=================================================================
System uname: 2.6.17-gentoo-r2 i686 mobile AMD Athlon(tm) 4 1600+
Gentoo Base System version 1.6.15
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.5-r2, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=i686 -fomit-frame-pointer -ggdb"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-O2 -march=i686 -fomit-frame-pointer -ggdb"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.join.uni-muenster.de/pub/linux/distributions/gentoo ftp://ftp6.uni-muenster.de/pub/linux/distributions/gentoo http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://ftp.gentoo.mesh-solutions.com/gentoo/ http://pandemonium.tiscali.de/pub/gentoo/ ftp://pandemonium.tiscali.de/pub/gentoo/"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X aac acpi alsa apm avi berkdb bitmap-fonts cdr cjk cli crypt divx4linux dlloader dri dvd dvdr dvdread eds emboss encode firefox foomaticdb fortran gdbm gif gnome gpm gstreamer gtk gtk2 gtkhtml imlib ipv6 isdnlog joystick jpeg libg++ libwww mad matroska mikmod motif mp3 mpeg ncurses nls ogg oggvorbis opengl oss pam pcre pdflib perl png pppd python qt3 qt4 quicktime readline reflection sdl session spell spl ssl symlink tcpd truetype truetype-fonts type1-fonts unicode videos vorbis win32codecs wxgtk1 xml2 xmms xorg xv xvid zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_joystick kernel_linux userland_GNU video_cards_savage"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY




Comment 1


Daniel Black (RETIRED)






          2006-07-09 02:33:48 UTC
        

can you paste more output?

also try env MAKEOPTS=-j1  ACCEPT_KEYWORDS=~x86 emerge  twinkle




Comment 2


Gabriel Pannwitz





          2006-07-09 02:35:44 UTC
        

Created attachment 91263 [details]
emerge log




Comment 3


Gabriel Pannwitz





          2006-07-09 02:38:01 UTC
        

That log was generated with the following command.

PORT_LOGDIR=/var/log/portage/ ACCEPT_KEYWORDS="~x86" emerge twinkle

will try your suggestion now.




Comment 4


Gabriel Pannwitz





          2006-07-09 03:04:53 UTC
        

Created attachment 91264 [details]
emerge log

# env MAKEOPTS=-j1 PORT_LOGDIR=/var/log/portage/ ACCEPT_KEYWORDS=~x86 emerge twinkle

Also failed, with similar output




Comment 5


Daniel Black (RETIRED)






          2006-07-10 05:57:16 UTC
        

can you attach /var/tmp/portage/twinkle-0.8/work/twinkle-0.8/config.log

What kdebase and qt versions are you running?





Comment 6


Gabriel Pannwitz





          2006-07-10 08:55:15 UTC
        

Created attachment 91374 [details]
config.log

x11-libs/qt-4.1.4

kde-base/kdebase is not installed




Comment 7


Gabriel Pannwitz





          2006-07-10 23:33:29 UTC
        

I will try emerging kdebase and see if that does the trick.

emerging
kde-base/kdebase-3.5.2-r2
now




Comment 8


Daniel Black (RETIRED)






          2006-07-11 00:50:35 UTC
        

more hoping you have a qt-3 version as well;
$ emerge -pC qt

>>> These are the packages that would be unmerged:

 x11-libs/qt
    selected: 4.1.3 3.3.6-r1

twinkle-0.8.1 no available though I doubt it would change your result.

the "Session management error: Authentication Rejected, reason : None of the authentication protocols " errors are really weird - I haven't seen these before.




Comment 9


Gabriel Pannwitz





          2006-07-11 06:36:25 UTC
        

# emerge -av kdebase; env MAKEOPTS=-j1 PORT_LOGDIR=/var/log/portage/ ACCEPT_KEYWORDS=~x86 emerge twinkle

I did that this morning and it compiled fine. Can't say if it was because of twinkle-0.8.1 or because I emerged kdebase. I guess I could try emerging twinkle-0.8 again now that I have kdebase installed.

Also:

# emerge -pC qt

>>> These are the packages that would be unmerged:

 x11-libs/qt
    selected: 3.3.6-r1 4.1.4




Comment 10


Daniel Black (RETIRED)






          2006-07-11 07:02:48 UTC
        

I'm glad it works for you. I'm going to guess you have a gnome system? If so I should put a propper depend on kdebase. It probably explains the session errors too.

If its work just celebrate and call people. Don't go hacking too much. You might break it.




Comment 11


Gabriel Pannwitz





          2006-07-11 07:26:00 UTC
        

Created attachment 91465 [details]
emerge log

XFCE is my desktop, but I use many Gnome apps.

For the record, those Session management errors persisted when I emerged twinkle-0.8 . Here is the log, in case it helps.

However, the emerge completed despite those errors, so it must have been the missing kdebase that was the culprit.

Many thanks for your help :)




Comment 12


Daniel Black (RETIRED)






          2006-07-11 23:35:37 UTC
        

Gabriel,

Had a close look at the output you generated.

It complains about the lack of defination for QImage
according to me its in
/usr/qt/3/include/qimage.h

Do you have another qimage.h in /usr/include? (find /usr/include -name qimage.h)
if so what does it belong to (equery belongs {filename})?

I'm about to report this to the author as kdebase shouldn't be a dependency (as far as I can see).

Are you using qt-3? I'd assume twinkle's autoconf would detect if you weren't.
$ env | fgrep QT
QTDIR=/usr/qt/3





Comment 13


Gabriel Pannwitz





          2006-07-12 04:15:56 UTC
        

# find /usr/include -name qimage.h
/usr/include/qt4/Qt/qimage.h
/usr/include/qt4/QtGui/qimage.h

# equery belongs /usr/include/qt4/Qt/qimage.h
[ Searching for file(s) /usr/include/qt4/Qt/qimage.h in *... ]
x11-libs/qt-4.1.4 (/usr/include/qt4/Qt/qimage.h)

# equery belongs /usr/include/qt4/QtGui/qimage.h
[ Searching for file(s) /usr/include/qt4/QtGui/qimage.h in *... ]
x11-libs/qt-4.1.4 (/usr/include/qt4/QtGui/qimage.h)

# env | fgrep QT
QTDIR=/usr/qt/3





Comment 14


Daniel Black (RETIRED)






          2006-07-12 05:40:55 UTC
        

you have /usr/qt/3/include/qimage.h too? Just making sure you have a full and working qt3 installation.




Comment 15


Gabriel Pannwitz





          2006-07-12 10:24:03 UTC
        

# find /usr/qt/3/include/ -name qimage.h
/usr/qt/3/include/qimage.h

yup




Comment 16


Daniel Black (RETIRED)






          2006-07-19 05:54:04 UTC
        

I don't know what caused this. I'm just going to hope it doesn't occur again. If anyone comes across this again please reopen this bug.

Thanks Gabriel for you help in providing timely information. I'm sorry I couldn't make use of it to make a propper fix.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

