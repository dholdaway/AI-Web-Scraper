Title: 462102 – [gamerlay] games-util/steam-meta STEAM_RUNTIME is disabled by the user
URL: https://bugs.gentoo.org/show_bug.cgi?id=462102

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 462102
[gamerlay] games-util/steam-meta STEAM_RUNTIME is disabled by the user
Last modified: 2016-07-21 19:04:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 462102 
      - [gamerlay] games-util/steam-meta STEAM_RUNTIME is disabled by the user


Summary:
[gamerlay] games-util/steam-meta STEAM_RUNTIME is disabled by the user
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Vadim A. Misbakh-Soloviov (mva)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2013-03-17 20:35 UTC by tman





      Modified:
    
2016-07-21 19:04 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



dev









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


tman





          2013-03-17 20:35:46 UTC
        

steam seems to have some problem:

flash  wont work, even its installed.

[I] www-plugins/adobe-flash
     Available versions:  (~)10.3.183.68^ms 11.2.202.275^ms {-32bit +64bit kde multilib selinux +sse2check vdpau}


[I] games-util/steam-meta
     Available versions:  (~)0-r20130312[1] (~)0-r20130312[2]
     Installed versions:  0-r20130312[2](16:44:20 17.03.2013)
     Homepage:            https://steampowered.com
     Description:         Meta package for Valve's Steam environment

[1] "steam-overlay" /usr/portage/local/layman/steam
[2] "gamerlay" /usr/portage/local/layman/gamerlay


####################

games start also with errors:

Missing shutdown function for DevShotGenerator_Init() : DevShotGenerator_Shutdown()
Missing shutdown function for MapReslistGenerator_Init() : MapReslistGenerator_Shutdown()
Missing shutdown function for COM_InitFilesystem( m_StartupInfo.m_pInitialMod ) : COM_ShutdownFileSystem()
Missing shutdown function for Steam3Client().Activate() : Steam3Client().Shutdown()
/home/test/.local/share/Steam/SteamApps/steamaccount/Team Fortress 2/hl2.sh: line 72: 24640 Segmentation fault      ${GAME_DEBUGGER} "${GAMEROOT}"/${GAMEEXE} "$@"
Game removed: AppID 440 "Team Fortress 2", ProcID 24640 
saving roaming config store to 'sharedconfig.vdf'
roaming config store 2 saved successfully


     Installed versions:  11.2.202.275^ms(16:43:29 17.03.2013)(32bit 64bit kde multilib sse2check vdpau -selinux)
     Homepage:            http://www.adobe.com/products/flashplayer.html
     Description:         Adobe Flash Player



Reproducible: Always

Actual Results:  
Running Steam on gentoo  64-bit
STEAM_RUNTIME is disabled by the user
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
unlinked 0 orphaned pipes
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
[0317/212327:ERROR:object_proxy.cc(239)] Failed to call method: org.freedesktop.DBus.Error.Spawn.ChildExited: Launch helper exited with unknown return code 1
[0317/212327:WARNING:proxy_service.cc(646)] PAC support disabled because there is no system implementation
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Generating new string page texture 2: 48x256, total string texture memory is 49,15 KB
Generating new string page texture 3: 256x256, total string texture memory is 311,30 KB
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
Adding license for package 0
Adding license for package 17250
Adding license for package 19340
roaming config store loaded successfully - 1039 bytes.
migrating temporary roaming config store
Installing breakpad exception handler for appid(steam)/version(1361807486_client)
ExecCommandLine: "/home/cornix/.local/share/Steam/ubuntu12_32/steam"
CAsyncIOManager: creating I/O worker thread
CAsyncIOManager: creating I/O worker thread
Generating new string page texture 69: 64x256, total string texture memory is 376,83 KB
Generating new string page texture 70: 128x256, total string texture memory is 507,90 KB
CAsyncIOManager: creating I/O worker thread
Generating new string page texture 76: 128x256, total string texture memory is 131,07 KB
Generating new string page texture 77: 24x256, total string texture memory is 532,48 KB
Generating new string page texture 78: 1024x256, total string texture memory is 1,58 MB
Generating new string page texture 79: 32x256, total string texture memory is 1,61 MB
System startup time: 10,33 seconds
Running Steam on gentoo  64-bit
STEAM_RUNTIME is disabled by the user
ExecCommandLine: "/home/test/.steam/root/ubuntu12_32/steam steam://open/driverhelperready"
ExecSteamURL: "steam://open/driverhelperready"
CAsyncIOManager: creating I/O worker thread
Installing breakpad exception handler for appid(steam)/version(1361807486_client)



Portage 2.1.11.55 (default/linux/amd64/13.0/desktop, gcc-4.6.3, glibc-2.16.0, 3.8.3-gentoo x86_64)
=================================================================
System uname: Linux-3.8.3-gentoo-x86_64-Intel-R-_Core-TM-_i7-3740QM_CPU_@_2.70GHz-with-gentoo-2.2
KiB Mem:    24627888 total,  17956176 free
KiB Swap:   24574972 total,  24574972 free
Timestamp of tree: Sun, 17 Mar 2013 19:30:01 +0000
ld GNU ld (GNU Binutils) 2.23.1
app-shells/bash:          4.2_p45
dev-java/java-config:     2.1.12-r1
dev-lang/python:          2.7.3-r3, 3.2.3-r2
dev-util/cmake:           2.8.10.2-r1
dev-util/pkgconfig:       0.28
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.11.8::pentoo
sys-apps/sandbox:         2.6
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.9.6-r3, 1.10.3, 1.11.6, 1.13.1
sys-devel/binutils:       2.23.1
sys-devel/gcc:            4.6.3, 4.7.2-r1
sys-devel/gcc-config:     1.8
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r5::gnome
sys-kernel/linux-headers: 3.8 (virtual/os-headers)
sys-libs/glibc:           2.16.0
Repositories: gentoo mpd nikai ruby emacs science mgorny scarabeus wirelay poly-c mva luman flameeyes-overlay Techwolf alice pentoo gnome steam-overlay qt gamerlay lokal
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=corei7 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /etc/X11/Sessions/awesome /etc/X11/Sessions/dwm /etc/conf.d/hwclock /etc/conf.d/keymaps /etc/default/grub /etc/fstab /etc/hosts /etc/make.conf /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/polkit-1/actions /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=corei7 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="de_DE.UTF-8"
LC_ALL=""
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j9"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"




Comment 1


Mario Kicherer





          2013-03-17 20:45:29 UTC
        

You have installed flash without 32bit use flag although the steam-client-meta ebuild forces it's activation.

I never saw such an error during the start of TF2. Can you check if the steam ebuilds as well as TF2 is correctly installed? The steam client provides a menu function to check the consistency of a game.




Comment 2


tman





          2013-03-17 21:53:50 UTC
        

my flash is installed with 32bit :


[I] www-plugins/adobe-flash
     Available versions:  (~)10.3.183.68^ms 11.2.202.275^ms {-32bit +64bit kde multilib selinux +sse2check vdpau}
     Installed versions:  11.2.202.275^ms(16:43:29 17.03.2013)(32bit 64bit kde multilib sse2check vdpau -selinux)
     Homepage:            http://www.adobe.com/products/flashplayer.html
     Description:         Adobe Flash Player




Comment 3


Mario Kicherer





          2013-03-17 22:18:19 UTC
        

Oh sorry, read the wrong line. Did you create the symlink as suggested in the ebuild? https://github.com/anyc/steam-overlay/blob/master/games-util/steam-client-meta/steam-client-meta-0-r20130316.ebuild

You could also start steam with "STEAM_RUNTIME=1 steam" and try if the game works then.




Comment 4


tman





          2013-03-17 23:37:15 UTC
        

(In reply to comment #3)
> Oh sorry, read the wrong line. Did you create the symlink as suggested in
> the ebuild?
> https://github.com/anyc/steam-overlay/blob/master/games-util/steam-client-
> meta/steam-client-meta-0-r20130316.ebuild
> 
> You could also start steam with "STEAM_RUNTIME=1 steam" and try if the game
> works then.

i tried to set this GLOBAL but i also got crash:



Did not detect any valid joysticks.
[0318/003309:ERROR:resource_bundle.cc(411)] Failed to load /home/test/.local/share/Steam/SteamApps/steamaccount/Team Fortress 2/cef_gtk.pak
Some features may not be available.
[0318/003309:ERROR:object_proxy.cc(239)] Failed to call method: org.freedesktop.DBus.Error.Spawn.ChildExited: Launch helper exited with unknown return code 1
[0318/003309:WARNING:proxy_service.cc(646)] PAC support disabled because there is no system implementation
ALSA lib conf.c:3314:(snd_config_hooks_call) Cannot open shared library /usr/lib64/alsa-lib/libasound_module_conf_pulse.so
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM default
The program 'hl2_linux' received an X Window System error.
This probably reflects a bug in the program.
The error was 'BadDrawable (invalid Pixmap or Window parameter)'.
  (Details: serial 141 error_code 9 request_code 14 minor_code 0)
  (Note to programmers: normally, X errors are reported asynchronously;
   that is, you will receive the error a while after causing it.
   To debug your program, run it with the --sync command line
   option to change this behavior. You can then get a meaningful
   backtrace from your debugger if you break on the gdk_x_error() function.)
Missing shutdown function for DevShotGenerator_Init() : DevShotGenerator_Shutdown()
Missing shutdown function for MapReslistGenerator_Init() : MapReslistGenerator_Shutdown()
Missing shutdown function for COM_InitFilesystem( m_StartupInfo.m_pInitialMod ) : COM_ShutdownFileSystem()
Missing shutdown function for Steam3Client().Activate() : Steam3Client().Shutdown()
/home/test/.local/share/Steam/SteamApps/steamaccount/Team Fortress 2/hl2.sh: line 72: 29524 Segmentation fault      ${GAME_DEBUGGER} "${GAMEROOT}"/${GAMEEXE} "$@"




Comment 5


Mario Kicherer





          2013-03-18 12:56:24 UTC
        

Okay, then I think the problem is not caused by our ebuilds. I guess there's something wrong with graphics acceleration. Valve supplies all required libraries with steam and if you set STEAM_RUNTIME to 1, they are preferred over the system libraries.

You could check if you find something in Valve's bug tracker https://github.com/ValveSoftware/steam-for-linux/issues
Maybe https://github.com/ValveSoftware/steam-for-linux/issues/1845 ?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

