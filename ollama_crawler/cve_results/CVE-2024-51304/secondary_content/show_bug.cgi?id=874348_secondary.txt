Title: 874348 – media-libs/opencolorio-2.1.2: 'build.ninja' still dirty after 100 tries
URL: https://bugs.gentoo.org/show_bug.cgi?id=874348

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 874348
media-libs/opencolorio-2.1.2: 'build.ninja' still dirty after 100 tries
Last modified: 2022-10-04 00:58:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 874348 
      - media-libs/opencolorio-2.1.2: 'build.ninja' still dirty after 100 tries


Summary:
media-libs/opencolorio-2.1.2: 'build.ninja' still dirty after 100 tries
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

No maintainer - Look at https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers if you want to take care of it








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2022-10-03 05:48 UTC by Rubin Simons





      Modified:
    
2022-10-04 00:58 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,133.31 KB,
                text/x-log)

            
2022-10-03 05:48 UTC,

            Rubin Simons




Details





qlop -d 2022-10-01 -d 2022-10-03

              (qlop-out.txt,20.71 KB,
                text/plain)

            
2022-10-03 05:48 UTC,

            Rubin Simons




Details





emerge --info

              (emerge-info.txt,7.63 KB,
                text/plain)

            
2022-10-03 05:49 UTC,

            Rubin Simons




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Rubin Simons





          2022-10-03 05:48:12 UTC
        

Created attachment 816130 [details]
build.log

System time is accurate to the second.




Comment 1


Rubin Simons





          2022-10-03 05:48:49 UTC
        

Created attachment 816133 [details]
qlop -d 2022-10-01 -d 2022-10-03




Comment 2


Rubin Simons





          2022-10-03 05:49:05 UTC
        

Created attachment 816136 [details]
emerge --info




Comment 3


Sam James









          2022-10-03 05:57:14 UTC
        

What file system is /var/tmp/portage on? What mount options? Does it work if you delete the contents first?




Comment 4


Rubin Simons





          2022-10-03 06:03:12 UTC
        

(In reply to Sam James from comment #3)
> What file system is /var/tmp/portage on? What mount options? Does it work if
> you delete the contents first?

# mount | grep /dev/sda2
/dev/sda2 on / type jfs (rw,relatime,sync)

Do you think that relatime option is giving me issues? I can't seem to unset it. I tried: mount -o remount,rw,sync /

Removal of files in /var/tmp/portage does not matter.




Comment 5


Sam James









          2022-10-03 06:17:12 UTC
        

relatime should be OK, but I admit I don't remember the last time I saw someone using JFS ;)

Maybe worth a go without it? Wonder if you mount a tmpfs, if that works?




Comment 6


Sam James









          2022-10-03 06:17:34 UTC
        

(Sorry, ignore "give a go without it")




Comment 7


Rubin Simons





          2022-10-03 06:20:31 UTC
        

(In reply to Sam James from comment #5)
> relatime should be OK, but I admit I don't remember the last time I saw
> someone using JFS ;)
> 
> Maybe worth a go without it? Wonder if you mount a tmpfs, if that works?

I tried that: 

# mount | grep portage
tmpfs on /var/tmp/portage type tmpfs (rw,nosuid,nodev,noatime,size=4194304k,mode=775,uid=250,gid=250,inode64)

But no dice, same error :-(. Seems to be a semi-common thing with Ninja..




Comment 8


Sam James









          2022-10-03 06:23:39 UTC
        

Huh. Okay.

1. Can you build older versions of opencolorio?
2. Does anything else using CMake and/or Meson work?
3. I know this sounds like a reach, but try rebuilding ninja?




Comment 9


Rubin Simons





          2022-10-03 06:24:16 UTC
        

(In reply to Sam James from comment #5)
> relatime should be OK, but I admit I don't remember the last time I saw
> someone using JFS ;)

Aah yes, JFS is my trusty workhorse in the last ~20ish years. I trust it blindly, fastest, lowest resources, optionally case-insensitive (not in this case). It's my go-to fs. Do need to re-benchmark some time, last time I checked must be around ~2010's or something.




Comment 10


Rubin Simons





          2022-10-03 06:31:16 UTC
        

(In reply to Sam James from comment #8)
> Huh. Okay.
> 
> 1. Can you build older versions of opencolorio?
> 2. Does anything else using CMake and/or Meson work?
> 3. I know this sounds like a reach, but try rebuilding ninja?

1. Tested with current stable 2.1.1-r7, same issue
2. Yes, am in process of building ~975 packages, many CMake and Meson things passing by
3. Tried that, but didn't work (still get the 100 retries)




Comment 11


Rubin Simons





          2022-10-03 09:59:41 UTC
        

Unbelievable but true, I had to reboot. After reboot this issue went away. Note that there are no other config changes.




Comment 12


Sam James









          2022-10-04 00:58:17 UTC
        

(In reply to Rubin Simons from comment #11)
> Unbelievable but true, I had to reboot. After reboot this issue went away.
> Note that there are no other config changes.

Huh!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

