Title: 435304 – app-portage/g-cpan-0.16.* generates broken ebuild depending on perl-g-cpan instead of dev-perl modules
URL: https://bugs.gentoo.org/show_bug.cgi?id=435304

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 435304
app-portage/g-cpan-0.16.* generates broken ebuild depending on perl-g-cpan instead of dev-perl modules
Last modified: 2016-07-28 14:16:05 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 435304 
      - app-portage/g-cpan-0.16.* generates broken ebuild depending on perl-g-cpan instead of dev-perl modules


Summary:
app-portage/g-cpan-0.16.* generates broken ebuild depending on perl-g-cpan in...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Robin Johnson








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-09-17 07:37 UTC by Juergen Rose





      Modified:
    
2016-07-28 14:16 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



perl
Sergiy.Borodych









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




generated Math-GSL-0.27.ebuild depending on perl-gcpan/Test-Exception instead of dev-perl/Test-Exception

              (Math-GSL-0.27.ebuild_broken,493 bytes,
                text/plain)

            
2012-09-17 07:56 UTC,

            Juergen Rose




Details





g-cpan-i_Cv.log

              (g-cpan-i_Cv.log,44.42 KB,
                text/plain)

            
2013-05-09 15:54 UTC,

            Juergen Rose




Details





g-cpan-i_Cv.log with /etc/make.globals

              (g-cpan-i_Cv.log,83.37 KB,
                text/plain)

            
2013-05-09 16:23 UTC,

            Juergen Rose




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Juergen Rose





          2012-09-17 07:37:45 UTC
        

g-cpan-0.16.4-r1 with perl-5.16.1 generates ebuilds, which depends of perl-gcpan modules even if the corresponding dev-perl modules are in portage tree. The subsequent attempt to emerge the packages with the generated ebuilds fails due to file collision.

root@condor:/root(59)# rm  /var/lib/cpan/perl-gcpan/Math-GSL/Math-GSL-0.27.ebuild
root@condor:/root(60)# g-cpan -i Math-GSL
Use of qw(...) as parentheses is deprecated at /usr/lib64/perl5/vendor_perl/5.16.1/Gentoo/CPAN.pm line 324.
Use of qw(...) as parentheses is deprecated at /usr/lib64/perl5/vendor_perl/5.16.1/Gentoo/CPAN.pm line 386.
Use of qw(...) as parentheses is deprecated at /usr/bin/g-cpan line 716.
-Reading '/tmp/.cpan/Metadata'
  Database was generated on Mon, 17 Sep 2012 06:19:03 GMT
|Checksum for /tmp/.cpan/sources/authors/id/L/LE/LETO/Math-GSL-0.27.tar.gz ok
Checking for GSL..
Found GSL 1.15 (via gsl-config) installed in /usr, CFLAGS=-I/usr/include, -L/usr/lib64 -lgsl -lgslcblas -lm
Asking ExtUtils::PkgConfig with ENV{PKG_CONFIG_PATH}=/usr/pkgconfig:/usr/lib/pkgconfig:/usr/local/lib/pkgconfig:/usr/local/pkgconfig:/usr/libdata/pkgconfig:/usr/local/libdata/pkgconfig:/opt/pkgconfig:

Checking if x86_64-pc-linux-gnu-gcc supports "-Wall"...yes
Checking if x86_64-pc-linux-gnu-gcc supports "-Wno-unused-function"...yes
Checking if x86_64-pc-linux-gnu-gcc supports "-Wno-unused-value"...yes
Checking if x86_64-pc-linux-gnu-gcc supports "-Wno-unused-function"...yes
Checking if x86_64-pc-linux-gnu-gcc supports "-Wno-unused-variable"...yes
Checking if x86_64-pc-linux-gnu-gcc supports "-g"...yes
Checking prerequisites...
  build_requires:
    !  Test::Class is not installed
    !  Test::Most is not installed

ERRORS/WARNINGS FOUND IN PREREQUISITES.  You may wish to install the versions
of the modules indicated above before proceeding with this installation

Created MYMETA.yml and MYMETA.json
Creating new 'Build' script for 'Math-GSL' version '0.27'
Have a great day!
 * perl is part of the core perl install
 * Scalar::Util is part of the core perl install
 * Ebuild already exists for Test-Exception (perl-gcpan/Test-Exception)
 * Ebuild already exists for Test-Class (perl-gcpan/Test-Class)
 * Ebuild already exists for Test-Most (perl-gcpan/Test-Most)
 * version is part of the core perl install
 * Module::Build is part of the core perl install
 * Ebuild already exists for ExtUtils-PkgConfig (dev-perl/extutils-pkgconfig)
 * Generating ebuild for Math::GSL
Use of uninitialized value $eb in substitution (s///) at /usr/bin/g-cpan line 897, <DATA> line 2063.
Use of uninitialized value $eb in pattern match (m//) at /usr/bin/g-cpan line 900, <DATA> line 2063.
Use of uninitialized value $eb in split at /usr/bin/g-cpan line 905, <DATA> line 2063.
Use of uninitialized value $eb_version in int at /usr/bin/g-cpan line 778, <DATA> line 2063.
 * Ebuild generated for Math-GSL
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Math-GSL


 * IMPORTANT: 2 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.

Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Starting parallel fetch

>>> Emerging (1 of 17) perl-gcpan/Sub-Uplevel-0.24 from x-cpan
 * Sub-Uplevel-0.24.tar.gz SHA256 SHA512 WHIRLPOOL size ;-) ...                                                                                                                        [ ok ]
>>> Unpacking source...
>>> Unpacking Sub-Uplevel-0.24.tar.gz to /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/work
>>> Source unpacked in /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/work
>>> Preparing source in /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/work/Sub-Uplevel-0.24 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/work/Sub-Uplevel-0.24 ...
 * Using ExtUtils::MakeMaker
 * perl Makefile.PL PREFIX=/usr INSTALLDIRS=vendor INSTALLMAN3DIR=none DESTDIR=/var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/image/
Checking if your kit is complete...
Looks good
Writing Makefile for Sub::Uplevel
Writing MYMETA.yml and MYMETA.json
>>> Source configured.
>>> Compiling source in /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/work/Sub-Uplevel-0.24 ...
 * emake OTHERLDFLAGS=-Wl,-O1 -Wl,--as-needed
make -j3 'OTHERLDFLAGS=-Wl,-O1 -Wl,--as-needed' 
cp lib/Sub/Uplevel.pm blib/lib/Sub/Uplevel.pm
>>> Source compiled.
>>> Test phase [not enabled]: perl-gcpan/Sub-Uplevel-0.24

>>> Install Sub-Uplevel-0.24 into /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/image/ category perl-gcpan
make -j3 install 
Installing /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/image/usr/lib64/perl5/vendor_perl/5.16.1/Sub/Uplevel.pm
>>> Completed installing Sub-Uplevel-0.24 into /var/tmp/portage/perl-gcpan/Sub-Uplevel-0.24/image/


>>> Installing (1 of 17) perl-gcpan/Sub-Uplevel-0.24
 * This package will overwrite one or more files that may belong to other
 * packages (see list below). You can use a command such as `portageq
 * owners / <filename>` to identify the installed package that owns a
 * file. If portageq reports that only one package owns a file then do
 * NOT file a bug report. A bug report is only useful if it identifies at
 * least two or more packages that are known to install the same file(s).
 * If a collision occurs and you can not explain where the file came from
 * then you should simply ignore the collision since there is not enough
 * information to determine if a real problem exists. Please do NOT file
 * a bug report at http://bugs.gentoo.org unless you report exactly which
 * two packages install the same file(s). Once again, please do NOT file
 * a bug report unless you have completely understood the above message.
 * 
 * Detected file collision(s):
 * 
 *      /usr/lib64/perl5/vendor_perl/5.16.1/Sub/Uplevel.pm
 * 
 * Searching all installed packages for file collisions...
 * 
 * Press Ctrl-C to Stop
 * 
 * dev-perl/Sub-Uplevel-0.240.0
 *      /usr/lib64/perl5/vendor_perl/5.16.1/Sub/Uplevel.pm
 * 
 * Package 'perl-gcpan/Sub-Uplevel-0.24' NOT merged due to file
 * collisions. If necessary, refer to your elog messages for the whole
 * content of the above message.

>>> Failed to install perl-gcpan/Sub-Uplevel-0.24, Log file:

See also bug 432944.

Reproducible: Always




root@condor:/root(67)# emerge --info
Portage 2.1.11.17 (default/linux/amd64/10.0/desktop, gcc-4.6.3, glibc-2.15-r2, 3.5.3-gentoo x86_64)
=================================================================
System uname: Linux-3.5.3-gentoo-x86_64-Intel-R-_Core-TM-2_CPU_6600_@_2.40GHz-with-gentoo-2.2
Timestamp of tree: Mon, 17 Sep 2012 04:00:01 +0000
app-shells/bash:          4.2_p37
dev-java/java-config:     2.1.12
dev-lang/python:          2.7.3-r2, 3.2.3-r1
dev-util/cmake:           2.8.9
dev-util/pkgconfig:       0.27.1
sys-apps/baselayout:      2.2
sys-apps/openrc:          0.10.5
sys-apps/sandbox:         2.6
sys-devel/autoconf:       2.13, 2.69
sys-devel/automake:       1.9.6-r3, 1.10.3, 1.11.6, 1.12.3
sys-devel/binutils:       2.22.90
sys-devel/gcc:            4.6.3
sys-devel/gcc-config:     1.7.3
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.5 (virtual/os-headers)
sys-libs/glibc:           2.15-r2
Repositories: gentoo x11 bicatali science arcon java-overlay sunrise lisp lordvan local x-cpan g-octave
Installed sets: @system
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA PUEL Intel-SDP dlj-1.1 skype-eula skype-4.0.0.7-copyright googleearth AdobeFlash-10.3 cadsoft Oracle-BCLA-JavaSE MakeMKV-EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/openvpn/easy-rsa /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch xattr"
FFLAGS="-march=native -O2 -pipe"
GENTOO_MIRRORS="http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ rsync://ftp.fi.muni.cz/pub/linux/gentoo ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo rsync://gd.tuwien.ac.at/opsys/linux/gentoo ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo ftp://ftp.tu-clausthal.de/pub/linux/gentoo http://gentoo.oregonstate.edu"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="de fr ru"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages/"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/x11 /var/lib/layman/bicatali /var/lib/layman/science /var/lib/layman/arcon /var/lib/layman/java-overlay /var/lib/layman/sunrise /var/lib/layman/lisp /var/lib/layman/lordvan /usr/local/portage /var/lib/cpan /var/lib/g-octave"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="64bit R X Xaw3d a52 aac accessibility acl acpi admin afs alsa amd64 ao apache2 apng applet archive arpack asf aspell assistant atlas audacious audiofile automap automount bash-completion berkdb blas blast bluetooth bluray boo boost branding bzip2 cairo cdda cddb cdf cdio cdparanoia cdr cg cgi chm cli consolekit corba cracklib crypt css cuda cups curl cxx daap db dbi dbm dbus declarative designer devhelp device-mapper dga dia dirac djvu doc dot dri ds2490 ds9097 ds9097u dts dv dvb dvd dvdr dvi dynamicplugin eds egl elf emacs emboss emf encode epiphany evo examples exif expat extensions extra extras faac faad fam ffmpeg fftw firefox fits flac fltk fontconfig foomaticdb fortran fortran95 fpx fts3 fuse g3dvl galago garmin gcj gd gdal gdbm gdu gedit geoip geolocation geos gfortran gif gimp git glade glib glpk gml gmp gnome gnome-keyring gnome-print gnuplot gnutls gphoto2 gpm grammar graphics graphtft graphviz grass gsl gsm gstreamer gtk gtk3 gudev guile harness hddtemp hdf hdf5 hdri html http httpd hvm hwdb iconv icq icu id3 ide imagemagick imap inotify ipod ipv6 irda ithreads jabber jadetex java java6 jbig john jpeg jpeg2k kate kdepim kdrive kerberos kpathsea kqemu kvm ladspa lame lapack latex lcms ldap lensfun libffi libkms libnotify libsamplerate lirc live lm_sensors lua lzo mad mail maildir mapnik math matroska media-library mercurial mikmod mkl mmx mmxext mng modules mono motif mozilla mp3 mp4 mpeg mpi mplayer mtp mudflap multilib musepack musicbrainz mysql mysqli nautilus ncurses neXt netcdf netpbm network networking networkmanager nfs nls nntp nptl nsplugin ntfs ntp numpy obex objc ocaml ocr octave odbc ofa ogdi ogg openexr opengl openmp overview pae pam pango pcre pda pdf perl plotutils plugins png podcast policykit portaudio posix postgres postscript ppds pppd preview-latex proj projectm projectx pstricks pulseaudio python python-bindings q16 q32 qemu qhull qt3support qt4 quicktime readline reiserfs reports rle romio rpc rrdcgi rrdtool sage samba sasl schroedinger science sdk sdl secure-delete semantic-desktop server session shout sip slang slp smbclient smp sms sndfile snmp soup sox speex spell sql sqlite sse sse2 ssl ssse3 startup-notification stlport subtitles subversion suexec svg svm swig szip t1lib tcl tcpd tex tex4ht texmacs tgif theora thesaurus threads thunderbird tidy tiff tk tools truetype udev udisks unicode upower usb userlocales utempter vaapi video virtualbox visio vorbis wav webdav webdav-serf webkit wmf wxwidgets x264 xa xattr xcb xemacs xetex xext xft xine xml xmlreader xmlrpc xpm xv xvid xvmc yaml zlib zvbi" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgid dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump" CAMERAS="canon fuji ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CURL_SSL="nss" DRACUT_MODULES="caps lvm mdraid syslog" DVB_CARDS="tda10045 tda10046lifeview" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="de fr ru" NETBEANS_MODULES="apisupport cnd dlight enterprise ergonomics groovy gsf harness ide identity j2ee java mobility nb php profiler ruby websvccommon xml" PHP_TARGETS="php5-3" PYTHON_TARGETS="python3_2 python2_7" QEMU_SOFTMMU_TARGETS="arm i386 x86_64" QEMU_USER_TARGETS="arm i386 x86_64" RUBY_TARGETS="ruby18 ruby19" USERLAND="GNU" VIDEO_CARDS="nouveau vesa" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, USE_PYTHON




Comment 1


Juergen Rose





          2012-09-17 07:56:49 UTC
        

Created attachment 324082 [details]
generated Math-GSL-0.27.ebuild depending on perl-gcpan/Test-Exception instead of dev-perl/Test-Exception




Comment 2


Juergen Rose





          2012-10-02 18:45:15 UTC
        

Any news? The last 'g-cpan -u' generated several broken ebuilds:
- Math-GSL-0.27.ebuild, depending on perl-gcpan/Test-Exception and perl-gcpan/Test-Class while dev-perl/Test-Exception and perl-gcpan/Test-Class is installed
- MooseX-MethodAttributes-0.28.ebuild, depending on perl-gcpan/Test-Exception while dev-perl/Test-Exception is installed
- Test-Deep-0.110.ebuild, depending on perl-gcpan/Test-Tester while dev-perl/Test-Tester is available
- Class-Load-0.20.ebuild, depending on perl-gcpan/Try-Tiny, perl-gcpan/Package-Stash, perl-gcpan/Test-Fatal, perl-gcpan/Module-Runtime, perl-gcpan/Data-OptList and perl-gcpan/Module-Implementation while dev-perl/Try-Tiny, dev-perl/Package-Stash, dev-perl/Test-Fatal, dev-perl/Module-Runtime, dev-perl/Data-OptList and dev-perl/Module-Implementation is installed
...

The emerging of most of this modules fails to file collision. So all these ebuilds generated by 'c-cpan -u' have manually be removed, which is really nasty.




Comment 3


Juergen Rose





          2012-11-19 14:40:05 UTC
        

Any news?




Comment 4


Juergen Rose





          2012-11-25 12:14:25 UTC
        

If nobody can fix g-cpan, I would vote for removing it from the portage tree. Beside the issue I described here, there are further issues with g-cpan. E.g., packages which are gerenerated by g-cpan as dependency of other packages are entering in /var/lib/portage/world.




Comment 5


Juergen Rose





          2012-12-30 15:48:15 UTC
        

I hit similar issues again. 'g-cpan -u' at caiman fails with:
...
  * File::Temp is part of the core perl install
 * Ebuild already exists for Algorithm-Cluster (perl-gcpan/Algorithm-Cluster)
 * Algorithm-DistanceMatrix already up to date
Calculating dependencies -
Invalid ebuild name: /var/lib/cpan/perl-gcpan/GDGraph/GDGraph-.ebuild


  
[ Results for search key : Test-SubCalls ]
[ Applications found : 2 ]

*  dev-perl/Test-SubCalls
      Latest version available: 1.90.0
      Latest version installed: [ Not Installed ]
      Size of files: 25 kB
      Homepage:      http://search.cpan.org/dist/Test-SubCalls/
      Description:   Track the number of times subs are called
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-gcpan/Test-SubCalls
      Latest version available: 1.09
      Latest version installed: [ Not Installed ]
      Size of files: 25 kB
      Homepage:      http://search.cpan.org/dist/Test-SubCalls/
      Description:   Track the number of times subs are called
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

!!! The short ebuild name "Test-SubCalls" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.


The file /var/lib/cpan/perl-gcpan/GDGraph/GDGraph-.ebuild was generated by g-cpan.



At caiman 'g-cpan -u' fails with:
...
 * Test::Builder::Tester is part of the core perl install
 * Test-File already up to date

These are the packages that would be merged, in order:

Calculating dependencies... done!
!!! One or more packages have been dropped due to
!!! masking or unsatisfied dependencies:

  (media-gfx/gthumb-3.0.2::gentoo, ebuild scheduled for merge)
  (perl-gcpan/Number-Compare-0.03::x-cpan, ebuild scheduled for merge)
  (sci-misc/imagej-1.47h::x-portage, ebuild scheduled for merge)
  (net-libs/libdmapsharing-2.9.15::gentoo, ebuild scheduled for merge)
  (perl-gcpan/Text-Glob-0.09::x-cpan, ebuild scheduled for merge)
  (perl-gcpan/File-Find-Rule-0.33::x-cpan, ebuild scheduled for merge)
  (perl-gcpan/File-Find-Rule-Perl-1.13::x-cpan, ebuild scheduled for merge)
  (perl-gcpan/Imager-0.94::x-cpan, ebuild scheduled for merge)

emerge: It seems we have nothing to resume...
root@caiman:/root(236)# emerge -pvuND world

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] perl-gcpan/Params-Util-1.07::x-cpan  0 kB
[ebuild  N     ] perl-gcpan/Number-Compare-0.03::x-cpan  0 kB
[ebuild  N     ] perl-gcpan/Text-Glob-0.09::x-cpan  0 kB
[ebuild  N     ] perl-gcpan/File-Find-Rule-0.33::x-cpan  0 kB
[ebuild     U  ] perl-gcpan/File-Find-Rule-Perl-1.13::x-cpan [1.12::x-cpan] 0 kB

Total: 5 packages (1 upgrade, 4 new), Size of downloads: 0 kB
...

root@caiman:/root(238)# emerge -pvD gthumb imagej libdmapsharing Imager

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] perl-gcpan/Imager-0.94::x-cpan  0 kB
[ebuild   R    ] sci-misc/imagej-1.47h::x-portage  USE="doc plugins -debug" 0 kB
[ebuild   R    ] net-libs/libdmapsharing-2.9.15:3.0  USE="-doc" 0 kB
[ebuild   R    ] media-gfx/gthumb-3.0.2  USE="cdr exif gnome-keyring gstreamer http jpeg raw slideshow svg tiff -debug {-test}" 0 kB

Total: 4 packages (1 new, 3 reinstalls), Size of downloads: 0 kB
root@caiman:/root(239)# qlist -Iv Params-Util
dev-perl/Params-Util-1.60.0
root@caiman:/root(240)# qlist -Iv Number-Compare
dev-perl/Number-Compare-0.30.0
root@caiman:/root(241)# qlist -Iv Text-Glob
dev-perl/Text-Glob-0.90.0
root@caiman:/root(242)# qlist -Iv File-Find-Rule
dev-perl/File-Find-Rule-0.330.0
perl-gcpan/File-Find-Rule-Perl-1.12


Why 'g-cpan -u' complains about gthumb, imagej and libdmapsharing, which are in current state? Why 'g-cpan -u' wants to create perl-gcpan/Params-Util, perl-gcpan/Text-Glob, perl-gcpan/Number-Compare and perl-gcpan/File-Find-Rule which conflict with dev-perl/Params-Util, dev-perl/Number-Compare, dev-perl/Text-Glob and dev-perl/File-Find-Rule?




Comment 6


Juergen Rose





          2013-02-21 07:50:32 UTC
        

Ping!?




Comment 7


Sergiy Borodych





          2013-02-27 07:25:59 UTC
        

Did someone tried my patches?
https://github.com/gentoo-perl/g-cpan/pull/1




Comment 8


Sergiy Borodych





          2013-02-27 07:26:53 UTC
        

For me it works

# g-cpan -i -v -p Math-GSL
...
* Calling: emerge --pretend Math-GSL

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] dev-perl/Sub-Uplevel-0.240.0 
[ebuild  N     ] perl-core/Data-Dumper-2.139.0 
[ebuild  N     ] dev-perl/Test-Exception-0.310.0 
[ebuild  N    ~] dev-perl/Test-Class-0.380.0  USE="{-test}" 
[ebuild  N     ] dev-perl/Test-Warn-0.240.0  USE="{-test}" 
[ebuild  N     ] virtual/perl-Data-Dumper-2.139.0 
[ebuild  N     ] dev-perl/Test-Differences-0.610.0  USE="{-test}" 
[ebuild  N     ] dev-perl/Test-Most-0.250.0 
[ebuild  N     ] perl-gcpan/Math-GSL-0.27 

The following keyword changes are necessary to proceed:
 (see "package.accept_keywords" in the portage(5) man page for more details)
#required by perl-gcpan/Math-GSL-0.27, required by Math-GSL (argument)
=dev-perl/Test-Class-0.380.0 ~amd64
 * Cleaning temporary space




Comment 9


Juergen Rose





          2013-03-06 18:07:00 UTC
        

Hi Sergiy,

I tried your g-cpan version (g-cpan-0.16.4-r4). I started with the attempt to update Cv:

root@leopard:/root(119)# g-cpan -u Cv
-CPAN: Storable loaded ok (v2.39)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Tue, 05 Mar 2013 09:17:02 GMT
CPAN: LWP::UserAgent loaded ok (v6.04)
CPAN: Time::HiRes loaded ok (v1.9725)
Fetching with LWP:
...
Checksum for /tmp/.cpan/sources/authors/id/Y/YU/YUTA/Cv-0.24.tar.gz ok
CPAN: Archive::Tar loaded ok (v1.90)
Cv-0.24/
Cv-0.24/Changes
Cv-0.24/Cv.inc
...
Cv-0.24/tools/test.sh
Cv-0.24/tools/testdist.pl
CPAN: File::Temp loaded ok (v0.22)
CPAN: Parse::CPAN::Meta loaded ok (v1.4404)
CPAN: CPAN::Meta loaded ok (v2.120921)
CPAN: Module::CoreList loaded ok (v2.80)
./tools/dumpconst.pl -v -o a.pm /usr/include
h2ph -d ./tmp opencv/cxeigen.hpp
mkdir ./tmp
mkdir ./tmp/opencv
Destination directory /usr/local/lib64/perl5/5.16.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
h2ph -d ./tmp opencv/cvaux.h
Destination directory /usr/local/lib64/perl5/5.16.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
h2ph -d ./tmp opencv/cv.h
Destination directory /usr/local/lib64/perl5/5.16.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
...
Destination directory /usr/local/lib64/perl5/5.16.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
opencv/cv.ph did not return a true value at ./tools/dumpconst.pl line 49, <FIND> line 147.
/bin/cp fallback/Constant.pm-2.4.3 a.pm
/bin/cp a.pm lib/Cv/Constant.pm
/bin/rm -f a.pm
/tmp/cv31141.c: In function ‘int main()’:
/tmp/cv31141.c:5:32: error: ‘cvFontQt’ was not declared in this scope
Checking if your kit is complete...
Looks good
Unrecognized argument in LIBS ignored: '/usr/lib64/libopencv_calib3d.so'
Unrecognized argument in LIBS ignored: '/usr/lib64/libopencv_contrib.so'
...
Unrecognized argument in LIBS ignored: '/usr/lib64/libopencv_videostab.so'
Writing Makefile for Cv::Test
...
make[1]: Leaving directory `/var/tmp/portage/perl-gcpan/Cv-0.24/work/Cv-0.24/Test'
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Installing /var/tmp/portage/perl-gcpan/Cv-0.24/image/usr/lib64/perl5/vendor_perl/5.16.2/x86_64-linux-thread-multi/auto/Cv/Cv.bs
...
Installing /var/tmp/portage/perl-gcpan/Cv-0.24/image/usr/lib64/perl5/vendor_perl/5.16.2/x86_64-linux-thread-multi/Cv/Seq/Point.pm
>>> Completed installing Cv-0.24 into /var/tmp/portage/perl-gcpan/Cv-0.24/image/

strip: x86_64-pc-linux-gnu-strip --strip-unneeded -R .comment -R .GCC.command.line
   usr/lib64/perl5/vendor_perl/5.16.2/x86_64-linux-thread-multi/auto/Cv/Cv.so

>>> Installing (1 of 1) perl-gcpan/Cv-0.24
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.

 * GNU info directory index is up-to-date.

And I find the new files under /usr/lib/perl5/vendor_perl/5.16.2/x86_64-linux-thread-multi/Cv. So far so good. But why g-cpan complains about the non existent Destination directory /usr/local/lib64/perl5/5.16.2/? It really does not exist. /usr/local/lib64 is an empty directory.




Then I tried to install Math-GSL-0.27. It beginns with:

root@leopard:/root(125)# g-cpan -i  Math-GSL
-CPAN: Storable loaded ok (v2.39)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Wed, 06 Mar 2013 17:07:24 GMT
|CPAN: LWP::UserAgent loaded ok (v6.04)
CPAN: Time::HiRes loaded ok (v1.9725)
Fetching with LWP:
http://search.cpan.org/CPAN/authors/id/L/LE/LETO/Math-GSL-0.27.tar.gz
...
Checking for GSL..
Found GSL 1.15 (via gsl-config) installed in /usr, CFLAGS=-I/usr/include, -L/usr/lib64 -lgsl -lgslcblas -lm
Asking ExtUtils::PkgConfig with ENV{PKG_CONFIG_PATH}=/usr/pkgconfig:/usr/lib/pkgconfig:/usr/local/lib/pkgconfig:/usr/local/pkgconfig:/usr/libdata/pkgconfig:/usr/local/libdata/pkgconfig:/opt/pkgconfig:

*** can't find cflags for "gsl"
*** is it properly installed and available in PKG_CONFIG_PATH?
 at Build.PL line 156.
 * Scalar::Util is part of the core perl install
 * Ebuild already exists for Test-Exception (perl-gcpan/Test-Exception)
-Fetching with LWP:
http://search.cpan.org/CPAN/authors/id/A/AD/ADIE/Test-Class-0.38.tar.gz
Fetching with LWP:
http://search.cpan.org/CPAN/authors/id/A/AD/ADIE/CHECKSUMS
Checksum for /tmp/.cpan/sources/authors/id/A/AD/ADIE/Test-Class-0.38.tar.gz ok
Test-Class-0.38
Test-Class-0.38/Changes
...
2013-03-06 19:04:13 (9.25 MB/s) - ‘/usr/local/portage/distfiles_leopard/Math-GSL-0.27.tar.gz’ saved [9273965/9273965]

>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Math-GSL
Calculating dependencies |

  
[ Results for search key : Test-Class ]
[ Applications found : 2 ]

*  dev-perl/Test-Class
      Latest version available: 0.380.0
      Latest version installed: [ Not Installed ]
      Size of files: 76 kB
      Homepage:      http://search.cpan.org/dist/Test-Class/
      Description:   Easily create test classes in an xUnit style.
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-gcpan/Test-Class
      Latest version available: 0.38
      Latest version installed: [ Not Installed ]
      Size of files: 76 kB
      Homepage:      http://search.cpan.org/dist/Test-Class/
      Description:   Easily create test classes in an xUnit/JUnit style
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

!!! The short ebuild name "Test-Class" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.



And we have again the problem with the two versions of Test-Class!

Any idea is appreciated.




Comment 10


Juergen Rose





          2013-03-06 18:10:38 UTC
        

The result of 'g-cpan -i -v -p Math-GSL' also differs from yours, Sergiy:

root@leopard:/root(126)# g-cpan -i -v -p Math-GSL
 * Getting CPAN Info for Math::GSL
-CPAN: Storable loaded ok (v2.39)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Wed, 06 Mar 2013 17:07:24 GMT
 * Scanning /usr/local/portage for Math-GSL
 * Scanning /var/lib/cpan for Math-GSL
 * Found ebuild for CPAN name Math-GSL
 * Ebuild already exists for Math-GSL (perl-gcpan/Math-GSL)
 * Calling emerge for Math-GSL

 * Calling: emerge --pretend Math-GSL

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] perl-gcpan/Sub-Uplevel-0.24 
[ebuild  N     ] perl-gcpan/Test-Tester-0.108 
[ebuild  N     ] perl-gcpan/Class-Data-Inheritable-0.08 
[ebuild  N     ] perl-gcpan/Devel-StackTrace-1.30 
[ebuild  N     ] perl-gcpan/Algorithm-Diff-1.1902 
[ebuild  N     ] perl-gcpan/Test-Pod-1.45 
[ebuild  N     ] perl-gcpan/MRO-Compat-0.12 
[ebuild  N     ] perl-gcpan/Test-Exception-0.31 
[ebuild  N     ] perl-gcpan/Exception-Class-1.36 
[ebuild  N     ] perl-gcpan/Test-NoWarnings-1.04 
[ebuild  N     ] perl-gcpan/Text-Diff-1.41 
[ebuild  N     ] perl-gcpan/Tree-DAG_Node-1.09 
[ebuild  N     ] perl-gcpan/Test-Class-0.38 
[ebuild  N     ] perl-gcpan/Test-Warn-0.24 
[ebuild  N     ] perl-gcpan/Test-Differences-0.61 
[ebuild  N     ] perl-gcpan/Test-Deep-0.110 
[ebuild  N     ] perl-gcpan/Test-Most-0.31 
[ebuild  N     ] perl-gcpan/Math-GSL-0.27




Comment 11


Sergiy Borodych





          2013-03-06 19:54:12 UTC
        

You should remove old(created by prev. g-cpan) ebuilds first.
From /usr/local/portage or /var/lib/cpan.




Comment 12


Juergen Rose





          2013-03-08 16:57:45 UTC
        

It still fails. I did:

root@leopard:/root(15)# mv  /var/lib/cpan/perl-gcpan/ /home/rose/var_lib_cpan_perl-cpan_new
root@leopard:/root(16)# g-cpan -i -v -p Math-GSL Math-GSL
* Getting CPAN Info for Math::GSL
-CPAN: Storable loaded ok (v2.39)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Fri, 08 Mar 2013 14:53:03 GMT
 * Scanning /usr/local/portage for Math-GSL
 * Scanning /var/lib/cpan for Math-GSL
 * Scanning /var/lib/layman/sabayon for Math-GSL
 * Scanning /var/lib/layman/sunrise for Math-GSL
 * Scanning /var/lib/layman/x11 for Math-GSL
 * Scanning /var/lib/layman/lisp for Math-GSL
 * Scanning /var/lib/layman/sage-on-gentoo for Math-GSL
 * Scanning /var/lib/g-octave for Math-GSL
 * Scanning /var/lib/layman/science for Math-GSL
|CPAN: Digest::SHA loaded ok (v5.82)
CPAN: Compress::Zlib loaded ok (v2.06)
Checksum for /tmp/.cpan/sources/authors/id/L/LE/LETO/Math-GSL-0.27.tar.gz ok
CPAN: Archive::Tar loaded ok (v1.90)
Math-GSL-0.27
Math-GSL-0.27/MANIFEST.SKIP
...
Test-Exception-0.31/xt/spelling.t
CPAN: Module::Build loaded ok (v0.4003)
Use of uninitialized value $prefer_installer in lc at /usr/lib64/perl5/5.16.2/CPAN/Distribution.pm line 754.
Use of uninitialized value $prefer_installer in lc at /usr/lib64/perl5/5.16.2/CPAN/Distribution.pm line 757.
Warning: prerequisite Sub::Uplevel 0.18 not found.
Checking if your kit is complete...
Looks good
Writing Makefile for Test::Exception
Writing MYMETA.yml and MYMETA.json
Checking prerequisites...
  requires:
    !  Sub::Uplevel is not installed

ERRORS/WARNINGS FOUND IN PREREQUISITES.  You may wish to install the versions
of the modules indicated above before proceeding with this installation
...
Test-Class-0.38/t/test-libs/lib3/Tests/Subdir/Good3.pm
Use of uninitialized value $prefer_installer in lc at /usr/lib64/perl5/5.16.2/CPAN/Distribution.pm line 754.
Use of uninitialized value $prefer_installer in lc at /usr/lib64/perl5/5.16.2/CPAN/Distribution.pm line 757.
Checking if your kit is complete...
Looks good
...
These are the packages that would be merged, in order:

Calculating dependencies |

  
[ Results for search key : PadWalker ]
[ Applications found : 2 ]

*  dev-perl/PadWalker
      Latest version available: 1.960.0
      Latest version installed: [ Not Installed ]
      Size of files: 14 kB
      Homepage:      http://search.cpan.org/dist/PadWalker/
      Description:   play with other peoples' lexical variables
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-gcpan/PadWalker
      Latest version available: 1.96
      Latest version installed: [ Not Installed ]
      Size of files: 14 kB
      Homepage:      http://search.cpan.org/dist/PadWalker/
      Description:   play with other peoples' lexical variables
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

!!! The short ebuild name "PadWalker" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.

... done!
 * Cleaning temporary space
root@leopard:/root(17)#




Comment 13


Sergiy Borodych





          2013-03-14 07:54:39 UTC
        

Strange, because for me it not generate dev-perl/PadWalker dependency neither.

Could you please provide full log (as attach or link to some copy-paste site)?
But be sure what you do full cleanup from old ebuilds before.




Comment 14


Juergen Rose





          2013-05-09 15:45:50 UTC
        

(In reply to comment #13)
> Strange, because for me it not generate dev-perl/PadWalker dependency
> neither.
> 
> Could you please provide full log (as attach or link to some copy-paste
> site)?
> But be sure what you do full cleanup from old ebuilds before.


I just tried the following:
1st) removed all installed perl-gcpan (emerge -C `qlist -IC perl-gcpan`).
2nd) I removed all ebuilds under /var/lib/cpan/perl-gcpan:

root@impala:/root(27)# ll /var/lib/cpan/perl-gcpan/
total 0

3rd) I installed the patches of Comment 7 (https://bugs.gentoo.org/show_bug.cgi?id=435304#c7)

root@impala:/root(28)# qlist -Iv g-cpan
app-portage/g-cpan-0.16.4-r4
...

4th) I tried to reinstall AI-Genetic-Pro:
root@impala:/root(29)# g-cpan -i AI-Genetic-Pro
...
Checksum for /tmp/.cpan/sources/authors/id/S/ST/STRZELEC/AI-Genetic-Pro-0.401.tar.gz ok
CPAN: Archive::Tar loaded ok (v1.90)
...
Warning: prerequisite Class::Accessor::Fast::XS 0 not found.
Warning: prerequisite Struct::Compare 0 not found.
Warning: prerequisite Tie::Array::Packed 0 not found.
Writing Makefile for AI::Genetic::Pro
Writing MYMETA.yml and MYMETA.json
\Checksum for /tmp/.cpan/sources/authors/id/G/GR/GROMMEL/Math-Random-0.71.tar.gz ok
...
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Math-Random
-Checksum for /tmp/.cpan/sources/authors/id/M/MS/MSCHWERN/Exporter-Lite-0.02.tar.gz ok
...
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Exporter-Lite
-Checksum for /tmp/.cpan/sources/authors/id/R/RU/RUZ/Class-Accessor-Fast-XS-0.04.tar.gz ok
...
 * Carp is part of the core perl install
\Checksum for /tmp/.cpan/sources/authors/id/B/BW/BWARFIELD/GDGraph-1.44.tar.gz ok
...
-Checksum for /tmp/.cpan/sources/authors/id/M/MV/MVERB/GDTextUtil-0.86.tar.gz ok
...
/Checksum for /tmp/.cpan/sources/authors/id/L/LD/LDS/GD-2.49.tar.gz ok
...
>>> Downloading 'http://www.cpan.org/authors/id/B/BW/BWARFIELD/GDGraph-1.8.tar.gz'
--2013-05-08 12:34:28--  http://www.cpan.org/authors/id/B/BW/BWARFIELD/GDGraph-1.8.tar.gz
Resolving www.cpan.org (www.cpan.org)... 212.117.177.118, 2a01:608:2:4::2, 2620:101:d000:8::140:1
Connecting to www.cpan.org (www.cpan.org)|212.117.177.118|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-05-08 12:34:28 ERROR 404: Not Found.

!!! Couldn't download 'GDGraph-1.8.tar.gz'. Aborting.
!!! Fetch failed for GDGraph-1.8.tar.gz, can't update Manifest
 * List::Util is part of the core perl install
/Checksum for /tmp/.cpan/sources/authors/id/G/GA/GARU/Clone-0.34.tar.gz ok
...
/Checksum for /tmp/.cpan/sources/authors/id/S/SA/SALVA/Tie-Array-Packed-0.11.tar.gz ok
...
/Checksum for /tmp/.cpan/sources/authors/id/M/MS/MSCHWERN/UNIVERSAL-require-0.13.tar.gz ok
...
/Checksum for /tmp/.cpan/sources/authors/id/A/AD/ADAMK/List-MoreUtils-0.33.tar.gz ok
...
\Checksum for /tmp/.cpan/sources/authors/id/Z/ZE/ZENSPIDER/Struct-Compare-1.0.1.tar.gz ok
...
Struct-Compare-1.0.1/MANIFEST
Checking if your kit is complete...
Looks good
Writing Makefile for Struct::Compare
Writing MYMETA.yml and MYMETA.json
 * Generating ebuild for Struct::Compare
 * Ebuild generated for Struct-Compare
>>> Downloading 'http://distfiles.gentoo.org/distfiles/Struct-Compare-1.0.tar.gz'
--2013-05-08 12:41:40--  http://distfiles.gentoo.org/distfiles/Struct-Compare-1.0.tar.gz
Resolving distfiles.gentoo.org (distfiles.gentoo.org)... 64.50.236.52, 64.50.233.100, 216.165.129.135, ...
Connecting to distfiles.gentoo.org (distfiles.gentoo.org)|64.50.236.52|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-05-08 12:41:41 ERROR 404: Not Found.
...
TTP request sent, awaiting response... 404 Not Found
2013-05-08 12:42:49 ERROR 404: Not Found.

!!! Couldn't download 'Struct-Compare-1.0.tar.gz'. Aborting.
!!! Fetch failed for Struct-Compare-1.0.tar.gz, can't update Manifest
 * Generating ebuild for AI::Genetic::Pro
 * Ebuild generated for AI-Genetic-Pro
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/AI-Genetic-Pro


These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] perl-gcpan/GD-2.49 
[ebuild  N     ] perl-gcpan/Struct-Compare-1.0.1 
[ebuild  N     ] perl-gcpan/Tie-Array-Packed-0.11 
[ebuild  N     ] perl-gcpan/Class-Accessor-0.34 
[ebuild  N     ] perl-gcpan/Clone-0.34 
[ebuild  N     ] perl-gcpan/Math-Random-0.71 
[ebuild  N     ] perl-gcpan/List-MoreUtils-0.33 
[ebuild  N     ] perl-gcpan/UNIVERSAL-require-0.13 
[ebuild  N     ] perl-gcpan/Exporter-Lite-0.02 
[ebuild   R    ] dev-perl/List-MoreUtils-0.330.0 
[ebuild   R    ] dev-perl/Math-Random-0.710.0 
[ebuild   R    ] dev-perl/Class-Accessor-0.340.0 
[ebuild   R    ] dev-perl/UNIVERSAL-require-0.130.0 
[ebuild   R    ] dev-perl/Exporter-Lite-0.20.0 
[ebuild   R    ] dev-perl/Clone-0.340.0 
[ebuild   R    ] dev-perl/GD-2.460.0 
[ebuild  N     ] perl-gcpan/Class-Accessor-Fast-XS-0.04 
[ebuild  N     ] perl-gcpan/GDTextUtil-0.86 
[ebuild   R    ] dev-perl/GDTextUtil-0.860.0 
[ebuild  N     ] perl-gcpan/GDGraph-1.44 
[ebuild   R    ] dev-perl/GDGraph-1.440.0 
[ebuild  N     ] perl-gcpan/AI-Genetic-Pro-0.401 


Beside the fact that emerge could not download Struct-Compare-1.0.tar.gz, it want to reinstall GD, Class-Accessor, Clone, Math-Random, List-MoreUtils, UNIVERSAL-require and Exporter-Lite from CPAN, which are already installed from the portage tree.




Comment 15


Juergen Rose





          2013-05-09 15:54:07 UTC
        

I tried to install Cv:

root@impala:/usr/share/gnome/apps(101)# rm -r /var/lib/cpan/perl-gcpan/*
root@impala:/usr/share/gnome/apps(102)# qlist -Iv perl-gcpan
root@impala:/usr/share/gnome/apps(104)# g-cpan -i Cv 2>&1 | tee g-cpan-i_Cv.log
-CPAN: Storable loaded ok (v2.39)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Wed, 08 May 2013 08:07:30 GMT
CPAN: LWP::UserAgent loaded ok (v6.05)
CPAN: Time::HiRes loaded ok (v1.9725)
Fetching with LWP:
http://search.cpan.org/CPAN/authors/01mailrc.txt.gz
Reading '/tmp/.cpan/sources/authors/01mailrc.txt.gz'
CPAN: Compress::Zlib loaded ok (v2.06)
............................................................................DONE
Fetching with LWP:
http://search.cpan.org/CPAN/modules/02packages.details.txt.gz
...

 * Generating ebuild for Cv
Use of uninitialized value $eb in substitution (s///) at /usr/bin/g-cpan line 899, <DATA> line 3383.
Use of uninitialized value $eb in pattern match (m//) at /usr/bin/g-cpan line 902, <DATA> line 3383.
Use of uninitialized value $eb in split at /usr/bin/g-cpan line 907, <DATA> line 3383.
Use of uninitialized value $eb_version in int at /usr/bin/g-cpan line 780, <DATA> line 3383.
 * Ebuild generated for Cv
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Cv
Calculating dependencies  

  
[ Results for search key : Test-Number-Delta ]
[ Applications found : 2 ]

*  dev-perl/Test-Number-Delta
      Latest version available: 1.30.0
      Latest version installed: [ Not Installed ]
      Size of files: 18 kB
      Homepage:      http://search.cpan.org/dist/Test-Number-Delta/
      Description:   Compare the difference between numbers against a given tolerance
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-gcpan/Test-Number-Delta
      Latest version available: 1.03
      Latest version installed: [ Not Installed ]
      Size of files: 18 kB
      Homepage:      http://search.cpan.org/dist/Test-Number-Delta/
      Description:   Test absolute difference between numbers
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

!!! The short ebuild name "Test-Number-Delta" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.

... done!




Comment 16


Juergen Rose





          2013-05-09 15:54:43 UTC
        

Created attachment 347860 [details]
g-cpan-i_Cv.log




Comment 17


Juergen Rose





          2013-05-09 15:58:18 UTC
        

(In reply to comment #13)
> Strange, because for me it not generate dev-perl/PadWalker dependency
> neither.
> 
> Could you please provide full log (as attach or link to some copy-paste
> site)?
> But be sure what you do full cleanup from old ebuilds before.

Privet Sergiy,

maybe I did not correctly use your patches. How can I check this?

I have:
root@impala:/usr/share/gnome/apps(105)# qlist -v g-cpan
/usr/share/man/man1/g-cpan.1.bz2
/usr/share/doc/g-cpan-0.16.4-r4/ChangeLog.bz2
/usr/lib64/perl5/vendor_perl/5.16.3/Gentoo.pm
/usr/lib64/perl5/vendor_perl/5.16.3/Gentoo/CPAN.pm
/usr/lib64/perl5/vendor_perl/5.16.3/Gentoo/Portage.pm
/usr/lib64/perl5/vendor_perl/5.16.3/Gentoo/UI/Console.pm
/usr/bin/g-cpan
/var/tmp/g-cpan/.keep_app-portage_g-cpan-0
/var/log/g-cpan/.keep_app-portage_g-cpan-0

root@impala:/usr/share/gnome/apps(109)# ll /usr/lib64/perl5/vendor_perl/5.16.3/Gentoo.pm /usr/lib64/perl5/vendor_perl/5.16.3/Gentoo /usr/bin/g-cpan
-r-xr-xr-x 1 root root 41298 May  8 12:09 /usr/bin/g-cpan*
-r--r--r-- 1 root root  2510 May  8 12:09 /usr/lib64/perl5/vendor_perl/5.16.3/Gentoo.pm

/usr/lib64/perl5/vendor_perl/5.16.3/Gentoo:
total 48
-r--r--r-- 1 root root 21165 May  8 12:09 CPAN.pm
-r--r--r-- 1 root root 17699 May  8 12:09 Portage.pm
drwxr-xr-x 2 root root  4096 May  8 12:09 UI/




Comment 18


Juergen Rose





          2013-05-09 16:23:03 UTC
        

Created attachment 347862 [details]
g-cpan-i_Cv.log with /etc/make.globals

Maybe the missing /etc/make.globals link (see Bug 465840 and Bug 432992) was the reason for some issues. At least after creating this link 'g-cpan -i Cv' worked.


root@impala:/usr/share/gnome/apps(114)# qlist -Iv perl-gcpan
root@impala:/usr/share/gnome/apps(115)# rm -r /var/lib/cpan/perl-gcpan/*
root@impala:/usr/share/gnome/apps(116)# g-cpan -i Cv 2>&1 | tee g-cpan-i_Cv.logroot@impala:/root(123)# ll /etc/make.globals
lrwxrwxrwx 1 root root 38 May  9 18:07 /etc/make.globals -> /usr/share/portage/config/make.globals
root@impala:/root(124)# qlist -Iv Cv
perl-gcpan/Cv-0.27
root@impala:/root(125)# qlist -Iv perl-gcpan
perl-gcpan/Cv-0.27




Comment 19


Juergen Rose





          2014-07-17 10:54:52 UTC
        

(In reply to Juergen Rose from comment #18)
> Created attachment 347862 [details]
> g-cpan-i_Cv.log with /etc/make.globals
> 
> Maybe the missing /etc/make.globals link (see Bug 465840 and Bug 432992) was
> the reason for some issues. At least after creating this link 'g-cpan -i Cv'
> worked.
> 
> 
> root@impala:/usr/share/gnome/apps(114)# qlist -Iv perl-gcpan
> root@impala:/usr/share/gnome/apps(115)# rm -r /var/lib/cpan/perl-gcpan/*
> root@impala:/usr/share/gnome/apps(116)# g-cpan -i Cv 2>&1 | tee
> g-cpan-i_Cv.logroot@impala:/root(123)# ll /etc/make.globals
> lrwxrwxrwx 1 root root 38 May  9 18:07 /etc/make.globals ->
> /usr/share/portage/config/make.globals
> root@impala:/root(124)# qlist -Iv Cv
> perl-gcpan/Cv-0.27
> root@impala:/root(125)# qlist -Iv perl-gcpan
> perl-gcpan/Cv-0.27


The missing missing /etc/make.globals link was not the real reason. Now 'g-cpan -i Cv' with perl-5.18.2-r1 and g-cpan-0.16.5 just generated the same errors.
First it generated the
/var/lib/cpan/perl-gcpan/Cv
/var/lib/cpan/perl-gcpan/Test-Exception
/var/lib/cpan/perl-gcpan/Sub-Uplevel
directories, instead of using the dev-perl/Sub-Uplevel and dev-perl/Test-Exception packages and then it failed due to ambiguous Sub-Uplevel packages:

root@caiman:/root(20)# qlist -Iv g-cpan
app-portage/g-cpan-0.16.5
root@caiman:/root(21)# qlist -Iv dev-lang/perl
dev-lang/perl-5.18.2-r1
root@caiman:/root(22)# qlist -Iv perl-gcpan/Cv
root@caiman:/root(23)# ll /etc/make.globals
lrwxrwxrwx 1 root root 38 Jun 19  2013 /etc/make.globals -> /usr/share/portage/config/make.globals
root@caiman:/root(24)# g-cpan -i Cv
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
-CPAN: Storable loaded ok (v2.45)
Reading '/tmp/.cpan/Metadata'
  Database was generated on Thu, 17 Jul 2014 10:29:02 GMT
|CPAN: LWP::UserAgent loaded ok (v6.05)
CPAN: Time::HiRes loaded ok (v1.9726)
Fetching with LWP:
http://search.cpan.org/CPAN/authors/id/Y/YU/YUTA/Cv-0.29.tar.gz

...

>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Sub-Uplevel
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
 * Module::Build is part of the core perl install
 * Test::Builder is part of the core perl install
 * Generating ebuild for Test::Exception
 * Ebuild generated for Test-Exception
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Test-Exception
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
Use of uninitialized value $_[1] in read at /usr/lib64/perl5/5.18.2/x86_64-linux-thread-multi/IO/Handle.pm line 463.
 * Ebuild already exists for Test-Number-Delta (perl-gcpan/Test-Number-Delta)
 * ExtUtils::MM_Cygwin is part of the core perl install
 * Ebuild already exists for ExtUtils-PkgConfig (dev-perl/extutils-pkgconfig)
 * Skipping ExtUtils::MakeMaker dependency
 * Generating ebuild for Cv
Use of uninitialized value $eb in substitution (s///) at /usr/bin/g-cpan line 899, <DATA> line 2151.
Use of uninitialized value $eb in pattern match (m//) at /usr/bin/g-cpan line 902, <DATA> line 2151.
Use of uninitialized value $eb in split at /usr/bin/g-cpan line 907, <DATA> line 2151.
Use of uninitialized value $eb_version in int at /usr/bin/g-cpan line 780, <DATA> line 2151.
 * Ebuild generated for Cv
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Cv

 * IMPORTANT: 1 news items need reading for repository 'gentoo'.
 * Use eselect news to read news items.

Calculating dependencies -

  
[ Results for search key : Sub-Uplevel ]
[ Applications found : 2 ]

*  dev-perl/Sub-Uplevel
      Latest version available: 0.240.0
      Latest version installed: [ Not Installed ]
      Size of files: 22 kB
      Homepage:      http://search.cpan.org/dist/Sub-Uplevel/
      Description:   Apparently run a function in a higher stack frame
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

*  perl-gcpan/Sub-Uplevel
      Latest version available: 0.24
      Latest version installed: [ Not Installed ]
      Size of files: 22 kB
      Homepage:      http://search.cpan.org/dist/Sub-Uplevel/
      Description:   apparently run a function in a higher stack frame
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

!!! The short ebuild name "Sub-Uplevel" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.

... done!




Comment 20


Juergen Rose





          2014-07-17 14:09:16 UTC
        

Perl packages, which fails to install with g-cpan-0.16.5:
---------------------+---------------------------------------------------
cpan pkg             | cpan pkg which is tried to install as dependency
                     | or other error
---------------------+---------------------------------------------------
Cv                   | Test-Exception-0.32
Device-Arduino-LCD   | Device-SerialPort-1.04, Class-MethodMaker-2.21
HTML-SimpleLinkExtor | Business-ISBN-Data-2.07,  generates endless loop
Imager               | Parse-RecDescent-1.967009
Math-GSL             | Insufficient permissions! at /usr/lib64/perl5/vendor_perl/5.18.2/Gentoo/CPAN.pm line 185
RRDTool-Creator      | Log-Log4perl-1.44
RRDTool-OO           | Log-Log4perl-1.44
Statistics-Basic     | Number-Format-1.73
Test-Benchmark       | Test-Tester-0.109
Tk-TIFF              | Insufficient permissions! at /usr/lib64/perl5/vendor_perl/5.18.2/Gentoo/CPAN.pm line 185
---------------------+---------------------------------------------------

The following packages can be installed with g-cpan:

Algorithm-Cluster
Algorithm-ClusterPoints
Algorithm-DistanceMatrix
Algorithm-Permute
Chart-Graph
GD-Dashboard
Graphics-GnuplotIF
LaTeX-Writer-Simple
Math-Function-Roots
String-Random
Term-Gnuplot
Tk-FileDialog
Tk-Gauge
Tk-LCD
Tk-MinMaxScale
Tk-WaitBox




Comment 21


Sergiy Borodych





          2016-05-06 12:57:07 UTC
        

Current status for =app-portage/g-cpan-9999.
It will be 0.16.7 soon.

---------------------+---------------------------------------------------
cpan pkg             | current status
---------------------+---------------------------------------------------
Cv                   | * Ebuild already exists for Test-Exception (dev-perl/Test-Exception)
Device-Arduino-LCD   | * Ebuild already exists for Device-SerialPort (dev-perl/Device-SerialPort), Ebuild already exists for Class-MethodMaker (dev-perl/Class-MethodMaker)
HTML-SimpleLinkExtor | no Business-ISBN-Data in deps, all going fine
Imager               | * Ebuild already exists for Parse-RecDescent (dev-perl/Parse-RecDescent)
Math-GSL             | * Ebuild generated for Math-GSL
RRDTool-Creator      | * Ebuild already exists for Log-Log4perl (dev-perl/Log-Log4perl)
RRDTool-OO           | * Ebuild already exists for Log-Log4perl (dev-perl/Log-Log4perl)
Statistics-Basic     | * Ebuild already exists for Number-Format (dev-perl/Number-Format)
Test-Benchmark       | no Test-Tester in deps at the moment
Tk-TIFF              | * Ebuild generated for Tk-TIFF
---------------------+---------------------------------------------------

Please check from your side.
If you have other issues please open bug reports on https://github.com/gentoo-perl/g-cpan/issues


Other issue now:
---------------------+---------------------------------------------------
Cv                   | Can't link/include C library 'opencv_core', aborting.
Imager               | Libraries *not* found:  FT1  Win32
---------------------+---------------------------------------------------

Seem like we need to detect required libraries in some way, but this is another story.




Comment 22


Juergen Rose





          2016-05-06 19:29:13 UTC
        

(In reply to Sergiy Borodych from comment #21)
> Current status for =app-portage/g-cpan-9999.
> It will be 0.16.7 soon.
> 
> ---------------------+---------------------------------------------------
> cpan pkg             | current status
> ---------------------+---------------------------------------------------
> Cv                   | * Ebuild already exists for Test-Exception
> (dev-perl/Test-Exception)
> Device-Arduino-LCD   | * Ebuild already exists for Device-SerialPort
> (dev-perl/Device-SerialPort), Ebuild already exists for Class-MethodMaker
> (dev-perl/Class-MethodMaker)
> HTML-SimpleLinkExtor | no Business-ISBN-Data in deps, all going fine
> Imager               | * Ebuild already exists for Parse-RecDescent
> (dev-perl/Parse-RecDescent)
> Math-GSL             | * Ebuild generated for Math-GSL
> RRDTool-Creator      | * Ebuild already exists for Log-Log4perl
> (dev-perl/Log-Log4perl)
> RRDTool-OO           | * Ebuild already exists for Log-Log4perl
> (dev-perl/Log-Log4perl)
> Statistics-Basic     | * Ebuild already exists for Number-Format
> (dev-perl/Number-Format)
> Test-Benchmark       | no Test-Tester in deps at the moment
> Tk-TIFF              | * Ebuild generated for Tk-TIFF
> ---------------------+---------------------------------------------------
> 
> Please check from your side.
> If you have other issues please open bug reports on
> https://github.com/gentoo-perl/g-cpan/issues
> 
> 
> Other issue now:
> ---------------------+---------------------------------------------------
> Cv                   | Can't link/include C library 'opencv_core', aborting.
> Imager               | Libraries *not* found:  FT1  Win32
> ---------------------+---------------------------------------------------
> 
> Seem like we need to detect required libraries in some way, but this is
> another story.


 'g-cpan -i Cv' now with g-cpan-0.16.6 fails here mostly as before with:


 * Ebuild generated for Cv
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Cv
Calculating dependencies |

  
[ Results for search key : Sub-Uplevel ]
*  dev-perl/Sub-Uplevel
      Latest version available: 0.250.0
      Latest version installed: [ Not Installed ]
      Size of files: 27 KiB
      Homepage:      http://search.cpan.org/dist/Sub-Uplevel/
      Description:   Apparently run a function in a higher stack frame
      License:       || ( Artistic GPL-1+ )

*  perl-gcpan/Sub-Uplevel
      Latest version available: 0.25
      Latest version installed: [ Not Installed ]
      Size of files: 27 KiB
      Homepage:      http://search.cpan.org/dist/Sub-Uplevel/
      Description:   apparently run a function in a higher stack frame
      License:       || ( Artistic GPL-1 GPL-2 GPL-3 )

[ Applications found : 4 ]

!!! The short ebuild name "Sub-Uplevel" is ambiguous. Please specify
!!! one of the above fully-qualified ebuild names instead.

... done!
root@lynx:/root(30)# qlist -Iv g-cpan
app-portage/g-cpan-0.16.6




Comment 23


Sergiy Borodych





          2016-05-06 19:47:17 UTC
        

In such cases you need to remove old perl-gcpan packages (whole package dir) and try again.
Like: rm -rf /var/lib/cpan/perl-gcpan/Sub-Uplevel/

It might happens from time to time, as packages add/remove/move from/to portage.
Also your current issue maybe due to old g-cpan bugs...




Comment 24


Juergen Rose





          2016-05-07 13:42:15 UTC
        

(In reply to Sergiy Borodych from comment #23)
> In such cases you need to remove old perl-gcpan packages (whole package dir)
> and try again.
> Like: rm -rf /var/lib/cpan/perl-gcpan/Sub-Uplevel/
> 
> It might happens from time to time, as packages add/remove/move from/to
> portage.
> Also your current issue maybe due to old g-cpan bugs...

Removing of Subdirectories of /var/lib/cpan/perl-gcpan/ seems not to help for me.
E.g., after removing the subdirectories, which was created during my last attempt to install g-cpan/Cv, I have now:

root@lynx:/root(84)# ll  /var/lib/cpan/perl-gcpan/
total 44
drwxr-xr-x 3 root root 4096 Sep 21  2014 Algorithm-Cluster/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Algorithm-Permute/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Chart-Graph/
drwxr-xr-x 3 root root 4096 Sep 21  2014 GD-Dashboard/
drwxr-xr-x 3 root root 4096 Sep 21  2014 LaTeX-Writer-Simple/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Math-Function-Roots/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Term-Gnuplot/
drwxr-xr-x 3 root root 4096 Jul 25  2014 Text-SimpleTable/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-FileDialog/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-LCD/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-WaitBox/

I now try again to install Cv:

root@lynx:/root(85)# g-cpan -iv Cv
 * Getting CPAN Info for Cv
-Reading '/tmp/.cpan/Metadata'
  Database was generated on Fri, 06 May 2016 18:53:52 GMT
 * Scanning /var/lib/layman/activehome for Cv
 * Scanning /var/lib/cpan for Cv
 * Scanning /usr/local/portage for Cv
 * Scanning /var/lib/layman/sunrise for Cv
 * Scanning /var/lib/layman/science for Cv
 * Scanning /var/lib/layman/tlp for Cv
 * Scanning /var/lib/layman/x11 for Cv
 * Scanning /var/lib/layman/ago for Cv
 * Scanning /var/lib/g-octave for Cv
 * Scanning /var/lib/layman/sage-on-gentoo for Cv
|Checksum for /tmp/.cpan/sources/authors/id/Y/YU/YUTA/Cv-0.29.tar.gz ok
./tools/dumpconst.pl -v -o a.pm /tmp/.cpan/build/Cv-0.29-LtD_cF/lib/Cv /usr/include/
find: ‘opencv*’: No such file or directory
h2ph -d ./tmp opencv/cvwimage.h
mkdir ./tmp
mkdir ./tmp/opencv
Destination directory /usr/local/lib64/perl5/5.22.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
h2ph -d ./tmp opencv/cvaux.hpp
Destination directory /usr/local/lib64/perl5/5.22.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
h2ph -d ./tmp opencv/cv.h
Destination directory /usr/local/lib64/perl5/5.22.2/x86_64-linux-thread-multi doesn't exist or isn't a directory
...
 * Test::Builder is part of the core perl install (located: /usr/lib64/perl5/5.22.2/Test/Builder.pm)
 * Checking on dependency Sub::Uplevel for Test::Exception
 * Scanning /var/lib/layman/activehome for Sub-Uplevel
 * Scanning /var/lib/cpan for Sub-Uplevel
...
 * Checking on dependency Test::Harness for Test::Exception
 * Test::Harness is part of the core perl install (located: /usr/lib64/perl5/5.22.2/Test/Harness.pm)
 * Checking on dependency overload for Test::Exception
 * overload is part of the core perl install (located: /usr/lib64/perl5/5.22.2/overload.pm)
 * Skipping ExtUtils::MakeMaker dependency
 * Create directory '/var/lib/cpan/perl-gcpan/Test-Exception'
 * Create directory '/var/lib/cpan/perl-gcpan/Test-Exception/files'
...
 * Ebuild already exists for ExtUtils-PkgConfig (dev-perl/extutils-pkgconfig)
 * Checking on dependency Test::Number::Delta for Cv
 * Scanning /var/lib/layman/activehome for Test-Number-Delta
...
 * Ebuild generated for Cv
>>> Creating Manifest for /var/lib/cpan/perl-gcpan/Cv
 * Calling emerge for Sub-Uplevel Test-Exception Test-Number-Delta Cv

 * Calling: emerge  Sub-Uplevel Test-Exception Test-Number-Delta Cv

...



So g-cpan installs perl-gcpan/Test-Number-Delta-1.06, perl-gcpan/Sub-Uplevel-0.25 and perl-gcpan/Test-Exception-0.43 not realising, that there are dev-perl-ebuilds for the same packages:
Sub-Uplevel-0.250.0, Test-Exception-0.430.0 and Test-Number-Delta-1.60.0.

Now I have under /var/lib/cpan/perl-gcpan/: 

root@lynx:/root(7)# ll -t /var/lib/cpan/perl-gcpan/
total 60
drwxr-xr-x 3 root root 4096 May  7 15:15 Cv/
drwxr-xr-x 3 root root 4096 May  7 15:15 Test-Number-Delta/
drwxr-xr-x 3 root root 4096 May  7 15:14 Test-Exception/
drwxr-xr-x 3 root root 4096 May  7 15:14 Sub-Uplevel/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-FileDialog/
drwxr-xr-x 3 root root 4096 Sep 21  2014 LaTeX-Writer-Simple/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Chart-Graph/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-WaitBox/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Math-Function-Roots/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Tk-LCD/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Term-Gnuplot/
drwxr-xr-x 3 root root 4096 Sep 21  2014 GD-Dashboard/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Algorithm-Permute/
drwxr-xr-x 3 root root 4096 Sep 21  2014 Algorithm-Cluster/
drwxr-xr-x 3 root root 4096 Jul 25  2014 Text-SimpleTable/
 

I delete the g-cpan-packages installed depending on Cv and 
als remove again the directories created by Cv:
root@lynx:/root(8)# emerge -C Test-Number-Delta Sub-Uplevel Test-Exception
root@lynx:/root(9)# rm -r /var/lib/cpan/perl-gcpan/Cv /var/lib/cpan/perl-gcpan/Test-Number-Delta/ /var/lib/cpan/perl-gcpan/Test-Exception/ /var/lib/cpan/perl-gcpan/Sub-Uplevel/



I try now to install Tk-Gauge with g-cpan, which fails again. G-cpan tries to install g-cpan/Tk-804.033 not realizing, that already dev-perl/Tk-804.33.0 is installed resulting in a file collision.

root@lynx:/root(10)# g-cpan -iv Tk-Gauge
 * Getting CPAN Info for Tk::Gauge
-Reading '/tmp/.cpan/Metadata'
  Database was generated on Fri, 06 May 2016 18:53:52 GMT
 * Scanning /var/lib/layman/science for Tk-Gauge
 * Scanning /var/lib/g-octave for Tk-Gauge
 * Scanning /var/lib/layman/ago for Tk-Gauge
 * Scanning /usr/local/portage for Tk-Gauge
 * Scanning /var/lib/layman/x11 for Tk-Gauge
 * Scanning /var/lib/layman/sunrise for Tk-Gauge
 * Scanning /var/lib/cpan for Tk-Gauge
 * Scanning /var/lib/layman/tlp for Tk-Gauge
 * Scanning /var/lib/layman/sage-on-gentoo for Tk-Gauge
 * Scanning /var/lib/layman/activehome for Tk-Gauge
|Checksum for /tmp/.cpan/sources/authors/id/L/LU/LUSOL/Tk-Gauge-0.3.tar.gz ok
/tmp/.cpan/build/Tk-Gauge-0.3-dX9QLe does not start with /usr/lib64/perl5/vendor_perl/5.22.2/x86_64-linux-thread-multi
i.e. building outside Tk itself
Checking if your kit is complete...
Looks good
Generating a Unix-style Makefile
Writing Makefile for Tk::Gauge
Writing MYMETA.yml and MYMETA.json
 * Checking on dependency Tk for Tk::Gauge
...
>>> Installing (1 of 3) perl-gcpan/Tk-804.033::g-cpan
 * This package will overwrite one or more files that may belong to other
 * packages (see list below). You can use a command such as `portageq
...
 * Detected file collision(s):
 * 
 *      /usr/share/man/man1/widget.1.bz2
 *      /usr/share/man/man1/ptked.1.bz2
...
 *      /usr/lib64/perl5/vendor_perl/5.22.2/x86_64-linux-thread-multi/Tk.pm
 *      /usr/lib64/perl5/vendor_perl/5.22.2/x86_64-linux-thread-multi/Tk.pod
...
>> Failed to install perl-gcpan/Tk-804.033, Log file:

>>>  '/var/tmp/portage/perl-gcpan/Tk-804.033/temp/build.log'

 * GNU info directory index is up-to-date.
 * Cleaning temporary space
root@lynx:/root(11)# qlist -Iv Tk
dev-perl/Tk-804.33.0
dev-perl/Tk-JPEG-Lite-2.15.0
perl-gcpan/Tk-FileDialog-1.3
perl-gcpan/Tk-LCD-1.3
perl-gcpan/Tk-WaitBox-1.3



By the I am using now app-portage/g-cpan-0.16.7.




Comment 25


Sergiy Borodych





          2016-05-20 07:46:07 UTC
        

Do you have latest portage tree? synced?

Please add the full log for the last case.
Because I can't reproduce it.

$g-cpan -ipv Tk-Gauge
...
 * Checking on dependency Tk for Tk::Gauge
...
 * Scanning /usr/portage for Tk
 * Found ebuild for CPAN name Tk
 * Ebuild already exists for Tk (dev-lang/tk)

$ ack DEPEND Tk-Gauge-0.3.ebuild
DEPEND="dev-lang/tk




Comment 26


Sergiy Borodych





          2016-05-20 07:52:23 UTC
        

I see another issue here.
Seems like we should depend on dev-perl/Tk instead of dev-lang/tk.
Right?

But this is another bug. I will add it to github issue list.




Comment 27


Sergiy Borodych





          2016-07-28 14:16:05 UTC
        

(In reply to Sergiy Borodych from comment #25)
> Do you have latest portage tree? synced?
> 
> Please add the full log for the last case.
> Because I can't reproduce it.
> 
> $g-cpan -ipv Tk-Gauge
> ...
>  * Checking on dependency Tk for Tk::Gauge
> ...
>  * Scanning /usr/portage for Tk
>  * Found ebuild for CPAN name Tk
>  * Ebuild already exists for Tk (dev-lang/tk)
> 
> $ ack DEPEND Tk-Gauge-0.3.ebuild
> DEPEND="dev-lang/tk

Please re-open if you still have the issue.
For other kind of issues please open new bugs.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

