Title: 366141 – Qt-<something> makes bad pkgconfig files
URL: https://bugs.gentoo.org/show_bug.cgi?id=366141

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 366141
Qt-<something> makes bad pkgconfig files
Last modified: 2011-11-19 00:33:06 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 366141 
      - Qt-<something> makes bad pkgconfig files


Summary:
Qt-<something> makes bad pkgconfig files
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-05-05 20:50 UTC by Blu3





      Modified:
    
2011-11-19 00:33 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Blu3





          2011-05-05 20:50:42 UTC
        

<i'm not sure where to place the blame, and it could be my fault since it's not showing up in bug reports>

in my /usr/lib64/pkgconfig/Qt*.pc files, the vport working directory is getting stored.

Good:
QtCore.pc:moc_location=${prefix}/bin/moc
QtCore.pc:uic_location=${prefix}/bin/uic
QtCore.pc:rcc_location=${prefix}/bin/rcc
QtCore.pc:lupdate_location=${prefix}/bin/lupdate
QtCore.pc:lrelease_location=${prefix}/bin/lrelease

Bad:
QtCore.pc~:moc_location=${prefix}/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/moc
QtCore.pc~:uic_location=${prefix}/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/uic
QtCore.pc~:rcc_location=${prefix}/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/rcc
QtCore.pc~:lupdate_location=${prefix}/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/lupdate
QtCore.pc~:lrelease_location=${prefix}/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/lrelease


this results in emerges failing due to /usr/vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2/bin/moc not being found.

--------

Portage 2.2.0_alpha30 (default/linux/amd64/10.0, gcc-4.5.2, libc-0-r0, 2.6.37-gentoo-Blu3 x86_64)
=================================================================
System uname: Linux-2.6.37-gentoo-Blu3-x86_64-AMD_Phenom-tm-_II_X4_965_Processor-with-gentoo-2.0.2
Timestamp of tree: Thu, 05 May 2011 15:30:01 +0000
ccache version 3.1.4 [disabled]
app-shells/bash:     4.2_p8-r1
dev-java/java-config: 1.3.7-r1, 2.1.11-r3
dev-lang/python:     2.4.6, 2.6.6-r2, 2.7.1-r1, 3.1.3-r1
dev-util/ccache:     3.1.4
dev-util/cmake:      2.8.4-r1
sys-apps/baselayout: 2.0.2
sys-apps/openrc:     0.8.2-r1
sys-apps/sandbox:    2.5
sys-devel/autoconf:  2.13::<unknown repository>, 2.68
sys-devel/automake:  1.4_p6-r1, 1.5-r1, 1.6.3-r1, 1.7.9-r2, 1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1-r1, 9999
sys-devel/binutils:  2.20.1-r1, 2.21
sys-devel/gcc:       4.2.2, 4.2.3, 4.2.4, 4.3.1-r1, 4.3.2-r2, 4.3.3-r2, 4.3.4, 4.4.1, 4.4.2, 4.4.3-r2, 4.4.5, 4.5.0, 4.5.1-r1, 4.5.2
sys-devel/gcc-config: 1.4.1-r1
sys-devel/libtool:   2.4-r1
sys-devel/make:      3.82
sys-kernel/linux-headers: 2.6.38
sys-libs/glibc:      2.13-r2
virtual/os-headers:  0
Repositories: gentoo mozilla enlightenment bluelabs
Installed sets: 
ACCEPT_KEYWORDS="amd64 ~amd64 ~x86"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -mtune=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/4.2/env /usr/kde/4.2/share/config /usr/kde/4.2/shutdown /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.0/conf /usr/share/openvpn/easy-rsa /var/bind /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -mtune=native -O2 -pipe -fno-tree-pre"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS="--buildpkg"
FEATURES="assume-digests binpkg-logs buildpkg candy distlocks fixlafiles fixpackages metadata-transfer news parallel-fetch preserve-libs protect-owned sandbox sfperms unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://gentoo.netnitco.net http://distro.ibiblio.org/pub/linux/distributions/gentoo/ http://mirror.csclub.uwaterloo.ca/gentoo-distfiles/"
LANG="en_US.utf8"
LDFLAGS=""
LINGUAS="en en_US es es_AR es_ES zh zh_CN zh_TW"
MAKEOPTS="-j1 -l5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/usr/vport"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/mozilla /usr/local/portage/layman/enlightenment /usr/local/portage"
SYNC="rsync://ranger.blue-labs.org/gentoo-portage"
USE="16bit 3dnow 3dnowext 64bit X X509 a52 aac aalib accessibility acl acpi acpi4linux activefilter aiglx aim aimextras aio akode allegro alsa amarok amd amd64 amr amrnb amrr amrwb ao aoss aotuv apache2 apng artworkextra asf asterisk async audacious audiofile auth authfile autoipd automount avantgo background bash-completion bashlogger bcmath bgpclassless bigpatch bindist binfilter bittorrent bl bluetooth bogofilter bonjour bonobo bootsplash boundschecking bugzilla buttons bzip2 bzlib c++ cairo calendar canvas cap caps captury carbone_theme cdaudio cdda cdio cdrom cg checkpath chipcard chm chroot clearcase cli cmake codecs config-file config_wizard connection-sharing consolekit cpudetection cpulimit cracklib crypt css csv ctype cups curl curlwrappers custom-cflags customlog cviewer cvs cvsgraph cxx daap dar32 dar64 dba dbox2 dbus dbx dcc debugger device-mapper dga dhcp dhcpcd dio discard-path disk-cache disk-partition diskio distcache divx divx4linux djbfft djvu dmalloc dmx dnd dns dpms dri dso dtmf dts dv dvb dvd dvdr dvdread dynagraph dynamic eap-tls ebook ecc edl effects elf emoticon emovix emul-linux-x86 enca encode enscript epson erandom escreen esd ethereal evo evo2 exif exscalibar extensions extra extrafilters extraicons extramodules extras faac faad fam fame fat fax festival ffmpeg fftw figlet filepicker filter firefox fits fix-connected-rt flac flash flatfile flexresp flood fltk fluidsynth fmod follow-xff font-server fontconfig foomaticdb force-cgi-redirect fortran fping fpx freenode freesound freetts freetype frontendonly ft2232 ftd2xx ftdi ftp ftruncate fts3 fuse galago garmin gb gd gdal gdb gdbm geometry geos ggi gif gimp gimpprint git glade glgd glib glibc-compat20 glsa glx gmail gmailtimestamps gmedia gmp gnokii gnuplot gpg gpg2-experimental gphoto2 gpm gps grammar graphicsmagick graphviz grass gs gsl gsm gssapi gtk gtkhtml gtkspell gzip h224 h281 h323 hardened hash hbci hddtemp hdf5 hesiod hfs high-ints hostap hpn html htmlhandbook http http-forms http-server httpd hyperestraier iax ibam ical icap-client icecast iconv icp icq icu id3 id3tag ide idea idled idn ieee1394 ifp iksemel ilbc imagemagick imap imlib imlib2 inherit-graph injection inkjar inline inode inotify inquisitio insecure-drivers insecure-patches insecure-savers ipod iproute2 ipv6 irda irmc ivr ixj j2ee jabber jasper java javacomm javamail javascript jbig jce jms jmx john jp2 jpeg jpeg2k jruby json jumpplay kadu-modules kadu-voice kcal kde kdepim kdgraphics kerberos kexi keyscrub kipi koffice-plugin kpathsea kqemu ladspa lame latex lcms ldap ldapsam ldirectord libcaca libclamav libdsk libg++ libgcrypt libgd libgda libnotify libproxy libsamplerate libssh2 libtiger libvisual lid lids linuxkeys linuxthreads-tls live lm_sensors logitech-mouse logrotate lto ltsp lv2 lzma lzo macmenu mad madwifi management mapnik mbrola md5sum mem-cache memlimit menubar messages messenger mew mfd-rewrites mgetty mhash mime mimencode ming mixer mjpeg mmap mmx mmxext mng modplug modules moneyplex monkey mounts-check mozcalendar mozdevelop mozdom mozilla moznoirc moznopango mozp3p mozsha1 mozsvg mozxmlterm mp2 mp3 mp3tunes mp4 mp4live mpeg mpeg2 mpeg4 mpi mplayer mschap msdav msn mtp mudflap multicall multilib multipath multislot musepack musicbrainz mythtv nagios-dns nagios-ntp nagios-ping nagios-ssh ncurses nemesi nepomuk net netclient netjack netpbm netserver network network-cron networkmanager newspr nforce2 ngui njb nls nntp no-old-linux noctcp nodrm normalizemime npp nptl nptlonly nsplugin nspr nss ntfs ntlm nvidia nviz nvram nvtv oav objc objc++ objc-gc odbc odk offensive ofx ogg oggvorbis on-the-fly-crypt openal openexr opengl openmp openssl operanom2 optimisememory optimization optimized-qmake ortp osc oscar ospfapi overload pam pam_chroot pam_timestamp pango parse-clocks passwordsave patch patented pcap pcapnav pch pci pcntl pcre pda pdf pdo pear perl perl-geoipupdate pg-hier pg-vacuumdelay php pic pie pink pipechan plasma player plib plugins plx pmu png pnm pnp policykit portage posix postfix postgres postproc povray ppds pppd prediction prelude print priority pulseaudio python python3 qa qmake qt3support qt4 quicktime quotas quotes radio radiotap rar rc5 rcu rdesktop readline realmedia realms realtime redland reflection reiser4 reiserfs remote replytolist reports rfc4175 rfkill rle romio rpm rrdtool rss rt2500pci rtc rtsp samba sametime sasl sbc scanner scp screen scripts sdl seamonkey secure-delete semantic-desktop sendemail sendfile sendmail sensord serial server session setup-plugin sftp sftplogging sguil sha1 shape shaper shared sharedext sharedmem shine shmvideo shorten shout silc simplexml sip sipim skins slp smime smp sms smtp smux sndfile sni snortsam soap sockets socks5 softfax solver soprano sound soundex soundtouch sourcecaps sourceview sox spamassassin speech speex spell spf spl spreadsheet sql sqlite sqlite3 srp srt srtp sse sse2 ssl startup-notification stats stlport stream strong-optimization subp subtitles subversion suexec suhosin suid svg svgz svn-mirror swat symlink sysfs syslog system-sqlite sysvipc szip t1lib tabs taglib talkfilters tcpmd5 tcsim telepathy tga theora thesaurus threads thumbnail tidy tiff timidity tivo tokenizer tomsfastmath tools tos transcode transparent-proxy truetype ttcp tts twolame type1 udev underscores unicode unlock-notify upnp ups urandom usb userfiles utempter uudeview uuid v4l v4l2 valgrind vamp vcd vcdimager vcdx vdr verbose vfat vhosts vidcap video-file visibility visualization vlm vmdb vmdbpostgres vmmouse vnc voice vorbis vpb vram vxml watchdog wav wavpack wddx webdav webkit wifi winbind winpopup wireshark wma wma-fixed wma123 wmf wmp wordexp wordperfect wv wxwindows x11vnc x264 xanim xattr xcb xchat xchatdccserver xcomposite xface xforms xgetdefault xine xinerama xml xmldoclet xmlreader xmlrpc xmlwriter xmms xorg xosd xpm xprint xrandr xscreensaver xsl xslt xtended xterm xulrunner xv xvid xvmc yaepg yahoo yiff yv12 zero-penalty-hit zeroconf zip zlib zrtp zvbi" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="auth_digest charset_lite dumpio imagemap log_forensic version actions alias asis auth_basic authn_alias authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cern_meta dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_ftp substitute proxy_http rewrite setenvif speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="prefork" CAMERAS="konica" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US es es_AR es_ES zh zh_CN zh_TW" PHP_TARGETS="php5-3" QEMU_SOFTMMU_TARGETS="arm" QEMU_USER_TARGETS="arm armeb" RUBY_TARGETS="ruby18 jruby" USERLAND="GNU" VIDEO_CARDS="nv nvidia" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Blu3





          2011-05-05 20:57:13 UTC
        

p.s. the location line changes depending on the package.  for example; for QtCore, it is /vport/portage/x11-libs/qt-core-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2.

for QtOpenGL, it would be /vport/portage/x11-libs/qt-opengl-4.7.2-r1/work/qt-everywhere-opensource-src-4.7.2

----

whatever is generating the pc files is inserting the current package working directory in $<prg>_location = $prefix/<insert point>/bin/$<prg>




Comment 2


Davide Pesavento (RETIRED)






          2011-11-13 15:26:18 UTC
        

I can't reproduce, on my system all paths are correct...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

