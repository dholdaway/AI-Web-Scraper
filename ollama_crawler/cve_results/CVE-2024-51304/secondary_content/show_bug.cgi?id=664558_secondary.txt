Title: 664558 – minimal cd sysfs hasn't efivars
URL: https://bugs.gentoo.org/show_bug.cgi?id=664558

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 664558
minimal cd sysfs hasn't efivars
Last modified: 2018-09-09 14:28:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 664558 
      - minimal cd sysfs hasn't efivars


Summary:
minimal cd sysfs hasn't efivars
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Release Media




Classification:

Unclassified




Component:

InstallCD

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Release Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-08-25 11:40 UTC by Boris Vingradov





      Modified:
    
2018-09-09 14:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



bkohler









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Boris Vingradov





          2018-08-25 11:40:19 UTC
        

There's problem for new hardware. Minimimal install iso successeful booted from new only EFI hardware, but kernel hasn't worked efivars module. This problem available only for minimal install iso: for livedvd hardened or not this module is available.

Reproducible: Always




Comment 1


Ben Kohler






          2018-08-28 11:36:52 UTC
        

The minimal installcd has EFIVAR_FS (efivarfs module) which is considered to be the replacement for EFI_VARS (efivars module).  Do you specifically need this older one?

You should have /sys/firmware/efi/efivars/ populated, which all modern tools can use.  The old module provides /sys/firmware/efi/vars/ which shouldn't be needed.




Comment 2


Ben Kohler






          2018-08-28 11:38:46 UTC
        

EFIVAR_FS
          efivarfs is a replacement filesystem for the old EFI
          variable support via sysfs, as it doesn't suffer from the
          same 1024-byte variable size limit.

          To compile this file system support as a module, choose M
          here. The module will be called efivarfs.

          If unsure, say N.




Comment 3


Boris Vingradov





          2018-08-28 17:28:31 UTC
        

(In reply to Ben Kohler from comment #1)
> The minimal installcd has EFIVAR_FS (efivarfs module) which is considered to
> be the replacement for EFI_VARS (efivars module).  Do you specifically need
> this older one?
> 
> You should have /sys/firmware/efi/efivars/ populated, which all modern tools
> can use.  The old module provides /sys/firmware/efi/vars/ which shouldn't be
> needed.

No, For successeful instalation there's need working module efivars. This module not loaded and failed to loaded throw modprobe. Maybe I wrong. But I couldn't install gentoo from manual on newest hardware.




Comment 4


Ben Kohler






          2018-08-28 17:56:01 UTC
        

What error did you get when you tried to install?




Comment 5


Boris Vingradov





          2018-08-28 19:51:39 UTC
        

(In reply to Ben Kohler from comment #4)
> What error did you get when you tried to install?

Than I run grub-install from minimal-sd I have message:

EFI variables are not supported on this system.




Comment 6


Ben Kohler






          2018-08-28 21:48:34 UTC
        

I don't think you're booted in EFI mode, does /sys/firmware/efi exist and have stuff in it?




Comment 7


Boris Vingradov





          2018-08-29 18:03:14 UTC
        

(In reply to Ben Kohler from comment #6)
> I don't think you're booted in EFI mode, does /sys/firmware/efi exist and
> have stuff in it?

There's exist for livedvd.




Comment 8


Ben Kohler






          2018-08-29 21:44:20 UTC
        

It will exist if you boot the minimal installcd in UEFI mode as well.  Note that only minimal installcds built in the last few days will have UEFI support, it was JUST added.




Comment 9


Boris Vingradov





          2018-08-30 17:39:16 UTC
        

(In reply to Ben Kohler from comment #8)
> It will exist if you boot the minimal installcd in UEFI mode as well.  Note
> that only minimal installcds built in the last few days will have UEFI
> support, it was JUST added.

Thanks, I'll try few days later.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

