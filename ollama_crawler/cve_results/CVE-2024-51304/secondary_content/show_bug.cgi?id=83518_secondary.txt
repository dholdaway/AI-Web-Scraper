Title: 83518 – kdebase 3.3.2-r2 don't emerge (updating kde-base/kdebase-3.3.2-r2 [3.3.2-r1]) due to error in .pm file
URL: https://bugs.gentoo.org/show_bug.cgi?id=83518

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 83518
kdebase 3.3.2-r2 don't emerge (updating kde-base/kdebase-3.3.2-r2 [3.3.2-r1]) due to error in .pm file
Last modified: 2005-03-17 03:51:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 83518 
      - kdebase 3.3.2-r2 don't emerge (updating kde-base/kdebase-3.3.2-r2 [3.3.2-r1]) due to error in .pm file


Summary:
kdebase 3.3.2-r2 don't emerge (updating kde-base/kdebase-3.3.2-r2 [3.3.2-r1])...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-02-27 20:52 UTC by Arnvid L. Karstad





      Modified:
    
2005-03-17 03:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge info / kdebase error

              (kdebase_errors.txt,5.52 KB,
                text/plain)

            
2005-03-08 08:06 UTC,

            Eric




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Arnvid L. Karstad





          2005-02-27 20:52:00 UTC
        

Upon emerge -u kdebase

/bin/sh ../../libtool --silent --mode=compile --tag=CXX i686-pc-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I. -I../.. -I../../libkonq -I/usr/kde/3.3/include -I/usr/qt/3/include -I.   -DQT_THREAD_SUPPORT  -D_REENTRANT -D_FILE_OFFSET_BITS=64  -Wnon-virtual-dtor -Wno-long-long -Wundef -ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts -Wall -W -Wpointer-arith -Wwrite-strings -DNDEBUG -DNO_DEBUG -O2 -march=pentium4 -msse2 -O2 -mmmx -mfpmath=sse -pipe -fomit-frame-pointer -Wformat-security -Wmissing-format-attribute -fno-exceptions -fno-check-new -fno-common -DQT_CLEAN_NAMESPACE -DQT_NO_ASCII_CAST -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION -D_GNU_SOURCE  -c -o main.lo main.cpp
kalyptus: processing ./dcop.h
warning: KBookmarkEditorIface inherits unknown class 'QObject'
warning: KBookmarkEditorIface inherits unknown class 'DCOPObject'
Bad name after t_class' at /usr/kde/3.3/share/apps/dcopidlng/kalyptusCxxToDcopIDL.pm line 1009.
Compilation failed in require at /usr/kde/3.3/share/apps/dcopidlng/kalyptus line 386.
make[3]: *** [dcop.kidl] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror/keditbookmarks'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2'
make: *** [all] Error 2


Current kalyptusCxxToDcopIDL.pm comes from kdelibs-3.3.2-r3

Looking at the line refrenced in the .pm file one see the following:

        if(exists $classidx{$realType}) { # this one first, we want t_class for QBlah*
            $typeId = 7t_class';
        }

changing :
$typeId = 7t_class';
to:
$typeId = 't_class';

Fixes the problem...

Where did this typo come from? ;)


Reproducible: Always
Steps to Reproduce:
1.
2.
3.




Comment 1


Arnvid L. Karstad





          2005-02-27 23:27:58 UTC
        

The kdelibs 3.3.2-r3 was emerged on the with the following in my emerge.log:

freelight log # grep "kdelibs-3.3.2-r3" emerge.log
1109317182:  >>> emerge (79 of 91) kde-base/kdelibs-3.3.2-r3 to /
1109487877:  >>> emerge (50 of 60) kde-base/kdelibs-3.3.2-r3 to /
1109529551:  >>> emerge (31 of 41) kde-base/kdelibs-3.3.2-r3 to /
1109529551:  === (31 of 41) Cleaning (kde-base/kdelibs-3.3.2-r3::/usr/portage/kde-base/kdelibs/kdelibs-3.3.2-r3.ebuild)
1109529551:  === (31 of 41) Compiling/Merging (kde-base/kdelibs-3.3.2-r3::/usr/portage/kde-base/kdelibs/kdelibs-3.3.2-r3.ebuild)
1109532302:  === (31 of 41) Post-Build Cleaning (kde-base/kdelibs-3.3.2-r3::/usr/portage/kde-base/kdelibs/kdelibs-3.3.2-r3.ebuild)
1109532312:  ::: completed emerge (31 of 41) kde-base/kdelibs-3.3.2-r3 to /

I got no idea which ebuild that modified the kalyptusCxxToDcopIDL.pm, and I'm not sure how I can reproduce the typo in the source either as I cant seem to find it if I unpack the kdelibs-3.3.2-r3 ebuild.

Any idea what to do to debug this?






Comment 2


Caleb Tennis (RETIRED)






          2005-02-28 12:41:32 UTC
        

Seems pretty random to me.  Can you recreate it if you zap your /var/tmp/portage/kdebase-3.3.2-r2 directory and try emerging it again?




Comment 3


Pierre-Olivier Bouchard





          2005-03-03 13:42:35 UTC
        

I have an error when compiling dcp.kidl too, it might be related.. but the error is different:

make[3]: Entering directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror/keditbookmarks'
echo 'extern "C" int kdemain(int argc, char* argv[]);' > keditbookmarks_dummy.cpp; \
echo 'extern "C" int kdeinitmain(int argc, char* argv[]) { return kdemain(argc,argv); }' >> keditbookmarks_dummy.cpp
/usr/kde/3.3/bin/dcopidl /usr/kde/3.3/include/kbookmarknotifier.h > kbookmarknotifier.kidl || ( rm -f kbookmarknotifier.kidl ; false )
KDECONFIG="/usr/kde/3.3/bin/kde-config" /usr/kde/3.3/bin/dcopidlng ./dcop.h > dcop.kidl || ( rm -f dcop.kidl ; false )
/usr/qt/3/bin/moc ./favicons.h -o favicons.moc
/usr/qt/3/bin/moc ./actionsimpl.h -o actionsimpl.moc
/usr/qt/3/bin/moc ./bookmarkiterator.h -o bookmarkiterator.moc
/usr/qt/3/bin/moc ./updater.h -o updater.moc
/usr/qt/3/bin/moc ./toplevel.h -o toplevel.moc
trap: usage: trap [-lp] [arg signal_spec ...]
make[3]: *** [dcop.kidl] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror/keditbookmarks'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2'
make: *** [all] Error 2

!!! ERROR: kde-base/kdebase-3.3.2-r2 failed.
!!! Function kde_src_compile, Line 166, Exitcode 2
!!! died running emake, kde_src_compile:make
!!! If you need support, post the topmost build error, NOT this status message.




Comment 4


Nicolas Schlumberger





          2005-03-04 04:37:15 UTC
        

I get a similar bug... 
I am trying to install kdebase-3.3.2-r1, and I get the following bug:

make[3]: Entering directory `/var/tmp/portage/kdebase-3.3.2-r1/work/kdebase-3.3.2/konqueror/keditbookmarks'
KDECONFIG="/usr/kde/3.3/bin/kde-config" /usr/kde/3.3/bin/dcopidlng ./dcop.h > dcop.kidl || ( rm -f dcop.kidl ; false )
trap: usage: trap [-lp] [arg signal_spec ...]
make[3]: *** [dcop.kidl] Error 1
make[3]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r1/work/kdebase-3.3.2/konqueror/keditbookmarks'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r1/work/kdebase-3.3.2/konqueror'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r1/work/kdebase-3.3.2'
make: *** [all] Error 2


I already tried to run make manually, but the bugs remains. even a "emerge -e world" didn't work; got stuck with kdebase.

Greets
Nicolas




Comment 5


Gregorio Guidi (RETIRED)






          2005-03-04 05:13:32 UTC
        

The last two errors are due to bug 84012.

(for the record: I couldn't reproduce that problem, maybe it affects only bash-3 users?)





Comment 6


Mark





          2005-03-04 12:23:14 UTC
        

I had the same error as Nicholas, switching bash to 2.05b-r9 fixed it, thanks for the tip Gregorio :)




Comment 7


Eric





          2005-03-04 13:36:21 UTC
        

I also see the following while trying to emerge this:

make[3]: *** [dcop.kidl] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror/keditbookmarks'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2/konqueror'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/kdebase-3.3.2-r2/work/kdebase-3.3.2'
make: *** [all] Error 2




Comment 8


Gregorio Guidi (RETIRED)






          2005-03-04 15:16:50 UTC
        

> I also see the following while trying to emerge...

And what is there _before_ the error?
Is it as in the original report or as in comment 3 and 4?





Comment 9


Eric





          2005-03-08 08:06:41 UTC
        

Created attachment 52945 [details]
emerge info / kdebase error

Here's the rest of that info for the bug. Sorry for not being too clear on that
one :). I've included the past 20 lines above the error in the emerge of
kdebase.




Comment 10


Gregorio Guidi (RETIRED)






          2005-03-08 08:14:55 UTC
        

> emerge info / kdebase error

That's bug 84012 then.





Comment 11


Alex Weiss





          2005-03-17 02:34:50 UTC
        

Hi,

I'm having the exact same problem emerging kdebase. It appears to me that the file it is looking for (libidn.la) is not located in the directory stated in the emerge error. It's located in /usr/lib and not /var/tmp/portage/libidn-0.3.7/image//usr/lib.

I'd imagine this sort of thing would be easy to fix. Let's keep our fingers crossed.

Alex




Comment 12


Gregorio Guidi (RETIRED)






          2005-03-17 03:51:43 UTC
        

> I'm having the exact same problem emerging kdebase. It appears to me that the file it is looking for (libidn.la)...

probably meant for bug 62597?

I'm closing this bug now, as there was no reply from the reporter about the original problem.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

