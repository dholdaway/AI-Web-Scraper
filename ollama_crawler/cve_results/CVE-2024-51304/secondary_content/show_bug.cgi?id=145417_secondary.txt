Title: 145417 – app-arch/gzip-1.3.5-r8 segfaults with uclibc
URL: https://bugs.gentoo.org/show_bug.cgi?id=145417

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 145417
app-arch/gzip-1.3.5-r8 segfaults with uclibc
Last modified: 2006-09-03 11:08:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 145417 
      - app-arch/gzip-1.3.5-r8 segfaults with uclibc


Summary:
app-arch/gzip-1.3.5-r8 segfaults with uclibc
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Embedded Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-08-28 15:33 UTC by Marco Squarcina





      Modified:
    
2006-09-03 11:08 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



base-system
lavish









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




dump core for gzip

              (core,116.00 KB,
                text/plain)

            
2006-08-28 15:38 UTC,

            Marco Squarcina




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marco Squarcina





          2006-08-28 15:33:04 UTC
        

I'm building an embedded system from an uclibc chroot.
gzip from stage3 works fine, but after upgrading to app-arch/gzip-1.3.5-r8 I got segfaults.

blackhole / # gunzip -d dwm-1.1.tar.gz 
Segmentation fault
blackhole / # ldd `which gzip` libc.so.0 => /lib/libc.so.0 
(0xb7f2b000) ld-uClibc.so.0 => /lib/ld-uClibc.so.0 (0xb7f7d000)

My emerge --info (remember it's just a chroot ;):

Portage 2.1-r2 (uclibc/x86, gcc-20050130, uclibc-0.9.28-r0, 2.6.16-suspend2-r8 i686)
=================================================================
System uname: 2.6.16-suspend2-r8 i686 Intel(R) Pentium(R) 4 Mobile CPU 1.80GHz
Gentoo Base System version 1.12.4
ccache version 2.3 [enabled]
app-admin/eselect-compiler: [Not Present]
dev-lang/python:     2.3.4-r1, 2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r3
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i386-gentoo-linux-uclibc"
CFLAGS="-Os -pipe"
CHOST="i386-gentoo-linux-uclibc"
CONFIG_PROTECT="/etc /usr/share/X11/xkb"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-Os -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig buildpkg ccache distlocks metadata-transfer nodoc noinfo noman sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LC_ALL="en_US.UTF-8"
PKGDIR="/packages/uclibc"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 bitmap-fonts cli dlloader dri minimal ncurses pcre readline reflection session spl truetype-fonts type1-fonts uclibc xorg zlib elibc_uclibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux userland_GNU video_cards_dummy video_cards_fbdev video_cards_v4l"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS, MAKEOPTS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

Cheers




Comment 1


Marco Squarcina





          2006-08-28 15:38:21 UTC
        

Created attachment 95333 [details]
dump core for gzip

dump core generated in this way:

blackhole / # FEATURES=nostrip CFLAGS="-g3 -ggdb -O0" emerge gzip
blackhole / # gzip -p dwm-1.1.tar 
Segmentation fault (core dumped)




Comment 2


SpanKY






          2006-09-01 00:01:17 UTC
        

post the file as an attachment that causes the crash




Comment 3


Marco Squarcina





          2006-09-01 02:19:29 UTC
        

(In reply to comment #2)
> post the file as an attachment that causes the crash

Do you mean dwm-1.1.tar.gz? It happens with any gz, not just with that one

Cheers






Comment 4


Marco Squarcina





          2006-09-01 02:27:26 UTC
        

Anyway, now I understand that it could be useful for debugging, sorry I didn't realize it immediatly.
Here is the link to that file: http://10kloc.org/download/dwm-1.1.tar.gz

Cheers




Comment 5


SpanKY






          2006-09-03 02:03:51 UTC
        

no idea what gcc that, try using a supported version




Comment 6


Marco Squarcina





          2006-09-03 05:41:04 UTC
        

(In reply to comment #5)
> no idea what gcc that, try using a supported version

Unsupported version??
I'm using gcc provided by stage3-x86-uclibc-hardened-2005.0.tar.bz2

Anyway, I'll recompile everything with gcc-4, and we'll see.




Comment 7


SpanKY






          2006-09-03 10:49:58 UTC
        

and that version of gcc is outdated and unsupported; upgrade to latest gcc-3.4.6 or gcc-4.1.1




Comment 8


Marco Squarcina





          2006-09-03 11:08:55 UTC
        

(In reply to comment #7)
> and that version of gcc is outdated and unsupported; upgrade to latest
> gcc-3.4.6 or gcc-4.1.1

Yes, and maybe upload patches for gcc-4.1.1 in order to compile it with uclibc #134412

Thanks.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

