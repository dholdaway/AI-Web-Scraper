Title: 88662 – gcc-3.3.5.20050130-r1 fails to emerge : /usr/include/bits/string2.h segfault
URL: https://bugs.gentoo.org/show_bug.cgi?id=88662

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 88662
gcc-3.3.5.20050130-r1 fails to emerge : /usr/include/bits/string2.h segfault
Last modified: 2005-04-11 18:38:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 88662 
      - gcc-3.3.5.20050130-r1 fails to emerge : /usr/include/bits/string2.h segfault


Summary:
gcc-3.3.5.20050130-r1 fails to emerge : /usr/include/bits/string2.h segfault
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Gentoo Toolchain Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-10 18:55 UTC by david jenkins





      Modified:
    
2005-04-11 18:38 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


david jenkins





          2005-04-10 18:55:55 UTC
        

upgrading gcc from 3.3.4 to gcc-3.3.5.20050130-r1 fails due to a segmentation fault on /usr/include/bits/string2.h

Reproducible: Always
Steps to Reproduce:
1.emerge gcc 
2.
3.

Actual Results:  
/usr/include/bits/string2.h:1051: internal compiler error: Segmentation fault
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugs.gentoo.org/> for instructions.
The bug is not reproducible, so it is likely a hardware or OS problem.
./xgcc -B./ -B/usr/i686-pc-linux-gnu/bin/ -isystem
/usr/i686-pc-linux-gnu/include -isystem /usr/i686-pc-linux-gnu/sys-include -O2 
-DIN_GCC    -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes
-isystem ./include  -fPIC -DHAVE_SYSLOG -g -DHAVE_GTHR_DEFAULT -DIN_LIBGCC2
-D__GCC_FLOAT_NOT_NEEDED  -D_LIBC_PROVIDES_SSP_ -I. -I.
-I/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc
-I/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/.
-I/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/config
-I/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/../include 
-DL_fixunssfsi -c
/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/libgcc2.c -o
libgcc/./_fixunssfsi.o
make[3]: *** [libgcc/./_floatdisf.o] Error 1
make[3]: *** Waiting for unfinished jobs....
make[3]: Leaving directory `/var/tmp/portage/gcc-3.3.5.20050130-r1/work/build/gcc'
make[2]: *** [libgcc.a] Error 2
make[2]: Leaving directory `/var/tmp/portage/gcc-3.3.5.20050130-r1/work/build/gcc'
make[1]: *** [stage1_build] Error 2
make[1]: Leaving directory `/var/tmp/portage/gcc-3.3.5.20050130-r1/work/build/gcc'
make: *** [bootstrap-lean] Error 2

!!! ERROR: sys-devel/gcc-3.3.5.20050130-r1 failed.
!!! Function gcc_do_make, Line 1133, Exitcode 2
!!! emake failed with bootstrap-lean
!!! If you need support, post the topmost build error, NOT this status message.


Expected Results:  
successfull installation

emerge info:

System uname: 2.6.9-gentoo-r9 i686 AMD Athlon(tm) XP 2100+
Gentoo Base System version 1.4.16
Python:              dev-lang/python-2.3.4-r1 [2.3.4 (#1, Feb  7 2005, 17:05:30)]
dev-lang/python:     2.3.4-r1
sys-devel/autoconf:  2.59-r6, 2.13
sys-devel/automake:  1.7.9-r1, 1.8.5-r3, 1.5, 1.4_p6, 1.6.3, 1.9.4
sys-devel/binutils:  2.15.92.0.2-r7
sys-devel/libtool:   1.5.10-r3
virtual/os-headers:  2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3/share/config
/usr/share/config /var/bind /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs autoconfig ccache distlocks sandbox sfperms"
GENTOO_MIRRORS="http://gentoo.llarian.net/ http://mirror.datapipe.net/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 alsa apm berkdb bitmap-fonts calendar crypt cups curl emboss encode f77
fortran gd gdbm gif gpm imagemagick imap imlib innodb ipv6 jpeg ldap libg++
libwww maildir mime motif mp3 mpeg mysql ncurses nls pam pam-mysql pcre pdflib
perl php png posix postgres python readline sasl sdl session simplexml soap
spell spl sqlite ssl svga tcpd tiff tokenizer truetype truetype-fonts
type1-fonts usb xml2 zlib"
Unset:  ASFLAGS, CBUILD, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


david jenkins





          2005-04-10 22:05:26 UTC
        

I re-emerged glibc to see if that would fix the issue. It still fails to compile, but the segfault is in a different place:

/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/cp/decl.c: In function `check_tag_decl':
/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/cp/decl.c:7607: internal compiler error: Segmentation fault
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugs.gentoo.org/> for instructions.





Comment 2


david jenkins





          2005-04-10 22:07:00 UTC
        

I re-emerged glibc to see if that would fix the issue. It still fails to compile, but the segfault is in a different place:

/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/cp/decl.c: In function `check_tag_decl':
/var/tmp/portage/gcc-3.3.5.20050130-r1/work/gcc-3.3.5/gcc/cp/decl.c:7607: internal compiler error: Segmentation fault
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://bugs.gentoo.org/> for instructions.




Comment 3


SpanKY






          2005-04-10 22:10:57 UTC
        

if you emerge gcc a few times, does it always fail at the same place ?




Comment 4


david jenkins





          2005-04-10 22:13:26 UTC
        

vapier,  it always failed in the same place until I remerged glibc. It then began failing in a different place, but continues to fail in that new place with every attempt.




Comment 5


david jenkins





          2005-04-11 00:38:55 UTC
        

I finally got this fixed. After re-emerging all the dependencies in order I finally got gcc to update. I have no idea why it failed to work in the first place, but everything is fine now.




Comment 6


SpanKY






          2005-04-11 18:38:13 UTC
        

if you can track it down please re-open :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

