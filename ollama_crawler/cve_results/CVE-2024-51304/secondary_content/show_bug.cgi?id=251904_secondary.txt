Title: 251904 – Up key starts ksnapshot with evdev keyboard on kde 3.5 with compiz-fusion enabled
URL: https://bugs.gentoo.org/show_bug.cgi?id=251904

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 251904
Up key starts ksnapshot with evdev keyboard on kde 3.5 with compiz-fusion enabled
Last modified: 2008-12-21 21:09:44 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 251904 
      - Up key starts ksnapshot with evdev keyboard on kde 3.5 with compiz-fusion enabled


Summary:
Up key starts ksnapshot with evdev keyboard on kde 3.5 with compiz-fusion ena...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Unspecified

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-21 17:13 UTC by Marco Schinkel





      Modified:
    
2008-12-21 21:09 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



schinkelm









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marco Schinkel





          2008-12-21 17:13:23 UTC
        

The problem exists on my desktop after emerging compiz-fusion and running it via fusion-icon on kde 3.5.10 with xorg-server-1.5.3 and xf86-input-evdev-2.10.

When the up key is pressed ksnapshot starts. But only in Kde applications (maybe all qt applications). In gtk apps (like firefox) ksnapshop only starts if the application does not handle the up key. I disabled the keyboard shortcut for ksapshot (print screen). Did not helh. Then I tried to disable the screenshot schortcuts via ccsm. It seems that the configuration change is not saved atfer exiting ccsm. When I start it again its set to "print screen" and "alt+print screen" again.

Keyboard layouts are disabled in kde control center. 

Keyboard configuration in xorg.conf:

  Driver        "evdev"
  Option        "GrabDevice"                    "Yes"
  Option        "XkbRules"                      "xorg"
  Option        "XkbModel"                      "evdev"
  Option        "XkbLayout"                     "de"
  Option        "XkbVariant"                    "nodeadkeys"
  Option        "AutoRepeat"                    "300 30"

xev output the following after pressing the up key:

KeymapNotify event, serial 33, synthetic NO, window 0x0,
    keys:  4294967179 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0 
           0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0

I dont know if it's a bug in evdev, xkeyboard-layout, xorg-server, kde or compiz. But definetely it is triggered by compiz as everything works as expected if i dont start it.

Best regards,

Marco

Reproducible: Always

Steps to Reproduce:
1. emerge compiz-fusion
2. start it (for example via "fusion-icon)
3. hold the up key for 2 seconds

Actual Results:  
You see that many ksnapshot windows open

Expected Results:  
The active application should handle the up key

Portage 2.1.6.2 (default/linux/amd64/2008.0, gcc-4.3.2, glibc-2.9_p20081201-r0, 2.6.28-rc9-ikarus x86_64)
=================================================================
System uname: Linux-2.6.28-rc9-ikarus-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9450_@_2.66GHz-with-glibc2.2.5
Timestamp of tree: Sun, 21 Dec 2008 12:00:01 +0000
app-shells/bash:     3.2_p48
dev-java/java-config: 1.3.7-r1, 2.1.6-r1
dev-lang/python:     2.4.4-r13, 2.5.2-r8
dev-python/pycrypto: 2.0.1-r6
dev-util/cmake:      2.6.2
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.4.0
sys-apps/sandbox:    1.2.18.1-r3
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.19
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ABI="amd64"
ACCEPT_KEYWORDS="amd64 ~amd64 ~x86"
ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias"
APACHE2_MPMS="worker"
ARCH="amd64"
ASFLAGS_x86="--32"
AUTOCLEAN="yes"
CAMERAS="canon"
CBUILD="x86_64-pc-linux-gnu"
CDEFINE_amd64="__x86_64__"
CDEFINE_x86="__i386__"
CDF_BASE="/usr"
CDF_BIN="${CDF_BASE}/bin"
CDF_HELP="${CDF_BASE}/lib/cdf/help"
CDF_INC="${CDF_BASE}/include"
CDF_LIB="${CDF_BASE}/lib"
CFLAGS="-O3 -pipe -march=core2 -fomit-frame-pointer"
CFLAGS_x86="-m32"
CHOST="x86_64-pc-linux-gnu"
CHOST_amd64="x86_64-pc-linux-gnu"
CHOST_x86="i686-pc-linux-gnu"
CLASSPATH="."
CLEAN_DELAY="5"
COLLISION_IGNORE="/lib/modules"
COLORTERM=""
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CVS_RSH="ssh"
CXXFLAGS="-O3 -pipe -march=core2 -fomit-frame-pointer"
DBUS_SESSION_BUS_ADDRESS="unix:abstract=/tmp/dbus-LK2nZdD88N,guid=7be3d04972462d03d535a9b1494e7571"
DCOP_YAKUAKE_SESSION="0"
DCOP_YAKUAKE_TERMINAL="0"
DEFAULT_ABI="amd64"
DISPLAY=":0"
DISTDIR="/usr/portage/distfiles"
EDITOR="/bin/nano"
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="--verbose"
EMERGE_WARNING_DELAY="10"
FEATURES="ccache distlocks fixpackages metadata-transfer parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
FLTK_DOCDIR="/usr/share/doc/fltk-1.1.7-r3/html"
GCC_SPECS=""
GDK_USE_XFT="1"
GDM_LANG="de_DE.utf8"
GENERATION="2"
GENTOO_MIRRORS="http://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://de-mirror.org/distro/gentoo/"
GPG_AGENT_INFO="/tmp/gpg-CBip83/S.gpg-agent:23430:1"
GS_LIB="/mnt/daedalus/mas/.fonts"
GTK2_RC_FILES="/mnt/daedalus/mas/.gtkrc-2.0-kde"
GUILE_LOAD_PATH="/usr/share/guile/1.8"
HOME="/mnt/daedalus/mas"
HUSHLOGIN="FALSE"
INFOPATH="/usr/share/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.19/info:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.3.2/info"
INPUT_DEVICES="void keyboard mouse evdev"
JAVAC="/etc/java-config-2/current-system-vm/bin/javac"
JAVACC_HOME="/usr/share/javacc/"
JAVA_HOME="/etc/java-config-2/current-system-vm"
JDK_HOME="/etc/java-config-2/current-system-vm"
KDE_FULL_SESSION="true"
KDE_MULTIHEAD="false"
KDE_SESSION_UID="11100"
KERNEL="linux"
KONSOLE_DCOP="DCOPRef(yakuake,konsole)"
KONSOLE_DCOP_SESSION="DCOPRef(yakuake,session-1)"
LADSPA_PATH="/usr/lib64/ladspa"
LANG="de_DE.utf8"
LANGUAGE="de_DE.utf8"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LC_ALL="de_DE.utf8"
LDFLAGS="-Wl,-O1"
LDFLAGS_x86="-m elf_i386"
LDPATH="/usr/kde/3.5/lib:/usr/kde/3.5/lib64:/usr/kde/3.5/lib32:"
LESS="-R -M --shift 5"
LESSOPEN="|lesspipe.sh %s"
LIBDIR_amd64="lib64"
LIBDIR_ppc="lib32"
LIBDIR_ppc64="lib64"
LIBDIR_x86="lib32"
LIBGL_DRIVERS_PATH="/usr/lib64/dri:/usr/lib32/dri"
LIBXCB_ALLOW_SLOPPY_LOCK="1"
LINGUAS="de en"
LIRC_DEVICES="uirt2 uirt2_raw"
LOGNAME="mas"
LS_COLORS="rs=0:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:"
MAIL="/var/mail/mas"
MAKEOPTS="-j4"
MANPATH="/etc/java-config-2/current-system-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.19/man:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.3.2/man:/opt/blackdown-jdk-1.4.2.03/man:/etc/java-config/system-vm/man/:/usr/lib64/php5/man/:/usr/kde/3.5/share/man:/usr/qt/3/doc/man:/opt/opera/share/man"
MULTILIB_ABIS="amd64 x86"
MULTILIB_STRICT_DENY="64-bit.*shared object"
MULTILIB_STRICT_DIRS="/lib32 /lib /usr/lib32 /usr/lib /usr/kde/*/lib32 /usr/kde/*/lib /usr/qt/*/lib32 /usr/qt/*/lib /usr/X11R6/lib32 /usr/X11R6/lib"
MULTILIB_STRICT_EXEMPT="(perl5|gcc|gcc-lib|binutils|eclipse-3|debug|portage)"
NETBEANS="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler soa visualweb webcommon websvccommon xml"
NETBEANS_MODULES="apisupport harness ide java nb websvccommon cnd groovy gsf identity j2ee mobility php profiler soa visualweb webcommon xml"
NOCOLOR="true"
OPENGL_PROFILE="ati"
PAGER="/usr/bin/less"
PATH="/usr/kde/3.5/bin:/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.3.2:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/qt/3/bin:/usr/games/bin:/opt/vmware/server/console/bin"
PKGDIR="/usr/portage/packages"
PKG_CONFIG_PATH="/usr/qt/3/lib64/pkgconfig"
PORTAGE_ARCHLIST="ppc s390 amd64 x86 ppc64 x86-fbsd m68k arm sparc sh mips ia64 alpha hppa sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib64/portage/bin"
PORTAGE_COMPRESS_EXCLUDE_SUFFIXES="css gif htm[l]? jp[e]?g js pdf png"
PORTAGE_CONFIGROOT="/"
PORTAGE_COUNTER_HASH="1edf402b178fb0b5b94851873ae7cd34"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="log warn error"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save_summary echo"
PORTAGE_FETCH_CHECKSUM_TRY_MIRRORS="5"
PORTAGE_FETCH_RESUME_MIN_SIZE="350K"
PORTAGE_GID="250"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_NICENESS="15"
PORTAGE_PYM_PATH="/usr/lib64/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_VERBOSE="1"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/zen-overlay /usr/local/portage/ikarus"
PROFILE_ONLY_VARIABLES="ARCH ELIBC KERNEL USERLAND"
PWD="/mnt/daedalus/mas"
QMAKESPEC="linux-g++"
QTDIR="/usr/qt/3"
QT_XFT="true"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
ROOT="/"
ROOTPATH="/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.3.2:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/qt/3/bin:/usr/games/bin:/opt/vmware/server/console/bin"
RPMDIR="/usr/portage/rpm"
SANE_CONFIG_DIR="/etc/sane.d"
SCHEME_LIBRARY_PATH="/usr/share/slib/"
SESSION_MANAGER="local/ikarus:@/tmp/.ICE-unix/23511,unix/ikarus:/tmp/.ICE-unix/23511"
SHELL="/bin/bash"
SHLVL="6"
SSH_AGENT_PID="3377"
SSH_AUTH_SOCK="/tmp/ssh-ilDINA3376/agent.3376"
STAGE1_USE="multilib nptl nptlonly unicode"
SYMLINK_LIB="yes"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
TEMP="/tmp"
TERM="xterm"
TEXINPUTS="/usr/lib64/ocaml/ocamldoc:"
TMP="/tmp"
USB_DEVFS_PATH="/dev/bus/usb"
USE="7zip X X509 Xaw3d a52 aac accessibility acl acpi aften aim aio alisp alsa amd64 amr amrnb ao apache2 apm ares async audacious audiofile bash-completion beagle berkdb bluetooth bzip2 cairo calendar caps cdda cddb cdf cdio cdparanoia chipcard cjk cli console consolekit cracklib crypt css cups cupsddk curl cursors dbus dc1394 device-mapper dga dhcp dirac divx djvu dri dts dv dvb dvd dvdr dvdread emovix enca encode exif exiv2 expat fam fbcon ffmpeg fftw firefox flac font-server fontconfig fontforge fortran fping fpx ftp fuse gcj gcrypt gd gdbm gif gimp glib glibc-compat20 glibc-omitfp glitz glut gmedia gmp gnokii gphoto2 gpm graphviz gs gsl gsm gstreamer gtk gtkhtml guile hal hash hbci hdf hdf5 hdri icons iconv icu id3 id3tag idea idn ieee1394 ilbc imagemagick imap imlib immqt-bc inkjar inotify isdnlog ithreads jabber jack jai java java6 javascript jbig jmf jms jpeg jpeg2k json kde kdeenablefinal kdm kexi kipi kpathsea ladspa lame lash latex lcms libass libgcrypt libnotify libsamplerate libssh2 lirc lm_sensors log4j lua lzma lzo matroska md5sum midi mikmod mjpeg mmap mmx mmxext mng modplug motif mouse mp2 mp3 mp4 mp4live mpd mpeg mpeg2 mplayer mtp mudflap multilib musepack mysql nas ncurses nemesi neon netboot netcdf netpbm network networking nfs nls nntp nptl nptlonly nsplugin nss objc objc++ objc-gc ocaml odk ofx ogg ogm openal openct openexr opengl openmp openntpd openssl pam pango pari paste64 pcre pcsc-lite pda pdf perl php pixmaps pkcs11 player plotutils png pnm posix postscript ppds pppd python qhull qt3 qt3support qt4 quicktime rar rdesktop readline realmedia recode reflection reiserfs resolvconf rpm rtsp samba sametime sasl scanner schroedinger screen screenshot scrobbler scsi sdk sdl sdl-image sdl-sound session shout skins slang smartcard smime smp sndfile snmp soap sockets socks5 solver sound soundtouch speex spell spl sqlite sqlite3 srt sse sse2 ssh ssl ssse3 startup-notification stream subtitles subversion suid svg sysfs sysvipc szip taglib tcl tcp tcpd tcpwrapper tetex theora threads threadsafe thunderbird tiff timidity tk tools transcode truetype tta twolame unicode unzip urandom usb utils v4l v4l2 vamp vcd vcdx video vlm vnc voice vorbis vorbis-psy wav wavpack winbind wma wmf wmp wxwindows x264 xanim xattr xcb xcomposite xext xface xfs xine xinerama xinetd xml xmlrpc xmp xorg xosd xpm xprint xrandr xrender xscreensaver xterm xulrunner xv xvid xvmc xvnc yv12 zip zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="worker" CAMERAS="canon" ELIBC="glibc" INPUT_DEVICES="void keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="de en" LIRC_DEVICES="uirt2 uirt2_raw" NETBEANS_MODULES="apisupport harness ide java nb websvccommon cnd groovy gsf identity j2ee mobility php profiler soa visualweb webcommon xml" USERLAND="GNU" VIDEO_CARDS="dummy vga vesa fbdev radeon radeonhd fglrx"
USER="mas"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS NETBEANS_MODULES USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:env.d"
VIDEO_CARDS="dummy vga vesa fbdev radeon radeonhd fglrx"
VMHANDLE="blackdown-jdk-1.4.2"
WINDOWID="46137750"
WINDOWPATH="8"
XAUTHORITY="/mnt/daedalus/mas/.Xauthority"
XCURSOR_THEME="Gold"
XDG_CONFIG_DIRS="/usr/kde/3.5/etc/xdg"
XDG_DATA_DIRS="/usr/kde/3.5/share:/usr/share:/usr/local/share"
XDG_SESSION_COOKIE="f0ed939cf545076f45477459489c241b-1229878641.209063-1969603804"
XERCESC_NLS_HOME="/usr/share/xerces-c/msg"
XSESSION="kde-3.5"
_="/usr/bin/emerge"




Comment 1


Marco Schinkel





          2008-12-21 17:26:05 UTC
        

The following kde bug seems to be related:

http://bugs.kde.org/125559

I see that http://bugs.gentoo.org/153115 is related also, but I could not reopen it and it's not exactly the same because compiz is not involved there.








Comment 2


Rafał Mużyło





          2008-12-21 19:49:47 UTC
        

Both of those bugs are most probably not related to this problem.

This looks like a problem with your config.

This tends to happen if you use evdev driver, but
set your keyboard model as something different than evdev.

Most likely you've either didn't set it up correctly in hal
or KDE is overriding keyboard settings with incorrect values
(keyboard should be set to "evdev managed", if at all).

And GrabDevice shouldn't be really needed unless you do
something strange or incorrectly (it WORKSFORME).

To make a certain detail clear: does this happen in KDE, if
you run it in a different way than via "fusion-icon" ?




Comment 3


Marco Schinkel





          2008-12-21 20:59:38 UTC
        

Hello Rafal,

  (In reply to comment #2)
> Both of those bugs are most probably not related to this problem.
> 
> This looks like a problem with your config.
> 
> This tends to happen if you use evdev driver, but
> set your keyboard model as something different than evdev.
> 
> Most likely you've either didn't set it up correctly in hal
> or KDE is overriding keyboard settings with incorrect values
> (keyboard should be set to "evdev managed", if at all).
> 

kde should not touch the keyboard layout because the "Tastaturlayout aktivieren" checkbox is not checked. I'll try setting this to evdev managed anyway.

hal is running but the xserver is started with AutoAddDevices disabled. There are only the two "hard wired" evdev keyboards that I have defined in xorg.conf

> And GrabDevice shouldn't be really needed unless you do
> something strange or incorrectly (it WORKSFORME).

I had to activate GrabDevice after the evdev update. Disabled is default now. All Ctrl+C fall through to my xinitrc and therefore abruptly end my session if I disable it.

> 
> To make a certain detail clear: does this happen in KDE, if
> you run it in a different way than via "fusion-icon" ?
> 

I start it with 

LIBGL_ALWAYS_INDIRECT=1 kstart compiz -- \
  --sm-disable \
  --indirect-rendering \
  --replace \
  ccp

now. Same result.

Best regards,

Marco





Comment 4


Marco Schinkel





          2008-12-21 21:09:44 UTC
        

Hello Rafal,

> > (keyboard should be set to "evdev managed", if at all).
> > 
> 
> kde should not touch the keyboard layout because the "Tastaturlayout
> aktivieren" checkbox is not checked. I'll try setting this to evdev managed
> anyway.

Setting all evdev settings in kde solved the problem for me! Thanks for the hint. I still don't understand why setting this in kde affects the problem. kde actually activates the same settings that were active before. Does compiz read this configuration and handle it differently?

Best Regards,

Marco










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

