Title: 265006 – app-admin/eselect-postgresql-0.3 doesn't correct work with dev-db/postgresql-base
URL: https://bugs.gentoo.org/show_bug.cgi?id=265006

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 265006
app-admin/eselect-postgresql-0.3 doesn't correct work with dev-db/postgresql-base
Last modified: 2011-01-06 11:51:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 265006 
      - app-admin/eselect-postgresql-0.3 doesn't correct work with dev-db/postgresql-base


Summary:
app-admin/eselect-postgresql-0.3 doesn't correct work with dev-db/postgresql-...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PgSQL Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-05 19:23 UTC by Evgeny





      Modified:
    
2011-01-06 11:51 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



titanofold









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Evgeny





          2009-04-05 19:23:10 UTC
        

I'm installed dev-db/postgresql-base-8.3.5(linguas_ru nls pam readline ssl threads zlib) on client and dev-db/postgresql-server-8.3.5(kernel_linux linguas_ru nls perl python xml) on server, but client doesn't have working enviroment.

Reproducible: Always

Steps to Reproduce:
1. Unmask and install dev-db/postgresql-base-8.3.5(linguas_ru nls pam readline ssl threads zlib), app-admin/eselect-postgresql-0.3, virtual/postgresql-base-8.3 on client
2. Unmask and install on server dev-db/postgresql-server-8.3.5(kernel_linux linguas_ru nls perl python xml), dev-db/postgresql-base-8.3.5(linguas_ru nls pam readline ssl zlib), app-admin/eselect-postgresql-0.3 on server

Actual Results:  
After server start, I'm test connect with server side client:
# psql postgres postgres
Welcome to psql 8.3.5, the PostgreSQL interactive terminal.

Type:  \copyright for distribution terms
       \h for help with SQL commands
       \? for help with psql commands
       \g or terminate with semicolon to execute query
       \q to quit

postgres=#

So, it's work. After it, I probe some on client computer, but can't find psql. Search it:
# equery f dev-db/postgresql-base  | grep psq
/usr/lib/postgresql-8.3/bin/psql
/usr/share/postgresql-8.3/locale/ru/LC_MESSAGES/psql.mo
/usr/share/postgresql-8.3/man/man1/psql.1.bz2
/usr/share/postgresql-8.3/psqlrc.sample

And test connect to server from client computer:
# file /usr/lib/postgresql-8.3/bin/psql
/usr/lib/postgresql-8.3/bin/psql: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), stripped
# /usr/lib/postgresql-8.3/bin/psql -h homegate postgres postgres
Welcome to psql 8.3.5, the PostgreSQL interactive terminal.

Type:  \copyright for distribution terms
       \h for help with SQL commands
       \? for help with psql commands
       \g or terminate with semicolon to execute query
       \q to quit

postgres=#

Ok, this work, but why psql finds in /usr/bin? I'm look on server computer:
# which psql 
/usr/bin/psql
# ls -l /usr/bin/psql
lrwxrwxrwx 1 root root 38 Апр  4 23:04 /usr/bin/psql -> /usr/lib/eselect-postgresql/binwrapper

Hm, there using eselect? Probe on client computer:

# eselect postgresql list
Available postgresql installations
  8.3 <-*                    base-8.3.5 docs-8.3.5

8.3 is active, but I'm exec anymore:
# eselect postgresql set 8.3
!!! Warning: No file '/usr/include/postgresql-8.3/libpq-fe.h' to symlink
!!! Warning: No file '/usr/include/postgresql-8.3/libpq' to symlink
!!! Warning: No file '/usr/include/postgresql-8.3/postgres_ext.h' to symlink


Expected Results:  
After all I can't see symlinks to psql and other client programs in /usr/bin Uncorrect enviroment settings doesn't gave me install on client computer some programs for example dev-ruby/ruby-postgres (Could not find PostgreSQL build environment (libraries & headers)) ,  dev-db/pgadmin3 (configure: error: Could not find your PostgreSQL installation.), dev-ruby/ruby-pg and etc

Portage 2.2_rc27 (default/linux/x86/2008.0/desktop, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.28-gentoo-r4 i686)
=================================================================
System uname: Linux-2.6.28-gentoo-r4-i686-Intel-R-_Core-TM-2_CPU_6600_@_2.40GHz-with-glibc2.0
Timestamp of tree: Sat, 04 Apr 2009 15:15:02 +0000
distcc 3.0 i686-pc-linux-gnu [enabled]
app-shells/bash:     3.2_p39
dev-java/java-config: 2.1.7
dev-lang/python:     2.5.4-r2
dev-python/pycrypto: 2.0.1-r8
dev-util/cmake:      2.6.2-r1
sys-apps/baselayout: 2.0.0
sys-apps/openrc:     0.4.3-r1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe -ftree-vectorize -fomit-frame-pointer -msse3 -mssse3"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-march=core2 -O2 -pipe -ftree-vectorize -fomit-frame-pointer -msse3 -mssse3"
DISTDIR="/mnt/distfiles"
FEATURES="distcc distlocks fixpackages parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://gentoo.imj.fr/pub/gentoo/ ftp://ftp.free.fr/mirrors/ftp.gentoo.org/ ftp://ftp.tu-clausthal.de/pub/linux/gentoo/ ftp://sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://gentoo.po.opole.pl ftp://gentoo.po.opole.pl http://mirror.etf.bg.ac.yu/gentoo http://fido.online.kz/gentoo ftp://fido.online.kz/gentoo/pub "
LC_ALL="ru_RU.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="ru"
MAKEOPTS="-j7"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/desktop-effects /usr/portage/local/layman/sunrise /usr/portage/local/layman/soor-overlay /usr/portage/local/layman/ruby /usr/local/portage"
SYNC="rsync://homegate/gentoo-portage"
USE="3dnowext X a52 aac aalib acl acpi alsa amrnb amrwb berkdb bluetooth branding bzip2 cairo cdr cjk cleartype cli cracklib crypt cups dbus dlloader dri dvd dvdr dvdread emboss encode esd evo extras fam fastcgi fbcondecor ffmpeg firefox flac fortran ftp gdbm gif glitz gmplayer gnome gnome-keyring gpm gtk hal iconv ipv6 isdnlog jack java javascript jpeg jpeg2k kpathsea libnotify lm_sensors logitech-mouse logrotate lzma mad midi mikmod mmx mmxext mp2 mp3 mpeg mssql mudflap musepack ncurses new-login newspr nls nptl nptlonly nsplugin ogg opengl openmp oss pam pcre pda pdf perl php png ppds pppd pvr python qt qt3 qt3support qt4 quicktime readline reflection samba schroedinger sdl session slang smp socets spell spl srt sse sse2 sse3 ssl ssse3 startup-notification svg svga syncengine sysfs tcpd tetex theora threads tiff truetype unicode usb vcd vdpau verbose videos vorbis win32codecs wininstallers wxwindows x264 x86 xml xmlrpc xorg xscreensaver xulrunner xv xvid zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="evdev keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="ru" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LANG, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Aaron W. Swenson






          2010-07-06 01:52:40 UTC
        

This is probably related to dev-db/libpq being removed after dev-db/postgresql-base had been emerged.

This bug can probably be closed unless the issue persists.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

