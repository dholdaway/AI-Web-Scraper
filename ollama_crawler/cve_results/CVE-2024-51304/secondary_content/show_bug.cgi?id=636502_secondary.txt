Title: 636502 – sed-4.4 undefined rereferences related to -flto
URL: https://bugs.gentoo.org/show_bug.cgi?id=636502

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 636502
sed-4.4 undefined rereferences related to -flto
Last modified: 2017-11-12 03:27:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 636502 
      - sed-4.4 undefined rereferences related to -flto


Summary:
sed-4.4 undefined rereferences related to -flto
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-11-04 11:35 UTC by cryptopsy





      Modified:
    
2017-11-12 03:27 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



tsmksubc









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (einfo,3.22 KB,
                text/plain)

            
2017-11-04 11:35 UTC,

            cryptopsy




Details





build log

              (sys-apps:sed-4.4:20171104-131650.log,84.61 KB,
                text/x-log)

            
2017-11-04 11:36 UTC,

            cryptopsy




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


cryptopsy





          2017-11-04 11:35:25 UTC
        

Created attachment 502476 [details]
emerge --info

Various "undefined reference" errors related to CFLAGS=-flto




Comment 1


cryptopsy





          2017-11-04 11:36:08 UTC
        

Created attachment 502478 [details]
build log




Comment 2


cryptopsy





          2017-11-04 11:40:46 UTC
        

i have >100 bugs related to this, with build logs. How am i suppsoed to file all these bugs?




Comment 3


cryptopsy





          2017-11-04 11:41:44 UTC
        

The lines with logs are failed builds when i added this CFLAG. Here are some sample output: 

/tmp/portage/logs/sys-apps:sed-4.4:20171104-131650.log
 1/601 dev-lang/python-exec-2.4.5
 3/601 sys-libs/ncurses-6.0-r1
 /tmp/portage/logs/app-arch:gzip-1.8:20171104-132419.log
 /tmp/portage/logs/sys-apps:findutils-4.6.0-r1:20171104-132428.log
 2/598 app-arch/bzip2-1.0.6-r8
 3/598 virtual/libintl-0-r2
 4/598 virtual/libiconv-0-r2
 5/598 sys-devel/gnuconfig-20170101
 1/598 sys-devel/make-4.2.1-r1
 6/598 sys-apps/gentoo-functions-0.12
 8/598 app-misc/mime-types-9
 9/598 app-misc/c_rehash-1.7-r1
 10/598 sys-libs/timezone-data-2017b
 /tmp/portage/logs/sys-devel:patch-2.7.5:20171104-132558.log
 /tmp/portage/logs/app-arch:tar-1.29-r3:20171104-132557.log
 /tmp/portage/logs/sys-apps:which-2.21:20171104-132658.log
 2/585 sys-apps/baselayout-2.4.1-r2
 3/585 sys-apps/debianutils-4.8.2
 3/582 dev-qt/qtchooser-0_p20170803
 4/582 app-arch/unzip-6.0_p20
 /tmp/portage/logs/dev-util:gperf-3.1:20171104-132725.log
 6/582 app-text/sgml-common-0.6.3-r5
 1/582 app-misc/editor-wrapper-4
 2/582 net-libs/libmnl-1.0.4
 /tmp/portage/logs/dev-lang:yasm-1.3.0:20171104-132753.log
 1/576 dev-libs/lzo-2.10
 1/574 media-libs/opus-1.2.1
 3/574 dev-libs/univalue-1.0.2
 2/574 dev-util/re2c-1.0.2
 5/574 dev-libs/leveldb-1.18-r2
 4/574 sys-devel/llvm-common-5.0.0
 7/574 net-mail/mailbase-1.1
 8/574 sys-devel/autoconf-wrapper-13
 9/574 sys-devel/automake-wrapper-10
 6/574 media-libs/jbig2dec-0.14
 /tmp/portage/logs/app-arch:cpio-2.12-r1:20171104-133058.log
 10/574 dev-util/boost-build-1.65.0
 /tmp/portage/logs/dev-libs:liblinear-211:20171104-133625.log
 2/563 app-crypt/rhash-1.3.5
 1/561 sys-devel/clang-runtime-9999
 3/561 app-shells/quoter-3.0_p2-r1
 4/561 app-shells/push-2.0-r1
 5/561 net-libs/http-parser-2.7.1
 6/561 app-text/poppler-data-0.4.8
 7/561 net-wireless/wireless-regdb-20170307
 2/561 dev-util/cppunit-1.14.0
 9/561 app-shells/gentoo-bashcomp-20140911
 8/561 dev-lang/swig-3.0.12
 10/561 sys-libs/ncurses-5.9-r101
 12/561 app-misc/ttyrec-1.0.8-r2
 13/561 sys-power/acpi-1.7-r1
 14/561 net-analyzer/netcat-110-r9
 11/561 media-fonts/liberation-fonts-2.00.1-r2
 16/561 app-text/catdoc-0.95
 15/561 app-arch/unrar-5.5.8
 17/561 sys-fs/dosfstools-4.1
 19/561 app-text/tree-1.7.0
 18/561 sys-fs/inotify-tools-3.14
 20/561 app-benchmarks/stress-1.0.4-r1
 /tmp/portage/logs/net-analyzer:traceroute-2.1.0:20171104-134042.log
 22/561 app-admin/pwgen-2.08




Comment 4


cryptopsy





          2017-11-04 11:42:39 UTC
        

I know its related to -flto because i have done emerge -e world, then change that flag, and then ran it again.




Comment 5


Mike Gilbert






          2017-11-06 17:18:05 UTC
        

Before filing a bazillion bugs, please ensure you are using gcc-ar, gcc-nm, and gcc-ranlib as suggested by the GCC documentation.

https://gcc.gnu.org/wiki/LinkTimeOptimizationFAQ

In make.conf:
AR="gcc-ar"
NM="gcc-nm"
RANLIB="gcc-ranlib"

This should eliminate 90% of the "plugin needed to handle lto object" issues.




Comment 6


cryptopsy





          2017-11-09 18:01:58 UTC
        

Some still fail with undefined reference errors. About 5% of pkgs. For example;
 /tmp/.portage/logs/app-misc:detox-1.2.0-r3:20171109-194331.log
  undefined reference to `yywrap'
 /tmp/.portage/logs/sys-apps:pciutils-3.5.5:20171109-195125.log
  undefined reference to `pci_filter_match'

Gcc is not built with flto when doing this compile, just the flto CFLAG and your recommedations.




Comment 7


Mike Gilbert






          2017-11-10 18:44:29 UTC
        

(In reply to cryptopsy from comment #6)

Please file bugs for the packages that still fail.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

