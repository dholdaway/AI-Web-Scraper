Title: 525250 – Install of dev-lang/perl-5.18.2 fails because can't locate Config.pm
URL: https://bugs.gentoo.org/show_bug.cgi?id=525250

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 525250
Install of dev-lang/perl-5.18.2 fails because can't locate Config.pm
Last modified: 2014-10-13 11:26:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 525250 
      - Install of dev-lang/perl-5.18.2 fails because can't locate Config.pm


Summary:
Install of dev-lang/perl-5.18.2 fails because can't locate Config.pm
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2014-10-13 10:28 UTC by Paul McDermott





      Modified:
    
2014-10-13 11:26 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge_info.txt,5.66 KB,
                text/plain)

            
2014-10-13 10:28 UTC,

            Paul McDermott




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Paul McDermott





          2014-10-13 10:28:49 UTC
        

Created attachment 386606 [details]
emerge --info

Upgrade of perl from 5.16 to 5.18 fails with a message that lib/Config.pm can't be located.

This is a bit of a problem as perl 5.16 has just been masked...

See tail end of error below:

perlio.c: In function 'PerlIO_debug':
perlio.c:475:7: warning: ignoring return value of 'write', declared with attribute warn_unused_result [-Wunused-result]
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2 i686-pc-linux-gnu-gcc -Wl,-O1 -Wl,--as-needed -o miniperl \
    perlmini.o opmini.o miniperlmain.o   gv.o toke.o perly.o pad.o regcomp.o dump.o util.o mg.o reentr.o mro.o keywords.o hv.o av.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o pp_sort.o   -lnsl -ldl -lm -lcrypt -lutil -lpthread -lc 
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -w -Ilib -MExporter -e '<?>' || make minitest
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -Ilib autodoc.pl
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -Ilib -Idist/Cwd -Idist/Cwd/lib -Idist/Carp/lib pod/perlmodlib.PL -q
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -Ilib make_patchnum.pl
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -Ilib write_buildcustomize.pl >lib/buildcustomize.pl
Updating 'git_version.h' and 'lib/Config_git.pl'
LD_LIBRARY_PATH=/var/tmp/portage/dev\-lang/perl\-5.18.2\-r1/work/perl\-5.18.2  ./miniperl -Ilib configpm
`sh  cflags "optimize='-O2 -march=native -pipe'" perl.o` -fPIC perl.c
	  CCCMD =  i686-pc-linux-gnu-gcc -DPERL_CORE -c -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -std=c89 -O2 -march=native -pipe -Wall -ansi -W -Wextra -Wdeclaration-after-statement -Wendif-labels -Wc++-compat -Wwrite-strings 
written lib/Config.pod
updated lib/Config.pm
updated lib/Config_heavy.pl
Can't locate lib/Config.pm:   Permission denied at configpm line 1139.
makefile:476: recipe for target 'lib/Config.pod' failed
make: *** [lib/Config.pod] Error 13
make: *** Waiting for unfinished jobs....
perl.c: In function 'S_init_tls_and_interp':
perl.c:99:59: warning: ignoring return value of 'write', declared with attribute warn_unused_result [-Wunused-result]
 * ERROR: dev-lang/perl-5.18.2-r1::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=dev-lang/perl-5.18.2-r1::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-lang/perl-5.18.2-r1::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/dev-lang/perl-5.18.2-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-lang/perl-5.18.2-r1/temp/environment'.
 * Working directory: '/var/tmp/portage/dev-lang/perl-5.18.2-r1/work/perl-5.18.2'
 * S: '/var/tmp/portage/dev-lang/perl-5.18.2-r1/work/perl-5.18.2'

See emerge --info attached




Comment 1


Paul McDermott





          2014-10-13 11:26:32 UTC
        

After reading Bug 519426 I did:

unset PERL5LIB

as root before running the ebuild.

This seemed to fix it.

So the issue could be related to permissions or the (non-)existence of directories on the include path. But inspecting the actual directories in $PERL5LIB I couldn't find any problems...

My be worth inserting some path checks into the ebuild to warn other users who come across this issue...









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

