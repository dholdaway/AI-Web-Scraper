Title: 434080 – dev-vcs/subversion-1.7.6 ruby config bug
URL: https://bugs.gentoo.org/show_bug.cgi?id=434080

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 434080
dev-vcs/subversion-1.7.6 ruby config bug
Last modified: 2012-10-25 20:24:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 434080 
      - dev-vcs/subversion-1.7.6 ruby config bug


Summary:
dev-vcs/subversion-1.7.6 ruby config bug
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Thomas Sachau








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




ruby-1.8



 

        Show dependency tree





 





      Reported:
    
2012-09-06 02:11 UTC by Reuben Martin





      Modified:
    
2012-10-25 20:24 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,5.98 KB,
                text/plain)

            
2012-09-19 14:48 UTC,

            Reuben Martin




Details





Build Log

              (build.log,298.28 KB,
                text/plain)

            
2012-09-19 14:49 UTC,

            Reuben Martin




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Reuben Martin





          2012-09-06 02:11:59 UTC
        

Only applies when built with ruby USE flag enabled.

Element from a meta-bug: See bug# 434064 for details.

Reproducible: Always




Comment 1


Thomas Sachau






          2012-09-15 18:26:11 UTC
        

Please provide the needed details, including emerge --info, build.log currently active and currently installed versions of ruby and any other detail, that helps catching the issue.




Comment 2


Reuben Martin





          2012-09-19 14:48:32 UTC
        

Created attachment 324302 [details]
emerge --info




Comment 3


Reuben Martin





          2012-09-19 14:49:08 UTC
        

Created attachment 324304 [details]
Build Log




Comment 4


Reuben Martin





          2012-09-19 15:00:06 UTC
        

$ eselect ruby list
Available Ruby profiles:
  [1]   ruby18
  [2]   ruby19 (with Rubygems) *


$ equery list ruby
 * Searching for ruby ...
[IP-] [  ] dev-lang/ruby-1.8.7_p370:1.8
[IP-] [  ] dev-lang/ruby-1.9.3_p194-r1:1.9


$ equery -q uses ruby:1.8
+berkdb
-debug
-doc
-examples
+gdbm
+ipv6
-libedit
+ncurses
+readline
-rubytests
-socks5
+ssl
+threads
-tk
-xemacs

$ equery -q uses ruby:1.9
+berkdb
-debug
-doc
-examples
+gdbm
+ipv6
+ncurses
+rdoc
+readline
-rubytests
-socks5
+ssl
-tk
-xemacs
+yaml


$ RUBYOPT="" emerge subversion  ==> results in successful build




Comment 5


Thomas Sachau






          2012-10-25 15:59:51 UTC
        

Also for this one i asked graff to test subversion-1.7.6 with ruby18 and ruby19 installed and ruby19 as the default ruby provider and he can install it without any issue. Additionally he noted, that the failing part is related to perl, so i suggest you check your perl installation (including perl-cleaner).

If the issue afterwards still exists, please provide me with a way to reproduce this or a patch, which fixes it for you, since i cannot reproduce/check this.




Comment 6


Reuben Martin





          2012-10-25 20:24:32 UTC
        

It's not perl, but I figured out what is going on.


I have the ruby USE flag globally enabled (I do a lot of ruby related work) but I'm trying to use ruby 1.9 over 1.8 when possible. So I have RUBY_TARGETS="ruby19".

ruby 1.8 still get pulled in though, by a few packages that do not yet support 1.9.

However, since I only have RUBY_TARGETS="ruby19", rubygems does not get built for 1.8, which is what is causing this problem.

After adding "dev-ruby/rubygems ruby_targets_ruby18" to /etc/portage/package.use and re-emerging rubygems, subversion emerges correctly.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

