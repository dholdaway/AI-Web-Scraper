Title: 915956 – www-client/firefox-bin-115.3.1: fails to start with crash in app-i18n/uim
URL: https://bugs.gentoo.org/show_bug.cgi?id=915956

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 915956
www-client/firefox-bin-115.3.1: fails to start with crash in app-i18n/uim
Last modified: 2023-10-25 03:29:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 915956 
      - www-client/firefox-bin-115.3.1: fails to start with crash in app-i18n/uim


Summary:
www-client/firefox-bin-115.3.1: fails to start with crash in app-i18n/uim
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       critical
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-10-18 13:21 UTC by silver_ghost





      Modified:
    
2023-10-25 03:29 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



cjk









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


silver_ghost





          2023-10-18 13:21:43 UTC
        

firefox-bin-115.3.1 fails to start instantly before opening a window.

Reproducible: Always

Steps to Reproduce:
1. Run:
$ firefox-bin
Actual Results:  
Fails with output:
ATTENTION: default value of option mesa_glthread overridden by environment.
ATTENTION: default value of option mesa_glthread overridden by environment.
ATTENTION: default value of option mesa_glthread overridden by environment.
ExceptionHandler::GenerateDump cloned child 27133
ExceptionHandler::SendContinueSignalToChild sent continue signal to child
ExceptionHandler::WaitForContinueSignal waiting for continue signal...


Expected Results:  
Browser window should appear.

Run:
$ LD_LIBRARY_PATH=/opt/firefox gdb /opt/firefox/firefox-bin.
Fails with output:
...
Reading symbols from /opt/firefox/firefox-bin...
(No debugging symbols found in /opt/firefox/firefox-bin)
(gdb) run
Starting program: /opt/firefox/firefox-bin
...
Thread 1 "firefox-bin" received signal SIGSEGV, Segmentation fault.
__strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:76
76      ../sysdeps/x86_64/multiarch/strlen-avx2.S: No such file or directory.
...


$ emerge --info firefox-bin 
Portage 3.0.51 (python 3.11.5-final-0, default/linux/amd64/17.1/desktop, gcc-13, glibc-2.37-r7, 6.1.46-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-6.1.46-gentoo-x86_64-Intel-R-_Core-TM-_i7-8665U_CPU_@_1.90GHz-with-glibc2.37
KiB Mem:    32644396 total,  15878584 free
KiB Swap:  142606316 total, 142606316 free
Timestamp of repository gentoo: Wed, 18 Oct 2023 00:45:01 +0000
Head commit of repository gentoo: f5d1c19fce1e6c6984de130dfde8a5b827de2ed5
sh bash 5.1_p16-r6
ld GNU ld (Gentoo 2.40 p5) 2.40.0
distcc 3.4 x86_64-pc-linux-gnu [disabled]
ccache version 4.8.2 [enabled]
app-misc/pax-utils:        1.3.5::gentoo
app-shells/bash:           5.1_p16-r6::gentoo
dev-java/java-config:      2.3.1-r1::gentoo
dev-lang/perl:             5.38.0-r1::gentoo
dev-lang/python:           3.10.13::gentoo, 3.11.5::gentoo
dev-lang/rust:             1.71.1::gentoo
dev-util/ccache:           4.8.2::gentoo
dev-util/cmake:            3.26.5-r2::gentoo
dev-util/meson:            1.2.1-r1::gentoo
sys-apps/baselayout:       2.14::gentoo
sys-apps/openrc:           0.48::gentoo
sys-apps/sandbox:          2.38::gentoo
sys-devel/autoconf:        2.13-r7::gentoo, 2.71-r6::gentoo
sys-devel/automake:        1.16.5-r1::gentoo
sys-devel/binutils:        2.40-r5::gentoo
sys-devel/binutils-config: 5.5::gentoo
sys-devel/clang:           15.0.7-r3::gentoo, 16.0.6::gentoo
sys-devel/gcc:             12.3.1_p20230526::gentoo, 13.2.1_p20230826::gentoo
sys-devel/gcc-config:      2.11::gentoo
sys-devel/libtool:         2.4.7-r1::gentoo
sys-devel/lld:             15.0.7::gentoo, 16.0.6::gentoo
sys-devel/llvm:            15.0.7-r3::gentoo, 16.0.6::gentoo
sys-devel/make:            4.4.1-r1::gentoo
sys-kernel/linux-headers:  6.1::gentoo (virtual/os-headers)
sys-libs/glibc:            2.37-r7::gentoo
Repositories:

guru
    location: /var/lib/layman/guru
    masters: gentoo
    priority: 50
    volatile: True

rion
    location: /var/lib/layman/rion
    masters: gentoo
    priority: 50
    volatile: True

science
    location: /var/lib/layman/science
    masters: gentoo
    priority: 50
    volatile: True

local-repo
    location: /usr/local/portage
    masters: gentoo
    priority: 900
    volatile: True

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: 1000
    volatile: True
    sync-rsync-verify-metamanifest: yes
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-max-age: 24
    sync-rsync-extra-opts: 

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/lib64/libreoffice/program/sofficerc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0 /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS=" --jobs=4 --load-average=4"
ENV_UNSET="CARGO_HOME DBUS_SESSION_BUS_ADDRESS DISPLAY GDK_PIXBUF_MODULE_FILE GOBIN GOPATH PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR XDG_STATE_HOME"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-docompress binpkg-dostrip binpkg-logs buildpkg-live ccache compressdebug config-protect-if-modified distlocks ebuild-locks fixlafiles ipc-sandbox merge-sync multilib-strict network-sandbox news parallel-fetch pid-sandbox preserve-libs protect-owned qa-unresolved-soname-deps sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="ru_RU.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,-O2,--as-needed"
LEX="flex"
MAKEOPTS=" -j4 -l4"
PKGDIR="/var/cache/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
RUSTFLAGS="-C target-cpu=native -C opt-level=2"
SHELL="/bin/bash"
USE="X a52 aac acl acpi alsa amd64 bluetooth branding bzip2 cairo caps cdda cdr cjk cli crypt cups dbus dri dts dvd dvdr elogind encode exif flac fortran gdbm gif glamor gpm gtk gui iconv ipv6 jpeg lcms libnotify libtirpc linguas_en linguas_en_GB linguas_ja linguas_nb linguas_nb_NO linguas_nn linguas_nn_NO linguas_no linguas_no_NO linguas_ru linguas_ru_RU lm_sensors lto mad mng mp3 mp4 mpeg multilib ncurses nls nptl ogg opengl openmp pam pango pcre pdf pmu png policykit ppds pulseaudio qt5 readline sdl seccomp sound spell split-usr ssl startup-notification svg test-rust tiff truetype udev udisks unicode upower usb vaapi vdpau vorbis vulkan wxwidgets x264 xattr xcb xft xinerama xml xv xvid zlib zsh-completion" ABI_X86="64 32" ADA_TARGET="gnat_2021" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon sheets words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt rdrand sse sse2 sse3 sse4_1 sse4_2 ssse3" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock greis isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="efi efi-64 multiboot pc" INPUT_DEVICES="libinput synaptics keyboard joystick mouse evdev libinput" KERNEL="linux" L10N="ru-RU ru en-GB en no-NO no ja" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LUA_SINGLE_TARGET="lua5-1" LUA_TARGETS="lua5-1" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php8-1" POSTGRES_TARGETS="postgres15" PYTHON_SINGLE_TARGET="python3_11" PYTHON_TARGETS="python3_11 python3_10 python3_9" QEMU_SOFTMMU_TARGETS="mips64 aarch64 alpha arm cris i386 lm32 m68k microblaze microblazeel mips mips64el mipsel moxie or32 ppc ppc64 ppcemb s390x sh4 sh4eb sparc sparc64 tricore unicore32 x86_64 xtensa xtensaeb" QEMU_USER_TARGETS="aarch64 alpha arm armeb cris i386 m68k microblaze microblazeel mips mips64 mips64el mipsel mipsn32 mipsn32el or32 ppc ppc64 ppc64abi32 ppc64le s390x sh4 sh4eb sparc sparc32plus sparc64 tilegx unicore32 x86_64" RUBY_TARGETS="ruby31" SANE_BACKENDS="pixma ricoh epson epson2" VIDEO_CARDS="intel i965" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq proto steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  ADDR2LINE, AR, ARFLAGS, AS, ASFLAGS, CC, CCLD, CONFIG_SHELL, CPP, CPPFLAGS, CTARGET, CXX, CXXFILT, ELFEDIT, EXTRA_ECONF, F77FLAGS, FC, GCOV, GPROF, INSTALL_MASK, LC_ALL, LD, LFLAGS, LIBTOOL, LINGUAS, MAKE, MAKEFLAGS, NM, OBJCOPY, OBJDUMP, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, RANLIB, READELF, SIZE, STRINGS, STRIP, YACC, YFLAGS

=================================================================
                        Package Settings
=================================================================

www-client/firefox-bin-115.3.1::gentoo was built with the following:
USE="alsa ffmpeg gmp-autoupdate pulseaudio (-selinux) -wayland" ABI_X86="(64)" L10N="en-GB ja ru -ach -af -an -ar -ast -az -be -bg -bn -br -bs -ca -ca-valencia -cak -cs -cy -da -de -dsb -el -en-CA -eo -es-AR -es-CL -es-ES -es-MX -et -eu -fa -ff -fi -fr -fy -ga -gd -gl -gn -gu -he -hi -hr -hsb -hu -hy -ia -id -is -it -ka -kab -kk -km -kn -ko -lij -lt -lv -mk -mr -ms -my -nb -ne -nl -nn -oc -pa -pl -pt-BR -pt-PT -rm -ro -sco -si -sk -sl -son -sq -sr -sv -ta -te -th -tl -tr -trs -uk -ur -uz -vi -xh -zh-CN -zh-TW"




Comment 1


Joonas Niilola






          2023-10-21 13:51:05 UTC
        

Hmm, could you show

  emerge -pv --nodeps gcc glibc

I wonder if glibc[multiarch] is required then.
Could also be related to 115's skia updates...




Comment 2


Sam James









          2023-10-21 13:54:28 UTC
        

Please give an untruncated backtrace. You've cut out the important bits.




Comment 3


silver_ghost





          2023-10-24 23:15:08 UTC
        

Here you are.

(In reply to Joonas Niilola from comment #1)
> Hmm, could you show
> 
>   emerge -pv --nodeps gcc glibc
> 
> I wonder if glibc[multiarch] is required then.
> Could also be related to 115's skia updates...

$ emerge -pv --nodeps gcc glibc

These are the packages that would be merged, in order:

[ebuild   R    ] sys-devel/gcc-13.2.1_p20230826:13::gentoo  USE="(cxx) fortran graphite jit (multilib) nls nptl openmp (pie) sanitize ssp -ada (-cet) (-custom-cflags) -d -debug -default-stack-clash-protection -default-znow -doc (-fixed-point) -go -hardened (-ieee-long-double) (-libssp) -lto -modula2 -objc -objc++ -objc-gc (-pch) -pgo -systemtap -test -valgrind -vanilla -vtv -zstd" 0 KiB
[ebuild   R    ] sys-libs/glibc-2.37-r7:2.2::gentoo  USE="caps multiarch (multilib) ssp stack-realign (static-libs) -audit (-cet) -compile-locales (-crypt) (-custom-cflags) -doc -gd -hash-sysv-compat -headers-only -multilib-bootstrap -nscd -perl -profile (-selinux) -suid -systemd -systemtap -test (-vanilla)" 0 KiB

Total: 2 packages (2 reinstalls), Size of downloads: 0 KiB

(In reply to Sam James from comment #2)
> Please give an untruncated backtrace. You've cut out the important bits.

(gdb) bt
#0  __strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:76
#1  0x00007fffcef230be in make_loaded_str (filename=0xa6e <error: Cannot access memory at address 0xa6e>) at ../sigscheme/src/module-sscm-ext.c:264
#2  0x00007fffcef33cf1 in scm_p_require (filename=<optimized out>) at ../sigscheme/src/module-sscm-ext.c:248
#3  0x00007fffcef28764 in scm_eval (obj=<optimized out>, env=<optimized out>, env@entry=30) at ../sigscheme/src/eval.c:499
#4  0x00007fffcef34f3a in scm_load_internal (filename=<optimized out>) at ../sigscheme/src/load.c:229
#5  0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=proc@entry=0x7fffcef34d90 <scm_load_internal>, arg=arg@entry=0x7fffc78b8c30) at gcroots.c:114
#6  0x00007fffcef33d34 in scm_call_with_gc_ready_stack (arg=0x7fffc78b8c30, func=0x7fffcef34d90 <scm_load_internal>) at ../sigscheme/src/storage-gc.c:376
#7  scm_load (filename=0x7fffc78b8c30 "ISO-8859-1") at ../sigscheme/src/load.c:195
#8  scm_require_internal (filename=0x7fffc78b8c30 "ISO-8859-1") at ../sigscheme/src/module-sscm-ext.c:229
#9  scm_p_require (filename=<optimized out>) at ../sigscheme/src/module-sscm-ext.c:245
#10 0x00007fffcef28764 in scm_eval (obj=<optimized out>, env=<optimized out>, env@entry=30) at ../sigscheme/src/eval.c:499
#11 0x00007fffcef34f3a in scm_load_internal (filename=<optimized out>) at ../sigscheme/src/load.c:229
#12 0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=proc@entry=0x7fffcef34d90 <scm_load_internal>, arg=arg@entry=0x7fffc787e280) at gcroots.c:114
#13 0x00007fffcef33d34 in scm_call_with_gc_ready_stack (arg=0x7fffc787e280, func=0x7fffcef34d90 <scm_load_internal>) at ../sigscheme/src/storage-gc.c:376
#14 scm_load (filename=0x7fffc787e280 "init.scm") at ../sigscheme/src/load.c:195
#15 scm_require_internal (filename=0x7fffc787e280 "init.scm") at ../sigscheme/src/module-sscm-ext.c:229
#16 scm_p_require (filename=<optimized out>) at ../sigscheme/src/module-sscm-ext.c:245
#17 0x00007fffcef28764 in scm_eval (obj=<optimized out>, env=<optimized out>) at ../sigscheme/src/eval.c:499
#18 0x00007fffcef2984a in guard_body (eval_state=<optimized out>) at ../sigscheme/src/module-srfi34.c:446
#19 0x00007fffcef28764 in scm_eval (obj=<optimized out>, obj@entry=140736539447840, env=<optimized out>) at ../sigscheme/src/eval.c:499
#20 0x00007fffcef2907c in scm_call (args=30, proc=140736539447890) at ../sigscheme/src/eval.c:94
#21 scm_dynamic_wind (before=<optimized out>, thunk=140736539447890, after=140736539448066) at ../sigscheme/src/continuation.c:215
#22 0x00007fffcef28764 in scm_eval (obj=<optimized out>, env=<optimized out>) at ../sigscheme/src/eval.c:499
#23 0x00007fffcef292bf in scm_call (args=<optimized out>, proc=140736539447650) at ../sigscheme/src/eval.c:94
#24 scm_call_with_current_continuation (proc=140736539447650, eval_state=eval_state@entry=0x7fffffffa680) at ../sigscheme/src/continuation.c:308
#25 0x00007fffcef31f58 in scm_s_srfi34_guard (cond_catch=<optimized out>, body=<optimized out>, eval_state=0x7fffffffa680) at ../sigscheme/src/module-srfi34.c:343
#26 0x00007fffcef28764 in scm_eval (obj=<optimized out>, env=<optimized out>) at ../sigscheme/src/eval.c:499
#27 0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=0x7fffcef33910 <uim_scm_eval_internal>, arg=<optimized out>) at gcroots.c:114
#28 0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=proc@entry=0x7fffcef376a0 <uim_scm_call_with_guard_internal>, arg=arg@entry=0x7fffffffa740) at gcroots.c:114
#29 0x00007fffcef36452 in scm_call_with_gc_ready_stack (arg=0x7fffffffa740, func=func@entry=0x7fffcef376a0 <uim_scm_call_with_guard_internal>) at ../sigscheme/src/storage-gc.c:376
#30 0x00007fffcef36ea1 in uim_scm_call_with_guard (failed=<optimized out>, proc=<optimized out>, args=<optimized out>) at uim-scm-sigscheme.c:975
#31 0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=proc@entry=0x7fffcef36ec0 <uim_scm_callf_internal>, arg=arg@entry=0x7fffffffa7b0) at gcroots.c:114
#32 0x00007fffcef36452 in scm_call_with_gc_ready_stack (arg=0x7fffffffa7b0, func=func@entry=0x7fffcef36ec0 <uim_scm_callf_internal>) at ../sigscheme/src/storage-gc.c:376
#33 0x00007fffcef374fb in uim_scm_callf_with_guard (failed=<optimized out>, proc=proc@entry=0x7fffcef390b9 "require", args_fmt=args_fmt@entry=0x7fffcef380a6 "s") at uim-scm-sigscheme.c:1107
#34 0x00007fffcef378b4 in uim_scm_require_file (fn=fn@entry=0x7fffcf3160cb "init.scm") at uim-scm-sigscheme.c:1216
#35 0x00007fffcf30e0c3 in uim_init_internal (dummy=<optimized out>) at uim.c:170
#36 0x00007fffcf3902fd in GCROOTS_call_with_gc_ready_stack (ctx=0x7fffc786b1c0, proc=proc@entry=0x7fffcf30e020 <uim_init_internal>, arg=arg@entry=0x0) at gcroots.c:114
#37 0x00007fffcef36452 in scm_call_with_gc_ready_stack (arg=0x0, func=func@entry=0x7fffcf30e020 <uim_init_internal>) at ../sigscheme/src/storage-gc.c:376
#38 0x00007fffcf30e31e in uim_init () at uim.c:122
#39 0x00007fffcf3806ad in uim_counted_init () at counted-init.c:44
#40 0x00007fffcf378ad9 in im_module_init (type_module=0x7fffc78c5380 [GtkIMModule]) at ../../gtk2/immodule/gtk-im-uim.c:1824
#41 0x00007ffff65efd66 in gtk_im_module_load (module=0x7fffc78c5380 [GtkIMModule]) at ../gtk+-3.24.38/gtk/gtkimmodule.c:171
#42 0x00007ffff6caec11 in g_type_module_use (module=module@entry=0x7fffc78c5380 [GtkIMModule]) at ../glib-2.76.4/gobject/gtypemodule.c:250
#43 0x00007ffff65f066b in _gtk_im_module_create (context_id=0x7fffc7f74cf0 "uim") at ../gtk+-3.24.38/gtk/gtkimmodule.c:654
#44 0x00007ffff65f1d5b in gtk_im_multicontext_get_slave (multicontext=0x7fffeaa733a0 [GtkIMMulticontext]) at ../gtk+-3.24.38/gtk/gtkimmulticontext.c:281
#45 gtk_im_multicontext_get_preedit_string (context=0x7fffeaa733a0 [GtkIMMulticontext], str=0x7fffffffaa10, attrs=0x7fffffffaa18, cursor_pos=0x0) at ../gtk+-3.24.38/gtk/gtkimmulticontext.c:343
#46 0x00007ffff65ed2a1 in gtk_im_context_get_preedit_string (context=0x7fffeaa733a0 [GtkIMMulticontext], str=str@entry=0x7fffffffaa10, attrs=attrs@entry=0x7fffffffaa18, cursor_pos=cursor_pos@entry=0x0)
    at ../gtk+-3.24.38/gtk/gtkimcontext.c:496
#47 0x00007ffff65729dd in gtk_entry_create_layout (entry=entry@entry=0x7fffc784cc80 [GtkEntry], include_preedit=include_preedit@entry=1) at ../gtk+-3.24.38/gtk/gtkentry.c:6371
#48 0x00007ffff65732ee in gtk_entry_ensure_layout (include_preedit=1, entry=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkentry.c:6463
#49 gtk_entry_get_cursor_locations (entry=entry@entry=0x7fffc784cc80 [GtkEntry], strong_x=strong_x@entry=0x7fffffffaaf8, weak_x=0x0, type=CURSOR_STANDARD) at ../gtk+-3.24.38/gtk/gtkentry.c:6894
#50 0x00007ffff657398a in update_im_cursor_location (entry=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkentry.c:6260
#51 gtk_entry_recompute (entry=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkentry.c:6291
#52 0x00007ffff6c8c8b2 in g_cclosure_marshal_VOID__OBJECTv
    (closure=0x7fffeaa4aca0, return_value=<optimized out>, instance=0x7fffc784cc80, args=<optimized out>, marshal_data=<optimized out>, n_params=<optimized out>, param_types=0x7ffff7815e08) at ../glib-2.76.4/gobject/gmarshal.c:1910
#53 0x00007ffff6c896e9 in _g_closure_invoke_va (closure=closure@entry=0x7fffeaa4aca0, return_value=return_value@entry=0x0, instance=instance@entry=0x7fffc784cc80, args=args@entry=0x7fffffffada0, n_params=1, param_types=0x7ffff7815e08)
    at ../glib-2.76.4/gobject/gclosure.c:895
#54 0x00007ffff6ca2db2 in g_signal_emit_valist (instance=0x7fffc784cc80, signal_id=124, detail=<optimized out>, var_args=var_args@entry=0x7fffffffada0) at ../glib-2.76.4/gobject/gsignal.c:3472
#55 0x00007ffff6ca2fd7 in g_signal_emit (instance=instance@entry=0x7fffc784cc80, signal_id=<optimized out>, detail=detail@entry=0) at ../glib-2.76.4/gobject/gsignal.c:3622
#56 0x00007ffff67798cc in do_screen_change (new_screen=0x7ffff7820000 [GdkX11Screen], old_screen=0x0, widget=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkwidget.c:9969
--Type <RET> for more, q to quit, c to continue without paging--
#57 gtk_widget_propagate_hierarchy_changed_recurse (widget=0x7fffc784cc80 [GtkEntry], client_data=0x7fffffffaec0) at ../gtk+-3.24.38/gtk/gtkwidget.c:10000
#58 0x00007ffff678ba69 in _gtk_widget_propagate_hierarchy_changed (previous_toplevel=0x0, widget=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkwidget.c:10041
#59 gtk_widget_set_parent (widget=0x7fffc784cc80 [GtkEntry], parent=0x7fffc7fe47f0 [GtkFixed]) at ../gtk+-3.24.38/gtk/gtkwidget.c:9657
#60 0x00007ffff65ac90c in gtk_fixed_put (fixed=0x7fffc7fe47f0 [GtkFixed], widget=0x7fffc784cc80 [GtkEntry], x=0, y=0) at ../gtk+-3.24.38/gtk/gtkfixed.c:248
#61 0x00007ffff6c8c8b2 in g_cclosure_marshal_VOID__OBJECTv
    (closure=0x7fffeaa50820, return_value=<optimized out>, instance=0x7fffc7fe47f0, args=<optimized out>, marshal_data=<optimized out>, n_params=<optimized out>, param_types=0x7ffff7815d70) at ../glib-2.76.4/gobject/gmarshal.c:1910
#62 0x00007ffff6c896e9 in _g_closure_invoke_va (closure=closure@entry=0x7fffeaa50820, return_value=return_value@entry=0x0, instance=instance@entry=0x7fffc7fe47f0, args=args@entry=0x7fffffffb190, n_params=1, param_types=0x7ffff7815d70)
    at ../glib-2.76.4/gobject/gclosure.c:895
#63 0x00007ffff6ca2db2 in g_signal_emit_valist (instance=0x7fffc7fe47f0, signal_id=129, detail=<optimized out>, var_args=var_args@entry=0x7fffffffb190) at ../glib-2.76.4/gobject/gsignal.c:3472
#64 0x00007ffff6ca2fd7 in g_signal_emit (instance=instance@entry=0x7fffc7fe47f0, signal_id=<optimized out>, detail=detail@entry=0) at ../glib-2.76.4/gobject/gsignal.c:3622
#65 0x00007ffff651cdc5 in gtk_container_add (container=0x7fffc7fe47f0 [GtkFixed], widget=0x7fffc784cc80 [GtkEntry]) at ../gtk+-3.24.38/gtk/gtkcontainer.c:1877
#66 0x00007ffff1404af8 in  () at /opt/firefox/libxul.so
#67 0x00007fffee17bf91 in  () at /opt/firefox/libxul.so
#68 0x00007ffff1403119 in  () at /opt/firefox/libxul.so
#69 0x00007ffff13e8492 in  () at /opt/firefox/libxul.so
#70 0x00007ffff13e8a04 in  () at /opt/firefox/libxul.so
#71 0x00007ffff13e96dd in  () at /opt/firefox/libxul.so
#72 0x00007ffff13dcc7f in  () at /opt/firefox/libxul.so
#73 0x00007ffff02ed6ba in  () at /opt/firefox/libxul.so
#74 0x00007ffff13e96c8 in  () at /opt/firefox/libxul.so
#75 0x00007fffee1467a7 in  () at /opt/firefox/libxul.so
#76 0x00007ffff13fba90 in  () at /opt/firefox/libxul.so
#77 0x00007ffff13f44bb in  () at /opt/firefox/libxul.so
#78 0x00007ffff13c62a7 in  () at /opt/firefox/libxul.so
#79 0x00007ffff160eda2 in  () at /opt/firefox/libxul.so
#80 0x00007fffeec0ee6c in  () at /opt/firefox/libxul.so
#81 0x00007fffeee13f12 in  () at /opt/firefox/libxul.so
#82 0x00007fffeee51694 in  () at /opt/firefox/libxul.so
#83 0x00007ffff16c1c55 in  () at /opt/firefox/libxul.so
#84 0x00007fffeee5139a in  () at /opt/firefox/libxul.so
#85 0x00007fffeee93ac1 in  () at /opt/firefox/libxul.so
#86 0x00007ffff16d5871 in  () at /opt/firefox/libxul.so
#87 0x00007fffeee97490 in  () at /opt/firefox/libxul.so
#88 0x00007fffeee97911 in  () at /opt/firefox/libxul.so
#89 0x00005555555d9a96 in _start ()




Comment 4


Sam James









          2023-10-24 23:31:40 UTC
        

(In reply to Joonas Niilola from comment #1)
> Hmm, could you show
> 
>   emerge -pv --nodeps gcc glibc
> 
> I wonder if glibc[multiarch] is required then.
> Could also be related to 115's skia updates...

When you see bits like this, it just means it died in the accelerated version of the function - it doesn't mean that the glibc impl itself is to blame (very very rare).

Now.. we're dying in app-i18n/uim's scm_eval->scm_p_require->make_loaded_str, maybe from dev-scheme/sigscheme?




Comment 5


Sam James









          2023-10-24 23:35:24 UTC
        

Ah, uim blocks sigscheme, so it uses its own copy.

You could maybe try https://github.com/uim/uim/commit/15f0788f1acb08372ebd6e1f92cc2135373d270b.

Could you also try running firefox-bin under Valgrind?




Comment 6


silver_ghost





          2023-10-25 03:28:47 UTC
        

(In reply to Sam James from comment #5)
> Ah, uim blocks sigscheme, so it uses its own copy.
> 
> You could maybe try
> https://github.com/uim/uim/commit/15f0788f1acb08372ebd6e1f92cc2135373d270b.
> 
> Could you also try running firefox-bin under Valgrind?

It seems just rebuilding of app-i18n/uim fixed the problem. Now firefox-bin starts and runs.




Comment 7


Sam James









          2023-10-25 03:29:50 UTC
        

Huh, okay. Thanks.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

