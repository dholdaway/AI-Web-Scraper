Title: 100924 – app-backup/dar-2.2.2 depends on dev-perl/Crypt-Blowfish for dar_static
URL: https://bugs.gentoo.org/show_bug.cgi?id=100924

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 100924
app-backup/dar-2.2.2 depends on dev-perl/Crypt-Blowfish for dar_static
Last modified: 2005-08-06 13:59:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 100924 
      - app-backup/dar-2.2.2 depends on dev-perl/Crypt-Blowfish for dar_static


Summary:
app-backup/dar-2.2.2 depends on dev-perl/Crypt-Blowfish for dar_static
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

MATSUU Takuto (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-07-31 12:13 UTC by Greg Yasko





      Modified:
    
2005-08-06 13:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Greg Yasko





          2005-07-31 12:13:04 UTC
        

With "app-backup/dar static" specified in /etc/portage/package.use, Dar fails to
compile and a number of errors are shown. After emerging dev-perl/Crypt-Blowfish
dar installs properly with dar_static built.



Reproducible: Always
Steps to Reproduce:
1. Set USE to static
2. emerge -Dva dar
3. emerge -Dva dev-perl/Crypt-Blowfish
4. emerge -Dva dar

Actual Results:  
With the dependency satisfied dar completes the installation process successfully.


emerge info
Portage 2.0.51.22-r2 (default-linux/x86/2005.0, gcc-3.3.5-20050130,
glibc-2.3.5-r0, 2.6.12-gentoo-r6 i686)
=================================================================
System uname: 2.6.12-gentoo-r6 i686 AMD Athlon(TM) XP 3200+
Gentoo Base System version 1.6.13
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.15.92.0.2-r10
sys-devel/libtool:   1.5.18-r1
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-mcpu=athlon-xp -O2 -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.2/share/config
/usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown
/usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown
/usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref
/usr/share/config /usr/share/texmf/dvipdfm/config/
/usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/
/usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-mcpu=athlon-xp -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.chem.wisc.edu/gentoo/
ftp://gentoo.chem.wisc.edu/gentoo/ http://cudlug.cudenver.edu/gentoo/
ftp://cudlug.cudenver.edu/pub/mirrors/distributions/gentoo/
http://gentoo.mirrors.pair.com/ ftp://gentoo.mirrors.pair.com/
http://gentoo.ccccom.com ftp://gentoo.ccccom.com
http://ftp-mirror.internap.com/pub/gentoo/
ftp://ftp-mirror.internap.com/pub/gentoo/ http://mirrors.tds.net/gentoo
ftp://mirrors.tds.net/gentoo http://mirror.tucdemonic.org/gentoo/
http://mirror.clarkson.edu/pub/distributions/gentoo/
http://mirrors.acm.cs.rpi.edu/gentoo/ http://lug.mtu.edu/gentoo/
ftp://lug.mtu.edu/gentoo/source ftp://ftp.ndlug.nd.edu/pub/gentoo/
http://open-systems.ufl.edu/mirrors/gentoo http://gentoo.llarian.net/
http://mirror.datapipe.net/gentoo http://mirror.datapipe.net/gentoo
http://gentoo.eliteitminds.com http://www.gigaload.org/gentoo.org/
http://gentoo.oregonstate.edu"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow X adns alsa apache2 arts avi bash-completion berkdb bitmap-fonts
cdr crypt cups curl doc dvd dvdr eds emboss encode esd f77 fam flac foomaticdb
fortran gd gdbm gif gnome gpm gstreamer gtk gtk2 guile hal imagemagick imlib
java jikes joystick jpeg junit libg++ libwww mad mikmod mmx mng motif mozilla
mp3 mpeg mysql nas ncurses nls nowin ogg oggvorbis opengl oss pam pdflib perl
png ppds python quicktime readline ruby scanner sdl slang spell ssl svg svga
symlink tcltk tcpd tetex tiff truetype truetype-fonts type1-fonts usb vorbis xml
xml2 xmms xv zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, LINGUAS




Comment 1


MATSUU Takuto (RETIRED)






          2005-08-01 07:38:23 UTC
        

hmm, "USE=static emerge dar" w/o dev-perl/Crypt-Blowfish has no error on my env.
Can you attach compile error log?






Comment 2


Greg Yasko





          2005-08-01 09:38:52 UTC
        

Unmerging Crypt-Blowfish, and unmerging then remerging dar I get the below errors:



i686-pc-linux-gnu-g++ -mcpu=athlon-xp -O2 -pipe -o get_version get_version.o
catalogue.o compressor.o deci.o defile.o ea.o ea_filesystem.o erreurs.o etage.o
filesystem.o filtre.o generic_file.o header.o header_version.o libdar.o
macro_tools.o mask.o path.o sar.o sar_tools.o scrambler.o storage.o
terminateur.o test_memory.o tools.o tronc.o tuyau.o user_interaction.o
wrapperlib.o zapette.o special_alloc.o archive.o cache.o int_tools.o crypto.o
tronconneuse.o elastic.o thread_cancellation.o real_infinint.o  -lpthread
/lib/libattr.so -lcrypto -lbz2 -lz -ldl
archive.o(.text+0xcd99): In function
`libdar::archive::op_create_in(libdar::user_interaction&, bool, libdar::path
const&, libdar::path const&, libdar::archive*, libdar::mask const&, libdar::mask
const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&, bool, bool, bool, bool, bool, libdar::compression, unsigned,
libdar::infinint const&, libdar::infinint const, bool, bool,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::crypto_algo, std::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&, unsigned, libdar::mask const&, libdar::infinint
const, bool, libdar::infinint const, bool, bool, bool, bool)':
: undefined reference to `typeinfo for libdar::tronconneuse'
archive.o(.text+0xcdb7): In function
`libdar::archive::op_create_in(libdar::user_interaction&, bool, libdar::path
const&, libdar::path const&, libdar::archive*, libdar::mask const&, libdar::mask
const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&, bool, bool, bool, bool, bool, libdar::compression, unsigned,
libdar::infinint const&, libdar::infinint const, bool, bool,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::crypto_algo, std::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&, unsigned, libdar::mask const&, libdar::infinint
const, bool, libdar::infinint const, bool, bool, bool, bool)':
: undefined reference to `libdar::tronconneuse::flush()'
crypto.o(.text+0x4e8): In function
`libdar::blowfish::blowfish[not-in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to
`libdar::tronconneuse::tronconneuse[not-in-charge](libdar::user_interaction&,
unsigned, libdar::generic_file&)'
crypto.o(.text+0x577): In function
`libdar::blowfish::blowfish[not-in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to `vtable for libdar::tronconneuse'
crypto.o(.text+0x57f): In function
`libdar::blowfish::blowfish[not-in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to `libdar::tronconneuse::detruit()'
crypto.o(.text+0x888): In function
`libdar::blowfish::blowfish[in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to
`libdar::tronconneuse::tronconneuse[not-in-charge](libdar::user_interaction&,
unsigned, libdar::generic_file&)'
crypto.o(.text+0x918): In function
`libdar::blowfish::blowfish[in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to `vtable for libdar::tronconneuse'
crypto.o(.text+0x920): In function
`libdar::blowfish::blowfish[in-charge](libdar::user_interaction&, unsigned,
std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
libdar::generic_file&)':
: undefined reference to `libdar::tronconneuse::detruit()'
crypto.o(.gnu.linkonce.r._ZTVN6libdar8blowfishE+0x10): undefined reference to
`libdar::tronconneuse::skip(libdar::infinint const&)'
crypto.o(.gnu.linkonce.r._ZTVN6libdar8blowfishE+0x14): undefined reference to
`libdar::tronconneuse::skip_to_eof()'
crypto.o(.gnu.linkonce.r._ZTVN6libdar8blowfishE+0x18): undefined reference to
`libdar::tronconneuse::skip_relative(int)'
crypto.o(.gnu.linkonce.r._ZTVN6libdar8blowfishE+0x20): undefined reference to
`libdar::tronconneuse::inherited_read(char*, unsigned)'
crypto.o(.gnu.linkonce.r._ZTVN6libdar8blowfishE+0x24): undefined reference to
`libdar::tronconneuse::inherited_write(char*, unsigned)'
crypto.o(.gnu.linkonce.t._ZN6libdar8blowfishD1Ev+0x11): In function
`libdar::blowfish::~blowfish [in-charge]()':
: undefined reference to `vtable for libdar::tronconneuse'
crypto.o(.gnu.linkonce.t._ZN6libdar8blowfishD1Ev+0x19): In function
`libdar::blowfish::~blowfish [in-charge]()':
: undefined reference to `libdar::tronconneuse::detruit()'
crypto.o(.gnu.linkonce.t._ZN6libdar8blowfishD0Ev+0x11): In function
`libdar::blowfish::~blowfish [in-charge deleting]()':
: undefined reference to `vtable for libdar::tronconneuse'
crypto.o(.gnu.linkonce.t._ZN6libdar8blowfishD0Ev+0x19): In function
`libdar::blowfish::~blowfish [in-charge deleting]()':
: undefined reference to `libdar::tronconneuse::detruit()'
crypto.o(.gnu.linkonce.r._ZTIN6libdar8blowfishE+0x8): undefined reference to
`typeinfo for libdar::tronconneuse'
collect2: ld returned 1 exit status
make[3]: *** [get_version] Error 1
make[3]: Leaving directory `/var/tmp/portage/dar-2.2.2/work/dar-2.2.2/src/libdar'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/dar-2.2.2/work/dar-2.2.2/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/tmp/portage/dar-2.2.2/work/dar-2.2.2'
make: *** [all] Error 2

!!! ERROR: app-backup/dar-2.2.2 failed.
!!! Function src_compile, Line 29, Exitcode 2
!!! (no error message)
!!! If you need support, post the topmost build error, NOT this status message.






Comment 3


Greg Yasko





          2005-08-01 12:07:59 UTC
        

Strange -- I unmerged Crypt-Blowfish and dar and then attempted to remerge both.
Blowfish built but dar won't build with the "static" USE flag set no matter
what, not even after cleaning out /var/tmp/portage/dar*. Unset the static USE
flag and it installs just fine. Otherwise I get the same errors.




Comment 4


Greg Yasko





          2005-08-06 07:57:33 UTC
        

After a recent "emerge sync" dar builds just fine with USE="static". The problem
must have been a slight hiccup in my setup, or maybe ldconfig needed to be run.

Please close this bug.




Comment 5


MATSUU Takuto (RETIRED)






          2005-08-06 13:59:43 UTC
        

close









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

