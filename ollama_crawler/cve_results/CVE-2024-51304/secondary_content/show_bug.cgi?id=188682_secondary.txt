Title: 188682 – kde-base/kig-3.5.7 crashes if compiled with kdeenablefinal use flag
URL: https://bugs.gentoo.org/show_bug.cgi?id=188682

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 188682
kde-base/kig-3.5.7 crashes if compiled with kdeenablefinal use flag
Last modified: 2010-12-19 16:55:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 188682 
      - kde-base/kig-3.5.7 crashes if compiled with kdeenablefinal use flag


Summary:
kde-base/kig-3.5.7 crashes if compiled with kdeenablefinal use flag
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-08-13 07:03 UTC by Marco Clocchiatti





      Modified:
    
2010-12-19 16:55 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



esigra









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge info and Kcrash bakctrace

              (kig-bug.tar.bz2,3.21 KB,
                application/octet-stream)

            
2007-08-13 07:07 UTC,

            Marco Clocchiatti




Details





emerge info

              (emerge-info.txt,4.39 KB,
                text/plain)

            
2007-08-13 08:32 UTC,

            Marco Clocchiatti




Details





Kcrash-backtrace

              (Kcrash-backtrace.txt,2.93 KB,
                text/plain)

            
2007-08-13 08:33 UTC,

            Marco Clocchiatti




Details





$ strace -f kig >kig-strace.txt 2>&

              (kig-strace.txt,591.73 KB,
                text/plain)

            
2007-08-13 20:03 UTC,

            Marco Clocchiatti




Details





good-strace

              (both-strace.tar.bz2,82.46 KB,
                application/x-bzip2)

            
2007-08-14 03:44 UTC,

            Marco Clocchiatti




Details





last backtrace

              (last-backtrace.txt,1.29 KB,
                text/plain)

            
2007-08-14 10:42 UTC,

            Marco Clocchiatti




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marco Clocchiatti





          2007-08-13 07:03:58 UTC
        

kde-base/kig-3.5.7 crashes if compiled with kdeenablefinal use flag.

Kcrash says:

could not find the necessary kig library, check your installation.

emerge --info and bakctrace are allowed.

Reproducible: Always

Steps to Reproduce:
1.
2.
3.


Expected Results:  
I thing the problem should be fixed, or the useflag disabled in the ebuild.

kig works well without kdeenablefinal useflag.




Comment 1


Marco Clocchiatti





          2007-08-13 07:07:16 UTC
        

Created attachment 127925 [details]
emerge info and Kcrash bakctrace

emerge info and Kcrash bakctrace




Comment 2


Jakub Moc (RETIRED)






          2007-08-13 07:22:12 UTC
        

Please, don't attach tarballs unless absolutely necessary. You are forcing everyone to download and manually unpack the thing instead of viewing it in the browser.




Comment 3


Marco Clocchiatti





          2007-08-13 08:32:36 UTC
        

Created attachment 127929 [details]
emerge info




Comment 4


Marco Clocchiatti





          2007-08-13 08:33:07 UTC
        

Created attachment 127931 [details]
Kcrash-backtrace




Comment 5


Marco Clocchiatti





          2007-08-13 08:41:39 UTC
        

p.s.: off course, using kde-base/kededu instead of kde-base/kig, I have the same issue.




Comment 6


Wulf Krueger (RETIRED)






          2007-08-13 12:27:35 UTC
        

First of all, please read the kdeenablefinal USE flag's description:

kdeenablefinal - EXPERIMENTAL: KDE ebuilds will use the enable-final flag, yielding compilation speedups at the cost of heavy mem usage and potentially causing problems. We strongly discourage setting this.

That said, kig works fine for me even with kdeenablefinal set. Your backtrace is unfortunately useless as it does not contain the necessary information. Please read this document to find out how to get meaningful backtraces: http://www.gentoo.org/proj/en/qa/backtraces.xml

Try running revdep-rebuild -X (from app-portage/gentoolkit), temporarily disable ccache and then try re-emerging kig.




Comment 7


Marco Clocchiatti





          2007-08-13 14:15:52 UTC
        

(In reply to comment #6)
> First of all, please read the kdeenablefinal USE flag's description:
> 
>
I well know the `euse -i kdeenablefinal` info, and that the reason because I've tried to disable it.

> That said, kig works fine for me even with kdeenablefinal set.
>
ok. so the problem should be in my installation. give me please some time to investigate before put invalid this bug.

> Your backtrace is unfortunately useless as it does not contain the necessary information.
> Please read this document to find out how to get meaningful backtraces:
> http://www.gentoo.org/proj/en/qa/backtraces.xml
> 
[quote]
KDE crash handler's notes
...  On this dialog there is a "Backtrace" tab ... That backtrace is usually good enough for reporting a problem.
[/quote]
I'm just a noob, and I've submitted the backtrace from Kcrash. I have drqonqi installed in my system.
> Try running revdep-rebuild -X (from app-portage/gentoolkit), temporarily
> disable ccache and then try re-emerging kig.
> 
from revdep-rebuild -X -pv :
Assigning packages to ebuilds... Nothing to rebuild

I've just disabled ccache before submitting this bug.

again: give please some time to reanalyse my system.




Comment 8


Wulf Krueger (RETIRED)






          2007-08-13 15:15:18 UTC
        

(In reply to comment #7)
> again: give please some time to reanalyse my system.

First of all, should I have sounded harsh, I'm sorry. I didn't mean to be.

About you being a newbie: It's true, I'm currently hungry but I don't habitually eat newbies so don't worry. ;-)

We all started as newbies once so don't worry about that either. We'll gladly provide assistance in getting this fixed.




Comment 9


Marco Clocchiatti





          2007-08-13 20:03:11 UTC
        

Created attachment 127980 [details]
$ strace -f kig >kig-strace.txt 2>&

(In reply to comment #8)
> (In reply to comment #7)
> > again: give please some time to reanalyse my system.
> 
> First of all, should I have sounded harsh.
> 
you was not harsh at all. you just exposed me your technical point of view and gave me some useful suggestions. it's not your blame if your kig is working, while mine not ...
I spoke of me as a newbie just to explain why I'm not able to identify a meaningless backtrace.

anyway, I've not solved my problem and I want to understand it. I try to get a backtrace directly from gdb, but I was not able to launch kig with --nocrashhandler option.

so, I try to use strace and to submit you its output.

before starting I've recompiled kig (and just kig) without LDFLAGS, and with CFLAGS="-march=athlon64 -O2 -gdb", FEATURES="buildpkg parallel-fetch splitdebug" and USE="kig-scripting kdeenablefinal"

if you like, may also recompile kdelibs with some other parameters, but I cannot recompile all world, as the howto suggests :roll: .




Comment 10


Marco Clocchiatti





          2007-08-14 03:30:11 UTC
        

I've also compared a good strace (without kdeenablefinal) with a bad strace.

first difference happens on line 4693 after opening /lib/librt.so.1

I don't know what does it mean, but I submit both outputs.




Comment 11


Marco Clocchiatti





          2007-08-14 03:44:42 UTC
        

Created attachment 128006 [details]
good-strace

good-strace file is long too much. forced using bzip-tar.




Comment 12


Wulf Krueger (RETIRED)






          2007-08-14 05:31:21 UTC
        

Marco, while the output of strace can sometimes help to diagnose a problem, it doesn't help here.

Compiling at least kdelibs with debug flags as mentioned in the backtrace guide might help but it could as well turn out to be insufficient. Another option would be to put "-kdeenablefinal" in your USE flags in /etc/make.conf and re-emerge kig if it works for you without the kdeenablefinal USE flag.




Comment 13


Marco Clocchiatti





          2007-08-14 10:42:44 UTC
        

Created attachment 128032 [details]
last backtrace

(In reply to comment #12)
> Marco, while the output of strace can sometimes help to diagnose a problem, it
> doesn't help here.
> 
afraid.

> Compiling at least kdelibs with debug flags as mentioned in the backtrace guide
> might help but it could as well turn out to be insufficient.

that's my last attempt. it's seems no more intersting than before, but I attached it the same.

> Another option
> would be to put "-kdeenablefinal" in your USE flags in /etc/make.conf

Yes. Now I put it in /etc/portage/package.keywords.
it works for me, but give no change to understand the issue.

Thank for your support.




Comment 14


Wulf Krueger (RETIRED)






          2007-08-17 15:43:42 UTC
        

Well, I'd suggest to deactivate kdeenablefinal globally (in make.conf) but at least it works for you now. 









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

