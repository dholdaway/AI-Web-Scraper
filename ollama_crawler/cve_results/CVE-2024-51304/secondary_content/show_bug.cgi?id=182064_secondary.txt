Title: 182064 – gnutls-1.4.4-r1.ebuild missing a built time dependency
URL: https://bugs.gentoo.org/show_bug.cgi?id=182064

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 182064
gnutls-1.4.4-r1.ebuild missing a built time dependency
Last modified: 2007-06-15 06:29:04 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 182064 
      - gnutls-1.4.4-r1.ebuild missing a built time dependency


Summary:
gnutls-1.4.4-r1.ebuild missing a built time dependency
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2007-06-14 21:30 UTC by John R. Graham





      Modified:
    
2007-06-15 06:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


John R. Graham






          2007-06-14 21:30:28 UTC
        

See this forum post:  http://forums.gentoo.org/viewtopic-t-562554-highlight-.html

Summary:
gnutls-1.4.4-r1 failed to build with automake-1.9.4 but will build successfully after automake had been updated to automake-1.9.6-r2.  I've also successfully built it with automake-1.10.

As such, I believe that the gnutls-1.4.4-r1.ebuild needs the following additional build dependency:
>=sys-devel/automake-1.9.6

I retrieved the (no longer in active portage) automake-1.9.4 ebuild and confirmed the failure to emerge.  Interestingly, all other versions of gnutls *do not* have this problem.  Only the 1.4.4-r1 ebuild needs to be changed.

- John




Comment 1


Jakub Moc (RETIRED)






          2007-06-14 21:34:53 UTC
        

<snip>
WANT_AUTOCONF="latest"
WANT_AUTOMAKE="1.9"
inherit eutils autotools
</snip>

>=sys-devel/automake-1.9.6 is wrong; it fails w/ automake 1.10. Upgrade your system properly using --deep, that's about it.




Comment 2


John R. Graham






          2007-06-14 23:27:48 UTC
        

Jacub,

The autotools eclass takes WANT_AUTOMAKE value and creates the following dependency atom:
    =sys-devel/automake-${WANT_AUTOMAKE}*

In the case of WANT_AUTOMAKE="1.9", that constructs a dependency atom that says gnutls will build with any old version in the 1.9 slot, which is clearly not the case.

Regarding my recommended dependency atom, well, rats, you're right.  The correct dependency atom right now is
    =sys-devel/automake-1.9.6*
but in the future could potentially be
    ( || =sys-devel/automake-1.9.6* =sys-devel/automake-1.9.7* )

This actually illustrates one of my most ardent desires for a future EAPI:  AND dependencies.  I'd *really* like to be able to say something like
    ( && >=sys-devel/automake-1.9.6 <sys-devel/automake-1.10 )
but I know that it's not supported today.

Although I know that --deep would have pulled in the latest ebuild for the 1.9 slot, why is it not right to codify the real dependencies of the package in the ebuild?  In other words, isn't --deep just masking an (admittedly minor) dependency issue with this ebuild?

I'm reopening the bug (just this once), but I'll accept your judgment.

- John




Comment 3


Jakub Moc (RETIRED)






          2007-06-15 06:29:04 UTC
        

No, we don't have ranged dependencies  (see bug 4315), and >=sys-devel/automake-1.9.6 <sys-devel/automake-1.10 won't work w/ slotted package. 

Considering that automake-1.9.4 doesn't exist in the tree, it's not a huge issue here because everyone will get 1.9.6-r2 when emerging this.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

