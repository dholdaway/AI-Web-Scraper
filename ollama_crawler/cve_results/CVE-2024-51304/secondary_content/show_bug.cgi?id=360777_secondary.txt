Title: 360777 – net-libs/xulrunner-1.9.2.16 fails building
URL: https://bugs.gentoo.org/show_bug.cgi?id=360777

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 360777
net-libs/xulrunner-1.9.2.16 fails building
Last modified: 2011-04-13 20:27:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 360777 
      - net-libs/xulrunner-1.9.2.16 fails building


Summary:
net-libs/xulrunner-1.9.2.16 fails building
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-03-27 14:00 UTC by Yoan Blanc





      Modified:
    
2011-04-13 20:27 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log (bzip'd coz it was too big)

              (build.log.bz2,143.41 KB,
                application/x-bzip2)

            
2011-03-27 16:16 UTC,

            Yoan Blanc




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Yoan Blanc





          2011-03-27 14:00:05 UTC
        

XULRunner doesn't build and is required by firefox-3.6.16

Reproducible: Always

Steps to Reproduce:
1. emerge -av xulrunner

[ebuild     U ] net-libs/xulrunner-1.9.2.16 [1.9.2.15] USE="alsa dbus gnome ipc libnotify system-sqlite wifi -custom-optimization -debug -java -startup-notification" 0 kB
Actual Results:  
../../staticlib/components/libxpconnect.a(xpccomponents.o): In function `xpc_EvalInSandbox(JSContext*, JSObject*, nsAString_internal const&, char const*, int, JSVersion, int, long*)':
xpccomponents.cpp:(.text+0x40d7): undefined reference to `JS_DropPrincipals'
xpccomponents.cpp:(.text+0x4172): undefined reference to `JS_DropPrincipals'
xpccomponents.cpp:(.text+0x43c7): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libxpconnect.a(xpcwrappedjsclass.o): In function `nsXPCWrappedJSClass::CallMethod(nsXPCWrappedJS*, unsigned short, XPTMethodDescriptor const*, nsXPTCMiniVariant*)':
xpcwrappedjsclass.cpp:(.text+0x12bf): undefined reference to `js_DeepBail(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o): In function `nsIDOMNSHTMLTextAreaElement_SetSelectionRange_tn(JSContext*, JSObject*, int, int)':
dom_quickstubs.cpp:(.text+0xb9): undefined reference to `js_SetTraceableNativeFailed(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o): In function `nsIDOMNSHTMLInputElement_SetSelectionRange_tn(JSContext*, JSObject*, int, int)':
dom_quickstubs.cpp:(.text+0x180): undefined reference to `js_SetTraceableNativeFailed(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o): In function `nsIDOMHTMLTextAreaElement_Select_tn(JSContext*, JSObject*)':
dom_quickstubs.cpp:(.text+0x239): undefined reference to `js_SetTraceableNativeFailed(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o): In function `nsIDOMHTMLTableSectionElement_DeleteRow_tn(JSContext*, JSObject*, int)':
dom_quickstubs.cpp:(.text+0x2f4): undefined reference to `js_SetTraceableNativeFailed(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o): In function `nsIDOMHTMLTableRowElement_DeleteCell_tn(JSContext*, JSObject*, int)':
dom_quickstubs.cpp:(.text+0x3b1): undefined reference to `js_SetTraceableNativeFailed(JSContext*)'
../../staticlib/components/libxpconnect.a(dom_quickstubs.o):dom_quickstubs.cpp:(.text+0x46e): more undefined references to `js_SetTraceableNativeFailed(JSContext*)' follow
../../staticlib/components/libxpconnect.a(mozJSComponentLoader.o): In function `mozJSComponentLoader::GlobalForLocation(nsILocalFile*, JSObject**, char**, long*)':
mozJSComponentLoader.cpp:(.text+0x1cd7): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libxpconnect.a(mozJSSubScriptLoader.o): In function `mozJSSubScriptLoader::LoadSubScript(unsigned short const*)':
mozJSSubScriptLoader.cpp:(.text+0x949): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libcaps.a(nsPrincipal.o): In function `nsPrincipal::GetJSPrincipals(JSContext*, JSPrincipals**)':
nsPrincipal.cpp:(.text+0x1795): undefined reference to `JS_HoldPrincipals'
../../staticlib/components/libcaps.a(nsSystemPrincipal.o): In function `nsSystemPrincipal::GetJSPrincipals(JSContext*, JSPrincipals**)':
nsSystemPrincipal.cpp:(.text+0x2c7): undefined reference to `JS_HoldPrincipals'
../../staticlib/components/libcaps.a(nsNullPrincipal.o): In function `nsNullPrincipal::GetJSPrincipals(JSContext*, JSPrincipals**)':
nsNullPrincipal.cpp:(.text+0x2a9): undefined reference to `JS_HoldPrincipals'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o): In function `ObjectPrincipalFinder(JSContext*, JSObject*)':
nsJSEnvironment.cpp:(.text+0x1176): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o): In function `nsJSContext::ConvertSupportsTojsvals(nsISupports*, void*, unsigned int*, void**, void**)':
nsJSEnvironment.cpp:(.text+0x2375): undefined reference to `js_DeepBail(JSContext*)'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o): In function `nsJSContext::CompileFunction(void*, nsACString_internal const&, unsigned int, char const**, nsAString_internal const&, char const*, unsigned int, unsigned int, int, void**)':
nsJSEnvironment.cpp:(.text+0x38ae): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o): In function `nsJSContext::CompileScript(unsigned short const*, int, void*, nsIPrincipal*, char const*, unsigned int, unsigned int, nsScriptObjectHolder&)':
nsJSEnvironment.cpp:(.text+0x3d2c): undefined reference to `JS_DropPrincipals'
nsJSEnvironment.cpp:(.text+0x3e10): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o): In function `nsJSContext::EvaluateString(nsAString_internal const&, void*, nsIPrincipal*, char const*, unsigned int, unsigned int, nsAString_internal*, int*)':
nsJSEnvironment.cpp:(.text+0x3f9a): undefined reference to `JS_DropPrincipals'
nsJSEnvironment.cpp:(.text+0x4020): undefined reference to `JS_DropPrincipals'
../../staticlib/components/libgklayout.a(nsJSEnvironment.o):nsJSEnvironment.cpp:(.text+0x4145): more undefined references to `JS_DropPrincipals' follow
collect2: ld returned 1 exit status
make[3]: *** [libxul.so] Error 1
make[3]: Leaving directory `/var/tmp/portage/net-libs/xulrunner-1.9.2.16/work/mozilla-1.9.2/toolkit/library'
make[2]: *** [libs_tier_toolkit] Error 2
make[2]: Leaving directory `/var/tmp/portage/net-libs/xulrunner-1.9.2.16/work/mozilla-1.9.2'
make[1]: *** [tier_toolkit] Error 2
make[1]: Leaving directory `/var/tmp/portage/net-libs/xulrunner-1.9.2.16/work/mozilla-1.9.2'
make: *** [default] Error 2
emake failed
 * ERROR: net-libs/xulrunner-1.9.2.16 failed (compile phase):
 *   emake failed
 * 
 * Call stack:
 *     ebuild.sh, line   56:  Called src_compile
 *   environment, line 7506:  Called _eapi2_src_compile
 *     ebuild.sh, line  665:  Called die
 * The specific snippet of code:
 *   		emake || die "emake failed"
 * 
 * If you need support, post the output of 'emerge --info =net-libs/xulrunner-1.9.2.16',
 * the complete build log and the output of 'emerge -pqv =net-libs/xulrunner-1.9.2.16'.
!!! When you file a bug report, please include the following information:
GENTOO_VM=  CLASSPATH="" JAVA_HOME="/home/yoan/.gentoo/java-config-2/current-user-vm"
JAVACFLAGS="" COMPILER=""
and of course, the output of emerge --info
 * The complete build log is located at '/var/tmp/portage/net-libs/xulrunner-1.9.2.16/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-libs/xulrunner-1.9.2.16/temp/environment'.
 * S: '/var/tmp/portage/net-libs/xulrunner-1.9.2.16/work/mozilla-1.9.2


# emerge --info
Portage 2.1.9.42 (default/linux/amd64/10.0, gcc-4.4.5, glibc-2.11.3-r0, 2.6.36-gentoo-r5 x86_64)
=================================================================
System uname: Linux-2.6.36-gentoo-r5-x86_64-Intel-R-_Core-TM-2_Duo_CPU_P7550_@_2.26GHz-with-gentoo-1.12.14
Timestamp of tree: Sun, 27 Mar 2011 08:45:01 +0000
app-shells/bash:     4.1_p9
dev-java/java-config: 2.1.11-r3
dev-lang/python:     2.6.6-r2, 2.7.1-r1, 3.1.3-r1
dev-util/cmake:      2.8.1-r2
sys-apps/baselayout: 1.12.14-r1
sys-apps/sandbox:    2.4
sys-devel/autoconf:  2.13, 2.65-r1
sys-devel/automake:  1.9.6-r3, 1.10.3, 1.11.1
sys-devel/binutils:  2.20.1-r1
sys-devel/gcc:       4.4.5
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.10
sys-devel/make:      3.81-r2
virtual/os-headers:  2.6.36.1 (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA Broadcom"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-march=core2 -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
FFLAGS=""
GENTOO_MIRRORS="http://mirror.ovh.net/gentoo-distfiles/ ftp://mirror.ovh.net/gentoo-distfiles/ http://gentoo.modulix.net/gentoo/ http://ftp.club-internet.fr/pub/mirrors/gentoo ftp://gentoo.imj.fr/pub/gentoo/ ftp://ftp.free.fr/mirrors/ftp.gentoo.org/ http://mirror.switch.ch/ftp/mirror/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/ ftp://ftp.solnet.ch/mirror/Gentoo http://gentoo.mirror.solnet.ch "
LANG="fr_CH.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en fr de"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/wdzierzan /var/lib/layman/dev-zero"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X a52 aac acl acpi alsa amd64 apache2 autoipd automount avahi bash-completion berkdb branding bzip2 cairo cdda cddb cdio cdparanoia cdr cdrom charmap cjk cleartype cli consolekit cracklib crypt ctype cups curl cxx dbus device-mapper dri dv dvd emerald encode exif extras faac fastcgi ffmpeg flac foomaticdb fortran fts3 fuse gd gdbm gdu gimp git glitz gnome gnome-keyring gnutls gphoto2 gpm gstreamer gtk iconv icu imagemagick innodb ipv6 jabber javascript jingle jinja2 jpeg json kdrive lame lensfun libnotify mad mdnsresponder-compat mercurial midi mmx mng modules mozdevelop mp3 mp4 mpd mpeg mudflap multilib mysql nautilus ncurses networkmanager nforce2 nls nptl nptlonly nsplugin nvidia ogg opengl openmp pam pcre pdf pdo perl png policykit ppds pppd pulseaudio python qt-static raw readline rsync rtsp samba scrobbler secure-delete session simplexml sqlite sqlite3 sse sse2 ssl static-gzip stemmer subversion svg sysfs system-libs system-sqlite system-v8 tcpd telepathy theora threads thumbnail thunderbird tiff trayicon truetype twisted udev unicode unlock-notify unzip usb uuid v4l v4l2 v8 video vim vim-syntax vorbis vpx wav web webdav webkit wifi wma wmf xattr xcb xml xorg xrandr xscreensaver xsl xslt xterm xterm-color xulrunner xvid yahoo youtube zip zlib" ALSA_CARDS="hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="worker" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en fr de" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" SANE_BACKENDS="hp5400" USERLAND="GNU" VIDEO_CARDS="nvidia nv" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


SpanKY






          2011-03-27 14:30:55 UTC
        

please post the full build log as an attachment




Comment 2


Yoan Blanc





          2011-03-27 16:16:10 UTC
        

Created attachment 267407 [details]
build log (bzip'd coz it was too big)




Comment 3


Yoan Blanc





          2011-04-13 20:27:50 UTC
        

It just went through this time…

$ xulrunner-1.9.2 --version
Mozilla XULRunner 1.9.2.16 - 20110413211822









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

