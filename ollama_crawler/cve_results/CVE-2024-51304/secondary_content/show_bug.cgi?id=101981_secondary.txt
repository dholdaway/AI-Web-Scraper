Title: 101981 – emerge php-4.4.0 exits w/o error after unpacking
URL: https://bugs.gentoo.org/show_bug.cgi?id=101981

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 101981
emerge php-4.4.0 exits w/o error after unpacking
Last modified: 2005-08-11 02:47:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 101981 
      - emerge php-4.4.0 exits w/o error after unpacking


Summary:
emerge php-4.4.0 exits w/o error after unpacking
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Development

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

PHP Bugs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-08-10 07:15 UTC by Andre





      Modified:
    
2005-08-11 02:47 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jakub









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info

              (emerge-info.txt,2.52 KB,
                text/plain)

            
2005-08-10 08:07 UTC,

            Andre




Details





emerge log, cf. emerge.log-manual (see comment)

              (emerge.log,1.39 KB,
                text/plain)

            
2005-08-10 08:25 UTC,

            Andre




Details





emerge log, proper one

              (emerge.log-manual,1.37 KB,
                text/plain)

            
2005-08-10 08:35 UTC,

            Andre




Details





Show
              Obsolete (1)
            View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andre





          2005-08-10 07:15:04 UTC
        

The emerge script exits without error after unpacking the php-4.4.0
source. The following are the last lines I get. Running configure 
manually (after the exit) succeeds.

>>> Unpacking php-4.4.0.tar.bz2 to /tmp/portage/php-4.4.0/work
 * Applying uClibc/libtool patches ...
 *  Fixing ${S}/configure ...                                             [ ok ]
>>> Source unpacked.



Reproducible: Always
Steps to Reproduce:
1. emerge php
2.
3.

Actual Results:  
exit w/o error after unpacking sources

Expected Results:  
compile and install php-4.4.0




Comment 1


Jakub Moc (RETIRED)






          2005-08-10 07:30:59 UTC
        

emerge --info is missing, also attach a full emerge log (emerge php &> emerge.log)




Comment 2


Andre





          2005-08-10 08:07:35 UTC
        

Created attachment 65604 [details]
emerge --info




Comment 3


Andre





          2005-08-10 08:25:33 UTC
        

Created attachment 65607 [details]
emerge log, cf. emerge.log-manual (see comment)

There is a very long idle period after
 *  Fixing ${S}/configure ...						  [ ok
]

this was generated by running
#emerge --verbose php &> emerge.log
but looks rather strange -- probably a fuckup due to color codes (my machine's 

good at that)

I include the log i get to see on screen (cut and pasted)
in emerge.log-manual




Comment 4


Andre





          2005-08-10 08:35:30 UTC
        

Created attachment 65609 [details]
emerge log, proper one

after the line
 *  Fixing ${S}/configure ...						  [ ok
]
there is a long pause

this log is here because the one generated by emerge --verbose php &>
emerge.log
gave scrambled results.

and for what it's worth the use flags for the package are:

[ebuild  N    ] dev-php/php-4.4.0  +X +berkdb +crypt +curl -debug -doc -fdftk
-firebird -flash -freetds +gd -gd-external +gdbm -gmp -hardenedphp -imap
-informix +ipv6 +java +jpeg -kerberos -ldap -mcal -memlimit -mssql +mysql
+ncurses +nls -oci8 -odbc +pam +png -postgres +readline -snmp +spell +ssl +tiff
+truetype +xml2 -yaz 0 kB




Comment 5


Andre





          2005-08-10 08:37:30 UTC
        

added the information requested 
by jakub@gentoo.org




Comment 6


Robin Johnson









          2005-08-10 10:44:10 UTC
        

please run:
strace -ff -ophplog -s65536 -v -ttt -T emerge php

and attach the phplog* files it generates.




Comment 7


Andre





          2005-08-10 12:55:14 UTC
        

1. i put the file on my server, as it is 
32 MBs of compressed data.

http://huhn.iwt.uni-bielefeld.de/str_emerge_php.tar.bz2

2. the ending differed from the ones i invarably
got before (which is above me), giving an error message: 

!!! ERROR: dev-php/php-4.4.0 failed.
!!! Function php-sapi_src_compile, Line 278, Exitcode 1
!!! You need a virtual/mta that provides /usr/sbin/sendmail!
!!! If you need support, post the topmost build error, NOT this status message.

I will go after it anyway-- this system has half a mail setup
for training purposes. may it screw things up?

3. looking into the files, what little 
i could make of it is that the 
bash-completion seems to make 
it grow very long.

so if you'd like a run without,
please complain.





Comment 8


Andre





          2005-08-10 13:29:07 UTC
        

Bit of research later:

I use nbsmtp on this system, and it actually blocks 
sendmail (which i want to avoid anyway) as well 
as the nullmailer. 
What I found googling around left me none 
the wiser, I'm afraid... 




Comment 9


Robin Johnson









          2005-08-10 14:11:44 UTC
        

umm do you actually have a /usr/sbin/sendmail?
The binary should be provided by EVERY MTA. I know that nullmailer provides it.

/usr/sbin/sendmail != sendmail package

since you got an actual error this time, I won't download the logfiles (I don't
need 32mb of traffic right now).




Comment 10


Andre





          2005-08-11 01:57:52 UTC
        

actually, no.
i also wondered about that one and reemerged nbsmtp to no avail.
i will try and install one and give an update.

BTW: another emerge php w/o strace did not repeat the
error message.







Comment 11


Robin Johnson









          2005-08-11 02:01:44 UTC
        

please paste in the output from this command:
equery f mail-mta/nbsmtp 

(if you don't have it, emerge gentoolkit first).




Comment 12


Andre





          2005-08-11 02:41:54 UTC
        

@comment 10:
too late, i already had nbsmtb unmerged
(but be assured: there was no sendmail in it)
and the nullmailer in place when this dropped
in.

----

now i've got a sendmail, and all is well.
so i am happy now, php installed itself.

if you'd like me to reinsert nbsmtp
for getting the list of files it provides,
i will certainly do so.
or indeed provide any other assistance,
as i am aware that this is either some
inconsistency in the portage system or
a broken nbsmtp.






Comment 13


Robin Johnson









          2005-08-11 02:47:30 UTC
        

actually, if you could open a new bug for the nbsmtp gentoo maintainers , 
telling them they need to provide the /usr/sbin/sendmail binary, and go thru 
debugging with them, that would be great.

Point them here if you need to.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

