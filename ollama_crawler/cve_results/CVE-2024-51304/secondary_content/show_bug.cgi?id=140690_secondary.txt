Title: 140690 – dev-db/mysql-4.1.20 init script fails
URL: https://bugs.gentoo.org/show_bug.cgi?id=140690

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 140690
dev-db/mysql-4.1.20 init script fails
Last modified: 2007-01-13 01:02:32 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 140690 
      - dev-db/mysql-4.1.20 init script fails


Summary:
dev-db/mysql-4.1.20 init script fails
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux MySQL bugs team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-16 13:04 UTC by Mark Knecht





      Modified:
    
2007-01-13 01:02 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Mark Knecht





          2006-07-16 13:04:19 UTC
        

In the process of trying to get my MYthTV backend server updated to the new version I have updated MySQL to the lastest stable version:

dragonfly conf.d # eix -I mysql
* dev-db/mysql
     Available versions:  3.23.58-r1 4.0.25-r2 4.0.27 4.1.14-r1 4.1.20 ~5.0.22 [M]5.1.7_beta
     Installed:           4.1.20
     Homepage:            http://www.mysql.com/
     Description:         A fast, multi-threaded, multi-user SQL database server.

I was running 4.0.27 and now and trying to run 4.1.20. Unfortunately MythTV is no longer working and I get strange messages startig and stopping mysql:

dragonfly conf.d # /etc/init.d/mysql start
 *  ...
 * Strange, the socket file already exist in "/var/run/mysqld/mysqld.sock"
 * it will be removed now and re-created by the MySQL server
 * BUT please make your checks.
 * Starting mysql (/etc/mysql/my.cnf)                                                              [ ok ]dragonfly conf.d # /etc/init.d/mysql stop
 * Stopping mysql ...
/etc/init.d/mysql: line 332: /var/run/mysqld/mysqld.pid: No such file or directory
 * Stopping mysqld (0)                                                                             [ ok ]dragonfly conf.d #

MySQL is not responding to logins:

dragonfly conf.d # mysql -u mythtv -h 192.168.1.55 -p mythconverg
Enter password:
ERROR 2003 (HY000): Can't connect to MySQL server on '192.168.1.55' (111)
dragonfly conf.d #

Web searches and email conversations pointed toward an option called 'skip-networking' as this was apparently turned on by default long ago on Gentoo. However it does not seem to be turned on in the latest config files:

# security:
# using "localhost" in connects uses sockets by default
# skip-networking
bind-address                            = 192.168.1.55
port = 3306

log-bin
server-id                                       = 1




Comment 1


Luca Longinotti (RETIRED)






          2007-01-12 22:22:51 UTC
        

Is this still the case with the newest MySQL 4.1.22-r1 ebuild? I can't reproduce this... Be sure to update the init.d files correctly (etc-update) and to stop the MySQL server and make sure it's truly stopped (ps faux | grep -i mysql) before starting it again!
Best regards, CHTEKK.




Comment 2


Mark Knecht





          2007-01-13 01:02:32 UTC
        

No, this doesn't happen any more. I don't know if you noticed but my report is now fully 6 months old. This is the first response I've received on it, and I'm thankful for it, but 6 months is a LONG time!

Anyway, we are no longer having this problem and haven't for maybe 4-5 months.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

