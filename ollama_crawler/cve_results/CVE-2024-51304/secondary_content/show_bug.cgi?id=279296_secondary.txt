Title: 279296 – [kde-testing] digikam 1.0.0_beta3 fails to build due to Nepomuk/Soprano linking errors
URL: https://bugs.gentoo.org/show_bug.cgi?id=279296

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 279296
[kde-testing] digikam 1.0.0_beta3 fails to build due to Nepomuk/Soprano linking errors
Last modified: 2009-08-18 14:50:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 279296 
      - [kde-testing] digikam 1.0.0_beta3 fails to build due to Nepomuk/Soprano linking errors


Summary:
[kde-testing] digikam 1.0.0_beta3 fails to build due to Nepomuk/Soprano linki...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-07-27 10:27 UTC by Andrea Franceschini





      Modified:
    
2009-08-18 14:50 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




The actual errors.

              (digikam-emerge.log,23.06 KB,
                text/plain)

            
2009-07-27 10:29 UTC,

            Andrea Franceschini




Details





new ebuild

              (digikam-1.0.0_beta3.ebuild,2.12 KB,
                text/plain)

            
2009-07-27 18:14 UTC,

            Rafal Lalik




Details





fix CMakeLists.txt

              (digikam-1.0.0_beta3-nepomuk_CMakeList.txt.patch,2.19 KB,
                patch)

            
2009-07-27 18:15 UTC,

            Rafal Lalik




Details
            | Diff





fix config

              (digikam-1.0.0_beta3-nepomuk_config-digikam.h.cmake.patch,363 bytes,
                patch)

            
2009-07-27 18:15 UTC,

            Rafal Lalik




Details
            | Diff





fix digikam/CMakeLists.txt.cmake

              (digikam-1.0.0_beta3-nepomuk_digikam_CMakeLists.txt.cmake.patch,611 bytes,
                patch)

            
2009-07-27 18:16 UTC,

            Rafal Lalik




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Andrea Franceschini





          2009-07-27 10:27:49 UTC
        

Digikam build process complains a lot about linking errors to Nepomuk and Soprano.

Reproducible: Always

Steps to Reproduce:
1. emerge digikam



kde-base/nepomuk-4.2.98
dev-libs/soprano-2.3.0




Comment 1


Andrea Franceschini





          2009-07-27 10:29:33 UTC
        

Created attachment 199316 [details]
The actual errors.




Comment 2


Rafal Lalik





          2009-07-27 13:33:10 UTC
        

Well, it need small explanation.

First of all where is previous bugreport related to digkam-1.0.0-beta3? In that
topic I have reported new ebuild. Later I annuled it because of... I proposed
wrong ebuild :-] Nevertheless, my "correct" ebuild also fails in the same place
like mentioned above.

I have investigated the problem and it seems that developers doesn't allow to
compile without Nepomuk. I couldn't find the way how to do it.
Here[1] I report wish for this feature. I hope for quick answer from digikam
devs.

[1] https://bugs.kde.org/show_bug.cgi?id=201640




Comment 3


Andrea Franceschini





          2009-07-27 14:37:24 UTC
        

So basically I'd just mask it and wait for better times?




Comment 4


Rafal Lalik





          2009-07-27 14:48:53 UTC
        

Basically yes, but from the other side, adding Nepomuk to ebuild as a hard depedencies (without use) is another solution.




Comment 5


Andrea Franceschini





          2009-07-27 14:52:22 UTC
        

There are many ebuilds with "semantic-desktop" USE, but it seems that it is not possible to leave out nepomuk from Digikam in the first place, right?




Comment 6


Rafal Lalik





          2009-07-27 15:13:44 UTC
        

According to my knowledge: no. I was trying to find something in config files to disable nepomuk and nothing. Documentation for this version is also very poor for compiling information. We need to wait for info from upstream. 	They either add the property, or told how to do this manually... hope so.




Comment 7


Rafal Lalik





          2009-07-27 15:21:15 UTC
        

Ups, it may be confusing... 'no' means 'yes'... damn... it menas ' it is not
possible to leave out nepomuk from Digikam in the first place'.





Comment 8


Rafal Lalik





          2009-07-27 15:28:00 UTC
        

And forgot, it may be good movement to restore digikam-1.0.0_beta1 to tree.




Comment 9


Rafal Lalik





          2009-07-27 18:14:27 UTC
        

Created attachment 199366 [details]
new ebuild

patches required




Comment 10


Rafal Lalik





          2009-07-27 18:15:16 UTC
        

Created attachment 199367 [details, diff]
fix CMakeLists.txt

patch #1




Comment 11


Rafal Lalik





          2009-07-27 18:15:45 UTC
        

Created attachment 199369 [details, diff]
fix config

patch #2




Comment 12


Rafal Lalik





          2009-07-27 18:16:12 UTC
        

Created attachment 199371 [details, diff]
fix digikam/CMakeLists.txt.cmake

patch #3




Comment 13


Rafal Lalik





          2009-07-27 18:17:38 UTC
        

Ebuild needs tests with USE="semantic-desktop"




Comment 14


Andrea Franceschini





          2009-07-28 08:42:39 UTC
        

I'd test it if only I could make my personal overlay to prevail over kde-testing... how can I select a specific overlay from which to choose an ebuild?




Comment 15


Andrea Franceschini





          2009-07-28 09:43:07 UTC
        

Ok, it apparently works with USE "semantic-desktop". I cannot confirm whether it works without it.




Comment 16


Rafal Lalik





          2009-07-28 09:54:21 UTC
        

Firstly, follow this guide[1]
Next do as a root do this[2] commands:

'emerge digikam -pv' should show that is trying to install from the local
overlay.

Good luck!
Rafal

[1] http://en.gentoo-wiki.com/wiki/Overlay#Creating_a_local_overlay
[2] http://wklej.org/id/127098/




Comment 17


Rafal Lalik





          2009-07-28 09:56:13 UTC
        

I can confirm it works without USE semantic-desktop.




Comment 18


Andrea Franceschini





          2009-07-28 09:57:40 UTC
        

That's exactly what I did, but it kept saying it was trying to emerge it from kde-testing. Anyway with USE semantic-desktop it worked, but now I don't know which one actually worked, because apparently both the one from kde-testing and the one attached to this bug have that USE flag.




Comment 19


Rafal Lalik





          2009-07-28 10:07:02 UTC
        

The ebuild already existing in tree has this flag beacuse of I added it in my previous ebuild which was wrong. Current ebuild should have declared PATCHES variable with three patches. Just look inside the source.

Whatmore, old ebuild works fine with symantic-desktop. It fails only without this flag set. Current ebuild also should work with semantic-desktop, but in addition also without.

Order of overlay is specified by PORTDIR_OVERLAY. If you run 'emerge --info | grep PORTDIR_OVERLAY' then your local overlay should be the last one.




Comment 20


Rafal Lalik





          2009-08-18 14:50:43 UTC
        

Could I ask again to update ebuild in kde-testing tree? Already existing still fails during compilation.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

