Title: 212458 – x11-libs/goffice-0.6.1 failed built_with_use check on dev-libs/libpcre-6.6
URL: https://bugs.gentoo.org/show_bug.cgi?id=212458

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 212458
x11-libs/goffice-0.6.1 failed built_with_use check on dev-libs/libpcre-6.6
Last modified: 2008-03-06 17:52:19 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 212458 
      - x11-libs/goffice-0.6.1 failed built_with_use check on dev-libs/libpcre-6.6


Summary:
x11-libs/goffice-0.6.1 failed built_with_use check on dev-libs/libpcre-6.6
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux Gnome Desktop Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-03-06 02:12 UTC by Craig Finch





      Modified:
    
2008-03-06 17:52 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Craig Finch





          2008-03-06 02:12:29 UTC
        

The ebuild for x11-libs/goffice does not specify a dependency on a version of libpcre, but the emerge fails if libpcre is too old.  I had libpcre 6.6 which caused the following error--upgrading to 7.6-r1 fixed it.

Solution: specify a minimum version for libpcre in goffice ebuild.  Unfortunately I don't know what that minimum number should be, but it's > 6.6.

Reproducible: Always

Steps to Reproduce:
1. emerge x11-libs/goffice
(with old version of libpcre)
Actual Results:  
Resolving distfiles.gentoo.org... 216.165.129.135, 140.211.166.134, 156.56.247.195, ...
Connecting to distfiles.gentoo.org|216.165.129.135|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1,869,159 (1.8M) [application/x-tar]

100%[====================================>] 1,869,159    865.08K/s             

17:36:58 (862.50 KB/s) - `/usr/portage/distfiles/goffice-0.6.1.tar.bz2' saved [1869159/1869159]

 * checking ebuild checksums ;-) ...                                      [ ok ]
 * checking auxfile checksums ;-) ...                                     [ ok ]
 * checking miscfile checksums ;-) ...                                    [ ok ]
 * checking goffice-0.6.1.tar.bz2 ;-) ...                                 [ ok ]
 * 
 * ERROR: x11-libs/goffice-0.6.1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called pkg_setup
 *    goffice-0.6.1.ebuild, line   56:  Called built_with_use 'pkg_setup' 'pkg_setup'
 *           eutils.eclass, line 1729:  Called die
 * The specific snippet of code:
 *                                      die)   die "$PKG does not actually support the $1 USE flag!";;
 *  The die message:
 *   dev-libs/libpcre-6.6 does not actually support the unicode USE flag!
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/x11-libs:goffice-0.6.1:20080304-223655.log'.
 * The ebuild environment file is located at '/var/tmp/portage/x11-libs/goffice-0.6.1/temp/die.env'.
 * 

 * Messages for package x11-libs/goffice-0.6.1:

 * 
 * ERROR: x11-libs/goffice-0.6.1 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called pkg_setup
 *    goffice-0.6.1.ebuild, line   56:  Called built_with_use 'pkg_setup' 'pkg_setup'
 *           eutils.eclass, line 1729:  Called die
 * The specific snippet of code:
 *                                      die)   die "$PKG does not actually support the $1 USE flag!";;
 *  The die message:
 *   dev-libs/libpcre-6.6 does not actually support the unicode USE flag!
 * 
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/x11-libs:goffice-0.6.1:20080304-223655.log'.
 * The ebuild environment file is located at '/var/tmp/portage/x11-libs/goffice-0.6.1/temp/die.env'.
 * 
 * Regenerating GNU info directory index...
 * Processed 253 info files.

Expected Results:  
Emerge x11-libs/goffice successfully.




Comment 1


Jakub Moc (RETIRED)






          2008-03-06 07:09:18 UTC
        

dev-libs/libpcre-6.6 doesn't even exist in the tree.





Comment 2


Craig Finch





          2008-03-06 16:50:44 UTC
        

> dev-libs/libpcre-6.6 doesn't even exist in the tree.

But that doesn't mean it doesn't exist on some systems.  If none of the packages that depend on it call for a specific version, then it will never get upgraded outside of an emerge world or a GLSA.  I recognize that there probably aren't many people with libpcre-6.6 out there, but it still seems like a good idea to put in some kind of minimum version--maybe 7.0?  It makes portage more robust, and I don't see any downside.




Comment 3


Gilles Dartiguelongue (RETIRED)






          2008-03-06 17:52:19 UTC
        

(In reply to comment #2)
> > dev-libs/libpcre-6.6 doesn't even exist in the tree.
> 
> But that doesn't mean it doesn't exist on some systems.  If none of the
> packages that depend on it call for a specific version, then it will never get
> upgraded outside of an emerge world or a GLSA.  I recognize that there probably
> aren't many people with libpcre-6.6 out there, but it still seems like a good
> idea to put in some kind of minimum version--maybe 7.0?  It makes portage more
> robust, and I don't see any downside.

If upstream doesn't list a version, it's hard to guess which to put in the ebuild also the last stable version in tree would probably satisfy the role well. Anyway, it's hard enough to keep the stuff compiling with versions of programs in tree and keep them working for as long as possible but if you start considering long dead versions its starting to be unmanageable.

I'll add a fix tonight unless someone beats me to it.










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

