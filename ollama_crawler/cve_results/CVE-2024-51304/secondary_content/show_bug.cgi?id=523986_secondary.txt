Title: 523986 – net-misc/openssh-6.6.1_p1-r4: hpn patch fails to validate
URL: https://bugs.gentoo.org/show_bug.cgi?id=523986

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 523986
net-misc/openssh-6.6.1_p1-r4: hpn patch fails to validate
Last modified: 2014-10-11 08:13:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 523986 
      - net-misc/openssh-6.6.1_p1-r4: hpn patch fails to validate


Summary:
net-misc/openssh-6.6.1_p1-r4: hpn patch fails to validate
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

524028

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2014-09-29 03:14 UTC by Harris Landgarten





      Modified:
    
2014-10-11 08:13 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



crazy-ivanovic
j.m.neikes
mmk
whissi









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Harris Landgarten





          2014-09-29 03:14:11 UTC
        

Output from fetch net-misc/openssh-6.6.1_p1-r4:0::gentoo:

Checking 'openssh-6.6p1.tar.gz'... ok
Checking 'openssh-6.6.1p1-hpnssh14v5.diff.xz'... failed SHA256




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2014-09-29 04:51:18 UTC
        

The patch has been altered because of bug #523962. Please remove the patch from your DISTFILES, resync your portage tree and try again.




Comment 2


Lars Wendler (Polynomial-C) (RETIRED)






          2014-09-29 14:04:22 UTC
        

*** Bug 524028 has been marked as a duplicate of this bug. ***




Comment 3


Harris Landgarten





          2014-09-29 15:07:31 UTC
        

removes everything openssh related from distfiles and also rm -rf the net-misc/openssh folder in the tree and then resynced.

Still getting:

2014-09-29 11:04:11 (609 KB/s) - ‘/usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz.-PARTIAL-’ saved [20952/20952]

Checking 'openssh-6.6p1.tar.gz'... ok
Checking 'openssh-6.6.1p1-hpnssh14v5.diff.xz'... failed SHA256
mv -f /usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz.-PARTIAL- /usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz

Failed fetch for net-misc/openssh-6.6.1_p1-r4:0::gentoo




Comment 4


Lars Wendler (Polynomial-C) (RETIRED)






          2014-09-30 04:40:29 UTC
        

The file has correct sha256 hash in openssh's Manifest data:

fe31dfbc934be7c7c07ddcd2aef01083c62f225ee8097622aec23d536e118053

So you even sync from an outdated Gentoo mirror or you still have the outdated patch file on some proxy.




Comment 5


Lars Wendler (Polynomial-C) (RETIRED)






          2014-09-30 04:40:51 UTC
        

s/even/either/




Comment 6


Harris Landgarten





          2014-09-30 15:09:28 UTC
        

installed ok with portage after repeated failures on the sha256 invalidation with paludis. After installing with portage it now installs fine with paludis. Weird




Comment 7


djmatic8





          2014-10-01 09:11:10 UTC
        

Adding RESTRICT="primaryuri" to an ebuild makes paludis happy.




Comment 8


Thomas Deutschmann (RETIRED)






          2014-10-01 14:03:24 UTC
        

Same problem, I don't think my mirror is out of date, because I get the same error from source:

>>> Downloading 'http://dev.gentoo.org/~polynomial-c/openssh-6.6.1p1-hpnssh14v5.diff.xz'
--2014-10-01 15:58:00--  http://dev.gentoo.org/~polynomial-c/openssh-6.6.1p1-hpnssh14v5.diff.xz
Connecting to 10.82.0.1:8080... connected.
Proxy request sent, awaiting response... 200 OK
Length: 20952 (20K)
Saving to: ‘/usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz’

     0K .......... ..........                                 100%  221M=0s

2014-10-01 15:58:00 (221 MB/s) - ‘/usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz’ saved [20952/20952]

!!! Fetched file: openssh-6.6.1p1-hpnssh14v5.diff.xz VERIFY FAILED!
!!! Reason: Failed on SHA256 verification
!!! Got:      674de88b158c3b305f720ad86f917be79cd6bd9b47cf33f56b1d92eee9440b8e
!!! Expected: fe31dfbc934be7c7c07ddcd2aef01083c62f225ee8097622aec23d536e118053
Refetching... File renamed to '/usr/portage/distfiles/openssh-6.6.1p1-hpnssh14v5.diff.xz._checksum_failure_.4pdw3m'


Tested with

- Timestamp of tree: Wed, 01 Oct 2014 12:45:01 +0000
- Timestamp of tree: Wed, 01 Oct 2014 13:15:01 +0000

Plain Gentoo. No Paludis.




Comment 9


Thomas Deutschmann (RETIRED)






          2014-10-01 14:15:32 UTC
        

Was my problem... source (http://dev.gentoo.org/~polynomial-c/openssh-6.6.1p1-hpnssh14v5.diff.xz) is serving the right file.

I am using net-proxy/http-replicator which cached the invalid file from a mirror (there are dozen mirrors still serving the wrong file) and doesn't "support" retrying different URLs because it will always re-use the cached copy. :(




Comment 10


Lars Wendler (Polynomial-C) (RETIRED)






          2014-10-09 22:09:09 UTC
        

Closing this as WORKSFORME. I cannot reproduce this on any of my test machines even when trying different mirrors for downloading.




Comment 11


Nils Kneuper





          2014-10-10 21:11:01 UTC
        

(In reply to Lars Wendler (Polynomial-C) from comment #10)
> Closing this as WORKSFORME. I cannot reproduce this on any of my test
> machines even when trying different mirrors for downloading.

It still happened for me just 10min ago using the following mirror list:

GENTOO_MIRRORS="http://mirror.netcologne.de/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ http://gentoo.mneisen.org/ http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ http://ftp.spline.inf.fu-berlin.de/mirrors/gentoo/ http://gentoo.modulix.net/gentoo/ http://mirrors.linuxant.fr/distfiles.gentoo.org/ http://de-mirror.org/gentoo/ http://mirror.opteamax.de/gentoo/ http://ftp.uni-erlangen.de/pub/mirrors/gentoo"

Looks as if some mirrors do not correctly check if the files really are identical. Wouldn't it be smart to rename the file to make sure that all mirrors refetch it correctly?




Comment 12


Michael Mair-Keimberger (mm1ke)





          2014-10-11 08:08:55 UTC
        

(In reply to Nils Kneuper from comment #11)
> (In reply to Lars Wendler (Polynomial-C) from comment #10)
> > Closing this as WORKSFORME. I cannot reproduce this on any of my test
> > machines even when trying different mirrors for downloading.
> 
> It still happened for me just 10min ago using the following mirror list:
> 
I've just hit this problem too. Removed all packages related to openssh but still get the wrong sha256 hash.

My mirror list:
GENTOO_MIRRORS="        http://gentoo.supp.name/        \
                        http://ftp.fi.muni.cz/pub/linux/gentoo/ \
                        http://gentoo.mirror.web4u.cz/  \
                        http://gentoo.mirror.dkm.cz/pub/gentoo/ \
                        http://gentoo.ynet.sk/pub"









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

