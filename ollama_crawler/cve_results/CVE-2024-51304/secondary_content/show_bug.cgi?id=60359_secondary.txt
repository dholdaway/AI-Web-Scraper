Title: 60359 – Portage crashes when trying to emerge xorg-x11. Appears to try to checksum a directory when it expects a file.
URL: https://bugs.gentoo.org/show_bug.cgi?id=60359

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 60359
Portage crashes when trying to emerge xorg-x11. Appears to try to checksum a directory when it expects a file.
Last modified: 2004-09-19 16:49:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 60359 
      - Portage crashes when trying to emerge xorg-x11. Appears to try to checksum a directory when it expects a file.


Summary:
Portage crashes when trying to emerge xorg-x11. Appears to try to checksum a ...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       blocker
      


Assignee:

Portage team








URL:



http://forums.gentoo.org/viewtopic.ph...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2004-08-14 12:57 UTC by Chris Doggett





      Modified:
    
2004-09-19 16:49 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Chris Doggett





          2004-08-14 12:57:56 UTC
        

I tried to unmerge xfree and emerge xorg-x11, and after a few minutes of compiling, when it gets to the install stage, I get the following:

trogdor root # tail -60 xorgErrors.txt
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex2sv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3dv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3fv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3iv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3sv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4dv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4fv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4iv.3x
+ install -c -m 0444 '#tmp.11002' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4sv.3x
+ install -c -m 0444 '#tmp.11120' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/GLwMDrawingArea.3x
+ install -c -m 0444 '#tmp.11136' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndCurve.3x
+ install -c -m 0444 '#tmp.11146' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndPolygon.3x
+ install -c -m 0444 '#tmp.11156' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndSurface.3x
+ install -c -m 0444 '#tmp.11166' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndTrim.3x
+ install -c -m 0444 '#tmp.11246' /var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluTessEndContour.3x
rm: cannot remove `/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/UXTerm': No such file or directory
rm: cannot remove `/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/XTerm': No such file or directory
rm: cannot remove `/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/XTerm-color': No such file or directory
find: //usr/share/fonts/100dpi: No such file or directory
find: //usr/share/fonts/100dpi: No such file or directory
find: //usr/share/fonts/75dpi: No such file or directory
find: //usr/share/fonts/75dpi: No such file or directory
find: //usr/share/fonts/Speedo: No such file or directory
find: //usr/share/fonts/Speedo: No such file or directory
find: //usr/share/fonts/TTF: No such file or directory
find: //usr/share/fonts/TTF: No such file or directory
find: //usr/share/fonts/Type1: No such file or directory
find: //usr/share/fonts/Type1: No such file or directory
find: //usr/share/fonts/encodings: No such file or directory
find: //usr/share/fonts/encodings: No such file or directory
find: //usr/share/fonts/local: No such file or directory
find: //usr/share/fonts/local: No such file or directory
find: //usr/share/fonts/misc: No such file or directory
find: //usr/share/fonts/misc: No such file or directory
find: //usr/share/fonts/util: No such file or directory
find: //usr/share/fonts/util: No such file or directory
Traceback (most recent call last):
  File "/usr/bin/emerge", line 2599, in ?
    mydepgraph.merge(mydepgraph.altlist())
  File "/usr/bin/emerge", line 1555, in merge
    retval=portage.doebuild(y,"merge",myroot,self.pkgsettings,edebug)
  File "/usr/lib/portage/pym/portage.py", line 2367, in doebuild
    return merge(mysettings["CATEGORY"],mysettings["PF"],mysettings["D"],mysettings["BUILDDIR"]+"/build-info",myroot,mysettings,myebuild=mysettings["EBUILD"])
  File "/usr/lib/portage/pym/portage.py", line 2489, in merge
    return mylink.merge(pkgloc,infloc,myroot,myebuild)
  File "/usr/lib/portage/pym/portage.py", line 5928, in merge
    return self.treewalk(mergeroot,myroot,inforoot,myebuild,cleanup=cleanup)
  File "/usr/lib/portage/pym/portage.py", line 5558, in treewalk
    if self.mergeme(srcroot,destroot,outfile,secondhand,"",cfgfiledict,mymtime):
  File "/usr/lib/portage/pym/portage.py", line 5835, in mergeme
    if self.mergeme(srcroot,destroot,outfile,secondhand,offset+x+"/",cfgfiledict,thismtime):
  File "/usr/lib/portage/pym/portage.py", line 5835, in mergeme
    if self.mergeme(srcroot,destroot,outfile,secondhand,offset+x+"/",cfgfiledict,thismtime):
  File "/usr/lib/portage/pym/portage.py", line 5781, in mergeme
    mydest = self.new_protect_filename(myrealdest, perform_md5(srcroot+myabsto))
  File "/usr/lib/portage/pym/portage.py", line 2485, in perform_md5
    return perform_checksum(x, calc_prelink)[0]
  File "/usr/lib/portage/pym/portage.py", line 354, in perform_checksum
    return fchksum.fmd5t(filename)
IOError: [Errno 21] Is a directory: '/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/X11R6/lib/X11/xkb'

It appears that portage is trying to do a checksum, and crashes when it gets a directory, but is expecting a file. It doesn't even get to say the emerge failed, just exits out of python with an IOError.

I also had the following problem when trying to do an emerge -UDp xorg-x11:

trogdor root # emerge -UDp xorg-x11
>>> --upgradeonly implies --update... adding --update to options.

These are the packages that I would merge, in order:

Calculating dependencies ...done!
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xfree-4.3.0-r6
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r1
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r2
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xfree-4.3.0-r6
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r1
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r2
[ebuild  N    ] x11-base/xfree-4.3.0-r6
[ebuild     U ] sys-devel/libperl-5.8.4 [5.8.2]
[ebuild     U ] dev-lang/perl-5.8.4 [5.8.2-r1]
[ebuild     U ] sys-devel/autoconf-2.59-r4 [2.58-r1]

[ebuild     U ] sys-apps/coreutils-5.2.1 [5.0.91-r4]

[ebuild     U ] sys-apps/cronbase-0.3 [0.2.1-r3]
[ebuild     U ] sys-apps/man-1.5m-r1 [1.5l-r6]
[ebuild     U ] sys-libs/glibc-2.3.3.20040420-r1 [2.3
.3.20040420]
[ebuild  N    ] x11-base/xorg-x11-6.7.0-r2
[ebuild     U ] sys-apps/file-4.09 [4.06]
[ebuild  N    ] app-arch/rpm2targz-9.0-r2
[ebuild  N    ] sys-apps/utempter-0.5.5.5
[ebuild  N    ] x11-terms/xterm-191

I was able to get it to stop trying to emerge xfree by setting virtual/x11 in /var/cache/edb/virtuals to point to x11-base/xorg-x11, but I still get a few of these before the list of apps to emerge:

INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r1
INCOMPLETE MERGE: /var/db/pkg/x11-base/-MERGING-xorg-x11-6.7.0-r2

The main problem, however, is the failing checksum in the xorg-x11-6.7.0-r2 ebuild. I should also mention that I've tried xorg-x11-6.7.0-r2 and xfree-4.3.0-r6 (whatever the latest one was), and all 3 ebuilds died at the same place. In between each emerge, I cleared out ccache's cache and rm -rf'd /var/tmp/portage/*, but each time the same checksum error popped up.

Thanks in advance for any help. The Gentoo forum thread I created for this is at:
 
http://forums.gentoo.org/viewtopic.php?p=1436699#1436699

Reproducible: Always
Steps to Reproduce:
1. emerge xorg-x11


Actual Results:  
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex2sv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3dv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3fv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3iv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex3sv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4dv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4fv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4iv.3x
+ install -c -m 0444 '#tmp.11002'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/glVertex4sv.3x
+ install -c -m 0444 '#tmp.11120'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/GLwMDrawingArea.3x
+ install -c -m 0444 '#tmp.11136'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndCurve.3x
+ install -c -m 0444 '#tmp.11146'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndPolygon.3x
+ install -c -m 0444 '#tmp.11156'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndSurface.3x
+ install -c -m 0444 '#tmp.11166'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluEndTrim.3x
+ install -c -m 0444 '#tmp.11246'
/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/share/man/man3/gluTessEndContour.3x
rm: cannot remove
`/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/UXTerm': No such
file or directory
rm: cannot remove
`/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/XTerm': No such
file or directory
rm: cannot remove
`/var/tmp/portage/xorg-x11-6.7.0-r2/image//etc/X11/app-defaults/XTerm-color': No
such file or directory
find: //usr/share/fonts/100dpi: No such file or directory
find: //usr/share/fonts/100dpi: No such file or directory
find: //usr/share/fonts/75dpi: No such file or directory
find: //usr/share/fonts/75dpi: No such file or directory
find: //usr/share/fonts/Speedo: No such file or directory
find: //usr/share/fonts/Speedo: No such file or directory
find: //usr/share/fonts/TTF: No such file or directory
find: //usr/share/fonts/TTF: No such file or directory
find: //usr/share/fonts/Type1: No such file or directory
find: //usr/share/fonts/Type1: No such file or directory
find: //usr/share/fonts/encodings: No such file or directory
find: //usr/share/fonts/encodings: No such file or directory
find: //usr/share/fonts/local: No such file or directory
find: //usr/share/fonts/local: No such file or directory
find: //usr/share/fonts/misc: No such file or directory
find: //usr/share/fonts/misc: No such file or directory
find: //usr/share/fonts/util: No such file or directory
find: //usr/share/fonts/util: No such file or directory
Traceback (most recent call last):
  File "/usr/bin/emerge", line 2599, in ?
    mydepgraph.merge(mydepgraph.altlist())
  File "/usr/bin/emerge", line 1555, in merge
    retval=portage.doebuild(y,"merge",myroot,self.pkgsettings,edebug)
  File "/usr/lib/portage/pym/portage.py", line 2367, in doebuild
    return
merge(mysettings["CATEGORY"],mysettings["PF"],mysettings["D"],mysettings["BUILDDIR"]+"/build-info",myroot,mysettings,myebuild=mysettings["EBUILD"])
  File "/usr/lib/portage/pym/portage.py", line 2489, in merge
    return mylink.merge(pkgloc,infloc,myroot,myebuild)
  File "/usr/lib/portage/pym/portage.py", line 5928, in merge
    return self.treewalk(mergeroot,myroot,inforoot,myebuild,cleanup=cleanup)
  File "/usr/lib/portage/pym/portage.py", line 5558, in treewalk
    if self.mergeme(srcroot,destroot,outfile,secondhand,"",cfgfiledict,mymtime):
  File "/usr/lib/portage/pym/portage.py", line 5835, in mergeme
    if
self.mergeme(srcroot,destroot,outfile,secondhand,offset+x+"/",cfgfiledict,thismtime):
  File "/usr/lib/portage/pym/portage.py", line 5835, in mergeme
    if
self.mergeme(srcroot,destroot,outfile,secondhand,offset+x+"/",cfgfiledict,thismtime):
  File "/usr/lib/portage/pym/portage.py", line 5781, in mergeme
    mydest = self.new_protect_filename(myrealdest, perform_md5(srcroot+myabsto))
  File "/usr/lib/portage/pym/portage.py", line 2485, in perform_md5
    return perform_checksum(x, calc_prelink)[0]
  File "/usr/lib/portage/pym/portage.py", line 354, in perform_checksum
    return fchksum.fmd5t(filename)
IOError: [Errno 21] Is a directory:
'/var/tmp/portage/xorg-x11-6.7.0-r2/image//usr/X11R6/lib/X11/xkb'


Expected Results:  
Should have emerged without errors.

sshd was the only other program running.

System configuration:
AMD Athlon XP 2000+
1.5GB RAM
8GB HD (6.1GB free)
GeForce FX5200




Comment 1


Brian Harring (RETIRED)






          2004-08-16 11:51:10 UTC
        

portage version...
in the future, just append emerge info contents.  much easier :)




Comment 2


Chris Doggett





          2004-08-16 21:05:11 UTC
        

Sorry the original was so long. Here's the emerge info:

Gentoo Base System version 1.4.16
Portage 2.0.50-r9 (default-x86-1.4, gcc-3.3.3, glibc-2.3.3.20040420-r0, 2.6.5-mm
6)
=================================================================
System uname: 2.6.5-mm6 i686 AMD Athlon(TM) XP 2000+
ccache version 2.3 [enabled]
Autoconf: sys-devel/autoconf-2.58-r1
Automake: sys-devel/automake-1.8.3
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -mcpu=athlon-xp -march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
COMPILER="gcc3"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.1/share/config /usr/kde/
3.2/share/config /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/sha
re/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/s
hare/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/te
xmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -mcpu=athlon-xp -march=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs ccache sandbox"
GENTOO_MIRRORS="http://gentoo.oregonstate.edu http://distro.ibiblio.org/pub/Linu
x/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X aalib alsa apm arts avi berkdb cdr crypt cups curl dvd emacs emacs-w3 enc
ode esd flash foomaticdb gdbm gif gpm gtk gtk2 imlib java joystick jpeg kde libg
++ libwww mad mikmod motif mozilla mpeg ncurses nls oggvorbis opengl oss pam pdf
lib perl png python qt quicktime readline sdl slang spell ssl svga tcltk tcpd te
tex tiff truetype unicode usb videos wxwindows x86 xinerama xml xml2 xmms xv zli
b"

I need to clean out the USE flags. I must have been drinking when I set that up.




Comment 3


Brandon Low (RETIRED)






          2004-08-19 04:58:22 UTC
        

I have a similar problem... but being brilliant as I am, I didn't save the logs and it takes 1/2 hour to recreate.

In my case, the gzipping man page script seems to try and gzip all sorts of random stuff that is not man pages, and then freezes trying to gzip "-".

Portage 2.0.51_pre20 (default-x86-1.4, gcc-3.3.4, glibc-2.3.4.20040808-r0, 2.6.8.1-mm1 i686 mobile AMD Athlon(tm) XP 2400+)
=================================================================
System uname: 2.6.8.1-mm1 i686 mobile AMD Athlon(tm) XP 2400+
Gentoo Base System version 1.5.2
distcc 2.16 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
Autoconf: sys-devel/autoconf-2.59-r4
Automake: sys-devel/automake-1.8.5-r1
Binutils: sys-devel/binutils-2.14.90.0.8-r1
Headers:  sys-kernel/linux-headers-2.4.22
Libtools: sys-devel/libtool-1.5.2-r5
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CFLAGS="-mcpu=athlon-xp -O3 -pipe -fomit-frame-pointer -fgcse -fgcse-lm -fgcse-sm -freorder-blocks -fprefetch-loop-arrays"
CHOST="i686-pc-linux-gnu"
COMPILER="gcc3"
CONFIG_PROTECT="/etc /opt/openjms/config /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/bind /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-mcpu=athlon-xp -O3 -pipe -fomit-frame-pointer -fgcse -fgcse-lm -fgcse-sm -freorder-blocks -fprefetch-loop-arrays"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs ccache cvs digest fixpackages sandbox usersandbox"
GENTOO_MIRRORS="http://gentoo.oregonstate.edu http://www.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j4"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="cvs://lostlogic@cvs.gentoo.org:/home/cvsroot"
USE="x86 3dnow X aalib acpi alsa apache2 avi berkdb cdr crypt cups curl dga directfb doc dvd encode ethereal fbcon firebird flash gd gdbm ggi gif gnome gphoto2 gpm gtk gtk2 gtkhtml imap imlib innodb java jikes jpeg libg++ libwww lirc mbox mmx mozilla mpeg mysql ncurses oci8 oggvorbis opengl pam pcmcia pdflib perl plotutils png pnp postgres python quicktime readline samba sdl spell sse ssl svga tcltk tetex tiff truetype usb xinerama xml xml2 xmms xv zlib"





Comment 4


Brandon Low (RETIRED)






          2004-08-19 05:13:36 UTC
        

Here's what mine does.  Should I open a new bug, or leave it here?

gzipping man page: X.Org.7x
gzipping man page: :
gzip: /var/tmp/portage/xorg-x11-6.7.0-r2/image/usr/X11R6/man//:: No such file or directory
gzipping man page: Repository,
gzip: Repository,: No such file or directory
gzipping man page: source
gzip: source: No such file or directory
gzipping man page: distribution
gzip: distribution: No such file or directory
gzipping man page: directory.
gzip: directory.: No such file or directory
gzipping man page: ide
gzip: /var/tmp/portage/xorg-x11-6.7.0-r2/image/usr/X11R6/man//ide: No such file or directory
gzipping man page: source.
gzip: source.: No such file or directory
gzipping man page: tlogic@mutable
gzip: /var/tmp/portage/xorg-x11-6.7.0-r2/image/usr/X11R6/man//tlogic@mutable: No such file or directory
gzipping man page: lostlogic
gzip: lostlogic: No such file or directory
gzipping man page: $
gzip: $: No such file or directory
gzipping man page: su
gzip: su: No such file or directory
gzipping man page: -





Comment 5


Seb Olney





          2004-09-01 15:05:31 UTC
        

I have a similar problem when the ebuild gets to the man page zipping stage:

gzipping man page: X.7x
gzipping man page: XConsortium.7x
gzipping man page: XStandards.7x
gzipping man page: XProjectTeam.7x
gzipping man page: X.Org.7x
gzipping man page: Xsecurity.7x
gzipping man page: hutdown
gzip: /var/tmp/portage/xorg-x11-6.7.0-r2/image/usr/X11R6/man//hutdown: No such file or directory
gzipping man page: -c


The install then hangs. But, looking in the referenced directory, the file "hutdown -c" exists. 


seb@hoover seb $ ls /var/tmp/portage/xorg-x11-6.7.0-r2/image/usr/X11R6/man/
bg  de     es  fr_FR       it  man0p  man2   man4  man7  nl  pt_BR
cs  de_DE  fi  hr          ja  man1   man3   man5  man8  pl  ro
da  el     fr  hutdown -c  ko  man1p  man3p  man6  mann  pt  sl


Here is my system info........

Portage 2.0.50-r10 (default-x86-2004.0, gcc-3.3.4, glibc-2.3.3.20040420-r1, 2.6.7-gentoo-r9)
=================================================================
System uname: 2.6.7-gentoo-r9 i686 mobile AMD Athlon(tm) 4 1500+ Processor
Gentoo Base System version 1.4.16
distcc 2.13 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]ccache version 2.3 [enabled]
Autoconf: sys-devel/autoconf-2.59-r4
Automake: sys-devel/automake-1.8.5-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=athlon -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
COMPILER=""
CONFIG_PROTECT="/etc /usr/X11R6/lib/X11/xkb /usr/kde/2/share/config /usr/kde/3/share/config /usr/lib/mozilla/defaults/pref /usr/share/config /var/qmail/control"CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs ccache sandbox"
GENTOO_MIRRORS="ftp://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ ftp://mirrors.sec.informatik.tu-darmstadt.de/gentoo/ http://ftp.gentoo.skynet.be/pub/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://ickle/portage"
USE="3dnow X aalib acpi alsa apm avi berkdb bonobo cd cdr crypt cups dga directfb divx4linux dvb dvd encode esd fbcon foomaticdb gdbm gif gnome gpm gstreamer gtk gtk2 gtkhtml imlib jpeg libg++ libwww mad mikmod mmx motif mozilla mpeg msn ncurses nls oggvorbis opengl pam pcmcia pda pdf pdflib perl png pnp python quicktime readline samba sdl slang spell ssl svga tcltk tcpd truetype usb video_cards_prosavage x86 xml2 xmms xv xvid zlib"










Comment 6


Chris Doggett





          2004-09-19 16:49:03 UTC
        

After completely reinstalling Gentoo and xorg-x11, everything appears to be working fine. Here's the new emerge info:

trogdor doggettc # emerge info
Portage 2.0.50-r11 (default-x86-2004.2, gcc-3.3.4, glibc-2.3.3.20040420-r1, 2.6.9-rc2-mm1)
=================================================================
System uname: 2.6.9-rc2-mm1 i686 AMD Athlon(TM) XP 2000+
Gentoo Base System version 1.4.16
Autoconf: sys-devel/autoconf-2.59-r4
Automake: sys-devel/automake-1.8.5-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CFLAGS="-O2 -march=athlon-xp -mcpu=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
COMPILER=""
CONFIG_PROTECT="/etc /usr/X11R6/lib/X11/xkb /usr/kde/2/share/config /usr/kde/3.3/env /usr/kde/3.3/share/config /usr/kde/3.3/shutdown /usr/kde/3/share/config /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-O2 -march=athlon-xp -mcpu=athlon-xp -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoaddcvs ccache sandbox"
GENTOO_MIRRORS="http://gentoo.osuosl.org http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY=""
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X alsa apm arts avi berkdb bitmap-fonts cdr crypt cups dvd encode foomaticdb gdbm gif gpm gtk gtk2 imlib jpeg kdelibg++ libwww mad mikmod motif mpeg ncurses nls oggvorbis opengl oss pam pdflib perl png python qt quicktime readline sdl slang spell ssl svga tcpd tetex truetype x86 xml2 xmms xprint xv zlib"









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

