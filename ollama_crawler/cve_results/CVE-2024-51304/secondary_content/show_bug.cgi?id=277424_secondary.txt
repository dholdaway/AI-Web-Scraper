Title: 277424 – media-libs/libvorbis-1.2.3 fails to emerge
URL: https://bugs.gentoo.org/show_bug.cgi?id=277424

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 277424
media-libs/libvorbis-1.2.3 fails to emerge
Last modified: 2009-07-16 09:55:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 277424 
      - media-libs/libvorbis-1.2.3 fails to emerge


Summary:
media-libs/libvorbis-1.2.3 fails to emerge
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-07-11 12:03 UTC by André Terpstra





      Modified:
    
2009-07-16 09:55 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



vostorga
zmedico









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


André Terpstra





          2009-07-11 12:03:04 UTC
        

when emerging media-libs/libvorbis-1.2.3 the following error occurs (partial log):

 /usr/bin/install -c -m 644 'vorbis.html' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/doc/libvorbis-1.2.3/vorbis.html'
 /usr/bin/install -c -m 644 'vorbisword2.png' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/doc/libvorbis-1.2.3/vorbisword2.png'
 /usr/bin/install -c -m 644 'wait.png' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/doc/libvorbis-1.2.3/wait.png'
 /usr/bin/install -c -m 644 'white-xifish.png' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/doc/libvorbis-1.2.3/white-xifish.png'
make[3]: Leaving directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3/doc'
make[2]: Leaving directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3/doc'
make[1]: Leaving directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3/doc'
make[1]: Entering directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3'
make[2]: Entering directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3'
make[2]: Nothing to be done for `install-exec-am'.
test -z "/usr/share/aclocal" || /bin/mkdir -p "/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/aclocal"
test -z "/usr/lib64/pkgconfig" || /bin/mkdir -p "/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/lib64/pkgconfig"
 /usr/bin/install -c -m 644 'vorbis.m4' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/share/aclocal/vorbis.m4'
 /usr/bin/install -c -m 644 'vorbis.pc' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/lib64/pkgconfig/vorbis.pc'
 /usr/bin/install -c -m 644 'vorbisenc.pc' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/lib64/pkgconfig/vorbisenc.pc'
 /usr/bin/install -c -m 644 'vorbisfile.pc' '/var/tmp/portage/media-libs/libvorbis-1.2.3/image//usr/lib64/pkgconfig/vorbisfile.pc'
make[2]: Leaving directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3'
make[1]: Leaving directory `/var/tmp/portage/media-libs/libvorbis-1.2.3/work/libvorbis-1.2.3'
/usr/lib64/portage/bin/ebuild.sh: line 1622: 10439 Segmentation fault      "${PORTAGE_BIN_PATH}"/filter-bash-environment.py "${filtered_vars}"
 *
 * ERROR: media-libs/libvorbis-1.2.3 failed.
 * Call stack:
 *               ebuild.sh, line 1776:  Called die
 * The specific snippet of code:
 *      preprocess_ebuild_env || \
 *              die "error processing environment"
 *  The die message:
 *   error processing environment
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/media-libs:libvorbis-1.2.3:20090711-115742.log'.
 * The ebuild environment file is located at '/var/tmp/portage/media-libs/libvorbis-1.2.3/temp/environment'.
 *
!!! FAILED postinst: 1




Comment 1


André Terpstra





          2009-07-11 12:03:56 UTC
        

ZeusGentoo2 ~ # emerge --info
Portage 2.1.6.13 (default/linux/amd64/2008.0/desktop, gcc-4.3.3, glibc-2.10.1-r0, 2.6.30-gentoo-r1 x86_64)
=================================================================
System uname: Linux-2.6.30-gentoo-r1-x86_64-Intel-R-_Core-TM-2_Duo_CPU_E6750_@_2.66GHz-with-gentoo-2.0.1
Timestamp of tree: Sat, 11 Jul 2009 10:45:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p24
dev-java/java-config: 2.1.8-r1
dev-lang/python:     2.6.2-r1
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.6.4
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.0
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.30
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS=" -O2 -march=native -fomit-frame-pointer -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS=" -O2 -march=native -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
EMERGE_DEFAULT_OPTS=""
FEATURES="ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://192.168.1.222/gentoo"
LDFLAGS="-Wl,-O1"
LINGUAS="nl"
MAKEOPTS="-j3"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://192.168.1.222/gentoo-portage"
USE="X acl acpi akonadi alsa amd64 berkdb bluetooth branding bzip2 cairo cdaudio cdr cleartype cli consolekit cracklib crypt cups dbus device-mapper dga directfb doc dri dvd dvdr dvdread eds emboss encode esd evo exif fam fat fbcon firefox floppy fortran gdbm gif glitz gphoto2 gpm gstreamer hal iconv ieee1394 ipv6 isdnlog jadetex java jpeg jpeg2k kde kde4 kdehiddenvisibility ldap libnotify lm_sensors logitech-mouse logrotate mad messenger midi mikmod mmx mng mp3 mp3tunes mp4 mpeg mudflap multilib mysql ncurses network-cron nls nptl nptlonly nsplugin ntfs offensive ogg opengl openmp pam pcre pdf perl phonon png ppds pppd python qt3 qt3support qt4 quicktime readline reflection reiser4 reiserfs sdl session sms spell spl sse sse2 ssl ssse3 startup-notification svg sysfs tcpd tiff toolbar truetype unicode usb utils visualization vorbis webkit winpopup xcb xcomposite xinerama xml xorg xscreensaver xulrunner xv zlib" ALSA_CARDS=" intel-hda" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CAMERAS=" canon" ELIBC="glibc" INPUT_DEVICES=" keyboard mouse joystick evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="nl" SANE_BACKENDS=" HP" USERLAND="GNU" VIDEO_CARDS=" fbdev nv nvidia vesa vga"
Unset:  CPPFLAGS, CTARGET, FFLAGS, INSTALL_MASK, LANG, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY






Comment 2


André Terpstra





          2009-07-11 19:33:28 UTC
        

Funny, on another similar but non-multilib system this error does not occur... I'll try this compile again.




Comment 3


André Terpstra





          2009-07-11 19:54:47 UTC
        

Well this *is* confusing. emerge considers this build successful even after this error when I update the system again:

ZeusGentoo2 ~ # tail -n 40 /var/log/emerge.log
1247313388:  *** emerge --quiet --deep --update world
1247313390:  *** terminating.
1247313410: Started emerge on: Jul 11, 2009 13:56:50
1247313410:  *** emerge  sync
1247313410:  === sync
1247313410: >>> Starting rsync with rsync://192.168.1.222/gentoo-portage
1247313440: === Sync completed with rsync://192.168.1.222/gentoo-portage
1247313441:  *** terminating.
1247313451: Started emerge on: Jul 11, 2009 13:57:31
1247313451:  *** emerge --quiet --deep --update world
1247313459:  >>> emerge (1 of 3) media-libs/libvorbis-1.2.3 to /
1247313461:  === (1 of 3) Cleaning (media-libs/libvorbis-1.2.3::/usr/portage/media-libs/libvorbis/libvorbis-1.2.3.ebuild)
1247313461:  === (1 of 3) Compiling/Merging (media-libs/libvorbis-1.2.3::/usr/portage/media-libs/libvorbis/libvorbis-1.2.3.ebuild)
1247313496:  === (1 of 3) Merging (media-libs/libvorbis-1.2.3::/usr/portage/media-libs/libvorbis/libvorbis-1.2.3.ebuild)
1247313498:  >>> AUTOCLEAN: media-libs/libvorbis:0
1247313498:  === Unmerging... (media-libs/libvorbis-1.2.2)
1247313504:  >>> unmerge success: media-libs/libvorbis-1.2.2
1247313504:  *** Finished. Cleaning up...
1247313504:  *** exiting unsuccessfully with status '1'.
1247313504:  *** terminating.
1247341336: Started emerge on: Jul 11, 2009 21:42:16
1247341336:  *** emerge  sync
1247341336:  === sync
1247341337: >>> Starting rsync with rsync://192.168.1.222/gentoo-portage
1247341454: === Sync completed with rsync://192.168.1.222/gentoo-portage
1247341461:  *** terminating.
1247341478: Started emerge on: Jul 11, 2009 21:44:38
1247341478:  *** emerge --quiet --deep --update world
1247341485:  >>> emerge (1 of 2) x11-base/xorg-server-1.6.2-r1 to /
1247341487:  === (1 of 2) Cleaning (x11-base/xorg-server-1.6.2-r1::/usr/portage/x11-base/xorg-server/xorg-server-1.6.2-r1.ebuild)
1247341487:  === (1 of 2) Compiling/Merging (x11-base/xorg-server-1.6.2-r1::/usr/portage/x11-base/xorg-server/xorg-server-1.6.2-r1.ebuild)
1247341592:  === (1 of 2) Merging (x11-base/xorg-server-1.6.2-r1::/usr/portage/x11-base/xorg-server/xorg-server-1.6.2-r1.ebuild)
1247341594:  >>> AUTOCLEAN: x11-base/xorg-server:0
1247341594:  === Unmerging... (x11-base/xorg-server-1.6.2)
1247341596:  >>> unmerge success: x11-base/xorg-server-1.6.2
1247341614:  === (1 of 2) Post-Build Cleaning (x11-base/xorg-server-1.6.2-r1::/usr/portage/x11-base/xorg-server/xorg-server-1.6.2-r1.ebuild)
1247341614:  ::: completed emerge (1 of 2) x11-base/xorg-server-1.6.2-r1 to /
1247341614:  >>> emerge (2 of 2) dev-libs/glib-2.20.4 to /
1247341615:  === (2 of 2) Cleaning (dev-libs/glib-2.20.4::/usr/portage/dev-libs/glib/glib-2.20.4.ebuild)
1247341615:  === (2 of 2) Compiling/Merging (dev-libs/glib-2.20.4::/usr/portage/dev-libs/glib/glib-2.20.4.ebuild)
ZeusGentoo2 ~ #





Comment 4


Zac Medico






          2009-07-14 03:44:16 UTC
        

(In reply to comment #3)
> Well this *is* confusing. emerge considers this build successful even after
> this error when I update the system again:

It wasn't considered successful. It's just that a failure during the postinst phase is too late for the package to be "not installed". It's already installed, it's just that the postinst phase failed.

> 1247313496:  === (1 of 3) Merging
> (media-libs/libvorbis-1.2.3::/usr/portage/media-libs/libvorbis/libvorbis-1.2.3.ebuild)
> 1247313498:  >>> AUTOCLEAN: media-libs/libvorbis:0
> 1247313498:  === Unmerging... (media-libs/libvorbis-1.2.2)
> 1247313504:  >>> unmerge success: media-libs/libvorbis-1.2.2
> 1247313504:  *** Finished. Cleaning up...
> 1247313504:  *** exiting unsuccessfully with status '1'.
> 1247313504:  *** terminating.

See, it says "exiting unsuccessfully with status '1'", which means that it correctly reported the failure.

You should try installing it again, to see if the segfault occurs again in the same place. If not, it's probably a hardware issue that triggered it.




Comment 5


Víctor Ostorga (RETIRED)






          2009-07-14 15:38:35 UTC
        

Trying to reproduce it with no luck. Check your GENTOO_MIRRORS




Comment 6


Samuli Suominen (RETIRED)






          2009-07-14 16:29:57 UTC
        

There is no postinst in libvorbis.. looks like some random hardware failure




Comment 7


Wormo (RETIRED)






          2009-07-16 06:23:31 UTC
        

If your emerge doesn't fail again in exactly the same way, it's time for a memtest... intermittent segfault is a big sign of hardware instability




Comment 8


Samuli Suominen (RETIRED)






          2009-07-16 09:55:29 UTC
        

(In reply to comment #7)
> If your emerge doesn't fail again in exactly the same way, it's time for a
> memtest... intermittent segfault is a big sign of hardware instability
> 

It might be harddisk and/or filesystem failure as well, that would cause it to fail in exactly same spot -- been there, done that :)

Closing as WORKSFORME.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

