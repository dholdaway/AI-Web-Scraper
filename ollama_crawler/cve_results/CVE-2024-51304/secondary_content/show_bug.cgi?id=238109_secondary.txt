Title: 238109 – wireshark 1.1.0 doesn't build because of undefined @LIBSMI_LDFLAGS@
URL: https://bugs.gentoo.org/show_bug.cgi?id=238109

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 238109
wireshark 1.1.0 doesn't build because of undefined @LIBSMI_LDFLAGS@
Last modified: 2008-09-22 14:43:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 238109 
      - wireshark 1.1.0 doesn't build because of undefined @LIBSMI_LDFLAGS@


Summary:
wireshark 1.1.0 doesn't build because of undefined @LIBSMI_LDFLAGS@
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Peter Volkov (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-09-19 13:56 UTC by splite





      Modified:
    
2008-09-22 14:43 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



netmon









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




wireshark-1.1.0.ebuild patch

              (patch,296 bytes,
                patch)

            
2008-09-19 13:57 UTC,

            splite




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


splite





          2008-09-19 13:56:31 UTC
        

The AX_LIBSMI macro in configure isn't expanded because aclocal is run without including the directory where the macro is defined.  This causes the build to break later because @LIBSMI_LDFLAGS@ isn't substituted in the Makefiles and is passed verbatim to gcc.  ebuild patch attached.

Reproducible: Always




Comment 1


splite





          2008-09-19 13:57:33 UTC
        

Created attachment 165844 [details, diff]
wireshark-1.1.0.ebuild patch




Comment 2


Peter Volkov (RETIRED)






          2008-09-19 18:50:56 UTC
        

Well, patch is a bit redudant as our autotools eclass should add required AT_M4DIR from Makefile.am. Makefile.am has:

ACLOCAL_AMFLAGS = `./aclocal-flags`

and our autotools.eclass has:

    local amflags_file
    for amflags_file in GNUmakefile.am Makefile.am GNUmakefile.in Makefile.in ; do
        [[ -e ${amflags_file} ]] || continue
        aclocal_opts=$(sed -n '/^ACLOCAL_AMFLAGS[[:space:]]*=/s:[^=]*=::p' ${amflags_file})
        eval aclocal_opts=\"${aclocal_opts}\"
        break
    done

Please, check that your /usr/portage/autotools.eclass has above code. If all in place, then please, show me full build output, USE flags, and other relevant information.




Comment 3


Peter Volkov (RETIRED)






          2008-09-21 19:26:35 UTC
        

Ok, resolving as WORKSFORME. If build still fails for you, please, reopen with additional information.




Comment 4


splite





          2008-09-22 14:43:51 UTC
        

I forgot that I was emerging on one of my "legacy" machines that my customer won't let me update.  I'm sure it works fine on current systems.  Sorry for the noise.

(Maybe someone else stuck maintaining an older system will find it useful. :)









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

