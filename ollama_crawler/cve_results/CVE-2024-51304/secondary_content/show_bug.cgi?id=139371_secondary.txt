Title: 139371 – media-libs/libgphoto2-2.2.0 confcache configure error
URL: https://bugs.gentoo.org/show_bug.cgi?id=139371

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 139371
media-libs/libgphoto2-2.2.0 confcache configure error
Last modified: 2006-07-09 16:07:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 139371 
      - media-libs/libgphoto2-2.2.0 confcache configure error


Summary:
media-libs/libgphoto2-2.2.0 confcache configure error
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-07-05 14:36 UTC by Jose daLuz





      Modified:
    
2006-07-09 16:07 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




config.log from failed build

              (config.log,102.40 KB,
                text/plain)

            
2006-07-06 06:53 UTC,

            Jose daLuz




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jose daLuz





          2006-07-05 14:36:16 UTC
        

Updating libgphoto2 from 2.1.6-r2 to 2.2.0, I get this configure error:

configure: creating ./config.status
config.status: creating Makefile
config.status: creating config.h
config.status: executing depfiles commands
configure: configuring in libgphoto2_port
configure: running /bin/sh './configure' --prefix=/usr  '--prefix=/usr' '--host=x86_64-pc-linux-gnu' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' '--localstatedir=/var/lib' '--with-drivers=all' '--enable-nls' '--disable-docs' '--with-exif-prefix=/usr' '--libdir=/usr/lib64' '--build=x86_64-pc-linux-gnu' '--cache-file' 'config.cache' 'CFLAGS=-march=k8 -O2 -pipe -ggdb' 'CXXFLAGS=-march=k8 -O2 -pipe -ggdb -ffriend-injection' 'PKG_CONFIG_PATH=/usr/lib64/pkgconfig' 'build_alias=x86_64-pc-linux-gnu' 'host_alias=x86_64-pc-linux-gnu' --enable-ltdl-convenience --cache-file=../config.cache --srcdir=.
configure: loading cache ../config.cache
configure: error: `PKG_CONFIG' was not set in the previous run
configure: error: changes in the environment can compromise the build
configure: error: run `make distclean' and/or `rm ../config.cache' and start over
configure: error: /bin/sh './configure' failed for libgphoto2_port

!!! Please attach the following file when filing a report to bugs.gentoo.org:
!!! /var/tmp/portage/libgphoto2-2.2.0/work/libgphoto2-2.2.0/config.log

!!! ERROR: media-libs/libgphoto2-2.2.0 failed.

Deleting the contents of /var/tmp/confcache produces the same result. Deleting the cache and running with FEATURES="-confcache" does work.

Portage 2.1.1_pre2-r4 (default-linux/amd64/2006.0, gcc-4.1.1/amd64-vanilla, glibc-2.4-r3, 2.6.17-ck1 x86_64)
=================================================================
System uname: 2.6.17-ck1 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.12.1
ccache version 2.4 [enabled]
dev-lang/python:     2.4.3-r1
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r2
dev-util/confcache:  0.4.2-r1
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.60
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r1, 2.16.93, 2.17, 2.17.50.0.2
sys-devel/gcc-config: 2.0.0_rc1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.16
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=k8 -O2 -pipe -ggdb"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/lib64/mozilla/defaults/pref /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/eselect/compiler /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/web2c"
CXXFLAGS="-march=k8 -O2 -pipe -ggdb -ffriend-injection"
DISTDIR="/var/portage/distfiles"
EMERGE_DEFAULT_OPTS=""
FEATURES="autoconfig ccache confcache distlocks fixpackages parallel-fetch sandbox sfperms splitdebug strict"
GENTOO_MIRRORS="http://distro.ibiblio.org/pub/linux/distributions/gentoo/ http://gentoo.osuosl.org/ "
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
LINGUAS="en"
MAKEOPTS="-j2"
PKGDIR="/var/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--timeout=120"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/sunrise /usr/portage/local/layman/portage-xgl /usr/portage/local/layman/liferea_overlay /usr/portage/local/layman/gentopia /usr/portage/local/layman/break-my-gentoo-main"
SYNC="rsync://rsync.namerica.gentoo.org/gentoo-portage"
USE="amd64 X aac alsa avi bash-completion berkdb bitmap-fonts bzip2 cairo cdr cli crypt cups dbus debug dlloader dri dvd dvdr eds emboss encode esd firefox flac foomaticdb fortran gdbm gif glitz gnome gpm gstreamer gtk gtk2 hal imlib ipv6 isdnlog java jpeg kde kdehiddenvisibility ldap lzw lzw-tiff mad mono mp3 mpeg ncurses nls nptl nptlonly ogg opengl pam pcre pdflib perl pic png pppd python qt qt3 quicktime readline reflection ruby samba sdl session spell spl sqlite ssl tcpd theora tiff truetype truetype-fonts type1-fonts unicode usb userlocales vorbis xml xml2 xorg xpm xv zlib elibc_glibc input_devices_keyboard input_devices_mouse input_devices_evdev kernel_linux linguas_en userland_GNU video_cards_vesa video_cards_nvidia"
Unset:  CTARGET, INSTALL_MASK, LDFLAGS




Comment 1


Jakub Moc (RETIRED)






          2006-07-05 14:48:34 UTC
        

rm -rf /var/tmp/confcache 




Comment 2


Jule Slootbeek





          2006-07-06 06:40:48 UTC
        

I had to

rm -rf /var/tmp/confcache
rm -rf /var/tmp/portage/libgphoto2-2.2.0

and disable confcache in /etc/make.conf for this to go away.




Comment 3


Jose daLuz





          2006-07-06 06:52:27 UTC
        

As my original comment said, I had to disable confcache on the command line as well as delete the cache for this to work. I'm reopening as there is now confirmation of this from Jule Slootbeek.




Comment 4


Jose daLuz





          2006-07-06 06:53:14 UTC
        

Created attachment 91045 [details]
config.log from failed build




Comment 5


Jakub Moc (RETIRED)






          2006-07-06 06:54:22 UTC
        

confcache is package.masked, only file bugs if you have a patch.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

