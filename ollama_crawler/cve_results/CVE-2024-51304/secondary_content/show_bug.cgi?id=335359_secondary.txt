Title: 335359 – net-misc/dhcpcd-4.0.15 fails to get lease
URL: https://bugs.gentoo.org/show_bug.cgi?id=335359

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 335359
net-misc/dhcpcd-4.0.15 fails to get lease
Last modified: 2010-11-30 10:32:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 335359 
      - net-misc/dhcpcd-4.0.15 fails to get lease


Summary:
net-misc/dhcpcd-4.0.15 fails to get lease
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       major
      


Assignee:

William Hubbs








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-08-31 06:58 UTC by Stéphan BERNARD





      Modified:
    
2010-11-30 10:32 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



base-system
esigra









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stéphan BERNARD





          2010-08-31 06:58:03 UTC
        

Since dhcpcd downgraded to 4.0.15, I cannot obtain lease from dhcp server.

Syslog :
dhcpcd[3498]: eth0: dhcpcd 4.0.15 starting
dhcpcd[3498]: eth0: waiting for carrier
dhcpcd[3498]: eth0: timed out

Reproducible: Always




Kernel version : 2.6.35-gentoo-r4

Unmasking dhcpcd-5.2.7 solves the problem.




Comment 1


William Hubbs






          2010-08-31 23:18:47 UTC
        

(In reply to comment #0)
> Kernel version : 2.6.35-gentoo-r4
> Unmasking dhcpcd-5.2.7 solves the problem.

This is correct.  If you are using kernel version 2.6.35 or later, dhcpcd-5.2.7 is required.

This version of dhcpcd has not been marked stable yet due to bug #262097.

Thanks,

William





Comment 2


Erik





          2010-11-30 10:32:21 UTC
        

I got a little different problem.

Usually when the system was booted without ethernet cable connected, it would say "eth0: waiting for carrier" and then when one connected the cable, it would notice it and continue. But in an update a while ago something broke. It still said "waiting for carrier" but it was a lie. The only thing it was waiting for was the timeout ("eth0: timed out"). So after the system had booted, one had to open a root session and start /etc/init.d/net.eth0 with the cable connected.

Now I tried to unmask dhcpcd-5.2* and it works as usual again. It says "waiting for carrier" and when I connect the cable it actually notices it.

So this should probably be fixed by getting rid of version 4.0.15. If it has something to do with the kernel version, it might be enough to patch dhcpcd-4.0.15 to show a warning that it should not be used with newer kernels. Then the users will have a hint.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

