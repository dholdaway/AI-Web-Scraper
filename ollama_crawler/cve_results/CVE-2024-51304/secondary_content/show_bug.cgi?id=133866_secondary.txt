Title: 133866 – confcache-0.4.2-r1 fails checksums (size off by six bytes)
URL: https://bugs.gentoo.org/show_bug.cgi?id=133866

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 133866
confcache-0.4.2-r1 fails checksums (size off by six bytes)
Last modified: 2006-08-29 11:26:46 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 133866 
      - confcache-0.4.2-r1 fails checksums (size off by six bytes)


Summary:
confcache-0.4.2-r1 fails checksums (size off by six bytes)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Diego Elio Pettenò (RETIRED)








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

145480

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2006-05-20 05:29 UTC by Duncan





      Modified:
    
2006-08-29 11:26 UTC
      (History)
    




          CC List:
        

5 
          users
          
            (show)
          



anakin.skyw
dev-portage
Florian.Steinel
infra-bugs
m.debruijne









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Duncan





          2006-05-20 05:29:27 UTC
        

I suspect this is the same problem that  happened in bug #133136 (libkdepim, same issue, quickly fixed), since in both cases it appears there was an updated ebuild, pulled and then recreated, with the size then off by six bytes.

Something's obviously not working quite as it should be.  Either that, or there simply needs to be a rule saying if an ebuild is pulled, the -rX number must still be bumped, to avoid this issue.

Duncan




Comment 1


Diego Elio Pettenò (RETIRED)






          2006-05-20 05:40:34 UTC
        

Seems to me the problem is with new repoman.

Basically the sync between cvs and the master rsync was done after repoman committed the ebuild and before it committed the new Manifest.

The checkout is perfectly fine wrt Manifest and size.





Comment 2


Duncan





          2006-05-20 05:48:13 UTC
        

Argh!  I must be tired!  That was supposed to include this:

!!! Digest verification failed:
!!! /str/portage/dev-util/confcache/confcache-0.4.2-r1.ebuild
!!! Reason: Filesize does not match recorded size
!!! Got: 1001
!!! Expected: 1007

ViewCVS says 1007 also, as expected based on the other bug.  Again as expected, the only diff is the Header line, which naturally would be different thru ViewCVS since it supplies a ViewCVS header.

That should give you a bit more to go on!  =8^)

You work fast, even with that little info! =8^)  Mid-air collision detected!  Posting this anyway as for all I know it's still useful.





Comment 3


Zac Medico






          2006-05-20 12:16:40 UTC
        

(In reply to comment #1)
> Seems to me the problem is with new repoman.
> 
> Basically the sync between cvs and the master rsync was done after repoman
> committed the ebuild and before it committed the new Manifest.
> 
> The checkout is perfectly fine wrt Manifest and size.

This is nothing new.  Due to our use of cvs tags, there is always a window of time where the file containing the cvs tag will not have a correct Manifest entry.  If the cvs tags were dropped, we could commit the ebuild and Manifest atomically.






Comment 4


Diego Elio Pettenò (RETIRED)






          2006-05-20 13:38:38 UTC
        

Oh damn, now I get what Duncan meant with "pulled", there was an old -r1.
The problem seems to be that when I committed it the $Header: $ line left the Attic/ part (and now we see the 6 bytes discrepancy, too).


Infra, is that a problem with CVS server?





Comment 5


Zac Medico






          2006-06-26 19:05:11 UTC
        

I'm not sure exactly what caused this but it seems to be an isolated incident.




Comment 6


Zac Medico






          2006-08-29 11:26:46 UTC
        

*** Bug 145480 has been marked as a duplicate of this bug. ***









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

