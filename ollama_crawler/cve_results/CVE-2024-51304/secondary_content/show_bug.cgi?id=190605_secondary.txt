Title: 190605 – mozilla-firefox + USE="restrict-javascript" tries to install mozilla-firefox-bin as a noscript dependency
URL: https://bugs.gentoo.org/show_bug.cgi?id=190605

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 190605
mozilla-firefox + USE="restrict-javascript" tries to install mozilla-firefox-bin as a noscript dependency
Last modified: 2009-05-01 08:39:17 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 190605 
      - mozilla-firefox + USE="restrict-javascript" tries to install mozilla-firefox-bin as a noscript dependency


Summary:
mozilla-firefox + USE="restrict-javascript" tries to install mozilla-firefox-...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

191365

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2007-08-29 05:19 UTC by Thomas Sachau





      Modified:
    
2009-05-01 08:39 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



jakub
solar









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Sachau






          2007-08-29 05:19:47 UTC
        

I did a new install for mozilla-firefox with use flag "restrict-javascript" and the noscript-plugin got in as an dependency. But this plugin also inserted mozilla-firefox-bin (and some 32-bit-emul-libs) as dependencies into the queue.

My solution for now, as it only happens with a new install:
1. USE="-restrict-javascript" emerge mozilla-firefox
2. emerge -1 noscript

Reproducible: Always




Comment 1


Jakub Moc (RETIRED)






          2007-08-29 05:58:17 UTC
        

Yeah, and as soon as we "fix" it, people installing mozilla-firefox-bin will complain about exactly the opposite issue.

CANTFIX.




Comment 2


Carsten Lohrke (RETIRED)






          2007-08-29 15:01:54 UTC
        

Actually he has a point. Gentoo is a source distribution and as that www-client/mozilla-firefox should be preferred to  www-client/mozilla-firefox-bin




Comment 3


Carsten Lohrke (RETIRED)






          2007-08-29 15:02:54 UTC
        

Mozilla team, please be so nice and switch the || dependency accordingly.




Comment 4


Carsten Lohrke (RETIRED)






          2007-08-29 15:03:31 UTC
        

um, assign...




Comment 5


Jakub Moc (RETIRED)






          2007-08-29 15:26:58 UTC
        

(In reply to comment #2)
> Actually he has a point. Gentoo is a source distribution and as that
> www-client/mozilla-firefox should be preferred to 
> www-client/mozilla-firefox-bin

> Mozilla team, please be so nice and switch the || dependency accordingly.

Yeah, sure forcing www-client/mozilla-firefox on -bin users makes a lot more sense - since they'll compile it completely needlessly, which is *exactly* what they wanted to avoid by installing -bin. Sigh.





Comment 6


Jakub Moc (RETIRED)






          2007-09-05 11:02:56 UTC
        

*** Bug 191365 has been marked as a duplicate of this bug. ***




Comment 7


Raúl Porcel (RETIRED)






          2007-09-05 11:15:37 UTC
        

I guess the best solution in this case is to drop the DEPEND line...

Thoughts?




Comment 8


Thomas Sachau






          2007-09-05 16:07:59 UTC
        

Perhaps something like this?

-drop DEPEND and RDEPEND in noscript
-with USE="restrict-javascript" noscript as POSTDEPEND in mozilla-firefox and mozilla-firefox-bin
-in noscript check for /usr/bin/firefox|/usr/bin/firefox-bin, else die "No installed firefox found"




Comment 9


michael@smith-li.com





          2007-10-05 15:11:46 UTC
        

This is a portage flaw, is it not? The resolver should recognize that the RDEPEND="|| (
        >=www-client/mozilla-firefox-bin-1.5.0.7
        >=www-client/mozilla-firefox-1.5.0.7
)"

is met by *at least one* of the packages already on the build list, in this case non-bin mozilla-firefox. Adding another package to fulfill an already-met dependency is wrong.




Comment 10


Jakub Moc (RETIRED)






          2007-10-05 17:30:04 UTC
        

(In reply to comment #9)
> This is a portage flaw, is it not? 

Yeah, you don't understand what's this bug about, so... can we drop the dependency and close this to prevent more noise please?





Comment 11


David Sparks





          2007-10-17 05:52:34 UTC
        

I find this bug very strange.  I don't want to have both mozilla-firefox and mozilla-firefox-bin installed on my computer.  Surely this bug can be fixed in a better way than adding mozilla-firefox-bin to package.mask?




Comment 12


Martin Baute





          2008-10-31 12:06:53 UTC
        

Preferring one over the other is no solution.

But emerging *both* isn't a solution, either.

I'm not an ebuild wizard so I don't have a solution, but this needs one. I got quite confused over the sudden appearance of mozilla-firefox-bin on my machine. (equery eventually told me it was noscript who dragged it in.)

Options?




Comment 13


Mad Scientist





          2008-11-02 21:40:32 UTC
        

How about forking the no-script ebuild into noscript and noscript-bin? Sure the underlying portage bug should be fixed but wouldn't this provide a good solution to this problem?




Comment 14


Nirbheek Chauhan (RETIRED)






          2009-05-01 08:39:17 UTC
        

This is no longer an issue with portage-2.2* which has better blocker resolution logic.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

