Title: 240411 – mail-mta/courier-0.59.0 - configure: error: ldap.h header found, but a test compile failed
URL: https://bugs.gentoo.org/show_bug.cgi?id=240411

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 240411
mail-mta/courier-0.59.0 - configure: error: ldap.h header found, but a test compile failed
Last modified: 2008-10-07 21:47:15 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 240411 
      - mail-mta/courier-0.59.0 - configure: error: ldap.h header found, but a test compile failed


Summary:
mail-mta/courier-0.59.0 - configure: error: ldap.h header found, but a test c...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-10-07 18:12 UTC by Joerg Schaible





      Modified:
    
2008-10-07 21:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Joerg Schaible





          2008-10-07 18:12:28 UTC
        

courier-0.59.0 fails to build if useflag ldap is *deactivated*, but openldap is nevertheless installed:

============ %< ===============
=== configuring in ldapaddressbook (/var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/ldapaddressbook)
configure: running /bin/sh ./configure '--prefix=/usr'  '--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' '--localstatedir=/var/lib' '--disable-root-check' '--mandir=/usr/share/man' '--sysconfdir=/etc/courier' '--libexecdir=/usr/lib/courier' '--datadir=/usr/share/courier' '--sharedstatedir=/var/lib/courier/com' '--localstatedir=/var/lib/courier' '--with-piddir=/var/run/courier' '--with-authdaemonvar=/var/lib/courier/authdaemon' '--with-mailuser=mail' '--with-mailgroup=mail' '--with-paranoid-smtpext' '--with-db=gdbm' '--disable-autorenamesent' '--host=i686-pc-linux-gnu' '--without-ipv6' '--without-ldapaliasd' '--disable-maildropldap' '--without-ispell' '--enable-mimetypes=/etc/mime.types' '--with-fam' 'debug=true' '--build=i686-pc-linux-gnu' 'build_alias=i686-pc-linux-gnu' 'host_alias=i686-pc-linux-gnu' 'CFLAGS=-O2 -march=pentium2 -mtune=i686 -pipe -msse -mfpmath=sse -mmmx -msse2 -foptimize-sibling-calls -fprefetch-loop-arrays -falign-functions=32 -floop-optimize' 'LDFLAGS=-Wl,-O1' 'CPPFLAGS=' 'CXXFLAGS=-O2 -march=pentium2 -mtune=i686 -pipe -msse -mfpmath=sse -mmmx -msse2 -foptimize-sibling-calls -fprefetch-loop-arrays -falign-functions=32 -floop-optimize -fno-default-inline' 'FFLAGS=' '--with-makedatprog=/usr/lib/courier/courier/makedatprog' '--with-package=courier' '--with-version=0.59.0' '--with-courierlogger=/usr/sbin/courierlogger' '--with-mailuid=8' '--with-mailgid=12' '--enable-trusted-groups=mail' '--with-formdata' '--enable-utf7-folder-encoding' '--enable-unicode' '--with-webadmindir=/usr/share/courier/courierwebadmin' --cache-file=/var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/configuring.cache --srcdir=.
configure: loading cache /var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/configuring.cache

[snip]

checking lber.h presence... yes
checking for lber.h... yes
checking for ldap.h... yes
configure: error: ldap.h header found, but a test compile failed -- check ldapaddressbook/config.log for more details
configure: error: ./configure failed for ldapaddressbook

!!! Please attach the following file when seeking support:
!!! /var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/config.log
 *
 * ERROR: mail-mta/courier-0.59.0 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2890:  Called econf 'src_compile' 'src_compile' '--prefix=/usr' '--disable-root-check' '--mandir=/usr/share/man' '--sysconfdir=/etc/courier' '--libexecdir=/usr/lib/courier' '--datadir=/usr/share/courier' '--sharedstatedir=/var/lib/courier/com' '--localstatedir=/var/lib/courier' '--with-piddir=/var/run/courier' '--with-authdaemonvar=/var/lib/courier/authdaemon' '--with-mailuser=mail' '--with-mailgroup=mail' '--with-paranoid-smtpext' '--with-db=gdbm' '--disable-autorenamesent' '--cache-file=/var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/configuring.cache' '--host=i686-pc-linux-gnu' '--without-ipv6' '--without-ldapaliasd' '--disable-maildropldap' '--without-ispell' '--enable-mimetypes=/etc/mime.types'
 *               ebuild.sh, line  513:  Called die
 * The specific snippet of code:
 *                      die "econf failed"
 *  The die message:
 *   econf failed
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/log/portage/mail-mta:courier-0.59.0:20081007-145507.log'.
 * The ebuild environment file is located at '/var/tmp/portage/portage/mail-mta/courier-0.59.0/temp/environment'.
 *
============ %< =======================

The presence of ldap.h does not mean that ldap support should automatically included, the -ldap use flag must be respected.

Reproducible: Always

Steps to Reproduce:
1. emerge openldap
2. set use flags for courier to (crypt fam nls pam -fax -ipv6 -ldap -mailwrapper -mysql -norewrite -postgres -spell -web -webmail)
3. emerge courier

Actual Results:  
Build fails

Expected Results:  
Courier should have been built and installed without ldap support.




Comment 1


Jeroen Roovers (RETIRED)






          2008-10-07 18:39:10 UTC
        

configure: error: ldap.h header found, but a test compile failed -- check
ldapaddressbook/config.log for more details

Please attach both of:
1) /var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/config.log
2) /var/tmp/portage/portage/mail-mta/courier-0.59.0/work/courier-0.59.0/ldapaddressbook/config.log

to this bug report.




Comment 2


Joerg Schaible





          2008-10-07 21:47:15 UTC
        

I tried to create those files again, but I cannot. I unmerged openldap and emerged courier already. For your request I emerged openldap again and remerged courier ... this time the build went fine. So this problem was not reproducable :-/









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

