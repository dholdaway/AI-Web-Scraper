Title: 571972 – missing letters after resume from suspend with gnome-3.18 on gentoo-sources-4.4.0 on i7-4558U with iris 5100
URL: https://bugs.gentoo.org/show_bug.cgi?id=571972

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 571972
missing letters after resume from suspend with gnome-3.18 on gentoo-sources-4.4.0 on i7-4558U with iris 5100
Last modified: 2018-01-12 13:14:26 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 571972 
      - missing letters after resume from suspend with gnome-3.18 on gentoo-sources-4.4.0 on i7-4558U with iris 5100


Summary:
missing letters after resume from suspend with gnome-3.18 on gentoo-sources-4...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2016-01-15 07:59 UTC by Tilo Prütz





      Modified:
    
2018-01-12 13:14 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



maksbotan
marci_r









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tilo Prütz





          2016-01-15 07:59:14 UTC
        

I switched from gentoo-sources-4.3.3 to gentoo-sources-4.4.0 on my MacBookPro11,1 (13" Retina).
Now every time the machine wakes up from suspend letters are missing in all windows in Gnome (3.18).
When changing the font sizes the problem disappears.
But when changing the font sizes back to normal the problem reoccurs.

Switching back to gentoo-sources-4.3.3 (without any other change) resolves the problem but of course I don't want to be stuck on 4.3.3 forever.




Comment 1


Pacho Ramos






          2016-01-15 11:59:52 UTC
        

Maybe this is related:
http://www.spinics.net/lists/intel-gfx/msg82135.html




Comment 2


Maxim Koltsov (RETIRED)






          2016-03-12 15:25:22 UTC
        

Hi. I can confirm this very strange behavior.

What exactly happens for me:
After some suspend/resume cycles I can no longer access any VTs until the next reboot -- they are just blank, showing blinking cursor in the edge. However, agetty and syslog are still running.
And after some resumes, most letters disappear in all GTK applications. Qt apps, google-chrome and xterm are not affected. Last time it happened after VT switch (VT was already broken).
I've observed this on gentoo-sources on 4.4.2 and 4.4.4. Right now I've switched to 4.1.15-r1 (current amd64 stable) and the problem seems to have disappeared. At least, I could not reproduce it by suspend/resume and VT switches. And VTs works completely normal now.
I fear this is a regression in 4.4-kernel.

My configuration:
Lenovo X1 Carbon with EFI and EFI Framebuffer enabled, integrated video (Intel Corporation 3rd Gen Core processor Graphics Controller (rev 09)).




Comment 3


Tilo Prütz





          2016-09-07 06:58:31 UTC
        

With gentoo-sources-4.5.2 this problem does not occur.




Comment 4


Tom Wijsman (TomWij) (RETIRED)






          2016-09-08 18:18:52 UTC
        

We first need to make sure that this isn't already patched, could someone try the newest 4.4.x kernel?

In case that this isn't patched yet, could someone attempt to use the patches mentioned in the mailing list referred to in Comment #1?

If those patches don't help, we will have to bisect between 4.3 and 4.4 (or reverse between 4.4 and 4.5) to find the patch that causes/solve this issue in an attempt to write/find a fix.

The instructions on a bisect that can be found here:

https://wiki.gentoo.org/wiki/Kernel_git-bisect

Two similar bug reports with workarounds that we might want to track as well:

https://bugzilla.redhat.com/show_bug.cgi?id=1317475
https://bugzilla.redhat.com/show_bug.cgi?id=1323762




Comment 5


Tilo Prütz





          2016-09-23 15:54:31 UTC
        

I switched to gentoo-sources-4.4.6 and it seems the bug is already patched there.
However, I will stay for some days at 4.4.6 and see if the issue reoccurs.




Comment 6


Tilo Prütz





          2016-09-29 16:00:42 UTC
        

The bug is _not_ patched in gentoo-sources-4.4.6.




Comment 7


Tilo Prütz





          2016-09-29 16:02:09 UTC
        

For me this issue is no longer relevant since I am on gentoo-sources-4.5.2 which works well for me.




Comment 8


Mike Pagano






          2018-01-12 13:05:13 UTC
        

Thanks for reporting this issue no longer occurs for you in later kernels.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

