Title: 359609 – binary install fails, where source install works (media-tv/linuxtv-dvb-apps)
URL: https://bugs.gentoo.org/show_bug.cgi?id=359609

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 359609
binary install fails, where source install works (media-tv/linuxtv-dvb-apps)
Last modified: 2011-03-29 22:00:29 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 359609 
      - binary install fails, where source install works (media-tv/linuxtv-dvb-apps)


Summary:
binary install fails, where source install works (media-tv/linuxtv-dvb-apps)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-03-20 13:28 UTC by lxg





      Modified:
    
2011-03-29 22:00 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


lxg





          2011-03-20 13:28:00 UTC
        

I have a BINHOST setup. When trying to install the binary package, the emerge of the media-tv/linuxtv-dvb-apps package fails. See SNIPPET 1.

I am able to build the package from source. But I get a warning, see SNIPPET 2.

This bug is most likely related to #172874; however, the special problem here is the difference between source and binary install.

++++++++++++++ BEGIN SNIPPET 1 ++++++++++++++

>>> Installing (3 of 15) media-tv/linuxtv-dvb-apps-1.1.1.20100223
Traceback (most recent call last):
  File "/usr/lib64/portage/bin/emerge", line 43, in <module>
    retval = emerge_main()
  File "/usr/lib64/portage/pym/_emerge/main.py", line 1755, in emerge_main
    myopts, myaction, myfiles, spinner)
  File "/usr/lib64/portage/pym/_emerge/actions.py", line 439, in action_build
    retval = mergetask.merge()
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1198, in merge
    rval = self._merge()
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1542, in _merge
    self._main_loop()
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1684, in _main_loop
    self._poll_loop()
  File "/usr/lib64/portage/pym/_emerge/PollScheduler.py", line 192, in _poll_loop
    handler(f, event)
  File "/usr/lib64/portage/pym/_emerge/SpawnProcess.py", line 205, in _output_handler
    self._unregister_if_appropriate(event)
  File "/usr/lib64/portage/pym/_emerge/AbstractPollTask.py", line 61, in _unregister_if_appropriate
    self.wait()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 41, in wait
    self._wait_hook()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 123, in _wait_hook
    self._exit_listener_stack.pop()(self)
  File "/usr/lib64/portage/pym/_emerge/Binpkg.py", line 302, in _extractor_exit
    self.wait()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 41, in wait
    self._wait_hook()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 123, in _wait_hook
    self._exit_listener_stack.pop()(self)
  File "/usr/lib64/portage/pym/_emerge/CompositeTask.py", line 133, in _default_final_exit
    return self.wait()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 41, in wait
    self._wait_hook()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 123, in _wait_hook
    self._exit_listener_stack.pop()(self)
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1524, in _extract_exit
    self._build_exit(build)
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1521, in _build_exit
    self._schedule()
  File "/usr/lib64/portage/pym/_emerge/PollScheduler.py", line 103, in _schedule
    return self._schedule_tasks()
  File "/usr/lib64/portage/pym/_emerge/Scheduler.py", line 1717, in _schedule_tasks
    if q.schedule():
  File "/usr/lib64/portage/pym/_emerge/SequentialTaskQueue.py", line 55, in schedule
    task.start()
  File "/usr/lib64/portage/pym/_emerge/AsynchronousTask.py", line 23, in start
    self._start()
  File "/usr/lib64/portage/pym/_emerge/PackageMerge.py", line 43, in _start
    self.returncode = self.merge.merge()
  File "/usr/lib64/portage/pym/_emerge/MergeListItem.py", line 147, in merge
    retval = self._install_task.install()
  File "/usr/lib64/portage/pym/_emerge/Binpkg.py", line 325, in install
    retval = merge.execute()
  File "/usr/lib64/portage/pym/_emerge/EbuildMerge.py", line 26, in execute
    blockers=self.find_blockers)
  File "/usr/lib64/portage/pym/portage/dbapi/vartree.py", line 4034, in merge
    mydbapi=mydbapi, prev_mtimes=prev_mtimes)
  File "/usr/lib64/portage/pym/portage/dbapi/vartree.py", line 3885, in merge
    mydbapi=mydbapi, prev_mtimes=prev_mtimes)
  File "/usr/lib64/portage/pym/portage/dbapi/vartree.py", line 3906, in _merge
    cleanup=cleanup, mydbapi=mydbapi, prev_mtimes=prev_mtimes)
  File "/usr/lib64/portage/pym/portage/dbapi/vartree.py", line 3018, in treewalk
    eerror(portage._merge_unicode_error(unicode_errors))
AttributeError: 'module' object has no attribute '_merge_unicode_error'

++++++++++++++ END SNIPPET 1 ++++++++++++++


++++++++++++++ BEGIN SNIPPET 2 ++++++++++++++

 * Messages for package media-tv/linuxtv-dvb-apps-1.1.1.20100223:

 * This package installs one or more file names containing characters that
 * do not match your current locale settings. The current setting for
 * filesystem encoding is 'ANSI_X3.4-1968'.
 * 
 *      usr/share/dvb/dvb-t/fr-Alen\ufffd\ufffdon
 *      usr/share/dvb/dvb-t/fr-Besan\ufffd\ufffdon
 * 
 * For best results, UTF-8 encoding is recommended. See the Gentoo Linux
 * Localization Guide for instructions about how to configure your locale
 * for UTF-8 encoding:
 * 
 *      http://www.gentoo.org/doc/en/guide-localization.xml
 * 
 * Please read the documentation in /usr/share/doc/linuxtv-dvb-apps-1.1.1.20100223.
 * The channel lists and other files are installed in
 * /usr/share/dvb

++++++++++++++ END SNIPPET 2 ++++++++++++++

Reproducible: Always




Comment 1


lxg





          2011-03-20 19:24:35 UTC
        

After setting an UTF-8 locale and rebooting, I was able to install the binary package.




Comment 2


Jeroen Roovers (RETIRED)






          2011-03-22 00:15:05 UTC
        

So you solved the problem by basically following the advice in the build output. Where is the bug?




Comment 3


Jeroen Roovers (RETIRED)






          2011-03-29 22:00:29 UTC
        

I guess your BINHOST client system should match your BINHOST staging system.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

