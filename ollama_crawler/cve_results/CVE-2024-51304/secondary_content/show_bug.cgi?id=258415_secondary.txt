Title: 258415 – Okular crashes (KMimeTypeTrader assertion) trying to open files
URL: https://bugs.gentoo.org/show_bug.cgi?id=258415

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 258415
Okular crashes (KMimeTypeTrader assertion) trying to open files
Last modified: 2009-06-09 04:49:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 258415 
      - Okular crashes (KMimeTypeTrader assertion) trying to open files


Summary:
Okular crashes (KMimeTypeTrader assertion) trying to open files
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       critical
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-02-10 07:59 UTC by Jason Lai





      Modified:
    
2009-06-09 04:49 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



reavertm









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Jason Lai





          2009-02-10 07:59:53 UTC
        

If I try to open any kind of document with Okular from the command line, it crashes on a fatal assertion.

Reproducible: Always

Steps to Reproduce:
1. okular something.pdf
2.
3.

Actual Results:  
Crashes

Expected Results:  
Should open the document

Command line output:

okular(17277)/kdecore (KSycoca) KSycocaPrivate::openDatabase: Trying to open ksycoca from  "/var/tmp/kdecache-jason/ksycoca4"
okular(17277)/kdecore (trader) KServiceTypeTrader::defaultOffers: KServiceTypeTrader: serviceType  "okular/Generator"not found
okular(17277)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(17277)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(17277)/kdecore (KConfigSkeleton) KCoreConfigSkeleton::writeConfig:
okular(17277): Attempt to use QAction "bookmark_action_0" with KXMLGUIFactory!
ASSERT: "genericServiceTypePtr" in file /var/tmp/portage/kde-base/kdelibs-4.2.0/work/kdelibs-4.2.0/kdecore/services/kmimetypetrader.cpp, line 107

Stack trace:

Thread 1 (Thread 0x7f8149839700 (LWP 17172)):
[KCrash Handler]
#5  0x00007f8145ee03c5 in raise () from /lib/libc.so.6
#6  0x00007f8145ee173e in abort () from /lib/libc.so.6
#7  0x00007f8147714385 in qt_message_output (msgType=QtFatalMsg, buf=<value optimized out>) at global/qglobal.cpp:2108
#8  0x00007f81477144b7 in qFatal (msg=<value optimized out>) at global/qglobal.cpp:2309
#9  0x00007f8147e83716 in filterMimeTypeOffers (list=@0x7fff51872f80, genericServiceType=<value optimized out>)
    at /var/tmp/portage/kde-base/kdelibs-4.2.0/work/kdelibs-4.2.0/kdecore/services/kmimetypetrader.cpp:107
#10 0x00007f8147e83b96 in KMimeTypeTrader::query (this=<value optimized out>, mimeType=@0x7fff51873070, genericServiceType=@0x7fff51873060, constraint=@0x7fff51872f90)
    at /var/tmp/portage/kde-base/kdelibs-4.2.0/work/kdelibs-4.2.0/kdecore/services/kmimetypetrader.cpp:127
#11 0x00007f814021605a in Okular::Document::openDocument (this=0x251ca90, docFile=@0x7fff51873470, url=@0x7fff51872f40, _mime=<value optimized out>)
    at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/core/document.cpp:1549
#12 0x00007f81404d2499 in Part::openFile (this=0x2563b40) at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/part.cpp:874
#13 0x00007f8149430905 in KParts::ReadOnlyPart::openUrl (this=0x2563b40, url=<value optimized out>) at /var/tmp/portage/kde-base/kdelibs-4.2.0/work/kdelibs-4.2.0/kparts/part.cpp:558
#14 0x00007f81404d3426 in Part::openUrl (this=0x4314, url=@0x4314) at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/part.cpp:970
#15 0x0000000000409a30 in Shell::openUrl (this=0x25b04c0, url=@0x25b0558, page=0) at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/shell/shell.cpp:131
#16 0x0000000000409f67 in Shell::delayedOpen (this=0x25b04c0) at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/shell/shell.cpp:114
#17 0x000000000040a004 in Shell::qt_metacall (this=0x25b04c0, _c=QMetaObject::InvokeMetaMethod, _id=0, _a=0x7fff51873a30)
    at /var/tmp/portage/kde-base/okular-4.2.0/work/okular_build/okular/shell/shell.moc:90
#18 0x00007f814781e64c in QMetaObject::activate (sender=0x27862c0, from_signal_index=<value optimized out>, to_signal_index=4, argv=0xffffffffffffffff) at kernel/qobject.cpp:3028
#19 0x00007f8147826e1f in QSingleShotTimer::timerEvent (this=0x27862c0) at kernel/qtimer.cpp:300
#20 0x00007f814781a54a in QObject::event (this=0x27862c0, e=0x4314) at kernel/qobject.cpp:1117
#21 0x00007f8146b1d36e in QApplicationPrivate::notify_helper () from /usr/lib64/qt4/libQtGui.so.4
#22 0x00007f8146b21e8e in QApplication::notify () from /usr/lib64/qt4/libQtGui.so.4
#23 0x00007f8148610aa1 in KApplication::notify (this=0x7fff518743f0, receiver=0x27862c0, event=0x7fff51874070)
    at /var/tmp/portage/kde-base/kdelibs-4.2.0/work/kdelibs-4.2.0/kdeui/kernel/kapplication.cpp:307
#24 0x00007f8147808ea8 in QCoreApplication::notifyInternal (this=0x7fff518743f0, receiver=0x27862c0, event=0x7fff51874070) at kernel/qcoreapplication.cpp:593
#25 0x00007f8147836149 in QTimerInfoList::activateTimers (this=0x24d2650) at kernel/qcoreapplication.h:215
#26 0x00007f8147837780 in QEventDispatcherUNIX::processEvents (this=0x24d0280, flags=@0x7fff518742d0) at kernel/qeventdispatcher_unix.cpp:899
#27 0x00007f8146ba2043 in QEventDispatcherX11::processEvents () from /usr/lib64/qt4/libQtGui.so.4
#28 0x00007f8147808265 in QEventLoop::processEvents (this=<value optimized out>, flags=@0x7fff51874360) at kernel/qeventloop.cpp:149
#29 0x00007f81478083ca in QEventLoop::exec (this=0x7fff518743a0, flags=@0x7fff518743b0) at kernel/qeventloop.cpp:200
#30 0x00007f814780a50e in QCoreApplication::exec () at kernel/qcoreapplication.cpp:851
#31 0x00000000004089ee in main (argc=<value optimized out>, argv=<value optimized out>) at /var/tmp/portage/kde-base/okular-4.2.0/work/okular-4.2.0/okular/shell/main.cpp:81
#32 0x00007f8145ecdb74 in __libc_start_main () from /lib/libc.so.6
#33 0x0000000000408379 in _start ()


$ emerge --info
Portage 2.1.6.4 (default/linux/amd64/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.27-gentoo-r8 x86_64)
=================================================================                                       
System uname: Linux-2.6.27-gentoo-r8-x86_64-Intel-R-_Core-TM-2_Quad_CPU_@_2.40GHz-with-glibc2.2.5       
Timestamp of tree: Tue, 10 Feb 2009 04:30:01 +0000                                                      
ccache version 2.4 [disabled]                                                                           
app-shells/bash:     3.2_p33                                                                            
dev-java/java-config: 1.3.7, 2.1.6-r1                                                                   
dev-lang/python:     2.4.4-r14, 2.5.4-r2                                                                
dev-python/pycrypto: 2.0.1-r6                                                                           
dev-util/ccache:     2.4-r7                                                                             
dev-util/cmake:      2.6.2-r1                                                                           
sys-apps/baselayout: 2.0.0                                                                              
sys-apps/openrc:     0.2.3                                                                              
sys-apps/sandbox:    1.2.18.1-r2                                                                        
sys-devel/autoconf:  2.13, 2.63                                                                         
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2                                          
sys-devel/binutils:  2.18-r3                                                                            
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O3 -msse3 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/4.1/env /usr/kde/4.1/share/config /usr/kde/4.1/shutdown /usr/kde/4.2/env /usr/kde/4.2/share/config /usr/kde/4.2/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms splitdebug strict unmerge-orphans userfetch userpriv"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="en"
MAKEOPTS="-j6"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/jokey /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X acpi alsa amd64 avahi bash-completion berkdb bluetooth branding bzip2 cairo cdr cli cracklib crypt cups dbus debug dri dvd dvdr dvdread eds emboss encode evo exif fam firefox fortran gdbm gif gpm gstreamer hal iconv isdnlog java5 jpeg kde kdehiddenvisibility kdeprefix ldap libnotify mad midi mikmod mmx mp3 mpeg mudflap multilib ncurses nls nptl nptlonly nvidia ogg opengl openmp pam pcre pdf png ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection sdl session smp spell spl sse sse2 ssl ssse3 startup-notification svg sysfs tcpd threads tiff truetype unicode usb userlocales vorbis xcomposite xml xorg xulrunner xv zeroconf zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xxvia82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplugladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="nvidia"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Maciej Mrozowski






          2009-05-20 01:58:34 UTC
        

Unable to reproduce.
Do you still have this issue with okular-4.2.3?




Comment 2


Harrison Metzger





          2009-06-09 04:27:47 UTC
        

Unable to reproduce.
Using kde 4.2.4. Looking at the change logs:

http://www.kde.org/announcements/changelogs/changelog4_2to4_2_1.php
http://www.kde.org/announcements/changelogs/changelog4_2_1to4_2_2.php

There are bugfixes for crashing, perhaps this problem has been resolved. Anyway, the bug should probably be closed. 




Comment 3


Jason Lai





          2009-06-09 04:49:10 UTC
        

I think it was some kind of installation problem where some config file didn't get set up in /usr/kde/4.2/share correctly. In any case, I'm on 4.2.3 and it's working now.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

