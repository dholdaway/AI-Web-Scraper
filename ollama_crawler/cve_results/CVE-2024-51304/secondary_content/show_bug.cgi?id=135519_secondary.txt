Title: 135519 – >=sys-libs/db-3 Wrong ./configure argument passed if crosscompiling
URL: https://bugs.gentoo.org/show_bug.cgi?id=135519

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 135519
>=sys-libs/db-3 Wrong ./configure argument passed if crosscompiling
Last modified: 2008-08-16 22:59:16 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 135519 
      - >=sys-libs/db-3 Wrong ./configure argument passed if crosscompiling


Summary:
>=sys-libs/db-3 Wrong ./configure argument passed if crosscompiling
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Paul de Vrieze (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-06-04 07:55 UTC by Guseinov Alexey





      Modified:
    
2008-08-16 22:59 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Guseinov Alexey





          2006-06-04 07:55:56 UTC
        

line 59 of ebuild:
	use amd64 && myconf="${myconf} --with-mutex=x86/gcc-assembly"
So this line enables x86/gcc-assembly for mutexes, even when crosscompiling. So my target architecture is ARM and build fails:
*****
../dist/../mutex/mut_tas.c:118: warning: matching constraint does not allow a register<br>
../dist/../mutex/mut_tas.c:118: warning: matching constraint does not allow a register<br>
../dist/../mutex/mut_tas.c:118: error: impossible constraint in `asm'
*****
Because right value for ARM arch is "ARM/gcc-assembly". When I changed this line in ebuild everything compiled.




Comment 1


Paul de Vrieze (RETIRED)






          2006-06-05 13:30:45 UTC
        

This option comes from the amd64 team. In any case I don't really know how to properly do crosscompiling on gentoo. Shouldn't "use amd64" be false when compiling to an ARM system?




Comment 2


Guseinov Alexey





          2006-06-05 14:19:47 UTC
        

Yes, amd64 flag is false for ARM. But portage doesn't support crosscompiling yet so it uses USE flags of parent system. I can only manually disable some of them and add new flags.
May be it is better to determine architecture by using CHOST variable?
For amd64 it starts with "x86_64" and for arm it starts from "arm".




Comment 3


Robin Johnson









          2008-08-16 22:59:16 UTC
        

This was fixed in Portage IIRC.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

