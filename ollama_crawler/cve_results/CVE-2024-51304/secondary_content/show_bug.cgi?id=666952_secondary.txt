Title: 666952 – net-vpn/wireguard - make[2]: stat: include/config/auto.conf: Permission denied
URL: https://bugs.gentoo.org/show_bug.cgi?id=666952

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 666952
net-vpn/wireguard - make[2]: stat: include/config/auto.conf: Permission denied
Last modified: 2018-09-24 10:03:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 666952 
      - net-vpn/wireguard - make[2]: stat: include/config/auto.conf: Permission denied


Summary:
net-vpn/wireguard - make[2]: stat: include/config/auto.conf: Permission denied
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Jason A. Donenfeld








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-09-24 06:41 UTC by Einstok Fair





      Modified:
    
2018-09-24 10:03 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Einstok Fair





          2018-09-24 06:41:13 UTC
        

/etc/kernels # cp kernel-config-x86_64-4.18.9-gentoo /usr/src/linux/.config
vps18754 /etc/kernels # cd /usr/src/linux
vps18754 /usr/src/linux # make oldconfig && make prepare
  HOSTCC  scripts/basic/fixdep
  HOSTCC  scripts/kconfig/conf.o
  YACC    scripts/kconfig/zconf.tab.c
  LEX     scripts/kconfig/zconf.lex.c
  HOSTCC  scripts/kconfig/zconf.tab.o
  HOSTLD  scripts/kconfig/conf
scripts/kconfig/conf  --oldconfig Kconfig
#
# configuration written to .config
#
scripts/kconfig/conf  --syncconfig Kconfig
  SYSTBL  arch/x86/include/generated/asm/syscalls_32.h
  SYSHDR  arch/x86/include/generated/asm/unistd_32_ia32.h
  SYSHDR  arch/x86/include/generated/asm/unistd_64_x32.h
  SYSTBL  arch/x86/include/generated/asm/syscalls_64.h
  HYPERCALLS arch/x86/include/generated/asm/xen-hypercalls.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_32.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_64.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_x32.h
  HOSTCC  scripts/basic/bin2c
  HOSTCC  arch/x86/tools/relocs_32.o
  HOSTCC  arch/x86/tools/relocs_64.o
  HOSTCC  arch/x86/tools/relocs_common.o
  HOSTLD  arch/x86/tools/relocs
  UPD     include/config/kernel.release
  WRAP    arch/x86/include/generated/uapi/asm/bpf_perf_event.h
  WRAP    arch/x86/include/generated/uapi/asm/poll.h
  WRAP    arch/x86/include/generated/asm/dma-contiguous.h
  WRAP    arch/x86/include/generated/asm/early_ioremap.h
  WRAP    arch/x86/include/generated/asm/mcs_spinlock.h
  WRAP    arch/x86/include/generated/asm/mm-arch-hooks.h
  UPD     include/generated/uapi/linux/version.h
  UPD     include/generated/utsrelease.h
  CC      kernel/bounds.s
  UPD     include/generated/bounds.h
  UPD     include/generated/timeconst.h
  CC      arch/x86/kernel/asm-offsets.s
  UPD     include/generated/asm-offsets.h
  CALL    scripts/checksyscalls.sh
  DESCEND  objtool
  HOSTCC   /usr/src/linux-4.18.9-gentoo/tools/objtool/fixdep.o
  HOSTLD   /usr/src/linux-4.18.9-gentoo/tools/objtool/fixdep-in.o
  LINK     /usr/src/linux-4.18.9-gentoo/tools/objtool/fixdep
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/exec-cmd.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/help.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/pager.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/parse-options.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/run-command.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/sigchain.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/subcmd-config.o
  LD       /usr/src/linux-4.18.9-gentoo/tools/objtool/libsubcmd-in.o
  AR       /usr/src/linux-4.18.9-gentoo/tools/objtool/libsubcmd.a
  GEN      /usr/src/linux-4.18.9-gentoo/tools/objtool/arch/x86/lib/inat-tables.c
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/arch/x86/decode.o
  LD       /usr/src/linux-4.18.9-gentoo/tools/objtool/arch/x86/objtool-in.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/builtin-check.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/builtin-orc.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/check.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/orc_gen.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/orc_dump.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/elf.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/special.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/objtool.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/libstring.o
  CC       /usr/src/linux-4.18.9-gentoo/tools/objtool/str_error_r.o
  LD       /usr/src/linux-4.18.9-gentoo/tools/objtool/objtool-in.o
  LINK     /usr/src/linux-4.18.9-gentoo/tools/objtool/objtool
/usr/src/linux # emerge wireguard
Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) net-vpn/wireguard-0.0.20180918::gentoo
 * WireGuard-0.0.20180918.tar.xz BLAKE2B SHA512 size ;-) ...                                                                                                                       [ ok ]
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     4.18.9-gentoo
 * Checking for suitable kernel configuration options...                                                                                                                           [ ok ]
>>> Unpacking source...
>>> Unpacking WireGuard-0.0.20180918.tar.xz to /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work
>>> Source unpacked in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work
>>> Preparing source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
 * Preparing wireguard module
make -j2 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- 'LDFLAGS=-m elf_x86_64' KERNELDIR=/usr/src/linux module 

  ERROR: Kernel configuration is invalid.
         include/generated/autoconf.h or include/config/auto.conf are missing.
         Run 'make oldconfig && make prepare' on kernel src to fix it.


  WARNING: Symbol version dump ./Module.symvers
           is missing; modules will have no dependencies and modversions.

make[2]: stat: include/config/auto.conf: Permission denied
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o
cc1: error: ./arch/x86/include/generated/uapi: Permission denied
cc1: error: ./include/generated/uapi: Permission denied
make[2]: *** [scripts/Makefile.build:317: /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o] Error 1
make[2]: *** Waiting for unfinished jobs....
cc1: error: ./arch/x86/include/generated/uapi: Permission denied
cc1: error: ./include/generated/uapi: Permission denied
make[2]: *** [scripts/Makefile.build:317: /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o] Error 1
make[1]: *** [Makefile:1504: _module_/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src] Error 2
make: *** [Makefile:36: module] Error 2
 * ERROR: net-vpn/wireguard-0.0.20180918::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=net-vpn/wireguard-0.0.20180918::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-vpn/wireguard-0.0.20180918::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/environment'.
 * Working directory: '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src'
 * S: '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918'

>>> Failed to emerge net-vpn/wireguard-0.0.20180918, Log file:

>>>  '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/build.log'

Reproducible: Always




Comment 1


Jeroen Roovers (RETIRED)






          2018-09-24 07:02:29 UTC
        

make[2]: stat: include/config/auto.conf: Permission denied

Why is this?




Comment 2


Einstok Fair





          2018-09-24 07:10:00 UTC
        

vps18754 /usr/src/linux # chown -R root:root .
vps18754 /usr/src/linux # ls -l include/config/auto.conf 
-rw------- 1 root root 54927 Sep 24 05:42 include/config/auto.conf
vps18754 /usr/src/linux # emerge wireguard
Calculating dependencies... done!

>>> Verifying ebuild manifests

>>> Emerging (1 of 1) net-vpn/wireguard-0.0.20180918::gentoo
 * WireGuard-0.0.20180918.tar.xz BLAKE2B SHA512 size ;-) ...                                                                                                                       [ ok ]
 * Determining the location of the kernel source code
 * Found kernel source directory:
 *     /usr/src/linux
 * Found sources for kernel version:
 *     4.18.9-gentoo
 * Checking for suitable kernel configuration options...                                                                                                                           [ ok ]
>>> Unpacking source...
>>> Unpacking WireGuard-0.0.20180918.tar.xz to /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work
>>> Source unpacked in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work
>>> Preparing source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
>>> Source prepared.
>>> Configuring source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
>>> Source configured.
>>> Compiling source in /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918 ...
 * Preparing wireguard module
make -j2 HOSTCC=x86_64-pc-linux-gnu-gcc CROSS_COMPILE=x86_64-pc-linux-gnu- 'LDFLAGS=-m elf_x86_64' KERNELDIR=/usr/src/linux module 

  ERROR: Kernel configuration is invalid.
         include/generated/autoconf.h or include/config/auto.conf are missing.
         Run 'make oldconfig && make prepare' on kernel src to fix it.


  WARNING: Symbol version dump ./Module.symvers
           is missing; modules will have no dependencies and modversions.

make[2]: stat: include/config/auto.conf: Permission denied
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o
cc1: error: ./arch/x86/include/generated/uapi: Permission denied
cc1: error: ./include/generated/uapi: Permission denied
make[2]: *** [scripts/Makefile.build:317: /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o] Error 1
make[2]: *** Waiting for unfinished jobs....
cc1: error: ./arch/x86/include/generated/uapi: Permission denied
cc1: error: ./include/generated/uapi: Permission denied
make[2]: *** [scripts/Makefile.build:317: /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o] Error 1
make[1]: *** [Makefile:1504: _module_/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src] Error 2
make: *** [Makefile:36: module] Error 2
 * ERROR: net-vpn/wireguard-0.0.20180918::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=net-vpn/wireguard-0.0.20180918::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-vpn/wireguard-0.0.20180918::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/environment'.
 * Working directory: '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src'
 * S: '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918'

>>> Failed to emerge net-vpn/wireguard-0.0.20180918, Log file:

>>>  '/var/tmp/portage/net-vpn/wireguard-0.0.20180918/temp/build.log'




Comment 3


Sergey Popov (RETIRED)






          2018-09-24 07:18:39 UTC
        

Please provide emerge --info as suggested in Bug report guide[1]

[1] - https://wiki.gentoo.org/wiki/Bugzilla/Bug_report_guide




Comment 4


Einstok Fair





          2018-09-24 07:21:27 UTC
        

# emerge --info
Portage 2.3.49 (python 2.7.15-final-0, default/linux/amd64/17.0/systemd, gcc-7.3.0, glibc-2.26-r7, 4.17.4-gentoo x86_64)
=================================================================
System uname: Linux-4.17.4-gentoo-x86_64-Intel-R-_Xeon-R-_CPU_E5620_@_2.40GHz-with-gentoo-2.4.1
KiB Mem:      499436 total,     72080 free
KiB Swap:    1572856 total,   1157664 free
Timestamp of repository gentoo: Sun, 23 Sep 2018 18:00:01 +0000
Head commit of repository gentoo: 0e56e1b8697c635a2f534bb0375fc5383ba610f3
Head commit of repository dotnet: 832737d28766bd36de7f904a6e62a014b140b205

sh bash 4.4_p12
ld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1
app-shells/bash:          4.4_p12::gentoo
dev-lang/perl:            5.24.3-r1::gentoo
dev-lang/python:          2.7.15::gentoo, 3.6.5::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.22.4::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.69-r4::gentoo
sys-devel/automake:       1.13.4::gentoo, 1.14.1::gentoo, 1.15.1-r2::gentoo
sys-devel/binutils:       2.25.1-r1::gentoo, 2.26.1::gentoo, 2.30-r2::gentoo
sys-devel/gcc:            7.3.0-r3::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.26-r7::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-verify-jobs: 1
    sync-rsync-verify-metamanifest: yes
    sync-rsync-extra-opts: 
    sync-rsync-verify-max-age: 24

dotnet
    location: /var/lib/layman/dotnet
    sync-type: git
    sync-uri: https://github.com/ArsenShnurkov/dotnet.git
    masters: gentoo
    priority: 50

gitlab
    location: /var/lib/layman/gitlab
    masters: gentoo
    priority: 50

shnurise
    location: /var/lib/layman/shnurise
    masters: gentoo
    priority: 50

ACCEPT_KEYWORDS="amd64"
ACCEPT_LICENSE="* -@EULA"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /var/bind"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo"
CXXFLAGS="-O2 -pipe"
DISTDIR="/var/repo/distfiles"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs buildpkg config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
PKGDIR="/var/repo/binary"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="acl amd64 bzip2 cli crypt cxx dlz dri fortran gdbm iconv ipv6 libtirpc mmx modules multilib ncurses nls nptl openmp pam pcre postgres readline seccomp sse sse2 ssl systemd tcpd udev unicode xattr zlib" ABI_X86="64" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="karbon plan sheets stage words" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext sse sse2" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" INPUT_DEVICES="libinput keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6 php7-0" POSTGRES_TARGETS="postgres9_5 postgres10" PYTHON_SINGLE_TARGET="python3_6" PYTHON_TARGETS="python2_7 python3_6" RUBY_TARGETS="ruby21 ruby22 ruby23" USERLAND="GNU" VIDEO_CARDS="amdgpu fbdev intel nouveau radeon radeonsi vesa dummy v4l" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, LINGUAS, MAKEOPTS, PORTAGE_BINHOST, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 5


Einstok Fair





          2018-09-24 07:26:46 UTC
        

https://www.kernel.org/doc/Documentation/kbuild/modules.txt




Comment 6


Einstok Fair





          2018-09-24 07:32:33 UTC
        

/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src # make -C /usr/src/linux M=$PWD
make: Entering directory '/usr/src/linux-4.18.9-gentoo'

  WARNING: Symbol version dump ./Module.symvers
           is missing; modules will have no dependencies and modversions.

  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/device.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/peer.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/timers.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/queueing.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/send.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/receive.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/socket.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/hashtables.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/allowedips.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/ratelimiter.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/cookie.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/netlink.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/chacha20/chacha20.o
/bin/sh: scripts/genksyms/genksyms: No such file or directory
make[1]: *** [scripts/Makefile.build:318: /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/chacha20/chacha20.o] Error 127
make: *** [Makefile:1504: _module_/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src] Error 2
make: Leaving directory '/usr/src/linux-4.18.9-gentoo'




Comment 7


Einstok Fair





          2018-09-24 07:36:24 UTC
        

vps18754 /usr/src/linux # make prepare scripts
  CALL    scripts/checksyscalls.sh
  DESCEND  objtool
  HOSTCC  scripts/genksyms/genksyms.o
  YACC    scripts/genksyms/parse.tab.c
  HOSTCC  scripts/genksyms/parse.tab.o
  LEX     scripts/genksyms/lex.lex.c
  YACC    scripts/genksyms/parse.tab.h
  HOSTCC  scripts/genksyms/lex.lex.o
  HOSTLD  scripts/genksyms/genksyms
  CC      scripts/mod/empty.o
  HOSTCC  scripts/mod/mk_elfconfig
  MKELF   scripts/mod/elfconfig.h
  HOSTCC  scripts/mod/modpost.o
  CC      scripts/mod/devicetable-offsets.s
  UPD     scripts/mod/devicetable-offsets.h
  HOSTCC  scripts/mod/file2alias.o
  HOSTCC  scripts/mod/sumversion.o
  HOSTLD  scripts/mod/modpost
  HOSTCC  scripts/kallsyms
  HOSTCC  scripts/conmakehash
  HOSTCC  scripts/sortextable
vps18754 /usr/src/linux # make -C /usr/src/linux M=/var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src
make: Entering directory '/usr/src/linux-4.18.9-gentoo'

  WARNING: Symbol version dump ./Module.symvers
           is missing; modules will have no dependencies and modversions.

  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/main.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/noise.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/device.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/peer.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/timers.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/queueing.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/send.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/receive.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/socket.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/hashtables.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/allowedips.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/ratelimiter.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/cookie.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/netlink.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/chacha20/chacha20.o
  AS [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/chacha20/chacha20-x86_64.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/poly1305/poly1305.o
  AS [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/poly1305/poly1305-x86_64.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/chacha20poly1305.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/curve25519/curve25519.o
  CC [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/blake2s/blake2s.o
  AS [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/crypto/zinc/blake2s/blake2s-x86_64.o
  LD [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/wireguard.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/wireguard.mod.o
  LD [M]  /var/tmp/portage/net-vpn/wireguard-0.0.20180918/work/WireGuard-0.0.20180918/src/wireguard.ko
make: Leaving directory '/usr/src/linux-4.18.9-gentoo'




Comment 8


Einstok Fair





          2018-09-24 09:32:48 UTC
        

I also tried to compile form 4.18.9 kernel after reboot, but the error is still here

vps18754 ~ # uname -a
Linux vps18754.hostsailor.com 4.18.9-gentoo #1 SMP Mon Sep 24 08:27:54 UTC 2018 x86_64 Intel(R) Xeon(R) CPU E5620 @ 2.40GHz GenuineIntel GNU/Linux




Comment 9


Einstok Fair





          2018-09-24 10:03:57 UTC
        

solved with
https://forums.gentoo.org/viewtopic-t-1014732-start-0.html

cd /usr/src/linux
find . -type f -executable -exec chmod o+x,g+x {} \;
find . -type f -exec chmod o+r,g+r {} \;
find . -type d -exec chmod og+r,og+x {} \;









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

