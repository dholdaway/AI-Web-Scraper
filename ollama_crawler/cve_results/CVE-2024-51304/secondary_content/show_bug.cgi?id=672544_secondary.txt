Title: 672544 – =net-misc/ntp-4.2.8_p11 - src_prepare(): Failed Running aclocal !
URL: https://bugs.gentoo.org/show_bug.cgi?id=672544

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 672544
=net-misc/ntp-4.2.8_p11 - src_prepare(): Failed Running aclocal !
Last modified: 2018-12-07 22:07:21 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 672544 
      - =net-misc/ntp-4.2.8_p11 - src_prepare(): Failed Running aclocal !


Summary:
=net-misc/ntp-4.2.8_p11 - src_prepare(): Failed Running aclocal !
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2018-12-05 01:52 UTC by G.Wolfe Woodbury





      Modified:
    
2018-12-07 22:07 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



redwolfe









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge --info =net-misc/ntp-4.8.2_p11

              (einfo.txt,15.32 KB,
                text/plain)

            
2018-12-05 01:52 UTC,

            G.Wolfe Woodbury




Details





build.log

              (build.log,2.35 KB,
                text/plain)

            
2018-12-05 02:04 UTC,

            G.Wolfe Woodbury




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


G.Wolfe Woodbury





          2018-12-05 01:52:24 UTC
        

Created attachment 557098 [details]
emerge --info =net-misc/ntp-4.8.2_p11

ntp fails to compile or install (along with irqbalance among others) due to a failure of aclocal (automake) to properly find itself.

The main screen evidence is:
chroot.6:onyx /etc/init.d # emerge net-misc/ntp

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild  N     ] net-misc/ntp-4.2.8_p11::gentoo  USE="caps ipv6 readline ssl threads vim-syntax -debug -libressl -openntpd -parse-clocks -samba (-selinux) -snmp -zeroconf" 0 KiB

Total: 1 package (1 new), Size of downloads: 0 KiB

Would you like to merge these packages? [Yes/No] y
>>> Verifying ebuild manifests
>>> Emerging (1 of 1) net-misc/ntp-4.2.8_p11::gentoo
>>> Failed to emerge net-misc/ntp-4.2.8_p11, Log file:
>>>  '/var/log/portage/build/net-misc/ntp-4.2.8_p11:20181205-015004.log'
>>> Jobs: 0 of 1 complete, 1 failed                 Load avg: 0.54, 0.28, 0.16
 * Package:    net-misc/ntp-4.2.8_p11
 * Repository: gentoo
 * Maintainer: base-system@gentoo.org
 * USE:        abi_x86_64 amd64 caps elibc_glibc ipv6 kernel_linux readline ssl threads userland_GNU vim-syntax
 * FEATURES:   preserve-libs sandbox userpriv usersandbox
>>> Unpacking source...
>>> Unpacking ntp-4.2.8p11.tar.gz to /var/tmp/portage/net-misc/ntp-4.2.8_p11/work
>>> Unpacking ntp-4.2.8p11-manpages.tar.xz to /var/tmp/portage/net-misc/ntp-4.2.8_p11/work
>>> Source unpacked in /var/tmp/portage/net-misc/ntp-4.2.8_p11/work
>>> Preparing source in /var/tmp/portage/net-misc/ntp-4.2.8_p11/work/ntp-4.2.8p11 ...
 * Applying ntp-4.2.8-ipc-caps.patch ...
 [ ok ]
 * Applying ntp-4.2.8-sntp-test-pthreads.patch ...
 [ ok ]
 * Applying ntp-4.2.8_p10-fix-build-wo-ssl-or-libressl.patch ...
 [ ok ]
 * Running eautoreconf in '/var/tmp/portage/net-misc/ntp-4.2.8_p11/work/ntp-4.2.8p11/sntp/libevent' ...
 * Running libtoolize --install --copy --force --automake ...
 [ ok ]
 * Running aclocal -I m4 ...
 [ !! ]

 * Failed Running aclocal !
 * 
 * Include in your bugreport the contents of:
 * 
 *   /var/tmp/portage/net-misc/ntp-4.2.8_p11/temp/aclocal.out

 * ERROR: net-misc/ntp-4.2.8_p11::gentoo failed (prepare phase):
 *   Failed Running aclocal !
 * 
 * Call stack:
 *     ebuild.sh, line  124:  Called src_prepare
 *   environment, line 3103:  Called eautoreconf
 *   environment, line 1027:  Called eautoreconf
 *   environment, line 1027:  Called eautoreconf
 *   environment, line 1044:  Called eaclocal
 *   environment, line  824:  Called autotools_run_tool '--at-m4flags' 'aclocal' '-I' 'm4'
 *   environment, line  762:  Called die
 * The specific snippet of code:
 *           die "Failed Running $1 !";
 * 
 * If you need support, post the output of `emerge --info '=net-misc/ntp-4.2.8_p11::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=net-misc/ntp-4.2.8_p11::gentoo'`.
 * The complete build log is located at '/var/log/portage/build/net-misc/ntp-4.2.8_p11:20181205-015004.log'.
 * For convenience, a symlink to the build log is located at '/var/tmp/portage/net-misc/ntp-4.2.8_p11/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/net-misc/ntp-4.2.8_p11/temp/environment'.
 * Working directory: '/var/tmp/portage/net-misc/ntp-4.2.8_p11/work/ntp-4.2.8p11/sntp/libevent'
 * S: '/var/tmp/portage/net-misc/ntp-4.2.8_p11/work/ntp-4.2.8p11'
 * 
 * The following package has failed to build, install, or execute postinst:
 * 
 *  (net-misc/ntp-4.2.8_p11:0/0::gentoo, ebuild scheduled for merge), Log file:
 *   '/var/log/portage/build/net-misc/ntp-4.2.8_p11:20181205-015004.log'
 * 
chroot.6:onyx /etc/init.d #




Comment 1


G.Wolfe Woodbury





          2018-12-05 02:04:21 UTC
        

Created attachment 557100 [details]
build.log




Comment 2


Jeroen Roovers (RETIRED)






          2018-12-05 10:03:27 UTC
        

 * Include in your bugreport the contents of:
 * 
 *   /var/tmp/portage/net-misc/ntp-4.2.8_p11/temp/aclocal.out


Where is it?




Comment 3


G.Wolfe Woodbury





          2018-12-07 22:07:21 UTC
        

The error message in aclocal.out is:


aclocal-1.15: error: aclocal: file '/usr/share/aclocal/vala.m4' does not exist




BUT!!!!!

I went to build ntp-4.2.8_p11 again today, and it ran to completion
because it didn't fail this time. I can't get the aclocal.out file from today

Going to try irqbalance now









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

