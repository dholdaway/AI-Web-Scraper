Title: 95598 – Skype Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=95598

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 95598
Skype Segmentation fault
Last modified: 2006-03-17 11:35:27 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 95598 
      - Skype Segmentation fault


Summary:
Skype Segmentation fault
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gustavo Felisberto (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-06-09 12:09 UTC by DEMAINE Benoît-Pierre, aka DoubleHP





      Modified:
    
2006-03-17 11:35 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


DEMAINE Benoît-Pierre, aka DoubleHP





          2005-06-09 12:09:01 UTC
        

# emerge skype -vp
These are the packages that I would merge, in order:
Calculating dependencies ...done!
[ebuild   R   ] net-im/skype-1.1.0.13  +arts +esd -static 0 kB
Total size of downloads: 0 kB

$ /opt/skype/skype.bin --help
Segmentation fault

********************************************************* details:
I did put 

export MALLOC_CHECK_=0

everywhere it is required.

then:

$ skype
Running artsd found
Starting artsd wrapped skype
==========================================
/usr/bin/skype: line 50: 30057 Segmentation fault      ${skypecmd} ${progopts} >>${logfile} 2>>${logfile}

ok, so lets try without wrapper:
$ /opt/skype/skype.bin
Segmentation fault

not better :$

each time: it takes about 8 to 10s: the window pops up, tells it will login, then very fast it closes.

It takes about 4 to 5s before the window opens (as usual), then it shows up for less than 2s.

tail of
$ strace /opt/skype/skype.bin
stat64("/home/dhp/.Skype/doublehp/config.xml", {st_mode=S_IFREG|0755, st_size=58726, ...}) = 0
times({tms_utime=344, tms_stime=16, tms_cutime=0, tms_cstime=0}) = 439287544
times({tms_utime=344, tms_stime=16, tms_cutime=0, tms_cstime=0}) = 439287544
open("/home/dhp/.Skype/doublehp/config.lck", O_WRONLY|O_CREAT|O_LARGEFILE, 0777) = 7
fcntl64(7, F_SETLK, {type=F_WRLCK, whence=SEEK_SET, start=0, len=0}) = 0
stat64("/home/dhp/.Skype/doublehp/config.xml", {st_mode=S_IFREG|0755, st_size=58726, ...}) = 0
stat64("/home/dhp/.Skype/doublehp/config.xml", {st_mode=S_IFREG|0755, st_size=58726, ...}) = 0
open("/home/dhp/.Skype/doublehp/config.xml", O_RDONLY|O_LARGEFILE) = 8
fcntl64(8, F_SETLK, {type=F_RDLCK, whence=SEEK_SET, start=0, len=0}) = 0
lseek(8, 0, SEEK_CUR)                   = 0
_llseek(8, 0, [58726], SEEK_END)        = 0
lseek(8, 0, SEEK_SET)                   = 0
read(8, "<?xml version=\"1.0\"?>\n<config ve"..., 58726) = 58726
close(8)                                = 0
brk(0x89d7000)                          = 0x89d7000
brk(0x89d6000)                          = 0x89d6000
close(7)                                = 0
mmap2(NULL, 528384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb7c6f000
mprotect(0xb7c6f000, 4096, PROT_NONE)   = 0
clone(child_stack=0xb7cef524, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0xb7cefbf8, {entry_number:6, base_addr:0xb7cefbb0, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}, child_tidptr=0xb7cefbf8) = 30183
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000}, NULL)          = 0
nanosleep({0, 20000000},  <unfinished ...>
+++ killed by SIGSEGV +++

# emerge info
Portage 2.0.51.22-r1 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r0, 2.6.11.10-vs2.0-rc2_mercure_03_vs i686)
=================================================================
System uname: 2.6.11.10-vs2.0-rc2_mercure_03_vs i686 AMD Athlon(tm) 4 Processor
Gentoo Base System version 1.6.12
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
dev-lang/python:     2.3.5
sys-apps/sandbox:    1.2.8
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.5
sys-devel/binutils:  2.16-r1
sys-devel/libtool:   1.5.18
virtual/os-headers:  2.6.11-r1
ACCEPT_KEYWORDS="x86 ~x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -march=pentium3 -fomit-frame-pointer -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/share/config /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/texmf/web2c /etc/env.d"
CXXFLAGS="-O2 -march=pentium3 -fomit-frame-pointer -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="en_GB"
LC_ALL="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnowex X a52 aac aalib alsa apache2 apm arts avi bash-completion berkdb bitmap-fonts bzlib cairo caps cdr cle266 cmov crypt cups curl cx8 dba de directfb divx4linux djbfft doc dpms dts dv dvb dvd dvdread elf emacs emboss encode escreen esd ethereal fbcon ffmpeg fftw flac font-server foomaticdb fortran fpu fpx ftp fxsr gd gdbm gif gnutls gpm graphviz gstreamer gtk gtk2 hdf5 imagemagick imlib ipv6 java javascript jbig jpeg kerberos krb4 lcms ldap libcaca libclamav libg++ libwww lirc live lzo mad matroska matrox mbox mca mce mikmod mmap mmx mng motif mp3 mpeg mpi msr mtrr mysql mythtv ncurses network nls nptl objc odbc ogg oggvorbis opengl oss pae pam pam_chroot pam_console pam_timestamp pat pcre pdflib perl pge plotutils png pnp posix postgres pse pse36 pwdb python qt quicktime readline real rrdtool rtc ruby samba sasl sdl sendfile sep serial skey slang sndfile snmp speex spell sse ssl streamzap svga sysfs syslog sysvipc tcpd tetex tga theora threads tiff truetype truetype-fonts tsc type1-fonts unicode v4l v4l2 vcd vidix vim vme vorbis win32codecs wmf xanim xine xinerama xml xml2 xmlrpc xmms xpm xv xvid xvmc zlib userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LDFLAGS, LINGUAS, PORTDIR_OVERLAY

Used to work fine with OSS until last week, and 2days ago, I did my weekly emerge -u world ... then no more Skype :(




Comment 1


DEMAINE Benoît-Pierre, aka DoubleHP





          2005-06-13 12:28:45 UTC
        

as soon as I have seen that the version 1.1.0.13 broke out my box, and that the
service was not usable anymore, I stopped upgrading my Gentoo boxes.

Here is my workaround:

echo ">net-im/skype-1.1.0.3" >> /etc/portage/package.mask
emerge skype

so that I can downgrade to 1.1.0.3.

I tried to manually install the official version from skype.com, and it bugs on
both computers.




Comment 2


Gustavo Felisberto (RETIRED)






          2005-06-13 16:13:52 UTC
        

(In reply to comment #1)

> echo ">net-im/skype-1.1.0.3" >> /etc/portage/package.mask
> emerge skype

This is VERY wrong. This way you will never again see that there are updates to
skype. If you have problems with a particular version you should mask THAT version:

echo "=net-im/skype-1.1.0.13" >> /etc/portage/package.mask

As for the bug there is not much i can do as it does not seem gentoo related




Comment 3


Paweł Hajdan, Jr. (RETIRED)






          2005-07-02 03:02:43 UTC
        

Looks like a duplicate of bug 65042...




Comment 4


DEMAINE Benoît-Pierre, aka DoubleHP





          2005-07-02 04:26:39 UTC
        

no it is not 65042

65042 it the segfault when using the wrapper. I had that bug long time ago, then
I switched to non wrapped OSS.

my actual bug is a segfault WITHOUT wrapper !!!

I am aware that my workaround is VERY VERY dirty, but I nedded a very quick fix
at once, within 1h.

When I have time next week, I may remove my mask, and check whethen newer
version correct this or not.

I did not have time by that day to just mask the buggy version, and downgrade to
previous one ... and then to previous one if it did not work ... until falling
down to a sufficiently old and working one.

I masked down at once to a version I knew to work.




Comment 5


Jakub Moc (RETIRED)






          2006-03-17 10:20:03 UTC
        



*** This bug has been marked as a duplicate of 81255 ***




Comment 6


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-03-17 11:33:51 UTC
        

https://bugs.gentoo.org/show_bug.cgi?id=95598#c4
says:

> no it is not 65042

> 65042 it the segfault when using the wrapper. I had that bug long time ago, then
I switched to non wrapped OSS.

> my actual bug is a segfault WITHOUT wrapper !!!

thus this bug CAN NOT be a dup of https://bugs.gentoo.org/show_bug.cgi?id=81255 either.




Comment 7


DEMAINE Benoît-Pierre, aka DoubleHP





          2006-03-17 11:35:27 UTC
        

actual version net-im/skype-1.2.0.21-r1 works fine as OSS, so can close it 
(but cant close 'as dup of ARTS problem' )









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

