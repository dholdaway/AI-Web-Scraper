Title: 131975 – Can't start dhcp, possibly bash 3.1-related
URL: https://bugs.gentoo.org/show_bug.cgi?id=131975

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 131975
Can't start dhcp, possibly bash 3.1-related
Last modified: 2006-05-02 09:29:45 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 131975 
      - Can't start dhcp, possibly bash 3.1-related


Summary:
Can't start dhcp, possibly bash 3.1-related
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       major
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-05-01 19:42 UTC by Michael Pyne





      Modified:
    
2006-05-02 09:29 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Michael Pyne





          2006-05-01 19:42:58 UTC
        

When trying to start net.eth0, it errors out with the following:

broadway conf.d # /etc/init.d/net.eth0 start
 * Starting eth0
 *   Loading networking modules for eth0
 *     modules: apipa arping iptunnel macchanger macnet rename ifconfig system dhcpcd
 *       ifconfig provides interface
 *       dhcpcd provides dhcp
 *   Configuring eth0 for MAC address 00:0C:6E:DA:93:D4 ...                            [ ok ]
 *   Bringing up eth0
 *     "dhcp"
 *     No loaded modules provide ""dhcp"" ("dhcp"_start)                               [ !! ]

The reason I'm marking "major" is because this stops the internet service from loading (although you can run dhcpcd manually and workaround).

The problem seems to be that dhcp is stored as "dhcp" (with the quotes) for some reason. The following patch fixes the problem for me:

--- net.eth0    2006-05-01 22:25:40.000000000 -0400
+++ net.eth0.new        2006-05-01 22:25:36.000000000 -0400
@@ -607,6 +607,7 @@
                # We convert it to an array - this has the added
                # bonus of trimming spaces!
                conf=( ${config[config_counter]} )
+               conf[0]=`echo ${conf[0]} | sed -e s/\"//g`
                einfo "${conf[0]}"

                # Do we have a function for our config?

The system started up fine just a day ago and had been running since.  So I suspected an issue with an installed ebuild and the only ones I've installed were these:

app-shells/bash-3.1_p16
dev-python/pycrypto-2.0.1-r5
sys-apps/portage-2.1_pre10
app-admin/logrotate-3.7.1-r2
net-misc/dhcpcd-2.0.3 (not an upgrade, this was me troubleshooting)

emerge --info output:
Portage 2.1_pre10 (default-linux/x86/2006.0, gcc-4.0.3, glibc-2.3.5-r3, 2.6.16.11 i686)
=================================================================
System uname: 2.6.16.11 i686 AMD Athlon(TM) XP 2600+
Gentoo Base System version 1.12.0_pre11
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [disabled]
ccache version 2.3 [enabled]
dev-lang/python:     2.4.2
dev-util/ccache:     2.3
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.11
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.91.0.7
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.11-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-xp -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/X11R6/lib/X11/xkb /usr/kde/2/share/config /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/kde/3/share/config /usr/share/X11/xkb /usr/share/config /var/qmail/alias /var/qmail/control /var/vpopmail/domains /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/eselect/compiler /etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-xp -pipe -fvisibility-inlines-hidden"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks metadata-transfer parallel-fetch sandbox sfperms strict"
GENTOO_MIRRORS="http://gentoo.osuosl.org/ http://csociety-ftp.ecn.purdue.edu/pub/gentoo/ ftp://csociety-ftp.ecn.purdue.edu/pub/gentoo/ ftp://mirror.iawnet.sandia.gov/pub/gentoo/ http://gentoo.seren.com/gentoo http://gentoo.chem.wisc.edu/gentoo/ http://gentoo.mirrors.tds.net/gentoo http://open-systems.ufl.edu/mirrors/gentoo http://mirror.datapipe.net/gentoo http://mirror.usu.edu/mirrors/gentoo/ http://lug.mtu.edu/gentoo http://mirror.phy.olemiss.edu/mirror/gentoo"
LC_ALL="en_US.utf8"
MAKEOPTS="-j2"
PKGDIR="/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 3dnow 3dnowext X aac acl acpi alsa apache2 apm arts artswrappersuid avi berkdb bzip2 cairo cdparanoia cli crypt cups curl dga dri dv dvd emboss encode fam fbcon ffmpeg firefox flac fontconfig foomaticdb freetype gdbm gif glitz gstreamer gtk gtk2 hal ieee1394 imagemagick imap imlib ipv6 isdnlog ithreads java jikes joystick jpeg kde kdeenablefinal kig-scripting libg++ libwww live lm_sensors logitech-mouse mad maildir memlimit mikmod mmx mmx2 mmxext mozilla mozsvg mp3 mpeg mpm-prefork musicbrainz ncurses nptl nsplugin ogg openal opengl oss pam pcre pdf pdflib perl pic png pppd profile python qt quicktime readline real reflection rtc ruby samba sdl session spell spl sse sse2 ssl tcpd theora threads truetype truetype-fonts udev unicode usb utf8 vim-with-x visualization vorbis win32codecs xcomposite xml xorg xscreensaver xv xvid zlib elibc_glibc input_devices_mouse input_devices_keyboard input_devices_evdev kernel_linux userland_GNU video_cards_ati"
Unset:  ASFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, LINGUAS




Comment 1


Roy Marples (RETIRED)






          2006-05-02 09:29:45 UTC
        

(In reply to comment #0)
> Gentoo Base System version 1.12.0_pre11

Try using a version of baselayout that is in portage, like say baselayout-1.12.0_pre19-r1









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

