Title: 261467 – sys-apps/groff-1.20.1-r1 breaks man page formatting of top (from sys-process/procps-3.2.7)
URL: https://bugs.gentoo.org/show_bug.cgi?id=261467

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 261467
sys-apps/groff-1.20.1-r1 breaks man page formatting of top (from sys-process/procps-3.2.7)
Last modified: 2012-01-31 15:43:51 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 261467 
      - sys-apps/groff-1.20.1-r1 breaks man page formatting of top (from sys-process/procps-3.2.7)


Summary:
sys-apps/groff-1.20.1-r1 breaks man page formatting of top (from sys-process/...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       minor
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:









Duplicates (1):
    

278124

      (view as bug list)
    


Depends on:







Blocks:









 





      Reported:
    
2009-03-06 17:03 UTC by Horst Prote





      Modified:
    
2012-01-31 15:43 UTC
      (History)
    




          CC List:
        

4 
          users
          
            (show)
          



bugs.gentoo.org
richard.adam
shepmaster
toralf









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Horst Prote





          2009-03-06 17:03:38 UTC
        

Since I upgraded from groff-1.19.2-r3 to version 1.20.1-r1 the man page of top shows a broken bold "top":
SYNOPSIS
       <>
        -hv | -bcHisS -d delay -n iterations -p pid [, pid ...]
...
DESCRIPTION
       The .ie 0 .    br
        program provides a dynamic real-time view of a running system.  It can display
...
       encompassing every aspect of its operation.  And while .ie 0 .    br
        is referred to throughout this document, you are free to name the program any-

Also a "man top" writes two errors to stderr:
<standard input>:100: environment stack underflow
<standard input>:110: environment stack underflow

Oddly enough a "bzcat /usr/share/man/man1/top.1.bz2 | groff -mtty-char -Tlatin1 -mandoc" formats the man page in the same way but writes to stderr:
<standard input>:97: environment stack underflow
<standard input>:107: environment stack underflow

I then played with a local copy of the bunzipped top.1 and found
- the bold "top" is defined as string variable ME in the line ".ds mE \fBtop\fR"
- it's used as "\*(ME" in lines 88, 97, 107
- if I rename it to MM or mE and view the man page through
  "groff -mtty-char -Tlatin1 -mandoc top.1 | less" it's correctly formatted.
- if I delete the line ".ds mE \fBtop\fR" the man page is formatted as by "man top" only the line numbers in the "environment stack underflow" errors are decreased ny one:
top.1:96: environment stack underflow
top.1:106: environment stack underflow




Reproducible: Always

Steps to Reproduce:




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2009-03-06 17:09:47 UTC
        

Reassigning to base-system herd.




Comment 2


Lars Wendler (Polynomial-C) (RETIRED)






          2009-07-17 10:05:02 UTC
        

*** Bug 278124 has been marked as a duplicate of this bug. ***




Comment 3


William Waisse





          2010-08-03 16:36:00 UTC
        

same here, also on man top , 
always reproducible on man top,
never on man bash or others

[ebuild   R   ] app-shells/bash-4.0_p37  USE="net nls -afs -bashlogger
-examples -mem-scramble -plugins -vanilla" 0 kB
[ebuild   R   ] sys-apps/groff-1.20.1-r1  USE="X -examples" LINGUAS="(-ja)" 0
kB

seems related to :
http://bugs.gentoo.org/show_bug.cgi?id=266272




Comment 4


Horst Prote





          2012-01-31 15:43:51 UTC
        

Seems this is fixed in sys-apps/groff-1.21 as I can't reproduce it anymore.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

