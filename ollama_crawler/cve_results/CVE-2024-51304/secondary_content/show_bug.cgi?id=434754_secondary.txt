Title: 434754 – dev-perl/SGMLSpm not pulled in by "emerge --deep app-text/docbook-sgml-utils"
URL: https://bugs.gentoo.org/show_bug.cgi?id=434754

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 434754
dev-perl/SGMLSpm not pulled in by "emerge --deep app-text/docbook-sgml-utils"
Last modified: 2012-10-26 16:14:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 434754 
      - dev-perl/SGMLSpm not pulled in by "emerge --deep app-text/docbook-sgml-utils"


Summary:
dev-perl/SGMLSpm not pulled in by "emerge --deep app-text/docbook-sgml-utils"
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] GNOME

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2012-09-11 19:30 UTC by bugzilla.10.cyrils





      Modified:
    
2012-10-26 16:14 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



mathieu
tetromino









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


bugzilla.10.cyrils





          2012-09-11 19:30:05 UTC
        

Hello,

gnome-extra/gnome-power-manager and gnome-extra/gnome-color-manager fails to build on docbook2man operations without dev-perl/SGMLSpm installed - which is, however, not a dependency for these gnome-extra packages or app-text/docbook-sgml-utils.

Best regards,
Cyril




Comment 1


Alexandre Rostovtsev (RETIRED)






          2012-09-11 20:59:29 UTC
        

app-text/docbook-sgml-utils-0.6.14-r1 does depend on dev-perl/SGMLSpm:

DEPEND=">=dev-lang/perl-5
        app-text/docbook-dsssl-stylesheets
        app-text/openjade
        dev-perl/SGMLSpm
        ~app-text/docbook-xml-simple-dtd-4.1.2.4
        ~app-text/docbook-xml-simple-dtd-1.0
        app-text/docbook-xml-dtd
        ~app-text/docbook-sgml-dtd-3.0
        ~app-text/docbook-sgml-dtd-3.1
        ~app-text/docbook-sgml-dtd-4.0
        ~app-text/docbook-sgml-dtd-4.1
        jadetex? ( app-text/jadetex )
        userland_GNU? ( sys-apps/which )
        || (
                www-client/lynx
                www-client/links
                www-client/elinks
                virtual/w3m )"
RDEPEND="${DEPEND}"

To ensure that all indirect dependencies are properly pulled in, you may want to run emerge with the "--deep" option. Otherwise, you need to take care not to unmerge any packages that might are a dependency of something else.

Since dev-perl/SGMLSpm is a perl module, it's possible that you did in fact have it installed, but you just needed to re-emerge it because you had forgotten to run perl-cleaner after upgrading dev-lang/perl.




Comment 2


bugzilla.10.cyrils





          2012-09-12 06:15:55 UTC
        

Hi Alexandre,

OK, I have really did not checked ebuild for app-text/docbook-sgml-utils - it is correct and it's my fault.

But there is still a problem: I have been using emerge exactly with --deep - but it did not built dev-perl/SGMLSpm even emerge --search shown that it is not installed. What's the problem here?




Comment 3


Alexandre Rostovtsev (RETIRED)






          2012-09-12 06:34:54 UTC
        

It seems that until April 2012, docbook-sgml-utils-0.6.14-r1 contained an error; it set dev-perl/SGMLSpm as a build dependency but not as a runtime dependency. See http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/app-text/docbook-sgml-utils/docbook-sgml-utils-0.6.14-r1.ebuild?r1=1.9&r2=1.10

If you had installed docbook-sgml-utils-0.6.14-r1 before April 2012, portage would have cached a copy of the ebuild. (That cached copy is needed to allow portage to uninstall a package even if its ebuild is removed from the tree.)

Perhaps there was a bug (or misfeature?) in portage that caused the broken cached ebuild to be used for "emerge --deep" dependency calculations instead of the corrected ebuild in the tree.

I am reopening the bug and reassigning it to portage maintainers; maybe they can give you a better answer.




Comment 4


Zac Medico






          2012-09-12 06:54:56 UTC
        

(In reply to comment #3)
> Perhaps there was a bug (or misfeature?) in portage that caused the broken
> cached ebuild to be used for "emerge --deep" dependency calculations instead
> of the corrected ebuild in the tree.

Possible explanations:

 1) The user still has not synced since the ebuild in the tree got fixed.
 2) The users specified --dynamic-deps=n in order to use the deps of the
    installed ebuild.




Comment 5


bugzilla.10.cyrils





          2012-09-12 07:12:12 UTC
        

1) No, I'm syncing almost every time before update or emerge new package;
2) I have not specified --dynamic-deps=n ever.

If it would be useful I can remove dev-perl/SGMLSpm and app-text/docbook-sgml-utils and try to re-emerge it with --deep to get additional info. In this case I need assistance in collecting info You need.




Comment 6


Zac Medico






          2012-09-12 07:20:30 UTC
        

Please attach a debug log for the command that does not behave as you expect:

   emerge [args] --debug &>debug.log




Comment 7


bugzilla.10.cyrils





          2012-09-12 07:43:27 UTC
        

(In reply to comment #6)
> Please attach a debug log for the command that does not behave as you expect:
> 
>    emerge [args] --debug &>debug.log

Hmm... I have a problem reproducing this. I've just tried to unmerge dev-perl/SGMLSpm, app-text/docbook-sgml-utils and gnome-extra/gnome-power-manager, and now 'emerge -uDN gnome-power-manager' assigns dev-perl/SGMLSpm to the build queue. 

I suppose that if I will not find the way to rollback the system to yesterday's state and reproduce the problem in a day, we can count it as an accident and it can be closed.

I will keep You informed.




Comment 8


qdii





          2012-09-13 13:10:04 UTC
        

I can’t build either.
Here is my build information:

emerge log (without debug): http://bpaste.net/show/45263/
emerge log (with debug):  http://bpaste.net/show/45264/
emerge info: http://bpaste.net/show/45266/

After a first failed attempt, I re-emerged app-text/docbook-sgml-dtd-4.5 and dev-perl/SGMLSpm. Neither helped. Emerging app-text/docbook-sgml-utils did not help either.

I am still stuck with a broken package, and ready to give more information if necessary.




Comment 9


Zac Medico






          2012-09-13 17:30:31 UTC
        

Fails even with dev-perl/SGMLSpm installed? I guess that's not a portage problem then.




Comment 10


Alexandre Rostovtsev (RETIRED)






          2012-09-13 18:00:15 UTC
        

(In reply to comment #8)
qdii, your issue is completely unrelated. I opened a separate bug report for it: bug #434932. Please continue further discussion there.

(In reply to comment #9)
I am renaming this bug so it scope is more clear.




Comment 11


Zac Medico






          2012-09-13 18:11:48 UTC
        

If you can reproduce the problem where emerge does not properly pull in dev-perl/SGMLSpm then please re-open and attach a debug log created as follows:

  emerge --pretend --debug [arguments] &>debug.log




Comment 12


Vetoll





          2012-09-19 21:22:29 UTC
        

Hi,

After emerging dev-perl/SGMLSpm manually, my gnome-color-manager was finally able to compile.

Regards









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

