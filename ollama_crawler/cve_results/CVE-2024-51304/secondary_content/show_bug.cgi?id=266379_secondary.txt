Title: 266379 – ebuild command always recreates WORKDIR
URL: https://bugs.gentoo.org/show_bug.cgi?id=266379

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 266379
ebuild command always recreates WORKDIR
Last modified: 2022-07-28 04:54:13 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 266379 
      - ebuild command always recreates WORKDIR


Summary:
ebuild command always recreates WORKDIR
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Portage Development




Classification:

Unclassified




Component:

Core

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Portage team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-16 13:42 UTC by Burak Arslan





      Modified:
    
2022-07-28 04:54 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



burak.arslan
serkan









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Burak Arslan





          2009-04-16 13:42:42 UTC
        

ebuild ebuild.ebuild unpack always recreates workdir.

Reproducible: Always

Steps to Reproduce:
1.ebuild /usr/portage/sys-devel/gdb/gdb-6.8-r1.ebuild unpack   
2.ebuild /usr/portage/sys-devel/gdb/gdb-6.8-r1.ebuild unpack   
3.
(...)
Actual Results:  
>>> Existing ${T}/environment for 'gdb-6.8-r1' will be sourced. Run
>>> 'clean' to start with a fresh environment.
 * gdb-6.8.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                                                 [ ok ]
 * gdb-6.8-patches-1.4.tar.lzma RMD160 SHA1 SHA256 size ;-) ...                                                                    [ ok ]
 * checking ebuild checksums ;-) ...                                                                                               [ ok ]
 * checking auxfile checksums ;-) ...                                                                                              [ ok ]
 * checking miscfile checksums ;-) ...                                                                                             [ ok ]
 * checking gdb-6.8.tar.bz2 ;-) ...                                                                                                [ ok ]
 * checking gdb-6.8-patches-1.4.tar.lzma ;-) ...                                                                                   [ ok ]
>>> Checking gdb-6.8.tar.bz2's mtime...
>>> Checking gdb-6.8-patches-1.4.tar.lzma's mtime...
>>> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...
>>> Unpacking source...
>>> Unpacking gdb-6.8.tar.bz2 to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
>>> Unpacking gdb-6.8-patches-1.4.tar.lzma to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
 * Applying various patches (bugfixes/updates) ...
 *   05_all_readline-headers.patch ...                                                                                              [ ok ]
 *   10_all_gdb-6.6-duel.patch ...                                                                                                  [ ok ]
 *   11_all_gdb-6.6-duel-integrate.patch ...                                                                                        [ ok ]
 *   20_all_gdb-tdep-opcode-include-workaround.patch ...                                                                            [ ok ]
 *   35_all_gdb-6.3-security-errata-20050610.patch ...                                                                              [ ok ]
 *   50_all_gdb-pie-1.patch ...                                                                                                     [ ok ]
 *   50_all_gdb-pie-2.patch ...                                                                                                     [ ok ]
 *   80_all_gdb-6.5-dwarf-stack-overflow.patch ...                                                                                  [ ok ]
 * Done with patching
>>> Source unpacked in /var/tmp/portage/sys-devel/gdb-6.8-r1/work


Expected Results:  
>>> Existing ${T}/environment for 'gdb-6.8-r1' will be sourced. Run
>>> 'clean' to start with a fresh environment.
 * gdb-6.8.tar.bz2 RMD160 SHA1 SHA256 size ;-) ...                                                                                 [ ok ]
 * gdb-6.8-patches-1.4.tar.lzma RMD160 SHA1 SHA256 size ;-) ...                                                                    [ ok ]
 * checking ebuild checksums ;-) ...                                                                                               [ ok ]
 * checking auxfile checksums ;-) ...                                                                                              [ ok ]
 * checking miscfile checksums ;-) ...                                                                                             [ ok ]
 * checking gdb-6.8.tar.bz2 ;-) ...                                                                                                [ ok ]
 * checking gdb-6.8-patches-1.4.tar.lzma ;-) ...                                                                                   [ ok ]
>>> Checking gdb-6.8.tar.bz2's mtime...
>>> Checking gdb-6.8-patches-1.4.tar.lzma's mtime...
>>> WORKDIR is up to date (or something similar)




Comment 1


Burak Arslan





          2009-04-16 13:43:15 UTC
        

Portage 2.1.6.11 (default/linux/x86/2008.0, gcc-4.3.2, glibc-2.8_p20080602-r1, 2.6.27-gentoo-r8 i686)
=================================================================
System uname: Linux-2.6.27-gentoo-r8-i686-Intel-R-_Core-TM-2_Duo_CPU_P8400_@_2.26GHz-with-glibc2.0
Timestamp of tree: Thu, 09 Apr 2009 04:30:04 +0000
app-shells/bash:     3.2_p39
dev-java/java-config: 1.3.7-r1, 2.1.7
dev-lang/python:     2.5.2-r7
dev-python/pycrypto: 2.0.1-r8
dev-util/cmake:      2.6.3-r1
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.63
sys-devel/automake:  1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias"
ARCH="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -O2 -pipe -mno-tls-direct-seg-refs"
CG_COMPILER_EXE="/opt/bin/cgc"
CHOST="i686-pc-linux-gnu"
CLASSPATH="."
CLEAN_DELAY="5"
COLLISION_IGNORE="/lib/modules"
COLORTERM=""
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CVS_RSH="ssh"
CXXFLAGS="-march=pentium4 -O2 -pipe -mno-tls-direct-seg-refs"
DBUS_SESSION_BUS_ADDRESS="unix:abstract=/tmp/dbus-AV9RPtj8Ml,guid=4c8b7a670a9251a3fef0b71249e6e7ee"
DESKTOP_SESSION="kde-3.5"
DISPLAY=":0"
DISTDIR="/usr/portage/distfiles"
EDITOR="/bin/nano"
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="--verbose --nospinner"
EMERGE_WARNING_DELAY="10"
FEATURES="distlocks fixpackages parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
FLTK_DOCDIR="/usr/share/doc/fltk-1.1.7-r2/html"
GCC_SPECS=""
GDK_USE_XFT="1"
GDMSESSION="kde-3.5"
GDM_LANG="C"
GDM_XSERVER_LOCATION="local"
GENERATION="2"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
GS_LIB="/home/plq/.fonts"
GTK2_RC_FILES="/etc/gtk-2.0/gtkrc:/home/plq/.gtkrc-2.0:/home/plq/.kde3.5/share/config/gtkrc-2.0"
GTK_RC_FILES="/etc/gtk/gtkrc:/home/plq/.gtkrc:/home/plq/.kde3.5/share/config/gtkrc"
HOME="/root"
INFOPATH="/usr/share/info:/usr/share/binutils-data/i686-pc-linux-gnu/2.18/info:/usr/share/gcc-data/i486-pc-linux-gnu/4.1.2/info:/usr/share/gcc-data/i686-pc-linux-gnu/4.3.2/info:/usr/share/info/emacs-22"
INPUT_DEVICES="wacom synaptics keyboard mouse evdev joystick"
JAVAC="/home/plq/.gentoo/java-config-2/current-user-vm/bin/javac"
JAVA_HOME="/home/plq/.gentoo/java-config-2/current-user-vm"
JDK_HOME="/home/plq/.gentoo/java-config-2/current-user-vm"
KDEDIR="/usr/kde/3.5"
KDEDIRS="/usr:/usr/local:/usr/kde/3.5"
KDE_FULL_SESSION="true"
KDE_IS_PRELINKED="1"
KDE_MULTIHEAD="false"
KDE_SESSION_UID="1000"
KERNEL="linux"
KONSOLE_DCOP="DCOPRef(konsole-15944,konsole)"
KONSOLE_DCOP_SESSION="DCOPRef(konsole-15944,session-9)"
LADSPA_PATH="/usr/lib/ladspa"
LANG="C"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LC_CTYPE="en_US.utf8"
LDFLAGS="-Wl,-O1"
LDPATH="/usr/kde/3.5/lib:"
LESS="-R -M --shift 5"
LESSOPEN="|lesspipe.sh %s"
LINGUAS="en en_US tr fr ja"
LOGNAME="root"
LS_COLORS="no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.svgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:"
MAKEOPTS="-j3"
MANPATH="/home/plq/.gentoo/java-config-2/current-user-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/i686-pc-linux-gnu/2.18/man:/usr/share/gcc-data/i486-pc-linux-gnu/4.1.2/man:/usr/share/gcc-data/i686-pc-linux-gnu/4.3.2/man:/opt/blackdown-jdk-1.4.2.03/man:/etc/java-config/system-vm/man/:/usr/lib/php5/man/:/usr/kde/3.5/share/man:/usr/qt/3/doc/man:/usr/share/postgresql-8.3/man:/opt/nvidia-cg-toolkit/man:/opt/opera/share/man:/opt/cuda/man"
NETBEANS="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler soa visualweb webcommon websvccommon xml"
OLDPWD="/var/tmp/portage/sys-devel/gdb-6.8-r1/work"
OPENGL_PROFILE="nvidia"
PAGER="/usr/bin/less"
PATH="/sbin:/bin:/usr/sbin:/usr/bin"
PKGDIR="/usr/portage/packages"
PKG_CONFIG_PATH="/usr/qt/3/lib/pkgconfig"
PORTAGE_ARCHLIST="ppc s390 amd64 x86 ppc64 x86-fbsd m68k arm sparc sh mips ia64 alpha hppa amd64-fbsd sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib/portage/bin"
PORTAGE_COMPRESS_EXCLUDE_SUFFIXES="css gif htm[l]? jp[e]?g js pdf png"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="info warn error log"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="syslog"
PORTAGE_FETCH_CHECKSUM_TRY_MIRRORS="5"
PORTAGE_FETCH_RESUME_MIN_SIZE="350K"
PORTAGE_GID="250"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_NICENESS="10"
PORTAGE_PYM_PATH="/usr/lib/portage/pym"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_VERBOSE="1"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sipx /usr/portage/local/layman/sunrise /usr/local/portage"
PROFILE_ONLY_VARIABLES="ARCH ELIBC KERNEL USERLAND"
PWD="/usr/portage/distfiles"
QMAKESPEC="linux-g++"
QTDIR="/usr/qt/3"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
ROOT="/"
ROOTPATH="/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/i686-pc-linux-gnu/arm-unknown-linux-gnu/gcc-bin/4.1.2:/usr/i486-pc-linux-gnu/gcc-bin/4.1.2:/usr/i686-pc-linux-gnu/i686-mingw32/gcc-bin/4.3.3:/usr/i686-pc-linux-gnu/gcc-bin/4.3.2:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/qt/3/bin:/opt/firebird/bin:/usr/games/bin:/opt/cuda/bin"
RPMDIR="/usr/portage/rpm"
RUBYOPT="-rauto_gem"
R_HOME="/usr/lib/R"
SANE_CONFIG_DIR="/etc/sane.d"
SESSION_MANAGER="local/iskembe:/tmp/.ICE-unix/15894"
SGML_CATALOG_FILES="/etc/sgml/sgml-docbook.cat:/etc/sgml/sgml-ent.cat:/etc/sgml/xml-docbook-4.4.cat:/etc/sgml/dsssl-docbook-stylesheets.cat:/etc/sgml/sgml-docbook-3.1.cat:/etc/sgml/openjade-1.3.2.cat:/etc/sgml/sgml-lite.cat"
SHELL="/bin/bash"
SHLVL="3"
SSH_AGENT_PID="15834"
SSH_AUTH_SOCK="/tmp/ssh-QgQtw15810/agent.15810"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
TERM="xterm"
TEXINPUTS="/usr/lib/ocaml/ocamldoc:"
USB_DEVFS_PATH="/dev/bus/usb"
USE="7zip X Xaw3d a52 aac aalib accessibility acl acpi ada alias alsa amrnb amrwb anthy apache2 autocreate automount autosieve avahi bash-completion berkdb bidi bindist bitmap-fonts bl blas blender-game bluetooth blx bzip2 cairo canna cddb cdio cdparanoia cli connectionstatus contactnotes context cracklib crypt css ctype cups cupsddk curl cvs daap dbus dc1394 dga dirac directfb dmx dri dts dv dvb dvd dvdnav dvdr dvdread emacs emovix enca encode esd ev examples exif expat extra extrafilters fame fasttrack fax fbcon ffmpeg fftw firebird firefox flac flash flatfile fltk fontconfig foomaticdb fortran fpx ftp gadu games gd gdal gdbm geos ggi gif gimp gimpprint gmp gnutella gnutls gpgme gpm graphics graphviz groupwise gs gstreamer hal hash hdri highlight history hpn humanities iconv icu idn ieee1394 imagemagick imap imlib immqt-bc ipv6 irc isdnlog jack jadetex java javascript jbig jingle joystick jpeg jpeg2k kde kerberos keyscrub kpathsea ladspa lapack laptop latex lcms ldap lesstif libcaca libnotify live logrotate loop-aes lua lzo mad md5sum mdnsresponder-compat meanwhile midi mmx mmxext mng mozdevelop mp2 mp3 mpeg mpi mplayer msn mudflap musepack music musicbrainz mysql nas ncurses neXt nemesi netmeeting network networking networkmanager nls nntp nodrm nptl nptlonly nsplugin nvidia ogg omega opanal openal openct openexr opengl openmp opensc openvpn overlays pam pbs pcre pcsc-lite pdf perl pgf php plotutils png pnm pop posix postgis postgres postscript ppds pppd prediction proj pstricks publishers pulseaudio pyste python q32 qq qt qt3 qt3support qt4 quicktime quotas radio rar rdesktop readline reflection replication rogue samba sametime sasl scanner schroedinger science screnarios sdl sdl-image seamonkey server session shout silc skins slang slp smartcard smp sms smtp sndfile soap sockets sound speex spell spl sql sqlite srt sse sse2 ssl ssse3 startup-notification statistics stream subversion svg swat sysfs syslog sysvipc tcpd teamarena teletext tetex tex4ht texteffect tga theora thunderbird tiff tivo tk tools truetype truetype-fonts type1 type1-fonts unicode usb utempter v4l v4l2 vcd vidix visualization vnc vorbis webdav webkit win32codecs winpopup wmf wxwindows x264 x86 xanim xatrix xcb xchatdccserver xetex xforms xft xine xinerama xml xmlreader xmlrpc xmlwriter xorg xpm xqilla xscreensaver xsl xulrunner xv xvid xvmc yahoo zip zlib zoran" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="wacom synaptics keyboard mouse evdev joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_US tr fr ja" USERLAND="GNU" VIDEO_CARDS="fbdev glint i810 intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa vga via vmware voodoo"
USER="root"
USERLAND="GNU"
USERNAME="plq"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS NETBEANS_MODULES USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:env.d"
VIDEO_CARDS="fbdev glint i810 intel mach64 mga neomagic nv r128 radeon savage sis tdfx trident vesa vga via vmware voodoo"
VMHANDLE="blackdown-jdk-1.4.2"
WINDOWID="33554437"
WINDOWPATH="7"
XAUTHORITY="/root/.xauth54OMCY"
XCURSOR_THEME="none"
XDG_CONFIG_DIRS="/usr/kde/3.5/etc/xdg"
XDG_DATA_DIRS="/usr/share:/usr/kde/3.5/share:/usr/local/share"
XERCESC_NLS_HOME="/usr/share/xerces-c/msg"
_="/usr/bin/emerge"





Comment 2


Jeroen Roovers (RETIRED)






          2009-04-20 15:58:41 UTC
        

This is currently a feature and not a bug. Could you please rephrase the Summary to describe a problem or desire rather than the status quo, and explain it in a Comment?




Comment 3


Jeroen Roovers (RETIRED)






          2009-04-20 16:00:45 UTC
        

Hmm, wait, ebuild unpack does in fact not re-unpack when WORKDIR exists. Is it the case that you would like it to clean all by itself when unpack is called the second time?




Comment 4


Burak Arslan





          2009-04-20 16:15:05 UTC
        

(In reply to comment #3)
> Hmm, wait, ebuild unpack does in fact not re-unpack when WORKDIR exists. Is it
> the case that you would like it to clean all by itself when unpack is called
> the second time?
> 

no, first ebuild unpack creates the environment. the second should not re-create it but it does, claiming 

gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...

whereas it was not updated.






Comment 5


Burak Arslan





          2009-04-20 16:17:20 UTC
        

(In reply to comment #4)
> (In reply to comment #3)
> > Hmm, wait, ebuild unpack does in fact not re-unpack when WORKDIR exists. Is it
> > the case that you would like it to clean all by itself when unpack is called
> > the second time?
> > 
> 
> no, first ebuild unpack creates the environment. the second should not
> re-create it but it does, claiming 
> 
> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...
> 
> whereas it was not updated.
> 

and the use case for this is that i'd like to test a patch with gdb. i'd like to be able to 

1. ebuild unpack
2. edit to my pleasure
3. ebuild merge

so that it merges gdb re-patched by myself.




Comment 6


Jeremy Olexa (darkside) (RETIRED)








          2009-04-22 13:21:49 UTC
        

Yes, portage will recreate the workdir if you modify a patch.

>>> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...

I don't know why it is a big deal to have a new workdir in this case?




Comment 7


Burak Arslan





          2009-04-22 16:00:30 UTC
        

(In reply to comment #6)
> Yes, portage will recreate the workdir if you modify a patch.
> 
> >>> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...
> 
> I don't know why it is a big deal to have a new workdir in this case?
> 

I'm NOT modifying that file. it's NOT updated. Its mtime is the same as before. But for some reason ebuild command thinks it's updated and recreates the WORKDIR. I think it is a bug. I repeat, I'm NOT updating the said file. It's NOT updated by anthing or anyone, but ebuild command thinks it is.

here's another log (i put extra newlines to increase readability somewhat):

 # ll /usr/portage/distfiles/gdb-6.8*
-rw-rw-r-- 1 portage portage   122922 Feb 23 08:10 /usr/portage/distfiles/gdb-6.8-patches-1.4.tar.lzma
-rw-rw-r-- 1 portage portage 15581509 Mar 27  2008 /usr/portage/distfiles/gdb-6.8.tar.bz2
iskembe plq # ebuild /usr/portage/sys-devel/gdb/gdb-6.8-r1.ebuild unpack
>>> Existing ${T}/environment for 'gdb-6.8-r1' will be sourced. Run
>>> 'clean' to start with a fresh environment.
 * gdb-6.8.tar.bz2 RMD160 SHA1 SHA256 size ;-)                           [ ok ]
 * gdb-6.8-patches-1.4.tar.lzma RMD160 SHA1 SHA256 size ;-)              [ ok ]
 * checking ebuild checksums ;-)                                         [ ok ]
 * checking auxfile checksums ;-)                                        [ ok ]
 * checking miscfile checksums ;-)                                       [ ok ]
 * checking gdb-6.8.tar.bz2 ;-)                                          [ ok ]
 * checking gdb-6.8-patches-1.4.tar.lzma ;-)                             [ ok ]
>>> Checking gdb-6.8.tar.bz2's mtime...
>>> Checking gdb-6.8-patches-1.4.tar.lzma's mtime...
>>> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...
>>> Unpacking source...
>>> Unpacking gdb-6.8.tar.bz2 to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
>>> Unpacking gdb-6.8-patches-1.4.tar.lzma to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
 * Applying various patches (bugfixes/updates) ...
 *   05_all_readline-headers.patch                                       [ ok ]
 *   10_all_gdb-6.6-duel.patch                                           [ ok ]
 *   11_all_gdb-6.6-duel-integrate.patch                                 [ ok ]
 *   20_all_gdb-tdep-opcode-include-workaround.patch                     [ ok ]
 *   35_all_gdb-6.3-security-errata-20050610.patch                       [ ok ]
 *   50_all_gdb-pie-1.patch                                              [ ok ]
 *   50_all_gdb-pie-2.patch                                              [ ok ]
 *   80_all_gdb-6.5-dwarf-stack-overflow.patch                           [ ok ]
 * Done with patching
>>> Source unpacked in /var/tmp/portage/sys-devel/gdb-6.8-r1/work



 # ll /usr/portage/distfiles/gdb-6.8*
-rw-rw-r-- 1 portage portage   122922 Feb 23 08:10 /usr/portage/distfiles/gdb-6.8-patches-1.4.tar.lzma
-rw-rw-r-- 1 portage portage 15581509 Mar 27  2008 /usr/portage/distfiles/gdb-6.8.tar.bz2



 # ebuild /usr/portage/sys-devel/gdb/gdb-6.8-r1.ebuild unpack
>>> Existing ${T}/environment for 'gdb-6.8-r1' will be sourced. Run
>>> 'clean' to start with a fresh environment.
 * gdb-6.8.tar.bz2 RMD160 SHA1 SHA256 size ;-)                           [ ok ]
 * gdb-6.8-patches-1.4.tar.lzma RMD160 SHA1 SHA256 size ;-)              [ ok ]
 * checking ebuild checksums ;-)                                         [ ok ]
 * checking auxfile checksums ;-)                                        [ ok ]
 * checking miscfile checksums ;-)                                       [ ok ]
 * checking gdb-6.8.tar.bz2 ;-)                                          [ ok ]
 * checking gdb-6.8-patches-1.4.tar.lzma ;-)                             [ ok ]
>>> Checking gdb-6.8.tar.bz2's mtime...
>>> Checking gdb-6.8-patches-1.4.tar.lzma's mtime...
>>> gdb-6.8-patches-1.4.tar.lzma has been updated; recreating WORKDIR...
>>> Unpacking source...
>>> Unpacking gdb-6.8.tar.bz2 to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
>>> Unpacking gdb-6.8-patches-1.4.tar.lzma to /var/tmp/portage/sys-devel/gdb-6.8-r1/work
 * Applying various patches (bugfixes/updates) ...
 *   05_all_readline-headers.patch                                       [ ok ]
 *   10_all_gdb-6.6-duel.patch                                           [ ok ]
 *   11_all_gdb-6.6-duel-integrate.patch                                 [ ok ]
 *   20_all_gdb-tdep-opcode-include-workaround.patch                     [ ok ]
 *   35_all_gdb-6.3-security-errata-20050610.patch                       [ ok ]
 *   50_all_gdb-pie-1.patch                                              [ ok ]
 *   50_all_gdb-pie-2.patch                                              [ ok ]
 *   80_all_gdb-6.5-dwarf-stack-overflow.patch                           [ ok ]
 * Done with patching
>>> Source unpacked in /var/tmp/portage/sys-devel/gdb-6.8-r1/work











Comment 8


Zac Medico






          2009-04-22 17:55:52 UTC
        

(In reply to comment #7)
> -rw-rw-r-- 1 portage portage 15581509 Mar 27  2008
> /usr/portage/distfiles/gdb-6.8.tar.bz2

It behaves as if your system clock is set to a time before Mar 27, 2008. Is that the case?




Comment 9


Zac Medico






          2009-04-22 17:57:31 UTC
        

(In reply to comment #7)
> -rw-rw-r-- 1 portage portage   122922 Feb 23 08:10
> /usr/portage/distfiles/gdb-6.8-patches-1.4.tar.lzma

Actually, gdb-6.8-patches-1.4.tar.lzma is the one that triggers it. Anyway, it seems like either your clock setting is wrong or that file has a future mtime.




Comment 10


Burak Arslan





          2009-04-22 18:29:20 UTC
        

(In reply to comment #9)
> (In reply to comment #7)
> > -rw-rw-r-- 1 portage portage   122922 Feb 23 08:10
> > /usr/portage/distfiles/gdb-6.8-patches-1.4.tar.lzma
> 
> Actually, gdb-6.8-patches-1.4.tar.lzma is the one that triggers it. Anyway, it
> seems like either your clock setting is wrong or that file has a future mtime.
> 

 $ date
Wed Apr 22 21:26:05 EEST 2009

 $ /etc/init.d/ntpd status
 * status:  started

and this is from syslog:

Apr 22 19:55:05 localhost ntpd[14384]: synchronized to 194.27.110.130, stratum 2

         









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

