Title: 696100 – dev-ros/transmission_interface-0.15.1 : /.../class_loader_imp.hpp:274:13: internal compiler error:<snip> Segmentation fault
URL: https://bugs.gentoo.org/show_bug.cgi?id=696100

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 696100
dev-ros/transmission_interface-0.15.1 : /.../class_loader_imp.hpp:274:13: internal compiler error:<snip> Segmentation fault
Last modified: 2019-10-07 21:58:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 696100 
      - dev-ros/transmission_interface-0.15.1 : /.../class_loader_imp.hpp:274:13: internal compiler error:<snip> Segmentation fault


Summary:
dev-ros/transmission_interface-0.15.1 : /.../class_loader_imp.hpp:274:13: int...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Robot Operating System team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-10-03 07:46 UTC by Toralf Förster





      Modified:
    
2019-10-07 21:58 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



slyfox









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.03 KB,
                text/plain)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





dev-ros:transmission_interface-0.15.1:20191003-023118.log

              (dev-ros:transmission_interface-0.15.1:20191003-023118.log,14.10 KB,
                text/plain)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,203.35 KB,
                text/plain)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





environment

              (environment,154.28 KB,
                text/plain)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





etc.portage.tbz2

              (etc.portage.tbz2,10.91 KB,
                application/x-bzip)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





logs.tbz2

              (logs.tbz2,4.65 KB,
                application/x-bzip)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





temp.tbz2

              (temp.tbz2,35.18 KB,
                application/x-bzip)

            
2019-10-03 07:46 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2019-10-03 07:46:11 UTC
        

                 from /var/tmp/portage/dev-ros/transmission_interface-0.15.1/work/ros_control-0.15.1/transmission_interface/src/transmission_interface_loader.cpp:33:
/usr/include/pluginlib/class_loader_imp.hpp: In member function ‘std::string pluginlib::ClassLoader<T>::extractPackageNameFromPackageXML(const string&) [with T = transmission_interface::RequisiteProvider]’:
/usr/include/pluginlib/class_loader_imp.hpp:274:13: internal compiler error: Segmentation fault
  274 | std::string ClassLoader<T>::extractPackageNameFromPackageXML(const std::string & package_xml_path)
      |             ^~~~~~~~~~~~~~
Please submit a full bug report,

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 17.1_no-multilib-20190929-041856

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-9.2.0 *

clang:
clang version 9.0.0 (tags/RELEASE_900/final)
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/9/bin
llvm:
9.0.0
Available Python interpreters, in order of preference:
  [1]   python3.6
  [2]   python2.7 (fallback)
  [3]   pypy3 (fallback)
Available Ruby profiles:
  [1]   ruby24 (with Rubygems)
  [2]   ruby25 (with Rubygems) *
Available Rust versions:
  [1]   rust-1.38.0 *
java-config:
The following VMs are available for generation-2:
*)	IcedTea JDK 3.13.0 [icedtea-bin-8]
2)	JamVM JDK 2.0.0 [jamvm]
Available Java Virtual Machines:
  [1]   icedtea-bin-8  system-vm
  [2]   jamvm 

repository:
==> /var/db/repos/gentoo/metadata/timestamp.chk <==
Thu, 03 Oct 2019 01:26:13 +0000

emerge -qpvO dev-ros/transmission_interface
[ebuild  N    ] dev-ros/transmission_interface-0.15.1  USE="-test" PYTHON_TARGETS="python2_7"




Comment 1


Toralf Förster






          2019-10-03 07:46:14 UTC
        

Created attachment 591650 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2019-10-03 07:46:18 UTC
        

Created attachment 591652 [details]
dev-ros:transmission_interface-0.15.1:20191003-023118.log




Comment 3


Toralf Förster






          2019-10-03 07:46:21 UTC
        

Created attachment 591654 [details]
emerge-history.txt




Comment 4


Toralf Förster






          2019-10-03 07:46:25 UTC
        

Created attachment 591656 [details]
environment




Comment 5


Toralf Förster






          2019-10-03 07:46:28 UTC
        

Created attachment 591658 [details]
etc.portage.tbz2




Comment 6


Toralf Förster






          2019-10-03 07:46:32 UTC
        

Created attachment 591660 [details]
logs.tbz2




Comment 7


Toralf Förster






          2019-10-03 07:46:35 UTC
        

Created attachment 591662 [details]
temp.tbz2




Comment 8


Sergei Trofimovich (RETIRED)






          2019-10-03 19:20:49 UTC
        

Can you extract -march=native expansion following https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide? Or maybe fetch complete reproducer?




Comment 9


Toralf Förster






          2019-10-06 15:18:07 UTC
        

(In reply to Sergei Trofimovich from comment #8)
> Can you extract -march=native expansion following
> https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide? Or maybe fetch
> complete reproducer?

tinderbox@mr-fox ~ $ chr img/17.1_no-multilib-20190929-041856/
mr-fox ~ # LANG=C gcc -Q --help=target > default.opts 
mr-fox ~ # LANG=C gcc -march=native -Q --help=target > native.opts 
mr-fox ~ # diff -U0 default.opts native.opts
--- default.opts        2019-10-06 17:17:35.726514737 +0200
+++ native.opts 2019-10-06 17:17:40.246692165 +0200
@@ -12 +12 @@
-  -mabm                                [disabled]
+  -mabm                                [enabled]
@@ -16 +16 @@
-  -maes                                [disabled]
+  -maes                                [enabled]
@@ -24 +24 @@
-  -march=                              x86-64
+  -march=                              haswell
@@ -26,4 +26,4 @@
-  -mavx                                [disabled]
-  -mavx2                               [disabled]
-  -mavx256-split-unaligned-load        [enabled]
-  -mavx256-split-unaligned-store       [enabled]
+  -mavx                                [enabled]
+  -mavx2                               [enabled]
+  -mavx256-split-unaligned-load        [disabled]
+  -mavx256-split-unaligned-store       [disabled]
@@ -46,2 +46,2 @@
-  -mbmi                                [disabled]
-  -mbmi2                               [disabled]
+  -mbmi                                [enabled]
+  -mbmi2                               [enabled]
@@ -59 +59 @@
-  -mcx16                               [disabled]
+  -mcx16                               [enabled]
@@ -62 +62 @@
-  -mf16c                               [disabled]
+  -mf16c                               [enabled]
@@ -67 +67 @@
-  -mfma                                [disabled]
+  -mfma                                [enabled]
@@ -73 +73 @@
-  -mfsgsbase                           [disabled]
+  -mfsgsbase                           [enabled]
@@ -81 +81 @@
-  -mhle                                [disabled]
+  -mhle                                [enabled]
@@ -96 +96 @@
-  -mlzcnt                              [disabled]
+  -mlzcnt                              [enabled]
@@ -102 +102 @@
-  -mmovbe                              [disabled]
+  -mmovbe                              [enabled]
@@ -114 +114 @@
-  -mno-sse4                            [enabled]
+  -mno-sse4                            [disabled]
@@ -120 +120 @@
-  -mpclmul                             [disabled]
+  -mpclmul                             [enabled]
@@ -124 +124 @@
-  -mpopcnt                             [disabled]
+  -mpopcnt                             [enabled]
@@ -133 +133 @@
-  -mrdrnd                              [disabled]
+  -mrdrnd                              [enabled]
@@ -143 +143 @@
-  -msahf                               [disabled]
+  -msahf                               [enabled]
@@ -152,4 +152,4 @@
-  -msse3                               [disabled]
-  -msse4                               [disabled]
-  -msse4.1                             [disabled]
-  -msse4.2                             [disabled]
+  -msse3                               [enabled]
+  -msse4                               [enabled]
+  -msse4.1                             [enabled]
+  -msse4.2                             [enabled]
@@ -159 +159 @@
-  -mssse3                              [disabled]
+  -mssse3                              [enabled]
@@ -172 +172 @@
-  -mtune=                              generic
+  -mtune=                              haswell
@@ -183 +183 @@
-  -mxsave                              [disabled]
+  -mxsave                              [enabled]
@@ -185 +185 @@
-  -mxsaveopt                           [disabled]
+  -mxsaveopt                           [enabled]
mr-fox ~ # exit
logout




Comment 10


Sergei Trofimovich (RETIRED)






          2019-10-06 21:54:52 UTC
        

(In reply to Toralf Förster from comment #9)
> (In reply to Sergei Trofimovich from comment #8)
> > Can you extract -march=native expansion following
> > https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide? Or maybe fetch
> > complete reproducer?
> 
> tinderbox@mr-fox ~ $ chr img/17.1_no-multilib-20190929-041856/
> mr-fox ~ # LANG=C gcc -Q --help=target > default.opts 
> mr-fox ~ # LANG=C gcc -march=native -Q --help=target > native.opts 
...

Looks like the flags are quivalent to:
CFLAGS="-march=haswell -maes -mabm" CXXFLAGS="-march=haswell -maes -mabm"

But I fail to reproduce it locally. Does it consistently crash for you?

Can you extract preprocessed file? https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide#Extract_self-contained_source_.28use_-save-temps.29

Maybe the minor header changes are nough to to grigger failure for me.




Comment 11


Toralf Förster






          2019-10-07 18:44:53 UTC
        

(In reply to Sergei Trofimovich from comment #10)
> But I fail to reproduce it locally. Does it consistently crash for you?
> 
Nope, it emerge today at this image :-/

> Can you extract preprocessed file?
> https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide#Extract_self-
> contained_source_.28use_-save-temps.29
> 
> Maybe the minor header changes are nough to to grigger failure for me.

Can do that -- if it happened again?




Comment 12


Sergei Trofimovich (RETIRED)






          2019-10-07 21:58:30 UTC
        

(In reply to Toralf Förster from comment #11)
> (In reply to Sergei Trofimovich from comment #10)
> > But I fail to reproduce it locally. Does it consistently crash for you?
> > 
> Nope, it emerge today at this image :-/

Oh, that's unfortunate. It's either software hard to reproduce memory corruption (I ran it locally a few hundreds times, no crashes) or a hardware problem (worth running a memtest just in case).

> > Can you extract preprocessed file?
> > https://wiki.gentoo.org/wiki/Gcc-ICE-reporting-guide#Extract_self-
> > contained_source_.28use_-save-temps.29
> > 
> > Maybe the minor header changes are nough to to grigger failure for me.
> 
> Can do that -- if it happened again?

Sounds good. Let's close this as WORKSFORME. Feel free to reopen of you got a handle of how to crash it at least occasionally.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

