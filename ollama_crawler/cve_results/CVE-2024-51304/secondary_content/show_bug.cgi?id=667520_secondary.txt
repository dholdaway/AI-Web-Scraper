Title: 667520 – dev-python/pillow-5.2.0: test failure
URL: https://bugs.gentoo.org/show_bug.cgi?id=667520

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 667520
dev-python/pillow-5.2.0: test failure
Last modified: 2018-11-03 22:47:24 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 667520 
      - dev-python/pillow-5.2.0: test failure


Summary:
dev-python/pillow-5.2.0: test failure
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Virgil Dupras (RETIRED)








URL:







Whiteboard:




Keywords:

TESTFAILURE







Depends on:







Blocks:









 





      Reported:
    
2018-10-01 22:12 UTC by Thomas Deutschmann (RETIRED)





      Modified:
    
2018-11-03 22:47 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



python









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log

              (build.log,171.89 KB,
                text/plain)

            
2018-10-01 22:12 UTC,

            Thomas Deutschmann (RETIRED)




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Thomas Deutschmann (RETIRED)






          2018-10-01 22:12:41 UTC
        

Created attachment 548784 [details]
build.log

> Tests/test_image_tobytes.py::TestImageToBytes::test_sanity PASSED
> Tests/test_image_toqimage.py::TestToQImage::test_sanity PASSED
> Tests/test_image_toqimage.py::TestToQImage::test_segfault PASSED
> Tests/test_image_toqpixmap.py::TestToQPixmap::test_sanity  * ERROR: dev-python/pillow-5.2.0::gentoo failed (test phase):
>  *   Failed to run 'pytest -vx Tests/test_000_sanity.py Tests/test_binary.py Tests/test_bmp_reference.py Tests/test_box_blur.py Tests/test_color_lut.py Tests/test_core_resources.py Tests/test_decompression_bomb.py Tests/test_features.py Tests/test_file_blp.py Tests/test_file_bmp.py Tests/test_file_bufrstub.py Tests/test_file_container.py Tests/test_file_cur.py Tests/test_file_dcx.py Tests/test_file_dds.py Tests/test_file_eps.py Tests/test_file_fitsstub.py Tests/test_file_fli.py Tests/test_file_fpx.py Tests/test_file_ftex.py Tests/test_file_gbr.py Tests/test_file_gd.py Tests/test_file_gif.py Tests/test_file_gimpgradient.py Tests/test_file_gimppalette.py Tests/test_file_gribstub.py Tests/test_file_hdf5stub.py Tests/test_file_icns.py Tests/test_file_ico.py Tests/test_file_im.py Tests/test_file_iptc.py Tests/test_file_jpeg.py Tests/test_file_jpeg2k.py Tests/test_file_libtiff.py Tests/test_file_libtiff_small.py Tests/test_file_mcidas.py Tests/test_file_mic.py Tests/test_file_mpo.py Tests/test_file_msp.py Tests/test_file_palm.py Tests/test_file_pcd.py Tests/test_file_pcx.py Tests/test_file_pdf.py Tests/test_file_pixar.py Tests/test_file_png.py Tests/test_file_ppm.py Tests/test_file_psd.py Tests/test_file_sgi.py Tests/test_file_spider.py Tests/test_file_sun.py Tests/test_file_tar.py Tests/test_file_tga.py Tests/test_file_tiff.py Tests/test_file_tiff_metadata.py Tests/test_file_wal.py Tests/test_file_webp.py Tests/test_file_webp_alpha.py Tests/test_file_webp_animated.py Tests/test_file_webp_lossless.py Tests/test_file_webp_metadata.py Tests/test_file_wmf.py Tests/test_file_xbm.py Tests/test_file_xpm.py Tests/test_file_xvthumb.py Tests/test_font_bdf.py Tests/test_font_leaks.py Tests/test_font_pcf.py Tests/test_format_hsv.py Tests/test_format_lab.py Tests/test_image.py Tests/test_image_access.py Tests/test_image_array.py Tests/test_image_convert.py Tests/test_image_copy.py Tests/test_image_crop.py Tests/test_image_draft.py Tests/test_image_filter.py Tests/test_image_frombytes.py Tests/test_image_fromqimage.py Tests/test_image_fromqpixmap.py Tests/test_image_getbands.py Tests/test_image_getbbox.py Tests/test_image_getcolors.py Tests/test_image_getdata.py Tests/test_image_getextrema.py Tests/test_image_getim.py Tests/test_image_getpalette.py Tests/test_image_getprojection.py Tests/test_image_histogram.py Tests/test_image_load.py Tests/test_image_mode.py Tests/test_image_paste.py Tests/test_image_point.py Tests/test_image_putalpha.py Tests/test_image_putdata.py Tests/test_image_putpalette.py Tests/test_image_quantize.py Tests/test_image_resample.py Tests/test_image_resize.py Tests/test_image_rotate.py Tests/test_image_split.py Tests/test_image_thumbnail.py Tests/test_image_tobitmap.py Tests/test_image_tobytes.py Tests/test_image_toqimage.py Tests/test_image_toqpixmap.py Tests/test_image_transform.py Tests/test_image_transpose.py Tests/test_imagechops.py Tests/test_imagecms.py Tests/test_imagecolor.py Tests/test_imagedraw.py Tests/test_imagedraw2.py Tests/test_imageenhance.py Tests/test_imagefile.py Tests/test_imagefont.py Tests/test_imagefont_bitmap.py Tests/test_imagefontctl.py Tests/test_imagegrab.py Tests/test_imagemath.py Tests/test_imagemorph.py Tests/test_imageops.py Tests/test_imageops_usm.py Tests/test_imagepalette.py Tests/test_imagepath.py Tests/test_imageqt.py Tests/test_imagesequence.py Tests/test_imageshow.py Tests/test_imagestat.py Tests/test_imagetk.py Tests/test_imagewin.py Tests/test_imagewin_pointers.py Tests/test_lib_image.py Tests/test_lib_pack.py Tests/test_locale.py Tests/test_map.py Tests/test_mode_i16.py Tests/test_numpy.py Tests/test_pdfparser.py Tests/test_pickle.py Tests/test_psdraw.py Tests/test_pyroma.py Tests/test_shell_injection.py Tests/test_tiff_ifdrational.py Tests/test_uploader.py Tests/test_util.py Tests/test_webp_leaks.py -p no:relaxed'
>  * 
>  * Call stack:
>  *     ebuild.sh, line  124:  Called src_test
>  *   environment, line 2814:  Called distutils-r1_src_test
>  *   environment, line 1037:  Called _distutils-r1_run_foreach_impl 'python_test'
>  *   environment, line  476:  Called python_foreach_impl 'distutils-r1_run_phase' 'python_test'
>  *   environment, line 2331:  Called multibuild_foreach_variant '_python_multibuild_wrapper' 'distutils-r1_run_phase' 'python_test'
>  *   environment, line 1691:  Called _multibuild_run '_python_multibuild_wrapper' 'distutils-r1_run_phase' 'python_test'
>  *   environment, line 1689:  Called _python_multibuild_wrapper 'distutils-r1_run_phase' 'python_test'
>  *   environment, line  700:  Called distutils-r1_run_phase 'python_test'
>  *   environment, line  968:  Called python_test
>  *   environment, line 2716:  Called virtx 'pytest' '-vx' 'Tests/test_000_sanity.py' 'Tests/test_binary.py' 'Tests/test_bmp_reference.py' 'Tests/test_box_blur.py' 'Tests/test_color_lut.py' 'Tests/test_core_resources.py' 'Tests/test_decompression_bomb.py' 'Tests/test_features.py' 'Tests/test_file_blp.py' 'Tests/test_file_bmp.py' 'Tests/test_file_bufrstub.py' 'Tests/test_file_container.py' 'Tests/test_file_cur.py' 'Tests/test_file_dcx.py' 'Tests/test_file_dds.py' 'Tests/test_file_eps.py' 'Tests/test_file_fitsstub.py' 'Tests/test_file_fli.py' 'Tests/test_file_fpx.py' 'Tests/test_file_ftex.py' 'Tests/test_file_gbr.py' 'Tests/test_file_gd.py' 'Tests/test_file_gif.py' 'Tests/test_file_gimpgradient.py' 'Tests/test_file_gimppalette.py' 'Tests/test_file_gribstub.py' 'Tests/test_file_hdf5stub.py' 'Tests/test_file_icns.py' 'Tests/test_file_ico.py' 'Tests/test_file_im.py' 'Tests/test_file_iptc.py' 'Tests/test_file_jpeg.py' 'Tests/test_file_jpeg2k.py' 'Tests/test_file_libtiff.py' 'Tests/test_file_libtiff_small.py' 'Tests/test_file_mcidas.py' 'Tests/test_file_mic.py' 'Tests/test_file_mpo.py' 'Tests/test_file_msp.py' 'Tests/test_file_palm.py' 'Tests/test_file_pcd.py' 'Tests/test_file_pcx.py' 'Tests/test_file_pdf.py' 'Tests/test_file_pixar.py' 'Tests/test_file_png.py' 'Tests/test_file_ppm.py' 'Tests/test_file_psd.py' 'Tests/test_file_sgi.py' 'Tests/test_file_spider.py' 'Tests/test_file_sun.py' 'Tests/test_file_tar.py' 'Tests/test_file_tga.py' 'Tests/test_file_tiff.py' 'Tests/test_file_tiff_metadata.py' 'Tests/test_file_wal.py' 'Tests/test_file_webp.py' 'Tests/test_file_webp_alpha.py' 'Tests/test_file_webp_animated.py' 'Tests/test_file_webp_lossless.py' 'Tests/test_file_webp_metadata.py' 'Tests/test_file_wmf.py' 'Tests/test_file_xbm.py' 'Tests/test_file_xpm.py' 'Tests/test_file_xvthumb.py' 'Tests/test_font_bdf.py' 'Tests/test_font_leaks.py' 'Tests/test_font_pcf.py' 'Tests/test_format_hsv.py' 'Tests/test_format_lab.py' 'Tests/test_image.py' 'Tests/test_image_access.py' 'Tests/test_image_array.py' 'Tests/test_image_convert.py' 'Tests/test_image_copy.py' 'Tests/test_image_crop.py' 'Tests/test_image_draft.py' 'Tests/test_image_filter.py' 'Tests/test_image_frombytes.py' 'Tests/test_image_fromqimage.py' 'Tests/test_image_fromqpixmap.py' 'Tests/test_image_getbands.py' 'Tests/test_image_getbbox.py' 'Tests/test_image_getcolors.py' 'Tests/test_image_getdata.py' 'Tests/test_image_getextrema.py' 'Tests/test_image_getim.py' 'Tests/test_image_getpalette.py' 'Tests/test_image_getprojection.py' 'Tests/test_image_histogram.py' 'Tests/test_image_load.py' 'Tests/test_image_mode.py' 'Tests/test_image_paste.py' 'Tests/test_image_point.py' 'Tests/test_image_putalpha.py' 'Tests/test_image_putdata.py' 'Tests/test_image_putpalette.py' 'Tests/test_image_quantize.py' 'Tests/test_image_resample.py' 'Tests/test_image_resize.py' 'Tests/test_image_rotate.py' 'Tests/test_image_split.py' 'Tests/test_image_thumbnail.py' 'Tests/test_image_tobitmap.py' 'Tests/test_image_tobytes.py' 'Tests/test_image_toqimage.py' 'Tests/test_image_toqpixmap.py' 'Tests/test_image_transform.py' 'Tests/test_image_transpose.py' 'Tests/test_imagechops.py' 'Tests/test_imagecms.py' 'Tests/test_imagecolor.py' 'Tests/test_imagedraw.py' 'Tests/test_imagedraw2.py' 'Tests/test_imageenhance.py' 'Tests/test_imagefile.py' 'Tests/test_imagefont.py' 'Tests/test_imagefont_bitmap.py' 'Tests/test_imagefontctl.py' 'Tests/test_imagegrab.py' 'Tests/test_imagemath.py' 'Tests/test_imagemorph.py' 'Tests/test_imageops.py' 'Tests/test_imageops_usm.py' 'Tests/test_imagepalette.py' 'Tests/test_imagepath.py' 'Tests/test_imageqt.py' 'Tests/test_imagesequence.py' 'Tests/test_imageshow.py' 'Tests/test_imagestat.py' 'Tests/test_imagetk.py' 'Tests/test_imagewin.py' 'Tests/test_imagewin_pointers.py' 'Tests/test_lib_image.py' 'Tests/test_lib_pack.py' 'Tests/test_locale.py' 'Tests/test_map.py' 'Tests/test_mode_i16.py' 'Tests/test_numpy.py' 'Tests/test_pdfparser.py' 'Tests/test_pickle.py' 'Tests/test_psdraw.py' 'Tests/test_pyroma.py' 'Tests/test_shell_injection.py' 'Tests/test_tiff_ifdrational.py' 'Tests/test_uploader.py' 'Tests/test_util.py' 'Tests/test_webp_leaks.py' '-p' 'no:relaxed'
>  *   environment, line 3563:  Called die
>  * The specific snippet of code:
>  *       [[ ${retval} -ne 0 ]] && die "Failed to run '$@'";




Comment 1


Thomas Deutschmann (RETIRED)






          2018-10-01 22:13:06 UTC
        

Portage 2.3.49 (python 3.6.5-final-0, default/linux/x86/17.0, gcc-7.3.0, glibc-2.26-r7, 4.14.65-gentoo i686)
=================================================================
System uname: Linux-4.14.65-gentoo-i686-Intel-R-_Core-TM-_i7-3770K_CPU_@_3.50GHz-with-gentoo-2.4.1
KiB Mem:     3107592 total,   1149904 free
KiB Swap:     488276 total,    423000 free
Timestamp of repository gentoo: Mon, 01 Oct 2018 21:04:28 +0000
Head commit of repository gentoo: 1c8ce9016e4e813a9f6d9890a8ee616df20de561

sh bash 4.4_p12
ld GNU ld (Gentoo 2.30 p5) 2.30.0
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r4::gentoo
dev-lang/perl:            5.24.3-r1::gentoo
dev-lang/python:          2.7.15::gentoo, 3.6.5::gentoo
dev-util/cmake:           3.9.6::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.38.2::gentoo
sys-apps/sandbox:         2.13::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r4::gentoo
sys-devel/automake:       1.15.1-r2::gentoo
sys-devel/binutils:       2.30-r4::gentoo
sys-devel/gcc:            7.3.0-r3::gentoo
sys-devel/gcc-config:     1.8-r1::gentoo
sys-devel/libtool:        2.4.6-r3::gentoo
sys-devel/make:           4.2.1-r4::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.26-r7::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: git
    sync-uri: https://github.com/gentoo-mirror/gentoo.git
    priority: -1000

ABI="x86"
ABI_X86="32"
ACCEPT_KEYWORDS="x86"
ACCEPT_LICENSE="* -@EULA"
ACCEPT_PROPERTIES="*"
ACCEPT_RESTRICT="*"
ANT_HOME="/usr/share/ant"
ARCH="x86"
BROOT=""
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -pipe -march=pentium4m -mtune=pentium4m"
CHOST="i686-pc-linux-gnu"
CHOST_x86="i686-pc-linux-gnu"
COLLISION_IGNORE="/lib/modules/*"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt"
CPU_FLAGS_X86="mmx mmxext sse sse2"
CXXFLAGS="-O2 -pipe -march=pentium4m -mtune=pentium4m"
DEFAULT_ABI="x86"
EDITOR="/usr/bin/mcedit"
ELIBC="glibc"
ENV_UNSET="DBUS_SESSION_BUS_ADDRESS DISPLAY PERL5LIB PERL5OPT PERLPREFIX PERL_CORE PERL_MB_OPT PERL_MM_OPT XAUTHORITY XDG_CACHE_HOME XDG_CONFIG_HOME XDG_DATA_HOME XDG_RUNTIME_DIR"
EPREFIX=""
EROOT="/"
ESYSROOT="/"
FCFLAGS="-O2 -march=i686 -pipe"
FEATURES="assume-digests binpkg-logs cgroup config-protect-if-modified distlocks downgrade-backup ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -march=i686 -pipe"
GCC_SPECS=""
GRUB_PLATFORMS="efi-32 pc"
GSETTINGS_BACKEND="dconf"
HOME="/root"
INFOPATH="/usr/share/gcc-data/i686-pc-linux-gnu/7.3.0/info:/usr/share/binutils-data/i686-pc-linux-gnu/2.31.1/info:/usr/share/info"
INPUT_DEVICES="libinput keyboard mouse"
IUSE_IMPLICIT="abi_x86_32 prefix prefix-chain prefix-guest"
KERNEL="linux"
L10N="en en-US de de-DE"
LANG="en_US.UTF-8"
LC_ALL="en_US.UTF-8"
LC_MESSAGES="C"
LC_PAPER="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LIBDIR_x86="lib"
LINGUAS="en de"
LOGNAME="root"
MAIL="/var/mail/root"
MAKEOPTS="--jobs 5 --load-average 7.95"
MULTILIB_ABIS="x86"
NOCOLOR="true"
OFFICE_IMPLEMENTATION="libreoffice"
OPENCL_PROFILE="mesa"
OPENGL_PROFILE="xorg-x11"
PAGER="/usr/bin/less"
PATH="/usr/i686-pc-linux-gnu/gcc-bin/7.3.0:/usr/lib/llvm/6/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin"
PHP_TARGETS="php5-6 php7-0 php7-1"
POSTGRES_TARGETS="postgres9_5 postgres10"
PWD="/root"
PYTHONDONTWRITEBYTECODE="1"
PYTHON_SINGLE_TARGET="python3_6"
PYTHON_TARGETS="python2_7 python3_6"
QT_GRAPHICSSYSTEM="raster"
ROOT="/"
ROOTPATH="/usr/i686-pc-linux-gnu/gcc-bin/7.3.0:/usr/lib/llvm/6/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin"
RUBY_TARGETS="ruby22 ruby23"
SHELL="/bin/bash"
SHLVL="2"
SSH_TTY="/dev/pts/0"
SYSROOT="/"
TERM="tmux-256color"
TMUX="/tmp//tmux-0/default,5510,0"
TMUX_PANE="%0"
TWISTED_DISABLE_WRITING_OF_PLUGIN_CACHE="1"
USER="root"
USERLAND="GNU"
VIDEO_CARDS="vmware"
XDG_CONFIG_DIRS="/etc/xdg"
XDG_DATA_DIRS="/usr/local/share:/usr/share"




Comment 2


Thomas Deutschmann (RETIRED)






          2018-10-01 22:19:23 UTC
        

5.3.0 ends with


Tests/test_psdraw.py::TestPsDraw::test_stdout PASSED
Tests/test_pyroma.py::TestPyroma::test_pyroma SKIPPED
Tests/test_qt_image_fromqpixmap.py::TestFromQPixmap::test_sanity_1 PASSED
Tests/test_qt_image_fromqpixmap.py::TestFromQPixmap::test_sanity_l  * ERROR: dev-python/pillow-5.3.0




Comment 3


Virgil Dupras (RETIRED)






          2018-10-04 14:42:23 UTC
        

I'm having troubles reproducing this error. On a x86 VM, I can run tests on both 5.2 and 5.3 just fine. Is anyone else able to reproduce this failure on x86?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

