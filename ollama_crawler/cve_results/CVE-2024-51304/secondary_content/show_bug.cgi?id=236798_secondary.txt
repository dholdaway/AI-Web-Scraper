Title: 236798 – thunderbird 2.0.0.16 + enigmail  0.95.6-r4 : no text when reply to a PGP/MIME crypted email
URL: https://bugs.gentoo.org/show_bug.cgi?id=236798

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 236798
thunderbird 2.0.0.16 + enigmail  0.95.6-r4 : no text when reply to a PGP/MIME crypted email
Last modified: 2008-10-24 18:41:23 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 236798 
      - thunderbird 2.0.0.16 + enigmail  0.95.6-r4 : no text when reply to a PGP/MIME crypted email


Summary:
thunderbird 2.0.0.16 + enigmail  0.95.6-r4 : no text when reply to a PGP/MIME...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Mozilla Gentoo Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-09-05 17:08 UTC by Marcello Magaldi





      Modified:
    
2008-10-24 18:41 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Marcello Magaldi





          2008-09-05 17:08:08 UTC
        

If I choose to reply to a crypted email (successfully decrypted using my passphrase) all that I can see in the reply message on composing is :

"<Full Name> wrote :"

there are no trace of the original message text that anyway I can read .

Reproducible: Always

Steps to Reproduce:
1.receive a gpg crypted email
2.open it (insert passphrase)
3.click reply

Actual Results:  
no message text on composing reply

Expected Results:  
original message text should be reported (as non-crypted email)

emerge --info
Portage 2.1.4.4 (default/linux/x86/2008.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r7 i686)
=================================================================
System uname: 2.6.25-gentoo-r7 i686 AMD Athlon(tm) XP 2600+
Timestamp of tree: Fri, 05 Sep 2008 16:04:01 +0000
distcc 2.18.3 i686-pc-linux-gnu (protocols 1 and 2) (default port 3632) [enabled]
ccache version 2.4 [enabled]
app-shells/bash:     3.2_p33
dev-java/java-config: 1.3.7, 2.1.6
dev-lang/python:     2.5.2-r6
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r2
sys-devel/automake:  1.4_p6, 1.5, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.1
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-O2 -mtune=i686 -march=athlon-xp -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/splash /etc/terminfo /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -mtune=i686 -march=athlon-xp -pipe -fomit-frame-pointer"
DISTDIR="/var/portage/distfiles"
FEATURES="ccache distcc metadata-transfer parallell-fetch sandbox sfperms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="http://ftp.first-world.info/ http://ftp-stud.fht-esslingen.de/pub/Mirrors/gentoo/ http://mirror.switch.ch/ftp/mirror/gentoo/"
LANG="it_IT.UTF-8"
LC_ALL="it_IT.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="it"
MAKEOPTS="-j8"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/sunrise /usr/portage/local/layman/initng /usr/portage/local/layman/desktop-effects /usr/portage/local/layman/mpd /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow 3dnowext X Xaw3d a52 aac acl acpi aiglx alsa amrnb amrwb apache2 arts aspnet aspnetedit automount avahi bash-completion beagle berkdb bidi boo branding bzip2 c++ cairo cdda cdio cdr cli cracklib crypt css cups cxx dbus devhelp divx4linux dri dts dvd dvdr dvdread eds emboss emovix encode esd evo exif fam fbcondecor ffmpeg firefox flac fortran freetype galago gcj gdbm gif gimp gimpprint glade glitz gnome gnutls gpm gstreamer gtk gtk2 guile hal httpd iconv id3tag ipv6 isdnlog jack java joystick jpeg kde kerberos latex ldap libnotify live lm_sensors mad matroska midi mikmod mjpeg mmx mono mp3 mpeg msn mtp mudflap mysql ncurses nls nptl nptlonly nsplugin nvidia objc odbc offensive ogg oggvorbis opengl openmp pam pcre pdf perl png ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection samba scanner sdl session sourceview spell spl sqlite sqlite3 srt sse ssl startup-notification stream subversion svg svga swat sysfs syslog tcltk tcpd theora thunderbird tiff tk totem tracker trasparency truetype unicode usb v4l valgrind vcd vlm vorbis win32codecs wma wxwindows x86 xcomposite xml xorg xv xvid zlib" ALSA_CARDS="emu10k1 usb-audio" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="it" USERLAND="GNU" VIDEO_CARDS="nvidia fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Marcello Magaldi





          2008-09-05 19:18:48 UTC
        

On enigmail console I get :

enigmail> /usr/bin/gpg --charset utf8  --batch --no-tty --status-fd 2 -d --use-a
gent 
gpg: no valid OpenPGP data found.
gpg: decrypt_message failed: Unknown system error
enigmail.js: Enigmail.decryptMessageEnd: Error in command execution




Comment 2


Marcello Magaldi





          2008-09-06 15:26:08 UTC
        

it happens only with some messages sent by a pc with gpg 1.4.9 and enigmail 0.95.0 , I don't know if it is my system fault or some misconfiguration by the sender.
Anyway if I send myself a crypted email and if I try to reply I don't have this issue. Tell me how can I provide necessaries info that should help to solve.




Comment 3


Raúl Porcel (RETIRED)






          2008-09-06 15:35:42 UTC
        

Try opening that mail with mozilla-thunderbird-bin, you'll need to install enigmail using an xpi file.




Comment 4


Marcello Magaldi





          2008-09-06 15:47:19 UTC
        

same issue with thunderbird-bin and enigmail 0.95.7 xpi (from official website)




Comment 5


Marcello Magaldi





          2008-09-06 15:58:57 UTC
        

(In reply to comment #3)
> Try opening that mail with mozilla-thunderbird-bin, you'll need to install
> enigmail using an xpi file.
> 

anyway the problem is not on opening but in replying . I can open also the problematic email and read it , but if I choose to reply the original message text isn't shown





Comment 6


Raúl Porcel (RETIRED)






          2008-09-06 16:08:08 UTC
        

Then is not a gentoo problem, probably you should contact enigmail upstream, since i have no clue about that, and its happening with binary as well. Howver as you already said, if it just happens with one mail and it works with others, i'd say its a problem with the person who send you the mail.




Comment 7


Marcello Magaldi





          2008-09-07 11:34:30 UTC
        

my friend is using debian icedove+enigmail, He can anyway reply to his encrypted email so I don't know if it is a enigmail bug, a gentoo package bug or a debian package bug . In other words I really don't know where I should report this issue.
Anyway I collected enigmail debug log  :

enigmail> /usr/bin/gpg --charset utf8  --batch --no-tty --status-fd 2 -d --use-agent 
2008-09-07 13:20:30.274 enigmail.js: Enigmail.execStart: pipetrans = [xpconnect wrapped nsIPipeTransport]
2008-09-07 13:20:30.291 enigmail.js: Enigmail.decryptMessageEnd: uiFlags=8, outputLen=1, pipeTransport=[xpconnect wrapped nsIPipeTransport], verifyOnly=false, noOutput=false
2008-09-07 13:20:30.292 enigmail.js: Enigmail.execEnd: 
2008-09-07 13:20:30.292 enigmail.js: WriteFileContents: file=/home/magowiz/enlog//enigerr.txt
2008-09-07 13:20:30.785 enigmail.js: Enigmail.execEnd: copied command err output to file /home/magowiz/enlog//enigerr.txt
2008-09-07 13:20:30.785 enigmail.js: Enigmail.execEnd: exitCode = 2
2008-09-07 13:20:30.786 enigmail.js: Enigmail.execEnd: errOutput = gpg: Non sono stati trovati dati OpenPGP validi.
[GNUPG:] NODATA 1
[GNUPG:] NODATA 2
gpg: decrypt_message failed: Unknown system error

2008-09-07 13:20:30.786 enigmail.js: Enigmail.parseErrorOutput:
2008-09-07 13:20:30.787 enigmail.js: Enigmail.parseErrorOutput: statusFlags = 00004000
2008-09-07 13:20:30.787 gpg: Non sono stati trovati dati OpenPGP validi.
gpg: decrypt_message failed: Unknown system error
2008-09-07 13:20:30.788 enigmail.js: Enigmail.stillActive: 
2008-09-07 13:20:30.788 enigmail.js: Enigmail.decryptMessageEnd: Error in command execution
2008-09-07 13:20:31.218 enigmailMsgComposeOverlay.js: EnigEditorGetContentsAs
2008-09-07 13:23:17.430 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: true
2008-09-07 13:23:17.431 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: isEmpty=false, isEditable=true
2008-09-07 13:23:17.434 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: false
2008-09-07 13:23:17.435 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: isEmpty=true, isEditable=true
2008-09-07 13:23:17.658 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: true
2008-09-07 13:23:17.659 enigmailMsgComposeOverlay.js: NotifyDocumentStateChanged: isEmpty=true, isEditable=false
2008-09-07 13:23:17.695 enigmailMsgComposeOverlay.js: enigMsgComposeClose
2008-09-07 13:23:17.695 enigmailMsgComposeOverlay.js: enigMsgComposeReset
2008-09-07 13:23:17.696 enigmailMsgComposeOverlay.js: enigSetIdentityDefaults
2008-09-07 13:26:07.522 enigmailMsgHdrViewOverlay.js: enigHdrViewUnLoad
2008-09-07 13:26:07.529 enigmailMessengerOverlay.js: Finish
2008-09-07 13:26:07.530 enigmailMessengerOverlay.js: enigMessageFrameUnload
2008-09-07 13:26:07.531 enigmailMessengerOverlay.js: enigMessageCleanup
2008-09-07 13:26:07.730 enigmailMsgHdrViewOverlay.js: enigMessageUnload





Comment 8


Marcello Magaldi





          2008-09-09 17:14:10 UTC
        

I found that the "problem" comes out when the sender sends the text of the message as attachment to the email, if he choose to send the encrypted text as part of the message all goes well. Should we search for the cause on the gentoo side or on the debian side ?




Comment 9


Marcello Magaldi





          2008-09-09 17:16:17 UTC
        

(In reply to comment #8)
> I found that the "problem" comes out when the sender sends the text of the
> message as attachment to the email, if he choose to send the encrypted text as
> part of the message all goes well. Should we search for the cause on the gentoo
> side or on the debian side ?
> 

In other words the problem comes out when He sends me a message using PGP/MIME




Comment 10


Raúl Porcel (RETIRED)






          2008-09-09 17:17:50 UTC
        

Thats interesting...i'd say better ask enigmail, or debian, mainly because we don't patch enigmail or thunderbird.




Comment 11


Marcello Magaldi





          2008-09-09 17:23:49 UTC
        

(In reply to comment #10)
> Thats interesting...i'd say better ask enigmail, or debian, mainly because we
> don't patch enigmail or thunderbird.
> 

The problem comes out also if I send to myself a mail using pgp/mime from and to my gentoo box, this makes me think that is not a problem related to his debian but  is related to my gentoo box




Comment 12


Marcello Magaldi





          2008-10-24 18:40:15 UTC
        

now with thunderbird 2.0.0.17 and enigmail 0.95.7-r1 all seems to work.
Now also with PGP/MIME I can successful reply to messages quoting.




Comment 13


Marcello Magaldi





          2008-10-24 18:41:07 UTC
        

reopen it to mark as WORKSFORME









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

