Title: 146605 – USB errors/failure on 2.6.17-r7 Intel 64X dual core
URL: https://bugs.gentoo.org/show_bug.cgi?id=146605

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 146605
USB errors/failure on 2.6.17-r7 Intel 64X dual core
Last modified: 2006-09-14 09:42:03 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 146605 
      - USB errors/failure on 2.6.17-r7 Intel 64X dual core


Summary:
USB errors/failure on 2.6.17-r7 Intel 64X dual core
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-09-06 14:14 UTC by Chris Landegent





      Modified:
    
2006-09-14 09:42 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



turbo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




2.6.17-r7 .config

              (kernel.config,29.72 KB,
                text/plain)

            
2006-09-06 14:19 UTC,

            Chris Landegent




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Chris Landegent





          2006-09-06 14:14:00 UTC
        

usb 2-2: device descriptor read/8, error -71

hub 2-0:1.0: state 7 ports 2 chg 0000 evt 0004

hub 2-0:1.0: state 7 ports 2 chg 0000 evt 0004

uhci_hcd 0000:00:1d.1: port 2 portsc 0082,00

hub 2-0:1.0: port 2, status 0100, change 0001, 12 Mb/s

hub 2-0:1.0: debounce: port 2: total 100ms stable 100ms status 0x100

hub 2-0:1.0: state 7 ports 2 chg 0000 evt 0004

uhci_hcd 0000:00:1d.1: port 2 portsc 01a3,00

hub 2-0:1.0: port 2, status 0301, change 0001, 1.5 Mb/s

hub 2-0:1.0: debounce: port 2: total 100ms stable 100ms status 0x301

usb 2-2: new low speed USB device using uhci_hcd and address 26

nommu_map_single: overflow 12ab29c00+8 of device mask ffffffff

nommu_map_single: overflow 12a5c3380+64 of device mask ffffffff

nommu_map_single: overflow 12ab29c00+8 of device mask ffffffff

nommu_map_single: overflow 12a5c3380+64 of device mask ffffffff

nommu_map_single: overflow 12ab29c00+8 of device mask ffffffff

nommu_map_single: overflow 12a5c3380+64 of device mask ffffffff




Comment 1


Chris Landegent





          2006-09-06 14:19:22 UTC
        

Created attachment 96218 [details]
2.6.17-r7 .config




Comment 2


Chris Landegent





          2006-09-06 14:20:28 UTC
        


Extra usb debug output:

usb 2-2: device descriptor read/8, error -71

usb 2-2: new low speed USB device using uhci_hcd and address 79

nommu_map_single: overflow 11bdaf6a0+8 of device mask ffffffff

nommu_map_single: overflow 11bdafee0+8 of device mask ffffffff

nommu_map_single: overflow 11bdaf6a0+8 of device mask ffffffff

uhci_hcd 0000:00:1d.1: uhci_result_control: failed with status 440000

[ffff8100cfea7540] link (cfea7422) element (cfea6050)

urb_priv [ffff81011fd33140] urb [ffff81012940c5c0] qh [ffff8100cfea7540] Dev=79 EP=0(IN) CTL

    1: [ffff8100cfea6050] link (cfea60a0) e0 LS Stalled CRC/Timeo Length=7 MaxLen=7 DT0 EndPt=0 Dev=4f, PID=2d(SETUP) (buf=00000000)

    2: [ffff8100cfea60a0] link (cfea60f0) e3 SPD LS Active Length=0 MaxLen=7 DT1 EndPt=0 Dev=4f, PID=69(IN) (buf=00000000)

    3: [ffff8100cfea60f0] link (cfea6140) e3 LS IOC Active Length=0 MaxLen=7ff DT1 EndPt=0 Dev=4f, PID=e1(OUT) (buf=00000000)

  Dummy TD

[ffff8100cfea6140] link (cfea6050) e0 Length=0 MaxLen=7ff DT0 EndPt=0 Dev=0, PID=e1(OUT) (buf=00000000)



usb 2-2: device descriptor read/8, error -71

nommu_map_single: overflow 11bdafee0+8 of device mask ffffffff

nommu_map_single: overflow 11bdaf6a0+8 of device mask ffffffff

uhci_hcd 0000:00:1d.1: uhci_result_control: failed with status 440000

[ffff8100cfea7540] link (cfea7422) element (cfea6140)

urb_priv [ffff81011fd33140] urb [ffff81012940c5c0] qh [ffff8100cfea7540] Dev=79 EP=0(IN) CTL

    1: [ffff8100cfea6140] link (cfea6050) e0 LS Stalled CRC/Timeo Length=7 MaxLen=7 DT0 EndPt=0 Dev=4f, PID=2d(SETUP) (buf=00000000)

    2: [ffff8100cfea6050] link (cfea60a0) e3 SPD LS Active Length=0 MaxLen=7 DT1 EndPt=0 Dev=4f, PID=69(IN) (buf=00000000)

    3: [ffff8100cfea60a0] link (cfea60f0) e3 LS IOC Active Length=0 MaxLen=7ff DT1 EndPt=0 Dev=4f, PID=e1(OUT) (buf=00000000)

  Dummy TD

[ffff8100cfea60f0] link (cfea6140) e0 Length=0 MaxLen=7ff DT0 EndPt=0 Dev=0, PID=e1(OUT) (buf=00000000)






Comment 3


Chris Landegent





          2006-09-06 14:21:27 UTC
        

# uname -a

Linux nms 2.6.17-gentoo-r7 #1 SMP Wed Sep 6 12:45:27 PDT 2006 x86_64 Intel(R) Xeon(R) CPU            5160  @ 3.00GHz GNU/Linux






Comment 4


Chris Landegent





          2006-09-06 14:22:34 UTC
        

Currently running the latest stable udev(sys-fs/udev-087-r1) and baselayout(sys-apps/baselayout-1.12.4-r7)




Comment 5


Chris Landegent





          2006-09-06 14:24:41 UTC
        

I've tried disabling ehci support, the same error occurs with just uhci enabled. There are no ohci devices.




Comment 6


Chris Landegent





          2006-09-06 14:25:39 UTC
        

This happens with both usb keyboards and mice, both which worked while booted to the 2006.1 livecd.(I ssh into the box now while trying to fix the error)




Comment 7


Chris Landegent





          2006-09-06 14:26:21 UTC
        

# lspci -v |grep -i usb

00:1d.0 USB Controller: Intel Corporation 631xESB/632xESB/3100 Chipset UHCI USB Controller #1 (rev 09) (prog-if 00 [UHCI])

00:1d.1 USB Controller: Intel Corporation 631xESB/632xESB/3100 Chipset UHCI USB Controller #2 (rev 09) (prog-if 00 [UHCI])

00:1d.2 USB Controller: Intel Corporation 631xESB/632xESB/3100 Chipset UHCI USB Controller #3 (rev 09) (prog-if 00 [UHCI])

00:1d.7 USB Controller: Intel Corporation 631xESB/632xESB/3100 Chipset EHCI USB2 Controller (rev 09) (prog-if 20 [EHCI])




Comment 8


Chris Landegent





          2006-09-14 09:42:03 UTC
        

Enabling IEEE under networking support seems to have fixed the issue. Nothing else in kernel was changed and the error no longer occurs.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

