Title: 350966 – www-client/chromium-9999:  png not work properly
URL: https://bugs.gentoo.org/show_bug.cgi?id=350966

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 350966
www-client/chromium-9999:  png not work properly
Last modified: 2011-01-28 09:47:54 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 350966 
      - www-client/chromium-9999:  png not work properly


Summary:
www-client/chromium-9999:  png not work properly
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Chromium Project








URL:







Whiteboard:
ht-wanted  
  


Keywords:








Depends on:







Blocks:









 





      Reported:
    
2011-01-07 14:10 UTC by fkhp





      Modified:
    
2011-01-28 09:47 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




screenshot

              (Screenshot.png,122.13 KB,
                text/plain)

            
2011-01-14 10:39 UTC,

            fkhp




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


fkhp





          2011-01-07 14:10:46 UTC
        

http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png

the png file does not show in chromium, neither firefox. but shows in opera.

libpng Installed versions: 
 1.2.44(1.2),
 1.4.5[1]


Reproducible: Always




Comment 1


fkhp





          2011-01-07 14:14:23 UTC
        

strace log for opera


open("/usr/lib/libpng14.so.14", O_RDONLY) = 3
stat("/usr/lib64/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so", {st_mode=S_IFREG|0755, st_size=22960, ...}) = 0





Comment 2


fkhp





          2011-01-07 14:15:46 UTC
        

(In reply to comment #1)
> strace log for opera
> 
> 
> open("/usr/lib/libpng14.so.14", O_RDONLY) = 3
> stat("/usr/lib64/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so",
> {st_mode=S_IFREG|0755, st_size=22960, ...}) = 0
> 

this is not for opera, this log is from chromium 10.0.631.0 (70687)




Comment 3


fkhp





          2011-01-07 14:16:37 UTC
        

strace log for opera


# grep png /dev/shm/o
stat("http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png", 0x7fff4ae85ab0) = -1 ENOENT (No such file or directory)
open("/usr/lib/libpng14.so.14", O_RDONLY) = 5
read(8, "s/panel-top-hover.pngUT\t\0\3\211\345\10M\211\345"..., 4096) = 4096
read(8, "\0\0\250\3\0\0\26\0\25\0buttons/lock_panel.png"..., 4096) = 4096
read(8, "\0\0\v\4\0\0\20\0\25\0buttons/spam.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "ons/usermode.pngUT\t\0\3\211\345\10M\211\345\10MUx\4"..., 4096) = 4096
read(8, "d.pngUT\t\0\3\211\345\10M\211\345\10MUx\4\0\350\3\350\3\353\f\360s\347\345"..., 4096) = 4096
read(8, "d.pngUT\5\0\3\211\345\10MUx\0\0PK\1\2\27\3\n\0\2\0\0\0A\177"..., 4096) = 4096
read(8, "\0\244\201\257\235\v\0mouse_gesture/Mouse.pngUT"..., 4096) = 4096
read(8, "/close/selected_maximize.pngUT\5\0"..., 4096) = 4096
read(8, "gue.pngUT\5\0\3\211\345\10MUx\0\0PK\1\2\27\3\n\0\2\0\0\0"..., 4096) = 4096
read(8, "d.pngUT\t\0\3\211\345\10M\211\345\10MUx\4\0\350\3\350\3\353\f\360s\347\345"..., 4096) = 4096
read(11, "s/panel-top-hover.pngUT\t\0\3\211\345\10M\211\345"..., 4096) = 4096
read(11, "\0\0\250\3\0\0\26\0\25\0buttons/lock_panel.png"..., 4096) = 4096
read(11, "\0\0\v\4\0\0\20\0\25\0buttons/spam.pngUT\t\0\3\211"..., 4096) = 4096
read(11, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(11, "ons/usermode.pngUT\t\0\3\211\345\10M\211\345\10MUx\4"..., 4096) = 4096
read(11, "d.pngUT\t\0\3\211\345\10M\211\345\10MUx\4\0\350\3\350\3\353\f\360s\347\345"..., 4096) = 4096
read(11, "d.pngUT\5\0\3\211\345\10MUx\0\0PK\1\2\27\3\n\0\2\0\0\0A\177"..., 4096) = 4096
read(11, "\0\244\201\257\235\v\0mouse_gesture/Mouse.pngUT"..., 4096) = 4096
read(11, "/close/selected_maximize.pngUT\5\0"..., 4096) = 4096
read(11, "gue.pngUT\5\0\3\211\345\10MUx\0\0PK\1\2\27\3\n\0\2\0\0\0"..., 4096) = 4096
read(11, "d.pngUT\t\0\3\211\345\10M\211\345\10MUx\4\0\350\3\350\3\353\f\360s\347\345"..., 4096) = 4096
stat("/usr/share/scim/icons/google-pinyin_icon.png", {st_mode=S_IFREG|0644, st_size=4707, ...}) = 0
stat("/usr/share/scim/icons/smart-pinyin.png", {st_mode=S_IFREG|0644, st_size=2507, ...}) = 0
stat("/usr/share/scim/icons/keyboard.png", {st_mode=S_IFREG|0644, st_size=1190, ...}) = 0
read(8, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "\0\0\v\4\0\0\20\0\25\0buttons/spam.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "s/panel-top-hover.pngUT\t\0\3\211\345\10M\211\345"..., 4096) = 4096
read(91, "liday_Junction.png\4\0\4\0\0\0\0\7\0\4\0\0\0\2"..., 16384) = 16384
read(91, "osine_chemical_structure.png\4\0\4\0"..., 16384) = 16384
read(91, "\0\0\0\0\7\0\4\0\0\0\2R\0\4\0\0\0\3\t\0\timage/png\10\0"..., 4096) = 4096
read(91, "6e6_1x400.png\4\0\4\0\0\0\0\7\0\4\0\0\0\2R\0\4\0\0"..., 4096) = 4096
read(91, "\0\0\0\0\7\0\4\0\0\0\2R\0\4\0\0\0\3\t\0\timage/png\10\0"..., 12288) = 12288
read(8, "\25\0buttons/home-pressed.pngUT\t\0\3\211"..., 4096) = 4096
read(8, "\0\0\v\4\0\0\20\0\25\0buttons/spam.pngUT\t\0\3\211"..., 4096) = 4096
lstat("http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png", 0x7fff4ae852b0) = -1 ENOENT (No such file or directory)
lstat("http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png", 0x7fff4ae851d0) = -1 ENOENT (No such file or directory)
lstat("http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png", 0x7fff4ae85320) = -1 ENOENT (No such file or directory)
read(8, "ons/usermode.pngUT\t\0\3\211\345\10M\211\345\10MUx\4"..., 4096) = 4096
write(11, "0px-Gen_CDK4.svg.png\4\0\4\0\0\0\0\7\0\4\0\0"..., 4096) = 4096
write(11, "e.com/images/background.png\4\0\4\0\0"..., 4096) = 4096





Comment 4


fkhp





          2011-01-07 14:17:12 UTC
        

strace log for firefox:


# grep png /dev/shm/f
open("/usr/lib64/tls/libpng14.so.14", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/usr/lib64/libpng14.so.14", O_RDONLY) = 4
stat("/usr/share/scim/icons/google-pinyin_icon.png", {st_mode=S_IFREG|0644, st_size=4707, ...}) = 0
stat("/usr/share/scim/icons/smart-pinyin.png", {st_mode=S_IFREG|0644, st_size=2507, ...}) = 0
stat("/usr/share/scim/icons/keyboard.png", {st_mode=S_IFREG|0644, st_size=1190, ...}) = 0
stat("/usr/lib64/firefox/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}/preview.png", {st_mode=S_IFREG|0644, st_size=10017, ...}) = 0
stat("/usr/lib64/firefox/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}/preview.png", {st_mode=S_IFREG|0644, st_size=10017, ...}) = 0
stat("/usr/lib64/firefox/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}/icon.png", {st_mode=S_IFREG|0644, st_size=1248, ...}) = 0
stat("/usr/lib64/firefox/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}/icon.png", {st_mode=S_IFREG|0644, st_size=1248, ...}) = 0
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default16.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default32.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default48.png", R_OK) = 0
open("/usr/lib64/firefox/chrome/icons/default/default16.png", O_RDONLY) = 27
stat("/usr/lib64/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so", {st_mode=S_IFREG|0755, st_size=22960, ...}) = 0
open("/usr/lib64/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so", O_RDONLY) = 28
open("/usr/lib64/firefox/chrome/icons/default/default32.png", O_RDONLY) = 27
open("/usr/lib64/firefox/chrome/icons/default/default48.png", O_RDONLY) = 27
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default16.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default32.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default48.png", R_OK) = 0
open("/usr/lib64/firefox/chrome/icons/default/default16.png", O_RDONLY) = 28
open("/usr/lib64/firefox/chrome/icons/default/default32.png", O_RDONLY) = 28
open("/usr/lib64/firefox/chrome/icons/default/default48.png", O_RDONLY) = 28
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/default16.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default32.png", R_OK) = 0
access("/usr/lib64/firefox/chrome/icons/default/default48.png", R_OK) = 0
open("/usr/lib64/firefox/chrome/icons/default/default16.png", O_RDONLY) = 32
open("/usr/lib64/firefox/chrome/icons/default/default32.png", O_RDONLY) = 32
open("/usr/lib64/firefox/chrome/icons/default/default48.png", O_RDONLY) = 32
lstat("/usr/share/icons/gnome/24x24/actions/gtk-go-back-ltr.png", {st_mode=S_IFLNK|0777, st_size=15, ...}) = 0
stat("/usr/share/icons/gnome/24x24/actions/gtk-go-back-ltr.png", {st_mode=S_IFREG|0644, st_size=1078, ...}) = 0
readlink("/usr/share/icons/gnome/24x24/actions/gtk-go-back-ltr.png", "go-previous.png", 256) = 15
lstat("/usr/share/icons/gnome/24x24/actions/gtk-go-forward-ltr.png", {st_mode=S_IFLNK|0777, st_size=11, ...}) = 0
stat("/usr/share/icons/gnome/24x24/actions/gtk-go-forward-ltr.png", {st_mode=S_IFREG|0644, st_size=1114, ...}) = 0
readlink("/usr/share/icons/gnome/24x24/actions/gtk-go-forward-ltr.png", "go-next.png"..., 256) = 11
lstat("/usr/share/icons/gnome/24x24/actions/view-refresh.png", {st_mode=S_IFREG|0644, st_size=1373, ...}) = 0
lstat("/usr/share/icons/gnome/24x24/actions/process-stop.png", {st_mode=S_IFREG|0644, st_size=1206, ...}) = 0
lstat("/usr/share/icons/gnome/16x16/actions/edit-find.png", {st_mode=S_IFREG|0644, st_size=949, ...}) = 0
lstat("/usr/share/icons/gnome/24x24/actions/go-home.png", {st_mode=S_IFREG|0644, st_size=1367, ...}) = 0
lstat("/usr/share/icons/gnome/16x16/actions/window-close.png", {st_mode=S_IFREG|0644, st_size=505, ...}) = 0
lstat("/usr/share/icons/gnome/16x16/actions/list-add.png", {st_mode=S_IFREG|0644, st_size=520, ...}) = 0
lstat("/usr/share/icons/gnome/24x24/actions/process-stop.png", {st_mode=S_IFREG|0644, st_size=1206, ...}) = 0
access("/usr/lib64/firefox/chrome/icons/default/main-window.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window16.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window16.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window32.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window32.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window48.png", R_OK) = -1 ENOENT (No such file or directory)
access("/usr/lib64/firefox/chrome/icons/default/main-window48.png", R_OK) = -1 ENOENT (No such file or directory)
open("/usr/lib/libpng12.so.0", O_RDONLY) = 58
lstat("/usr/share/icons/gnome/24x24/actions/view-refresh.png", {st_mode=S_IFREG|0644, st_size=1373, ...}) = 0





Comment 5


Paweł Hajdan, Jr. (RETIRED)






          2011-01-12 13:00:14 UTC
        

I can't reproduce with chromium-10.0.634.0.




Comment 6


Julien Sanchez






          2011-01-13 08:15:10 UTC
        

Can't reproduce too (chromium-9999 / 10.0.637.0 (71164)).

media-libs/libpng-1.2.44 was built with the following:
USE="(multilib)"
LDFLAGS="-Wl,-O1"

media-libs/libpng-1.4.5 was built with the following:
USE="(multilib) -static-libs"


> the png file does not show in chromium, neither firefox. but shows in opera.
> 
> libpng Installed versions: 
>  1.2.44(1.2),
>  1.4.5[1]
> 
> 
> Reproducible: Always
> 

1.4.5[1] <======= fkhp, is it a libpng ebuild from an overlay (not main gentoo one)??







Comment 7


fkhp





          2011-01-13 12:16:56 UTC
        


> 1.4.5[1] <======= fkhp, is it a libpng ebuild from an overlay (not main gentoo
> one)??
> 

a newer version of 10.0.631.0 (70687) is OK. so do not take trouble for this bug now.

libpng is from gentoo unstable release: 1.4.5(~), note the ~ sign.




Comment 8


fkhp





          2011-01-13 12:20:21 UTC
        

(In reply to comment #7)
> > 1.4.5[1] <======= fkhp, is it a libpng ebuild from an overlay (not main gentoo
> > one)??
> > 
> 
> a newer version of 10.0.631.0 (70687) is OK. so do not take trouble for this
> bug now.
> 

there are a few png files with problem, but most works.
> libpng is from gentoo unstable release: 1.4.5(~), note the ~ sign.
> 






Comment 9


fkhp





          2011-01-13 12:29:02 UTC
        

# emerge --info libpng
Portage 2.1.9.31 (default/linux/amd64/10.0, gcc-4.5.2, glibc-2.12.2-r0, 2.6.36-ccs-r5 x86_64)
=================================================================
                        System Settings
=================================================================
System uname: Linux-2.6.36-ccs-r5-x86_64-Intel-R-_Core-TM-2_Duo_CPU_T9300_@_2.50GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 12 Jan 2011 23:00:21 +0000
ccache version 3.1.4 [disabled]
app-shells/bash:     4.1_p9::<unknown repository>
dev-java/java-config: 2.1.11-r3::<unknown repository>
dev-lang/python:     2.6.6-r1::<unknown repository>, 2.7.1::<unknown repository>, 3.1.3::<unknown repository>
dev-util/ccache:     3.1.4
dev-util/cmake:      2.8.3-r1
sys-apps/baselayout: 2.0.1-r1::<unknown repository>
sys-apps/openrc:     0.6.8::<unknown repository>
sys-apps/sandbox:    2.4::<unknown repository>
sys-devel/autoconf:  2.13::<unknown repository>, 2.68::<unknown repository>
sys-devel/automake:  1.9.6-r3::<unknown repository>, 1.10.3::<unknown repository>, 1.11.1::<unknown repository>
sys-devel/binutils:  2.21::<unknown repository>
sys-devel/gcc:       4.4.5::<unknown repository>, 4.5.2::<unknown repository>
sys-devel/gcc-config: 1.4.1::<unknown repository>
sys-devel/libtool:   2.4-r1
sys-devel/make:      3.82::<unknown repository>
virtual/os-headers:  2.6.36.1::<unknown repository> (sys-kernel/linux-headers)
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.2/ext-active/ /etc/php/apache2-php5.3/ext-active/ /etc/php/cgi-php5.2/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cli-php5.2/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="assume-digests binpkg-logs collision-protect distlocks fixlafiles fixpackages news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch"
GENTOO_MIRRORS="http://gentoo.netnitco.net/ "
LANG="zh_CN.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="zh_CN en_US zh en"
MAKEOPTS="-j1"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/var/lib/layman/x11 /var/lib/layman/vmware /var/lib/layman/gentoo-china /var/lib/layman/gentoo-taiwan /var/lib/layman/sunrise /var/lib/layman/mozilla /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="X a52 aac accessibility acl acpi alsa amd64 ao apache2 avahi bash-completion berkdb branding bzip2 cairo caps cdr cjk cli clutter consolekit cracklib crypt cups cxx dbus dga djvu dri dts dvd dvdr eds emboss encode evo examples exif fam ffmpeg firefox flac fortran gdbm gdu gif gimp gnome gnome-keyring gphoto2 gpm gstreamer gtk guile i18n iconv icu ipv6 jadetex java jpeg jpeg2k latex lcms ldap libnotify mad midi mikmod mmap mmx mng modules mp3 mp4 mpeg mudflap multilib mysql nas nautilus ncurses networkmanager nfs nls nntp nptl nptlonly nsplugin nvidia ogg opengl openmp pam pango pch pcre pda pdf perl php png policykit ppds pppd pulseaudio python qt3support qt4 readline samba scsi sdl session smp snmp spell sqlite sse sse2 sse3 ssl ssse3 startup-notification suid svg sysfs tcpd threads tiff tk truetype unicode usb v4l2 vim-syntax vorbis x264 xattr xcb xml xmp xorg xulrunner xv xvid xvmc zlib" ALSA_CARDS="ens1370 hda-intel" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev synaptics" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="zh_CN en_US zh en" PHP_TARGETS="php5-3" QEMU_SOFTMMU_TARGETS="x86_64" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="vmwgfx vmwlegacy nouveau nvidia nv vmware vesa svga" XTABLES_ADDONS="cui gfw zhang ipset" 
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS

=================================================================
                        Package Settings
=================================================================

media-libs/libpng-1.2.44 was built with the following:
USE=""
CFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe -ftracer"
CXXFLAGS="-mtune=core2 -march=core2 -O2 -msse4.1 -pipe -ftracer"
LDFLAGS="-Wl,-O1"


media-libs/libpng-1.4.5 was built with the following:
USE="apng (multilib) -static-libs"





Comment 10


Paweł Hajdan, Jr. (RETIRED)






          2011-01-13 12:31:32 UTC
        

(In reply to comment #8)
> (In reply to comment #7)
> > a newer version of 10.0.631.0 (70687) is OK. so do not take trouble for this
> > bug now.
> there are a few png files with problem, but most works.

So are there still some problems? If yes, could you post the URLs of the troublesome images?




Comment 11


Julien Sanchez






          2011-01-13 16:49:19 UTC
        

(In reply to comment #7)
> > 1.4.5[1] <======= fkhp, is it a libpng ebuild from an overlay (not main gentoo
> > one)??
> > 
> 
> a newer version of 10.0.631.0 (70687) is OK. so do not take trouble for this
> bug now.
> 
> libpng is from gentoo unstable release: 1.4.5(~), note the ~ sign.
> 

Thanks, fkhp. I knew this is current unstable version of libpng, I just wondered about "[1]" to be sure it was not a modified ebuild from some additional overlay.




Comment 12


fkhp





          2011-01-14 05:03:24 UTC
        

there migth be a problem for libpng 1.4.5 to work with firefox and chromium, as firefox has the same problem.




Comment 13


fkhp





          2011-01-14 05:42:57 UTC
        

> Thanks, fkhp. I knew this is current unstable version of libpng, I just
> wondered about "[1]" to be sure it was not a modified ebuild from some
> additional overlay.
> 

it's from mozilla overlay, with an apng flag not in getoo's.




Comment 14


Paweł Hajdan, Jr. (RETIRED)






          2011-01-14 07:23:44 UTC
        

(In reply to comment #13)
> it's from mozilla overlay, with an apng flag not in getoo's.

Could you test with official Gentoo libpng?




Comment 15


fkhp





          2011-01-14 09:42:45 UTC
        


> Could you test with official Gentoo libpng?
> 
first downgrade to gentoo libpng: 1.4.3
then upgrade to chromium: 10.0.639.0 (71418)

 the same problem still exits.





Comment 16


Paweł Hajdan, Jr. (RETIRED)






          2011-01-14 09:55:23 UTC
        

(In reply to comment #15)
> > Could you test with official Gentoo libpng?
> > 
> first downgrade to gentoo libpng: 1.4.3
> then upgrade to chromium: 10.0.639.0 (71418)

The problem doesn't reproduce for me with chromium-10.0.634.0 and libpng-1.4.3. Is the more recent version of chromium needed to reproduce the problem?

Are there any other URLs that don't display properly on your system?

Is it possibly caused by -msse4.1 in your CFLAGS? What happens if you remove it and recompile both libpng and chromium?




Comment 17


fkhp





          2011-01-14 10:05:22 UTC
        


> So are there still some problems? If yes, could you post the URLs of the
> troublesome images?
> 

http://en.wikipedia.org/wiki/File:DNA-ligand-by-Abalone.png

http://en.wikipedia.org/wiki/DNA

most png files in these pages are not shown.




Comment 18


fkhp





          2011-01-14 10:11:58 UTC
        

> The problem doesn't reproduce for me with chromium-10.0.634.0 and libpng-1.4.3.
> Is the more recent version of chromium needed to reproduce the problem?

chromium 10.0.631.0 (70687) is the first one noticed with the problem.





Comment 19


fkhp





          2011-01-14 10:39:17 UTC
        

Created attachment 259783 [details]
screenshot

(In reply to comment #16)
> (In reply to comment #15)
> > > Could you test with official Gentoo libpng?
> > > 
> > first downgrade to gentoo libpng: 1.4.3
> > then upgrade to chromium: 10.0.639.0 (71418)
> 
> The problem doesn't reproduce for me with chromium-10.0.634.0 and libpng-1.4.3.
> Is the more recent version of chromium needed to reproduce the problem?
> 
> Are there any other URLs that don't display properly on your system?
> 
> Is it possibly caused by -msse4.1 in your CFLAGS? What happens if you remove it
> and recompile both libpng and chromium?
> 
after removing msse4.1, and recompiling libpng:

http://en.wikipedia.org/wiki/Law_of_cosines

in this page, there are many picture files not shown, and many math expressions not shown.(opera could show both pictures and math expressions well) 

chromium keeps reading all these pages: the status bar shows the message for a while then disapeared, the worm turns circle on the tab.




Comment 20


Paweł Hajdan, Jr. (RETIRED)






          2011-01-21 10:23:37 UTC
        

(In reply to comment #19)
> chromium keeps reading all these pages: the status bar shows the message for a
> while then disapeared, the worm turns circle on the tab.

I cannot reproduce any of those issues. The pages finish loading and all images are present. chromium-10.0.642.2, libpng-1.4.3.

Does anyone else have issues with png images?









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

