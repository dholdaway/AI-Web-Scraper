Title: 617180 – Having an usb_hcd_irq #20 trace event at boot since kernel linux-4.7
URL: https://bugs.gentoo.org/show_bug.cgi?id=617180

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 617180
Having an usb_hcd_irq #20 trace event at boot since kernel linux-4.7
Last modified: 2017-05-14 15:48:23 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 617180 
      - Having an usb_hcd_irq #20 trace event at boot since kernel linux-4.7


Summary:
Having an usb_hcd_irq #20 trace event at boot since kernel linux-4.7
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-05-01 12:04 UTC by Ulenrich





      Modified:
    
2017-05-14 15:48 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Ulenrich





          2017-05-01 12:04:01 UTC
        

I had not noticed the bug for a long time, because of boot cmdline parameter 
systemd.log_level=1 which gives just a one liner notice

---- dmesg of actual linux-4.9.25
[    5.632701] usb 1-1: Manufacturer: Apple, Inc.
[    5.634057] usb 1-1: SerialNumber: 000000000000
[    5.635659] hub 1-1:1.0: USB hub found
[    5.637111] hub 1-1:1.0: 3 ports detected
[    5.902551] usb 4-1: new full-speed USB device number 2 using ohci-pci
[    6.055015] irq 20: nobody cared (try booting with the "irqpoll" option)
[    6.056382] CPU: 0 PID: 0 Comm: swapper/0 Not tainted 4.9.25-2.41.4407 #1
[    6.057742] Hardware name: Apple Inc. Macmini3,1/Mac-F22C86C8, BIOS     MM31.88Z.00AD.B00.0907171535 07/17/09
[    6.059121]  ffff9c953fc03ed0 ffffffff91290598 ffff9c95395e5c00 0000000000000000
[    6.060009]  ffff9c953fc03ef8 ffffffff9108dcb7 ffff9c95395e5c00 0000000000000000
[    6.060009]  0000000000000014 ffff9c953fc03f30 ffffffff9108e038 ffff9c95395e5c00
[    6.060009] Call Trace:
[    6.060009]  <IRQ> 
[    6.060009]  [<ffffffff91290598>] dump_stack+0x4d/0x65
[    6.060009]  [<ffffffff9108dcb7>] __report_bad_irq+0x27/0xc0
[    6.060009]  [<ffffffff9108e038>] note_interrupt+0x238/0x280
[    6.060009]  [<ffffffff9108b50f>] handle_irq_event_percpu+0x4f/0x70
[    6.060009]  [<ffffffff9108b557>] handle_irq_event+0x27/0x50
[    6.060009]  [<ffffffff9108e999>] handle_fasteoi_irq+0x89/0x160
[    6.060009]  [<ffffffff910121e5>] handle_irq+0x15/0x20
[    6.060009]  [<ffffffff91011c16>] do_IRQ+0x46/0xd0
[    6.060009]  [<ffffffff915180ff>] common_interrupt+0x7f/0x7f
[    6.060009]  <EOI> 
[    6.060009]  [<ffffffff913f710f>] ? cpuidle_enter_state+0x15f/0x210
[    6.060009]  [<ffffffff913f7104>] ? cpuidle_enter_state+0x154/0x210
[    6.060009]  [<ffffffff913f71e2>] cpuidle_enter+0x12/0x20
[    6.060009]  [<ffffffff9107f5f0>] cpu_startup_entry+0x1a0/0x1f0
[    6.060009]  [<ffffffff9151210d>] rest_init+0x6d/0x70
[    6.060009]  [<ffffffff91a99efc>] start_kernel+0x424/0x445
[    6.060009]  [<ffffffff91a9928e>] x86_64_start_reservations+0x24/0x26
[    6.060009]  [<ffffffff91a993b7>] x86_64_start_kernel+0x127/0x132
[    6.060009] handlers:
[    6.060009] [<ffffffffc00fc020>] usb_hcd_irq [usbcore]
[    6.060009] Disabling IRQ #20
[    6.120028] usb 3-5: new low-speed USB device number 2 using ohci-pci
[    6.175103] usb 4-1: New USB device found, idVendor=0a5c, idProduct=4500
[    6.176425] usb 4-1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[    6.177702] usb 4-1: Product: BRCM2046 Hub
[    6.178974] usb 4-1: Manufacturer: Apple Inc.
[    6.181884] hub 4-1:1.0: USB hub found
[    6.184785] hub 4-1:1.0: 3 ports detected
[    6.530111] usb 4-1.1: new full-speed USB device number 3 using ohci-pci
[    6.560034] usb 1-1.2: new low-speed USB device number 4 using ehci-pci
[    6.710062] usb 4-1.1: New USB device found, idVendor=05ac, idProduct=8216
---
This happens with all linux kernels: Debian, Ubuntu, OpenSUSE etc
since linux-4.7.0_rc1 , I found this exact version by recompiling bisectional down: linux-4.8 linux-4.6 linux-4.7 and finally compiled source of linux-4.7.0_rc1 from kernel.org.

What can I do?
Is there missing some usb quirk for my old year 2009 Mac mini?




Comment 1


Jonas Stein






          2017-05-14 15:48:23 UTC
        

It is sad to read that you have problems with the kernel. 
We can not help you efficiently via bug tracker. The bug tracker aims rather on specific problems in .ebuilds and less on individual systems. 

I have had very good experience on the gentoo IRC [1] and stackexchange with questions like this. Of course there are also forums and mailing lists [2,3,4].

"This happens with all linux kernels: Debian, Ubuntu, OpenSUSE etc" indicates that this is no gentoo specific problem.

I hope you understand, that I will close the bug here therefore and wish you good luck on one of the mentioned channels.

[1] https://www.gentoo.org/get-involved/irc-channels/
[2] http://unix.stackexchange.com/questions/tagged/gentoo?sort=votes&pageSize=15
[3] https://forums.gentoo.org/
[4] https://www.gentoo.org/get-involved/mailing-lists/all-lists.html









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

