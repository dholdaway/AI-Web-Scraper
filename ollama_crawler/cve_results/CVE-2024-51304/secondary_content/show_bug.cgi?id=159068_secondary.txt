Title: 159068 – crack-attack doesn't emerge with ld flag --as-needed
URL: https://bugs.gentoo.org/show_bug.cgi?id=159068

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 159068
crack-attack doesn't emerge with ld flag --as-needed
Last modified: 2007-02-15 21:52:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 159068 
      - crack-attack doesn't emerge with ld flag --as-needed


Summary:
crack-attack doesn't emerge with ld flag --as-needed
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Games

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Games








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




as-needed



 

        Show dependency tree





 





      Reported:
    
2006-12-25 04:28 UTC by Matías Costa





      Modified:
    
2007-02-15 21:52 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



flameeyes









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matías Costa





          2006-12-25 04:28:17 UTC
        

User-Agent:       Mozilla/5.0 (compatible; Konqueror/3.5; Linux; es) KHTML/3.5.5 (like Gecko)
Build Identifier: 

With LDFLAGS="-Wl,-O1 -Wl,-zdynsort -Wl,--as-needed" crack-attack linking fails 
stating missing glu symbols. Removing "-Wl,--as-needed" works.

I am ~amd64 updated (I mean I just ran "emerge -DuN world")

Reproducible: Always

Steps to Reproduce:
1. Add "-Wl,--as-needed" to LDFLAGS in /etc/make.conf
2. emerge games-arcade/crack-attack

Actual Results:  
The compile command and error lines are:

x86_64-pc-linux-gnu-g++ -DBR_PTHREAD=0   -march=athlon64 -O2 -pipe -fweb -frename-registers  -Wl,-O1 -Wl,-zdynsort -Wl,--as-needed -o 
crack-attack  ActionRecorder.o Attack.o Block.o BlockManager.o 
CelebrationManager.o Clock.o ComboManager.o ComboTabulator.o Communicator.o 
ComputerPlayer.o ComputerPlayerAI.o Controller.o CountDownManager.o Creep.o 
Displayer.o Game.o Garbage.o GarbageFlavorImage.o GarbageGenerator.o 
GarbageManager.o GarbageQueue.o Grid.o LevelLights.o LightManager.o LoseBar.o 
MessageManager.o MetaState.o Random.o Sine.o Score.o ScoreRecordManager.o 
Swapper.o SparkleManager.o Spring.o SignManager.o String.o TextureLoader.o 
WinRecord.o X.o DrawBlocks.o DrawGarbage.o DrawCandy.o DrawScoreRecord.o 
DrawSwapper.o DrawExternalCandy.o DrawLevelLights.o DrawCountDown.o 
DrawMessages.o DrawWinRecord.o obj_block.o obj_garbage.o 
obj_garbage_thin_middle.o obj_garbage_thin_cap.o obj_garbage_thick_corner.o 
obj_garbage_thick_edge.o obj_garbage_thick_middle.o obj_garbage_small.o 
obj_sparkle.o obj_sign.o obj_swapper.o obj_external_candy.o obj_level_lights.o 
obj_messages.o obj_clock.o obj_name.o obj_score_record.o 
prefix.o  -lSM -lICE -L/usr/lib64  -lGL -lGLU -lglut -lXi -lX11 -lXmu    -lGLU -lGL 
/usr/lib64/libglut.so: undefined reference to `gluErrorString'
/usr/lib64/libglut.so: undefined reference to `gluNewQuadric'
/usr/lib64/libglut.so: undefined reference to `gluQuadricDrawStyle'
/usr/lib64/libglut.so: undefined reference to `gluCylinder'
/usr/lib64/libglut.so: undefined reference to `gluQuadricNormals'
/usr/lib64/libglut.so: undefined reference to `gluSphere'



Expected Results:  
It should compile fine

Portage 2.1.2_rc4 (default-linux/amd64/2006.1, gcc-4.1.1, glibc-2.5-r0, 
2.6.18-viper1 x86_64)
=================================================================
System uname: 2.6.18-viper1 x86_64 AMD Athlon(tm) 64 Processor 3000+
Gentoo Base System version 1.12.8
Last Sync: Sat, 23 Dec 2006 16:50:01 +0000
ccache version 2.4 [enabled]
dev-java/java-config: 1.3.7, 2.0.31
dev-lang/python:     2.4.4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     2.4-r6
sys-apps/sandbox:    1.2.18.1
sys-devel/autoconf:  2.13, 2.61
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.17
sys-devel/gcc-config: 1.3.14
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r2
ACCEPT_KEYWORDS="amd64 ~amd64"
AUTOCLEAN="yes"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=athlon64 -O2 -pipe -fweb -frename-registers"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/gconf /etc/java-config/vms/ /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=athlon64 -O2 -pipe -fweb -frename-registers"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig ccache distlocks fixpackages metadata-transfer noinfo 
prelink sandbox sfperms splitdebug strict"
GENTOO_MIRRORS="http://www.mirrorservice.org/sites/www.ibiblio.org/gentoo 
http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LANG="es_ES.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,-zdynsort -Wl,--as-needed"
LINGUAS="es es_ES"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_EXTRA_OPTS="--exclude-from=/etc/portage/rsync_excludes "
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /usr/portage/local/layman/sunrise"
SYNC="rsync://ftp.belnet.be/gentoo-portage/"
USE="amd64 X aac alsa alsa_cards_ali5451 alsa_cards_als4000 alsa_cards_atiixp 
alsa_cards_atiixp-modem alsa_cards_bt87x alsa_cards_ca0106 alsa_cards_cmipci 
alsa_cards_emu10k1x alsa_cards_ens1370 alsa_cards_ens1371 alsa_cards_es1938 
alsa_cards_es1968 alsa_cards_fm801 alsa_cards_hda-intel alsa_cards_intel8x0 
alsa_cards_intel8x0m alsa_cards_maestro3 alsa_cards_trident 
alsa_cards_usb-audio alsa_cards_via82xx alsa_cards_via82xx-modem 
alsa_cards_ymfpci alsa_pcm_plugins_adpcm alsa_pcm_plugins_alaw 
alsa_pcm_plugins_asym alsa_pcm_plugins_copy alsa_pcm_plugins_dmix 
alsa_pcm_plugins_dshare alsa_pcm_plugins_dsnoop alsa_pcm_plugins_empty 
alsa_pcm_plugins_extplug alsa_pcm_plugins_file alsa_pcm_plugins_hooks 
alsa_pcm_plugins_iec958 alsa_pcm_plugins_ioplug alsa_pcm_plugins_ladspa 
alsa_pcm_plugins_lfloat alsa_pcm_plugins_linear alsa_pcm_plugins_meter 
alsa_pcm_plugins_mulaw alsa_pcm_plugins_multi alsa_pcm_plugins_null 
alsa_pcm_plugins_plug alsa_pcm_plugins_rate alsa_pcm_plugins_route 
alsa_pcm_plugins_share alsa_pcm_plugins_shm alsa_pcm_plugins_softvol 
bash-completion berkdb bitmap-fonts bzip2 cli cracklib crypt cups dbus dlloader 
dri dts dvd dvdr dvdread elibc_glibc erandom ffmpeg fortran gdbm gif hal iconv 
input_devices_keyboard input_devices_mouse isdnlog jpeg jpeg2k kde 
kdeenablefinal kdehiddenvisibility kdenewldflags kernel_linux libg++ linguas_es 
linguas_es_ES mmap mp3 ncurses nls nptl nptlonly nvidia ogg opengl pam pcre 
perl pic png ppds pppd python qt qt3 qt4 readline reflection session skey spl 
ssl svg tcpd theora tiff truetype truetype-fonts type1-fonts udev unicode 
userland_GNU v4l2 video_cards_nv video_cards_nvidia video_cards_vesa vorbis xml 
xorg xvid zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

