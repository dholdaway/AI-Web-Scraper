Title: 90342 – grub 0.96-r1 savedefault not working
URL: https://bugs.gentoo.org/show_bug.cgi?id=90342

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 90342
grub 0.96-r1 savedefault not working
Last modified: 2005-07-01 04:44:36 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 90342 
      - grub 0.96-r1 savedefault not working


Summary:
grub 0.96-r1 savedefault not working
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Robert Moss (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2005-04-25 02:14 UTC by Dirk-Lüder Kreie





      Modified:
    
2005-07-01 04:44 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




suggested addition to grub ebuild.

              (grub.ebuild.diff,624 bytes,
                patch)

            
2005-05-01 16:01 UTC,

            Dirk-Lüder Kreie




Details
            | Diff





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dirk-Lüder Kreie





          2005-04-25 02:14:02 UTC
        

upgraded from grub-0.94 and the existing grub.conf stopped working

 on booting ist gives me the error
Error 1: Filename must be either an absolute pathname or blocklist




Reproducible: Always
Steps to Reproduce:
have "savedefault" in config-file

my grub.conf/menu.lst (symlinked)
----8<-------8<-------8<----
timeout 10
default saved
fallback 2

title  Mediaplayer
root (hd0,1)
kernel (hd0,4)/boot/bzImage root=/dev/hda5

title  Gentoo Linux 2.6.10
root (hd0,1)
kernel /kernel-2.6.10 root=/dev/ram0 real_root=/dev/hda6 splash=verbose gentoo=nodevfs udev
initrd /initrd-2.6.10
savedefault

title  Gentoo Linux 2.6.11.7
root (hd0,1)
kernel /kernel-2.6.11.7 root=/dev/ram0 real_root=/dev/hda6 splash=verbose gentoo=nodevfs udev video=vesafb:ywrap,nomtrr,vga=0x317
initrd /initrd-2.6.11.7
savedefault
----8<-------8<-------8<----

if I remove "savedefault" it works.

/dev/hda2 = /boot
/dev/hda6 = /

/dev/hda5 = Linux-based Media-player supplied by manufacturer of computer

Actual Results:  
does not boot ;-(




Comment 1


Canal Vorfeed





          2005-05-01 05:09:39 UTC
        

Have you added patch ?

http://bugs.gentoo.org/attachment.cgi?id=56647

Without it savedefault does not work - it's know issue. I'm using it with this patch and it works just fine.




Comment 2


Dirk-Lüder Kreie





          2005-05-01 15:53:58 UTC
        

Any chance of including it into the ebuild? Maybe with a USE-flag?




Comment 3


Dirk-Lüder Kreie





          2005-05-01 16:01:49 UTC
        

Created attachment 57778 [details, diff]
suggested addition to grub ebuild.




Comment 4


Dirk-Lüder Kreie





          2005-05-01 16:59:07 UTC
        

now remains the problem that the "default" file in the /boot/grub/ directory doesn't necessarily exist, but with this version of grub (0.96) it is necessary.
is there a safe way of creating it while merging? I am not too familiar with the innards of portage / ebuilds.

otherwise the above patch (and changed ebuild) work very well here 
(two i686-pc-linux-gnu systems: one Athlon-XP, one Pentium Mobile)




Comment 5


Canal Vorfeed





          2005-05-17 13:31:57 UTC
        

Grub 0.96 and 0.97 will work JUST fine without "default" file if you'll not use
savedefault feature. And if you'll use savedefault then grub-set-default will
make file for you.

P.S. I've tested grub 0.97 (bug # 91959) - it works just fine with savedefaul:
patch discussed is there already.




Comment 6


Jakub Moc (RETIRED)






          2005-07-01 04:44:36 UTC
        

Hmm, savedefault just works fine for me with 0.96-r1. You have two savedefault
instances in your grub.conf; replace one of them with 'savedefault fallback'










Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

