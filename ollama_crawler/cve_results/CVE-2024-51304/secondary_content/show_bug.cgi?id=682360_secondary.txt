Title: 682360 – app-text/calibre-3.40.1 - src_install(): Setting up completion failed with error: RuntimeError: PyCapsule_GetPointer called with incorrect name
URL: https://bugs.gentoo.org/show_bug.cgi?id=682360

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 682360
app-text/calibre-3.40.1 - src_install(): Setting up completion failed with error: RuntimeError: PyCapsule_GetPointer called with incorrect name
Last modified: 2023-10-20 00:44:55 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 682360 
      - app-text/calibre-3.40.1 - src_install(): Setting up completion failed with error: RuntimeError: PyCapsule_GetPointer called with incorrect name


Summary:
app-text/calibre-3.40.1 - src_install(): Setting up completion failed with er...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Zac Medico








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2019-04-02 19:12 UTC by Harris Landgarten





      Modified:
    
2023-10-20 00:44 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



eschwartz
zmedico









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build log

              (build.log,67.15 KB,
                text/plain)

            
2019-04-02 19:28 UTC,

            Harris Landgarten




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Harris Landgarten





          2019-04-02 19:12:32 UTC
        

mv: cannot stat '/var/tmp/portage/app-text/calibre-3.40.1/temp/fake_homedir/.local/share/mime/packages/*': No such file or directory
 * ERROR: app-text/calibre-3.40.1::gentoo failed (install phase):
 *   failed to register mime types
 * 
 * Call stack:
 *     ebuild.sh, line 124:  Called src_install
 *   environment, line 3502:  Called die
 * The specific snippet of code:
 *       mv "${HOME}"/.local/share/mime/packages/* "${ED}"usr/share/mime/packages/ || die "failed to register mime types";




Comment 1


Harris Landgarten





          2019-04-02 19:28:08 UTC
        

Created attachment 571676 [details]
build log




Comment 2


Harris Landgarten





          2019-05-30 13:05:31 UTC
        

Upgrade of PyQt5 to 5.12 and uninstall of spyder with purges fixed this issue. spyder was holding back PyQt5 to 5.10 and spyder had PyQt installed. Anyway, calibre now installs and runs.

It seems the dependencies of calibre are more brittle than the ebuild specifies.




Comment 3


Eli Schwartz






          2023-10-20 00:44:55 UTC
        

Half of this appears to be a duplicate of bug 570536 and the other half is probably a binary rebuild issue due to PyQt5 sorcery.

I don't think there's anything actionable here anymore as the Qt package set has moved on and one should no longer hit mis-synced packages. So it's not clear how to reproduce the issues of years ago. :P









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

