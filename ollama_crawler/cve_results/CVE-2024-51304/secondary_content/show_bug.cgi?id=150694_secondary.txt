Title: 150694 – net-nds/ypbind-1.19.1-r1 broken
URL: https://bugs.gentoo.org/show_bug.cgi?id=150694

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 150694
net-nds/ypbind-1.19.1-r1 broken
Last modified: 2007-06-14 06:05:42 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 150694 
      - net-nds/ypbind-1.19.1-r1 broken


Summary:
net-nds/ypbind-1.19.1-r1 broken
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Highest
       critical
      


Assignee:

Jeremy Huddleston (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-10-09 17:58 UTC by Simon Gao





      Modified:
    
2007-06-14 06:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Simon Gao





          2006-10-09 17:58:11 UTC
        

sympton:

ypbind starting process times out during boot or restart with error message:

* Starting ypbind ...
* No NIS server found                                                    [ !! ] 

rpcinfo reports localhost and remote NIS server both fine. If /etc/init.d/ypbind was used for startup, then several ypbind processes are shown in `ps ax | grep ypbind`.

The package is :

net-nds/ypbind-1.19.1-r1
sys-apps/baselayout-1.12.5-r2

kernel-2.6.16.28-xen, kernel-2.6.17-gentoo-r8

Simon




Comment 1


Jakub Moc (RETIRED)






          2006-10-10 00:25:30 UTC
        

Unless you post your configuration, your guess is as good as ours...




Comment 2


Simon Gao





          2006-10-10 09:50:55 UTC
        

# emerge --info

Portage 2.1.1 (default-linux/x86/2006.0, gcc-4.1.1, glibc-2.4-r3, 2.6.16.28-xen i686)
=================================================================
System uname: 2.6.16.28-xen i686 Intel(R) Pentium(R) III Mobile CPU      1000MHz
Gentoo Base System version 1.12.5
Last Sync: Tue, 10 Oct 2006 01:00:08 +0000
app-admin/eselect-compiler: [Not Present]
dev-java/java-config: [Not Present]
dev-lang/python:     2.4.3-r4
dev-python/pycrypto: 2.0.1-r5
dev-util/ccache:     [Not Present]
dev-util/confcache:  [Not Present]
sys-apps/sandbox:    1.2.17
sys-devel/autoconf:  2.13, 2.59-r7
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2
sys-devel/binutils:  2.16.1-r3
sys-devel/gcc-config: 1.3.13-r4
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.17-r1
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer -mno-tls-direct-seg-refs"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/NX/etc /usr/NX/home /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/X11/xkb /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/gconf /etc/revdep-rebuild /etc/terminfo"
CXXFLAGS="-march=pentium3 -O2 -pipe -fomit-frame-pointer -mno-tls-direct-seg-refs"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks metadata-transfer sandbox sfperms strict"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
LINGUAS=""
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --delete-after --stats --timeout=180 --exclude='/distfiles' --exclude='/local' --exclude='/packages'"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="x86 X alsa apache2 apm arts berkdb bitmap-fonts cjk cli crypt cups dlloader dri dvd eds elibc_glibc emboss encode esd foomaticdb fortran gdbm gif gpm gstreamer gtk gtk2 imlib input_devices_evdev input_devices_keyboard input_devices_mouse ipv6 isdnlog jpeg kde kernel_linux libg++ libwww mad mbox mikmod mmx motif mp3 mpeg ncurses nls nptl nptlonly ogg opengl oss pam pcre pda perl png pppd python qt qt3 qt4 quicktime readline reflection sdl session spell spl ssl tcpd truetype truetype-fonts type1-fonts udev userland_GNU video_cards_radeon vorbis xml xmms xorg xorg-x11 xprint xv zlib"
Unset:  CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LC_ALL, LDFLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVERLAY

   # emerge -p ypbind
===============================================================================
[ebuild  N    ] net-nds/portmap-5b-r9  USE="tcpd (-selinux)"
[ebuild  N    ] net-nds/yp-tools-2.9  USE="nls"
[ebuild  N    ] net-nds/ypbind-1.19.1-r1  USE="nls -slp"
===============================================================================

Configure /etc/conf.d/net as:

config_eth0=( "192.168.122.12 broadcast 192.168.122.255 netmask 255.255.255.0" )
dns_domain_lo=( "domain.com" )
dns_domain_eth0=( "domain.com" )
dns_servers_eth0="192.168.122.2 192.168.122.5"
dns_search_eth0="domain.com"
nis_domain_eth0="NISDOMAIN"
nis_servers_eth0="192.168.122.9 192.168.122.10"

Any other information is needed?

Simon


(In reply to comment #1)
> Unless you post your configuration, your guess is as good as ours...
> 






Comment 3


Simon Gao





          2006-10-10 10:50:48 UTC
        

While running ypbind manually, I got following result:

# ypbind -d
5308: parsing config file
5308: Trying entry: domain NISDOMAIN server 192.168.122.9
5308: parsed domain 'NISDOMAIN' server '192.168.122.9'
5308: add_server() domain: NISDOMAIN, host: 192.168.122.9, slot: 0
5308: [Welcome to ypbind-mt, version 1.19.1]

5308: ping interval is 20 seconds

5316: ping host '192.168.122.9', domain 'NISDOMAIN'
5316: Pinging all active server.
5316: ping host '192.168.122.9', domain 'NISDOMAIN'
5316: Pinging all active server.
5316: ping host '192.168.122.9', domain 'NISDOMAIN'
5316: Pinging all active server.
5316: ping host '192.168.122.9', domain 'NISDOMAIN'
5316: Pinging all active server.
5316: ping host '192.168.122.9', domain 'NISDOMAIN'

....

# rpcinfo -p 192.168.122.9
   program vers proto   port
    100000    2   tcp    111  portmapper
    100000    2   udp    111  portmapper
    100004    1   udp   1021  ypserv
    100004    2   udp   1021  ypserv
    100004    1   tcp   1023  ypserv
    100004    2   tcp   1023  ypserv
 600100069    1   udp   1015  fypxfrd
 600100069    1   tcp   1022  fypxfrd
    100007    2   udp   1011  ypbind
    100007    2   tcp   1021  ypbind
    100001    1   udp   1103  rstatd
    100001    2   udp   1103  rstatd
    100001    3   udp   1103  rstatd
    100002    1   udp   1104  rusersd
    100002    2   udp   1104  rusersd





Comment 4


Simon Gao





          2006-10-11 00:14:19 UTC
        

Run some more tests. If running NIS master on a local machine, then ypbind works fine. However, it does not bind to remote NIS server even if rpcinfo tells connection to remote NIS server is ok.

What is the thing that blocks ypbind from communicating with remote NIS server?




Comment 5


Simon Gao





          2006-10-11 13:12:41 UTC
        

I narrowed this down to Gentoo ypbind compatible issue with ypserv running on a FreeBSD 4.7 machine. Not know why this could be a problem since other clients (CentOS 4.x, RH 7.3, IRIX, etc) work just fine.

However, earlier version gentoo installation (Gentoo 2005.1) works without any problem. 

Using Gentoo or CentOS 4.x as NIS server, binding from a Gentoo machine seems working fine. 

However, I really like to make Gentoo 2006.1 works with our existing NIS server. Can't create a new NIS server every time got a client issue.

Simon




Comment 6


Jeremy Huddleston (RETIRED)






          2007-03-23 19:01:20 UTC
        

you say that it used to work on your older system... did you try emerging ypbind-1.17.2 to see if there was an issue in the newer version which came out at the end of 2005?

Also, what is your /etc/yp.conf file's contents?





Comment 7


Jeremy Huddleston (RETIRED)






          2007-06-14 06:05:42 UTC
        

No response from submitter... closing as it works for me.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

