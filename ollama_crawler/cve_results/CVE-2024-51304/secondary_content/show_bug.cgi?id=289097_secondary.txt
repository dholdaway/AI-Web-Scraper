Title: 289097 – sys-apps/openrc-0.5.1: net.eth0 doesnt append proper route entry during boot
URL: https://bugs.gentoo.org/show_bug.cgi?id=289097

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 289097
sys-apps/openrc-0.5.1: net.eth0 doesnt append proper route entry during boot
Last modified: 2009-10-24 09:50:09 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 289097 
      - sys-apps/openrc-0.5.1: net.eth0 doesnt append proper route entry during boot


Summary:
sys-apps/openrc-0.5.1: net.eth0 doesnt append proper route entry during boot
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] baselayout

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-10-14 19:57 UTC by Tymm





      Modified:
    
2009-10-24 09:50 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



roy









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Tymm





          2009-10-14 19:57:31 UTC
        

/etc/init.d/net.eth0 doesn't append a route entry for eth0 during boot, like it should due to /etc/conf.d/net.

When I do a "/etc/init.d/net.eth0 restart", the proper route entry will be appended.

Reproducible: Always

Steps to Reproduce:
1.reboot
2.
3.

Actual Results:  
route -n
Kernel IP Routentabelle
Ziel            Router          Genmask         Flags Metric Ref    Use Iface
192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0
127.0.0.0       -               255.0.0.0       !     0      -        0 -
127.0.0.0       127.0.0.1       255.0.0.0       UG    0      0        0 lo

Expected Results:  
route -n
Kernel IP Routentabelle
Ziel            Router          Genmask         Flags Metric Ref    Use Iface
192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0
127.0.0.0       -               255.0.0.0       !     0      -        0 -
127.0.0.0       127.0.0.1       255.0.0.0       UG    0      0        0 lo
0.0.0.0         192.168.0.1     0.0.0.0         UG    0      0        0 eth0

/etc/conf.d/net:
config_eth0="192.168.0.25 netmask 255.255.255.0 brd 192.168.0.255"
routes_eth0="default via 192.168.0.1"
dns_servers_eth0="192.168.0.1"

emerge --info
Portage 2.1.6.13 (default/linux/x86/2008.0, gcc-4.3.2, glibc-2.9_p20081201-r2, 2
.6.30-gentoo-r6-2 i686)
=================================================================
System uname: Linux-2.6.30-gentoo-r6-2-i686-Intel-R-_Core-TM-2_Duo_CPU_L9600_@_2
.13GHz-with-gentoo-2.0.1
Timestamp of tree: Wed, 14 Oct 2009 17:45:01 +0000
ccache version 2.4 [enabled]
app-shells/bash:     4.0_p28
dev-lang/python:     2.6.2-r1
dev-util/ccache:     2.4-r7
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.5.1
sys-apps/sandbox:    1.6-r2
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.7.9-r1, 1.9.6-r2, 1.10.2
sys-devel/binutils:  2.18-r3
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.27-r2
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer -msse4.1"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/fonts/fonts.conf 
/etc/gconf /etc/gentoo-release /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=core2 -O2 -pipe -fomit-frame-pointer -msse4.1"
DISTDIR="/usr/portage/distfiles"
FEATURES="ccache distlocks fixpackages parallel-fetch protect-owned sandbox sfpe
rms strict unmerge-orphans userfetch"
GENTOO_MIRRORS="ftp://ftp.spline.inf.fu-berlin.de/mirrors/gentoo/ http://mirror.
netcologne.de/gentoo/ ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.j
oin.uni-muenster.de/pub/linux/distributions/gentoo http://gentoo.mneisen.org/ ht
tp://de-mirror.org/distro/gentoo/ ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo f
tp://ftp.tu-clausthal.de/pub/linux/gentoo/ http://ftp.spline.inf.fu-berlin.de/mi
rrors/gentoo/ ftp://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ ftp://de-mirror
.org/distro/gentoo/ http://linux.rz.ruhr-uni-bochum.de/download/gentoo-mirror/ h
ttp://ftp6.uni-erlangen.de/pub/mirrors/gentoo ftp://linux.rz.ruhr-uni-bochum.de/
gentoo-mirror/ ftp://mirror.netcologne.de/gentoo/ ftp://ftp6.uni-erlangen.de/pub
/mirrors/gentoo ftp://ftp6.uni-muenster.de/pub/linux/distributions/gentoo ftp://
sunsite.informatik.rwth-aachen.de/pub/Linux/gentoo http://ftp.uni-erlangen.de/pu
b/mirrors/gentoo http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ ftp://ftp.i
pv6.uni-muenster.de/pub/linux/distributions/gentoo "
LANG="en_US.UTF-8"
LC_ALL="de_DE.UTF-8"
LDFLAGS="-Wl,-O1"
LINGUAS="de"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress 
--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclu
de=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="X acl acpi alsa avahi berkdb bzip2 cli cracklib crypt cups dbus dri faad2 f
fmpeg fortran gdbm gpm hal iconv ipv6 isdnlog jabber jpeg modules mp3 mpeg mplay
er mudflap ncurses nls nptl nptlonly opengl openmp pam pcre pdf perl pppd pulsea
udio python readline reflection session spl ssl sysfs tcpd truetype unicode usb 
v4l win32codecs x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem b
t87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-inte
l intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" AL
SA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks
 iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate r
oute share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias au
thn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupf
ile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflat
e dir disk_cache env expires ext_filter file_cache filter headers include info l
og_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling s
tatus unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyb
oard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb21
6 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="intel"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, 
PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVER
LAUSE="X acl acpi alsa avahi berkdb bzip2 cli cracklib crypt cups dbus dri faad2 f
fmpeg fortran gdbm gpm hal iconv ipv6 isdnlog jabber jpeg modules mp3 mpeg mplay
er mudflap ncurses nls nptl nptlonly opengl openmp pam pcre pdf perl pppd pulsea
udio python readline reflection session spl ssl sysfs tcpd truetype unicode usb 
v4l win32codecs x86 xorg zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem b
t87x ca0106 cmipci emu10k1 emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-inte
l intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" AL
SA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks
 iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate r
oute share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias au
thn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupf
ile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflat
e dir disk_cache env expires ext_filter file_cache filter headers include info l
og_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling s
tatus unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyb
oard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb21
6 lcdm001 mtxorb ncurses text" LINGUAS="de" USERLAND="GNU" VIDEO_CARDS="intel"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, MAKEOPTS, 
PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS, PORTDIR_OVER
LAY




Comment 1


Peter Alfredsen (RETIRED)






          2009-10-21 17:58:43 UTC
        

Which version of openrc?




Comment 2


William Hubbs






          2009-10-21 19:22:13 UTC
        

To set the broadcast address if you need to, use the full word
"broadcast" as in my /etc/conf.d/net shown below, and not "brd".

/etc/conf.d/net:
config_eth0="192.168.15.2 netmask 255.255.255.0 broadcast 192.168.15.255"
routes_eth0="default via 192.168.15.1"
dns_servers_eth0="192.168.15.1"

Unless you have some special reason to do so, you don't even need to set
the broadcast address.  it will be set correctly by default.






Comment 3


William Hubbs






          2009-10-21 19:24:25 UTC
        

This works for me with openrc-0.5.2-r1.




Comment 4


William Hubbs






          2009-10-21 19:31:03 UTC
        

After a reboot with the above setup, the following is in my routing table:

root@linux1 ~ # route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.15.0    0.0.0.0         255.255.255.0   U     0      0        0 eth0
127.0.0.0       127.0.0.1       255.0.0.0       UG    0      0        0 lo
0.0.0.0         192.168.15.1    0.0.0.0         UG    0      0        0 eth0
root@linux1 ~ # 






Comment 5


SpanKY






          2009-10-21 19:41:34 UTC
        

btw, openrc version is included in `emerge --info`




Comment 6


Tymm





          2009-10-24 09:50:09 UTC
        

Mhh, seems to be my fault.
Using "broadcast" instead of "brd" didn't help. The same with no broadcast information.

I have no clue whats wrong.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

