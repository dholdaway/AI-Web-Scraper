Title: 760788 – xfce-extra/xfce4-sensors-plugin bad behaviour after reboot
URL: https://bugs.gentoo.org/show_bug.cgi?id=760788

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 760788
xfce-extra/xfce4-sensors-plugin bad behaviour after reboot
Last modified: 2021-01-01 07:48:50 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 760788 
      - xfce-extra/xfce4-sensors-plugin bad behaviour after reboot


Summary:
xfce-extra/xfce4-sensors-plugin bad behaviour after reboot
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

XFCE Team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2020-12-20 01:03 UTC by jorge





      Modified:
    
2021-01-01 07:48 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



mgorny
sam









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


jorge





          2020-12-20 01:03:58 UTC
        

Using:

xfce-extra/xfce4-sensors-plugin-1.3.0-r1::gentoo was built with the following:
USE="acpi hddtemp libnotify lm-sensors" ABI_X86="(64)" VIDEO_CARDS="nvidia"

xfce-base/xfce4-panel-4.14.4::gentoo was built with the following:
USE="introspection -gtk2 -vala" ABI_X86="(64)"

sys-apps/lm-sensors-3.6.0::gentoo was built with the following:
USE="-contrib -sensord -static-libs" ABI_X86="(64) -32 (-x32)"

After configuring xfce4-sensors-plugin to display CPU and GPU temperatures (e.g. Core0, Core1, Core2, Core3 and GPU_name) in xfce4-panel, the numbers are displayed correctly. But after a reboot, the values displayed on xfce4-panel are messed up (e.g. Core3, Core1, Core2 and GPU_name... note that Core0 is missing, Core3 is new and their order is mixed up) 

I see no error messages from dmesg or coredumps...




Comment 1


Ionen Wolkens






          2020-12-20 01:47:19 UTC
        

This upstream issue may(?) be related:
https://gitlab.xfce.org/panel-plugins/xfce4-sensors-plugin/-/issues/13

I don't use this anymore to confirm, but I have poor memories of this plugin keeping my settings intact (may have to do with sensors detection order/timing).




Comment 2


Michał Górny









          2020-12-20 08:37:10 UTC
        

I wonder if this could be related:

https://gitlab.xfce.org/panel-plugins/xfce4-sensors-plugin/-/commit/24a6e82305c0b75e46d9ecc76a79db94731f25f1

If you could trying to put that change into /etc/portage/patches/xfce-extra/xfce4-sensors-plugin/ and seeing whether it helps, I'd appreciate.




Comment 3


jorge





          2020-12-20 23:39:34 UTC
        

Hello all:

I've upgraded xfce-extra/xfce4-sensors-plugin from:

xfce-extra/xfce4-sensors-plugin-1.3.0-r1::gentoo was built with the following:
USE="acpi hddtemp libnotify lm-sensors" ABI_X86="(64)" VIDEO_CARDS="nvidia"

to:

xfce-extra/xfce4-sensors-plugin-1.3.92-r1::gentoo was built with the following:
USE="acpi hddtemp libnotify lm-sensors" ABI_X86="(64)" VIDEO_CARDS="nvidia"

(by accepting the ~amd64 keyword). The configuration now remains after reboots. I did not have to patch the package. Maybe this can be marked as "resolved"? Next time, I will try to download the most recent version available in portage before I report a bug, I promise =).




Comment 4


jorge





          2020-12-22 23:45:49 UTC
        

(In reply to Michał Górny from comment #2)
> I wonder if this could be related:
> 
> https://gitlab.xfce.org/panel-plugins/xfce4-sensors-plugin/-/commit/
> 24a6e82305c0b75e46d9ecc76a79db94731f25f1
> 
> If you could trying to put that change into
> /etc/portage/patches/xfce-extra/xfce4-sensors-plugin/ and seeing whether it
> helps, I'd appreciate.

The sensor plugin does not work, again. Here are the events that led me to this  error:

1) I had Xfce installed in stable versions.
2) xfce4-sensors-plugin did not work as intended (OP problem)
3) I updated xfce4-sensors-plugin with USE ~amd64 (compiled against Xfce's stable versions)
4) The plugin worked correctly after reboots
5) I then upgraded xfce-base/xfce4-meta (and all its dependencies) with use ~amd64
6) The sensor plugin still worked fine.
7) I tried to reinstall the xfce4-sensors-plugin
8) A compile time error occurred (same error as Bug 746107)
9) I applied the suggested patch in that Bug report.
10) The sensor plugin was now successfully compiled (agains Xfce's most recent versions with USE ~amd64)
11) I reconfigured my plugin to show core and gpu temps.
12) On reboot, the sensor plugin does not show any data (with message "No sensors selected!")

I wasn't able to copy and paste the commit to a file in my system. As I am ignorant about a patch's format, I did not try to manually copy it. Also, wouldn't this patch revert the changes in the patch from bug 746107? If so, I wouldn't be able to compile the package...




Comment 5


jorge





          2021-01-01 07:48:11 UTC
        

After the recent update to xfce-extra/xfce4-sensors-plugin-1.3.95, the plugin now works after reboots.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

