Title: 216680 – sys-devel/libperl - ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory
URL: https://bugs.gentoo.org/show_bug.cgi?id=216680

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 216680
sys-devel/libperl - ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory
Last modified: 2009-11-14 22:28:22 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 216680 
      - sys-devel/libperl - ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory


Summary:
sys-devel/libperl - ls: cannot access /usr/lib/libperl.so.f.sed: No such file...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

x86
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Perl team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-04-07 10:42 UTC by Etaoin Shrdlu





      Modified:
    
2009-11-14 22:28 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



aaronf0









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Etaoin Shrdlu





          2008-04-07 10:42:09 UTC
        

Emerging libperl seems to be successful, but gives these messages at the end:
-----------
>>> Regenerating /etc/ld.so.cache...
/sbin/ldconfig: /usr/lib/libperl.so is not an ELF file - it has the wrong magic bytes at the start.

/sbin/ldconfig: File /usr/lib/libgdbm.so.2 is empty, not checked.
/sbin/ldconfig: /usr/lib/libperl.so.1 is not an ELF file - it has the wrong magic bytes at the start.

/sbin/ldconfig: /usr/lib/libperl.so.1.5.8 is not an ELF file - it has the wrong magic bytes at the start.

>>> Original instance of package unmerged safely.
ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory
>>> Regenerating /etc/ld.so.cache...
/sbin/ldconfig: /usr/lib/libperl.so is not an ELF file - it has the wrong magic bytes at the start.

/sbin/ldconfig: File /usr/lib/libgdbm.so.2 is empty, not checked.
/sbin/ldconfig: /usr/lib/libperl.so.1 is not an ELF file - it has the wrong magic bytes at the start.

/sbin/ldconfig: /usr/lib/libperl.so.1.5.8 is not an ELF file - it has the wrong magic bytes at the start.

>>> sys-devel/libperl-5.8.8-r1 merged.

>>> No packages selected for removal by clean
>>> Auto-cleaning packages...

>>> No outdated packages were found on your system.
 * GNU info directory index is up-to-date.
----------
Note the line:

ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory

f.sed happens to be a file I have in the directory where I start the emerge, but don't know why emerge should somehow pick that up.

Then, emerging perl:

...
Processing hints file hints/linux.pl
Writing Makefile for DynaLoader
make[1]: Entering directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/DynaLoader'
make[1]: Leaving directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/DynaLoader'
make[1]: Entering directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/DynaLoader'
../../miniperl "-I../../lib" "-I../../lib" DynaLoader_pm.PL DynaLoader.pm
../../miniperl "-I../../lib" "-I../../lib" XSLoader_pm.PL XSLoader.pm
cp XSLoader.pm ../../lib/XSLoader.pm
cp DynaLoader.pm ../../lib/DynaLoader.pm
AutoSplitting ../../lib/DynaLoader.pm (../../lib/auto/DynaLoader)
rm -f DynaLoader.xs
cp dl_none.xs DynaLoader.xs
../../miniperl "-I../../lib" "-I../../lib" ../../lib/ExtUtils/xsubpp -noprototypes -typemap ../../lib/ExtUtils/typemap DynaLoader.xs > DynaLoader.xsc && mv DynaLoader.xsc DynaLoader.c
i686-pc-linux-gnu-gcc -c   -fno-strict-aliasing -pipe -Wdeclaration-after-statement -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -I/usr/include/libelf -march=pentium4 -mtune=pentium4 -O2 -pipe   -DVERSION=\"1.05\" -DXS_VERSION=\"1.05\" -fPIC "-I../.."  -DPERL_CORE -DLIBC="/lib/libc-2.6.1.so" DynaLoader.c
rm -rf ../../lib/auto/DynaLoader/DynaLoader.a
/usr/bin/ar cr ../../lib/auto/DynaLoader/DynaLoader.a DynaLoader.o && : ../../lib/auto/DynaLoader/DynaLoader.a
chmod 755 ../../lib/auto/DynaLoader/DynaLoader.a
make[1]: Leaving directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/DynaLoader'

        Making B (static_pic)
readdir(./../../../../../../../../..): Bad file descriptor at ../../lib/File/Find.pm line 604
Use of chdir('') or chdir(undef) as chdir() is deprecated at ../../lib/File/Find.pm line 751.
readdir(/usr/lib/perl5/vendor_perl/5.8.8/i686-linux/../../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/vendor_perl/5.8.8/../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/vendor_perl/../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/site_perl/5.8.8/i686-linux/../../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/site_perl/5.8.8/../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/site_perl/../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/5.8.8/i686-linux/../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(/usr/lib/perl5/5.8.8/../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
readdir(./../../../../../..): No such file or directory at ../../lib/ExtUtils/MakeMaker.pm line 170
Couldn't change to directory /var/tmp/portage/dev-lang/perl-5.8.8-r4/homedir/C: No such file or directory at Makefile.PL line 18
Writing Makefile for B
Warning: No Makefile!
make[1]: Entering directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/B'
make[1]: *** No rule to make target `config'.  Stop.
make[1]: Leaving directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/B'
make config failed, continuing anyway...
make[1]: Entering directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/B'
make[1]: *** No rule to make target `all'.  Stop.
make[1]: Leaving directory `/var/tmp/portage/dev-lang/perl-5.8.8-r4/work/perl-5.8.8/ext/B'
make: *** [lib/auto/B/B.a] Error 2
 *
 * ERROR: dev-lang/perl-5.8.8-r4 failed.
 * Call stack:
 *               ebuild.sh, line   49:  Called src_compile
 *             environment, line 2405:  Called die
 * The specific snippet of code:
 *       emake -j1 || die "Unable to make"
 *  The die message:
 *   Unable to make
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-lang/perl-5.8.8-r4/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-lang/perl-5.8.8-r4/temp/environment'.
 *

Neither perl nor libperl are built with USE=ithreads.


Reproducible: Always




Portage 2.1.4.4 (default-linux/x86/2007.0/desktop, gcc-4.1.2, glibc-2.6.1-r0, 2.6.24.3 i686)
=================================================================
System uname: 2.6.24.3 i686 Intel(R) Pentium(R) 4 CPU 3.00GHz
Timestamp of tree: Sun, 06 Apr 2008 23:45:01 +0000
app-shells/bash:     3.2_p17-r1
dev-java/java-config: 1.3.7, 2.1.4
dev-lang/python:     2.4.4-r9
dev-python/pycrypto: 2.0.1-r6
sys-apps/baselayout: 1.12.11.1
sys-apps/sandbox:    1.2.18.1-r2
sys-devel/autoconf:  2.13, 2.61-r1
sys-devel/automake:  1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10
sys-devel/binutils:  2.18-r1
sys-devel/gcc-config: 1.4.0-r4
sys-devel/libtool:   1.5.26
virtual/os-headers:  2.6.23-r3
ACCEPT_KEYWORDS="x86"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=pentium4 -mtune=pentium4 -Os -pipe"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config"
CONFIG_PROTECT_MASK="/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/revdep-rebuild /etc/terminfo /etc/udev/rules.d"
CXXFLAGS="-march=pentium4 -mtune=pentium4 -Os -pipe"
DISTDIR="/usr/portage/distfiles"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch sandbox sfperms strict unmerge-orphans userfetch userpriv usersandbox"
GENTOO_MIRRORS="ftp://ftp.ipv6.uni-muenster.de/pub/linux/distributions/gentoo                 http://ftp.snt.ipv6.utwente.nl/pub/os/linux/gentoo                 http://mirror.switch.ch/ftp/mirror/gentoo                 http://ftp.belnet.be/mirror/rsync.gentoo.org/gentoo                 http://trumpetti.atm.tut.fi/gentoo                 http://ftp.heanet.ie/pub/gentoo                 http://darkstar.ist.utl.pt/gentoo                 http://gd.tuwien.ac.at/opsys/linux/gentoo                 http://gentoo.oregonstate.edu                 http://www.ibiblio.org/pub/Linux/distributions/gentoo"
LC_ALL="en_GB.utf8"
LINGUAS="en_GB"
MAKEOPTS="-j2"
PKGDIR="/usr/portage/packages"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/var/tmp"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage"
SYNC="rsync://ws-nessus/gentoo-portage"
USE="X acpi aiglx alsa arts avi berkdb branding bzip2 bzlib cdr cracklib crypt cups dbm dga dio dlloader dri dvd dvdr encode exif fam ffmpeg font-server foomaticdb ftp gdbm gif idn imap imlib inifile innodb ipv6 java jpeg kde kdeenablefinal kdehiddenvisibility kdexdeltas kerberos mad maildir mbox mcal midi mime mmap mmx mng motif mozbranding mp3 mpeg musepack ncurses nls nptl nptlonly nsplugin offensive ogg oggvorbis opengl pam pcntl pcre pda pdflib perl png posix ppds python qt qt3 quicktime rdesktop readline restrict-javascript samba sdl shared sharedmem slp sockets sse ssl svg sysvipc tcl tcltk threads tiff tk truetype truetype-fonts type1-fonts unicode usb userlocales vorbis win32codecs wmf x86 xine xml xml2 xmlrpc xorg xpm xsl xv xvid yahoo zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1       emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m       maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw copy dshare dsnoop extplug file hooks ladspa lfloat linear meter mulaw multi null rate route share shm" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en_GB" USERLAND="GNU" VIDEO_CARDS="nvidia vga vesa fbdev"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LANG, LDFLAGS, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Etaoin Shrdlu





          2008-04-07 16:22:40 UTC
        

Sorry, there were (unrelated) problems on my system that caused the perl breakage. 
Things are fine now. 

However, I've noticed that emerging libperl still outputs near the end:

ls: cannot access /usr/lib/libperl.so.f.sed: No such file or directory

Where "f.sed" is replaced by some file I may have in the directory where I start the emerge, which looks strange to me. Not a big problem though.

Sorry for the noise.





Comment 2


Aaron





          2008-08-27 16:59:58 UTC
        

I have the same problem, where libperl (and a few other packages) return "/sbin/ldconfig: /usr/lib/libperl* is not an ELF file - it has the wrong magic bytes at the start", and my perl-5.8.8-r5 also fails to compile.

How did you fix yours if it was unrelated?

(I don't have the problem with f.sed, or any other files in my directory being appeneded)




Comment 3


Etaoin Shrdlu





          2008-08-27 17:07:54 UTC
        

(In reply to comment #2)
> I have the same problem, where libperl (and a few other packages) return
> "/sbin/ldconfig: /usr/lib/libperl* is not an ELF file - it has the wrong magic
> bytes at the start", and my perl-5.8.8-r5 also fails to compile.
> 
> How did you fix yours if it was unrelated?

I don't know...now it doesn't happen anymore.
 
> (I don't have the problem with f.sed, or any other files in my directory being
> appeneded)

I still have that. I just tried an emerge -Dav libperl and at the end I got:

ls: cannot access /usr/lib64/libperl.so.2.6.23-gentoo: No such file or directory
ls: cannot access .so.2.6.24-gentoo: No such file or directory
ls: cannot access .so.2.6.25-gentoo: No such file or directory
ls: cannot access .so.f.sed: No such file or directory

where 2.6.{23,24,25}-gentoo and f.sed are files in my current directory (there are others, I don't know why only those are selected).





Comment 4


Etaoin Shrdlu





          2008-08-27 17:52:22 UTC
        

(In reply to comment #3)

> I still have that. I just tried an emerge -Dav libperl and at the end I got:
> 
> ls: cannot access /usr/lib64/libperl.so.2.6.23-gentoo: No such file or
> directory
> ls: cannot access .so.2.6.24-gentoo: No such file or directory
> ls: cannot access .so.2.6.25-gentoo: No such file or directory
> ls: cannot access .so.f.sed: No such file or directory
> 
> where 2.6.{23,24,25}-gentoo and f.sed are files in my current directory (there
> are others, I don't know why only those are selected).

I suspect that the line that triggers the error is one of these two (libperl-5.8.8-r2.ebuild) 

local libnumber="`ls -1 "${ROOT}"usr/$(get_libdir)/libperl$(get_libname ?.*) | grep -v '\.old' | wc -l`"

(line 375)

or
       for x in `ls -1 "${ROOT}"/usr/$(get_libdir)/libperl$(get_libname ?.*)`

(line 397)

since the error message I see is apparently issued by ls. However, my understanding of ebuild functions is not so good to actually be able to find where the problem lies. Hope that helps anyway.





Comment 5


Torsten Veller (RETIRED)






          2009-11-14 22:28:22 UTC
        

I am closing this bug now.

If there is still a problem, please reopen it and attach some more output.

Thanks









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

