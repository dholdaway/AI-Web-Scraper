Title: 637044 – app-emulation/wine-any-2.17-r1 fails to compile at: wscript.exe.fake
URL: https://bugs.gentoo.org/show_bug.cgi?id=637044

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 637044
app-emulation/wine-any-2.17-r1 fails to compile at: wscript.exe.fake
Last modified: 2017-12-04 06:38:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 637044 
      - app-emulation/wine-any-2.17-r1 fails to compile at: wscript.exe.fake


Summary:
app-emulation/wine-any-2.17-r1 fails to compile at: wscript.exe.fake
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Wine Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2017-11-10 11:49 UTC by Stefan Kalis





      Modified:
    
2017-12-04 06:38 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



jstein









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




build.log in bzip2 format

              (build.log.bz2,111.37 KB,
                application/x-bzip)

            
2017-11-10 11:59 UTC,

            Stefan Kalis




Details





build environment in bzip2 format

              (environment.bz2,37.85 KB,
                application/x-bzip)

            
2017-11-10 12:01 UTC,

            Stefan Kalis




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Stefan Kalis





          2017-11-10 11:49:48 UTC
        

make[1]: Leaving directory '/var/tmp/portage/app-emulation/wine-any-2.17-r1/work/wine-2.17-abi_x86_32.x86/programs/winedbg'
../../tools/winegcc/winegcc -o wordpad.exe.so -B../../tools/winebuild -fasynchronous-unwind-tables -mwindows \
  -mno-cygwin olecallback.o print.o registry.o wordpad.o wordpad.res -lcomdlg32 \
  ../../dlls/uuid/libuuid.a -lole32 -lshell32 -luser32 -lgdi32 -ladvapi32 -lcomctl32 \
  ../../libs/port/libwine_port.a -Wl,-O1 -Wl,--as-needed
../../tools/winegcc/winegcc -o wordpad.exe.fake -B../../tools/winebuild -fasynchronous-unwind-tables -mwindows \
  -mno-cygwin olecallback.o print.o registry.o wordpad.o wordpad.res -lcomdlg32 \
  ../../dlls/uuid/libuuid.a -lole32 -lshell32 -luser32 -lgdi32 -ladvapi32 -lcomctl32 \
  ../../libs/port/libwine_port.a -Wl,-O1 -Wl,--as-needed
../../tools/winegcc/winegcc -o wscript.exe.so -B../../tools/winebuild -fasynchronous-unwind-tables -mwindows \
  -municode arguments.o host.o main.o rsrc.res ../../dlls/uuid/libuuid.a -lshell32 -loleaut32 \
  -lole32 -luser32 -ladvapi32 ../../libs/port/libwine_port.a -Wl,-O1 -Wl,--as-needed
../../tools/winegcc/winegcc -o wscript.exe.fake -B../../tools/winebuild -fasynchronous-unwind-tables -mwindows \
  -municode arguments.o host.o main.o rsrc.res ../../dlls/uuid/libuuid.a -lshell32 -loleaut32 \
  -lole32 -luser32 -ladvapi32 ../../libs/port/libwine_port.a -Wl,-O1 -Wl,--as-needed
make[1]: Leaving directory '/var/tmp/portage/app-emulation/wine-any-2.17-r1/work/wine-2.17-abi_x86_32.x86/programs/wscript'
make[1]: Leaving directory '/var/tmp/portage/app-emulation/wine-any-2.17-r1/work/wine-2.17-abi_x86_32.x86/programs/wordpad'
 * ERROR: app-emulation/wine-any-2.17-r1::gentoo failed (compile phase):
 *   emake failed
 * 
 * If you need support, post the output of `emerge --info '=app-emulation/wine-any-2.17-r1::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=app-emulation/wine-any-2.17-r1::gentoo'`.
 * The complete build log is located at '/var/tmp/portage/app-emulation/wine-any-2.17-r1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/app-emulation/wine-any-2.17-r1/temp/environment'.
 * Working directory: '/var/tmp/portage/app-emulation/wine-any-2.17-r1/work/wine-2.17-abi_x86_32.x86'
 * S: '/var/tmp/portage/app-emulation/wine-any-2.17-r1/work/wine-2.17'

>>> Failed to emerge app-emulation/wine-any-2.17-r1, Log file:

>>>  '/var/tmp/portage/app-emulation/wine-any-2.17-r1/temp/build.log'




Comment 1


Stefan Kalis





          2017-11-10 11:50:58 UTC
        

emerge --info '=app-emulation/wine-any-2.17-r1::gentoo'
Portage 2.3.13 (python 3.5.4-final-0, default/linux/amd64/13.0/desktop/plasma, gcc-6.4.0, glibc-2.25-r4, 4.1.43-gentoo x86_64)
=================================================================
                         System Settings
=================================================================
System uname: Linux-4.1.43-gentoo-x86_64-Intel-R-_Core-TM-_i7_CPU_860_@_2.80GHz-with-gentoo-2.4.1
KiB Mem:     8163112 total,   3081584 free
KiB Swap:    8000364 total,   8000364 free
Timestamp of repository gentoo: Fri, 10 Nov 2017 11:00:01 +0000
Head commit of repository gentoo: 21a0517a7e3f0e6e9e5dbf2a953c7a0593c13fbe
sh bash 4.4_p12
ld GNU ld (Gentoo 2.29.1 p3) 2.29.1
app-shells/bash:          4.4_p12::gentoo
dev-java/java-config:     2.2.0-r3::gentoo
dev-lang/perl:            5.26.1::gentoo
dev-lang/python:          2.7.14::gentoo, 3.4.6::gentoo, 3.5.4::gentoo, 3.6.3::gentoo
dev-util/cmake:           3.7.2::gentoo
dev-util/pkgconfig:       0.29.2::gentoo
sys-apps/baselayout:      2.4.1-r2::gentoo
sys-apps/openrc:          0.34.6::gentoo
sys-apps/sandbox:         2.12::gentoo
sys-devel/autoconf:       2.13::gentoo, 2.69-r2::gentoo
sys-devel/automake:       1.11.6-r2::gentoo, 1.13.4-r1::gentoo, 1.14.1-r1::gentoo, 1.15.1-r1::gentoo
sys-devel/binutils:       2.29::gentoo, 2.29.1-r1::gentoo
sys-devel/gcc:            5.4.0-r3::gentoo, 6.4.0::gentoo
sys-devel/gcc-config:     1.9.0::gentoo
sys-devel/libtool:        2.4.6-r2::gentoo
sys-devel/make:           4.2.1-r1::gentoo
sys-kernel/linux-headers: 4.13::gentoo (virtual/os-headers)
sys-libs/glibc:           2.25-r4::gentoo
Repositories:

gentoo
    location: /usr/portage
    sync-type: rsync
    sync-uri: rsync://rsync.gentoo.org/gentoo-portage
    priority: -1000
    sync-rsync-extra-opts:                                                                                                                                                             

ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="* -@EULA AdobeFlash-11.x google-chrome OPERA-2014 Oracle-BCLA-JavaSE skype-4.0.0.7-copyright Vivaldi"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=native -O2 -pipe"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.3/conf /usr/share/themes/oxygen-gtk/gtk-2.0 /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/dconf /etc/env.d /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=native -O2 -pipe"
DISTDIR="/usr/portage/distfiles"
FCFLAGS="-O2 -pipe"
FEATURES="assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync xattr"
FFLAGS="-O2 -pipe"
GENTOO_MIRRORS="rsync://mirror.eu.oneandone.net/gentoo/ http://mirror.eu.oneandone.net/linux/distributions/gentoo/gentoo/ ftp://ftp.wh2.tu-dresden.de/pub/mirrors/gentoo ftp://ftp.uni-erlangen.de/pub/mirrors/gentoo http://ftp.uni-erlangen.de/pub/mirrors/gentoo ftp://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ rsync://ftp-stud.hs-esslingen.de/gentoo/ http://ftp-stud.hs-esslingen.de/pub/Mirrors/gentoo/ http://mirror.switch.ch/ftp/mirror/gentoo/ ftp://mirror.switch.ch/mirror/gentoo/"
LANG="de_DE.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --omit-dir-times --compress --force --whole-file --delete --stats --human-readable --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages --exclude=/.git"
PORTAGE_TMPDIR="/var/tmp"
USE="X Xaw3d a52 aac aacs aalib accessibility acl acpi activities alsa amd64 archive aspell audiofile berkdb bidi binary bluetooth bluray boost branding bzip2 cairo calendar cdda cddb cdr cdrom chm clang cli cmake colord consolekit corefonts cracklib cron crypt ctags cue cups curl cxx cycles d3d9 dbus declarative designer djvu dns dos dot dri drm dts dvd dvdr dvi ebook egl eigen emacs embedded emboss enca enchant encode examples exceptions exif fam farstream fat fbcon fdformat ffmpeg fftw filemanager firefox firmware flac floppy fluidsynth fontconfig fortran fullscreen fuse gbm gcj gdbm gdk-pixbuf gegl ghostscript gif gimp git glade glamor gles glib gmp gnome gnome-keyring gnuplot goffice google gpl gpm gpu gpu-accel grammar graphicsmagick graphviz grub gsl gstreamer gtk gtk2 gtk3 gtkspell gui handbook hddtemp hunspell icons iconv icu ide idn imagemagick import-filter introspection ipc ipv6 java javafx javascript jit jpeg jpeg2k kde kdrive kipi kwallet ladspa lame latex lcms ldap legacy-systray libcanberra libffi libkms libnotify llvm lm_sensors lua luajittex lzma lzo mad magic map math media midi mikmod mmx mmxext mng mobi mod modplug modules mono mount mp3 mp4 mpeg mplayer multilib musicbrainz nautilus ncurses network networkmanager nim nls npapi nptl nsplugin ntfs ntfsdecrypt objc objc++ objc-gc odbc offensive ogg openal opencl opencv openexr opengl openimageio openmp osd ots oxygen pam pango pch pcre pcre16 pdf phonon pim plasma playlist plotutils plugins plymouth png policykit popcnt postscript ppapi ppds printsupport pstricks pulseaudio python qalculate qml qt3support qt4 qt5 qthelp qtmedia quotes readline realtime rtf scanner sddm sdk sdl seccomp semantic-desktop session sid smp sndfile soprano sound soup source spell sqlite sse sse2 sse3 sse4_1 sse4_2 ssh ssl ssse3 startup-notification subversion sudo svg synctex tcpd tesseract themes theora thesaurus threads thumbnail thunar tidy tiff truetype udev udf udisks unicode upower usb utils vaapi vc vcd vdpau visio vlc vorbis vte wallpapers wav wayland webengine webgl webkit webp widgets wifi wmf wordperfect wpg wxwidgets x264 xattr xcb xcomposite xephyr xetex xfce xft xinerama xml xorg xpm xps xrandr xscreensaver xv xvid zip zlib" ABI_X86="64 32" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" APACHE2_MODULES="authn_core authz_core socache_shmcb unixd actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache cgi cgid dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" CALLIGRA_FEATURES="kexi words flow plan sheets stage tables krita karbon braindump author" CAMERAS="canon" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" CPU_FLAGS_X86="mmx mmxext popcnt sse sse2 sse3 ssse3 sse4_1 sse4_2" CURL_SSL="nss" ELIBC="glibc" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock isync itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf skytraq superstar2 timing tsip tripmate tnt ublox ubx" GRUB_PLATFORMS="multiboot pc" INPUT_DEVICES="evdev" KERNEL="linux" L10N="de en" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LIBREOFFICE_EXTENSIONS="presenter-console presenter-minimizer" LINGUAS="de en" OFFICE_IMPLEMENTATION="libreoffice" PHP_TARGETS="php5-6" POSTGRES_TARGETS="postgres9_5" PYTHON_SINGLE_TARGET="python3_4" PYTHON_TARGETS="python2_7 python3_4 python3_5" RUBY_TARGETS="ruby21 ruby23 ruby24" SANE_BACKENDS="hp" USERLAND="GNU" VIDEO_CARDS="radeon" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account"
Unset:  CC, CPPFLAGS, CTARGET, CXX, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 2


Stefan Kalis





          2017-11-10 11:52:49 UTC
        

emerge -pqv '=app-emulation/wine-any-2.17-r1::gentoo'
[ebuild  N    ] app-emulation/wine-any-2.17-r1  USE="X alsa cups d3d9 dos fontconfig gecko gstreamer jpeg lcms ldap mono mp3 ncurses nls odbc openal opencl opengl perl png pulseaudio realtime run-exes scanner ssl staging themes threads truetype udev udisks vaapi xcomposite xinerama xml -capi -custom-cflags -gphoto2 -gsm -netapi -osmesa -oss -pcap -pipelight -prelink -s3tc -samba (-selinux) {-test} -v4l" ABI_X86="32 64 (-x32)" LINGUAS="de en -ar -bg -ca -cs -da -el -en_US -eo -es -fa -fi -fr -he -hi -hr -hu -it -ja -ko -lt -ml -nb_NO -nl -or -pa -pl -pt_BR -pt_PT -rm -ro -ru -sk -sl -sr_RS@cyrillic -sr_RS@latin -sv -te -th -tr -uk -wa -zh_CN -zh_TW" 

!!! The following installed packages are masked:
- dev-dotnet/referenceassemblies-pcl-4.6::gentoo (masked by: package.mask, dotnet-eula license(s))
/usr/portage/profiles/package.mask:
# Mikhail Pukhlikov <cynede@gentoo.org> (20 Jul 2017)
# Old mono/dotnet packages (used on GNOME2 stack)
# also some deprecated forks used for monodevelop
# awhile they are very unstable they will live in dotnet overlay

A copy of the 'dotnet-eula' license is located at '/usr/portage/licenses/dotnet-eula'.

For more information, see the MASKED PACKAGES section in the emerge
man page or refer to the Gentoo Handbook.




Comment 3


Stefan Kalis





          2017-11-10 11:59:44 UTC
        

Created attachment 503414 [details]
build.log in bzip2 format




Comment 4


Stefan Kalis





          2017-11-10 12:01:16 UTC
        

Created attachment 503416 [details]
build environment in bzip2 format




Comment 5


Adam Feldman






          2017-11-12 16:36:48 UTC
        

Can you confirm this with another GCC version?  I cannot confirm this with 5.4.0.  Your build log says 6.4.0.   Are you able to reproduce this with 5.4.0 on your system, or only with 6.4.0?




Comment 6


Stefan Kalis





          2017-11-16 11:36:22 UTC
        

Did you activate abi_x86_32?
I suspect that it might have to do with that.
GCC 5.4 failed when I tried it at wine-any 2.19 today.




Comment 7


Stefan Kalis





          2017-11-26 19:34:04 UTC
        

It is possible that I have solved the problem. After updating of two tools (flex and byacc) the compile process went through normally.




Comment 8


Stefan Kalis





          2017-11-27 12:25:24 UTC
        

I think my 2016 version of byacc caused the problem.




Comment 9


Adam Feldman






          2017-12-04 06:38:57 UTC
        

(In reply to Stefan Kalis from comment #6)
> Did you activate abi_x86_32?
> I suspect that it might have to do with that.
> GCC 5.4 failed when I tried it at wine-any 2.19 today.

Yep, no problem with that.

(In reply to Stefan Kalis from comment #8)
> I think my 2016 version of byacc caused the problem.

Going to close out this bug as a bug in your build tools.  Feel free to reopen if you have more information that warrants applying some fix to the packaging.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

