Title: 251085 – sys-kernel/gentoo-sources-2.6.27-r5 x11-drivers/nvidia-drivers-177.82, sys-power/hibernate-script-1.97-r4, hibernate/suspend hangs
URL: https://bugs.gentoo.org/show_bug.cgi?id=251085

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 251085
sys-kernel/gentoo-sources-2.6.27-r5 x11-drivers/nvidia-drivers-177.82, sys-power/hibernate-script-1.97-r4, hibernate/suspend hangs
Last modified: 2008-12-18 18:23:37 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 251085 
      - sys-kernel/gentoo-sources-2.6.27-r5 x11-drivers/nvidia-drivers-177.82, sys-power/hibernate-script-1.97-r4, hibernate/suspend hangs


Summary:
sys-kernel/gentoo-sources-2.6.27-r5 x11-drivers/nvidia-drivers-177.82, sys-po...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Kernel Bug Wranglers and Kernel Maintainers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2008-12-15 23:15 UTC by sa wu





      Modified:
    
2008-12-18 18:23 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    




/var/log/hibernate.log

              (hibernate.log,3.24 KB,
                text/plain)

            
2008-12-15 23:16 UTC,

            sa wu




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


sa wu





          2008-12-15 23:15:14 UTC
        

when trying suspend to ram or disk using sys-power/hibernate-script or 'echo mem >> /sys/power/state' or 'echo disk >> /sys/power/disk' around 1 out of 3 times my box does not power down but leaves a single blinking underscore in a virtual terminal on screen and the leds for 'caps lock' and 'scroll lock' blinking.

Thanks a lot.

Reproducible: Sometimes

Steps to Reproduce:
1. echo mem >> /sys/power/state
or
1. echo disk >> /sys/power/state
or
3. hibernate

Actual Results:  
single blinking underscore on screen, caps lock and scroll lock leds blinking

Expected Results:  
sleeping, hibernating state

i failed to notice anything strange in /var/log/hibernate.log and /var/log/messages.
i am currently running sys-kernel/gentoo-sources-2.6.27-r5 and x11-drivers/nvidia-drivers-177.82 on a amd64 no-multilib profile. The latter is blacklisted per default in the hibernate script but still it works sometimes.

My box is a samsung aura r70 deluis notebook.

hibernate.log is attached, the last suspend to ram featured this problem. the first and only error was before removing nvidia from the blacklisted module file.




Comment 1


sa wu





          2008-12-15 23:16:57 UTC
        

Created attachment 175392 [details]
/var/log/hibernate.log




Comment 2


Jeroen Roovers (RETIRED)






          2008-12-16 13:39:50 UTC
        

Did you try other versions of gentoo-sources? Did you consider using sys-kernel/tuxonice-sources?




Comment 3


sa wu





          2008-12-18 15:44:07 UTC
        

As far as i remember i did not have this problem with an older kernel version (also gentoo-sources) but can't recall the exact version number.
I think i at least had the bug with 2.6.27-r4 and 2.6.26-r3 too but am not quite sure of it.
This might as well be related to an older version of nividia-drivers.

Bug also occasionally appears when  from an image, immedeately after the image was successfully loaded, sometimes even after this 'bug' appeared when suspending.
Haven't tried tuxonice-sources, as another bug i had (https://bugs.gentoo.org/show_bug.cgi?id=245364) disappeared after upgrading from sys-kernel/gentoo-sources-2.6.26-r3 to sys-kernel/gentoo-sources-2.6.27-r5, whilst tuxonice-sources in version 2.6.27 is not yet available.
Thanks a lot.




Comment 4


Sergey Ovcharenko





          2008-12-18 17:19:32 UTC
        

Post your lspci -v and /etc/hibernate/hibernate.conf please.
Did you try the nv instead of the proprietory driver?




Comment 5


sa wu





          2008-12-18 18:23:37 UTC
        

Did some dozens of tests with various programs running and suspending to disk and ram using 'echo mem >> /sys/power/state' and 'echo disk >> /sys/power/state'.

Seems the only time the bug appears is when rtorrent is running with at least 1 active torrent.

Seems a little strange to me. Will add additional info if the bug shows up again in other scenarios.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

