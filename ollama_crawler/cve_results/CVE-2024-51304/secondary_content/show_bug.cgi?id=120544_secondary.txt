Title: 120544 – unixODBC 2.2.11-r1 fails to build
URL: https://bugs.gentoo.org/show_bug.cgi?id=120544

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 120544
unixODBC 2.2.11-r1 fails to build
Last modified: 2006-01-29 03:46:10 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 120544 
      - unixODBC 2.2.11-r1 fails to build


Summary:
unixODBC 2.2.11-r1 fails to build
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Ryan Phillips (RETIRED)








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2006-01-27 09:00 UTC by David W Noon





      Modified:
    
2006-01-29 03:46 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


David W Noon





          2006-01-27 09:00:30 UTC
        

When emerging the upgrade to unixODBC to 2.2.11-r1, I get the following:

===============================================================================
/bin/sh ../libtool --mode=link i686-pc-linux-gnu-gcc  -march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer -Wall -Wunused    -o gODBCConfig  main.o -rdynamic -L/usr/lib -rdynamic -lgnomeui -lart_lgpl -lgdk_imlib -lSM -lICE -lgtk -lgdk -lgmodule -lXi -lXext -lX11 -lgnome -lgnomesupport -lesd -lasound -laudiofile -lm -ldb1 -lglib  -L/var/lib/portage/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/lib -lodbcinst libgtkodbcconfig.la ../../ini/.libs/libinilc.la 
i686-pc-linux-gnu-gcc -march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer -Wall -Wunused -o .libs/gODBCConfig main.o -rdynamic -rdynamic  -L/usr/lib /usr/lib/libgnomeui.so /usr/lib/libart_lgpl.so /usr/lib/libgdk_imlib.so -lSM -lICE /usr/lib/libgtk.so /usr/lib/libgdk.so /usr/lib/libgmodule.so -lXi -lXext -lX11 /usr/lib/libgnome.so /usr/lib/libgnomesupport.so -lz /usr/lib/libesd.so /usr/lib/libasound.so /usr/lib/libaudiofile.so -lm -ldb1 /usr/lib/libglib.so -L/var/lib/portage/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/lib /usr/lib/libodbcinst.so -ldl ./.libs/libgtkodbcconfig.so ../../ini/.libs/libinilc.a -lpthread
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_sBIT'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifGetExtensionNext'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_read_scanlines'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifGetRecordType'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifGetImageDesc'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFDefaultStripSize'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_strip_16'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_filler'
/usr/lib/libgdk_imlib.so: undefined reference to `png_create_read_struct'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_set_defaults'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifOpenFileHandle'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFReadRGBAImage'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_read_fn'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_packing'
/usr/lib/libgdk_imlib.so: undefined reference to `png_get_io_ptr'
/usr/lib/libgdk_imlib.so: undefined reference to `_TIFFmalloc'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_start_decompress'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_IHDR'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifGetLine'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFWriteScanline'
/usr/lib/libgdk_imlib.so: undefined reference to `png_write_rows'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifCloseFile'
/usr/lib/libgdk_imlib.so: undefined reference to `_TIFFfree'
/usr/lib/libgdk_imlib.so: undefined reference to `png_get_valid'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_destroy_decompress'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_std_error'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_CreateDecompress'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFFdOpen'
/usr/lib/libgdk_imlib.so: undefined reference to `png_create_write_struct'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFSetField'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFScanlineSize'
/usr/lib/libgdk_imlib.so: undefined reference to `DGifGetExtension'
/usr/lib/libgdk_imlib.so: undefined reference to `png_write_info'
/usr/lib/libgdk_imlib.so: undefined reference to `PrintGifError'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFClose'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_expand'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFOpen'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_read_header'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_start_compress'
/usr/lib/libgdk_imlib.so: undefined reference to `png_write_end'
/usr/lib/libgdk_imlib.so: undefined reference to `png_get_IHDR'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_finish_decompress'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_stdio_src'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_CreateCompress'
/usr/lib/libgdk_imlib.so: undefined reference to `png_read_info'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_finish_compress'
/usr/lib/libgdk_imlib.so: undefined reference to `png_destroy_read_struct'
/usr/lib/libgdk_imlib.so: undefined reference to `png_read_image'
/usr/lib/libgdk_imlib.so: undefined reference to `png_create_info_struct'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_set_quality'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_stdio_dest'
/usr/lib/libgdk_imlib.so: undefined reference to `jpeg_write_scanlines'
/usr/lib/libgdk_imlib.so: undefined reference to `png_destroy_write_struct'
/usr/lib/libgdk_imlib.so: undefined reference to `png_set_shift'
/usr/lib/libgdk_imlib.so: undefined reference to `TIFFGetField'
/usr/lib/libgdk_imlib.so: undefined reference to `png_init_io'
collect2: ld returned 1 exit status
make[2]: *** [gODBCConfig] Error 1
make[2]: Leaving directory `/var/lib/portage/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/var/lib/portage/tmp/portage/unixODBC-2.2.11-r1/work/unixODBC-2.2.11/gODBCConfig'
make: *** [all] Error 2

!!! ERROR: dev-db/unixODBC-2.2.11-r1 failed.
!!! Function src_compile, Line 71, Exitcode 2
===============================================================================

I guess there is a library missing somewhere, but a revdep-rebuild on the machine reveals no problems. I can only infer that the problem library is inside the unixODBC build.

My emerge info details are:

Gentoo Base System version 1.6.14
Portage 2.0.54 (default-linux/x86/2005.0, gcc-3.4.4, glibc-2.3.5-r2, 2.6.14-gentoo-r5 i686)
=================================================================
System uname: 2.6.14-gentoo-r5 i686 AMD Athlon(tm) MP 2800+
dev-lang/python:     2.3.4-r1, 2.4.2
sys-apps/sandbox:    1.2.12
sys-devel/autoconf:  2.13, 2.59-r6
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r1
sys-devel/binutils:  2.16.1
sys-devel/libtool:   1.5.22
virtual/os-headers:  2.6.8.1-r1, 2.6.8.1-r2
ACCEPT_KEYWORDS="x86"
AUTOCLEAN="yes"
CBUILD="i686-pc-linux-gnu"
CFLAGS="-march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer"
CHOST="i686-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/kde/2/share/config /usr/kde/3.4/env /usr/kde/3.4/share/config /usr/kde/3.4/shutdown /usr/kde/3/share/config /usr/lib/X11/xkb /usr/lib/mozilla/defaults/pref /usr/share/config /usr/share/texmf/dvipdfm/config/ /usr/share/texmf/dvips/config/ /usr/share/texmf/tex/generic/config/ /usr/share/texmf/tex/platex/config/ /usr/share/texmf/xdvi/ /var/qmail/control"
CONFIG_PROTECT_MASK="/etc/gconf /etc/terminfo /etc/env.d"
CXXFLAGS="-march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer"
DISTDIR="/usr/portage/distfiles"
FEATURES="autoconfig distlocks sandbox sfperms strict"
GENTOO_MIRRORS="ftp://ftp.mirrorservice.org/sites/www.ibiblio.org/gentoo/ ftp://mirror.switch.ch/mirror/gentoo ftp://ftp.solnet.ch/mirror/Gentoo"
LINGUAS="en_GB"
MAKEOPTS="-j5"
PKGDIR="/usr/portage/packages"
PORTAGE_TMPDIR="/var/lib/portage/tmp"
PORTDIR="/usr/portage"
SYNC="rsync://rsync.europe.gentoo.org/gentoo-portage"
USE="x86 3dnow X acl ada alsa apm arts audiofile avi berkdb bitmap-fonts bzip2 cdr crypt cups curl doc dvd eds emboss encode esd exif expat f77 fam flac foomaticdb fortran gcj gd gdbm gif glut gmp gnome gpm gstreamer gtk gtk2 gtkhtml idn imagemagick imlib ipv6 java jpeg kde lcms libg++ libwww mad mikmod mmx mng motif mozilla mp3 mpeg ncurses nls nptl nptlonly objc odbc ogg oggvorbis opengl oss pam pcre pdflib perl png postgres python qt quicktime readline sdl slang spell sqlite sse ssl svga tcltk tcpd tiff truetype truetype-fonts type1-fonts vorbis xine xml2 xmms xv zlib linguas_en_GB userland_GNU kernel_linux elibc_glibc"
Unset:  ASFLAGS, CTARGET, LANG, LC_ALL, LDFLAGS, PORTDIR_OVERLAY




Comment 1


Jakub Moc (RETIRED)






          2006-01-27 10:40:34 UTC
        

Run revdep-rebuild...




Comment 2


David W Noon





          2006-01-27 11:13:07 UTC
        

I have run revdep-rebuild, which I mentioned in the initial report. The build still breaks.




Comment 3


Jakub Moc (RETIRED)






          2006-01-27 11:17:14 UTC
        

(In reply to comment #2)
> I have run revdep-rebuild, which I mentioned in the initial report. The build
> still breaks.

Yea, and your linking is still screwed; this is not unixODBC bug. Re-emerge whatever package that provides /usr/lib/libgdk_imlib.so (equery b /usr/lib/libgdk_imlib.so should tell you which one).




Comment 4


David W Noon





          2006-01-27 15:38:56 UTC
        

(In reply to comment #3)
> (In reply to comment #2)
> > I have run revdep-rebuild, which I mentioned in the initial report. The build
> > still breaks.
> 
> Yea, and your linking is still screwed; this is not unixODBC bug. Re-emerge
> whatever package that provides /usr/lib/libgdk_imlib.so (equery b
> /usr/lib/libgdk_imlib.so should tell you which one).

I have re-emerged the media-libs/imlib package, which owns the library in question. The build of unixODBC still fails with the same missing symbols during the link. Do you have any more ideas?





Comment 5


John N. Laliberte (RETIRED)






          2006-01-28 06:04:59 UTC
        

no idea why this was assigned to gnome




Comment 6


David W Noon





          2006-01-29 03:46:10 UTC
        

I ran an emerge about 00:30 this morning and the link step in question gave the following results:

/bin/sh ../libtool --mode=link i686-pc-linux-gnu-gcc  -march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer -Wall -Wunused    -o gODBCConfig  main.o -rdynamic -L/usr/lib -rdynamic -lgnomeui -lart_lgpl -lgdk_imlib -lSM -lICE -lgtk -lgdk -lgmodule -lXi -lXext -lX11 -lgnome -lgnomesupport -lesd -lasound -laudiofile -lm -ldb1 -lglib  -L/var/lib/portage/tmp/portage/unixODBC-2.2.6/work/unixODBC-2.2.6/lib -lodbcinst libgtkodbcconfig.la  
i686-pc-linux-gnu-gcc -march=athlon-mp -mmmx -m3dnow -msse -mfpmath=sse,387 -O3 -pipe -fomit-frame-pointer -Wall -Wunused -o .libs/gODBCConfig main.o -rdynamic -rdynamic  -L/usr/lib /usr/lib/libgnomeui.so /usr/lib/libart_lgpl.so /usr/lib/libgdk_imlib.so -lSM -lICE /usr/lib/libgtk.so /usr/lib/libgdk.so /usr/lib/libgmodule.so -lXi -lXext -lX11 /usr/lib/libgnome.so /usr/lib/libgnomesupport.so -lz /usr/lib/libesd.so /usr/lib/libasound.so /usr/lib/libaudiofile.so -lm -ldb1 /usr/lib/libglib.so -L/var/lib/portage/tmp/portage/unixODBC-2.2.6/work/unixODBC-2.2.6/lib /usr/lib/libodbcinst.so -ldl -lpthread ./.libs/libgtkodbcconfig.so
./.libs/libgtkodbcconfig.so: undefined reference to `iniObjectNext'
./.libs/libgtkodbcconfig.so: undefined reference to `iniElement'
./.libs/libgtkodbcconfig.so: undefined reference to `iniPropertyEOL'
./.libs/libgtkodbcconfig.so: undefined reference to `iniProperty'
./.libs/libgtkodbcconfig.so: undefined reference to `iniValue'
./.libs/libgtkodbcconfig.so: undefined reference to `iniClose'
./.libs/libgtkodbcconfig.so: undefined reference to `iniObjectFirst'
./.libs/libgtkodbcconfig.so: undefined reference to `iniPropertyNext'
./.libs/libgtkodbcconfig.so: undefined reference to `iniOpen'
./.libs/libgtkodbcconfig.so: undefined reference to `iniObjectEOL'
./.libs/libgtkodbcconfig.so: undefined reference to `iniObject'
./.libs/libgtkodbcconfig.so: undefined reference to `iniPropertyFirst'
./.libs/libgtkodbcconfig.so: undefined reference to `iniToUpper'
collect2: ld returned 1 exit status
make[2]: *** [gODBCConfig] Error 1

I weent to bed and allowed the cron jobs to perform their housekeeping tasks during the wee small hours. The most significant of these is the emerge sybc that runs at 02:10 each morning, followed by an emerge --pretend --update world. This morning it gave the following results:

Calculating world dependencies  ..... ..... .. ...done!
[ebuild     U ] sys-apps/attr-2.4.24 [2.4.19-r1] 
[ebuild     U ] sys-apps/acl-2.2.32 [2.2.27] 
[ebuild  N    ] app-text/jadetex-3.13-r1  
[ebuild     U ] dev-db/unixODBC-2.2.11-r1 [2.2.6] 
[ebuild     U ] x11-themes/gtk-engines-2.6.7 [2.6.6] 
[ebuild     U ] sys-fs/xfsprogs-2.7.3 [2.6.25] 
[ebuild     UD] dev-lang/gnat-3.15p-r5 [3.45] 
[ebuild     U ] dev-db/sqlite-2.8.16-r1 [2.8.14] 
[ebuild     U ] dev-java/gnu-classpath-0.14 [0.12] 

As you can see, unixODBC is on the list. It then compiled and linked cleanly as part of the emerge --update world run! I'm damned if I know what change in that list caused it to work, but there it is.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

