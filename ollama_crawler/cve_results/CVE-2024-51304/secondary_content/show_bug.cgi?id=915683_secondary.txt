Title: 915683 – net-dns/nsd-4.7.0 - /.../protoc-c: symbol lookup error: .../protoc-c: undefined symbol: _ZN6google8protobuf8internal17AssignDescriptorsEPFPKNS1_15Desc
URL: https://bugs.gentoo.org/show_bug.cgi?id=915683

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 915683
net-dns/nsd-4.7.0 - /.../protoc-c: symbol lookup error: .../protoc-c: undefined symbol: _ZN6google8protobuf8internal17AssignDescriptorsEPFPKNS1_15Desc
Last modified: 2024-02-25 01:38:40 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 915683 
      - net-dns/nsd-4.7.0 - /.../protoc-c: symbol lookup error: .../protoc-c: undefined symbol: _ZN6google8protobuf8internal17AssignDescriptorsEPFPKNS1_15Desc


Summary:
net-dns/nsd-4.7.0 - /.../protoc-c: symbol lookup error: .../protoc-c: undefin...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Joshua Kinard








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2023-10-13 14:23 UTC by Toralf Förster





      Modified:
    
2024-02-25 01:38 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



kumba









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




emerge-info.txt

              (emerge-info.txt,17.69 KB,
                text/plain)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





emerge-history.txt

              (emerge-history.txt,174.98 KB,
                text/plain)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





environment

              (environment,80.55 KB,
                text/plain)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





etc.clang.tar.xz

              (etc.clang.tar.xz,1.05 KB,
                application/x-xz)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





etc.portage.tar.xz

              (etc.portage.tar.xz,30.98 KB,
                application/x-xz)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





logs.tar.xz

              (logs.tar.xz,14.85 KB,
                application/x-xz)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





net-dns:nsd-4.7.0:20231013-122645.log

              (net-dns:nsd-4.7.0:20231013-122645.log,16.51 KB,
                text/plain)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





temp.tar.xz

              (temp.tar.xz,22.85 KB,
                application/x-xz)

            
2023-10-13 14:23 UTC,

            Toralf Förster




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Toralf Förster






          2023-10-13 14:23:18 UTC
        

x86_64-pc-linux-gnu-gcc -I. -O2 -pipe -march=native -fno-diagnostics-color -I/usr/include/google -c xfrd-disk.c
x86_64-pc-linux-gnu-gcc -I. -O2 -pipe -march=native -fno-diagnostics-color -I/usr/include/google -c xfrd-notify.c
x86_64-pc-linux-gnu-gcc -I. -O2 -pipe -march=native -fno-diagnostics-color -I/usr/include/google -c xfrd-tcp.c
x86_64-pc-linux-gnu-gcc -I. -O2 -pipe -march=native -fno-diagnostics-color -I/usr/include/google -c xfrd.c
x86_64-pc-linux-gnu-gcc -I. -O2 -pipe -march=native -fno-diagnostics-color -I/usr/include/google -c remote.c
/usr/bin/protoc-c --c_out=. --proto_path=. ./dnstap/dnstap.proto
/usr/bin/protoc-c: symbol lookup error: /usr/bin/protoc-c: undefined symbol: _ZN6google8protobuf8internal17AssignDescriptorsEPFPKNS1_15DescriptorTableEvEPN4absl12lts_202308029once_flagERKNS0_8MetadataE
make: *** [Makefile:380: dnstap/dnstap.pb-c.c] Error 127
make: *** Waiting for unfinished jobs....

  -------------------------------------------------------------------

  This is an unstable amd64 chroot image at a tinderbox (==build bot)
  name: 23.0_systemd-20231011-093003

  -------------------------------------------------------------------

gcc-config -l:
 [1] x86_64-pc-linux-gnu-13 *
clang/llvm (if any):
clang version 17.0.2
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm/17/bin
Configuration file: /etc/clang/x86_64-pc-linux-gnu-clang.cfg
/usr/lib/llvm/17
17.0.2
Python 3.11.6
Available Ruby profiles:
  [1]   ruby31 (with Rubygems) *
Available Rust versions:
  [1]   rust-bin-1.73.0 *
php cli (if any):
go version go1.21.1 linux/amd64

  HEAD of ::gentoo
commit 88daeebf9c093024ff827187ce4663fe50cbe090
Author: Repository mirror & CI <repomirrorci@gentoo.org>
Date:   Fri Oct 13 11:46:58 2023 +0000

    2023-10-13 11:46:58 UTC

emerge -qpvO net-dns/nsd
[ebuild  N    ] net-dns/nsd-4.7.0  USE="bind8-stats dnstap libevent nsec3 ratelimit ssl systemd -debug -minimal-responses -mmap -munin -root-server"




Comment 1


Toralf Förster






          2023-10-13 14:23:19 UTC
        

Created attachment 872692 [details]
emerge-info.txt




Comment 2


Toralf Förster






          2023-10-13 14:23:20 UTC
        

Created attachment 872693 [details]
emerge-history.txt




Comment 3


Toralf Förster






          2023-10-13 14:23:21 UTC
        

Created attachment 872694 [details]
environment




Comment 4


Toralf Förster






          2023-10-13 14:23:22 UTC
        

Created attachment 872695 [details]
etc.clang.tar.xz




Comment 5


Toralf Förster






          2023-10-13 14:23:23 UTC
        

Created attachment 872696 [details]
etc.portage.tar.xz




Comment 6


Toralf Förster






          2023-10-13 14:23:24 UTC
        

Created attachment 872697 [details]
logs.tar.xz




Comment 7


Toralf Förster






          2023-10-13 14:23:25 UTC
        

Created attachment 872698 [details]
net-dns:nsd-4.7.0:20231013-122645.log




Comment 8


Toralf Förster






          2023-10-13 14:23:26 UTC
        

Created attachment 872699 [details]
temp.tar.xz




Comment 9


Joshua Kinard






          2024-02-25 01:38:40 UTC
        

Unable to reproduce.  I have a feeling this was more related to sys-devel/gcc, as the gcc version in the tinderbox instance says "gcc-13.2.1_p20230826", and the missing linker symbol references a date very close to that - 20230829.  Possible one of the later updates to sys-devel/gcc fixed the cause of this bug, as my box has sys-devel/gcc-13.2.1_p20240210 installed and /usr/bin/protoc-c can execute the failing command fine.  ldd on that binary doesn't show anything out of the ordinary, either.

If this is able to be reproduced against nsd-4.8.0-r1, then please reopen this bug.  Thanks!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

