Title: 538776 – X Key Compose stopped working in most applications (except Konsole)
URL: https://bugs.gentoo.org/show_bug.cgi?id=538776

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 538776
X Key Compose stopped working in most applications (except Konsole)
Last modified: 2015-02-04 23:05:33 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 538776 
      - X Key Compose stopped working in most applications (except Konsole)


Summary:
X Key Compose stopped working in most applications (except Konsole)
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] KDE

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo KDE team








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2015-02-04 09:42 UTC by Dominik Wezel





      Modified:
    
2015-02-04 23:05 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Dominik Wezel





          2015-02-04 09:42:58 UTC
        

I have a customized /usr/share/X11/locale/en_US.UTF-8/Compose file which worked fine in practically all applications (except OpenOffice, they seem to use their own ^%$@*&}{~<?;"]% keyboard input handler.

Since one of the last system updates (emerge -uND world) however, my Xcompose file seems to be respected only in Konsole for as far as I can see.  It seems as if the original key compositions are in place now — one example:  I defined compose-m-minus as m-dash (whereas in the default configuration, the m-dash is composed from compose-minus-minus-minus).  In konsole, I still can use compose-m-minus (and compose-minus-minus-minus does not work), whereas everywhere else (as far as I can see), I can only get the m-dash by composing it with compose-minus-minus-minus (and compose-m-minus does not work).

What's going wrong?

Reproducible: Always

Steps to Reproduce:
1. Edit your /usr/share/X11/locale/en_US.UTF-8/Compose (or whatever locale you use instad of en_US.UTF-8), adding the following line at the end (this won't interfere with anything else per se):
<Multi_key> <m> <minus>                 : "—"   U2014 # EM DASH
2. In the SystemConfig/Input Devices/Keyboard/Advanced, select CapsLock in the "Position of Compose key" setting.
2. Restart X
3. Hit <caps lock> M -
   In konsole, you might see a long dash (—), in all other applications, you might hear a beep instead.
Actual Results:  
Beeps (to signal that the key composition was not understood)

Expected Results:  
Produces the m-dash (—)




Comment 1


Dominik Wezel





          2015-02-04 23:05:33 UTC
        

When I noticed that only non-KDE applications were actually affeted, I remembered that I had to set the GTK_IM_MODULE variable to make the Compose file work.

The solution then was to add the following lines to /etc/environment:
GTK_IM_MODULE=xim
QT_IM_MODULE=xim









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

