Title: 924607 – dev-qt/qtquicktimeline-6.6.2 error "TARGET Qt::Quick" is not met
URL: https://bugs.gentoo.org/show_bug.cgi?id=924607

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 924607
dev-qt/qtquicktimeline-6.6.2 error "TARGET Qt::Quick" is not met
Last modified: 2024-02-15 11:46:39 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 924607 
      - dev-qt/qtquicktimeline-6.6.2 error "TARGET Qt::Quick" is not met


Summary:
dev-qt/qtquicktimeline-6.6.2 error "TARGET Qt::Quick" is not met
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

Current packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Qt Bug Alias








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2024-02-14 22:07 UTC by Oleksa





      Modified:
    
2024-02-15 11:46 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



ionen
leo









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




Log with CMake Error

              (QT-6.2.2.-AfterUpdateProblem,9.67 KB,
                text/plain)

            
2024-02-14 22:07 UTC,

            Oleksa




Details





qtquicktimeline-no-quiet.patch

              (qtquicktimeline-no-quiet.patch,367 bytes,
                patch)

            
2024-02-14 22:22 UTC,

            Ionen Wolkens




Details
            | Diff





QT6-Declarative-OK

              (QT-Declarative-6-Installed-6.6.2-OK.png,10.32 KB,
                image/png)

            
2024-02-15 09:16 UTC,

            Oleksa




Details





QT6-declarative-pvqO-output

              (QT-Declarative-6-pvqO-6.6.2-OK.png,2.54 KB,
                image/png)

            
2024-02-15 09:17 UTC,

            Oleksa




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Oleksa





          2024-02-14 22:07:55 UTC
        

Created attachment 884994 [details]
Log with CMake Error

Hello there!
After update up to 6.6.2 some QT packages unable to compile.

They are:
dev-qt/qtquicktimeline-6.6.2
dev-qt/qtquick3d-6.6.2

I got error:

CMake Error at CMakeLists.txt:21 (message):
Skipping the build as the condition "TARGET Qt::Quick" is not met.

Please, check and fix. Thanks!




Comment 1


Ionen Wolkens






          2024-02-14 22:22:47 UTC
        

Created attachment 884996 [details, diff]
qtquicktimeline-no-quiet.patch

Can't reproduce and both build fine.

Did it somehow not update qtdeclarative:6 first? (it depends on qtdeclarative-6.6.2 so it should, and it's what provides Qt::Quick)

What does `emerge -pvqO qtdeclarative:6` show?

If updated fine, to figure out why it failed would need to drop the QUIET, what does it show if use the attached patch? (can delete the patch after)




Comment 2


Ionen Wolkens






          2024-02-15 08:44:37 UTC
        

Also, does this file exist?

    /usr/lib64/cmake/Qt6Quick/Qt6QuickConfig.cmake

Just in case qtdeclarative didn't get installed properly, Qt's build system can be fickle and do this sometime (we try to prevent a few cases of this but there could be more).




Comment 3


Oleksa





          2024-02-15 09:15:08 UTC
        

Hello Ionen!
Thank You for answer.

>>Did it somehow not update qtdeclarative:6 first?
>>(it depends on qtdeclarative-6.6.2 so it should,
>>and it's what provides Qt::Quick)

Yes, qtdeclarative:6 was updated first (please, see screenshot attached)

>>What does `emerge -pvqO qtdeclarative:6` show?

Please see screen attached

>>Also, does this file exist?
>>/usr/lib64/cmake/Qt6Quick/Qt6QuickConfig.cmake

No, it does not.
Just folder Qt6Quick does not exists

These folders are present:

/usr/lib64/cmake/Qt6Quick3D:
/usr/lib64/cmake/Qt6Quick3DAssetImport:
/usr/lib64/cmake/Qt6Quick3DAssetUtils:
/usr/lib64/cmake/Qt6Quick3DEffects:
/usr/lib64/cmake/Qt6Quick3DGlslParserPrivate:
/usr/lib64/cmake/Qt6Quick3DHelpers:
/usr/lib64/cmake/Qt6Quick3DHelpersImpl:
/usr/lib64/cmake/Qt6Quick3DIblBaker:
/usr/lib64/cmake/Qt6Quick3DParticleEffects:
/usr/lib64/cmake/Qt6Quick3DParticles:
/usr/lib64/cmake/Qt6Quick3DRuntimeRender:
/usr/lib64/cmake/Qt6Quick3DTools:
/usr/lib64/cmake/Qt6Quick3DUtils:
/usr/lib64/cmake/Qt6QuickTimeline:




Comment 4


Oleksa





          2024-02-15 09:16:19 UTC
        

Created attachment 885006 [details]
QT6-Declarative-OK




Comment 5


Oleksa





          2024-02-15 09:17:00 UTC
        

Created attachment 885007 [details]
QT6-declarative-pvqO-output




Comment 6


Ionen Wolkens






          2024-02-15 09:24:40 UTC
        

Do you still have the build.log for qtdeclarative? Something clearly went wrong there.

Re-emerging it (emerge -1 qtdeclarative:6) may still do the same to allow seeing what happened.




Comment 7


Ionen Wolkens






          2024-02-15 09:36:36 UTC
        

Think the only way qtdeclarative would skip Quick is if this failed:

    if(TARGET Qt::Gui AND TARGET Qt::qsb AND QT_FEATURE_qml_animation)
        add_subdirectory(quick)

Do these files exist?

    /usr/lib64/cmake/Qt6Gui/Qt6GuiConfig.cmake
    /usr/lib64/cmake/Qt6ShaderTools/Qt6ShaderToolsConfig.cmake

(possible that the actual problem goes back further packages -- I suspect your *FLAGS may possibly have broken something somewhere)




Comment 8


Oleksa





          2024-02-15 09:48:33 UTC
        

Re-compiling rignt now qtdeclarative:6 - it's sloooowly
---
gentoo-plasma ~ #
gentoo-plasma ~ # ls -la  /usr/lib64/cmake/Qt6Gui/Qt6GuiConfig.cmake
-rw-r--r-- 1 root root 6009 Feb 14 16:02 /usr/lib64/cmake/Qt6Gui/Qt6GuiConfig.cmake
gentoo-plasma ~ #
gentoo-plasma ~ #
gentoo-plasma ~ # ls -la     /usr/lib64/cmake/Qt6ShaderTools/Qt6ShaderToolsConfig.cmake
-rw-r--r-- 1 root root 6497 Feb 14 19:33 /usr/lib64/cmake/Qt6ShaderTools/Qt6ShaderToolsConfig.cmake
gentoo-plasma ~ #
gentoo-plasma ~ #


Yes, both files in place




Comment 9


Ionen Wolkens






          2024-02-15 10:42:45 UTC
        

Been staring at qtdeclarative's cmake files but have no idea how it could've skipped Quick under these conditions (even with same *FLAGS).

Hopefully your rebuild should restore it, not that it'll answer what happened.

Should be seeing this early in the qtdeclarative:6 build:

    Qt Quick:
      AnimatedImage item ..................... yes
      Canvas item ............................ yes
      Support for Qt Quick Designer .......... yes
    ...

rather than

    Qt Quick:
      Qt Quick support ....................... no




Comment 10


Oleksa





          2024-02-15 11:19:56 UTC
        

Ionen, looks like issue fixes after re-compile qtdeclarative:6
Next, I got similar issue with dev-qt/qtlocation (with CMakeLists.txt missed)
Then I have re-compiled packages in deps again and problem was solved
Thank You very much for help!




Comment 11


Ionen Wolkens






          2024-02-15 11:46:39 UTC
        

Glad to hear it's sorted then.

Would've liked to figure out how this happened (there may be a real issue to fix) but it'll probably be difficult if the issue went away and haven't heard of anyone else run into this with the 6.6.2 upgrade so far.

Guess I'll close this for now, will just keep it in mind.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

