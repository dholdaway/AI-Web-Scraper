Title: 265824 – dev-libs/redland-1.0.8 fails to compile after upgrading to dev-libs/libpcre-7.9_rc2
URL: https://bugs.gentoo.org/show_bug.cgi?id=265824

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 265824
dev-libs/redland-1.0.8 fails to compile after upgrading to dev-libs/libpcre-7.9_rc2
Last modified: 2009-04-12 15:04:57 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 265824 
      - dev-libs/redland-1.0.8 fails to compile after upgrading to dev-libs/libpcre-7.9_rc2


Summary:
dev-libs/redland-1.0.8 fails to compile after upgrading to dev-libs/libpcre-7...
        









Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-04-12 05:52 UTC by Li You





      Modified:
    
2009-04-12 15:04 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Li You





          2009-04-12 05:52:23 UTC
        

As the topic says.

Reproducible: Always

Steps to Reproduce:
1. install dev-libs/libpcre-7.9_rc2
2. emerge redland
3.

Actual Results:  
/bin/sh ../libtool --tag=CC   --mode=link i686-pc-linux-gnu-gcc -I/usr/include/db4.6 -I/usr/include/rasqal     -DLIBRDF_INTERNAL=1 -Os -march=pentium-m -pipe -fomit-frame-pointer -version-info 0:0:0 -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s -L/usr/lib -lrasqal -L/usr/lib -lraptor   -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s -ldb-4.6 -lcrypto     -lpthread   -o librdf.la -rpath /usr/lib rdf_init.lo rdf_uri.lo rdf_node.lo rdf_statement.lo rdf_digest.lo rdf_hash.lo rdf_hash_cursor.lo rdf_hash_memory.lo rdf_model.lo rdf_model_storage.lo rdf_iterator.lo rdf_concepts.lo rdf_avltree.lo rdf_list.lo rdf_storage.lo rdf_storage_list.lo rdf_storage_hashes.lo rdf_storage_trees.lo rdf_storage_sql.lo rdf_stream.lo rdf_parser.lo rdf_parser_raptor.lo rdf_heuristics.lo rdf_files.lo rdf_utf8.lo rdf_query.lo rdf_query_results.lo rdf_query_triples.lo rdf_query_rasqal.lo rdf_serializer.lo rdf_serializer_raptor.lo rdf_log.lo  rdf_storage_file.lo     rdf_digest_openssl.lo  rdf_hash_bdb.lo                                          
i686-pc-linux-gnu-gcc -shared  .libs/rdf_init.o .libs/rdf_uri.o .libs/rdf_node.o .libs/rdf_statement.o .libs/rdf_digest.o .libs/rdf_hash.o .libs/rdf_hash_cursor.o .libs/rdf_hash_memory.o .libs/rdf_model.o .libs/rdf_model_storage.o .libs/rdf_iterator.o .libs/rdf_concepts.o .libs/rdf_avltree.o .libs/rdf_list.o .libs/rdf_storage.o .libs/rdf_storage_list.o .libs/rdf_storage_hashes.o .libs/rdf_storage_trees.o .libs/rdf_storage_sql.o .libs/rdf_stream.o .libs/rdf_parser.o .libs/rdf_parser_raptor.o .libs/rdf_heuristics.o .libs/rdf_files.o .libs/rdf_utf8.o .libs/rdf_query.o .libs/rdf_query_results.o .libs/rdf_query_triples.o .libs/rdf_query_rasqal.o .libs/rdf_serializer.o .libs/rdf_serializer_raptor.o .libs/rdf_log.o .libs/rdf_storage_file.o .libs/rdf_digest_openssl.o .libs/rdf_hash_bdb.o  -L/usr/lib /usr/lib/librasqal.so /usr/lib/libraptor.so /usr/lib/libdb-4.6.so -lcrypto -lpthread  -march=pentium-m -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -Wl,-soname -Wl,librdf.so.0 -o .libs/librdf.so.0.0.0                                                                
(cd .libs && rm -f librdf.so.0 && ln -s librdf.so.0.0.0 librdf.so.0)            
(cd .libs && rm -f librdf.so && ln -s librdf.so.0.0.0 librdf.so)                
i686-pc-linux-gnu-ar cru .libs/librdf.a  rdf_init.o rdf_uri.o rdf_node.o rdf_statement.o rdf_digest.o rdf_hash.o rdf_hash_cursor.o rdf_hash_memory.o rdf_model.o rdf_model_storage.o rdf_iterator.o rdf_concepts.o rdf_avltree.o rdf_list.o rdf_storage.o rdf_storage_list.o rdf_storage_hashes.o rdf_storage_trees.o rdf_storage_sql.o rdf_stream.o rdf_parser.o rdf_parser_raptor.o rdf_heuristics.o rdf_files.o rdf_utf8.o rdf_query.o rdf_query_results.o rdf_query_triples.o rdf_query_rasqal.o rdf_serializer.o rdf_serializer_raptor.o rdf_log.o rdf_storage_file.o rdf_digest_openssl.o rdf_hash_bdb.o                                                  
i686-pc-linux-gnu-ranlib .libs/librdf.a                                         
creating librdf.la                                                              
/bin/sed: can't read /usr/lib/libpcre.la: No such file or directory             
libtool: link: `/usr/lib/libpcre.la' is not a valid libtool archive             
make[3]: *** [librdf.la] Error 1                                                
make[3]: Leaving directory `/var/tmp/portage/dev-libs/redland-1.0.8/work/redland-1.0.8/librdf'                                                                  
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/var/tmp/portage/dev-libs/redland-1.0.8/work/redland-1.0.8/librdf'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/var/tmp/portage/dev-libs/redland-1.0.8/work/redland-1.0.8/librdf'
make: *** [all-recursive] Error 1
 *
 * ERROR: dev-libs/redland-1.0.8 failed.
 * Call stack:
 *               ebuild.sh, line   48:  Called src_compile
 *             environment, line  113:  Called die
 * The specific snippet of code:
 *       emake || die "emake failed."
 *  The die message:
 *   emake failed.
 *
 * If you need support, post the topmost build error, and the call stack if relevant.
 * A complete build log is located at '/var/tmp/portage/dev-libs/redland-1.0.8/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/dev-libs/redland-1.0.8/temp/environment'.
 *



 I think it's related to dev-libs/libpcre-7.9_rc2 because in that version it "No longer include .la and .a files", as its changelog says. And you'll see this line

dependency_libs=' -L/usr/lib /usr/lib/librasqal.la /usr/lib/libpcre.la -lbz2 /usr/lib/libmpfr.la /usr/lib/libgmp.la /usr/lib/libraptor.la /usr/lib/libxslt.la /usr/lib/libxml2.la -ldl -lz -lm /usr/lib/libdb-4.6.la -lcrypto -lpthread'

in /var/tmp/portage/dev-libs/redland-1.0.8/work/redland-1.0.8/librdf/librdf.la after the compilation fails.

emerge --info:
Portage 2.2_rc29 (default/linux/x86/2008.0/desktop, gcc-4.3.3, glibc-2.9_p20081201-r2, 2.6.28-reiser4 i686)                                                     
=================================================================               
System uname: Linux-2.6.28-reiser4-i686-Intel-R-_Pentium-R-_M_processor_1.70GHz-with-gentoo-2.0.0                                                               
Timestamp of tree: Sun, 12 Apr 2009 04:15:01 +0000                              
ccache version 2.4 [enabled]                                                    
app-shells/bash:     4.0_p17                                                    
dev-lang/python:     2.6.1-r1                                                   
dev-util/ccache:     2.4-r8                                                     
dev-util/cmake:      2.6.3-r1                                                   
sys-apps/baselayout: 2.0.0                                                      
sys-apps/openrc:     0.4.3-r1                                                   
sys-apps/sandbox:    1.9                                                        
sys-devel/autoconf:  2.13, 2.63-r1                                              
sys-devel/automake:  1.5, 1.7.9-r1, 1.9.6-r2, 1.10.2                            
sys-devel/binutils:  2.19.1-r1                                                  
sys-devel/gcc-config: 1.4.1                                                     
sys-devel/libtool:   2.2.6a                                                     
virtual/os-headers:  2.6.28-r1                                                  
ACCEPT_KEYWORDS="x86 ~x86"                                                      
CBUILD="i686-pc-linux-gnu"                                                      
CFLAGS="-Os -march=pentium-m -pipe -fomit-frame-pointer"                        
CHOST="i686-pc-linux-gnu"                                                       
CONFIG_PROTECT="/etc /usr/share/config"                                         
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/eselect/postgresql /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/udev/rules.d"                        
CXXFLAGS="-Os -march=pentium-m -pipe -fomit-frame-pointer"                      
DISTDIR="/usr/portage/distfiles"                                                
FEATURES="assume-digests ccache distlocks fixpackages parallel-fetch preserve-libs protect-owned sandbox sfperms unmerge-orphans userfetch"                     
GENTOO_MIRRORS="ftp://gentoo.anheng.com.cn/gentoo"                              
LANG="en_US.utf8"                                                               
LDFLAGS="-Wl,-O1 -Wl,--enable-new-dtags -Wl,--sort-common -s"                   
LINGUAS="en"                                                                    
MAKEOPTS="-j2"                                                                  
PKGDIR="/usr/portage/packages"                                                  
PORTAGE_CONFIGROOT="/"                                                          
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"                                                  
PORTAGE_TMPDIR="/var/tmp"                                                       
PORTDIR="/usr/portage"                                                          
PORTDIR_OVERLAY="/usr/local/portage/u235ly"
SYNC="rsync://mirror.averse.net/gentoo-portage"
USE="X aac acl acpi alsa bash-completion berkdb branding bzip2 cairo cdr cjk cli cracklib crypt cscope cups dbus dri dts dvd dvdr dvdread eds emboss encode evofam fasttrack fbcon firefox fortran gif gnome gnutella gpm gtk hal iconv ipv6 isdnlog jpeg kde ldap libnotify live mad midi mikmod mmx mmxext mp3 mpeg mudflap ncurses nptl nptlonly ogg opengl openmp pam pcre pdf perl png ppds pppd python qt3support qt4 quicktime readline reflection session spell spl sse sse2 ssl startup-notification svg sysfs tcpd theora threads tiff truetype unicode usb vim-with-x vorbis win32codecs x86 xml xorg xulrunner xv zlib" ALSA_CARDS="intel8x0" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en" USERLAND="GNU" VIDEO_CARDS="radeon"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, LC_ALL, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Lars Wendler (Polynomial-C) (RETIRED)






          2009-04-12 07:24:38 UTC
        

Did you run "revdep-rebuild" (from app-portage/gentoolkit package) after you upgraded the libpcre package?




Comment 2


Li You





          2009-04-12 14:25:49 UTC
        

I've done what you told, and it's solved.
Thanks!









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

