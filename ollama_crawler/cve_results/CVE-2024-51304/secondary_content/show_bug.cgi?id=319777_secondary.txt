Title: 319777 – cat(ing) a list of packages to portage doesn't work anymore
URL: https://bugs.gentoo.org/show_bug.cgi?id=319777

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 319777
cat(ing) a list of packages to portage doesn't work anymore
Last modified: 2010-05-15 14:15:30 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 319777 
      - cat(ing) a list of packages to portage doesn't work anymore


Summary:
cat(ing) a list of packages to portage doesn't work anymore
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Core system

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux bug wranglers








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2010-05-14 21:07 UTC by Matt





      Modified:
    
2010-05-15 14:15 UTC
      (History)
    




          CC List:
        

2 
          users
          
            (show)
          



SebastianLuther
truedfx









See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Matt





          2010-05-14 21:07:14 UTC
        

in the past passing a list of packages to portage via cat and emerging that list was possible - e.g.:

emerge -a1v `cat emerge.todo`

today along a new installation of a portage-system and using sys-apps/portage-2.2_rc67 it didn't work anymore

more info: http://forums.gentoo.org/viewtopic-t-828010.html

this is quite unfortunate since portage from time to time fails at packages in the queue and simply isn't able to resume (via emerge --resume --keep-going) anymore - it says the resume queue is empty

please make this possible again and/or think of providing a replacement

many thanks in advance for your input & support




Comment 1


Harald van Dijk (RETIRED)






          2010-05-15 06:52:37 UTC
        

"it didn't work anymore" isn't a useful bugreport. What doesn't work? What is in emerge.todo? How does it not work? Does it give an error message, do the wrong thing, or something else?

What likely happened is that your emerge.todo contains something that isn't a valid argument to emerge, possibly due to slightly altered output in emerge -p --resume. If that is the case, there is no bug here. If that is not the case, please provide enough information so that others can see there is a bug.




Comment 2


Sebastian Luther (few)





          2010-05-15 14:07:07 UTC
        

$ echo "app-text/ding" > /tmp/emerge.todo
$ emerge --ignore-default-opts -a1v `cat /tmp/emerge.todo` 
superuser access is required... adding --pretend to options


These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] app-text/ding-1.6  3,466 kB

Total: 1 package (1 reinstall), Size of downloads: 3,466 kB

$ emerge --version
Portage 2.2_rc67 (default/linux/amd64/10.0/desktop/gnome, gcc-4.4.3, glibc-2.10.1-r1, 2.6.32-gentoo-r7 x86_64)

Seems to work as you expect it.





Comment 3


Matt





          2010-05-15 14:13:03 UTC
        

a (real world) test-case would be to emerge a list of fonts: 

media-fonts/alee-fonts
media-fonts/arabeyes-fonts
media-fonts/arkpandora
media-fonts/arphicfonts
media-fonts/baekmuk-fonts
media-fonts/cardo
media-fonts/cheapskatefonts
media-fonts/culmus
media-fonts/ekushey-bangla-fonts
media-fonts/encodings
media-fonts/essays1743
media-fonts/farsi-fonts
media-fonts/fgdc-emergency
media-fonts/font-adobe-100dpi
media-fonts/font-adobe-75dpi
media-fonts/font-adobe-utopia-100dpi
media-fonts/font-adobe-utopia-75dpi
media-fonts/font-adobe-utopia-type1
media-fonts/font-alias
media-fonts/font-arabic-misc
media-fonts/font-bh-100dpi
media-fonts/font-bh-75dpi
media-fonts/font-bh-lucidatypewriter-100dpi
media-fonts/font-bh-lucidatypewriter-75dpi
media-fonts/font-bh-ttf
media-fonts/font-bh-type1
media-fonts/font-bitstream-100dpi
media-fonts/font-bitstream-75dpi
media-fonts/font-bitstream-speedo
media-fonts/font-bitstream-type1
media-fonts/font-cronyx-cyrillic
media-fonts/font-cursor-misc
media-fonts/font-daewoo-misc
media-fonts/font-dec-misc
media-fonts/font-ibm-type1
media-fonts/font-jis-misc
media-fonts/font-misc-cyrillic
media-fonts/font-misc-ethiopic
media-fonts/font-misc-meltho
media-fonts/font-misc-misc
media-fonts/font-sony-misc
media-fonts/font-sun-misc
media-fonts/font-util
media-fonts/fs-fonts
media-fonts/hkscs-ming
media-fonts/hunkyfonts
media-fonts/ipamonafont
media-fonts/kacst-fonts
media-fonts/khmer
media-fonts/kochi-substitute
media-fonts/lfpfonts-fix
media-fonts/lfpfonts-var
media-fonts/libertine-ttf
media-fonts/lohit-fonts
media-fonts/mgopen
media-fonts/mikachan-font-otf
media-fonts/mikachan-font-ttc
media-fonts/mikachan-font-ttf
media-fonts/monafont
media-fonts/opendesktop-fonts
media-fonts/oto
media-fonts/sgi-fonts
media-fonts/stix-fonts
media-fonts/tengwar-fonts
media-fonts/thaifonts-scalable
media-fonts/tibetan-machine-font
media-fonts/ttf-bitstream-vera
media-fonts/unfonts
media-fonts/unfonts-extra
media-fonts/vdrsymbols-ttf
media-fonts/vlgothic
media-fonts/webby-fonts
media-fonts/wqy-bitmapfont
media-fonts/x11fonts-jmk
media-fonts/zh-kcfonts


strangely copy & pasting that list to e.g. /root/emerge-fonts.txt and emerging it via

emerge -a1v `cat /root/emerge-fonts.txt`

didn't work yesterday - today after some system's maintenance (re-emerging several packages after the libpng-upgrade to 1.4*) it suddenly works ?!

before that I tried the old approach I used several times in the past:

emerge -ep system > /root/emerge-system.txt

(it's kind of a fallback for me to be able to resume in the emerge-queue manually when lots of packages failed and still fail which doesn't happen too seldom & portage can't continue due to "forgotten" queue list)

then getting that into a readable format for portage/emerge:

cat emerge-system.txt | cut -s -d ] -f 2 | awk '{print "="$1}' > emerge.todo

and tested whether it would work:

emerge -a1v `cat emerge.todo`

fortunately it did ! :)


sorry for the noise

so it works as usual

thanks for your support  :)




Comment 4


Matt





          2010-05-15 14:15:30 UTC
        

(In reply to comment #2)
> $ echo "app-text/ding" > /tmp/emerge.todo
> $ emerge --ignore-default-opts -a1v `cat /tmp/emerge.todo` 
> superuser access is required... adding --pretend to options
> 
> 
> These are the packages that would be merged, in order:
> 
> Calculating dependencies... done!
> [ebuild   R   ] app-text/ding-1.6  3,466 kB
> 
> Total: 1 package (1 reinstall), Size of downloads: 3,466 kB
> 
> $ emerge --version
> Portage 2.2_rc67 (default/linux/amd64/10.0/desktop/gnome, gcc-4.4.3,
> glibc-2.10.1-r1, 2.6.32-gentoo-r7 x86_64)
> 
> Seems to work as you expect it.
> 

yeah, thanks for testing it out and confirming !

seems like my system from time to time has its temper which doesn't allow me to do those things that I want and instead it does what it likes ;)











Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

