Title: 394283 – net-misc/openssh-5.9_p1-r3 test failure USE='X509 hpn ldap skey'
URL: https://bugs.gentoo.org/show_bug.cgi?id=394283

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 394283
net-misc/openssh-5.9_p1-r3 test failure USE='X509 hpn ldap skey'
Last modified: 2012-04-08 19:51:43 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 394283 
      - net-misc/openssh-5.9_p1-r3 test failure USE='X509 hpn ldap skey'


Summary:
net-misc/openssh-5.9_p1-r3 test failure USE='X509 hpn ldap skey'
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

New packages

  (show other bugs)



Hardware:

All
        Linux
      







Importance:
      
Normal
       normal
      


Assignee:

Gentoo's Team for Core System packages








URL:







Whiteboard:




Keywords:








Depends on:







Blocks:




396075



 

        Show dependency tree





 





      Reported:
    
2011-12-11 01:48 UTC by Robin Johnson





      Modified:
    
2012-04-08 19:51 UTC
      (History)
    




          CC List:
        

0 
          users
        








See Also:






Package list:







Runtime testing required:

---























      Attachments
    



Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Robin Johnson









          2011-12-11 01:48:24 UTC
        

I think it's nearly time that openssh 5.9 gets stabilized. The one pending issue is a testcase failure with a specific USE combination.

Here's all the combinations I tried:

Pass:
USE=''
USE='hpn ldap '
USE='hpn ldap libedit skey'
USE='hpn ldap libedit skey tcpd'
USE='hpn skey'
USE='X509'
USE='X509 hpn'
USE='X509 hpn ldap'
USE='X509 hpn skey'
USE='X509 ldap skey'
USE='X509 skey'
USE='X509 ldap skey'

Fail:
USE='X509 hpn ldap skey'
USE='X509 hpn ldap libedit skey'

x509+hpn+ldap+skey is the minset required to trigger the failure.

Here's the actual failure:
creating usr_cert for OpenSSH RSA test self-signed certificate(dsa) ...
- self-CRT                                                            done
creating file selfid_rsa-dsa.crt                                      done
--
OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOX
=======================================================================
Begin test against specified OCSP provider ...
=======================================================================
  respoder key base testocsp_rsa ...
  starting OCSP responder(rsa_md5) on 127.0.0.1:20080                 failed

=======================================================================
Testing OpenSSH client and server with certificates finished.
  status:                                                             failed
=======================================================================

make[2]: *** [check-certs] Error 1
make[2]: Leaving directory `/dev/shm/portage/net-misc/openssh-5.9_p1-r3/work/openssh-5.9p1/tests/CA'
make[1]: *** [check-certs] Error 2
make[1]: Leaving directory `/dev/shm/portage/net-misc/openssh-5.9_p1-r3/work/openssh-5.9p1'

Portage 2.2.0_alpha79 (default/linux/amd64/10.0, gcc-4.5.3, glibc-2.14.1-r1, 3.0.0-rc4-10101-gd2beb04 x86_64)
=================================================================
System uname: Linux-3.0.0-rc4-10101-gd2beb04-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q9550_@_2.83GHz-with-gentoo-2.1
Timestamp of tree: Sun, 11 Dec 2011 01:00:01 +0000
ccache version 3.1.6 [enabled]
app-shells/bash:          4.2_p20
dev-java/java-config:     2.1.11-r3
dev-lang/python:          2.5.4-r4, 2.6.7-r2, 2.7.2-r3, 3.1.4-r3, 3.2.2
dev-util/ccache:          3.1.6
dev-util/cmake:           2.8.6-r4
dev-util/pkgconfig:       0.26
sys-apps/baselayout:      2.1
sys-apps/openrc:          9999
sys-apps/sandbox:         2.5
sys-devel/autoconf:       2.13, 2.68
sys-devel/automake:       1.4_p6-r1, 1.5-r1, 1.6.3-r1, 1.7.9-r2, 1.8.5-r4, 1.9.6-r3, 1.10.3, 1.11.1-r1
sys-devel/binutils:       2.22
sys-devel/gcc:            3.3.6-r1, 4.2.4-r1, 4.3.6-r1, 4.4.6-r1, 4.5.3-r1
sys-devel/gcc-config:     1.5-r2
sys-devel/libtool:        2.4.2
sys-devel/make:           3.82-r3
sys-kernel/linux-headers: 3.1 (virtual/os-headers)
sys-libs/glibc:           2.14.1-r1
Repositories: gentoo local java-overlay mysql
Installed sets: 
ACCEPT_KEYWORDS="amd64 ~amd64"
ACCEPT_LICENSE="*"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-march=nocona -O2 -pipe -g"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/gnupg/qualified.txt /usr/share/maven-bin-3.0/conf /usr/share/openvpn/easy-rsa /usr/share/qpsmtpd/plugins /var/bind /var/lib/hsqldb /var/qmail/alias /var/qmail/control /var/spool/torque /var/vpopmail/etc"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.3/ext-active/ /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.3/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.3/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c"
CXXFLAGS="-march=nocona -O2 -pipe -g"
DISTDIR="/home/gentoo/distfiles"
FEATURES="assume-digests binpkg-logs buildpkg ccache collision-protect ebuild-locks fixlafiles lmirror mirror multilib-strict news parallel-fetch preserve-libs protect-owned sandbox sfperms splitdebug strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv"
FFLAGS=""
GENTOO_MIRRORS="http://distfiles.gentoo.org"
LANG="en_US.UTF-8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed"
LINGUAS="en en_CA en_US en_GB en_ZA"
MAKEOPTS="-j4 -l7"
PKGDIR="/home/gentoo/packages/grubb-int/"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/dev/shm"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage /code/layman/java-overlay /code/gentoo/gentoo-git/mysql"
SYNC=""
USE="3dnow aalib acl acpi adns aio alsa amd amd64 apache2 apm audit berkdb bzip2 cairo cdr cgi clearpasswd cli cracklib crypt cups curl cxx dbus divx4linux dri dvd dvdr encode f77 fam foomaticdb fortran frxp gcj gd gdbm geoip gif glitz gpgme hpn iconv idn imap innodb ipalias ipv6 jikes jpeg junit latex libnl libwww logrotate mad maildir mcal md5sum mikmod mmx modules mp3 mpeg mpm-prefork mudflap multicall multilib multitarget mysql ncurses nptl nptlonly objc offensive ogg openmp pam pcap pcre pdf pdflib perl pic plotutils png pnp ppds pppd python qmail readline samba scanner session slp smime snmp socks5 spell sse sse2 ssl static-libs svg sysfs tetex threads tiff truetype truetype-fonts type1 type1-fonts udev ungif unicode usb userlocales v4l v4l2 vhosts vim-syntax vorbis xcb xinetd xml xml2 xorg xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias asis auth_digest imagemap log_forensic proxy proxy_ajp proxy_balancer proxy_connect proxy_ftp proxy_http cgi proxy_scgi reqtimeout" APACHE2_MPMS="prefork" CALLIGRA_FEATURES="kexi words flow plan stage tables krita karbon braindump" CAMERAS="ptp2" COLLECTD_PLUGINS="df interface irq load memory rrdtool swap syslog" ELIBC="glibc" FOO2ZJS_DEVICES="hp1020" GPSD_PROTOCOLS="ashtech aivdm earthmate evermore fv18 garmin garmintxt gpsclock itrax mtk3301 nmea ntrip navcom oceanserver oldstyle oncore rtcm104v2 rtcm104v3 sirf superstar2 timing tsip tripmate tnt ubx" INPUT_DEVICES="evdev keyboard mouse void" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="en en_CA en_US en_GB en_ZA" PHP_TARGETS="php5-3" RUBY_TARGETS="ruby18" USERLAND="GNU" VIDEO_CARDS="dummy fbdev nv v4l vga vesa i810" XTABLES_ADDONS="quota2 psd pknock lscan length2 ipv4options ipset ipp2p iface geoip fuzzy condition tee tarpit sysrq steal rawnat logmark ipmark dhcpmac delude chaos account echo checksum"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS




Comment 1


Robin Johnson









          2011-12-11 02:50:53 UTC
        

Ok, something is weird. Back at 2011/09/26, it failed.
But now it passes, and the ssh ebuilds didn't change.

I think it's one of these that made it work:

sys-libs/glibc: 2.11.3 -> 2.14.1
sys-libs/pam: 1.1.4 -> 1.1.5
dev-libs/openssl: 1.0.0e -> 1.0.0e-r1




Comment 2


Robin Johnson









          2012-04-08 19:51:43 UTC
        

I can't reproduce it anymore.









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

