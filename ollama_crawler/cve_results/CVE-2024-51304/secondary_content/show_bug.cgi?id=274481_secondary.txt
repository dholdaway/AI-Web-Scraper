Title: 274481 – dev-db/mysql{,-community} used as embedded fail to create database for amarok
URL: https://bugs.gentoo.org/show_bug.cgi?id=274481

Go to: 
		Gentoo Home
Documentation
Forums
Lists
Bugs
Planet
Store
Wiki
Get Gentoo!





Gentoo's Bugzilla – Bug 274481
dev-db/mysql{,-community} used as embedded fail to create database for amarok
Last modified: 2009-11-02 00:26:00 UTC node [vulture]


Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]













Bug 274481 
      - dev-db/mysql{,-community} used as embedded fail to create database for amarok


Summary:
dev-db/mysql{,-community} used as embedded fail to create database for amarok
    








Status:
    

RESOLVED
          WORKSFORME
      






Alias:


        None
    





Product:

Gentoo Linux




Classification:

Unclassified




Component:

[OLD] Library

  (show other bugs)



Hardware:

AMD64
        Linux
      







Importance:
      
High
       normal
      


Assignee:

Gentoo Linux MySQL bugs team








URL:



https://bugs.kde.org/show_bug.cgi?id=...
        




Whiteboard:




Keywords:








Depends on:







Blocks:









 





      Reported:
    
2009-06-17 09:19 UTC by Martin Jansa





      Modified:
    
2009-11-02 00:26 UTC
      (History)
    




          CC List:
        

1 
          user
          
            (show)
          



elv1313









See Also:






Package list:







Runtime testing required:

---























      Attachments
    




amarok.server.mysqld.trace

              (amarok.server.mysqld.trace,96.00 KB,
                text/plain)

            
2009-06-17 09:24 UTC,

            Martin Jansa




Details





amarok-mysql.trace

              (amarok-mysql.trace,7.19 KB,
                text/plain)

            
2009-06-17 09:26 UTC,

            Martin Jansa




Details





mysqle-testcase.cpp

              (mysqle-testcase.cpp,3.30 KB,
                text/plain)

            
2009-06-18 17:02 UTC,

            Martin Jansa




Details





View All

Add an attachment
        (proposed patch, testcase, etc.)
    








Note
              You need to
              log in
              before you can comment on or make changes to this bug.
            

















Description


Martin Jansa





          2009-06-17 09:19:43 UTC
        

I had problems with amarok, so I modified amarok code, to add more information about mysql problem (see demonstration link)

I tried dev-db/mysql-5.0.76-r1 and dev-db/mysql-community-5.0.77, with and without sane flags (visibility and as-needed), for gcc-4.4 I needed additional patch from #271475.

Modified amarok fails with this error:

InnoDB: Log scan progressed past the checkpoint lsn 0 36808
090617 11:06:37  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Doing recovery: scanned up to log sequence number 0 43655
090617 11:06:37  InnoDB: Starting an apply batch of log records to the database...
InnoDB: Progress in percents: 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
InnoDB: Apply batch completed
amarok:              [ERROR!] MySQLe initialization failed
amarok:              [ERROR!] GREPME MySQLe query failed! Can't get stat of '/home/martin/.kde4/share/apps/amarok/mysqle/amarok' (Errcode: 0)  on  "CREATE DATABASE IF NOT EXISTS amarok"
InnoDB: Error: Write to file /home/martin/.kde4/share/apps/amarok/mysqle/ibdata1 failed at offset 0 1048576.
InnoDB: 262144 bytes should have been written, only -1 were written.
InnoDB: Operating system error number 9.
InnoDB: Check that your OS and file system support files of this size.
InnoDB: Check also that the disk is not full or a disk quota exceeded.
InnoDB: Error number 9 means 'Bad file descriptor'.
InnoDB: Some operating system error numbers are described at
InnoDB: http://dev.mysql.com/doc/refman/5.0/en/operating-system-error-codes.html
090617 11:06:38InnoDB: Assertion failure in thread 139671512045840 in file fil/fil0fil.c line 4023
InnoDB: Failing assertion: ret
InnoDB: We intentionally generate a memory trap.
InnoDB: Submit a detailed bug report to http://bugs.mysql.com.
InnoDB: If you get repeated assertion failures or crashes, even
InnoDB: immediately after the mysqld startup, there may be
InnoDB: corruption in the InnoDB tablespace. Please refer to
InnoDB: http://dev.mysql.com/doc/refman/5.0/en/forcing-recovery.html
InnoDB: about forcing recovery.
InnoDB: Thread 139671520438544 stopped in file sync/sync0arr.c line 139

Its executed after amarok config/db removal
rm -rf ~/.kde4/share/config/amarok* ~/.kde4/share/apps/amarok/mysqle/

I tried to enable debug trace of mysql
martin@jama ~ $ cat ~/.kde4/share/apps/amarok/my.cnf
[amarokclient]
debug  = d:t:i:o,/tmp/amarok.client.mysqld.trace
[amarokserver]
debug  = d:t:i:o,/tmp/amarok.server.mysqld.trace

amarok.client.mysqld.trace is empty, I'll attach the second trace from server.

Portage 2.2_rc33 (default/linux/amd64/2008.0/desktop, gcc-4.4.0, glibc-2.10.1-r0, 2.6.30-gentoo-JaMa x86_64)
=================================================================
System uname: Linux-2.6.30-gentoo-JaMa-x86_64-AMD_Phenom-tm-_9600_Quad-Core_Processor-with-gentoo-2.0.1
Timestamp of tree: Wed, 17 Jun 2009 05:00:01 +0000
ccache version 2.4 [disabled]
app-shells/bash:     4.0_p24
dev-java/java-config: 2.1.8-r1
dev-lang/python:     2.6.2-r1
dev-python/pycrypto: 2.0.1-r8
dev-util/ccache:     2.4-r8
dev-util/cmake:      2.6.4
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.0
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.5, 1.7.9-r1, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.51.0.9
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.29
ACCEPT_KEYWORDS="amd64 ~amd64"
CBUILD="x86_64-pc-linux-gnu"
CFLAGS="-O2 -march=barcelona -pipe -ftree-vectorize"
CHOST="x86_64-pc-linux-gnu"
CONFIG_PROTECT="/etc /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/splash /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
CXXFLAGS="-O2 -march=barcelona -pipe -ftree-vectorize -fvisibility-inlines-hidden -fvisibility=hidden"
DISTDIR="/tmp/distfiles"
FEATURES="distlocks fixpackages parallel-fetch preserve-libs protect-owned sandbox sfperms strict unmerge-orphans userfetch usersandbox"
GENTOO_MIRRORS="http://gentoo.mirror.web4u.cz/distfiles/"
LANG="en_GB"
LC_ALL="cs_CZ.utf8"
LDFLAGS="-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=gnu"
LINGUAS="cs en_GB en"
MAKEOPTS="-j1"
PKGDIR="/tmp/binpkgs"
PORTAGE_CONFIGROOT="/"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_TMPDIR="/tmp/tmpwork"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/local/portage/layman/gcc-porting /usr/local/portage/layman/enlightenment /usr/local/portage/layman/perl-experimental /usr/local/portage/layman/x11 /usr/local/portage/layman/vmware /usr/local/portage/layman/qting-edge /usr/local/portage/layman/kde-testing /usr/local/portage/layman/mozilla /usr/local/portage"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
USE="3dnow X aalib acl acpi aio alsa amd64 amr apache2 avahi bash-completion berkdb bidi bluetooth branding bzip2 cairo ccache cdparanoia cdr cdrom cgi cli consolekit cracklib crypt cups curl dbus dga doc dri dvb dvd dvdr dvdread emboss encode evo fam fbcon ffmpeg firefox flac flash fmod ftp gd gif gkrellm glib glut gnutls gpgme gpm gps gzip hal iconv icq imagemagick imap imlib innodb ipv6 irc irda isdnlog jabber java java5 java6 javascript joystick jpeg kde kpathsea kqemu krb4 kvm lame libcaca libnotify libwww linuxthreads-tls lirc live lm_sensors logrotate mad maildir matroska midi mikmod mime mmx mozilla mp3 mp4 mpeg mplayer mudflap multilib mysql mysqli ncurses network nls nntp nocd nptl nptlonly nsplugin ogg openal opengl openmp oss pam pcre pdf perl phonon php pic png pop posix ppds pppd python qt qt3 qt3support qt4 quicktime readline reflection rss rsync rtc samba sasl screen sdl semantic-desktop session silc slang smartcard smime smtp sndfile sockets spell spl sse sse2 ssh ssl startup-notification stream subversion svg svgz symlink sysfs tcpd theora threads tiff truetype unicode usb utempter uudeview v4l v4l2 vde vdpau vdr videos vim vorbis webkit wxwindows x264 xanim xcb xcomposite xinetd xml xmlreader xmlrpc xorg xosd xpm xscreensaver xsl xulrunner xv xvid zip zlib zvbi" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic auth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter headers ident imagemap include info log_config logio mem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite setenvif so speling status unique_id userdir usertrack vhost_alias" APACHE2_MPMS="prefork" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev joystick" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="cs en_GB en" LIRC_DEVICES="devinput" NETBEANS_MODULES="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler ruby soa visualweb webcommon websvccommon xml dlight enterprise" QEMU_SOFTMMU_TARGETS="arm i386 x86_64" QEMU_USER_TARGETS="arm armeb i386 x86_64" USERLAND="GNU" VIDEO_CARDS="vesa nvidia nv v4l nouveau"
Unset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, FFLAGS, INSTALL_MASK, PORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS


Now I'm building dev-db/mysql-5.0.76 without patches for shared embedded libmysqld and with -DPIC -fPIC (because amarok used to work before with it :)).

Then I'll try to build mysql with gcc-4.3 or something you came with...

Reproducible: Always




Comment 1


Martin Jansa





          2009-06-17 09:24:50 UTC
        

Created attachment 194971 [details]
amarok.server.mysqld.trace

Debug trace enabled in [amarokserver] in my.cnf.




Comment 2


Martin Jansa





          2009-06-17 09:26:05 UTC
        

Created attachment 194973 [details]
amarok-mysql.trace

debug trace enabled from amarok code with:
mysql_debug("d:t:O,/tmp/amarok-mysql.trace");




Comment 3


Martin Jansa





          2009-06-17 09:41:37 UTC
        

What I forgot to say:

1) I tried enable/disable USE berkdb, debug, remaining USE flags are always like this
USE="debug embedded perl ssl -berkdb -big-tables -cluster -extraengine -latin1 -max-idx-128 -minimal (-selinux) -static"

2) I tried to disable innodb with passing another argument when starting mysqle
server_options[9] = const_cast<char*>( "--skip-innodb" );
its quite simillar, first it fails that mysqle/amarok directory is missing, then first table mysqle/amarok/admin.frm and so on.

3) If I run classic mysqld on that datafiles as suggested in tips here:
http://amarok.kde.org/wiki/Development/MySQL_Embedded
then all sql commands executed from amarok works good

4) dev-db/mysql-5.0.76 failed with same error..




Comment 4


Jeroen Roovers (RETIRED)






          2009-06-17 11:18:29 UTC
        

Please explain in no more than a few lines what the problem is.




Comment 5


Martin Jansa





          2009-06-17 11:52:44 UTC
        

(In reply to comment #4)
> Please explain in no more than a few lines what the problem is.
> 

The problem is that amarok cannot use database (music collection scan, music list,..), because shared libmysql library is fails when creating embedded database. Database creation and also selection of database "amarok" is not checked for return code of mysql_* functions, so those 3 functions fail silently and then all queries to this database fail with "No database selected", just because "use amarok" as first sql command failed and was ignored.

So I tried to narrow the problem with return value check in amarok and found, that database couldn't be created because that error in first comment. So I think that's not amarok issue.

Just to make sure, that non-embedded usage of particular mysql version is not affected, I was able to execute failing sql code, when I run mysqld not as embedded lib, but standalone daemon on the same data-files and then connecting to this instance with normal mysql client.

Now I'm looking for some version/build of mysql, which work and then start from there..




Comment 6


Martin Jansa





          2009-06-18 17:01:51 UTC
        

It's even more interesting than my job, so here is more info:

I created a bit simplier test-case than amarok (see mysqle-testcase.cpp).

Then discovered that it fails when its linked with BOTH libmysqld and libmysqlclient and works good when linked only with libmysqld, than checked that amarok links /usr/lib/kde4/libamarok_collection-sqlcollection.so with BOTH -lmysqld -lmysqlclient (check amarok/src/collection/sqlcollection/CMakeFiles/amarok_collection-sqlcollection.dir/link.txt)

Then found that upstream haven't decided yet if to link against libmysqlclient or not (or where - see next few revisions of that file).
http://websvn.kde.org/trunk/extragear/multimedia/amarok/src/collection/sqlcollection/CMakeLists.txt?r1=894405&r2=894500

So first I fixed amarok for me with reverting this change again.

Then used my mysqle-testcase to discover another mystery..
Build, link, run 3 versions with simple bash script:
<code>
DIR=/tmp/mysqle-testcase

g++ -g -I/usr/include/mysql -L/usr/lib/mysql -lmysqlclient -lmysqld -o mysqle-testcase1 mysqle-testcase.cpp
g++ -g -I/usr/include/mysql -L/usr/lib/mysql -lmysqld -lmysqlclient -o mysqle-testcase2 mysqle-testcase.cpp
g++ -g -I/usr/include/mysql -L/usr/lib/mysql -lmysqld -o mysqle-testcase3 mysqle-testcase.cpp

rm -rf ${DIR}; mkdir ${DIR}; touch ${DIR}/my.cnf
echo -e "\n\n\n\nmysqle-testcase1\n\n\n\n"
./mysqle-testcase1 | tee mysqle-testcase1.log 2>&1
rm -rf ${DIR}; mkdir ${DIR}; touch ${DIR}/my.cnf
echo -e "\n\n\n\nmysqle-testcase2\n\n\n\n"
./mysqle-testcase2 | tee mysqle-testcase2.log 2>&1
rm -rf ${DIR}; mkdir ${DIR}; touch ${DIR}/my.cnf
echo -e "\n\n\n\nmysqle-testcase3\n\n\n\n"
./mysqle-testcase3 | tee mysqle-testcase3.log 2>&1
</code>

First one "-lmysqlclient -lmysqld" says connected to 5.0.72-debug-log (notice 5.0.72).

Second one "-lmysqld -lmysqlclient" init InnoDB and dies with "safe_mutex: Trying to lock unitialized mutex at my_thr_init.c, line 288"

Third one "-lmysqld" works as expected :) and connects to 5.0.76-embedded-debug-log (notice 5.0.76).

Where did testcase1 get mysqlclient from dev-db/mysql-5.0.72?
I'm not sure, it looks right
martin@jama ~/amarok-test/test-case $ ldd mysqle-testcase1 | grep mysql
        libmysqlclient.so.15 => /usr/lib/libmysqlclient.so.15 (0x00007f2893a04000)
        libmysqld.so.0 => /usr/lib/libmysqld.so.0 (0x00007f2893290000)
        libheap.so.0 => /usr/lib64/mysql/libheap.so.0 (0x00007f2891ae7000)
        libinnobase.so.0 => /usr/lib64/mysql/ib/libinnobase.so.0 (0x00007f28917a4000)
        libmysys.so.0 => /usr/lib64/mysql/libmysys.so.0 (0x00007f2891418000)
        libvio.so.0 => /usr/lib64/mysql/libvio.so.0 (0x00007f2891211000)

martin@jama ~/amarok-test/test-case $ ldd mysqle-testcase1 | grep mysql | sed 's/.*=> //g; s/ (.*//g; s#/lib/#/lib64/#g' | xargs equery b
 * Searching for /usr/lib64/libmysqlclient.so.15,/usr/lib64/libmysqld.so.0,/usr/lib64/mysql/libheap.so.0,/usr/lib64/mysql/ib/libinnobase.so.0,/usr/lib64/mysql/libmysys.so.0,/usr/lib64/mysql/libvio.so.0 ...
dev-db/mysql-5.0.76-r1 (/usr/lib64/mysql/libheap.so.0 -> libheap.so.0.0.0)
dev-db/mysql-5.0.76-r1 (/usr/lib64/libmysqld.so.0 -> mysql/libmysqld.so.0.0.0)
dev-db/mysql-5.0.76-r1 (/usr/lib64/mysql/libmysys.so.0 -> libmysys.so.0.0.0)
dev-db/mysql-5.0.76-r1 (/usr/lib64/mysql/ib/libinnobase.so.0 -> libinnobase.so.0.0.0)
dev-db/mysql-5.0.76-r1 (/usr/lib64/mysql/libvio.so.0 -> libvio.so.0.0.0)
dev-db/mysql-5.0.76-r1 (/usr/lib64/libmysqlclient.so.15 -> mysql/libmysqlclient.so.15.0.0)


I'll remove dev-db/mysql from my system and build it again..







Comment 7


Martin Jansa





          2009-06-18 17:02:35 UTC
        

Created attachment 195100 [details]
mysqle-testcase.cpp




Comment 8


Robin Johnson









          2009-06-21 23:24:25 UTC
        

"5.0.72-debug-log"
that string is NOT from a Gentoo build of MySQL.
Somewhere on your system you have another build of MySQL, probably from the upstream binaries. It's getting mixed in with the linking, and the expected functions parameters are NOT sane.

Find and remove the binary version on your system. I suggest starting with 'locate libmysql' and looking for a file that is NOT owned by the package.
Or better yet, uninstall all of the mysql packages for now, and then look for leftovers, remove them, then reinstall mysql.




Comment 9


Martin Jansa





          2009-06-22 09:38:49 UTC
        

(In reply to comment #8)
> "5.0.72-debug-log"
> that string is NOT from a Gentoo build of MySQL.
> Somewhere on your system you have another build of MySQL, probably from the
> upstream binaries. It's getting mixed in with the linking, and the expected
> functions parameters are NOT sane.
> 
> Find and remove the binary version on your system. I suggest starting with
> 'locate libmysql' and looking for a file that is NOT owned by the package.
> Or better yet, uninstall all of the mysql packages for now, and then look for
> leftovers, remove them, then reinstall mysql.

No its from =dev-db/mysql-5.0.72.. ldd shows that libmysqlclient.so.15 was found in /usr/lib/libmysqlclient.so.15 and then equery b /usr/lib64/libmysqlclient.so.15 showed owner =dev-db/mysql-5.0.76 (lib64 instead of lib, because lib is just sym link and portage tracks only files in lib64), 

I'm sure.. there was NO libmysql without the one owned by installed =dev-db/mysql-5.0.76 on my filesystem (I've checked that), maybe in memory, if it can be shared after loading and removing old .so file from filesystem.. 

When I removed dev-db/mysql and installed mysql-5.0.76 again "5.0.72-debug-log" disappered.. but I also rebooted (so cannot try my theory about old shared lib already loaded in memory).






Comment 10


Emmanuel Lepage Vallee





          2009-06-28 00:24:38 UTC
        

Confirmed, I have the problem too. Amarok 2.* (2.2-svn-9999 in my case) can create DB

localhost lepagee # emerge --info
Portage 2.1.6.13 (default/linux/amd64/2008.0/desktop, gcc-4.3.3, glibc-2.10.1-r0, 2.6.30-rc5-git2 x86_64)
=================================================================
System uname: Linux-2.6.30-rc5-git2-x86_64-Intel-R-_Core-TM-2_Quad_CPU_Q6600_@_2.40GHz-with-gentoo-2.0.1
Timestamp of tree: Sat, 27 Jun 2009 20:00:01 +0000
app-shells/bash:     4.0_p24
dev-java/java-config: 1.3.7, 2.1.8-r1
dev-lang/python:     2.4.6, 2.5.4-r3, 2.6.2-r1
dev-python/pycrypto: 2.0.1-r6
dev-util/cmake:      2.6.4
sys-apps/baselayout: 2.0.1
sys-apps/openrc:     0.4.3-r3
sys-apps/sandbox:    2.0
sys-devel/autoconf:  2.13, 2.63-r1
sys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10.2, 1.11
sys-devel/binutils:  2.19.1-r1
sys-devel/gcc-config: 1.4.1
sys-devel/libtool:   2.2.6a
virtual/os-headers:  2.6.29
ABI="amd64"
ACCEPT_KEYWORDS="amd64 ~amd64"
ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci"
ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol"
ANT_HOME="/usr/share/ant"
APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias"
ARCH="amd64"
ASFLAGS_x86="--32"
AUDIO_USE="aaa a52 ogg flac theora oggvorbis mp3 aac icecast  m4a mp4"
AUTOCLEAN="yes"
AUTRE_USE="unicode hashstyle mad vlm pdf xscreensaver glitz skins pnm mythtv kdeenablefinal openexr bash-completion"
CBUILD="x86_64-pc-linux-gnu"
CDEFINE_amd64="__x86_64__"
CDEFINE_x86="__i386__"
CFLAGS="-O2 -pipe"
CFLAGS_x86="-m32"
CG_COMPILER_EXE="/usr/bin/cgc"
CHOST="x86_64-pc-linux-gnu"
CHOST_amd64="x86_64-pc-linux-gnu"
CHOST_x86="i686-pc-linux-gnu"
CLASSPATH="."
CLEAN_DELAY="5"
COLLISION_IGNORE="/lib/modules"
COLORFGBG="15;0"
COLORTERM="rxvt"
COMP_USE="rar bzip2 7Zip szip 7z"
CONFIG_PROTECT="/etc /usr/kde/3.5/env /usr/kde/3.5/share/config /usr/kde/3.5/shutdown /usr/share/config /var/lib/hsqldb"
CONFIG_PROTECT_MASK="/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/ /etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c /etc/udev/rules.d"
COREFLAGS=" -pipe -frename-registers -fweb -fomit-frame-pointer -funit-at-a-time -freorder-blocks -fno-ident -fmerge-all-constants -combine -mfpmath=sse"
CPUFLAGS="-msse3 -msse2 -msse -mmmx -mno-3dnow"
CVS_RSH="ssh"
CXXFLAGS="-O2 -pipe"
DEFAULT_ABI="amd64"
DEV_USE="css c cpp html cg -doc double-precision examples freeimage threads server blender-game povray sqlite3 webdav-neon"
DISPLAY=":0.0"
DISTDIR="/usr/portage/distfiles"
EDITOR="/bin/nano"
ELIBC="glibc"
EMERGE_DEFAULT_OPTS="--verbose"
EMERGE_WARNING_DELAY="10"
FEATURES="distlocks fixpackages metadata-transfer parallel-fetch protect-owned sandbox sfperms strict unmerge-orphans userfetch"
FETCHCOMMAND="/usr/bin/wget -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
FLTK_DOCDIR="/usr/share/doc/fltk-2.0_pre6786/html"
FS_USE="fat hfs ntfs"
GCC_SPECS=""
GDK_USE_XFT="1"
GENERATION="2"
GENTOO_MIRRORS="http://distfiles.gentoo.org http://distro.ibiblio.org/pub/linux/distributions/gentoo"
HARDWARE_USE="mmx mmxext sse sse2 smp dvd cd-r xv cdda vcd cdio aiglx dc1394 acpi apm dv ieee1394 dv1394 video1394 directfb cddb opengl dri drm alsa usb optimisememory gimpprint foomatic hplip openal jack dvdread dvb v4l scanner xine lirc xcomposite ipod cups logitech-mouse foomaticdb -hal dvdr lm_sensors v4l2 vdpau"
HG="/usr/bin/hg"
HOME="/root"
HUSHLOGIN="FALSE"
IMAGE_USE="svga svg jpeg png gif exif xpm geolocation"
INFOPATH="/usr/share/info:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.19.1/info:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.3.3/info"
INPUT_DEVICES="keyboard mouse evdev lirc"
INTERNET_USE=" samba mysql httpd irc -java flash ftp mdnsresponder-compat mdnsresponder webkit nsplugin"
JAVAC="/home/lepagee/.gentoo/java-config-2/current-user-vm/bin/javac"
JAVACC_HOME="/usr/share/javacc/"
JAVA_HOME="/home/lepagee/.gentoo/java-config-2/current-user-vm"
JDK_HOME="/home/lepagee/.gentoo/java-config-2/current-user-vm"
KERNEL="linux"
LADSPA_PATH="/usr/lib64/ladspa"
LANG="en_US.UTF-8"
LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text"
LDFLAGS="-Wl,--hash-style=gnu"
LDFLAGS_x86="-m elf_i386"
LESS="-R -M --shift 5"
LESSOPEN="|lesspipe.sh %s"
LIBDIR_amd64="lib64"
LIBDIR_amd64_fbsd="lib64"
LIBDIR_ppc="lib32"
LIBDIR_ppc64="lib64"
LIBDIR_sparc32="lib32"
LIBDIR_sparc64="lib64"
LIBDIR_x86="lib32"
LIBDIR_x86_fbsd="lib32"
LIBS_USE="qt4 -qt3 X gtk -wxwindows pam pam-console spell dbus -dcop freetype bidi gnutls truetype aalib avahi -arts -gstreamer sdl -esd oss kde -gnome qt3support -libnotify"
LINGUAS="fr fr_CA"
LIRC_DEVICES="serial appleir"
LOGNAME="root"
LS_COLORS="rs=0:di=01;34:ln=01;36:hl=44;37:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.pdf=00;32:*.ps=00;32:*.txt=00;32:*.patch=00;32:*.diff=00;32:*.log=00;32:*.tex=00;32:*.doc=00;32:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:"
MAKEOPTS="-j5 -s"
MANPATH="/home/lepagee/.gentoo/java-config-2/current-user-vm/man:/usr/local/share/man:/usr/share/man:/usr/share/binutils-data/x86_64-pc-linux-gnu/2.19.1/man:/usr/share/gcc-data/x86_64-pc-linux-gnu/4.3.3/man:/opt/blackdown-jdk-1.4.2.03/man:/etc/java-config/system-vm/man/:/usr/lib64/php5/man/:/usr/kde/3.5/share/man:/usr/qt/3/doc/man:/opt/opera/share/man:/opt/vmware/server/man"
MULTILIB_ABIS="amd64 x86"
MULTILIB_STRICT_DENY="64-bit.*shared object"
MULTILIB_STRICT_DIRS="/lib32 /lib /usr/lib32 /usr/lib /usr/kde/*/lib32 /usr/kde/*/lib /usr/qt/*/lib32 /usr/qt/*/lib /usr/X11R6/lib32 /usr/X11R6/lib"
MULTILIB_STRICT_EXEMPT="(perl5|gcc|gcc-lib|binutils|eclipse-3|debug|portage)"
NETBEANS="apisupport cnd groovy gsf harness ide identity j2ee java mobility nb php profiler soa visualweb webcommon websvccommon xml"
NLS_USE="nls fr"
OPENGL_PROFILE="nvidia"
PAGER="/usr/bin/less"
PATH="/sbin:/bin:/usr/sbin:/usr/bin"
PKGDIR="/usr/portage/packages"
PKG_CONFIG_PATH="/usr/qt/3/lib64/pkgconfig"
PORTAGE_ARCHLIST="ppc x86-openbsd ppc-openbsd ppc64 x86-winnt x86-fbsd ppc-aix alpha arm x86-freebsd s390 amd64 x86-macos x64-openbsd ia64-hpux hppa x86-netbsd amd64-linux ia64-linux x86 sparc-solaris x64-freebsd sparc64-solaris x86-linux x64-macos sparc m68k-mint ia64 mips ppc-macos x86-interix x64-solaris amd64-fbsd mips-irix m68k sh x86-solaris sparc-fbsd"
PORTAGE_BINHOST_CHUNKSIZE="3000"
PORTAGE_BIN_PATH="/usr/lib64/portage/bin"
PORTAGE_COMPRESS_EXCLUDE_SUFFIXES="css gif htm[l]? jp[e]?g js pdf png"
PORTAGE_CONFIGROOT="/"
PORTAGE_DEBUG="0"
PORTAGE_DEPCACHEDIR="/var/cache/edb/dep"
PORTAGE_ELOG_CLASSES="log warn error"
PORTAGE_ELOG_MAILFROM="portage@localhost"
PORTAGE_ELOG_MAILSUBJECT="[portage] ebuild log for ${PACKAGE} on ${HOST}"
PORTAGE_ELOG_MAILURI="root"
PORTAGE_ELOG_SYSTEM="save_summary echo"
PORTAGE_FETCH_CHECKSUM_TRY_MIRRORS="5"
PORTAGE_FETCH_RESUME_MIN_SIZE="350K"
PORTAGE_GID="250"
PORTAGE_INST_GID="0"
PORTAGE_INST_UID="0"
PORTAGE_PYM_PATH="/usr/lib64/portage/pym"
PORTAGE_QUIET="1"
PORTAGE_RSYNC_OPTS="--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages"
PORTAGE_RSYNC_RETRIES="3"
PORTAGE_TMPDIR="/var/tmp"
PORTAGE_VERBOSE="1"
PORTAGE_WORKDIR_MODE="0700"
PORTDIR="/usr/portage"
PORTDIR_OVERLAY="/usr/portage/local/layman/mozilla /usr/portage/local/layman/vmware /usr/portage/local/layman/kde /usr/portage/local/layman/qting-edge /usr/portage/local/layman/kde"
PROFILE_ONLY_VARIABLES="ARCH ELIBC KERNEL USERLAND"
PS1="\[\033[01;31m\]\h\[\033[01;34m\] \W \$\[\033[00m\] "
PWD="/home/lepagee"
PYTHONDOCS="/usr/share/doc/python-docs-2.6.2-r1/html/library"
PYTHONDOCS_2_4="/usr/share/doc/python-docs-2.4.4-r1/html/lib"
PYTHONDOCS_2_6="/usr/share/doc/python-docs-2.6.2-r1/html/library"
PYTHONPATH="/usr/lib64/portage/pym"
QMAKESPEC="linux-g++"
QTDIR="/usr/qt/3"
RESUMECOMMAND="/usr/bin/wget -c -t 5 -T 60 --passive-ftp -O "${DISTDIR}/${FILE}" "${URI}""
ROOT="/"
ROOTPATH="/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.3.3:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03/jre/bin:/usr/kde/3.5/sbin:/usr/kde/3.5/bin:/usr/qt/3/bin:/opt/vmware/server/bin"
RPMDIR="/usr/portage/rpm"
SANE_CONFIG_DIR="/etc/sane.d"
SHELL="/bin/bash"
SHLVL="6"
STAGE1_USE="multilib nptl nptlonly unicode"
SYMLINK_LIB="yes"
SYNC="rsync://rsync.gentoo.org/gentoo-portage"
TERM="rxvt"
TERMINFO="/usr/share/terminfo"
USB_DEVFS_PATH="/dev/bus/usb"
USE="7Zip 7z X a52 aaa aac aalib acl acpi aiglx alsa amd64 apm avahi avi bash-completion berkdb bidi blender-game bluetooth branding bzip2 c cairo cd-r cdda cddb cdio cdr cg cli cpp cracklib crypt css cups dbus dc1394 directfb divx double-precision dri drm dts dv dv1394 dvb dvd dvdnav dvdr dvdread eds emboss encode evo examples exif faad fam fat ffmpeg firefox flac flash foomatic foomaticdb fortran fr freeimage freetype ftp gdbm geolocation gif gimpprint glitz gnutls gpm gtk h264 hashstyle hfs hplip html httpd icecast iconv ieee1394 ipod ipv6 irc isdnlog jack jpeg kde kdeenablefinal ldap lirc live lm_sensors logitech-mouse m4a m4p m4v mad matroska mdnsresponder mdnsresponder-compat midi mikmod mmx mmxext mp2 mp3 mp4 mpeg mplayer mudflap multilib mysql mythtv ncurses nls nptl nptlonly nsplugin ntfs ogg oggvorbis openal openexr opengl openmp optimisememory oss pam pam-console pcre pdf perl png pnm povray ppds pppd python qt3support qt4 quicktime radio rar readline realmedia reflection samba scanner sdl server session skins smp spell spl sqlite3 sse sse2 ssl startup-notification stream svg sysfs szip tcpd theora threads tiff truetype unicode usb v4l v4l2 vcd vdpau video1394 vlm vorbis webdav-neon webkit wmf wmp x264 xcomposite xine xml xorg xpm xscreensaver xulrunner xv xvid zlib" ALSA_CARDS="ali5451 als4000 atiixp atiixp-modem bt87x ca0106 cmipci emu10k1x ens1370 ens1371 es1938 es1968 fm801 hda-intel intel8x0 intel8x0m maestro3 trident usb-audio via82xx via82xx-modem ymfpci" ALSA_PCM_PLUGINS="adpcm alaw asym copy dmix dshare dsnoop empty extplug file hooks iec958 ioplug ladspa lfloat linear meter mmap_emul mulaw multi null plug rate route share shm softvol" APACHE2_MODULES="actions alias auth_basic authn_alias authn_anon authn_dbm authn_default authn_file authz_dbm authz_default authz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs dav_lock deflate dir disk_cache env expires ext_filter file_cache filter headers include info log_config logio mem_cache mime mime_magic negotiation rewrite setenvif speling status unique_id userdir usertrack vhost_alias" ELIBC="glibc" INPUT_DEVICES="keyboard mouse evdev lirc" KERNEL="linux" LCD_DEVICES="bayrad cfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text" LINGUAS="fr fr_CA" LIRC_DEVICES="serial appleir" USERLAND="GNU" VIDEO_CARDS="nv nvidia vesa nouveau"
USER="root"
USERLAND="GNU"
USE_EXPAND="ALSA_CARDS ALSA_PCM_PLUGINS APACHE2_MODULES APACHE2_MPMS CAMERAS CROSSCOMPILE_OPTS DVB_CARDS ELIBC FCDSL_CARDS FOO2ZJS_DEVICES FRITZCAPI_CARDS INPUT_DEVICES KERNEL LCD_DEVICES LINGUAS LIRC_DEVICES MISDN_CARDS NETBEANS_MODULES QEMU_SOFTMMU_TARGETS QEMU_USER_TARGETS SANE_BACKENDS USERLAND VIDEO_CARDS"
USE_EXPAND_HIDDEN="CROSSCOMPILE_OPTS ELIBC KERNEL USERLAND"
USE_ORDER="env:pkg:conf:defaults:pkginternal:env.d"
VIDEO_CARDS="nv nvidia vesa nouveau"
VIDEO_USE="vorbis matroska m4p m4v dts ffmpeg mpeg mplayer win32codecs divx wmp quicktime real stream live radio wmf avi xvid dvdnav mp2 realmedia encode x264 h264 faad  stream"
VMHANDLE="blackdown-jdk-1.4.2"
WINDOWID="23068674"
WINDOWPATH="7"
XAUTHORITY="/root/.xauthL4uhXT"
XDG_CONFIG_DIRS="/etc/xdg"
XDG_DATA_DIRS="/usr/local/share:/usr/kde/3.5/share:/usr/share"
XDG_SESSION_COOKIE="6ef6fad5a0ea712b5939f200478e9bfc-1245214996.492720-2117860388"
_="/usr/bin/emerge"




Comment 11


Robin Johnson









          2009-07-06 18:54:13 UTC
        

Since the problem went away for now, I'll just close this as WORKSFORME.
If somebody else can reproduce it, they are welcome to reopen.




Comment 12


白川間瀬流





          2009-11-02 00:26:00 UTC
        

Duplicate of 277785









Format For Printing
 - XML
 - Clone This Bug
 - Clone In The Same 
                        Product
 - Top of page 







Home
| New–[Ex]
| Browse
| Search
| Privacy Policy

| 





[?]
| Reports

| 
Requests

| 
Help


| 
New Account


| 
Log In





[x]



| 
Forgot Password

Login:




[x]

